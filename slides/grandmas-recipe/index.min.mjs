import{QuasiFuchsianGroups}from"/applets/quasi-fuchsian-groups/scripts/class.min.mjs";import{Lapsa}from"/scripts/lapsa.min.mjs";import{changeOpacity}from"/scripts/src/animation.min.mjs";const applet=new QuasiFuchsianGroups(document.body.querySelector("#output-canvas"));let lapsa;const canvasBundle=document.body.querySelector("#canvas-bundle"),resolution=(setTimeout(()=>{document.body.querySelectorAll(".wilson-draggable").forEach(a=>a.classList.add("lapsa-interactable"))},500),1500),maxDepth=250,maxPixelBrightness=50,options={shelfIconPaths:"/graphics/lapsa-icons/",builds:{title:{reset:async(a,e,n)=>{a.contains(canvasBundle)||(await changeOpacity(canvasBundle,0,n/2),a.appendChild(canvasBundle),applet.changeRecipe(0),applet.bakeCoefficients(1.75,-.3719,1.8638,.2691),await applet.requestHighResFrame(resolution,maxDepth,maxPixelBrightness,4),await changeOpacity(canvasBundle,1,n/2))}},untamed:{reset:async(a,e,n)=>{a.contains(canvasBundle)||(await changeOpacity(canvasBundle,0,n/2),a.appendChild(canvasBundle),applet.changeRecipe(0),applet.bakeCoefficients(1,-2,3,2),await applet.requestHighResFrame(resolution,maxDepth,maxPixelBrightness,4),await changeOpacity(canvasBundle,1,n/2))}},"grandmas-recipe":{reset:async(a,e,n)=>{a.contains(canvasBundle)||(await changeOpacity(canvasBundle,0,n/2),a.appendChild(canvasBundle),applet.wilson.draggables.worldCoordinates=[[2,0],[2,0],[2,-2]],applet.wilson.draggables.onResize(),applet.changeRecipe(0),applet.bakeCoefficients(2,0,2,0),await applet.requestHighResFrame(resolution,maxDepth,maxPixelBrightness,4),await changeOpacity(canvasBundle,1,n/2))}},"rileys-recipe":{reset:async(a,e,n)=>{a.contains(canvasBundle)||(await changeOpacity(canvasBundle,0,n/2),a.appendChild(canvasBundle),applet.wilson.draggables.worldCoordinates=[[2,0],[2,0],[2,-2]],applet.wilson.draggables.onResize(),applet.changeRecipe(1),applet.bakeCoefficients(2,0),await applet.requestHighResFrame(resolution,maxDepth,maxPixelBrightness,4),await changeOpacity(canvasBundle,1,n/2))}},"special-recipe":{reset:async(a,e,n)=>{a.contains(canvasBundle)||(await changeOpacity(canvasBundle,0,n/2),a.appendChild(canvasBundle),applet.wilson.draggables.worldCoordinates=[[1.737,-.224],[2.337,.987],[2.329,-1.673]],applet.wilson.draggables.onResize(),applet.changeRecipe(2),applet.bakeCoefficients(1.737,-.224,2.337,.987,2.329,-1.673),await applet.requestHighResFrame(resolution,maxDepth,maxPixelBrightness,4),await changeOpacity(canvasBundle,1,n/2))}},animation:{reset:async(a,e,n)=>{if(!a.contains(canvasBundle)){await changeOpacity(canvasBundle,0,n/2),a.appendChild(canvasBundle),applet.wilson.draggables.worldCoordinates=[[2,0],[2,0],[2,-2]],applet.wilson.draggables.onResize(),applet.changeRecipe(0),applet.resolutionSmall=500,applet.resolutionLarge=1500,applet.changeAspectRatio();let t=0,i=180,l=2,p=2,c=0,o=0,r=2,d=2,u=0,g=0;const h=a=>{var e,n,s=a-t;t=a,0!=s&&(180<=i&&(l=r,p=d,c=u,o=g,r=.15*Math.random()+1.95,d=.15*Math.random()+1.95,u=2*Math.random()-1,g=2*Math.random()-1,i=-10),0<=i&&(s=(1-(a=(Math.sin(i/180*Math.PI-Math.PI/2)+1)/2))*l+a*r,e=(1-a)*c+a*u,n=(1-a)*p+a*d,a=(1-a)*o+a*g,applet.wilson.draggables.worldCoordinates=[[s,e],[n,a],[2,-2]]),i++,17===lapsa.currentSlide)&&(applet.onDragDraggable(),window.requestAnimationFrame(h))};window.requestAnimationFrame(h),await changeOpacity(canvasBundle,1,n/2)}}}}};lapsa=new Lapsa(options);