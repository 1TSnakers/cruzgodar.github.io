import{QuasiFuchsianGroups}from"/applets/quasi-fuchsian-groups/scripts/class.min.mjs";import Lapsa from"/scripts/lapsa.min.mjs";import{changeOpacity}from"/scripts/src/animation.min.mjs";const applet=new QuasiFuchsianGroups(document.body.querySelector("#output-canvas")),canvasBundle=document.body.querySelector("#canvas-bundle"),resolution=(setTimeout(()=>{document.body.querySelectorAll(".wilson-draggable").forEach(element=>element.classList.add("lapsa-interactable"))},500),1500),maxDepth=250,maxPixelBrightness=50,lapsa=new Lapsa({shelfIconPaths:"/graphics/lapsa-icons/",builds:{title:{reset:async(slide,forward,duration)=>{slide.contains(canvasBundle)||(await changeOpacity(canvasBundle,0,duration/2),slide.appendChild(canvasBundle),applet.changeRecipe(0),applet.bakeCoefficients(1.75,-.3719,1.8638,.2691),await applet.requestHighResFrame(resolution,maxDepth,maxPixelBrightness,4),await changeOpacity(canvasBundle,1,duration/2))}},untamed:{reset:async(slide,forward,duration)=>{slide.contains(canvasBundle)||(await changeOpacity(canvasBundle,0,duration/2),slide.appendChild(canvasBundle),applet.changeRecipe(0),applet.bakeCoefficients(1,-2,3,2),await applet.requestHighResFrame(resolution,maxDepth,maxPixelBrightness,4),await changeOpacity(canvasBundle,1,duration/2))}},"grandmas-recipe":{reset:async(slide,forward,duration)=>{slide.contains(canvasBundle)||(await changeOpacity(canvasBundle,0,duration/2),slide.appendChild(canvasBundle),applet.wilson.draggables.worldCoordinates=[[2,0],[2,0],[2,-2]],applet.wilson.draggables.onResize(),applet.changeRecipe(0),applet.bakeCoefficients(2,0,2,0),await applet.requestHighResFrame(resolution,maxDepth,maxPixelBrightness,4),await changeOpacity(canvasBundle,1,duration/2))}},"rileys-recipe":{reset:async(slide,forward,duration)=>{slide.contains(canvasBundle)||(await changeOpacity(canvasBundle,0,duration/2),slide.appendChild(canvasBundle),applet.wilson.draggables.worldCoordinates=[[2,0],[2,0],[2,-2]],applet.wilson.draggables.onResize(),applet.changeRecipe(1),applet.bakeCoefficients(2,0),await applet.requestHighResFrame(resolution,maxDepth,maxPixelBrightness,4),await changeOpacity(canvasBundle,1,duration/2))}},"special-recipe":{reset:async(slide,forward,duration)=>{slide.contains(canvasBundle)||(await changeOpacity(canvasBundle,0,duration/2),slide.appendChild(canvasBundle),applet.wilson.draggables.worldCoordinates=[[1.737,-.224],[2.337,.987],[2.329,-1.673]],applet.wilson.draggables.onResize(),applet.changeRecipe(2),applet.bakeCoefficients(1.737,-.224,2.337,.987,2.329,-1.673),await applet.requestHighResFrame(resolution,maxDepth,maxPixelBrightness,4),await changeOpacity(canvasBundle,1,duration/2))}},animation:{reset:async(slide,forward,duration)=>{if(!slide.contains(canvasBundle)){await changeOpacity(canvasBundle,0,duration/2),slide.appendChild(canvasBundle),applet.wilson.draggables.worldCoordinates=[[2,0],[2,0],[2,-2]],applet.wilson.draggables.onResize(),applet.changeRecipe(0),applet.resolutionSmall=500,applet.resolutionLarge=1500,applet.changeAspectRatio();let s=0,t=180,l=2,p=2,r=0,d=0,o=2,c=2,u=0,g=0;const h=timestamp=>{var a,e,n,i=timestamp-s;s=timestamp,0!=i&&(180<=t&&(l=o,p=c,r=u,d=g,o=.15*Math.random()+1.95,c=.15*Math.random()+1.95,u=2*Math.random()-1,g=2*Math.random()-1,t=-10),0<=t&&(a=(1-(i=(Math.sin(t/180*Math.PI-Math.PI/2)+1)/2))*l+i*o,e=(1-i)*r+i*u,n=(1-i)*p+i*c,i=(1-i)*d+i*g,applet.wilson.draggables.worldCoordinates=[[a,e],[n,i],[2,-2]]),t++,17===lapsa.currentSlide)&&(applet.onDragDraggable(),window.requestAnimationFrame(h))};window.requestAnimationFrame(h),await changeOpacity(canvasBundle,1,duration/2)}}}}});