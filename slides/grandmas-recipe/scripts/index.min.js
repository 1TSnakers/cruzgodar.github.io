import{showPage}from"/scripts/src/load-page.min.mjs";import{$}from"/scripts/src/main.min.mjs";!async function(){"use strict";Site.loadStyle("/style/lapsa.min.css"),await Site.loadScript("/scripts/lapsa.min.js"),await Applet.load("quasi-fuchsian-groups");const m=new QuasiFuchsianGroups($("#output-canvas")),u=(document.head.querySelector("#theme-color-meta").setAttribute("content","#181818"),document.body.appendChild($("#lapsa-slide-container")),document.body.querySelector("#canvas-bundle")),t=(setTimeout(()=>{document.body.querySelectorAll(".wilson-draggable").forEach(a=>a.classList.add("lapsa-interactable"))},500),1500),n=250;var a={shelfIconPaths:"/graphics/lapsa-icons/",builds:{title:{reset:(i,a,s)=>new Promise(async(a,e)=>{i.contains(u)||(await changeOpacity(u,0,s/2),i.appendChild(u),m.changeRecipe(0),m.bakeCoefficients(1.75,-.3719,1.8638,.2691),await m.requestHighResFrame(t,n,50,4),await changeOpacity(u,1,s/2)),a()})},untamed:{reset:(i,a,s)=>new Promise(async(a,e)=>{i.contains(u)||(await changeOpacity(u,0,s/2),i.appendChild(u),m.changeRecipe(0),m.bakeCoefficients(1,-2,3,2),await m.requestHighResFrame(t,n,50,4),await changeOpacity(u,1,s/2)),a()})},"grandmas-recipe":{reset:(i,a,s)=>new Promise(async(a,e)=>{i.contains(u)||(await changeOpacity(u,0,s/2),i.appendChild(u),m.wilson.draggables.worldCoordinates=[[2,0],[2,0],[2,-2]],m.wilson.draggables.onResize(),m.changeRecipe(0),m.bakeCoefficients(2,0,2,0),await m.requestHighResFrame(t,n,50,4),await changeOpacity(u,1,s/2)),a()})},"rileys-recipe":{reset:(i,a,s)=>new Promise(async(a,e)=>{i.contains(u)||(await changeOpacity(u,0,s/2),i.appendChild(u),m.wilson.draggables.worldCoordinates=[[2,0],[2,0],[2,-2]],m.wilson.draggables.onResize(),m.changeRecipe(1),m.bakeCoefficients(2,0),await m.requestHighResFrame(t,n,50,4),await changeOpacity(u,1,s/2)),a()})},"special-recipe":{reset:(i,a,s)=>new Promise(async(a,e)=>{i.contains(u)||(await changeOpacity(u,0,s/2),i.appendChild(u),m.wilson.draggables.worldCoordinates=[[1.737,-.224],[2.337,.987],[2.329,-1.673]],m.wilson.draggables.onResize(),m.changeRecipe(2),m.bakeCoefficients(1.737,-.224,2.337,.987,2.329,-1.673),await m.requestHighResFrame(t,n,50,4),await changeOpacity(u,1,s/2)),a()})},animation:{reset:(i,a,s)=>new Promise(async(a,e)=>{if(!i.contains(u)){await changeOpacity(u,0,s/2),i.appendChild(u),m.wilson.draggables.worldCoordinates=[[2,0],[2,0],[2,-2]],m.wilson.draggables.onResize(),m.changeRecipe(0),m.resolutionSmall=500,m.resolutionLarge=1500,m.changeAspectRatio();let t=0,n=180,o=2,c=2,r=0,l=0,d=2,p=2,g=0,h=0;const w=a=>{var e,i,s=a-t;t=a,0!=s&&(180<=n&&(o=d,c=p,r=g,l=h,d=.15*Math.random()+1.95,p=.15*Math.random()+1.95,g=2*Math.random()-1,h=2*Math.random()-1,n=-10),0<=n&&(s=(1-(a=(Math.sin(n/180*Math.PI-Math.PI/2)+1)/2))*o+a*d,e=(1-a)*r+a*g,i=(1-a)*c+a*p,a=(1-a)*l+a*h,m.wilson.draggables.worldCoordinates=[[s,e],[i,a],[2,-2]]),n++,17===y.currentSlide)&&(m.onDragDraggable(),window.requestAnimationFrame(w))};window.requestAnimationFrame(w),await changeOpacity(u,1,s/2)}a()})}}};await m.loadPromise;const y=new Lapsa(a);document.body.querySelector("#help-link").addEventListener("click",()=>y.jumpToSlide(0)),showPage()}();