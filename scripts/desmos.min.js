;(function () {
var desmosEnabledFeatures = {"GraphingCalculator":true,"FourFunctionCalculator":true,"ScientificCalculator":true,"GeometryCalculator":true,"Calculator3D":true};
var desmosVersion = 'v1.12-prerelease';
var desmosCommit = '1a7771e17a522bfe3f7ea4fa2221056e73ba38c9';
;(function (global) {
  var elt = document.createElement('style');
  
  elt.innerHTML = "@charset \"UTF-8\";.dcg-calculator-api-container-v1_12 img{height:auto;max-width:100%}.dcg-aria-alert,.dcg-calculator-api-container-v1_12 .dcg-sr-only{position:absolute;left:-1000px;top:-1000px;width:1px;height:1px;text-align:left;overflow:hidden}.dcg-calculator-api-container-v1_12 .dcg-tap-container :not(.dcg-disabled):not(.dcg-cursor-default):not([disabled=true])[ontap]{cursor:pointer}.dcg-calculator-api-container-v1_12 .dcg-checkbox-flex-container{display:flex;align-items:center}.dcg-calculator-api-container-v1_12 .dcg-checkbox{cursor:pointer;position:relative;display:flex;align-items:center;gap:5px}.dcg-calculator-api-container-v1_12 .dcg-checkbox.dcg-hovered:not(.dcg-checked) .dcg-checkbox__box{border:1px solid #949494}.dcg-calculator-api-container-v1_12 .dcg-checkbox.dcg-hovered:not(.dcg-checked) .dcg-checkbox__box:before{display:block;color:#0000001a}.dcg-calculator-api-container-v1_12 .dcg-checkbox.dcg-hovered.dcg-checked .dcg-checkbox__box{border:1px solid rgba(0,0,0,.5)}.dcg-calculator-api-container-v1_12 .dcg-checkbox.dcg-disabled{pointer-events:none;opacity:.5}.dcg-calculator-api-container-v1_12 .dcg-checkbox--small{font-size:85%}.dcg-calculator-api-container-v1_12 .dcg-checkbox__box{position:relative;display:inline-block;-webkit-appearance:none;appearance:none;cursor:inherit;width:1.1em;height:1.1em;margin:0;border:1px solid #bbb;border-radius:3px;vertical-align:middle}.dcg-calculator-api-container-v1_12 .dcg-checkbox__box:before{position:absolute;top:-.15em;left:.1em;display:none;font-size:115%;text-shadow:-1px -1px 0 var(--dcg-checkbox-outline-color, #fff),-1px 1px 0 var(--dcg-checkbox-outline-color, #fff),1px -1px 0 var(--dcg-checkbox-outline-color, #fff),1px 1px 0 var(--dcg-checkbox-outline-color, #fff),0 -1px 0 var(--dcg-checkbox-outline-color, #fff),0 1px 0 var(--dcg-checkbox-outline-color, #fff),1px 0 0 var(--dcg-checkbox-outline-color, #fff),-1px 0 0 var(--dcg-checkbox-outline-color, #fff)}.dcg-calculator-api-container-v1_12 .dcg-checkbox__box.dcg-focus-visible{outline:2px solid var(--dcg-focus-color, #2f72dc)}.dcg-calculator-api-container-v1_12 .dcg-checkbox__box.dcg-disabled{background:#0000001a}.dcg-calculator-api-container-v1_12 .dcg-checkbox__box.dcg-checked:before{display:block;color:var(--dcg-accent-color, #2f72dc)}.dcg-calculator-api-container-v1_12 .dcg-checkbox__box.dcg-disabled.dcg-checked:before{display:block;color:#00000080}.dcg-calculator-api-container-v1_12 .dcg-checkbox__content{flex:1;overflow:hidden;text-overflow:ellipsis}.dcg-calculator-api-container-v1_12 .dcg-checkbox-hover-container.dcg-hovered .dcg-checkbox:not(.dcg-checked) .dcg-checkbox__box{border:1px solid #949494}.dcg-calculator-api-container-v1_12 .dcg-checkbox-hover-container.dcg-hovered .dcg-checkbox:not(.dcg-checked) .dcg-checkbox__box:before{display:block;color:#0000001a}.dcg-calculator-api-container-v1_12 .dcg-mq-container{position:relative;display:inline-block}.dcg-calculator-api-container-v1_12 .dcg-mq-container sup.dcg-mq-nthroot{top:auto}.dcg-calculator-api-container-v1_12 .dcg-mq-container .dcg-mq-placeholder{font-family:Symbola,Times New Roman,serif;position:absolute;bottom:3px;left:0;right:1px;font-size:95%;pointer-events:none;padding-left:2px;color:var(--dcg-custom-text-color, rgba(0, 0, 0, .47));overflow:hidden}.dcg-calculator-api-container-v1_12 .dcg-mq-container .dcg-mq-placeholder .dcg-mq-math-mode{font-size:inherit}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-suffix-degree .dcg-mq-root-block:after{content:\"\\b0\";vertical-align:top;opacity:.6;margin-left:1px}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-suffix-radian .dcg-mq-root-block:after{content:\"rad\";font-size:90%;opacity:.6;margin-left:3px}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-mq-editable-field:not(.dcg-no-fadeout){position:relative}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-mq-editable-field:not(.dcg-no-fadeout):after{content:\"\";position:absolute;top:0;right:0;bottom:0;width:7px;background:linear-gradient(to right,transparent,var(--dcg-custom-background-color, #fff));pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-mq-editable-field:not(.dcg-no-fadeout) .dcg-mq-root-block{padding-right:5px}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-mq-editable-field:not(.dcg-no-fadeout) .dcg-mq-root-block.dcg-mq-editing-overflow-left:before{content:\"\";position:absolute;top:0;left:0;bottom:0;width:7px;background:linear-gradient(to left,transparent,var(--dcg-custom-background-color, #fff));pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-tap-container:not(body){position:relative}.dcg-calculator-api-container-v1_12 :not(.dcg-focus-visible){outline:none}.dcg-calculator-api-container-v1_12 .dcg-text-selectable{-webkit-user-select:text;user-select:text;cursor:text}@font-face{font-family:Symbola;src:url(data:font/woff2;base64,d09GMgABAAAAACD4ABEAAAAARmAAACCaAAKFHgAAAAAAAAAAAAAAAAAAAAAAAAAAGi4bEByCKAZWAIIECFoJhGURDAryXOQXATYCJAOCUguBLAAEIAWDIAeDdgxAG0M9BezYI7BxADwstyWKqs2cUZSGUSr+rxM4GSLUP2Cd4VFvveoWPPjGGlHRprrWFdMb966Vx8/CCFNDBmwtoif87bvGZ4lgAk4QB4AYOas+gSEQI+APq7A2RsSQ2MUyj5Bktv0xZ71PkiXbMkmy45ADGyc8iTN2aPZndjl/fhbwA/GtDCcAOu2tQClTyjc+tdfyAG2zI8XaRhi5oz1FtBGTVmywwA4wot6lEfHT7THW+eUqdJE1TFfCv0NNfROfyHGvPtVDWMh1C+ubaTuZhFCVYXnh4fP2/lrdyKKA69IEB0nnAQeayADTiBPI7122/N2e5O4o2m6jORwPeXVMZkOduaI0RmMPbDUK61v796sf8W6I9gFumFAYlOTCLldV9UxQxQgkleOT/5lwcTZg6zyToQQJfgD+n6608nszCwaWASvginsKcdGmaUYzkm/mS9obafdAOtaGJBPtXvhQdyEmKQTQJS4Dfbh0eizjylWfsklRBZ7/n9bsfZnsnvdGsY5SHRKNoiskToRky8/Pn0MmDFuy1MzQWobehQLHQanqSpM4bIxWj/ZGwYj5dz/W+mdqtsdpSEQGzAgEeCG79/ffswACYGNwMRpn7YDpYSgjQuV6vsp5wbSN4DHtWkB9d31OELUkNxMg7LlJGQDhiMtXAARIADDFHPV/NegPYLRtkUbbYuOj+gU0JVujKQvOUBcwRcPkyJ2Iv1DWkMoDxxwC63x225GKzUiBPTLHamSIOTJAHulpHF6CY1wTEVlbF8HgDfqcRVkOXGmKIXGbM4YuxrqOP+1k+HzWMjdg2dvxCFg4BLDu0bYCCeiJIgCA7xBx+II0PvjgPMELZbFwAPARQH0B6Je2YgEOcHxaJvq1AvD+sH01gNxGaBIBEBioUpD+4S6A8YsqIHIXIUqlz/gJOVB8pE4wSIKT1pJwJEMSSKKRLEhckpDkRUqijlLnqYvU1/Rj9Kd2OWSAWXtclj6WxqexWeo+PUmJ6Mm2C2fFUUeMY/5M/JH1I/2O/qrLqtUqc5W+Slo1XTVcRa8iVuErgP7Lp7YbQzcGb8T/euu1DIB5/Eb+7z4AuUtdSw9DylsgS9bYDthmUCsz41zZ8jDJHkuzMht0yLeZvwwyvlRG1BEp1mW3owRymJtrYDTAbyovUKZaF8pVQJ71VcxivdsGxodeIQdfEoYfqm+pQozsBrUshqgwY5FUJiRvIA5REcYB/Ux1LFBG5DG5JTXG15whgdhMLJWtGP27oTzcLPtZfimJLlW0PlG1KpSTR+oPKb81Rm1kuCUZQw1Y83KZqt58R6QRQT5RZ6hZ9Tu2psFIsSDbSvomI6uQ9fgnjP7dUCehLiBnKo22UAVTYcuDLfeCm/Wd+hGJcqOrtIyUyjU5xtoGo3UqsUWLkV3oFLfly7BS6RabZWDmSZ4blw6uB3fHn4lyg6Ne9RJs6UItknxVGrFUIMuwVceiLTdScCAkleqi4apLdHvdm0g0Aq9c9ZHK9pVikBCC0Gg8eqXHaAavQCBYK/MJasaokFzWcq2EtoA8RzK/IULchlVsj5wgLgbGgewGxi1JQUvOyb5HrD60rPUZ4IDT8lrjrbkwkXxVV2XBde13pP2UAWMROMHh8WA+ewSQoE5PcW6UZQmXZeSdIIG8GnmEuJz4sUbSAoD4lbeAQDObquoJqmKSsUI3x1C1XDLhawzpyYEG/wIG48Y6/nT5WwD2A4D8FHTHADjbVAFk/+8NPUUxgTEQ0ZQkvC1+T0Nu22KlcRNFbtNahlJxFVU/DIRBc3pHM53yZUA5WzNncxWG3YLPueuoWnt5iMzqqhRyqym4DALHmfBp3q1FJHJjt7ZLOOe6zhsx5zaP3KguXc/bdmSad+Nd19VO4gkjB68lh0QcYmLHBS7nYtfDhBQRxbe8tFZQnPc79Z16dM9K7YkhRAjviC2hpStOHwUXrpVLAAX3yinkZHpRtWol3lh5B37v9O3f2ybVHQLZYNk1uXfEv4DTTSCAVeltgeSM9yk4fu6JhORdf0Ie0poeBj40g0jG1/4f+pjeDHlpS1IfeZ0YdVYkRwkH4iox1xm3d6Yk19sTcnlStC2BGVIK5JjYlsgFmmYBCcynAhnPcsYKsoWaMup4rFUZ2KTeslJDnoAzzhOdK9TlJJaZhfeSl9wtXD2QqVKf90j1jgXbkm/VEqOMoXb5Q+8NebAE1kcLpVguzwOVWF1mSImNh7wQDHlvhgZ7VtymACuQ9aIh650yZLJJnS8nKPZz8WPr84CQFiUrlMJKdbSHsVbskwM7tZg8kQU1LqfmWQw1uo364AiI1W1Yrgf7MKzHwxRUIlfngQL7csW3dT6Of6x45jTeIqlQRPFRo1BTye2qwqDCOb0hpy36QKiY8ufeegyBhxVDku7aGL59ahAm8hASu1Jd9cUkwYExJmaeM0hQDC5a3oYnevJfTqY8WzOjCQjFn1fxtiduMJoMfYPOp8+4B6imgNUZYiWcamQFiY+G4/ZT/O/UUIN63RUWOZDMOatGRw9zqoZmWWHVU34n72CwzWR1nENuThqUTRJfbta+LZCn+ZKjtXN7nm/ICe2qcdYC1CFdOUyZyvvtgZ0aprxxj3cqtrlklJSCROy7FdW2DV+vzjt1UV4IFHwBid5tbrNunUtuyS9K6AStgCkflIrXtQ/f4F1w6m3t7LZsnHDeN7u+K7+skMLt3dH60ymtwRqeGzAExPIi92NbflGuLYDwuBsIQYY3BtXK8xpQtED+0rLg1ISj2lAWMQNZEpUWeZFqxS1dCM8RbshrHgnk3nsCLuhOUwROmCN1THkmFpw6WGG2pzBHV/6TCWRBDkzGTYh5xnPqE9SYtocUdw0IgjRql4VIAOd0wuLd+rrzQMBoAyHonjy1165AXvs5Bjk3XhisreNOpxQ2mgjF1AbR1lFg2m9n0zg32c0McXY/nYwzhznDhkys8rsbQMNFFlCfqUVN2iBI3xJjRzgkr+ur7qJ4OamhNrJ+pTQf8RzSCUzYr7Bi9NRILtS1jlTvzLYSPgrnX5AJKOhSHziOCSHYtYKjFrAu64JrShVZAS8B5e3bAzO2GB2FdEQpKqnf4xmLjcdVa3F83z57G/B2an68Zttu8bvHgff1E3au2XEwJ6oik2qMFoWoIxQgzFc37lxxh/NxBnAk1t2r5rCStIOffkJusLcts+N66NcNdNi3ODkb8nRzTi1KoiG4jY+3GfuedS61PV7vXd4ukdbNNuqah45OksfxXmwYIB+8jGLcXfUt1skKXYSht+PkHR+lCwla9J88shSjbi1Q5CdUC2nBoUIU0KkR2fhvg4AG4FK7eV7ylt1bmArWYb+Fy7byR1dGIa/zul9YYSUjIS2QyxlsPZ6ZK1MSMti0VG8nDNFV6uDtIhG0Qn2bzuabxkWxQyPvClXGwrZAW0YA5sc0KWpu/B+uvyw2hhIEMqaf/0VjdJpEA59Zw+skldc0phAvnfaIigJw33H8rYdPsjaG198ZMR14a1b5W3RKYGVItKwMIhHPnUjRlljmVWzt/UqYmaC0X2wa2P6F8kxoOkRjc2YSUn58ZnFuRi6pKHPJHVs0LCZHMpjW5QdQE+mbrCgKgsKt4hek+5nZegXiCjsTQI8xUbRAAPWrhX06zKCV0qE/yi2NVrNpIge5AXO2Y2eFG1aROmmo9N4cozPuRCFRilZAzbXfckPL6nGnDNyR7ydQKLPrRgyG0XUzJMXHm3K1cvPB4TUZd/ceHocgRiCGoYnHYYosaD4+dAlFFH/hoRzmtNdFsav70s9C0/bAdpq42+TYoIzZwM4zVF3WrGnde6g5Rz3qGaDG7DlN2LBde2hqjgMPHyG7IIKoZBIdguiken8K9a1SKWSqrxAEEp04YWxOtjAvoafnA4mgi1ltHzhu6nEqdBcX6qbqMXSLcyB3Hkfrmjb+SCP2LNv/ygY4XqqXTpT6DRe8/fDr/nLk+Caf4fxPD+CiE/IaJdv1oMT1ECXnKgSMmr0Gi51vyl0vEotCDnr4wHrDa8gemQ7jnG/V9RomUVTiIDH7ThJaje/GEaG4Hd//k+PTccTSLQeuv7sht55pjOsuAKPiNEqymLeZyvzBxzfDfv+hhb5Zh4oLZodGmrMNZuyd0rpcRhPnNB/4lUk2RHY7ePBTeLwkgYetxlZL33lJbIVbnlW4oa3MPbsxk2j5EXjL1QqPbk1OrE84FlQDR5SnMWejt1nXlwZmiAyUohoJcvp0udlW43P/3XTLkS+fMK2hTKGQHCnKxcRJiuLcwSocqtefsOCYIS58sQvUAZeWE9XXX1T/A5sAz0wT3yLkYHAH+1fu9iuTGGcZjHMM3AfjxLmG1Fb/JuvgMkqQc0ORPE8ojcGYQM0kgjpq0uVzm9sSmqC3jrVlZDVUbniKMBv0b8pTnZK3evvfKT5Jd+H/HU4djlFwH/XkZjLEwSlQVAoK7RRcKREzz9ebjuNTR6h+7tW1tYJKp+RN/1FjDHjZcsFGbhNZPObaaQ2aG7ZE1RLv6HaZ5x7Orf695b3eF/QZ77AXbLfHH7i7+r3SZTRqG/J2CPrk2HNGhzI+IDxe/95J6OGfG4/9qI5k+dh6JWW3eWbPtd9cyDuc5nv5Xuv/RRYFvgEJvamLme8brteenPv9z/5GuYz9VX/zUmPtTLGfbYRzbmIMVBiiOU1Bx3r4bPITMYv8zY8ZFl2QLKc/1a2Ha+xMDrZ/2X7I/hwx3G2qpUVUZx4wHTpK8fWoQwmqHZM369uhLV/5IYnLcZ5xV4zvviG73Iu9LZ/XE3Q1b9d2pcqW10MQRirGmc3p688JKcWogWGpgAT/XEOpUnZBxMoZtnueSmd7SNAEqHk1CSQCBwA96SCwYkeVChBUqvZ1NxHt5j31oB0KPy9bPOdsBrtgS1UBBkZzAN5uWGFnnA3k/CAzfVUQhO/FSIP7NEXcGB25NzOmj9HHYMaI5ToxXE1RnzS4F4Mv/ugIPR6A/tHPrqLHshVhRd2Ewm8HpIcv+4oX8ybprKpMX0ifcrHHhXbl5ull2pPQZvPaSJwnzpSdtXXmf9rT0H7K7mpd48ConU3aMt6nuhF9M7P97U+aNPxAMc6rrVwNzfFD0i9T/JCcrb6LcmzxiNOdjQ8MyFaZAzHvZniwrKteOicCTMvdj8bKtGiWOJx4YkINw+EhLZmWPKQ/PPVWzM3fNptq+c8+4KIAyrYQQ9EXXUOBBX14cJM8pTKm2bkwDiYhB9Ciw7KWujEneyqlrr6fIwIs4CZxbfg8F0vk765GW4zz/dji/waAaFYWJz08zjybJo1EioNbZeaekPyWSkK2W1IPKYto21jmwQtR8wxclETHsqTW10Ktk5xiAjJrgsAEw4ZGs/f7de7ROV6W8tX4vCge18qK8Sg8gAl/X12YzIMlLKFqP597xcYeciGMfbfNBV1KYdsmbXgo+637tiuip7VSb1xovhKyYv78a+DAtd4fHF04GVwtS7xzLegMb4VS20GZa0G1d78crhk+W+/Y8ZNuLqD6z8JCWAP84yzNMUXGCeFa3ijlhF5la9GDgMNrN3S6aw4mOXK3H2afSUDCYOvW0Ssrk2gbnXEiiPoJvf+JCpQ2ecpYoFLFnVOBWltRn5tb3y4+oTcbgbgLh+fkwOF38QQAXL2dat1imeH7i6Fe4Xqj2lG7QqXSUPhRLaDibFzwoE6xK8vGaV2y3VgjkLLcojazNVlWG3lMDEn9JOSvoCtX83WTZZ0vEsfLKNy0dEjz9K4N/jzK7sToN9N4dkeC/20BcxDQubc3WKQct5EsK5zThhmSyEjdHt0Ov91dsd05PXwyP3w4P0+CoGyBrQSjtdsDDh3Ket4dAC7gNadgAX0+Av78AXgBu+G6VJ+9dkNlp7rDFv/8ouyHmrYd/PX3iMZcf0ZwKNWFRHKhavxR6C1KYYVQP3dAQbvFXiHqIG0H0UBjsZy+Nd5wHm5guGZFkbXNdfV5gLMdzsBWW7lnr9VRqMsVCATVYMsz+AV0cU5h9k1x3qyCoKn1DOSFanAK2vZ2uU1d2zxvxdz0jd937zizzUuHEPsOt+4P+dO9jF/ysZQTzFgoCfD3l0q9OV7ojtqoVglqLT9d+0OmtK0PRMNnYfKCRWBERHhrRNOcRfxZZvAwEMQ1EnwB2iLqLLDfonVPTwlJhdZZg/wByFsfB/jfONuL+qcxd/BSAonDFPFP/NX8cDE/oXo+TB/+4Vkv+ls0kSgsjRyu8MrzttLpCW313d0q2Zi1rzWyPUfAbPKaDQHisyPPfQYfzgvIC9AmHgPvX8Z7AHPPGYlGGu28MoWUWHjyG/3U7ym1B18HznFzdtW7IXPj3V9/WjX9I0ceZg42rk+Hr60LPe3TFD29e9l9NFaNFuKT7CcWkAOuv2y/WLd/+XNTy9GafXE7TWlvo+oapquWko5KBoHYN79jo1UjMtlI4sUC0NrPgGizvCTNFawq1JWbswnjANXXFLC7nBxCRmiErVlTEvFsxrjP5pmv+Lxt+86IbABLQAvpfDU6PzWMjY+IBTp67QKufPbpZwJZjiYaeJem3TVW2j4GdTXVcWgTE/XGd7sLdKJ039MdU7RqDSEgBIQgajsdwvV5XXbp14GgNf1CyhcWFXjd8frWA9R27Q3Qf1xBaw24EXi49LNv9ua+zKX4dvlQlS2Tf+HN6NjyM6+vRoa5FKGK7+AQwQywfSTyqwrq6PER8jAPxaH0AhPZmgWsrn6RN1l3gpcZtmWLf4W0s9dHKMR8EsdbFtCT7F4b3bXboDfrkurXDERKn/UcftWRWxb2/3hpWM6YtO04Rs7TN/boOfSqM6887L/xsjBlyKYEMOC+Zpm+SasfbHJo8M1Iih5EW/v9c+tIdc3JPwg8MfZ+KlkXuh+3Nfz8299T9hIRp9vV21Ue8K2zdfmyDy/v+YxWi80X8cFb+18IcMtdbfVnns6usX0+v99C3I2ZNbu/eFO5fkxN3HMvuPF7Iz9m1/btal270i99bhytUQjT4K3z4MPHn84O27js6vP7/7fC5mcK+eXVsp2NK8zkT5tb2HTxtqsAoMd4Mzv1++LnDcOOnysGy2byC5yLD3znZNN3gG0fTO8YwWj1dHMwi9ztYkyA4bi2rl5Te/0480fE2l1tyUm9URvpwrlw805aVPImoaEdHcB/Y1EG4oFBVf7/Z6I8s+F7LYUD4LmY4tWkf4o2+jBO+z+fsYv2CxiGj4DPfg4AgOrDX7a4R3yK4l5ALkABXaFvJnvQH1di8NNwCvbTb5Y0nf3/59Zob88+vO7/R8tflw3EKQD9dulqcA3BIJoU/JLcGCXUt3TSiNlNNfNkiSoox/AR6EyFMqqESt/blV41CKBQOaCbKn+DrAwMtGCApffz4r1AMGAjiwHFYV/CdkovIVEz6guA1NhNyLfyyyNHRp1BqyRXtTNypHool85lGphdylp6TYAClaSe+ISHSljXGPpHnhBncunfmEvd5XwQjrmqMjcWEhpbPKXGBgi6mqEa1G5oDWrYh1QE67GNJhj+cbmNRqJfuWzdgKytrOclkxLcK4Zl6mBIQG2SRDr9W23RyJVgiX7M8k9wQsRndrO7SatwrXIe2N+cG1Z4KS/9B85Kz/e//HcaeuRVJdf4qI7mRpj+k2SDgInJR0/fHBkNeaxkSKIIKm2zCSpqU8MkR2GMOSEHAZIC9aTocyY3ix6HVHSMB2Rgs9nrAvjquQGOpve5dd8t0xLZi2HRYGVSoEjKtVNpd6XmMiHNVNKrae1BBsgvyz2akmyPlqJ4iIAapSyQqmgKT8Qm10fv2hlz0h7PbQlpFFefpBBiaBBLDKH2iWbKkogxw2l3Jk7UQdYL7aaIXbuNTAbNzPdOdzJWbO1BNUyQli9di1s4r3OVs1xfz/MTPLRoXyBJorKDcxBTFKVQ4WFExwdIWZ5n22gxvlstwUH9dRLHhwRu3B0G5D2WUIjyCNr4Bmcxv629MTehNvr3tZ/UGp8LhtcZAr4aSMxfbqjp6rjYd0DaOmr0hB7TN53e1cC8HCXCZKTkHj87kqrP46aOUmM8bEnOOijlC7STKDX7CkuZTwhZjKlnaqmx6T/R2DKXxipDlM+h1KsNhFpFSUPrNqrW6DUqpGp57trpm3//UQpXFjelis2/tnZjU+SFYlP2torx1rfhHB9kZDkOnUQsCagE7NFVBUu0SqPLavR9weDMiIH8nZ0G8RRA8hUQIYA6dxDNO2dOepdM2YsqoYBGflFzxO6IzSR1S3bzgW+C5KE9ldwkjRixcICFVYZL0opdWN68r51AmIyrnyUpp0b1XrjEESwe0QqYQUDBh9BJ4aHnucCoJ1QHljY3mqD0iU54jmESJZlskmnYaz9CLotah1atunQc1MNPqkP3C30HsLVGq4jGoVYhGHIZzqgYnGFWOUWDqWP23a+OGUsJ1RBOh89KKeQPYkAjEB50LKF8qVdP9PfP+3TceXsjzEcn3NvbPADOoxtzyIHicJJemjOA0pZu0xYsGwBLTmGFMhnaAwZPTkZ1gO5AO6BW/6H2e3qb1V3TBRsaWV/wN0FG3brlQdWj6v6uEyHWm4q+ucm95rMvSZ5jdTKdMDUlNvd22vSzeA/TTV32H9iSdmtqHvr4Zjs0o2tLYTlJH2l/sNvpPVrsXQwULG8itTrxXTusyKl1gpIC4RIS9XZHbCZUGUrojU4Hh3JiKNS8q1JqBQmZfkRDI0nF1YQJA87BsagFWcdwHMpF44ajPFa7uxcDVAb2xWQ2QogP6RmTLGVcaKwOALlSicilf44nztWQVJ5fVIRYxV3PmzJEj5OQsFHNzrctapkxmAkHyjltbfnqKSImXKV+QWye/3Hu4PHSa9qow9GESvY7RQXlBo+oqdWMKxYea42Pe5unUmOyPWQhKwScm7QNTxpqCeOGq6NV9C8q8DaWYrJjK00G4CVN4bWH0kl0tmk87xDgDFkqN2cngYRiTFgwYO64EU5iGibYwSOJXikGB27c+VhHyEADqjTulCUeNlLfWcL4HemUUh+xjqu2cOB5WlBjcIaeZIdcdKsfZ4kIvKNltZ4FCjsW4DijPdFjem24ZS2NDAZJN2QW1p3rpGRi0pgNWJkZlCuS5YaFsTwZZdpWSzLj1uRZfJL9gtpDlnUutblqaG/lizY4LQX17T5xMElUt5fkURyA74ucSWeaQWzuTript/TKp8PSz+4S251NF2fjK2+BBRaH6RaVNB4MW8bXlscynJm8OEvKMq/+oJsuNR17J4cpl0Jr5JIy9ruot+il3l9fWb/OhVp33bd182Qr1bnZ851ff0rtGUooeJS97reaB2l9vr0p1ZnwrxKuN/BHnjloLyyC0V5dNCr5pctNX7TW0qMT/FjR9BUhuaZ4C+kem5L6ZcMD19WYFkubecM4sdk1DTOtKKLPKj90d1d9Xa1LHq4xpViyjIAcbfyU2fjVO5pzDipeukjcxksIT5b0mUvezcuMy3g8ScmdGRsdF3E9J31wnei81WjRltpd1Q1CtdbaZpiMnDNK4SWhyXF2KZULQ3uuwnA6dW4sbY9lGEWjps2adnydn9101S85HPjoYcnRHqdK4+PsbAYUnqnefI9nVfc0u6b3dLMQezyMlrXsLpk749qX46FiyzH+pFkzXrfGcGPCY+sba1hffHHDvaNL26Xz5mnOCy5M67KdXLoc8gsyPdzoGBrEDclHB9xCsfaDW7Dpwel0Dnnz3f653d2duyfu3oP3RfdM3r39tm236+JS49PDi/3yr85Ljvd4oKZrJJNn8lf6+uqNtzvD7h666Kb/FL+1k0uGrNztfLhWvGXsKAoJOf7Ma7SSbrnnz25UKSMIRZ20UtUmOgczwpwmIItG3QdD+/eLT58Uzh2LpdL8Yh2pH/05/pvhsUogR+2S0V2pBh06wjRuzP7Rpq2CCix1b0QFCzFU2Q7GtJEwMY4xSnNG+waEpQNaMITgMcqykQ9KgGBmb+7FbKQTSDsiVLglafrAS1R3vuECY8BCZmwk9N48IErO61IqQXvZEqIXTMEmKyXeKUgXGKHUTOmV2mguseVVob+KgYTayK6ictJpvfF1mQp0jnrmh7pEyJG7BHY60hgvnSiFvgyNrBDRDkUJuSiJarhSdG6nWggsJ7wJHZbnTprjcmWSMlj4n83tCZvaOWMPCueuQVSNnah3AQD41VXtBvw5xlv+qrprAADAd6JzBQni4f4D/l/575XNBcAxAG21dWPScUf6/+61vdJq8lXtZ1iZwzXl0/BXfPsjP0G+gZNsjgIGeB1R/ha8B2g+VhF2fBBviE6m4IWpDS04xsMlKAhYlo/Hn4Znyp8mv8Ju9G74KBz+ltZAa9lzeHUGJ7lbtFdCh6AlKFm7B0aXHIWRJYC7DUKQe75VjXm5dfQCgU/2NmRaJykPPS2ZhqzsNOxhH4UY3Qv5NLyFfhunNECiBJAU/wOYYzpVSxdotnY/IFEwJANiCK0LAF3GeqkPETItffgbyxE4L4fWD+TYoWyjNxuak8RD6KJcx9FPAKYhricwzr4Ak+zrpmmquqZRBUtRJmDt71D4RwhPTpNAKVESkMgGCvnyLE4WuSC4ukgYhSS2GpQgCXVpsrmFS6zzlFQZKYKwQBRolpLHtWX9CvZyUCJLvAkyxZEueCkKKCq5RZLaZjKGtvh7A3McGubKk1YxJS6TA3eDpTZ0/Dpir0gcneEzFK3dOPkgEimIVwLUoqn6a1oqOQpE7uslycyOLoLqW2SCe9zf/60QNN0I+IGpK1tszlpPgY//RTp06dFnwJARYyZMrQcicscRLUasOB9hGmZhMOBIkZl36LdgMVAoUKJCDQsHjwmmmOHEsIYzvBHQo0+v1yZDx3RNDwOhbwZmaEaY1qEzjM3ETG29gUY0kpHLCxRp1iP5toRnVxm31tjPTEqLoxdthwsE2egRDtZZm+W2GKUiaT1yUT2/SFlaeUdYDpusY5aVdcqyl3PVlYqktdj5VK31zhrFydP8Aek+htY6b71cDxWnSMlMEkEeTVX/kbb6D3Vr1EZ7G/W/u4wXrFr5d6fI0v5ZqRLtRXXWLLtjGsbwbIiM3SChaNQ4vu0QodOLYz9Fv4e2CT7NCJTNI9h+w/xqVeTaFHIfVSCVzS/bYEI9drMMUPXgHBWxmA1L2saXqwILAA==) format(\"woff2\")}.dcg-mq-aria-alert,.dcg-calculator-api-container-v1_12 .dcg-mq-mathspeak{position:absolute;left:-1000px;top:-1000px;width:0px;height:0px;text-align:left;overflow:hidden}.dcg-calculator-api-container-v1_12 .dcg-mq-editable-field{display:-moz-inline-box;display:inline-block}.dcg-calculator-api-container-v1_12 .dcg-mq-editable-field .dcg-mq-cursor{border-left:1px solid currentColor;margin-left:-1px;position:relative;z-index:1;padding:0;display:-moz-inline-box;display:inline-block}.dcg-calculator-api-container-v1_12 .dcg-mq-editable-field .dcg-mq-cursor.dcg-mq-blink{visibility:hidden}.dcg-calculator-api-container-v1_12 .dcg-mq-editable-field,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-editable-field{border:1px solid gray}.dcg-calculator-api-container-v1_12 .dcg-mq-editable-field.dcg-mq-focused,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-editable-field.dcg-mq-focused{-webkit-box-shadow:#8bd 0 0 1px 2px,inset #6ae 0 0 2px 0;-moz-box-shadow:#8bd 0 0 1px 2px,inset #6ae 0 0 2px 0;box-shadow:#8bd 0 0 1px 2px,inset #6ae 0 0 2px;border-color:#709ac0}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-editable-field{margin:1px}.dcg-calculator-api-container-v1_12 .dcg-mq-editable-field .dcg-mq-latex-command-input{color:inherit;font-family:Courier New,monospace;border:1px solid gray;padding-right:1px;margin-right:1px;margin-left:2px}.dcg-calculator-api-container-v1_12 .dcg-mq-editable-field .dcg-mq-latex-command-input.dcg-mq-empty{background:transparent}.dcg-calculator-api-container-v1_12 .dcg-mq-editable-field .dcg-mq-latex-command-input.dcg-mq-hasCursor{border-color:ActiveBorder}.dcg-calculator-api-container-v1_12 .dcg-mq-editable-field.dcg-mq-empty:after,.dcg-calculator-api-container-v1_12 .dcg-mq-editable-field.dcg-mq-text-mode:after,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-empty:after{visibility:hidden;content:\"c\"}.dcg-calculator-api-container-v1_12 .dcg-mq-editable-field .dcg-mq-cursor:only-child:after,.dcg-calculator-api-container-v1_12 .dcg-mq-editable-field .dcg-mq-textarea+.dcg-mq-cursor:last-child:after{visibility:hidden;content:\"c\"}.dcg-calculator-api-container-v1_12 .dcg-mq-editable-field .dcg-mq-text-mode .dcg-mq-cursor:only-child:after{content:\"\"}.dcg-calculator-api-container-v1_12 .dcg-mq-editable-field.dcg-mq-text-mode{overflow-x:auto;overflow-y:hidden}.dcg-calculator-api-container-v1_12 .dcg-mq-root-block,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-root-block{display:-moz-inline-box;display:inline-block;width:100%;padding:2px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;white-space:nowrap;overflow:hidden;vertical-align:middle}.dcg-calculator-api-container-v1_12 .dcg-mq-root-block .dcg-mq-digit,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-root-block .dcg-mq-digit{margin-left:.009em;margin-right:.009em}.dcg-calculator-api-container-v1_12 .dcg-mq-root-block .dcg-mq-group-start,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-root-block .dcg-mq-group-start{margin-left:.11em;margin-right:-.01em}.dcg-calculator-api-container-v1_12 .dcg-mq-root-block .dcg-mq-group-other,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-root-block .dcg-mq-group-other{margin-left:-.01em;margin-right:-.01em}.dcg-calculator-api-container-v1_12 .dcg-mq-root-block .dcg-mq-group-leading-1,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-root-block .dcg-mq-group-leading-1,.dcg-calculator-api-container-v1_12 .dcg-mq-root-block .dcg-mq-group-leading-2,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-root-block .dcg-mq-group-leading-2{margin-left:0;margin-right:-.01em}.dcg-calculator-api-container-v1_12 .dcg-mq-root-block .dcg-mq-group-leading-3,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-root-block .dcg-mq-group-leading-3{margin-left:.036em;margin-right:-.01em}.dcg-calculator-api-container-v1_12 .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-start,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-start,.dcg-calculator-api-container-v1_12 .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-other,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-other,.dcg-calculator-api-container-v1_12 .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-leading-1,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-leading-1,.dcg-calculator-api-container-v1_12 .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-leading-2,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-leading-2,.dcg-calculator-api-container-v1_12 .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-leading-3,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-root-block.dcg-mq-suppress-grouping .dcg-mq-group-leading-3{margin-left:.009em;margin-right:.009em}.dcg-calculator-api-container-v1_12 .dcg-mq-root-block .dcg-mq-ellipsis-start,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-root-block .dcg-mq-ellipsis-start{margin-left:.14em;margin-right:.009em}.dcg-calculator-api-container-v1_12 .dcg-mq-root-block .dcg-mq-ellipsis-middle,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-root-block .dcg-mq-ellipsis-middle{margin-left:.009em;margin-right:.009em}.dcg-calculator-api-container-v1_12 .dcg-mq-root-block .dcg-mq-ellipsis-end,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-root-block .dcg-mq-ellipsis-end{margin-left:.009em;margin-right:.14em}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode{font-variant:normal;font-weight:400;font-style:normal;font-size:115%;line-height:1;display:-moz-inline-box;display:inline-block}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-non-leaf,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-scaled{display:-moz-inline-box;display:inline-block}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode var,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-text-mode,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-nonSymbola{font-family:Times New Roman,Symbola,serif;line-height:.9}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode svg{fill:currentColor;position:absolute;top:0;left:0;width:100%;height:100%}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode *{font-size:inherit;line-height:inherit;margin:0;padding:0;border-color:#000;-webkit-user-select:none;-moz-user-select:none;user-select:none;box-sizing:border-box}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-empty{background:#0003}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-empty.dcg-mq-root-block,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-empty.dcg-mq-quiet-delimiter,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode.dcg-mq-empty{background:transparent}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-text-mode{display:inline-block;white-space:pre}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-text-mode.dcg-mq-hasCursor{box-shadow:inset #a9a9a9 0 .1em .2em;padding:0 .1em;margin:0 -.1em;min-width:1ex}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-font{font:1em Times New Roman,Symbola,serif}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-font *{font-family:inherit;font-style:inherit}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode b,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode b.dcg-mq-font{font-weight:bolder}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode var,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode i,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode i.dcg-mq-font{font-style:italic}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode var.dcg-mq-f{margin-right:.2em;margin-left:.1em}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-roman var.dcg-mq-f{margin:0}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode big{font-size:200%}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-int>big{display:inline-block;-webkit-transform:scaleX(.7);-moz-transform:scaleX(.7);-ms-transform:scaleX(.7);-o-transform:scaleX(.7);transform:scaleX(.7);vertical-align:-.16em}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-int>.dcg-mq-supsub{font-size:80%;vertical-align:-1.1em;padding-right:.2em}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-int>.dcg-mq-supsub>.dcg-mq-sup>.dcg-mq-sup-inner{vertical-align:1.3em}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-int>.dcg-mq-supsub>.dcg-mq-sub{margin-left:-.35em}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-roman{font-style:normal}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-sans-serif{font-family:sans-serif,Symbola,serif}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-monospace{font-family:monospace,Symbola,serif}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-overline{border-top:1px solid;margin-top:1px}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-underline{border-bottom:1px solid;margin-bottom:1px}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-binary-operator{padding:0 .2em;display:-moz-inline-box;display:inline-block}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-supsub{text-align:left;font-size:90%;vertical-align:-.5em}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-supsub.dcg-mq-sup-only{vertical-align:.5em}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-supsub.dcg-mq-sup-only>.dcg-mq-sup{display:inline-block;vertical-align:text-bottom}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-supsub .dcg-mq-sup{display:block}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-supsub .dcg-mq-sub{display:block;float:left}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-supsub .dcg-mq-binary-operator{padding:0 .1em}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-supsub .dcg-mq-fraction{font-size:70%}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode sup.dcg-mq-nthroot{font-size:80%;vertical-align:.8em;margin-right:-.6em;margin-left:.2em;min-width:.5em}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-ghost svg{opacity:.2}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-bracket-middle{margin-top:.1em;margin-bottom:.1em}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-bracket-l,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-bracket-r{position:absolute;top:0;bottom:2px}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-bracket-l{left:0}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-bracket-r{right:0}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-bracket-container{position:relative}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-array{vertical-align:middle;text-align:center}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-array>span{display:block}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-operator-name{font-family:Symbola,Times New Roman,serif;line-height:.9;font-style:normal}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode var.dcg-mq-operator-name.dcg-mq-first{padding-left:.2em}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode var.dcg-mq-operator-name.dcg-mq-last,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-supsub.dcg-mq-after-operator-name{padding-right:.2em}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-fraction{font-size:90%;text-align:center;vertical-align:-.4em;padding:0 .2em}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-fraction,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-large-operator,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode x:-moz-any-link{display:-moz-groupbox}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-fraction,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-large-operator,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode x:-moz-any-link,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode x:default{display:inline-block}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-numerator,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-denominator,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-dot-recurring{display:block}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-numerator{padding:0 .1em}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-denominator{border-top:1px solid;float:right;width:100%;padding:.1em}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-dot-recurring{text-align:center;height:.3em}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-sqrt-prefix{position:absolute;top:1px;bottom:.15em;width:.95em}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-sqrt-container{position:relative}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-sqrt-stem{border-top:1px solid;margin-top:1px;margin-left:.9em;padding-left:.15em;padding-right:.2em;margin-right:.1em;padding-top:1px}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-diacritic-above{display:block;text-align:center;line-height:.4em}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-diacritic-stem{display:block;text-align:center}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-hat-prefix{display:block;text-align:center;line-height:.95em;margin-bottom:-.7em;transform:scaleX(1.5);-moz-transform:scaleX(1.5);-o-transform:scaleX(1.5);-webkit-transform:scaleX(1.5)}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-hat-stem{display:block}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-large-operator{vertical-align:-.2em;padding:.2em;text-align:center}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-large-operator .dcg-mq-from,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-large-operator big,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-large-operator .dcg-mq-to{display:block}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-large-operator .dcg-mq-from,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-large-operator .dcg-mq-to{font-size:80%}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-large-operator .dcg-mq-from{float:right;width:100%}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-editable-field{cursor:text;font-family:Symbola,Times New Roman,serif}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-overarc{border-top:1px solid;-webkit-border-top-right-radius:50% .3em;-moz-border-radius-topright:50% .3em;border-top-right-radius:50% .3em;-webkit-border-top-left-radius:50% .3em;-moz-border-radius-topleft:50% .3em;border-top-left-radius:50% .3em;margin-top:1px;padding-top:.15em}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-overarrow{min-width:.5em;border-top:1px solid;margin-top:1px;padding-top:.2em;text-align:center;position:relative}.dcg-calculator-api-container-v1_12 .dcg-mq-arrow-right-content{position:absolute;right:-.1em;top:-.48em;font-size:.5em}.dcg-calculator-api-container-v1_12 .dcg-mq-arrow-left-content{position:absolute;top:-.48em;left:-.1em;font-size:.5em;-moz-transform:scaleX(-1);-o-transform:scaleX(-1);-webkit-transform:scaleX(-1);transform:scaleX(-1);filter:FlipH;-ms-filter:\"FlipH\"}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-selection,.dcg-calculator-api-container-v1_12 .dcg-mq-editable-field .dcg-mq-selection,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-selection .dcg-mq-non-leaf,.dcg-calculator-api-container-v1_12 .dcg-mq-editable-field .dcg-mq-selection .dcg-mq-non-leaf,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-selection .dcg-mq-scaled,.dcg-calculator-api-container-v1_12 .dcg-mq-editable-field .dcg-mq-selection .dcg-mq-scaled{background:#b4d5fe!important}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-selection.dcg-mq-blur,.dcg-calculator-api-container-v1_12 .dcg-mq-editable-field .dcg-mq-selection.dcg-mq-blur,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-selection.dcg-mq-blur .dcg-mq-non-leaf,.dcg-calculator-api-container-v1_12 .dcg-mq-editable-field .dcg-mq-selection.dcg-mq-blur .dcg-mq-non-leaf,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-selection.dcg-mq-blur .dcg-mq-scaled,.dcg-calculator-api-container-v1_12 .dcg-mq-editable-field .dcg-mq-selection.dcg-mq-blur .dcg-mq-scaled{background:#d4d4d4!important;color:#000;border-color:#000}html.dcg-calculator-api-container-v1_12 body .dcg-mq-math-mode .dcg-mq-selection .dcg-mq-nthroot-container *,html body .dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-selection .dcg-mq-nthroot-container *,html.dcg-calculator-api-container-v1_12 body .dcg-mq-editable-field .dcg-mq-selection .dcg-mq-nthroot-container *,html body .dcg-calculator-api-container-v1_12 .dcg-mq-editable-field .dcg-mq-selection .dcg-mq-nthroot-container *{background:transparent!important}.dcg-calculator-api-container-v1_12 .dcg-mq-editable-field .dcg-mq-textarea,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-textarea{position:relative;-webkit-user-select:text;-moz-user-select:text;user-select:text}.dcg-calculator-api-container-v1_12 .dcg-mq-editable-field .dcg-mq-textarea *,.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode .dcg-mq-textarea *{-webkit-user-select:text;-moz-user-select:text;user-select:text;position:absolute;clip:rect(1em 1em 1em 1em);-webkit-transform:scale(0);-moz-transform:scale(0);-ms-transform:scale(0);-o-transform:scale(0);transform:scale(0);resize:none;width:1px;height:1px;box-sizing:content-box}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view{cursor:pointer;outline:none;border:2px solid currentColor;color:#000;display:inline-block;border-radius:4px;margin-right:2.5px;margin-left:2.5px;margin-bottom:2px;width:26px;height:26px;vertical-align:middle;background:#fff;position:relative;font-size:16px;touch-action:none}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-static-token{cursor:text}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view:not(.dcg-static-token).dcg-focus-visible{box-shadow:0 0 0 3px #2f72dc80!important}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-graph-interactions-disabled{border-style:dashed;opacity:.6}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-light-color{border-color:#0003}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-light-color .dcg-token-background{opacity:1}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-light-color.dcg-selected-token{border-color:#00000080}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-light-color.dcg-selected-token .dcg-token-background{background-color:#00000080}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-light-color:not(.dcg-selected-token) .dcg-token-icon,.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-light-color:not(.dcg-selected-token) .dcg-token-label{color:#0003}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-light-color.dcg-hovered:not(.dcg-static-token):not(.dcg-selected-token){border-color:#0003}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-light-color.dcg-hovered:not(.dcg-static-token):not(.dcg-selected-token) .dcg-token-icon,.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-light-color.dcg-hovered:not(.dcg-static-token):not(.dcg-selected-token) .dcg-token-label{color:#0003}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-light-color.dcg-depressed:not(.dcg-static-token):not(.dcg-selected-token){border-color:#00000080}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-light-color.dcg-depressed:not(.dcg-static-token):not(.dcg-selected-token) .dcg-token-icon,.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-light-color.dcg-depressed:not(.dcg-static-token):not(.dcg-selected-token) .dcg-token-label{color:#00000080}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view>*{pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-label{position:absolute;right:1px;bottom:-1px;font-family:sans-serif;font-size:75%;padding-right:1px;padding-bottom:1px}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view i{font-style:normal}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-assignment-token{border:1px solid #949494;padding:0;text-align:center;width:auto;min-width:26px}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-assignment-token .dcg-token-background{display:none}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-assignment-token.dcg-hovered:not(.dcg-static-token){border:1px solid #949494;box-shadow:0 0 0 1px #949494}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-assignment-token.dcg-selected-token:not(.dcg-static-token){background-color:#fff;border:1px solid #666;box-shadow:0 0 0 1px #666}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-token-has-label .dcg-token-point,.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-token-has-label .dcg-token-midpoint,.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-token-has-label .dcg-token-intersection,.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-token-has-label .dcg-token-glider{position:relative;top:-3px;left:-3px}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-token-has-label .dcg-token-point:after,.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-token-has-label .dcg-token-midpoint:after,.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-token-has-label .dcg-token-intersection:after,.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-token-has-label .dcg-token-glider:after{display:none}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-token-has-label .dcg-token-point:before,.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-token-has-label .dcg-token-midpoint:before,.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-token-has-label .dcg-token-intersection:before,.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-token-has-label .dcg-token-glider:before{display:none}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-selected-token .dcg-token-label{color:#fff}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-background{opacity:.25;display:block;width:100%;height:100%;background:currentColor;position:absolute;top:0;left:0;bottom:0;right:0;border-radius:2px}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-hovered:not(.dcg-static-token):not(.dcg-selected-token) .dcg-token-background{opacity:.4}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-depressed:not(.dcg-static-token):not(.dcg-selected-token) .dcg-token-background{opacity:.5}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-icon{position:absolute;top:0;left:0;bottom:0;right:0;overflow:hidden;text-align:center;line-height:24px}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-point,.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-glider,.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-intersection,.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-midpoint{font-size:140%}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-icon-angle{font-size:110%}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-rotate,.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-dilate,.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-reflect,.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-transformation{font-size:130%;color:#000}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-transformation{font-size:100%}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-rotate{margin-top:1px}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-dilate{font-size:140%;margin-left:-1px}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-reflect:before{position:absolute;top:2px;bottom:2px;left:50%;border-right:1px solid rgba(0,0,0,.2);margin-left:-.5px;content:\"\"}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-glider:before,.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-intersection:before,.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-midpoint:before{content:\"\";height:2px;background:currentColor;position:absolute;top:50%;left:50%;margin-top:-1px}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-intersection:after,.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-midpoint:after{content:\"\";height:2px;background:currentColor;position:absolute;top:50%;left:50%;margin-top:-1px}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-glider:before{width:16px;margin-left:-8px;opacity:.7}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-intersection:before{transform:rotate(-45deg);width:20px;margin-left:-10px;opacity:.6}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-intersection:after{transform:rotate(45deg);width:20px;margin-left:-10px;opacity:.6}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-midpoint:before{transform:rotate(0);width:20px;margin-left:-10px;opacity:.6}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-circle{border:2px solid currentColor;width:16px;height:16px;margin-top:3px;margin-left:3px;border-radius:50%}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-perpendicular svg,.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-parallel svg,.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-translate svg,.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-vector svg,.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-ray svg,.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-line svg,.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-segment svg,.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-arc svg{fill:none;stroke:currentColor;stroke-width:2px;stroke-linecap:round}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-parallel-parent{fill:none;stroke:currentColor;stroke-opacity:.5;stroke-width:2px;stroke-linecap:round}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-vector-arrowhead{fill:currentColor;stroke:none;stroke-linecap:round;stroke-linejoin:round}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-polygon svg{fill:currentColor;fill-opacity:.2;stroke:currentColor;stroke-width:1.5px;stroke-linejoin:round}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-angles svg,.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-angle svg{fill:none;stroke:currentColor;stroke-width:1.5px;stroke-linecap:round}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-angle-fill{fill:currentColor;fill-opacity:.2;stroke:none}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-angle-arc{fill:none;stroke:currentColor;stroke-width:1.5px}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-directedangle svg{fill:none;stroke:currentColor;stroke-width:1.5px;stroke-linecap:round}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-directedangle-arc{fill:none;stroke:currentColor;stroke-width:1px}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-token-directedangle-arrowhead{fill:none;stroke:currentColor;stroke-width:1px;stroke-linejoin:round}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-selected-token{background-color:currentColor}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-selected-token .dcg-token-icon{color:#fff}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-child-of-hovered-token:not(.dcg-static-token):after{content:\"\";position:absolute;bottom:100%;left:50%;margin-left:-8px;border:1px solid transparent;border-width:6px 8px;border-bottom-color:#0003}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view.dcg-parent-of-hovered-token:not(.dcg-static-token):after{content:\"\";position:absolute;top:100%;left:50%;margin-left:-8px;border:1px solid transparent;border-width:6px 8px;border-top-color:#0003}.dcg-calculator-api-container-v1_12 .dcg-geo-token-view .dcg-icon-lock{font-size:.7rem;color:#666;text-shadow:-1px -1px 0 #fff,-1px 1px 0 #fff,1px -1px 0 #fff,1px 1px 0 #fff,0 -1px 0 #fff,0 1px 0 #fff,1px 0 0 #fff,-1px 0 0 #fff;opacity:1;position:absolute;bottom:0;right:0}.dcg-calculator-api-container-v1_12 .dcg-inline-math-input-view .dcg-geo-token-view,.dcg-calculator-api-container-v1_12 .dcg-table-container .dcg-geo-token-view,.dcg-calculator-api-container-v1_12 .dcg-clickable-menu-row .dcg-geo-token-view,.dcg-calculator-api-container-v1_12 .dcg-expression-bottom .dcg-geo-token-view,.dcg-calculator-api-container-v1_12 .dcg-ticker-settings-container .dcg-geo-token-view,.dcg-calculator-api-container-v1_12 .dcg-slider-container .dcg-geo-token-view{margin:0;transform:scale(.9)}.dcg-calculator-api-container-v1_12 .dcg-audio-trace-line{position:absolute;opacity:50%;background:var(--dcg-trace-color, #aaa)}.dcg-calculator-api-container-v1_12 .dcg-audio-trace-line.dcg-audio-trace-line--horizontal{left:0;right:0;height:4px;top:var(--dcg-trace-coord, -10px)}.dcg-calculator-api-container-v1_12 .dcg-audio-trace-line:not(.dcg-audio-trace-line--horizontal){bottom:0;width:4px;top:0;left:var(--dcg-trace-coord, -10px)}@font-face{font-family:Abraham;src:url(data:font/woff2;base64,d09GMgABAAAAAArwAA0AAAAAeWQAAAqVAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP0ZGVE0cGhgGYACCYhEICoHWFIGlFguCSgABNgIkA4QWBCAFiB0HhnQbtF4RlaOBR1GaNk3yZQI3B7YOliFCqWPJhLGMZWhifaqyq2o95GjH/zNVXBL8//9+/5trX7XvFg1IZlYag8ygxJfQVn5CG1XtHP+dNq/yNt2C3pL4S+6clNLJDAzYNFYB91q8EtLut8xTjmIJrIusoXVe+2wOwt9AJDikbwstrP99yLFHAPzz3Kv8zsnN5Bxfj0MY4zVxDermbpqDSlLwlBquUEUKWLKC/ZTqUiAv/D/t978qcBFrJFoxien5xgafh3ry5nPPW2d49/v9Hw2JVH4uSCjEZJZIEf9/TP1e6LRjmpSm8IJIGEpw5KQa/5jvAgTw0rfxI2D948NgeQsBOVTLOj7e9uyLvhKAPWRYBnhUfoneIQzwFPdI+Oj8cmCFe8mSUZEe8FbhFFixwJtglARgCiJ+ox4wBgFwGSMCxjCxHZATY/hAwX0dypZ0AAqmdCgD3cF9d7e9OECwuUJ4vyszdYLtFfgBC2t3WO0Yq4dI/4HIyMrJKygqKauoqqlraGpp6+jq6RsYGhkTJqZm5haWVtYWrFRr9Uaz1e50e/3BcDSeTGfzxXK13mx3+8PxBM7yccuOHAr1vgzaD8LDYGoDzC8AgCAGPGX6fFspovrttY4kxKvIokJxNrafYC3wFQXzMoDa3imAyj7PuH0j8qnRPkDKA1me2uIZck2ci/P3LZ8eCYTQ2dHAgYJD4t0c57oCXMgMXiwMVcTz7cFF6mXKFdrV8uNPyAPUIcow7bqog/BwU4sWfq33xFUv5KpeyNimSmmCgXAd4Wl5+I4e6RUf1B5BNBwGA0LFdXgCmOaszGXOsalSjuHOEeMsZaiJbB7elCdblK7hDvY/4HZe2DbYTHIYJKWFBSlD1AHyIC2Zh5X35/ruazK7L8mG5+XiRrjDwhtMNJwWnmwKzwFcGsQ+EG7K5ILNewxDoRw45boM5BCncUz59T7Brb8i9nKXBjTlnqs+/dVokUHF4cPmbNhy+WjYPjwOERc4p2yKWGwUn6rYW92anaBbixCV440aah2lXq4rCg/Lpfz+V9Qaci2tntJy9bpB8m2+scd873PfY8tkeAhMRuT8adg+4KIb3A8uBH7whzv77EwyjGWkYZdAE/Ew+IfOvTMF9mHaDyIHr93Fr1m+FHnPRrSx+xV2D4qqrtGm9s5BnW1znv7RfabE/WggXINmNgYQaSakNTviPiiH9FmVEv2CbQ7TSmdzikfFnbHgLoo7VXdM9Wa0JhoWwqo7Lvk1UaajFf8ZZ++DGf9ZNg5iis9KYXk3Rl0SANz7O0BzziGlf9Vt8CYyTYHcLIXybsg/38isq/+RrsmwS6UugH7PfRHBffY49ywoZ2rWNF1A3+o/4zzZdPlSUSWteegYNPSifx9ER9VtW8Rh0wjhRgiH/BbjQAr6LyYlY5A4wfuaWP9Yvke4ZlCoPzjwu0IlFwv03HJf8DuQam40vLpI70RDhL30GD++ueym8F+8sZsYpKPjohdvLjtNPBd88i+YfnqTRtN6dSKQ0/wB+juSGt4Lzf6LUfedjnsZp/7l9PJzfGO6spDY+RE+ET5RTORcKoyxfxzSC/poN/a6B9QvS/piIs/78ZVjFF3p7pYigav1cYxuVq2KpJ5u0cZ+ztpGnKhDEfwEVxVS72rtkvoErucAZhio41AJKSQtuqp25mltuiQBqoPGBaFSwQ2n7or5M+4rHGTEYK1BdAk9Pk1YOyOhZ2gFiM0VPhEMN9aHlS0s55hu2VG6a5HAFfvnMssOnNMQktYaWN84dcIEN29kUIq47MYPLf44Xyt6WO3gDAe//czw6eEzseeVJhs90xH2nWwsebJFlTVZi66BOm5nlg1wz4pzslf27+ZgthdYiXECJUtBGAnOumlppur+eSUzuXsu3tfygYXvsJ3exlDo2YvYGVwuDAKIF8MtneDy3QWwgIWbW88dzxY0nJjcbpDRAKAAoKPx1L60XYnyfBfG7tPRpuAy2oPRxtacy3ZaTU61uOASIwl//xzPVJui4FlhFOZZqT1stCuXmDuw5ef9BbsdnN4dKWxXVmcuA98ugHcfMCm5nzhsaXc6Zyn8D/0F/4PLtJZZkbrhN5rlr7W5RXic46/uP3Lzrgb6KnuQMw4m2Gqu/kPnkfsEkH4p81fgnNNhu1fvY7/Vt1b1j3ptsC5JepoMTJ/V4nwTMgrUGXgqvGbU68kxXXI3z9zTS2eOy+pWsiaznuL/dBNNhfmJnReiussqc7f7K1x+baL9PAdOCLuql+Z5/Y4Fh3c7LZ/MaoTks3qK3mHi7Ng35bef2ML8msShaUEvJmH/jSniU6QzYsZ1nF1xcRovOtl8HMx4XLHY/CxD3J6vDnY7TW0ctzRXPRraHrfsxjL2Zrt1e9NlTc7J5SlaVYPG+TSr4MuFHBPTDMBtx4ZWTj5XvWD457P2wNr7ZIDKwajVQnvvVeb3NAUiU8WtyuMT9P5clQNdAFjCoLGSEPgb0AFSF3tTCJVY1zlEZHNyfD1Il223bP9TNcg0HKKkLl84DcpqIWo+218lQ0fOUzwyzmk2wspKaftVNJNRcTmn/40zQ2cOps/PwBP5gDxL5cVEqc7JTiUXjm55Pq1eEawZeraYT8cnHme740pH5HRLtPhwHqtZJjDo6WklfIaH15vssNPvs2352Fd9gthu77bMrxew1/l+HPlK5n//uLgPyw2+OYtzmMbGMeeyrVIc0mzjuU6U86iLXs3ZneQ75WtE3GlktntAXjirqwAAY5QvJAS+Au6CLpsNybZpXmQ6QT2D1T2FD+XDH8F/zW1q/JDC6K4tUn8OdLI5bZKOLzL/mg5BoY5Ta/Tgfj3RVwV/oXTULyk+RgQI3r8LabzGa/Ytzhhf/n7Sy3RuU7MfJkaH1PnNom/D/jiwOxBP6+6VCvfoCNCLm3/Zfp/9hf2xIeqFebEKVvXpuIAe3MYHWa4QsN1zmQNNhb9u0dG0EXHSHhMa7NN54ICZEA4ZSpkjpGHFTCphXimrythWzikVXFDJNddIobvBanKLWqT6YkQ+u+tlWCxgsVGy0x6bhdhnwbwDdvvikOWEOcLUr5hRJUwrZVEZ68rZVcEZlVxyTTE33OAx0ke0FKsG0mAK7BAjR7Qk0dJpyJApg4Z8GZLFyhQnHvxu8CP+jMynPz/j8guSlwM4KV6ifGmi5YD/6/BzAKzQpE2bPlMTlcuTl6dq2rUytbX1TU0WzivntQqurNY6u5MjVzLtpnRtWw7iRp5EKl6ahB130VJJJekKoQN/oqJc2+Lfzy/+hvriX5xvfD8oXD0yOH5Olx9l6iWYUb1Cvc8wnl7rAQgTA3i/cP+vTkxCSkZOQUlFDcOPRABOkBBhIkSJESdBkhRpMmTJkadAkRJlKlSpUadBkxZtOnTp0WfAkBFjBBOmzJizYMmKNRu27Nhz4MiJMxeu3Ljz4MmLNx++/PgLEChIsBChwoSLEClKtBHEiJgQM2JBrIgNsSMORplyFSpVqUYxnCApmmE5XhAlWVE13TAdTpfb4/X5A8FQOBKNxRPJVDqTzeULxZLKspLfcz6EI4StRVJjlAGJycbOwcnFzcPLxx9aHWwAAAAAAAAAAEREREREREREIiIiIiIiIlVCcwEAAA==) format(\"woff2\");font-display:block}.dcg-calculator-api-container-v1_12 :not(.dcg-main)>.dcg-mathquill-wrapper{display:inline-block}.dcg-calculator-api-container-v1_12 :not(.dcg-main)>.dcg-mathquill-wrapper .dcg-braille-input,.dcg-calculator-api-container-v1_12 :not(.dcg-main)>.dcg-mathquill-wrapper .dcg-mq-container{display:block}.dcg-calculator-api-container-v1_12 .dcg-mathquill-wrapper .dcg-mathquill-braille .dcg-braille-input{background:none;width:100%;border:none;font-family:Abraham,serif;font-size:125%;padding:1px 0}.dcg-calculator-api-container-v1_12 .dcg-mathquill-wrapper .dcg-mathquill-braille .dcg-braille-input:focus{outline:none}.dcg-calculator-api-container-v1_12 .dcg-mathquill-wrapper .dcg-mathquill-braille.dcg-mathquill-braille-overflow-left .dcg-tooltip-hit-area-container:before{content:\"\";position:absolute;top:0;left:0;bottom:0;width:14px;background:linear-gradient(to left,#fff0,#fff);pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-mathquill-wrapper .dcg-mathquill-braille.dcg-mathquill-braille-overflow-right .dcg-tooltip-hit-area-container:after{content:\"\";position:absolute;top:0;right:0;bottom:0;width:14px;background:linear-gradient(to right,#fff0,#fff);pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-mathquill-wrapper .dcg-mathquill-braille .dcg-tooltip-hit-area-container{display:block}.dcg-calculator-api-container-v1_12 .dcg-static-mathquill-view * .dcg-mq-cursor{display:none}.dcg-calculator-api-container-v1_12 .dcg-tooltip-hit-area-container{position:relative;line-height:initial}.dcg-calculator-api-container-v1_12 .dcg-tooltip-hit-area-container.dcg-display-block{width:100%}.dcg-calculator-api-container-v1_12 .dcg-tooltip-hit-area-container:not(.dcg-display-block){display:inline-block}.dcg-calculator-api-container-v1_12 .dcg-tooltip-mount-pt{position:absolute;top:0;left:0}.dcg-calculator-api-container-v1_12 .dcg-tooltip-positioning-container{position:absolute;pointer-events:none;z-index:10000}.dcg-calculator-api-container-v1_12 .dcg-tooltip-positioning-container .dcg-tooltip-message-container{position:absolute;z-index:10000;animation:dcg-fadeIn .3s}.dcg-calculator-api-container-v1_12 .dcg-tooltip-positioning-container .dcg-tooltip-message{max-width:100%;border-radius:4px;padding:5px 8px;font-size:14px;line-height:1.1em;display:inline-block;pointer-events:all;text-align:center;position:relative}.dcg-calculator-api-container-v1_12 .dcg-tooltip-positioning-container .dcg-tooltip-message.dcg-sticky-not-stuck{cursor:pointer}.dcg-calculator-api-container-v1_12 .dcg-tooltip-positioning-container.dcg-tooltip-theme-dark .dcg-tooltip-message{background:#000;color:#fff}.dcg-calculator-api-container-v1_12 .dcg-tooltip-positioning-container.dcg-tooltip-theme-dark .dcg-tooltip-message.dcg-sticky-not-stuck{background:#666}.dcg-calculator-api-container-v1_12 .dcg-tooltip-positioning-container.dcg-tooltip-theme-light .dcg-tooltip-message{background:#fff;color:#000;border:1px solid #bbb;border-radius:5px}.dcg-calculator-api-container-v1_12 .dcg-tooltip-positioning-container.dcg-tooltip-theme-light .dcg-tooltip-message .dcg-static-mathquill-view{width:100%}.dcg-calculator-api-container-v1_12 .dcg-tooltip-positioning-container.dcg-tooltip-theme-light .dcg-tooltip-arrow{transform:rotate(45deg)}.dcg-calculator-api-container-v1_12 .dcg-tooltip-positioning-container.dcg-tooltip-theme-light.dcg-tooltip-gravity-n-s .dcg-tooltip-arrow{transform:translate(-50%) rotate(45deg)}.dcg-calculator-api-container-v1_12 .dcg-tooltip-positioning-container.dcg-tooltip-theme-light.dcg-tooltip-gravity-e-w .dcg-tooltip-arrow{transform:translateY(-50%) rotate(45deg)}.dcg-calculator-api-container-v1_12 .dcg-tooltip-positioning-container .dcg-tooltip-arrow{position:absolute;animation:dcg-fadeIn .3s;z-index:10000}.dcg-calculator-api-container-v1_12 .dcg-mixed-text-math .dcg-mq-math-mode .dcg-mq-root-block{vertical-align:baseline;overflow:visible}.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container{display:flex;padding-right:1px;padding-bottom:1px}.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container .dcg-segmented-control-btn{color:var(--dcg-custom-text-color, rgba(0, 0, 0, .85));text-align:center;display:flex;justify-content:center;align-items:center;border:1px solid var(--dcg-custom-text-color, rgba(0, 0, 0, .42));margin-right:-1px;margin-bottom:-1px}.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container .dcg-segmented-control-btn i{position:relative;top:1px}.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container .dcg-segmented-control-btn:not(.dcg-disabled).dcg-hovered:not(.dcg-selected){color:var(--dcg-custom-text-color-shaded, #000)}.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container .dcg-segmented-control-btn:not(.dcg-disabled).dcg-depressed:not(.dcg-selected){background:#0000000a}.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container .dcg-segmented-control-btn:first-of-type{border-top-left-radius:3px;border-bottom-left-radius:3px}.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container .dcg-segmented-control-btn:last-of-type{border-top-right-radius:3px;border-bottom-right-radius:3px}.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container .dcg-segmented-control-btn.dcg-selected{color:var(--dcg-custom-background-color, #fff);position:relative}.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container .dcg-segmented-control-btn.dcg-selected:not(.dcg-disabled){cursor:default}.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container .dcg-segmented-control-btn.dcg-disabled{opacity:.4}.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-default .dcg-segmented-control-btn{flex:1}.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-default .dcg-segmented-control-btn .dcg-segmented-control-interior{height:34px;line-height:34px;padding:0 8px}.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-default .dcg-segmented-control-btn.dcg-hovered:not(.dcg-selected):not(.dcg-disabled){border-color:var(--dcg-custom-text-color-shaded, rgba(0, 0, 0, .62))}.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-default .dcg-segmented-control-btn.dcg-selected{border:1px solid var(--dcg-custom-text-color, rgba(0, 0, 0, .65));background:var(--dcg-custom-text-color, rgba(0, 0, 0, .65))}.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-full-width-mini .dcg-segmented-control-btn{flex:1;font-size:.9rem}.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-mini .dcg-segmented-control-btn,.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-vertical .dcg-segmented-control-btn,.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-full-width-mini .dcg-segmented-control-btn{border-color:var(--dcg-custom-text-color, #bbb)}.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-mini .dcg-segmented-control-btn .dcg-segmented-control-interior,.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-vertical .dcg-segmented-control-btn .dcg-segmented-control-interior,.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-full-width-mini .dcg-segmented-control-btn .dcg-segmented-control-interior{padding:var(--segmented-control-vertical-padding, 4px) 6px}.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-mini .dcg-segmented-control-btn.dcg-hovered:not(.dcg-selected):not(.dcg-disabled),.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-vertical .dcg-segmented-control-btn.dcg-hovered:not(.dcg-selected):not(.dcg-disabled),.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-full-width-mini .dcg-segmented-control-btn.dcg-hovered:not(.dcg-selected):not(.dcg-disabled){background:#0000000a}.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-mini .dcg-segmented-control-btn.dcg-depressed:not(.dcg-selected):not(.dcg-disabled),.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-vertical .dcg-segmented-control-btn.dcg-depressed:not(.dcg-selected):not(.dcg-disabled),.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-full-width-mini .dcg-segmented-control-btn.dcg-depressed:not(.dcg-selected):not(.dcg-disabled){background:#0003}.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-mini .dcg-segmented-control-btn.dcg-selected,.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-vertical .dcg-segmented-control-btn.dcg-selected,.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-full-width-mini .dcg-segmented-control-btn.dcg-selected{background:color-mix(in srgb,var(--dcg-accent-color, #2f72dc) 15%,transparent);border-color:var(--dcg-accent-color, #2f72dc);color:var(--dcg-accent-color, #2f72dc)}.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-mini .dcg-segmented-control-btn.dcg-disabled,.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-vertical .dcg-segmented-control-btn.dcg-disabled,.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-full-width-mini .dcg-segmented-control-btn.dcg-disabled{pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-mini .dcg-segmented-control-btn.dcg-disabled.dcg-selected+.dcg-segmented-control-btn,.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-vertical .dcg-segmented-control-btn.dcg-disabled.dcg-selected+.dcg-segmented-control-btn,.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-full-width-mini .dcg-segmented-control-btn.dcg-disabled.dcg-selected+.dcg-segmented-control-btn{border-left:1px solid #666}.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-mini .dcg-segmented-control-btn.dcg-disabled.dcg-selected,.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-vertical .dcg-segmented-control-btn.dcg-disabled.dcg-selected,.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-full-width-mini .dcg-segmented-control-btn.dcg-disabled.dcg-selected{background:#0000001a;border-color:#666;color:var(--dcg-custom-text-color-shaded, #000)}.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-vertical{flex-direction:column}.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-vertical .dcg-segmented-control-btn:first-of-type{border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-left-radius:unset}.dcg-calculator-api-container-v1_12 .dcg-segmented-control-container.dcg-theme-vertical .dcg-segmented-control-btn:last-of-type{border-top-right-radius:unset;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.dcg-calculator-api-container-v1_12 .dcg-expression-edit-actions{padding-left:5px;padding-right:7px;white-space:nowrap;position:absolute;top:0;right:0;bottom:0;background:var(--dcg-item-background-color)}.dcg-calculator-api-container-v1_12 .dcg-expression-edit-actions:not(.dcg-limited-height){bottom:0}.dcg-calculator-api-container-v1_12 .dcg-expression-edit-actions .dcg-graphic{height:100%;background:linear-gradient(to right,rgba(255,255,255,0),var(--dcg-item-background-color));position:absolute;top:0;right:100%;width:40px;cursor:default;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-expression-edit-actions .dcg-exp-action-button{margin-left:2px;width:44px;height:44px;padding:12px 10px;text-align:center;margin-top:4px;display:inline-block;font-size:125%;line-height:20px;opacity:.6;border-radius:5px}.dcg-calculator-api-container-v1_12 .dcg-expression-edit-actions .dcg-exp-action-button.dcg-hovered{background:#0000001a}.dcg-calculator-api-container-v1_12 .dcg-expression-edit-actions .dcg-exp-action-button.dcg-depressed{opacity:1}.dcg-calculator-api-container-v1_12 .dcg-expression-edit-actions .dcg-exp-action-button.dcg-selected{background:#000000b3;color:#fff}.dcg-calculator-api-container-v1_12 .dcg-expression-bottom{display:flex;flex-wrap:wrap;row-gap:9px;align-items:start;justify-content:space-between}.dcg-calculator-api-container-v1_12 .dcg-expression-bottom>div{flex-grow:1;max-width:100%;flex-basis:100%}.dcg-calculator-api-container-v1_12 .dcg-expression-bottom>div:has(.dcg-label-container:not(.dcg-label-input-visible),.dcg-evaluation-container){flex-basis:auto}.dcg-calculator-api-container-v1_12 .dcg-expression-bottom .dcg-slider_menu{margin-bottom:2px}.dcg-calculator-api-container-v1_12 .dcg-expression-bottom .dcg-slider-step-container{margin-left:10px}.dcg-calculator-api-container-v1_12 .dcg-expression-bottom .dcg-slider-step-container.dcg-disabled-input .dcg-math-field,.dcg-calculator-api-container-v1_12 .dcg-expression-bottom .dcg-slider-step-container.dcg-disabled-input .dcg-mathquill-braille{opacity:.3;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-expression-bottom .dcg-slider-step-label{font-size:85%}.dcg-calculator-api-container-v1_12 .dcg-expression-bottom .dcg-mq-editable-field{outline:none}.dcg-calculator-api-container-v1_12 .dcg-expression-bottom .dcg-expression-braille-error{color:#666;margin-left:0;font-size:90%}.dcg-calculator-api-container-v1_12 .dcg-expression-bottom .dcg-expression-braille-error .dcg-icon-error{font-size:80%;margin-right:5px;color:#fa824c}.dcg-calculator-api-container-v1_12 .dcg-expression-bottom .dcg-slider_menu{margin-top:-3px}.dcg-calculator-api-container-v1_12 .dcg-expression-bottom .dcg-expression-footer-title{text-transform:uppercase;font-size:80%;color:var(--dcg-custom-text-color, rgba(0, 0, 0, .6));margin-bottom:4px;display:flex;gap:3px}.dcg-calculator-api-container-v1_12 .dcg-expression-bottom .dcg-expression-footer-title-help{padding:10px;color:var(--dcg-custom-text-color, rgba(0, 0, 0, .6));margin:-10px;cursor:pointer;text-decoration:none}.dcg-calculator-api-container-v1_12 .dcg-expression-bottom .dcg-expression-footer-title-help.dcg-hovered{color:#888}.dcg-calculator-api-container-v1_12 .dcg-expression-bottom .dcg-expression-footer-title-help.dcg-depressed{color:#000}.dcg-calculator-api-container-v1_12 .dcg-expression-bottom .dcg-checkbox{white-space:nowrap}.dcg-calculator-api-container-v1_12 .dcg-expression-bottom .dcg-checkbox .dcg-checkbox__content{white-space:wrap}.dcg-calculator-api-container-v1_12 .dcg-expression-bottom .dcg-suspended{opacity:50%;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-expression-footer-title-help{padding:10px;color:var(--dcg-custom-text-color, rgba(0, 0, 0, .6));margin:-10px;cursor:pointer;text-decoration:none}.dcg-calculator-api-container-v1_12 .dcg-expression-footer-title-help.dcg-hovered{color:#888}.dcg-calculator-api-container-v1_12 .dcg-expression-footer-title-help.dcg-depressed{color:#000}.dcg-calculator-api-container-v1_12 .dcg-expression-footer-title{text-transform:uppercase;font-size:80%;color:var(--dcg-custom-text-color, rgba(0, 0, 0, .6));margin-bottom:2px}.dcg-calculator-api-container-v1_12 .dcg-action-info{cursor:default;color:var(--dcg-custom-text-color, #666);font-size:85%}.dcg-calculator-api-container-v1_12 .dcg-action-info .dcg-click-edit{margin-left:5px;opacity:.6}.dcg-calculator-api-container-v1_12 .dcg-action-info .dcg-click-edit.dcg-hovered{opacity:.8}.dcg-calculator-api-container-v1_12 .dcg-action-info .dcg-click-edit.dcg-depressed{opacity:1}.dcg-calculator-api-container-v1_12 .dcg-display-domain{font-size:95%;white-space:nowrap}.dcg-calculator-api-container-v1_12 .dcg-learn-more-link{display:inline-block;color:#949494;text-decoration:none;padding:5px;font-size:85%;position:relative;top:1px}.dcg-calculator-api-container-v1_12 .dcg-learn-more-link.dcg-hovered{color:#666}.dcg-calculator-api-container-v1_12 .dcg-learn-more-link.dcg-active{color:#333}.dcg-calculator-api-container-v1_12 .dcg-inline-math-input-view{display:inline-block;font-size:.95rem}.dcg-calculator-api-container-v1_12 .dcg-inline-math-input-view .dcg-math-field.dcg-math-field{font-size:100%;border-bottom:1px solid rgba(0,0,0,.2);padding:1px 2px;margin:1px;min-width:35px;max-width:70px}.dcg-calculator-api-container-v1_12 .dcg-inline-math-input-view .dcg-math-field.dcg-math-field.dcg-focus,.dcg-calculator-api-container-v1_12 .dcg-inline-math-input-view .dcg-math-field.dcg-math-field.dcg-focus-visible,.dcg-calculator-api-container-v1_12 .dcg-inline-math-input-view .dcg-math-field.dcg-math-field.dcg-invalid{border-bottom:2px solid var(--dcg-accent-color, #2f72dc);margin-bottom:0}.dcg-calculator-api-container-v1_12 .dcg-inline-math-input-view .dcg-math-field.dcg-math-field.dcg-invalid{border-bottom:2px solid #e15855}.dcg-calculator-api-container-v1_12 .dcg-inline-math-input-view .dcg-math-field.dcg-math-field.dcg-hovered:not(.dcg-focus):not(.dcg-invalid):not(.dcg-static-mathquill-view):not(.dcg-focus-visible){border-bottom:2px solid #ccc;margin-bottom:0}.dcg-calculator-api-container-v1_12 .dcg-inline-math-input-view.dcg-large-font-inline-math-input{font-size:115%}.dcg-calculator-api-container-v1_12 .dcg-inline-math-input-view.dcg-log-scale .dcg-math-field{max-width:100px}.dcg-calculator-api-container-v1_12 .dcg-inline-math-input-view .dcg-mathquill-braille.dcg-mathquill-braille{font-size:95%;border-bottom:1px solid rgba(0,0,0,.2);padding:1px 2px;margin:1px;min-width:35px;max-width:35px}.dcg-calculator-api-container-v1_12 .dcg-inline-math-input-view .dcg-mathquill-braille.dcg-mathquill-braille.dcg-focus,.dcg-calculator-api-container-v1_12 .dcg-inline-math-input-view .dcg-mathquill-braille.dcg-mathquill-braille.dcg-focus-visible,.dcg-calculator-api-container-v1_12 .dcg-inline-math-input-view .dcg-mathquill-braille.dcg-mathquill-braille.dcg-invalid{border-bottom:2px solid var(--dcg-accent-color, #2f72dc);margin-bottom:0}.dcg-calculator-api-container-v1_12 .dcg-inline-math-input-view .dcg-mathquill-braille.dcg-mathquill-braille.dcg-invalid{border-bottom:2px solid #e15855}.dcg-calculator-api-container-v1_12 .dcg-inline-math-input-view .dcg-mathquill-braille.dcg-mathquill-braille.dcg-hovered:not(.dcg-focus):not(.dcg-invalid):not(.dcg-static-mathquill-view):not(.dcg-focus-visible){border-bottom:2px solid #ccc;margin-bottom:0}.dcg-calculator-api-container-v1_12 .dcg-inline-math-input-view .dcg-mathquill-braille.dcg-mathquill-braille .dcg-tooltip-hit-area-container{width:100%}.dcg-calculator-api-container-v1_12 .dcg-inline-math-input-view.dcg-full-width-inline-math-input .dcg-math-field,.dcg-calculator-api-container-v1_12 .dcg-inline-math-input-view.dcg-full-width-inline-math-input .dcg-mathquill-braille{width:100%;max-width:100%}.dcg-calculator-api-container-v1_12 .dcg-inline-math-input-view.dcg-no-border-inline-math-input .dcg-math-field,.dcg-calculator-api-container-v1_12 .dcg-inline-math-input-view.dcg-no-border-inline-math-input .dcg-mathquill-braille{border-bottom:1px solid transparent}.dcg-calculator-api-container-v1_12 .dcg-evaluation-container{display:flex;justify-content:flex-end;padding-right:5px;align-items:center;max-width:100%;gap:4px;font-size:.95rem;margin-top:-4px}.dcg-calculator-api-container-v1_12 .dcg-evaluation-container .dcg-hypothesis-test-evaluation{display:flex;flex-direction:column}.dcg-calculator-api-container-v1_12 .dcg-evaluation-container .dcg-evaluation-number{display:flex;align-items:center;gap:4px}.dcg-calculator-api-container-v1_12 .dcg-evaluation-container .dcg-evaluation-view__equals-sign{margin-right:-4px}.dcg-calculator-api-container-v1_12 .dcg-evaluation-container .dcg-evaluation-list{max-width:100%;display:flex}.dcg-calculator-api-container-v1_12 .dcg-evaluation-container .dcg-evaluation-list .dcg-mathquill-wrapper .dcg-mathquill-braille .dcg-braille-input{min-width:100%;width:auto}.dcg-calculator-api-container-v1_12 .dcg-evaluation-container .dcg-evaluation-list .dcg-blue-link{white-space:nowrap;z-index:1;padding-right:2px;margin-right:5px;padding-left:2px}.dcg-calculator-api-container-v1_12 .dcg-evaluation-container .dcg-show-more-link{position:relative;display:flex;align-items:center}.dcg-calculator-api-container-v1_12 .dcg-evaluation-container .dcg-show-more-link:after{position:absolute;top:0;bottom:0;right:100%;width:12px;content:\"\";background:linear-gradient(to right,rgba(255,255,255,0),var(--dcg-item-background-color, #fff) 50%)}.dcg-calculator-api-container-v1_12 .dcg-evaluation-container .dcg-evaluation-view__list-values{display:flex;overflow:hidden;gap:4px;position:relative}.dcg-calculator-api-container-v1_12 .dcg-evaluation-container .dcg-evaluation-view__list-values:not(.dcg-evaluation-view__collapsed-list-values){flex-wrap:wrap}.dcg-calculator-api-container-v1_12 .dcg-evaluation-container .dcg-evaluation-view__equals-sign{opacity:.55}.dcg-calculator-api-container-v1_12 .dcg-evaluation-container .dcg-evaluation-view__equals-sign .dcg-mq-math-mode{pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-evaluation-container .dcg-evaluation-view__equals-sign.dcg-hovered{opacity:.85}.dcg-calculator-api-container-v1_12 .dcg-evaluation-container .dcg-static-mathquill-view{cursor:pointer}.dcg-calculator-api-container-v1_12 .dcg-evaluation-container .dcg-evaluation-view__color-swatch,.dcg-calculator-api-container-v1_12 .dcg-evaluation-container .dcg-evaluation-view__plaintext,.dcg-calculator-api-container-v1_12 .dcg-evaluation-container .dcg-evaluation-view__wrapped-value{border:1px solid rgba(206,206,206,.8);background:#0000000a;border-radius:4px}.dcg-calculator-api-container-v1_12 .dcg-evaluation-container .dcg-evaluation-view__color-swatch.dcg-focus-visible,.dcg-calculator-api-container-v1_12 .dcg-evaluation-container .dcg-evaluation-view__plaintext.dcg-focus-visible,.dcg-calculator-api-container-v1_12 .dcg-evaluation-container .dcg-evaluation-view__wrapped-value.dcg-focus-visible{outline:none;border:1px solid #2f72dc;box-shadow:0 0 0 1px #2f72dc}.dcg-calculator-api-container-v1_12 .dcg-evaluation-container .dcg-evaluation-view__wrapped-value{padding:3px 5px 1px}.dcg-calculator-api-container-v1_12 .dcg-evaluation-container .dcg-evaluation-view__plaintext{padding:3px 6px}.dcg-calculator-api-container-v1_12 .dcg-evaluation-container .dcg-evaluation-view__color-swatch{padding:3px}.dcg-calculator-api-container-v1_12 .dcg-evaluation-container .dcg-equals-or-slow,.dcg-calculator-api-container-v1_12 .dcg-evaluation-container .dcg-evaluation-view__wrapped-value,.dcg-calculator-api-container-v1_12 .dcg-evaluation-container .dcg-evaluation-view__plaintext,.dcg-calculator-api-container-v1_12 .dcg-evaluation-container .dcg-show-even-more-link{display:flex;align-items:center}.dcg-calculator-api-container-v1_12 .dcg-evaluation-container .dcg-equals-or-slow .dcg-tooltip-hit-area-container{animation:dcg-fadeIn .3s forwards;display:flex;align-items:center}.dcg-calculator-api-container-v1_12 .dcg-evaluation-container .dcg-equals-or-slow .dcg-tooltip-hit-area-container .dcg-spinner{cursor:pointer}.dcg-calculator-api-container-v1_12 .dcg-evaluation-view__point-values .dcg-evaluation-view__wrapped-value{padding:2px 3px 0}.dcg-calculator-api-container-v1_12 .dcg-evaluation-view__point-values .dcg-mq-binary-operator{padding:0 .1em}.dcg-calculator-api-container-v1_12 .dcg-evaluation-view__point-values .dcg-mq-comma{padding-right:.1em}.dcg-calculator-api-container-v1_12 .dcg-copy-evaluation-view{display:inline-block;width:34px;height:34px;line-height:36px;text-align:center;margin:-3px}.dcg-calculator-api-container-v1_12 .dcg-copy-evaluation-view .dcg-icon-check{animation:dcg-fadeIn .3s;color:#127a3d}.dcg-calculator-api-container-v1_12 .dcg-copy-evaluation-button .dcg-icon-duplicate{opacity:.6}.dcg-calculator-api-container-v1_12 .dcg-copy-evaluation-button.dcg-focus-visible{outline:2px solid #8c29be;border-radius:2px;outline-offset:5px}.dcg-calculator-api-container-v1_12 .dcg-copy-evaluation-button.dcg-hovered .dcg-icon-duplicate{opacity:.8}.dcg-calculator-api-container-v1_12 .dcg-copy-evaluation-button.dcg-depressed .dcg-icon-duplicate{opacity:1}.dcg-calculator-api-container-v1_12 .dcg-color-swatch{width:30px;height:30px;border-radius:3px;overflow:hidden}.dcg-calculator-api-container-v1_12 .dcg-color-swatch.dcg-light-color{box-shadow:0 0 0 1px #0003 inset}.dcg-calculator-api-container-v1_12 .dcg-container.dcg-inverted-swatches .dcg-color-swatch.dcg-light-color{box-shadow:0 0 0 1px #fff3 inset}.dcg-calculator-api-container-v1_12 .dcg-color-swatch.dcg-hovered:not(.dcg-color-evaluation){box-shadow:0 0 0 2px #0000001a}.dcg-calculator-api-container-v1_12 .dcg-color-swatch.dcg-hovered:not(.dcg-color-evaluation).dcg-light-color{box-shadow:0 0 0 2px #0000001a,0 0 0 1px #0003 inset}.dcg-calculator-api-container-v1_12 .dcg-container.dcg-inverted-swatches .dcg-color-swatch.dcg-hovered:not(.dcg-color-evaluation).dcg-light-color{box-shadow:0 0 0 1px #fff3 inset}.dcg-calculator-api-container-v1_12 .dcg-color-swatch.dcg-depressed:not(.dcg-color-evaluation){box-shadow:0 0 0 2px #0003}.dcg-calculator-api-container-v1_12 .dcg-color-swatch.dcg-depressed:not(.dcg-color-evaluation).dcg-light-color{box-shadow:0 0 0 2px #0003,0 0 0 1px #0003 inset}.dcg-calculator-api-container-v1_12 .dcg-container.dcg-inverted-swatches .dcg-color-swatch.dcg-depressed:not(.dcg-color-evaluation).dcg-light-color{box-shadow:0 0 0 1px #fff3 inset}.dcg-calculator-api-container-v1_12 .dcg-color-swatch.dcg-has-background-image{background:#fff;width:30px;height:30px;overflow:hidden;background-size:30px 30px!important;content:\"\"}.dcg-calculator-api-container-v1_12 .dcg-expression-footer__alt-text{font-size:.85rem;margin-right:5px;padding:4px;border:1px solid #bbb;background:#eee;border-radius:4px;color:#444}.dcg-calculator-api-container-v1_12 .dcg-expression-footer__alt-text b{font-family:Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif;font-weight:500;margin-right:5px;color:#000}.dcg-calculator-api-container-v1_12 .dcg-exportable-evaluation--value,.dcg-calculator-api-container-v1_12 .dcg-exportable-evaluation--value .dcg-mq-math-mode{font-size:.95rem}.dcg-calculator-api-container-v1_12 .dcg-exportable-evaluation--value{border:1px solid rgba(206,206,206,.8);background:#0000000a;border-radius:4px;font-size:.9rem;padding:0 3px;display:flex;align-items:center}.dcg-calculator-api-container-v1_12 .dcg-exportable-evaluation--value .dcg-tooltipped-error-container{margin-top:1px}.dcg-calculator-api-container-v1_12 .dcg-exportable-evaluation--value .dcg-static-mathquill-view{pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-exportable-evaluation--value i.dcg-icon-caret-down{opacity:.3;font-size:.6rem;font-style:normal;margin-left:1px}.dcg-calculator-api-container-v1_12 .dcg-exportable-evaluation--value.dcg-hovered i.dcg-icon-caret-down{opacity:.5}.dcg-calculator-api-container-v1_12 .dcg-exportable-evaluation--value.dcg-depressed i.dcg-icon-caret-down{opacity:.7}.dcg-calculator-api-container-v1_12 .dcg-exportable-evaluation--popover{font-family:Arial,Helvetica,sans-serif;font-style:normal;font-size:.9rem}.dcg-calculator-api-container-v1_12 .dcg-exportable-evaluation--popover .dcg-label-raw-text{margin-bottom:5px;white-space:nowrap;display:block}.dcg-calculator-api-container-v1_12 .dcg-exportable-evaluation--popover .dcg-exportable-evaluation__copy-wrapper{display:flex;align-items:center;gap:5px}.dcg-calculator-api-container-v1_12 .dcg-exportable-evaluation--popover .dcg-exportable-evaluation__copy-wrapper .dcg-static-mathquill-view{font-size:.95rem}.dcg-calculator-api-container-v1_12 .dcg-exportable-evaluation--popover .dcg-exportable-evaluation__copy-wrapper .dcg-exportable-evaluation__export-btn{width:28px;font-size:.95rem;height:28px;line-height:28px;text-align:center;border-radius:3px;margin:-5px;opacity:.4;outline:none}.dcg-calculator-api-container-v1_12 .dcg-exportable-evaluation--popover .dcg-exportable-evaluation__copy-wrapper .dcg-exportable-evaluation__export-btn.dcg-focus-visible{outline:2px solid #8c29be}.dcg-calculator-api-container-v1_12 .dcg-exportable-evaluation--popover .dcg-exportable-evaluation__copy-wrapper .dcg-exportable-evaluation__export-btn.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-exportable-evaluation--popover .dcg-exportable-evaluation__copy-wrapper .dcg-exportable-evaluation__export-btn.dcg-focus-visible{opacity:.7}.dcg-calculator-api-container-v1_12 .dcg-exportable-evaluation--popover .dcg-exportable-evaluation__copy-wrapper .dcg-exportable-evaluation__export-btn.dcg-depressed{opacity:1}.dcg-calculator-api-container-v1_12 .dcg-exportable-evaluation--popover .dcg-exportable-evaluation__copy-wrapper i{font-style:normal}.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover .dcg-popover-interior,.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover .dcg-dropdown-popover__interior{padding:20px;background-color:var(--dcg-custom-background-color, #fff);border:1px solid #bbb;border-radius:6px;box-shadow:0 5px 10px #0003;color:var(--dcg-custom-text-color, #000);margin:-1px;overflow:auto;cursor:auto}.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover .dcg-popover-title,.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover .dcg-dropdown-popover__title{margin-bottom:10px;font-size:1.15rem;border-bottom:2px solid #2f72dc;color:#2f72dc;font-weight:400;background-color:#fff;line-height:normal}.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover .dcg-popover-title:not(:first-of-type),.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover .dcg-dropdown-popover__title:not(:first-of-type){padding-top:20px}.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover{position:absolute;z-index:6;margin:1px;-webkit-user-select:text;user-select:text}.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover .dcg-popover-interior{border:1px solid #bbb}.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover--with-arrow{margin:0}.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover--with-arrow.dcg-top{margin-bottom:14px}.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover--with-arrow.dcg-right{margin-left:14px}.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover--with-arrow.dcg-bottom{margin-top:14px}.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover--with-arrow.dcg-left{margin-right:14px}.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover:not(.dcg-dropdown-popover--constrain-height).dcg-left{right:100%}.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover:not(.dcg-dropdown-popover--constrain-height).dcg-right{left:100%}.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover:not(.dcg-dropdown-popover--constrain-height).dcg-top{bottom:100%}.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover:not(.dcg-dropdown-popover--constrain-height).dcg-bottom{top:100%}.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover--constrain-height{top:40px;bottom:2px;right:4px;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover--constrain-height .dcg-dropdown-popover__interior{max-height:100%;pointer-events:auto}.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover .dcg-dropdown-popover__interior{padding:10px}.dcg-calculator-api-container-v1_12 .dcg-popover-with-anchor{position:relative;display:inline-block;margin:auto}.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover .dcg-arrow,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-arrow{position:absolute;display:inline-block;width:0;height:0;border-color:transparent;border-style:solid}.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover .dcg-arrow:after,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-arrow:after{position:absolute;display:inline-block;width:0;height:0;border-color:transparent;border-style:solid;content:\"\";z-index:-1}.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover .dcg-arrow,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-arrow{border-width:var(--dcg-arrow-size, 12px);transform-style:preserve-3d}.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover .dcg-arrow:after,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-arrow:after{border-width:var(--dcg-arrow-size, 12px);transform:translateZ(-1px);scale:1.07}.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover.dcg-top .dcg-arrow,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard.dcg-top .dcg-arrow{bottom:calc(-1 * var(--dcg-arrow-size, 12px));border-bottom-width:0;border-top-color:var(--dcg-custom-background-color, #fff)}.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover.dcg-top .dcg-arrow:after,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard.dcg-top .dcg-arrow:after{border-bottom-width:0;border-top-color:#bbb;bottom:-1px;left:calc(-1 * var(--dcg-arrow-size, 12px))}.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover.dcg-right .dcg-arrow,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard.dcg-right .dcg-arrow{left:calc(-1 * var(--dcg-arrow-size, 12px));border-left-width:0;border-right-color:var(--dcg-custom-background-color, #fff)}.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover.dcg-right .dcg-arrow:after,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard.dcg-right .dcg-arrow:after{border-left-width:0;border-right-color:#bbb;bottom:calc(-1 * var(--dcg-arrow-size, 12px));left:-1px}.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover.dcg-bottom .dcg-arrow,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard.dcg-bottom .dcg-arrow{top:calc(-1 * var(--dcg-arrow-size, 12px));border-top-width:0;border-bottom-color:var(--dcg-custom-background-color, #fff)}.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover.dcg-bottom .dcg-arrow:after,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard.dcg-bottom .dcg-arrow:after{border-top-width:0;border-bottom-color:#bbb;top:-1px;left:calc(-1 * var(--dcg-arrow-size, 12px))}.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover.dcg-left .dcg-arrow,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard.dcg-left .dcg-arrow{right:calc(-1 * var(--dcg-arrow-size, 12px));border-right-width:0;border-left-color:var(--dcg-custom-background-color, #fff)}.dcg-calculator-api-container-v1_12 .dcg-dropdown-popover.dcg-left .dcg-arrow:after,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard.dcg-left .dcg-arrow:after{border-right-width:0;border-left-color:#bbb;bottom:calc(-1 * var(--dcg-arrow-size, 12px));right:-1px}.dcg-calculator-api-container-v1_12 .dcg-tooltipped-error{color:#e66b3c;font-size:22px;width:1.18em;height:1.18em;font-style:normal;display:inline-block;text-align:center}.dcg-calculator-api-container-v1_12 .dcg-tooltipped-error:not(.dcg-tooltipped-error__instant){animation:dcg-delayed-fadeIn 1s}.dcg-calculator-api-container-v1_12 .dcg-tooltipped-error.dcg-small{font-size:14px}.dcg-calculator-api-container-v1_12 .dcg-tooltipped-error.dcg-medium-small{font-size:1rem}.dcg-calculator-api-container-v1_12 .dcg-tooltipped-error.dcg-white{color:#fff}.dcg-calculator-api-container-v1_12 .dcg-tooltipped-error-container.dcg-focus-visible{outline:2px solid #8c29be;border-radius:3px}.dcg-calculator-api-container-v1_12 .dcg-mq-math-mode i.dcg-icon-error{font-style:normal}.dcg-calculator-api-container-v1_12 .dcg-exportable-evaluation--wrapper{display:flex;flex-wrap:nowrap;align-items:center;margin:2px 0}.dcg-calculator-api-container-v1_12 .dcg-exportable-evaluation--wrapper .dcg-exportable-evaluation--label{margin-right:5px}.dcg-calculator-api-container-v1_12 .dcg-exportable-evaluation--wrapper .dcg-popover-with-anchor{margin:0;display:flex;flex-direction:column;justify-content:center}.dcg-calculator-api-container-v1_12 .dcg-inference-ui h2,.dcg-calculator-api-container-v1_12 .dcg-inference-ui h3{margin:0}.dcg-calculator-api-container-v1_12 .dcg-inference-ui h2{font-size:1.25rem;font-weight:400}.dcg-calculator-api-container-v1_12 .dcg-inference-ui h3{font-size:.875rem;font-weight:400;text-transform:uppercase;color:#666}.dcg-calculator-api-container-v1_12 .dcg-inference-footer__expanded-section{padding-right:10px;display:flex;flex-direction:column;gap:3px}.dcg-calculator-api-container-v1_12 .dcg-inference-footer__expanded-section-border{border-left:1px solid #bbb;padding-left:10px;margin-left:6px;margin-top:-3px;padding-top:3px}.dcg-calculator-api-container-v1_12 .dcg-inference-footer__chi-sq-table{margin-bottom:5px}.dcg-calculator-api-container-v1_12 ul.dcg-inference-footer--values-table{display:grid;grid-template-columns:auto 1fr;align-items:stretch;gap:1px;background:#bbb;border:1px solid #bbb}.dcg-calculator-api-container-v1_12 ul.dcg-inference-footer--values-table li{display:contents}.dcg-calculator-api-container-v1_12 ul.dcg-inference-footer--values-table li>.dcg-exportable-evaluation__copy-wrapper,.dcg-calculator-api-container-v1_12 ul.dcg-inference-footer--values-table li>label{background:var(--dcg-custom-background-color, white);padding:5px}.dcg-calculator-api-container-v1_12 ul.dcg-inference-footer--values-table li .dcg-exportable-evaluation__copy-wrapper{justify-content:space-between}.dcg-calculator-api-container-v1_12 ul.dcg-inference-footer--values-table li .dcg-exportable-evaluation__copy-wrapper .dcg-mathquill-wrapper .dcg-mathquill-braille .dcg-braille-input{width:unset}.dcg-calculator-api-container-v1_12 ul.dcg-inference-footer--values-table li label{background:var(--dcg-custom-background-color-shaded, #ddd);line-height:1.1em;display:flex;flex-direction:column;justify-content:center}.dcg-calculator-api-container-v1_12 ul.dcg-inference-footer--values-table li label .dcg-label-raw-text{margin-bottom:0;display:inline-block}.dcg-calculator-api-container-v1_12 .dcg-update-behavior-btn{height:25px;line-height:25px;padding:0 10px;margin-top:3px;margin-right:.3rem;color:#000}.dcg-calculator-api-container-v1_12 .dcg-warning-footer-learn-more{margin-right:.3rem}.dcg-calculator-api-container-v1_12 .dcg-create-sliders{display:flex;flex-wrap:wrap;align-items:center;margin-top:-2px}.dcg-calculator-api-container-v1_12 .dcg-create-sliders .dcg-msg{margin-right:5px;font-size:80%;color:var(--dcg-custom-text-color, rgba(0, 0, 0, .6))}.dcg-calculator-api-container-v1_12 .dcg-create-sliders .dcg-all .dcg-btn-slider{font-style:normal}.dcg-calculator-api-container-v1_12 .dcg-create-sliders .dcg-btn-slider{padding:0 4px!important;min-width:35px;font-family:times;font-size:85%;font-style:italic}.dcg-calculator-api-container-v1_12 .dcg-create-sliders .dcg-btn-slider .dcg-mq-math-mode{pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-create-sliders .dcg-btn-slider.dcg-base-case-btn{font-size:80%}.dcg-calculator-api-container-v1_12 .dcg-create-sliders .dcg-slider-btn-container{display:inline-block;position:relative;margin-right:3px;margin-top:1.5px;margin-bottom:1.5px}.dcg-calculator-api-container-v1_12 .dcg-create-sliders .dcg-slider-btn-container .dcg-btn-slider{line-height:24px}.dcg-calculator-api-container-v1_12 .dcg-inference--confidence--diagram{position:relative;width:100%;max-width:260px;margin-top:5px;margin-bottom:5px;height:50px;border:1px solid var(--dcg-custom-text-color-shaded, #bbb);border-radius:5px}.dcg-calculator-api-container-v1_12 .dcg-inference--confidence--diagram .dcg-inference--confidence--diagram-label{position:absolute;transition:transform .3s;font-size:.8rem;color:var(--dcg-custom-text-color, #454545);top:50%;margin-top:1px}.dcg-calculator-api-container-v1_12 .dcg-inference--confidence--diagram .dcg-inference-confidence-level-bar .dcg-tooltip-hit-area-container{position:absolute;left:50%;margin-left:-10px;top:-9px;width:20px;height:19px;text-align:center;display:flex;align-items:center;justify-content:center}.dcg-calculator-api-container-v1_12 .dcg-inference--confidence--diagram .dcg-inference-confidence-level-bar .dcg-tooltip-hit-area-container .dcg-inference-footer--point-estimate{display:inline-block;width:5px;height:5px;background:var(--dcg-custom-text-color, #000);border-radius:50%}.dcg-calculator-api-container-v1_12 .dcg-inference--confidence--diagram .dcg-inference--confidence--diagram-lower{left:var(--dcg-lower-percent);transform:translate(-110%,-50%)}.dcg-calculator-api-container-v1_12 .dcg-inference--confidence--diagram .dcg-inference--confidence--diagram-lower.dcg-inference--confidence--diagram-labels-below{transform:translate(-50%)}.dcg-calculator-api-container-v1_12 .dcg-inference--confidence--diagram .dcg-inference--confidence--diagram-upper{left:var(--dcg-upper-percent);transform:translate(10%,-50%)}.dcg-calculator-api-container-v1_12 .dcg-inference--confidence--diagram .dcg-inference--confidence--diagram-upper.dcg-inference--confidence--diagram-labels-below{transform:translate(-50%)}.dcg-calculator-api-container-v1_12 .dcg-inference--confidence--diagram .dcg-inference-confidence-level-bar{position:absolute;top:50%;transition:top .3s;left:var(--dcg-lower-percent);width:calc(var(--dcg-upper-percent) - var(--dcg-lower-percent));border-bottom:1px solid var(--dcg-custom-text-color-shaded, #454545)}.dcg-calculator-api-container-v1_12 .dcg-inference--confidence--diagram .dcg-inference-confidence-level-bar.dcg-inference--confidence--diagram-labels-below{top:35%}.dcg-calculator-api-container-v1_12 .dcg-inference--confidence--diagram .dcg-inference-confidence-level-bar:after{content:\"\";position:absolute;right:-.5px;top:-3px;height:7px;border-right:1px solid var(--dcg-custom-text-color-shaded, #454545)}.dcg-calculator-api-container-v1_12 .dcg-inference--confidence--diagram .dcg-inference-confidence-level-bar:before{content:\"\";position:absolute;left:-.5px;top:-3px;height:7px;border-left:1px solid var(--dcg-custom-text-color-shaded, #454545)}.dcg-calculator-api-container-v1_12 .dcg-inference--confidence--diagram .dcg-inference-confidence-level-bar.dcg-inference-confidence-level-bar__arrows:after{height:0;border:4px solid transparent;border-width:4px 6px;border-left-color:var(--dcg-custom-text-color-shaded, #454545);right:-7px;top:-3.5px}.dcg-calculator-api-container-v1_12 .dcg-inference--confidence--diagram .dcg-inference-confidence-level-bar.dcg-inference-confidence-level-bar__arrows:before{height:0;border:4px solid transparent;border-width:4px 6px;border-right-color:var(--dcg-custom-text-color-shaded, #454545);left:-7px;top:-3.5px}.dcg-calculator-api-container-v1_12 .dcg-inference--confidence--diagram .dcg-popover-with-anchor{position:absolute;top:7px;right:3px}.dcg-calculator-api-container-v1_12 .dcg-inference--confidence--diagram .dcg-popover-with-anchor__anchor{opacity:.4}.dcg-calculator-api-container-v1_12 .dcg-inference--confidence--diagram .dcg-popover-with-anchor__anchor.dcg-hovered{opacity:.7}.dcg-calculator-api-container-v1_12 .dcg-inference--confidence--diagram .dcg-popover-with-anchor__anchor.dcg-depressed{opacity:1}.dcg-calculator-api-container-v1_12 .dcg-inference-confidence-point-estimate-tooltip{font-size:.85rem}.dcg-calculator-api-container-v1_12 .dcg-dot-dot-dropdown{position:relative;height:1em;width:1em;display:inline-block}.dcg-calculator-api-container-v1_12 .dcg-distribution-footer-view{max-width:500px}.dcg-calculator-api-container-v1_12 .dcg-distribution-footer-view .dcg-smaller-font{font-size:85%}.dcg-calculator-api-container-v1_12 .dcg-distribution-footer-view .dcg-distribution-view--bounds{display:flex;white-space:nowrap}.dcg-calculator-api-container-v1_12 .dcg-distribution-footer-view .dcg-distribution-view__or{margin-left:.4rem;margin-right:.2rem;font-size:.95rem}.dcg-calculator-api-container-v1_12 .dcg-distribution-footer-view .dcg-distribution-footer__toggles{display:flex;column-gap:10px;flex-wrap:wrap}.dcg-calculator-api-container-v1_12 .dcg-distribution-footer-view .dcg-segmented-control-container{margin-top:5px;margin-bottom:10px}.dcg-calculator-api-container-v1_12 .dcg-distribution-footer-view .dcg-inline-math-input-view{margin-left:-2px}.dcg-calculator-api-container-v1_12 .dcg-distribution-footer-view .dcg-distribution-footer-view--cdf-params{display:flex;align-items:center;flex-wrap:wrap;font-size:.8rem}.dcg-calculator-api-container-v1_12 .dcg-distribution-footer-view .dcg-distribution-view--bounds,.dcg-calculator-api-container-v1_12 .dcg-distribution-footer-view .dcg-distribution-footer__rhs{display:flex;align-items:center;flex-wrap:nowrap}.dcg-calculator-api-container-v1_12 .dcg-distribution-footer-view .dcg-distribution-footer__equals{margin-left:-4px;margin-right:-2px}.dcg-calculator-api-container-v1_12 .dcg-distribution-footer-view .dcg-distribution-footer__lhs>.dcg-mq-root-block{overflow:visible}.dcg-calculator-api-container-v1_12 .dcg-distribution-footer-view .dcg-distribution-footer__lhs .dcg-mq-paren{width:.55em}.dcg-calculator-api-container-v1_12 .dcg-distribution-footer-view .dcg-distribution-footer__lhs .dcg-mq-bracket-middle{margin:0 .55em}.dcg-calculator-api-container-v1_12 .dcg-inference-footer_section-title i.dcg-icon-caret-down{display:inline-block;transition:transform .2s}.dcg-calculator-api-container-v1_12 .dcg-inference-footer_section-title:not([aria-expanded=true]):not([open]) i.dcg-icon-caret-down{transform:rotate(-90deg)}.dcg-calculator-api-container-v1_12 .dcg-inference-footer{display:flex;flex-direction:column;gap:5px}.dcg-calculator-api-container-v1_12 .dcg-inference-footer .dcg-inference--significance-checkbox-row{display:flex;gap:20px}.dcg-calculator-api-container-v1_12 .dcg-inference-footer .dcg-inference--prop-input{display:flex;flex-wrap:nowrap}.dcg-calculator-api-container-v1_12 .dcg-inference-footer .dcg-inference--prop-input .dcg-inline-math-input-view{margin-left:-5px}.dcg-calculator-api-container-v1_12 .dcg-inference-footer__expanded-section .dcg-create-sliders{margin-top:3px}.dcg-calculator-api-container-v1_12 .dcg-inference-footer_section-title{margin-bottom:5px;color:var(--dcg-custom-text-color, #666)}.dcg-calculator-api-container-v1_12 .dcg-inference-footer_section-title i{font-size:.8rem;position:relative;top:-1px;margin-right:2px;color:var(--dcg-custom-text-color, #bbb)}.dcg-calculator-api-container-v1_12 .dcg-inference-footer_section-title.dcg-hovered i{color:var(--dcg-custom-text-color-shaded, #949494)}.dcg-calculator-api-container-v1_12 .dcg-inference-footer_section-title.dcg-depressed i{color:var(--dcg-custom-text-color-shaded, #666)}.dcg-calculator-api-container-v1_12 .dcg-inference-footer_section-title.dcg-inference-footer_section-open i{color:var(--dcg-custom-text-color, #666)}.dcg-calculator-api-container-v1_12 .dcg-inference-footer_section-title.dcg-inference-footer_section-open.dcg-depressed i{color:var(--dcg-custom-text-color-shaded, #000)}.dcg-calculator-api-container-v1_12 .dcg-inference-footer--checkboxes{display:flex;column-gap:8px;align-items:end;margin-bottom:8px;flex-wrap:wrap}.dcg-calculator-api-container-v1_12 .dcg-inference-footer--checkboxes .dcg-mq-math-mode{margin-top:-8px}.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-popover .dcg-arrow{right:9px}.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-test-of-independence-table{overflow-x:auto;overflow-y:hidden;padding-bottom:.5rem}.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-test-of-independence-table .dcg-table--cell .dcg-mathquill-wrapper{pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-goodness-of-fit-table .dcg-table,.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-test-of-independence-table .dcg-table,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__chi-square .dcg-table{display:grid;font-size:.9rem;grid-template-columns:repeat(var(--dcg-column-count),auto);grid-template-rows:repeat(var(--dcg-row-count),auto);width:max-content}.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-goodness-of-fit-table .dcg-table .dcg-table--totals-cell,.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-test-of-independence-table .dcg-table .dcg-table--totals-cell,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__chi-square .dcg-table .dcg-table--totals-cell{background:var(--dcg-custom-background-color-shaded, #e2e2e2)}.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-goodness-of-fit-table .dcg-table .dcg-table--totals-cell label,.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-test-of-independence-table .dcg-table .dcg-table--totals-cell label,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__chi-square .dcg-table .dcg-table--totals-cell label{margin-right:3px}.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-goodness-of-fit-table .dcg-table .dcg-table--cell,.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-test-of-independence-table .dcg-table .dcg-table--cell,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__chi-square .dcg-table .dcg-table--cell{border:1px solid #bbb;border-bottom:1px solid #bbb;display:flex;justify-content:center;align-items:center;position:relative;margin:0 -1px -1px 0}.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-goodness-of-fit-table .dcg-table .dcg-table--cell.dcg-table--overflow-cell,.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-test-of-independence-table .dcg-table .dcg-table--cell.dcg-table--overflow-cell,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__chi-square .dcg-table .dcg-table--cell.dcg-table--overflow-cell{padding:8px 10px;grid-column:span var(--dcg-col-span, 1);justify-content:start}.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-goodness-of-fit-table .dcg-table .dcg-table--cell.dcg-table--overflow-cell .dcg-table--overflow-cell-contents,.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-test-of-independence-table .dcg-table .dcg-table--cell.dcg-table--overflow-cell .dcg-table--overflow-cell-contents,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__chi-square .dcg-table .dcg-table--cell.dcg-table--overflow-cell .dcg-table--overflow-cell-contents{font-style:italic;color:#0009;font-size:.85rem;width:100%;max-width:calc(var(--dcg-exp-list-width) - 200px);white-space:nowrap;text-align:center}.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-goodness-of-fit-table .dcg-table .dcg-table--cell>.dcg-table--cell-interior,.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-test-of-independence-table .dcg-table .dcg-table--cell>.dcg-table--cell-interior,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__chi-square .dcg-table .dcg-table--cell>.dcg-table--cell-interior{display:flex;justify-content:center;align-items:center;padding:.3rem 1.2rem;flex:1;height:100%;min-height:2.25em}.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-goodness-of-fit-table .dcg-table .dcg-table--cell>.dcg-popover-with-anchor__anchor .dcg-static-mathquill-view,.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-test-of-independence-table .dcg-table .dcg-table--cell>.dcg-popover-with-anchor__anchor .dcg-static-mathquill-view,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__chi-square .dcg-table .dcg-table--cell>.dcg-popover-with-anchor__anchor .dcg-static-mathquill-view{cursor:pointer}.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-goodness-of-fit-table .dcg-table .dcg-table--cell .dcg-icon-caret-down,.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-test-of-independence-table .dcg-table .dcg-table--cell .dcg-icon-caret-down,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__chi-square .dcg-table .dcg-table--cell .dcg-icon-caret-down{position:absolute;right:6px;top:50%;margin-top:-6px;display:none;opacity:.3;font-size:.75rem;font-style:normal;margin-left:1px}.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-goodness-of-fit-table .dcg-table .dcg-table--cell.dcg-hovered:not(:has(.dcg-tooltipped-error-container.dcg-hovered)) .dcg-icon-caret-down,.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-goodness-of-fit-table .dcg-table .dcg-table--cell.dcg-focused:not(:has(.dcg-tooltipped-error-container.dcg-hovered)) .dcg-icon-caret-down,.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-goodness-of-fit-table .dcg-table .dcg-table--cell [aria-expanded=true] .dcg-icon-caret-down,.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-test-of-independence-table .dcg-table .dcg-table--cell.dcg-hovered:not(:has(.dcg-tooltipped-error-container.dcg-hovered)) .dcg-icon-caret-down,.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-test-of-independence-table .dcg-table .dcg-table--cell.dcg-focused:not(:has(.dcg-tooltipped-error-container.dcg-hovered)) .dcg-icon-caret-down,.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-test-of-independence-table .dcg-table .dcg-table--cell [aria-expanded=true] .dcg-icon-caret-down,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__chi-square .dcg-table .dcg-table--cell.dcg-hovered:not(:has(.dcg-tooltipped-error-container.dcg-hovered)) .dcg-icon-caret-down,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__chi-square .dcg-table .dcg-table--cell.dcg-focused:not(:has(.dcg-tooltipped-error-container.dcg-hovered)) .dcg-icon-caret-down,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__chi-square .dcg-table .dcg-table--cell [aria-expanded=true] .dcg-icon-caret-down{display:block}.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-goodness-of-fit-table .dcg-table .dcg-table--cell .dcg-chi-square--expected,.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-test-of-independence-table .dcg-table .dcg-table--cell .dcg-chi-square--expected,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__chi-square .dcg-table .dcg-table--cell .dcg-chi-square--expected{font-size:90%;margin-left:.25rem;opacity:.6}.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-goodness-of-fit-table .dcg-table .dcg-chi-square--expected .dcg-icon-error,.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-goodness-of-fit-table .dcg-table .dcg-table--totals-cell .dcg-icon-error,.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-goodness-of-fit-table .dcg-table .dcg-chi-square--contributions-cell .dcg-icon-error,.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-test-of-independence-table .dcg-table .dcg-chi-square--expected .dcg-icon-error,.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-test-of-independence-table .dcg-table .dcg-table--totals-cell .dcg-icon-error,.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-test-of-independence-table .dcg-table .dcg-chi-square--contributions-cell .dcg-icon-error,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__chi-square .dcg-table .dcg-chi-square--expected .dcg-icon-error,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__chi-square .dcg-table .dcg-table--totals-cell .dcg-icon-error,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__chi-square .dcg-table .dcg-chi-square--contributions-cell .dcg-icon-error{font-size:.8rem;color:var(--dcg-custom-text-color, #949494)}.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-goodness-of-fit-table .dcg-table .dcg-table--col-header,.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-goodness-of-fit-table .dcg-table .dcg-table--row-header,.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-test-of-independence-table .dcg-table .dcg-table--col-header,.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-test-of-independence-table .dcg-table .dcg-table--row-header,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__chi-square .dcg-table .dcg-table--col-header,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__chi-square .dcg-table .dcg-table--row-header{background:var(--dcg-custom-background-color-shaded, #ddd);font-size:.85rem}.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-goodness-of-fit-table .dcg-table .dcg-table--col-header .dcg-mq-math-mode,.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-goodness-of-fit-table .dcg-table .dcg-table--row-header .dcg-mq-math-mode,.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-test-of-independence-table .dcg-table .dcg-table--col-header .dcg-mq-math-mode,.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-test-of-independence-table .dcg-table .dcg-table--row-header .dcg-mq-math-mode,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__chi-square .dcg-table .dcg-table--col-header .dcg-mq-math-mode,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__chi-square .dcg-table .dcg-table--row-header .dcg-mq-math-mode{margin-top:-4px}.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-goodness-of-fit-table .dcg-checkbox,.dcg-calculator-api-container-v1_12 .dcg-inference-footer--chi-square-test-of-independence-table .dcg-checkbox,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__chi-square .dcg-checkbox{margin:2px 0;font-size:.85rem}.dcg-calculator-api-container-v1_12 .dcg-popover-with-anchor__anchor{width:100%}.dcg-calculator-api-container-v1_12 .dcg-table.dcg-chi-square--show-contributions .dcg-table--cell:not(.dcg-table--col-header,.dcg-table--row-header,.dcg-table--totals-cell):after{content:\"\";position:absolute;top:0;left:0;bottom:0;width:calc(var(--dcg-contribution-shade) * 1.1em);opacity:var(--dcg-contribution-shade);background:var(--dcg-accent-color, #2f72dc);pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-inference-footer__significance-test{padding-right:10px}.dcg-calculator-api-container-v1_12 .dcg-inference-footer__significance-test .dcg-inference-footer__null-hypothesis-label{font-size:.9rem;margin-right:-5px}.dcg-calculator-api-container-v1_12 .dcg-inference-footer__significance-test .dcg-inference--significance--diagram{position:relative;width:100%;height:120px;max-width:260px;border:1px solid #bbb;border-radius:5px;margin-bottom:5px;margin-top:5px}.dcg-calculator-api-container-v1_12 .dcg-inference-footer__significance-test .dcg-inference--significance--diagram svg{width:100%}.dcg-calculator-api-container-v1_12 .dcg-inference-footer__significance-test .dcg-inference--significance--diagram .dcg-inference-footer__significance-test__overlay-values{position:absolute;top:4px;left:5px;font-size:.8rem;color:var(--dcg-custom-text-color, #454545);display:flex;flex-direction:column}.dcg-calculator-api-container-v1_12 .dcg-inference-footer__significance-test .dcg-inference--significance--diagram .dcg-inference-footer__significance-test__overlay-values.dcg-inference-footer__overlay-values-bump-right{left:10%}.dcg-calculator-api-container-v1_12 .dcg-inference-footer__significance-test .dcg-inference--significance--diagram .dcg-inference-footer__significance-test__score-label{position:absolute;width:100%;bottom:2px;display:flex;font-size:.8rem;color:var(--dcg-custom-text-color, #454545)}.dcg-calculator-api-container-v1_12 .dcg-inference-footer__significance-test .dcg-inference--significance--diagram .dcg-inference-footer__significance-test__score-label .dcg-inference-footer__significance-test__score-label__spacer{flex-basis:max(var(--score-label-x-pct, 0%) - 10px,5px)}.dcg-calculator-api-container-v1_12 .dcg-inference-footer__significance-test .dcg-inference--significance--diagram .dcg-inference-footer__significance-test__score-label .dcg-inference-footer__significance-test__score-label__label{padding-right:5px}.dcg-calculator-api-container-v1_12 .dcg-inference-footer__significance-test .dcg-inference--significance--diagram .dcg-popover-with-anchor{position:absolute;top:7px;right:3px}.dcg-calculator-api-container-v1_12 .dcg-inference-footer__significance-test .dcg-inference--significance--diagram .dcg-popover-with-anchor__anchor{opacity:.4}.dcg-calculator-api-container-v1_12 .dcg-inference-footer__significance-test .dcg-inference--significance--diagram .dcg-popover-with-anchor__anchor.dcg-hovered{opacity:.7}.dcg-calculator-api-container-v1_12 .dcg-inference-footer__significance-test .dcg-inference--significance--diagram .dcg-popover-with-anchor__anchor.dcg-depressed{opacity:1}.dcg-calculator-api-container-v1_12 .dcg-inference-footer__significance-test .dcg-inference-footer--values-table{margin-bottom:10px}.dcg-calculator-api-container-v1_12 .dcg-significance-diagram--export-button{width:100%}.dcg-calculator-api-container-v1_12 .dcg-inference-footer__input-section{display:flex;align-items:center;flex-wrap:wrap;row-gap:3px}.dcg-calculator-api-container-v1_12 .dcg-inference-footer__input-section label{font-size:.9rem;color:var(--dcg-custom-text-color, rgba(0, 0, 0, .6));margin-right:.4em;white-space:nowrap}.dcg-calculator-api-container-v1_12 .dcg-inference-footer__input-section .dcg-segmented-control-container{--segmented-control-vertical-padding: 3px;font-size:.85rem}.dcg-calculator-api-container-v1_12 .dcg-inference--significance--diagram--large{width:100%;height:100%;overflow:hidden}.dcg-calculator-api-container-v1_12 .dcg-significance-diagram-curve{fill:none;stroke:var(--dcg-accent-color, #2f72dc);stroke-opacity:1;stroke-width:1.5px}.dcg-calculator-api-container-v1_12 .dcg-significance-diagram-dot{fill:var(--dcg-custom-text-color, black);stroke:none;fill-opacity:1}.dcg-calculator-api-container-v1_12 .dcg-significance-diagram-outer-dot{fill:var(--dcg-custom-text-color-shaded, #949494);stroke:none;fill-opacity:1}.dcg-calculator-api-container-v1_12 .dcg-significance-diagram-outer-label{font-family:Times New Roman,Symbola,serif;fill:var(--dcg-custom-text-color, #888);stroke:none;fill-opacity:1;font-style:italic;font-size:14.168px;letter-spacing:-1px}.dcg-calculator-api-container-v1_12 .dcg-significance-diagram-tails{fill:var(--dcg-accent-color, #2f72dc);stroke:none;opacity:.3}.dcg-calculator-api-container-v1_12 .dcg-significance-diagram-minor-tick{fill:none;stroke:var(--dcg-custom-text-color-shaded, #454545);stroke-opacity:1;stroke-width:.75px}.dcg-calculator-api-container-v1_12 .dcg-significance-diagram-major-tick{fill:none;stroke:var(--dcg-custom-text-color-shaded, #454545);stroke-opacity:1;stroke-width:1.5px}.dcg-calculator-api-container-v1_12 .dcg-significance-diagram-x-axis{fill:none;stroke:var(--dcg-custom-text-color-shaded, #454545);stroke-opacity:1;stroke-width:1px}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-editable-mode-toggle{padding-left:5px}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-label-container{cursor:default;display:flex;align-items:center;min-height:18px}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-label-container input:not([type=checkbox]){min-width:5px;font-size:var(--dcg-minimum-input-font-size, inherit);margin-left:5px;flex:1;background:var(--dcg-custom-background-color-shaded);color:var(--dcg-custom-text-color, #000);outline:none;border:1px solid #bbb;border-top:0!important;border-right:0!important;border-left:0!important;color:#000;padding:1px 2px;-webkit-appearance:none;appearance:none;border-radius:0}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-label-container input:not([type=checkbox]).dcg-hovered{border-color:#ccc;box-shadow:0 1px #ccc}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-label-container input:not([type=checkbox]):focus:not([disabled]){border-color:#2f72dc;box-shadow:0 1px #2f72dc}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-label-container input:not([type=checkbox]).dcg-disabled-editable-input{opacity:0;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-label-container input:not([type=checkbox]).dcg-readonly{pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-label-container .dcg-computed-label-value{margin-left:2px;color:#949494;flex:1}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-label-container .dcg-computed-label-value .dcg-mq-math-mode{width:100%}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-label-container.dcg-label-visible .dcg-checkbox__box{color:#666}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-editable-mode-toggle{position:relative;top:-3px}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expression-bottom .dcg-label-container{font-size:100%}.dcg-calculator-api-container-v1_12 .dcg-expression-bottom .dcg-label-container{font-size:80%;color:var(--dcg-custom-text-color, rgba(0, 0, 0, .6));padding-right:6px}.dcg-calculator-api-container-v1_12 .dcg-parameter-suggestion-container{font-size:80%;position:relative;top:-9px;margin-bottom:-9px;margin-left:2px;white-space:nowrap;width:100%;padding-right:5px;text-overflow:ellipsis;overflow:hidden;color:var(--dcg-custom-text-color, #666);cursor:default}.dcg-calculator-api-container-v1_12 .dcg-parameter-suggestion-container.dcg-parameter-suggestion-braille{top:-6px}.dcg-calculator-api-container-v1_12 .dcg-parameter-suggestion-container.dcg-hovered .dcg-default-marker{color:var(--dcg-custom-text-color-shaded, #666)}.dcg-calculator-api-container-v1_12 .dcg-parameter-suggestion-container.dcg-depressed .dcg-default-marker{color:var(--dcg-custom-text-color-shaded, #333)}.dcg-calculator-api-container-v1_12 .dcg-parameter-suggestion-container .dcg-default-marker{color:var(--dcg-custom-text-color, rgba(0, 0, 0, .6));margin-left:.3em}.dcg-calculator-api-container-v1_12 .dcg-parameter-suggestion-container .dcg-parameter-name:not(:last-of-type):after{content:\",\";margin-right:5px}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard{position:absolute;z-index:6;overflow:visible;min-width:250px;display:flex;flex-direction:column;gap:4px;line-height:1.4em;border:1px solid #bbb;border-radius:5px;background:var(--dcg-custom-background-color, white)}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-btn-full-width{width:100%}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard:not(.dcg-add-inference-wizard__start-screen).dcg-top .dcg-arrow{border-top-color:var(--dcg-custom-background-color, #e2e2e2)}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-add-inference-wizard__close-button{position:absolute;right:-25px;top:-25px;width:30px;height:30px;color:#fff}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-add-inference-wizard__distribution-type{margin-bottom:15px}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-add-inference-wizard__distribution-type .dcg-mq-root-block{padding-right:1px}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-add-inference-wizard__distribution-type button.dcg-dropdown-input{padding-top:0;padding-bottom:0;height:2.5rem}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-add-inference-wizard__distribution-type .dcg-dropdown-choice{height:2rem;display:flex;align-items:center}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-add-inference-wizard__distribution-type .dcg-distribution-dropdown__first-discrete-option{border-top:1px solid #ccc}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-add-inference-wizard--body{padding:12px;max-width:100%}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-add-inference-wizard--body:not(:has(.dcg-shared-options-dropdown)){overflow-x:auto}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-wizard-interior-scrollable{width:100%;height:100%}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-wizard-interior-scrollable:not(:has(.dcg-shared-options-dropdown)){overflow-y:auto}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-add-inference-wizard--buttons{display:grid;grid-template-columns:1fr 1fr;width:100%;font-size:.85rem;gap:4px}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-add-inference-wizard--buttons .dcg-mq-root-block{padding-right:1px}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-add-inference-wizard--buttons.dcg-add-inference-wizard--buttons-two-columns{grid-template-columns:1fr}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-add-inference-wizard--buttons .dcg-mq-math-mode{pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-btn-gray-outline{font-size:.875rem}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-add-inference-wizard--section-title{text-transform:unset;font-size:.875rem;color:var(--dcg-custom-text-color, #666);margin-bottom:3px}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-add-inference-wizard--margin-above{margin-top:7px}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-add-inference-wizard--section-main-title{font-size:1rem;text-align:center;color:var(--dcg-custom-text-color, #000)}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-or-separator{height:1px;background:#bbb;margin:18px 0 12px;line-height:0;text-align:center}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-or-separator span{font-size:.9rem;background:var(--dcg-custom-background-color, white);color:var(--dcg-custom-text-color, #949494);display:inline-block;padding-left:4px;padding-right:4px;position:relative;height:10px;line-height:10px;z-index:1;margin-top:-5px}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard h3{margin:0;font-size:.875rem;font-weight:400;text-transform:uppercase;color:var(--dcg-custom-text-color, #666)}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-add-inference-wizard--select-type{display:grid;grid-template-columns:70% 30%;gap:5px}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-add-inference--sample-property .dcg-inline-math-input-view{flex-grow:1}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-add-inference--sample-property .dcg-inline-math-input-view .dcg-mathquill-wrapper,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-add-inference--sample-property .dcg-inline-math-input-view .dcg-mq-container,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-add-inference--sample-property .dcg-inline-math-input-view .dcg-math-field{width:100%}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard .dcg-add-inference-wizard--create-button-wrapper{display:flex;justify-content:center;margin-top:5px}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard--create-button-wrapper{background:var(--dcg-custom-background-color, #e2e2e2);border-top:1px solid #bbb;padding:6px}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard--create-button-wrapper .dcg-btn-blue{--dcg-btn-height: 30px;font-size:.9rem}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard--sample-description h3.dcg-add-inference-wizard--expandable-title{margin-top:8px}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard--sample-description h3.dcg-add-inference-wizard--expandable-title i{font-size:.75rem;color:var(--dcg-custom-text-color, #bbb);margin-right:.4em}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard--sample-description h3.dcg-add-inference-wizard--expandable-title.dcg-hovered i{color:var(--dcg-custom-text-color-shaded, #949494)}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard--sample-description h3.dcg-add-inference-wizard--expandable-title.dcg-depressed i{color:var(--dcg-custom-text-color-shaded, #666)}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard--sample-description h3.dcg-add-inference-wizard--expandable-title .dcg-add-inference-wizard--optional-text{margin-left:.4em;text-transform:none;color:var(--dcg-custom-text-color, #949494)}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__graph-cover{position:absolute;background:#000;opacity:.6;z-index:3}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__comma-warning{font-size:.85rem;width:0;min-width:100%;line-height:1.2em;margin-top:3px;color:#666;animation:dcg-fadeIn .3s}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__comma-warning button{--dcg-btn-height: 1.35em;padding-left:8px;padding-right:8px;margin-left:.3rem}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__table{min-width:100%;table-layout:fixed}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__table th,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__table td{border:1px solid #bbb;font-size:.85rem;text-align:center;position:relative}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__table th.dcg-left-align-contents,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__table td.dcg-left-align-contents{text-align:left}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__table th .dcg-mq-placeholder,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__table td .dcg-mq-placeholder{font-size:1.15em;margin-top:-.5em}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__table th:has(.dcg-focus):after,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__table td:has(.dcg-focus):after{content:\"\";position:absolute;border:2px solid #2f72dc;left:-1px;top:-1px;bottom:-1px;right:-1px;z-index:1;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__table th.dcg-invalid:after,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__table td.dcg-invalid:after{content:\"\";position:absolute;border:2px solid #e15855;left:-1px;top:-1px;bottom:-1px;right:-1px;z-index:1;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__table th{font-weight:400;text-align:center;background:var(--dcg-custom-background-color-shaded, #e2e2e2);padding:1px 5px}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__table .dcg-mathquill-wrapper{flex:1;height:100%;display:flex;align-items:center}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__table .dcg-mathquill-braille{flex:1}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__table .dcg-typeset-math,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__table .dcg-mq-container{width:100%;height:100%}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__table .dcg-mathquill-braille,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__table .dcg-tooltip-hit-area-container,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__table .dcg-braille-input{height:100%}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__table .dcg-mq-math-mode{width:100%;height:100%;display:flex;align-items:center;padding:4px}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__header{display:flex;width:100%;background:var(--dcg-custom-background-color, #e2e2e2);padding:0 6px;height:40px;line-height:40px;border-bottom:1px solid #bbb;gap:3px}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__header .dcg-add-inference-wizard__back-link{opacity:.3}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__header .dcg-add-inference-wizard__back-link.dcg-hovered{opacity:.6}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__header .dcg-add-inference-wizard__back-link.dcg-depressed{opacity:.8}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__header h2{flex:1;font-size:1rem;font-weight:400}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__header h2 .dcg-mq-root-block{padding-right:1px}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__header .dcg-segmented-control-container{font-size:.9rem}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__sample-type-selector{color:var(--dcg-custom-text-color, #454545);border:1px solid transparent;border-bottom:0;border-top-left-radius:5px;border-top-right-radius:5px;padding:0 10px;position:relative;margin-bottom:4px;top:5px;line-height:32px;font-size:.9rem}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__sample-type-selector.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__sample-type-selector.dcg-focus-visible{border-color:#bbb;color:var(--dcg-custom-text-color, #333)}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__sample-type-selector.dcg-depressed{border-color:#949494;color:var(--dcg-custom-text-color-shaded, #000)}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__sample-type-selector.dcg-selected{border-color:#bbb;color:var(--dcg-custom-text-color-shaded, #000);background:var(--dcg-custom-background-color, #fff)}.dcg-calculator-api-container-v1_12 .dcg-prompt-rename{display:inline-block;font-size:90%;margin-bottom:-3px}.dcg-calculator-api-container-v1_12 .dcg-prompt-rename .dcg-btn-light-gray{padding:2px 5px;margin-left:6px;margin-right:6px}.dcg-calculator-api-container-v1_12 .dcg-prompt-rename .dcg-reference-count{color:#949494}.dcg-calculator-api-container-v1_12 .dcg-regression-footer-view{font-size:.8rem;color:var(--dcg-custom-text-color, #222);cursor:default;white-space:pre-wrap}.dcg-calculator-api-container-v1_12 .dcg-regression-footer-view .dcg-statistics{min-width:130px;float:left;margin-bottom:10px}.dcg-calculator-api-container-v1_12 .dcg-regression-footer-view .dcg-residuals{float:left;width:130px;margin-bottom:10px}.dcg-calculator-api-container-v1_12 .dcg-regression-footer-view .dcg-residuals>.dcg-mathquill-wrapper{display:inline-block}.dcg-calculator-api-container-v1_12 .dcg-regression-footer-view .dcg-indented-r-value{padding-left:.8em}.dcg-calculator-api-container-v1_12 .dcg-regression-footer-view .dcg-residual-suggestion{padding:2px 8px;margin-left:7px;line-height:16px;display:inline-block}.dcg-calculator-api-container-v1_12 .dcg-regression-footer-view .dcg-residuals-zoom-view{display:inline-block;animation:dcg-fadeIn .3s;position:relative;top:1px}.dcg-calculator-api-container-v1_12 .dcg-regression-footer-view .dcg-residuals-zoom-view .dcg-icon-zoom-fit{padding:3px;opacity:.5;font-size:.85rem}.dcg-calculator-api-container-v1_12 .dcg-regression-footer-view .dcg-residuals-zoom-view .dcg-icon-zoom-fit.dcg-hovered{opacity:.75}.dcg-calculator-api-container-v1_12 .dcg-regression-footer-view .dcg-residuals-zoom-view .dcg-icon-zoom-fit.dcg-depressed{opacity:1}.dcg-calculator-api-container-v1_12 .dcg-regression-footer-view .dcg-log-mode-toggle{display:flex;align-items:center;margin-bottom:8px;margin-top:-5px;gap:4px}.dcg-calculator-api-container-v1_12 .dcg-regression-footer-view .dcg-log-mode-toggle .dcg-action-log-mode-toggle{cursor:pointer;padding:5px 0;color:#454545;border-radius:4px}.dcg-calculator-api-container-v1_12 .dcg-regression-footer-view .dcg-log-mode-toggle .dcg-action-log-mode-toggle .dcg-log-mode-checkbox{width:15px;height:15px;border:1px solid rgba(0,0,0,.2);margin-right:6px;border-radius:3px;position:relative}.dcg-calculator-api-container-v1_12 .dcg-regression-footer-view .dcg-log-mode-toggle .dcg-action-log-mode-toggle .dcg-log-mode-checkbox i{color:transparent}.dcg-calculator-api-container-v1_12 .dcg-regression-footer-view .dcg-log-mode-toggle .dcg-action-log-mode-toggle.dcg-no-hover-styling{cursor:default}.dcg-calculator-api-container-v1_12 .dcg-regression-footer-view .dcg-log-mode-toggle .dcg-action-log-mode-toggle.dcg-hovered .dcg-log-mode-checkbox{border-color:#aaa}.dcg-calculator-api-container-v1_12 .dcg-regression-footer-view .dcg-log-mode-toggle .dcg-action-log-mode-toggle.dcg-depressed .dcg-log-mode-checkbox{border-color:#666}.dcg-calculator-api-container-v1_12 .dcg-regression-footer-view .dcg-log-mode-toggle .dcg-log-mode-toggle-help{text-decoration:none;color:#0003;padding:10px 6px}.dcg-calculator-api-container-v1_12 .dcg-regression-footer-view .dcg-log-mode-toggle .dcg-log-mode-toggle-help.dcg-hovered{color:#aaa}.dcg-calculator-api-container-v1_12 .dcg-regression-footer-view .dcg-log-mode-toggle .dcg-log-mode-toggle-help.dcg-depressed{color:#666}.dcg-calculator-api-container-v1_12 .dcg-regression-footer-view .dcg-parameters-container{clear:both;padding-bottom:4px}.dcg-calculator-api-container-v1_12 .dcg-regression-footer-view .dcg-parameters-container .dcg-static-mathquill-view{float:left;min-width:130px;padding-right:5px}.dcg-calculator-api-container-v1_12 .dcg-regression-footer-view .dcg-parameters-container .dcg-static-mathquill-view:nth-of-type(odd){clear:both}.dcg-calculator-api-container-v1_12 .dcg-regression-footer-view .dcg-parameter-warning{color:#666;margin-right:5px;margin-bottom:5px}.dcg-calculator-api-container-v1_12 .dcg-regression-footer-view .dcg-parameter-warning i{font-size:85%}.dcg-calculator-api-container-v1_12 .dcg-regression-footer-view .dcg-parameter-warning a{color:#666;text-decoration:underline}.dcg-calculator-api-container-v1_12 .dcg-regression-footer-view .dcg-parameter-warning a.dcg-hovered{color:#000}.dcg-calculator-api-container-v1_12 .dcg-regression-footer-view .dcg-parameter-warning .dcg-btn{padding:2px 5px;margin-top:4px}.dcg-calculator-api-container-v1_12 .dcg-tab .dcg-suggested-zoom-view,.dcg-calculator-api-container-v1_12 .dcg-tab .dcg-residuals-zoom-view,.dcg-calculator-api-container-v1_12 .dcg-tab .dcg-generate-table-view,.dcg-calculator-api-container-v1_12 .dcg-tab .dcg-add-regression-view{position:absolute;bottom:7px;left:50%;font-size:20px;line-height:20px;margin-left:-10px;text-align:center;animation:dcg-fadeIn .3s}.dcg-calculator-api-container-v1_12 .dcg-tab .dcg-suggested-zoom-view i,.dcg-calculator-api-container-v1_12 .dcg-tab .dcg-residuals-zoom-view i,.dcg-calculator-api-container-v1_12 .dcg-tab .dcg-generate-table-view i,.dcg-calculator-api-container-v1_12 .dcg-tab .dcg-add-regression-view i{padding:5px;margin-left:-5px;opacity:.75}.dcg-calculator-api-container-v1_12 .dcg-tab .dcg-suggested-zoom-view i.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-tab .dcg-residuals-zoom-view i.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-tab .dcg-generate-table-view i.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-tab .dcg-add-regression-view i.dcg-hovered{opacity:.9}.dcg-calculator-api-container-v1_12 .dcg-tab .dcg-suggested-zoom-view i.dcg-depressed,.dcg-calculator-api-container-v1_12 .dcg-tab .dcg-residuals-zoom-view i.dcg-depressed,.dcg-calculator-api-container-v1_12 .dcg-tab .dcg-generate-table-view i.dcg-depressed,.dcg-calculator-api-container-v1_12 .dcg-tab .dcg-add-regression-view i.dcg-depressed{opacity:1}.dcg-calculator-api-container-v1_12 .dcg-tab .dcg-suggested-zoom-view i.dcg-icon-create-table,.dcg-calculator-api-container-v1_12 .dcg-tab .dcg-residuals-zoom-view i.dcg-icon-create-table,.dcg-calculator-api-container-v1_12 .dcg-tab .dcg-generate-table-view i.dcg-icon-create-table,.dcg-calculator-api-container-v1_12 .dcg-tab .dcg-add-regression-view i.dcg-icon-create-table{font-size:22px;margin-left:-3px}.dcg-calculator-api-container-v1_12 .dcg-tab .dcg-add-regression-view{bottom:auto;top:15px}.dcg-calculator-api-container-v1_12 .dcg-tab .dcg-add-regression-view:after{content:\"\";width:1px;background:currentColor;height:20px;position:absolute;top:0;left:9px;transform:rotate(22deg);pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-slider-container{min-height:22px;display:block;position:relative;z-index:0}.dcg-calculator-api-container-v1_12 .dcg-slider{display:flex;margin-left:-15px;justify-content:center;align-items:center}.dcg-calculator-api-container-v1_12 .dcg-disable-slider{opacity:.3}.dcg-calculator-api-container-v1_12 .dcg-slider-interior{flex:1;position:relative;top:-4px;margin-left:7px;margin-right:7px;touch-action:none}.dcg-calculator-api-container-v1_12 .dcg-slider-interior .dcg-thumb{cursor:pointer;z-index:3;border-radius:8px;position:absolute;top:-8px;margin-left:-19px;width:38px;height:38px}.dcg-calculator-api-container-v1_12 .dcg-slider-interior .dcg-thumb:focus{outline:none}.dcg-calculator-api-container-v1_12 .dcg-slider-interior .dcg-thumb:focus:after{position:absolute;top:-4px;left:4px;content:\"\";pointer-events:none;border:2px solid rgba(47,114,220,.35);border-radius:50%;width:26px;height:26px}.dcg-calculator-api-container-v1_12 .dcg-slider-interior .dcg-thumb .dcg-graphic{position:absolute;top:0;left:8px;border-radius:12px;width:22px;height:22px;background:var(--dcg-accent-color, #2f72dc);opacity:.35}.dcg-calculator-api-container-v1_12 .dcg-slider-interior .dcg-thumb .dcg-center{position:absolute;top:0;left:8px;border-radius:12px;width:22px;height:22px;background:var(--dcg-accent-color, #2f72dc);transform:scale(.25);transition:transform .2s}.dcg-calculator-api-container-v1_12 .dcg-slider-interior .dcg-thumb.dcg-hovered .dcg-center,.dcg-calculator-api-container-v1_12 .dcg-slider-interior .dcg-thumb.dcg-down .dcg-center{transform:scale(1)}.dcg-calculator-api-container-v1_12 .dcg-slider-interior .dcg-thumb .dcg-thumb--value{font-size:.8rem;position:absolute;top:23px;left:50%;transform:translate(-50%);pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-slider-interior .dcg-zeroMarker{position:absolute;top:2px;z-index:2;width:2px;height:2px;background:#0003;border-radius:2px}.dcg-calculator-api-container-v1_12 .dcg-slider-interior .dcg-track{cursor:pointer;height:22px;position:absolute;left:0;right:0}.dcg-calculator-api-container-v1_12 .dcg-slider-interior .dcg-track .dcg-ticks{position:absolute;top:2px;bottom:0;width:100%}.dcg-calculator-api-container-v1_12 .dcg-slider-interior .dcg-track .dcg-ticks .dcg-tick{position:absolute;top:0;width:2px;height:2px;background-color:#fff;margin-left:0;z-index:1;border-radius:2px}.dcg-calculator-api-container-v1_12 .dcg-slider-interior .dcg-track .dcg-graphic{height:6px;background-color:#0000001a;border-radius:3px;margin-bottom:6px;width:100%}.dcg-calculator-api-container-v1_12 .dcg-slider-container .dcg-minLabel{padding:10px 4px 10px 8px}.dcg-calculator-api-container-v1_12 .dcg-slider-container .dcg-maxLabel{padding:10px 8px 10px 4px}.dcg-calculator-api-container-v1_12 .dcg-slider-container .dcg-minLabel,.dcg-calculator-api-container-v1_12 .dcg-slider-container .dcg-maxLabel{z-index:4;color:var(--dcg-custom-text-color, rgba(0, 0, 0, .6));margin:-10px 0;min-width:26px;text-align:center}.dcg-calculator-api-container-v1_12 .dcg-slider-container .dcg-minLabel .dcg-mq-math-mode,.dcg-calculator-api-container-v1_12 .dcg-slider-container .dcg-maxLabel .dcg-mq-math-mode{font-family:arial,sans-serif;cursor:pointer;font-size:80%;position:relative;top:-1px}.dcg-calculator-api-container-v1_12 .dcg-slider-container .dcg-minLabel.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-slider-container .dcg-maxLabel.dcg-hovered{color:#333}.dcg-calculator-api-container-v1_12 .dcg-slider-container .dcg-minLabel.dcg-depressed,.dcg-calculator-api-container-v1_12 .dcg-slider-container .dcg-maxLabel.dcg-depressed{color:#000}.dcg-calculator-api-container-v1_12 .dcg-stats-footer-container{padding-right:5px}.dcg-calculator-api-container-v1_12 .dcg-stats-footer-container ul{width:fit-content;margin-left:auto}.dcg-calculator-api-container-v1_12 .dcg-stats-footer-container li.dcg-value{margin:4px 0 2px;border:1px solid rgba(206,206,206,.8);border-radius:4px;background:#0000000a;opacity:.75;display:flex;align-items:center}.dcg-calculator-api-container-v1_12 .dcg-stats-footer-container li.dcg-value .dcg-row-header{border-right:1px solid rgba(206,206,206,.8);margin-right:5px;width:68px;padding:5px}.dcg-calculator-api-container-v1_12 .dcg-stats-footer-container li.dcg-value .dcg-evaluation .dcg-static-mathquill-view{padding:3px 6px 3px 3px}.dcg-calculator-api-container-v1_12 .dcg-stats-footer-container li.dcg-value+.dcg-value{margin-top:5px}.dcg-calculator-api-container-v1_12 .dcg-visualization-parameters-container{margin-bottom:5px}.dcg-calculator-api-container-v1_12 .dcg-visualization-parameters-container .dcg-smaller-font{font-size:85%;margin-left:2px}.dcg-calculator-api-container-v1_12 .dcg-visualization-parameters-container .dcg-mathquill-wrapper{margin-left:10px;margin-right:10px}.dcg-calculator-api-container-v1_12 .dcg-visualization-parameters-container .dcg-parameter-name{font-size:105%}.dcg-calculator-api-container-v1_12 .dcg-visualization-parameters-container .dcg-checkbox{margin-top:6px}.dcg-calculator-api-container-v1_12 .dcg-visualization-parameters-container .dcg-toggle-container{display:inline-block;margin-bottom:5px;margin-right:15px}.dcg-calculator-api-container-v1_12 .dcg-action-icon-view i.dcg-icon-chevron-right{font-size:115%;display:inline-block}.dcg-calculator-api-container-v1_12 .dcg-action-icon-view i.dcg-icon-minus{transform:translate(3.5px,-1px);font-size:90%;display:inline-block}.dcg-calculator-api-container-v1_12 .dcg-action-icon-view.dcg-action-icon-view-animating i.dcg-icon-chevron-right{transition:.15s;transform:rotate(360deg)}@keyframes dcg-fadeAndScaleIn{0%{opacity:0;transform:scale(0)}30%{opacity:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}.dcg-calculator-api-container-v1_12 .dcg-circular-icon-container{width:29px;height:29px;border-radius:50%}.dcg-calculator-api-container-v1_12 .dcg-circular-icon-container .dcg-graph-interaction-disabled{position:absolute;bottom:-1px;right:-1px;font-size:.8rem;color:#949494;z-index:10;text-shadow:-1px -1px 0 #fff,-1px 1px 0 #fff,1px -1px 0 #fff,1px 1px 0 #fff,0 -1px 0 #fff,0 1px 0 #fff,1px 0 0 #fff,-1px 0 0 #fff}.dcg-calculator-api-container-v1_12 .dcg-circular-icon{display:inline-block;width:29px;height:29px;line-height:29px;border-radius:50%;position:relative;overflow:hidden}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-semi-transparent{opacity:.4}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-modifier-fade-in{animation:dcg-fadeAndScaleIn .3s}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-hidden{box-shadow:inset 0 0 3px #0003}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-hidden:before{position:absolute;top:0;left:0;bottom:0;right:0;border:5px solid #949494;border-radius:50%;opacity:.25;content:\"\"}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-hidden.dcg-white-icon:before{border-color:#fff;opacity:.4}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-hidden.dcg-hovered:before{opacity:.3125}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-hidden.dcg-hovered.dcg-white-icon:before{opacity:.5}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-hidden.dcg-depressed:before{opacity:.375}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-hidden.dcg-depressed.dcg-white-icon:before{opacity:.6}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-thick-outline{border:2px solid #000;opacity:.5;color:#000;text-align:center}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-thick-outline.dcg-hovered{opacity:.7}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-thick-outline.dcg-depressed{opacity:.9}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-thick-outline .dcg-icon-folder{position:relative;top:-1px;font-size:110%}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-thick-outline .dcg-icon-sound-wave{position:relative;font-size:180%;top:2.5px}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-thick-outline .dcg-icon-pause{position:relative;top:-1px;left:.25px}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-thick-outline .dcg-icon-volume-up{position:relative;left:.25px;font-size:125%}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-thick-outline .dcg-icon-play{position:relative;top:-1px;left:1.5px}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-thick-outline .dcg-icon-fraction{font-size:20px;position:relative;top:2px}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-thick-outline.dcg-white-icon{color:#fff;border-color:#fff;opacity:.9}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-thick-outline.dcg-white-icon.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-thick-outline.dcg-white-icon.dcg-depressed{opacity:1}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-has-background-image{background:#fff}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-has-background-image:after{position:absolute;top:0;left:0;bottom:0;right:0;content:\"\";border-radius:50%;overflow:hidden;box-shadow:inset 0 0 4px #000000b3}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-has-background-image .dcg-background-image{width:29px;height:29px;display:inline-block;border-radius:50%;background-size:29px 29px!important}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-has-background-image i{text-shadow:0 0 6px rgba(0,0,0,.2),0 0 1px rgba(0,0,0,.5)}.dcg-calculator-api-container-v1_12 .dcg-circular-icon .dcg-spinner{position:absolute;left:50%;top:50%;margin-top:-10px;margin-left:-10px}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-colored-icon{box-shadow:inset 0 0 3px #0003;overflow:hidden}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon{text-shadow:0 0 3px rgba(0,0,0,.2)}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-has-background-image,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-colored-icon{font-size:35px}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-has-background-image.dcg-modifier-size-medium,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-colored-icon.dcg-modifier-size-medium{font-size:42.25px}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-has-background-image.dcg-modifier-size-large,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-colored-icon.dcg-modifier-size-large{font-size:56.75px}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-has-background-image.dcg-modifier-size-small,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-colored-icon.dcg-modifier-size-small{font-size:32.1px}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-has-background-image.dcg-modifier-rotated,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-colored-icon.dcg-modifier-rotated{transform:rotate(90deg)}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon{position:absolute;top:-3px;left:-30px;right:-30px;bottom:-3px;color:#fff;line-height:35px;text-align:center}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-check,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-check{font-size:50%}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-move,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-move-vertical,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-move-horizontal,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-arrow-right,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-move,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-move-vertical,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-move-horizontal,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-arrow-right,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-point-closed,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-point-closed{font-size:55%}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-point-square,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-point-square{font-size:65%}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-point-triangle,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-point-triangle{margin-top:-1.5px}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-point-star,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-point-star{margin-top:-.5px}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-point-diamond,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-point-diamond{font-size:82%}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-point-cross,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-point-open,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-point-plus,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-point-star,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-point-triangle,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-point-cross,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-point-open,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-point-plus,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-point-star,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-point-triangle{font-size:75%}.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-points,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-has-background-image i.dcg-layered-icon.dcg-icon-lines-solid,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-points,.dcg-calculator-api-container-v1_12 .dcg-circular-icon.dcg-colored-icon i.dcg-layered-icon.dcg-icon-lines-solid{font-size:68%}.dcg-calculator-api-container-v1_12 .dcg-slow-plotting-icon{position:relative;width:29px;height:29px}.dcg-calculator-api-container-v1_12 .dcg-slow-plotting-icon .dcg-slow-plotting-icon__dot{background:#fff;border-radius:100%;width:3px;height:3px;position:absolute;left:13px;top:13px}@keyframes slow_plotting_icon-1{0%{transform:translate(-14.45505px,14.45505px)}20%{transform:translate(-10.875px,-9.0625px)}40%{transform:translate(-14.5px,5.4868px)}60%{transform:translate(9.0625px)}80%{transform:translate(4.35px)}to{transform:translate(5.7826px,-5.7826px)}}.dcg-calculator-api-container-v1_12 .dcg-slow-plotting-icon .dcg-slow-plotting-icon__dot:nth-of-type(1){animation-duration:3s;animation-name:slow_plotting_icon-1;animation-delay:-1.2s;animation-timing-function:ease-in-out;animation-iteration-count:infinite;transform:translate(-28.9101px)}@keyframes slow_plotting_icon-2{0%{transform:translate(-11.56375px,11.56375px)}20%{transform:translate(-9.50475px,-5.2113px)}40%{transform:translate(-12.151px,1.51235px)}60%{transform:translate(7.3312px,-5.3273px)}80%{transform:translate(5.27075px,-3.7207px)}to{transform:translate(8.67245px,-8.67245px)}}.dcg-calculator-api-container-v1_12 .dcg-slow-plotting-icon .dcg-slow-plotting-icon__dot:nth-of-type(2){animation-duration:3s;animation-name:slow_plotting_icon-2;animation-delay:-1.2s;animation-timing-function:ease-in-out;animation-iteration-count:infinite;transform:translate(-23.1275px)}@keyframes slow_plotting_icon-3{0%{transform:translate(-8.67245px,8.67245px)}20%{transform:translate(-7.92425px,-1.41085px)}40%{transform:translate(-9.23505px,-4.0571px)}60%{transform:translate(2.79995px,-8.6188px)}80%{transform:translate(7.58495px,-7.7662px)}to{transform:translate(11.56375px,-11.56375px)}}.dcg-calculator-api-container-v1_12 .dcg-slow-plotting-icon .dcg-slow-plotting-icon__dot:nth-of-type(3){animation-duration:3s;animation-name:slow_plotting_icon-3;animation-delay:-1.2s;animation-timing-function:ease-in-out;animation-iteration-count:infinite;transform:translate(-17.3449px)}@keyframes slow_plotting_icon-4{0%{transform:translate(-5.7826px,5.7826px)}20%{transform:translate(-6.03925px,2.21995px)}40%{transform:translate(-5.26495px,-7.19925px)}60%{transform:translate(-2.79995px,-8.6188px)}80%{transform:translate(-7.58495px,-7.7662px)}to{transform:translate(-2.8913px,2.8913px)}}.dcg-calculator-api-container-v1_12 .dcg-slow-plotting-icon .dcg-slow-plotting-icon__dot:nth-of-type(4){animation-duration:3s;animation-name:slow_plotting_icon-4;animation-delay:-1.2s;animation-timing-function:ease-in-out;animation-iteration-count:infinite;transform:translate(-11.5652px)}@keyframes slow_plotting_icon-5{0%{transform:translate(-2.8913px,2.8913px)}20%{transform:translate(-3.5815px,5.481px)}40%{transform:translate(-2.35045px,-4.37755px)}60%{transform:translate(-7.3312px,-5.3273px)}80%{transform:translate(-5.27075px,-3.7207px)}to{transform:translate(-5.7826px,5.7826px)}}.dcg-calculator-api-container-v1_12 .dcg-slow-plotting-icon .dcg-slow-plotting-icon__dot:nth-of-type(5){animation-duration:3s;animation-name:slow_plotting_icon-5;animation-delay:-1.2s;animation-timing-function:ease-in-out;animation-iteration-count:infinite;transform:translate(-5.7826px)}@keyframes slow_plotting_icon-6{0%{transform:translate(0)}20%{transform:translateY(7.25px)}40%{transform:translate(0)}60%{transform:translate(-9.0625px)}80%{transform:translate(-4.35px)}to{transform:translate(-8.67245px,8.67245px)}}.dcg-calculator-api-container-v1_12 .dcg-slow-plotting-icon .dcg-slow-plotting-icon__dot:nth-of-type(6){animation-duration:3s;animation-name:slow_plotting_icon-6;animation-delay:-1.2s;animation-timing-function:ease-in-out;animation-iteration-count:infinite;transform:translate(0)}@keyframes slow_plotting_icon-7{0%{transform:translate(2.8913px,-2.8913px)}20%{transform:translate(3.5815px,5.481px)}40%{transform:translate(2.35045px,4.37755px)}60%{transform:translate(-7.3312px,5.3273px)}80%{transform:translate(-5.27075px,3.7207px)}to{transform:translate(-11.56375px,11.56375px)}}.dcg-calculator-api-container-v1_12 .dcg-slow-plotting-icon .dcg-slow-plotting-icon__dot:nth-of-type(7){animation-duration:3s;animation-name:slow_plotting_icon-7;animation-delay:-1.2s;animation-timing-function:ease-in-out;animation-iteration-count:infinite;transform:translate(5.7826px)}@keyframes slow_plotting_icon-8{0%{transform:translate(5.7826px,-5.7826px)}20%{transform:translate(6.03925px,2.21995px)}40%{transform:translate(5.26495px,7.19925px)}60%{transform:translate(-2.79995px,8.6188px)}80%{transform:translate(-7.58495px,7.7662px)}to{transform:translate(-14.45505px,14.45505px)}}.dcg-calculator-api-container-v1_12 .dcg-slow-plotting-icon .dcg-slow-plotting-icon__dot:nth-of-type(8){animation-duration:3s;animation-name:slow_plotting_icon-8;animation-delay:-1.2s;animation-timing-function:ease-in-out;animation-iteration-count:infinite;transform:translate(11.5652px)}@keyframes slow_plotting_icon-9{0%{transform:translate(8.67245px,-8.67245px)}20%{transform:translate(7.92425px,-1.41085px)}40%{transform:translate(9.23505px,4.0571px)}60%{transform:translate(2.79995px,8.6188px)}80%{transform:translate(7.58495px,7.7662px)}to{transform:translate(0)}}.dcg-calculator-api-container-v1_12 .dcg-slow-plotting-icon .dcg-slow-plotting-icon__dot:nth-of-type(9){animation-duration:3s;animation-name:slow_plotting_icon-9;animation-delay:-1.2s;animation-timing-function:ease-in-out;animation-iteration-count:infinite;transform:translate(17.3449px)}@keyframes slow_plotting_icon-10{0%{transform:translate(11.56375px,-11.56375px)}20%{transform:translate(9.50475px,-5.2113px)}40%{transform:translate(12.151px,-1.51235px)}60%{transform:translate(7.3312px,5.3273px)}80%{transform:translate(5.27075px,3.7207px)}to{transform:translate(2.8913px,-2.8913px)}}.dcg-calculator-api-container-v1_12 .dcg-slow-plotting-icon .dcg-slow-plotting-icon__dot:nth-of-type(10){animation-duration:3s;animation-name:slow_plotting_icon-10;animation-delay:-1.2s;animation-timing-function:ease-in-out;animation-iteration-count:infinite;transform:translate(23.1275px)}@keyframes slow_plotting_icon-11{0%{transform:translate(14.45505px,-14.45505px)}20%{transform:translate(10.875px,-9.0625px)}40%{transform:translate(14.5px,-5.4868px)}60%{transform:translate(9.0625px)}80%{transform:translate(4.35px)}to{transform:translate(5.7826px,-5.7826px)}}.dcg-calculator-api-container-v1_12 .dcg-slow-plotting-icon .dcg-slow-plotting-icon__dot:nth-of-type(11){animation-duration:3s;animation-name:slow_plotting_icon-11;animation-delay:-1.2s;animation-timing-function:ease-in-out;animation-iteration-count:infinite;transform:translate(28.9101px)}.dcg-calculator-api-container-v1_12 .dcg-play-pause-icon-view .dcg-circular-icon-container.dcg-disabled{opacity:.5;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-play-pause-icon-view .dcg-slider-menu-container{position:absolute;top:100%;left:-5px;right:-5px;margin-top:4px}.dcg-calculator-api-container-v1_12 .dcg-play-pause-icon-view .dcg-slider-menu-opener{margin-left:1px;padding:5px;text-align:center;font-size:140%;cursor:pointer;opacity:.75}.dcg-calculator-api-container-v1_12 .dcg-play-pause-icon-view .dcg-slider-menu-opener:before{content:\"\";width:24px;height:24px;border-radius:50%;display:inline-block;position:absolute;top:50%;left:50%;margin-left:-12px;margin-top:-13px;background:currentColor;opacity:0}.dcg-calculator-api-container-v1_12 .dcg-play-pause-icon-view .dcg-slider-menu-opener.dcg-hovered{opacity:.9}.dcg-calculator-api-container-v1_12 .dcg-play-pause-icon-view .dcg-slider-menu-opener.dcg-hovered:before{opacity:.15}.dcg-calculator-api-container-v1_12 .dcg-play-pause-icon-view .dcg-slider-menu-opener.dcg-menu-open{opacity:1}.dcg-calculator-api-container-v1_12 .dcg-play-pause-icon-view .dcg-slider-menu-opener.dcg-menu-open:before{opacity:.3}.dcg-calculator-api-container-v1_12 .dcg-play-pause-icon-view .dcg-slider-menu-opener.dcg-depressed{opacity:1}.dcg-calculator-api-container-v1_12 .dcg-play-pause-icon-view .dcg-slider-menu-opener.dcg-depressed:before{opacity:.4}.dcg-calculator-api-container-v1_12 .dcg-top-level-icon{position:absolute;top:0;right:0;width:calc(1.15rem + 12px);height:calc(1.15rem + 16px);overflow:visible;outline-offset:-4px}.dcg-calculator-api-container-v1_12 .dcg-top-level-icon:not(.dcg-tappable){cursor:default!important}.dcg-calculator-api-container-v1_12 .dcg-top-level-icon i{position:absolute;top:0;right:0;padding:8px 7px 20px 20px;z-index:2;opacity:.2;font-size:115%}.dcg-calculator-api-container-v1_12 .dcg-top-level-icon .dcg-top-level-delete,.dcg-calculator-api-container-v1_12 .dcg-top-level-icon .dcg-icon-replace{cursor:pointer}.dcg-calculator-api-container-v1_12 .dcg-top-level-icon .dcg-top-level-delete.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-top-level-icon .dcg-icon-replace.dcg-hovered{opacity:.6}.dcg-calculator-api-container-v1_12 .dcg-top-level-icon .dcg-top-level-delete.dcg-depressed,.dcg-calculator-api-container-v1_12 .dcg-top-level-icon .dcg-icon-replace.dcg-depressed{opacity:.8}.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu,.dcg-calculator-api-container-v1_12 .dcg-table-column-menu,.dcg-calculator-api-container-v1_12 .dcg-image-options-menu,.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu{min-width:222px}.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu.dcg-options-menu,.dcg-calculator-api-container-v1_12 .dcg-table-column-menu.dcg-options-menu,.dcg-calculator-api-container-v1_12 .dcg-image-options-menu.dcg-options-menu,.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu.dcg-options-menu{padding-left:0;padding-right:0}.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu .dcg-segmented-control-container,.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-segmented-control-container,.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-segmented-control-container,.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu .dcg-segmented-control-container{padding-top:5px}.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu .dcg-options-menu-content,.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-options-menu-content,.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-options-menu-content,.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu .dcg-options-menu-content{animation:dcg-fadeIn .3s}.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu .dcg-options-flex-container,.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-options-flex-container,.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-options-flex-container,.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu .dcg-options-flex-container{display:flex;max-width:200px;padding-top:3px}.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu .dcg-options-left-side,.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-options-left-side,.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-options-left-side,.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu .dcg-options-left-side{flex:1}.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu .dcg-options-menu-section,.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-options-menu-section,.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-options-menu-section,.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu .dcg-options-menu-section{padding-left:10px;padding-right:10px}.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu .dcg-options-menu-section:not(:first-of-type),.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-options-menu-section:not(:first-of-type),.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-options-menu-section:not(:first-of-type),.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu .dcg-options-menu-section:not(:first-of-type){border-top:1px solid #e2e2e2;padding-top:10px;margin-top:10px}.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu .dcg-options-menu-section:not(:first-of-type).dcg-section-without-title,.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-options-menu-section:not(:first-of-type).dcg-section-without-title,.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-options-menu-section:not(:first-of-type).dcg-section-without-title,.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu .dcg-options-menu-section:not(:first-of-type).dcg-section-without-title{padding-top:5px}.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu .dcg-point-segmented-option,.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu .dcg-line-segmented-option,.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-point-segmented-option,.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-line-segmented-option,.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-point-segmented-option,.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-line-segmented-option,.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu .dcg-point-segmented-option,.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu .dcg-line-segmented-option{width:33px;height:30px;line-height:30px;color:#949494}.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu .dcg-point-segmented-option.dcg-hovered:not(.dcg-selected),.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu .dcg-line-segmented-option.dcg-hovered:not(.dcg-selected),.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-point-segmented-option.dcg-hovered:not(.dcg-selected),.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-line-segmented-option.dcg-hovered:not(.dcg-selected),.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-point-segmented-option.dcg-hovered:not(.dcg-selected),.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-line-segmented-option.dcg-hovered:not(.dcg-selected),.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu .dcg-point-segmented-option.dcg-hovered:not(.dcg-selected),.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu .dcg-line-segmented-option.dcg-hovered:not(.dcg-selected){color:#666}.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu .dcg-point-segmented-option i,.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-point-segmented-option i,.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-point-segmented-option i,.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu .dcg-point-segmented-option i{font-size:150%}.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu .dcg-line-segmented-option i,.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-line-segmented-option i,.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-line-segmented-option i,.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu .dcg-line-segmented-option i{font-size:130%}.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu .dcg-iconed-mathquill-row,.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu .dcg-clickable-menu-row,.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-iconed-mathquill-row,.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-clickable-menu-row,.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-iconed-mathquill-row,.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-clickable-menu-row,.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu .dcg-iconed-mathquill-row,.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu .dcg-clickable-menu-row{padding:7px 0 1px}.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu .dcg-iconed-mathquill-row i,.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu .dcg-iconed-mathquill-row .dcg-font-size,.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-iconed-mathquill-row i,.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-iconed-mathquill-row .dcg-font-size,.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-iconed-mathquill-row i,.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-iconed-mathquill-row .dcg-font-size,.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu .dcg-iconed-mathquill-row i,.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu .dcg-iconed-mathquill-row .dcg-font-size{color:var(--dcg-custom-text-color, #949494);margin-right:5px;cursor:pointer;width:13px;display:inline-block;position:relative;top:2px;line-height:1em}.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-math-field,.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-math-field,.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-math-field,.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-math-field{font-size:95%;border-bottom:1px solid rgba(0,0,0,.2);padding:1px 2px;margin:1px;min-width:42px;max-width:60px}.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-math-field.dcg-focus,.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-math-field.dcg-focus-visible,.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-math-field.dcg-invalid,.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-math-field.dcg-focus,.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-math-field.dcg-focus-visible,.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-math-field.dcg-invalid,.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-math-field.dcg-focus,.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-math-field.dcg-focus-visible,.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-math-field.dcg-invalid,.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-math-field.dcg-focus,.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-math-field.dcg-focus-visible,.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-math-field.dcg-invalid{border-bottom:2px solid var(--dcg-accent-color, #2f72dc);margin-bottom:0}.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-math-field.dcg-invalid,.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-math-field.dcg-invalid,.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-math-field.dcg-invalid,.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-math-field.dcg-invalid{border-bottom:2px solid #e15855}.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-math-field.dcg-hovered:not(.dcg-focus):not(.dcg-invalid):not(.dcg-static-mathquill-view):not(.dcg-focus-visible),.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-math-field.dcg-hovered:not(.dcg-focus):not(.dcg-invalid):not(.dcg-static-mathquill-view):not(.dcg-focus-visible),.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-math-field.dcg-hovered:not(.dcg-focus):not(.dcg-invalid):not(.dcg-static-mathquill-view):not(.dcg-focus-visible),.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu .dcg-iconed-mathquill-row .dcg-math-field.dcg-math-field.dcg-hovered:not(.dcg-focus):not(.dcg-invalid):not(.dcg-static-mathquill-view):not(.dcg-focus-visible){border-bottom:2px solid #ccc;margin-bottom:0}.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu .dcg-line-thickness-row-3d,.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-line-thickness-row-3d,.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-line-thickness-row-3d,.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu .dcg-line-thickness-row-3d{margin-bottom:8px}.dcg-calculator-api-container-v1_12 .dcg-clickable-section .dcg-clickable-menu-row{font-size:90%;display:flex;align-items:baseline;margin-right:2px}.dcg-calculator-api-container-v1_12 .dcg-clickable-section .dcg-clickable-menu-row .dcg-input-label{color:var(--dcg-custom-text-color, #666)}.dcg-calculator-api-container-v1_12 .dcg-clickable-section .dcg-clickable-menu-row .dcg-mathquill-wrapper{flex:1;overflow:hidden}.dcg-calculator-api-container-v1_12 .dcg-clickable-section .dcg-clickable-menu-row .dcg-math-field.dcg-math-field,.dcg-calculator-api-container-v1_12 .dcg-clickable-section .dcg-clickable-menu-row .dcg-braille-input.dcg-braille-input{font-size:95%;border-bottom:1px solid rgba(0,0,0,.2);padding:1px 2px;margin:1px;min-width:100%;max-width:100%}.dcg-calculator-api-container-v1_12 .dcg-clickable-section .dcg-clickable-menu-row .dcg-math-field.dcg-math-field.dcg-focus,.dcg-calculator-api-container-v1_12 .dcg-clickable-section .dcg-clickable-menu-row .dcg-math-field.dcg-math-field.dcg-focus-visible,.dcg-calculator-api-container-v1_12 .dcg-clickable-section .dcg-clickable-menu-row .dcg-math-field.dcg-math-field.dcg-invalid,.dcg-calculator-api-container-v1_12 .dcg-clickable-section .dcg-clickable-menu-row .dcg-braille-input.dcg-braille-input.dcg-focus,.dcg-calculator-api-container-v1_12 .dcg-clickable-section .dcg-clickable-menu-row .dcg-braille-input.dcg-braille-input.dcg-focus-visible,.dcg-calculator-api-container-v1_12 .dcg-clickable-section .dcg-clickable-menu-row .dcg-braille-input.dcg-braille-input.dcg-invalid{border-bottom:2px solid var(--dcg-accent-color, #2f72dc);margin-bottom:0}.dcg-calculator-api-container-v1_12 .dcg-clickable-section .dcg-clickable-menu-row .dcg-math-field.dcg-math-field.dcg-invalid,.dcg-calculator-api-container-v1_12 .dcg-clickable-section .dcg-clickable-menu-row .dcg-braille-input.dcg-braille-input.dcg-invalid{border-bottom:2px solid #e15855}.dcg-calculator-api-container-v1_12 .dcg-clickable-section .dcg-clickable-menu-row .dcg-math-field.dcg-math-field.dcg-hovered:not(.dcg-focus):not(.dcg-invalid):not(.dcg-static-mathquill-view):not(.dcg-focus-visible),.dcg-calculator-api-container-v1_12 .dcg-clickable-section .dcg-clickable-menu-row .dcg-braille-input.dcg-braille-input.dcg-hovered:not(.dcg-focus):not(.dcg-invalid):not(.dcg-static-mathquill-view):not(.dcg-focus-visible){border-bottom:2px solid #ccc;margin-bottom:0}.dcg-calculator-api-container-v1_12 .dcg-clickable-section .dcg-clickable-menu-row .dcg-clickable-info-error-container{margin-left:-20px;width:20px;display:inline-block}.dcg-calculator-api-container-v1_12 .dcg-clickable-section .dcg-clickable-list-index-notice{font-size:90%;color:#454545;padding-top:5px;line-height:1.2em;width:200px}.dcg-calculator-api-container-v1_12 .dcg-clickable-section .dcg-clickable-list-index-notice .dcg-btn-light-gray{line-height:inherit}.dcg-calculator-api-container-v1_12 .dcg-clickable-section .dcg-index-variable-marker{padding-left:4px;padding-right:4px;font-size:90%;border:1px solid rgba(0,0,0,.2);border-radius:4px}.dcg-calculator-api-container-v1_12 .dcg-clickable-section .dcg-index-variable-marker:not(.dcg-mathquill-has-focus){background:transparent;pointer-events:none;opacity:.75}.dcg-calculator-api-container-v1_12 .dcg-clickable-image-info-view{display:flex;margin-top:20px;justify-content:space-evenly;align-items:center}.dcg-calculator-api-container-v1_12 .dcg-clickable-image-info-view .dcg-tooltip-hit-area-container{margin-left:5px;margin-right:10px}.dcg-calculator-api-container-v1_12 .dcg-clickable-image-info-view .dcg-clickable-image-state-container{position:relative;color:var(--dcg-custom-text-color, #666);text-align:center}.dcg-calculator-api-container-v1_12 .dcg-clickable-image-info-view .dcg-clickable-image-state-container .dcg-clickable-image-state{background:#fff;background-size:cover;background-repeat:no-repeat;width:60px;height:60px;border-radius:10px;border:1px solid rgba(0,0,0,.2)}.dcg-calculator-api-container-v1_12 .dcg-clickable-image-info-view .dcg-clickable-image-state-container .dcg-clickable-image-state-close{position:absolute;top:-10px;right:-2px;width:25px;height:25px;padding-top:5px;font-size:14px;background:#666;color:#fff;border-radius:50%;opacity:.6}.dcg-calculator-api-container-v1_12 .dcg-clickable-image-info-view .dcg-clickable-image-state-container .dcg-clickable-image-state-close.dcg-hovered{opacity:.8}.dcg-calculator-api-container-v1_12 .dcg-clickable-image-info-view .dcg-clickable-image-state-container .dcg-clickable-image-state-close.dcg-depressed{opacity:1}.dcg-calculator-api-container-v1_12 .dcg-toggle-view{float:right;padding:4px 5px 7px;margin:-4px -5px -7px}.dcg-calculator-api-container-v1_12 .dcg-toggle-view .dcg-toggle-track{padding:5px 15px;margin-top:3px;width:30px;height:10px;background:#ddd;border-radius:10px;position:relative;transition:all .2s}.dcg-calculator-api-container-v1_12 .dcg-toggle-view .dcg-toggle-switch{position:absolute;top:-4px;left:0;width:18px;height:18px;background:#f5f5f5;border-radius:50%;transition:all .2s;box-shadow:0 2px 2px #0003,0 0 3px #0003}.dcg-calculator-api-container-v1_12 .dcg-toggle-view:not(.dcg-toggled).dcg-hovered .dcg-toggle-switch{background:#ebebeb}.dcg-calculator-api-container-v1_12 .dcg-toggle-view:not(.dcg-toggled).dcg-depressed .dcg-toggle-switch{background:#e0e0e0}.dcg-calculator-api-container-v1_12 .dcg-toggle-view.dcg-toggled{transition:all .2s}.dcg-calculator-api-container-v1_12 .dcg-toggle-view.dcg-toggled .dcg-toggle-switch{transition:all .2s;left:12px;background:#666}.dcg-calculator-api-container-v1_12 .dcg-toggle-view.dcg-toggled.dcg-hovered .dcg-toggle-switch{background:#555}.dcg-calculator-api-container-v1_12 .dcg-toggle-view.dcg-toggled.dcg-depressed .dcg-toggle-switch{background:#454545}.dcg-calculator-api-container-v1_12 .dcg-color-picker-container{max-height:185px;overflow-y:auto;margin-right:-10px;padding-right:10px;margin-left:-2px;padding-left:2px;margin-bottom:-2px;padding-bottom:2px}.dcg-calculator-api-container-v1_12 .dcg-color-picker-container .dcg-color-picker-menu{display:grid;grid-template-columns:repeat(6,30px);gap:4px;grid-auto-flow:row;grid-auto-rows:30px;padding-top:5px}.dcg-calculator-api-container-v1_12 .dcg-color-picker-container .dcg-color-picker-menu:first-of-type{margin-top:0}.dcg-calculator-api-container-v1_12 .dcg-color-picker-container .dcg-color-picker-menu .dcg-color-tile{position:relative;outline:none}.dcg-calculator-api-container-v1_12 .dcg-color-picker-container .dcg-color-picker-menu .dcg-color-tile.dcg-focus-visible{box-shadow:0 0 0 2px #2f72dc80!important}.dcg-calculator-api-container-v1_12 .dcg-color-picker-container .dcg-color-picker-menu .dcg-color-tile i.dcg-icon-check{position:absolute;top:50%;left:0;right:0;pointer-events:none;height:20px;line-height:20px;color:#fff;margin-top:-10px;text-align:center}.dcg-calculator-api-container-v1_12 .dcg-color-picker-container .dcg-color-picker-menu .dcg-color-tile i.dcg-icon-check.dcg-light-color{color:#454545}.dcg-calculator-api-container-v1_12 .dcg-color-picker-container .dcg-color-picker-menu .dcg-color-tile i.dcg-icon-check.dcg-mixed-color{text-shadow:0 0 3px rgba(0,0,0,.7)}.dcg-calculator-api-container-v1_12 .dcg-color-picker-container .dcg-color-picker-menu .dcg-color-tile i.dcg-icon-lock{color:#949494;text-shadow:-1px -1px 0 #fff,-1px 1px 0 #fff,1px -1px 0 #fff,1px 1px 0 #fff,0 -1px 0 #fff,0 1px 0 #fff,1px 0 0 #fff,-1px 0 0 #fff;position:absolute;bottom:2px;right:2px;font-size:65%}.dcg-calculator-api-container-v1_12 .dcg-label-orientation-view{width:78px;height:78px;display:inline-block;position:relative;transition:transform .1s;margin-bottom:-8px}.dcg-calculator-api-container-v1_12 .dcg-label-orientation-view .dcg-orientation-option{display:inline-block;width:26px;height:26px;line-height:26px;text-align:center;border-radius:50%;color:#bbb}.dcg-calculator-api-container-v1_12 .dcg-label-orientation-view .dcg-orientation-option.dcg-hovered{color:#666}.dcg-calculator-api-container-v1_12 .dcg-label-orientation-view .dcg-orientation-option.dcg-selected{color:#2f72dc}.dcg-calculator-api-container-v1_12 .dcg-label-orientation-view .dcg-orientation-option.dcg-selected.dcg-hovered{color:#2253a1}.dcg-calculator-api-container-v1_12 .dcg-label-orientation-view .dcg-orientation-option i{position:relative;top:2px}.dcg-calculator-api-container-v1_12 .dcg-label-orientation-view .dcg-label-orientation-below-right,.dcg-calculator-api-container-v1_12 .dcg-label-orientation-view .dcg-label-orientation-above-right,.dcg-calculator-api-container-v1_12 .dcg-label-orientation-view .dcg-label-orientation-below-left,.dcg-calculator-api-container-v1_12 .dcg-label-orientation-view .dcg-label-orientation-above-left{color:#e2e2e2}.dcg-calculator-api-container-v1_12 .dcg-label-orientation-view .dcg-orientation-disabled{pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-label-orientation-view .dcg-label-orientation-below-right{position:absolute;bottom:0;right:0;transform:rotate(225deg)}.dcg-calculator-api-container-v1_12 .dcg-label-orientation-view .dcg-label-orientation-below-left{position:absolute;bottom:0;left:0;transform:rotate(315deg)}.dcg-calculator-api-container-v1_12 .dcg-label-orientation-view .dcg-label-orientation-above-right{position:absolute;top:0;right:0;transform:rotate(135deg)}.dcg-calculator-api-container-v1_12 .dcg-label-orientation-view .dcg-label-orientation-above-left{position:absolute;top:0;left:0;transform:rotate(45deg)}.dcg-calculator-api-container-v1_12 .dcg-label-orientation-view .dcg-label-orientation-left{position:absolute;top:26px;left:0}.dcg-calculator-api-container-v1_12 .dcg-label-orientation-view .dcg-label-orientation-right{position:absolute;top:26px;right:0;transform:rotate(180deg)}.dcg-calculator-api-container-v1_12 .dcg-label-orientation-view .dcg-label-orientation-above{position:absolute;top:0;left:26px;transform:rotate(90deg)}.dcg-calculator-api-container-v1_12 .dcg-label-orientation-view .dcg-label-orientation-below{position:absolute;bottom:0;left:26px;transform:rotate(270deg)}.dcg-calculator-api-container-v1_12 .dcg-label-orientation-view .dcg-label-orientation-center{position:absolute;top:26px;left:26px;font-size:200%}.dcg-calculator-api-container-v1_12 .dcg-label-orientation-view .dcg-label-orientation-center:after{content:\"\";width:12px;height:12px;border-radius:50%;position:absolute;top:50%;left:50%;background:currentColor;margin-top:-6px;margin-left:-6px;box-shadow:0 0 2px #0003}.dcg-calculator-api-container-v1_12 .dcg-label-orientation-view .dcg-label-orientation-center.dcg-orientation-disabled:not(.dcg-selected):after{background:#fff;width:10px;height:10px;margin-top:-5px;margin-left:-5px;box-shadow:0 0 2px #0003,inset 0 0 0 1px #0000001a}.dcg-calculator-api-container-v1_12 .dcg-label-orientation-view .dcg-vertical-orientation-indicator{width:0;height:0;border:4px solid transparent;border-bottom:15px solid #ddd;position:absolute;top:50%;left:50%;margin-top:-19px;margin-left:-4px}.dcg-calculator-api-container-v1_12 .dcg-label-orientation-view .dcg-vertical-orientation-indicator:after{content:\"\";width:0;height:0;border:4px solid transparent;border-top:15px solid #ddd;position:absolute;top:50%;left:50%;margin-top:15px;margin-left:-4px}.dcg-calculator-api-container-v1_12 .dcg-options--point-styles .dcg-segmented-control-container{display:grid;grid-template-columns:repeat(4,1fr);padding-bottom:5px}.dcg-calculator-api-container-v1_12 .dcg-options--point-styles .dcg-segmented-control-container.dcg-theme-mini .dcg-segmented-control-btn{max-width:28px;max-height:28px}.dcg-calculator-api-container-v1_12 .dcg-options--point-styles .dcg-segmented-control-container.dcg-theme-mini .dcg-segmented-control-btn .dcg-segmented-control-interior{padding:2px 4px}.dcg-calculator-api-container-v1_12 .dcg-options--point-styles .dcg-segmented-control-container.dcg-theme-mini .dcg-segmented-control-btn:nth-of-type(1){border-top-left-radius:3px;border-bottom-left-radius:0}.dcg-calculator-api-container-v1_12 .dcg-options--point-styles .dcg-segmented-control-container.dcg-theme-mini .dcg-segmented-control-btn:nth-of-type(4){border-top-right-radius:3px}.dcg-calculator-api-container-v1_12 .dcg-options--point-styles .dcg-segmented-control-container.dcg-theme-mini .dcg-segmented-control-btn:nth-of-type(5){border-bottom-left-radius:3px}.dcg-calculator-api-container-v1_12 .dcg-options--point-styles .dcg-segmented-control-container.dcg-theme-mini .dcg-segmented-control-btn:nth-of-type(8){border-top-right-radius:0;border-bottom-right-radius:3px}.dcg-calculator-api-container-v1_12 .dcg-options--point-styles .dcg-segmented-control-container.dcg-theme-mini .dcg-segmented-control-btn.dcg-disabled{pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-options--point-styles .dcg-segmented-control-container.dcg-theme-mini .dcg-segmented-control-btn.dcg-disabled.dcg-selected+.dcg-segmented-control-btn{border-left:1px solid #666}.dcg-calculator-api-container-v1_12 .dcg-options--point-styles .dcg-segmented-control-container.dcg-theme-mini .dcg-segmented-control-btn.dcg-disabled.dcg-selected{background:#0000001a;border-color:#666;color:#000}.dcg-calculator-api-container-v1_12 .dcg-screen-reader-description--wrapper textarea.dcg-screen-reader-description--input{width:100%;height:3em;font-size:var(--dcg-minimum-input-font-size, 90%)}.dcg-calculator-api-container-v1_12 body{-webkit-text-size-adjust:100%}.dcg-calculator-api-container-v1_12 pre{white-space:pre-wrap}.dcg-calculator-api-container-v1_12 button,.dcg-calculator-api-container-v1_12 select,.dcg-calculator-api-container-v1_12 input,.dcg-calculator-api-container-v1_12 textarea{font-family:inherit}.dcg-calculator-api-container-v1_12 input,.dcg-calculator-api-container-v1_12 textarea{font-size:var(--dcg-minimum-input-font-size, inherit)}.dcg-calculator-api-container-v1_12 button,.dcg-calculator-api-container-v1_12 select{text-transform:none}.dcg-calculator-api-container-v1_12 button{-webkit-appearance:auto;appearance:auto;cursor:pointer;color:inherit}.dcg-calculator-api-container-v1_12 button[disabled],.dcg-calculator-api-container-v1_12 input[disabled]{cursor:default}.dcg-calculator-api-container-v1_12 input[type=search]{-webkit-appearance:textfield;appearance:textfield;box-sizing:content-box}.dcg-calculator-api-container-v1_12 input[type=search]::-webkit-search-cancel-button,.dcg-calculator-api-container-v1_12 input[type=search]::-webkit-search-decoration{-webkit-appearance:none;appearance:none}.dcg-calculator-api-container-v1_12 button::-moz-focus-inner,.dcg-calculator-api-container-v1_12 input::-moz-focus-inner{border:0;padding:0}.dcg-calculator-api-container-v1_12 table{border-collapse:collapse;border-spacing:0}.dcg-calculator-api-container-v1_12 input::-webkit-outer-spin-button,.dcg-calculator-api-container-v1_12 input::-webkit-inner-spin-button{-webkit-appearance:none;appearance:none;margin:0}.dcg-calculator-api-container-v1_12 .dcg-container{text-align:left;transform-origin:0 0}.dcg-calculator-api-container-v1_12 .dcg-background--light-blue{background:#d7e6ff}.dcg-calculator-api-container-v1_12 .dcg-text--dark-blue{color:#17396e}.dcg-calculator-api-container-v1_12 .dcg-text--centered{text-align:center}.dcg-calculator-api-container-v1_12 .dcg-anchor-center{text-anchor:middle}.dcg-calculator-api-container-v1_12 .dcg-anchor-left{text-anchor:end}.dcg-calculator-api-container-v1_12 .dcg-anchor-right{text-anchor:start}.dcg-calculator-api-container-v1_12 .dcg-text--uppercase{text-transform:uppercase}.dcg-calculator-api-container-v1_12 .dcg-unstyled-list{list-style-type:none;margin:0;padding:0}.dcg-calculator-api-container-v1_12 .dcg-unstyled-list li{margin:0;text-indent:0}.dcg-calculator-api-container-v1_12 .dcg-forced-color-none{forced-color-adjust:none}.dcg-calculator-api-container-v1_12 .dcg-unstyled-button{font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none;-webkit-appearance:button;border:none;background-color:unset;padding:0}.dcg-calculator-api-container-v1_12 .dcg-unstyled-link{text-decoration:none!important;color:unset}.dcg-calculator-api-container-v1_12 .dcg-unstyled-heading{margin:0;font-size:inherit;font:inherit;font-weight:inherit}.dcg-calculator-api-container-v1_12 .dcg-unstyled-dialog{width:auto;height:auto;border:none;padding:0}.dcg-calculator-api-container-v1_12 details.dcg-unstyled-details{list-style:none}.dcg-calculator-api-container-v1_12 details.dcg-unstyled-details summary::-webkit-details-marker{display:none}.dcg-calculator-api-container-v1_12 details.dcg-unstyled-details summary::marker{content:\"\"}.dcg-calculator-api-container-v1_12 .dcg-display--contents{display:contents}.dcg-calculator-api-container-v1_12 .dcg-bold{font-weight:700}@media (prefers-reduced-motion){.dcg-calculator-api-container-v1_12 .dcg-container *,.dcg-calculator-api-container-v1_12 .dcg-container *:after,.dcg-calculator-api-container-v1_12 .dcg-container *:before{transition:none!important;animation-duration:0ms!important;animation-delay:0ms!important}}.dcg-calculator-api-container-v1_12 .dcg-container.dcg-default-border{border:1px solid rgba(0,0,0,.2)}.dcg-calculator-api-container-v1_12 .dcg-container a,.dcg-calculator-api-container-v1_12 .dcg-container a:hover{text-decoration:none}.dcg-calculator-api-container-v1_12 .dcg-container.dcg-no-graphpaper .dcg-grapher,.dcg-calculator-api-container-v1_12 .dcg-container.dcg-no-graphpaper .dcg-resize-list-btn{display:none}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-grapher.dcg-scale-horizontal{cursor:ew-resize}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-grapher.dcg-scale-vertical{cursor:ns-resize}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-grapher.dcg-scale-both{cursor:nesw-resize}.dcg-calculator-api-container-v1_12 .dcg-grapher-focused{box-shadow:inset 0 0 0 3px #2f72dc99}.dcg-calculator-api-container-v1_12 .dcg-graph-outer{overflow:hidden;position:absolute;top:0;left:0;right:0;bottom:0;outline:none}.dcg-calculator-api-container-v1_12 .dcg-container.dcg-no-expression-topbar .dcg-expression-top-bar{display:none}.dcg-calculator-api-container-v1_12 .dcg-container.dcg-no-expression-topbar .dcg-exppanel-container{padding-top:0}.dcg-calculator-api-container-v1_12 .dcg-container.dcg-no-hyperlinks a[target=_blank]{display:none!important}.dcg-calculator-api-container-v1_12 .dcg-container.dcg-inverted-colors{filter:invert(100%)}.dcg-calculator-api-container-v1_12 .dcg-container.dcg-inverted-swatches .dcg-grapher-3d,.dcg-calculator-api-container-v1_12 .dcg-container.dcg-inverted-swatches .dcg-colored-icon,.dcg-calculator-api-container-v1_12 .dcg-container.dcg-inverted-swatches .dcg-color-swatch,.dcg-calculator-api-container-v1_12 .dcg-container.dcg-inverted-swatches .dcg-color-tile>.dcg-icon-check{filter:invert(100%)}.dcg-calculator-api-container-v1_12 .dcg-container{width:100%;height:100%;position:relative;background:var(--dcg-custom-background-color, #fff);color:var(--dcg-custom-text-color, #000);z-index:0;-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent;overflow:hidden;font-family:arial,sans-serif;font-size:16px}.dcg-calculator-api-container-v1_12 .dcg-container *{box-sizing:border-box}.dcg-calculator-api-container-v1_12 .dcg-graphpaper-branding{position:absolute;bottom:0;right:-8px;width:110px;margin-left:-55px;display:none;z-index:2}.dcg-calculator-api-container-v1_12 .dcg-fullscreen .dcg-graphpaper-branding{display:block;opacity:1}.dcg-calculator-api-container-v1_12 .dcg-fullscreen .dcg-graphpaper-branding .dcg-powered-by,.dcg-calculator-api-container-v1_12 .dcg-fullscreen .dcg-graphpaper-branding i{position:relative;text-shadow:-1px -1px 0 #fff,-1px 1px 0 #fff,1px -1px 0 #fff,1px 1px 0 #fff,0 -1px 0 #fff,0 1px 0 #fff,1px 0 0 #fff,-1px 0 0 #fff}.dcg-calculator-api-container-v1_12 .dcg-expressions-branding,.dcg-calculator-api-container-v1_12 .dcg-graphpaper-branding{text-align:center;font-size:75%;text-decoration:none;line-height:1em;height:45px;overflow:hidden}.dcg-calculator-api-container-v1_12 .dcg-expressions-branding.dcg-unclickable,.dcg-calculator-api-container-v1_12 .dcg-graphpaper-branding.dcg-unclickable{pointer-events:none;z-index:-1}.dcg-calculator-api-container-v1_12 .dcg-expressions-branding .dcg-powered-by,.dcg-calculator-api-container-v1_12 .dcg-graphpaper-branding .dcg-powered-by{color:#0003;text-decoration:none;transition:color .3s;display:block}.dcg-calculator-api-container-v1_12 .dcg-expressions-branding i,.dcg-calculator-api-container-v1_12 .dcg-graphpaper-branding i{color:#0003;font-size:650%;margin-right:2px;line-height:18px;transition:color .3s;height:18px}.dcg-calculator-api-container-v1_12 .dcg-expressions-branding a,.dcg-calculator-api-container-v1_12 .dcg-expressions-branding .dcg-edit-branding,.dcg-calculator-api-container-v1_12 .dcg-graphpaper-branding a,.dcg-calculator-api-container-v1_12 .dcg-graphpaper-branding .dcg-edit-branding{cursor:pointer;display:block;height:50px}.dcg-calculator-api-container-v1_12 .dcg-expressions-branding a.dcg-hovered .dcg-powered-by,.dcg-calculator-api-container-v1_12 .dcg-expressions-branding .dcg-edit-branding.dcg-hovered .dcg-powered-by,.dcg-calculator-api-container-v1_12 .dcg-graphpaper-branding a.dcg-hovered .dcg-powered-by,.dcg-calculator-api-container-v1_12 .dcg-graphpaper-branding .dcg-edit-branding.dcg-hovered .dcg-powered-by{color:#aaa}.dcg-calculator-api-container-v1_12 .dcg-expressions-branding a.dcg-hovered i,.dcg-calculator-api-container-v1_12 .dcg-expressions-branding .dcg-edit-branding.dcg-hovered i,.dcg-calculator-api-container-v1_12 .dcg-graphpaper-branding a.dcg-hovered i,.dcg-calculator-api-container-v1_12 .dcg-graphpaper-branding .dcg-edit-branding.dcg-hovered i{color:#127a3d}.dcg-calculator-api-container-v1_12 .dcg-narrow .dcg-graphpaper-branding,.dcg-calculator-api-container-v1_12 .dcg-no-branding .dcg-expressions-branding,.dcg-calculator-api-container-v1_12 .dcg-no-branding .dcg-graphpaper-branding{display:none}.dcg-calculator-api-container-v1_12 .dcg-button,.dcg-calculator-api-container-v1_12 .dcg-btn-blue,.dcg-calculator-api-container-v1_12 .dcg-btn-red,.dcg-calculator-api-container-v1_12 .dcg-btn-red-outline,.dcg-calculator-api-container-v1_12 .dcg-btn-light-gray,.dcg-calculator-api-container-v1_12 .dcg-btn-gray-outline,.dcg-calculator-api-container-v1_12 .dcg-btn-blue-outline,.dcg-calculator-api-container-v1_12 .dcg-btn-pink,.dcg-calculator-api-container-v1_12 .dcg-btn-white-outline,.dcg-calculator-api-container-v1_12 .dcg-btn-purple,.dcg-calculator-api-container-v1_12 .dcg-btn-purple-outline,.dcg-calculator-api-container-v1_12 .dcg-btn-indigo{border:1px solid transparent;text-decoration:none;padding:0 20px;-webkit-appearance:none;appearance:none;-webkit-user-select:none;user-select:none;border-radius:3px;font:inherit;line-height:var(--dcg-btn-height, 2.125rem);cursor:pointer;white-space:nowrap;text-align:center}.dcg-calculator-api-container-v1_12 .dcg-button.dcg-focus-visible,.dcg-calculator-api-container-v1_12 .dcg-btn-blue.dcg-focus-visible,.dcg-calculator-api-container-v1_12 .dcg-btn-red.dcg-focus-visible,.dcg-calculator-api-container-v1_12 .dcg-btn-red-outline.dcg-focus-visible,.dcg-calculator-api-container-v1_12 .dcg-btn-light-gray.dcg-focus-visible,.dcg-calculator-api-container-v1_12 .dcg-btn-gray-outline.dcg-focus-visible,.dcg-calculator-api-container-v1_12 .dcg-btn-blue-outline.dcg-focus-visible,.dcg-calculator-api-container-v1_12 .dcg-btn-pink.dcg-focus-visible,.dcg-calculator-api-container-v1_12 .dcg-btn-white-outline.dcg-focus-visible,.dcg-calculator-api-container-v1_12 .dcg-btn-purple.dcg-focus-visible,.dcg-calculator-api-container-v1_12 .dcg-btn-purple-outline.dcg-focus-visible,.dcg-calculator-api-container-v1_12 .dcg-btn-indigo.dcg-focus-visible{outline:2px solid var(--dcg-accent-color, #2f72dc);outline-offset:3px}.dcg-calculator-api-container-v1_12 .dcg-button.dcg-disabled,.dcg-calculator-api-container-v1_12 .dcg-button[aria-disabled=true],.dcg-calculator-api-container-v1_12 .dcg-btn-blue.dcg-disabled,.dcg-calculator-api-container-v1_12 .dcg-btn-blue[aria-disabled=true],.dcg-calculator-api-container-v1_12 .dcg-btn-red.dcg-disabled,.dcg-calculator-api-container-v1_12 .dcg-btn-red[aria-disabled=true],.dcg-calculator-api-container-v1_12 .dcg-btn-red-outline.dcg-disabled,.dcg-calculator-api-container-v1_12 .dcg-btn-red-outline[aria-disabled=true],.dcg-calculator-api-container-v1_12 .dcg-btn-light-gray.dcg-disabled,.dcg-calculator-api-container-v1_12 .dcg-btn-light-gray[aria-disabled=true],.dcg-calculator-api-container-v1_12 .dcg-btn-gray-outline.dcg-disabled,.dcg-calculator-api-container-v1_12 .dcg-btn-gray-outline[aria-disabled=true],.dcg-calculator-api-container-v1_12 .dcg-btn-blue-outline.dcg-disabled,.dcg-calculator-api-container-v1_12 .dcg-btn-blue-outline[aria-disabled=true],.dcg-calculator-api-container-v1_12 .dcg-btn-pink.dcg-disabled,.dcg-calculator-api-container-v1_12 .dcg-btn-pink[aria-disabled=true],.dcg-calculator-api-container-v1_12 .dcg-btn-white-outline.dcg-disabled,.dcg-calculator-api-container-v1_12 .dcg-btn-white-outline[aria-disabled=true],.dcg-calculator-api-container-v1_12 .dcg-btn-purple.dcg-disabled,.dcg-calculator-api-container-v1_12 .dcg-btn-purple[aria-disabled=true],.dcg-calculator-api-container-v1_12 .dcg-btn-purple-outline.dcg-disabled,.dcg-calculator-api-container-v1_12 .dcg-btn-purple-outline[aria-disabled=true],.dcg-calculator-api-container-v1_12 .dcg-btn-indigo.dcg-disabled,.dcg-calculator-api-container-v1_12 .dcg-btn-indigo[aria-disabled=true]{opacity:.5;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-btn-red,.dcg-calculator-api-container-v1_12 .dcg-btn-blue,.dcg-calculator-api-container-v1_12 .dcg-btn-purple,.dcg-calculator-api-container-v1_12 .dcg-btn-indigo,.dcg-calculator-api-container-v1_12 .dcg-btn-purple-outline,.dcg-calculator-api-container-v1_12 .dcg-btn-gray-outline,.dcg-calculator-api-container-v1_12 .dcg-btn-blue-outline,.dcg-calculator-api-container-v1_12 .dcg-btn-red-outline{color:#fff;box-shadow:inset 0 1px #ffffff1a,inset 0 -1px #0000000a}.dcg-calculator-api-container-v1_12 .dcg-btn-purple,.dcg-calculator-api-container-v1_12 .dcg-btn-indigo,.dcg-calculator-api-container-v1_12 .dcg-btn-red,.dcg-calculator-api-container-v1_12 .dcg-btn-blue{white-space:nowrap}.dcg-calculator-api-container-v1_12 .dcg-btn-purple.dcg-hovered:not(.dcg-disabled),.dcg-calculator-api-container-v1_12 .dcg-btn-purple.dcg-focus-visible:not(.dcg-disabled),.dcg-calculator-api-container-v1_12 .dcg-btn-indigo.dcg-hovered:not(.dcg-disabled),.dcg-calculator-api-container-v1_12 .dcg-btn-indigo.dcg-focus-visible:not(.dcg-disabled),.dcg-calculator-api-container-v1_12 .dcg-btn-red.dcg-hovered:not(.dcg-disabled),.dcg-calculator-api-container-v1_12 .dcg-btn-red.dcg-focus-visible:not(.dcg-disabled),.dcg-calculator-api-container-v1_12 .dcg-btn-blue.dcg-hovered:not(.dcg-disabled),.dcg-calculator-api-container-v1_12 .dcg-btn-blue.dcg-focus-visible:not(.dcg-disabled){transition:background .2s}.dcg-calculator-api-container-v1_12 .dcg-btn-purple.dcg-depressed:not(.dcg-disabled),.dcg-calculator-api-container-v1_12 .dcg-btn-indigo.dcg-depressed:not(.dcg-disabled),.dcg-calculator-api-container-v1_12 .dcg-btn-red.dcg-depressed:not(.dcg-disabled),.dcg-calculator-api-container-v1_12 .dcg-btn-blue.dcg-depressed:not(.dcg-disabled){box-shadow:none}.dcg-calculator-api-container-v1_12 .dcg-btn-purple{background-color:#7c69b3}.dcg-calculator-api-container-v1_12 .dcg-btn-purple.dcg-hovered:not(.dcg-disabled),.dcg-calculator-api-container-v1_12 .dcg-btn-purple.dcg-focus-visible:not(.dcg-disabled){background:#63548f}.dcg-calculator-api-container-v1_12 .dcg-btn-purple.dcg-depressed:not(.dcg-disabled){background:#4f4372}.dcg-calculator-api-container-v1_12 .dcg-btn-indigo{background-color:#785bed}.dcg-calculator-api-container-v1_12 .dcg-btn-indigo.dcg-hovered:not(.dcg-disabled),.dcg-calculator-api-container-v1_12 .dcg-btn-indigo.dcg-focus-visible:not(.dcg-disabled){background-color:#5837dd}.dcg-calculator-api-container-v1_12 .dcg-btn-indigo.dcg-depressed:not(.dcg-disabled){background-color:#2605ab}.dcg-calculator-api-container-v1_12 .dcg-btn-red{background:#ce4945}.dcg-calculator-api-container-v1_12 .dcg-btn-red.dcg-hovered:not(.dcg-disabled),.dcg-calculator-api-container-v1_12 .dcg-btn-red.dcg-focus-visible:not(.dcg-disabled){background:#bc433f}.dcg-calculator-api-container-v1_12 .dcg-btn-red.dcg-depressed:not(.dcg-disabled){background:#b03936}.dcg-calculator-api-container-v1_12 .dcg-btn-blue{background:var(--dcg-accent-color, #2f72dc)}.dcg-calculator-api-container-v1_12 .dcg-btn-blue.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-btn-blue.dcg-focus-visible{background:var(--dcg-accent-color-shaded-10, #2457a8)}.dcg-calculator-api-container-v1_12 .dcg-btn-blue.dcg-depressed{background:var(--dcg-accent-color-shaded-20, #193d75)}.dcg-calculator-api-container-v1_12 .dcg-btn-blue-outline{background:#fff;border:1px solid #2f72dc;color:#2f72dc}.dcg-calculator-api-container-v1_12 .dcg-btn-blue-outline.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-btn-blue-outline.dcg-focus-visible{border-color:#2457a8;box-shadow:0 0 0 1px #2457a8;color:#2253a1}.dcg-calculator-api-container-v1_12 .dcg-btn-blue-outline.dcg-depressed{border-color:#17396e;box-shadow:0 0 0 1px #17396e;color:#17396e;background:#2f72dc1a}.dcg-calculator-api-container-v1_12 .dcg-btn-red-outline{background:#fff;border:1px solid #ce4945;color:#ce4945}.dcg-calculator-api-container-v1_12 .dcg-btn-red-outline.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-btn-red-outline.dcg-focus-visible{border-color:#bc433f;box-shadow:0 0 0 1px #bc433f;color:#bc433f}.dcg-calculator-api-container-v1_12 .dcg-btn-red-outline.dcg-depressed{border-color:#b03936;box-shadow:0 0 0 1px #b03936;color:#b03936;background:#ce49451a}.dcg-calculator-api-container-v1_12 .dcg-btn-purple-outline{background:#fff;border:1px solid #785bed;color:#785bed}.dcg-calculator-api-container-v1_12 .dcg-btn-purple-outline.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-btn-purple-outline.dcg-focus-visible{border-color:#230698;box-shadow:0 0 0 1px #230698;color:#230698}.dcg-calculator-api-container-v1_12 .dcg-btn-purple-outline.dcg-depressed{border-color:#230698;box-shadow:0 0 0 1px #230698;color:#230698;background:#785bed1a}.dcg-calculator-api-container-v1_12 .dcg-btn-pink{background:#b92a73;color:#fff}.dcg-calculator-api-container-v1_12 .dcg-btn-pink.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-btn-pink.dcg-focus-visible{background:linear-gradient(0deg,#0000000a 0% 100%),#b92a73}.dcg-calculator-api-container-v1_12 .dcg-btn-pink.dcg-depressed{box-shadow:0 3px 3px inset #0003}.dcg-calculator-api-container-v1_12 .dcg-btn-gray-outline{background:var(--dcg-custom-background-color, #fff);border:1px solid #bbb;color:var(--dcg-custom-text-color, #666)}.dcg-calculator-api-container-v1_12 .dcg-btn-gray-outline.dcg-hovered:not(.dcg-disabled),.dcg-calculator-api-container-v1_12 .dcg-btn-gray-outline.dcg-focus-visible:not(dcg-disabled){border-color:#666;color:#454545;background:#0000000a}.dcg-calculator-api-container-v1_12 .dcg-btn-gray-outline.dcg-depressed:not(.dcg-disabled){border-color:#000;color:#000;background:#0000001a}.dcg-calculator-api-container-v1_12 .dcg-btn-white-outline{border:1px solid rgba(250,250,250,.8);color:#fafafae6}.dcg-calculator-api-container-v1_12 .dcg-btn-white-outline.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-btn-white-outline.dcg-depressed,.dcg-calculator-api-container-v1_12 .dcg-btn-white-outline.dcg-focus-visible{border-color:#fafafae6;box-shadow:0 0 0 1px #fafafae6;color:#fff}.dcg-calculator-api-container-v1_12 .dcg-btn-white-outline.dcg-depressed{background:#fafafa1a}.dcg-calculator-api-container-v1_12 .dcg-btn-light-gray{box-shadow:inset 0 1px #ffffff40,inset 0 -1px #00000005;background:linear-gradient(var(--dcg-custom-background-color, #f6f6f6),var(--dcg-custom-background-color-shaded, #eff2f3));border:1px solid rgba(206,206,206,.8)}.dcg-calculator-api-container-v1_12 .dcg-btn-light-gray.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-btn-light-gray.dcg-focus-visible{background:var(--dcg-custom-background-color-shaded, #eff2f3);border:1px solid #bbb}.dcg-calculator-api-container-v1_12 .dcg-btn-light-gray.dcg-depressed{background:var(--dcg-custom-background-color-shaded, #ccc);border:1px solid #949494;box-shadow:none}.dcg-calculator-api-container-v1_12 .dcg-inverted-colors .dcg-btn-red,.dcg-calculator-api-container-v1_12 .dcg-inverted-colors .dcg-btn-blue{box-shadow:inset 0 -1px #ffffff26,inset 0 1px #0000001a}.dcg-calculator-api-container-v1_12 .dcg-input-blue-outline{outline:none;border-radius:3px;border:1px solid #bbb;padding:7px;-webkit-appearance:none;appearance:none;box-sizing:border-box}.dcg-calculator-api-container-v1_12 .dcg-input-blue-outline:focus{border:1px solid var(--dcg-accent-color, #2f72dc);box-shadow:0 0 0 1px var(--dcg-accent-color, #2f72dc)}.dcg-calculator-api-container-v1_12 .dcg-input-blue-outline::-ms-clear{display:none}.dcg-calculator-api-container-v1_12 .dcg-navigation-arrow{color:#949494;font-size:170%;text-decoration:none;margin:0 -5px -5px;padding:10px}.dcg-calculator-api-container-v1_12 .dcg-navigation-arrow.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-navigation-arrow.dcg-focus-visible{color:#666}.dcg-calculator-api-container-v1_12 .dcg-navigation-arrow.dcg-depressed{color:#000}.dcg-calculator-api-container-v1_12 .dcg-blue-link{color:var(--dcg-accent-color, #2f72dc);cursor:pointer;text-decoration:underline}.dcg-calculator-api-container-v1_12 .dcg-blue-link.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-blue-link.dcg-focus-visible{color:var(--dcg-accent-color-shaded-10, #2253a1)}.dcg-calculator-api-container-v1_12 .dcg-blue-link.dcg-focus-visible{outline:2px solid var(--dcg-accent-color, #2f72dc);outline-offset:3px}.dcg-calculator-api-container-v1_12 .dcg-blue-link.dcg-depressed{color:var(--dcg-accent-color-shaded-20, #17396e)}.dcg-calculator-api-container-v1_12 .dcg-purple-link{color:#785bed;cursor:pointer;text-decoration:underline}.dcg-calculator-api-container-v1_12 .dcg-purple-link.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-purple-link.dcg-focus-visible{color:#5837dd}.dcg-calculator-api-container-v1_12 .dcg-purple-link.dcg-depressed{color:#2605ab}.dcg-calculator-api-container-v1_12 .dcg-white-link{color:#fff;text-decoration:underline}.dcg-calculator-api-container-v1_12 .dcg-white-link.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-white-link.dcg-focus-visible{color:#e2e2e2}.dcg-calculator-api-container-v1_12 .dcg-white-link.dcg-depressed{color:#bbb}.dcg-calculator-api-container-v1_12 .dcg-gray-link{color:#666;cursor:pointer;text-decoration:underline}.dcg-calculator-api-container-v1_12 .dcg-gray-link.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-gray-link.dcg-focus-visible{color:#454545}.dcg-calculator-api-container-v1_12 .dcg-gray-link.dcg-depressed{color:#000}.dcg-calculator-api-container-v1_12 .dcg-red-dropdown-option{color:#c0504d}.dcg-calculator-api-container-v1_12 .dcg-red-dropdown-option.dcg-hovered{color:#ad1a1a}.dcg-calculator-api-container-v1_12 .dcg-red-dropdown-option.dcg-depressed{color:#860606}.dcg-calculator-api-container-v1_12 .dcg-light-gray-link{color:#e2e2e2;cursor:pointer;text-decoration:underline}.dcg-calculator-api-container-v1_12 .dcg-light-gray-link.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-light-gray-link.dcg-focus-visible{color:#fff}.dcg-calculator-api-container-v1_12 .dcg-light-gray-link.dcg-depressed{color:#bbb}.dcg-calculator-api-container-v1_12 .dcg-shared-tab-gray-underline{text-align:center;display:inline-block;padding:5px 0;margin:5px 0;color:#666;text-decoration:none}.dcg-calculator-api-container-v1_12 .dcg-shared-tab-gray-underline.dcg-shared-tab-always-underline{border-bottom:3px solid #e2e2e2}.dcg-calculator-api-container-v1_12 .dcg-shared-tab-gray-underline:not(.dcg-shared-tab-always-underline).dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-shared-tab-gray-underline:not(.dcg-shared-tab-always-underline).dcg-depressed,.dcg-calculator-api-container-v1_12 .dcg-shared-tab-gray-underline:not(.dcg-shared-tab-always-underline).dcg-selected{padding-bottom:2px}.dcg-calculator-api-container-v1_12 .dcg-shared-tab-gray-underline.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-shared-tab-gray-underline.dcg-focus-visible{border-bottom:3px solid #bbb}.dcg-calculator-api-container-v1_12 .dcg-shared-tab-gray-underline.dcg-depressed{color:#000;border-bottom:3px solid #949494}.dcg-calculator-api-container-v1_12 .dcg-shared-tab-gray-underline.dcg-selected{color:#2f72dc;border-bottom:3px solid #2f72dc;cursor:pointer}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expressionitem textarea.dcg-smart-textarea,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expressionitem .dcg-displayTextarea{font-size:113%}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expressionimage .dcg-image-loaded .dcg-mq-math-mode{font-size:130%}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-poi-label{font-size:150%}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-poi-label .dcg-pt{border-width:8px;border-radius:8px;margin-left:-4px;margin-top:-4px}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-poi-label.dcg-hole .dcg-pt{border-width:4px;padding:5px;border-radius:9px}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-poi-label:not(.dcg-tracept) .dcg-pt{border-width:8px;border-radius:8px;margin-left:-3px;margin-top:-3px}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expressionitem .dcg-mq-editable-field,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expressionitem .dcg-mq-math-mode,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expressionitem .dcg-slider-container .dcg-mq-math-mode,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expressionitem .dcg-mathquill-braille,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard .dcg-mq-editable-field,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard .dcg-mq-math-mode,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard .dcg-slider-container .dcg-mq-math-mode,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard .dcg-mathquill-braille{font-size:150%}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expressionitem .dcg-inline-math-input-view .dcg-math-field.dcg-math-field,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard .dcg-inline-math-input-view .dcg-math-field.dcg-math-field{min-width:47.5px}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expressionitem .dcg-inference-footer_section-title,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard .dcg-inference-footer_section-title{font-size:120%}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expressionitem .dcg-label-raw-text,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expressionitem .dcg-distribution-view__or,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard .dcg-label-raw-text,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard .dcg-distribution-view__or,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expressionitem label .dcg-mixed-text-math .dcg-mq-math-mode,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expressionitem label .dcg-mixed-text-math .dcg-label-raw-text,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard label .dcg-mixed-text-math .dcg-mq-math-mode,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard label .dcg-mixed-text-math .dcg-label-raw-text{font-size:130%}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expressionitem .dcg-segmented-control-interior,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard .dcg-segmented-control-interior{font-size:1rem}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expressionitem .dcg-mq-placeholder,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard .dcg-mq-placeholder{margin-top:-.88em;height:unset}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expressionitem .dcg-create-sliders,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard .dcg-create-sliders{line-height:30px}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expressionitem .dcg-create-sliders .dcg-msg,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard .dcg-create-sliders .dcg-msg{font-size:1rem}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expressionitem .dcg-create-sliders .dcg-btn-slider,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expressionitem .dcg-create-sliders .dcg-btn-slider .dcg-mq-math-mode,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard .dcg-create-sliders .dcg-btn-slider,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard .dcg-create-sliders .dcg-btn-slider .dcg-mq-math-mode{font-size:1.25rem}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expressionitem .dcg-slider,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard .dcg-slider{bottom:30px}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expressionitem .dcg-inference-footer,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard .dcg-inference-footer{gap:10px}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expressionitem .dcg-inference-footer label:not(:has(.dcg-mixed-text-math)),.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard .dcg-inference-footer label:not(:has(.dcg-mixed-text-math)){font-size:1.1rem}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expressionitem .dcg-inference-footer .dcg-inference-footer__expanded-section,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard .dcg-inference-footer .dcg-inference-footer__expanded-section{gap:6px}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expressionitem .dcg-inference-footer .dcg-inference-footer__significance-test .dcg-inference--significance--diagram,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard .dcg-inference-footer .dcg-inference-footer__significance-test .dcg-inference--significance--diagram{max-width:390px;height:156px}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expressionitem .dcg-inference-footer .dcg-inference--confidence--diagram,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard .dcg-inference-footer .dcg-inference--confidence--diagram{max-width:390px;height:65px}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expressionitem .dcg-inference-footer .dcg-significance-diagram-outer-label,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard .dcg-inference-footer .dcg-significance-diagram-outer-label{font-size:130%}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expressionitem .dcg-inference-footer .dcg-table--col-header,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expressionitem .dcg-inference-footer .dcg-table--row-header,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard .dcg-inference-footer .dcg-table--col-header,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard .dcg-inference-footer .dcg-table--row-header,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-expressionitem .dcg-inference-footer .dcg-exportable-evaluation__copy-wrapper .dcg-exportable-evaluation__undefined,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard .dcg-inference-footer .dcg-exportable-evaluation__copy-wrapper .dcg-exportable-evaluation__undefined{font-size:1.1rem}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard button{font-size:1.1rem!important}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard button .dcg-mixed-text-math .dcg-mq-math-mode,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard button .dcg-mixed-text-math .dcg-label-raw-text{font-size:1.1rem}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-add-inference-wizard .dcg-mq-placeholder{height:1.5rem;line-height:1.5rem;margin-top:-.6rem}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-display-domain{bottom:12px;font-size:110%}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-slider_menu{bottom:6px}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-slider_menu .dcg-mq-editable-field,.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-slider_menu .dcg-mq-math-mode{font-size:120%}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-slider_menu table{border-collapse:collapse;font-size:20px;margin:0 auto}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-slider_menu table input{font-size:81%}@font-face{font-family:dcg-icons-07-17-2025;src:url(data:font/woff2;base64,d09GMgABAAAAAHHkAAsAAAAA5WAAAHGSAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmAAg1gRCAqDt0iC3XABNgIkA4VoC4J2AAQgBYMeByAbT7azERFsHEBhMJ6OItg4IoQBFlGUjlY0+78ccDIG6HxkZQiHgOM4BiwBjsAQ+Nijotfw4zSyxAjHnjBqoLqrFemKjTfOSbPpMwKx/nv3HKGxT3J/np/OP/c+yYu/l1RSJXmRisUqHi/1NG2qSGmbFh01WsxbmCHWGUOsiH3MJ/zB5kzBNwffmEL/79NZX7dbMnuquiV4iwQOm8HOG3LsrpIQHiuA5RnS7GPew3b/1P2t+q3uFhLRFko4RBzS5EAYgrl12xhL2MaCqG2MkaNGq7BKYkUrOUAqRioISJhYgFUI2IgomKANVoLR/0ppv75EB8XwJBAOHM6SAe7tP51VVVo/pZZ6l4WjIwjCS9H2AnreRYiDeVXyTfbAMs240CCFh9wtji+9+OO8c29va7iUFJPCb8dM+lDYKXNCiPvz/ab/hV1Pn8peUV+X3nZVvvfspzK/w+8IEKtAgkTbhJAAoe2tSWQEvs+lWlSHzwbEw91TWpWOphIUFBrK0gH5b/f/fNXedgYEJJDa3UOt1seUnChHyVF77NMrOcYyVv6l88ydeWFm3iPfewAp4IFcgaAkAyB39QhSXyC4gSC1a4rLzfwpV9s5BuApGCQ3gNCuDxU20iHnKsUu5dLlP65+uW46N21Iua/dlYZ/3v3UFnLL0XUeUCpOirDteELhAN++ipyTU37G+R1rSjlNxRIDRIlRBBR0n/dsr/P/x9TvRcnYjW3NUnjKixJBM09q+8cY9+Lmvxqj8w8TpYbUsUrSRu6aBP4eAhAkgZYBBYAH8GUA8OpkB/QbsCBh9ejuEJuKg23y0CxxdvYc2AiC/N2gTS1owAS2YlJ8DzwZQ1sIQFsIEG0mYV86FtTr+jKAQG0SwIZqKDfDJyIVYQG9hXLkXWzPCgBgXR2O0nmm9YUk5FSSZMqu2sB6sDvKKPj///r54/u3r18+T0+Rx60/4V1mE4ngd5QzFKGOEYXbIAOkg7T9NhzZSIiFPQinDUdhF+yFDdgPh+BkzMFcnIH5mI+zsBCLcDaWYCnOxXIcgfOxCi/AbpyE9bgSZ+KFuA5n4xzcYOUhDiPbfwEo9g0gwiiQrRgWCnAMEKChWUhDTx2vK+qO42fxUkmmpg9wFXURKCQLBDBAzQIDJhQmFCnSQlBYQXiI4iRf0gCLMgxICc7jRW163EuQvJCiKokhJekoEoq0xf3gTH5rC8RcbIUnFc3mzIwA6KWkFEpCiboXI0JgQEBiklcD4N5lRCAW6ibkwu71HlEYcY8NX4HsNSvHBFEaYCJQrR003gxKGCsgIIFKKTol2ntbFyG8u8yQ0ti2kmbrF1Mfj9SneWtjeRxDBHhFZ0dHZ0NTR3+rYUphWQ1EtI7fBUDS4QJSVk2SahgiFyHetl3qJOXJsetBHdf13WNNOo4Uhrgv2gOxFgW6X56Ueq/44d92dbVlUeS0scyssu2WqQBhvMVgp5Zi/VZLc3iWj6CcAqYRg4sbh3Mjy8rw1cm4AlI4ElpO/cv4tRADYMCqCDdHPCjK23pbg4GL/vjbaJtUCqI3Ak1HanHg4O8IajbNoYGBgiktWV5uuYm4lY3WzbKMEYohNAJmiR5qAcMDWZeHm3yACkodndDg3aKmgODrj123yZdW2rb4VMtOrJDqAJL2Ss80aQ2t/5tpW5NwYp1gQgBs5TyKalpGviTtWrTcfxCGMBkwWharADiGcSAr9E0Ts4Wkn74bWa52akyr/pkG3ARqoXQ1BMKP82Cs2NW0SoWfpHQEi7h77J6Xxpd6n99JaArkEEoBWxuiJG+vqiQFmEtL5hY4XEvxfMi8CdS0jnxVwWaVRhNsk7XjqmktjgupYoyQICBvcl7UOjuAZig4Iohkg7T6u93grOixtL1Fqi8/jGkapdimvD1t78eoDIKuwcXFyc01PwksJaVKyrgQOaWbF2lSmbfJJJFcUIBp7xzTTcrSxI5jmWRMPatJDS4qK5R4gIYGH1X1VeodkVS+81S4WW1AAcfIUUNAqHJAJMdsh2qHWd41V/tYDwWisOdmSksoeDoP7LTgcUA60Z0YmXMUEbRQ4AeD6EyTUdZ7yZsV84fc/PMvvPFJFimTlldfBXeoQkhIbGlNmUQiypXjGOUcev/0leKspuglsCX23cKp4pmozO0aNGHXfzb9VVes7bNeX3wZoz8gGletz+OiYsjEdEocvPUMckRQUAhpCDVMBIwIgSqilkdsymLNGCAtjLGgUWumAALD+iHE4YeqV9Xd+0OrmpHXlkdeb0o/eDRxGwpevzaOg2xeIjV9+REDMyJ5IKIV70FNeSAOWPNu7JXf55RC3gy3f5oyASVOd/eubcDPusHA2r505ryIOTTN+ztoHAiYBUnrofV2dPwntkEkQykikUsERESIavugfJBkbkbT7zMegRryT1nW3uLgiR/RryqDAY+IGxRkS9QI+ZUVbXRxQN9+X2MjEkdIS8Q0keTFZjwsJmt8boOfDgql1XhlinooP3jvQgl1QBR0dfcOK3Xo9TB6VrYVt1oyNyT74J5s4KPyaiuVpn/BannAXzPEmV0ZJ6tHVOV78uUOGGy0vLwMbVjHSsU5oplj8uYNtt3O6vvvaryk4J3b8rDX6O+9w6iV4RTQO4B936K9ymZdy4L+tYb/d+JouBEmXgtya3dAvIws3bm/JUzw8htLXZlE/Pn94pnsLt7WGj6gnmda9eF9tlyvpCwTenOboXbW04pz9aEa6eTIjeS0QzWrYLa8XkhmYzvy7uF0Iyx4zlhuyslzxtGCRQekTR4MGgEv/gIFWpBTCMQiWd3YXE1p5LyLjFAQwCwKPrXZ/FOBFEtjhkgalMj/bY173yHuEXZMXz+01PSBnnDsgrMAEZFCfvT4u2fQgU8eO2q9mRCbpnXiWCEGefxEe3vyTWnRreRiDlEi8Y3CT4LzRfgQdcKZLE6AY1hSnZPPAsl6zw0B/eTpRA5VMZCekdEss0VwqOCsj/xLd6SftHCYfnVaJVWNIRFpfXaknbgvSqXQ/fL2Dxbkewvi1n7l3mL972N1o9Zq4dKq90Y0l8ayud9+zz2vsZBT1EKe3FY5/d8TImHQBrC4p6/yWL4ReIE/MUIZhVRFDvef4BjiBOvR+/ldwGRoHg6BHLVywpLIhVzBozIWRMbPFEKB9wnKPj/fhdj55ckKzdC4jFKJfg9VN0dwILn3XohACd5uj7XwBT1d1vOn1N07QzmfkceWR16H+IZPaEnB4ytjP/ilEgOEp/lQJuat8dsLJPGl/Zq//abi/vOFJ9eu8vZ8JohIhvjs/VtIDaEbITZnVE1ieN7xn4uf5XxaYEWj0Yd5Kf6VzSpndjVfqxcaUlqWRS4ynexXuW0CbmJaTiIPycUdrKuYUhc7jNeVWtVvsHP1GNY4/Tgu9evSpRKD5oLL7Y+XOdbLD3DICGcng/xmxtLzs/sTYl044JO6MLzsHIh0yvz3G1t9e75d4icOqdfjltf2jmCk5TT24rgVis4qkq2l3ljurx2OlIDdy5K5qbkrEipb5JGjOQsttPtlFJw2uqexoGqeaCHx3ImCvcW+FprUVVudUsX74hK5eZIQag5TA50AZCxAQGgNrq2FDo29vrIx38A44gd608GNrZrl+uIK7Q1BWZybKoSeV9Mbd3uuP7fq7tt4hZehvOSVeH5+VLDebzFgPzAyIVP5ypQq54EoZz/baGiEi3wb+fZ2O74V6ncvHrD8SlkHnihRFiOABX1ZYhb1oDfBLFeJ0bC7sY0w9/8emRHybwXPGoDKEYYVfuspWK0oRAiG1YG3USFkrHxFweWHBSK0cmLGd7k5K/0G7sdmBOSu5kYpuLf8ilWpnDV2KqxStqIoFWN5UQ6IdOQqRjnVOGGV7qpwJIE+mVVnaCtfB5wW09r92Wu2M2q8f11KVjg1gzzuHz/gnqT3WhmREp6CmW06CfHnipQX838eFXujkZ9jYRgmA/+lGq+T/NpzX3bSTGhY222EGDn3BjSPHA82kui68ejJIxl0v/PWvMOj3qUud6/atWPLQ0zOXy0MCe/eYcv1Q3G6S79qEzPr0druRGjE+hiScLznIpUQeTBcV7ruHh7w+jqSB7qYSBYRyC9aEJWHT8Ryo0Mawc6mfqttyBqQetqz1HJ8k+inbFbVDonqEYpQasHeNqCpxnIwyAexB2QkYspCJT8ISqPSaDT5DKpkjnczz5hgE6GC2UJcKULSSRaPMZZXApAnDkJCz+Vl4WUcFAhCWaViBFzb6otkZKWYqVtD4SWmNQs1HxywxZBwSuBDDCzGbLIHONVWWj4ZS0So+EY2rQrLMgNa4SdoJkaoNs/gEAiByAwBysxj9TmxmrBOuRCxVvHXtktJIrwAVlmCUBPfgAcS8EEYRmVwBxGyNTObngHrquzgKr3FPtL7oV6NITBroaEkPZsDSVqcSR31Q2yhQKq07kx6qqaIGGQ+pUQPIizBUYm0GD8V66cWb1RhIu5EmHfPDwuHWLqeLHEOqIi60Ao5BVRFeKCyn2n484bbxqUXfkqS3Oqwpl2gINfBTx5UxdKEZTsES2dMu4/ZCHpM7ULV0NrInEHS25Ov71O0S8iH46zHgteBEOninEiIGHgVk+hd28Nyov+Z2OfCPlv8efT/+m1miRDyXnS/h+3e2Id2J1jklxG2HV5qwJGwF3G6h8CSIwM/AnZO2BKYdYkDzxvfJeLcTt9YeFcVvg1oF1ZwcDIIBLaAkCd9pcAjaoyXkij5nyNQfxkSMQZRmhwvACnt2LFjkRMlzNGCmTJ8t5y+MREtoVfIfOaS9WJamgahDLgD5KmfJ43oSrcALWs9U/jyPCAmnMFwETeWr08Dn1STs8kgZK+M5owL6R26fBRMsTbBmpACbGsC0jNNx7TA0RSk85PvWUACIYBlucJ6EoxhWlEKrGFaQQ4K1EGEHOhMNo57CEJ25fQlYYZm40ql87B8bJnDDY4ttgYSU2uV5dTqS+PK8RUBrR3fO9uzWlHw3Abf7RQWZZ5ZFUpiNA6JoEug4LqkJQ3+fSOt0I71zBqT81/xEKmKrFZRP8tgJ54MhAI8RuyD/RxSqtSLbcPChbBTQvoyFgG1UDKUpHZIQVtRHs2becGOCEtXs5FjHNSiJV2pYxdazp2bEVHv/fjJI7SFXp2u2NlGVO0axMu2z+mtZ8DEy94wBCRHp3tbBwNA6L45jBARAhhRFSBe0hCRraSQIjqMnQjhg/22bAvh2QmaIGN8R0s5lG5Hlu2cuRTeisycZH5vJXQi6Cfu7C4BGUVhgDAgQsnnBHbOAOqEqWNWov/zEQcI2GyrHDFy+G9AM6BPiXtyPO8rJn4zXqrYie0M/cq8TVLuzz2qUqLtmOwaJDZBE0PA577HAJyJBCPpvllCxTi1BbiETlgFQidTNgM3QYOLPbid79Rs4G7jCiefABztKbiPDdy7XyGcTkTmtsFK+38dnMTuiyUkstvZMO15wp3BbuX/xFL8SX9rcG8v7b0TldX0c+Td3BgqtC/01N3kbkAKgc2z+73bZq38LFSIQFXjYv44avuEUWMy7NRP4lKedUOvV1BmRh4RNRnzk4/8cDR48yHcbLdZvNQ9MGQpYosFt0GNDay3XmEGZL7rwrHBMzZkjzqjghl56s3s6nwIRpb0/xktEobgsoxU78qMNFa5OYyzblksEdDMx6xax5C7wh99wLEt1kFkQT5ZFQ361RjaOMEDegQsOfwH9UUZoxmyr1G/j58buOAtvHKbiokz5zAvtfYqRA5iDnYfXoC3b4n9blbffTuGzQyhKoY1oE+0cSAKDo6wFHGCKwKlFHNMITX46X1tCIbaprw1xutVN20Oj58v6Oa6cDICktGUex9X6oJ+STOI+c10bXcLNtqkw0Q/2ybYGAO6brXmHXbou5XhZtw6TM4zIOeH4VcFcbGvysQ/CqbFYmto+GxndYFkNFjDF3PacotVGMzUHJ4YTvSQOXaqe2Nto+yGBZVOXBLZBKEP5Q+2/UA2sIQvrVUJcWE8+ApAzrWlYejss3+r7OsfUt/eVZ29E99JLCefDrTT+8mVwWd9+z7fN96fHPBgpJ/GavjxrUJeFAgFlFJjknytGbba3B3m21LAWN85jK8O2dfbUW8sklqyxBHIPu8T1S72GUfpFSSvL/7D/0kYEVNsuZogqgnTjbzkPPmSYwecYvKs4MWBcxwNwtC3JSwPhYJMqg+FZHqxA+aTS9TLL6rtiiC5dgRuOjXh8lBCoA3EY5dhqIsKtiB4DpZ7b0P49/rJNWZVL3Ye3mes/c3XUalzvvzw+jWhFE9fOnNZuo0rmzKJ5GbrYEN+Y3hV6lR59areOO7f31rvoRCyl265Sd6pSGFfc+Jm2Cs80tcWjSOTNnoOQbZEjwooj7ohnYqLnN+tQnsyzsqeVFNBMeTeGwcbnA5u6JUGGXi/y4Dk3MVDa1MKkc8102SjI5Chm/iz1tjwnj8Vpvvy/aePWepph4XBQUaD+41JTurFM4nWldj8495YLO6Wi9NPN0Z68uwJ12uXHj2xUi82ZTi1Ft3kTm1fc9KoeXGyOwKFW6cvSbehWZXav7MnM7iurGRhYTe6dBG4NyyzuFxPfv/hfbbePA0ePxw79eOlHZk4VZfEiSNYlx/qjBQejR9FvXtBK5gYCeaq0ajYBD8q+77TcLheHCMwNOe1fGM+RPkizPJOvBk9FmsDLkCGzmZ7kjjcpi+AQkBPF8auaFc7Wm3TzUQFBriWVKPUYx/3CN/ozWGlRJzLen2U7E0/F3U9n1Di3Am4cvn/+EDWY388TNHKgCwQWlt8ujJVl5KS9CVqCbkuJ/ryfUuj7JdrXJ5jy7ZAjmL+pjoL4rrblRl1wczoaLanZjhd/bqIqnVe58CS6qcbErt6S6LFHldqM701hfhR2K1qDPJsFPgPTT4mQ9UnnNCSYN9AX/8FCeHODF7xpA3LelXLsfHMZUlLn/6fByifPqX8t8OqsnJqJrKVfzfXe/6EOox5AqmHd4ZyFU9Y8s3TXeWD57U5SB6Vg2WxqvviTY7fj2Eq9+DRA44Cs5MekmBzYv6jm7RaayVKrvdBicRpxR6f20j27vufXR15s3XUBUVCnm1wDZVzt4puTe4svQcR0ZZg68Eg8u3z/RjDG2Rmmd2fObVfPoIQI5M5Jv2bzOMutvTo6I++17vLA21L/XCvPAqH22L94+LcgFwEjIq9jOt0d8fbP3G1eFvs7TuMKK3VxX5dumZprAfJjze8jBtzrNkX2Bfb0fraGlcsLq8w9roJm5rqrET9i83Am1WHkThXTBOjuT14mqglE55YlW7jSejGQmV71Ez217i/4v3mnnDNtAG/NE4rLuYu9hO+kWQsymmjI0xa9tQX7wm2zqeXIetnOZiOtL0RO/wFDlslzcVTMpbU+9AFBhOdTePvPYkH2jz9d78S5j82t/S/PWEoaCc7Ah2It4+vh2HKrp1YShgem2OQ1zkeFMm0nftPeEbhMq+4lKaYLxLZtWqqj2hSPGvIh1zLdSga53ccv+7vmri8WZczX4mPJFDPaDCZqtf4aBDWWu3XSDNeWh5/1TfhNueFd16ODiMNUqoXUTdINupTCi03P/34pqtgrO5t1GKbcxv+yD2NBPKfw/OrkMwcOYTapwlRrgRZyLcb+LehKpEm/v1PrYOB+s+/Mdvcv/4Tayjl4X/i6CvEogNBOhTDYZ+jIKidYBlIt/9/Ty10GuaHFSax7Kch3QntZeLSgoDKB0RIhNMtua7lw7McL+TRpPs2XeWkkJFfWWKWczH50KMb1+V0zSHh1B9vpqlilBwOXwGf5n1CVE5hw1tMqrLfWfz5pzINUjCTKM4mK8WZyo+KicVJztYOGfV+CF6wSsDt78P34PDI86T0Ewim+D687n8svahy9sAhNrW9q26esVQNREV0Ab0EvPn2GAmZPKqUyfpAxOJiNj1xNv+v0C7hp8S/PdtfyDMLGX/L3qY0fwHq2RKQ165y3f0rt/3/Jv9sdB+1uJy+mqMHIpKkaIvITI8n/IofrCbYIMfqx1eEOLZ07RBRxayZejA184Nfa7bcMB6Rq+VjnWFek+zmiuP/NyJjujeEvPqVgyTHGrnyIP54eZrVLO4CprOQs/oJQtycnlUgNW8x+6umj+be797yvFzeIa4uwUK43eK5ZDoxm06mElWL2g64NrNcMqUMdWBVYHIUEftrK9WVq+pC0v5hCa1G0D2uVzfmABFxOhKqQZ+ZwFnpH+b1nVvMC/8lo+PrIFWZDQ7930+oXqsWBkg/2C8RAIgPiyIDluToHuZZCe1LEfmigIZdReIq6dYYXpBD5FSTJcND0gpoUYYmUbwBBKBIUAVQqlxCcgwWpLWkTI15sZHQhyWDPGFdefqFY3OFJJqZTkxMOAqh6tRUuQYrJ59/7fnEfn2suCsuGLX2at+N/PUEFZwDL1qIJlCyyro5qZQqCO2KcwY8p3v6+KHwg7vf9vxvswuP8yWvVC6XDnnfO8QOfo8fzAn/pM+PckE9eoh5VMBBUcqVxzwY9pyhAl1oNofAJiuFcnnc9fhMUbDSWQqeD+xL1YaZ/BxRrT/ZEqzNNIfJBPpleTnyDukhjeBsifIfulI6rxNOKbRL6n4lpKXL+sHjXXWwVut81+NBd7xemSpCWX5NOFqlrnJbmT4pujKqd+6Lxk7m4WP9J5wAwEd0PnVADeLayTUmV6/egBGpXMnQxnqYGnuNOWdWutTHLwH6Q0CHP4cJJUqHTAAMNh1H9wD0hBCOuLZF6dCOLwdA+UJmb04CABa3urBFlqW2NRvgsDp6SyDm8FetKF4V9gxfo6oQuMu2l+oDn0OKUNpOgGIRhyWht20os4SJKh1Ql1ZuVgaYLLKJbNI9X3Ao11Q0QAjU6qZkMZk3dlStgmhCKWEhfakaPvl2piFjH3xNKczDMQdnAqqGmFymhGUP4sbwxEKK7ozAJmpcjY1tR+qQBkYyhvMH+YucMxKorEqzYAPNgiWcYBZGKKFVskd5R0hWkmVV5eWnfrxQwa2kCX47PWY0weK5b7M8uP5eXDNlqlsrSuADZByl5u0hdj0IP12yqIBipSdEixTboctAAr8VTGdGP2DyzcSegg2HK9pAVij2l8gbW4scbCYmuh/8xVp0dzDTe+aHLywfW+ej1q3F1iARcejxyl4TYv06un4/tF4cWYgZpJSD03TKPCNJncPrvbEIJB6DfIi0kGB6uxuo8Epx2ufc6XQw/7mWzFNg4HvACQUq/BwwwjzOOCOUcEEWSkWYTpMUVIjgZNco8FaZZmF/+ce0s8WAR/PkYxPTiG29oco9lYnrPmp9JKFEJHvLQ5Jt2Qmo4PjDyQcN+6VOIMdHwi/EmjtpOTkWldXzX2qL9OjaUN7yMZJbdOKjSCgMfQ2rkfjUZpj3ZXWO+Z/TqunLuQ5aVU/QelJPkP9sk9CqPFZeWZAFtM11pZiWNhG2CRAvOw7TCpwBKjvRrGqjpPo3rTqxcWxGZ129vVsrVKdO+Cy1197uW3SNbTTx+6rsQJIGcYlZerOBIQeB0tS80JB3aTT6qqRCnxErC5xgIxRwRVYIjcxcEYqChND627Q7g6tB8YnKlCJS8G2x/kpqxWg+Sc5VmrxHC4vGqHdm3wDv25chcTJAZ+6DImwIStt/63CXL2jXy5+8g1Pi1A0KARu2ZXnzw09mTzOeFQMItzZQ4cCmLBvPtrme5YhWjQr94C4gktFLh0GNQ6yBimMho1QiHx345FYcoVJfLUTpLU7h0FvwUxAFCZx0G0YC4BsTVVjFoLGQyrJM0QsWIpN5RS+0J25jNn26KTc/nTxmVcacP+PMuciHeBdv2mTnM+k7CwjEdgYfzNeZDuuYAsQv+D6aMfNcnsi+vcPYZWKEJfLSFdHJrjF59E2ZdTt7IBC+xNS3Y32hYKVR6pfPXC4pXTi9q3tCPJqs6K7qnKqQMSEJnoxpPZPFA9jUf8xSqMwpj4NVm/b4V7l9uj5BzYjfx/axpaSevMir3hqx/CnFeFbKB1GUunyDSrxH5e9D3rrJdzuN/sF7niwriL31coxmhz4u7fXL7HPlYPT8YR7sP3+g8HnyP4ULwxcPigsjF488r6XJNTankduRxnK/LoHJAK/Uj2pNzp9vXe4JU+Ps61H+Bs822dQN54dzTy5JKY0bhZ4ZadSN+1dvsCAdA8Hn5IVxJn0PN5W/g+PGIEr2XPNfj4X3ron8r9+5yk/TvbHz8o+twfid7oE+I16hmv5Qzqy4il42+ciDXc1nv7PMs4RH2I4/vrvaFzcnHBfDx7k25bBc7gz6Hd1YY43LDDbbUyM1seV8pArVwkpXYri9pU750M5pYpknXDAKboKlJXKhEqrxZjqlvhO68ccgUiXx/gDfCvVL1qMzEsG5G8hJA3hl1AM4HUn7UsJTdJa2EY1AQIJOmjkbarvAWp61tYmsrkiGguJQvkuVdZOG9EN9ck2nmXlf+OVRgfEKW48tMiEx+YJBA5TB4JFFHwMEaDlB1dTWkIY6nBNyYJlGiVaxX+tojqwW5DP008EDo/dUgROVZEHgfto5EITpLBAjH9d+8/iR4eJxAZ/FHEcYAeHRpCqCj/nasaPHT5TYGBvuicaC68cUIVFw0swf5pHcfq4z3bwqKeR4EIHui6TWbMNnKIdDwFpcQ6oH0CffDmCgBFNCx1OTpLfBNBeF3BrRGKgS26OEOdD3xqmnXZcGiRIgu4JzGw+6C2MSz1SMCIuTlueAqkI8NjFA+fB+iUSeJS00DUFcLk3c3lsRGgDew/sCVOXD7ShRPiJfr2T8RjKs81YeFx8WaiTrRJZTFs5stRjzg2Qt7HycsiC7uRS+Xwcj5gHOAUxtLhOLN73+ApQ0w9bJQ7b2cV8ULmBxLL8eGOMGbTMZun1lCGbGc7PPVYhXEuWSN14onA9mT89ctIr7Ryv+l7j9/clD/sEhfvb7cGQ0OJodGswy+MFvWfa7mcHMD7K//W72B39cIpj+LTOhuDRfMWbMzMnsN6a/f4rTgenDcITMCM0dGske8eO35cvLA5mTH4Xh7MHM1J0xJ3+Y/Unmhx/7p7b+q87BIxmPZoeGB0cKyCD/+MBfAiMHhzJ/Hemjw9qSvBD8ACwoKDuVcNevXeVRj2ovm8sucYiLKl4PKws5NUIvf5nisw6TsyU1seMoiGiy0pR+9GBk1zLy6pVhGM5eYaK7lC2mxksSkM/8SQUZ3etOYqlijR/ukckVTg8CVvjiivxkQqUKP0cB59Jp4V5LbczGlJFkYAayFFvel2MzoOCKqKzUFgMISYWESS8vHdWgJPh5BH2ijFXXwLDfldUY/J8iaeBQ7yGYP/8piU3+4uc679t+9osYL+annC9FX00zwVsM/nKD23KFiWeYNfqOpGAuZaXtKYe4kXkCzHtYaETF6O6Ck2PTpKfGktmRte5kScT9mS/tXBxQaY+RqgyMDmTEvAJfQXWYL0fdse3lkA2bR++079WqrRaKh7RgkIwrtnYVYWkQBZMwjhYOi5y+SkhQX5Y+tjvEBd9jJ556Z0WSDQTr/RZ7wi1QmMZFyns4YkQQ/ins0AvWWyTB8JaipTgjqtjEYfrF9BvUOUUBDqeJwkDOKPl/ESQl0oVUbl5+ZWnI2ll1f2usFBU8sToJulP63t0RKVxYwa7T2M3adzmLl7qJKVWqwvd4oMZ0jvtjv2EzOaZVi/dWlJYxSQbcvTxUrZdMUeHuslLajuX6P3yDagRlZvoHvnmyHG/yX1limnN32/Dupa5BnL8jqNFWafoP9gJuXe5J6qTE/D30I2esaxo4PTZdmcFO3BOaIrPBUxY8frhHyoJ2V3sC/IUFZZdTBo4rtryxJ2iu0a/LoMt1V/MhV3MmQyJkkf+YqNpu8jjdVZJjJzCce/0tpLRPoLSMJS2/QXzETEc9zvGGim2iJBHUHN1GVFBDBkN2b0ugqkfS3iv3odeWQLU+UpElZueRFwt98sNAznMmSNc7NXTMgvNUZOmgPx/w2af7ogCTgp2eKWr7SOt6lnBKBUizIs8K/qCoa0sJQWEDs5yUvlRbmEFCcWrPvtuVKHEW3EHWLkk4FfPNcDIoljlo9f/jB85o5Q57SXPVWO5IsideT2n+J6NyooNc3O9l50OuNwOzTgaB2HrRwpO3/tpEWG49BXKr7gRhpZ2aeoRTruXMjeUKthOJtufM3aDzAiNbCYpo93xv/t7b5/b2xnF/gTRJ2S9h4yq4qReJpdo0z/D2DVONI1un/Swq2nfv7jVC08D/6uG1zCAuUNjtyWg/65tyvX0a5WZFKyG2Z0xDXJLHcJDqFXOloKJylpYviCjiewr47Qrelcigsw/A5WxsL/hpyVSUO4ZxpyEwR127lDunsRn0lT6tXm4MQtkp3GsC/rwTiqrTbCE/TYWbeUbc3gxAkEZg2zAMcomKUng2kuEQp6SGxECxOGPJIhXYjunQuYR5SvrARXvALpkmNlmpbamAD0KMBLKOAZpy2ET/hliWG//kMcbioERAd6X65vjKxrIAdEWxcfAZ0mIL1DnJNjzo0bWejrvAmDvxs2im0akJrJRhTseWPKLCzOsDzTHBt34qxNyhMmqDhE4GouFDfUmWv54SmWmqsC4bl15e/NzezIbmSfXmgII3CQQ3dOEP9FR/GsRzKTWl7/ZEqx5XXxsAUdqgvxBapA9Q3kCyt7tmjFd6DlkNRB1emkT3kFeKVP5UGjYrZJePf1qzrOU/Xn8RoATwPfB78GH9BPT7t0jS45UeUekp2NKS2sXVFiFQk/X66BTcZ0NqRTbbn0sy3x04imU53PGLOhKyIKd6gP5TVytHW6oYAWihhTv102ydR9xF6ZW5FeNKpkRmbfZae+/Al3mbydYZHEVr9nVd3zoNMytxoK27d5hV/Upkac9NV/vUGFF0JYov8SP+CO9y8m+qDIKuDu9Q6+uRqZXr10TcN7rcR/V6sPAWoxZLtcNCzm6f7qoWe1SOpeu2yPjqsWUe9R60nzySRXrhmazrYtlmg2DC+VJVxpVwBqLZEEbwUy/Gm3H8CtdrPKDryysQVsircVEwa19zws4h6pGEDAqMXYvNtmCMCfTZyxXsJdlU9NvIZ+p4SSwtpoU6lpKPavNIfeTY/AZ0IXqz8rg/bAunLlytL9unhxcEU2+t9Hh7/maN9SyvYik1jq8IP3jYfHjfAG7YxH6FAQt90p5wFbcZ9nL70Lgrc6chDetCkugCOadEPFYAaKEWUfkWsxa3dNbD6cHQTBzquuvC8ES21mDtMy5PKsMOitRrBfvXO7UGXHTq8c39HLhQiXXQR+CLt/86oS7WWtwO6YX30BOShMPKQAtWG6ixzxQAvuPtLQlbL+fAPcK4KihYReHZjb7dM9I9Nz5JpSV6M0IuY0P0amogtOxG3tLaRGq9ZznOX7OzZgtJh/ZesflIu2NeRM0+c9ttJkA37Cq2EmxVxmO/mpGD8FO64eW3Hj8UsXf9mqbmiGJXSpaOiahqmKpd+a7Y8+KVIZSLRPLZKhcJfcclUeK05iAhGbr4hymLTJ0WOFuYMDBJxd7eXgnWPjug7m9drlf2mUCJekmMcdkRSe7Kh6xUkdeabdFCtQ3fYD1rfZDRW+qWJ582jHTBCkNae99Yt04SS2njbvJR69kT07kKaBDUy6n0dkM+U0Rbg5uet4DqZ5EZyYCcDo0QqUgGPTt8Dwk14z1UfZgSPiVqvHugY3e+q31+9iqxcUBUDJB8c45kXOGVE5YUvHFbyvHtfCRvTmcvNmtTtsQ0ufRG+uUPPZIFRSlFVuGNpt3AmUTyAU9dJ4F11P1k5TQtpD1WILLR/MYOFw5U9U8oDkGUBX3OJRzIP6SQv7Su/Ua0mmJC6H2tNtjZybBYAOkXaQDxQGuAXbU10GYhILo8qero2CwR62MvkAo3RKlYG7qdfw3oY32RfcJZlGu19X0e5imnHi0wj3tMMIsRapeoRW0KjMzs6n6s+ZqrzkgHgDa+UiPezrQ7e4iji8xqQ+2UUbH2NyNy/8Ij+RwUsVxt25iJ2k3ieIVb7ZEJgffkvetAOG6dEsjTPMklwqaoe21TDKW5rop9k83+aCNxKN/lVlU4dRm8ebe1rQHFXF6ZE3E1p3/4r1SgWeneKp9nhie/abVmYNYbayBbzC532FQsmVVkCXn63BtrkXQbZ/a0Kkt332Y2X9GcoqBENNeM2e7l9x6QGqWZcIZPrGvEhMRl7eyEyXyrVbei2jW8s9pu+lx4A+0L+Zn9Lm34a1sGXedqXof3sTuETqrCAB9trwFk6NWf/SagXGsopTzKoG8Dsag/x4Cri95GiXuKvG83hF/DuhQFjFD4EuWPK+9UeCEy9V2tXo/iEho722MMT9ZDDX5IyZFG1ZU8wkgrT4dFzRUsksyNZ8D4xwChhO0fmZbXlntThKIVL8j+3yMkz3X/JOHO/9/YKZhE8VeNdRSDn0ihlQSJ5z5UiZBzwvgjGXEIDnR9+bfJf39VQXO+n5fk7rN4Vw3IFeAhJAbhBh/VLnW513nQjlYfqF9SlT5zZYe+gjyfzvoGry+HzKreNLp7vqC35SH6zltEvWuhEZARByIzbz1/Ktab+9kLb7U/ecfkrD732A22Db/5uuL+9Wsfst5UARDVKauNo6lgp/D/HMTaMcPCyGF9HxjNnj7qK0iZuXJiVSrF61E5t5h2KY4iVLHG2vM8qTT68cAdy1rohMQg97i3Q5sVDtjpHuqN7EwgLphBv9JZSVaioV3ZJT3tvYlkAHA8OC/togCRtENwa2ufcqbfkiPvzfYE2i/CpGDgoMMlyVy/ZBlCmZwZb0TDB8SYv8rjxfYRjF31HaVAT0FqKE6q/lhvUGxzvzcs9q2JvB5e4hKprqesObjsmnEv+JBOlmyveeLYR63wIzzd8Pk3iIzPJv/CTrd/99WBr66rtZ1u9SvPGbhmX2kBOyFY3pGtJMT5fCWFbBVXyt3DW7J7gqXDfdQNCkLhRLJ8pJ+40KeZYGD9bx5NWrTCZ9ZOFCo6zFQvz04C717cB/dTJGjx4ImymZSGwcIwDjQMzg67gMj550oGrpiPmWz/yVWoYDCqzzXdBdvo7cwTeilT7fCjim0LDHgdi/fPW8LVhPVebER9h2Rwd6nUu3SG6CSz+Ti9Q48hwa40ghHcqKRZyMCRg8DrFMQdKPMUmdThHA605MNU0BnGq8Ra6QmDWRskLSo0DFP0VG5bT9caAYsQwsAULo6wawAAnygclwAbQxnmKIlz9DQBlRBgwhT4/a9EXAykG7tgnpvFRgu/ftsGSjmIehLzGttpOimRfjqwmiwv6l1XesCb5+44gvJTPL2E+jSXhrJrfJW1CqtOUzVgDiIF00j5gXOrVztoTM7EYJNDfU5MUxd8hR262elw3QhvKBmXqShI7UfwXjAydbOIcyrOYrAw7II8x5JlrbXcE557AhOwaSdP5yhwBYG2qDF8hJaGS3Nr14RvA0Ko4wqT2XvK+Ex53sulq6kHq1fXwnQ9rcSYA7Xg5V0u+gg8WjwQrkCH9W1k0TaMOQe2/Aqbb/vfts6ON5GqHOyolKKKIKVCpKCNz5qjN1Qk7duHh7BovGSUT/W9r3OfNgfBjPYHv9r6YqvpsK9fUIs6FU4uYWmlaSv8f1sCXX4O62+bC10xN/iFonP76MtpgkkzwkCMmpQv4YRy84Kac7MGBxP879+DvXxsZ/rKLagRVv78vkYik8qlslqmMJOf9fJ2YJpklC/yW/++fdp4BDPKD7K8raterXetdqjtxNGSiVmf1DCVj/OS6KwJduCLK1WSpmiwZpWtlOm3rNUQgBGn9/YWYcRdvV0L52ialWFC/7k5aW6XT0mdM7dl6FCKTA/kUzRzl7JupokdRHOarIlm3WbEHWbZEwOU7XQR1R+MIP9WF3xEc86GJvebUZxwbucBJ9GHe++vbm0zuTN8V0W0S+5Qvv4SRcpvd8x0Cbzie9I9IAivGpV4bx4tuqzo4vIt6cz+y1zjt7uRc0PXHSBHPVmoyI8ov/lnmzQ902g0dhQkT0Gq48S4hnxFXxOqaYMXwYMiKMkqctU1n7jNHNhVWjYJ2dieZ/L06a283j1B2A0bROmvvoirPIrkcFOyVHwfs9JixA5Z99GTmIY0Om9Cdy14LzkrL4xM2ggzMM8W7/fd109SvcWkakw1+WBCpVaBrQ/Nyhy2qTCV+22WRKf7Uc2J4RtA2phFMegvMxaZ/XjhGSOnJc79V0qefDO3iLs8UhoVJ9VJgbEBFE0k2aRIC4isj6cZ6ryer/bTIUcYeI7exulbCQGNVu73615+lWS9cdxP7yaaeHpwIIQPtNIo5ATzYZwgk9pAiZM0rKY6TYhzFzlPXx4tBRsKAcMhGMA3cK2ZUjMp1+haBXgBzyQSN+b91TQm2eYCtnwhXujVFQYN97TaAXpjrAavuXILaEKw5NJUtINGKHcH9D2uHZta36qqhe8eAA3YlnSzw7yAFbiSJwGAUI6+GpWrzqMafMQkvbc2n2PUokdgvbrmML279xn7duYaDALAnuQl8uoLWrymTZA14GaFO+BU1X7ix4XbqF0dMHMkoXW3aAgtfm52uY9BPzhgAUI7VKEjoaYo8QOd+RzcoS0HI8Ne16vic6ipBJ/Lg5MkUk0zsC56DJY6xc/fokCAGgr7ZUise8k8STSEbfohNKgiOU6wiuVh8gfJx9P865uK9qQF1DcnBWQgwJBbF2rOzqWqn005nNJXkmhoRv+NOTukSlxMOun+z2TyfWHeeyl7DDndRXvSmBPYdmQyOfK5dRRvtN3WgAVx8h4bE04qMWbPIiQqHdVT0okbsLmkwvaAFJEbKlb8kN/u3KVtdwD+txKfubvfn6euq1aIZCUJIlbWW5J0bQAQGLgWeJfiZkEwSj1olRZhN+nD3x9r7RUEvJU6MSA+KKSTaeG8566LGDDIDataJN6PlvihPhxyDvKD2rdI5A/ayjef0iNM6ULo8usVXP3+g6E659A8150vzs5P7ghCQmMTH0mMNcVu94yeFhg4w4mJ4dQF+efOZTrFx8QtWRKnnthMK0pYp6uYTh29QdjXyYhZtswX5N0OhhIIEW0fyBVTCgUEoap1fkGLC6j6LDp4sKa2SVczV38LsKmlP2V0N4HHQ08z0108AAi85heLJ0GO5uwBRpIueUZSJNYrrrPL8TK2Xvzhg3HEvP3OkQsuBS1O+TGaTNlhw9ErQ5105WMw20KZ+Y1rLvqWPeCtpry5jlBdjY2IUDtP7gTt5KtrdXUF1oIIK+e8btbs4sftYay4rbtDeFaQ4fLuKneQKK5+FjTLZdsu0n4oz8J9koKWQX5bkeukKsz/ur4zqs4TICrdUcEMCwanTtHFUSzpSyRA0CZWI9dczY3q/uT4mbeP9yti5fz5Urb9Fe+6y5CKmfjOfEcFi198uRNfMZ3QvzeqxnOegbitqoBsGzp/p0dIMslweYe34FYemZkeSf9ie6WSqKv89dBLQrsD8k5K1Z3LS+at3C8kmjjzBfvryor3qxbPsCBoE8yrNvJpqD6OZraAHyt0CkwriGCSoDCpxwo9hy08V6WhOdQ0rylC6iWa8DnrZEWcSwnVKhQ0JiiCoJVEsEKpQwqLlnUbaWaN0auBUqQn19oVASLohS6v+pBeMXMEHGGrIC6b80gBmPPJ9Zv/PtimbkLvl9GfFWKijrysaPNJnWDbbbqp7zYCoEcdzssLysesG3BAcGERdKYcMbzTheO24MjteHQ/voXufKLcozmLd4f5R/qyTvusFx1gAg3hM9J8SO3kCW6s0CpxMCaDCUKgIAxYoWeJ+qeoZk0dVCdJxhAVpsw4aAjGCUUch7SFpPRYCROwlWf9anyB0gQE6F8parNvg+QSsTh8VmbklFJi/Zk9ZbHMDRGMtkhvOC6RiCNEwsStF4ayFMjEwxe8OMiwCCMJXzc1FCdH5Rwe5npBXQ9JrzplieDlhER6pyTWrHVh03sHExNh03NRPzstXPKu2GFvU3Zs2UUJg9pIbfehuyfVidUbOP34vi1nilcywlc6z2gTKV8JvEn9dUtZbFzj4S9byhcGfECu9xuNMQVmbBGQWZd3aPDAF4rj/XystLrjZdnME/kw7DdixOE48fCxoSwFNPHQMS4cRTWnpTwoNbLjqIBYAm+4l1G69QKVQ9Qke12rn07YPrTmq5/AQFzzsFd+KRP9s3hhWR9uJ8dlNb0LKSC8MQHOSm/piz8fMaogymKleRw5tiJIr75ZJi4GMNT3HSpeKRK+0uWlImqMsE5TU3Nq7MLGLXvK4x0/IHXYMV9DewJTsh0fIaMssI7J5qzGrR1ObyPzUBw6PDGL+RAJBr44wInONUfpSa3r/dW9kmFe7eJusyXC8rt8zH8K5/aCtM9l+7kmgtlUTqfoMLsAWaVoMgtJEWU6iqMgGDH3RWKl75g1m+kUjZKW0vkvwI3ApZtfiJafvEQ5ec2K7wmsFRtPvTwAGyCyj3PWJMxjXH4h7e9wgmaYc1bbyxY429pjjfzWu9yx8fvWoGCrkVoYDrlsiFyau14tsrqxKXEwYGqIWSauWP3Rsi+6ihePCDyz6IUVFfH8OF5XvoBy0TpsHIJhPeWh3Pn7+fH8hCpVLGpsEnfGiW2AsJyMCJgkPP+EJAcVR3e1U/FfXYqwdrD8eGlTz00ScdvV0HB61K43mLThrTlCZ9gLc6LxADILZPcnU+NlcqIwJDBSMfrC8MS8IEfQbe/w6LbyIG0FmJbXMxJcXRY+d9HgzvKQcChqcZkmXtM0IbSK+WSb5MiUhdB7i8zI5opUSpQSUs+9GhwkEC4N9pwiEE72DF7fCAAaDtahY9p6CzGSzlaDOVYcCiIZUNtSmGXF8B4yvU9yGCGMUKeI7ishFh2Zz/TArEvBIcjXtZogLHESaOnkuBUGeipPBQR0LrDQ9JiJUQ+BhPhC9hUupRHRajSytcGP0L20bJ64qTedgqHmmhiT7Yu0mhEUGEUm8gZztFgwn2My5lMolMDM6AJiFN8k34GBRYhw7QkisVi/CGiA5QEhOHGSgEw2xLykAzzLOVm8hrXPt0FYJBY0ga+mANxc1mHmy3nYCoHoXpr0KQharjcUIw7tQYpXPCsQNpC9yFjdoPEwX0SkK1AuQj+5vdqoIEDglrvoeKqfpnqokXSW1bnABhCiV1kEmcYIQQM1laZ7KTTCekUcgBU5V9E56SzjkcVD9FRqCaXJFmW9lO9zBMbQAwgQQsCBWXWrAYMINJcOIA56F0quBZN2koLoXrpqkCE8wQiPC8MAQ9BJouknBVKpnUIG4ACHh1PL7Rffm9oHnSAGUxk+lcls0cWEIYQu48v9U6mSiBpCAAhXY7r4wxT+RrbSQhHdurjvHGmQZHY6u3TpuNP4Eg8fAQ5xGhYANqt2K5fV+CbEaLqM8SuPUxfLuVcqiGrSPUu6Kk/Fh+3bSUTQP14g+BrijeZBf1o+StQeeHD8KX3/afq1I21HNlynn4oyFn6BMq45yV8H1n22A7QnZk+O5g0isJ3wEqTM+FY45zbMKNr2ZnlIogz+EespKCHd2rf4PNHPduL5iDN+tAnYLVvC1sdZiHxd+M/F+IAjEc47SnNPWkI49bGc+8RJkHjfkh6Wr7KwiUkCF18rEB9URxL0RgcEgK1gzxFFiZj9K1cn4X2NddJJk9AxWrc6q9cewSR6FM1mzmBtjJs9SfzlQeljCkR/X0GKGYPeLWCupIK//d4Y1TQQgfOeliXPxO9HzWnhraHICiOrUpYcXyaJYCtYagVBVKi/prXvxCenWkhaAOluWYzaFT+zjwoQojaZDVbnVYMMftaEM6F/Q86bT5qfzmbNspLsTp2p5GvkS65fq1eWmPw8SbZ1RedQs/3y2ro1dXcaTXhp4BzfR89EJ369S5RppKRUI0uEbO7gsIoA5wCwpoiOOX6CgTmeGnEu2DTee86xG6M72ueIGfQtzxZtlm7SeS8NUg2K9YcGmMYHCQDgKM53QWZa5BuGGiEAUGw2jjk+4GQcx7O0+oJqt2zzlx+AnVkYFL10/Tx40CKknogxrqQ3cLnRSB1hIDP4k3QXOgbrmAS7G7ULW8Qxx8WmfpncLStwbpVcHVNwNAazw1BJObMLE3N0wAkzCOemWivZDBnoE1gE0f6kySvFBADQo9QwsACTkhwk7x1avF6Wg7Xjz6ERXeZUs2CHC4DyVcLSZtEOuroqLuFp7N9ZVCNja3yRCBAgNQYCABAYcdOX6vXPewAHvF8D4aCPa2cbnAAAEEKAAK5hNuAafQUYWBS62qQOsm2w4znq2p8B5soFTrmq+3Ngp2nHMDvC/cnh21AjDNuOHLdUvHv/Xlf5J/FVXdvDa6+mAYSOVZR8e++BhWLV5lY+tqlZ7jivFKA0V6lPaRZgQqtT1lhy/zKoFyOdAgEK/FLkXWsECCEMcDIu5vu3Dx5YKLceWgeooHOrbzF8gG4YF9MQynHRZc1QhvhK3iegxevDwFnzGsC7NPBMLEeyOol6AgnTw4qlj0Wbus6vJtc1n/W5fOJ/Xn8dotnpogs1EJ4FDqx9PPYGXsorZM0fzQDAFNDwp7L19/Q9i6+qryTjvVnzh86hBqyQX1n4GrmjeVd8dNK8hlIifcHukyfys4N1mTr9IpbKohdbSFYowrBmsOIgAvBf1fsSzAgAwVtp7SNwknTaRQiAPslCTqWBAAIwnfubhRllj7zXtHWrQImkS/2b32i6mMyLx0zIyRKXOiLfGra8qY03Zkr9W95suhfJTcBMuD6ehfmBRC4133YPmfjFa8YzGe8e3vYFgzxq28VE5BdZJZl0JXrLV/FChtxN8nM099wfaIt4hJ1z0bBuNS8OydR71q0yXORwE9CtmO6nq+mlEPSrzmg8g1tN4vz4TSNcX1958egWXPUiCWljSgFA+s8WmnpUvMPe27Z4sW+QgM42z5mT1mfjuqFrqiAIA3MuCQAsyRAlwWJUwYyErCFLqSl0+CQaeYrzPwSrxrw0Rp4DL7CESxbXgxUfApen+/UZrqtbJAIfKoKvW4wSTED6vf2CgpQu8uQHxtj0O6duCy54ZYxNT8e0rdg7CZlx5rQLRPH39mdm/Boy7/38hLcTQ76xNDIl2DN1WHelXY6rvFc+CotFLhH4me101xSg+W7vL6WfpyiZ/1EdBmClYQTZw1y0uhi7bYMWOcjUgqzBS1Anmf9S8WrByc9zxwiOM+l/fyai/CFxqOcl6F0Ho4J7BY8gftcUj4eOVKOp0GvAhl8M5/opGU8DkaCyCvi2f4TGX/MHtVFuRylaYbGOtfn6Bg33Avx51m6ZX14k98s2y93TS2UF8qYhan6VKnmxrGlZMcuXw5fHfE2tFQtOkT6FjvFGl18bdaayK6O8sdBPpNOxSUsEpi5v3YeMvc87vTRjqOXKaV6ewxilL8MwfAb6Ybq4Bc08W0v/DRAWP2fc6vUfr3VHlowXcqGIfW8fsNtdIyvwoA+ZyTYpjmN7vViWn+YG6/Rm2rigxZrQMCfeN5FhTnuEi2pIWmNzQ302P71Lc0F2PBQ70r/S7mgQ+PPTvSgPR2D2cxsJQBXmRNpgQsWxc+HzFdRV1AGSTBTyLoYcRB+awkdzCAOHfROrascp5JCgUPH7JHSRcpC6m2Z2FmQalzs7tRnOMdNj4kbOadbPGdiH4rOYaUmsGCpqd41dsxyxhEkVrGunl6LtcnUKFgDQilUQS2PxvCvRN3rtuCdN2Cu3hACnyhWQFlIPFc6ertxt7pidutOjIDKVOjy9EZh8W614cJf4+7tc/gHVUoC1HBTaLOKb6H81m+mT1b/a5EaJDx4KVAZUakVKcC8H5FdMgS1CGUVZtUa65ZD2NeQinLXZ7d6pdXlrgR2mfWXIQrrlvR3//RtDMtG3VGUZC+pcgiG08QGenkFRBgXWYGyimrSGfVmOqxeFfk/YhVE4Haey7HMSk96k4Nwt2hw0k+N0raUFK13sAAERS+oojAgOEViUsHRmXRtrtzp0MCLP4c0Ch7DrE1hdrOXRHu8257w06scTXz05EcUbo2kbss0e8BTvFkVtjtI0vTZGXhD4zmGYLKtrI0Ptr0hcggQX1KVBF0ajy4VLKapJw/t48963W642BKJET6pSTxUG3tRRjgy22CRXfmaYgy7BHGNmhEvQx1Ar7IVrCKrJxh0I+H4589acN110GQkXVWQ9qE/E/nbm9Mar16TV/cJCneXF/ZzGuLw06o3xrzjJqhUhIFvxLdvXONbKVhSL8jqqjH6maO2bbTqK/mlrhEVELQM05oG8/KGaczWz650NsfOfMWcEcGZoKH/OaLBp8MD2pkBs+fuQRHtQTELNrj1m4UNI3XQkprvsIiR58gdCvGnjRZpyCNWCpVYdW8ptxqdz+JGXKLbiAixncon4NA48tRzbtmlcotNJoSNfQAYYogJNnIgnE0zrtCkqXLvA3Dw5WaXKPzdlduNabi6FYtc0MmJG+O/kli3XbxJAzvIhrGhTS0BKWnLaxZxkv4asDfaQL9UHktMjoXLaePflwEzSfupwVvx4Jqdf5GEg3yxe+cJaYgHKOOQKljndlB+65GV6ob6M3r7AWiPdPGj7KmX9CTr45eZVFxvtvGC8QHRugRlZxnW+8xTkm27PLV6kjV+8+OZNtzmV8X+epdTVSBIcmsr+SA8ecFHduOmfMKWEHrd68fPnHL+9xXqb4gvR6v8zZ4z9+PRor6vm5i1/d8OD9k5Xji1l5/NnP07hcYte3DQXw+wwH4k26lu1tZiHrU2GuftbXfBKw2KkfVrjtIk2XXMdnlbSKTTe8lgQLItb0lGEx22oK2eawIExClm4b3jqDq9wppwpM3eKDXilh5XfUxphXV9SWKhMyGSLalIvZURNhShPEbQ9yBe1ZVlQXoP8kSpgLMrgSonNy2aR268B+e3Ftvb3ZuN0O2NgQwTO6YKg+/Z41uGgEXhXGselAruGduTHrOGnaHS3G8J9+ASAy00nyNTLo4rT8bMH5SWWUGDB7ph9eN/eHuwOAkRjzba5eNOX8WWNilWOWQXndBMgQ3iJ/WA00EzT+rnlrdEeq9bZ2Vck/33GExh9fCY5WFfdtMexDLuwIybnv72nJk+1TY3jIu/yRDPBL0cO7sfcepmJbQlA99ZGTzU0/PYWyXDuEGFoYoAgYcXREWpu8Z7dSvyrCMSkmvxZWbEgSRA6yS3ogDze4FzsPL9EJp9XuW/FoQq3jti49gOdAq/OV7t3WbhzBVasTzpX2ilxjWXYxG7e/baf79V5tD1qIq05oeJczfZKO9eiuecclvLPMU3nSvXnVdhzS2SysCw75M65h287v3M3MlI31oVtks2W+iS6cW4b5uZdQ/Tho+1xcSW9KY/govbbvKWuUOv5lzbyCVlyeWaWMqb2TyWQg3dfjy8Q1N3AT9K6zzG+MsEt9cArK5fNcu7ZgisLLxCGUrUKRI29Njq0t2+0fVkbF0yTLf8sJWj82f9mJG8mcvTag+HS3T41NNYRG4EL4pVVzgqy3y006iuGOeqj7vWWwLLv2dtxq/p0Dik2hobUlSde32yAVagt0sbPbg8YRa9yP3kwPFNNcQ84ZOBU8jNt5MqGEdXwLCxelGL4GG+0OWOoeWSU5xkIAKw8+G5G//Zot6u/71LvJei7vru9d6HfDl3uvQy98eTQpUPUQ3cP0Q9dPgRmzRuoEnADA+Wjthz+pNuxghscPa7X3xgI41dujqyBVh8fDcnsErVu5MRrhl+zNYxXtekfjMCGn1+++fUzevOnPAvxh+EOrATv6KY/qASpIf7x2XO5Ad//XNx/x9bf1HBy+Z96aOnoAjHuwlFTkWN52UKVILouRSYN2+AY6Y0w37ue1Zrrl5e2oYeZacgca/NGGA7Wy7gHq3cqIVzGWJSuepJLIbyqYNRmpYz6/ZQy7Hl69KVisSjTN6G0oLChO8K6tCffNsyDNxR0lrHDmXLhBmN4WliqsoinjQIJyo20JGpmNeYhquVykA+5I7atVJVTJCESr5ttfG5k0kvyuV1BzHeIw4DHH0VDP0obKSneZ/Z2cdD3zS7TUu3Ah1iTmhn3tj0ZHlvELItOX9WhIgmThMlp8yLDI8Lr1BbyUFlt9bObUqt1w9eesjB/1ktHngSbFzY+1/M2d8pmht9jQn+fTIPVxDf+59zo9gv/RqAJKi76v8mnedths+MKxamL+ay4OPIS8w6ExRDa4OIB2vAZDDmdEh/s/D72MLPfTitc+QvP7TUM+sPRPdOjZ2cpo0qocnVB5zSkqI6i7tyOgjqpjqIiHX881HhvPuCkOnjQ5iI3B9yCW7aIHF++T5RyTWzScvbEyFhs7Oj4oEHkSYlxD61lafd+/cAAnk9OzP5FA0ansO1Y0m7KVQa0Zd5TwyeldkoslvnyQ8kTBW5adKth9tjviItbLBK+CbQZD5rA+MzuBU5OGYo8YWxvT60kU9E1v9NpMHNhUFC3YS07RxLS1rtEkq1YUFjov7/6wxzkHSjqP9q8I2rwTIp5uL51uyc/HeQs276OYV5WNXgmYEdX3/EAlksF0pUpfzh5zybMsFch3QMdRUUdAx2EcQu7PDc3PjExNjX5YqSDbJ14bdJoKNH5U7dUPELfCqNuGsYHT+miTu18eoPNgOnPnm+nEOByR3tTpKp9YCPONI/36dnfs7Doec9w488GJ5/NDkxOTP2dGptNEAedfTb6+OGX1yPdTR0qVcfAIEjTPH9+mEl4eLWjqUmlaiq683Le2OTkTVJ8dqLj2aQ5O+dGhnIicfWr719/GdnY3qxeQw/If7vL3eXmnXjgW3uZ7TC5Y2QUwIPnhSVbs0eWEsBYBPedBlfIpA1LWppliqa+pqbKaVr0NhVEoFELmOxDFLnYF+Dwd9iCEvCLXb7rGr6CYhUfdRk1jLaEHfTwz1GFllhOWvCht2TdxPrQUq64GZrWWq0niArsU6u1bofUFoinWh/w96iL/SDI7hedFJohUWkp6k8R2EFZgr6MRgmF345GjULp+rhhVQ2bPe6gb1ZOn26l/A09RZkyb505faLKdL7spaPtQCSsmZnz6NAPNfXPvY9yqqofXL7KjrO8K+o/8F4Ch4gF27wDmk/WnjYFeUW7UbbjX0upnWvP898dpq+9/mLg2uJEO8niHmfnnsXDJI151/jDCEMd4oesmoPSVSsdIpa+yGK92OKyK1eZDGY3GHzRlfzvY5f5Gzf6+W3cBSt88yRFfREB1AuIM6dbKc7sRGn9fHrf8i1vbG+7svrK2c4zV6rRO+yDzBHuVsQPwm5sjfiiwdff/SQv0V7SE+kJf8IeRoIw44ekT6GffF6jks6vWwkfb3nSaESd1dQKxSXVrcVzAax6BYwcOcsQHCmQU5wRL5H/NhvafHzOwit5p2fnn5rSzm90jOM3tfnuNvhuS9g3I2R+i+8OqzrGJnKCcP1GaEr8N85li9OXXoJUZmxxhZjew4GsZoOVO8LKH25dFW7temXHxjN52U6yAawJwY5bYvYzrmmj+ynMJ6hZu6G83CQ5WdOutU5qLscmJkrr1lFhSreDH3FytHtKe51JUe+TWwTEFCdDVnM6LHrQLt5KuAhKB4c1jn2eGJq+O+9grFql/tk4O3Crm8+d/e/Af/8wvj6dlF3B+tdsu+zsdthCv5WzYPakQO2kHPuQ6prQkJqaEPtZyUBufMam/LM4SX4otTq7PSHs1+x1Px0iniC/7jkm5/RLXvFHsw/Mu63zg28mZRs/04HMt9vCTpeA0k7IJO22S5csJIOvR6077xQTL4tR528onG8uulOY8WN3iKHdWZVsRiiW5IT2x0mDkRl1rnu8kG5y2I+dlrEhxCtZPqvMZeOsoIQenzhT1E747oOSNveG0N/WZw8XZ64v9TvkRmSaSUmbu9eLRe3E+MwZ8HA7D+14U+QTTX91cY3vj1y5cfrZvsOJRQV580S5udMx7x9K+UD+77u/H5CG7uhmyxUJzglNzskTnbNrncFbomusv0nj2Ekr3B3ZypmxMoX0momZDDvo0pTGeThGzjaPsabElEtNojIwI7tqKriYZDZvkNrN4VSXyB0f5hmsZneYaGSzgnT3sIFkndpazX0E4oqmdt7uwkDOst3RHj2bHdQ9pa++/eqGnbjM2F+3sj1QXqzEvrfPxHMjWxmTsdS4aDZWBvHx2y/rTsK+qs5X++R5YD0wGsJDtbWh56bNIUOhPNk2FDeNqf+p9hyDrjvP8NHlufKTkwR53rzeavsysvFsq7w8B7P+LMiHWVSEybWK8rydLhkeUBM84aQ4ZRSQBEiG0AsaAyXFwf6EkEy2Zy+URckoKWX5rBmAExixQERKKYlRYgiVyjcuskUpBeumlZKbWLs8UPJBbwxjn6PzBpwEsVzWK1s6o2RycWiiPQCIkydiLFSTcpfcYXnfrc9DzHO4DWzAS5UMadm4RT2ezZEe0YCi1+ElslT52K3tHEW75f1M/U8Zy5IZuw0aJ2Kt1nfHTa+FGTXxF1cwzb+dHlmqpQYgBZDjJ+gY7x999qiceSjFur03XWKPEOz5Wo3YOxMJ57Mpu5XKwGs+8YXWuevnnrBe2CBPLMLqJk6Kk1AzzJa1Qdfo1uMT7cZBtaZkr3Dtly7vjEBEM4zV1cSA3utOLwOnvCofAMAp5P+x7T9qX5+xDqXiMy9PjZRfL0LlXPEyvuRYnuc2wrVgjnPyh0C4y7zi48nubq3fQHdXnAI6oZbrsn8zTRhYq6xbxc0Qza7E3NZzLdH7WsqalkT6lPcvHYc7U5RQd++bmUF7xHRXGcLkyZzzyiqt8bbtKQpn+dyx9UH1p3nzF0OLuKTHFTRvY2zZelD4RGLPx0FxQ6LIzI/nxn8MmlJMrXKZS2bGyK0yGDtMOXJLIJX91MW3uEZIrkx7+8VCyqEpMtIScQYA1poi1wEAZGvPyshG8M+3d9SUZ1KxOrnlBoHIKREHfeJV9jXUu1pbCzFPlCTJ5FEjr90YAYOzHRC2hSaIZG9kjwCfXQkIVhA/uw9cAy48nYNeWa/4zPLs0dMvDgeu5zWYl85d0zu/DTQQuKx9C37rnJMDChevu6of3PxT7cNm70qMOEzNVa+WPBjBRswSu2vSyM5Hdm+1Nyk0Gv46F2AhcNwPXKtJ0K9Dr+IBZDgAByOAEN+02YXW0fwVGsJIn/lrxh0eQt6Z6PMqWhK5oWgpwBY3ZeG7rlHQ86CUm9G4OF4QNSOw9FrMqqyQh2r3POdKkW5+bwpG/uUDPJc134e6/1p+XxpvnO4lCNa5gJctssCCc4oPBGChYXsNqai536XuqOqxcDzHc8C38mZpCwf6FEiDql7zg/v/uTrD38kDgkPvnB22VB++dffecN25c7uO5fD7qkQCoRJsRGkd1u/D7EGR6sU1nJ3bk7CpG1SiZBMC51QBcIvwcZY+H5+Aubg08WHwCbJoVdNOe53JAW1upAwiimAJd1JzSpl6DtWC2ooaXR0wdRojDzqAKeo3b14/MjZrNoR1fdX/5ynOcrzs+ITzACHU7zbgeoFDnx7+/7unNIj62Anwy/PB57fsUxUwx8AbkxA8AEDP8152IxsgBDjK8xHG5Fl0wv3nNyG8hQ6FhRWAGXttJmZpnFzKy+6a0hf3dQULENA9tGY3fCrt7QubT9ptwslWUIn3WcdYk+7wFTJOStulGulpS3HN9+xIlPIk6RjpFBEON3uT5ySnjMhHFJ4Hx5LmJKUoPhjchZv6iNH3PPYrr/F1xXW5J7jCwk6S9P64SjsajGsDf6v8LvMvx/rx8OBgVOyy1wXC/W/Exl67KhJefeLqbn5D6BcRJYoWjs0UcTaiQmgHZBN2WMMbbiuMFAYyBHb6E1ZieHdMhAVJtMPgYTH2oQQPYXktY/6raiwhDJXkC10FFop4keUrtjSpssV1Efo/YiHsAQCg1+hZjS0l0GoPofiQudWLO4XI9PVT+tXG84WXUcjLqJI1asZW458/ImDBqKe2MRoVHSx6jZGOpiJiI8BzfvlcZCOCuEhSQpGLKQmJAOCAUrGtf3kpkgjmZ92YNEWVpQoPMfRGi7dHUbCEIWN4vokU7RRJFvQ3irHS3r51602FFQW+PU1UD2E7AlUkwfH/w8zrLWGiRWT3olfQpIH7QGDFfRDyN1MNaADMatM8ONWtY0QIBAlK3UJjCWklsM6LMIG93Q6kBAEVqlCMIQUrzBANcMEkEazQ+AjSpyGEEMJZ3ZrXKNSd1OIVQmakh641caewdS+gYMhStQLIw1WqMIDlKovlAMJUqnA5rAhN2dC0xuDOocmMuaqCDwk+vdiBaI5D3EyEYtgWrhV2jXl/jUxA2KgxdV/CFwpfKBs+t4z4SIatNgOoNkmlq8I1fxcPToIAmFv5NuScAdCcjxM+2KhPAMK4/SYSVsJWPrSUbs2mefNCL4ha93mJR4WD9ErLo+jJqKNAcgJ6O4PGonENuNo5vhRZ1vLohaZWioUcD8vIGFkKi1IXARaaj1XRtbyZpcU2ee8UBBNnWslBHKqEjHYw9/ObuE4uIOR3DmtqL6KDAgIPTB44YQryE1f1o1EAgO/R0kDBWLl2p0tvjRF8kQoAnH12YGrX+14q9l9q+kWWZzlzq3oYDWhPNI53EDqZaxbXGLXn+nEVn0YYr3Cguv0Ndv+mB7xfay3uQ2m+YDVWDVeppnVQVJcJIODMLOfi2G2WtEtp3qkmCAvAIt95BHy5zauAbNxf4ZHYFbHWvmLW08m/JGHWF1jQF3HjXYErg67/nKm6WOFuLTwpbKDX6Ma7iChl0BRbwEpOq9kng8z0GK+czuutQYOaCNQoqIo32WCFjLonGygLiaIa6bwZsU5xhsZGZlxM7NgMSxzZiE/ChWRQfnpHRDtDjrTzRN6WxxRtQiQLiaBKwmvtuuzsX5sy7dXaMe92qfDFsC4qz6Q8fuXeoPK8OW8aqTyUd045+MX9AaV39HdwWNetwncNPXB3n3S+ld4BlmuGctzdvxwCpyb5V4aozDTc4os8TxDlV2kBhxabDb2czOwPdk4O/VpESZ6njBo5OremtdGsKRGr0+Fr1sIu8aRCH6qZva9eEi3IabYTFBH77o3Jwlzml5Fjg6EEQvCm9Vvwt1WRG9wleetw1Edye2td8MFQ7AfvTI/ez6mNUr1emj+0TnT1Wmrc/jdEos272uuZkvnucJk1R7uNicqPkBVJsoGykCKqtfo+CIIcWndnVq778jz4w01ucvyxyI3w6QOU2YbL/wcP7j349ZijQJitrxIWqzkquiqc6XnlPyhNfHz69FhVYOK8VVxrtqMj0tsgmD7tiqOfzbtgPkv28qzDY3Qq34RD5SAxJ3t4voNNk7bPZm3yzWOisj4WXJVE+cv+FmrdtRmPgfo73zXhMIoUAwJMIJImMWM2zcP3xe42qa5DIAh49E+yvLDJ/50h55k8/wENAEL3/RwhvVDb7nijXyqB2SL/7SuIrn5qC24diA/d4/HIhitqHiN040WWloePuMyP4ofU1f2dkfVeZA8tTcoch0ts7u53Lujmpen4hZTCtMBd+wWChsX/7c2z3x5uwgSuwNPg/e0fgI9ABADAN3vH8HhEGDEgCPym5+A5LJRjgUWIQwgDAAIti9QIq2HryL0IjAAeJUDA+3lCqnvog3EGw9Ldsx6rWXGxf9l9+hLjv4qKGlhQaCg5te5plG/rhtRGfnPkHqzDaRfz898KdR5OMV+vNmKMAAghFPZqGp1BIEIBJgLbecBC27JYGEMgjBGgH/ecZZMJpGT9FpiXIHhEBKmRGmEWcToMAABoQT3AiKwKlrN9yZ+F7MUTV3/TIBghAMSzLIlZrQIRAAgS9zeU+J1D3k7SfigiIjAo1T/uADxwVs1VDAkQIIyM87y8HAgRGLfOQywCQN597TtGdHP0VvPVbhym8dynC9VIFNRZAdQAgBYoaltd23k9HW8L4MZOtRfNaYJIAEAIIVNETbyRVY0wwg7NQPEAJyKIFvUF8MIvmq6q32cAAAJQ7i85auNDcYj5Dd0mXoURArUriJlryMZKpIwlCAqxDnJH+ruDEKxxYOxTlD5oBggBIMAIEEIK6Bnq09b4DVPpWqSr92/fCh8Hh8Xyb0DQK+9zofy9s2N5F/92Go03gU2a3kdT8S/xY8JB/y8kzVIHgiAsIpwKCIb9YYLziLAEgwtWqNUVHEGJ0J6JBxohCBExdt0/gFpgoWdQILqPXqUdMki2Ua9taOEpAC6dN1qr9YmlGO0LzaPC62iI6rmDWwYEs1UgvoZBGx9Q802Pp2It/AJ4+Ecx8cgxWm+amNOxPDuDEl1Hg0d17t5ufzqykS3n1LvXcbMDzUwAKI1NEUJ/ukpwsP7beKrpVaY5IyKFyh7ffXfer+2c4yefT8ZD7o4/Fbuq+6gKeVBZ8CvusejevWIrKXTEuBbEDGylyv2IYvymoIR2/vNrUvTHp0Kj4ZST5bN5w9ctInGnrhXmo5lJrnENbw2InSzTUUemhaD3Quv5z6/6AX4AQD8MYHtdAGOY+i4UPmlqdX512ZYrRlPWVjmuM0SYz+/f+wFhKhDJBXvv6tzM/If+28XTNwhFi1r10SjR8B59g0i4qLVUghbWtoKICy1kao7lTsb8CcXBw1S3HubFcJGsIegtY8CRcbULm/oHe9cPukDalyAIWN0xfW2ZnXLWJcB0+pm/9cc+qSvMna719j9lK3jktTUIm82XWht5nBiRBCXV+YR0v9SWdJVSuEG6f9kOkw1zj5huXL7D9IbMYmP02HrTi+5XW3FZly3bWf6asfOw8zL+CJoa2I/lXi1DV1BeJo89xtKBEQ1L80R1klJ/rzwX33KI29rv+1Y5j2Pd139aNrh0c4eX8xGlILdy0ZHULG3eFVefIU7lf0A9OjZXFkJ8JSvcBzbhsOKBlduECKsZ0aIZ7ddvD/FEUZa9O1494+2qSjKkpiZL3OOp1A14skQ943ZSb80EV3EwBi89OzDgWzVJyvv8xD9IH1xYFMkNCvRVyOQUcsbod1nNLPMkUHFx1WlX6tba+CQt9WqBrk9a67UWuiOp2auZcrbUg+gMUY6e8mptnbS0NBrDwu61tnphdBxdPySZbW5+3wFxEVQE1YFGYfQq74JXwyjlD56RKDcpX59PcCkTWCAxWvxJbAfZBC4kOHSP8sb0fKnXb12a0gn6rx93IU4InAwsIRpC50r+E1kkN1C7oLD1Du8bNw96OD0YP5tHnQ4AaQCw9ltxgkvCmytpmVYtqu+xQ+i11Ivn9GocLKeenGf/HMeXHVnzpAhLKD/1rvn585ci90jiBP9ICMFHaBS1XZBGTWeWzFmSfmJA+q2vf6x/RxgdtaKtVrEVY+vbbIbQirBOrLWILRhb3vbhouKMDzz91RGHbJqPxFBkzPoU6S66TTBV0EYLhnfyGDHeCkntMNtkPJamQ0xmeipFTaXNxg+tJs40+qgH9QSWWpfTfVRECJaaNNX7tPP1+dfP7WZpuhaoUYIhLdY30+qs2iXsYRA3zlcX9/U3xGD50gPjWXPEMfO8RV2gtS22wYzPCqPssho/eiY2jvHRTicvm8hTcFkBx42pOxtYRO5Le148V7j0XGB90FmnJQQeK1BwlTxHNp+vMs4YTl2/EZwYZce6OH5cgzU3s03x9dMmc2iF96ITCTS8V0ODXcxrjFnjy8IlFXlGjPEv/X+27RSkP+r9HfHbV9qypKXT7vIV3FVk1/Ks5U+09cWug3Yt4s7JhisXrzsGAPQinVtDS+qMR0dNXWmu5RpNIXWlc58GrzOeyHzA+F/AR78iC1ptfGkcAQtCrpoSD1SkUilkhLOocFIInv1LA5E0hrhwUiyEBUCJSQAEBxSSt+Y25SGIYK7w4zETkwyrZwsj6DLT3crEqUiG57Q+UvSaUNjd3xOAEfWu6a/HSkYUMLqb/k9AtQOKjSA5+aCofXGAghZ9kVI/ByVUcxofSfo4gp4k9RzLAZg443wjqltLCqfpBKWumxZTOoy1XsAEplu0jHCBIIjjK0h6hRnCsVwQSQYpuAqCqNCYBRPMzG71GwTy+5SiHKQw26/QGrlT6LoXkDC+lPj/1dFbRFflJ6Nj/xMpDSMKidgPx24RvzXETcfntpuXvliGOHpxH+5wY7xWRdL4SOD8WedXrwWhHnFxyXmuO69cXLwNIc8TDC3RabhJrNmYb0/2sEcNwCHHoGYwwEjA/F5QVVmPEX9lBGT6UVQSXagCHQfhMwHect3HAcB45uasCRD6+WHY6DBduK5u6cWrUqPljJiwkJ8T03B0wqLiZXi0WCJXEuCc8Kgckgh8c0VitEKoTVic/z8qh0IkTnIaS8TDCCVcsTEq8GSnpKaCloX8fABIvmZqURFohtuaiW9tr15x43x+gSYkq/sD7YW7rpyvr9ga1ZP1kERuEZAusstfvMKC1eNXZKgsxUNR9+v5bIIKURBNtGjZw4GsO5+iElzHU3cFYwunlxtwjJSmTNkVsVAaExQWzxxTcMec2KncsZq//fy6oSO38f7LmkpNpFOWTA3ESjL6yxukskVTmwZfz6aCduNm5BU1dvcGD6ynhul266HS5eUdNW32tI0o3vbzhzsOYCvfRW4I+e/53xBycNmDiTeU/nWmW97ri6h8aes7sPzOyz39a9SXECFMmV/7FoX6Qaudj/wMcbwy0jurX5tq9p4Hv0qpPVehN90iHHU5BvkQrqey7BPyleURAiEifAu9otewj38D7mMqFVUyJXfUdAa3zFR+QlZyqOT7MSibywGK19eBIXxdGU2pKe7+DIXVxdB2hCkvShNDTYbIYocNNzK56TPEK5bb7AhTJrETko/Pm/5/W1Q4X2UVIlgwo5KWRJBjNP82p2QhBROaAXWjJCgeuuBz3JSSwe7BewlSk9F8J0yf7D7JMBeXV70rpoZ4T3BTAMPOzKjXQQ8IoAtl1u8LhdLyQQ2oCxBCOngjU7cTFMjMDIRU8gD6kmYMsNDpBS8zcyzEoc7g+UhqkQnONyBEDZCZj7FAmfU6gciHLM4a2Y1fhWHjGYxIrEg1HGYWC0afhsObT9JQpj/axCTrpfJsh5VwKuiHVCWhC+7z9IVHHscJs67AudQOiE8SwZmrZlZYFCIqtRNFrRah/0tyT/qCRPF4KITiIPcCoiktUloilqYjZAJmrVMgAJAzv+5dE9yefTv/+RIw7I/BA5Ugqv4M8jJ3oGfxg9YZ8WxE1PwhSS5soGYUeRjhyFmhOwuyV0jP8lK+GSLnwsNvFPLTIZgNpowC+Y9kyg8ARgULtVdR/nh4FfxAwaJ3NvQ9uJP8I64xmEzXWLU1IxbmKSkq5lJt/qt7bu2gBTIlUJ3EX5U99XdFNRJDlkzlUKeKJTExkrdDqJ63hTFZsgSR0KQrzUScZQAqpEskDU9AGLeTXTCb6R0AOfR+Ufdb7tk7DYqci4No+nzShKXHzF7EUw0h8r9QQxDSVGmCS9Li/Sf8Ha4TlccroRoADbbPt0FtbOTnCChR2rHA5n6zl97+CsEF8nCBet3+Xr5lWOJB7yFziOoLdXfBZgDwH6/20YeVLxN9J4bMsDXbTZ+u79dUKk/j4URbCYQFTvPWrv7pw3yCtxRRFT6vhbuaAgBqmb1mPgElHnF38PvegEXt07X8VAs14s+GGBQKWqzqNax6a/wMegyQOW0BIby75qItYOnhBX1WCIv4Kh6vYDkLiwC5PkjhX1RB1ayngxipyyLfTZSaOe19/dCuVBuXr042uDpcBDpnepAXXZZ+PvgqpnGqU3+ogTWqN2eoeVhace9aKB8U9oRl1vyzjIg+QBgBIKLDlHJRAwGEQYGaNLLPt3m0UnSAsS6YAs6etMFW1uW+B4L2Sq6KruMLZP+vXhqWDm82E0GcK+6XkexDXOYI4QFWEVxPwYIJXfMoOAe3M6oTtTVvpeB6Z9pd/7PESNQyGeOgQqjzkP4yaftQ1BIJQpEpCEuorCzBWRKQsjOTE206bBKj7MpvQsgFcS4XG8c2oWAap9gMvd8k+Pd3YNacvA+ghIiBcnHtSZVV5IDtIRdg8URzIGMeqhIevfQLzw/vApURPtUAIpHV9s8/1wo4M5/Kycs9b8M1A9Cm11ArVxz9UWINIIz42JDuCYkALvLZ5QSEYjdwNQ66oI8Ey0DPGv5XCBddli8h6guA4P+UI5zge3x6o0xNZlc3u83NGRHDDvOH5nW6TI+I+6I8NzgxTixuiCcRpaevjZNclJ88nRwnAiguPlYsB6cEXlL833HRutnDJVEBY58aqamuqG82m0Wh/y23NGAGgwAT6ZrvT40DWjm73ZYUOWD7aDl9vY9jP919iNH2xKxfLl/TuO+YRQ+jDXqhcpndS12ZVQARMIUtBWJi4PCMrXZP4XvmoqNDfA3tZ+LbX/Xc1+/CXwmpG74UgB4AMJunmn1gX7oyoIqcwz3VmyWRCEI+P54XEhLqKfHytOwT2OTwdfQJ2hb6OL2OnhAFIN73bk1k9Mqo1Gv6y5eTI+/cXc5z+PxYnYR0MPbB6eGydVfyTFQ1WU99M+o8uQ5eGfTMnqSwY4fsH3EklkLxKDeyZ1IKqfvZk3qFx2c01OAaafi63nKlJ+fFCkXfAnxR93aRgm/6ti3Gj1CaVcOzNb4dGxsnufTgMbuNXfBx9IdoTr/Wt+NL/6NDnyy865pO1M6t/9anrq62zDZrD7+fon79ZUvcRwuQvhaqZjtLJRVdoYuKKKWJfG3V+dtJkZcvGyYoC2qE5YqGAxLXPYrHMEhzhXHR3bUlKdI0qaeFM00xht/oAvNXZur8HJ29YfS+B+gYd/a1jyZ/RESaCdQEfMXl//s4SNeSunqFJo4IDc+L97qOtba8HszZffL+woPrY+VrF/A7umMzugbHBk/tkpz6NIV1lKjJKz5zfTRK8/u/P1cSVQ0Ll9TF8U8evQNBzYkN0+C40Dnf9Mn4/2jazaVHVyyJ5nSuua1O8YU8Yia9uiIqMbU2WN8rcqVYq57fi9GQIpYuDbO9L135Sox07aq00o57/rpgae3+KtveovoP7AvnfZqREYOc4Inl+si+M4eIujf0LdVxCmoXlbLbNP2F3LUbyfmX6cX6l0VhwQI9WqfcmM9pWHd97zFmiuY2CVvjie6R9Zrq6uMVh/ZVRifQzjBNRwWy/7JdjUR4uEXjM96J0O4qQoy5NBLj+QrAWb5F4ezqZ05MjqRkggnbsuUqnCdXxG1btrXxp3CZS6OxtmpxaWqEzOCEyrOcCDwenCq7eM1wuJSipIKYa9WLiin8sx+iFUFD5WUiW9uMnp5hed8cwv8nBseJxGuDgyMk4uX1i40S9+O1b4VIapDpYnUb6pAQHp6szj9gBZtx08kNH5qPWmpFV0T6+QiBt0X/ds5RHs8irC31PQIciGuz2XncM2vCMlnIp5PjYURi2bXJuyTi4sChHUt+HklTBuYViH1wQ5ffj5bY6CblePmv3rBmA9tr0kQbXZ3k8qVpXIG5tuAkDtjI2RWn97i2KKdTCnXgYalry8HTWA7SIOqsn7jIZzJlWXJ4SfAM0gK2u6VS0C+4EMqz08rNeR2tpFSzz6Y3NlDcniW5jA0gkLqK3R4j6WZENIwfY0Wp1vuV5S6ccTuZunD69w8i/7TQmnCQb9wYsYjm3upjZqVqGT8ZXx3MS81/bAmdHiYRFPGbHZd10Du0FutrVBHOF5d6LeHYLrn4J56vqllsru9Pb+pgdsBK4uiBJhj9e5hKUJKqEvvTmJN9A1hRqC1uYSqzjWxg6VxssTtH5anxzY8QINcFM/Bnbd8XGGZzcMECJw/Y86ef5GCHsOavTO2YQCGDKijCYHcCxyIHn7tkDsSxMw2iRscAwUaD2dClytvJ0xqBBoLRfH4lBCOQyCViuYQYbg148rtYHM7xDyi3icVffg8I+P2JWMwJD/C3lYvFX58EvGbld3QL6OQkAb2zPZ/Fam/voQVJybRgsCNflrAFMkHgVcJCK/062DySbLToqtliBXQ+lQNvAukizaRLCXKN33akYOPHUOfL1q+BlwkECa2rV5de5sLLRa0Dgn5BNdPftD4s30dWZwwmqsjEyZ2s6Yb4r8oXTyeeEItGxOOJkhMnXi8mS9BECcBrK7E5mHFcSVR5YOisn07PtuhrLT76uj5VrfPzsc6rM6vNsev0jMf7rG69f+hR+Wezo1tEQGJNtV+oEQmNeqdi7/23z20Pf5lZNW1BpbS2lqf2+Wx7enTohAS/6MROjW1DapfHP1xo6XwcfsSL+izCKuExfmC17gi3/gRBRmM8Nm7QBU+LrX5ZAhJJ2aU/8XFS3PCRbBZ98zrk1/abuz8/8dd8LXaoyhyO78hQakVaZeZ4EChPCUNLXW7Wjb2/v+HXFMI+Q+0HAOmwuVemNQHc9uJroHmXVfdJXP/QhB2xHKk/2N49zGNxo1pdlvHKyFQAL/2IGGSak/sMWeWni+jYV1t/NxvcXtY3RJt+dancbt74HNvMKKrQmfoGDcL12hOIaGUMLyEKfzllQ9DIQpp4goaTPFrIZOtZ0aUlAP/3u3P0+2tjjN09LupP9YQJLLWIujX44xFKa4pylsyXoQ++AbsFGBz8MWH9mV4FIjkn2mZ1CN/99qzz2S+Ja0Ce6WyaY3TVNX9hFNNLbZmQDRQRSMV0BCl065fUMWJqtOojbEVRwtZMwScVFV7OZHL1Y4PFiLzU58nMV3qz6Ydh864OHCZIZR6ZuyLr1nOQ9sl3kciw/tNJE6GOIXXef5a+xyOZZItjnZXVRi8i1IypQLZihVTaQRcXV5rKGyZkvWv31kS92LBulYXFK+saLlJT5IbfujZac3SMCPvAIMcasvaIjV0D9VO2wQF4XFdl1yiXbKs5gfqQazEnwytMSCwXZmQ6wkd/nVi9bQmx5jF4dQdQSYPbVS/IFJeFpG+NuR2uC0lUPaBA7It3Pg+pAMUJ7sUvR2SQ91l19ly4yB7w5CXymnBUui57hC7DpQv17qJeFawweNYR4BgHgt4j4qqpKa4mxwbXrC6d6pEI4sdM9IOL7X4XbiLXh721S36ttVkQH8pzJdWytLOPklKpcwxDSMyLVJdJYZZmPaU6H3sTjsl03BjGseVC7rp9sHId0Q4MENM/9CzYlsSzewQl92WsYEOhTYWS941y0hKop+siEt3cGr3tT6mxm/5jICIvP9nb8QcdluWovMHBvsog2+4LDgHpxO6bPrIinxePyOgFX54NOEdaQFTXLAiqm+Ib1JeYs2sJgujkn1J5oQMnebyUeOh8hw1/ISsWvBACQAgLJsInBj12cQ0t7Sy0yt7bFAOd/62wzNgt6Sk0hvkgdHmQsZLpv1f++1tCLVm4pnhmBo938hiPBwi9aj8E4sPC4hEcUFkeAGg8EdD+sGzVUW0HIAPPFpajYhA0ChJ4ijx5ZOfzE0TeiRB+fhIR8s8/eInHbTE+dOhYX51T1Kjdt/GgIap6VndrahBYV09OdvEofc1NKb7NLQ+MjSvz/J7cQB+ukLojzu2AxZM6paD/ckz1f8Lsa2pOYbc0X0KA1As0fcC2xqaG+6V+QWxiC7+KUeNe43bgjF29XZ33clb16PDE8H98y6PLoyCz3MaKARk5XzI3Bm+jgoTj6JrTZ4jzJeJHfquCsdzgzKWeyGJvCzLfuDxMVmk6rWT/lmEQfGeBwBu6j/1XtwoXowRjAZYL0kfQ2AYOsOOFDuDANqK4Nl2JWFiErmqBFRIOcDph/eB0QZzYUZvCQ/re9rLACPR2wk3IQmSsKA+1d6XS3IncSPFBPjSFWM9dj9yCJkCKMwVMQLvt12nbYCn9Ex4djj2c4nNXbHe7Hia6/fMbnuwSNFTx7yEJHU0uSsK9ztEwxTSo7Nmzn9bWzx5Or7Z09t0qKqJSu7rfG1xAiHZthxmuuiadaSL4XL33mJlpW1uGE0Z4RwMyNZofL10y4Sa4SW3vXX5Ho3358BKWG+8msb/34AFcW66wsysvCwmRy/PK3vfs7YvLw0O3v8nPByO3nlNJ59sMVJbpkkPTBpPlixmS4mZDL62x7RqVCnOGMH022dz4Nzw5CxB9T6BAWliimS9M8V9sZjX7txRAH38NJ4BfIkNkZv6e2JGHqNldlLhjCU+z2OLnHOfCbGPAn9kkYkOZ2fuNJDV+e8YoMhtDqf+cDXLED/imcpJPs0HwkymO0MvWEhMFfLEV8dEFrOcJX9SPU8A3jqgZobZzzJ89CeApX8XTU6quighfDpEHfzgi/ouf+Pxy1U6U+sh/LFfLKFxVsk0OGZzF7/jOXrVeMMOqUruTBT+dMRrG5S5vmFajtpXIRxabg5Z4TQuuJiKES68xkdykAD6Z9LbQ8VG0Xbshiugz40yoGl/NTAgPxxxP3r5aSHxpZANq0Kvjp4gXsy+i1DnXBAf+5UuU6STbzRZLwmZrwYsovZe4mjhV4l9bffSDp1WqiZgYvvGST7GT7g2qv8qP7bJeIM/5gxGTMDv9fusRV/Ho79HZ8ZTycJ4CA/gtsW3otuorKvIiVtFVns6Kx0nobbEiC21ZyAz9fRWde37iHWGH7ovUbbz84/fu0F879nW8BcHsp2IBPby3iVjToxU3XzyPNySDumcqMpDfxe+OEdJ6gC70w8REyOjNMjsogz2fU9AuBI01KIDOtSBSsRxBQqzvdSgQQ4SgIVZTEEE4bHywGZFCoRh58DoYZDBNEBRzCxJiy16HghAwCBpijZUisMLJlpR01o9vXa8ItEAztEESjHPXToYXoOtHvC/3TjZCNQSg80hPoPMxqwYTJIOx2IlC+63yh4APAvXH7BSYCGOgkwu/+EbVDwtvSrPg/4meAJ7cdDeoi0VgBf/EGJ840YLpJpg2qEIbotQCj5QvnoAZAAA=) format(\"woff2\");font-weight:400;font-style:normal;font-display:block}.dcg-calculator-api-container-v1_12 [class^=dcg-icon-],.dcg-calculator-api-container-v1_12 [class*=\" dcg-icon-\"]{font-family:dcg-icons-07-17-2025!important;speak:never;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.dcg-calculator-api-container-v1_12 .dcg-icon-90:before{content:\"\\e95a\"}.dcg-calculator-api-container-v1_12 .dcg-icon-info:before{content:\"\\e959\"}.dcg-calculator-api-container-v1_12 .dcg-icon-recover:before{content:\"\\e958\"}.dcg-calculator-api-container-v1_12 .dcg-icon-drag:before{content:\"\\e957\"}.dcg-calculator-api-container-v1_12 .dcg-icon-filter:before{content:\"\\e954\"}.dcg-calculator-api-container-v1_12 .dcg-icon-snapshot:before{content:\"\\e955\"}.dcg-calculator-api-container-v1_12 .dcg-icon-updating:before{content:\"\\e956\"}.dcg-calculator-api-container-v1_12 .dcg-icon-alt-text:before{content:\"\\e950\"}.dcg-calculator-api-container-v1_12 .dcg-icon-braille:before{content:\"\\e951\"}.dcg-calculator-api-container-v1_12 .dcg-icon-contrast:before{content:\"\\e952\"}.dcg-calculator-api-container-v1_12 .dcg-icon-speak:before{content:\"\\e953\"}.dcg-calculator-api-container-v1_12 .dcg-icon-account-settings:before{content:\"\\e94f\"}.dcg-calculator-api-container-v1_12 .dcg-icon-move-out:before{content:\"\\e94e\"}.dcg-calculator-api-container-v1_12 .dcg-icon-move-to-folder:before{content:\"\\e94d\"}.dcg-calculator-api-container-v1_12 .dcg-icon-inference-fill:before{content:\"\\e94b\"}.dcg-calculator-api-container-v1_12 .dcg-icon-inference:before{content:\"\\e94c\"}.dcg-calculator-api-container-v1_12 .dcg-icon-open-graph:before{content:\"\\e94a\"}.dcg-calculator-api-container-v1_12 .dcg-icon-group:before{content:\"\\e948\"}.dcg-calculator-api-container-v1_12 .dcg-icon-shield-lock:before{content:\"\\e949\"}.dcg-calculator-api-container-v1_12 .dcg-icon-link:before{content:\"\\e947\"}.dcg-calculator-api-container-v1_12 .dcg-icon-unlock:before{content:\"\\e946\"}.dcg-calculator-api-container-v1_12 .dcg-icon-add-2d:before{content:\"\\e942\"}.dcg-calculator-api-container-v1_12 .dcg-icon-add-3d:before{content:\"\\e943\"}.dcg-calculator-api-container-v1_12 .dcg-icon-add-folder:before{content:\"\\e944\"}.dcg-calculator-api-container-v1_12 .dcg-icon-add-geometry:before{content:\"\\e945\"}.dcg-calculator-api-container-v1_12 .dcg-icon-grid:before{content:\"\\e940\"}.dcg-calculator-api-container-v1_12 .dcg-icon-list:before{content:\"\\e941\"}.dcg-calculator-api-container-v1_12 .dcg-icon-point-closed:before{content:\"\\e932\"}.dcg-calculator-api-container-v1_12 .dcg-icon-point-open:before{content:\"\\e933\"}.dcg-calculator-api-container-v1_12 .dcg-icon-point-cross:before{content:\"\\e934\"}.dcg-calculator-api-container-v1_12 .dcg-icon-point-diamond:before{content:\"\\e935\"}.dcg-calculator-api-container-v1_12 .dcg-icon-point-star:before{content:\"\\e93c\"}.dcg-calculator-api-container-v1_12 .dcg-icon-point-plus:before{content:\"\\e93d\"}.dcg-calculator-api-container-v1_12 .dcg-icon-point-square:before{content:\"\\e93e\"}.dcg-calculator-api-container-v1_12 .dcg-icon-point-triangle:before{content:\"\\e93f\"}.dcg-calculator-api-container-v1_12 .dcg-icon-imaginary:before{content:\"\\e937\"}.dcg-calculator-api-container-v1_12 .dcg-icon-interact:before{content:\"\\e938\"}.dcg-calculator-api-container-v1_12 .dcg-icon-lists:before{content:\"\\e939\"}.dcg-calculator-api-container-v1_12 .dcg-icon-play-circle:before{content:\"\\e93a\"}.dcg-calculator-api-container-v1_12 .dcg-icon-sierpinski:before{content:\"\\e93b\"}.dcg-calculator-api-container-v1_12 .dcg-icon-sparkle:before{content:\"\\e936\"}.dcg-calculator-api-container-v1_12 .dcg-icon-folder-open:before{content:\"\\e931\"}.dcg-calculator-api-container-v1_12 .dcg-icon-assessment-four:before{content:\"\\e92e\"}.dcg-calculator-api-container-v1_12 .dcg-icon-assessment-graphing:before{content:\"\\e92f\"}.dcg-calculator-api-container-v1_12 .dcg-icon-assessment-sci:before{content:\"\\e930\"}.dcg-calculator-api-container-v1_12 .dcg-icon-insert:before{content:\"\\e92d\"}.dcg-calculator-api-container-v1_12 .dcg-icon-go-to:before{content:\"\\e92c\"}.dcg-calculator-api-container-v1_12 .dcg-icon-3d:before{content:\"\\e926\"}.dcg-calculator-api-container-v1_12 .dcg-icon-compass:before{content:\"\\e929\"}.dcg-calculator-api-container-v1_12 .dcg-icon-ellipsis-vertical:before{content:\"\\e91e\"}.dcg-calculator-api-container-v1_12 .dcg-icon-scroll:before{content:\"\\e913\"}.dcg-calculator-api-container-v1_12 .dcg-icon-create-table:before{content:\"\\e92b\"}.dcg-calculator-api-container-v1_12 .dcg-icon-3d-cube:before{content:\"\\e906\"}.dcg-calculator-api-container-v1_12 .dcg-icon-3d-perspective:before{content:\"\\e92a\"}.dcg-calculator-api-container-v1_12 .dcg-icon-headphones:before{content:\"\\e928\"}.dcg-calculator-api-container-v1_12 .dcg-icon-confetti:before{content:\"\\e927\"}.dcg-calculator-api-container-v1_12 .dcg-icon-trophy:before{content:\"\\e200\"}.dcg-calculator-api-container-v1_12 .dcg-icon-clipboard:before{content:\"\\e205\"}.dcg-calculator-api-container-v1_12 .dcg-icon-arrow-infinite:before{content:\"\\e206\"}.dcg-calculator-api-container-v1_12 .dcg-icon-arrow-once:before{content:\"\\e207\"}.dcg-calculator-api-container-v1_12 .dcg-icon-arrow-two-way:before{content:\"\\e208\"}.dcg-calculator-api-container-v1_12 .dcg-icon-arrow-one-way:before{content:\"\\e209\"}.dcg-calculator-api-container-v1_12 .dcg-icon-randomize:before{content:\"\\e20a\"}.dcg-calculator-api-container-v1_12 .dcg-icon-zoom-fit:before{content:\"\\e20b\"}.dcg-calculator-api-container-v1_12 .dcg-icon-comments:before{content:\"\\e20c\"}.dcg-calculator-api-container-v1_12 .dcg-icon-lines-solid:before{content:\"\\e20d\"}.dcg-calculator-api-container-v1_12 .dcg-icon-histogram-fill:before{content:\"\\e20e\"}.dcg-calculator-api-container-v1_12 .dcg-icon-histogram:before{content:\"\\e20f\"}.dcg-calculator-api-container-v1_12 .dcg-icon-distribution-fill:before{content:\"\\e210\"}.dcg-calculator-api-container-v1_12 .dcg-icon-distribution:before{content:\"\\e211\"}.dcg-calculator-api-container-v1_12 .dcg-icon-dotplot-cross:before{content:\"\\e212\"}.dcg-calculator-api-container-v1_12 .dcg-icon-dotplot-open:before{content:\"\\e213\"}.dcg-calculator-api-container-v1_12 .dcg-icon-dotplot-default:before{content:\"\\e214\"}.dcg-calculator-api-container-v1_12 .dcg-icon-boxplot:before{content:\"\\e215\"}.dcg-calculator-api-container-v1_12 .dcg-icon-points:before{content:\"\\e216\"}.dcg-calculator-api-container-v1_12 .dcg-icon-fraction:before{content:\"\\e217\"}.dcg-calculator-api-container-v1_12 .dcg-icon-cross:before{content:\"\\e218\"}.dcg-calculator-api-container-v1_12 .dcg-icon-open:before{content:\"\\e219\"}.dcg-calculator-api-container-v1_12 .dcg-icon-point:before{content:\"\\e21a\"}.dcg-calculator-api-container-v1_12 .dcg-icon-shaded-inequality-shade2:before{content:\"\\e21b\"}.dcg-calculator-api-container-v1_12 .dcg-icon-shaded-inequality-dash:before{content:\"\\e21c\"}.dcg-calculator-api-container-v1_12 .dcg-icon-parametric-filled:before{content:\"\\e21f\"}.dcg-calculator-api-container-v1_12 .dcg-icon-parametric-solid:before{content:\"\\e220\"}.dcg-calculator-api-container-v1_12 .dcg-icon-parametric-dashed:before{content:\"\\e221\"}.dcg-calculator-api-container-v1_12 .dcg-icon-parametric-dotted:before{content:\"\\e222\"}.dcg-calculator-api-container-v1_12 .dcg-icon-polygon-filled:before{content:\"\\e223\"}.dcg-calculator-api-container-v1_12 .dcg-icon-polygon-dashed:before{content:\"\\e224\"}.dcg-calculator-api-container-v1_12 .dcg-icon-polygon-dotted:before{content:\"\\e225\"}.dcg-calculator-api-container-v1_12 .dcg-icon-polygon-solid:before{content:\"\\e226\"}.dcg-calculator-api-container-v1_12 .dcg-icon-title:before{content:\"\\e227\"}.dcg-calculator-api-container-v1_12 .dcg-icon-rocket:before{content:\"\\e229\"}.dcg-calculator-api-container-v1_12 .dcg-icon-reset:before{content:\"\\e22a\"}.dcg-calculator-api-container-v1_12 .dcg-icon-desmos:before{content:\"\\e22b\"}.dcg-calculator-api-container-v1_12 .dcg-icon-download:before{content:\"\\e22c\"}.dcg-calculator-api-container-v1_12 .dcg-icon-embed:before{content:\"\\e22d\"}.dcg-calculator-api-container-v1_12 .dcg-icon-export:before{content:\"\\e22e\"}.dcg-calculator-api-container-v1_12 .dcg-icon-book:before{content:\"\\e22f\"}.dcg-calculator-api-container-v1_12 .dcg-icon-print:before{content:\"\\e230\"}.dcg-calculator-api-container-v1_12 .dcg-icon-arrows-two:before{content:\"\\e235\"}.dcg-calculator-api-container-v1_12 .dcg-icon-arrows-one:before{content:\"\\e236\"}.dcg-calculator-api-container-v1_12 .dcg-icon-desmos-badge:before{content:\"\\e237\"}.dcg-calculator-api-container-v1_12 .dcg-icon-move:before{content:\"\\e238\"}.dcg-calculator-api-container-v1_12 .dcg-icon-move-horizontal:before{content:\"\\e239\"}.dcg-calculator-api-container-v1_12 .dcg-icon-move-vertical:before{content:\"\\e23a\"}.dcg-calculator-api-container-v1_12 .dcg-icon-arrow-left:before{content:\"\\e23b\"}.dcg-calculator-api-container-v1_12 .dcg-icon-arrow-right:before{content:\"\\e23c\"}.dcg-calculator-api-container-v1_12 .dcg-icon-arrow-enter:before{content:\"\\e23d\"}.dcg-calculator-api-container-v1_12 .dcg-icon-shift:before{content:\"\\e23e\"}.dcg-calculator-api-container-v1_12 .dcg-icon-duplicate:before{content:\"\\e240\"}.dcg-calculator-api-container-v1_12 .dcg-icon-error:before{content:\"\\e241\"}.dcg-calculator-api-container-v1_12 .dcg-icon-film:before{content:\"\\e243\"}.dcg-calculator-api-container-v1_12 .dcg-icon-folder:before{content:\"\\e245\"}.dcg-calculator-api-container-v1_12 .dcg-icon-hamburger:before{content:\"\\e246\"}.dcg-calculator-api-container-v1_12 .dcg-icon-hide:before{content:\"\\e248\"}.dcg-calculator-api-container-v1_12 .dcg-icon-home:before{content:\"\\e249\"}.dcg-calculator-api-container-v1_12 .dcg-icon-keyboard:before{content:\"\\e24b\"}.dcg-calculator-api-container-v1_12 .dcg-icon-lock:before{content:\"\\e24c\"}.dcg-calculator-api-container-v1_12 .dcg-icon-minus:before{content:\"\\e24d\"}.dcg-calculator-api-container-v1_12 .dcg-icon-new-expression:before{content:\"\\e24e\"}.dcg-calculator-api-container-v1_12 .dcg-icon-new-folder:before{content:\"\\e24f\"}.dcg-calculator-api-container-v1_12 .dcg-icon-new-image:before{content:\"\\e250\"}.dcg-calculator-api-container-v1_12 .dcg-icon-new-note:before{content:\"\\e252\"}.dcg-calculator-api-container-v1_12 .dcg-icon-pause:before{content:\"\\e253\"}.dcg-calculator-api-container-v1_12 .dcg-icon-pencil:before{content:\"\\e254\"}.dcg-calculator-api-container-v1_12 .dcg-icon-play:before{content:\"\\e255\"}.dcg-calculator-api-container-v1_12 .dcg-icon-plus:before{content:\"\\e256\"}.dcg-calculator-api-container-v1_12 .dcg-icon-question-sign:before{content:\"\\e257\"}.dcg-calculator-api-container-v1_12 .dcg-icon-redo:before{content:\"\\e258\"}.dcg-calculator-api-container-v1_12 .dcg-icon-remove:before{content:\"\\e259\"}.dcg-calculator-api-container-v1_12 .dcg-icon-search:before{content:\"\\e25a\"}.dcg-calculator-api-container-v1_12 .dcg-icon-settings:before{content:\"\\e25b\"}.dcg-calculator-api-container-v1_12 .dcg-icon-share:before{content:\"\\e25c\"}.dcg-calculator-api-container-v1_12 .dcg-icon-show:before{content:\"\\e25d\"}.dcg-calculator-api-container-v1_12 .dcg-icon-new-table:before{content:\"\\e25e\"}.dcg-calculator-api-container-v1_12 .dcg-icon-text:before{content:\"\\e25f\"}.dcg-calculator-api-container-v1_12 .dcg-icon-twitter:before{content:\"\\e261\"}.dcg-calculator-api-container-v1_12 .dcg-icon-undo:before{content:\"\\e262\"}.dcg-calculator-api-container-v1_12 .dcg-icon-world:before{content:\"\\e263\"}.dcg-calculator-api-container-v1_12 .dcg-icon-wrench:before{content:\"\\e264\"}.dcg-calculator-api-container-v1_12 .dcg-icon-zoom:before{content:\"\\e265\"}.dcg-calculator-api-container-v1_12 .dcg-icon-caret-down:before{content:\"\\e266\"}.dcg-calculator-api-container-v1_12 .dcg-icon-caret-up:before{content:\"\\e269\"}.dcg-calculator-api-container-v1_12 .dcg-icon-check:before{content:\"\\e26a\"}.dcg-calculator-api-container-v1_12 .dcg-icon-chevron-left:before{content:\"\\e26c\"}.dcg-calculator-api-container-v1_12 .dcg-icon-chevron-right:before{content:\"\\e26d\"}.dcg-calculator-api-container-v1_12 .dcg-icon-delete:before{content:\"\\e26f\"}.dcg-calculator-api-container-v1_12 .dcg-icon-four-function:before{content:\"\\e900\"}.dcg-calculator-api-container-v1_12 .dcg-icon-volume-down:before{content:\"\\e901\"}.dcg-calculator-api-container-v1_12 .dcg-icon-volume-up:before{content:\"\\e902\"}.dcg-calculator-api-container-v1_12 .dcg-icon-volume:before{content:\"\\e903\"}.dcg-calculator-api-container-v1_12 .dcg-icon-thin-arrow-right:before{content:\"\\e904\"}.dcg-calculator-api-container-v1_12 .dcg-icon-thin-arrow-left:before{content:\"\\e905\"}.dcg-calculator-api-container-v1_12 .dcg-icon-line-dotted:before{content:\"\\e907\"}.dcg-calculator-api-container-v1_12 .dcg-icon-line-dashed:before{content:\"\\e908\"}.dcg-calculator-api-container-v1_12 .dcg-icon-line-solid:before{content:\"\\e909\"}.dcg-calculator-api-container-v1_12 .dcg-icon-mail:before{content:\"\\e90a\"}.dcg-calculator-api-container-v1_12 .dcg-icon-map:before{content:\"\\e90b\"}.dcg-calculator-api-container-v1_12 .dcg-icon-new-ticker:before{content:\"\\e90c\"}.dcg-calculator-api-container-v1_12 .dcg-icon-metronome:before{content:\"\\e90d\"}.dcg-calculator-api-container-v1_12 .dcg-icon-xy-plane:before{content:\"\\e90e\"}.dcg-calculator-api-container-v1_12 .dcg-icon-replace:before{content:\"\\e90f\"}.dcg-calculator-api-container-v1_12 .dcg-icon-angle:before{content:\"\\e910\"}.dcg-calculator-api-container-v1_12 .dcg-icon-line-thickness:before{content:\"\\e911\"}.dcg-calculator-api-container-v1_12 .dcg-icon-opacity:before{content:\"\\e912\"}.dcg-calculator-api-container-v1_12 .dcg-icon-sound-wave:before{content:\"\\e914\"}.dcg-calculator-api-container-v1_12 .dcg-icon-3d-reorient:before{content:\"\\e915\"}.dcg-calculator-api-container-v1_12 .dcg-icon-geometry:before{content:\"\\e916\"}.dcg-calculator-api-container-v1_12 .dcg-icon-graphing:before{content:\"\\e917\"}.dcg-calculator-api-container-v1_12 .dcg-icon-trashcan:before{content:\"\\e918\"}.dcg-calculator-api-container-v1_12 .dcg-icon-dilation:before{content:\"\\e919\"}.dcg-calculator-api-container-v1_12 .dcg-icon-vector:before{content:\"\\e91a\"}.dcg-calculator-api-container-v1_12 .dcg-icon-rotation:before{content:\"\\e91b\"}.dcg-calculator-api-container-v1_12 .dcg-icon-matrix:before{content:\"\\e91c\"}.dcg-calculator-api-container-v1_12 .dcg-icon-scientific:before{content:\"\\e91d\"}.dcg-calculator-api-container-v1_12 .dcg-icon-test-mode:before{content:\"\\e91f\"}.dcg-calculator-api-container-v1_12 .dcg-icon-reflection:before{content:\"\\e921f\"}.dcg-calculator-api-container-v1_12 .dcg-icon-polygon-token:before{content:\"\\e920\"}.dcg-calculator-api-container-v1_12 .dcg-icon-accessibility:before{content:\"\\e921\"}.dcg-calculator-api-container-v1_12 .dcg-icon-curved-arrow:before{content:\"\\e922\"}.dcg-calculator-api-container-v1_12 .dcg-icon-cartesian:before{content:\"\\e923\"}.dcg-calculator-api-container-v1_12 .dcg-icon-polar:before{content:\"\\e924\"}.dcg-calculator-api-container-v1_12 .dcg-icon-translation:before{content:\"\\e925\"}.dcg-calculator-api-container-v1_12 .dcg-popover .dcg-arrow{position:absolute;display:inline-block;width:0;height:0;border-color:transparent;border-style:solid}.dcg-calculator-api-container-v1_12 .dcg-popover .dcg-arrow:after{position:absolute;display:inline-block;width:0;height:0;border-color:transparent;border-style:solid;content:\"\";z-index:-1}.dcg-calculator-api-container-v1_12 .dcg-popover .dcg-popover-interior{padding:20px;background-color:var(--dcg-custom-background-color, #fff);border:1px solid #bbb;border-radius:6px;box-shadow:0 5px 10px #0003;color:var(--dcg-custom-text-color, #000);margin:-1px;overflow:auto;cursor:auto}.dcg-calculator-api-container-v1_12 .dcg-popover .dcg-popover-title{margin-bottom:10px;font-size:1.15rem;border-bottom:2px solid #2f72dc;color:#2f72dc;font-weight:400;background-color:#fff;line-height:normal}.dcg-calculator-api-container-v1_12 .dcg-popover .dcg-popover-title:not(:first-of-type){padding-top:20px}.dcg-calculator-api-container-v1_12 .dcg-popover{z-index:6}.dcg-calculator-api-container-v1_12 .dcg-popover.dcg-top{margin-bottom:10px}.dcg-calculator-api-container-v1_12 .dcg-popover.dcg-right{margin-left:10px}.dcg-calculator-api-container-v1_12 .dcg-popover.dcg-bottom{margin-top:10px}.dcg-calculator-api-container-v1_12 .dcg-popover.dcg-left{margin-right:10px}.dcg-calculator-api-container-v1_12 .dcg-popover.dcg-top .dcg-arrow{bottom:-10px;left:50%;margin-left:-10px;border-width:10px 10px 0;border-top-color:#fff}.dcg-calculator-api-container-v1_12 .dcg-popover.dcg-top .dcg-arrow:after{border-width:11px 11px 0;border-top-color:#0003;bottom:-1px;left:-11px}.dcg-calculator-api-container-v1_12 .dcg-popover.dcg-right .dcg-arrow{top:50%;left:-10px;margin-top:-10px;border-width:10px 10px 10px 0;border-right-color:#fff}.dcg-calculator-api-container-v1_12 .dcg-popover.dcg-right .dcg-arrow:after{border-width:11px 11px 11px 0;border-right-color:#0003;bottom:-11px;left:-1px}.dcg-calculator-api-container-v1_12 .dcg-popover.dcg-bottom .dcg-arrow{top:-14px;margin-left:-14px;border-width:0 14px 14px;border-bottom-color:#fff}.dcg-calculator-api-container-v1_12 .dcg-popover.dcg-bottom .dcg-arrow:after{border-width:0 14px 14px;border-bottom-color:#0003;top:-1px;left:-14px}.dcg-calculator-api-container-v1_12 .dcg-popover.dcg-left .dcg-arrow{top:50%;right:-10px;margin-top:-10px;border-width:10px 0 10px 10px;border-left-color:#fff;border-top-color:transparent}.dcg-calculator-api-container-v1_12 .dcg-popover.dcg-left .dcg-arrow:after{border-width:11px 0 11px 11px;border-left-color:#0003;bottom:-11px;right:-1px}.dcg-calculator-api-container-v1_12 .dcg-constrained-height-popover{position:absolute;top:40px;bottom:2px;right:4px;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-constrained-height-popover .dcg-popover-interior{max-height:100%;pointer-events:auto}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header{display:flex;align-items:center;padding:3px;position:relative}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-circular-icon{margin-right:8px;float:left}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-btn-light-gray{border-color:#bbb;padding:3px 5px;font-size:90%;margin-right:4px}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-btn-outline{display:inline-block;padding-left:10px;padding-right:10px;border:1px solid #666;color:#666;border-radius:5px;height:32px;line-height:30px;cursor:pointer}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-btn-outline.dcg-hovered:not(.dcg-disabled){color:#666;border:1px solid #666;box-shadow:0 0 0 1px #666}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-btn-outline.dcg-depressed:not(.dcg-disabled){border:1px solid #000;box-shadow:0 0 0 1px #000;color:#000}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-btn-outline[role=button].dcg-focus-visible,.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-navigate-back[role=button].dcg-focus-visible,.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-more-options[role=button].dcg-focus-visible{outline:none;box-shadow:0 0 0 2px #2f72dc80!important;border-radius:5px}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-construct-button{font-size:150%;color:#127a3d}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-construct-button .dcg-construct-button-icon{width:24px;height:24px}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-style-button .dcg-color-swatch{width:20px;height:20px;border-radius:4px}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-style-button .dcg-color-swatch.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-style-button .dcg-color-swatch.dcg-depressed{box-shadow:none}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-toolbar-dropdown-button{position:relative;height:48px;width:43px;border-style:solid;border-radius:0;outline:none;border-width:0 1px;border-bottom-width:.5px;border-color:transparent;margin-left:-1px;display:flex;align-items:center;justify-content:center}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-toolbar-dropdown-button.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-toolbar-dropdown-button.dcg-depressed,.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-toolbar-dropdown-button.dcg-menu-open{background:#fff;border-color:#0003}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-toolbar-dropdown-button.dcg-focus-visible{box-shadow:0 0 0 2px #2f72dc80!important}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-toolbar-dropdown-button.dcg-hovered .dcg-tool-dropdown,.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-toolbar-dropdown-button.dcg-depressed .dcg-tool-dropdown,.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-toolbar-dropdown-button.dcg-menu-open .dcg-tool-dropdown{display:block}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-toolbar-dropdown-button.dcg-hovered .dcg-tool-dropdown{color:#666}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-toolbar-dropdown-button.dcg-depressed .dcg-tool-dropdown{color:#6042a6cc}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-toolbar-dropdown-button.dcg-menu-open .dcg-tool-dropdown{color:#6042a6b3}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-toolbar-dropdown-button .dcg-tool-dropdown{position:absolute;bottom:0;left:0;right:0;color:#666;display:none;text-align:center;line-height:12px}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-toolbar-dropdown-button .dcg-tool-dropdown .dcg-dropdown-icon,.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-toolbar-dropdown-button .dcg-tool-dropdown i{display:inline-block;width:100%}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-toolbar-dropdown-button .dcg-tool-dropdown i{font-size:.65rem}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-toolbar-dropdown-button .dcg-tool-dropdown i.dcg-hovered{color:#6042a6cc}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-show-hide-btn{font-size:.8rem;text-align:center;overflow:hidden;margin-right:10px;height:28px;line-height:28px;border-radius:3px;padding:0 8px}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-show-hide-btn div{max-height:28px;margin-top:-1px;margin-bottom:1px;transition:transform .2s}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-show-hide-btn:not(.dcg-any-visible-objects) div{transform:translateY(-28px)}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-multi-select-icon-button{color:#666;font-size:22px;padding:5px}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-multi-select-icon-button.dcg-construct-button{margin:0;position:relative;top:2px;background:red}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-multi-select-icon-button.dcg-depressed{color:#222}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-label-button .dcg-label-button-icon{margin-left:3px;width:28px;height:18px;background-color:#666;border-radius:2px;clip-path:path(\"M20.4932 1.02857C20.1982 0.642857 19.9032 0.385714 19.4608 0.257143C19.0183 0.128571 18.5758 0 18.1334 0H3.23729C2.49986 0 1.76243 0.257143 1.17248 0.771428C0.582539 1.28571 0.287567 1.92857 0.287567 2.57143V15.4286C0.287567 16.0714 0.582539 16.7143 1.17248 17.2286C1.76243 17.7429 2.49986 18 3.23729 18H17.9859C18.4284 18 19.0183 18 19.3133 17.7429C19.7557 17.4857 20.0507 17.2286 20.3457 16.9714L26.6876 9L20.3457 1.02857H20.4932Z\");font-size:.7rem;line-height:18px;text-align:center;padding-right:5px;color:#fff;font-weight:700}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-options-menu-section .dcg-delete-btn{display:flex;align-items:center;font-size:.9rem}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-options-menu-section .dcg-delete-btn i{margin-right:8px;font-size:18px}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-options-menu-section .dcg-checkbox .dcg-checkbox__content{color:inherit!important}.dcg-calculator-api-container-v1_12 .dcg-multi-select-header .dcg-options-menu-section .dcg-checkbox.dcg-checked .dcg-checkbox__box:before{color:#7c69b3}.dcg-calculator-api-container-v1_12 .dcg-multi-select-options-menu{left:-3px}.dcg-calculator-api-container-v1_12 .dcg-options-menu-container{position:absolute;display:none;z-index:6;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-options-menu-container .dcg-options-menu{pointer-events:auto}.dcg-calculator-api-container-v1_12 .dcg-options-menu{padding:10px;position:relative;border:1px solid #d3d3d3;border-radius:7px;box-shadow:0 0 6px #0000001a;background:var(--dcg-custom-background-color, #fff)}.dcg-calculator-api-container-v1_12 .dcg-options-menu button.dcg-focus-visible{outline:none;box-shadow:0 0 0 2px #2f72dc80}.dcg-calculator-api-container-v1_12 .dcg-options-menu button.dcg-disabled,.dcg-calculator-api-container-v1_12 .dcg-options-menu button[aria-disabled=true]{cursor:unset}.dcg-calculator-api-container-v1_12 .dcg-options-menu .dcg-dividing-line-after{padding-bottom:10px;border-bottom:1px solid #e2e2e2;margin-bottom:10px}.dcg-calculator-api-container-v1_12 .dcg-options-menu .dcg-triangle{width:0;height:0;border-style:solid}.dcg-calculator-api-container-v1_12 .dcg-options-menu .dcg-triangle:before{content:\"\";width:0;height:0;border-style:solid}.dcg-calculator-api-container-v1_12 .dcg-options-menu .dcg-title{margin-bottom:5px;opacity:.65;font-weight:500}.dcg-calculator-api-container-v1_12 .dcg-options-menu .dcg-style-icons,.dcg-calculator-api-container-v1_12 .dcg-options-menu .dcg-checkbox{margin-top:5px}.dcg-calculator-api-container-v1_12 .dcg-options-menu .dcg-checkbox .dcg-checkbox__content{font-size:90%;color:var(--dcg-custom-text-color, #333)}.dcg-calculator-api-container-v1_12 .dcg-options-menu .dcg-style-icon-container{display:inline-block;width:29px;height:29px;border-radius:50%}.dcg-calculator-api-container-v1_12 .dcg-options-menu .dcg-style-icon-container:not(:last-of-type){margin-right:4px}.dcg-calculator-api-container-v1_12 .dcg-options-menu .dcg-style-icon-container.dcg-disabled{cursor:default!important}.dcg-calculator-api-container-v1_12 .dcg-options-menu .dcg-style-icon-container:not(.dcg-disabled).dcg-hovered:not(.dcg-disabled){box-shadow:0 0 0 2px #0000001a}.dcg-calculator-api-container-v1_12 .dcg-options-menu .dcg-style-icon-container:not(.dcg-disabled).dcg-depressed:not(.dcg-disabled){box-shadow:0 0 0 2px #0003}.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu .dcg-triangle,.dcg-calculator-api-container-v1_12 .dcg-slider-options-view .dcg-triangle,.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-triangle,.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-triangle{position:absolute;top:12px;left:-9px;border-width:9px 9px 9px 0;border-color:transparent #d3d3d3 transparent transparent}.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu .dcg-triangle:before,.dcg-calculator-api-container-v1_12 .dcg-slider-options-view .dcg-triangle:before,.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-triangle:before,.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-triangle:before{position:absolute;top:-8px;left:1px;border-width:8px 8px 8px 0;border-color:transparent var(--dcg-custom-background-color, #fff) transparent transparent}.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu,.dcg-calculator-api-container-v1_12 .dcg-slider-options-view,.dcg-calculator-api-container-v1_12 .dcg-image-options-menu{left:38px}.dcg-calculator-api-container-v1_12 .dcg-expressions-options-menu,.dcg-calculator-api-container-v1_12 .dcg-slider-options-view{top:-7px}.dcg-calculator-api-container-v1_12 .dcg-image-options-menu{min-width:185px;top:-10px}.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-triangle{position:absolute;top:15px;left:-9px}.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-triangle{position:absolute;top:-9px;left:14px}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools{display:flex;align-items:center;justify-content:space-between;padding:3px}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-geo-getting-started-pointer{position:absolute;top:70px;left:50%;transform:translate(-50%);min-height:50px;color:#949494;font-size:1.1rem;padding-top:12px;pointer-events:none;animation:dcg-fadeIn .3s;white-space:nowrap}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-geo-getting-started-pointer .dcg-curved-icon-container{display:inline-block;font-size:2rem;transform:scaleY(-1) rotate(15deg)}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-geo-getting-started-pointer.dcg-geo-getting-started-has-tool .dcg-curved-icon-container{transform:rotate(15deg);position:relative;top:7px}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-geo-basic-tools-row{display:flex;align-items:center;justify-content:center;position:relative}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-geo-basic-tools-row button{font-size:.9rem;padding:0;background:none}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-geo-basic-tools-row button canvas{margin-left:-4px;margin-right:-4px}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-geo-basic-tools-row button:not(.dcg-dropdown-tool):not([dcg-geo-tool=point]):not([dcg-geo-tool=selection]) canvas{position:relative;top:-1px;transform:scale(.9)}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-icon{position:relative;top:-1px;display:inline-flex;width:42px}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-tool-name{position:absolute;top:100%;left:0;right:0;text-align:center;font-size:1rem;color:#666;font-family:Arial,Helvetica,sans-serif;line-height:1em}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-tool-button-container{height:48px}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-tool-button-container>button{height:48px;border-style:solid;border-radius:0;outline:none;border-width:0 1px;border-bottom-width:.5px;border-color:transparent;margin-left:-1px}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-tool-button-container>button.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-tool-button-container>button.dcg-depressed,.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-tool-button-container>button.dcg-selected{background:#fff}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-tool-button-container>button.dcg-hovered:not(.dcg-disabled):not(.dcg-selected){border-color:#0003}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-tool-button-container>button.dcg-focus-visible{box-shadow:0 0 0 2px #2f72dc80!important}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-tool-button-container>button.dcg-selected{border-color:#0003}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-tool-button-container>button.dcg-disabled{opacity:.25}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-tool-button-container>button.dcg-will-be-hidden-or-disabled{border-style:dashed;opacity:.9;border-color:#e2e2e2}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-geo-basic-tools-row .dcg-tool-button-container>button.dcg-will-be-hidden-or-disabled.dcg-selected{border-style:solid;border:1px solid #949494;box-shadow:0 0 0 1px #949494}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-geo-basic-tools-row canvas{width:50px;height:50px}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-split-btn{position:relative}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-split-btn.dcg-hovered .dcg-tool-dropdown,.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-split-btn.dcg-depressed .dcg-tool-dropdown,.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-split-btn.dcg-focus-visible .dcg-tool-dropdown,.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-split-btn.dcg-selected .dcg-tool-dropdown{display:block}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-split-btn.dcg-menu-open .dcg-tool-dropdown,.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-split-btn.dcg-selected.dcg-hovered .dcg-tool-dropdown{color:#6042a6b3}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-split-btn .dcg-tool-dropdown{position:absolute;bottom:0;left:0;right:0;color:#666;display:none;text-align:center;height:12px;line-height:12px}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-split-btn .dcg-tool-dropdown .dcg-dropdown-icon,.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-split-btn .dcg-tool-dropdown i{display:inline-block;width:100%}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-split-btn .dcg-tool-dropdown i{font-size:.65rem}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-split-btn .dcg-tool-dropdown i.dcg-hovered{color:#6042a6cc}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-split-btn .dcg-tool-dropdown.dcg-hovered{color:#666}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-split-btn .dcg-tool-dropdown.dcg-depressed i{color:#6042a6cc}.dcg-calculator-api-container-v1_12 .dcg-geo-basic-tools .dcg-mobile-construct-button{padding:10px 12px;text-align:center;float:left}.dcg-calculator-api-container-v1_12 .dcg-options-menu-section-container{display:flex;flex-direction:row}.dcg-calculator-api-container-v1_12 .dcg-options-menu-section-container .dcg-options-menu-section{flex:1 1 100%}.dcg-calculator-api-container-v1_12 .dcg-options-menu-section-container .dcg-options-menu-section+.dcg-options-menu-section{border-left:1px solid rgba(0,0,0,.2)}.dcg-calculator-api-container-v1_12 .dcg-select-tools-dropdown{background:#fff;padding:0!important;position:absolute!important;top:47.5px;border-top-left-radius:0;border-top-right-radius:0;overflow:hidden}.dcg-calculator-api-container-v1_12 .dcg-select-tools-dropdown button.dcg-dropdown-tool{width:100%;display:flex;align-items:center;height:36px;line-height:36px;outline:none;overflow-y:clip;padding-right:15px;min-width:130px}.dcg-calculator-api-container-v1_12 .dcg-select-tools-dropdown button.dcg-dropdown-tool canvas{transform:scale(.75);margin-right:-3px}.dcg-calculator-api-container-v1_12 .dcg-select-tools-dropdown button.dcg-dropdown-tool span{white-space:nowrap;font-size:.9rem}.dcg-calculator-api-container-v1_12 .dcg-select-tools-dropdown button.dcg-dropdown-tool.dcg-focus-visible:not([aria-disabled=true]),.dcg-calculator-api-container-v1_12 .dcg-select-tools-dropdown button.dcg-dropdown-tool.dcg-hovered:not([aria-disabled=true]){background:#0000001a}.dcg-calculator-api-container-v1_12 .dcg-select-tools-dropdown button.dcg-dropdown-tool.dcg-depressed:not([aria-disabled=true]){background:#0003}.dcg-calculator-api-container-v1_12 .dcg-select-tools-dropdown button.dcg-dropdown-tool.dcg-selected-tool:not([aria-disabled=true]){background:#6042a626}.dcg-calculator-api-container-v1_12 .dcg-select-tools-dropdown button.dcg-dropdown-tool.dcg-hovered:not(.dcg-focus-visible){box-shadow:none}.dcg-calculator-api-container-v1_12 .dcg-select-tools-dropdown button.dcg-dropdown-tool[aria-disabled=true] span,.dcg-calculator-api-container-v1_12 .dcg-select-tools-dropdown button.dcg-dropdown-tool.dcg-will-be-hidden-or-disabled span{color:#bbb;font-style:italic}.dcg-calculator-api-container-v1_12 .dcg-select-tools-dropdown button.dcg-dropdown-tool.dcg-transformation-tool i{font-size:32px;margin:5px 0;padding:8.75px 6px;position:relative;color:#00000078}.dcg-calculator-api-container-v1_12 .dcg-select-tools-dropdown button.dcg-dropdown-tool.dcg-transformation-tool i.dcg-icon-rotation:after,.dcg-calculator-api-container-v1_12 .dcg-select-tools-dropdown button.dcg-dropdown-tool.dcg-transformation-tool i.dcg-icon-dilation:after{position:absolute;top:50%;left:50%;width:4px;height:4px;background:#7d69b3;margin-left:-2px;margin-top:-2px;border-radius:50%;content:\"\"}.dcg-calculator-api-container-v1_12 .dcg-select-tools-dropdown button.dcg-dropdown-tool.dcg-transformation-tool i.dcg-icon-vector{transform:rotate(-45deg)}.dcg-calculator-api-container-v1_12 .dcg-select-tools-dropdown button.dcg-dropdown-tool.dcg-transformation-tool i.dcg-icon-reflection:after{position:absolute;top:13px;bottom:14px;left:50%;border-right:1px dashed rgba(47,114,220,.8);content:\"\";margin-left:-1px}.dcg-calculator-api-container-v1_12 .dcg-select-tools-dropdown button.dcg-dropdown-tool.dcg-transformation-tool i.dcg-icon-reflection:before{z-index:1;position:relative}.dcg-calculator-api-container-v1_12 .dcg-select-tools-dropdown button.dcg-dropdown-tool.dcg-transformation-tool.dcg-hovered i{color:#666}.dcg-calculator-api-container-v1_12 .dcg-select-tools-dropdown button.dcg-dropdown-tool.dcg-transformation-tool.dcg-depressed i{color:#454545}.dcg-calculator-api-container-v1_12 .dcg-select-tools-dropdown .dcg-existing-transformations-container{border-top:1px solid rgba(0,0,0,.2);min-width:200px;max-height:200px;overflow-y:auto;padding:10px 15px 5px 12px;margin:0 -1px;font-size:.9rem}.dcg-calculator-api-container-v1_12 .dcg-select-tools-dropdown .dcg-existing-transformations-container .dcg-geo-token-view{transform:scale(.8);margin:-2px}.dcg-calculator-api-container-v1_12 .dcg-select-tools-dropdown .dcg-transformation-header{margin-bottom:5px}.dcg-calculator-api-container-v1_12 .dcg-select-tools-dropdown .dcg-existing-transformation{padding:2.5px 0;opacity:.8;color:#666;text-align:left}.dcg-calculator-api-container-v1_12 .dcg-select-tools-dropdown .dcg-existing-transformation.dcg-hovered{opacity:1;color:#444}.dcg-calculator-api-container-v1_12 .dcg-select-tools-dropdown .dcg-existing-transformation.dcg-depressed{opacity:1;color:#000}.dcg-calculator-api-container-v1_12 .dcg-select-tools-dropdown .dcg-existing-transformation>div{pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-multi-select-label-menu{background:#fff;position:absolute!important;top:47.5px;border-top-left-radius:0;border-top-right-radius:0;padding-top:0}.dcg-calculator-api-container-v1_12 .dcg-multi-select-label-menu .dcg-label-container{min-height:1.8em;font-size:.9rem}.dcg-calculator-api-container-v1_12 .dcg-multi-select-label-menu .dcg-label-container input{width:100%}.dcg-calculator-api-container-v1_12 .dcg-multi-select-label-menu .dcg-label-container input:focus:not([disabled]){border-color:#7c69b3!important;box-shadow:0 1px #7c69b3!important}.dcg-calculator-api-container-v1_12 .dcg-multi-select-label-menu .dcg-segmented-control-container{margin-top:10px;font-size:.9rem}.dcg-calculator-api-container-v1_12 .dcg-multi-select-label-menu .dcg-segmented-control-container.dcg-theme-default .dcg-segmented-control-btn{border-color:#d4d4d4}.dcg-calculator-api-container-v1_12 .dcg-multi-select-label-menu .dcg-segmented-control-container.dcg-theme-default .dcg-segmented-control-btn.dcg-selected{border-color:#7c69b3;background-color:#7c69b3}.dcg-calculator-api-container-v1_12 .dcg-multi-select-label-menu .dcg-segmented-control-container.dcg-theme-default .dcg-segmented-control-btn.dcg-hovered:not(.dcg-selected){border-color:#7c69b3}.dcg-calculator-api-container-v1_12 .dcg-multi-select-label-menu .dcg-segmented-control-container.dcg-theme-default .dcg-segmented-control-btn.dcg-depressed:not(.dcg-selected){border-color:#7c69b3;background-color:#ece8f4}.dcg-calculator-api-container-v1_12 .dcg-multi-select-label-menu .dcg-segmented-control-btn--point:not(.dcg-selected) .dcg-segmented-control-interior:before{color:#7c69b3}.dcg-calculator-api-container-v1_12 .dcg-multi-select-label-menu .dcg-segmented-control-btn--point .dcg-segmented-control-interior:before{content:\"\\2022\";padding-right:5px;vertical-align:bottom;font-size:2.5rem}.dcg-calculator-api-container-v1_12 .dcg-multi-select-label-menu .dcg-multi-select-menu_margin-top-section{margin-top:10px}.dcg-calculator-api-container-v1_12 .dcg-multi-select-label-menu .dcg-checkbox{margin-top:8px;font-size:1.1rem}.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu.dcg-multi-select-options-menu{background:#fff;position:absolute!important;top:47.5px;border-top-left-radius:0;border-top-right-radius:0;width:220px}.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu.dcg-multi-select-options-menu .dcg-options-menu-section{padding:0;display:flex;flex-direction:column;gap:10px;margin:0 10px}.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu.dcg-multi-select-options-menu .dcg-options-menu-section .dcg-divider-line{margin:0 -10px;border-top:1px solid rgba(0,0,0,.2)}.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu.dcg-multi-select-options-menu .dcg-checkbox-section .dcg-checkbox{margin-top:0}.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu.dcg-multi-select-options-menu .dcg-delete-btn{justify-content:center}.dcg-calculator-api-container-v1_12 .dcg-generic-options-menu.dcg-multi-select-options-menu .dcg-delete-btn span{overflow:hidden;text-overflow:ellipsis}.dcg-calculator-api-container-v1_12 .dcg-move-to-expression-list .dcg-move-to-expression-list-title{display:flex;align-items:center;font-size:90%}.dcg-calculator-api-container-v1_12 .dcg-move-to-expression-list .dcg-move-to-expression-list-title:not([role=button]){cursor:default;margin-bottom:10px}.dcg-calculator-api-container-v1_12 .dcg-move-to-expression-list .dcg-move-to-expression-list-title[role=button].dcg-hovered span{text-decoration:underline}.dcg-calculator-api-container-v1_12 .dcg-move-to-expression-list .dcg-move-to-expression-list-flex{display:flex}.dcg-calculator-api-container-v1_12 .dcg-move-to-expression-list .dcg-btn-purple{margin-left:5px;padding:0 8px;font-size:90%;height:30px;line-height:28px}.dcg-calculator-api-container-v1_12 .dcg-move-to-expression-list .dcg-btn-purple.dcg-disabled{pointer-events:none;opacity:.5}.dcg-calculator-api-container-v1_12 .dcg-move-to-expression-list input{padding:0 5px;border:1px solid rgba(0,0,0,.2);outline:none;border-radius:4px;width:100%;font-size:90%}.dcg-calculator-api-container-v1_12 .dcg-move-to-expression-list input.dcg-hovered{border:1px solid rgba(0,0,0,.2);box-shadow:0 0 0 1px #0003}.dcg-calculator-api-container-v1_12 .dcg-move-to-expression-list input:focus{border:1px solid #7c69b3;box-shadow:0 0 0 1px #7c69b3}.dcg-calculator-api-container-v1_12 .dcg-move-to-expression-list .dcg-icon-insert{margin-right:8px;font-size:18px;color:#626262}.dcg-calculator-api-container-v1_12 .dcg-multi-select-style-menu{background:#fff;position:absolute!important;top:47.5px;border-top-left-radius:0;border-top-right-radius:0}.dcg-calculator-api-container-v1_12 .dcg-navigate-back{font-size:120%;margin-right:12px;border-right:1px solid rgba(0,0,0,.1);text-align:left;height:34px;padding-left:5px;padding-right:10px;display:flex;align-items:center}.dcg-calculator-api-container-v1_12 .dcg-navigate-back.dcg-navigate-back__no-right-border{border-right:0;padding-right:7px;margin-right:5px}.dcg-calculator-api-container-v1_12 .dcg-navigate-back i{color:#949494}.dcg-calculator-api-container-v1_12 .dcg-navigate-back.dcg-hovered i{color:#666}.dcg-calculator-api-container-v1_12 .dcg-navigate-back.dcg-depressed i{color:#222}@media (max-width: 450px){.dcg-calculator-api-container-v1_12 .dcg-navigate-back{border-right:0;margin-right:0;padding-left:0;padding-right:3px}}@keyframes dcg-pulse-cursor{0%{opacity:1}to{opacity:0;transform:scale(2)}}.dcg-calculator-api-container-v1_12 .dcg-geo-keyboard-cursor{position:absolute;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-geo-keyboard-cursor:before{content:\"\";position:absolute;width:20px;height:20px;margin-left:-12px;margin-top:-12px;border-radius:50%;border:2px solid gray;animation:dcg-pulse-cursor 2s infinite}.dcg-calculator-api-container-v1_12 .dcg-geo-keyboard-cursor:after{content:\"\";position:absolute;width:20px;height:20px;margin-left:-12px;margin-top:-12px;border-radius:50%;border:2px solid gray;animation:dcg-pulse-cursor 2s infinite;animation-delay:1s}@keyframes dcg-highlightedExp-animation{0%{opacity:1}40%{opacity:1}to{opacity:0}}.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem{display:block;position:relative;margin-top:-1px;border-top:1px solid rgba(206,206,206,.8);border-bottom:1px solid transparent;font-size:100%;border-right:1px solid transparent;background:var(--dcg-item-background-color)}.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem:not(.dcg-expressionimage){cursor:text}.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem .dcg-fade-container{width:100%}.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem.dcg-selected,.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem.dcg-dragging{--dcg-item-tab-background-color: var(--dcg-accent-color);--dcg-item-border-color: var(--dcg-accent-color)}.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem.dcg-inference-wizard-insert-target{--dcg-item-tab-background-color: #bbb;--dcg-item-border-color: #bbb}.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem.dcg-selected.dcg-inference-wizard-insert-target{--dcg-item-tab-background-color: #999;--dcg-item-border-color: #999}.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem.dcg-selected,.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem.dcg-dragging,.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem.dcg-inference-wizard-insert-target{border-width:2px 0;border-right:1px solid;border-color:var(--dcg-item-border-color)}.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem.dcg-selected .dcg-fade-container,.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem.dcg-dragging .dcg-fade-container,.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem.dcg-inference-wizard-insert-target .dcg-fade-container{margin-top:-1px;margin-bottom:-1px}.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem.dcg-selected .dcg-tab,.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem.dcg-dragging .dcg-tab,.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem.dcg-inference-wizard-insert-target .dcg-tab{color:var(--dcg-custom-text-color, #fff);background:var(--dcg-item-tab-background-color);border-right:1px solid transparent}.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem .dcg-expression-bottom.dcg-fadein-bottom{position:relative;animation:dcg-fadeIn .8s;cursor:default}.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem .dcg-extend-to-3d-checkbox{margin:2px 0 4px;font-size:.9rem;color:#666}.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem .dcg-indent-in-folder{margin-left:53px}.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem.dcg-inFolder .dcg-fade-container:after{position:absolute;top:5px;bottom:5px;left:56px;content:\"\";border-left:1px solid rgba(0,0,0,.2);animation:dcg-fadeIn .3s}.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem.dcg-inFolder .dcg-main{margin-left:20px}.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem.dcg-inFolder .dcg-indent-in-folder{margin-left:73px}.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem.dcg-shell{height:54px;background:#fff}.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem .dcg-fade-container{position:relative;padding-bottom:6px}.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem .dcg-fade-container .dcg-main{position:relative;padding:15px 35px 9px 53px;white-space:nowrap;font-size:110%;vertical-align:middle}.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem .dcg-fade-container .dcg-main .dcg-mq-container,.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem .dcg-fade-container .dcg-main .dcg-math-field{width:100%}.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem .dcg-tab{display:block;position:absolute;top:0;left:0;bottom:0;padding:1px 2px;font-size:65%;text-align:left;color:var(--dcg-custom-text-color, rgba(0, 0, 0, .5));background:var(--dcg-custom-background-color-shaded, #eee);border-right:1px solid rgba(0,0,0,.06);cursor:move;width:38px;touch-action:none}.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem.dcg-readonly:not(.dcg-inference-wizard-insert-target) .dcg-tab{cursor:default}.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem.dcg-highlighted-expressionitem .dcg-fade-container{position:relative}.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem.dcg-highlighted-expressionitem .dcg-fade-container:before{content:\"\";position:absolute;top:0;bottom:0;right:-1px;left:38px;border:3px solid #fad54b;pointer-events:none;animation:dcg-highlightedExp-animation .4s forwards;background:#fad54b1a;z-index:1}.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem.dcg-highlighted-expressionitem:has(+.dcg-highlighted-expressionitem) .dcg-fade-container:before{border-bottom-width:0}.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionitem.dcg-highlighted-expressionitem+.dcg-highlighted-expressionitem .dcg-fade-container:before{border-top-width:0}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontext .dcg-icon-text{position:absolute;top:50%;left:50%;margin:-7px 0 0 -7px;font-size:140%;opacity:.25}.dcg-calculator-api-container-v1_12 .dcg-expressiontable{cursor:default}.dcg-calculator-api-container-v1_12 .dcg-expressiontable .dcg-fade-container.dcg-hovered{box-shadow:none}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-readonly{--dcg-item-background-color: var(--dcg-custom-background-color-shaded, #eee)}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-readonly .dcg-parameter-suggestion-container{pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-readonly .dcg-lock-indicator{opacity:1;color:#bbb;text-shadow:-1px -1px 0 var(--dcg-item-background-color),-1px 1px 0 var(--dcg-item-background-color),1px -1px 0 var(--dcg-item-background-color),1px 1px 0 var(--dcg-item-background-color),0 -1px 0 var(--dcg-item-background-color),0 1px 0 var(--dcg-item-background-color),1px 0 0 var(--dcg-item-background-color),-1px 0 0 var(--dcg-item-background-color);pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-readonly .dcg-fade-container{cursor:default}.dcg-calculator-api-container-v1_12 .dcg-exppanel:not(.dcg-edit-list-mode) .dcg-expressionitem.dcg-readonly{cursor:default}.dcg-calculator-api-container-v1_12 .dcg-exppanel:not(.dcg-edit-list-mode) .dcg-expressionitem.dcg-readonly .dcg-edit-list-mathquill,.dcg-calculator-api-container-v1_12 .dcg-exppanel:not(.dcg-edit-list-mode) .dcg-expressionitem.dcg-readonly .dcg-main{cursor:default}.dcg-calculator-api-container-v1_12 .dcg-exppanel:not(.dcg-edit-list-mode) .dcg-expressionitem.dcg-readonly .dcg-edit-list-mathquill .dcg-static-mathquill-view{padding-right:20px}.dcg-calculator-api-container-v1_12 .dcg-exppanel:not(.dcg-edit-list-mode) .dcg-mathquill-braille-overflow-right .dcg-tooltip-hit-area-container:after{display:none}.dcg-calculator-api-container-v1_12 .dcg-expressionitem:not(.dcg-mathitem).dcg-selected .dcg-top-level-delete{padding-bottom:0;padding-left:0}.dcg-calculator-api-container-v1_12 .dcg-EDIT-LIST-MODE .dcg-exppanel .dcg-top-level-delete,.dcg-calculator-api-container-v1_12 .dcg-EDIT-LIST-MODE .dcg-exppanel .dcg-lock-indicator{display:none}.dcg-calculator-api-container-v1_12 .dcg-EDIT-LIST-MODE .dcg-exppanel .dcg-expressionitem.dcg-expressiontext .dcg-displayTextarea,.dcg-calculator-api-container-v1_12 .dcg-EDIT-LIST-MODE .dcg-exppanel .dcg-expressionitem.dcg-expressionfolder .dcg-displayTextarea{pointer-events:none;opacity:0}.dcg-calculator-api-container-v1_12 .dcg-EDIT-LIST-MODE .dcg-exppanel .dcg-expressionitem.dcg-expressiontext textarea,.dcg-calculator-api-container-v1_12 .dcg-EDIT-LIST-MODE .dcg-exppanel .dcg-expressionitem.dcg-expressionfolder textarea{opacity:1}.dcg-calculator-api-container-v1_12 .dcg-drag-container{position:absolute;top:0;left:0;right:0;z-index:1000}.dcg-calculator-api-container-v1_12 .dcg-drag-container .dcg-expressionitem{overflow:hidden;box-shadow:0 0 10px #888;border-color:var(--dcg-accent-color);border-right:1px solid var(--dcg-accent-color)}.dcg-calculator-api-container-v1_12 .dcg-drag-container .dcg-expressionitem .dcg-indent-in-folder,.dcg-calculator-api-container-v1_12 .dcg-drag-container .dcg-expressionitem .dcg-fade-container:after,.dcg-calculator-api-container-v1_12 .dcg-drag-container .dcg-expressionitem .dcg-main{transition:.3s}.dcg-calculator-api-container-v1_12 .dcg-drag-container .dcg-expressionitem .dcg-tab{background:var(--dcg-accent-color)}.dcg-calculator-api-container-v1_12 .dcg-drag-container .dcg-expressionitem .dcg-num{display:none}.dcg-calculator-api-container-v1_12 .dcg-template-expressioneach .dcg-expressionitem.dcg-dragging{visibility:hidden}.dcg-calculator-api-container-v1_12 .dcg-exppanel.dcg-isDragging .dcg-expressionitem.dcg-new-expression{opacity:0}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-mq-editable-field{border:none;box-shadow:none!important}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-mq-editable-field textarea{resize:none}.dcg-calculator-api-container-v1_12 .dcg-tap-container .dcg-mq-math-mode .dcg-mq-supsub{margin-bottom:-.2em}.dcg-calculator-api-container-v1_12 .dcg-tap-container .dcg-mq-math-mode .dcg-mq-sub{font-size:80%}.dcg-calculator-api-container-v1_12 .dcg-tap-container .dcg-mq-math-mode .dcg-mq-int>.dcg-mq-supsub>.dcg-mq-sub{font-size:100%}.dcg-calculator-api-container-v1_12 .dcg-clear{clear:both}.dcg-calculator-api-container-v1_12 .dcg-has-background-color .dcg-expressionitem{border-top-color:#0003}.dcg-calculator-api-container-v1_12 .dcg-expression-icon-container{position:absolute;top:28px;left:50%;height:29px;width:29px;margin-top:-14.5px;margin-left:-14.5px;text-align:center;line-height:29px;border-radius:50%}.dcg-calculator-api-container-v1_12 .dcg-selected .dcg-expression-icon-container{top:27px}.dcg-calculator-api-container-v1_12 .dcg-expression-warning{font-size:80%;color:#666;padding-right:8px}.dcg-calculator-api-container-v1_12 .dcg-expression-warning .dcg-icon-error{font-size:85%;padding-right:4px}.dcg-calculator-api-container-v1_12 .dcg-expression-warning a{color:#666;margin-left:5px;text-decoration:underline}.dcg-calculator-api-container-v1_12 .dcg-expression-warning a.dcg-hovered{color:#000}.dcg-calculator-api-container-v1_12 .dcg-expression-warning .dcg-btn{padding:2px 5px;margin-top:4px}.dcg-calculator-api-container-v1_12 .dcg-mouse-over-closed-poi,.dcg-calculator-api-container-v1_12 .dcg-mouse-over-opened-poi,.dcg-calculator-api-container-v1_12 .dcg-mouse-over-interactive-label,.dcg-calculator-api-container-v1_12 .dcg-mouse-over-clickable-object{cursor:pointer}.dcg-calculator-api-container-v1_12 .dcg-mouse-over-movable-point{cursor:move}.dcg-calculator-api-container-v1_12 .dcg-mouse-over-movable-point-ew{cursor:ew-resize}.dcg-calculator-api-container-v1_12 .dcg-mouse-over-movable-point-ns{cursor:ns-resize}.dcg-calculator-api-container-v1_12 .dcg-mouse-over-closed-poi .dcg-tracept{display:none}.dcg-calculator-api-container-v1_12 .dcg-poi-label.dcg-show-border .dcg-label{border:1px solid #e2e2e2;background:#fff;border-radius:5px;box-shadow:0 0 5px #0003;padding:7px 4px 5px;display:flex;align-items:center}.dcg-calculator-api-container-v1_12 .dcg-poi-label.dcg-editable-label .dcg-math-field{padding:3px 10px}.dcg-calculator-api-container-v1_12 .dcg-poi-label.dcg-editable-label .dcg-resizing-text-input-container input,.dcg-calculator-api-container-v1_12 .dcg-poi-label.dcg-editable-label .dcg-text-input-content{padding:5px 10px}.dcg-calculator-api-container-v1_12 .dcg-poi-label.dcg-editable-label .dcg-editable-label-border{background:#ffffffbf;border-radius:4px;border-width:1px;border-style:solid;padding:1px}.dcg-calculator-api-container-v1_12 .dcg-poi-label.dcg-editable-label .dcg-editable-label-border:not(.dcg-focus):not(.dcg-hovered){border-color:#bbb!important}.dcg-calculator-api-container-v1_12 .dcg-poi-label.dcg-editable-label .dcg-editable-label-border.dcg-empty-label:not(.dcg-focus):not(.dcg-hovered){border-color:#949494!important}.dcg-calculator-api-container-v1_12 .dcg-poi-label.dcg-editable-label .dcg-editable-label-border.dcg-empty-label,.dcg-calculator-api-container-v1_12 .dcg-poi-label.dcg-editable-label .dcg-editable-label-border.dcg-focus{background:#fff}.dcg-calculator-api-container-v1_12 .dcg-poi-label.dcg-editable-label .dcg-editable-label-border.dcg-hovered:not(.dcg-focus){border-style:solid;padding:0;border-width:2px}.dcg-calculator-api-container-v1_12 .dcg-poi-label.dcg-editable-label .dcg-editable-label-border.dcg-focus{padding:0;border-width:2px}.dcg-calculator-api-container-v1_12 .dcg-poi-label .dcg-static-mathquill-view *{-webkit-user-select:none!important;user-select:none!important}.dcg-calculator-api-container-v1_12 .dcg-poi-label{display:inline-block;position:absolute;top:0;left:0;font-size:100%;color:#222}.dcg-calculator-api-container-v1_12 .dcg-poi-label .dcg-pt{display:inline-block;position:absolute;top:-4px;left:-4px;border:4px solid #000;border-radius:4px;width:0;height:0;z-index:0}.dcg-calculator-api-container-v1_12 .dcg-poi-label .dcg-label{position:absolute;z-index:3;white-space:nowrap}.dcg-calculator-api-container-v1_12 .dcg-poi-label .dcg-label .dcg-mq-sqrt-prefix{text-shadow:none}.dcg-calculator-api-container-v1_12 .dcg-poi-label .dcg-label-raw-text{pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-poi-label.dcg-has-outline .dcg-label{text-shadow:-1px -1px 0 #fff,-1px 1px 0 #fff,1px -1px 0 #fff,1px 1px 0 #fff,0 -1px 0 #fff,0 1px 0 #fff,1px 0 0 #fff,-1px 0 0 #fff}.dcg-calculator-api-container-v1_12 .dcg-poi-label:not(.dcg-tracept) .dcg-pt{border-width:5px;border-color:transparent!important;border-radius:5px;opacity:1;top:-5px!important;left:-5px!important;cursor:pointer}.dcg-calculator-api-container-v1_12 .dcg-poi-label:not(.dcg-tracept).dcg-opened .dcg-pt{border-color:#000!important}.dcg-calculator-api-container-v1_12 .dcg-poi-label.dcg-hole .dcg-pt{top:-5px;left:-5px;border-width:2px;padding:3px;background:#fff!important;border-radius:6px}.dcg-calculator-api-container-v1_12 .dcg-poi-label.dcg-hide-dot .dcg-pt{display:none}.dcg-calculator-api-container-v1_12 .dcg-resizing-text-input-container{position:relative;overflow:hidden}.dcg-calculator-api-container-v1_12 .dcg-resizing-text-input-container input{position:absolute;top:1px;left:1px;right:1px;font:inherit;border:0;outline:0;background:transparent;color:inherit}.dcg-calculator-api-container-v1_12 .dcg-resizing-text-input-container:not(.dcg-focus) input::selection{background:transparent}.dcg-calculator-api-container-v1_12 .dcg-resizing-text-input-container.dcg-focus input,.dcg-calculator-api-container-v1_12 .dcg-resizing-text-input-container.dcg-hovered input{position:absolute;top:0;left:0}.dcg-calculator-api-container-v1_12 .dcg-resizing-text-input-container .dcg-text-input-content{min-width:35px;display:inline-block;color:transparent;white-space:pre}.dcg-calculator-api-container-v1_12 .dcg-poi-copy-button{padding:5px 5px 5px 3px;margin:-5px -3px -5px -1px;opacity:.4;line-height:0}.dcg-calculator-api-container-v1_12 .dcg-poi-copy-button.dcg-hovered{opacity:.7}.dcg-calculator-api-container-v1_12 .dcg-poi-copy-button.dcg-depressed{opacity:1}.dcg-calculator-api-container-v1_12 .dcg-3d-debug-root{position:fixed;bottom:0;right:0;z-index:1000;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-3d-debug-root .dcg-3d-debug-container{display:inline-block;position:relative;background-color:green;image-rendering:pixelated}.dcg-calculator-api-container-v1_12 .dcg-3d-debug-root .dcg-3d-debug-container:before{content:attr(dcg-label);position:absolute;top:0;left:0}.dcg-calculator-api-container-v1_12 .dcg-3d-debug-root .dcg-3d-debug-container canvas{border:1px solid red;width:100%;height:100%;transform:scaleY(-1)}.dcg-calculator-api-container-v1_12 .dcg-overgraph-icon-container{z-index:2}.dcg-calculator-api-container-v1_12 .dcg-overgraph-icon-container:not(.dcg-bottom-right){position:absolute;top:5px;left:5px}.dcg-calculator-api-container-v1_12 .dcg-overgraph-icon-container.dcg-bottom-right{position:absolute;bottom:5px;right:5px}.dcg-calculator-api-container-v1_12 .dcg-overgraph-icon{width:37px;height:37px;line-height:40px;font-size:110%;text-shadow:-2px -2px 0 #fff,-2px 2px 0 #fff,2px -2px 0 #fff,2px 2px 0 #fff,0 -2px 0 #fff,0 2px 0 #fff,2px 0 0 #fff,-2px 0 0 #fff;text-align:center;border-radius:5px}.dcg-calculator-api-container-v1_12 .dcg-overgraph-icon.dcg-rotated{transform:rotate(-90deg)}.dcg-calculator-api-container-v1_12 .dcg-overgraph-icon i{opacity:.6}.dcg-calculator-api-container-v1_12 .dcg-overgraph-icon.dcg-hovered{background:#0000001a;text-shadow:none}.dcg-calculator-api-container-v1_12 .dcg-overgraph-icon.dcg-hovered i{opacity:.8}.dcg-calculator-api-container-v1_12 .dcg-overgraph-icon.dcg-depressed{background:#0003;text-shadow:none}.dcg-calculator-api-container-v1_12 .dcg-overgraph-icon.dcg-depressed i{opacity:1}@keyframes dcg-fadeIn-show-keypad{0%{transform:translateY(10px);opacity:0}50%{transform:translateY(10px);opacity:0}to{transform:translate(0);opacity:1}}.dcg-calculator-api-container-v1_12 .dcg-keypad{position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-keypad>*{pointer-events:auto}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-keys-container{position:absolute;bottom:0;z-index:6;width:100%;margin:0 auto;padding:0;transition:opacity .3s}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-functions-popover{position:absolute;right:8px}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-minimize-keypad .dcg-icon-keyboard,.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-show-keypad .dcg-icon-keyboard{font-size:175%;float:left;margin-right:8px}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-minimize-keypad .dcg-icon-caret-down,.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-minimize-keypad .dcg-icon-caret-up,.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-show-keypad .dcg-icon-caret-down,.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-show-keypad .dcg-icon-caret-up{font-size:75%;line-height:2rem}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-minimize-keypad-container{position:absolute;top:-2.5rem;left:-1px}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-show-keypad-container{z-index:6;position:absolute;bottom:5px;left:5px;animation:dcg-fadeIn-show-keypad .6s}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-minimize-keypad{padding:.25rem 1.25rem;border-top-left-radius:5px;border-top-right-radius:5px}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-show-keypad{padding:4px 14px}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-keys{position:relative;width:100%;max-width:835px;margin:auto;text-align:center}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-keys{font-size:110%}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-keys-background{background:var(--dcg-custom-background-color-shaded, #f0f0f0);border-top:1px solid rgba(0,0,0,.1);box-shadow:0 -1px 3px #0000001a}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-keys-background .dcg-minimize-keypad{background:var(--dcg-custom-background-color-shaded, #f0f0f0);color:var(--dcg-custom-text-color, rgba(0, 0, 0, .7));border:1px solid rgba(0,0,0,.1);border-bottom:1px solid var(--dcg-custom-background-color-shaded, #f0f0f0);box-shadow:0 -1px 3px #0000001a}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-keys-background .dcg-minimize-keypad.dcg-hovered{color:var(--dcg-custom-text-color, rgba(0, 0, 0, .9))}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-keys-background .dcg-minimize-keypad.dcg-depressed{color:var(--dcg-custom-text-color, #000)}.dcg-calculator-api-container-v1_12 .dcg-narrow .dcg-keypad .dcg-functions-popover:not(.dcg-left){position:absolute;margin-left:-70px}.dcg-calculator-api-container-v1_12 .dcg-narrow .dcg-keypad .dcg-functions-popover.dcg-left{right:18%}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-audio-keypad-container{display:flex}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-audio-keypad-column{display:flex;flex:1;flex-direction:column}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-audio-keypad-column .dcg-keypad-btn-container{max-height:40px}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-audio-keypad-column .dcg-keypad-btn-container .dcg-keypad-btn:not(.dcg-btn-blue){color:#333}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-playback-column .dcg-btn-playback{height:40px}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-playback-column .dcg-btn-playback .dcg-keypad-btn-container{width:100%}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-playback-column .dcg-key-nav-section-container{height:40px}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-playback-column .dcg-key-nav-section-container .dcg-tooltip-hit-area-container{width:100%}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-playback-column .dcg-key-nav-section-container .dcg-key-nav-section-title-container.dcg-disabled{opacity:.5}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-key-section-title{text-align:left;color:#666;line-height:40px;font-size:90%}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-key-section-title .dcg-tooltip-hit-area-container{margin-left:3px}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-key-section-title .dcg-tooltip-hit-area-container i{font-size:80%;cursor:pointer;display:inline-block;padding:5px}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-key-section-title .dcg-tooltip-hit-area-container.dcg-hovered{color:#333}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-key-section-title .dcg-tooltip-hit-area-container.dcg-depressed{color:#000}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-audio-keypad-spacer{flex:.25}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-content{display:flex;align-items:center;justify-content:center}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-content .dcg-play-icon-container,.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-content .dcg-stop-icon-container{border:2px solid #fff;border-radius:50%;width:22px;height:22px;line-height:22px;text-align:center;font-size:50%;margin-right:5px}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-content .dcg-icon-play{position:relative;top:-1px;left:1.5px}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-content .dcg-stop-icon{background:#fff;display:inline-block;border-radius:1px;width:8px;height:8px;position:relative;top:-1px}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-content .dcg-button-icon:not(.dcg-icon-only){font-size:70%}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-content .dcg-button-icon.dcg-icon-only{font-size:120%}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-key-nav-section{flex:1;display:flex;align-items:center}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-key-nav-section .dcg-keypad-btn-container{width:40px;font-size:80%}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-key-nav-section .dcg-keypad-btn-container i.dcg-icon-volume-up,.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-key-nav-section .dcg-keypad-btn-container i.dcg-icon-volume-down{font-size:115%}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-key-nav-section .dcg-key-nav-section-title-container{display:flex;flex-direction:column;justify-content:center;width:70px;padding:0 5px;font-size:90%}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-key-nav-section .dcg-key-nav-section-title-container .dcg-key-nav-section-title{font-size:75%;color:#666}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-key-nav-section .dcg-key-nav-section-title-container.dcg-poi-section-container .dcg-key-nav-section-title{display:block}@media screen and (max-width: 550px){.dcg-calculator-api-container-v1_12 .dcg-audio-keypad-spacer{max-width:20px}.dcg-calculator-api-container-v1_12 .dcg-audio-keypad-column .dcg-key-nav-section .dcg-key-nav-section-title-container{font-size:80%;width:60px}}@media screen and (max-width: 430px){.dcg-calculator-api-container-v1_12 .dcg-audio-keypad-container{font-size:90%}.dcg-calculator-api-container-v1_12 .dcg-audio-keypad-container .dcg-audio-keypad-column.dcg-playback-column .dcg-key-nav-section .dcg-key-nav-section-title-container{width:40px}.dcg-calculator-api-container-v1_12 .dcg-audio-keypad-container .dcg-audio-keypad-column.dcg-navigation-column .dcg-key-nav-section .dcg-key-nav-section-title-container{width:55px}}@media screen and (max-width: 340px){.dcg-calculator-api-container-v1_12 .dcg-audio-keypad-column.dcg-navigation-column .dcg-key-nav-section .dcg-key-nav-section-title-container{display:none}}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container{height:40px;display:inline-block;position:relative;flex-grow:1}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container.dcg-disabled{opacity:.5}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container.dcg-disabled .dcg-keypad-btn{cursor:default}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn{position:absolute;top:2px;left:2px;right:2px;bottom:2px;display:flex;flex-flow:row;align-items:center;padding:0}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn .dcg-keypad-btn-content{text-align:center;flex:1;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-large-operator,.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-int{font-size:80%}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-large-operator .dcg-mq-sup,.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-large-operator .dcg-mq-sub,.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-large-operator .dcg-mq-to,.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-large-operator .dcg-mq-from,.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-int .dcg-mq-sup,.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-int .dcg-mq-sub,.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-int .dcg-mq-to,.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-int .dcg-mq-from{display:none}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-supsub{font-size:80%}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container .dcg-mq-sqrt-stem{width:4px;padding:0;background:transparent}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container [dcg-command=shift]{padding-top:2px}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container [dcg-command=\"/\"],.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container [dcg-command=\"-\"]{padding-top:1px}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container [dcg-command=\"*\"]{padding-top:2px}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container [dcg-command=left],.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container [dcg-command=right],.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container [dcg-command=backspace]{font-size:110%;padding-top:2px}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container [dcg-command=enter]{font-size:140%;padding-top:3px}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn .dcg-keypad-btn-content{font-size:90%}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-light-gray{color:#000;box-shadow:inset 0 1px #ffffff40,inset 0 -1px #00000005;background:linear-gradient(#f6f6f6,#f0f0f0);border:1px solid rgba(0,0,0,.1)}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-light-gray.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-light-gray.dcg-focus-visible{background:#ededed;border:1px solid rgba(0,0,0,.13)}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-light-gray.dcg-depressed{background:#e0e0e0;border:1px solid rgba(0,0,0,.15);box-shadow:none}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-light-on-gray{box-shadow:inset 0 1px #ffffff40,inset 0 -1px #00000005;background:linear-gradient(#fff,#fafafa);border:1px solid #d8d8d8;border-radius:2px}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-dark-on-gray{box-shadow:inset 0 1px #ffffff1a,inset 0 -1px #00000005;background:linear-gradient(#00000021,#00000029);border:1px solid #bbb;border-radius:2px}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container:not(.dcg-disabled) .dcg-keypad-btn.dcg-btn-light-on-gray.dcg-hovered{background:#f5f5f5;border-color:#d8d8d8}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container:not(.dcg-disabled) .dcg-keypad-btn.dcg-btn-light-on-gray.dcg-depressed{background:#ebebeb;border-color:#cfcfcf;box-shadow:none}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container:not(.dcg-disabled) .dcg-keypad-btn.dcg-btn-dark-on-gray.dcg-hovered{background:#00000029}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-keypad-btn-container:not(.dcg-disabled) .dcg-keypad-btn.dcg-btn-dark-on-gray.dcg-depressed{box-shadow:none;background:#00000030}.dcg-calculator-api-container-v1_12 .dcg-inverted-colors .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-light-on-gray{box-shadow:inset 0 -1px #ffffff40,inset 0 1px #00000005;background:linear-gradient(#fafafa,#fff)}.dcg-calculator-api-container-v1_12 .dcg-inverted-colors .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-dark-on-gray{box-shadow:inset 0 -1px #ffffff1a,inset 0 1px #00000005;background:linear-gradient(#00000029,#00000021)}.dcg-calculator-api-container-v1_12 .dcg-has-background-color .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-light-on-gray,.dcg-calculator-api-container-v1_12 .dcg-has-background-color .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-light-gray{background:#ffffff4d;border:0}.dcg-calculator-api-container-v1_12 .dcg-has-background-color .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-light-on-gray.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-has-background-color .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-light-gray.dcg-hovered{background:#ffffff40}.dcg-calculator-api-container-v1_12 .dcg-has-background-color .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-light-on-gray.dcg-depressed,.dcg-calculator-api-container-v1_12 .dcg-has-background-color .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-light-gray.dcg-depressed{background:#ffffff26}.dcg-calculator-api-container-v1_12 .dcg-has-background-color .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-dark-on-gray{background:#00000026;border:0}.dcg-calculator-api-container-v1_12 .dcg-has-background-color .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-dark-on-gray.dcg-hovered{background:#0000002e}.dcg-calculator-api-container-v1_12 .dcg-has-background-color .dcg-basic-keypad .dcg-keypad-btn-container .dcg-keypad-btn.dcg-btn-dark-on-gray.dcg-depressed{background:#00000038}.dcg-calculator-api-container-v1_12 .dcg-projector-mode:not(.dcg-narrow) .dcg-keys-container.dcg-smaller-functions-text .dcg-keypad-btn[dcg-command=functions]{font-size:80%}.dcg-calculator-api-container-v1_12 .dcg-keys-container.dcg-small-ABC .dcg-abc-button--one-column .dcg-keypad-btn[dcg-command=ABC]{font-size:90%}.dcg-calculator-api-container-v1_12 .dcg-keys-container.dcg-smaller-ABC .dcg-abc-button--one-column .dcg-keypad-btn[dcg-command=ABC]{font-size:80%}.dcg-calculator-api-container-v1_12 .dcg-keys-container.dcg-smallest-ABC .dcg-abc-button--one-column .dcg-keypad-btn[dcg-command=ABC]{font-size:70%}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad-container{background:#00000012;border:1px solid rgba(0,0,0,.2);border-top:none}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad{margin:0;padding:4px 3px}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-mq-large-operator .dcg-mq-to,.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-mq-large-operator .dcg-mq-from{display:none!important}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-mq-int .dcg-mq-supsub{display:none}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-mq-large-operator,.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-mq-int{font-size:70%;position:relative;top:-1px}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad *{-webkit-user-select:none;user-select:none;-webkit-touch-callout:none}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-half-width-placeholder{flex-grow:.5}.dcg-calculator-api-container-v1_12 .dcg-basic-keypad .dcg-partition-placeholder{width:4%}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-basic-keypad{font-size:150%}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-basic-keypad .dcg-keypad-btn-container{height:52px}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-basic-keypad .dcg-keypad-row .dcg-keypad-btn-container{height:46px}.dcg-calculator-api-container-v1_12 .dcg-projector-mode.dcg-narrow .dcg-basic-keypad .dcg-keypad-row{font-size:90%}.dcg-calculator-api-container-v1_12 .dcg-projector-mode.dcg-narrow .dcg-basic-keypad .dcg-keypad-row .dcg-keypad-btn-container{height:44px}@media screen and (max-width: 470px){.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-sci-func-keypad .dcg-basic-keypad{font-size:115%}}@media screen and (max-width: 330px){.dcg-calculator-api-container-v1_12 .dcg-either-or-btn{font-size:85%;white-space:nowrap}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-basic-keypad{font-size:125%}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-sci-func-keypad .dcg-basic-keypad{font-size:90%}.dcg-calculator-api-container-v1_12 .dcg-projector-mode.dcg-narrow .dcg-basic-keypad .dcg-keypad-row{font-size:70%}}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-functions-popover{top:-306px}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-functions-popover .dcg-popover-interior{height:306px!important}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-functions-popover{padding:0;text-align:left}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-functions-popover .dcg-popover-interior{background-color:var(--dcg-custom-background-color, #fff);color:var(--dcg-custom-text-color, #000);padding:0;width:310px}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-functions-popover .dcg-popover-interior .dcg-keypad-btn-container{width:33.3%;float:left;height:42px;float:none;margin-bottom:-5px;overflow:hidden}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-functions-popover .dcg-popover-interior .dcg-keypad-btn-container .dcg-keypad-btn{font-size:80%!important;white-space:nowrap;color:var(--dcg-custom-text-color, #000)}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-functions-popover .dcg-popover-section-separator{display:block;clear:both;border-bottom:1px solid #e2e2e2;margin:0 2px 4px;padding-top:4px}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-functions-popover .dcg-keypad-keys-section,.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-functions-popover .dcg-keypad-keys-buttons{margin-bottom:-42px}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-functions-popover .dcg-keypad-keys-section:last-of-type .dcg-keypad-keys-buttons{margin-bottom:7px}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-functions-popover .dcg-keypad-keys-section{border:1px solid transparent}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-functions-popover .dcg-keypad-keys-section+.dcg-keypad-keys-section{margin-top:100px}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-functions-popover .dcg-section-heading{color:var(--dcg-custom-text-color, #666);text-transform:uppercase;font-size:75%;text-align:left;padding:5px;position:sticky;top:0;background:var(--dcg-custom-background-color, #fff);z-index:2}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-functions-popover .dcg-section-heading .dcg-beta-tag{font-size:70%;background:#8c29be;color:var(--dcg-custom-text-color, #fff);position:relative;top:-.6em;padding:1px 3px;border-radius:4px;margin-left:2px}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-functions-popover .dcg-section-heading a{color:var(--dcg-custom-text-color, #000);margin-left:5px;opacity:.5}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-functions-popover .dcg-section-heading a.dcg-hovered{opacity:.6}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-functions-popover .dcg-section-heading a.dcg-depressed{opacity:.9}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-functions-popover .dcg-interior-buttons{padding:5px}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-functions-popover .dcg-option{border-bottom:1px solid rgba(0,0,0,.2);cursor:pointer;margin:4px 1px 0 3px!important;width:60px;height:38px;line-height:28px;text-align:center;line-height:38px;padding:0}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-functions-popover.dcg-left{top:auto;bottom:5px;right:18%;left:auto}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-functions-popover.dcg-left .dcg-arrow{top:auto;border-left-color:var(--dcg-custom-background-color, #fff)}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-functions-popover.dcg-top .dcg-arrow{border-top-color:var(--dcg-custom-background-color, #fff)}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-functions-popover .dcg-popover-interior{width:330px}.dcg-calculator-api-container-v1_12 .dcg-projector-mode .dcg-functions-popover .dcg-interior-buttons{font-size:80%}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-functions-popover.dcg-two-column .dcg-popover-interior{width:calc(100% + 2px)}.dcg-calculator-api-container-v1_12 .dcg-keypad .dcg-functions-popover.dcg-two-column .dcg-popover-interior .dcg-keypad-btn-container{width:50%}.dcg-calculator-api-container-v1_12 .dcg-keypad-row{padding:0;display:flex;flex-flow:row nowrap;align-items:stretch;margin:0}.dcg-calculator-api-container-v1_12 .dcg-geometry-toolbar-view{position:absolute;top:0;right:0;z-index:2;padding:5px;box-shadow:4px 0 6px #0003;height:48px;border-bottom:1px solid rgba(0,0,0,.2);background:linear-gradient(#fcfcfc,#eaeaea);display:flex}.dcg-calculator-api-container-v1_12 .dcg-geometry-toolbar-view .dcg-header-left .dcg-tooltip-hit-area-container{float:left}.dcg-calculator-api-container-v1_12 .dcg-geometry-toolbar-view.dcg-after-initial-load .dcg-animate-in-after-initial-load{animation:dcg-fadeIn .3s}.dcg-calculator-api-container-v1_12 .dcg-geometry-toolbar-view .dcg-flex-spacer{flex:1}.dcg-calculator-api-container-v1_12 .dcg-geometry-toolbar-view .dcg-geo-undo-redo-container{display:inline-block}.dcg-calculator-api-container-v1_12 .dcg-geometry-toolbar-view .dcg-geo-undo-redo-container.dcg-overgraph-undo-redo{position:absolute;top:53px;left:5px}.dcg-calculator-api-container-v1_12 .dcg-complex-tool-instruction-view .dcg-step-upcoming span,.dcg-calculator-api-container-v1_12 .dcg-complex-tool-instruction-view .dcg-step-active-icon span{width:16px;height:16px;display:inline-block;border-radius:50%;margin:0 3px}.dcg-calculator-api-container-v1_12 .dcg-complex-tool-instruction-view .dcg-step-upcoming span{border:1px solid rgba(0,0,0,.2);position:relative;top:2px;display:none}.dcg-calculator-api-container-v1_12 .dcg-complex-tool-instruction-view .dcg-step-active-icon span{display:none;background:#2f72dc;line-height:16px;text-align:center;font-size:80%;position:relative;top:-1px;color:#fff}.dcg-calculator-api-container-v1_12 .dcg-complex-tool-instruction-view .dcg-active-step{margin-right:5px;font-size:.9rem}.dcg-calculator-api-container-v1_12 .dcg-complex-tool-instruction-view .dcg-step-upcoming span,.dcg-calculator-api-container-v1_12 .dcg-complex-tool-instruction-view .dcg-active-step{animation:dcg-fadeIn .3s}.dcg-calculator-api-container-v1_12 .dcg-complex-tool-instruction-view .dcg-input-flex-container .dcg-btn-purple{padding:4px 6px;font-size:90%;position:relative;top:1px}.dcg-calculator-api-container-v1_12 .dcg-complex-tool-instruction-view .dcg-input-flex-container .dcg-btn-purple.dcg-disabled{pointer-events:none;opacity:.6}.dcg-calculator-api-container-v1_12 .dcg-complex-tool-instruction-view .dcg-mathquill-wrapper .dcg-mq-container .dcg-math-field{min-width:45px;max-width:45px;border:2px solid rgba(0,0,0,.2);border-radius:5px;padding:4px 0 4px 4px;margin:0 2px 0 4px;font-size:90%}.dcg-calculator-api-container-v1_12 .dcg-complex-tool-instruction-view .dcg-mathquill-wrapper .dcg-mq-container .dcg-math-field .dcg-mq-root-block{padding-right:5px}.dcg-calculator-api-container-v1_12 .dcg-complex-tool-instruction-view .dcg-mathquill-wrapper .dcg-mq-container .dcg-math-field:after{display:none}.dcg-calculator-api-container-v1_12 .dcg-complex-tool-instruction-view .dcg-mathquill-wrapper .dcg-mq-container .dcg-math-field.dcg-hovered{background:#fff}.dcg-calculator-api-container-v1_12 .dcg-complex-tool-instruction-view .dcg-mathquill-wrapper .dcg-mq-container .dcg-math-field.dcg-focus{border:2px solid #7c69b3;background:#fff}.dcg-calculator-api-container-v1_12 .dcg-complex-tool-instruction-view .dcg-mathquill-wrapper .dcg-mq-container .dcg-math-field.dcg-invalid{border:2px solid #e15855}@media (max-width: 450px){.dcg-calculator-api-container-v1_12 .dcg-complex-tool-instruction-view .dcg-active-step-text{font-size:90%}}@keyframes dcg-fadeIn-zoomRestore{0%{transform:scale(.75);opacity:0}to{transform:scale(1);opacity:1}}.dcg-calculator-api-container-v1_12 .dcg-left-pillboxes{position:absolute;left:5px;top:5px;z-index:2;display:flex;gap:5px}.dcg-calculator-api-container-v1_12 .dcg-left-pillboxes.dcg-geometry-toolbar-present{top:53px}.dcg-calculator-api-container-v1_12 .dcg-left-pillboxes .dcg-icon-redo,.dcg-calculator-api-container-v1_12 .dcg-left-pillboxes .dcg-icon-undo{font-size:1.1rem}.dcg-calculator-api-container-v1_12 .dcg-left-pillboxes .dcg-left-3d-viewport-controls{display:flex;flex-direction:row;gap:5px}.dcg-calculator-api-container-v1_12 .dcg-left-pillboxes .dcg-left-3d-zoom-controls{display:flex;flex-direction:column;gap:5px}.dcg-calculator-api-container-v1_12 .dcg-overgraph-pillbox-elements{pointer-events:none;display:flex;gap:5px}.dcg-calculator-api-container-v1_12 .dcg-overgraph-pillbox-elements .dcg-tooltip-hit-area-container{pointer-events:auto}.dcg-calculator-api-container-v1_12 .dcg-overgraph-pillbox-elements .dcg-right-pillbox-elements{display:flex;flex-direction:column;gap:5px}.dcg-calculator-api-container-v1_12 .dcg-pillbox-view .dcg-icon-plus,.dcg-calculator-api-container-v1_12 .dcg-pillbox-view .dcg-icon-minus{font-size:75%}.dcg-calculator-api-container-v1_12 .dcg-pillbox-view .dcg-icon-xy-plane{font-size:150%;line-height:35px}.dcg-calculator-api-container-v1_12 .dcg-pillbox-view .dcg-icon-3d-cube{font-size:135%;line-height:35px}.dcg-calculator-api-container-v1_12 .dcg-pillbox-view .dcg-icon-wrench{position:relative;top:-1px}.dcg-calculator-api-container-v1_12 .dcg-pillbox-btn-interior{height:37px;width:37px;line-height:37px;text-align:center;transition:opacity .3s}.dcg-calculator-api-container-v1_12 .dcg-pillbox-btn-interior.dcg-disabled{opacity:.3;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-action-settings .dcg-icon-lock{position:absolute;bottom:2px;right:2px;font-size:8px;padding:3px;border-radius:50%;color:#fff;background:#00000080;text-shadow:none;opacity:1}.dcg-calculator-api-container-v1_12 .dcg-action-settings .dcg-icon-error{position:absolute;bottom:3px;right:3px;color:#fa824c;text-shadow:none;opacity:1;font-size:.8rem}.dcg-calculator-api-container-v1_12 .dcg-pillbox-container{position:absolute;right:5px;top:5px;bottom:0;width:0;z-index:2}.dcg-calculator-api-container-v1_12 .dcg-pillbox-container.dcg-geometry-toolbar-present{top:53px}.dcg-calculator-api-container-v1_12 .dcg-pillbox-container .dcg-overgraph-pillbox-elements{position:absolute;top:0;right:0}.dcg-calculator-api-container-v1_12 .dcg-btn-flat-gray-group .dcg-pillbox-btn-interior{width:100%;height:35px}.dcg-calculator-api-container-v1_12 .dcg-btn-flat-gray-group.dcg-group-vertical{width:37px}.dcg-calculator-api-container-v1_12 .dcg-btn-flat-gray-group.dcg-group-vertical .dcg-tooltip-hit-area-container:not(:last-of-type){border-bottom:1px solid rgba(0,0,0,.1)}.dcg-calculator-api-container-v1_12 .dcg-btn-flat-gray-group.dcg-group-horizontal.dcg-group-horizontal .dcg-tooltip-hit-area-container:not(:last-of-type){border-right:1px solid rgba(0,0,0,.1)}.dcg-calculator-api-container-v1_12 .dcg-action-zoomrestore{animation:dcg-fadeIn-zoomRestore .25s}.dcg-calculator-api-container-v1_12 .dcg-group-horizontal{display:flex;flex-direction:row;width:77px;height:37px}.dcg-calculator-api-container-v1_12 .dcg-btn-flat-gray{background:var(--dcg-custom-background-color-shaded, #ededed);box-shadow:0 0 5px #0000001a;border:1px solid rgba(0,0,0,.1);border-radius:5px;text-shadow:0 1px #fff}.dcg-calculator-api-container-v1_12 .dcg-btn-flat-gray i{opacity:.6}.dcg-calculator-api-container-v1_12 .dcg-btn-flat-gray:not(.dcg-btn-flat-gray-group).dcg-hovered i,.dcg-calculator-api-container-v1_12 .dcg-btn-flat-gray.dcg-btn-flat-gray-group .dcg-tooltip-hit-area-container:not(.dcg-tooltip-disabled).dcg-hovered i{opacity:.9}.dcg-calculator-api-container-v1_12 .dcg-btn-flat-gray:not(.dcg-btn-flat-gray-group).dcg-depressed,.dcg-calculator-api-container-v1_12 .dcg-btn-flat-gray:not(.dcg-btn-flat-gray-group).dcg-active,.dcg-calculator-api-container-v1_12 .dcg-btn-flat-gray.dcg-btn-flat-gray-group .dcg-tooltip-hit-area-container:not(.dcg-tooltip-disabled).dcg-depressed,.dcg-calculator-api-container-v1_12 .dcg-btn-flat-gray.dcg-btn-flat-gray-group .dcg-tooltip-hit-area-container:not(.dcg-tooltip-disabled).dcg-active{background:var(--dcg-custom-background-color-shaded, #e8e8e8)}.dcg-calculator-api-container-v1_12 .dcg-btn-flat-gray:not(.dcg-btn-flat-gray-group).dcg-depressed i,.dcg-calculator-api-container-v1_12 .dcg-btn-flat-gray:not(.dcg-btn-flat-gray-group).dcg-active i,.dcg-calculator-api-container-v1_12 .dcg-btn-flat-gray.dcg-btn-flat-gray-group .dcg-tooltip-hit-area-container:not(.dcg-tooltip-disabled).dcg-depressed i,.dcg-calculator-api-container-v1_12 .dcg-btn-flat-gray.dcg-btn-flat-gray-group .dcg-tooltip-hit-area-container:not(.dcg-tooltip-disabled).dcg-active i{opacity:1}.dcg-calculator-api-container-v1_12 .dcg-has-background-color .dcg-btn-flat-gray{text-shadow:none}.dcg-calculator-api-container-v1_12 .dcg-settings-view-container{line-height:0}.dcg-calculator-api-container-v1_12 .dcg-settings-view-container .dcg-settings-container{position:absolute;top:2px;right:38px;line-height:1em}.dcg-calculator-api-container-v1_12 .dcg-displaysizegroup{padding-bottom:8px}.dcg-calculator-api-container-v1_12 .dcg-settings-container{bottom:auto;width:290px}.dcg-calculator-api-container-v1_12 .dcg-settings-container.dcg-left .dcg-arrow{top:18px;border-left-color:var(--dcg-custom-background-color, #fff)}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-popover-interior{padding:10px;background-color:var(--dcg-custom-background-color, #fff);color:var(--dcg-custom-text-color, #000)}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-visual-settings{padding-bottom:10px;border-bottom:1px solid #e2e2e2}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-step-label{font-size:85%;color:var(--dcg-custom-text-color, #454545)}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-top-section-flex{display:flex;padding-top:10px}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-top-section-flex .dcg-checkbox{margin-top:3px}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-top-section-flex .dcg-grid-settings{min-width:110px}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-top-section-flex .dcg-grid-settings .dcg-checkbox{margin-bottom:2px}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-top-section-flex .dcg-top-checkboxes-container .dcg-checkbox{margin-bottom:3px}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-action-zoom-square{float:left;clear:left;font-size:80%;margin:3px 0;padding:3px 10px;line-height:1.5em}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-axes-settings-container{border-top:1px solid #e2e2e2;margin-top:10px}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-axes-settings-container .dcg-x-axis-title,.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-axes-settings-container .dcg-y-axis-title{display:grid;grid-template-columns:55% 45%;font-size:95%;line-height:normal;margin-bottom:2px;margin-top:5px}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-axes-settings-container .dcg-x-axis-title .dcg-checkbox,.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-axes-settings-container .dcg-y-axis-title .dcg-checkbox{margin-top:1em}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-axes-settings-container .dcg-x-axis-title.dcg-y-axis-title,.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-axes-settings-container .dcg-y-axis-title.dcg-y-axis-title{margin-top:12px}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-axes-settings-container .dcg-x-axis-title .dcg-axis-label,.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-axes-settings-container .dcg-y-axis-title .dcg-axis-label{position:relative;margin-bottom:-10px}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-axes-settings-container .dcg-x-axis-title .dcg-axis-label:focus-within label,.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-axes-settings-container .dcg-y-axis-title .dcg-axis-label:focus-within label{color:var(--dcg-accent-color, #2f72dc)}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-axes-settings-container .dcg-x-axis-title .dcg-axis-label label,.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-axes-settings-container .dcg-y-axis-title .dcg-axis-label label{position:absolute;padding:0 3px;font-size:85%;left:4px;top:2px;color:var(--dcg-custom-text-color, #666);background:var(--dcg-custom-background-color, #fff);margin:0;line-height:normal}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-axes-settings-container .dcg-x-axis-title .dcg-axis-label input,.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-axes-settings-container .dcg-y-axis-title .dcg-axis-label input{outline:none;margin-top:.7em;border-radius:5px;width:100%;color:var(--dcg-custom-text-color, #454545);font-size:var(--dcg-minimum-input-font-size, 90%);padding:7px;-webkit-appearance:none;appearance:none;border:1px solid var(--dcg-custom-text-color, rgba(0, 0, 0, .42));background:var(--dcg-custom-background-color, #fff)}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-axes-settings-container .dcg-x-axis-title .dcg-axis-label input.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-axes-settings-container .dcg-y-axis-title .dcg-axis-label input.dcg-hovered{border:1px solid var(--dcg-custom-text-color, rgba(0, 0, 0, .42));box-shadow:0 0 0 1px var(--dcg-custom-text-color, rgba(0, 0, 0, .42))}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-axes-settings-container .dcg-x-axis-title .dcg-axis-label input:focus,.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-axes-settings-container .dcg-y-axis-title .dcg-axis-label input:focus{border:1px solid var(--dcg-accent-color, #2f72dc);box-shadow:0 0 0 1px var(--dcg-accent-color, #2f72dc)}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-radiangroup,.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-dimensiongroup,.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-complex-container{border-top:1px solid #e2e2e2;padding-top:10px;margin-top:10px}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-arrows{text-align:center}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-arrows i{font-size:26px;line-height:28px}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-circle-icon-group{margin-left:24px;margin-bottom:4px}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-circle-icon{display:inline-block;cursor:pointer;width:28px;height:28px;border-radius:14px;box-shadow:0 0 2px #0003 inset;background-color:#f9f9f9;background-size:contain;background-position:center center;background-repeat:no-repeat;color:#777}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-circle-icon.dcg-selected{background-color:#666;color:#ffffffe6;cursor:default}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-circle-icon:not(.dcg-selected).dcg-hovered{box-shadow:inset 0 0 0 2px #0000001a}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-circle-icon:not(.dcg-selected).dcg-depressed{box-shadow:inset 0 0 0 2px #0003}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-circle-icon.dcg-action-cartesian,.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-circle-icon.dcg-action-polar{border:1px solid rgba(0,0,0,.42);overflow:hidden;font-size:26px}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-circle-icon.dcg-action-cartesian.dcg-selected,.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-circle-icon.dcg-action-polar.dcg-selected{color:#fff}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-braille-container{margin-top:10px}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-braille-container .dcg-braille-options-container{padding-left:28px}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-braille-container .dcg-braille-options-container .dcg-braille-options-buttons{margin-top:5px}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-interval-interior{margin:0 -6px}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-editable-mathquill-container{margin-top:12px;position:relative;white-space:nowrap}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-editable-mathquill-container .dcg-step-container{float:right;margin-bottom:10px}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-editable-mathquill-container .dcg-mathquill-wrapper{display:inline-block}.dcg-calculator-api-container-v1_12 .dcg-settings-container .dcg-editable-mathquill-container .dcg-mathquill-wrapper .dcg-braille-input{max-width:50px;font-size:100%}.dcg-calculator-api-container-v1_12 .dcg-displaysize-large{font-size:150%}.dcg-calculator-api-container-v1_12 .dcg-2dplane-opacity{max-width:50px;margin-left:5px}.dcg-calculator-api-container-v1_12 .dcg-narrow .dcg-settings-container{right:35px;width:260px}.dcg-calculator-api-container-v1_12 .dcg-advanced-graph-settings-view .dcg-advanced-toggle i.dcg-icon-caret-down{display:inline-block;transition:transform .2s}.dcg-calculator-api-container-v1_12 .dcg-advanced-graph-settings-view .dcg-advanced-toggle:not([aria-expanded=true]):not([open]) i.dcg-icon-caret-down{transform:rotate(-90deg)}.dcg-calculator-api-container-v1_12 .dcg-advanced-graph-settings-view:not(.dcg-three-d-domain) .dcg-checkbox-title{font-size:95%;height:1.5em;line-height:2em;margin-bottom:2px;margin-top:10px;display:flex;align-items:center}.dcg-calculator-api-container-v1_12 .dcg-advanced-graph-settings-view .dcg-log-axes-container{display:grid;grid-template-columns:auto 1fr;grid-template-rows:1fr 1fr;align-items:center;grid-column-gap:5px;grid-row-gap:10px;font-size:90%}.dcg-calculator-api-container-v1_12 .dcg-advanced-graph-settings-view .dcg-advanced-toggle{color:var(--dcg-custom-text-color, #000);padding-top:5px;font-size:95%}.dcg-calculator-api-container-v1_12 .dcg-advanced-graph-settings-view .dcg-advanced-toggle.dcg-disabled{pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-advanced-graph-settings-view .dcg-advanced-toggle.dcg-disabled i.dcg-icon-caret-down{opacity:.5}.dcg-calculator-api-container-v1_12 .dcg-advanced-graph-settings-view .dcg-advanced-toggle.dcg-margin-top{margin-top:10px}.dcg-calculator-api-container-v1_12 .dcg-advanced-graph-settings-view .dcg-advanced-toggle i.dcg-icon-caret-down{margin-right:4px;color:#949494;font-size:90%}.dcg-calculator-api-container-v1_12 .dcg-advanced-graph-settings-view .dcg-advanced-toggle.dcg-hovered i.dcg-icon-caret-down{color:#666}.dcg-calculator-api-container-v1_12 .dcg-advanced-graph-settings-view .dcg-advanced-toggle.dcg-depressed,.dcg-calculator-api-container-v1_12 .dcg-advanced-graph-settings-view .dcg-advanced-toggle.dcg-depressed i.dcg-icon-caret-down{color:#222}.dcg-calculator-api-container-v1_12 .dcg-advanced-graph-settings-view .dcg-advanced-contents{border-left:1px solid rgba(0,0,0,.2);padding:8px 10px 4px;margin-left:6px;animation:dcg-fadeIn .3s}.dcg-calculator-api-container-v1_12 .dcg-advanced-graph-settings-view .dcg-advanced-contents .dcg-checkbox-title{font-size:90%;margin-top:3px}.dcg-calculator-api-container-v1_12 .dcg-advanced-graph-settings-view .dcg-editable-mathquill-container{margin-top:5px;margin-bottom:5px}.dcg-calculator-api-container-v1_12 .dcg-six-key-checkbox .dcg-checkbox{margin:5px 0}.dcg-calculator-api-container-v1_12 .dcg-refreshable-braille-note{font-size:95%;color:var(--dcg-custom-text-color, #666)}.dcg-calculator-api-container-v1_12 .dcg-refreshable-braille-note a{text-decoration:underline}.dcg-calculator-api-container-v1_12 .dcg-complex-options-section .dcg-complex-enabled-note{font-size:95%;color:#666}.dcg-calculator-api-container-v1_12 .dcg-3d-settings-flex-container{display:flex;flex-direction:row;gap:8px}.dcg-calculator-api-container-v1_12 .dcg-options-menu-section-title__disabled{font-style:italic;color:var(--dcg-custom-text-color, #949494)}.dcg-calculator-api-container-v1_12 .dcg-options-menu-section-title__disabled .dcg-learn-more-link{margin-top:-10px;margin-bottom:-10px;margin-left:1px;float:left;top:-1px}.dcg-calculator-api-container-v1_12 .dcg-settings-view-3d-container .dcg-show-axis-labels-section{display:flex;flex-wrap:wrap;justify-content:space-between;margin-top:7px;gap:7px}.dcg-calculator-api-container-v1_12 .dcg-settings-view-3d-container .dcg-three-d-disable-rotation-container{padding-top:3px}.dcg-calculator-api-container-v1_12 .dcg-settings-view-3d-container .dcg-three-d-disable-rotation-container .dcg-segmented-control-container.dcg-theme-default .dcg-segmented-control-btn .dcg-segmented-control-interior{height:unset;min-height:34px;line-height:1.2em;align-content:center}.dcg-calculator-api-container-v1_12 .dcg-settings-view-3d-container .dcg-inline-math-input-view .dcg-math-field.dcg-math-field{border-bottom:1px solid rgba(0,0,0,.2);padding:1px 2px;margin:1px;min-width:35px;max-width:60px}.dcg-calculator-api-container-v1_12 .dcg-settings-view-3d-container .dcg-inline-math-input-view .dcg-math-field.dcg-math-field.dcg-focus,.dcg-calculator-api-container-v1_12 .dcg-settings-view-3d-container .dcg-inline-math-input-view .dcg-math-field.dcg-math-field.dcg-focus-visible,.dcg-calculator-api-container-v1_12 .dcg-settings-view-3d-container .dcg-inline-math-input-view .dcg-math-field.dcg-math-field.dcg-invalid{border-bottom:2px solid var(--dcg-accent-color, #2f72dc);margin-bottom:0}.dcg-calculator-api-container-v1_12 .dcg-settings-view-3d-container .dcg-inline-math-input-view .dcg-math-field.dcg-math-field.dcg-invalid{border-bottom:2px solid #e15855}.dcg-calculator-api-container-v1_12 .dcg-settings-view-3d-container .dcg-inline-math-input-view .dcg-math-field.dcg-math-field.dcg-hovered:not(.dcg-focus):not(.dcg-invalid):not(.dcg-static-mathquill-view):not(.dcg-focus-visible){border-bottom:2px solid #ccc;margin-bottom:0}.dcg-calculator-api-container-v1_12 .dcg-settings-view-3d-container .dcg-popover-interior{padding:10px 0}.dcg-calculator-api-container-v1_12 .dcg-settings-view-3d-container .dcg-checkbox{font-size:95%;margin-top:5px;color:#666}.dcg-calculator-api-container-v1_12 .dcg-settings-view-3d-container .dcg-braille-options-buttons{margin-top:3px}.dcg-calculator-api-container-v1_12 .dcg-local-display-preferences-title{margin-bottom:7px}.dcg-calculator-api-container-v1_12 .dcg-perspective-slider{display:flex;margin-top:5px;gap:7px;align-items:center}.dcg-calculator-api-container-v1_12 .dcg-perspective-slider i.dcg-icon-3d-cube,.dcg-calculator-api-container-v1_12 .dcg-perspective-slider i.dcg-icon-3d-perspective{cursor:pointer;color:#666}.dcg-calculator-api-container-v1_12 .dcg-perspective-slider i.dcg-icon-3d-perspective{font-size:1.5em;position:relative;top:.05em}.dcg-calculator-api-container-v1_12 .dcg-three-d-domain .dcg-options-menu-section-title{height:1.2rem}.dcg-calculator-api-container-v1_12 .dcg-three-d-domain .dcg-axis-label{padding-right:5px;display:inline-block}.dcg-calculator-api-container-v1_12 .dcg-three-d-domain .dcg-axis-label .dcg-mq-math-mode{cursor:inherit}.dcg-calculator-api-container-v1_12 .dcg-three-d-domain .dcg-axis-label-to{margin-right:5px;font-size:95%;color:#666}.dcg-calculator-api-container-v1_12 .dcg-three-d-domain .dcg-three-d-domain-toggle-container{margin-top:4px;display:flex;margin-bottom:-5px}.dcg-calculator-api-container-v1_12 .dcg-three-d-domain.dcg-advanced-graph-settings-view .dcg-advanced-contents{margin-top:-10px}.dcg-calculator-api-container-v1_12 .dcg-three-d-domain.dcg-advanced-graph-settings-view .dcg-advanced-contents .dcg-editable-mathquill-container{margin-top:0}.dcg-calculator-api-container-v1_12 .dcg-three-d-domain .dcg-btn-light-gray,.dcg-calculator-api-container-v1_12 .dcg-three-d-domain .dcg-btn-blue{font-size:.8rem;padding:3px 10px;line-height:1.3rem;display:inline-block;animation:dcg-fadeIn .3s}.dcg-calculator-api-container-v1_12 .dcg-three-d-domain .dcg-action-zoom-recenter{position:relative;color:#000;top:-5px}.dcg-calculator-api-container-v1_12 .dcg-three-d-domain .dcg-z-axis-options.dcg-editable-mathquill-container{margin-bottom:0}.dcg-calculator-api-container-v1_12 .dcg-three-d-domain .dcg-action-zoom-square-3d{margin-top:8px}.dcg-calculator-api-container-v1_12 .dcg-three-d-domain .dcg-flex-container{display:flex}.dcg-calculator-api-container-v1_12 .dcg-three-d-domain .dcg-flex-container :first-child{flex:1}.dcg-calculator-api-container-v1_12 .dcg-toast-view{position:absolute;top:7px;left:50px;right:50px;height:0;text-align:center;z-index:5;overflow:visible;text-shadow:none;color:#222;line-height:1em;transition:.3s opacity}.dcg-calculator-api-container-v1_12 .dcg-toast-view:not(.dcg-visible){opacity:0;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-toast-view.dcg-below-geo-toolbar{top:55px}.dcg-calculator-api-container-v1_12 .dcg-toast-view .dcg-toast-wrapper{pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-toast-view .dcg-toast{display:inline-block;padding:6px 10px;background:#fef2ad;border:1px solid #fed973;border-radius:4px;font-size:85%;box-shadow:0 2px 6px #0000001a;position:relative;pointer-events:auto}.dcg-calculator-api-container-v1_12 .dcg-toast-view .dcg-toast i.dcg-icon-error{display:none}.dcg-calculator-api-container-v1_12 .dcg-toast-view .dcg-toast a.dcg-undo{padding:8px;margin:-8px -8px -8px 0}.dcg-calculator-api-container-v1_12 .dcg-toast-view .dcg-toast i.dcg-icon-remove{font-size:87%;padding:8px;margin:-5px -10px -8px 2px;color:#0003;cursor:pointer;float:right}.dcg-calculator-api-container-v1_12 .dcg-toast-view .dcg-toast i.dcg-icon-remove.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-toast-view .dcg-toast i.dcg-icon-remove:focus{color:#0009}.dcg-calculator-api-container-v1_12 .dcg-toast-view .dcg-toast i.dcg-icon-remove.dcg-depressed{color:#000000b3}.dcg-calculator-api-container-v1_12 .dcg-toast-view .dcg-toast a{margin-left:6px;text-decoration:underline;cursor:pointer;display:inline-block;color:#333;font-weight:600}.dcg-calculator-api-container-v1_12 .dcg-toast-view .dcg-toast a.dcg-hovered{color:#000}.dcg-calculator-api-container-v1_12 .dcg-toast-view .dcg-toast-cover{display:none}.dcg-calculator-api-container-v1_12 .dcg-toast-view[toast-style=error] .dcg-toast{padding-left:28px}.dcg-calculator-api-container-v1_12 .dcg-toast-view[toast-style=error] .dcg-toast i.dcg-icon-error{position:absolute;top:7px;left:10px;color:#fc944c;display:block}.dcg-calculator-api-container-v1_12 .dcg-toast-view[toast-style=cover]{position:absolute;top:0;left:0;right:0;padding-top:5px;height:100%;z-index:999}.dcg-calculator-api-container-v1_12 .dcg-toast-view[toast-style=cover] .dcg-toast-cover{position:absolute;top:0;left:0;bottom:0;right:0;opacity:.3;display:block;background-color:#000}.dcg-calculator-api-container-v1_12 .dcg-drop-image{position:absolute;top:0;right:0;left:0;bottom:0;z-index:3;text-align:center;vertical-align:middle;background:#ffffff80;border:8px dashed #bbb;font-family:sans-serif;color:#bbb;font-size:370%}.dcg-calculator-api-container-v1_12 .dcg-drop-image span{position:absolute;bottom:0;left:0;right:0;top:0;height:3.6em;line-height:1.2em;margin:auto;padding:0 20px}.dcg-calculator-api-container-v1_12 .dcg-exppanel-outer__wrapper{--dcg-item-background-color: var(--dcg-custom-background-color, #fff)}.dcg-calculator-api-container-v1_12 .dcg-exppanel-outer{display:inline-block;overflow-x:visible;margin-left:0}.dcg-calculator-api-container-v1_12 .dcg-exppanel-outer .dcg-exppanel-container{z-index:2;width:100%;position:absolute;top:0;bottom:0;transition:transform .25s ease-out;display:flex;flex-direction:column}.dcg-calculator-api-container-v1_12 .dcg-exppanel-outer .dcg-exppanel-container.dcg-add-shadow{box-shadow:0 -4px 6px #0003}.dcg-calculator-api-container-v1_12 .dcg-show-expressions-tab{opacity:0;animation:dcg-fadeIn .3s forwards;animation-delay:.4s}.dcg-calculator-api-container-v1_12 .dcg-exppanel{flex:1;overflow-x:hidden;overflow-y:auto;overflow-anchor:none;border-right:1px solid rgba(0,0,0,.2);z-index:0;-webkit-overflow-scrolling:touch}.dcg-calculator-api-container-v1_12 .dcg-exppanel .dcg-expressionlist{display:flex;flex-direction:column;min-height:100%}.dcg-calculator-api-container-v1_12 .dcg-narrow .dcg-exppanel-container{border-top:1px solid rgba(0,0,0,.2)}.dcg-calculator-api-container-v1_12 .dcg-narrow .dcg-exppanel-container.dcg-add-shadow{box-shadow:0 0 6px #0003}.dcg-calculator-api-container-v1_12 .dcg-narrow .dcg-exppanel{border-right:0}.dcg-calculator-api-container-v1_12 .dcg-exp-list-resizer{position:absolute;top:0;right:-12px;bottom:0;width:15px;touch-action:none;cursor:ew-resize;z-index:4}.dcg-calculator-api-container-v1_12 .dcg-exp-list-resizer.dcg-depressed{width:215px;right:-112px}.dcg-calculator-api-container-v1_12 .dcg-table-column-menu{left:-9px;top:34px}.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-triangle{border-width:0 9px 9px 9px;border-color:transparent transparent #d3d3d3 transparent}.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-triangle:before{position:absolute;top:1px;left:-8px;border-width:0 8px 8px 8px;border-color:transparent transparent #fff transparent}.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-options-menu__regression-btn-container{text-align:center}.dcg-calculator-api-container-v1_12 .dcg-table-column-menu .dcg-options-menu__regression-btn-container button{width:100%;font-size:.9rem;padding-top:.4rem;padding-bottom:.4rem;line-height:1em}.dcg-calculator-api-container-v1_12 .dcg-expression-search-bar{padding:5px;background:#d8d8d8;position:relative}.dcg-calculator-api-container-v1_12 .dcg-expression-search-bar .dcg-search-row{display:flex;align-items:center}.dcg-calculator-api-container-v1_12 .dcg-expression-search-bar.dcg-expressions-scrolled{box-shadow:-2px 2px 4px #0000001a;z-index:4}.dcg-calculator-api-container-v1_12 .dcg-expression-search-bar .dcg-search-mathquill-container{flex:1;position:relative;overflow:hidden}.dcg-calculator-api-container-v1_12 .dcg-expression-search-bar .dcg-search-placeholder{opacity:.3;position:absolute;top:50%;left:35px;margin-top:-.5em;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-expression-search-bar .dcg-mq-container{width:100%}.dcg-calculator-api-container-v1_12 .dcg-expression-search-bar .dcg-math-field{padding:6px 30px 6px 6px;margin:1px;border-radius:8px;background:#fff;width:100%;font-size:100%;color:#888;border:1px solid #bbb}.dcg-calculator-api-container-v1_12 .dcg-expression-search-bar .dcg-math-field.dcg-hovered{color:#454545;border:2px solid #949494;margin:0}.dcg-calculator-api-container-v1_12 .dcg-expression-search-bar .dcg-math-field.dcg-mq-focused{color:#000;border:2px solid #2f72dc;margin:0}.dcg-calculator-api-container-v1_12 .dcg-expression-search-bar .dcg-search-mathquill-container .dcg-math-field{padding-left:30px}.dcg-calculator-api-container-v1_12 .dcg-expression-search-bar .dcg-icon-remove,.dcg-calculator-api-container-v1_12 .dcg-expression-search-bar .dcg-icon-search,.dcg-calculator-api-container-v1_12 .dcg-expression-search-bar .dcg-icon-replace{opacity:.2}.dcg-calculator-api-container-v1_12 .dcg-expression-search-bar .dcg-icon-remove.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-expression-search-bar .dcg-icon-search.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-expression-search-bar .dcg-icon-replace.dcg-hovered{opacity:.6}.dcg-calculator-api-container-v1_12 .dcg-expression-search-bar .dcg-icon-remove.dcg-depressed,.dcg-calculator-api-container-v1_12 .dcg-expression-search-bar .dcg-icon-search.dcg-depressed,.dcg-calculator-api-container-v1_12 .dcg-expression-search-bar .dcg-icon-replace.dcg-depressed{opacity:.8}.dcg-calculator-api-container-v1_12 .dcg-expression-search-bar .dcg-icon-replace.dcg-disabled{opacity:0}.dcg-calculator-api-container-v1_12 .dcg-expression-search-bar .dcg-icon-remove,.dcg-calculator-api-container-v1_12 .dcg-expression-search-bar .dcg-icon-replace{font-size:90%;padding:10px 7px 10px 12px}.dcg-calculator-api-container-v1_12 .dcg-expression-search-bar .dcg-icon-search{pointer-events:none;left:5px;position:absolute;top:50%;right:5px;height:20px;line-height:20px;margin-top:-15px;padding:5px}.dcg-calculator-api-container-v1_12 .dcg-expression-search-bar .dcg-search-replace-icon-container{position:absolute;top:50%;right:5px;margin-top:-9px;font-size:110%}.dcg-calculator-api-container-v1_12 .dcg-expression-search-bar .dcg-search-replace-icon-container .dcg-tooltipped-error{position:relative;top:-1px;left:-2px}.dcg-calculator-api-container-v1_12 .dcg-expression-search-bar .dcg-search-replace-icon-container .dcg-icon-check{color:#2f72dc;margin-right:5px}.dcg-calculator-api-container-v1_12 .dcg-container.dcg-narrow .dcg-expression-top-bar{border-right:0;touch-action:none;cursor:ns-resize}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-expression-top-bar .dcg-icon-btn,.dcg-calculator-api-container-v1_12 .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn{width:40px;height:40px;line-height:40px;font-size:1.1rem;display:inline-block;border-radius:5px;text-align:center;margin:-1px;overflow:hidden}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-expression-top-bar .dcg-icon-btn.dcg-constructions-count-link,.dcg-calculator-api-container-v1_12 .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn.dcg-constructions-count-link{margin-right:4px}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-expression-top-bar .dcg-icon-btn.dcg-rotated,.dcg-calculator-api-container-v1_12 .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn.dcg-rotated{transform:rotate(-90deg)}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-expression-top-bar .dcg-icon-btn i.dcg-icon-pause,.dcg-calculator-api-container-v1_12 .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn i.dcg-icon-pause{font-size:80%}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-expression-top-bar .dcg-icon-btn i.dcg-icon-undo,.dcg-calculator-api-container-v1_12 .dcg-container .dcg-expression-top-bar .dcg-icon-btn i.dcg-icon-redo,.dcg-calculator-api-container-v1_12 .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn i.dcg-icon-undo,.dcg-calculator-api-container-v1_12 .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn i.dcg-icon-redo{font-size:120%}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-expression-top-bar .dcg-icon-btn i,.dcg-calculator-api-container-v1_12 .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn i{opacity:.6}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-expression-top-bar .dcg-icon-btn:not(:last-of-type),.dcg-calculator-api-container-v1_12 .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn:not(:last-of-type){margin-right:-2px}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-expression-top-bar .dcg-icon-btn.dcg-disabled,.dcg-calculator-api-container-v1_12 .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn.dcg-disabled{opacity:.3;cursor:default}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-expression-top-bar .dcg-icon-btn:not(.dcg-disabled).dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-container .dcg-expression-top-bar .dcg-icon-btn:not(.dcg-disabled).dcg-active,.dcg-calculator-api-container-v1_12 .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn:not(.dcg-disabled).dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn:not(.dcg-disabled).dcg-active{background:#0000001a}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-expression-top-bar .dcg-icon-btn:not(.dcg-disabled).dcg-hovered i,.dcg-calculator-api-container-v1_12 .dcg-container .dcg-expression-top-bar .dcg-icon-btn:not(.dcg-disabled).dcg-active i,.dcg-calculator-api-container-v1_12 .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn:not(.dcg-disabled).dcg-hovered i,.dcg-calculator-api-container-v1_12 .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn:not(.dcg-disabled).dcg-active i{opacity:.8}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-expression-top-bar .dcg-icon-btn:not(.dcg-disabled).dcg-depressed,.dcg-calculator-api-container-v1_12 .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn:not(.dcg-disabled).dcg-depressed{background:#0003}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-expression-top-bar .dcg-icon-btn:not(.dcg-disabled).dcg-depressed i,.dcg-calculator-api-container-v1_12 .dcg-container .dcg-geometry-toolbar-view .dcg-icon-btn:not(.dcg-disabled).dcg-depressed i{opacity:1}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-expression-top-bar{border-right:1px solid rgba(0,0,0,.2);height:48px;border-bottom:1px solid rgba(0,0,0,.2);line-height:37px;width:100%;transition:box-shadow .2s ease;padding:5px;display:flex;background:var(--dcg-custom-background-color-shaded, linear-gradient(#fcfcfc, #eaeaea))}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-expression-top-bar.dcg-expressions-scrolled{box-shadow:-2px 2px 4px #0000001a;z-index:4}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-expression-top-bar .dcg-btn-red,.dcg-calculator-api-container-v1_12 .dcg-container .dcg-expression-top-bar .dcg-btn-blue{padding:0 15px;display:inline-block;align-self:center;height:35px;line-height:35px}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-expression-top-bar .dcg-center-buttons{text-align:center;flex:1;white-space:nowrap}.dcg-calculator-api-container-v1_12 .dcg-add-expression-container{position:relative;float:left;height:37px}.dcg-calculator-api-container-v1_12 .dcg-in-api-action-opendrawer{float:left}.dcg-calculator-api-container-v1_12 .dcg-add-expression-container .dcg-popover{width:auto}.dcg-calculator-api-container-v1_12 .dcg-add-expression-container .dcg-popover.dcg-bottom{position:absolute;top:43px;left:-3px}.dcg-calculator-api-container-v1_12 .dcg-add-expression-container .dcg-popover.dcg-bottom .dcg-arrow{left:23px;border-bottom-color:var(--dcg-custom-background-color, #fff)}.dcg-calculator-api-container-v1_12 .dcg-add-expression-container .dcg-popover.dcg-right{position:absolute;top:-40px;left:40px}.dcg-calculator-api-container-v1_12 .dcg-add-expression-container .dcg-popover.dcg-right .dcg-arrow{top:60px;border-right-color:var(--dcg-custom-background-color, #fff)}.dcg-calculator-api-container-v1_12 .dcg-add-expression-container .dcg-popover .dcg-popover-interior{padding:14px 12px 12px;background-color:var(--dcg-custom-background-color, #fff);color:var(--dcg-custom-text-color, #000)}.dcg-calculator-api-container-v1_12 .dcg-add-expression-container .dcg-popover .dcg-popover-interior.dcg-add-expression-dropdown{display:flex;flex-direction:column;gap:16px}.dcg-calculator-api-container-v1_12 .dcg-add-expression-container .dcg-popover .dcg-popover-interior.dcg-add-expression-dropdown .dcg-new-item{cursor:pointer;font-size:80%;text-align:left;white-space:nowrap;opacity:.5;line-height:0}.dcg-calculator-api-container-v1_12 .dcg-add-expression-container .dcg-popover .dcg-popover-interior.dcg-add-expression-dropdown .dcg-new-item.dcg-action-newexpression{margin-bottom:-4px}.dcg-calculator-api-container-v1_12 .dcg-add-expression-container .dcg-popover .dcg-popover-interior.dcg-add-expression-dropdown .dcg-new-item .dcg-expression-icon__container{margin-right:8px;vertical-align:middle;width:30px;display:inline-block;text-align:right;position:relative}.dcg-calculator-api-container-v1_12 .dcg-add-expression-container .dcg-popover .dcg-popover-interior.dcg-add-expression-dropdown .dcg-new-item .dcg-expression-icon__container i{font-size:205%}.dcg-calculator-api-container-v1_12 .dcg-add-expression-container .dcg-popover .dcg-popover-interior.dcg-add-expression-dropdown .dcg-new-item .dcg-expression-icon__container .dcg-icon-new-expression{font-size:210%}.dcg-calculator-api-container-v1_12 .dcg-add-expression-container .dcg-popover .dcg-popover-interior.dcg-add-expression-dropdown .dcg-new-item .dcg-expression-icon__container .dcg-icon-new-table{font-size:200%}.dcg-calculator-api-container-v1_12 .dcg-add-expression-container .dcg-popover .dcg-popover-interior.dcg-add-expression-dropdown .dcg-new-item .dcg-expression-icon__container .dcg-icon-new-folder{font-size:190%}.dcg-calculator-api-container-v1_12 .dcg-add-expression-container .dcg-popover .dcg-popover-interior.dcg-add-expression-dropdown .dcg-new-item .dcg-expression-icon__container .dcg-icon-inference-fill{position:absolute;right:0;opacity:50%}.dcg-calculator-api-container-v1_12 .dcg-add-expression-container .dcg-popover .dcg-popover-interior.dcg-add-expression-dropdown .dcg-new-item.dcg-hovered{opacity:.8}.dcg-calculator-api-container-v1_12 .dcg-add-expression-container .dcg-popover .dcg-popover-interior.dcg-add-expression-dropdown .dcg-new-item.dcg-depressed{opacity:1}.dcg-calculator-api-container-v1_12 .dcg-add-expression-container .dcg-popover .dcg-popover-interior.dcg-add-expression-dropdown .dcg-new-item.dcg-disabled{opacity:.25}.dcg-calculator-api-container-v1_12 .dcg-constructions-count-link{position:relative}.dcg-calculator-api-container-v1_12 .dcg-constructions-count-link i.dcg-icon-geometry{font-size:40px;position:relative;top:-2px}.dcg-calculator-api-container-v1_12 .dcg-constructions-count-link .dcg-construction-count{position:absolute;bottom:1px;right:1px;background:#949494;box-shadow:0 0 0 1px #eee;color:#fff;border-radius:8px;height:16px;min-width:16px;line-height:16px;padding-left:4px;padding-right:4px;text-align:center;font-size:65%;font-family:arial,sans-serif}.dcg-calculator-api-container-v1_12 .dcg-expression-top-bar .dcg-icon-volume{font-size:22px;position:relative;top:2px}@keyframes dcg-fadeOut-indicator{0%{opacity:.5}99%{opacity:.5}to{opacity:0}}@keyframes dcg-animate-mute-bar{0%{transform:rotate(-45deg) scaleX(0)}to{transform:rotate(-45deg) scale(1)}}@keyframes dcg-pulse-mute-button{0%{opacity:0}20%{opacity:1}80%{opacity:0;transform:scale(1.5)}to{opacity:0;transform:scale(1.5)}}.dcg-calculator-api-container-v1_12 .dcg-global-mute-button .dcg-first-time-animation{visibility:hidden}.dcg-calculator-api-container-v1_12 .dcg-global-mute-button.dcg-has-never-interacted .dcg-first-time-animation{visibility:visible;opacity:.5;animation:dcg-fadeOut-indicator 16s forwards}.dcg-calculator-api-container-v1_12 .dcg-global-mute-button.dcg-has-never-interacted .dcg-first-time-animation:before{content:\"\";position:absolute;top:4px;left:3.5px;bottom:3px;right:3.5px;border-radius:20%;z-index:0;background:#949494;animation:dcg-pulse-mute-button 2s infinite;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-circular-icon-container.dcg-show-globally-muted{opacity:.6}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-expression-top-bar .dcg-is-muted .dcg-icon-volume:after{content:\"\";background:currentColor;width:1em;height:2px;position:absolute;top:50%;left:50%;border:1px solid #fff;margin-top:-2px;margin-left:-.55em;transform:rotate(-45deg) scaleX(0);animation:dcg-animate-mute-bar .2s forwards;animation-delay:.1s}.dcg-calculator-api-container-v1_12 .dcg-expressionitem .dcg-caret-container{font-size:95%;position:absolute;top:0;left:38px;width:32px;height:48px;color:#949494;padding-left:10px;padding-top:8px;text-align:left;z-index:2}.dcg-calculator-api-container-v1_12 .dcg-expressionitem .dcg-caret-container i{display:inline-block;transition:.2s;width:16px;height:16px}.dcg-calculator-api-container-v1_12 .dcg-expressionitem .dcg-caret-container.dcg-hovered{color:#666;cursor:pointer}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-collapsed .dcg-caret-container i{transform:rotate(-90deg)}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-secretFolder{display:none}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressionfolder .dcg-action-toggle-secret-folder,.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressionfolder .dcg-action-toggle-in-front-of-everything{cursor:pointer;color:#0009;font-size:75%;padding:5px;margin:0 -5px -5px 15px;position:relative;z-index:1}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressionfolder .dcg-action-toggle-secret-folder.dcg-last-folder-checkbox,.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressionfolder .dcg-action-toggle-in-front-of-everything.dcg-last-folder-checkbox{margin-bottom:-10px}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressionfolder .dcg-fade-container:after{transition:0}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressionfolder:not(.dcg-collapsed).dcg-has-items .dcg-fade-container:after{position:absolute;top:35px;bottom:5px;left:56px;content:\"\";border-left:1px solid rgba(0,0,0,.2);animation:dcg-fadeIn .3s}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressionfolder .dcg-main textarea.dcg-smart-textarea,.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressionfolder .dcg-main .dcg-displayTextarea{padding-left:20px}.dcg-calculator-api-container-v1_12 .dcg-smart-textarea-container{position:relative;font-size:90%}.dcg-calculator-api-container-v1_12 .dcg-smart-textarea-container textarea.dcg-smart-textarea,.dcg-calculator-api-container-v1_12 .dcg-smart-textarea-container .dcg-displayTextarea{border:0;font:inherit;resize:none;background:transparent;overflow:hidden;outline:none;color:var(--dcg-custom-text-color, #000);white-space:pre-wrap;word-wrap:break-word;width:100%;padding:3px;margin:-1px}.dcg-calculator-api-container-v1_12 .dcg-smart-textarea-container textarea.dcg-smart-textarea{opacity:0;position:absolute;top:1px;left:0;bottom:0;right:0;height:100%}.dcg-calculator-api-container-v1_12 .dcg-smart-textarea-container textarea.dcg-smart-textarea.dcg-empty{opacity:1}.dcg-calculator-api-container-v1_12 .dcg-smart-textarea-container .dcg-displayTextarea:after{content:\"|\";opacity:0;width:0;overflow:hidden;display:inline-block;height:1px}.dcg-calculator-api-container-v1_12 .dcg-smart-textarea-container .dcg-displayTextarea a{z-index:1;position:relative;color:#2f72dc}.dcg-calculator-api-container-v1_12 .dcg-smart-textarea-container .dcg-displayTextarea a.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-smart-textarea-container .dcg-displayTextarea a .dcg-depressed{color:#2253a1}.dcg-calculator-api-container-v1_12 .dcg-selected .dcg-smart-textarea-container .dcg-displayTextarea{pointer-events:none;opacity:0}.dcg-calculator-api-container-v1_12 .dcg-selected .dcg-smart-textarea-container textarea{opacity:1}.dcg-calculator-api-container-v1_12 .dcg-geo-show-constructions-pane{position:relative;background:var(--dcg-custom-background-color-shaded, #eee)}.dcg-calculator-api-container-v1_12 .dcg-geo-show-constructions-pane.dcg-transient-error,.dcg-calculator-api-container-v1_12 .dcg-geo-show-constructions-pane.dcg-cant-drag-item{opacity:.5}.dcg-calculator-api-container-v1_12 .dcg-geo-show-constructions-pane:after{content:\"\";background:linear-gradient(to bottom,rgba(238,238,238,0),var(--dcg-custom-background-color-shaded, #eee));height:10px;position:absolute;bottom:0;left:0;right:0;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-geo-show-constructions-pane:before{content:\"\";background:linear-gradient(to top,rgba(238,238,238,0),var(--dcg-custom-background-color-shaded, #eee));height:10px;position:absolute;top:0;left:0;right:0;z-index:1;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-geo-show-constructions-pane .dcg-token-being-dragged-container{opacity:.3}.dcg-calculator-api-container-v1_12 .dcg-token-navigator-container{max-height:min(var(--dcg-exp-list-height) - 100px,250px);overflow:auto}.dcg-calculator-api-container-v1_12 .dcg-token-navigator-container .dcg-displayed-section-level{text-align:left;margin:0 8px;padding:8px 0}.dcg-calculator-api-container-v1_12 .dcg-token-navigator-container .dcg-displayed-section-level:not(:last-of-type){border-bottom:1px solid rgba(0,0,0,.2);position:relative}.dcg-calculator-api-container-v1_12 .dcg-empty-constructions{padding:12px;text-align:center;color:var(--dcg-custom-text-color, #666);font-style:italic;font-size:90%}.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-options-menu-section-title{color:var(--dcg-custom-text-color, #666)}.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-opacities-menu-flex{display:flex;gap:5px;margin-top:5px}.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-opacities-menu-flex .dcg-opacity-option{height:29px}.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-image-aria-container{padding:0 10px}.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-clickable-image-controls .dcg-clickable-menu-row:first-of-type{margin-top:10px}.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-clickable-image-controls .dcg-clickable-menu-row .dcg-input-label{color:var(--dcg-custom-text-color, #666)}.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-clickable-image-controls .dcg-clickable-menu-row .dcg-math-field.dcg-math-field{font-size:95%;border-bottom:1px solid rgba(0,0,0,.2);padding:1px 2px;margin:1px;min-width:100%;max-width:100%}.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-clickable-image-controls .dcg-clickable-menu-row .dcg-math-field.dcg-math-field.dcg-focus,.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-clickable-image-controls .dcg-clickable-menu-row .dcg-math-field.dcg-math-field.dcg-focus-visible,.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-clickable-image-controls .dcg-clickable-menu-row .dcg-math-field.dcg-math-field.dcg-invalid{border-bottom:2px solid var(--dcg-accent-color, #2f72dc);margin-bottom:0}.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-clickable-image-controls .dcg-clickable-menu-row .dcg-math-field.dcg-math-field.dcg-invalid{border-bottom:2px solid #e15855}.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-clickable-image-controls .dcg-clickable-menu-row .dcg-math-field.dcg-math-field.dcg-hovered:not(.dcg-focus):not(.dcg-invalid):not(.dcg-static-mathquill-view):not(.dcg-focus-visible){border-bottom:2px solid #ccc;margin-bottom:0}.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-clickable-image-controls .dcg-clickable-menu-row input{outline:none;border:1px solid #bbb;border-top:0!important;border-right:0!important;border-left:0!important;color:#000;padding:5px;-webkit-appearance:none;appearance:none;border-radius:0}.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-clickable-image-controls .dcg-clickable-menu-row input.dcg-hovered{border-color:#ccc;box-shadow:0 1px #ccc}.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-clickable-image-controls .dcg-clickable-menu-row input:focus:not([disabled]){border-color:#2f72dc;box-shadow:0 1px #2f72dc}.dcg-calculator-api-container-v1_12 .dcg-image-options-menu .dcg-clickable-image-controls .dcg-clickable-menu-row input{padding-left:0;padding-right:0;font-size:95%;width:120px;margin-top:5px}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressionimage .dcg-image-loading,.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressionimage .dcg-image-failed{font-size:100%;padding:1px;color:#888;font-style:italic;line-height:37px}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressionimage .dcg-retry-loading-image{color:#407bb5;text-decoration:underline}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressionimage .dcg-image-input-grid{font-size:80%;display:grid;grid-template-columns:min-content 2fr min-content 1fr;width:calc(100% + 20px);max-width:450px;color:var(--dcg-custom-text-color, rgba(0, 0, 0, .6))}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressionimage .dcg-image-input-grid .dcg-mathquill-wrapper{width:100%;padding-right:5px}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressionimage .dcg-image-input-grid .dcg-image-input-name,.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressionimage .dcg-image-input-grid .dcg-image-input-mathquill{display:flex;align-self:center;padding-right:5px;overflow:hidden;padding-top:2px;padding-bottom:2px}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressionimage .dcg-image-input-grid .dcg-mq-editable-field:not(.dcg-focus){cursor:pointer}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressionimage.dcg-input-focused .dcg-image-input-grid,.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressionimage.dcg-input-focused .dcg-braille-input{color:var(--dcg-custom-text-color, #000)}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressionimage .dcg-image-loaded .dcg-image-title-row{display:flex;justify-content:flex-start}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressionimage .dcg-image-loaded .dcg-image-title-row .dcg-smart-textarea-container{margin-bottom:8px;font-size:85%}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressionimage .dcg-image-loaded .dcg-image-title-row .dcg-smart-textarea-container textarea,.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressionimage .dcg-image-loaded .dcg-image-title-row .dcg-smart-textarea-container .dcg-displayTextarea{padding-top:0;padding-bottom:0;margin:0 10px 0 -1px}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressionimage .dcg-image-loaded .dcg-image-title-row .dcg-smart-textarea-container textarea:empty,.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressionimage .dcg-image-loaded .dcg-image-title-row .dcg-smart-textarea-container .dcg-displayTextarea:empty{min-width:8rem}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressionimage .dcg-image-loaded .dcg-action-changeimage{color:var(--dcg-custom-text-color, rgba(0, 0, 0, .6));text-decoration:underline;font-size:80%}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressionimage .dcg-image-loaded .dcg-action-changeimage.dcg-hovered{color:#0009}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressionimage .dcg-image-loaded .dcg-action-changeimage.dcg-depressed{color:#000000b3}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressionimage.dcg-selected .dcg-smart-textarea-container{position:relative;top:-1px}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressionimage.dcg-selected .dcg-main{margin-right:-1px}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__chi-square .dcg-table--wrapper .dcg-table{position:relative;margin-top:3px}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__chi-square .dcg-table--wrapper .dcg-table.dcg-table--fade-last-row:before{content:\"\";position:absolute;bottom:-1px;left:0;right:-1px;height:31px;background:linear-gradient(to top,var(--dcg-item-background-color),rgba(255,255,255,0));z-index:1;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__chi-square .dcg-table--wrapper .dcg-table.dcg-table--fade-last-column:after{content:\"\";position:absolute;top:0;bottom:-1px;right:-1px;background:linear-gradient(to left,var(--dcg-item-background-color),rgba(255,255,255,0));width:61px;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__chi-square .dcg-table--wrapper .dcg-table .dcg-table--cell{text-align:center}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__chi-square .dcg-table--wrapper .dcg-table .dcg-table--cell:has(.dcg-focus):after{content:\"\";position:absolute;border:2px solid #2f72dc;left:-1px;top:-1px;bottom:-1px;right:-1px;z-index:1;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__chi-square .dcg-table--wrapper .dcg-table .dcg-table--cell.dcg-invalid:after{content:\"\";position:absolute;border:2px solid #e15855;left:-1px;top:-1px;bottom:-1px;right:-1px;z-index:1;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-add-inference-wizard__chi-square--gof .dcg-table{grid-template-columns:repeat(var(--dcg-column-count),1fr)}.dcg-calculator-api-container-v1_12 .dcg-select-dropdown-container{position:relative;display:flex;flex-direction:column;max-height:100%}.dcg-calculator-api-container-v1_12 .dcg-select-dropdown-container .dcg-mixed-text-math{pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-select-dropdown-container .dcg-open-options{color:#949494}.dcg-calculator-api-container-v1_12 .dcg-select-dropdown-container .dcg-open-options.dcg-hovered{color:#0009}.dcg-calculator-api-container-v1_12 .dcg-select-dropdown-container .dcg-open-options.dcg-depressed{color:#000000b3}.dcg-calculator-api-container-v1_12 .dcg-select-dropdown-container .dcg-dropdown-input{outline:none;width:100%;border:2px solid rgba(0,0,0,.2);background:var(--dcg-custom-background-color, #fff);font-size:.875rem;color:var(--dcg-custom-text-color, #333);padding:10px;border-radius:5px 5px 0 0;display:flex;justify-content:space-between;align-items:center;gap:5px}.dcg-calculator-api-container-v1_12 .dcg-select-dropdown-container .dcg-dropdown-input.dcg-results-hidden{border-radius:5px}.dcg-calculator-api-container-v1_12 .dcg-select-dropdown-container .dcg-dropdown-input.dcg-hovered{border-color:#bbb}.dcg-calculator-api-container-v1_12 .dcg-select-dropdown-container .dcg-dropdown-input.dcg-focus-visible{border-color:#2f72dc}.dcg-calculator-api-container-v1_12 .dcg-select-dropdown-container .dcg-options-dropdown__container{position:absolute;top:100%;left:0;min-width:100%;z-index:2}.dcg-calculator-api-container-v1_12 .dcg-select-dropdown-container .dcg-options-dropdown__padded-bottom-container{padding-bottom:50px}.dcg-calculator-api-container-v1_12 .dcg-select-dropdown-container .dcg-select-dropdown-list{margin-top:-1px;max-height:var(--dcg-select-dropdown-max-height, 500px);border:1px solid rgba(0,0,0,.2);border-radius:0 0 5px 5px;background:var(--dcg-custom-background-color, #fff);text-align:left;-webkit-overflow-scrolling:touch;overflow-x:hidden;overflow-y:auto;list-style-type:none}.dcg-calculator-api-container-v1_12 .dcg-select-dropdown-container .dcg-dropdown-choice{padding:7px 10px;font-size:.85rem}.dcg-calculator-api-container-v1_12 .dcg-shared-options-dropdown .dcg-dropdown-explanations{font-size:80%;padding:3px 7px;min-width:190px;opacity:.7}.dcg-calculator-api-container-v1_12 .dcg-shared-options-dropdown .dcg-dropdown-explanations .dcg-explanation{margin-bottom:5px}.dcg-calculator-api-container-v1_12 .dcg-shared-options-dropdown .dcg-dropdown-explanations .dcg-explanation a{color:#2f72dc;white-space:nowrap;margin-bottom:5px}.dcg-calculator-api-container-v1_12 .dcg-shared-options-dropdown .dcg-dropdown-choice{padding:var(--dcg-dropdown-choice-padding, 7px);text-decoration:none;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:flex;align-items:center;gap:7px}.dcg-calculator-api-container-v1_12 .dcg-shared-options-dropdown .dcg-dropdown-choice.dcg-standard-link-styling{color:#666}.dcg-calculator-api-container-v1_12 .dcg-shared-options-dropdown .dcg-dropdown-choice.dcg-standard-link-styling.dcg-selected:not(.dcg-disabled),.dcg-calculator-api-container-v1_12 .dcg-shared-options-dropdown .dcg-dropdown-choice.dcg-standard-link-styling.dcg-hovered:not(.dcg-disabled),.dcg-calculator-api-container-v1_12 .dcg-shared-options-dropdown .dcg-dropdown-choice.dcg-standard-link-styling.dcg-depressed:not(.dcg-disabled){color:#000}.dcg-calculator-api-container-v1_12 .dcg-shared-options-dropdown .dcg-dropdown-choice.dcg-focus-visible:not([aria-disabled=true]),.dcg-calculator-api-container-v1_12 .dcg-shared-options-dropdown .dcg-dropdown-choice.dcg-hovered:not([aria-disabled=true]){background:#0000001a}.dcg-calculator-api-container-v1_12 .dcg-shared-options-dropdown .dcg-dropdown-choice.dcg-depressed:not([aria-disabled=true]){background:#0003}.dcg-calculator-api-container-v1_12 .dcg-shared-options-dropdown .dcg-dropdown-choice.dcg-selected:not([aria-disabled=true]){background:#e0eafa}.dcg-calculator-api-container-v1_12 .dcg-shared-options-dropdown .dcg-dropdown-choice.dcg-hovered:not(.dcg-focus-visible){box-shadow:none}.dcg-calculator-api-container-v1_12 .dcg-shared-options-dropdown .dcg-dropdown-choice.dcg-disabled{opacity:.3;cursor:default;background:#0000001a}.dcg-calculator-api-container-v1_12 .dcg-shared-options-dropdown .dcg-dropdown-choice .dcg-option-icon-container{width:20px;flex-shrink:0;text-align:center}.dcg-calculator-api-container-v1_12 .dcg-shared-options-dropdown .dcg-dropdown-choice .dcg-option-icon-container .dcg-option-icon{font-size:90%}.dcg-calculator-api-container-v1_12 .dcg-shared-options-dropdown .dcg-dropdown-choice .dcg-option-subtitle{display:block;margin-left:30px;font-size:80%;text-decoration:underline}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-new-expression{height:54px;position:relative;border-bottom:1px solid transparent;overflow:visible!important}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-new-expression .dcg-new-math-div{position:absolute;top:0;left:0;bottom:0;right:0;cursor:pointer}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-new-expression .dcg-new-expression-fade{background:linear-gradient(to top,var(--dcg-custom-background-color, #fff),rgba(255,255,255,0) 50%);width:44px;position:absolute;top:0;bottom:0}.dcg-calculator-api-container-v1_12 .dcg-progress-update-legend{padding:.5em}.dcg-calculator-api-container-v1_12 .dcg-progress-update-legend .dcg-hide-progress{float:right}.dcg-calculator-api-container-v1_12 .dcg-legend-section{display:flex;gap:5px}.dcg-calculator-api-container-v1_12 .dcg-legend-section:not(:first-of-type){margin-top:5px}.dcg-calculator-api-container-v1_12 .dcg-progress-swatch{display:inline-block;width:20px;height:20px;border-radius:4px;margin-right:3px}.dcg-calculator-api-container-v1_12 .dcg-progress-analyzing{background:#1446aa59!important}.dcg-calculator-api-container-v1_12 .dcg-progress-graphing{background:#d25a1e59!important}.dcg-calculator-api-container-v1_12 .dcg-progress-unpublished{background:#c8c81459!important}.dcg-calculator-api-container-v1_12 .dcg-slider-options-view{top:-11px;left:42px;min-width:150px;padding:15px}.dcg-calculator-api-container-v1_12 .dcg-slider-options-view .dcg-title{font-size:110%}.dcg-calculator-api-container-v1_12 .dcg-slider-options-view .dcg-slider-speed-menu{margin-top:10px}.dcg-calculator-api-container-v1_12 .dcg-slider-speed-container{font-size:95%}.dcg-calculator-api-container-v1_12 .dcg-slider-speed-container .dcg-action-faster,.dcg-calculator-api-container-v1_12 .dcg-slider-speed-container .dcg-action-slower{color:#666}.dcg-calculator-api-container-v1_12 .dcg-slider-speed-container .dcg-action-faster.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-slider-speed-container .dcg-action-slower.dcg-hovered{color:#222}.dcg-calculator-api-container-v1_12 .dcg-slider-speed-container .dcg-action-faster.dcg-depressed,.dcg-calculator-api-container-v1_12 .dcg-slider-speed-container .dcg-action-slower.dcg-depressed{color:#000}.dcg-calculator-api-container-v1_12 .dcg-slider-speed-container .dcg-action-faster.dcg-disabled,.dcg-calculator-api-container-v1_12 .dcg-slider-speed-container .dcg-action-slower.dcg-disabled{opacity:.25;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-slider-speed-container .dcg-action-slower{transform:rotate(180deg)}.dcg-calculator-api-container-v1_12 .dcg-slider-speed-container .dcg-action-faster,.dcg-calculator-api-container-v1_12 .dcg-slider-speed-container .dcg-action-slower{cursor:pointer;font-size:70%;display:inline-block;width:26px;height:26px;text-align:center;line-height:26px;border:1px solid rgba(0,0,0,.2);border-radius:4px}.dcg-calculator-api-container-v1_12 .dcg-slider-speed-container .dcg-action-faster.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-slider-speed-container .dcg-action-slower.dcg-hovered{background:#0000000a}.dcg-calculator-api-container-v1_12 .dcg-slider-speed-container .dcg-action-faster.dcg-depressed,.dcg-calculator-api-container-v1_12 .dcg-slider-speed-container .dcg-action-slower.dcg-depressed{background:#0003}.dcg-calculator-api-container-v1_12 .dcg-slider-speed-container .dcg-action-faster i,.dcg-calculator-api-container-v1_12 .dcg-slider-speed-container .dcg-action-slower i{position:relative;left:1px}.dcg-calculator-api-container-v1_12 .dcg-slider-speed-container .dcg-variable-speed{width:45px;font-size:90%;display:inline-block;text-align:center}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-main{padding-top:20px;padding-bottom:4px;position:relative}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-tabledata{display:grid;grid-template-columns:repeat(var(--dcg-column-count),min-content);grid-template-rows:auto}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-row{display:contents}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-cell.dcg-table-header{border-bottom:1px solid #000;font-size:.925rem}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-cell.dcg-table-header .dcg-math-field{cursor:text}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-cell.dcg-table-header .dcg-table-icon-container{padding:5px 0 5px 5px}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-cell.dcg-table-header .dcg-drag-icon{position:absolute;top:50%;right:5px;font-size:.85rem;transform:translateY(-50%);opacity:.5;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-cell.dcg-table-header.dcg-leave-space-for-icon .dcg-mq-math-mode,.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-cell.dcg-table-header.dcg-header-error .dcg-mq-math-mode{padding-left:6px}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-cell.dcg-table-header.dcg-leave-space-for-icon .dcg-braille-input,.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-cell.dcg-table-header.dcg-header-error .dcg-braille-input{padding-left:5px;--dcg-max-braille-width: 160px}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable td.dcg-cell-error .dcg-table-icon-error-container{padding-left:4px}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable td.dcg-cell-error .dcg-mq-math-mode{padding-left:0}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-cell{text-align:center;display:block;font-size:.8rem;min-height:34px;position:relative;display:flex;align-items:center;min-width:60px}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-cell .dcg-braille-input{text-align:center;min-width:50px;padding:0 15px;width:auto;--dcg-max-braille-width: 200px;min-width:min(100%,var(--dcg-max-braille-width));max-width:var(--dcg-max-braille-width);margin:0 auto}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-cell.dcg-cell-error .dcg-braille-input{padding-left:5px;--dcg-max-braille-width: 185px}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-cell.dcg-first-column{border-right:1px solid #000}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-cell.dcg-interior-column{border-right:1px solid rgba(0,0,0,.2)}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-cell.dcg-interior-row{border-bottom:1px solid rgba(0,0,0,.2)}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-cell.dcg-selected:not(.dcg-non-editable):after{content:\"\";position:absolute;border:2px solid var(--dcg-accent-color, #2f72dc);left:-1px;top:-1px;bottom:-1px;right:-1px;z-index:1;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-cell.dcg-selected.dcg-non-editable .dcg-mathquill-braille-overflow-left .dcg-tooltip-hit-area-container:before{background:linear-gradient(to left,#f5f5f500,#f5f5f5)}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-cell.dcg-selected.dcg-non-editable .dcg-mathquill-braille-overflow-right .dcg-tooltip-hit-area-container:after{background:linear-gradient(to right,#f5f5f500,#f5f5f5)}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-cell.dcg-selected:not(.dcg-non-editable) .dcg-inner-border{border:2px solid #2f72dc}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-cell.dcg-computed-cell{background:var(--dcg-custom-background-color-shaded, #f0f0f0)}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-non-editable.dcg-selected{box-shadow:inset 0 0 0 2px #2f72dcb3;background:var(--dcg-custom-background-color-shaded, #f0f0f0)}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-table-container{overflow:hidden;padding-left:15px;padding-right:15px;position:relative}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-table-container:before{position:absolute;top:0;left:0;bottom:0;z-index:1;background:linear-gradient(to left,rgba(255,255,255,0),var(--dcg-item-background-color));width:20px;content:\"\";pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-table-container:after{position:absolute;top:0;right:0;bottom:0;background:linear-gradient(to right,rgba(255,255,255,0),var(--dcg-item-background-color));width:20px;content:\"\";pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-table-container .dcg-table-sliding-container{transition:transform .15s;display:inline-block;padding-bottom:1px}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-blank-row{grid-column:1/-1}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-show-more-row{border-bottom:1px solid rgba(0,0,0,.2);text-align:center;font-size:80%;color:#0009;padding:8px 0;font-style:italic;grid-column:1/-1}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-show-more-row .dcg-show-more{font-style:normal;font-size:90%;margin-left:.4em}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable .dcg-show-more-row .dcg-show-more-row-interior{max-width:calc(var(--dcg-exp-list-width) - 100px)}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable.dcg-faded-h .dcg-tabledata:after{content:\"\";position:absolute;top:0;bottom:0;right:0;background:linear-gradient(to left,var(--dcg-item-background-color),rgba(255,255,255,0));width:60px;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-expressionitem.dcg-expressiontable.dcg-faded-v .dcg-tabledata:before{content:\"\";position:absolute;bottom:0;left:0;right:0;height:30px;background:linear-gradient(to top,var(--dcg-item-background-color),rgba(255,255,255,0));z-index:1;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-table-container .dcg-mathquill-wrapper,.dcg-calculator-api-container-v1_12 .dcg-table--wrapper .dcg-mathquill-wrapper{flex:1;height:100%;display:flex;align-items:center}.dcg-calculator-api-container-v1_12 .dcg-table-container .dcg-mathquill-braille,.dcg-calculator-api-container-v1_12 .dcg-table--wrapper .dcg-mathquill-braille{flex:1}.dcg-calculator-api-container-v1_12 .dcg-table-container .dcg-typeset-math,.dcg-calculator-api-container-v1_12 .dcg-table-container .dcg-mq-container,.dcg-calculator-api-container-v1_12 .dcg-table--wrapper .dcg-typeset-math,.dcg-calculator-api-container-v1_12 .dcg-table--wrapper .dcg-mq-container{width:100%;height:100%}.dcg-calculator-api-container-v1_12 .dcg-table-container .dcg-mathquill-braille,.dcg-calculator-api-container-v1_12 .dcg-table-container .dcg-tooltip-hit-area-container,.dcg-calculator-api-container-v1_12 .dcg-table-container .dcg-braille-input,.dcg-calculator-api-container-v1_12 .dcg-table--wrapper .dcg-mathquill-braille,.dcg-calculator-api-container-v1_12 .dcg-table--wrapper .dcg-tooltip-hit-area-container,.dcg-calculator-api-container-v1_12 .dcg-table--wrapper .dcg-braille-input{height:100%}.dcg-calculator-api-container-v1_12 .dcg-table-container .dcg-mq-math-mode,.dcg-calculator-api-container-v1_12 .dcg-table--wrapper .dcg-mq-math-mode{width:100%;height:100%;display:flex;align-items:center;padding:5px 20px}.dcg-calculator-api-container-v1_12 .dcg-table-regression{clear:both;margin-right:-18px}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-regression-footer-view{margin-bottom:-15px}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-dropdown-row{margin:5px 0 0;display:flex;max-width:400px;gap:7px;align-items:center}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-dropdown-row.dcg-dropdown-row__has-column-picker{flex-wrap:wrap}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-dropdown-row .dcg-dropdown-row__plot-and-model{display:flex;align-items:center}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-dropdown-row .dcg-dropdown-row__plot-and-model .dcg-icon-container{width:34px}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-dropdown-row .dcg-dropdown-row__plot-and-model .dcg-tooltipped-error{height:auto}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-dropdown-row .dcg-dropdown-row__plot-and-model .dcg-select-dropdown-container{flex:1}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-dropdown-row .dcg-dropdown-row__breakable{display:flex;gap:7px;align-items:center}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-dropdown-row>:first-child{flex:1}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-dropdown-row .dcg-select-dropdown-container .dcg-dropdown-input{padding:0 8px;min-height:36px}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-dropdown-row .dcg-dropdown-row__column-selector .dcg-dropdown-input .dcg-mixed-text-math{max-width:150px;overflow:hidden;padding-right:10px;position:relative;margin-right:-5px}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-dropdown-row .dcg-dropdown-row__column-selector .dcg-dropdown-input .dcg-mixed-text-math:after{position:absolute;top:0;right:0;bottom:0;width:10px;pointer-events:none;background:linear-gradient(to right,rgba(255,255,255,0),var(--dcg-custom-background-color, #fff));content:\"\"}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-expression-footer-title{font-size:.7rem}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-expression-footer-title__equation{margin-top:.5rem}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-table-regression__dropdown-separator{font-size:.875rem;color:var(--dcg-custom-text-color, #333)}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-icon-remove{opacity:.2;font-size:.9rem;padding:10px;margin:-10px -10px -10px -5px}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-icon-remove.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-icon-remove.dcg-focus-visible{opacity:.6}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-icon-remove.dcg-depressed{opacity:.8}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-break-before{display:inline;padding-left:0}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-break-before:before{content:\"\\a\";white-space:normal}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-regression-equation{margin-bottom:.5rem;display:flex;overflow:hidden;position:relative;font-size:.8rem}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-regression-equation .dcg-mq-root-block{padding-right:.5em;line-height:1.5em;padding-left:.85em;text-indent:-.7em}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-regression-equation .dcg-mq-root-block .dcg-mq-supsub,.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-regression-equation .dcg-mq-root-block .dcg-mq-fraction,.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-regression-equation .dcg-mq-root-block .dcg-mq-non-leaf{line-height:1em}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-regression-equation .dcg-mq-root-block>*{text-indent:0}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-dot-dot-dropdown{padding:8px;margin:-8px;height:auto;width:auto}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-dropdown-popover__interior{padding:10px 0;font-size:.8rem}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-dropdown-popover__interior .dcg-regression-model{margin:10px 0;font-size:1rem}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-regression-popover__export-to-list{margin-bottom:10px}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-regression-popover__unexportable-warning{color:var(--dcg-custom-text-color, rgba(0, 0, 0, .6));white-space:normal;font-size:.85rem}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-regression-popover__delete,.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-regression-popover__export-to-list{display:block;font-size:.9rem;width:100%;line-height:2rem}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-table-regression-view__custom-model-notice{border-top:1px solid #bbb;padding:8px;font-size:75%;font-style:italic;color:var(--dcg-custom-text-color, #666);white-space:pre-wrap}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-table-regression-view__custom-model-notice .dcg-tilde{font-family:Symbola,Times New Roman,serif;display:inline-block;border:1px solid #bbb;padding:0 7px 0 5px;font-size:1rem;border-radius:4px}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-table-regression-view__custom-model-notice a{text-decoration:underline}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-copy-regression-button{font-size:1rem;color:var(--dcg-custom-text-color, #000);margin-left:5px;height:0;position:relative;top:1px}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-copy-regression-button i{padding:5px;margin:-5px}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-copy-regression-button i,.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-dot-dot-dropdown{cursor:pointer;opacity:.4}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-copy-regression-button i.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-dot-dot-dropdown.dcg-hovered{opacity:.6}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-copy-regression-button i.dcg-depressed,.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-dot-dot-dropdown.dcg-depressed{opacity:1}.dcg-calculator-api-container-v1_12 .dcg-table-regression .dcg-regression-view-source--button{padding-left:1em}@keyframes dcg-tick-metronome{0%{transform:scale(.5) rotate(-20deg)}50%{transform:scale(.5) rotate(20deg)}to{transform:scale(.5) rotate(-20deg)}}.dcg-calculator-api-container-v1_12 .dcg-ticker{padding:5px;position:relative;background:var(--dcg-custom-background-color-shaded, #eee);border-bottom:1px solid rgba(0,0,0,.2);border-right:1px solid rgba(0,0,0,.2);overflow:hidden}.dcg-calculator-api-container-v1_12 .dcg-ticker.dcg-expressions-scrolled{box-shadow:-2px 2px 4px #0000001a;z-index:4}.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-circular-icon-container{position:relative}.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-icon-remove{position:absolute;top:0;right:0;opacity:.2;font-size:115%;padding:10px 7px 10px 12px}.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-icon-remove.dcg-hovered{opacity:.6}.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-icon-remove.dcg-depressed{opacity:.8}.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-mini-play-pause{transform:scale(.5);transform-origin:bottom right;position:absolute;bottom:-5px;right:-4px;background:#eee;border-radius:50%;border:1px solid #eee}.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-icon-metronome{font-size:130%;position:relative;left:1px}.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-metronome-bar{width:2px;height:24px;transform:scale(.5) rotate(-20deg);transform-origin:bottom center;background:#777;border-radius:2px;position:absolute;bottom:10px;left:50%;box-shadow:0 0 0 1px #eee}.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-metronome-bar.dcg-metronome-playing{animation:dcg-tick-metronome infinite .5s ease-in-out}.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-container{display:flex;width:calc(100% - 30px)}.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-container .dcg-circular-icon-container{font-size:65%;margin-right:10px!important;order:1}.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-container .dcg-circular-icon-container.dcg-disabled{opacity:.4;pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-container .dcg-create-sliders{margin-top:5px;width:100%}.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal{display:flex;flex:1;order:2;align-items:center;color:var(--dcg-custom-text-color, #666);flex-wrap:wrap;padding:3px 0;overflow:hidden;font-size:95%}.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-mathquill-wrapper{color:var(--dcg-custom-text-color, #000);margin-left:4px;font-size:95%}.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-action-definition{max-width:100%;display:flex;align-items:baseline}.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-action-definition .dcg-mathquill-wrapper{margin-right:5px;overflow:hidden;flex:1}.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-action-definition .dcg-math-field.dcg-math-field,.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-action-definition .dcg-braille-input.dcg-braille-input{border-bottom:1px solid rgba(0,0,0,.2);padding:1px 2px;margin:1px;min-width:75px;max-width:100%}.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-action-definition .dcg-math-field.dcg-math-field.dcg-focus,.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-action-definition .dcg-math-field.dcg-math-field.dcg-focus-visible,.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-action-definition .dcg-math-field.dcg-math-field.dcg-invalid,.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-action-definition .dcg-braille-input.dcg-braille-input.dcg-focus,.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-action-definition .dcg-braille-input.dcg-braille-input.dcg-focus-visible,.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-action-definition .dcg-braille-input.dcg-braille-input.dcg-invalid{border-bottom:2px solid var(--dcg-accent-color, #2f72dc);margin-bottom:0}.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-action-definition .dcg-math-field.dcg-math-field.dcg-invalid,.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-action-definition .dcg-braille-input.dcg-braille-input.dcg-invalid{border-bottom:2px solid #e15855}.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-action-definition .dcg-math-field.dcg-math-field.dcg-hovered:not(.dcg-focus):not(.dcg-invalid):not(.dcg-static-mathquill-view):not(.dcg-focus-visible),.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-action-definition .dcg-braille-input.dcg-braille-input.dcg-hovered:not(.dcg-focus):not(.dcg-invalid):not(.dcg-static-mathquill-view):not(.dcg-focus-visible){border-bottom:2px solid #ccc;margin-bottom:0}.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-action-definition .dcg-math-field.dcg-math-field,.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-action-definition .dcg-braille-input.dcg-braille-input{padding-right:20px}.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-action-frequency .dcg-math-field.dcg-math-field,.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-action-frequency .dcg-braille-input.dcg-braille-input{border-bottom:1px solid rgba(0,0,0,.2);padding:1px 2px;margin:1px;min-width:30px;max-width:90px}.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-action-frequency .dcg-math-field.dcg-math-field.dcg-focus,.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-action-frequency .dcg-math-field.dcg-math-field.dcg-focus-visible,.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-action-frequency .dcg-math-field.dcg-math-field.dcg-invalid,.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-action-frequency .dcg-braille-input.dcg-braille-input.dcg-focus,.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-action-frequency .dcg-braille-input.dcg-braille-input.dcg-focus-visible,.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-action-frequency .dcg-braille-input.dcg-braille-input.dcg-invalid{border-bottom:2px solid var(--dcg-accent-color, #2f72dc);margin-bottom:0}.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-action-frequency .dcg-math-field.dcg-math-field.dcg-invalid,.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-action-frequency .dcg-braille-input.dcg-braille-input.dcg-invalid{border-bottom:2px solid #e15855}.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-action-frequency .dcg-math-field.dcg-math-field.dcg-hovered:not(.dcg-focus):not(.dcg-invalid):not(.dcg-static-mathquill-view):not(.dcg-focus-visible),.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-action-frequency .dcg-braille-input.dcg-braille-input.dcg-hovered:not(.dcg-focus):not(.dcg-invalid):not(.dcg-static-mathquill-view):not(.dcg-focus-visible){border-bottom:2px solid #ccc;margin-bottom:0}.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-settings-internal .dcg-clickable-info-error-container{margin-left:-20px;width:20px;display:inline-block}.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-toggle-help{text-decoration:none;color:#aaa;padding:10px 6px;font-size:85%;position:relative;top:1px;flex:1}.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-toggle-help.dcg-hovered{color:#666}.dcg-calculator-api-container-v1_12 .dcg-ticker .dcg-ticker-toggle-help.dcg-depressed{color:#454545}.dcg-calculator-api-container-v1_12 .dcg-adaptive-peeling-warning{position:absolute;bottom:0;right:0;text-align:center;z-index:2}.dcg-calculator-api-container-v1_12 .dcg-adaptive-peeling-warning .dcg-warning-content{margin:10px;background:#000000b3;border-radius:5px;padding:5px 10px;display:inline-block;color:#fff;font-size:.9rem;-webkit-user-select:all;user-select:all}.dcg-calculator-api-container-v1_12 .dcg-geometry-settings-container.dcg-constrained-height-popover{z-index:6;width:290px;top:53px;right:43px}.dcg-calculator-api-container-v1_12 .dcg-geometry-settings-container.dcg-constrained-height-popover.dcg-no-geometry-header{top:5px}.dcg-calculator-api-container-v1_12 .dcg-geometry-settings-container.dcg-constrained-height-popover .dcg-arrow{top:18px!important}.dcg-calculator-api-container-v1_12 .dcg-geometry-settings-container.dcg-constrained-height-popover .dcg-popover-interior{padding:10px 0;background-color:var(--dcg-custom-background-color, #fff);color:var(--dcg-custom-text-color, #000)}.dcg-calculator-api-container-v1_12 .dcg-geometry-settings-container.dcg-constrained-height-popover .dcg-checkbox{font-size:95%;color:var(--dcg-custom-text-color, #666)}.dcg-calculator-api-container-v1_12 .dcg-geometry-settings-container.dcg-constrained-height-popover .dcg-braille-options-buttons{margin-top:3px}.dcg-calculator-api-container-v1_12 .dcg-author-mode-section .dcg-toolbar-customization{display:flex;align-items:center;font-size:90%;margin-top:10px;white-space:nowrap;color:#666}.dcg-calculator-api-container-v1_12 .dcg-author-mode-section .dcg-toolbar-customization .dcg-segmented-control-container{margin-left:10px;width:100%}.dcg-calculator-api-container-v1_12 .dcg-author-mode-section .dcg-toolbar-customization .dcg-segmented-control-container .dcg-segmented-control-btn{flex:1}.dcg-calculator-api-container-v1_12 .dcg-author-mode-section .dcg-edit-configuration-link-container{text-align:center;padding-top:3px;font-size:90%}.dcg-calculator-api-container-v1_12 .dcg-custom-toolbar-settings-modal .dcg-done-btn{float:right;position:relative;top:-4px}.dcg-calculator-api-container-v1_12 .dcg-custom-toolbar-settings-modal h1{font-weight:400;color:#666;padding-bottom:10px}.dcg-calculator-api-container-v1_12 .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row{display:grid;grid-template-columns:1.25fr 2fr;border-bottom:1px solid rgba(0,0,0,.2)}.dcg-calculator-api-container-v1_12 .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row.dcg-grid-single-column{grid-template-columns:1fr;border-right:1px solid rgba(0,0,0,.2)}.dcg-calculator-api-container-v1_12 .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-first-column,.dcg-calculator-api-container-v1_12 .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-second-column{border-left:1px solid rgba(0,0,0,.2);padding:5px;display:grid;align-content:center}.dcg-calculator-api-container-v1_12 .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-second-column{border-right:1px solid rgba(0,0,0,.2)}.dcg-calculator-api-container-v1_12 .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-second-column.dcg-disabled{background:#eee}.dcg-calculator-api-container-v1_12 .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row[dcg-geo-tool=rotate],.dcg-calculator-api-container-v1_12 .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row[dcg-geo-tool=dilate]{height:50px}.dcg-calculator-api-container-v1_12 .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row[dcg-geo-tool=rotate] .dcg-first-column,.dcg-calculator-api-container-v1_12 .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row[dcg-geo-tool=dilate] .dcg-first-column{align-content:start}.dcg-calculator-api-container-v1_12 .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-checkbox{white-space:nowrap;margin-left:2px;margin-top:0}.dcg-calculator-api-container-v1_12 .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row.dcg-configuration-heading-row{background:#0003;border-top:1px solid rgba(0,0,0,.2);align-self:center}.dcg-calculator-api-container-v1_12 .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row.dcg-configuration-heading-row .dcg-first-column{text-transform:capitalize;font-family:Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif;font-weight:500}.dcg-calculator-api-container-v1_12 .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row.dcg-configuration-heading-row .dcg-first-column,.dcg-calculator-api-container-v1_12 .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row.dcg-configuration-heading-row .dcg-second-column{font-size:95%}.dcg-calculator-api-container-v1_12 .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-transformation-allow-numeric-option{padding-top:2px}.dcg-calculator-api-container-v1_12 .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-latex-error-container{position:absolute;top:3px;bottom:3px;right:3px;z-index:1;display:flex;flex-direction:column;justify-content:center}.dcg-calculator-api-container-v1_12 .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-disabled-condition-wrapper{padding:6px;color:#949494}.dcg-calculator-api-container-v1_12 .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-mathquill-condition-container{padding:0;overflow:hidden;position:relative}.dcg-calculator-api-container-v1_12 .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-mathquill-condition-container .dcg-math-field.dcg-invalid{padding-right:30px}.dcg-calculator-api-container-v1_12 .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-mathquill-condition-container .dcg-mq-container{width:100%}.dcg-calculator-api-container-v1_12 .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-mathquill-condition-container .dcg-math-field{width:100%;padding:6px}.dcg-calculator-api-container-v1_12 .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-mathquill-condition-container .dcg-math-field.dcg-mq-focused{box-shadow:inset 0 0 0 2px #2f72dc!important}.dcg-calculator-api-container-v1_12 .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-mathquill-condition-container .dcg-mathquill-braille .dcg-tooltip-hit-area-container{width:100%}.dcg-calculator-api-container-v1_12 .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-mathquill-condition-container .dcg-mathquill-braille .dcg-tooltip-hit-area-container .dcg-braille-input{width:100%;padding:7px}.dcg-calculator-api-container-v1_12 .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row .dcg-mathquill-condition-container .dcg-mathquill-braille .dcg-tooltip-hit-area-container .dcg-braille-input:focus{box-shadow:inset 0 0 0 2px #2f72dc!important}@media screen and (max-width: 480px){.dcg-calculator-api-container-v1_12 .dcg-custom-toolbar-settings-modal .dcg-configuration-grid-row{display:grid;grid-template-columns:1fr 1fr}}@keyframes dcgSharedFadeInDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1}}@keyframes dcgSharedFadeIn{0%{opacity:0}to{opacity:1}}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-container{--dcg-modal-margin: 80px ;--dcg-modal-padding: 30px;--dcg-modal-title-spacing: 16px;font-family:HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif;font-weight:300}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover{position:fixed;top:0;left:0;width:100%;height:100%;z-index:8}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover .dcg-shared-modal-background{position:absolute;top:0;right:0;bottom:0;left:0;background:#000000b3}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover .dcg-shared-modal-transition-container{display:flex;justify-content:center}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover .dcg-shared-modal{position:relative;border-radius:6px}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover.dcg-shared-modal-wide .dcg-shared-modal,.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover.dcg-shared-modal-medium .dcg-shared-modal,.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover.dcg-shared-modal-narrow .dcg-shared-modal,.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover.dcg-shared-modal-tiny .dcg-shared-modal{animation:dcgSharedFadeInDown .3s}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover.dcg-shared-modal-wide .dcg-shared-modal-transition-container,.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover.dcg-shared-modal-medium .dcg-shared-modal-transition-container,.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover.dcg-shared-modal-narrow .dcg-shared-modal-transition-container,.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover.dcg-shared-modal-tiny .dcg-shared-modal-transition-container{margin-top:var(--dcg-modal-margin)}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover.dcg-shared-modal-wide .dcg-shared-modal-contents-wrapper,.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover.dcg-shared-modal-medium .dcg-shared-modal-contents-wrapper,.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover.dcg-shared-modal-narrow .dcg-shared-modal-contents-wrapper,.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover.dcg-shared-modal-tiny .dcg-shared-modal-contents-wrapper{max-height:calc(100vh - 2 * var(--dcg-modal-margin));overflow-y:auto}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover.dcg-shared-modal-background,.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover.dcg-shared-modal-fullscreen .dcg-shared-modal{animation:dcgSharedFadeIn .3s}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover.dcg-shared-modal-wide .dcg-shared-modal{width:800px}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover.dcg-shared-modal-medium .dcg-shared-modal{width:650px}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover.dcg-shared-modal-narrow .dcg-shared-modal{width:500px}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover.dcg-shared-modal-tiny .dcg-shared-modal{width:400px}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover.dcg-shared-modal-fullscreen .dcg-shared-modal{position:absolute;inset:var(--dcg-modal-margin)}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover.dcg-shared-modal-fullscreen .dcg-shared-modal .dcg-shared-modal-contents-wrapper{overflow-y:auto;overflow-x:hidden;position:absolute;top:0;right:0;bottom:0;left:0}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover .dcg-shared-close-cross-container{position:absolute;top:-28px;right:-28px}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover .dcg-shared-modal-contents-wrapper{padding:var(--dcg-modal-padding);background-color:#fff;border-radius:6px;box-shadow:0 0 10px #00000080}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover .dcg-shared-modal-title{display:flex;align-items:stretch;margin:0 0 10px;font-weight:300;font-size:24px;text-align:center}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover .dcg-shared-modal-title.dcg-shared-modal-title--sticky{position:sticky;z-index:1;top:-1px;transform-style:preserve-3d;margin-bottom:calc(var(--dcg-modal-title-spacing) / 2);padding:0;padding-bottom:calc(var(--dcg-modal-title-spacing) / 2)}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover .dcg-shared-modal-title.dcg-shared-modal-title--sticky:before{content:\"\";position:absolute;top:calc(var(--dcg-modal-padding) * -1);left:calc(var(--dcg-modal-padding) * -1);transform:translateZ(-1px);width:calc(100% + 2 * var(--dcg-modal-padding));height:calc(100% + var(--dcg-modal-padding));background-color:#fff}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover .dcg-shared-modal-title.dcg-shared-modal-title--sticky.dcg-shared-modal-title--stuck:before{box-shadow:0 1px 2px #0000000d}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover .dcg-shared-left-align-title{text-align:left}.dcg-calculator-api-container-v1_12 .dcg-shared-back-button{position:relative;top:2px;border:unset;padding:0 4px 0 0;margin-right:6px;background-color:unset}.dcg-calculator-api-container-v1_12 .dcg-shared-back-button.dcg-hovered .dcg-shared-back-button__icon,.dcg-calculator-api-container-v1_12 .dcg-shared-back-button.dcg-focus-visible .dcg-shared-back-button__icon{color:#454545}.dcg-calculator-api-container-v1_12 .dcg-shared-back-button__icon{font-size:18px;color:#bbb}.dcg-calculator-api-container-v1_12 .dcg-shared-close-cross{font-size:110%;width:32px;height:32px;border-radius:50%;color:#fff;opacity:.9;display:flex;align-items:center;justify-content:center}.dcg-calculator-api-container-v1_12 .dcg-shared-close-cross.dcg-hovered{opacity:1;background:#ffffff26}.dcg-calculator-api-container-v1_12 .dcg-shared-close-cross.dcg-depressed{opacity:1;background:#ffffff4d}.dcg-calculator-api-container-v1_12 .dcg-shared-modal__title-icon{margin-top:auto;margin-right:8px;margin-bottom:auto;font-size:21px;color:#949494}@media screen and (max-width: 850px){.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover.dcg-shared-modal-wide .dcg-shared-modal{width:auto;margin:0;position:absolute;top:var(--dcg-modal-margin);left:37px;right:37px}}@media screen and (max-width: 700px){.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover.dcg-shared-modal-medium .dcg-shared-modal{width:auto;margin:0;position:absolute;top:var(--dcg-modal-margin);left:37px;right:37px}}@media screen and (max-width: 600px){.dcg-calculator-api-container-v1_12 .dcg-shared-modal-container .dcg-shared-modal-cover:not(.dcg-shared-modal-tiny) .dcg-shared-modal-background{background-color:#333}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-wide .dcg-shared-modal-transition-container,.dcg-calculator-api-container-v1_12 .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-medium .dcg-shared-modal-transition-container,.dcg-calculator-api-container-v1_12 .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-narrow .dcg-shared-modal-transition-container{margin-top:0}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-container .dcg-shared-modal-cover:not(.dcg-shared-modal-tiny) .dcg-shared-modal-transition-container{height:100%}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-wide .dcg-shared-modal,.dcg-calculator-api-container-v1_12 .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-fullscreen .dcg-shared-modal,.dcg-calculator-api-container-v1_12 .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-medium .dcg-shared-modal,.dcg-calculator-api-container-v1_12 .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-narrow .dcg-shared-modal{position:absolute;top:42px;inset-inline:0;bottom:0;width:auto;margin:0}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-wide .dcg-shared-modal .dcg-shared-close-cross-container,.dcg-calculator-api-container-v1_12 .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-fullscreen .dcg-shared-modal .dcg-shared-close-cross-container,.dcg-calculator-api-container-v1_12 .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-medium .dcg-shared-modal .dcg-shared-close-cross-container,.dcg-calculator-api-container-v1_12 .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-narrow .dcg-shared-modal .dcg-shared-close-cross-container{right:5px;top:-38px}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-wide .dcg-shared-modal .dcg-shared-modal-contents-wrapper,.dcg-calculator-api-container-v1_12 .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-fullscreen .dcg-shared-modal .dcg-shared-modal-contents-wrapper,.dcg-calculator-api-container-v1_12 .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-medium .dcg-shared-modal .dcg-shared-modal-contents-wrapper,.dcg-calculator-api-container-v1_12 .dcg-shared-modal-container .dcg-shared-modal-cover.dcg-shared-modal-narrow .dcg-shared-modal .dcg-shared-modal-contents-wrapper{border-radius:0;position:absolute;top:0;right:0;bottom:0;left:0;overflow-y:auto;overflow-x:hidden;max-height:unset}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-container .dcg-shared-modal-cover:not(.dcg-shared-has-close-button).dcg-shared-modal-wide .dcg-shared-modal,.dcg-calculator-api-container-v1_12 .dcg-shared-modal-container .dcg-shared-modal-cover:not(.dcg-shared-has-close-button).dcg-shared-modal-fullscreen .dcg-shared-modal,.dcg-calculator-api-container-v1_12 .dcg-shared-modal-container .dcg-shared-modal-cover:not(.dcg-shared-has-close-button).dcg-shared-modal-medium .dcg-shared-modal,.dcg-calculator-api-container-v1_12 .dcg-shared-modal-container .dcg-shared-modal-cover:not(.dcg-shared-has-close-button).dcg-shared-modal-narrow .dcg-shared-modal{top:0}}@media screen and (max-width: 460px){.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover.dcg-shared-modal-tiny{--dcg-modal-padding: 20px}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover.dcg-shared-modal-tiny .dcg-shared-modal-background{background-color:#333}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover.dcg-shared-modal-tiny .dcg-shared-modal{position:absolute;right:0;bottom:0;left:0;top:42px;width:unset}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover.dcg-shared-modal-tiny .dcg-shared-modal .dcg-shared-close-cross-container{right:5px;top:-38px}.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover.dcg-shared-modal-tiny .dcg-shared-modal-contents-wrapper{position:absolute;top:0;right:0;bottom:0;left:0;overflow-y:auto;overflow-x:hidden;max-height:unset;border-radius:0}}@media screen and (max-height: 450px) and (orientation: landscape){.dcg-calculator-api-container-v1_12 .dcg-shared-modal-cover{--dcg-modal-margin: 40px}}.dcg-calculator-api-container-v1_12 .dcg-performance-meter{position:absolute;z-index:1;right:0;bottom:0}.dcg-calculator-api-container-v1_12 .dcg-grapher__error-in-graph-bounds{position:absolute;background:#ffffffb3;animation:dcg-fadeIn .2s;z-index:1;display:flex;align-items:center;justify-content:center;color:#454545;text-align:center;font-size:1.4rem;padding:10px 20px 20px;text-shadow:-1px -1px 0 #fff,-1px 1px 0 #fff,1px -1px 0 #fff,1px 1px 0 #fff,0 -1px 0 #fff,0 1px 0 #fff,1px 0 0 #fff,-1px 0 0 #fff}.dcg-calculator-api-container-v1_12 .dcg-grapher__error-in-graph-bounds i{display:block;font-size:4rem;margin-bottom:.5rem;color:#bbb}.dcg-calculator-api-container-v1_12 .dcg-grapher__error-in-graph-bounds i.dcg-hovered,.dcg-calculator-api-container-v1_12 .dcg-grapher__error-in-graph-bounds i.dcg-depressed{color:#949494}.dcg-calculator-api-container-v1_12 .dcg-grapher__error-in-graph-bounds i.dcg-depressed{color:#666}.dcg-calculator-api-container-v1_12 .dcg-grapher__reduced-motion-cover{position:absolute;background:#ffffffe6;z-index:1;width:100%;display:flex;align-items:center;justify-content:center;text-align:center;padding:10px 20px 20px;flex-direction:column;gap:25px}.dcg-calculator-api-container-v1_12 .dcg-reduced-motion-cover__title{font-size:1.25rem;max-width:450px;-webkit-user-select:text;user-select:text}.dcg-calculator-api-container-v1_12 .dcg-reduced-motion-cover__buttons{display:flex;gap:10px;justify-content:center;align-items:center;flex-wrap:wrap}.dcg-aria-alert{position:absolute;left:-1000px;top:-1000px;width:1px;height:1px;text-align:left;overflow:hidden}@media (prefers-reduced-motion){.dcg-calculator-api-container-v1_12 *,.dcg-calculator-api-container-v1_12 *:after,.dcg-calculator-api-container-v1_12 *:before{transition:none!important;animation-duration:0ms!important;animation-delay:0ms!important}}.dcg-calculator-api-container-v1_12 .dcg-calc-basic-main-wrapper{height:100%;width:100%;position:relative}.dcg-calculator-api-container-v1_12 .dcg-calc-basic-main{height:100%;width:100%;background:var(--dcg-custom-background-color, #fff);color:var(--dcg-custom-text-color, #000);display:flex;flex-direction:column;flex-wrap:nowrap;border-radius:2px;font-family:Arial,sans-serif}.dcg-calculator-api-container-v1_12 .dcg-calc-basic-main *{box-sizing:border-box}.dcg-calculator-api-container-v1_12 .dcg-calc-basic-main.dcg-no-hyperlinks a[target=_blank]{display:none!important}@keyframes dcg-fadePulse{0%{opacity:0;transform:scale(.7)}50%{transform:scale(1.1)}to{opacity:1;transform:scale(1)}}.dcg-calculator-api-container-v1_12 .dcg-basic-list-container{flex:1;display:flex;flex-direction:column;overflow:auto;border-top:1px solid rgba(0,0,0,.2)}.dcg-calculator-api-container-v1_12 .dcg-basic-list-container .dcg-basic-list{width:100%}.dcg-calculator-api-container-v1_12 .dcg-basic-list-container .dcg-basic-list.dcg-projector-mode{font-size:150%}.dcg-calculator-api-container-v1_12 .dcg-basic-list-container .dcg-basic-list.dcg-projector-mode .dcg-braille-input input,.dcg-calculator-api-container-v1_12 .dcg-basic-list-container .dcg-basic-list.dcg-projector-mode .dcg-braille-evaluation input{font-size:135%}.dcg-calculator-api-container-v1_12 .dcg-basic-list-container .dcg-basic-list-placeholder{flex:1;border-right:1px solid rgba(0,0,0,.2);border-left:1px solid rgba(0,0,0,.2);position:relative;overflow:hidden}.dcg-calculator-api-container-v1_12 .dcg-basic-list-container .dcg-basic-list-placeholder .dcg-answer-hint{transition:opacity 1s;padding:10px 30px 10px 10px;width:200px;opacity:.7;position:absolute;bottom:0;right:0;text-align:right;animation:dcg-fadePulse .3s}.dcg-calculator-api-container-v1_12 .dcg-basic-list-container .dcg-basic-list-placeholder .dcg-answer-hint i{position:absolute;bottom:10px;right:-5px;font-size:2rem;color:#949494}.dcg-calculator-api-container-v1_12 .dcg-inverted-colors .dcg-settings-dropdown .dcg-popover-interior{box-shadow:none}@media screen and (max-height: 350px){.dcg-calculator-api-container-v1_12 .dcg-basic-list-container .dcg-basic-list-placeholder .dcg-answer-hint{width:100%}}@keyframes dcg-fadeIn{0%{opacity:0}to{opacity:1}}@keyframes dcg-delayed-fadeIn{0%{opacity:0}80%{opacity:0}to{opacity:1}}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-basic-expression .dcg-mq-container .dcg-mq-editable-field{width:100%}.dcg-calculator-api-container-v1_12 .dcg-container .dcg-basic-expression .dcg-mq-container .dcg-mq-editable-field:after{position:absolute;top:1px;right:0;bottom:1px}.dcg-calculator-api-container-v1_12 .dcg-basic-expression{min-height:56px;border:1px solid rgba(0,0,0,.2);margin-top:-1px;position:relative;display:flex;align-items:center;width:100%}.dcg-calculator-api-container-v1_12 .dcg-basic-expression:not(:first-of-type){border-top-color:transparent}.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-focused{border-color:var(--dcg-accent-color, #2f72dc);box-shadow:inset 0 0 0 1px var(--dcg-accent-color, #2f72dc);z-index:1}.dcg-calculator-api-container-v1_12 .dcg-basic-expression:first-of-type{margin-top:0}.dcg-calculator-api-container-v1_12 .dcg-basic-expression .dcg-exp-output-container{padding-right:5px}.dcg-calculator-api-container-v1_12 .dcg-basic-expression .dcg-exp-output-container .dcg-tooltipped-error-container{margin-right:5px}.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-braille-io{flex-wrap:wrap;padding:2px}.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-braille-io input{background:transparent}.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-braille-io .dcg-mq-math-mode{padding:0}.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-braille-io .dcg-braille-input input,.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-braille-io .dcg-braille-evaluation input,.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-braille-io .dcg-braille-error input{border:none;width:100%}.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-braille-io .dcg-braille-error{padding-right:5px}.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-braille-io .dcg-braille-input input{outline:none}.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-braille-io .dcg-braille-evaluation input:focus{outline:1px dotted #000}.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-braille-io .dcg-braille-error input{border:1px solid transparent}.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-braille-io .dcg-braille-error input:focus{color:#000;outline:1px dotted #000}.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-braille-io .dcg-braille-input input,.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-braille-io .dcg-braille-evaluation input{font-family:Abraham,serif;font-size:163%;padding:8px 8px 0}.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-braille-io .dcg-basic-expression-error{font-size:140%}.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-braille-io .dcg-braille-error{position:absolute;top:-.8em;right:0;width:100%}.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-braille-io .dcg-braille-error textarea{width:100%;text-align:right;color:#666;font-size:80%;border:none;resize:none;animation:dcg-delayed-fadeIn 1s}.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-braille-io .dcg-braille-error textarea:focus{outline:dotted 1px #666;color:#000}.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-braille-io .dcg-braille-input,.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-braille-io .dcg-braille-evaluation-container,.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-braille-io .dcg-exp-mathquill-container,.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-braille-io .dcg-exp-output-container{flex:1 1 40%}.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-braille-io .dcg-braille-evaluation-container{position:relative}.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-braille-io .dcg-braille-evaluation input,.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-braille-io .dcg-exp-output-container,.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-braille-io .dcg-braille-error{text-align:right}.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-braille-io .dcg-exp-mathquill-container{padding:8px}.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-braille-io .dcg-exp-mathquill-container,.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-braille-io .dcg-exp-output-container{font-size:90%;color:#666}.dcg-calculator-api-container-v1_12 .dcg-basic-expression.dcg-braille-io .dcg-exp-output-container{padding:8px}.dcg-calculator-api-container-v1_12 .dcg-basic-expression .dcg-exp-mathquill-container{flex:1;overflow:hidden;margin-right:1px}.dcg-calculator-api-container-v1_12 .dcg-basic-expression .dcg-exp-mathquill-container .dcg-mq-container{width:100%}.dcg-calculator-api-container-v1_12 .dcg-basic-expression .dcg-mq-math-mode{padding:12px 5px 12px 15px;outline:none!important;box-shadow:none!important;border:0}.dcg-calculator-api-container-v1_12 .dcg-basic-expression .dcg-basic-expression-error{color:#e66b3c;font-size:130%}.dcg-calculator-api-container-v1_12 .dcg-basic-expression .dcg-basic-expression-value{animation:dcg-fadeIn .5s}.dcg-calculator-api-container-v1_12 .dcg-basic-expression .dcg-basic-expression-value.dcg-basic-evaluation-gray .dcg-static-mathquill-view{color:#666}.dcg-calculator-api-container-v1_12 .dcg-basic-expression .dcg-basic-expression-value .dcg-basic-fraction-toggle{font-size:20px;display:inline-block;width:29px;height:29px;border:2px solid #000;opacity:.5;color:#000;text-align:center;border-radius:50%;margin:0 5px}.dcg-calculator-api-container-v1_12 .dcg-basic-expression .dcg-basic-expression-value .dcg-basic-fraction-toggle i{position:relative;top:2px}.dcg-calculator-api-container-v1_12 .dcg-basic-expression .dcg-basic-expression-value .dcg-basic-fraction-toggle.dcg-hovered{opacity:.7}.dcg-calculator-api-container-v1_12 .dcg-basic-expression .dcg-basic-expression-value .dcg-basic-fraction-toggle.dcg-depressed{opacity:.9}.dcg-calculator-api-container-v1_12 .dcg-basic-expression .dcg-basic-expression-value .dcg-basic-fraction-toggle.dcg-selected{background:#000;opacity:.5;color:#fff}.dcg-calculator-api-container-v1_12 .dcg-basic-expression .dcg-basic-expression-value .dcg-basic-fraction-toggle.dcg-selected.dcg-hovered{opacity:.7}.dcg-calculator-api-container-v1_12 .dcg-basic-expression .dcg-basic-expression-value .dcg-basic-fraction-toggle.dcg-selected.dcg-depressed{opacity:.9}.dcg-calculator-api-container-v1_12 .dcg-basic-expression .dcg-slider-container{height:40px;width:250px;max-width:100%;padding-right:3px}.dcg-calculator-api-container-v1_12 .dcg-basic-expression .dcg-mq-ans{border:2px solid #2f72dc;color:#2f72dc;background-color:#2f72dc26;padding:.2em .4em;display:inline-block;border-radius:4px;margin-right:1px;margin-bottom:2px;min-width:30px;text-align:center;text-overflow:ellipsis;vertical-align:middle;position:relative}.dcg-calculator-api-container-v1_12 .dcg-basic-expression .dcg-mq-ans sup{font-size:80%}.dcg-calculator-api-container-v1_12 .dcg-basic-expression .dcg-mq-ans:after{box-sizing:border-box;content:\"ans\";position:absolute;bottom:-.5em;left:50%;font-size:60%;width:1.9em;overflow:hidden;text-align:center;margin-left:-.95em;color:#2f72dc;border:1px solid #2f72dc;background:#fff;padding:0;border-radius:3px;height:1em;line-height:.9em}.dcg-calculator-api-container-v1_12 .dcg-basic-expression .dcg-mq-ans.dcg-invalid{border-color:#e66b3c;background:#e66b3c1a;color:#e66b3c}.dcg-calculator-api-container-v1_12 .dcg-basic-expression .dcg-mq-ans.dcg-invalid i{font-style:normal;font-size:80%}.dcg-calculator-api-container-v1_12 .dcg-basic-expression .dcg-mq-ans.dcg-invalid:after{color:#e66b3c;border-color:#e66b3c}.dcg-calculator-api-container-v1_12 .dcg-basic-expression .dcg-mq-selection .dcg-mq-ans{background:#2f72dc;color:#fff}.dcg-calculator-api-container-v1_12 .dcg-basic-expression .dcg-mq-selection .dcg-mq-ans.dcg-invalid{background:#e66b3c}.dcg-calculator-api-container-v1_12 .dcg-calc-basic-main.dcg-projector-mode .dcg-mq-ans:after{position:absolute;bottom:-.3em;left:50%;height:.9em;line-height:.8em}.dcg-calculator-api-container-v1_12 .dcg-calc-basic-main.dcg-projector-mode .dcg-basic-expression.dcg-braille-io .dcg-braille-error{font-size:90%}.dcg-calculator-api-container-v1_12 .dcg-braille-io-keypad-container{padding-top:4px}.dcg-calculator-api-container-v1_12 .dcg-braille-io-keypad-container .dcg-braille-io-keypad{color:#666;border-top:1px solid rgba(0,0,0,.2);padding:10px;display:flex}.dcg-calculator-api-container-v1_12 .dcg-braille-io-keypad-container .dcg-braille-io-keypad a{color:#2f72dc}.dcg-calculator-api-container-v1_12 .dcg-braille-io-keypad-container .dcg-braille-io-keypad a.dcg-hovered{color:#2253a1}.dcg-calculator-api-container-v1_12 .dcg-braille-io-keypad-container .dcg-braille-io-keypad a.dcg-depressed{color:#17396e}.dcg-calculator-api-container-v1_12 .dcg-braille-io-keypad-container .dcg-braille-io-keypad .dcg-braille-examples-table-container{color:#454545;padding:10px 10px 0}.dcg-calculator-api-container-v1_12 .dcg-braille-io-keypad-container .dcg-braille-io-keypad .dcg-braille-examples-table-container .dcg-more-examples-link{text-align:center}.dcg-calculator-api-container-v1_12 .dcg-braille-io-keypad-container .dcg-braille-io-keypad .dcg-braille-examples-table-container table{margin-bottom:10px;border:1px solid rgba(0,0,0,.2)}.dcg-calculator-api-container-v1_12 .dcg-braille-io-keypad-container .dcg-braille-io-keypad .dcg-braille-examples-table-container table th{background:#00000012}.dcg-calculator-api-container-v1_12 .dcg-braille-io-keypad-container .dcg-braille-io-keypad .dcg-braille-description{flex:1;display:flex;padding:10px 0 10px 10px}.dcg-calculator-api-container-v1_12 .dcg-braille-io-keypad-container .dcg-braille-io-keypad .dcg-braille-description .dcg-braille-title{font-size:130%;color:#333}.dcg-calculator-api-container-v1_12 .dcg-braille-io-keypad-container .dcg-braille-io-keypad .dcg-braille-description .dcg-braille-info-text{font-size:95%;margin-bottom:10px;line-height:1.2em}.dcg-calculator-api-container-v1_12 .dcg-braille-io-keypad-container .dcg-braille-io-keypad .dcg-braille-description .dcg-btn-blue{padding:0 12px}.dcg-calculator-api-container-v1_12 .dcg-scientific-calculator .dcg-braille-io-keypad .dcg-braille-description,.dcg-calculator-api-container-v1_12 .dcg-four-function-calculator .dcg-braille-io-keypad .dcg-braille-description{flex-direction:column}.dcg-calculator-api-container-v1_12 .dcg-scientific-calculator .dcg-braille-io-keypad .dcg-braille-description .dcg-braille-title,.dcg-calculator-api-container-v1_12 .dcg-four-function-calculator .dcg-braille-io-keypad .dcg-braille-description .dcg-braille-title{margin-bottom:10px}.dcg-calculator-api-container-v1_12 .dcg-scientific-calculator .dcg-braille-io-keypad .dcg-braille-description .dcg-btn-blue,.dcg-calculator-api-container-v1_12 .dcg-four-function-calculator .dcg-braille-io-keypad .dcg-braille-description .dcg-btn-blue{margin-right:auto}.dcg-calculator-api-container-v1_12 .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad{flex-direction:column;text-align:center;align-items:center}.dcg-calculator-api-container-v1_12 .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-description{flex-flow:row wrap;justify-content:center;align-items:center;padding:10px}.dcg-calculator-api-container-v1_12 .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-description .dcg-braille-title{margin:0 10px}.dcg-calculator-api-container-v1_12 .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-description .dcg-btn-blue{order:1;margin-right:0}.dcg-calculator-api-container-v1_12 .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-description .dcg-braille-info-text{order:2;width:100%;margin:5px 0 0}.dcg-calculator-api-container-v1_12 .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-examples-table-container th,.dcg-calculator-api-container-v1_12 .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-examples-table-container td{padding:2px 5px}.dcg-calculator-api-container-v1_12 .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-examples-table-container tr:nth-of-type(3){display:none}.dcg-calculator-api-container-v1_12 .dcg-short.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad{height:170px;padding:3px}.dcg-calculator-api-container-v1_12 .dcg-short.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-examples-table-container table{margin-bottom:5px}.dcg-calculator-api-container-v1_12 .dcg-short.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-examples-table-container tr:last-of-type{display:none}.dcg-calculator-api-container-v1_12 .dcg-short.dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad{font-size:90%}.dcg-calculator-api-container-v1_12 .dcg-short.dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-description{padding-bottom:5px}.dcg-calculator-api-container-v1_12 .dcg-short.dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-description .dcg-btn-blue{padding:5px 8px}.dcg-calculator-api-container-v1_12 .dcg-short.dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-more-examples-link{display:none}.dcg-calculator-api-container-v1_12 .dcg-short.dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-examples-table-container{padding-top:0}.dcg-calculator-api-container-v1_12 .dcg-short.dcg-narrow.dcg-calc-basic-main-wrapper .dcg-braille-io-keypad .dcg-braille-examples-table-container td{height:35px}.dcg-calculator-api-container-v1_12 table.dcg-braille-examples-table{border-collapse:collapse}.dcg-calculator-api-container-v1_12 table.dcg-braille-examples-table tr:not(:last-of-type){border-bottom:1px solid rgba(0,0,0,.2)}.dcg-calculator-api-container-v1_12 table.dcg-braille-examples-table th{font-family:Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif;font-weight:500}.dcg-calculator-api-container-v1_12 table.dcg-braille-examples-table th,.dcg-calculator-api-container-v1_12 table.dcg-braille-examples-table td{padding:5px 8px}.dcg-calculator-api-container-v1_12 table.dcg-braille-examples-table th:not(:last-of-type),.dcg-calculator-api-container-v1_12 table.dcg-braille-examples-table td:not(:last-of-type){border-right:1px solid rgba(0,0,0,.2)}.dcg-calculator-api-container-v1_12 table.dcg-braille-examples-table th:not(:first-of-type),.dcg-calculator-api-container-v1_12 table.dcg-braille-examples-table td:not(:first-of-type){text-align:center}.dcg-calculator-api-container-v1_12 table.dcg-braille-examples-table td{height:45px}.dcg-calculator-api-container-v1_12 table.dcg-braille-examples-table .dcg-braille-font{font-family:Abraham;font-size:110%}.dcg-calculator-api-container-v1_12 table.dcg-braille-examples-table .dcg-key-press{border:1px solid rgba(0,0,0,.2);background:#fff9;border-radius:3px;width:25px;height:25px;line-height:23px;text-align:center;display:inline-block;margin-right:2px;vertical-align:middle}.dcg-calculator-api-container-v1_12 .dcg-keypad-control-bar{height:40px;background-color:#00000012;border-left:1px solid rgba(0,0,0,.2);border-right:1px solid rgba(0,0,0,.2)}.dcg-calculator-api-container-v1_12 .dcg-keypad-control-bar .dcg-keypad-control-bar-contents{display:flex;flex-flow:row nowrap;align-items:stretch;flex-shrink:0;padding-top:2px}.dcg-calculator-api-container-v1_12 .dcg-keypad-control-bar .dcg-spacer{flex-grow:1}.dcg-calculator-api-container-v1_12 .dcg-keypad-control-bar .dcg-spacer-2{flex-grow:2}.dcg-calculator-api-container-v1_12 .dcg-keypad-control-bar .dcg-radiangroup{align-content:center;padding:0 5px}.dcg-calculator-api-container-v1_12 .dcg-keypad-control-bar .dcg-radiangroup .dcg-segmented-control-interior{min-width:42px;font-size:.8rem;text-transform:uppercase}.dcg-calculator-api-container-v1_12 .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-keypad-control-bar{height:52px}.dcg-calculator-api-container-v1_12 .dcg-keypad-control-btn{flex-grow:1;min-width:40px;text-align:center;color:var(--dcg-custom-text-color, rgba(0, 0, 0, .6));font-size:.875rem}.dcg-calculator-api-container-v1_12 .dcg-keypad-control-btn.dcg-narrow-control-btn{max-width:80px}.dcg-calculator-api-container-v1_12 .dcg-keypad-control-btn.dcg-selectable-btn{padding:0 5px;height:38px;line-height:40px}.dcg-calculator-api-container-v1_12 .dcg-keypad-control-btn:not(.dcg-selectable-btn){height:32px;line-height:32px;margin:5px;border-radius:5px}.dcg-calculator-api-container-v1_12 .dcg-keypad-control-btn.dcg-disabled{color:#00000026;cursor:default}.dcg-calculator-api-container-v1_12 .dcg-keypad-control-btn:not(.dcg-disabled):not(.dcg-selectable-btn).dcg-hovered{color:var(--dcg-custom-text-color, rgba(0, 0, 0, .8));background:#0000001a}.dcg-calculator-api-container-v1_12 .dcg-keypad-control-btn:not(.dcg-disabled):not(.dcg-selectable-btn).dcg-depressed{color:var(--dcg-custom-text-color, #000);background:#0000002e}.dcg-calculator-api-container-v1_12 .dcg-keypad-control-btn[dcg-command=settings] i{font-size:120%;position:relative;top:1px}.dcg-calculator-api-container-v1_12 .dcg-keypad-control-btn[dcg-command=backspace] i,.dcg-calculator-api-container-v1_12 .dcg-keypad-control-btn[dcg-command=undo] i,.dcg-calculator-api-container-v1_12 .dcg-keypad-control-btn[dcg-command=redo] i{font-size:150%;position:relative;top:3px}.dcg-calculator-api-container-v1_12 .dcg-keypad-control-btn[dcg-command=clear]{width:50px;white-space:nowrap}.dcg-calculator-api-container-v1_12 .dcg-keypad-control-btn[dcg-command=clearall]{width:50px;line-height:inherit;display:flex;align-items:center;justify-content:center}.dcg-calculator-api-container-v1_12 .dcg-keypad-control-bar .dcg-keypad-control-btn:not(.dcg-disabled).dcg-selectable-btn{position:relative}.dcg-calculator-api-container-v1_12 .dcg-keypad-control-bar .dcg-keypad-control-btn:not(.dcg-disabled).dcg-selectable-btn:after{position:absolute;bottom:0;left:0;right:0;content:\"\";height:0;opacity:.5;background:var(--dcg-accent-color, #2f72dc)}.dcg-calculator-api-container-v1_12 .dcg-keypad-control-bar .dcg-keypad-control-btn:not(.dcg-disabled).dcg-selectable-btn.dcg-hovered:not(.dcg-selected){color:var(--dcg-custom-text-color, #000)}.dcg-calculator-api-container-v1_12 .dcg-keypad-control-bar .dcg-keypad-control-btn:not(.dcg-disabled).dcg-selectable-btn.dcg-hovered:not(.dcg-selected):after{height:4px;transition:height .2s}.dcg-calculator-api-container-v1_12 .dcg-keypad-control-bar .dcg-keypad-control-btn:not(.dcg-disabled).dcg-selectable-btn.dcg-selected{color:var(--dcg-custom-text-color, #000)}.dcg-calculator-api-container-v1_12 .dcg-keypad-control-bar .dcg-keypad-control-btn:not(.dcg-disabled).dcg-selectable-btn.dcg-selected:after{opacity:1;height:4px;background:var(--dcg-accent-color, #2f72dc)}.dcg-calculator-api-container-v1_12 .dcg-keypad-control-bar .dcg-keypad-control-btn:not(.dcg-disabled).dcg-selectable-btn:first-of-type{margin-left:6px}.dcg-calculator-api-container-v1_12 .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-keypad-control-btn{min-width:25px}.dcg-calculator-api-container-v1_12 .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-keypad-control-btn[dcg-command=clearall],.dcg-calculator-api-container-v1_12 .dcg-narrow.dcg-calc-basic-main-wrapper .dcg-keypad-control-btn[dcg-command=clear]{width:50px}.dcg-calculator-api-container-v1_12 .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-keypad-control-btn{font-size:150%;height:44px;line-height:44px}.dcg-calculator-api-container-v1_12 .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-radiangroup .dcg-segmented-control-interior{font-size:150%}.dcg-calculator-api-container-v1_12 .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-keypad-control-btn[dcg-command=clearall],.dcg-calculator-api-container-v1_12 .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-keypad-control-btn[dcg-command=clear]{width:75px}.dcg-calculator-api-container-v1_12 .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-keypad-control-btn[dcg-command=clearall]{line-height:20px}.dcg-calculator-api-container-v1_12 .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-keypad-control-btn[dcg-command=settings] i{top:4px}.dcg-calculator-api-container-v1_12 .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-keypad-control-btn[dcg-command=backspace] i,.dcg-calculator-api-container-v1_12 .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-keypad-control-btn[dcg-command=undo] i,.dcg-calculator-api-container-v1_12 .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-keypad-control-btn[dcg-command=redo] i{top:5px}.dcg-calculator-api-container-v1_12 .dcg-calc-basic-main-wrapper:not(.dcg-narrow) .dcg-projector-mode .dcg-selectable-btn{top:4px}.dcg-calculator-api-container-v1_12 .dcg-basic-settings-container{position:relative;flex-grow:1}.dcg-calculator-api-container-v1_12 .dcg-basic-settings-container .dcg-keypad-control-btn.dcg-selected{color:#333;background:#0000001a}.dcg-calculator-api-container-v1_12 .dcg-settings-dropdown{font-size:95%;color:#333;width:280px;position:absolute;bottom:50px;right:5px;-webkit-user-select:none;user-select:none}.dcg-calculator-api-container-v1_12 .dcg-settings-dropdown .dcg-popover-interior{display:flex;flex-direction:column;gap:10px}.dcg-calculator-api-container-v1_12 .dcg-settings-dropdown .dcg-settings-menu-option{cursor:pointer}.dcg-calculator-api-container-v1_12 .dcg-settings-dropdown .dcg-settings-menu-option .dcg-disabled{cursor:default}.dcg-calculator-api-container-v1_12 .dcg-settings-dropdown .dcg-displaysize-large{font-size:150%}.dcg-calculator-api-container-v1_12 .dcg-settings-dropdown .dcg-braille-container{padding-left:26px}.dcg-calculator-api-container-v1_12 .dcg-settings-dropdown .dcg-braille-container .dcg-braille-options-buttons{margin-top:10px}.dcg-calculator-api-container-v1_12 .dcg-settings-dropdown .dcg-complex-container{border-top:1px solid #e2e2e2;padding-top:10px}.dcg-calculator-api-container-v1_12 .dcg-settings-dropdown.dcg-popover .dcg-popover-interior{padding:10px;background-color:var(--dcg-custom-background-color, #fff);color:var(--dcg-custom-text-color, #000)}.dcg-calculator-api-container-v1_12 .dcg-settings-dropdown.dcg-popover .dcg-popover-interior:after{content:\"\";position:absolute;bottom:-7px;right:18px;border-width:7px;border-bottom-width:0;border-style:solid;border-color:var(--dcg-custom-background-color, #fff) transparent transparent;line-height:0}.dcg-calculator-api-container-v1_12 .dcg-settings-dropdown.dcg-popover .dcg-popover-interior:before{content:\"\";position:absolute;bottom:-8px;right:17px;border-width:8px;border-bottom-width:0;border-style:solid;border-color:#bbb transparent transparent;line-height:0}.dcg-calculator-api-container-v1_12 .dcg-settings-dropdown.dcg-point-left{position:absolute;top:-30px;left:-280px}.dcg-calculator-api-container-v1_12 .dcg-settings-dropdown.dcg-point-left.dcg-popover .dcg-popover-interior:after{content:\"\";position:absolute;right:-7px;top:43px;border-width:7px;border-right-width:0;border-style:solid;border-color:transparent transparent transparent var(--dcg-custom-background-color, #fff);line-height:0}.dcg-calculator-api-container-v1_12 .dcg-settings-dropdown.dcg-point-left.dcg-popover .dcg-popover-interior:before{content:\"\";position:absolute;right:-8px;top:42px;border-width:8px;border-right-width:0;border-style:solid;border-color:transparent transparent transparent #bbb;line-height:0}.dcg-calculator-api-container-v1_12 .dcg-scientific-calculator.dcg-narrow .dcg-settings-dropdown.dcg-popover:not(.dcg-point-left) .dcg-popover-interior:after{right:10px}.dcg-calculator-api-container-v1_12 .dcg-scientific-calculator.dcg-narrow .dcg-settings-dropdown.dcg-popover:not(.dcg-point-left) .dcg-popover-interior:before{right:9px}.dcg-calculator-api-container-v1_12 .dcg-version-number{color:#666;font-size:90%;text-align:center;margin-top:15px}.dcg-calculator-api-container-v1_12 .dcg-download-button.dcg-disabled{pointer-events:none}.dcg-calculator-api-container-v1_12 .dcg-download-button.dcg-blue-link{display:flex;align-items:center;margin-top:5px}.dcg-calculator-api-container-v1_12 .dcg-download-button.dcg-blue-link span{text-decoration:underline}.dcg-calculator-api-container-v1_12 .dcg-download-button.dcg-blue-link .dcg-icon-download{margin-right:10px}.dcg-calculator-api-container-v1_12 .dcg-narrower .dcg-sci-func-keypad--complex{font-size:80%}\n";
  document.getElementsByTagName('head')[0].appendChild(elt);

  var _Desmos;
  if ( typeof module === "object" && typeof module.exports === "object" ) {
    _Desmos = {};
    module.exports = _Desmos;
  } else {
    _Desmos = (typeof Desmos !== 'undefined') ? Desmos : {};
    global.Desmos = _Desmos;
  }

  ;(function () {
    
    var module = undefined;
    var exports = undefined;
    var Desmos = _Desmos;
    if (!Desmos.config) Desmos.config = {};
    
    if (typeof desmosEnabledFeatures === 'object') Desmos.enabledFeatures = desmosEnabledFeatures;
    
    if (typeof desmosLocales === 'object') Desmos.locales = desmosLocales;
    if (typeof desmosLocaleData === 'object') Desmos.localeData = desmosLocaleData;
    if (typeof desmosCommit === 'string') Desmos.commit = desmosCommit;
    if (typeof desmosVersion === 'string') Desmos.version = desmosVersion;
    (() => {
  const __dcg_shared_module_source__ = "// shared.js\n  (() => {\n    const __dcg_chunk_exports__ = {};var Zq=Object.create;var uP=Object.defineProperty;var Xq=Object.getOwnPropertyDescriptor;var Wq=Object.getOwnPropertyNames;var jq=Object.getPrototypeOf,Jq=Object.prototype.hasOwnProperty;var t7=(e=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(e,{get:(t,n)=>(typeof require!=\"undefined\"?require:t)[n]}):e)(function(e){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw Error('Dynamic require of \"'+e+'\" is not supported')});var Cn=(e,t)=>()=>(e&&(t=e(e=0)),t);var n7=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Tu=(e,t)=>{for(var n in t)uP(e,n,{get:t[n],enumerable:!0})},Qq=(e,t,n,r)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let o of Wq(t))!Jq.call(e,o)&&o!==n&&uP(e,o,{get:()=>t[o],enumerable:!(r=Xq(t,o))||r.enumerable});return e};var r7=(e,t,n)=>(n=e!=null?Zq(jq(e)):{},Qq(t||!e||!e.__esModule?uP(n,\"default\",{value:e,enumerable:!0}):n,e));var oN,lP,i7,Kq,s7,cP,eU,a7,u7,vf=Cn(()=>{oN=\"v1.12\",lP=[\"graphing\",\"geometry-calculator\",\"graphing-3d\"],i7=[...lP,\"notebook\"],Kq=[\"education\",\"commercial\",\"generic\",\"prospect\"],s7=[...Kq,\"uncategorized\"],cP=[2024,2023,2022,2021,2020],eU=2024,a7=eU-1,u7=[\"/art\",...cP.map(e=>`/art-${e}`),...cP.map(e=>`/certificate-${e}`),...cP.map(e=>`/winner-certificate-${e}`)]});var p7,iN=Cn(()=>{vf();p7=[...lP,\"recovery\"]});function pP(e){let t={};for(let n in e)t[n]=e[n].getAuthoringConfig();return t}function Mf(e,t,n={}){let r=n[e]||e===\"validation\";return`\"${e}\"${r?\"?\":\"\"}:${t}`}var _f,$c,ie,Or,oh,Rf,ih,dP,Iu,mP=Cn(()=>{_f=class{},$c=class extends _f{constructor(){super(...arguments);this._conditionalAttributes=new Map;this.arrayBoundsChecks=[];this.latexs=[];this.labels=[]}ensureNumber(){return this.validation=\"number\",this}ensureString(){return this.validation=\"string\",this}ensureEnum(n){return this.validation=n,this}conditionalAttributes(n,r){return this._conditionalAttributes.set(n,r),this}ensureWithinArrayBounds(n){return this.arrayBoundsChecks.push(n),this}ensureWithinRange(n,r){return this.numberRange={min:n,max:r},this}latex(n){return this.latexs.push(n),this}label(n){return this.labels.push(n),this}validateReferences({validator:n,path:r,value:o,concreteCtx:i}){if(this.arrayBoundsChecks.length)if(!(typeof o==\"number\"&&o>=1&&Number.isInteger(o)))n.reportError(r,\"array index must be an integer of at least 1. Got: \"+o);else for(let a of this.arrayBoundsChecks){let u=[];for(let c of i.nodes)c.type===\"array\"&&c.node===a&&u.push(c.rawValue.length);if(u.length!==1)n.reportError(r,\"expected exactly 1 array reference. got: \"+u.length);else{let c=u[0];o>c&&n.reportError(r,\"expected to be at most \"+c+\", got: \"+o)}}}addGraphMutations({validator:n,path:r,value:o,graphMutations:i}){for(let s of this.latexs)typeof o==\"string\"||typeof o==\"number\"?i.push({type:\"value\",identifier:s,value:o+\"\"}):typeof o==\"boolean\"?i.push({type:\"value\",identifier:s,value:o?\"1\":\"0\"}):n.reportError(r,\"unexpected latexValue mutation value type:  \"+typeof o);for(let s of this.labels)typeof o==\"string\"?i.push({type:\"label\",identifier:s,value:o+\"\"}):n.reportError(r,\"unexpected label mutation value type:  \"+typeof o)}parseString({path:n,subData:r,validator:o}){let i=r;if(!this.validation)return o.reportError(n,'has no validation. Use \"string\" for no validation'),i;if(o.shouldSkipParsingDataVariable(i))return i;if(typeof this.validation==\"object\")return i in this.validation?this.validation[i]:(o.reportError(n,\"unknown type: \"+i),i);switch(this.validation){case\"string\":return i;case\"number\":if(!/^-?[0-9]*[.]?[0-9]*$/.test(i)||!/[0-9]/g.test(i))return o.reportError(n,\"expected to be a number but it was not: \"+i),NaN;let s=parseFloat(i);return this.numberRange&&(s<this.numberRange.min||s>this.numberRange.max)?(o.reportError(n,\"expected to be between \"+this.numberRange.min+\" and \"+this.numberRange.max+\" but was: \"+i),NaN):s;default:this.validation;break}return i}};ie=class extends _f{constructor(n){super();this.config=n;this.computedConditionalAttributes=[];for(let o in this.config.attributes){let i=this.config.attributes[o];if(i instanceof $c){let s=i._conditionalAttributes;if(s.size>0){let a=[];for(let[u,c]of s.entries())a.push({value:u,attributes:c});this.computedConditionalAttributes.push({attribute_key:o,conditions:a})}}}let r=[];for(let o of this.computedConditionalAttributes){let i=[];for(let s of o.conditions){for(let a in s.attributes){let u=s.attributes[a];if(u instanceof $c&&u._conditionalAttributes.size)throw new Error(\"cannot have nested conditional attributes. Must route through object\")}i.push({value:s.value,attributes:pP(s.attributes)})}r.push({attribute_key:o.attribute_key,conditions:i})}this.authoringConfig={type:\"object\",name:n.name,attributes:pP(n.attributes),conditional_attributes:r}}getAuthoringConfig(){return this.authoringConfig}getTypescriptType(n){let r=[],o=[];for(let i in this.config.attributes)o.push(Mf(i,this.config.attributes[i].getTypescriptType(n)));r.push(`{\n`+o.join(`,\n`)+`\n}`);for(let i of this.computedConditionalAttributes){let s=[],a=this.config.attributes[i.attribute_key];if(!a)throw new Error(\"did not find attribute_key in attributes\");if(!(a instanceof $c))throw new Error(\"attribute_key must be a primitive attribute\");let u=a.getEnumerableValues(n);if(!u)throw new Error(\"attribute_key must have a finite, enumerable set of values\");let c=new Set(u);for(let l of i.conditions){if(n){let p=this.config.attributes[i.attribute_key];p instanceof Rf&&typeof p.validation==\"object\"&&(l={...l,value:p.validation[l.value]})}if(o=[],o.push(Mf(i.attribute_key,JSON.stringify(l.value))),c.has(l.value))c.delete(l.value);else throw new Error(\"conditional_attribute specified value multiple times: \"+l.value);for(let p in l.attributes)o.push(Mf(p,l.attributes[p].getTypescriptType(n)));s.push(`{\n`+o.join(`,\n`)+`\n}`)}if(c.size)for(let l of c)s.push(`{\n${Mf(i.attribute_key,JSON.stringify(l))}}`);r.push(\"(\"+s.join(\" | \")+\")\")}return r.length>1?\"(\"+r.join(\" & \")+\")\":r[0]}toConcrete({validator:n,path:r,rawValue:o,concreteCtx:i}){if(!o||typeof o!=\"object\"){n.reportError(r,\"should be an object\");return}let s={};for(let c in this.config.attributes)s[c]=this.config.attributes[c].toConcrete({path:r+\".\"+c,validator:n,rawValue:o[c],concreteCtx:i});for(let{attribute_key:c,conditions:l}of this.computedConditionalAttributes)for(let{attributes:p,value:d}of l)if(o[c]===d)for(let m in p)s[m]=p[m].toConcrete({path:r+\".\"+m,validator:n,rawValue:o[m],concreteCtx:i});let a={};for(let c in s){let l=s[c];l?a[c]=l.parsedValue:a[c]=void 0}let u={type:\"object\",path:r,rawValue:s,parsedValue:a,node:this};return i.nodes.push(u),u}},Or=class extends _f{constructor(n){super();this.config=n;let r;(\"minimum\"in n||\"maximum\"in n)&&(r={maximum:n.maximum,minimum:n.minimum}),this.authoringConfig={type:\"array\",required:!0,name:n.name,count:r,items:n.items.getAuthoringConfig()}}getAuthoringConfig(){return this.authoringConfig}getTypescriptType(n){return`(${this.config.items.getTypescriptType(n)})[]`}toConcrete({validator:n,path:r,rawValue:o,concreteCtx:i}){if(!Array.isArray(o)){n.reportError(r,\"should be an array\");return}let s=o.map((c,l)=>this.config.items.toConcrete({path:r+\"[\"+l+\"]\",validator:n,rawValue:c,concreteCtx:i})),a=s.map(c=>{if(c)return c.parsedValue}),u={type:\"array\",path:r,rawValue:s,parsedValue:a,node:this};return i.nodes.push(u),u}},oh=class extends $c{constructor(t){super(),this.authoringConfig={type:\"string\",element:\"editor\",required:!0,name:t.name,default:t.default}}getAuthoringConfig(){return this.authoringConfig}getEnumerableValues(t){if(typeof this.validation==\"object\")return t?Object.values(this.validation):Object.keys(this.validation)}getTypescriptType(t){let n=this.getEnumerableValues(t);return n?n.map(r=>JSON.stringify(r)).join(\" | \"):t&&this.validation===\"number\"?\"number\":\"string\"}toConcrete({validator:t,path:n,rawValue:r,concreteCtx:o}){if(typeof r!=\"string\"){t.reportError(n,\"should be a string\");return}let i=this.parseString({path:n,subData:r,validator:t}),s={type:\"string\",path:n,rawValue:r,parsedValue:i,node:this};return o.nodes.push(s),s}},Rf=class extends $c{constructor(t){super(),this.authoringConfig={type:\"string\",element:\"select\",required:!0,name:t.name,default:t.default,options:t.options}}getAuthoringConfig(){return this.authoringConfig}getEnumerableValues(t){return typeof this.validation==\"object\"?t?Object.values(this.validation):Object.keys(this.validation):this.authoringConfig.options.map(n=>n.value)}getTypescriptType(t){return this.getEnumerableValues(t).map(n=>JSON.stringify(n)).join(\" | \")}toConcrete({validator:t,path:n,rawValue:r,concreteCtx:o}){if(typeof r!=\"string\"){t.reportError(n,\"should be a string\");return}if(!this.authoringConfig.options.find(a=>a.value===r)){t.reportError(n,\"value must be one of the select options: \"+r);return}let i=this.parseString({path:n,subData:r,validator:t}),s={type:\"select\",path:n,rawValue:r,parsedValue:i,node:this};return o.nodes.push(s),s}},ih=class extends $c{constructor(t){super(),this.authoringConfig={type:\"boolean\",required:!0,name:t.name,default:t.default}}getAuthoringConfig(){return this.authoringConfig}getEnumerableValues(){return[!0,!1]}getTypescriptType(){return\"boolean\"}toConcrete({validator:t,path:n,rawValue:r,concreteCtx:o}){if(typeof r!=\"boolean\"){t.reportError(n,\"should be a boolean\");return}let i={type:\"boolean\",path:n,rawValue:r,parsedValue:r,node:this};return o.nodes.push(i),i}},dP=class{constructor(t){this.shouldExpectDataVariables=t;this.errors=[]}hasErrors(){return!!this.errors.length}getErrors(){return this.errors}reportError(t,n){this.errors.push(t+\" - \"+n)}shouldSkipParsingDataVariable(t){return this.shouldExpectDataVariables?!!(typeof t==\"string\"&&t.includes(\"{{var:\")):!1}};Iu=class{constructor(t){this.optionalSections={};this.config={};for(let n in t){let r=t[n],o=n;o.endsWith(\"?\")&&(o=o.slice(0,n.length-1),this.optionalSections[o]=!0),this.config[o]=r}this.authoringConfig=pP(this.config)}getAuthoringConfig(){return this.authoringConfig}inflateWithData(t,n){var u;let r=new dP(t),o={nodes:[]},i={};for(let c in this.config)i[c]=this.config[c].toConcrete({path:c,rawValue:n[c],validator:r,concreteCtx:o});if(r.hasErrors())return{type:\"errors\",errors:r.getErrors()};let s=[];for(let c of o.nodes)switch(c.type){case\"array\":case\"object\":break;case\"boolean\":case\"select\":case\"string\":c.node.validateReferences({path:c.path,validator:r,value:c.parsedValue,concreteCtx:o}),c.node.addGraphMutations({path:c.path,value:c.parsedValue,validator:r,graphMutations:s});break}if(r.hasErrors())return{type:\"errors\",errors:r.getErrors()};let a={};for(let c in i)a[c]=(u=i[c])==null?void 0:u.parsedValue;return{type:\"results\",graphMutations:s,parsedValue:a}}getTypescriptType(t){let n=[];for(let r in this.config)n.push(Mf(r,this.config[r].getTypescriptType(t===\"Parsed\"),this.optionalSections));return`{\n`+n.join(`,\n`)+`\n}`}}});function Su(e,t){return new oh({name:e,default:t})}function Me(e,t){return Su(e,t).ensureNumber()}function de(e,t){return Su(e,t).ensureString()}function sN(e,t){return Su(e,t).ensureNumber().ensureWithinRange(-1,1)}function fP(e,t){return Su(e,t).ensureEnum({left:1,mid:2,right:3})}function Df(e,t){return Su(e,t).ensureEnum({lowest:1,lower:2,low:3,mid:4,high:5,higher:6,highest:7})}function tU(e,t){return Su(e,t).ensureEnum({small:1,medium:2,large:3})}function xe(e,t){return new ih({name:e,default:t})}function mc(e,t,n){return new Rf({name:e,default:t,options:n}).ensureString()}function xr(e,t){return mc(e,t||\"blue\",[{label:\"Blue\",value:\"blue\"},{label:\"Green\",value:\"green\"},{label:\"Orange\",value:\"orange\"},{label:\"Purple\",value:\"purple\"},{label:\"Black\",value:\"black\"},{label:\"Red\",value:\"red\"},{label:\"Gray\",value:\"gray\"}]).ensureEnum({red:\"1\",blue:\"2\",green:\"3\",orange:\"4\",purple:\"5\",black:\"6\",gray:\"7\"})}function nU(e){return mc(e,\"solid\",[{label:\"Solid\",value:\"solid\"},{label:\"Dashed\",value:\"dashed\"},{label:\"Dotted\",value:\"dotted\"}]).ensureEnum({solid:\"1\",dashed:\"2\",dotted:\"3\"})}function aN(e){return Su(e,\"attainable\").ensureEnum({attainable:1,unattainable:2,efficient:3})}function oa(e){return Su(e,\"none\").ensureEnum({none:0,negative:-1,positive:1})}function sh(e){return Su(e,\"standard\").ensureEnum({horizontal:\"1\",gradual:\"2\",standard:\"3\",steep:\"4\",vertical:\"5\"})}function Pu(e,t){return mc(e,t||\"none\",[{label:\"None\",value:\"none\"},{label:\"X\",value:\"x\"},{label:\"Y\",value:\"y\"},{label:\"Both\",value:\"both\"}]).ensureEnum({none:\"0\",x:\"1\",y:\"2\",both:\"3\"})}var Kl,ep,tp,lN,uN,cN,pN,dN,mN,fN,rU,oU,iU,sU,aU,md,uU,cU,lU,pU,dU,mU,y7,yP=Cn(()=>{mP();Kl=new ie({name:\"Horizontal Axis\",attributes:{min:Me(\"X Min\",\"0\").latex(\"x_{min}\"),max:Me(\"X Max\",\"10\").latex(\"x_{max}\"),res:Me(\"X Res\",\"1\").latex(\"x_{res}\"),major_grid:Me(\"X Major Grid\",\"1\").latex(\"x_{majorGrid}\"),label:de(\"X Axis Label\",\"x-Axis\").label(\"x_{label}\"),tickmark_interval:Me(\"X Tickmarks\",\"1\").latex(\"x_{tick}\"),label_interval:Me(\"X Labels\",\"1\").latex(\"x_{labelInt}\")}}),ep=new ie({name:\"Vertical Axis\",attributes:{min:Me(\"Y Min\",\"0\").latex(\"y_{min}\"),max:Me(\"Y Max\",\"10\").latex(\"y_{max}\"),res:Me(\"Y Res\",\"1\").latex(\"y_{res}\"),major_grid:Me(\"Y Major Grid\",\"1\").latex(\"y_{majorGrid}\"),label:de(\"Y Axis Label\",\"y-Axis\").label(\"y_{label}\"),tickmark_interval:Me(\"Y Tickmarks\",\"1\").latex(\"y_{tick}\"),label_interval:Me(\"Y Labels\",\"1\").latex(\"y_{labelInt}\")}}),tp=new ie({name:\"Graph Properties\",attributes:{title:de(\"Graph Title\",\"Graph Title\").label(\"p_{Title}\")}}),lN=new ie({name:\"Endpoint Mover\",attributes:{appearance:mc(\"Appearance\",\"concaveDown\",[{label:\"Concave Downward\",value:\"concaveDown\"},{label:\"Linear\",value:\"linear\"},{label:\"Concave Upward\",value:\"concaveUp\"}]).ensureEnum({concaveDown:\"1\",linear:\"2\",concaveUp:\"3\"}),color:xr(\"Color\"),style:nU(\"Style\"),given:xe(\"Given\",!0).conditionalAttributes(!0,{x_shift:oa(\"xShift\"),y_shift:oa(\"yShift\"),label:de(\"Label\",\"\")}).conditionalAttributes(!1,{group_label:de(\"Label\",\"\"),validation:new ie({attributes:{x_shift:oa(\"xShift\"),y_shift:oa(\"yShift\")}})}),group_points:new Or({name:\"Endpoint Mover Points\",maximum:3,items:new ie({attributes:{color:xr(\"Color\"),label:de(\"Label\",\"\"),given:xe(\"Given\",!0).conditionalAttributes(!0,{type:aN(\"Type\")}).conditionalAttributes(!1,{validation:new ie({attributes:{type:aN(\"Type\")}})}),show_coords:xe(\"Show Coords\",!1)}})})}}),uN=new Or({name:\"Increasing Lines\",items:new ie({attributes:{color:xr(\"Color\",\"orange\"),scale:Me(\"Scale\",\"1\"),type:sh(\"Type\"),label:de(\"Label\",\"\"),ghost_label:de(\"Ghost Label\",\"\"),post_shift_label:de(\"Post Shift Label\",\"\"),given:xe(\"Given\",!0).conditionalAttributes(!1,{validation:new ie({attributes:{shift:oa(\"Shift\")}}),shifter_point:new ie({attributes:{show:xe(\"Shifter Point\",!1).conditionalAttributes(!0,{drop_lines:Pu(\"Drop Lines\",\"none\"),label:de(\"Label\",\"\"),ghost_label:de(\"Ghost Label\",\"\"),post_shift_label:de(\"Post Shift Label\",\"\"),validation:new ie({attributes:{shift:oa(\"Shift\")}})})}})}).conditionalAttributes(!0,{shift:oa(\"Shift\"),shifter_point:new ie({attributes:{show:xe(\"Shifter Point\",!1).conditionalAttributes(!0,{drop_lines:Pu(\"Drop Lines\",\"none\"),label:de(\"Label\",\"\"),ghost_label:de(\"Ghost Label\",\"\"),post_shift_label:de(\"Post Shift Label\",\"\"),shift:oa(\"Shift\")})}})})}})}),cN=new Or({name:\"Decreasing Lines\",items:new ie({attributes:{color:xr(\"Color\"),scale:Me(\"Scale\",\"1\"),type:sh(\"Type\"),label:de(\"Label\",\"\"),ghost_label:de(\"Ghost Label\",\"\"),post_shift_label:de(\"Post Shift Label\",\"\"),given:xe(\"Given\",!0).conditionalAttributes(!1,{validation:new ie({attributes:{shift:oa(\"Shift\")}}),shifter_point:new ie({attributes:{show:xe(\"Shifter Point\",!1).conditionalAttributes(!0,{drop_lines:Pu(\"Drop Lines\",\"none\"),label:de(\"Label\",\"\"),ghost_label:de(\"Ghost Label\",\"\"),post_shift_label:de(\"Post Shift Label\",\"\"),validation:new ie({attributes:{shift:oa(\"Shift\")}})})}})}).conditionalAttributes(!0,{shift:oa(\"Shift\"),shifter_point:new ie({attributes:{show:xe(\"Shifter Point\",!1).conditionalAttributes(!0,{drop_lines:Pu(\"Drop Lines\",\"none\"),label:de(\"Label\",\"\"),ghost_label:de(\"Ghost Label\",\"\"),post_shift_label:de(\"Post Shift Label\",\"\"),shift:oa(\"Shift\")})}})})}})}),pN=new ie({name:\"Shifter\",attributes:{increasing_lines:uN,decreasing_lines:cN,shifter_intersections:new Or({name:\"Intersections\",items:new ie({attributes:{increasing_line:Me(\"Increasing Line\",\"1\").ensureWithinArrayBounds(uN),decreasing_line:Me(\"Decreasing Line\",\"1\").ensureWithinArrayBounds(cN),drop_lines:Pu(\"Drop Lines\",\"both\"),show_coords:xe(\"Show Coords\",!1),show_point:xe(\"Show Point\",!0)}})})}}),dN=new ie({name:\"Cost Curves\",attributes:{role:mc(\"Role\",\"taker\",[{label:\"Price Taker\",value:\"taker\"},{label:\"Price Setter Upward MC\",value:\"setter-upward\"},{label:\"Price Setter Constant MC\",value:\"setter-constant\"}]).conditionalAttributes(\"taker\",{mc:new ie({attributes:{horizontal:fP(\"MC Horizontal Alignment\",\"mid\"),vertical:Df(\"MC Vertical Alignment\",\"mid\"),show:xe(\"Show MC\",!0).conditionalAttributes(!0,{label:de(\"MC Label\",\"MC\"),color:xr(\"MC Color\",\"orange\")})}}),avc:new ie({attributes:{vertical:Df(\"AVC Vertical Alignment\",\"mid\"),show:xe(\"Show AVC\",!0).conditionalAttributes(!0,{label:de(\"AVC Label\",\"AVC\"),color:xr(\"AVC Color\",\"purple\")})}}),atc:new ie({attributes:{show:xe(\"Show ATC\",!0).conditionalAttributes(!0,{label:de(\"ATC Label\",\"ATC\"),color:xr(\"ATC Color\",\"green\")})}})}).conditionalAttributes(\"setter-upward\",{mc:new ie({attributes:{horizontal:fP(\"MC Horizontal Alignment\",\"mid\"),vertical:Df(\"MC Vertical Alignment\",\"mid\"),show:xe(\"Show MC\",!0).conditionalAttributes(!0,{label:de(\"MC Label\",\"MC\"),color:xr(\"MC Color\",\"orange\")})}}),avc:new ie({attributes:{show:xe(\"Show AVC\",!0).conditionalAttributes(!0,{label:de(\"AVC Label\",\"AVC\"),color:xr(\"AVC Color\",\"purple\")})}}),atc:new ie({attributes:{horizontal:fP(\"ATC Horizontal Alignment\",\"mid\"),vertical:Df(\"ATC Vertical Alignment\",\"mid\"),show:xe(\"Show ATC\",!0).conditionalAttributes(!0,{label:de(\"ATC Label\",\"ATC\"),color:xr(\"ATC Color\",\"green\")})}})}).conditionalAttributes(\"setter-constant\",{mc:new ie({attributes:{vertical:Df(\"MC Vertical Alignment\",\"mid\"),show:xe(\"Show MC\",!0).conditionalAttributes(!0,{label:de(\"MC Label\",\"MC\"),color:xr(\"MC Color\",\"orange\")})}}),atc:new ie({attributes:{show:xe(\"Show ATC\",!0).conditionalAttributes(!0,{label:de(\"ATC Label\",\"ATC\"),color:xr(\"ATC Color\",\"green\")})}}),fc_scale:tU(\"FC Scale\",\"medium\")})}}),mN=new ie({attributes:{curves:new Or({name:\"Indifference Curves\",minimum:1,items:new ie({attributes:{color:xr(\"Color\",\"blue\"),x_coord:Me(\"X\",\"\"),y_coord:Me(\"Y\",\"\"),slope:Me(\"Slope\",\"\").ensureWithinRange(-1/0,0),substitutability:Me(\"Substitutability\",\"\"),label:de(\"Label\",\"\"),point:new ie({attributes:{role:mc(\"Role\",\"hidden\",[{value:\"hidden\",label:\"Hidden\"},{value:\"given\",label:\"Given\"},{value:\"required\",label:\"Required\"}]).conditionalAttributes(\"given\",{label:de(\"Label\",\"\"),color:xr(\"Color\",\"blue\"),drop_lines:Pu(\"Drop Lines\",\"none\"),show_coords:xe(\"Show Coords\",!0)}).conditionalAttributes(\"required\",{label:de(\"Label\",\"\"),color:xr(\"Color\",\"blue\"),drop_lines:Pu(\"Drop Lines\",\"none\"),show_coords:xe(\"Show Coords\",!0)})}}),line:new ie({attributes:{role:mc(\"Role\",\"hidden\",[{value:\"hidden\",label:\"Hidden\"},{value:\"given\",label:\"Given\"},{value:\"required\",label:\"Required\"}]).conditionalAttributes(\"given\",{label:de(\"Label\",\"\"),color:xr(\"Color\",\"blue\"),show_coords:xe(\"Show Coords\",!0),show_x_int:xe(\"Show X Intercept\",!1),show_y_int:xe(\"Show Y Intercept\",!1),show_slope:xe(\"Show Slope\",!1)}).conditionalAttributes(\"required\",{label:de(\"Label\",\"\"),color:xr(\"Color\",\"blue\"),show_coords:xe(\"Show Coords\",!0),show_x_int:xe(\"Show X Intercept\",!1),show_y_int:xe(\"Show Y Intercept\",!1),show_slope:xe(\"Show Slope\",!1)})}})}})})}}),fN=new ie({name:\"Input Driven Market\",attributes:{input_variable:mc(\"Input Variable\",\"Y\",[{label:\"X\",value:\"X\"},{label:\"Y\",value:\"Y\"}]).ensureEnum({X:2,Y:1}).conditionalAttributes(\"X\",{editorOnly_x_below:de(\"Left Equilibrium\",\"\"),editorOnly_x_above:de(\"Right Equilibrium\",\"\")}).conditionalAttributes(\"Y\",{editorOnly_y_below:de(\"Below Equilibrium\",\"\"),editorOnly_y_above:de(\"Above Equilibrium\",\"\")}),input_value:Me(\"Default Value\",\"\"),input_color:xr(\"Input Color\",\"green\"),input_decimals:Me(\"Input Decimals\",\"2\"),market_label:de(\"Market Label\",\"\"),input_label:de(\"Input Label\",\"\"),input_units:de(\"Input Units\",\"\"),increasing_line:new ie({attributes:{show:xe(\"Show\",!0).conditionalAttributes(!0,{color:xr(\"Color\",\"orange\"),type:sh(\"Type\"),label:de(\"Label\",\"\"),ghost_label:de(\"Ghost Label\",\"\"),post_shift_label:de(\"Post Shift Label\",\"\"),output_label:de(\"Output Label\",\"\"),output_units:de(\"Output Units\",\"\"),output_decimals:Me(\"Output Decimals\",\"2\"),shift:new ie({attributes:{show:xe(\"Allow Shift\",!1).conditionalAttributes(!0,{default_value:Me(\"Shift Default Value\",\"0\"),shift_coefficient:Me(\"Shift Coefficient\",\"1\"),shift_decimals:Me(\"Shift Decimals\",\"2\"),title:de(\"Shift Title\",\"\"),label:de(\"Shift Label\",\"\"),units:de(\"Shift Units\",\"\")})}})})}}),decreasing_line:new ie({attributes:{show:xe(\"Show\",!0).conditionalAttributes(!0,{color:xr(\"Color\",\"blue\"),type:sh(\"Type\"),label:de(\"Label\",\"\"),ghost_label:de(\"Ghost Label\",\"\"),post_shift_label:de(\"Post Shift Label\",\"\"),output_label:de(\"Output Label\",\"\"),output_units:de(\"Output Units\",\"\"),output_decimals:Me(\"Output Decimals\",\"2\"),shift:new ie({attributes:{show:xe(\"Allow Shift\",!1).conditionalAttributes(!0,{default_value:Me(\"Shift Default Value\",\"0\"),shift_coefficient:Me(\"Shift Coefficient\",\"1\"),shift_decimals:Me(\"Shift Decimals\",\"2\"),title:de(\"Shift Title\",\"\"),label:de(\"Shift Label\",\"\"),units:de(\"Shift Units\",\"\")})}})})}}),shifter_intersection:new ie({attributes:{show:xe(\"Show\",!0).conditionalAttributes(!0,{drop_lines:Pu(\"Drop Lines\",\"both\")})}}),below_eqm:new ie({attributes:{show:xe(\"Show\",!0).conditionalAttributes(!0,{label:de(\"Label\",\"\"),units:de(\"Units\",\"\"),eqm_decimals:Me(\"Decimals\",\"2\")})}}),above_eqm:new ie({attributes:{show:xe(\"Show\",!0).conditionalAttributes(!0,{label:de(\"Label\",\"\"),units:de(\"Units\",\"\"),eqm_decimals:Me(\"Decimals\",\"2\")})}})}}),rU=new ie({attributes:{color:xr(\"Color\"),connected:xe(\"Connected\",!1),given:xe(\"Given\",!0).conditionalAttributes(!0,{when_given:new ie({attributes:{group_points:new Or({name:\"Group Points\",minimum:1,items:new ie({name:\"Group Points\",attributes:{x_coord:Me(\"X\",\"\"),y_coord:Me(\"Y\",\"\"),label:de(\"Label\",\"\"),drop_lines:Pu(\"Drop Lines\"),show_point:xe(\"Show Point\",!0).conditionalAttributes(!0,{show_coords:xe(\"Show Coords\",!1)})}})})}})}).conditionalAttributes(!1,{when_required:new ie({attributes:{group_label:de(\"Group Label\",\"\"),group_points:new Or({name:\"Group Points\",minimum:1,items:new ie({name:\"Group Points\",attributes:{drop_lines:Pu(\"Drop Lines\"),show_coords:xe(\"Show Coords\",!1),validation:new ie({attributes:{x_coord:Me(\"X\",\"\"),y_coord:Me(\"Y\",\"\")}})}})})}})})}}),oU=new ie({attributes:{color:xr(\"Color\"),given:xe(\"Given\",!0).conditionalAttributes(!0,{when_given:new ie({attributes:{group_lines:new Or({name:\"Group Lines\",minimum:1,items:new ie({attributes:{show_x_int:xe(\"Show X Intercept\",!1),show_y_int:xe(\"Show Y Intercept\",!1),show_slope:xe(\"Show Slope\",!1),use_slope:xe(\"Use Slope\",!0).conditionalAttributes(!0,{when_slope:new ie({attributes:{x_coord_1:Me(\"X1\",\"\"),y_coord_1:Me(\"Y1\",\"\"),label_1:de(\"Label\",\"\"),slope:Me(\"Slope\",\"\")}})}).conditionalAttributes(!1,{when_not_slope:new ie({attributes:{x_coord_1:Me(\"X1\",\"\"),y_coord_1:Me(\"Y1\",\"\"),label_1:de(\"Label\",\"\"),x_coord_2:Me(\"X2\",\"\"),y_coord_2:Me(\"Y2\",\"\"),label_2:de(\"Label\",\"\")}})}),show_points:xe(\"Show Points\",!0).conditionalAttributes(!0,{show_coords:xe(\"Show Coords\",!1)})}})})}})}).conditionalAttributes(!1,{when_required:new ie({attributes:{group_label:de(\"Group Label\",\"\"),group_lines:new Or({name:\"Group Lines\",minimum:1,items:new ie({attributes:{show_coords:xe(\"Show Coords\",!1),show_x_int:xe(\"Show X Intercept\",!1),show_y_int:xe(\"Show Y Intercept\",!1),show_slope:xe(\"Show Slope\",!1),use_slope:xe(\"Use Slope\",!0).conditionalAttributes(!0,{when_slope:new ie({attributes:{validation:new ie({attributes:{x_coord_1:Me(\"X1\",\"\"),y_coord_1:Me(\"Y1\",\"\"),slope:Me(\"Slope\",\"\")}})}})}).conditionalAttributes(!1,{when_not_slope:new ie({attributes:{validation:new ie({attributes:{x_coord_1:Me(\"X1\",\"\"),y_coord_1:Me(\"Y1\",\"\"),x_coord_2:Me(\"X2\",\"\"),y_coord_2:Me(\"Y2\",\"\")}})}})})}})})}})})}}),iU=new ie({attributes:{color:xr(\"Color\"),given:xe(\"Given\",!0).conditionalAttributes(!0,{when_given:new ie({attributes:{group_curves:new Or({name:\"Group Curves\",minimum:1,items:new ie({attributes:{curve_points:new Or({name:\"Curve Points\",minimum:3,maximum:6,items:new ie({attributes:{x_coord:Me(\"X\",\"\"),y_coord:Me(\"Y\",\"\"),label:de(\"Label\",\"\")}})}),show_points:xe(\"Show Points\",!0).conditionalAttributes(!0,{show_coords:xe(\"Show Coords\",!1)})}})})}})}).conditionalAttributes(!1,{when_required:new ie({attributes:{group_label:de(\"Group Label\",\"\"),group_curves:new Or({minimum:1,name:\"Group Curves\",items:new ie({attributes:{show_coords:xe(\"Show Coords\",!1),curve_points:new Or({name:\"Curve Points\",minimum:3,maximum:6,items:new ie({attributes:{validation:new ie({attributes:{x_coord:Me(\"X\",\"\"),y_coord:Me(\"Y\",\"\")}})}})})}})})}})})}}),sU=new ie({attributes:{color:xr(\"Color\"),given:xe(\"Given\",!0).conditionalAttributes(!0,{when_given:new ie({attributes:{group_mono_arcs:new Or({name:\"Group Monotonic Arcs\",minimum:1,items:new ie({attributes:{concavity:sN(\"Concavity\",\"\"),x_coord_1:Me(\"X1\",\"\"),y_coord_1:Me(\"Y1\",\"\"),label_1:de(\"Label 1\",\"\"),x_coord_2:Me(\"X2\",\"\"),y_coord_2:Me(\"Y2\",\"\"),label_2:de(\"Label 2\",\"\"),show_points:xe(\"Show Points\",!0).conditionalAttributes(!0,{show_coords:xe(\"Show Coords\",!1)})}})})}})}).conditionalAttributes(!1,{when_required:new ie({attributes:{group_label:de(\"Group Label\",\"\"),group_mono_arcs:new Or({minimum:1,name:\"Group Monotonic Arcs\",items:new ie({attributes:{show_coords:xe(\"Show Coords\",!1),concavity:sN(\"Concavity\",\"\"),validation:new ie({attributes:{x_coord_1:Me(\"X1\",\"\"),y_coord_1:Me(\"Y1\",\"\"),x_coord_2:Me(\"X2\",\"\"),y_coord_2:Me(\"Y2\",\"\")}})}})})}})})}}),aU=new ie({attributes:{color:xr(\"Color\"),given:xe(\"Given\",!0).conditionalAttributes(!0,{when_given:new ie({attributes:{group_polygons:new Or({name:\"Group Polygons\",minimum:1,items:new ie({attributes:{show_area:xe(\"Show Area\",!1),show_perimeter:xe(\"Show Perimeter\",!1),fill_pattern:xe(\"Fill Pattern\",!0),polygon_points:new Or({name:\"Polygon Points\",minimum:3,maximum:10,items:new ie({attributes:{x_coord:Me(\"X\",\"\"),y_coord:Me(\"Y\",\"\"),label:de(\"Label\",\"\")}})}),show_points:xe(\"Show Points\",!0).conditionalAttributes(!0,{show_coords:xe(\"Show Coords\",!1)})}})})}})}).conditionalAttributes(!1,{when_required:new ie({attributes:{group_label:de(\"Group Label\",\"\"),group_polygons:new Or({minimum:1,name:\"Group Polygons\",items:new ie({attributes:{show_coords:xe(\"Show Coords\",!1),show_area:xe(\"Show Area\",!1),show_perimeter:xe(\"Show Perimeter\",!1),fill_pattern:xe(\"Fill Pattern\",!0),polygon_points:new Or({name:\"Polygon Points\",minimum:3,maximum:10,items:new ie({attributes:{validation:new ie({attributes:{x_coord:Me(\"X\",\"\"),y_coord:Me(\"Y\",\"\")}})}})})}})})}})})}}),md=new Or({name:\"Common Components\",items:new ie({name:\"Common Component\",attributes:{notes:Su(\"Notes:\",\"\").ensureString(),object_type:mc(\"Component Type\",\"common_point\",[{label:\"Point\",value:\"common_point\"},{label:\"Line\",value:\"common_line\"},{label:\"Curve\",value:\"common_curve\"},{label:\"Monotonic Arc\",value:\"common_mono_arc\"},{label:\"Polygon\",value:\"common_polygon\"}]).conditionalAttributes(\"common_point\",{when_point:rU}).conditionalAttributes(\"common_line\",{when_line:oU}).conditionalAttributes(\"common_curve\",{when_curve:iU}).conditionalAttributes(\"common_mono_arc\",{when_mono_arc:sU}).conditionalAttributes(\"common_polygon\",{when_polygon:aU})}})}),uU=new Iu({dcg_x_axis:Kl,dcg_y_axis:ep,dcg_graph_properties:tp,dcg_common_components:md}),cU=new Iu({dcg_x_axis:Kl,dcg_y_axis:ep,dcg_graph_properties:tp,dcg_common_components:md,dcg_endpoint_mover:lN}),lU=new Iu({dcg_x_axis:Kl,dcg_y_axis:ep,dcg_graph_properties:tp,dcg_common_components:md,dcg_shifter:pN}),pU=new Iu({dcg_x_axis:Kl,dcg_y_axis:ep,dcg_graph_properties:tp,dcg_common_components:md,dcg_cost_curves:dN}),dU=new Iu({dcg_x_axis:Kl,dcg_y_axis:ep,dcg_graph_properties:tp,dcg_common_components:md,dcg_indifference_curves:mN}),mU=new Iu({dcg_x_axis:Kl,dcg_y_axis:ep,dcg_graph_properties:tp,dcg_input_driven_market:fN}),y7=new Iu({dcg_x_axis:Kl,dcg_y_axis:ep,dcg_graph_properties:tp,\"dcg_common_components?\":md,\"dcg_endpoint_mover?\":lN,\"dcg_shifter?\":pN,\"dcg_cost_curves?\":dN,\"dcg_indifference_curves?\":mN,\"dcg_input_driven_market?\":fN})});var gP=Cn(()=>{yP()});var yN=Cn(()=>{gP()});var gN=Cn(()=>{yP();yN();mP();gP()});var hN,bN=Cn(()=>{hN=e=>Object.entries(e)});var xN=Cn(()=>{});var TN=Cn(()=>{vf()});var O7,IN=Cn(()=>{O7=e=>e!==null&&(typeof e==\"object\"||typeof e==\"function\")});var fe,PN=Cn(()=>{fe=e=>Object.keys(e)});var fU,L7,SN=Cn(()=>{fU=[\"authenticate\",\"3d\",\"terms\",\"art-contest\",\"upcoming-maintenance\"],L7=[...fU,\"saving-sharing\"]});var CN=Cn(()=>{});var B7,EN=Cn(()=>{B7=(e,t)=>t.reduce((n,r)=>(r in e&&(n[r]=e[r]),n),{})});function xU(e){var r;let[t,n]=(r=hU.exec(e))!=null?r:[];return n}function TU(e){let t=xU(e);return t?bU.test(t):!0}function q7(e,t){if(e===\"\"||!t||yU.test(e)||gU.test(e)||!TU(e))return e;let n=encodeURIComponent(t);if(e.length){let r=e.split(\"#\"),o=/\\?/.test(e)?`${r[0]}&lang=${n}`:`${r[0]}?lang=${n}`;return r[1]!==void 0?`${o}#${r[1]}`:o}else return`?lang=${n}`}var yU,gU,hU,bU,vN=Cn(()=>{yU=/lang=[A-Za-z]+/,gU=/(cl|learn|help).desmos.com/,hU=/^(?:https?:)?(?:\\/\\/)?([^\\s:\\/\\?]+)/i,bU=/(^desmos\\.com$)|(\\.desmos.com$)/});var IU,z7,MN=Cn(()=>{IU=0,z7=(e=\"\")=>`${e}${++IU}`});var hP=Cn(()=>{bN();xN();TN();IN();PN();SN();CN();EN();vN();MN()});var _N=Cn(()=>{});var PU,SU,CU,EU,vU,tJ,nJ,rJ,RN=Cn(()=>{PU={images:!1,folders:!1,notes:!1,qwertyKeyboard:!1,restrictedFunctions:!0,degreeMode:!0,branding:!1,border:!1,plotSingleVariableImplicitEquations:!1,decimalToFraction:!1,links:!1,distributions:!1},SU={...PU,decimalToFraction:!0,distributions:!0},CU={qwertyKeyboard:!1,functionDefinition:!1,degreeMode:!0,decimalToFraction:!1,links:!1,brailleExpressionDownload:!1},EU={...CU,decimalToFraction:!0},vU={brailleExpressionDownload:!1,links:!1},tJ={...vU},nJ={...SU,plotImplicits:!1,plotInequalities:!1,sliders:!1,zoomFit:!0,qwertyKeyboard:!0},rJ={...EU,qwertyKeyboard:!0}});var MU,_U,sJ,DN=Cn(()=>{hP();MU={\"knox-app-config\":{title:\"App configuration\"},calculatorBeta:{title:\"Beta tester\"},apStemRFI:{title:\"AP Stem RFI\"},artExpo:{title:\"Art Expo testing\"},apiConfiguration:{title:\"API Configuration\"},desNotebook:{title:\"Notebook product\"},selfService:{title:\"Self Service\"},rayCastDefault:{title:\"3D ray casting default\"},graphGalleries:{title:\"Graph Galleries\"}},_U={\"dcg-actions\":{add:!0,remove:!0}},sJ=[...fe(MU),...fe(_U)]});var NN=Cn(()=>{});var ON=Cn(()=>{});var AN=Cn(()=>{});var wN=Cn(()=>{});var LN=Cn(()=>{});var FN=Cn(()=>{});var VN=Cn(()=>{});var BN=Cn(()=>{});var GN=Cn(()=>{});var qN=Cn(()=>{});var UN=Cn(()=>{});var zN=Cn(()=>{});var kN=Cn(()=>{DN();NN();ON();AN();wN();LN();FN();VN();BN();GN();qN();UN();zN()});var SJ,HN=Cn(()=>{SJ=()=>{}});var $N,vJ,MJ,YN=Cn(()=>{vf();$N=oN.replace(/\\./g,\"_\"),vJ=`dcg-calculator-api-container-${$N}`,MJ=`dcg-matrix-api-container-${$N}`});var So=Cn(()=>{iN();vf();gN();hP();_N();RN();kN();HN();YN()});So();function Zi(e){let t=e;if(t&&typeof t.toJSON==\"function\"&&(t=t.toJSON()),!t||typeof t!=\"object\")return t;if(Array.isArray(t))return t.map(Zi);let n={};for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=Zi(t[r]));return n}var ah=typeof self==\"object\"&&self.self===self&&self||typeof global==\"object\"&&global.global===global&&global||Function(\"return this\")()||{},lh=Array.prototype,TP=Object.prototype,ZN=typeof Symbol!=\"undefined\"?Symbol.prototype:null,qJ=lh.push,KN=lh.slice,uh=TP.toString,RU=TP.hasOwnProperty,DU=Array.isArray,XN=Object.keys,WN=Object.create,NU=ah.isNaN,UJ=ah.isFinite,bP=function(){};function co(e){if(e instanceof co)return e;if(!(this instanceof co))return new co(e);this._wrapped=e}var zJ=co.VERSION=\"1.10.2\";function ph(e,t,n){if(t===void 0)return e;switch(n==null?3:n){case 1:return function(r){return e.call(t,r)};case 3:return function(r,o,i){return e.call(t,r,o,i)};case 4:return function(r,o,i,s){return e.call(t,r,o,i,s)}}return function(){return e.apply(t,arguments)}}function eO(e,t,n){return e==null?oz:fc(e)?ph(e,t,n):bd(e)&&!hd(e)?iz(e):mO(e)}co.iteratee=tO;function tO(e,t){return eO(e,t,1/0)}function yc(e,t,n){return co.iteratee!==tO?co.iteratee(e,t):eO(e,t,n)}function Os(e,t){return t=t==null?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),o=0;o<n;o++)r[o]=arguments[o+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var i=Array(t+1);for(o=0;o<t;o++)i[o]=arguments[o];return i[t]=r,e.apply(this,i)}}function OU(e){if(!bd(e))return{};if(WN)return WN(e);bP.prototype=e;var t=new bP;return bP.prototype=null,t}function nO(e){return function(t){return t==null?void 0:t[e]}}function yd(e,t){return e!=null&&RU.call(e,t)}function rO(e,t){for(var n=t.length,r=0;r<n;r++){if(e==null)return;e=e[t[r]]}return n?e:void 0}var AU=Math.pow(2,53)-1,Yc=nO(\"length\");function Cu(e){var t=Yc(e);return typeof t==\"number\"&&t>=0&&t<=AU}function gd(e,t,n){t=ph(t,n);var r,o;if(Cu(e))for(r=0,o=e.length;r<o;r++)t(e[r],r,e);else{var i=La(e);for(r=0,o=i.length;r<o;r++)t(e[i[r]],i[r],e)}return e}function dh(e,t,n){t=yc(t,n);for(var r=!Cu(e)&&La(e),o=(r||e).length,i=Array(o),s=0;s<o;s++){var a=r?r[s]:s;i[s]=t(e[a],a,e)}return i}function oO(e){var t=function(n,r,o,i){var s=!Cu(n)&&La(n),a=(s||n).length,u=e>0?0:a-1;for(i||(o=n[s?s[u]:u],u+=e);u>=0&&u<a;u+=e){var c=s?s[u]:u;o=r(o,n[c],c,n)}return o};return function(n,r,o,i){var s=arguments.length>=3;return t(n,ph(r,i,4),o,s)}}var kJ=oO(1),HJ=oO(-1);function wU(e,t,n){var r=[];return t=yc(t,n),gd(e,function(o,i,s){t(o,i,s)&&r.push(o)}),r}function fd(e,t,n,r){return Cu(e)||(e=Nf(e)),(typeof n!=\"number\"||r)&&(n=0),UU(e,t,n)>=0}var $J=Os(function(e,t,n){var r,o;return fc(t)?o=t:hd(t)&&(r=t.slice(0,-1),t=t[t.length-1]),dh(e,function(i){var s=o;if(!s){if(r&&r.length&&(i=rO(i,r)),i==null)return;s=i[t]}return s==null?s:s.apply(i,n)})});function iO(e,t){return dh(e,mO(t))}function LU(e,t,n){var r=-1/0,o=-1/0,i,s;if(t==null||typeof t==\"number\"&&typeof e[0]!=\"object\"&&e!=null){e=Cu(e)?e:Nf(e);for(var a=0,u=e.length;a<u;a++)i=e[a],i!=null&&i>r&&(r=i)}else t=yc(t,n),gd(e,function(c,l,p){s=t(c,l,p),(s>o||s===-1/0&&r===-1/0)&&(r=c,o=s)});return r}function YJ(e,t,n){var r=1/0,o=1/0,i,s;if(t==null||typeof t==\"number\"&&typeof e[0]!=\"object\"&&e!=null){e=Cu(e)?e:Nf(e);for(var a=0,u=e.length;a<u;a++)i=e[a],i!=null&&i<r&&(r=i)}else t=yc(t,n),gd(e,function(c,l,p){s=t(c,l,p),(s<o||s===1/0&&r===1/0)&&(r=c,o=s)});return r}function ZJ(e){return FU(e,1/0)}function FU(e,t,n){if(t==null||n)return Cu(e)||(e=Nf(e)),e[JN(e.length-1)];var r=Cu(e)?jU(e):Nf(e),o=Yc(r);t=Math.max(Math.min(t,o),0);for(var i=o-1,s=0;s<t;s++){var a=JN(s,i),u=r[s];r[s]=r[a],r[a]=u}return r.slice(0,t)}function sO(e,t,n){var r=0;return t=yc(t,n),iO(dh(e,function(o,i,s){return{value:o,index:r++,criteria:t(o,i,s)}}).sort(function(o,i){var s=o.criteria,a=i.criteria;if(s!==a){if(s>a||s===void 0)return 1;if(s<a||a===void 0)return-1}return o.index-i.index}),\"value\")}function mh(e,t){return function(n,r,o){var i=t?[[],[]]:{};return r=yc(r,o),gd(n,function(s,a){var u=r(s,a,n);e(i,s,u)}),i}}var XJ=mh(function(e,t,n){yd(e,n)?e[n].push(t):e[n]=[t]}),WJ=mh(function(e,t,n){e[n]=t}),jJ=mh(function(e,t,n){yd(e,n)?e[n]++:e[n]=1});var JJ=mh(function(e,t,n){e[n?0:1].push(t)},!0);function np(e,t,n,r){r=r||[];for(var o=r.length,i=0,s=Yc(e);i<s;i++){var a=e[i];if(Cu(a)&&(hd(a)||ch(a)))if(t)for(var u=0,c=a.length;u<c;)r[o++]=a[u++];else np(a,t,n,r),o=r.length;else n||(r[o++]=a)}return r}function QJ(e,t){return np(e,t,!1)}var KJ=Os(function(e,t){return PP(e,t)});function IP(e,t,n,r){rz(t)||(r=n,n=t,t=!1),n!=null&&(n=yc(n,r));for(var o=[],i=[],s=0,a=Yc(e);s<a;s++){var u=e[s],c=n?n(u,s,e):u;t&&!n?((!s||i!==c)&&o.push(u),i=c):n?fd(i,c)||(i.push(c),o.push(u)):fd(o,u)||o.push(u)}return o}var eQ=Os(function(e){return IP(np(e,!0,!0))});var PP=Os(function(e,t){return t=np(t,!0,!0),wU(e,function(n){return!fd(t,n)})});function VU(e){for(var t=e&&LU(e,Yc).length||0,n=Array(t),r=0;r<t;r++)n[r]=iO(e,r);return n}var tQ=Os(VU);function aO(e){return function(t,n,r){n=yc(n,r);for(var o=Yc(t),i=e>0?0:o-1;i>=0&&i<o;i+=e)if(n(t[i],i,t))return i;return-1}}var BU=aO(1),GU=aO(-1);function qU(e,t,n,r){n=yc(n,r,1);for(var o=n(t),i=0,s=Yc(e);i<s;){var a=Math.floor((i+s)/2);n(e[a])<o?i=a+1:s=a}return i}function uO(e,t,n){return function(r,o,i){var s=0,a=Yc(r);if(typeof i==\"number\")e>0?s=i>=0?i:Math.max(i+a,s):a=i>=0?Math.min(i+1,a):i+a+1;else if(n&&i&&a)return i=n(r,o),r[i]===o?i:-1;if(o!==o)return i=t(KN.call(r,s,a),nz),i>=0?i+s:-1;for(i=e>0?s:a-1;i>=0&&i<a;i+=e)if(r[i]===o)return i;return-1}}var UU=uO(1,BU,qU),nQ=uO(-1,GU);function rQ(e,t){if(t==null||t<1)return[];for(var n=[],r=0,o=e.length;r<o;)n.push(KN.call(e,r,r+=t));return n}function cO(e,t,n,r,o){if(!(r instanceof t))return e.apply(n,o);var i=OU(e.prototype),s=e.apply(i,o);return bd(s)?s:i}var zU=Os(function(e,t,n){if(!fc(e))throw new TypeError(\"Bind must be called on a function\");var r=Os(function(o){return cO(e,r,t,this,n.concat(o))});return r}),fh=Os(function(e,t){var n=fh.placeholder,r=function(){for(var o=0,i=t.length,s=Array(i),a=0;a<i;a++)s[a]=t[a]===n?arguments[o++]:t[a];for(;o<arguments.length;)s.push(arguments[o++]);return cO(e,r,this,this,s)};return r});fh.placeholder=co;var oQ=Os(function(e,t){t=np(t,!1,!1);var n=t.length;if(n<1)throw new Error(\"bindAll must be passed function names\");for(;n--;){var r=t[n];e[r]=zU(e[r],e)}});var lO=Os(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),iQ=fh(lO,co,1);function sQ(e,t,n){var r,o,i,s,a=0;n||(n={});var u=function(){a=n.leading===!1?0:QN(),r=null,s=e.apply(o,i),r||(o=i=null)},c=function(){var l=QN();!a&&n.leading===!1&&(a=l);var p=t-(l-a);return o=this,i=arguments,p<=0||p>t?(r&&(clearTimeout(r),r=null),a=l,s=e.apply(o,i),r||(o=i=null)):!r&&n.trailing!==!1&&(r=setTimeout(u,p)),s};return c.cancel=function(){clearTimeout(r),a=0,r=o=i=null},c}function aQ(e,t,n){var r,o,i=function(a,u){r=null,u&&(o=e.apply(a,u))},s=Os(function(a){if(r&&clearTimeout(r),n){var u=!r;r=setTimeout(i,t),u&&(o=e.apply(this,a))}else r=lO(i,t,this,a);return o});return s.cancel=function(){clearTimeout(r),r=null},s}function kU(e){return function(){return!e.apply(this,arguments)}}function HU(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}var uQ=fh(HU,2),pO=!{toString:null}.propertyIsEnumerable(\"toString\"),jN=[\"valueOf\",\"isPrototypeOf\",\"toString\",\"propertyIsEnumerable\",\"hasOwnProperty\",\"toLocaleString\"];function dO(e,t){var n=jN.length,r=e.constructor,o=fc(r)&&r.prototype||TP,i=\"constructor\";for(yd(e,i)&&!fd(t,i)&&t.push(i);n--;)i=jN[n],i in e&&e[i]!==o[i]&&!fd(t,i)&&t.push(i)}function La(e){if(!bd(e))return[];if(XN)return XN(e);var t=[];for(var n in e)yd(e,n)&&t.push(n);return pO&&dO(e,t),t}function SP(e){if(!bd(e))return[];var t=[];for(var n in e)t.push(n);return pO&&dO(e,t),t}function Nf(e){for(var t=La(e),n=t.length,r=Array(n),o=0;o<n;o++)r[o]=e[t[o]];return r}function $U(e){for(var t={},n=La(e),r=0,o=n.length;r<o;r++)t[e[n[r]]]=n[r];return t}function CP(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||n==null)return n;for(var o=1;o<r;o++)for(var i=arguments[o],s=e(i),a=s.length,u=0;u<a;u++){var c=s[u];(!t||n[c]===void 0)&&(n[c]=i[c])}return n}}var YU=CP(SP),ZU=CP(La);function XU(e,t,n){return t in n}var WU=Os(function(e,t){var n={},r=t[0];if(e==null)return n;fc(r)?(t.length>1&&(r=ph(r,t[1])),t=SP(e)):(r=XU,t=np(t,!1,!1),e=Object(e));for(var o=0,i=t.length;o<i;o++){var s=t[o],a=e[s];r(a,s,e)&&(n[s]=a)}return n}),cQ=Os(function(e,t){var n=t[0],r;return fc(n)?(n=kU(n),t.length>1&&(r=t[1])):(t=dh(np(t,!1,!1),String),n=function(o,i){return!fd(t,i)}),WU(e,n,r)}),lQ=CP(SP,!0);function jU(e){return bd(e)?hd(e)?e.slice():YU({},e):e}function JU(e,t){var n=La(t),r=n.length;if(e==null)return!r;for(var o=Object(e),i=0;i<r;i++){var s=n[i];if(t[s]!==o[s]||!(s in o))return!1}return!0}function xP(e,t,n,r){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var o=typeof e;return o!==\"function\"&&o!==\"object\"&&typeof t!=\"object\"?!1:QU(e,t,n,r)}function QU(e,t,n,r){e instanceof co&&(e=e._wrapped),t instanceof co&&(t=t._wrapped);var o=uh.call(e);if(o!==uh.call(t))return!1;switch(o){case\"[object RegExp]\":case\"[object String]\":return\"\"+e==\"\"+t;case\"[object Number]\":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case\"[object Date]\":case\"[object Boolean]\":return+e==+t;case\"[object Symbol]\":return ZN.valueOf.call(e)===ZN.valueOf.call(t)}var i=o===\"[object Array]\";if(!i){if(typeof e!=\"object\"||typeof t!=\"object\")return!1;var s=e.constructor,a=t.constructor;if(s!==a&&!(fc(s)&&s instanceof s&&fc(a)&&a instanceof a)&&\"constructor\"in e&&\"constructor\"in t)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===e)return r[u]===t;if(n.push(e),r.push(t),i){if(u=e.length,u!==t.length)return!1;for(;u--;)if(!xP(e[u],t[u],n,r))return!1}else{var c=La(e),l;if(u=c.length,La(t).length!==u)return!1;for(;u--;)if(l=c[u],!(yd(t,l)&&xP(e[l],t[l],n,r)))return!1}return n.pop(),r.pop(),!0}function ei(e,t){return xP(e,t)}function pQ(e){return e==null?!0:Cu(e)&&(hd(e)||KU(e)||ch(e))?e.length===0:La(e).length===0}function As(e){return function(t){return uh.call(t)===\"[object \"+e+\"]\"}}var hd=DU||As(\"Array\");function bd(e){var t=typeof e;return t===\"function\"||t===\"object\"&&!!e}var ch=As(\"Arguments\"),fc=As(\"Function\"),KU=As(\"String\"),ez=As(\"Number\"),dQ=As(\"Date\"),mQ=As(\"RegExp\"),fQ=As(\"Error\"),yQ=As(\"Symbol\"),gQ=As(\"Map\"),hQ=As(\"WeakMap\"),bQ=As(\"Set\"),xQ=As(\"WeakSet\");(function(){ch(arguments)||(ch=function(e){return yd(e,\"callee\")})})();var tz=ah.document&&ah.document.childNodes;typeof/./!=\"function\"&&typeof Int8Array!=\"object\"&&typeof tz!=\"function\"&&(fc=function(e){return typeof e==\"function\"||!1});function nz(e){return ez(e)&&NU(e)}function rz(e){return e===!0||e===!1||uh.call(e)===\"[object Boolean]\"}function oz(e){return e}function mO(e){return hd(e)?function(t){return rO(t,e)}:nO(e)}function iz(e){return e=ZU({},e),function(t){return JU(t,e)}}function JN(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}var QN=Date.now||function(){return new Date().getTime()},fO={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#x27;\",\"`\":\"&#x60;\"},sz=$U(fO);function yO(e){var t=function(i){return e[i]},n=\"(?:\"+La(e).join(\"|\")+\")\",r=RegExp(n),o=RegExp(n,\"g\");return function(i){return i=i==null?\"\":\"\"+i,r.test(i)?i.replace(o,t):i}}var gO=yO(fO),TQ=yO(sz);var az=0;function IQ(e){var t=++az+\"\";return e?e+t:t}var PQ=co.templateSettings={evaluate:/<%([\\s\\S]+?)%>/g,interpolate:/<%=([\\s\\S]+?)%>/g,escape:/<%-([\\s\\S]+?)%>/g};function hO(e,t){return e._chain?co(t).chain():t}gd([\"pop\",\"push\",\"reverse\",\"shift\",\"sort\",\"splice\",\"unshift\"],function(e){var t=lh[e];co.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e===\"shift\"||e===\"splice\")&&n.length===0&&delete n[0],hO(this,n)}});gd([\"concat\",\"join\",\"slice\"],function(e){var t=lh[e];co.prototype[e]=function(){return hO(this,t.apply(this._wrapped,arguments))}});co.prototype.value=function(){return this._wrapped};co.prototype.valueOf=co.prototype.toJSON=co.prototype.value;co.prototype.toString=function(){return String(this._wrapped)};function Of(e,t){let n={};for(let r in t)t.hasOwnProperty(r)&&(ei(e[r],t[r])||(n[r]=t[r]));return n}function Af(e,t){let n,r={};for(let o in t)t.hasOwnProperty(o)&&(ei(e[o],t[o])||(r[o]=t[o],n=r));return n}function CQ(e,t){t||(t={});let n={};for(let r in e)e.hasOwnProperty(r)&&!t.hasOwnProperty(r)&&(n[r]=Zi(e[r]));for(let r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}var rn={NONE:\"NONE\",X:\"X\",Y:\"Y\",XY:\"XY\",AUTO:\"AUTO\"};function uz(e){return!e||e[0].type===\"none\"&&e[1].type===\"none\"?rn.NONE:e[1].type===\"none\"?rn.X:e[0].type===\"none\"?rn.Y:rn.XY}function xO(e,t){let n=uz(t);switch(e){case rn.NONE:return rn.NONE;case rn.AUTO:return n;case rn.XY:return n;case rn.X:return n===rn.X||n===rn.XY?rn.X:rn.NONE;case rn.Y:return n===rn.Y||n===rn.XY?rn.Y:rn.NONE;default:return rn.NONE}}var TO={DEFAULT:\"DEFAULT\",NONE:\"NONE\",POSITIVE:\"POSITIVE\",BOTH:\"BOTH\"},vQ={NONE:\"NONE\",POSITIVE:\"POSITIVE\",BOTH:\"BOTH\"};var IO={DEFAULT:\"default\",CENTER:\"center\",CENTER_AUTO:\"center_auto\",AUTO_CENTER:\"auto_center\",ABOVE:\"above\",ABOVE_LEFT:\"above_left\",ABOVE_RIGHT:\"above_right\",ABOVE_AUTO:\"above_auto\",BELOW:\"below\",BELOW_LEFT:\"below_left\",BELOW_RIGHT:\"below_right\",BELOW_AUTO:\"below_auto\",LEFT:\"left\",AUTO_LEFT:\"auto_left\",RIGHT:\"right\",AUTO_RIGHT:\"auto_right\"};var Zc={LOOP_FORWARD_REVERSE:\"LOOP_FORWARD_REVERSE\",LOOP_FORWARD:\"LOOP_FORWARD\",PLAY_ONCE:\"PLAY_ONCE\",PLAY_INDEFINITELY:\"PLAY_INDEFINITELY\"};function RQ(e){switch(e){case Zc.LOOP_FORWARD:return\"dcg-icon-arrow-one-way\";case Zc.LOOP_FORWARD_REVERSE:return\"dcg-icon-arrow-two-way\";case Zc.PLAY_ONCE:return\"dcg-icon-arrow-once\";case Zc.PLAY_INDEFINITELY:return\"dcg-icon-arrow-infinite\"}}var Xc={POINT:\"POINT\",OPEN:\"OPEN\",CROSS:\"CROSS\",SQUARE:\"SQUARE\",PLUS:\"PLUS\",TRIANGLE:\"TRIANGLE\",DIAMOND:\"DIAMOND\",STAR:\"STAR\"},Td={SOLID:\"SOLID\",DASHED:\"DASHED\",DOTTED:\"DOTTED\"};function AQ({from:e,to:t,props:n}){for(let r in n)n[r]&&e.hasOwnProperty(r)&&(t[r]=Zi(e[r]))}function wQ(e,t){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function PO(e,t){let n={};for(let r in t)t.hasOwnProperty(r)&&(n[r]=e[r]);return n}function LQ(e){let t={};for(let n in e)e.hasOwnProperty(n)&&(t[n]=!0);return t}var ro={xmin:-5,xmax:5,ymin:-5,ymax:5,zmin:-5,zmax:5};So();So();var Ct={};Tu(Ct,{actionMergeFreeVariable:()=>rE,addArgumentsToDefinition:()=>Ey,addTypeError:()=>cC,adjacentMixedNumber:()=>Rb,adjacentNumbers:()=>DE,andTypeError:()=>TC,ansUndefined:()=>Kv,assignmentsUnsupported:()=>nM,badDefault:()=>_M,badEqualitySlice:()=>$u,badExport:()=>Vy,badForInputListDependency:()=>dM,badForIntervalDependency:()=>mM,badImplicitCall:()=>_b,badIntegralBoundDependency:()=>Wv,badLogExponent:()=>ZE,badProductBoundDependency:()=>qv,badSampleSize:()=>Jv,badSumBoundDependency:()=>Gv,badSymbolContext:()=>Ry,badTrigExponent:()=>YE,badTupleDimensions:()=>RE,baseCaseCannotDependOnRecursiveParameter:()=>oC,baseCaseTooComplicatedUsePiecewise:()=>my,baseCasesMustAllHaveSameReturnType:()=>dy,binaryOperatorMissingOperand:()=>Yd,blankExpression:()=>Sy,boxplotBreadthInvalid:()=>yE,boxplotOffsetInvalid:()=>fE,cannotAssignColor:()=>gv,cannotRedefine:()=>Zd,cannotRestrict:()=>fv,cannotRestrictTrianglesWithList:()=>yv,cannotRestrictWithEquality:()=>hv,cannotSubscript:()=>KE,cantCombineSphericalAndCylindrical:()=>Bb,cdfBoundInvalid:()=>pv,cdfRequiresArguments:()=>bE,cdfTooManyArguments:()=>xE,chiSquareListLengthMismatch:()=>nx,chiSquareListTooShort:()=>rx,chiSquareVariableListLength:()=>Fy,clickableObjectAlreadyAssigned:()=>s5,clickableObjectAssignmentNotDefined:()=>i5,clickableObjectAssignmentNotIdentifier:()=>a5,clickableObjectInvalidExpression:()=>u5,colonMissingCondition:()=>jE,colorArity:()=>PE,combineTypeError:()=>Eb,comparatorTypeError:()=>xC,complexPlottedTableCell:()=>K8,complicatedDoubleInequality:()=>zb,complicatedPolarImplicit:()=>Cv,computedColumnHeader:()=>vM,constantUnsupported:()=>Dy,coordinateAccessTypeError:()=>SC,customRegressionsUnsupported:()=>sM,cycle:()=>ev,deeplyNested:()=>aE,dependsOnDeletedGeoObject:()=>PM,derivativeMissingBody:()=>Zv,derivativeRecursiveCycle:()=>zC,derivativeTypeError:()=>GC,derivativeTypeErrorRespect:()=>qC,derivativeVariableTypeError:()=>UC,differentialWithSuperscript:()=>kv,distributionAsFunction:()=>$b,divideTypeError:()=>fC,domainMaxInvalid:()=>cv,domainMaxLessThanMin:()=>lv,domainMinInvalid:()=>uv,dotLHSConstantNumberError:()=>Tb,dotLHSTypeError:()=>_C,dotRHSPropertyError:()=>RC,duplicateFunctionParameter:()=>JE,duplicateUpdateRules:()=>KC,eachBaseCaseArgumentMustBeSimple:()=>hb,emptyParen:()=>Py,emptyPipe:()=>$E,emptyRadical:()=>zE,emptyRadicalIndex:()=>kE,emptySquareBracket:()=>HE,emptySubscript:()=>Ob,emptySuperscript:()=>VE,equationRequired:()=>kb,equationsUnsupported:()=>Ny,eventHandlerTypeError:()=>by,expectedArgumentToBeButFound:()=>aC,exponentTypeError:()=>yC,featureUnavailable:()=>uM,fractionEmpty:()=>FE,fractionMissingDenominator:()=>LE,fractionMissingNumerator:()=>wE,fractionsUnavailable:()=>Qb,functionDefinitionsUnsupported:()=>rM,functionNameAsParameter:()=>QE,functionNotDefined:()=>Lb,functionOnlyWorksInComplexMode:()=>YA,functionRequiresNumberOfArguments:()=>sC,functionTypeError:()=>ts,functionUnsupported:()=>Wa,geometryLengthTypeError:()=>vC,getLogInternalErrors:()=>X8,gpuLongProduct:()=>mE,gpuLongSum:()=>dE,gpuMaxListSize:()=>vp,gpuUnsupportedFunction:()=>$d,gpuUnsupportedIntegral:()=>lE,gpuUnsupportedRecursion:()=>pE,gpuVariableListLength:()=>al,gpuVariableProduct:()=>Mb,gpuVariableSum:()=>vb,heterogeneousList:()=>xy,identifierAsFunction:()=>Db,identifierIsNotFunction:()=>Nb,illegalBinWidth:()=>_y,illegalDotCall:()=>hy,implicitsDisabled:()=>Sv,incorrectProductLowerBound:()=>Bv,incorrectSumLowerBound:()=>Vv,indexTypeError:()=>gy,inequalitiesDisabled:()=>Gb,inequalitiesUnsupported:()=>oM,integralArgumentTypeError:()=>BC,integralLowerBoundTypeError:()=>FC,integralMissingBody:()=>Yv,integralMissingBound:()=>Uv,integralMissingDifferential:()=>zv,integralUpperBoundTypeError:()=>VC,internal:()=>V,invalidDependentFirstTableColumn:()=>e5,invalidDoubleEquality3d:()=>vv,invalidDoubleInequality3d:()=>Ev,invalidDoubleInequalityVariables:()=>qb,invalidFirstTableColumn:()=>Rv,invalidFunctionName:()=>Jb,invalidHalfEmptyRange:()=>wv,invalidImplicitVariables:()=>Rp,invalidImplicitVariables3d:()=>Iv,invalidInequalityVariables:()=>Tv,invalidIntervalComprehensionArity:()=>CM,invalidIntervalComprehensionParameter:()=>Wd,invalidIntervalComprehensionReturnType:()=>SM,invalidLHS:()=>bv,invalidNestedIntervalComprehension:()=>EM,invalidOperatorName:()=>GE,invalidPvalue:()=>eC,invalidRegressionParameter:()=>Dv,invalidSubscript:()=>BE,invalidTableEntry:()=>vy,invalidTableHeader:()=>_v,listComprehensionIncorrectInput:()=>pM,listComprehensionInputListTypeError:()=>lM,listTypeError:()=>Ep,logScaleBoxPlot:()=>sE,logScaleDotPlot:()=>iE,logScaleHistogram:()=>oE,logScaleTypeError:()=>Hd,logbaseUnsupported:()=>tM,malformedList:()=>_E,malformedPoint:()=>ME,matrixAddDimensions:()=>l5,matrixAssignment:()=>c5,matrixElementTypeError:()=>y5,matrixFractionalPower:()=>m5,matrixInvalidVariable:()=>g5,matrixMultiplyDimensions:()=>d5,matrixPowerDimensions:()=>f5,matrixSubtractDimensions:()=>p5,maxListSize:()=>Ty,methodRequiresList:()=>cl,mismatchedBraces:()=>Xv,mismatchedDoubleInequality:()=>Ub,mixedComparatorChain:()=>hC,mixedRestrictionEquation:()=>cE,multipleEqualityRestrictions:()=>uE,multiplyDefined:()=>Cy,multiplyTypeError:()=>yy,multiplyTypeError2D:()=>dC,multiplyTypeError3D:()=>mC,multiplyTypeErrorCross:()=>pC,negativeTypeError:()=>gC,nonArithmeticRange:()=>My,nonListDoubleReducer:()=>Ov,nonListParameterizedReducer:()=>Av,nonSquareDeterminant:()=>t5,nonSquareInverse:()=>r5,nonSquareTrace:()=>n5,nonlinearRegressionInference:()=>tC,opaque:()=>fy,optimizationError:()=>Nv,orTypeError:()=>IC,parameterAlreadyDefined:()=>Fb,parenthesesUnavailable:()=>cM,pdfWrongArity:()=>hE,percentMissingOf:()=>jv,piecewiseBranchTypeError:()=>HC,piecewiseConditionTypeError:()=>Sb,piecewiseMissingCondition:()=>XE,piecewisePartMissingCondition:()=>WE,pointTypeError:()=>PC,pointsUnsupported:()=>aM,polygonTwoNumbersError:()=>Iy,polygonUnsupportedIn3d:()=>Wb,primeVariableTypeError:()=>kC,primeWithoutParen:()=>wb,primedFunctionArity:()=>Mp,productArgumentTypeError:()=>LC,productInfiniteBoundError:()=>Pb,productLowerBoundTypeError:()=>AC,productMissingBody:()=>$v,productMissingBound:()=>Fv,productUpperBoundTypeError:()=>wC,randomArity:()=>TE,randomFromBroadcastDistribution:()=>IE,recursionCyclicDependency:()=>iC,recursionDoesNotTerminate:()=>fS,recursionInRegression:()=>ZC,recursiveDepthExceeded:()=>yS,recursiveFunctionCannotDependOnFreeVariable:()=>rC,recursiveFunctionMissingBaseCase:()=>gb,recursiveFunctionMissingBaseCaseWithMetadata:()=>nC,regressionTypeError:()=>jC,regressionsUnsupported:()=>iM,selfReferentialBaseCase:()=>tv,selfReferentialFunctions:()=>_p,setLogInternalErrors:()=>KS,shadowedIndex:()=>Vb,shadowedIntegrationVariable:()=>Yb,shadowedListComprehensionInput:()=>Kb,singleVariableImplicitEquationsDisabled:()=>Pv,singularInverse:()=>o5,sliderLimitReferencesExport:()=>rv,sliderMaxInvalid:()=>iv,sliderMaxLessThanMin:()=>sv,sliderMinInvalid:()=>ov,sliderStepInvalid:()=>av,substitutionAmbiguousComma:()=>ll,substitutionBodyAction:()=>b5,substitutionBodyDependsOnRegression:()=>xM,substitutionDuplicateSymbol:()=>TM,substitutionFunctionLHS:()=>Ly,substitutionIllegalLHS:()=>wy,substitutionInvalidAssignments:()=>Ay,substitutionLocalLHS:()=>bM,substitutionNested:()=>ex,substitutionRecursiveCallLHS:()=>IM,substitutionTypeError:()=>h5,substitutionUnsupportedInterval:()=>tx,subtractTypeError:()=>lC,sumArgumentTypeError:()=>OC,sumInfiniteBoundError:()=>Ib,sumLowerBoundTypeError:()=>DC,sumMissingBody:()=>Hv,sumMissingBound:()=>Lv,sumUpperBoundTypeError:()=>NC,superscriptWithPrime:()=>UE,tableEntryTypeError:()=>YC,tableHeaderTypeError:()=>$C,tableRegressionInvalidData:()=>WC,tableRegressionLogWithNegative:()=>j8,tableRegressionTypeError:()=>XC,tdistWrongArity:()=>Q8,threeDLengthTypeError:()=>MC,tickerMinStepNonNegativeNumber:()=>nv,tokenWithSubscript:()=>NE,tooManyArguments:()=>gE,tooManyVariables:()=>En,transformationDefinitionTypeError:()=>CC,transformationTypeError:()=>EC,ttestListTooShort:()=>Zb,unaryOperatorMissingLeft:()=>OE,unaryOperatorMissingRight:()=>AE,unexpectedEquality:()=>uC,unexpectedInequality:()=>xb,unexpectedPrime:()=>Ab,unexpectedSubscript:()=>qE,unexpectedSymbol:()=>Vi,unexportableTableRegression:()=>MM,unplottableEqualityChain:()=>Mv,unplottableLongInequalityChain:()=>bC,unplottablePolarFunction:()=>xv,unrecognizedSymbol:()=>bb,updateRuleFunctionLHS:()=>nE,updateRuleIllegalLHS:()=>tE,updateRuleLocalLHS:()=>Cb,updateRuleNonIdentifierLHS:()=>QC,updateRuleTypeError:()=>JC,updateRuleUndefinedLHS:()=>eE,useRForCylindricalCoordinates:()=>mv,useRhoForSphericalCoordinates:()=>dv,using3dObjectIn2d:()=>ul,variableAsFunction:()=>Hb,variableLengthDistributionList:()=>Oy,variableLengthIntegralDependsOnIntegrationVariable:()=>hM,variableLengthProductBodyDependsOnIndex:()=>gM,variableLengthSumBodyDependsOnIndex:()=>yM,variableLengthTopLevelList:()=>fM,variableSeed:()=>Qv,variableUnsupported:()=>jb,variablesUnsupported:()=>eM,viewportBoundTypeError:()=>J8,warnComplexImplicit:()=>Xd,writeIntegral:()=>Xb,wrongArity:()=>Xa,wrongArityLengthAsCount:()=>SE,wrongDoubleReducerArity:()=>EE,wrongParameterizedReducerArity:()=>CE,zeroArgReducer:()=>vE});var Ha={};Tu(Ha,{DEFAULT_COMPLEX_EVALUATION_LABEL_OPTIONS:()=>jS,DEFAULT_EVALUATION_LABEL_OPTIONS:()=>qA,canDisplayAsFraction:()=>zA,complexNumberLabel:()=>uy,complexPlainMathNumberLabel:()=>JS,formatSymbol:()=>Y,identifierToHTML:()=>H8,identifierToLatex:()=>Mo,latexToIdentifier:()=>ks,numericLabel:()=>pb,point:()=>F8,point3dLabel:()=>Y8,pointLabel:()=>$8,trimLatex:()=>ma,truncatedHTMLLabel:()=>db,truncatedLatexLabel:()=>sl,truncatedPlainmathLabel:()=>Ud,value:()=>WS});function SO(e,t,n){if(e=Id(e),n>0){let r=Id(t);return e<r&&(e+=2*Math.PI),(e-r)/n}else{let r=Id(t+n);return e<r&&(e+=2*Math.PI),1+(e-r)/n}}function yh(e,t,n){e=Id(e);let r=Id(t),o=Id(t+n);if(n<0){let i=r;r=o,o=i}return r<o?r<=e&&e<=o:r<=e||e<=o}function Id(e){let t=2*Math.PI;return(e%t+t)%t}function BQ(e,t){if(!(isNaN(e)||isNaN(t)))return e>=0?Math.atan(t/e):Math.atan(t/e)+Math.PI}var ws=Math.hypot;function gc(e,t){return e>0==t>0?e+.5*(t-e):.5*(e+t)}function lz(e,t,n,r,o,i){return e*r+t*o+n*i}function ia(e,t,n,r,o,i,s,a,u){let c=ws(s-r,a-o,u-i);return c===0?0:lz((e-r)/c,(t-o)/c,(n-i)/c,(s-r)/c,(a-o)/c,(u-i)/c)}function pz(e,t,n,r,o,i){let s=ia(e,t,0,n,r,0,o,i,0);return s<=0?[n,r]:s>=1?[o,i]:[n+s*(o-n),r+s*(i-r)]}function dz(e,t,n,r,o,i,s,a,u){let c=ia(e,t,n,r,o,i,s,a,u);return c<=0?[r,o,i]:c>=1?[s,a,u]:[r+c*(s-r),o+c*(a-o),i+c*(u-i)]}function qQ(e,t,n,r,o,i,s,a){let u=ia(e,t,0,n,r,0,o,i,0);return u<=0&&!s?[n,r]:u>=1&&!a?[o,i]:[n+u*(o-n),r+u*(i-r)]}function CO(e,t,n,r,o,i){let s=pz(e,t,n,r,o,i);return ws(e-s[0],t-s[1])}function EO(e,t,n,r,o,i,s,a,u){let c=dz(e,t,n,r,o,i,s,a,u);return ws(e-c[0],t-c[1],n-c[2])}function UQ(e,t,n,r,o,i,s){let a=Math.atan2(t-r,e-n);if(yh(a,i,s-i))return[o*Math.cos(a)+n,o*Math.sin(a)+r]}function Xi(e,t,n=1){if(e===t)return!0;if(!isFinite(e)||!isFinite(t))return!1;if(n>50)throw new Error(\"Within \"+(52-n)+\" bits isn't really approximate any more\");let r=Math.max(Math.max(Math.abs(e),Math.abs(t)),1),o=n===1?.5:Math.pow(.5,n);return r===r+o*Math.abs(t-e)}function zQ(e){return Math.round(e-.5)+.5}function bc(e,t=1e6){if(e===1/0)return{n:1/0,d:1};if(e===-1/0)return{n:-1/0,d:1};if(!isFinite(e))return{n:NaN,d:1};let n,r=0,o=1,i=1,s=0,a,u;for(;n=Math.floor(e),a=n*o+r,u=n*s+i,!(u>t||(r=o,i=s,o=a,s=u,e===n));)e=1/(e-n);return{n:o,d:s}}var $o={};Tu($o,{LruCache:()=>Ad,RECURSIVE_COMPUTATION_LIMIT:()=>B1,RECURSIVE_DEPTH_LIMIT:()=>oy,RecursiveFunctionResult:()=>V1,SYMBOL_DIVERGES:()=>F1,TerminationStatus:()=>G1,_chisqccdf:()=>iS,_chisqcdf:()=>oS,_complexGCD:()=>ZS,_poissonpdf:()=>rl,acosh:()=>A1,acot:()=>gk,acoth:()=>Ck,acsc:()=>hk,acsch:()=>Sk,addTangentAngle:()=>f$,addTangentArc:()=>m$,addTangentCircle:()=>d$,addTangentLine:()=>c$,addTangentPolygon:()=>a$,addTangentRay:()=>l$,addTangentSegment:()=>ab,addTangentSegmentThreeD:()=>u$,addTangentTransformation:()=>y$,addTangentVector:()=>p$,angleMarkerMultiplier:()=>jH,angleMarkerRawDelta:()=>WH,angleStart:()=>$H,angleVertex:()=>HH,anglebisector:()=>D$,arc:()=>qH,arcArcIntersection:()=>C$,arcCenter:()=>Gd,arcCircleIntersection:()=>S$,arcFirstPoint:()=>UH,arcGlider:()=>TA,arcLineIntersection:()=>SA,arcMiddlePoint:()=>zH,arcOmega:()=>qd,arcThirdPoint:()=>kH,arg:()=>a8,argMax:()=>cH,argMin:()=>uH,asec:()=>bk,asech:()=>Pk,asinh:()=>w1,atanh:()=>L1,basePointFromVector:()=>OH,basePointFromVectorThreeD:()=>LH,bernoulliTable:()=>k1,binomSample:()=>Vk,binomcdf:()=>qk,binompdf:()=>eb,center:()=>BH,chisqIndependenceColTotals:()=>w8,chisqIndependenceExpectedValues:()=>L8,chisqIndependenceRowTotals:()=>A8,chisqcdf:()=>Xk,chisqpdf:()=>vS,chooseNonIncidentPoint:()=>T$,circle:()=>VH,circleArcIntersection:()=>P$,circleCircleIntersection:()=>ny,circleGlider:()=>h$,circleLineIntersection:()=>BS,clamp:()=>mr,coerceComplexToReal:()=>$S,coerceComplexToRealWithTolerance:()=>C8,coerceRealToComplex:()=>M8,common_log:()=>pk,compareComplexLexicographic:()=>aA,complex:()=>Kt,complexAcos:()=>LA,complexAcosh:()=>VA,complexAcot:()=>T8,complexAcoth:()=>S8,complexAcsc:()=>x8,complexAcsch:()=>P8,complexAsec:()=>b8,complexAsech:()=>I8,complexAsin:()=>HS,complexAsinh:()=>FA,complexAtan:()=>lS,complexAtanh:()=>Xh,complexCeil:()=>R8,complexCommonLog:()=>dk,complexCos:()=>NA,complexCosh:()=>wA,complexCot:()=>f8,complexCoth:()=>h8,complexCsc:()=>m8,complexCsch:()=>g8,complexDivide:()=>il,complexExp:()=>c8,complexFloor:()=>BA,complexFromPolarRounded:()=>el,complexGCD:()=>dS,complexLCM:()=>mS,complexListGCD:()=>sk,complexListLCM:()=>ak,complexLog:()=>cS,complexLogbase:()=>Y1,complexMod:()=>D8,complexMultiplyPoints:()=>vA,complexPow:()=>p8,complexPowReal:()=>RA,complexReciprocal:()=>ii,complexRound:()=>Od,complexSec:()=>d8,complexSech:()=>y8,complexSin:()=>DA,complexSinh:()=>AA,complexSortPerm:()=>rH,complexSqrt:()=>_A,complexTan:()=>OA,complexTanh:()=>kS,composeTransformation:()=>U$,conj:()=>bp,corr:()=>sb,cos:()=>Xn,cosh:()=>Vd,cot:()=>yk,cotDerivative:()=>H1,coth:()=>Ik,cov:()=>pH,covp:()=>pA,csc:()=>fk,csch:()=>Tk,dilation:()=>B$,directedAngleMarker:()=>bA,directedAngleStart:()=>ZH,directedAngleVertex:()=>YH,directedCoterminalAngle:()=>xA,distance:()=>Ld,distanceThreeD:()=>yH,elementsAt:()=>Q$,erf:()=>Qk,erfcx:()=>ku,executeRecursiveFunction:()=>tk,expm1:()=>Xz,factorial:()=>Cc,frequency:()=>t8,gcd:()=>Gh,geocdf:()=>$k,geopdf:()=>kk,getArcDetails:()=>ub,getBroadcastTargetElements:()=>Qz,getRecursiveDepthLimit:()=>Jz,gosperr:()=>wi,handleRecursionLimitExceeded:()=>U1,hsv:()=>gH,hypot:()=>oi,identity:()=>FH,imag:()=>s8,invBinom:()=>oA,invChisq:()=>Wk,invGeo:()=>Yk,invNorm:()=>nb,invPoisson:()=>rA,invT:()=>iA,invUniform:()=>eH,invertTransformation:()=>z$,isDegenerateArc:()=>AS,lcm:()=>rS,line:()=>_H,lineArcIntersection:()=>PA,lineCircleIntersection:()=>VS,lineGlider:()=>LS,lineLineIntersection:()=>IA,listGCD:()=>ok,listLCM:()=>ik,listLength:()=>nH,listMax:()=>ob,listMin:()=>rb,log:()=>lk,log1p:()=>Bd,log_base:()=>Uh,losesInfoWhenCoercingToReal:()=>YS,lowerQuantileIndex:()=>iH,lowerQuartileIndex:()=>aH,mad:()=>lH,mathVector:()=>yA,mathVectorThreeD:()=>gA,md5Spyable:()=>O1,mean:()=>nl,median:()=>cA,mod:()=>mp,nCr:()=>Kc,nPr:()=>qh,normalSample:()=>Lk,normalcdf:()=>tA,normalpdf:()=>Kh,parallel:()=>_$,peelableCoerceComplexToReal:()=>E8,peelableCoerceComplexToRealWithTolerance:()=>v8,perpendicular:()=>R$,pointDet:()=>MA,pointDot:()=>N$,pointPerp:()=>O$,poissonSample:()=>Bk,poissoncdf:()=>zk,poissonpdf:()=>tb,polyGamma:()=>$1,polygon:()=>hH,polygonArea:()=>NS,polygonEdgeByParameter:()=>b$,polygonEdges:()=>PH,polygonGlider:()=>x$,polygonInteriorDirectedAngles:()=>MH,polygonInteriorUndirectedAngles:()=>vH,polygonPerimeter:()=>SH,pow:()=>jz,quad:()=>fH,quantile:()=>sA,quartile:()=>hp,quartileIndex:()=>ib,radius:()=>GH,random:()=>CS,randomPerm:()=>ES,rank:()=>aS,rawTransform:()=>A$,rawTransformConj:()=>w$,ray:()=>RH,rayGlider:()=>uS,real:()=>i8,recursionCacheKey:()=>nS,recursionDiverges:()=>q1,recursionMissingCacheEntry:()=>ek,recursionSuccess:()=>Kz,reflection:()=>q$,restriction:()=>r8,restrictionToBoolean:()=>o8,rgb:()=>mA,rotation:()=>G$,scaleTangentAngle:()=>s$,scaleTangentArc:()=>i$,scaleTangentCircle:()=>o$,scaleTangentLine:()=>n$,scaleTangentPolygon:()=>t$,scaleTangentRay:()=>r$,scaleTangentSegment:()=>wS,scaleTangentTransformation:()=>e$,sec:()=>mk,sech:()=>xk,segment:()=>OS,segmentGlider:()=>FS,segmentThreeD:()=>bH,segmentThreeDGlider:()=>g$,select:()=>J$,serializeNonNumericSeedPart:()=>SS,shuffle:()=>wk,sign:()=>hS,sin:()=>Ln,sinh:()=>Tp,sortPerm:()=>Ip,spearman:()=>dH,sphere:()=>TH,sqrtxsqm1:()=>rk,sqrtxsqp1:()=>nk,stats:()=>_S,stdev:()=>dA,stdevp:()=>mH,supplementAngle:()=>QH,tSample:()=>Fk,tan:()=>xS,tanh:()=>gS,tcdf:()=>Rk,testingOnlySetRecursiveDepthLimit:()=>bS,toFraction:()=>Wz,tone:()=>e8,total:()=>X1,tpdf:()=>Qh,transformAngleMarker:()=>j$,transformArc:()=>X$,transformCircle:()=>Z$,transformLine:()=>H$,transformPoint:()=>pa,transformPolygon:()=>W$,transformRay:()=>$$,transformScaleFactor:()=>F$,transformSegment:()=>zS,transformVector:()=>Y$,transformWithoutTranslation:()=>L$,translation:()=>V$,triangle:()=>xH,tscore:()=>tH,undirectedAngleMarker:()=>XH,undirectedCoterminalAngle:()=>JH,uniformSample:()=>tl,uniformcdf:()=>Jk,uniformpdf:()=>MS,uniquePerm:()=>K$,upperQuantileIndex:()=>oH,upperQuartileIndex:()=>sH,validateRangeLength:()=>RS,validateSampleCount:()=>DS,variance:()=>lA,varp:()=>iy,vector:()=>DH,vectorDisplacementAsPoint:()=>NH,vectorThreeD:()=>AH,vectorThreeDDisplacementAsPoint:()=>wH,vertices:()=>IH,volume:()=>n8,wirtingerEqualOrWarning:()=>_8});var vO=function(){\"use strict\";function e(g,y){let h=(g&65535)+(y&65535);return(g>>16)+(y>>16)+(h>>16)<<16|h&65535}function t(g,y){return g<<y|g>>>32-y}function n(g,y,h,b,T,I){return e(t(e(e(y,g),e(b,I)),T),h)}function r(g,y,h,b,T,I,E){return n(y&h|~y&b,g,y,T,I,E)}function o(g,y,h,b,T,I,E){return n(y&b|h&~b,g,y,T,I,E)}function i(g,y,h,b,T,I,E){return n(y^h^b,g,y,T,I,E)}function s(g,y,h,b,T,I,E){return n(h^(y|~b),g,y,T,I,E)}function a(g,y){g[y>>5]|=128<<y%32,g[(y+64>>>9<<4)+14]=y;let h,b,T,I,E,S=1732584193,C=-271733879,v=-1732584194,_=271733878;for(h=0;h<g.length;h+=16)b=S,T=C,I=v,E=_,S=r(S,C,v,_,g[h],7,-680876936),_=r(_,S,C,v,g[h+1],12,-389564586),v=r(v,_,S,C,g[h+2],17,606105819),C=r(C,v,_,S,g[h+3],22,-1044525330),S=r(S,C,v,_,g[h+4],7,-176418897),_=r(_,S,C,v,g[h+5],12,1200080426),v=r(v,_,S,C,g[h+6],17,-1473231341),C=r(C,v,_,S,g[h+7],22,-45705983),S=r(S,C,v,_,g[h+8],7,1770035416),_=r(_,S,C,v,g[h+9],12,-1958414417),v=r(v,_,S,C,g[h+10],17,-42063),C=r(C,v,_,S,g[h+11],22,-1990404162),S=r(S,C,v,_,g[h+12],7,1804603682),_=r(_,S,C,v,g[h+13],12,-40341101),v=r(v,_,S,C,g[h+14],17,-1502002290),C=r(C,v,_,S,g[h+15],22,1236535329),S=o(S,C,v,_,g[h+1],5,-165796510),_=o(_,S,C,v,g[h+6],9,-1069501632),v=o(v,_,S,C,g[h+11],14,643717713),C=o(C,v,_,S,g[h],20,-373897302),S=o(S,C,v,_,g[h+5],5,-701558691),_=o(_,S,C,v,g[h+10],9,38016083),v=o(v,_,S,C,g[h+15],14,-660478335),C=o(C,v,_,S,g[h+4],20,-405537848),S=o(S,C,v,_,g[h+9],5,568446438),_=o(_,S,C,v,g[h+14],9,-1019803690),v=o(v,_,S,C,g[h+3],14,-187363961),C=o(C,v,_,S,g[h+8],20,1163531501),S=o(S,C,v,_,g[h+13],5,-1444681467),_=o(_,S,C,v,g[h+2],9,-51403784),v=o(v,_,S,C,g[h+7],14,1735328473),C=o(C,v,_,S,g[h+12],20,-1926607734),S=i(S,C,v,_,g[h+5],4,-378558),_=i(_,S,C,v,g[h+8],11,-2022574463),v=i(v,_,S,C,g[h+11],16,1839030562),C=i(C,v,_,S,g[h+14],23,-35309556),S=i(S,C,v,_,g[h+1],4,-1530992060),_=i(_,S,C,v,g[h+4],11,1272893353),v=i(v,_,S,C,g[h+7],16,-155497632),C=i(C,v,_,S,g[h+10],23,-1094730640),S=i(S,C,v,_,g[h+13],4,681279174),_=i(_,S,C,v,g[h],11,-358537222),v=i(v,_,S,C,g[h+3],16,-722521979),C=i(C,v,_,S,g[h+6],23,76029189),S=i(S,C,v,_,g[h+9],4,-640364487),_=i(_,S,C,v,g[h+12],11,-421815835),v=i(v,_,S,C,g[h+15],16,530742520),C=i(C,v,_,S,g[h+2],23,-995338651),S=s(S,C,v,_,g[h],6,-198630844),_=s(_,S,C,v,g[h+7],10,1126891415),v=s(v,_,S,C,g[h+14],15,-1416354905),C=s(C,v,_,S,g[h+5],21,-57434055),S=s(S,C,v,_,g[h+12],6,1700485571),_=s(_,S,C,v,g[h+3],10,-1894986606),v=s(v,_,S,C,g[h+10],15,-1051523),C=s(C,v,_,S,g[h+1],21,-2054922799),S=s(S,C,v,_,g[h+8],6,1873313359),_=s(_,S,C,v,g[h+15],10,-30611744),v=s(v,_,S,C,g[h+6],15,-1560198380),C=s(C,v,_,S,g[h+13],21,1309151649),S=s(S,C,v,_,g[h+4],6,-145523070),_=s(_,S,C,v,g[h+11],10,-1120210379),v=s(v,_,S,C,g[h+2],15,718787259),C=s(C,v,_,S,g[h+9],21,-343485551),S=e(S,b),C=e(C,T),v=e(v,I),_=e(_,E);return[S,C,v,_]}function u(g){let y,h=\"\",b=g.length*32;for(y=0;y<b;y+=8)h+=String.fromCharCode(g[y>>5]>>>y%32&255);return h}function c(g){let y,h=[];for(h[(g.length>>2)-1]=void 0,y=0;y<h.length;y+=1)h[y]=0;let b=g.length*8;for(y=0;y<b;y+=8)h[y>>5]|=(g.charCodeAt(y/8)&255)<<y%32;return h}function l(g){return u(a(c(g),g.length*8))}function p(g){let y=\"0123456789abcdef\",h=\"\",b,T;for(T=0;T<g.length;T+=1)b=g.charCodeAt(T),h+=y.charAt(b>>>4&15)+y.charAt(b&15);return h}function d(g){return unescape(encodeURIComponent(g))}function m(g){return l(d(g))}function f(g){return p(m(g))}return f}();function Ls(e,t,n){return e>0==t>0?n===1?t:e+n*(t-e):e*(1-n)+t*n}function Ar(e,t,n){return[Ls(e[0],t[0],n),Ls(e[1],t[1],n)]}function Fs(e,t,n){return[Ls(e[0],t[0],n),Ls(e[1],t[1],n),Ls(e[2],t[2],n)]}function wf(e,t){return[e[0]+t[0],e[1]+t[1]]}function MO(e,t){return[e[0]-t[0],e[1]-t[1]]}function EP(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]}function vP(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function xc(e,t){return Pd(EP(e,t))}function gh(e,t,n){return[Ls(e[0],t[0],n[0]),Ls(e[1],t[1],n[1])]}function _O(e,t){return[e[0]*t,e[1]*t]}function Pd(e){let[t,n,r]=e;return t*t+n*n+r*r}function Sd(e,t){let n=e[1]*t[2]-e[2]*t[1],r=e[2]*t[0]-e[0]*t[2],o=e[0]*t[1]-e[1]*t[0],i=Math.sqrt(n*n+r*r+o*o);return[n/i,r/i,o/i]}function Cd(e,t,n){e=Math.fround(e),t=Math.fround(t),n=Math.fround(n);let r=Math.fround(e*e+t*t+n*n);return isFinite(r)&&r!=0}function Eu([e,t,n]){return isFinite(e)&&isFinite(t)&&isFinite(n)}function ps(e,t){let n;e>t&&(n=e,e=t,t=n);let r=e>0,o=t>0,i=Math.abs(e)>.01,s=Math.abs(t)>.01;if(i||s)return gc(e,t);if(e===0)return t*Math.abs(t);if(t===0)return e*Math.abs(e);if(r!==o)return 0;let a=r?Math.sqrt(e*t):-Math.sqrt(e*t);return a>=e&&t>=a?a:gc(e,t)}function NP(e,t,n,r,o){if(!(isNaN(t)||isNaN(r)||t<0==r<0))for(;;){let i=ps(e,n),s=o(i);if(!isFinite(s))return;if(i===e||i===n)return Math.abs(t)<=Math.abs(r)?[e,t]:[n,r];if(s===0)return Ff(e,t,i,s,n,r,o);t<0!=s<0?(n=i,r=s):(e=i,t=s)}}function BO(e,t,n,r,o){if(!(MP(t)||MP(r))&&_P(t,r))for(;;){let i=ps(e,n),s=o(i);if(MP(s))return;if(i===e||i===n)return i;if(_P(t,s))n=i,r=s;else if(_P(s,r))e=i,t=s;else return}}function MP(e){for(let t of e)if(isNaN(t))return!0;return!1}function _P(e,t){for(let n=0;n<e.length;n++)if(!mz(e[n],t[n]))return!1;return!0}function mz(e,t){return e<=0&&t>=0||e>=0&&t<=0}function Ff(e,t,n,r,o,i,s){let a;if(!isFinite(r))return;isFinite(t)||(a=ti(e,t,n,r,s),a!==void 0&&(e=a,t=s(e))),isFinite(i)||(a=ti(n,r,o,i,s),a!==void 0&&(o=a,i=s(a)));let u,c;t===r?u=[e,t]:u=RO(e,t,n,r,s,r),i===r?c=[o,i]:c=RO(n,r,o,i,s,r);let l;return u&&c&&(l=ps(u[0],c[0])),l!==void 0?[l,s(l)]:void 0}function ti(e,t,n,r,o){if(isFinite(t)!==isFinite(r))for(;;){let i=ps(e,n),s=o(i);if(i===e||i===n)return isFinite(t)?e:n;isFinite(s)!==isFinite(t)?(n=i,r=s):(e=i,t=s)}}function hh(e,t,n,r,o){if(Eu(t)!==Eu(r))for(;;){let i=ps(e,n),s=o(i);if(i===e||i===n)return Eu(t)?e:n;Eu(s)!==Eu(t)?(n=i,r=s):(e=i,t=s)}}function RO(e,t,n,r,o,i){if(t===i!=(r===i))for(;;){let s=ps(e,n),a=o(s);if(s===e||s===n)return t===i?[e,t]:[n,r];a===i!=(t===i)?(n=s,r=a):(e=s,t=a)}}function GO(e,t,n,r,o,i,s){if(e<n&&n<o&&isFinite(t)&&isFinite(r)&&isFinite(i)&&t!==r&&r!==i&&r>t==r>i)for(;;){let a=ps(e,n),u=s(a),c=ps(n,o),l=s(c);if(!isFinite(u)||!isFinite(l))return;if(a===e||a===n||c===n||c===o)return u>r==r>t?[a,u]:l>r==r>t?[c,l]:[n,r];if(u===r||l===r)return Ff(e,t,n,r,o,i,s);r>t&&u>t&&u>r||r<t&&u<t&&u<r?(o=n,i=r,n=a,r=u):r>t&&l>r&&l>i||r<t&&l<r&&l<i?(e=n,t=r,n=c,r=l):(e=a,t=u,o=c,i=l)}}function Vs([e,t],[n,r]){return(n-e)*(n-e)+(r-t)*(r-t)}function DO(e,t,n,r,o,i){let s=i(e),a=i(t),u=i(n),c=Vs(s,r),l=Vs(a,r),p=Vs(u,r);if(!(t<=e||n<=t)&&!(!isFinite(c)||!isFinite(l)||!isFinite(p))&&!(l>=c||l>=p))for(;;){if(Math.abs(u[0]-s[0])<o&&Math.abs(u[1]-s[1])<o)return[e,n];let d=ps(e,t),m=i(d),f=Vs(m,r),g=ps(t,n),y=i(g),h=Vs(y,r);if(!isFinite(f)||!isFinite(h))return;if(d===e||d===t||g===t||g===n)return f<l&&f<h?[d,d]:h<f&&h<l?[g,g]:[t,t];if((f===l||h===l)&&(t=.5*(d+t),a=i(t),l=Vs(a,r),f===l||h===l))return[e,n];f<l&&f<h?([n,t]=[t,d],[u,a]=[a,m],[p,l]=[l,f]):h<f&&h<l?([e,t]=[t,g],[s,a]=[a,y],[c,l]=[l,h]):([e,n]=[d,g],[s,u]=[m,y],[c,p]=[f,h])}}function NO(e,t,n){return t===void 0&&(t=-1/0),n===void 0&&(n=1/0),Math.min(n,Math.max(t,e))}function RP(e,t,n,r,o,i){let s;if(r!==void 0&&o!==void 0){let p=.5*(r+o);s=n+.01*(n<p?o-r:r-o)}else s=Math.abs(n)>1?n*1.00001:n+1e-5;let a=e(n),u=e(s),c=Vs(a,t),l=Vs(u,t);if(!(!isFinite(c)||!isFinite(l))){if(c===l)return[n,s];for(l>c&&([n,s]=[s,n],[a,u]=[u,a],[c,l]=[l,c]);isFinite(n)&&isFinite(s)&&n!==s;){if(o!==void 0&&s>o)return[o,o];if(r!==void 0&&s<r)return[r,r];let p=n+3*(s-n),d=e(p),m=Vs(d,t);if(!isFinite(m))return[n,s];if(m===l)return[n,s];if(m>l){let f=s>n?DO(n,s,p,t,i,e):DO(p,s,n,t,i,e);return f&&[NO(f[0],r,o),NO(f[1],r,o)]}[n,c,s,l]=[s,l,p,m]}return[n,s]}}function OO(e,t,n,r){return n?r?Math.min(Vs(e(r[0]),t),Vs(e(r[1]),t))<Math.min(Vs(e(n[0]),t),Vs(e(n[1]),t)):!1:!0}function ZQ(e,t,n,r,o,i){let s=RP(e,t,n,r,o,i);if(r!==void 0){let a=RP(e,t,r,r,o,i);OO(e,t,s,a)&&(s=a)}if(o!==void 0){let a=RP(e,t,o,r,o,i);OO(e,t,s,a)&&(s=a)}return s}function AO(e,t,n,r,o,i,s,a){let u=Math.abs(r-t),c=Math.abs(i-r),l=Math.abs(a-i);return u>c&&u>l?[e,n]:l>c&&l>u?[o,s]:[n,o]}function Ed(e,t,n,r,o,i,s,a=0){if(!((n-e)*(o-n)<=0)&&!(!isFinite(e)||!isFinite(n)||!isFinite(o))&&!(!isFinite(t)||!isFinite(i))){if(!isFinite(r)){let u=ti(e,t,n,r,s),c=ti(n,r,o,i,s);return u===void 0||c===void 0?void 0:[u,c]}if(!(Math.abs(r-((o-n)*t+(n-e)*i)/(o-e))<a))for(;;){let u=ps(e,n),c=s(u),l=ps(n,o),p=s(l),d=Math.abs(c-gc(t,r)),m=Math.abs(r-gc(c,p)),f=Math.abs(p-gc(r,i));if(d<=a&&m<=a&&f<=a)return;if(!isFinite(c)){let g=ti(e,t,u,c,s),y=ti(u,c,o,i,s);return g===void 0||y===void 0?void 0:[g,y]}if(!isFinite(p)){let g=ti(e,t,l,p,s),y=ti(l,p,o,i,s);return g===void 0||y===void 0?void 0:[g,y]}if((u===e||u===n)&&(l===n||l===o))return Math.abs(r-t)>Math.abs(i-r)?[e,n]:[n,o];if(u===e||u===n)return AO(e,t,n,r,l,p,o,i);if(l===n||l===o)return AO(e,t,u,c,n,r,o,i);d>f&&d>=m?(o=n,i=r,n=u,r=c):f>d&&f>=m?(e=n,t=r,n=l,r=p):(e=u,t=c,o=l,i=p)}}}var Tc=(Math.sqrt(5)-1)/2;function Lf(e,t){return e>0==t>0?e+Tc*(t-e):(1-Tc)*e+Tc*t}function Wc(e,t){let n;e>t&&(n=e,e=t,t=n);let r=e>0,o=t>0,i=Math.abs(e)>.01,s=Math.abs(t)>.01;if(i||s)return Lf(e,t);if(e===0)return t*Math.abs(t);if(t===0)return e*Math.abs(e);if(r!==o)return 0;let a=r?Math.sqrt(e*t):-Math.sqrt(e*t);return a>=e&&t>=a?a:Lf(e,t)}function qO(e,t,n,r,o,i){if(!isFinite(e)||!isFinite(n)||!isFinite(t)||!isFinite(r))return;e>n&&([e,t,n,r]=[n,r,e,t]);let s=Wc(e,n),a=o(s);if(Math.abs(a-Lf(t,r))<=i)return;let u=Wc(e,s),c=o(u);for(;;){let l=Math.abs(c-Lf(t,a)),p=Math.abs(a-Lf(r,c));if(l<=i&&p<=i)return;if(l>p){if(n=s,r=a,s=u,a=c,u=Wc(e,s),c=o(u),u===e||u===s)return LO(e,t,s,a,n,r);if(!isFinite(c))return wO(e,t,u,c,n,r,o)}else{if(e=u,t=c,u=s,c=a,s=Wc(n,s),a=o(s),s===n||s===u)return LO(e,t,u,c,n,r);if(!isFinite(a))return wO(e,t,s,a,n,r,o)}}}function wO(e,t,n,r,o,i,s){let a=ti(e,t,n,r,s),u=ti(n,r,o,i,s);if(!(a===void 0||u===void 0))return[a,u]}function LO(e,t,n,r,o,i){return Math.abs(r-t)>Math.abs(i-r)?[e,n]:[n,o]}function DP(e,t,n){let r=e[0]*(1-Tc)+t[0]*Tc-n[0],o=e[1]*(1-Tc)+t[1]*Tc-n[1],i=e[2]*(1-Tc)+t[2]*Tc-n[2];return r*r+o*o+i*i}function bh(e,t,n,r,o,i,s,a){if(!isFinite(e)||!isFinite(n)||!Eu(t)||!Eu(r))return;e>n&&([e,t,n,r]=[n,r,e,t]);let u=Wc(e,n),c=o(u),l=i*i;if(DP(t,r,c)<=l)return;let p=Wc(e,u),d=o(p);for(;;){let m=DP(t,c,d),f=DP(r,d,c);if(m<=l&&f<=l)return n-e<a?p:void 0;if(m>f){if(n=u,r=c,u=p,c=d,p=Wc(e,u),d=o(p),p===e||u-p<=s)return VO(e,t,u,c,n,r);if(!Eu(d))return FO(e,t,p,d,n,r,o)}else{if(e=p,t=d,p=u,d=c,u=Wc(n,u),c=o(u),u===n||u-p<=s)return VO(e,t,p,d,n,r);if(!Eu(c))return FO(e,t,u,c,n,r,o)}}}function FO(e,t,n,r,o,i,s){let a=hh(e,t,n,r,s),u=hh(n,r,o,i,s);if(!(a===void 0||u===void 0))return[a,u]}function VO(e,t,n,r,o,i){return xc(r,t)>xc(i,r)?[e,n]:[n,o]}var Vf=class{constructor(t){this.comparator=t;this._data=[]}size(){return this._data.length}queue(t){let n=this._data.length;for(this._data.push(t);n>0;){let r=n-1>>>1;if(this.comparator(this._data[n],this._data[r])<0){let o=this._data[r];this._data[r]=this._data[n],this._data[n]=o,n=r}else break}}dequeue(){let t=this._data[0],n=this._data.pop();if(this._data.length>0&&n!==void 0){this._data[0]=n;let r=0,o=this._data.length-1;for(;;){let i=(r<<1)+1,s=i+1,a=r;if(i<=o&&this.comparator(this._data[i],this._data[a])<0&&(a=i),s<=o&&this.comparator(this._data[s],this._data[a])<0&&(a=s),a!==r){let u=this._data[a];this._data[a]=this._data[r],this._data[r]=u,r=a}else break}}return t}peek(){return this._data[0]}clear(){this._data.length=0}};function yz(e,t){let n=e.start[1]-e.end[1],r=e.end[0]-e.start[0],o=t.start[1]-t.end[1],i=t.end[0]-t.start[0],s=n*e.end[0]+r*e.end[1],a=o*t.end[0]+i*t.end[1],u=n*i-o*r;if(u!==0)return(n*a-o*s)/u}function gz(e,t,n){if(n.xSlope>=t.xSlope)return;if(t.scanlineX===n.scanlineX)return e;let r=t.start[1]>t.end[1]?t.start:t.end,o=n.start[1]>n.end[1]?n.start:n.end,i=r[1];if(o[1]<r[1]){if(i=o[1],OP(i,t)<o[0])return}else if(r[1]<o[1]){let a=OP(i,n);if(r[0]<a)return}else if(r[0]<o[0])return;let s=yz(t,n);if(s!==void 0)return Math.max(Math.min(s,i),e)}function OP(e,t){let n=t.end[0],r=t.start[0],o=t.end[1],i=t.start[1];if(o===e)return n;if(i===e)return r;{let s=(e-o)/(i-o),a=(1-s)*n+s*r;if(n<r){if(a<=n)return n;if(r<=a)return r}else{if(a<=r)return r;if(n<=a)return n}return a}}function AP(e){let t=0,n=0,r=!1,o=0;for(let{scanlineX:i,isClockwise:s}of e)s?o+=1:o-=1,o!==0&&!r?(r=!0,n=i):o===0&&r&&(r=!1,t+=i-n);return t}var Bf=class{constructor(t){this.scanlineY=-1/0;let n=1;this.activeEdges=[],this.events=new Vf((r,o)=>r.y-o.y),this.scanlineY=-1/0,this.polygonLength=t.length-1;for(let r=t.length-1;r>=1;r--){let o=t[r],i=t[r-1],s={id:n++,index:r-1,end:o,start:i,scanlineX:0,xSlope:1/0,isClockwise:i[1]>o[1],skipIntersectionWith:{}};i[1]>o[1]?(this.events.queue({type:\"+\",y:o[1],edge:s}),this.events.queue({type:\"-\",y:i[1],edge:s}),s.xSlope=(i[0]-o[0])/(i[1]-o[1]),s.scanlineX=o[0]):o[1]>i[1]?(this.events.queue({type:\"+\",y:i[1],edge:s}),this.events.queue({type:\"-\",y:o[1],edge:s}),s.xSlope=(o[0]-i[0])/(o[1]-i[1]),s.scanlineX=i[0]):this.events.queue({type:\"h\",y:i[1],edge:s})}}nextScanline(){var i;let t,n=this.events.peek();if(!n)return;if(n.y<=this.scanlineY)throw new Error(\"Programming error: expected next event to begin a new scanline\");this.scanlineY=n.y,this.updateActiveEdgeScanlineIntersections();let r=AP(this.activeEdges),o=[];for(;t=this.events.dequeue();)if(t.type===\"x\"?this.swapActiveEdges(t):t.type===\"+\"?this.insertActiveEdge(t):t.type===\"-\"&&this.removeActiveEdge(t),o.push(t),((i=this.events.peek())==null?void 0:i.y)!==this.scanlineY)return{y:this.scanlineY,activeEdges:this.activeEdges,lengthBeforeProcessingEvents:r,events:o}}updateActiveEdgeScanlineIntersections(){let t=-1/0;for(let n of this.activeEdges){let r=OP(this.scanlineY,n);r<t?r=t:t=r,n.scanlineX=r}}insertActiveEdge(t){let n=this.activeEdges,r=t.edge,o=t.y,{xSlope:i,scanlineX:s}=r,a;for(a=0;a<n.length;a++){let u=n[a];if(s<u.scanlineX||s===u.scanlineX&&i<=u.xSlope)break}n.splice(a,0,r),this.checkIntersection(o,n[a-1],r),this.checkIntersection(o,r,n[a+1])}checkIntersection(t,n,r){if(!n||!r||n.index===(r.index+1)%this.polygonLength||r.index===(n.index+1)%this.polygonLength)return;if(n.id<r.id){if(n.skipIntersectionWith[r.id])return}else if(r.skipIntersectionWith[n.id])return;let o=gz(t,n,r);if(o===void 0)return;n.id<r.id?n.skipIntersectionWith[r.id]=!0:r.skipIntersectionWith[n.id]=!0;let i={type:\"x\",y:o,edge1:n,edge2:r};this.events.queue(i)}removeActiveEdge(t){let n=this.activeEdges,r=t.edge,o=t.y,i=n.indexOf(r);n.splice(i,1),this.checkIntersection(o,n[i-1],n[i])}swapActiveEdges(t){let n=this.activeEdges,r=t.edge1,o=t.edge2,i=t.y,s=n.indexOf(r),a=s+1;s===-1||n[a]!==o?r.id<o.id?delete r.skipIntersectionWith[o.id]:delete o.skipIntersectionWith[r.id]:(n[s]=o,n[a]=r,this.checkIntersection(i,n[s-1],o),this.checkIntersection(i,r,n[a+1]))}static debugEvent(t){let n=`y=${t.y} `;return n+=t.type===\"x\"?`[x ${t.edge1.index}/${t.edge2.index}]`:`[${t.type} ${t.edge.index}] (${t.edge.end})-(${t.edge.start})`,n}debugState(){return`y=${this.scanlineY}\n${this.activeEdges.map(t=>`[${t.index}] ${t.scanlineX}`)}`}};function hz(e){let t=e.slice(0,2),n=e.slice(-2);return t[0]!==n[0]||t[1]!==n[1]?[...e,...t]:e}function QQ(e,t){if(!e)return!1;let n=hz(e),[r,o]=t,i=0;for(let s=n.length-1;s>=3;s-=2){let a=n[s-3],u=n[s-2],c=n[s-1],l=n[s];u>o!=l>o&&r<(c-a)*(o-u)/(l-u)+a&&(u>l?i+=1:u<l&&(i-=1))}return i!==0}function zO(e){if(e.length<4||e[0][0]!==e[e.length-1][0]||e[0][1]!==e[e.length-1][1])return 0;let t=new Bf(e),n,r=0,o;for(;o=t.nextScanline();){let i=o.lengthBeforeProcessingEvents;n&&(r+=.5*(o.y-n.y)*(i+n.length)),n={y:o.y,length:AP(o.activeEdges)}}return r}function kO(e){if(!e.length)return[];if(e[0][0]!==e[e.length-1][0]||e[0][1]!==e[e.length-1][1])throw new Error(\"Programming error: expected last point to be a duplicate of the first point.\");for(let d=0;d<e.length-1;d++)if(e[d][0]===e[d+1][0]&&e[d][1]===e[d+1][1])throw new Error(`Programming error: unexpected duplicate point at ${d+1}`);let t=new Bf(e),n=e.slice(0,-1).map(()=>0),r;for(;r=t.nextScanline();)for(let d of r.events){let m={};if(d.type===\"h\"){let f=d.edge;m[f.index]={xMin:Math.min(f.end[0],f.start[0]),xMax:Math.max(f.end[0],f.start[0]),dx:f.end[0]-f.start[0]}}else if(d.type===\"x\"){let f=d.edge1,g=d.edge2,y=UO([f.start,f.end],[g.start,g.end]),h=y>0?-1:y<0?1:0;n[f.index]+=h,n[g.index]-=h}for(let f of r.activeEdges){let g=f.end[1]-f.start[1];for(let y in m){let{xMin:h,xMax:b,dx:T}=m[y];if(h<f.scanlineX&&f.scanlineX<b){let I=T*g,E=I>0?-1:I<0?1:0;n[y]+=E,n[f.index]-=E}}}}let o=e.slice(0,-1).map(()=>0),i=e[0][1],s=0;for(let d=1;d<e.length;d++)e[d][1]<i&&(i=e[d][1],s=d);let a=e.length-1,u=s>0?s-1:a-1,c=(s+1)%a,p=UO([e[u],e[s]],[e[s],e[c]])>0?1:0;o[s]=p>0?-1:1;for(let d=0;d<a-1;d++){let m=(s+d)%a;p+=n[m],o[(m+1)%a]=p>0?-1:1}return o}function UO(e,t){let n=e[1][0]-e[0][0],r=e[1][1]-e[0][1],o=t[1][0]-t[0][0],i=t[1][1]-t[0][1];return n*i-r*o}var bz=Ed,xh=ti,xz=3.154019550531224,HO=Math.pow(2,-13),jc=HO*HO,$O=jc*jc,wP=jc,FP=32,Fa=[],Jc=[];function Tz(e,t){for(let n=FP;n>0;n--){let r=xz/FP*n,o=Math.sinh(r),i=Math.cosh(Math.PI/2*o),s=1/(Math.exp(Math.PI/2*o)*i),a=Math.cosh(r)/(i*i);e.push(s),t.push(a)}}Tz(Fa,Jc);var XO=0;for(let e=0;e<Jc.length;e++)XO+=Jc[e];var Th=1/(1+2*XO);function Ei(e,t,n){return .5*(t*(2-n)+e*n)}function Iz(e,t,n){let r=.5*(t+n),o=bz(t,e(t),r,e(r),n,e(n),e);return o?.5*(o[0]+o[1]):r}function Gf(e,t,n,r,o){return{x1:e,x2:t,value:n,error:r,minerror:o}}function YO(e,t,n){let r=Math.abs(e(Ei(t,n,jc))),o=Math.abs(e(Ei(t,n,2*jc))),i=Math.abs(e(Ei(t,n,4*jc)));return r<jc||o<jc?!1:r>1.95*o&&o>1.95*i}function LP(e,t,n){let r=Ei(n,t,Fa[0]),o=Ei(t,n,Fa[0]),i=e(r),s=e(o),a=Ei(t,n,1),u=e(a),c,l;if(isFinite(u)&&!isFinite(i)){if(c=xh(r,i,a,u,e),Math.abs((c-t)/(n-t))>wP)return Gf(t,n,NaN,NaN,NaN);t=c,i=e(t)}if(isFinite(u)&&!isFinite(s)){if(l=xh(a,u,o,s,e),Math.abs((l-n)/(n-t))>wP)return Gf(t,n,NaN,NaN,NaN);n=l,s=e(n)}if(isFinite(i)&&isFinite(s)&&!isFinite(u)){if(c=xh(r,i,a,u,e),l=xh(a,u,o,s,e),Math.abs((l-c)/(n-t))>wP)return Gf(t,n,NaN,NaN,NaN);u=.5*(c+l)}if(YO(e,t,n)||YO(e,n,t))return Gf(t,n,NaN,NaN,NaN);let p=u,d=0,m=0,f=0,g=0,y=0,h=0;for(let L=0;L<FP;L+=4)y=e(Ei(t,n,Fa[L])),h=e(Ei(n,t,Fa[L])),g=Math.max(g,Math.abs(y),Math.abs(h)),d+=Jc[L]*(y+h),y=e(Ei(t,n,Fa[L+1])),h=e(Ei(n,t,Fa[L+1])),g=Math.max(g,Math.abs(y),Math.abs(h)),f+=Jc[L+1]*(y+h),y=e(Ei(t,n,Fa[L+2])),h=e(Ei(n,t,Fa[L+2])),g=Math.max(g,Math.abs(y),Math.abs(h)),m+=Jc[L+2]*(y+h),y=e(Ei(t,n,Fa[L+3])),h=e(Ei(n,t,Fa[L+3])),g=Math.max(g,Math.abs(y),Math.abs(h)),f+=Jc[L+3]*(y+h);let b=p+d,T=b+m,I=T+f,E=Math.abs(m-b),S=Math.abs(f-T),C=Th*(n-t)*I,v=Th*Math.abs(n-t)*g*Jc[0],_;return E===0?_=Th*Math.abs(n-t)*S:_=Th*Math.abs(n-t)*S*(S/E)*(S/E),_=Math.max(_,v),Gf(t,n,C,_,v)}function ZO(e){let t=-1/0,n=-1/0,r=-1,o=0;for(let i=0;i<e.length;i++){let s=e[i];o+=s.value,s.error>t&&(t=s.error,r=i),s.minerror>n&&(n=s.minerror)}return{maxerror:t,maxminerror:n,maxindex:r,totalvalue:o}}function qf(e,t,n,r=32){if(isNaN(t)||isNaN(n))return NaN;let o=1;if(t>n){let a=t;t=n,n=a,o=-1}if(t===1/0&&n===1/0)return NaN;if(t===-1/0&&n===-1/0)return NaN;if(t===-1/0&&n===1/0)return o*qf(a=>e(a/((1+a)*(1-a)))*(1+a*a)/((1+a)*(1+a)*(1-a)*(1-a)),-1,1,r);if(t===-1/0)return o*qf(a=>-e(n-a/(1-a))/((1-a)*(1-a)),1,0,r);if(n===1/0)return o*qf(a=>e(t+a/(1-a))/((1-a)*(1-a)),0,1,r);let i=[LP(e,t,n)],s=ZO(i);for(let a=1;a<r&&!(Math.abs(s.maxerror/s.totalvalue)<=32*$O||s.maxerror<=32*$O||s.maxerror<=32*s.maxminerror||!isFinite(s.maxerror)||!isFinite(s.maxminerror));a++){let u=i[i.length-1];i[i.length-1]=i[s.maxindex],i[s.maxindex]=u;let c=i.pop(),l=Iz(e,Ei(c.x2,c.x1,.125),Ei(c.x1,c.x2,.125));i.push(LP(e,c.x1,l)),i.push(LP(e,l,c.x2)),s=ZO(i)}return!isFinite(s.maxerror)||!isFinite(s.maxminerror)?NaN:Math.abs(s.totalvalue)<=10*s.maxminerror?0:o*s.totalvalue}function Ih(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function VP(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function kf(){}var Uf=.7,Ch=1/Uf,vd=\"\\\\s*([+-]?\\\\d+)\\\\s*\",zf=\"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",vu=\"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",Sz=/^#([0-9a-f]{3,8})$/,Cz=new RegExp(`^rgb\\\\(${vd},${vd},${vd}\\\\)$`),Ez=new RegExp(`^rgb\\\\(${vu},${vu},${vu}\\\\)$`),vz=new RegExp(`^rgba\\\\(${vd},${vd},${vd},${zf}\\\\)$`),Mz=new RegExp(`^rgba\\\\(${vu},${vu},${vu},${zf}\\\\)$`),_z=new RegExp(`^hsl\\\\(${zf},${vu},${vu}\\\\)$`),Rz=new RegExp(`^hsla\\\\(${zf},${vu},${vu},${zf}\\\\)$`),WO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ih(kf,Hf,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:jO,formatHex:jO,formatHex8:Dz,formatHsl:Nz,formatRgb:JO,toString:JO});function jO(){return this.rgb().formatHex()}function Dz(){return this.rgb().formatHex8()}function Nz(){return r1(this).formatHsl()}function JO(){return this.rgb().formatRgb()}function Hf(e){var t,n;return e=(e+\"\").trim().toLowerCase(),(t=Sz.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?QO(t):n===3?new ds(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ph(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ph(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Cz.exec(e))?new ds(t[1],t[2],t[3],1):(t=Ez.exec(e))?new ds(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=vz.exec(e))?Ph(t[1],t[2],t[3],t[4]):(t=Mz.exec(e))?Ph(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=_z.exec(e))?t1(t[1],t[2]/100,t[3]/100,1):(t=Rz.exec(e))?t1(t[1],t[2]/100,t[3]/100,t[4]):WO.hasOwnProperty(e)?QO(WO[e]):e===\"transparent\"?new ds(NaN,NaN,NaN,0):null}function QO(e){return new ds(e>>16&255,e>>8&255,e&255,1)}function Ph(e,t,n,r){return r<=0&&(e=t=n=NaN),new ds(e,t,n,r)}function Oz(e){return e instanceof kf||(e=Hf(e)),e?(e=e.rgb(),new ds(e.r,e.g,e.b,e.opacity)):new ds}function ip(e,t,n,r){return arguments.length===1?Oz(e):new ds(e,t,n,r==null?1:r)}function ds(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ih(ds,ip,VP(kf,{brighter(e){return e=e==null?Ch:Math.pow(Ch,e),new ds(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Uf:Math.pow(Uf,e),new ds(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ds(op(this.r),op(this.g),op(this.b),Eh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:KO,formatHex:KO,formatHex8:Az,formatRgb:e1,toString:e1}));function KO(){return`#${rp(this.r)}${rp(this.g)}${rp(this.b)}`}function Az(){return`#${rp(this.r)}${rp(this.g)}${rp(this.b)}${rp((isNaN(this.opacity)?1:this.opacity)*255)}`}function e1(){let e=Eh(this.opacity);return`${e===1?\"rgb(\":\"rgba(\"}${op(this.r)}, ${op(this.g)}, ${op(this.b)}${e===1?\")\":`, ${e})`}`}function Eh(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function op(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function rp(e){return e=op(e),(e<16?\"0\":\"\")+e.toString(16)}function t1(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Va(e,t,n,r)}function r1(e){if(e instanceof Va)return new Va(e.h,e.s,e.l,e.opacity);if(e instanceof kf||(e=Hf(e)),!e)return new Va;if(e instanceof Va)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),s=NaN,a=i-o,u=(i+o)/2;return a?(t===i?s=(n-r)/a+(n<r)*6:n===i?s=(r-t)/a+2:s=(t-n)/a+4,a/=u<.5?i+o:2-i-o,s*=60):a=u>0&&u<1?0:s,new Va(s,a,u,e.opacity)}function vh(e,t,n,r){return arguments.length===1?r1(e):new Va(e,t,n,r==null?1:r)}function Va(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ih(Va,vh,VP(kf,{brighter(e){return e=e==null?Ch:Math.pow(Ch,e),new Va(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Uf:Math.pow(Uf,e),new Va(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new ds(BP(e>=240?e-240:e+120,o,r),BP(e,o,r),BP(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new Va(n1(this.h),Sh(this.s),Sh(this.l),Eh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=Eh(this.opacity);return`${e===1?\"hsl(\":\"hsla(\"}${n1(this.h)}, ${Sh(this.s)*100}%, ${Sh(this.l)*100}%${e===1?\")\":`, ${e})`}`}}));function n1(e){return e=(e||0)%360,e<0?e+360:e}function Sh(e){return Math.max(0,Math.min(1,e||0))}function BP(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function sp(e,t){if(!isFinite(e)||!isFinite(t))return NaN;if(e=Math.round(e),t=Math.round(t),e<0&&(e=-e),t<0&&(t=-t),t>e){let r=t;t=e,e=r}if(t===0)return e;let n=e%t;for(;n>0;)e=t,t=n,n=e%t;return t}function ap(e,t){if(isNaN(e)&&t===0)return NaN;if(e>=0||t===Math.floor(t))return Math.pow(e,t);let n=bc(t,100);return Xi(n.n/n.d,t,2)&&n.d%2===1?(n.n%2===0?1:-1)*Math.pow(-e,t):NaN}var ce={};Tu(ce,{Action:()=>St,AngleMarker:()=>Ne,Any:()=>Nn,Arc:()=>ue,Bool:()=>Oe,BroadcastableArg:()=>Oh,ChiSquareGoodnessOfFit:()=>kn,ChiSquareIndependence:()=>Hn,Circle:()=>Te,Complex:()=>N,ConfidenceInterval:()=>Nt,DirectedAngleMarker:()=>Ce,Distribution:()=>wn,EmptyList:()=>He,ErrorType:()=>lp,InferenceObjectTypes:()=>Dh,Line:()=>Ee,ListArgType:()=>Nh,ListOfAngleMarker:()=>Ur,ListOfAny:()=>ar,ListOfArc:()=>Co,ListOfBool:()=>vi,ListOfChiSquareGoodnessOfFit:()=>Vu,ListOfChiSquareIndependence:()=>Bu,ListOfCircle:()=>_i,ListOfColor:()=>ko,ListOfComplex:()=>Ye,ListOfConfidenceInterval:()=>Ru,ListOfDirectedAngleMarker:()=>zr,ListOfDistribution:()=>Mi,ListOfLine:()=>Ri,ListOfMapInterval2DComplex:()=>za,ListOfMapInterval2DPoint:()=>Ga,ListOfMapInterval2DPoint3D:()=>qa,ListOfMapIntervalComplex:()=>Ua,ListOfMapIntervalPoint:()=>Ba,ListOfMapIntervalPoint3D:()=>ua,ListOfNumber:()=>Z,ListOfNumberNC:()=>ca,ListOfOneProportionZInference:()=>wu,ListOfOneSampleTInference:()=>Du,ListOfOneSampleZInference:()=>Ou,ListOfPoint:()=>Yt,ListOfPoint3D:()=>lo,ListOfPolygon:()=>wr,ListOfRay:()=>Eo,ListOfRegressionTInference:()=>Fu,ListOfRestriction:()=>Mu,ListOfSegment:()=>Er,ListOfSegment3D:()=>Wi,ListOfSphere3D:()=>aa,ListOfTSignificanceTest:()=>qu,ListOfTone:()=>_u,ListOfTransformation:()=>sa,ListOfTriangle3D:()=>ni,ListOfTwoProportionZInference:()=>Lu,ListOfTwoSampleTInference:()=>Nu,ListOfTwoSampleZInference:()=>Au,ListOfVector:()=>Di,ListOfVector3D:()=>ji,ListOfZSignificanceTest:()=>Gu,MapInterval2DComplex:()=>Us,MapInterval2DPoint:()=>Gs,MapInterval2DPoint3D:()=>qs,MapIntervalComplex:()=>Qi,MapIntervalPoint:()=>Ji,MapIntervalPoint3D:()=>vo,NoCoerceComplexToReal:()=>Xf,Number:()=>x,NumberNC:()=>Se,OneProportionZInference:()=>cn,OneSampleTInference:()=>Jt,OneSampleZInference:()=>on,Point:()=>D,Point3D:()=>G,Polygon:()=>_e,RGBColor:()=>fn,Ray:()=>Ae,RegressionTInference:()=>sn,Restriction:()=>un,SeedType:()=>Bt,Segment:()=>he,Segment3D:()=>zt,SlotNameMap:()=>$f,Sphere3D:()=>kr,TSignificanceTest:()=>gn,Tone:()=>pr,Transformation:()=>we,Triangle3D:()=>dr,TupleTypeMap:()=>Pc,TwoProportionZInference:()=>Qt,TwoSampleTInference:()=>Ut,TwoSampleZInference:()=>Zt,UNKNOWN_RETURN_TYPE:()=>kz,Union:()=>Cr,Vector:()=>Pe,Vector3D:()=>ke,ZSignificanceTest:()=>yn,allListTypes:()=>Ki,allTupleTypes:()=>UP,allValueTypes:()=>Vz,angleTypes:()=>HP,assertTypeIsOneOf:()=>zu,broadcastArg:()=>Hr,broadcastable:()=>U,commonCoerceableType:()=>Qc,commonCoerceableTypeWithBroadcast:()=>Ic,elementType:()=>rt,getAllowedTypesForArg:()=>jf,hasListType:()=>er,hasMapType:()=>$P,isActionValue:()=>Sc,isEligibleForBroadcast:()=>Ah,isGeometryType:()=>Zf,isInferenceObjectType:()=>Ni,isList:()=>W,isMapOrListOfMap:()=>ka,isMultipliableElementType:()=>zP,isOneOf:()=>Uu,isSubType:()=>Bs,isSubTypeOrCoercible:()=>lr,isSubTypeOrNonComplexCoercible:()=>up,isSummableElementType:()=>_d,isTupleType:()=>GP,isTypeOrListOfType:()=>ae,isValidOnLogScales:()=>pp,listArg:()=>Wf,listType:()=>Zn,mapType:()=>YP,multipliableElementTypes:()=>_h,namedSlot:()=>zz,nanOrZeroOfTupleType:()=>qP,prettyPrint:()=>se,repr:()=>tt,scalarType:()=>tr,signature:()=>Ot,slotIndex:()=>Yf,straightTypes:()=>Rh,summableElementTypes:()=>Md,typeSatisfiesArgType:()=>wh,typeSatisfiesArgTypeUncoerced:()=>dp,valueTypes:()=>o1,variadicMinCount:()=>po,vectorTypes:()=>kP});function Mh(e,t){return t?Zn(e):e}function Bs(e,t){return e===He&&W(t)||t===ar&&W(e)||t===Nn&&!W(e)?!0:e===t}function lr(e,t){if(e===void 0)return!1;if(Bs(e,t))return!0;W(e)&&W(t)&&t!==He&&(e=rt(e),t=rt(t));let n=t;switch(e){case Ne:case Ce:case un:case x:case N:return n===x||n===N;default:return!1}}function up(e,t){return t===x&&e===N||t===Z&&e===Ye?!1:lr(e,t)}function Qc(e,t){if(Bs(e,t))return t;if(Bs(t,e))return e;let n=W(e);if(n!=W(t))return;let r=Mh(N,n);if(e===r&&lr(t,r))return r;if(t===r&&lr(e,r))return r;let o=Mh(x,n);if(lr(e,o)&&lr(t,o)){let i=Mh(Ne,n),s=Mh(Ce,n);return e===i&&t===s||e===s&&t===i?void 0:o}}function Ic(e,t){return W(e)&&er(t)?Qc(e,Zn(t)):er(e)&&W(t)?Qc(Zn(e),t):Qc(e,t)}function P(e,t){return{key:e,vars:t}}var Nn=0,x=1,Oe=2,D=3,wn=4,St=5,ar=6,Z=7,vi=8,Yt=9,Mi=10,He=11,lp=12,Bt=13,fn=14,ko=15,_e=16,wr=17,he=18,Er=19,Te=20,_i=21,ue=22,Co=23,Ee=24,Ri=25,Ae=26,Eo=27,Ne=28,Ur=29,Ce=30,zr=31,we=32,sa=33,Pe=34,Di=35,un=36,Mu=37,N=38,Ye=39,pr=50,_u=51,Nt=60,Ru=61,Jt=62,Du=63,Ut=64,Nu=65,on=66,Ou=67,Zt=68,Au=69,cn=70,wu=71,Qt=72,Lu=73,sn=76,Fu=77,kn=78,Vu=79,Hn=80,Bu=81,yn=82,Gu=83,gn=84,qu=85,G=100,lo=101,zt=102,Wi=103,dr=104,ni=105,kr=106,aa=107,ke=108,ji=109,Ji=200,vo=201,Gs=202,qs=203,Ba=204,ua=205,Ga=206,qa=207,Qi=208,Us=209,Ua=210,za=211,o1={Any:Nn,Number:x,Bool:Oe,Complex:N,ListOfComplex:Ye,Point:D,Point3D:G,Distribution:wn,Action:St,ListOfAny:ar,ListOfNumber:Z,ListOfBool:vi,ListOfPoint:Yt,ListOfPoint3D:lo,ListOfDistribution:Mi,EmptyList:He,ErrorType:lp,SeedType:Bt,RGBColor:fn,ListOfColor:ko,Polygon:_e,ListOfPolygon:wr,Segment:he,ListOfSegment:Er,Circle:Te,ListOfCircle:_i,Arc:ue,ListOfArc:Co,Line:Ee,ListOfLine:Ri,Ray:Ae,ListOfRay:Eo,Vector:Pe,ListOfVector:Di,Restriction:un,ListOfRestriction:Mu,AngleMarker:Ne,ListOfAngleMarker:Ur,DirectedAngleMarker:Ce,ListOfDirectedAngleMarker:zr,Transformation:we,ListOfTransformation:sa,Segment3D:zt,ListOfSegment3D:Wi,Triangle3D:dr,ListOfTriangle3D:ni,Sphere3D:kr,ListOfSphere3D:aa,Vector3D:ke,ListOfVector3D:ji,Tone:pr,ListOfTone:_u,ConfidenceInterval:Nt,ListOfConfidenceInterval:Ru,OneSampleTInference:Jt,ListOfOneSampleTInference:Du,TwoSampleTInference:Ut,ListOfTwoSampleTInference:Nu,RegressionTInference:sn,ListOfRegressionTInference:Fu,OneSampleZInference:on,ListOfOneSampleZInference:Ou,TwoSampleZInference:Zt,ListOfTwoSampleZInference:Au,OneProportionZInference:cn,ListOfOneProportionZInference:wu,TwoProportionZInference:Qt,ListOfTwoProportionZInference:Lu,ChiSquareGoodnessOfFit:kn,ListOfChiSquareGoodnessOfFit:Vu,ChiSquareIndependence:Hn,ListOfChiSquareIndependence:Bu,ZSignificanceTest:yn,ListOfZSignificanceTest:Gu,TSignificanceTest:gn,ListOfTSignificanceTest:qu,MapIntervalPoint:Ji,MapIntervalComplex:Qi,MapIntervalPoint3D:vo,MapInterval2DPoint:Gs,MapInterval2DComplex:Us,MapInterval2DPoint3D:qs,ListOfMapIntervalPoint:Ba,ListOfMapIntervalComplex:Ua,ListOfMapIntervalPoint3D:ua,ListOfMapInterval2DPoint:Ga,ListOfMapInterval2DComplex:za,ListOfMapInterval2DPoint3D:qa},i1={[D]:[[\"x\",x],[\"y\",x]],[G]:[[\"x\",x],[\"y\",x],[\"z\",x]],[N]:[[\"real\",x],[\"imag\",x]],[Nt]:[[\"min\",x],[\"max\",x],[\"standardError\",x],[\"dof\",x]],[Jt]:[[\"count\",x],[\"mean\",x],[\"stdev\",x],[\"dof\",x]],[Ut]:[[\"count1\",x],[\"mean1\",x],[\"stdev1\",x],[\"count2\",x],[\"mean2\",x],[\"stdev2\",x],[\"dof\",x]],[sn]:[[\"pointEstimate\",x],[\"standardError\",x],[\"dof\",x]],[on]:[[\"count\",x],[\"mean\",x],[\"stdevp\",x]],[Zt]:[[\"count1\",x],[\"mean1\",x],[\"stdevp1\",x],[\"count2\",x],[\"mean2\",x],[\"stdevp2\",x]],[cn]:[[\"successes\",x],[\"count\",x]],[Qt]:[[\"successes1\",x],[\"count1\",x],[\"successes2\",x],[\"count2\",x]],[yn]:[[\"p\",x],[\"score\",x],[\"hypothesis\",x],[\"pleft\",x],[\"pright\",x]],[gn]:[[\"p\",x],[\"score\",x],[\"hypothesis\",x],[\"pleft\",x],[\"pright\",x],[\"dof\",x]],[kn]:[[\"p\",x],[\"score\",x],[\"dof\",x],[\"observed\",Z],[\"expected\",Z],[\"contributions\",Z],[\"total\",x]],[Hn]:[[\"p\",x],[\"score\",x],[\"dof\",x],[\"observed\",Z],[\"expected\",Z],[\"contributions\",Z],[\"rows\",x],[\"columns\",x],[\"rowTotals\",Z],[\"columnTotals\",Z],[\"total\",x]]};function Lz(){let e={};for(let[t,n]of Object.entries(i1))e[t]=n.map(r=>r[1]);return e}function Fz(){let e={};for(let[t,n]of Object.entries(i1))e[t]=n.map(r=>r[0]);return e}var Pc=Lz(),$f=Fz();function Yf(e,t){let n=$f[e];if(n===void 0)throw new Error(`Programming error: ${tt(e)} is not a tuple type.`);let r=n.indexOf(t);if(r===-1)throw new Error(`Programming error: ${t} is not a slot of ${tt(e)}`);return r}function GP(e){return e in $f}function qP(e,t){let n=Pc[e];return{valueType:e,value:n.map(r=>{if(r!==x)throw new Error(\"Unable to handle tuple type unless all slots are Number\");return t})}}var Cr=class e{constructor(t,{coerceComplexToReal:n}){this.types=t;this.coerceComplexToReal=n}static of(t,n={coerceComplexToReal:!0}){return new e(t,n)}getTypes(){return this.types}},Vz=Object.values(o1),Bz=Object.keys(Pc).map(parseFloat),UP=Cr.of(Bz);function tt(e){if(W(e))return e===He?\"EmptyList\":`ListOf${tt(rt(e))}`;switch(e){case Nn:return\"Any\";case x:return\"Number\";case Oe:return\"Bool\";case N:return\"Complex\";case D:return\"Point\";case G:return\"Point3D\";case wn:return\"Distribution\";case Nt:return\"ConfidenceInterval\";case Jt:return\"OneSampleTInference\";case Ut:return\"TwoSampleTInference\";case sn:return\"RegressionTInference\";case on:return\"OneSampleZInference\";case Zt:return\"TwoSampleZInference\";case cn:return\"OneProportionZInference\";case Qt:return\"TwoProportionZInference\";case yn:return\"ZSignificanceTest\";case gn:return\"TSignificanceTest\";case kn:return\"ChiSquareGoodnessOfFit\";case Hn:return\"ChiSquareIndependence\";case St:return\"Action\";case lp:return\"ErrorType\";case Bt:return\"SeedType\";case fn:return\"RGBColor\";case _e:return\"Polygon\";case he:return\"Segment\";case Te:return\"Circle\";case ue:return\"Arc\";case Ee:return\"Line\";case Ae:return\"Ray\";case Pe:return\"Vector\";case un:return\"Restriction\";case Ne:return\"Angle\";case Ce:return\"DirectedAngle\";case we:return\"Transformation\";case zt:return\"Segment3D\";case ke:return\"Vector3D\";case dr:return\"Triangle3D\";case kr:return\"Sphere3D\";case pr:return\"Tone\";case Ji:return\"MapIntervalPoint\";case Qi:return\"MapIntervalComplex\";case vo:return\"MapIntervalPoint3D\";case Gs:return\"MapInterval2ToPoint\";case Us:return\"MapInterval2ToComplex\";case qs:return\"MapInterval2DPoint3D\";default:let t=e;throw new Error(`Invalid type: ${t}`)}}function se(e,t){var r;let n=(r=t==null?void 0:t.specifyPointDimensions)!=null?r:!1;switch(e){case Nn:return P(\"shared-calculator-label-value-type-any\");case x:return P(\"shared-calculator-label-value-type-number\");case Oe:return P(\"shared-calculator-label-value-type-bool\");case N:return P(\"shared-calculator-label-value-type-complex\");case D:return n?P(\"shared-calculator-label-value-type-point2d\"):P(\"shared-calculator-label-value-type-point\");case G:return P(\"shared-calculator-label-value-type-point3d\");case wn:return P(\"shared-calculator-label-value-type-distribution\");case St:return P(\"shared-calculator-label-value-type-action\");case ar:return P(\"shared-calculator-label-value-type-list-of-any\");case Z:return P(\"shared-calculator-label-value-type-list-of-numbers\");case vi:return P(\"shared-calculator-label-value-type-list-of-bool\");case Ye:return P(\"shared-calculator-label-value-type-list-of-complex\");case Yt:return n?P(\"shared-calculator-label-value-type-list-of-2d-points\"):P(\"shared-calculator-label-value-type-list-of-points\");case lo:return P(\"shared-calculator-label-value-type-list-of-3d-points\");case Mi:return P(\"shared-calculator-label-value-type-list-of-distributions\");case He:return P(\"shared-calculator-label-value-type-empty-list\");case lp:return P(\"shared-calculator-label-value-type-error\");case Bt:return P(\"shared-calculator-label-value-type-seed\");case fn:return P(\"shared-calculator-label-value-type-color\");case ko:return P(\"shared-calculator-label-value-type-list-of-colors\");case _e:return P(\"shared-calculator-label-value-type-polygon\");case wr:return P(\"shared-calculator-label-value-type-list-of-polygons\");case he:return P(\"shared-calculator-label-value-type-segment\");case Er:return P(\"shared-calculator-label-value-type-list-of-segments\");case Te:return P(\"shared-calculator-label-value-type-circle\");case _i:return P(\"shared-calculator-label-value-type-list-of-circles\");case ue:return P(\"shared-calculator-label-value-type-arc\");case Co:return P(\"shared-calculator-label-value-type-list-of-arcs\");case Ee:return P(\"shared-calculator-label-value-type-line\");case Ri:return P(\"shared-calculator-label-value-type-list-of-lines\");case Ae:return P(\"shared-calculator-label-value-type-ray\");case Eo:return P(\"shared-calculator-label-value-type-list-of-rays\");case Pe:return P(\"shared-calculator-label-value-type-vector\");case Di:return P(\"shared-calculator-label-value-type-list-of-vectors\");case un:return P(\"shared-calculator-label-value-type-restriction\");case Mu:return P(\"shared-calculator-label-value-type-list-of-restrictions\");case Ne:return P(\"shared-calculator-label-value-type-angle\");case Ur:return P(\"shared-calculator-label-value-type-list-of-angles\");case Ce:return P(\"shared-calculator-label-value-type-directed-angle\");case zr:return P(\"shared-calculator-label-value-type-list-of-directed-angles\");case we:return P(\"shared-calculator-label-value-type-transformation\");case sa:return P(\"shared-calculator-label-value-type-list-of-transformations\");case zt:return P(\"shared-calculator-label-value-type-segment3d\");case Wi:return P(\"shared-calculator-label-value-type-list-of-segment3d\");case ke:return P(\"shared-calculator-label-value-type-vector3d\");case ji:return P(\"shared-calculator-label-value-type-list-of-vector3d\");case dr:return P(\"shared-calculator-label-value-type-triangle3d\");case ni:return P(\"shared-calculator-label-value-type-list-of-triangle3d\");case kr:return P(\"shared-calculator-label-value-type-sphere3d\");case aa:return P(\"shared-calculator-label-value-type-list-of-sphere3d\");case pr:return P(\"shared-calculator-label-value-type-tone\");case _u:return P(\"shared-calculator-label-value-type-list-of-tone\");case Nt:return P(\"shared-calculator-label-value-type-confidence-interval\");case Ru:return P(\"shared-calculator-label-value-type-list-of-confidence-interval\");case yn:return P(\"shared-calculator-label-value-type-z-significance-test\");case gn:return P(\"shared-calculator-label-value-type-t-significance-test\");case Gu:return P(\"shared-calculator-label-value-type-list-of-z-significance-test\");case qu:return P(\"shared-calculator-label-value-type-list-of-t-significance-test\");case Jt:return P(\"shared-calculator-label-value-type-one-sample-t-inference\");case Ut:return P(\"shared-calculator-label-value-type-two-sample-t-inference\");case sn:return P(\"shared-calculator-label-value-type-regression-t-inference\");case on:return P(\"shared-calculator-label-value-type-one-sample-z-inference\");case Zt:return P(\"shared-calculator-label-value-type-two-sample-z-inference\");case cn:return P(\"shared-calculator-label-value-type-one-proportion-z-inference\");case Qt:return P(\"shared-calculator-label-value-type-two-proportion-z-inference\");case Du:return P(\"shared-calculator-label-value-type-list-of-one-sample-t-inference\");case Nu:return P(\"shared-calculator-label-value-type-list-of-two-sample-t-inference\");case Fu:return P(\"shared-calculator-label-value-type-list-of-regression-t-inference\");case Ou:return P(\"shared-calculator-label-value-type-list-of-one-sample-z-inference\");case Au:return P(\"shared-calculator-label-value-type-list-of-two-sample-z-inference\");case wu:return P(\"shared-calculator-label-value-type-list-of-one-proportion-z-inference\");case Lu:return P(\"shared-calculator-label-value-type-list-of-two-proportion-z-inference\");case Hn:return P(\"shared-calculator-label-value-type-chi-square-test-of-independence\");case kn:return P(\"shared-calculator-label-value-type-chi-square-goodness-of-fit\");case Bu:return P(\"shared-calculator-label-value-type-list-of-chi-square-test-of-independence\");case Vu:return P(\"shared-calculator-label-value-type-list-of-chi-square-goodness-of-fit\");case Ji:case Gs:return P(\"shared-calculator-label-value-type-lambda-point\");case Qi:case Us:return P(\"shared-calculator-label-value-type-lambda-complex\");case vo:case qs:return P(\"shared-calculator-label-value-type-lambda-point3d\");case Ba:case Ga:return P(\"shared-calculator-label-value-type-list-of-lambda-point\");case Ua:case za:return P(\"shared-calculator-label-value-type-list-of-lambda-complex\");case ua:case qa:return P(\"shared-calculator-label-value-type-list-of-lambda-point3d\");default:throw new Error(`Invalid type: ${e}`)}}var Gz=[ar,Z,vi,Ye,Mu,Yt,lo,Mi,He,ko,wr,Er,_i,Co,Ri,Eo,Di,Ur,zr,sa,Wi,ji,ni,aa,_u,Ru,Du,Nu,Fu,Ou,Au,wu,Lu,Gu,qu,Vu,Bu,Ba,Ua,ua,Ga,za,qa],Ki=Cr.of(Gz,{coerceComplexToReal:!1}),s1={[ar]:Nn,[He]:x,[Z]:x,[vi]:Oe,[Ye]:N,[Mu]:un,[Yt]:D,[lo]:G,[Mi]:wn,[ko]:fn,[wr]:_e,[Er]:he,[_i]:Te,[Co]:ue,[Ri]:Ee,[Eo]:Ae,[Di]:Pe,[Ur]:Ne,[zr]:Ce,[sa]:we,[Wi]:zt,[ji]:ke,[ni]:dr,[aa]:kr,[_u]:pr,[Ru]:Nt,[Du]:Jt,[Nu]:Ut,[Fu]:sn,[Ou]:on,[Au]:Zt,[wu]:cn,[Lu]:Qt,[Gu]:yn,[qu]:gn,[Vu]:kn,[Bu]:Hn,[Ba]:Ji,[Ua]:Qi,[ua]:vo,[Ga]:Gs,[za]:Us,[qa]:qs};function W(e){return e===void 0?!1:e in s1}function rt(e){if(!W(e))throw new Error(\"Type \"+tt(e)+\" does not implement elementType.\");return s1[e]}function tr(e){return W(e)?rt(e):e}function Zn(e){if(W(e))throw new Error(\"Type \"+tt(e)+\" does not implement listType.\");switch(e){case Nn:return ar;case x:return Z;case Oe:return vi;case N:return Ye;case un:return Mu;case D:return Yt;case G:return lo;case wn:return Mi;case fn:return ko;case _e:return wr;case he:return Er;case Te:return _i;case ue:return Co;case Ee:return Ri;case Ae:return Eo;case Pe:return Di;case Ne:return Ur;case Ce:return zr;case we:return sa;case zt:return Wi;case ke:return ji;case dr:return ni;case kr:return aa;case pr:return _u;case Nt:return Ru;case Jt:return Du;case Ut:return Nu;case sn:return Fu;case on:return Ou;case Zt:return Au;case cn:return wu;case Qt:return Lu;case yn:return Gu;case gn:return qu;case kn:return Vu;case Hn:return Bu;case Ji:return Ba;case Qi:return Ua;case vo:return ua;case Gs:return Ga;case Us:return za;case qs:return qa;case lp:case Bt:case St:throw new Error(\"Type \"+tt(e)+\" does not implement listType.\");default:throw new Error(`Invalid type: ${e}`)}}function er(e){if(W(e))return!1;switch(e){case Bt:case St:case lp:return!1;default:return!0}}function Zf(e){if(e===void 0)return!1;switch(e){case D:case _e:case he:case Te:case ue:case Ee:case Ae:case Pe:case Ne:case Ce:case we:return!0;default:return!1}}function pp(e){if(W(e))return pp(rt(e));switch(e){case x:case Nn:case Oe:case N:case un:case D:case Ji:case Qi:case wn:case St:case lp:case Bt:case fn:case pr:case Nt:case Jt:case Ut:case sn:case on:case Zt:case cn:case Qt:case yn:case gn:case Hn:case kn:return!0;case G:case zt:case ke:case dr:case kr:case _e:case he:case Te:case ue:case Ee:case Ae:case Pe:case Ne:case Ce:case we:case vo:case Gs:case Us:case qs:return!1;default:throw new Error(`Invalid type: ${e}`)}}function Uu(e,t){for(let n of t)if(e===n)return!0;return!1}var Md=[x,N,D,G];function _d(e){return Md.includes(e)}var _h=[x,N];function zP(e){return _h.includes(e)}var Rh=Cr.of([Ee,Ae,he,Pe]),kP=Cr.of([Pe,ke]),HP=Cr.of([Ne,Ce]);function ae(e,t){return e===void 0?!1:e===t?!0:W(e)?e===He?!0:rt(e)===t:!1}function ka(e){return Uu(e,[Ji,Qi,vo,Gs,Us,qs,Ba,Ua,ua,Ga,za,qa])}var a1={[D]:Ji,[N]:Qi,[G]:vo},qz={[D]:Gs,[N]:Us,[G]:qs};function $P(e){return a1[e]!==void 0}function YP(e,t){let n=t===1?a1[e]:qz[e];if(n===void 0)throw new Error(`Unexpected return type for map: ${tt(e)}`);return n}var Dh=[Jt,Ut,sn,on,Zt,cn,Qt];function Ni(e){return Uu(e,Dh)}function zu(e,t){if(!Uu(e,t))throw new Error(`Programming error: expected one of ${t.map(tt)} but found ${e&&tt(e)} instead.`)}function Sc(e){return typeof e==\"object\"&&\"type\"in e&&e.type===\"Action\"}function zz(e,t){return e.value[Yf(e.valueType,t)]}var kz=Symbol(\"UNKNOWN_RETURN_TYPE\");function u1(e){return typeof e==\"object\"&&e.type===\"variadic\"}function po(e,t){return{type:\"variadic\",initial:new Array(t).fill(e),rest:e}}var ZP=class{constructor(t,n){this.argTypes=t;this.productContext=n;this.minArity=this.argTypes.length,this.maxArity=this.argTypes.length}argTypeAtIndex(t){if(!(t>this.argTypes.length-1))return this.argTypes[t]}matches(t){return c1(this,t)}satisfiesPolicy(t){return t.is3dProduct()?this.productContext[\"3d\"]:t.isGeometryEnabled()?this.productContext.geometry:this.productContext.graphing}},XP=class{constructor(t,n){this.productContext=n;this.maxArity=void 0;this.initial=t.initial,this.rest=t.rest,this.minArity=this.initial.length}argTypeAtIndex(t){return t<this.initial.length?this.initial[t]:this.rest}matches(t){return c1(this,t)}satisfiesPolicy(t){return t.is3dProduct()?this.productContext[\"3d\"]:t.isGeometryEnabled()?this.productContext.geometry:this.productContext.graphing}};function c1(e,t){return e.maxArity!==void 0&&e.maxArity<t.length?!1:!!t.every((n,r)=>{if(n===void 0)return!0;let o=e.argTypeAtIndex(r);return o===void 0?!1:wh(n,o)})}var Xf=class{constructor(t){this.arg=t;this.coerceComplexToReal=!1}getTypes(){return typeof this.arg==\"number\"?[this.arg]:this.arg.getTypes()}},Se=new Xf(x),ca=new Xf(Z),Nh=class{constructor(t){typeof t==\"number\"?(this.coerceComplexToReal=t===x,this.nodeTypes=[Zn(t)]):(this.coerceComplexToReal=t.coerceComplexToReal,this.nodeTypes=t.getTypes().map(Zn))}getTypes(){return this.nodeTypes}};function Wf(e){return new Nh(e)}var Oh=class{constructor(t){if(typeof t==\"number\")this.coerceComplexToReal=t===x,this.nodeTypes=[t,Zn(t)];else{this.coerceComplexToReal=t.coerceComplexToReal,this.nodeTypes=[];for(let n of t.getTypes())this.nodeTypes.push(n,Zn(n))}}getTypes(){return this.nodeTypes}};function Ah(e){return typeof e==\"number\"?er(e):e instanceof Cr?e.types.every(Ah):!1}function Hr(e){return new Oh(e)}function Ot(e,t={}){let n={geometry:!0,\"3d\":!0,graphing:!0,...t};return u1(e)?new XP(e,n):new ZP(e,n)}function U(e,t={}){return u1(e)?Ot({type:\"variadic\",initial:e.initial.map(Hr),rest:Hr(e.rest)},t):Ot(e.map(Hr),t)}function wh(e,t){if(typeof t==\"number\")return lr(e,t);{let n=t.getTypes();return t.coerceComplexToReal?n.some(r=>lr(e,r)):n.some(r=>up(e,r))}}function dp(e,t){return typeof t==\"number\"?Bs(e,t):t.getTypes().some(r=>Bs(e,r))}function jf(e,t){let n=new Set;for(let r of e){let o=r.argTypeAtIndex(t);if(o===void 0)continue;let i=Hz(o);for(let s of i)n.add(s)}return[...n]}function Hz(e){return typeof e==\"number\"?[e]:e.getTypes()}var WP=[Oe,un,x,N,D,G,zt,ke,dr,kr,St,fn,_e,he,Te,ue,Ee,Ae,Pe,Ne,Ce,we,pr,Nt,yn,gn,Jt,Ut,sn,on,Zt,cn,Qt],$z=new Set(WP),Jf=Cr.of(WP.filter(e=>er(e))),Qf=Cr.of(WP.filter(e=>!er(e)));function la(e){return $z.has(e)}function l1(e){return la(e)}function Ho(e){return d1(e,NaN).value}function p1(e){return d1(e,0).value}function d1(e,t){switch(e){case x:return{valueType:e,value:t};case zt:case ke:return{valueType:e,value:[[t,t,t],[t,t,t]]};case dr:return{valueType:e,value:[[t,t,t],[t,t,t],[t,t,t]]};case kr:return{valueType:e,value:[[t,t,t],t]};case fn:return{valueType:e,value:[t,t,t]};case St:return{valueType:e,value:{type:\"Action\",updateRules:{}}};case he:case Ae:case Ee:return{valueType:e,value:[[t,t],[t,t]]};case Pe:return{valueType:e,value:[[t,t],[t,t]]};case Te:return{valueType:e,value:[[t,t],t]};case ue:return{valueType:e,value:[[t,t],[t,t],[t,t]]};case Oe:case un:return{valueType:e,value:!1};case _e:return{valueType:e,value:[]};case we:return{valueType:e,value:[[t,t],[t,t],!1]};case Ne:case Ce:return{valueType:e,value:[[t,t],t,t,t]};case pr:return{valueType:e,value:[t,t]};default:if(GP(e))return qP(e,t);throw new Error(`${e} does not have a ${t===0?\"zero\":\"NaN\"} type.`)}}function m1(e,t){return ei(Ho(e),t)}function Rd(e,t){return{n:e,d:t}}function ln(e){return typeof e==\"object\"&&typeof e.n==\"number\"&&typeof e.d==\"number\"}var Kf=Math.pow(2,53)-1;function fp(e){let t=e.match(/^(-)?(\\d*)?(?:\\.(\\d*))?$/);if(!t)return NaN;let n=t[1],r=t[2],o=t[3];if(!r&&!o)return NaN;let i=!!n;if(o){let s=o.replace(/0+$/,\"\"),a=s.length,u=Math.pow(10,a),c=parseInt(r||\"0\",10)*u+parseInt(s||\"0\",10);return c>Kf||u>Kf?parseFloat(e):Ie(i?-c:c,u)}else{let s=parseInt(r,10);return s>Kf?parseFloat(e):Ie(i?-s:s,1)}}function F(e){return ln(e)?e.n/e.d:+e}function ri(e){return ln(e)?!1:isNaN(e)}function Ie(e,t){if(!isFinite(e)||!isFinite(t)||t===0||Math.floor(e)!==e||Math.floor(t)!==t||Math.abs(e)>Kf||Math.abs(t)>Kf)return e/t;t<0&&(e=-e,t=-t);let n=sp(e,t);return Rd(e/n,t/n)}function Oi(e){return ln(e)?Rd(-e.n,e.d):-e}function f1(e){return ln(e)?Rd(Math.abs(e.n),Math.abs(e.d)):Math.abs(e)}function y1(e){return ln(e)?e.n===0?e.d/e.n:Rd(e.n<0?-e.d:e.d,Math.abs(e.n)):1/e}function Ai(e,t){if(!ln(e)||!ln(t))return F(e)+F(t);let n=sp(e.d,t.d);return Ie(e.n*(t.d/n)+t.n*(e.d/n),e.d/n*t.d)}function oo(e,t){if(!ln(e)||!ln(t))return F(e)*F(t);let n=sp(e.n,t.d),r=sp(t.n,e.d);return Ie(e.n/n*(t.n/r),e.d/r*(t.d/n))}function es(e,t){return Ai(e,Oi(t))}function Yo(e,t){return!ln(e)||!ln(t)?F(e)/F(t):oo(e,y1(t))}function Zz(e,t){let n=e,r=t;if(t.n<0&&(r=Oi(t),n=y1(e)),!ln(n)||!ln(r))return ap(F(e),F(t));if(e=n,t=r,t.d===1)return Ie(Math.pow(e.n,t.n),Math.pow(e.d,t.n));let o=e.n<0;if(o&&t.d%2!==1)return NaN;let s=(o?-1:1)*Math.round(Math.pow(Math.abs(e.n),1/t.d)),a=Math.round(Math.pow(Math.abs(e.d),1/t.d));return Math.pow(s,t.d)!==e.n||Math.pow(a,t.d)!==e.d?ap(F(e),F(t)):Ie(Math.pow(s,t.n),Math.pow(a,t.n))}function g1(e,t){if(!ln(e)||!ln(t))return ap(F(e),F(t));let n=Zz(e,t);return ln(n)?n:ap(F(e),F(t))}function h1(e){if(!ln(e))return Math.sqrt(e);let t=Math.round(Math.sqrt(e.n)),n=Math.round(Math.sqrt(e.d));return t*t!==e.n||n*n!==e.d?Math.sqrt(F(e)):Ie(t,n)}function b1(e,t){if(!ln(e)||!ln(t)){let r=F(e),o=F(t);mp(r,o)}let n=es(e,oo(t,Rd(Math.floor(F(Yo(e,t))),1)));return ln(n)?n:mp(F(e),F(t))}function jP(e){let t=Rd(0,1);for(let n of e)t=Ai(t,n);return t}function x1(e){return Yo(jP(e),Ie(e.length,1))}var O1={spy:vO},{cosh:Vd,sinh:Tp,tanh:gS,acosh:A1,asinh:w1,atanh:L1,expm1:Xz,log1p:Bd,sign:hS,hypot:oi}=Math,Wz=bc,Gh=sp,jz=ap,F1=Symbol(\"DIVERGES\"),V1=(n=>(n[n.SUCCESS=0]=\"SUCCESS\",n[n.MISSING_CACHE_ENTRY=1]=\"MISSING_CACHE_ENTRY\",n))(V1||{}),Wh=class Wh{constructor(t=Wh.defaultLimit,n){this.limit=t;this.computeSize=n;this.currentSize=0;this.cache=new Map}get(t){let n=this.cache.get(t);return n&&(this.cache.delete(t),this.cache.set(t,n)),n==null?void 0:n.value}set(t,n){let r=this.computeSize?this.computeSize(n):1;if(this.currentSize+r>=this.limit){let o=this.cache.keys().next().value;o&&this.cache.delete(o)}this.cache.set(t,{size:r,value:n})}};Wh.defaultLimit=1e5;var Ad=Wh,oy=1e4,B1=oy*2;function Jz(){return oy}function bS(e){oy=e}var G1=(n=>(n[n.DoesNotTerminate=0]=\"DoesNotTerminate\",n[n.DepthLimitExceeded=1]=\"DepthLimitExceeded\",n))(G1||{});function q1(e,t){if(la(t))return e.recursionTerminationStatus=0,Ho(t);throw fS()}function U1(e,t){if(la(t))return e.recursionTerminationStatus=1,Ho(t);throw yS()}var T1=new WeakMap;function Qz(e){let t=T1.get(e);return t||(t=new Set(e),T1.set(e,t)),t}function nS(e){return`${e.fn}:${JSON.stringify(e.args)}`}function Kz(e,t){return{status:0,result:[e,t]}}function ek(e){return{status:1,stackFrame:e}}function tk(e,t,n,r){let o=e.recursiveFunctionCache||new Ad,i=[];i.push(r);let s=0;for(;i.length>0;){if(i.length>oy||s++>B1)return U1(e,n);let a=i.pop(),{fn:u,args:c}=a,l=t[u](o,...c);if(l===F1)return q1(e,n);if((l==null?void 0:l.status)===1)i.push({fn:u,args:c}),i.push(l.stackFrame);else{let p=nS(a);o.set(p,l.result)}}return o.get(nS(r))[0]}var nk=function(e){let t=e*e;return 1+t===1?1:1+t===t?Math.abs(e):Math.sqrt(t+1)},rk=function(e){let t=e*e;return t<1?NaN:t-1===t?Math.abs(e):Math.sqrt(t-1)};function mr(e,t,n){return Math.max(t,Math.min(n,e))}function mp(e,t){let n=e%t;return e*t<0&&n!==0?n+t:n}function rS(e,t){if(e=Math.round(e),t=Math.round(t),!isFinite(e)||!isFinite(t))return NaN;if(e===0&&t===0)return 0;let n=Gh(e,t);return Math.abs(e/n*t)}function ok(e){if(e.length===0)return NaN;if(e.length===1)return Gh(e[0],0);let t=e[0];for(let n=1;n<e.length;n++)t=Gh(t,e[n]);return t}function ik(e){if(e.length===0)return NaN;if(e.length===1)return rS(e[0],1);let t=e[0];for(let n=1;n<e.length;n++)t=rS(t,e[n]);return t}function sk(e){if(e.length===0)return[NaN,NaN];if(e.length===1)return dS(e[0],[0,0]);let t=e[0];for(let n=1;n<e.length;n++)t=dS(t,e[n]);return t}function ak(e){if(e.length===0)return[NaN,NaN];if(e.length===1)return mS(e[0],[1,0]);let t=e[0];for(let n=1;n<e.length;n++)t=mS(t,e[n]);return t}function Kc(e,t){if(isNaN(e))return e;if(isNaN(t))return t;if(!isFinite(e)&&!isFinite(t))return NaN;if(t===0||e===t)return 1;if(e===0)return zs(t);let n=isFinite(e)&&e===Math.round(e),r=isFinite(t)&&t===Math.round(t);if(e<0&&t<0&&e-t<0)return n&&r?0:zs(e-t)*zs(t)/(zs(e)*Kc(-e,-t));if(e<0&&t>0&&e-t<0)return n&&r?Math.pow(-1,t)*Kc(t-e-1,t):zs(e-t)/zs(e)*Kc(-(e-t),t);if(e<0&&t<0&&e-t>0)return n&&r?Math.pow(-1,e-t)*Kc(-t-1,e-t):zs(t)/zs(e)*Kc(-t,-e);if(e>0&&t<0&&e-t>0){let a=Math.abs(e)>Math.abs(t)?-t:e;return zs(t)/Kc(e-t,a)}if(e>0&&t>0&&e-t<0)return zs(e-t)/Kc(t,e);if(e<0||t<0||e-t<0)return qh(e,t)/Cc(t);let o=wi(e)-wi(t)-wi(e-t)-(e-t)*Bd(-t/e),i=Math.sqrt((e+1/6)/(2*Math.PI*(t+1/6)*(e-t+1/6)))*Math.pow(e/t,t)*Math.exp(o);return n&&r&&e>0&&t>0&&e-t>0?Math.round(i):i}function qh(e,t){if(isNaN(e))return e;if(isNaN(t))return t;if(!isFinite(e)&&!isFinite(t))return NaN;if(t===0)return 1;if(e===0)return 1/Cc(-t);if(e===t)return Cc(e);let n=isFinite(e)&&e===Math.round(e),r=isFinite(t)&&t===Math.round(t);if(e<0&&e-t<0)return n&&r?Math.pow(-1,t)*qh(t-e-1,t):zs(e-t)/zs(e)*qh(-(e-t),t);if(e<0||e-t<0)return Cc(e)/Cc(e-t);let o=wi(e)-wi(e-t)-(e-t)*Bd(-t/e),i=Math.sqrt((e+1/6)/(e-t+1/6))*z1(e,t)*Math.exp(o);return n&&r&&e>0&&t>0&&e-t>0?Math.round(i):i}function Cc(e){if(e===-1/0)return NaN;let t=Number.isInteger(e);if(t&&e<0)return 1/0;let n=Math.abs(e),r=Math.sqrt(2*Math.PI*(n+1/6))*z1(n,n)*Math.exp(wi(n));return e<0?1/(zs(e)*r):t?Math.round(r):r}function I1(e){let t=(e-1)/2,n=.003986126881698112,r=.018251909205311435,o=.029941517126885264,i=.02189053314125264,s=.006189087779028262,a=5073115018776601e-24,u=7.482475354254652,c=23.07580194442752,l=37.71198466711076,p=34.64514153026584,d=17.084767168000226,m=3.5649457718715754,f=n+t*(r+t*(o+t*(i+t*(s+t*a)))),g=1+t*(u+t*(c+t*(l+t*(p+t*(d+t*m)))));return f/g}var uk=Math.pow(2,27)+1;function ck(e){let t=uk*e;return t-(t-e)}var JP=.3678794428706169,QP=-16991745912462731e-25;function z1(e,t){if(!isFinite(e)||!isFinite(t)||Math.abs(t)>2**26)return Math.pow(e/Math.E,t);let n=ck(e),r=e-n,o=e*(JP+QP);if(o===0)return Math.pow(e/Math.E,t);let i=n*JP-o+n*QP+r*JP+r*QP;return Math.pow(o,t)*(1+t*(i/o))}var k1=[1/6,-1/30,1/42,-1/30,5/66,-691/2730,7/6,-3617/510,43867/798,-174611/330,854513/138,-236364091/2730,8553103/6,-23749461029/870];function H1(e,t){if(e!==Math.floor(e))return NaN;if(e<0)return NaN;if(e===0)return 1/xS(t);let n=Ln(t);if(e===1)return-1/(n*n);let r=Xn(t);if(e===2)return 2*r/(n*n*n);let o=[0,2],i=[];for(let a=3;a<=e;a++){i=[];for(let u=0;u<a;u++){let c=0,l=0;u>0&&(c=(a-u+1)*o[u-1]),u+2<a&&(l=(u+1)*o[u+1]),i.push(-(c+l))}o=i}let s=0;for(let a=e-1;a>=0;a--)s=i[a]+r*s;return s/Math.pow(n,e+1)}function $1(e,t){if(e<0)return NaN;if(e!==Math.floor(e))return NaN;let n=e%2===0?-1:1;if(t<0)return-n*$1(e,1-t)-Math.pow(Math.PI,e+1)*H1(e,Math.PI*t);let r=Cc(e),o=0,i=Math.pow(t,-(e+1));for(;t<10;)o+=i,t++,i=Math.pow(t,-(e+1));o+=e===0?-Math.log(t):i*t/e,o+=.5*i;let s=k1,a=e+1,u=2,c=i*t*a/u,l=1/(t*t);for(let p=1;p<=14;p++)c*=l,o+=c*s[p-1],a++,u++,c*=a/u,a++,u++,c*=a/u;return r*n*o}function lk(e){let t=Math.log(e);return Math.exp(Math.round(t))===e?Math.round(t):t}function Uh(e,t){if(t===0)return NaN;let n;return t===Math.E?n=Math.log(e):t===2&&Math.log2?n=Math.log2(e):t===10&&Math.log10?n=Math.log10(e):n=Math.log(e)/Math.log(t),Math.pow(t,Math.round(n))===e?Math.round(n):n}function pk(e){return Uh(e,10)}function Y1(e,t){let[n,r]=e,[o,i]=t;return i===0&&o===0?[NaN,NaN]:n===0&&r===0?[-1/0,0]:i===0&&r===0&&o>0?n>0?Kt(Uh(n,o),0):Kt(Uh(-n,o),Math.PI/Math.log(o)):il(cS(e),cS(t))}function dk(e){return Y1(e,[10,0])}var Z1=1/Math.PI;function jh(e){return e>1e12?!1:Math.round(Z1*e)*Math.PI===e}function Jh(e){if(e>1e12)return!1;let t=Math.round(2*Z1*e);return t%2===1&&t*Math.PI===2*e}function Ln(e){return jh(Math.abs(e))?0:Math.sin(e)}function Xn(e){return Jh(Math.abs(e))?0:Math.cos(e)}function xS(e){let t=Math.abs(e);return jh(t)?0:Jh(t)?1/0:Math.tan(e)}function mk(e){return Jh(Math.abs(e))?1/0:1/Math.cos(e)}function fk(e){return jh(Math.abs(e))?1/0:1/Math.sin(e)}function yk(e){let t=Math.abs(e);return jh(t)?1/0:Jh(t)?0:1/Math.tan(e)}function gk(e){return e>0?Math.atan(1/e):Math.PI/2-Math.atan(e)}function hk(e){return Math.asin(1/e)}function bk(e){return Math.acos(1/e)}function xk(e){return 1/Vd(e)}function Tk(e){return 1/Tp(e)}function Ik(e){return 1/gS(e)}function Pk(e){return A1(1/e)}function Sk(e){return w1(1/e)}function Ck(e){return L1(1/e)}function Ek(e){if(e===0||isNaN(e))return e;if(!isFinite(e))return NaN;if(e===Math.floor(e))return e>0?0:-0;let t=Math.round(2*e),n=-.5*t+e,r=t&2?-1:1,o=t&1?Math.cos(Math.PI*n):Math.sin(Math.PI*n);return r*o}function zs(e){return e===1/0||e===-1/0?0:e===0?1:Ek(e)/(Math.PI*e)}function nl(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}function X1(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function Vh(e){if(e===1/0)return 1/Math.sqrt(2*Math.PI);let t=wi(.5*(e+1))-wi(.5*e)+.5*(e*(Math.log1p(1/e)-1/e));return Math.exp(t)/Math.sqrt(2*Math.PI*(1+1/(e*(3*e+4))))}function wd(e,t,n=e-t){if(Math.abs(n)<.1*(e+t)){let r=n/(e+t),o=n*n/(e+t),i=2*e*r;for(let s=1;s<10;s++){i*=r*r;let a=o+i/(2*s+1);if(a==o)return a;o=a}}return e*Math.log(e/t)+t-e}function wi(e){if(e<0)return NaN;if(e>=3)return vk(e)-.5*Math.log1p(1/(6*e));if(e>=1)return I1(e);let t=.5772156649015329,n=-.1952810437829498,r=e*(1+6*e),o=Math.log1p(6*e/(1+r));return(e-t)*o+.5*Math.log1p(2/5*(1+4*e*(1-3*e))/(1+r))+(t-.5)*o+(e===0?0:e*Math.log1p(1/r))+n+I1(e+1)}function vk(e){let t=1/(e*e),n=.03333333333333229,r=.3816877588482201,o=1.1226896867003733,i=.8424153799350397,s=.06216815175439515,a=11.73634705109923,u=36.819646921154714,c=33.58045682700508,l=6.435857736505945,p=n+t*(r+t*(o+t*(i+t*s))),d=1+t*(a+t*(u+t*(c+t*l)));return(1-t*(p/d))/(12*e)}function Qh(e,t){if(t<=0)return NaN;if(t===1/0)return Kh(e,0,1);let n=e*e/t;return n===0?Vh(t)*Math.exp(-.5*e*e):n<1?Vh(t)*(1+n)**-.5*Math.exp(-.5*t*Bd(n)):Vh(t)*(1+n)**-.5*Math.pow(1+n,-t/2)}function yp(e,t){if(e===1/0)return tA(-1/0,t,0,1);if(t>0)return 1-yp(e,-t);if(t===-1/0)return 0;if(t===0)return .5;if(2.25*t*t<e-23)return Mk(e,t);if(t/e<-1e3){let r=t*t;return Vh(e)*Math.pow(e,.5*(e-1))*Math.pow(Math.abs(t),-e)*(1-e*e*(e+1)*(1/(2+e)+e*(e+3)/(4*(4+e)*r))/(2*r))}let n=Math.sqrt(t*t+e);return Dk((t+n)/(2*n),e/2,e/2)}var P1=[1/4,1/96,-1/384,-1/10240,19/368640,79/61931520,-55/49545216,-2339/118908518400,11813/475634073600,677/1993133260800,-2117/3720515420160];function Mk(e,t){let n=Math.log1p(t*t/e),r=Math.sign(t)*Math.sqrt(n),o=1/e,i=Math.sqrt(.5*e),s=0,a=0;for(let u=P1.length-1;u>=0;u--)s=(s*(2*u+3)-P1[u])*o,a=n*a+s;return Math.exp(-.5*e*n)*(.5*ku(-r*i)+i/(Math.sqrt(Math.PI)*(1-s))*a*r)}function _k(e,t,n,r,o){if(n<=0||!isFinite(r)||!isFinite(o))return NaN;if(o===0)return e<=r&&r<=t?1:0;let i=(e-r)/Math.abs(o),s=(t-r)/Math.abs(o);return i===-1/0?yp(n,s):i>0&&s>0?yp(n,-i)-yp(n,-s):yp(n,s)-yp(n,i)}function Rk(e,t,n,r,o){return _k(Math.min(e,t),Math.max(e,t),n,r,o)}function Dk(e,t,n){if(e<0||e>1)throw new RangeError(\"First argument must be between 0 and 1.\");if(t===1&&n===1)return e;if(e===0)return 0;if(e===1)return 1;if(t===0)return 1;if(n===0)return 0;{let r=wi(t+n)-wi(t)-wi(n)-wd(t,(t+n)*e)-wd(n,(t+n)*(1-e),(t+n)*e-t),o=Math.exp(r)*Math.sqrt((1+1/(6*(t+n)))/(2*Math.PI*(1+1/(6*t))*(1+1/(6*n))*(1/t+1/n)));return e<(t+1)/(t+n+2)?o*S1(e,t,n)/t:1-o*S1(1-e,n,t)/n}}function S1(e,t,n){let r=Math.pow(2,-52),o=1e-300,i=t+n,s=t+1,a=t-1,u=1,c=1-i*e/s;Math.abs(c)<o&&(c=o),c=1/c;let l=c;for(let p=1;p<=100;p++){let d=2*p,m=p*(n-p)*e/((a+d)*(t+d));c=1+m*c,Math.abs(c)<o&&(c=o),u=1+m/u,Math.abs(u)<o&&(u=o),c=1/c,l*=c*u,m=-(t+p)*(i+p)*e/((t+d)*(s+d)),c=1+m*c,Math.abs(c)<o&&(c=o),u=1+m/u,Math.abs(u)<o&&(u=o),c=1/c;let f=c*u;if(l*=f,Math.abs(f-1)<=r)return l}return l}function W1(e,t){let n=Math.pow(2,-52),r=1e-300,o=1,i=e,s=o/i,a=o/r,u=1/i,c=2,l=0,p=i,d=-(e-1),m=0;do d-=1,p+=1,u=u*d*t+p,u===0&&(u=r),a=p+d*t/a,a===0&&(a=r),u=1/u,l=a*u,s=s*l,m+=1,p+=1,u=u*m*t+p,u===0&&(u=r),a=p+m*t/a,a===0&&(a=r),u=1/u,l=a*u,s*=l,c+=2;while(c<100&&Math.abs(l-1)>n);return s}function j1(e,t){let n=Math.pow(2,-52),r=1e-300,o=1,i=t+1-e,s=o/i,a=o/r,u=1/i,c=2,l=0,p=i;do{let d=-(c-1)*(c-e-1);p+=2,u=u*d+p,u===0&&(u=r),a=p+d/a,a===0&&(a=r),u=1/u,l=a*u,s*=l,c+=1}while(c<100&&Math.abs(l-1)>n);return s}function J1(e,t,n=!1){let r=t/e,o=hS(t-e)*Math.sqrt(2*wd(1,r)),i=[1,-.3333333333333333,.08333333333333333,-.014814814814814815,.0011574074074074073,.0003527336860670194,-.0001787551440329218,3919263178522438e-20,-2185448510679992e-21,-185406221071516e-20,8296711340953087e-22,-17665952736826078e-23,6707853543401498e-24,10261809784240309e-24,-4382036018453353e-24,914769958223679e-24,-25514193994946248e-27,-5830772132550426e-26,24361948020667415e-27,-50276692801141755e-28,11004392031956135e-29,3371763262400985e-28,-1392388722418162e-28,28534893807047445e-30,-5139111834242572e-31,-19752288294349442e-31,8099521156704561e-31],s=i.length-2,a=0,u=0,c=0,l=0;for(;s>=0;s--)c=(s+2)*a/e+i[s+1],l=o*l+c,a=u,u=c;if(l=e/(e+a)*l,t<e){let p=Math.exp(-.5*e*o*o)*(.5*ku(-o*Math.sqrt(e/2))-l/Math.sqrt(2*Math.PI*e));return n?isFinite(p)?p:0:isFinite(p)?1-p:1}else{let p=Math.exp(-.5*e*o*o)*(.5*ku(o*Math.sqrt(e/2))+l/Math.sqrt(2*Math.PI*e));return n?isFinite(p)?1-p:1:isFinite(p)?p:0}}var TS=0,IS=1,PS=2,zh=3;function Q1(e,t){return isNaN(e)||isNaN(t)||e<0||t<0?zh:e>12&&2.35*e>t&&.3*e<t?PS:e>=t||e<1&&t<4.25?TS:IS}function K1(e,t){let n=Q1(e,t);switch(n){case PS:return J1(e,t,!0);case TS:{let r=W1(e,t);return isFinite(r)?e*rl(e,t)*r:0}case IS:{let r=j1(e,t);return isFinite(r)?1-e*rl(e,t)*r:1}case zh:return NaN;default:return NaN}}function eA(e,t){let n=Q1(e,t);switch(n){case PS:return J1(e,t);case TS:{let r=W1(e,t);return isFinite(r)?1-e*rl(e,t)*r:1}case IS:{let r=j1(e,t);return isFinite(r)?e*rl(e,t)*r:0}case zh:return NaN;default:return NaN}}function Nk(e,t){let n,r;if(e<25){n=Math.pow(t*Cc(e),1/e);let a=e-1,u=-Math.log(Cc(a)*(1-t));r=u+a*Math.log(u),a<0&&(r+=.5*Math.log1p(a/u)),Number.isNaN(r)&&(r=0)}else n=e/Math.E*Math.pow(t*Math.sqrt(2*Math.PI*e),1/e),r=0;let o=n/(1+e),i=n*(1+o*(1+o*((5+3*e)/(2*(2+e))))),s=nb(t)*Math.sqrt(e)+(e-.5);return Math.max(i,s,r)}function Ok(e,t){if(isNaN(e)||e<=0||t<0||t>1)return NaN;if(e===1/0)return t===1?NaN:0;if(t===0)return 0;if(t===1)return 1/0;let n=Nk(e,t);if(n===0||n===1/0)return n;for(let r=0;r<10;r++){let o=t-K1(e,n),i=o/(e/n*rl(e,n)+.5*((e-1)/n-1)*o),s=n+1e-8*i===n;if(n+=i,s)break}return n}function C1(e,t,n){return(e-t)/(Math.SQRT2*Math.abs(n))}function ey(e){return e<0?.5*Math.exp(-e*e)*ku(-e):1-.5*Math.exp(-e*e)*ku(e)}function Ak(e,t,n,r){if(!isFinite(r)||isNaN(n))return NaN;if(r===0)return e<=n&&n<=t?1:0;let o=C1(e,n,r),i=C1(t,n,r);return o===-1/0?ey(i):o>0&&i>0?ey(-o)-ey(-i):ey(i)-ey(o)}function tA(e,t,n,r){return Ak(Math.min(e,t),Math.max(e,t),n,r)}function Kh(e,t,n){return 1/Math.sqrt(2*Math.PI*n*n)*Math.exp(-(e-t)*(e-t)/(2*n*n))}function SS(e,t){return`t${e}:${Zh(t)}`}function CS(e){let t=O1.spy(e),n=parseInt(t.slice(0,8),16)&2097151,r=parseInt(t.slice(8,16),16);return(n*4294967296+r)/9007199254740992}function nA(e,t){for(let n=t.length-1;n>0;n--){let r=e+\"::sc\"+n,o=Math.floor(CS(r)*(n+1)),i=t[n];t[n]=t[o],t[o]=i}}function wk(e,t){let n=t.slice();return nA(e,n),n}function ES(e,t){let n=[];for(let r=0;r<t;r++)n.push(r);return nA(e,n),n}function tl(e,t,n){return CS(e)*(n-t)+t}function Lk(e,t,n){let r=0,o,i,s,a;do o=e+\"::sc\"+r,r+=1,i=tl(o,0,1)*2-1,o=e+\"::sc\"+r,r+=1,s=tl(o,0,1)*2-1,a=i*i+s*s;while(a>=1||a===0);let u=Math.sqrt(-2*Math.log(a)/a);return t+n*i*u}function Fk(e,t){if(t<=0)return NaN;let n=0,r,o,i,s;do r=e+\"::sc\"+n,n+=1,o=tl(r,0,1)*2-1,r=e+\"::sc\"+n,n+=1,i=tl(r,0,1)*2-1,s=o*o+i*i;while(s>1);let a=o*o/s,u=t*(Math.pow(s,-2/t)-1);return r=e+\"::sc\"+n,n+=1,(tl(r,0,1)<.5?-1:1)*Math.sqrt(a*u)}function Vk(e,t,n){return t=mr(Math.round(t),0,1/0),t===1/0?NaN:(n=mr(n,0,1),oA(tl(e,0,1),t,n))}function Bk(e,t){return t<0?NaN:rA(tl(e,0,1),t)}function Bh(e,t,n){return e>=t?1:e<0?0:e<Math.floor((t+1)*n)?E1(e,t,n):1-E1(t-e-1,t,1-n)}function E1(e,t,n){let r=(1-n)/n,o=eb(e,t,n),i=o;for(;e>0&&(o*=e/(t-e+1)*r,i+o!==i);e--)i+=o;return i}function Gk(e,t,n,r){return n=mr(Math.round(n),0,1/0),n===1/0?NaN:(r=mr(r,0,1),e=Math.ceil(e),t=Math.floor(t),e===-1/0?Bh(t,n,r):Bh(t,n,r)-Bh(e-1,n,r))}function qk(e,t,n,r){return Gk(Math.min(e,t),Math.max(e,t),n,r)}function eb(e,t,n){if(e=Math.round(e),t=mr(Math.round(t),0,1/0),t===1/0)return NaN;if(n=mr(n,0,1),e<0||e>t)return 0;if(n===0)return e===0?1:0;if(n===1)return e===t?1:0;if(e===0)return Math.exp(t*Bd(-n));if(e===t)return Math.pow(n,t);let r=wi(t)-wi(e)-wi(t-e)-wd(e,t*n)-wd(t-e,t*(1-n),t*n-e);return Math.exp(r)*Math.sqrt((t+1/6)/(2*Math.PI*(e+1/6)*(t-e+1/6)))}function rl(e,t){return Math.exp(-wi(e)-wd(e,t))/Math.sqrt(2*Math.PI*(e+1/6))}function tb(e,t){return t<0?NaN:(e=Math.round(e),e<0?0:t===0?e===0?1:0:e===0?Math.exp(-t):rl(e,t))}function ty(e,t){return isNaN(e)||isNaN(t)?NaN:e===1/0?1:(e=Math.floor(e),e<0?0:t===0?1:eA(Math.floor(e+1),t))}function Uk(e,t,n){return n<0?NaN:(e=Math.ceil(e),t=Math.floor(t),e===-1/0?ty(t,n):ty(t,n)-ty(e-1,n))}function zk(e,t,n){return Uk(Math.min(e,t),Math.max(e,t),n)}function kk(e,t){return isNaN(e)||isNaN(t)||t<=0?NaN:(e=Math.round(e),t>1&&(t=1),e<1?0:t===1?e===1?1:0:t*Math.exp((e-1)*Math.log1p(-t)))}function KP(e,t){return isNaN(e)||isNaN(t)||t<=0?NaN:(t>1&&(t=1),e===1/0?1:(e=Math.floor(e),e<1?0:-Math.expm1(e*Math.log1p(-t))))}function v1(e,t){return isNaN(e)||isNaN(t)||t<=0?NaN:(t>1&&(t=1),e===1/0?0:(e=Math.floor(e),e<1?1:Math.exp(e*Math.log1p(-t))))}function Hk(e,t,n){if(n<0)return NaN;if(e=Math.ceil(e),t=Math.floor(t),e===-1/0)return KP(t,n);let r=-Math.LN2/Math.log1p(n);return e>r&&t>r?v1(e-1,n)-v1(t,n):KP(t,n)-KP(e-1,n)}function $k(e,t,n){return Hk(Math.min(e,t),Math.max(e,t),n)}function Yk(e,t){return isNaN(e)||isNaN(t)||t<=0?NaN:e<0||e>1?NaN:e===0||t>=1?1:e===1?1/0:Math.ceil(Math.log1p(-e)/Math.log1p(-t))}function vS(e,t){return isNaN(e)||isNaN(t)?NaN:t<=0?NaN:e<0?0:e===1/0&&t===1/0?NaN:e===1/0||t===1/0?0:e===0?t<2?1/0:t===2?.5:0:.5*(t/e)*rl(t/2,e/2)}function oS(e,t){return e<=0?0:t===1/0?e===1/0?NaN:0:e===1/0?1:K1(t/2,e/2)}function iS(e,t){return e<=0?1:t===1/0?e===1/0?NaN:1:e===1/0?0:eA(t/2,e/2)}function Zk(e,t,n){return isNaN(e)||isNaN(t)||isNaN(n)?NaN:n<=0?NaN:t>n&&e>n?iS(e,n)-iS(t,n):oS(t,n)-oS(e,n)}function Xk(e,t,n){return Zk(Math.min(e,t),Math.max(e,t),n)}function Wk(e,t){return 2*Ok(t/2,e)}function MS(e,t,n){return n<=t?NaN:e<t||e>n?0:1/(n-t)}function jk(e,t,n,r){return r<n?NaN:n===r?e<=n&&n<=t?1:0:(mr(t,n,r)-mr(e,n,r))/(r-n)}function Jk(e,t,n,r){return jk(Math.min(e,t),Math.max(e,t),n,r)}function Qk(e){let t=-e*e;return t<-750?e>=0?1:-1:e>=.065?1-Math.exp(t)*ku(e):e<=-.065?Math.exp(t)*ku(-e)-1:e*(1.1283791670955126+t*(.37612638903183754+t*(.11283791670955126+t*(.026866170645131252+t*.005223977625442188))))}function ku(e){let t=.9999999999999999,n=2.224574423459406,r=2.444115549920689,o=1.7057986861852539,i=.8257463703357973,s=.28647031042892007,a=.07124513844341643,u=.012296749268608364,c=.001347817214557592,l=7263959403471071e-20,p=1,d=3.352953590554884,m=5.227518529742423,f=5.003720878235473,g=3.266590890998987,y=1.5255421920765353,h=.5185887413188858,b=.12747319185915415,T=.02185979575963238,I=.0023889438122503674,E=.00012875032817508128;if(e<0)return e<-6.1?2*Math.exp(e*e):2*Math.exp(e*e)-ku(-e);if(e>50){let S=.5641895835477563,C=e*e;return e>5e7?S/e:S*(C*(C+4.5)+2)/(e*(C*(C+5)+3.75))}else{let S=t+e*(n+e*(r+e*(o+e*(i+e*(s+e*(a+e*(u+e*(c+e*l)))))))),C=p+e*(d+e*(m+e*(f+e*(g+e*(y+e*(h+e*(b+e*(T+e*(I+e*E)))))))));return S/C}}function nb(e){let t=-39.6968302866538,n=220.946098424521,r=-275.928510446969,o=138.357751867269,i=-30.6647980661472,s=2.50662827745924,a=-54.4760987982241,u=161.585836858041,c=-155.698979859887,l=66.8013118877197,p=-13.2806815528857,d=-.00778489400243029,m=-.322396458041136,f=-2.40075827716184,g=-2.54973253934373,y=4.37466414146497,h=2.93816398269878,b=.00778469570904146,T=.32246712907004,I=2.445134137143,E=3.75440866190742,S=.02425,C,v,_;return e>.5?-nb(1-e):e===.5?0:e<0?NaN:e===0?-1/0:(e<S?(C=Math.sqrt(-2*Math.log(e)),_=(((((d*C+m)*C+f)*C+g)*C+y)*C+h)/((((b*C+T)*C+I)*C+E)*C+1)):(C=e-.5,v=C*C,_=(((((t*v+n)*v+r)*v+o)*v+i)*v+s)*C/(((((a*v+u)*v+c)*v+l)*v+p)*v+1)),_-Math.sqrt(2*Math.PI)*(.5*ku(-_/Math.SQRT2)-Math.exp(.5*_*_)*e))}function rA(e,t){if(t<0||e<0||e>1)return NaN;if(t===0||e===0)return 0;if(e===1)return 1/0;let n=-1,r=Math.ceil(t);for(;ty(r,t)<e;)r=2*r;let o=Math.floor(n+(r-n)/2);for(;n<o&&o<r;)ty(o,t)<e?n=o:r=o,o=Math.floor(n+(r-n)/2);return r}function oA(e,t,n){if(t!==Math.round(t))return NaN;if(n<0||n>1)return NaN;if(e<0||e>1)return NaN;if(e===0)return 0;if(e===1)return t;if(t===0)return 0;if(n===1)return t;if(n===0)return 0;let r=-1,o=t,i=Math.floor(r+(o-r)/2);for(;r<i&&i<o;)Bh(i,t,n)<e?r=i:o=i,i=Math.floor(r+(o-r)/2);return o}function iA(e,t){if(isNaN(t)||t<=0||e<0||e>1)return NaN;if(e===0)return-1/0;if(e===1)return 1/0;if(t===1||t===2||t===4)return eS(t,e);let n,r;if(e===.5)return 0;if(e>.5)n=t>1?nb(e):eS(1,e),r=t>1?eS(1,e):Math.pow(Qh(0,t)*Math.pow(t,(t-1)/2)/(1-e),1/t);else return-iA(1-e,t);return Kk(t,e,n,r)}function eS(e,t){let n=4*t*(1-t);switch(e){case 1:return Math.tan(Math.PI*(t-.5));case 2:return 2*(t-.5)*Math.sqrt(2/n);case 4:let r=Math.cos(Math.acos(Math.sqrt(n))/3)/Math.sqrt(n);return hS(t-.5)*2*Math.sqrt(r-1);default:throw new Error(\"_invTSimple() must be called with 1, 2, or 4 df.\")}}function Kk(e,t,n,r){if(!isFinite(n)||!isFinite(r))return NaN;let o=n,i=r;for(;;){let s=ps(o,i),a=yp(e,s);if(s===o||s===i)return a>t?o:i;a<t?o=s:i=s}}function eH(e,t,n){return e<0||e>1||n<=t?NaN:e===0?t:e===1?n:t+e*(n-t)}function tH(e,t){let n=dA(e);return(nl(e)-t)*Math.sqrt(e.length)/n}function _S(e){return{min:rb(e),q1:hp(e,1),median:cA(e),q3:hp(e,3),max:ob(e)}}function nH(e){return e.length}function rb(e){if(e.length<1)return NaN;let t=e[0];if(isNaN(t))return NaN;for(let n=1;n<e.length;n++){if(isNaN(e[n]))return NaN;e[n]<t&&(t=e[n])}return t}function ob(e){if(e.length<1)return NaN;let t=e[0];if(isNaN(t))return NaN;for(let n=1;n<e.length;n++){if(isNaN(e[n]))return NaN;e[n]>=t&&(t=e[n])}return t}function sA(e,t){if(!isFinite(t)||t<0||t>1)return NaN;if(e.some(isNaN))return NaN;if(e.length===0)return NaN;let n=e.length,r=Ip(e),o=t*(n-1);return Math.floor(o)===o?e[r[o]]:(Math.ceil(o)-o)*e[r[Math.floor(o)]]+(o-Math.floor(o))*e[r[Math.ceil(o)]]}function hp(e,t){if(!isFinite(t)||t<0||t>4)return NaN;if(e.some(isNaN))return NaN;let n=Ip(e),r=ib(e,t),o=Math.floor(r),i=Math.ceil(r);return(e[n[o]]+e[n[i]])/2}function sS(e,t){let n=e-t;return Number.isNaN(n)?+Number.isNaN(e)-+Number.isNaN(t):n}function aA(e,t){return sS(e[0],t[0])||sS(e[1],t[1])}function uA(e){let t=[];for(let n=0;n<e;n++)t.push(n);return t}function Ip(e){return uA(e.length).sort((t,n)=>sS(e[t],e[n]))}function rH(e){return uA(e.length).sort((t,n)=>aA(e[t],e[n]))}function ib(e,t){t=Math.round(t);let n=e.length,r=n%2===1,o;return n===1?0:(t===0&&(o=0),t===2&&(o=(n-1)/2),t===4&&(o=n-1),t===1&&(o=r?(n+1)/4-1:(n+2)/4-1),t===3&&(o=r?(3*n+3)/4-1:(3*n+2)/4-1),o===void 0?NaN:o)}function oH(e,t){return Ip(e)[Math.ceil(t*(e.length-1))]+1}function iH(e,t){return Ip(e)[Math.floor(t*(e.length-1))]+1}function sH(e,t){return Ip(e)[Math.ceil(ib(e,t))]+1}function aH(e,t){return Ip(e)[Math.floor(ib(e,t))]+1}function cA(e){return sA(e,.5)}function uH(e){if(e.length<1)return 0;let t=e[0];if(isNaN(t))return 0;let n=0;for(let r=1;r<e.length;r++){if(isNaN(e[r]))return 0;e[r]<t&&(n=r,t=e[r])}return n+1}function cH(e){if(e.length<1)return 0;let t=e[0];if(isNaN(t))return 0;let n=0;for(let r=1;r<e.length;r++)if(e[r]>=t){if(isNaN(e[r]))return 0;n=r,t=e[r]}return n+1}function iy(e){let t=nl(e),n=0;for(let r=0;r<e.length;r++){let o=e[r]-t;n+=o*o}return n/e.length}function lH(e){let t=nl(e),n=0;for(let r=0;r<e.length;r++)n+=Math.abs(e[r]-t);return n/e.length}function lA(e){let t=e.length;return iy(e)*t/(t-1)}function pA(e,t){let n=Math.min(e.length,t.length);e.length!==n&&(e=e.slice(0,n)),t.length!==n&&(t=t.slice(0,n));let r=nl(e),o=nl(t),i=0;for(let s=0;s<n;s++)i+=(e[s]-r)*(t[s]-o);return i/n}function pH(e,t){let n=Math.min(e.length,t.length);return pA(e,t)*n/(n-1)}function sb(e,t){let n=Math.min(e.length,t.length);e.length!==n&&(e=e.slice(0,n)),t.length!==n&&(t=t.slice(0,n));let r=nl(e),o=nl(t),i=0,s=0,a=0;for(let u=0;u<n;u++){let c=e[u]-r,l=t[u]-o;i+=c*c,s+=l*l,a+=c*l}return a/Math.sqrt(i*s)}function RS(e,t,n,r){let o=e[0];for(let s=2;s<e.length;s++){let a=F(Yo(es(e[s],o),n));if(!Xi(a,s,10))return 0}let i=F(r);for(let s=0;s<t.length-1;s++){let a=F(Yo(es(t[s],o),n));if(!Xi(a,i-t.length+s,10))return 0}return!isFinite(i)||i<e.length||i<t.length?0:i}function DS(e){return e<0||!isFinite(e)?0:e}function aS(e){let t=e.length;if(t===0)return[];let n=[],r=[];for(let a=0;a<t;a++)r.push([e[a],a]);r.sort((a,u)=>{let c=a[0],l=u[0];return c===1/0&&l===1/0||c===-1/0&&l===-1/0?0:c-l});let o=0,i=1,s=1;for(;o<t;){let a=o;for(;a<t-1&&r[a][0]===r[a+1][0];)a+=1;s=a-o+1;let u;for(a=0;a<s;a++)u=r[o+a][1],n[u]=isNaN(e[u])?NaN:i+.5*(s-1);i+=s,o+=s}return n}function dH(e,t){let n=Math.min(e.length,t.length);return e.length!==n&&(e=e.slice(0,n)),t.length!==n&&(t=t.slice(0,n)),sb(aS(e),aS(t))}function dA(e){return Math.sqrt(lA(e))}function mH(e){return Math.sqrt(iy(e))}var fH=qf;function Ld(e,t){return oi(t[0]-e[0],t[1]-e[1])}function yH(e,t){return oi(t[0]-e[0],oi(t[1]-e[1],t[2]-e[2]))}function mA(e,t,n){return[mr(Math.round(e),0,255),mr(Math.round(t),0,255),mr(Math.round(n),0,255)]}function gH(e,t,n){isFinite(e)||(e=0),t=mr(t,0,1),n=mr(n,0,1);let r=n*(1-t/2);r===0||r===1?t=0:t=(n-r)/Math.min(r,1-r);let{r:o,g:i,b:s}=vh(e,t,r).rgb();return mA(o,i,s)}function hH(e){return e}function bH(e,t){return[e,t]}function xH(e,t,n){return[e,t,n]}function TH(e,t){return[e,t]}function IH(e){return e}function PH(e){let t=[];if(e.length===0)return[];for(let n=0;n<e.length-1;n++)t.push([e[n],e[n+1]]);return t.push([e[e.length-1],e[0]]),t}function NS(e){if(e.length==0)return 0;let t=[...e,e[0]];return zO(t)}function SH(e){let t=0;for(let n=0;n<e.length-1;n++){let[r,o]=e[n],[i,s]=e[n+1];t+=ws(i-r,s-o)}if(e.length>1){let[n,r]=e[e.length-1],[o,i]=e[0];t+=ws(o-n,i-r)}return t}function CH(e){let t=!1;for(let n=0;n<e.length;n++){let r=(n+1)%e.length;e[n][0]===e[r][0]&&e[n][1]===e[r][1]&&(t=!0)}return t?e.filter((n,r)=>{let o=e[r===0?e.length-1:r-1];return n[0]!==o[0]||n[1]!==o[1]}):e}function EH(e){let[t,n,r,o]=e;return[t,r>=0?n:n+r,r>=0?r:-r,o]}function fA(e,t,n){if(e.length===0)return[];if(e=CH(e),e.length===0)return[];let r=kO([...e,e[0]]),o=[];for(let i=0;i<e.length;i++){let s=e[i>0?i-1:e.length-1],a=e[i],u=e[i<e.length-1?i+1:0],c=r[i]===1,l=KH(s,a,u,c?\"counterclockwise\":\"clockwise\",n);o.push(t?l:EH(l))}return o}function vH(e,t){return fA(e,!1,t)}function MH(e,t){return fA(e,!0,t)}function OS(e,t){return[e,t]}var _H=OS,RH=OS;function DH(e,t){let n=[t[0]-e[0],t[1]-e[1]],r=[e[0],e[1]];return yA(n,r)}function yA(e,t){return[e,t]}function NH(e){return e[0]}function OH(e){return e[1]}function AH(e,t){let n=[t[0]-e[0],t[1]-e[1],t[2]-e[2]],r=[e[0],e[1],e[2]];return gA(n,r)}function gA(e,t){return[e,t]}function wH(e){return e[0]}function LH(e){return e[1]}function FH(e){return e}function VH(e,t){return[e,t]}function BH(e){return e[0]}function GH(e){return e[1]}function qH(e,t,n){return[e,t,n]}function Gd([e,t,n]){let[r,o]=e,[i,s]=t,[a,u]=n,c=i*i+s*s,l=(r*r+o*o-c)/2,p=(c-a*a-u*u)/2,d=(r-i)*(s-u)-(i-a)*(o-s);d=1/d;let m=(l*(s-u)-p*(o-s))*d,f=((r-i)*p-(i-a)*l)*d;return[m,f]}function UH(e){return e[0]}function zH(e){return e[1]}function kH(e){return e[2]}function qd(e){let[[t,n],[r,o],[i,s]]=e,a=r-t,u=o-n,c=i-r,l=s-o;return 2*Math.atan2(a*l-c*u,a*c+u*l)}function AS(e){let t=Math.abs(qd(e));return t<1e-9||t>2*Math.PI-1e-9}function HH(e){return e[0]}function $H(e){return e[1]}function YH(e){return e[0]}function ZH(e){return e[1]}function hA(e){return Math.abs(e)===Math.PI?Math.PI:mp(e+Math.PI,2*Math.PI)-Math.PI}function bA(e,t,n,r){return[e,hA(t),n,r]}function XH([e,t,n,r]){return[e,t,n,r]}function WH(e){return e[2]}function jH(e){return e[3]}function xA(e){let[t,n,r,o]=e,i=Math.PI*2,s=r===0?i:r>0?r-i:r+i;return[t,n,s,o]}function JH(e){let[t,n,r,o]=xA(e);return[t,n,r,o]}function QH(e){let[t,n,r,o]=e,i=r>=0?Math.PI-r:-Math.PI-r;return[t,hA(n+r),i,o]}function KH(e,t,n,r,o){let i=e[0]-t[0],s=e[1]-t[1],a=n[0]-t[0],u=n[1]-t[1],c=Math.atan2(s,i),l=Math.atan2(i*u-s*a,i*a+s*u),p=2*Math.PI;return r===\"clockwise\"?l-=l<0?0:p:r===\"counterclockwise\"&&(l+=l<0?p:0),bA(t,c,l,o)}function e$(e,t){let[[n,r],[o,i],s]=e;return[[n*t,r*t],[o*t,i*t],s]}function t$(e,t){let n=new Array(e.length);for(let r=0;r<n.length;r++){let o=e[r];n[r]=[o[0]*t,o[1]*t]}return n}function wS(e,t){let[[n,r],[o,i]]=e;return[[t*n,t*r],[t*o,t*i]]}var n$=wS,r$=wS;function o$(e,t){let[[n,r],o]=e;return[[t*n,t*r],t*o]}function i$(e,t){let[[n,r],[o,i],[s,a]]=e;return[[t*n,t*r],[t*o,t*i],[t*s,t*a]]}function s$(e,t){let[[n,r],o,i,s]=e;return[[t*n,t*r],t*o,t*i,s]}function a$(e,t){if(e.length!==t.length)throw new Error(\"Polygon tangent must be added to polygon of same length.\");let n=new Array(e.length);for(let r=0;r<n.length;r++){let o=e[r],i=t[r];n[r]=[o[0]+i[0],o[1]+i[1]]}return n}function ab(e,t){let[[n,r],[o,i]]=e,[[s,a],[u,c]]=t;return[[n+s,r+a],[o+u,i+c]]}function u$(e,t){let[[n,r,o],[i,s,a]]=e,[[u,c,l],[p,d,m]]=t;return[[n+u,r+c,o+l],[i+p,s+d,a+m]]}var c$=ab,l$=ab,p$=ab;function d$(e,t){let[[n,r],o]=e,[[i,s],a]=t;return[[n+i,r+s],o+a]}function m$(e,t){let[[n,r],[o,i],[s,a]]=e,[[u,c],[l,p],[d,m]]=t;return[[n+u,r+c],[o+l,i+p],[s+d,a+m]]}function f$(e,t){let[[n,r],o,i,s]=e,[[a,u],c,l]=t;return[[n+a,r+u],o+c,i+l,s]}function y$(e,t){let[[n,r],[o,i],s]=e,[[a,u],[c,l]]=t;return[[n+a,r+u],[o+c,i+l],s]}function LS(e,t){let[[n,r],[o,i]]=e;return[(1-t)*n+t*o,(1-t)*r+t*i]}function FS(e,t){return LS(e,mr(t,0,1))}function g$(e,t){t=mr(t,0,1);let[[n,r,o],[i,s,a]]=e;return[(1-t)*n+t*i,(1-t)*r+t*s,(1-t)*o+t*a]}function uS(e,t){return LS(e,mr(t,0,1/0))}function h$(e,t){let[[n,r],o]=e,i=Math.min(1,Math.max(0,t));return[n+o*Math.cos(2*Math.PI*i),r+o*Math.sin(2*Math.PI*i)]}function TA(e,t){let n=ub(e);if(!n)return[NaN,NaN];if(n.type===\"segment\")return FS([e[0],e[2]],t);if(n.type===\"rays\")return t<=0?uS([n.start1,n.end1],-t):t>=1?uS([n.start2,n.end2],t-1):[NaN,NaN];t=Math.min(1,Math.max(0,t));let r=Gd(e),o=qd(e),i=Math.atan2(e[0][1]-r[1],e[0][0]-r[0]),s=Ld(r,e[0]),a=i+t*o;return[r[0]+s*Math.cos(a),r[1]+s*Math.sin(a)]}function b$(e,t){if(isNaN(t)||e.length===0)return[[NaN,NaN],[NaN,NaN]];if(t<0||t>=e.length)return[e[0],e[0]];let n=Math.floor(t);return[e[n],e[(n+1)%e.length]]}function x$(e,t){if(isNaN(t)||e.length===0)return[NaN,NaN];if(t<0||t>=e.length)return e[0];let n=Math.floor(t);return FS([e[n],e[(n+1)%e.length]],t-n)}function ub(e){let[t,n,r]=e,[[o,i],[s,a],[u,c]]=[t,n,r];if(isNaN(o)||isNaN(i)||isNaN(s)||isNaN(a)||isNaN(u)||isNaN(c))return;let l=Gd([t,n,r]),p=Ld(l,t);if(isFinite(p)&&!AS([t,n,r])){let d=Math.atan2(t[1]-l[1],t[0]-l[0]),m=d+qd([t,n,r]);return{type:\"arc\",center:l,radius:p,startAngle:d,endAngle:m}}else{let d=ia(s,a,0,o,i,0,u,c,0);return d<0||d>1?{type:\"rays\",start1:[o,i],end1:[o+(o-u),i+(i-c)],start2:[u,c],end2:[u+(u-o),c+(c-i)]}:{type:\"segment\",start:[o,i],end:[u,c]}}}function T$(e,t,n){let o=Ld(e,t);if(o>1e-9)return t;let i=Ld(e,n);return i>1e-9?n:isNaN(o)&&isNaN(i)?[NaN,NaN]:e}function ny(e,t){let[[n,r],o]=e,[[i,s],a]=t,u=oi(i-n,s-r),c=u*u,l=o*o,p=a*a,[d,m,f]=[u,o,a].sort((E,S)=>S-E),g=d+m+f,y=f-(d-m),h=f+(d-m),b=d+(m-f),T=.01,I;return y<0&&d+T*y===d||h<0&&d+T*h===d||b<0&&d+T*b===d?I=0:I=Math.sqrt(g*y*h*b)/4,[(i+n)/2+(i-n)*(l-p)/(2*c)+-2*(s-r)*I/c,(s+r)/2+(s-r)*(l-p)/(2*c)+2*(i-n)*I/c]}function kh(e,t,n){let[[r,o],i]=e,[[s,a],[u,c]]=t,l=s-r,p=u-r,d=a-o,m=c-o,f=u-s,g=c-a,y=f*f+g*g,h=oi(f,g),b=l*m-p*d,T=i*h,I=T+b,E=T-b,S=.01,C;if(I<0&&T+S*I===T||E<0&&T+S*E===T?C=0:C=I*E,C<0)return[NaN,NaN];let v=Math.sqrt(C);return[r+(b*g+n*f*v)/y,o+(-b*f+n*g*v)/y]}function I$(e,t){let[[n,r],[o,i]]=e,[[s,a],[u,c]]=t,l=i-r,p=n-o,d=c-a,m=s-u,f=l*n+p*r,g=d*s+m*a,y=l*m-d*p,h=y/(oi(l,p)*oi(d,m));return y===0||1+.1*h===1?[NaN,NaN]:[(m*f-p*g)/y,(l*g-d*f)/y]}function VS(e,t,n=0){let r=kh(t,e,-1);if(ol(r,e,n,!0))return r;{let o=kh(t,e,1);return ol(o,e,n,!0)?o:[NaN,NaN]}}function BS(e,t,n=0){let r=kh(e,t,1);if(ol(r,t,n,!1))return r;{let o=kh(e,t,-1);return ol(o,t,n,!1)?o:[NaN,NaN]}}function IA(e,t,n=0){let r=I$(e,t);return!ol(r,e,n,!0)||!ol(r,t,n,!1)?[NaN,NaN]:r}function P$(e,t,n=0){let r=CA(t,e,n,-1);return Fd(r,t,n,!1)?r:[NaN,NaN]}function PA(e,t,n=0){let r=EA(t,e,n,-1);return!ol(r,e,n,!0)||!Fd(r,t,n,!1)?[NaN,NaN]:r}function S$(e,t,n=0){let r=CA(e,t,n,1);return Fd(r,e,n,!0)?r:[NaN,NaN]}function SA(e,t,n=0){let r=EA(e,t,n,1);return!Fd(r,e,n,!0)||!ol(r,t,n,!1)?[NaN,NaN]:r}function C$(e,t,n=0){let r=E$(e,t,n);return!Fd(r,e,n,!0)||!Fd(r,t,n,!1)?[NaN,NaN]:r}function E$(e,t,n){let r=$h(e);if(Yh(r))return PA(r,t,n);let o=$h(t);return Yh(o)?SA(e,o,n):GS(()=>ny(r,o),()=>ny(o,r),i=>qS(-1,Hh(e,i),Hh(t,i)))}function CA(e,t,n,r){let o=$h(e);return Yh(o)?r>0?BS(t,o,n):VS(o,t,n):GS(()=>ny(o,t),()=>ny(t,o),i=>qS(r,Hh(e,i),v$(t,i)))}function EA(e,t,n,r){let o=$h(e);return Yh(o)?IA(o,t,n):GS(()=>BS(o,t,n),()=>VS(t,o,n),i=>qS(r,Hh(e,i),M$(t)))}function GS(e,t,n){let r=e();if(n(r))return r;let o=t();return n(o)?o:[NaN,NaN]}function qS(e,t,n){return e*MA(t,n)>0}function Hh(e,[t,n]){let[r,o]=Gd(e);return qd(e)>0?[o-n,t-r]:[n-o,r-t]}function v$([[e,t]],[n,r]){return[t-r,n-e]}function M$([[e,t],[n,r]]){return[n-e,r-t]}function $h(e){let t=Gd(e),n=Ld(t,TA(e,0));return isFinite(n)&&!AS(e)?[t,n]:[e[0],e[2]]}function Yh(e){return Array.isArray(e[1])}function Fd([e,t],n,r,o){let[i,s]=Gd(n);return(o?(r&3)===0:(r&12)===0)||yh(Math.atan2(t-s,e-i),Math.atan2(n[0][1]-s,n[0][0]-i),qd(n))}function ol([e,t],[[n,r],[o,i]],s,a){let u=ia(e,t,0,n,r,0,o,i,0),[c,l]=a?[(s&1)===0,(s&2)===0]:[(s&4)===0,(s&8)===0];return!isNaN(u)&&(u>=0||c)&&(u<=1||l)}function _$(e,t){let[[n,r],[o,i]]=e,[s,a]=t;return[[s,a],[s+(o-n),a+(i-r)]]}function R$(e,t){let[[n,r],[o,i]]=e,[s,a]=t;return[[s,a],[s+(i-r),a-(o-n)]]}function D$(e){let[t,n,r]=e,[o,i]=t,s=Xn(n+r/2),a=Ln(n+r/2);return[[o,i],[o+s,i+a]]}function vA(e,t){let[n,r]=e,[o,i]=t;return[n*o-r*i,n*i+o*r]}function US(e,t){let[n,r,o]=e,[i,s]=n,[a,u]=t;return o&&(u=-u),s===0?[i*a,i*u]:[i*a-s*u,i*u+a*s]}function MA(e,t){let[n,r]=e,[o,i]=t;return n*i-o*r}function N$(e,t){let[n,r]=e,[o,i]=t;return n*o+r*i}function O$(e){let[t,n]=e;return[-n,t]}function A$(e,t){return[e,t,!1]}function w$(e,t){return[e,t,!0]}function L$(e){return[e[0],[0,0],e[2]]}function F$(e){return e[0]}function V$(e){return[[1,0],e,!1]}function B$(e,t){let[n,r]=e;return[[t,0],[(1-t)*n,(1-t)*r],!1]}function G$(e,t){let[n,r]=e,o=Math.cos(t),i=Math.sin(t);return[[o,i],[n*(1-o)+r*i,r*(1-o)-n*i],!1]}function q$(e){let[[t,n],[r,o]]=e,i=r-t,s=o-n,a=i*i+s*s,u=(i*i-s*s)/a,c=2*i*s/a;return[[u,c],[(1-u)*t-c*n,(1+u)*n-c*t],!0]}function U$(e,t){let n=e[2],[r,o,i]=t;return[US(e,r),pa(e,o),i!==n]}function z$(e){let[[t,n],[r,o],i]=e,s=t*t+n*n,a=t/s,u=-n/s,c=-(t/s*r+n/s*o),l=-(t/s*o-n/s*r);return i&&(u=-u,l=-l),[[a,u],[c,l],i]}function pa(e,t){let[n,r]=US(e,t),[o,i]=e[1];return[n+o,r+i]}function k$(e,t){let[n,r,o]=e;return o?-t:t}function zS(e,t){let[n,r]=t;return[pa(e,n),pa(e,r)]}var H$=zS,$$=zS;function Y$(e,t){let[n,r]=t;return[US(e,n),pa(e,r)]}function Z$(e,t){let[n,r]=t,[[o,i]]=e;return[pa(e,n),oi(o,i)*r]}function X$(e,t){let[n,r,o]=t;return[pa(e,n),pa(e,r),pa(e,o)]}function W$(e,t){let n=[];for(let r of t)n.push(pa(e,r));return n}function j$(e,t){let[n,r,o]=t,i=pa(e,n),[s,a,u]=e,[c,l]=pa([s,[0,0],u],[Math.cos(r),Math.sin(r)]),p=Math.atan2(l,c),d=k$(e,o);return[i,p,d,t[3]]}function J$(e,t){let n=[];for(let r=0;r<Math.min(e.length,t.length);r++)t[r]&&n.push(e[r]);return n}function Q$(e,t){let n=[];for(let r of t)n.push(e[r]);return n}function K$(e){let t=[],n={};for(let r=0;r<e.length;r++){let o=e[r],i=Zh(o);n.hasOwnProperty(i)||(n[i]=!0,t.push(r))}return t}function e8(e,t){return[e,t]}function t8(e){return e[0]}function n8(e){return e[1]}function Zh(e){if(Array.isArray(e))return`[${e.map(Zh).join(\",\")}]`;switch(typeof e){case\"string\":return e;case\"boolean\":case\"number\":return e.toString();case\"object\":if(Sc(e)){let n=[];if(e.updateRules)for(let[{symbol:r},o]of ms(e.updateRules))n.push(`\"${String(r)}\": ${Zh(o.value)}`);return`{${n.join(\",\")}}`}else return F(e).toString();default:return e}}function r8(e){return e}function o8(e){return e}function Kt(e,t){return isNaN(e)||isNaN(t)?[NaN,NaN]:[e,t]}function el(e,t){return isNaN(e)||isNaN(t)?Kt(NaN,NaN):e===0?Kt(0,0):Kt(e*Xn(t),e*Ln(t))}function i8([e,t]){return e}function s8([e,t]){return t}function a8([e,t]){return sy(t,e)}function bp([e,t]){return[e,-t]}function il(e,t){let[n,r]=t;return Math.abs(r)<=Math.abs(n)?_1(e,t):bp(_1(M1(e),M1(t)))}function M1([e,t]){return[t,e]}function _1([e,t],[n,r]){let o=r/n,i=1/(n+r*o);return o===0?Kt((e+r*(t/n))*i,(t-r*(e/n))*i):Kt((e+t*o)*i,(t-e*o)*i)}function _A([e,t]){return xp(e,t)}function xp(e,t){let n=Math.sqrt(.5*(Math.abs(e)+oi(e,t)));return n===1/0&&(n=2*Math.sqrt(.5*(Math.abs(.25*e)+oi(.25*e,.25*t)))),n===0||!isFinite(t)?Kt(n,t):e>0?Kt(n,.5*(t/n)):(t<0&&(n=-n),Kt(.5*(t/n),n))}function ii(e){return il(Kt(1,0),e)}function ry(e){return 0+e}function sy(e,t){return Math.atan2(ry(e),ry(t))}function u8(e,t){let n=e*e+t*t;if(n===1/0)return Math.log(Math.hypot(.5*e,.5*t))+Math.LN2;if(n===0)return Math.log(Math.hypot(e,t));if(.5<n&&n<3){let r=Math.max(e,t),o=Math.min(e,t);return .5*Math.log1p((r+1)*(r-1)+o*o)}else return .5*Math.log(n)}function cS([e,t]){return Kt(u8(e,t),sy(t,e))}function c8([e,t]){let n=Math.exp(e);return t===0?Kt(n,0):el(n,t)}function l8([e,t]){return Kt((e+t)*(e-t),2*e*t)}function R1(e,t){t=t>>>0;let[n,r]=e,o=1,i=0;for(;t;){for(;!(t&1);){let u=(n+r)*(n-r),c=2*n*r;n=u,r=c,t=t>>>1}let s=n*o-r*i,a=n*i+o*r;o=s,i=a,t=t-1>>>0}return Kt(o,i)}function p8(e,t){let[n,r]=t;if(r===0)return RA(e,n);let[o,i]=e;if(isNaN(o)||isNaN(i)||isNaN(n)||isNaN(r))return Kt(NaN,NaN);let s=oi(o,i),a=sy(i,o),u=Math.pow(s,n)*Math.exp(-a*r),c=Math.log(s)*r+a*n;return isFinite(u)?el(u,c):el(Math.exp(n*Math.log(s)-a*r),c)}function RA(e,t){let[n,r]=e;if(isNaN(n)||isNaN(r)||isNaN(t))return Kt(NaN,NaN);switch(t){case-1:return ii(e);case 0:return Kt(1,0);case .5:return _A(e);case 1:return e}return r===0?Number.isInteger(t)||n>=0?Kt(Math.pow(n,t),0):el(Math.pow(-n,t),Math.PI*t):n===0?r>=0?el(Math.pow(r,t),.5*Math.PI*t):el(Math.pow(-r,t),-.5*Math.PI*t):t===2?l8(e):t===(t|0)?t<0?ii(R1(e,-t)):R1(e,t):el(Math.pow(Math.hypot(n,r),t),t*sy(r,n))}function DA([e,t]){return Kt(Ln(e)*Vd(t),Xn(e)*Tp(t))}function NA([e,t]){return Kt(Xn(e)*Vd(t),-Ln(e)*Tp(t))}function OA([e,t]){let[n,r]=kS([-t,e]);return[r,-n]}function AA([e,t]){return Kt(Tp(e)*Xn(t),Vd(e)*Ln(t))}function wA([e,t]){return Kt(Vd(e)*Xn(t),Tp(e)*Ln(t))}function kS([e,t]){let n=xS(t),r=gS(e);if(!isFinite(n))return Kt(1/r,1/n);let o=n*n,i=1+o,s=Tp(e),a=s*s,u=r*r;return Kt(i*r/(1+o*u),n/(1+i*a))}function d8(e){return ii(NA(e))}function m8(e){return ii(DA(e))}function f8(e){return ii(OA(e))}function y8(e){return ii(wA(e))}function g8(e){return ii(AA(e))}function h8(e){return ii(kS(e))}function HS([e,t]){let n=xp(1-e,-t),r=xp(1+e,t);return Kt(Math.atan(e/ry(gp(n,r)[0])),Math.asinh(gp(bp(n),r)[1]))}function LA([e,t]){let n=xp(1-e,-t),r=xp(1+e,t);return Kt(2*Math.atan(n[0]/ry(r[0])),Math.asinh(gp(bp(r),n)[1]))}function lS([e,t]){let[n,r]=Xh([-t,e]);return[r,-n]}function FA([e,t]){let[n,r]=HS([-t,e]);return[r,-n]}function VA([e,t]){let n=xp(e-1,t),r=xp(e+1,t);return Kt(Math.asinh(gp(bp(n),r)[0]),2*Math.atan(n[1]/ry(r[0])))}function Xh([e,t]){if(e<0){let[n,r]=N1(-e,-t);return[-n,-r]}else return N1(e,t)}var D1=Math.sqrt(Number.MAX_VALUE)/4;function N1(e,t){if(e>D1||Math.abs(t)>D1)return Kt(ii([e,t])[0],t<=0?-Math.PI/2:Math.PI/2);if(e===1){if(t===0)return Kt(1/0,0);let n=Math.abs(t),r=Math.log(Math.sqrt(Math.sqrt(4+t*t))/Math.sqrt(n)),o=(Math.PI/2+Math.atan(n/2))/2;return t<0!=o<0&&(o=-o),Kt(r,o)}else return Kt(Bd(4*e/((1-e)**2+t**2))/4,-sy(-2*t,(1-e)*(1+e)-t**2)/2)}function b8(e){return LA(ii(e))}function x8(e){return HS(ii(e))}function T8(e){if(e[0]>0)return lS(ii(e));let[t,n]=lS(e);return Kt(Math.PI/2-t,-n)}function I8(e){let[t,n]=e;return t===0&&n===0?Kt(1/0,0):VA(ii(e))}function P8(e){let[t,n]=e;return t===0&&n===0?Kt(1/0,0):FA(ii(e))}function S8(e){return e[0]>0?bp(Xh(bp(ii(e)))):Xh(ii(e))}function $S([e,t]){return t===0?e:NaN}function C8([e,t]){let r=Math.abs(t),o=Math.abs(t/e);return(isNaN(o)?r:Math.min(r,o))<1e-15?e:NaN}function E8([e,t],n){var r,o;return t===0?((r=n.goodCoercionCount)!=null||(n.goodCoercionCount=0),n.goodCoercionCount++,e):(isNaN(t)||((o=n.badCoercionCount)!=null||(n.badCoercionCount=0),n.badCoercionCount++),NaN)}function YS(e){return e!==0&&!isNaN(e)}function v8([e,t],n){var a,u;let o=Math.abs(t),i=Math.abs(t/e);return(isNaN(i)?o:Math.min(o,i))<1e-15?((a=n.goodCoercionCount)!=null||(n.goodCoercionCount=0),n.goodCoercionCount++,e):(isNaN(t)||((u=n.badCoercionCount)!=null||(n.badCoercionCount=0),n.badCoercionCount++),NaN)}function M8(e){return isNaN(e)?[NaN,NaN]:[e,0]}function _8(e,t){return t}function BA([e,t]){let n=Math.floor(e),r=Math.floor(t);if(!isFinite(n)||!isFinite(r))return[n,r];let o=e-n,i=t-r;return o+i<1?[n,r]:o>=i?[n+1,r]:[n,r+1]}function R8([e,t]){let n=BA([-e,-t]);return[-n[0],-n[1]]}function Od(e){return[Math.round(e[0]),Math.round(e[1])]}function D8(e,t){let[n,r]=e,[o,i]=t;if(!isFinite(n)||!isFinite(r)||isNaN(o)||isNaN(i))return[NaN,NaN];if(!isFinite(o)&&!isFinite(i))return e;if(o===1/0)return Lh(n,r,i);if(o===-1/0){let[d,m]=Lh(-n,-r,-i);return[-d,-m]}else if(i===1/0){let[d,m]=Lh(r,-n,-o);return[-m,d]}else if(i===-1/0){let[d,m]=Lh(-r,n,o);return[m,-d]}let s=pS(t),a=n*o+r*i,u=r*o-n*i,c=mp(a,s),l=mp(u,s);c+l<s||(c>=l?c-=s:l-=s);let p=il([c,l],[o,-i]);return Number.isInteger(n)&&Number.isInteger(r)&&Number.isInteger(o)&&Number.isInteger(i)?[Math.round(p[0]),Math.round(p[1])]:p}function Lh(e,t,n){return e+t<0?e>=t?Kt(e-n,1/0):Kt(1/0,t+n):[e,t]}function pS([e,t]){return e*e+t*t}function dS(e,t){if(!isFinite(e[0])||!isFinite(e[1])||!isFinite(t[0])||!isFinite(t[1]))return[NaN,NaN];e=Od(e),t=Od(t);let n=ZS(e,t);return GA(n)}function ZS(e,t){let n=[1,0];for(e=[e[0],e[1]],t=[t[0],t[1]];;){let r=pS(e),o=pS(t);if(r===1||o===1)return n;if(r===0)return gp(t,n);if(o===0)return gp(e,n);if(r===o&&O8(e,t))return gp(e,n);switch(Fh(e[0])<<3|Fh(e[1])<<2|Fh(t[0])<<1|Fh(t[1])){case 0:Dd(e),Dd(t),N8(n);break;case 1:case 2:Dd(e);break;case 4:case 8:Dd(t);break;case 3:Dd(e),Nd(t),tS(n);break;case 12:Nd(e),Dd(t),tS(n);break;case 14:case 13:Nd(e);break;case 7:case 11:Nd(t);break;case 15:Nd(e),Nd(t),tS(n);break;case 5:case 10:e=[.5*(e[0]-t[0]),.5*(e[1]-t[1])],t=[e[0]+t[0],e[1]+t[1]];break;case 6:case 9:e=[.5*(e[0]+t[1]),.5*(e[1]-t[0])],t=[e[0]-t[1],e[1]+t[0]];break}}}function N8(e){e[0]*=2,e[1]*=2}function Dd(e){e[0]*=.5,e[1]*=.5}function tS(e){let t=e[0]-e[1];e[1]=e[1]+e[0],e[0]=t}function Nd(e){let t=.5*(e[0]+e[1]);e[1]=.5*(e[1]-e[0]),e[0]=t}function Fh(e){return e%2==0?0:1}function gp(e,t){let[n,r]=e,[o,i]=t;return Kt(n*o-r*i,n*i+o*r)}function O8(e,t){return e[0]==t[0]&&e[1]==t[1]||e[0]==-t[0]&&e[1]==-t[1]||e[0]==-t[1]&&e[1]==t[0]||e[0]==t[1]&&e[1]==-t[0]}function GA(e){let[t,n]=e;return t>=0&&n<0?[-n,t]:t<0&&n<=0?[-t,-n]:t<=0&&n>0?[n,-t]:e}function mS(e,t){if(!isFinite(e[0])||!isFinite(e[1])||!isFinite(t[0])||!isFinite(t[1]))return[NaN,NaN];if(e[0]===0&&e[1]===0||t[0]===0&&t[1]===0)return[0,0];if(!isFinite(e[0])||!isFinite(e[1])||!isFinite(t[0])||!isFinite(t[1]))return[NaN,NaN];e=Od(e),t=Od(t);let n=ZS(e,t),r=Od(il(e,n)),o=vA(r,t);return GA(o)}function A8(e,t,n){let r=e.length/t;if(r!==n||!Number.isInteger(r))throw new Error(\"Invalid matrix dimensions\");let o=[];for(let i=0;i<t;i++)for(let s=0;s<n;s++)o[i]===void 0&&(o[i]=0),o[i]+=e[s*t+i];return o}function w8(e,t,n){let r=e.length/t;if(r!==n||!Number.isInteger(r))throw new Error(\"Invalid matrix dimensions\");let o=[];for(let i=0;i<t;i++)for(let s=0;s<n;s++)o[s]===void 0&&(o[s]=0),o[s]+=e[s*t+i];return o}function L8(e,t){let n=X1(e),r=[];for(let o=0;o<t.length;o++)for(let i=0;i<e.length;i++)r.push(e[i]*t[o]/n);return r}function da(e){if(typeof e==\"string\")return e;if(e===void 0)return\"\";if(isNaN(e))return\"\\\\frac{0}{0}\";if(e===1/0)return\"\\\\infty\";if(e===-1/0)return\"-\\\\infty\";let t=e+\"\";return t=t.replace(/^1e\\+?([-\\d]+)/,\"10^{$1}\"),t=t.replace(/([-\\d\\.]+)e\\+?([-\\d]+)/,\"$1\\\\cdot 10^{$2}\"),t}function cb(e){let t=e+\"\";if(/\\d+\\.?\\d*e[\\+\\-]*\\d+/i.test(t)){let n=\"0\",r=String(t).toLowerCase().split(\"e\"),o=parseFloat(r[0]),i=parseInt(r[1],10),s=Math.abs(i),a=Math.abs(o).toString().split(\".\");if(i<0)t=\"0.\"+new Array(s).join(n)+a.join(\"\");else{let u=a[1];u&&(s=s-u.length),t=a.join(\"\")+new Array(s+1).join(n)}o<0&&(t=\"-\"+t)}return t}function WS(e,t=e,n=!1){if(isNaN(e)||!isFinite(e))return{string:\"undefined\",latex:\"undefined\",value:e};if(e===0)return{string:\"0\",latex:\"0\",value:e};Math.abs(e)>Math.abs(t)&&(t=e);let r=bc(e/Math.PI,24),o,i,s,a,u,c,l=n?U8(t):q8(t);if(l&&Xi(r.n/r.d*Math.PI,e,3))return r.n===0?(o=\"0\",a=\"0\"):r.n===1?(o=\"\\u03C0\",a=\"\\\\pi\"):r.n===-1?(o=\"-\\u03C0\",a=\"-\\\\pi\"):(o=r.n.toString()+\"\\u03C0\",a=r.n.toString()+\"\\\\pi\"),r.d===1?(i=\"\",u=\"\"):(i=\"/\"+r.d.toString(),u=r.d.toString()),s=o+i,u===\"\"?c=a:a[0]===\"-\"?c=`-\\\\frac{${a.slice(1)}}{${u}}`:c=`\\\\frac{${a}}{${u}}`,{string:s,latex:c,value:r.n/r.d*Math.PI};if(l)return s=G8(ay(e.toFixed(XS(t)))),{string:s,latex:s,value:parseFloat(s)};{let p=ay(e.toExponential(XS(t/e))).split(\"e\"),d=p[0]===\"1\"&&n?\"10\":p[0]+\"\\xD710\",m=p[1].replace(\"+\",\"\");return s=ay(e.toExponential(XS(t/e))).replace(\"+\",\"\"),c=`${p[0]}\\\\times10^{${m}}`,{string:s,latex:c,mantissa:d,superscript:m,value:parseFloat(s)}}}function F8(e,t,n,r){let o=WS(e,t),i=WS(r(o.value),n);return[o,i]}var V8=/\\.?0+$/,B8=/\\.?0+e/;function ay(e){return e.indexOf(\".\")===-1?e:e.indexOf(\"e\")!==-1?e.replace(B8,\"e\"):e.replace(V8,\"\")}function G8(e){return e===\"-0\"?\"0\":e}function q8(e){return e=Math.abs(e),1e-4<e&&e<1e7}function U8(e){return e=Math.abs(e),.001<e&&e<1e4}var z8=5,k8=5;function XS(e){return e=Math.abs(e),e=Math.max(e,1e-16),Math.max(z8,Math.floor(k8+1.5-Math.log10(e)))}var lb={zeroCutoff:0,smallCutoff:.001,bigCutoff:1e6,digits:10,displayAsFraction:!1,addEllipses:!1,alwaysEmitImaginary:!1,spaceConstrained:!1},qA={smallCutoff:1e-6,bigCutoff:1e9,digits:12},jS={...qA,smallCutoff:1e-4,bigCutoff:1e6,digits:9,scientificNotationDigits:4,spaceConstrained:!0};function UA(e){return 1e6/Math.sqrt(Math.abs(e))}function zA(e){let t=UA(e);if(t<1||t>1e12)return!1;let{n,d:r}=bc(e,t);return r===1?!1:e===e+Math.pow(2,-3)*Math.abs(n/r-e)}function pb(e,t){var g;let{zeroCutoff:n,smallCutoff:r,bigCutoff:o,digits:i,displayAsFraction:s,addEllipses:a,spaceConstrained:u}={...lb,...t},c=(g=t==null?void 0:t.scientificNotationDigits)!=null?g:i-2;if(isNaN(e)||!isFinite(e))return{type:\"undefined\"};if(e===0||Math.abs(e)<n)return{type:\"decimal\",value:\"0\"};let p=ay(e.toExponential(c)).match(/([\\d\\.\\-]+)e\\+?([\\d\\-]+)/);if(!p)return{type:\"undefined\"};let d=parseInt(p[2],10),m=d>=i;if(zA(e)&&s){let y=bc(e,UA(e));return{type:\"fraction\",numerator:y.n.toString(),denominator:y.d.toString()}}else{if(Math.abs(e)>o||Math.abs(e)<r||m)return{type:\"scientific\",mantissa:p[1],exponent:p[2]};{let y=mr(u&&d<0?i+d:i,1,100),h=ay(e.toPrecision(y));return e!==Number(h)&&a&&(h+=\"...\"),{type:\"decimal\",value:h}}}}function db(e,t){let n=pb(e,t);switch(n.type){case\"undefined\":return\"undefined\";case\"decimal\":return n.value;case\"scientific\":return n.mantissa+\"<span class='dcg-cross'>\\xD7</span>10<sup>\"+n.exponent+\"</sup>\";case\"fraction\":return n.denominator===\"1\"?n.numerator:`${n.numerator}/${n.denominator}`;default:return n}}function Ud(e,t){let n=pb(e,t);switch(n.type){case\"undefined\":return\"undefined\";case\"decimal\":return n.value;case\"scientific\":return n.mantissa+\" * 10^\"+n.exponent;case\"fraction\":return n.denominator===\"1\"?n.numerator:`${n.numerator}/${n.denominator}`;default:return n}}function sl(e,t){let n=pb(e,t);switch(n.type){case\"undefined\":return\"undefined\";case\"decimal\":return n.value;case\"scientific\":return n.mantissa+\"\\\\times10^{\"+n.exponent+\"}\";case\"fraction\":return n.denominator===\"1\"?n.numerator:n.numerator[0]===\"-\"?`-\\\\frac{${n.numerator.slice(1)}}{${n.denominator}}`:`\\\\frac{${n.numerator}}{${n.denominator}}`;default:return n}}function Y(e){if(e.startsWith(\"_base_case\")){let[n,r,o]=e.split(\":\"),i=[];for(let s of o.split(\",\")){let a=parseFloat(s);isNaN(a)?i.push(Y(s)):i.push(Ud(a))}return`${Y(r)}(${i.join(\",\")})`}e=e.replace(\"\\\\\",\"\");let t={alpha:\"\\u03B1\",beta:\"\\u03B2\",gamma:\"\\u03B3\",delta:\"\\u03B4\",epsilon:\"\\u03F5\",varepsilon:\"\\u03B5\",zeta:\"\\u03B6\",eta:\"\\u03B7\",theta:\"\\u03B8\",vartheta:\"\\u03D1\",iota:\"\\u03B9\",kappa:\"\\u03BA\",varkappa:\"\\u03F0\",lambda:\"\\u03BB\",mu:\"\\u03BC\",xi:\"\\u03BE\",pi:\"\\u03C0\",varpi:\"\\u03D6\",rho:\"\\u03C1\",varrho:\"\\u03F1\",sigma:\"\\u03C3\",varsigma:\"\\u03C2\",tau:\"\\u03C4\",phi:\"\\u03D5\",varphi:\"\\u03C6\",chi:\"\\u03C7\",psi:\"\\u03C8\",omega:\"\\u03C9\",Gamma:\"\\u0393\",Delta:\"\\u0394\",Theta:\"\\u0398\",Lambda:\"\\u039B\",Xi:\"\\u039E\",Pi:\"\\u03A0\",Sigma:\"\\u03A3\",Phi:\"\\u03A6\",Psi:\"\\u03A8\",Omega:\"\\u03A9\",div:\"\\xF7\",cdot:\"\\u22C5\",times:\"\\xD7\",lt:\"<\",gt:\">\",le:\"\\u2264\",ge:\"\\u2265\",sim:\"\\u223C\",ldots:\"\\u2026\",prime:\"\\u2032\",approx:\"\\u2248\",to:\"\\u2192\",\"->\":\"\\u2192\",\"<=\":\"\\u2264\",\">=\":\"\\u2265\"};return t.hasOwnProperty(e)?t[e]:e}function Mo(e){let t=e.match(/^\\$(\\d+)$/);if(t)return`\\\\token{${t[1]}}`;let n=e.split(\"_\"),r=\"\";return n[0].length>1&&(r+=\"\\\\\"),r+=n[0],n[1]&&(r+=\"_{\"+n[1]+\"}\"),r}function H8(e){if(!e)return\"\";let t=e.split(\"_\");t[0]=Y(t[0]);let n=t.map(gO);return n[1]&&(n[1]=\"<sub>\"+n[1]+\"</sub>\"),n.join(\"\")}function ks(e){let t=e.match(/\\\\token\\{(\\d+)\\}/);return t?`$${t[1]}`:(e=e.replace(/\\\\operatorname\\{(.*)\\}/,\"$1\"),e.replace(/[{}\\\\]/g,\"\"))}function ma(e){return e.replace(/^(\\\\ |\\s|\\\\space(?![a-zA-Z]))+/,\"\").replace(/(\\\\ |\\s|\\\\space(?![a-zA-Z]))+$/,\"\")}function uy(e,t={},n=\"latex\"){let r={...lb,...t},{alwaysEmitImaginary:o}=r,i;n===\"decimalString\"?i=cb:n===\"latex\"?i=sl:i=db;let[s,a]=[e[0]!==0?i(e[0],r):void 0,e[1]!==0||o?i(Math.abs(e[1]),r):void 0];return s===\"undefined\"||a===\"undefined\"?\"undefined\":s&&a?`${s}${e[1]>=0?\"+\":\"-\"}${a!==\"1\"?`${a}`:\"\"}i`:a?`${e[1]>=0?\"\":\"-\"}${a!==\"1\"?`${a}`:\"\"}i`:s!=null?s:\"0\"}function JS(e,t={}){let[n,r]=[e[0]!==0?Ud(e[0],t):void 0,e[1]!==0?Ud(Math.abs(e[1]),t):void 0];if(n===\"undefined\"||r===\"undefined\")return\"undefined\";let o=r!=null&&r.includes(\" * \")||r!=null&&r.includes(\"/\")?\" \":\"\";return n&&r?`${n}${e[1]>0?\" + \":\" - \"}${r!==\"1\"?`${r}${o}`:\"\"}i`:r?`${e[1]>0?\"\":\"-\"}${r!==\"1\"?`${r}${o}`:\"\"}i`:n!=null?n:\"0\"}function $8(e,t={},n=\"latex\"){let r={...lb,...t},o;n===\"decimalString\"?o=cb:n===\"latex\"?o=sl:o=db;let[i,s]=[o(e[0],r),o(e[1],r)];return i===\"undefined\"||s===\"undefined\"?\"undefined\":`\\\\left(${i},${s}\\\\right)`}function Y8(e,t={},n=\"latex\"){let r={...lb,...t},o;n===\"decimalString\"?o=cb:n===\"latex\"?o=sl:o=db;let[i,s,a]=[o(e[0],r),o(e[1],r),o(e[2],r)];return i===\"undefined\"||s===\"undefined\"||a===\"undefined\"?\"undefined\":`\\\\left(${i},${s},${a}\\\\right)`}function cy(e){return{__isLocalizableNumericValue:!0,value:e}}function OK(e){return e&&e.__isLocalizableNumericValue}var Hu=()=>({type:\"empty\"}),$r=()=>Z8([-1/0,1/0]),$a=()=>ys([-1/0,1/0]),ys=e=>mb(e,!0),Z8=e=>mb(e,!1),mb=(e,t)=>isNaN(e[0])||isNaN(e[1])||e[1]<e[0]?Hu():{type:\"interval\",bounds:e,tight:t};function Li(e){return e.type===\"empty\"}function fs(e){return Li(e)||e.tight}var zd=(e,t)=>{if(t===0)return e>0?$a():Hu();let n=-e/t,r=t<0?[-1/0,n]:[n,1/0];return ys(r)},fr=(e,t)=>{if(Li(e)||Li(t))return Hu();let n=[Math.max(e.bounds[0],t.bounds[0]),Math.min(e.bounds[1],t.bounds[1])],r=fs(e)&&fs(t);return mb(n,r)},ly=(e,t)=>{if(Li(e))return t;if(Li(t))return e;let n=[Math.min(e.bounds[0],t.bounds[0]),Math.max(e.bounds[1],t.bounds[1])],r;return!fs(e)&&!fs(t)?r=!1:fs(e)&&!fs(t)?r=e.bounds[0]<=t.bounds[0]&&e.bounds[1]>=t.bounds[1]:!fs(e)&&fs(t)?r=t.bounds[0]<=e.bounds[0]&&t.bounds[1]>=e.bounds[1]:r=e.bounds[0]<=t.bounds[1]&&t.bounds[0]<=e.bounds[1],mb(n,r)},kA=(e,t,n)=>{if(Li(e))return n;let r=fr(e,t);return fs(e)?(e.bounds[0]>-1/0&&(r=ly(r,fr(ys([-1/0,e.bounds[0]]),n))),e.bounds[1]<1/0&&(r=ly(r,fr(ys([e.bounds[1],1/0]),n)))):r=ly(r,fr(n,$r())),r};function Zo(e,t,n){return{input:e,start:t,end:n}}function Ya(e,t){return Zo(e,t,t)}function Fi(e,t){if(e.input!==t.input)throw new Error(\"Programming Error: cannot form a span on different inputs\");return Zo(e.input,e.start,t.end)}function vr(e){return e.input.slice(e.start,e.end)}var pt=class{constructor(){this.tableFrameID=void 0;this._dependencies=[],this._optionalDependencies=[],this._updateSymbols=[],this._scope={definitions:[],dependencies:[],substitutionDependencies:[],scopes:[]},this._exports=[],this.metaData={extraDepNodes:[]},this.userData={}}setInputSpan(t){this._inputSpan=t}getInputString(){return this._inputSpan===void 0?\"\":vr(this._inputSpan)}getInputSpan(){return this._inputSpan}shouldExportAns(){return!1}getAnsVariable(){return this.shouldExportAns()&&this.userData&&this.userData.hasOwnProperty(\"index\")?[\"ans_\"+this.userData.index]:[]}addDependency(t){this._dependencies.indexOf(t)===-1&&this._dependencies.push(t),this._scope.dependencies.indexOf(t)===-1&&this._scope.dependencies.push(t)}addDependencies(t){for(let n=0;n<t.length;n++)this.addDependency(t[n])}addOptionalDependencies(t){for(let n=0;n<t.length;n++){let r=t[n];this._dependencies.indexOf(r)===-1&&this._dependencies.push(r),this._optionalDependencies.indexOf(r)===-1&&this._optionalDependencies.push(r)}}addUpdateSymbol(t){this._dependencies.indexOf(t)===-1&&this._dependencies.push(t),this._updateSymbols.indexOf(t)===-1&&this._updateSymbols.push(t)}addSubstitutionDependencies(t){for(let n=0;n<t.length;n++){let r=t[n];if(this._dependencies.indexOf(r)===-1)throw new Error(\"Programming error: substitution dependency \"+r+\" must also be registered as a regular dependency\");this._scope.substitutionDependencies.indexOf(r)===-1&&this._scope.substitutionDependencies.push(r)}}mergeDependencies(...t){for(let n=0;n<t.length;n++){let r=t[n];for(let o=0;o<r._dependencies.length;o++)this._dependencies.indexOf(r._dependencies[o])===-1&&this._dependencies.push(r._dependencies[o]);for(let o=0;o<r._updateSymbols.length;o++)this._updateSymbols.indexOf(r._updateSymbols[o])===-1&&this._updateSymbols.push(r._updateSymbols[o]);for(let o=0;o<r._scope.dependencies.length;o++)this._scope.dependencies.indexOf(r._scope.dependencies[o])===-1&&this._scope.dependencies.push(r._scope.dependencies[o]);for(let o=0;o<r._scope.substitutionDependencies.length;o++)this._scope.substitutionDependencies.indexOf(r._scope.substitutionDependencies[o])===-1&&this._scope.substitutionDependencies.push(r._scope.substitutionDependencies[o]);this.addOptionalDependencies(r.getOptionalDependencies()),Array.prototype.push.apply(this._scope.scopes,r._scope.scopes)}}mergeDependenciesInScope(t,n,r,o){let i=r.getScope(),s={kind:t,definitions:n,dependencies:i.dependencies,substitutionDependencies:i.substitutionDependencies,scopes:i.scopes,functionDefinitionSymbol:o==null?void 0:o.functionDefinitionSymbol};this._scope.scopes.push(s);for(let a=0;a<r._dependencies.length;a++){let u=r._dependencies[a];!n.includes(u)&&!this._dependencies.includes(u)&&this._dependencies.push(u)}for(let a=0;a<r._updateSymbols.length;a++)this._updateSymbols.indexOf(r._updateSymbols[a])===-1&&this._updateSymbols.push(r._updateSymbols[a]);this.addOptionalDependencies(r.getOptionalDependencies())}getDependencies(){return this._dependencies}graphmodeDependencies(t,n){return this.getDependencies()}getOptionalDependencies(){return this._optionalDependencies}getUpdateSymbols(){return this._updateSymbols}getScope(){return this._scope}dependsOn(t){return this._dependencies.indexOf(t)>-1}getExports(t){let n=this._exports||[];if(this.userData&&\"id\"in this.userData){let r=this.userData.id;n=n.concat([\"idref_\"+r])}return t.ansEnabled()&&(n=n.concat(this.getAnsVariable())),n}getLegalExports(t){return this.getExports(t).filter(n=>!t.assignmentForbidden(n))}exportsSymbol(t){return this._exports.indexOf(t)>-1}getOperator(){return this.operator||\"=\"}isInequality(){return!1}isShadeBetween(){return!1}shouldPromoteToSlider(t){return!1}getSliderVariables(t,n,r){let o=t.sliderVariables(r!=null?r:n.getDependencies());return n.valueType===D||n.valueType===Yt||n.valueType===G||n.valueType===lo||n.valueType===N||n.valueType===Ye?t.is3dPolicy()?o.includes(\"t\")&&!o.includes(\"u\")&&!o.includes(\"v\")?o.filter(i=>i!=\"t\"):!o.includes(\"t\")&&(o.includes(\"u\")||o.includes(\"v\"))?o.filter(i=>i!=\"u\"&&i!=\"v\"):o:o.filter(i=>!t.validParametricVariable(i)):o}asValue(){}boundDomain(t){return $r()}getCursorContext(){}asCompilerValue(){}substitute(t){}getExpressionType(t,n){}tableInfo(t,n){}getGraphMode(t,n){}getMoveStrategy(t,n,r,o){}};var M=class extends pt{constructor(n){super();this.type=\"Error\";this.isError=!0;this.isList=!1;this.blocksExport=!1;this._msg=n,this.blocksExport=!0}evaluateOnce(n){return this._msg}getError(){return this._msg}setDependencies(n){return this.addDependencies(n),this}setActionValue(n){this.actionValue=n}allowExport(){return this.blocksExport=!1,this}setCursorContext(n){this.cursorContext=n}getCursorContext(){return this.cursorContext}},kd=class extends M{};var py={real:!0,imag:!0,conj:!0,arg:!0},$A=Object.keys(py);var Sp=class{constructor(t){this.singleExpression=t.singleExpression}isGeometryEnabled(){return!1}is3dProduct(){return!1}is3dPolicy(){return!1}isComplexEnabled(){return!1}isRecursionEnabled(){return!1}isRayCastEnabled(){return!1}polygonUnsupportedPreferTriangle(){return!1}areAllScalesLinear(){return!0}assignmentForbidden(t){return t.slice(0,3)!==\"ans\"}isValidSlider(t){return!1}sliderVariables(){return[]}graphingEnabled(){return!1}ansEnabled(){return!this.singleExpression}dimensionVarsEnabled(){return!1}disabledFeatures(){return[\"Sum\",\"Product\",\"Integral\",\"List\",\"Derivative\",\"Piecewise\",\"Restriction\",\"Norm\",\"Exponent\",\"PercentOf\",\"Substitution\"]}shouldIncludeFunctionParametersInRandomSeed(){return!0}};var yb=!1;function KS(e){yb=e}function X8(){return yb}function W8(...e){yb&&console.error(...e)}function V(e){if(yb){let t=e instanceof Error?e:new Error(`${e}`);return W8(t.stack),new M(P(\"shared-calculator-error-internal-error\",{msg:t.message}))}return new M(P(\"shared-calculator-error-parse-error\"))}function eC(){return new M(P(\"graphing-calculator-error-inference-invalid-cdf-p-value\"))}function tC(){return new M(P(\"shared-calculator-error-inference-nonlinear-regression\"))}function gb(e){let t=e.length,n=e[0];return new M(P(\"shared-calculator-error-recursion-missing-base-case\",{count:cy(t),lastSymbol:Y(n),symbols:e.slice(1).map(r=>Y(r)).join(\"', '\")}))}function nC(e,t){let n=gb(e);return n.recursionMetadata=t,n}function rC(e){return new M(P(\"shared-calculator-error-recursion-base-case-free-variable\",{freeVariable:Y(e)}))}function oC(e){return new M(P(\"shared-calculator-error-recursion-base-case-free-variable\",{freeVariable:Y(e)}))}function dy({blockExport:e}){let t=new M(P(\"shared-calculator-error-recursion-base-case-same-type\"));return e||t.allowExport(),t}function my(){return new M(P(\"shared-calculator-error-recursion-base-case-too-complicated\"))}function hb(){return new M(P(\"shared-calculator-error-recursion-base-case-argument-non-number\"))}function iC(){return new M(P(\"shared-calculator-error-recursion-does-not-terminate\"))}function fS(){return new M(P(\"shared-calculator-error-recursion-does-not-terminate\"))}function yS(){return new M(P(\"shared-calculator-error-recursion-depth-limit-exceeded\"))}function sC(e,t){return new M(P(\"shared-calculator-error-recursion-wrong-arity\",{fnSymbol:Y(e),count:cy(t)}))}function aC(e,t,n,{blockExport:r}){let o=new M(P(\"shared-calculator-error-recursion-argument-type\",{index:e+1,expectedType:t,foundType:n}));return r||o.allowExport(),o}function fy(){return new M(P(\"shared-calculator-error-parse-error\"))}function bb(e){return e=Y(e),new M(P(\"shared-calculator-error-unrecognized-symbol\",{symbol:e}))}function xb(){return new M(P(\"shared-calculator-error-unexpected-inequality\"))}function uC(){return new M(P(\"shared-calculator-error-unexpected-equality\"))}function Vi(e){return e=Y(e),new M(P(\"shared-calculator-error-unexpected-symbol\",{symbol:e}))}function cC(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-add-type-error\",{symbol1:e[0],symbol2:e[1]}));return t||n.allowExport(),n}function lC(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-subtract-type-error\",{symbol1:e[0],symbol2:e[1]}));return t||n.allowExport(),n}function yy(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-multiply-type-error\",{symbol1:e[0],symbol2:e[1]}));return t||n.allowExport(),n}function pC(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-multiply-type-error-cross\",{symbol1:e[0],symbol2:e[1]}));return t||n.allowExport(),n}function dC(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-multiply-type-error-2d\",{symbol1:e[0],symbol2:e[1]}));return t||n.allowExport(),n}function mC(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-multiply-type-error-3d\",{symbol1:e[0],symbol2:e[1]}));return t||n.allowExport(),n}function fC(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-divide-type-error\",{symbol1:e[0],symbol2:e[1]}));return t||n.allowExport(),n}function yC(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-exponent-type-error\",{symbol1:e[0],symbol2:e[1]}));return t||n.allowExport(),n}function gC(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-negative-type-error\",{symbol:e[0]}));return t||n.allowExport(),n}function hC(){return new M(P(\"shared-calculator-error-mixed-comparator-chain\"))}function bC(){return new M(P(\"shared-calculator-error-unplottable-long-inequality-chain\"))}function xC(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-comparator-type-error\",{symbol1:e[0],symbol2:e[1]}));return t||n.allowExport(),n}function TC(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-operator-type-error\",{symbol:\"and\",symbol1:e[0],symbol2:e[1]}));return t||n.allowExport(),n}function IC(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-operator-type-error\",{symbol:\"or\",symbol1:e[0],symbol2:e[1]}));return t||n.allowExport(),n}function Ep(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-list-type-error\",{symbol1:e[0]}));return t||n.allowExport(),n}function PC(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-point-type-error\",{symbol1:e,symbol2:se(D)}));return t||n.allowExport(),n}function gy(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-index-type-error\",{symbol1:e[0],symbol2:e[1]}));return t||n.allowExport(),n}function SC(e,t,{blockExport:n}){let r=t===\".p\"?new M(P(\"shared-calculator-error-unexpected-symbol\",{symbol:\".\"})):new M(P(\"shared-calculator-error-coordinate-access-type-error\",{coordinate:t,symbol:e[0]}));return n||r.allowExport(),r}function ts(e,t,{blockExport:n}){let r;switch(t.length){case 1:r=new M(P(\"shared-calculator-error-function-type-error-1\",{fn:Y(e),arg:t[0]}));break;case 2:r=new M(P(\"shared-calculator-error-function-type-error-2\",{fn:Y(e),arg1:t[0],arg2:t[1]}));break;default:r=new M(P(\"shared-calculator-error-function-type-error-many\",{fn:Y(e)}));break}return n||r.allowExport(),r}var QS={translate:\"translation\",rotate:\"rotation\",dilate:\"dilation\",reflect:\"reflection\"};function CC(e,t,n,{blockExport:r}){let o=[];if(n.maxArity===void 0)return ts(e,t,{blockExport:r});for(let a=1;a<n.argTypes.length;a++){let u=n.argTypes[a];typeof u==\"number\"?o.push(se(u)):o.push(se(u.getTypes()[0]))}let i=\"\";switch(o.length){case 1:i=P(t.length>o.length?\"shared-calculator-error-transformation-definition-expected-types-use-fewer-1\":\"shared-calculator-error-transformation-definition-expected-types-1\",{arg:o[0]});break;case 2:i=P(t.length>o.length?\"shared-calculator-error-transformation-definition-expected-types-use-fewer-2\":\"shared-calculator-error-transformation-definition-expected-types-2\",{arg1:o[0],arg2:o[1]});break}let s;switch(t.length){case 1:s=new M(P(t.length<o.length?\"shared-calculator-error-transformation-definition-type-error-use-more-1\":\"shared-calculator-error-transformation-definition-type-error-1\",{fn:Y(QS[e]),arg:t[0],expectedTypeMessage:i}));break;case 2:s=new M(P(t.length<o.length?\"shared-calculator-error-transformation-definition-type-error-use-more-2\":\"shared-calculator-error-transformation-definition-type-error-2\",{fn:Y(QS[e]),arg1:t[0],arg2:t[1],expectedTypeMessage:i}));break;default:s=new M(P(\"shared-calculator-error-transformation-definition-type-error-many\",{fn:Y(QS[e])}));break}return r||s.allowExport(),s}function EC(e,t,{blockExport:n}){let r;switch(t.length){case 1:r=new M(P(\"shared-calculator-error-transformation-type-error-1\",{fn:Y(e),arg:t[0]}));break;case 2:r=new M(P(\"shared-calculator-error-transformation-type-error-2\",{fn:Y(e),arg1:t[0],arg2:t[1]}));break;default:r=new M(P(\"shared-calculator-error-transformation-type-error-many\",{fn:Y(e)}));break}return n||r.allowExport(),r}function vC(e,t,{blockExport:n}){let r=Y(e),o=Y(\"count\"),i=new M(P(\"shared-calculator-error-geometry-length-type-error\",{fn:r,alternativeFn:o,arg:t}));return n||i.allowExport(),i}function MC(e,t,{blockExport:n}){let r=Y(e),o=Y(\"count\"),i=new M(P(\"shared-calculator-error-3d-length-type-error\",{fn:r,alternativeFn:o,arg:t}));return n||i.allowExport(),i}function hy(e){return new M(P(\"shared-calculator-error-illegal-dot-call\",{symbol:Y(e)}))}function _C(e,t,{blockExport:n}){let r=new M(P(\"shared-calculator-error-dot-lhs-type-error\",{symbol:Y(e),type:t}));return n||r.allowExport(),r}function Tb(){return new M(P(\"shared-calculator-error-dot-lhs-constant-number\"))}function RC(e){return new M(P(\"shared-calculator-error-dot-rhs-property-error\",{symbol:Y(e)}))}function DC(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-sum-lower-bound-type-error\",{symbol:e[0]}));return t||n.allowExport(),n}function NC(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-sum-upper-bound-type-error\",{symbol:e[0]}));return t||n.allowExport(),n}function Ib(){return new M(P(\"shared-calculator-error-sum-infinite-bound-type-error\"))}function OC(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-sum-argument-type-error\",{symbol:e[0]}));return t||n.allowExport(),n}function AC(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-product-lower-bound-type-error\",{symbol:e[0]}));return t||n.allowExport(),n}function wC(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-product-upper-bound-type-error\",{symbol:e[0]}));return t||n.allowExport(),n}function Pb(){return new M(P(\"shared-calculator-error-product-infinite-bound-type-error\"))}function LC(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-product-argument-type-error\",{symbol:e[0]}));return t||n.allowExport(),n}function FC(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-integral-lower-bound-type-error\",{symbol:e[0]}));return t||n.allowExport(),n}function VC(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-integral-upper-bound-type-error\",{symbol:e[0]}));return t||n.allowExport(),n}function BC(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-integral-argument-type-error\",{symbol:e[0]}));return t||n.allowExport(),n}function GC(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-derivative-type-error\",{symbol:e[0]}));return t||n.allowExport(),n}function qC(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-derivative-type-error-respect\",{symbol1:e[0],symbol2:e[1]}));return t||n.allowExport(),n}function UC(e,t,{blockExport:n}){let r=new M(P(\"shared-calculator-error-derivative-variable-type-error\",{symbol1:Y(e),symbol2:t[0]}));return n||r.allowExport(),r}function zC(e){return new M(P(\"shared-calculator-error-derivative-recursive-cycle\",{symbol1:Y(e)}))}function kC(e,t,{blockExport:n}){let r=new M(P(\"shared-calculator-error-prime-variable-type-error\",{symbol1:Y(e),symbol2:t[0]}));return n||r.allowExport(),r}function Sb(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-piecewise-condition-type-error\",{symbol1:se(Oe),symbol2:e[0]}));return t||n.allowExport(),n}function HC(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-piecewise-branch-type-error\",{symbol1:e[0],symbol2:e[1]}));return t||n.allowExport(),n}function $C(e){return new M(P(\"shared-calculator-error-table-header-type-error\",{symbol:e[0]}))}function YC(e){return new M(P(\"shared-calculator-error-table-entry-type-error\",{symbol:e[0]}))}function ZC(){return new M(P(\"shared-calculator-error-regression-recursion\"))}function XC(e){return new M(P(\"shared-calculator-error-table-regression-type-error\",{symbol:e}))}function WC(){return new M(P(\"shared-calculator-error-table-regression-invalid-data\"))}function j8(){return new M(P(\"shared-calculator-error-table-regression-log-with-negative\"))}function jC(e){return new M(P(\"shared-calculator-error-regression-type-error\",{symbol1:e[0],symbol2:e[1]}))}function JC(e){return new M(P(\"shared-calculator-error-update-rule-type-error\",{symbol:e}))}function QC(){return new M(P(\"shared-calculator-error-update-rule-non-identifier-lhs\",{arrow:\"\\u2192\",example:\"a\"}))}function KC(e){return new M(P(\"shared-calculator-error-duplicate-update-rules\",{symbol:Y(e)}))}function eE(e){return new M(P(\"shared-calculator-error-update-rule-undefined-lhs\",{symbol:Y(e)}))}function tE(e){return new M(P(\"shared-calculator-error-update-rule-illegal-lhs\",{symbol:Y(e)}))}function nE(e){return new M(P(\"shared-calculator-error-update-rule-function-lhs\",{symbol:Y(e)}))}function Cb(e){return new M(P(\"shared-calculator-error-update-rule-local-lhs\",{symbol:Y(e)}))}function rE(e){let t=e.filter(n=>n.scope===\"free\").map(n=>n.symbol);return new M(P(\"shared-calculator-error-action-merge-free-variable\",{symbol:Y(t[0]||\"\")})).setDependencies(t).allowExport()}function by(e){return new M(P(\"shared-calculator-error-event-handler-type-error\",{example:\"a\\u2192a+1\"}))}function J8(e){return new M(P(\"shared-calculator-error-viewport-bound-type-error\",{type:se(e)}))}function xy({blockExport:e}){let t=new M(P(\"shared-calculator-error-heterogeneous-list\"));return e||t.allowExport(),t}function Eb(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-combine-type-error\",{symbol1:e[0],symbol2:e[1]}));return t||n.allowExport(),n}function Hd(e){return new M(P(\"shared-calculator-error-log-scale-type-error\",{symbol:e})).allowExport()}function oE(){return new M(P(\"shared-calculator-error-log-scale-histogram\"))}function iE(){return new M(P(\"shared-calculator-error-log-scale-dot-plot\"))}function sE(){return new M(P(\"shared-calculator-error-log-scale-box-plot\"))}function aE(){return new M(P(\"shared-calculator-error-deeply-nested\")).allowExport()}function uE(){return new M(P(\"shared-calculator-error-3d-multiple-equality-restrictions\")).allowExport()}function cE(){return new M(P(\"shared-calculator-error-3d-mixed-restriction-equation\")).allowExport()}function $u(){return new M(P(\"shared-calculator-error-3d-bad-equality-slice\")).allowExport()}function al(e){return new M(P(\"shared-calculator-error-gpu-variable-list-length\",{symbol:Y(e.filter(t=>t.symbol!==\"globalRandomSeed\")[0].symbol)}))}function vb(e){return new M(P(\"shared-calculator-error-gpu-variable-sum\",{symbol:Y(e[0].symbol)}))}function Mb(e){return new M(P(\"shared-calculator-error-gpu-variable-product\",{symbol:Y(e[0].symbol)}))}function $d(e){return new M(P(\"shared-calculator-error-gpu-function-unsupported\",{symbol:Y(e)}))}function lE(){return new M(P(\"shared-calculator-error-gpu-integral-unsupported\"))}function pE(){return new M(P(\"shared-calculator-error-gpu-recursion-unsupported\"))}function dE(){return new M(P(\"shared-calculator-error-gpu-long-sum\",{maxTermCount:1e3.toLocaleString()}))}function mE(){return new M(P(\"shared-calculator-error-gpu-long-product\",{maxTermCount:1e3.toLocaleString()}))}function vp(){return new M(P(\"shared-calculator-error-gpu-max-list-size\",{maxListSize:100 .toLocaleString()}))}function Ty(){return new M(P(\"shared-calculator-error-max-list-size\",{maxListSize:1e4.toLocaleString()})).allowExport()}function Iy(){return new M(P(\"shared-calculator-error-two-numbers-error\"))}function fE(){return new M(P(\"shared-calculator-error-boxplot-offset-invalid\"))}function yE(){return new M(P(\"shared-calculator-error-boxplot-breadth-invalid\"))}function gE(e,t){return new M(P(\"shared-calculator-error-too-many-arguments\",{symbol:e,max:t}))}function hE(){let e=P(\"shared-calculator-error-pdf-wrong-arity-recommendation\"),t=P(\"shared-calculator-error-pdf-wrong-arity\",{recommendation:e});return new M(t)}function bE(){let e=P(\"shared-calculator-error-cdf-wrong-arity-recommendation\"),t=P(\"shared-calculator-error-cdf-wrong-arity\",{recommendation:e});return new M(t)}function xE(){let e=P(\"shared-calculator-error-cdf-too-many-arguments-recommendation\"),t=P(\"shared-calculator-error-cdf-too-many-arguments\",{recommendation:e});return new M(t)}function Q8(){return new M(P(\"shared-calculator-error-tdist-wrong-arity\"))}function TE(){return new M(P(\"shared-calculator-error-random-arity\"))}function IE(){return new M(P(\"shared-calculator-error-random-from-broadcast-distribution\"))}function PE(e){let t=e===\"rgb\"?[150,30,100]:[180,.5,.5],n=P(\"shared-calculator-error-color-arity-recommendation\",{recommendation:Y(e)+\"(\"+t.join(\", \")+\")\"}),r=P(\"shared-calculator-error-color-arity\",{symbol:e,recommendation:n});return new M(r)}function Xa(e,t,n,r){e=Y(e);let o,i;if(t===1)i=r.includeUsageExample?P(\"shared-calculator-error-wrong-arity-supplement\",{recommendation:r.usageExample||e+\"(x)\"}):\"\",n>1?o=P(\"shared-calculator-error-wrong-arity-single-arg-too-many\",{dependency:e,supplement:i}):o=P(\"shared-calculator-error-wrong-arity-single-arg-too-few\",{dependency:e,supplement:i});else{let s=[],a=r.usageExample;if(!a){for(let u=0;u<t;u++)s[u]=u+1;a=Y(e)+\"(\"+s.join(\", \")+\")\"}i=r.includeUsageExample?P(\"shared-calculator-error-wrong-arity-supplement\",{recommendation:a}):\"\",o=P(\"shared-calculator-error-wrong-arity-many-arg\",{dependency:e,assignment_arity:t,supplement:i})}return new M(o)}function SE(){let e=P(\"shared-calculator-error-wrong-arity-supplement\",{recommendation:\"length(x)\"}),t=P(\"shared-calculator-error-wrong-arity-single-arg-too-few\",{dependency:\"length\",supplement:e});return new M(t)}function CE(e){return new M(P(\"shared-calculator-error-wrong-two-arg-arity\",{symbol:Y(e),recommendation:Y(e)+\"([1,2,3], 1)\"}))}function EE(e){return new M(P(\"shared-calculator-error-wrong-two-arg-arity\",{symbol:Y(e),recommendation:Y(e)+\"([1,2,3], [3,2,1])\"}))}function Mp(){return new M(P(\"shared-calculator-error-primed-function-arity\"))}function vE(e){return new M(P(\"shared-calculator-error-zero-arg-reducer\",{symbol:Y(e)}))}function ME(){return new M(P(\"shared-calculator-error-malformed-point\"))}function _E(){return new M(P(\"shared-calculator-error-malformed-list\"))}function RE(e){return new M(P(\"shared-calculator-error-bad-tuple-dimensions\",{symbol:e}))}function ul(e){return new M(P(\"shared-calculator-error-3d-object-in-2d\",{type:se(e)}))}function _b(e){return e=Y(e),new M(P(\"shared-calculator-error-bad-implicit-call\",{symbol:e}))}function DE(e,t){return new M(P(\"shared-calculator-error-adjacent-numbers\",{left:e,right:t}))}function Rb(e){return new M(P(\"shared-calculator-error-adjacent-mixed-number\",{mixedNumber:e}))}function NE(){return new M(P(\"shared-calculator-error-token-with-subscript\"))}function Db(e){return e=Y(e),new M(P(\"shared-calculator-error-identifier-as-function\",{symbol:e}))}function Nb(e){return e=Y(e),new M(P(\"shared-calculator-error-identifier-is-not-function\",{symbol:e}))}function Yd(e){return e=Y(e),e===\"%\"&&(e=\"% of\"),new M(P(\"shared-calculator-error-binary-operator-missing-operand\",{symbol:e}))}function OE(e){return e=Y(e),new M(P(\"shared-calculator-error-unary-operator-missing-left\",{symbol:e}))}function AE(e){return e=Y(e),new M(P(\"shared-calculator-error-unary-operator-missing-right\",{symbol:e}))}function wE(){return new M(P(\"shared-calculator-error-fraction-missing-numerator\"))}function LE(){return new M(P(\"shared-calculator-error-fraction-missing-denominator\"))}function FE(){return new M(P(\"shared-calculator-error-fraction-empty\"))}function Ob(){return new M(P(\"shared-calculator-error-empty-subscript\"))}function VE(){return new M(P(\"shared-calculator-error-empty-superscript\"))}function BE(e){return e=Y(e),new M(P(\"shared-calculator-error-invalid-subscript\",{symbol:e}))}function GE(){return new M(P(\"shared-calculator-error-invalid-operator-name\"))}function qE(){return new M(P(\"shared-calculator-error-unexpected-subscript\"))}function UE(){return new M(P(\"shared-calculator-error-superscript-with-prime\"))}function Ab(){return new M(P(\"shared-calculator-error-unexpected-prime\"))}function wb(){return new M(P(\"shared-calculator-error-prime-without-paren\"))}function zE(){return new M(P(\"shared-calculator-error-empty-radical\"))}function kE(){return new M(P(\"shared-calculator-error-empty-radical-index\"))}function Py(){return new M(P(\"shared-calculator-error-empty-paren\"))}function HE(){return new M(P(\"shared-calculator-error-empty-square-bracket\"))}function $E(){return new M(P(\"shared-calculator-error-empty-pipe\"))}function YE(e){let t=e+\"^2\",n=e+\"^-1\";return new M(P(\"shared-calculator-error-bad-trig-exponent\",{form1:t,form2:n}))}function ZE(e){let t=e+\"^2\";return new M(P(\"shared-calculator-error-bad-log-exponent\",{form:t}))}function XE(){return new M(P(\"shared-calculator-error-piecewise-missing-condition\"))}function WE(){return new M(P(\"shared-calculator-error-piecewise-part-missing-condition\"))}function jE(){return new M(P(\"shared-calculator-error-colon-missing-condition\"))}function Sy(){let e=new M(P(\"shared-calculator-error-blank-expression\"));return e.silent=!0,e}function Lb(e){return e=Y(e),new M(P(\"shared-calculator-error-function-not-defined\",{dependency:e}))}function Fb(e){return e=Y(e),new M(P(\"shared-calculator-error-parameter-already-defined\",{dependency:e}))}function JE(e){return e=Y(e),new M(P(\"shared-calculator-error-duplicate-function-parameter\",{dependency:e}))}function QE(e){return e=Y(e),new M(P(\"shared-calculator-error-function-name-as-parameter\",{dependency:e}))}function Zd(e,t){return e=Y(e),t===void 0?new M(P(\"shared-calculator-error-cannot-redefine\",{symbol:e})):new M(P(\"shared-calculator-error-cannot-redefine-root\",{symbol:e,symbolRoot:t}))}function KE(e){return e=Y(e),new M(P(\"shared-calculator-error-cannot-subscript\",{symbol:e}))}function Cy(e){return e=Y(e),new M(P(\"shared-calculator-error-multiply-defined\",{dependency:e}))}function Vb(e){return e=Y(e),new M(P(\"shared-calculator-error-shadowed-index\",{symbol:e}))}function ev(e){e=e.map(Y);let t=e.pop()||\"\",n=new M(P(\"shared-calculator-error-dependency-cycle\",{symbols:e.join(\"', '\"),lastSymbol:t}));return n.isCyclicDependencyError=!0,n}function _p(e,t){let n=e.length,r=e[0];return t.suggestAlternativeFunctionName&&n==1?new M(P(\"shared-calculator-error-self-referential-suggest-alternative\",{symbol:Y(r)})):new M(P(\"shared-calculator-error-self-referential-functions\",{symbols:e.slice(1).map(o=>Y(o)).join(\"', '\"),lastSymbol:Y(r),count:cy(n)}))}function tv(e){return new M(P(\"shared-calculator-error-self-referential-base-case\",{symbol:Y(e)}))}function nv(){return new M(P(\"shared-calculator-error-ticker-min-step-nonnegative\"))}function rv(e){return new kd(P(\"shared-calculator-error-slider-limit-references-export\",{symbol:Y(e)}))}function ov(){return new M(P(\"shared-calculator-error-slider-min-invalid\"))}function iv(){return new M(P(\"shared-calculator-error-slider-max-invalid\"))}function sv(){return new M(P(\"shared-calculator-error-slider-max-less-than-min\"))}function av(){return new M(P(\"shared-calculator-error-slider-step-invalid\"))}function uv(){return new M(P(\"shared-calculator-error-domain-min-invalid\"))}function cv(){return new M(P(\"shared-calculator-error-domain-max-invalid\"))}function lv(){return new M(P(\"shared-calculator-error-domain-max-less-than-min\"))}function pv(){return new M(P(\"shared-calculator-error-cdf-bound-invalid\"))}function dv(){return new M(P(\"shared-calculator-error-use-rho-for-spherical-coordinates\"))}function mv(){return new M(P(\"shared-calculator-error-use-r-for-cylindrical-coordinates\"))}function Bb(){return new M(P(\"shared-calculator-error-cant-combine-spherical-and-cylindrical\"))}function En(e){if(e=e.map(Y),e.length===0)return new M(P(\"shared-calculator-error-too-many-variables-no-symbols\"));let t=e.pop()||\"\";return e.length>0?new M(P(\"shared-calculator-error-too-many-variables-many-symbols\",{variables:e.join(\"', '\"),lastVariable:t})):new M(P(\"shared-calculator-error-too-many-variables-one-symbol\",{variable:t}))}function fv(e){return new M(P(\"shared-calculator-error-cannot-restrict\",{variable:Y(e)}))}function yv(){return new M(P(\"shared-calculator-error-cannot-restrict-triangles-with-list\"))}function gv(e){return new M(P(\"shared-calculator-error-cannot-assign-color\",{variable:Y(e)}))}function hv(e){return new M(P(\"shared-calculator-error-cannot-restrict-with-equality\",{variable:Y(e)}))}function Ey(e,t,n){e=e.map(Y),t=Y(t),n=n.map(Y);let r=t+\"(\"+n.join(\",\")+\",\"+e.join(\",\")+\")\",o=e.pop()||\"\",i={symbols:e.join(\"', '\"),lastSymbol:o,newSignature:r};return e.length?new M(P(\"shared-calculator-error-add-arguments-to-definition-many\",i)):new M(P(\"shared-calculator-error-add-arguments-to-definition-one\",i))}function bv(e){return e=Y(e),new M(P(\"shared-calculator-error-invalid-lhs\",{symbol:e}))}function xv(){return new M(P(\"shared-calculator-error-unplottable-polar-function\"))}function Tv(){return new M(P(\"shared-calculator-error-invalid-inequality-variables\"))}function Rp(){return new M(P(\"shared-calculator-error-invalid-implicit-variables\"))}function Iv(){return new M(P(\"shared-calculator-error-invalid-implicit-variables-3d\"))}function Pv(){return new M(P(\"shared-calculator-error-single-variable-implicit-equations-disabled\"))}function Sv(){return new M(P(\"shared-calculator-error-implicits-disabled\"))}function Xd(e){let t=new M(e===\"=\"?P(\"graphing-calculator-error-nan-blame-complex-coercion\"):P(\"shared-calculator-error-complex-operation-undefined\",{symbol:Y(e)}));return t.warning=t.getError(),t.silent=!0,t}function K8(){return new M(P(\"shared-calculator-error-complex-table-point-coordinate\"))}function Gb(){return new M(P(\"shared-calculator-error-inequalities-disabled\"))}function Cv(){return new M(P(\"shared-calculator-error-complicated-polar-implicit\"))}function Ev(){return new M(P(\"shared-calculator-error-invalid-double-inequality-3d\"))}function vv(){return new M(P(\"shared-calculator-error-invalid-double-equality-3d\"))}function Mv(){return new M(P(\"shared-calculator-error-unplottable-chained-equality\"))}function qb(){return new M(P(\"shared-calculator-error-invalid-double-inequality-variables\"))}function Ub(){return new M(P(\"shared-calculator-error-mismatched-double-inequality\",{example:\"1 < y < 2\"}))}function zb(){return new M(P(\"shared-calculator-error-complicated-double-inequality\"))}function kb(e){return e?(e=Y(e),new M(P(\"shared-calculator-error-equation-required-symbol\",{lhs:e+\"=\"}))):new M(P(\"shared-calculator-error-equation-required\"))}function Hb(e){return e=Y(e),new M(P(\"shared-calculator-error-variable-as-function\",{dependency:e}))}function $b(e){return e=Y(e),new M(P(\"shared-calculator-error-distribution-as-function\",{symbol:e}))}function _v(e){return new M(P(\"shared-calculator-error-invalid-table-header\",{supplement:e}))}function vy(e){return new M(P(\"shared-calculator-error-invalid-table-entry\",{supplement:e}))}function Rv(){return new M(P(\"shared-calculator-error-invalid-first-table-column\",{most:\"'y', 'r',\",last:\"'\\u03B8'\"}))}function e5(){return new M(P(\"shared-calculator-error-invalid-dependent-first-table-column\"))}function Dv(e){return new M(P(\"shared-calculator-error-invalid-regression-parameter\",{symbol:Y(e)}))}function Nv(){return new M(P(\"shared-calculator-error-optimization-error\"))}function Ov(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-non-list-double-reducer\",{symbol:Y(e),recommendation:Y(e)+\"([1,2,3], [3,2,1])\"}));return t||n.allowExport(),n}function Av(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-non-list-parameterized-reducer\",{symbol:Y(e),recommendation:Y(e)+\"([1,2,3], 1)\"}));return t||n.allowExport(),n}function cl(e,{blockExport:t}){let n=new M(P(\"shared-calculator-error-method-requires-list\",{symbol:Y(e),recommendation:Y(e)+\"([1,2,3])\"}));return t||n.allowExport(),n}function My(){return new M(P(\"shared-calculator-error-non-arithmetic-range\")).allowExport()}function wv(){return new M(P(\"shared-calculator-error-invalid-half-empty-range\"))}function Lv(){return new M(P(\"shared-calculator-error-sum-missing-bound\"))}function Fv(){return new M(P(\"shared-calculator-error-product-missing-bound\"))}function Vv(){return new M(P(\"shared-calculator-error-incorrect-sum-lower-bound\"))}function Bv(){return new M(P(\"shared-calculator-error-incorrect-product-lower-bound\"))}function Gv(e){return new M(P(\"shared-calculator-error-bad-sum-bound-dependency\",{symbol:Y(e)}))}function qv(e){return new M(P(\"shared-calculator-error-bad-product-bound-dependency\",{symbol:Y(e)}))}function Uv(){return new M(P(\"shared-calculator-error-integral-missing-bound\"))}function zv(){return new M(P(\"shared-calculator-error-integral-missing-differential\"))}function kv(){return new M(P(\"shared-calculator-error-differential-with-superscript\"))}function Hv(){return new M(P(\"shared-calculator-error-sum-missing-body\"))}function $v(){return new M(P(\"shared-calculator-error-product-missing-body\"))}function Yv(){return new M(P(\"shared-calculator-error-integral-missing-body\"))}function Zv(){return new M(P(\"shared-calculator-error-derivative-missing-body\"))}function Xv(e,t){return e=Y(e),t=Y(t),new M(P(\"shared-calculator-error-mismatched-braces\",{symbol1:e,symbol2:t}))}function Yb(e){return new M(P(\"shared-calculator-error-shadowed-integration-variable\",{symbol:Y(e)}))}function Wv(e){return new M(P(\"shared-calculator-error-bad-integral-bound-dependency\",{symbol:Y(e)}))}function jv(){return new M(P(\"shared-calculator-error-percent-missing-of\"))}function _y(e){return e=Y(e),new M(P(\"shared-calculator-error-illegal-bin-width\",{symbol:e}))}function Zb(e){return e=Y(e),new M(P(\"shared-calculator-error-ttest-list-too-short\",{symbol:e}))}function Jv(){return new M(P(\"shared-calculator-error-bad-sample-size\"))}function Qv(e){return new M(P(\"shared-calculator-error-variable-seed\",{symbol:Y(e[0].symbol)})).setDependencies(e.filter(t=>t.scope===\"free\").map(t=>t.symbol)).allowExport()}function Ry(e){return new M(P(\"shared-calculator-error-bad-symbol-context\",{symbol:Y(e)}))}function Xb(){return new M(P(\"shared-calculator-error-write-integral\",{command:\"integral\",symbol:\"\\u222B\"}))}function Kv(){return new M(P(\"shared-calculator-error-ans-undefined\"))}function eM(e){return new M(P(\"shared-calculator-error-variables-unsupported\",{variable:Y(e)}))}function Wb(){return new M(P(\"shared-calculator-error-polygon-unsupported-in-3d\"))}function YA(e){return new M(P(\"shared-calculator-error-function-only-works-in-complex\",{symbol:Y(e)}))}function Wa(e,t){return t!=null&&t.is3dPolicy()&&e===\"polygon\"?Wb():!!t&&!(t!=null&&t.isGeometryEnabled())&&!(t instanceof Sp)&&!t.isComplexEnabled()&&$A.indexOf(e)!==-1?YA(e):new M(P(\"shared-calculator-error-function-unsupported\",{symbol:Y(e)}))}function tM(){return new M(P(\"shared-calculator-error-logbase-unsupported\"))}function Dy(e){return new M(P(\"shared-calculator-error-constant-unsupported\",{symbol:Y(e)}))}function jb(e){return new M(P(\"shared-calculator-error-variable-unsupported\",{symbol:Y(e)}))}function Jb(e){return new M(P(\"shared-calculator-error-variable-invalid-function-name\",{symbol:Y(e)}))}function nM(){return new M(P(\"shared-calculator-error-assignments-unsupported\"))}function rM(){return new M(P(\"shared-calculator-error-function-definition-unsupported\"))}function Ny(){return new M(P(\"shared-calculator-error-equations-unsupported\"))}function oM(){return new M(P(\"shared-calculator-error-inequalities-unsupported\"))}function iM(){return new M(P(\"shared-calculator-error-regressions-unsupported\"))}function sM(){return new M(P(\"shared-calculator-error-custom-regressions-unsupported\"))}function aM(){return new M(P(\"shared-calculator-error-points-unsupported\"))}function uM(){return new M(P(\"shared-calculator-error-feature-unavailable\"))}function Qb(){return new M(P(\"basic-calculator-error-fractions-unavailable\"))}function cM(){return new M(P(\"basic-calculator-error-parentheses-unavailable\"))}function t5(){return new M(P(\"shared-calculator-error-non-square-determinant\"))}function n5(){return new M(P(\"shared-calculator-error-non-square-trace\"))}function r5(){return new M(P(\"shared-calculator-error-non-square-inverse\"))}function o5(){return new M(P(\"shared-calculator-error-non-singular-inverse\"))}function i5(e){return new M(P(\"shared-calculator-error-clickable-object-assignment-not-defined\",{symbol:e}))}function s5(e){return new M(P(\"shared-calculator-error-multiply-defined\",{dependency:e}))}function a5(){return new M(P(\"shared-calculator-error-clickable-object-assignment-not-identifier\"))}function u5(){return new M(P(\"shared-calculator-error-clickable-object-invalid-expression\"))}function c5(){return new M(P(\"shared-calculator-error-matrix-assignment\"))}function l5(){return new M(P(\"shared-calculator-error-matrix-add-dimensions\"))}function p5(){return new M(P(\"shared-calculator-error-matrix-subtract-dimensions\"))}function d5(){return new M(P(\"shared-calculator-error-matrix-multiply-dimensions\"))}function m5(){return new M(P(\"shared-calculator-error-matrix-fractional-power\"))}function f5(){return new M(P(\"shared-calculator-error-matrix-power-dimensions\"))}function y5(e){return new M(P(\"shared-calculator-error-matrix-element-type-error\",{arg:e[0]}))}function g5(e){return new M(P(\"shared-calculator-error-matrix-invalid-variable\",{symbol:Y(e)}))}function lM(e,t,n,{blockExport:r}){let o=\"[1...10]\";n&&!/[\\\\]/.test(n)&&(o=`[${n}]`);let i=new M(P(\"shared-calculator-error-list-comprehension-input-type-error\",{identifier:e,actual:t,example:o}));return r||i.allowExport(),i}function pM(){return new M(P(\"shared-calculator-error-incorrect-list-comprehension-input\"))}function Kb(e){return e=Y(e),new M(P(\"shared-calculator-error-shadowed-list-comprehension-input\",{symbol:e}))}function dM(e){return e=Y(e),new M(P(\"shared-calculator-error-bad-for-input-list-dependency\",{symbol:e}))}function mM(e){return e=Y(e),new M(P(\"shared-calculator-error-bad-for-interval-dependency\",{symbol:e}))}function fM(e){let t=e.filter(n=>n.scope===\"free\").map(n=>n.symbol);return new M(P(\"shared-calculator-error-variable-length-top-level-list\",{symbol:Y(t[0]||\"\")})).setDependencies(t).allowExport()}function Oy(e){return new M(P(\"shared-calculator-error-variable-length-distribution-list\",{symbol:e[0].symbol})).setDependencies(e.filter(t=>t.scope===\"free\").map(t=>t.symbol))}function yM(e){return new M(P(\"shared-calculator-error-variable-length-sum-body-depends-on-index\",{symbol:e}))}function gM(e){return new M(P(\"shared-calculator-error-variable-length-product-body-depends-on-index\",{symbol:e}))}function hM(e){return new M(P(\"shared-calculator-error-variable-length-integral-depends-on-integration-var\",{symbol:e}))}function h5(e,t){return new M(P(\"shared-calculator-error-substitution-type-error\",{actual:se(e),expected:se(t)}))}function Ay(){return new M(P(\"shared-calculator-error-substitution-invalid-assignments\"))}function bM(e){return new M(P(\"shared-calculator-error-substitution-local-lhs\",{symbol:Y(e)}))}function wy(e){return new M(P(\"shared-calculator-error-substitution-illegal-lhs\",{symbol:Y(e)}))}function Ly(e){return new M(P(\"shared-calculator-error-substitution-function-lhs\",{symbol:Y(e)}))}function xM(e,t,n){return new M(P(\"shared-calculator-error-substitution-body-regression-parameter-dependency\",{globalVariable:Y(e),regressionParameter:Y(t),operator:n}))}function b5(){return new M(P(\"shared-calculator-error-substitution-body-action\"))}function ex(){return new M(P(\"shared-calculator-error-substitution-nested\"))}function ll(e){return new M(P(\"shared-calculator-error-substitution-ambiguous-comma\",{operation:e}))}function TM(e){return new M(P(\"shared-calculator-error-substitution-duplicate-assignment\",{symbol:Y(e)}))}function IM(e,t,n){return new M(P(\"shared-calculator-error-substitution-recursive-call-lhs\",{operator:e,globalVariable:Y(t),fnSymbol:Y(n)}))}function PM(){return new M(P(\"shared-calculator-error-depends-on-deleted-geo-object\"))}function SM(e){return new M(P(\"shared-calculator-error-invalid-interval-comprehension-return-type\",{type:se(e)}))}function CM(e,t){return new M(P(\"shared-calculator-error-bad-interval-comprehension-arity\",{type:se(e),count:cy(t)}))}function Wd(e){return new M(P(\"shared-calculator-error-invalid-interval-comprehension-invalid-bound\",{identifier:e}))}function EM(){return new M(P(\"shared-calculator-error-nested-interval-comprehension\"))}function tx(){return new M(P(\"shared-calculator-error-substitution-unsupported-interval\"))}function vM(e){return new M(P(\"shared-calculator-error-table-regression-invalid-export-identifier\",{latex:\"`\"+e+\"`\"}))}function MM(e){return new M(e.length===1?P(\"graphing-calculator-error-table-regression-unexportable-reserved-variable-single\",{variable:\"`\"+e[0]+\"`\"}):P(\"graphing-calculator-error-table-regression-unexportable-reserved-variables-many\"))}function nx(e){return new M(P(\"shared-calculator-error-chisq-list-length-mismatch\",{symbol:Y(e)}))}function Fy(e){return new M(P(\"shared-calculator-error-chisq-variable-list-length\",{symbol:Y(e)}))}function rx(e){return new M(P(\"shared-calculator-error-chisq-list-too-short\",{symbol:Y(e)}))}function Vy(){return new M(P(\"shared-calculator-error-bad-export\"))}function _M(){return new M(P(\"shared-calculator-error-bad-default\"))}function RM(e,t){return`dcg_import_${e}__${t}`}function pl(e){return`dcg_policy_frameID__${e}`}function ZA(e){let t=\"dcg_policy_frameID__\";if(e.startsWith(t))return e.slice(t.length)}var Tr=\"**dcg_global_module_id**\";function vn(e,t){return{frameID:e,symbol:t}}function Dp(e,t){let n=[];for(let r of t)n.push({frameID:e,symbol:r});return n}function DM(e,t){let n=[];for(let r of t)n.push({frameID:e,symbol:r});return n}var Ec=class e{constructor(t){this.map=new Map;if(t)for(let[n,r]of t)this.set(n,r)}getOrCreateEntry(t){let n=this.map.get(t);if(n)return n;let r=new Map;return this.map.set(t,r),r}set(t,n){this.getOrCreateEntry(t.frameID).set(t.symbol,n)}get(t){var n;return(n=this.map.get(t.frameID))==null?void 0:n.get(t.symbol)}getOrInsert(t,n){let r=this.get(t);return r!==void 0?r:(this.set(t,n),n)}delete(t){var n;(n=this.map.get(t.frameID))==null||n.delete(t.symbol)}*[Symbol.iterator](){for(let[t,n]of this.map)for(let[r,o]of n)yield[vn(t,r),o]}*keys(){for(let[t,n]of this.map)for(let r of n.keys())yield vn(t,r)}mapForFrame(t){return this.map.get(t)}static fromJSONForTests(t){let n=new e;for(let r of fe(t))for(let o of fe(t[r]))n.set(vn(r,o),t[r][o]);return n}toQualifiedNameRecord(){let t={};for(let n of this.map.keys()){let r=this.map.get(n);if(r){t[n]={};for(let[o,i]of r)t[n][o]=i}}return t}};function ox(e,t,n){e[t.frameID]||(e[t.frameID]={}),e[t.frameID][t.symbol]=n}function*ms(e){for(let t of fe(e))if(e[t])for(let n of fe(e[t]))yield[{frameID:t,symbol:n},e[t][n]]}var Lr=class e{constructor(t){this.map=new Ec;if(t)for(let n of t)this.add(n)}add(t){this.map.set(t,!0)}delete(t){this.map.delete(t)}has(t){return!!this.map.get(t)}[Symbol.iterator](){return this.map.keys()}mapForFrame(t){return this.map.mapForFrame(t)}toJSONForTests(){return sO([...this].map(({symbol:t,frameID:n})=>n+\"::\"+t),t=>t)}static fromJSONForTests(t){let n=new e;for(let r of fe(t))for(let o of t[r])n.add(vn(r,o));return n}};function qn(e){return Object.create(e)}var XA=Symbol(\"DEPENDENCY_ORDER\");function By(e){let t=e[XA];if(!t)throw V(\"Missing dependency order.\");return t}function WA(e,t){e[XA]=t}var jA=Symbol(\"FRAME_CONTEXT\");function Gy(e){let t=e[jA];if(!t)throw V(\"Missing frame context.\");return t}function JA(e,t){e[jA]=t}var QA=Symbol(\"MODULE_ID\");function KA(e,t){e[QA]=t}function ix(e){let t=e[QA];if(!t)throw V(\"Missing module ID.\");return t}function NM(e){return W(e.valueType)}function ew(e,t){if(NM(e)&&e.valueType!==He)return{valueType:rt(e.valueType),value:e.value[t]};throw new Error(\"Programming Error: expected a list type but found \"+se(e.valueType))}var OM=Tr;function jK(e){switch(e){case void 0:case\"IDLE\":case\"UNPUBLISHED\":case\"RESOLVED\":return!1;case\"ANALYZING\":case\"GRAPHING\":return!0;default:throw new Error(`Unexpected progress status: ${e}`)}}function JK(e,t){let n={...e,updates:{}};for(let[{frameID:r,symbol:o},i]of ms(e.updates))r===t&&(n.updates[o]=i);return n}function QK(e){return{allDefinedQualifiedNames:e.allDefinedQualifiedNames,multiplyDefined:new Lr(e.multiplyDefined)}}var nw={collapsed:!1,hidden:!1,secret:!1,inFrontOfEverything:!1,readonly:!1,title:\"\"};function tee(e){return{...nw,...e}}function nee(e){return Of(nw,e)}var AM=\"**dcg_geo_folder**\";function ree(e){return{type:\"module\",id:e.id,imports:x5(e.title,e.id)}}function x5(e,t){if(!e.includes(\"@\"))return[];let n=[];for(let[r,o]of tw(e,\"@import \"))n.push({from:{frameID:OM,symbol:r},to:{frameID:t,symbol:o}});for(let[r,o]of tw(e,\"@export \"))n.push({from:{frameID:t,symbol:r},to:{frameID:OM,symbol:o}});return n}function tw(e,t){let n=e.split(`\n`),r=[];for(let o of n){if(!o.startsWith(t))continue;let i=o.slice(t.length);for(let s of i.split(\",\")){let a=\" as \",u=s.indexOf(a);if(u!==-1){r.push([s.slice(0,u).trim(),s.slice(u+a.length).trim()]);continue}let c=s.trim();c!==\"\"&&r.push([c,c])}}return r}function oee(){return{type:\"folder\",id:AM,title:\"geometry\",secret:!0}}var wM={show:!1,bound1:\"\",bound2:\"\",p:\"\",tails:\"inner\",compute:\"p\"},LM={breadth:\"\",axisOffset:\"\",alignedAxis:\"x\",showBoxplotOutliers:!0,binAlignment:\"center\",dotplotXMode:\"exact\",histogramMode:\"\"},FM={enabled:!1,latex:\"\"},ax={None:\"NONE\",Math:\"MATH\",Text:\"TEXT\"},T5={type:!0,id:!0,folderId:!0,color:!0,latex:!0,showLabel:!0,showAngleLabel:!0,label:!0,hidden:!0,secret:!0,readonly:!0,disableGraphInteractions:!0,fill:!0,points:!0,lines:!0,extendTo3D:!0,lineStyle:!0,arrowMode:!0,pointStyle:!0,dragMode:!0,labelOrientation:!0,labelSize:!0,suppressTextOutline:!0,pointOutline:!0,interactiveLabel:!0,editableLabelMode:!0,residualVariable:!0,regressionParameters:!0,isLogModeRegression:!0,displayEvaluationAsFraction:!0,slider:!0,strictIntersection:!0,inference:!0},fee=Object.keys(T5),rw=4e3,sx={polarDomain:{min:\"\",max:\"\"},parametricDomain:{min:\"\",max:\"\"},parametricDomain3Du:{min:\"\",max:\"\"},parametricDomain3Dv:{min:\"\",max:\"\"},parametricDomain3Dr:{min:\"\",max:\"\"},parametricDomain3Dphi:{min:\"\",max:\"\"},cdf:wM,colorLatex:\"\",description:\"\",fillOpacity:\"\",surfaceOpacity:\"\",lineOpacity:\"\",pointOpacity:\"\",pointSize:\"\",movablePointSize:\"\",lineWidth:\"\",resolution:\"\",labelAngle:\"\",vizProps:LM,clickableInfo:FM},ow=.95,VM={significance:{show:!1},confidence:{show:!1},chiSquare:{showTable:!1,showExpected:!0}},iw={folderId:\"\",latex:\"\",color:\"\",showLabel:!1,showAngleLabel:!0,label:\"\",hidden:!1,secret:!1,readonly:!1,disableGraphInteractions:!1,dragMode:rn.AUTO,labelSize:\"\",labelOrientation:IO.DEFAULT,suppressTextOutline:!1,pointOutline:!1,interactiveLabel:!1,editableLabelMode:ax.None,residualVariable:\"\",isLogModeRegression:!1,pointStyle:Xc.POINT,lineStyle:Td.SOLID,arrowMode:TO.DEFAULT,regressionParameters:{},displayEvaluationAsFraction:!1,slider:{},strictIntersection:!1,extendTo3D:!1,inference:VM,...sx,points:void 0,lines:void 0,fill:void 0},sw={hardMin:!1,hardMax:!1,animationPeriod:rw,loopMode:Zc.LOOP_FORWARD_REVERSE,playDirection:1,isPlaying:!1,min:\"-10\",max:\"10\",step:\"\"},aw={hardMin:!1,hardMax:!1,animationPeriod:rw,loopMode:Zc.LOOP_FORWARD_REVERSE,playDirection:1,isPlaying:!1,min:`${ro.xmin}`,max:`${ro.xmax}`,step:\"\"};function yee(e,t){return{...iw,isLogModeRegression:t.defaultLogModeRegressions,...e,slider:{...t.is3d?aw:sw,...e.slider},cdf:{...wM,...e.cdf},vizProps:{...LM,...e.vizProps},clickableInfo:{...FM,...e.clickableInfo},inference:{...VM,...e.inference}}}function gee(e,t){let n=Of(iw,{...e,slider:Of(t.is3d?aw:sw,e.slider)}),r=Af(wM,e.cdf);r===void 0?delete n.cdf:n.cdf=r;let o=Af(LM,e.vizProps);o===void 0?delete n.vizProps:n.vizProps=o;let i=Af(FM,e.clickableInfo);i===void 0?delete n.clickableInfo:n.clickableInfo=i;let s=Af(VM,e.inference);return s===void 0?delete n.inference:n.inference=s,n}function I5(e){return PO(e,sx)}function hee(e,t){for(let n in sx)if(sx.hasOwnProperty(n)&&e[n]!==t[n])return!1;return!0}function bee(e){return{type:\"statement\",id:e.id,latex:e.latex,label:e.label,color:e.color,fill:e.fill,points:e.points,lines:e.lines,extendTo3D:e.extendTo3D,pointStyle:e.pointStyle,lineStyle:e.lineStyle,arrowMode:e.arrowMode,dragMode:e.dragMode,labelSize:e.labelSize,labelOrientation:e.labelOrientation,suppressTextOutline:e.suppressTextOutline,pointOutline:e.pointOutline,interactiveLabel:e.interactiveLabel,editableLabelMode:e.editableLabelMode,residualVariable:e.residualVariable,regressionParameters:e.regressionParameters,isLogModeRegression:e.isLogModeRegression,showLabel:e.showLabel,showAngleLabel:e.showAngleLabel,shouldGraph:!e.hidden,slider:P5(e.slider),strictIntersection:e.strictIntersection,isInConstructionsFolder:e.folderId===AM,inference:e.inference,...I5(e)}}function P5(e){return{min:e.hardMin?e.min:\"\",max:e.hardMax?e.max:\"\",softMin:e.hardMin?\"\":e.min,softMax:e.hardMax?\"\":e.max,step:e.step,isPlayingOnce:e.isPlaying&&e.loopMode===Zc.PLAY_ONCE}}So();So();var X=class extends pt{constructor(t,n){if(!Array.isArray(t))throw new TypeError(\"Argument to expression constructor must be an Array.\");super(),this.args=t,(!n||!n.skipRegisterDependencies)&&this.registerDependencies()}shouldExportAns(){return!0}registerDependencies(){for(let t=0;t<this.args.length;t++)this.mergeDependencies(this.args[t])}copyWithArgs(t){throw new Error(`Programming Error: copyWithArgs not implemented for ${this.constructor.name}`)}};var $n=class extends X{constructor(t){super([]),typeof t==\"number\"&&(t=Ie(t,1)),this._constantValue=t}asValue(){let t=this._constantValue;return typeof t==\"boolean\"?t:F(t)}asCompilerValue(){return this._constantValue}scalarExprString(){return this.asValue()>0?String(this.asValue()):\"(\"+String(this.asValue())+\")\"}isNaN(){let t=this.asValue();return typeof t==\"number\"&&isNaN(t)}},Un=class extends $n{constructor(){super(...arguments);this.type=\"Constant\"}};function Yr(e,t){let n=new Array(t);for(let o=0;o<t;o++)n[o]=!1;n[t]=!0;let r=t;for(;r>0;){r=0;for(let o=t;o>=0;o--){if(!n[o])continue;let i=e.getInstruction(o);if(me(i))for(let s of e.getDirectDependencies(i))s>o&&!n[s]&&s>r&&(r=s),n[s]=!0}}return n}function uw(e,t){let n=new Array(t);for(let o=0;o<t;o++)n[o]=!1;n[t]=!0;let r=t;for(;r>0;){r=0;for(let o=t;o>=0;o--){if(!n[o])continue;let i=e.getInstruction(o);if(me(i))if(i.type===33)n[i.args[1]]=!0,n[i.args[2]]=!0;else for(let s of e.getDirectDependencies(i))s>o&&!n[s]&&(r=s),n[s]=!0}}return n}function lw(e,t,n){let r=\"\",o=(e.instructionsLength()-1).toString().length,i=0,s=!1,a=Yr(e,t);for(let u=0;u<e.instructionsLength();u++){let c=e.getInstruction(u),l=n.comments[u]||\"\";if(mo(c)&&(i-=1),!a[u]&&!n.printUnreferencedInstructions||c.type===0)s||(r+=`${cw(u,o)}: ${GM(2*i)}...\n`),s=!0;else{s=!1;let p=`${cw(u,o)}: ${GM(2*i)}${Np(e,u)}`;l&&(p+=\" \".repeat(Math.max(0,36-p.length)),p+=`\t# ${l}`),r+=p+`\n`}Zr(c)&&(i+=1)}return r}function Np(e,t){let n=e.getInstruction(t);switch(n.type){case 0:return _o(n.type);case 2:return`${_o(n.type)} ${tt(n.valueType)} ${e.argNames[t]}`;case 3:return`${_o(n.type)} ${tt(n.valueType)}`;case 1:return`${_o(n.type)} ${tt(n.valueType)} ${BM(n.value)}`;case 37:case 42:return`${_o(n.type)} ${tt(n.valueType)} ${n.symbol} ${n.args.join(\" \")}`;case 44:return`${_o(n.type)} ${tt(n.valueType)} ${n.tag} ${n.args.join(\" \")}`;case 48:return`${_o(n.type)} ${tt(n.valueType)} ${n.args.join(\" \")}`;case 16:return`${_o(n.type)} ${tt(n.valueType)} (${n.index}) ${n.args.join(\" \")}`;case 50:return`${_o(n.type)} ${tt(n.valueType)} ${n.args.join(\" \")} (${n.callData.parameterSymbols.join(\",\")})`;case 4:{let o=n.signature.argTypes.map(i=>tt(i)).join(\", \");return`${_o(n.type)} ${tt(n.valueType)} ${n.symbol}(${o}) [group ${n.recursionGroup.join(\" \")}]`}case 8:case 9:case 10:case 11:case 13:case 12:case 14:case 56:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 32:case 31:case 33:case 38:case 39:case 40:case 41:case 47:case 49:case 51:case 53:case 54:case 55:case 15:return`${_o(n.type)} ${tt(n.valueType)} ${n.args.join(\" \")}`;default:let r=n;throw new Error(`Unexpected opcode ${r.type}`)}}function _o(e){switch(e){case 0:return\"Noop\";case 1:return\"Constant\";case 8:return\"Add\";case 9:return\"Subtract\";case 10:return\"Multiply\";case 11:return\"Divide\";case 12:return\"Exponent\";case 13:return\"RawExponent\";case 14:return\"Negative\";case 56:return\"Square\";case 19:return\"BeginLoop\";case 20:return\"EndLoop\";case 21:return\"BeginIntegral\";case 22:return\"EndIntegral\";case 23:return\"BeginBroadcast\";case 24:return\"EndBroadcast\";case 25:return\"Equal\";case 26:return\"Less\";case 27:return\"Greater\";case 28:return\"LessEqual\";case 29:return\"GreaterEqual\";case 31:return\"Or\";case 32:return\"And\";case 33:return\"Piecewise\";case 38:return\"List\";case 39:return\"ListAccess\";case 40:return\"DeferredListAccess\";case 41:return\"InboundsListAccess\";case 37:return\"NativeFunction\";case 42:return\"Distribution\";case 2:return\"LoadArg\";case 47:return\"BlockVar\";case 48:return\"BroadcastResult\";case 3:return\"SymbolicVar\";case 44:return\"ExtendSeed\";case 49:return\"Action\";case 50:return\"BeginMap\";case 51:return\"EndMap\";case 4:return\"FunctionHeader\";case 53:return\"BeginFunction\";case 54:return\"EndFunction\";case 55:return\"FunctionCall\";case 15:return\"Tuple\";case 16:return\"Slot\";default:let t=e;throw new Error(`Unexpected opcode ${t.type}`)}}function BM(e){if(Array.isArray(e))return`[${e.map(BM).join(\",\")}]`;switch(typeof e){case\"string\":return e;case\"boolean\":case\"number\":return e.toString();case\"object\":if(Sc(e)){let t=[];if(!e.updateRules)return\"{}\";for(let[n,r]of ms(e.updateRules))t.push(`\"${n.frameID}::${n.symbol}\": ${BM(r.value)}`);return`{${t.join(\", \")}}`}else return`${e.n}/${e.d}`;default:throw new Error(`Unexpected value: ${e}`)}}function cw(e,t){let n=e.toString();return GM(t-n.length)+n}function GM(e){let t=\"\";for(let n=0;n<e;n++)t+=\" \";return t}function De(e){return e.type===1}function pw(e){if(!De(e))throw new Error(`Programming error: expected constant instruction but found ${_o(e.type)} instead.`)}function dw(e){switch(e){case 0:return\"Cold\";case 1:return\"Unknown\";case 2:return\"Hot\"}}function Ir(e,t){return Math.max(e,t)}function qM(e){return De(e)?e.mobility:1}function jd(e){return W(e.valueType)}function ux(e){return e.type<=3}function mw(e){return e.type===4}function me(e){return e.type>=8}function Zr(e){switch(e.type){case 21:case 23:case 19:case 50:case 53:return!0;default:return!1}}function mo(e){switch(e.type){case 20:case 22:case 24:case 51:case 54:return!0;default:return!1}}function cx(e){switch(e.type){case 20:case 22:case 24:case 51:return!0;default:return!1}}function HM(e){if(!ln(e))throw new Error(\"Programming Error: numeric constants should be rational\");return{type:1,valueType:x,value:e,mobility:0}}var Mc=HM(Ie(0,1)),dl=HM(Ie(1,1)),Kd=HM(Ie(1,2));function ut(e){return e.map(t=>U(t))}function Yu(e){return e.map(t=>Ot(t))}function J(e,t){var m,f,g,y,h;let n=t==null?void 0:t.defaultArguments,r=1/0,o=0,i=(m=n==null?void 0:n.length)!=null?m:0;for(let b of e){let T=b.minArity-i;T<r&&(r=T);let I=(f=b.maxArity)!=null?f:1/0;I>o&&(o=I)}let s=(g=t==null?void 0:t.fallthroughUnlessDistribution)!=null?g:!1,a=(y=t==null?void 0:t.allowDotCall)!=null?y:!1,u=(h=t==null?void 0:t.isSeeded)!=null?h:!1,c=t==null?void 0:t.minArityExampleArgs,l=t==null?void 0:t.maxArityExampleArgs,p=t==null?void 0:t.dotMinArityExampleArgs,d=t==null?void 0:t.dotMaxArityExampleArgs;return{minArity:r,getSignatures:b=>e.filter(T=>T.satisfiesPolicy(b)),maxArity:o,defaultArguments:n,fallthroughUnlessDistribution:s,minArityExampleArgs:c,maxArityExampleArgs:l,dotMinArityExampleArgs:p,dotMaxArityExampleArgs:d,allowDotCall:a,isSeeded:u}}function vc(){return J(ut([{type:\"variadic\",initial:[],rest:Nn}]),{})}var lx=Cr.of([he,Te,Ee,Ae,ue]),UM=Cr.of([he,Ee,Ae,Pe]),Jd=Cr.of([D,he,Te,Ee,Ae,Pe,ue,_e,Ne,Ce,we]),zM=Cr.of([...Ki.types.filter(e=>e!==Mi),wn]),kM=Cr.of([Nn,ar],{coerceComplexToReal:!1});function Op(e){return!!Ja[e]}function nr(e){return[Ot([Wf(e)]),Ot([e]),U({type:\"variadic\",initial:[e,e],rest:e})]}function Qd(e){return[Ot([Wf(e),Wf(e)])]}var Ja={midpoint:J([...ut([[D,D],[he]]),...ut([[G,G],[zt]])],{allowDotCall:!0}),segment:J([U([D,D]),U([G,G])]),vector:J([U([D,D]),U([G,G])]),sphere:J([U([D,x]),U([G,x])]),distance:J(ut([[D,D],[G,G]])),glider:J(ut([[Cr.of([he,Te,Ee,Ae,ue,_e]),x]])),circle:J(ut([[D,he],[D,D],[D,x]]),{}),center:J(ut([[Te],[ue]]),{allowDotCall:!0}),radius:J(ut([[Te],[ue]]),{allowDotCall:!0}),intersection:J(ut([[lx,lx]])),strictintersection:J(ut([[lx,lx]])),parallel:J(ut([[UM,D]])),perpendicular:J(ut([[UM,D]])),anglebisector:J(ut([[HP]])),start:J([U([Pe]),U([ke])],{allowDotCall:!0}),end:J([U([Pe]),U([ke])],{allowDotCall:!0}),length:J([Ot([Ki],{geometry:!1,\"3d\":!1}),U([zt]),U([ke]),U([he]),U([Pe]),U([ue]),Ot({type:\"variadic\",initial:[Nn],rest:Nn},{geometry:!1,\"3d\":!1})],{allowDotCall:!0}),translate:J(ut([[Jd,Pe],[Jd,D,D]])),dilate:J(ut([[Jd,D,x]])),rotate:J(ut([[Jd,D,x]])),reflect:J(ut([[Jd,UM]])),apply:J(ut([[we,Jd]])),points:J([]),lines:J([]),circles:J([]),arcs:J([]),polygons:J([]),rays:J([]),vectors:J([]),angle:J(ut([[D,D,D]])),directedangle:J(ut([[D,D,D]])),angles:J(Yu([[_e]]),{allowDotCall:!0}),directedangles:J(Yu([[_e]]),{allowDotCall:!0}),coterminal:J(ut([[Ne],[Ce]])),round:J([...ut([[Se],[Se,x]]),...ut([[N],[N,x]])]),mod:J([...ut([[Se,Se]]),...ut([[N,N]])]),floor:J([...ut([[Se]]),...ut([[N]])]),ceil:J([...ut([[Se]]),...ut([[N]])]),abs:J([...ut([[Se]]),...ut([[N]])]),sign:J([U([Se]),U([N])]),coerceToReal:J([...ut([[Nn]])]),real:J([U([N])],{allowDotCall:!0}),imag:J([U([N])],{allowDotCall:!0}),conj:J([...ut([[Se]]),...ut([[N]])]),exp:J([U([Se]),U([N])]),sin:J([U([Se]),U([N])]),cos:J([U([Se]),U([N])]),tan:J([U([Se]),U([N])]),sinh:J([U([Se]),U([N])]),cosh:J([U([Se]),U([N])]),tanh:J([U([Se]),U([N])]),sec:J([U([Se]),U([N])]),csc:J([U([Se]),U([N])]),cot:J([U([Se]),U([N])]),sech:J([U([Se]),U([N])]),csch:J([U([Se]),U([N])]),coth:J([U([Se]),U([N])]),arctan:J([U([Se]),U([N]),...ut([[x,x]])]),arcsinh:J([U([Se]),U([N])]),arccot:J([U([Se]),U([N])]),arccsch:J([U([Se]),U([N])]),nthroot:J([...ut([[x,x]])]),complexNthRoot:J([...ut([[N,N]])]),sort:J(Yu([[ca],[Ye],[Ki,ca],[Ki,Ye]]),{minArityExampleArgs:\"([3,2,1])\",maxArityExampleArgs:\"([1,2,3],[3,2,1])\",dotMaxArityExampleArgs:\"([3,4])\",allowDotCall:!0}),shuffle:J(Yu([[Bt,Ki],[Bt,Ki,x]]),{minArityExampleArgs:\"([1,2,3])\",maxArityExampleArgs:\"([1,2,3],2)\",dotMaxArityExampleArgs:\"(2)\",allowDotCall:!0,isSeeded:!0}),join:J(Yu([{type:\"variadic\",initial:[kM,kM],rest:kM}]),{minArityExampleArgs:\"([1,2],[3,4])\",dotMinArityExampleArgs:\"([3,4])\",allowDotCall:!0}),unique:J(Yu([[Cr.of(Ki.types.filter(e=>e!==Mi&&e!==ar),{coerceComplexToReal:!1})]]),{minArityExampleArgs:\"([1,2,3])\",maxArityExampleArgs:\"([1,2,3])\",allowDotCall:!0}),normaldist:J(ut([[x,x]]),{defaultArguments:[Mc,dl]}),tdist:J(ut([[x,x,x]]),{defaultArguments:[Mc,dl]}),chisqdist:J(ut([[x]])),binomialdist:J(ut([[x,x]]),{defaultArguments:[Kd]}),poissondist:J(ut([[x]])),geodist:J(ut([[x]]),{defaultArguments:[Kd]}),uniformdist:J(ut([[x,x]]),{defaultArguments:[Mc,dl]}),pdf:J(ut([[wn,x]]),{allowDotCall:!0}),cdf:J(ut([[wn,x],[wn,x,x]]),{allowDotCall:!0}),median:J([...ut([[wn]]),...nr(x)],{fallthroughUnlessDistribution:!0,allowDotCall:!0}),stdev:J([...ut([[wn]]),...nr(Se),...nr(N)],{fallthroughUnlessDistribution:!0,allowDotCall:!0}),stdevp:J([...nr(Se),...nr(N)],{allowDotCall:!0}),var:J([...ut([[wn]]),...nr(Se),...nr(N)],{fallthroughUnlessDistribution:!0,allowDotCall:!0}),cov:J([...Qd(Se),...Qd(N)]),covp:J([...Qd(Se),...Qd(N)]),corr:J([...Qd(Se),...Qd(N)]),quantile:J([...ut([[wn,x]]),Ot([Z,Hr(x)])],{fallthroughUnlessDistribution:!0,allowDotCall:!0,minArityExampleArgs:\"([1,2,3], 1)\",maxArityExampleArgs:\"([1,2,3], 1)\",dotMinArityExampleArgs:\"(x)\",dotMaxArityExampleArgs:\"(x)\"}),random:J([Ot([Bt]),...Yu([[Bt,x],[Bt,x,x],[Bt,zM],[Bt,zM,x],[Bt,zM,x,x]])],{allowDotCall:!0,isSeeded:!0}),polygon:J([Ot([]),...nr(D),...Yu([[Z,Z],[x,Z],[Z,x]])]),total:J([...nr(Se),...nr(N),...nr(D),...nr(G)],{allowDotCall:!0}),mean:J([U([wn]),...nr(Se),...nr(N),...nr(D),...nr(G)],{fallthroughUnlessDistribution:!0,allowDotCall:!0}),varp:J([U([wn]),...nr(Se),...nr(N)],{fallthroughUnlessDistribution:!0,allowDotCall:!0}),mad:J([...nr(Se),...nr(N)]),lcm:J([...nr(Se),...nr(N)],{allowDotCall:!0}),gcd:J([...nr(Se),...nr(N)],{allowDotCall:!0}),min:J([...nr(x),U([Nt])],{allowDotCall:!0}),lower:J([U([Nt])],{allowDotCall:!0}),max:J([...nr(x),U([Nt])],{allowDotCall:!0}),upper:J([U([Nt])],{allowDotCall:!0}),ztest:J([Ot([Z,Hr(x)]),U([x,x,x]),Ot([Z,Hr(x),Z,Hr(x)]),U([x,x,x,x,x,x])]),zproptest:J(ut([[x,x],[x,x,x,x]])),ttest:J([Ot([Z]),U([x,x,x]),Ot([Z,Z]),U([x,x,x,x,x,x])]),null:J([U([Jt,x]),U([Ut,x]),U([sn,x]),U([on,x]),U([Zt,x]),U([cn,x]),U([Qt,x])],{allowDotCall:!0}),conf:J([U([Jt,x]),U([Ut,x]),U([sn,x]),U([on,x]),U([Zt,x]),U([cn,x]),U([Qt,x])],{allowDotCall:!0}),score:J([U([yn]),U([gn]),U([Jt]),U([Ut]),U([sn]),U([on]),U([Zt]),U([cn]),U([Qt]),U([kn]),U([Hn])],{allowDotCall:!0}),pleft:J([U([yn]),U([gn]),U([Jt]),U([Ut]),U([sn]),U([on]),U([Zt]),U([cn]),U([Qt])],{allowDotCall:!0}),pright:J([U([yn]),U([gn]),U([Jt]),U([Ut]),U([sn]),U([on]),U([Zt]),U([cn]),U([Qt])],{allowDotCall:!0}),dof:J([U([Jt]),U([Ut]),U([sn]),U([gn]),U([kn]),U([Hn])],{allowDotCall:!0}),stderr:J([U([Jt]),U([Ut]),U([sn]),U([on]),U([Zt]),U([cn]),U([Qt])],{allowDotCall:!0}),estimate:J([U([Jt]),U([Ut]),U([sn]),U([on]),U([Zt]),U([cn]),U([Qt])],{allowDotCall:!0}),chisqtest:J(Yu([{type:\"variadic\",initial:[Z,Z],rest:Z}])),chisqgof:J(Yu([[Z],[Z,Z]])),histogram:vc(),dotplot:vc(),boxplot:vc(),stats:vc(),det:vc(),inv:vc(),transpose:vc(),rref:vc(),trace:vc()};function E5(e){switch(e){case\"default\":case\"trig\":case\"inverseTrig\":case\"trig2\":case\"never-broadcast\":return[x];case\"reducer\":return[Z];case\"doubleReducer\":return[Z,Z];case\"parameterizedReducer\":return[Z,x];case\"color\":return[x,x,x]}}function v5(e){switch(e){case\"default\":case\"trig\":case\"inverseTrig\":case\"trig2\":case\"doubleReducer\":case\"color\":case\"never-broadcast\":return!1;case\"reducer\":case\"parameterizedReducer\":return!0}}function M5(e,t,n){return e===\"reducer\"?1/0:t+n}function R(e,t,n){var m,f,g,y,h;n===void 0&&(n={});let r=(m=n.tag)!=null?m:\"default\",o=(f=n.argumentTypes)!=null?f:E5(r),i=n.defaultArguments?n.defaultArguments.length:0,s=o.length-i,a=M5(r,s,i),u=(g=n.allowDotCall)!=null?g:v5(r),c=(y=n.noPeel)!=null?y:!1,{defaultArguments:l,minArityExampleArgs:p,maxArityExampleArgs:d}=n;return{module:e,symbol:t,argumentTypes:o,defaultArguments:l,returnType:(h=n.returnType)!=null?h:x,tag:r,minArity:s,maxArity:a,allowDotCall:u,noPeel:c,minArityExampleArgs:p,maxArityExampleArgs:d}}function ml(e){let t;return e in ur&&(t=ur[e].tag),t===\"trig\"||t===\"trig2\"||t===\"inverseTrig\"?!0:e===\"angle\"||e===\"angles\"||e===\"directedangle\"||e===\"directedangles\"||e===\"rotate\"}var ur={sin:R(\"BuiltIn\",\"sin\",{tag:\"trig\"}),cos:R(\"BuiltIn\",\"cos\",{tag:\"trig\"}),tan:R(\"BuiltIn\",\"tan\",{tag:\"trig\"}),cot:R(\"BuiltIn\",\"cot\",{tag:\"trig\"}),sec:R(\"BuiltIn\",\"sec\",{tag:\"trig\"}),csc:R(\"BuiltIn\",\"csc\",{tag:\"trig\"}),arcsin:R(\"Math\",\"asin\",{tag:\"inverseTrig\"}),arccos:R(\"Math\",\"acos\",{tag:\"inverseTrig\"}),arctan:R(\"Math\",\"atan2\",{argumentTypes:[x,x],tag:\"inverseTrig\"}),arccot:R(\"BuiltIn\",\"acot\",{tag:\"inverseTrig\"}),arcsec:R(\"BuiltIn\",\"asec\",{tag:\"inverseTrig\"}),arccsc:R(\"BuiltIn\",\"acsc\",{tag:\"inverseTrig\"}),sinh:R(\"BuiltIn\",\"sinh\"),cosh:R(\"BuiltIn\",\"cosh\"),tanh:R(\"BuiltIn\",\"tanh\"),coth:R(\"BuiltIn\",\"coth\"),sech:R(\"BuiltIn\",\"sech\"),csch:R(\"BuiltIn\",\"csch\"),arcsinh:R(\"BuiltIn\",\"asinh\"),arccosh:R(\"BuiltIn\",\"acosh\"),arctanh:R(\"BuiltIn\",\"atanh\"),arccoth:R(\"BuiltIn\",\"acoth\"),arcsech:R(\"BuiltIn\",\"asech\"),arccsch:R(\"BuiltIn\",\"acsch\"),sqrt:R(\"Math\",\"sqrt\"),rtxsqpone:R(\"BuiltIn\",\"sqrtxsqp1\"),rtxsqmone:R(\"BuiltIn\",\"sqrtxsqm1\"),hypot:R(\"BuiltIn\",\"hypot\",{argumentTypes:[x,x]}),log:R(\"BuiltIn\",\"common_log\"),logbase:R(\"BuiltIn\",\"log_base\",{argumentTypes:[x,x]}),ln:R(\"BuiltIn\",\"log\"),exp:R(\"Math\",\"exp\"),floor:R(\"Math\",\"floor\"),complexFloor:R(\"BuiltIn\",\"complexFloor\",{argumentTypes:[N],returnType:N}),ceil:R(\"Math\",\"ceil\"),complexCeil:R(\"BuiltIn\",\"complexCeil\",{argumentTypes:[N],returnType:N}),round:R(\"Math\",\"round\"),complexRound:R(\"BuiltIn\",\"complexRound\",{argumentTypes:[N],returnType:N}),abs:R(\"Math\",\"abs\"),sign:R(\"BuiltIn\",\"sign\"),mod:R(\"BuiltIn\",\"mod\",{argumentTypes:[x,x]}),complexMod:R(\"BuiltIn\",\"complexMod\",{argumentTypes:[N,N],returnType:N}),nCr:R(\"BuiltIn\",\"nCr\",{argumentTypes:[x,x]}),nPr:R(\"BuiltIn\",\"nPr\",{argumentTypes:[x,x]}),factorial:R(\"BuiltIn\",\"factorial\"),polyGamma:R(\"BuiltIn\",\"polyGamma\",{argumentTypes:[x,x]}),lcm:R(\"BuiltIn\",\"listLCM\",{tag:\"reducer\"}),complexLCM:R(\"BuiltIn\",\"complexListLCM\",{argumentTypes:[Ye],returnType:N,tag:\"reducer\"}),gcd:R(\"BuiltIn\",\"listGCD\",{tag:\"reducer\"}),complexGCD:R(\"BuiltIn\",\"complexListGCD\",{argumentTypes:[Ye],returnType:N,tag:\"reducer\"}),distance:R(\"BuiltIn\",\"distance\",{argumentTypes:[D,D]}),polygon:R(\"BuiltIn\",\"polygon\",{tag:\"reducer\",argumentTypes:[Yt],returnType:_e}),area:R(\"BuiltIn\",\"polygonArea\",{argumentTypes:[_e]}),perimeter:R(\"BuiltIn\",\"polygonPerimeter\",{argumentTypes:[_e]}),pointDet:R(\"BuiltIn\",\"pointDet\",{argumentTypes:[D,D]}),pointDot:R(\"BuiltIn\",\"pointDot\",{argumentTypes:[D,D]}),pointPerp:R(\"BuiltIn\",\"pointPerp\",{argumentTypes:[D],returnType:D}),complexMultiplyPoints:R(\"BuiltIn\",\"complexMultiplyPoints\",{argumentTypes:[D,D],returnType:D}),segment:R(\"BuiltIn\",\"segment\",{argumentTypes:[D,D],returnType:he}),line:R(\"BuiltIn\",\"line\",{argumentTypes:[D,D],returnType:Ee}),ray:R(\"BuiltIn\",\"ray\",{argumentTypes:[D,D],returnType:Ae}),vector:R(\"BuiltIn\",\"vector\",{argumentTypes:[D,D],returnType:Pe}),vectorThreeD:R(\"BuiltIn\",\"vectorThreeD\",{argumentTypes:[G,G],returnType:ke}),mathVector:R(\"BuiltIn\",\"mathVector\",{argumentTypes:[D,D],returnType:Pe}),mathVectorThreeD:R(\"BuiltIn\",\"mathVectorThreeD\",{argumentTypes:[G,G],returnType:ke}),vectorDisplacementAsPoint:R(\"BuiltIn\",\"vectorDisplacementAsPoint\",{argumentTypes:[Pe],returnType:D}),vectorThreeDDisplacementAsPoint:R(\"BuiltIn\",\"vectorThreeDDisplacementAsPoint\",{argumentTypes:[ke],returnType:G}),basePointFromVector:R(\"BuiltIn\",\"basePointFromVector\",{argumentTypes:[Pe],returnType:D}),basePointFromVectorThreeD:R(\"BuiltIn\",\"basePointFromVectorThreeD\",{argumentTypes:[ke],returnType:G}),circle:R(\"BuiltIn\",\"circle\",{argumentTypes:[D,x],returnType:Te}),center:R(\"BuiltIn\",\"center\",{argumentTypes:[Te],returnType:D,allowDotCall:!0}),radius:R(\"BuiltIn\",\"radius\",{argumentTypes:[Te],returnType:x,allowDotCall:!0}),arc:R(\"BuiltIn\",\"arc\",{argumentTypes:[D,D,D],returnType:ue}),arcCenter:R(\"BuiltIn\",\"arcCenter\",{argumentTypes:[ue],returnType:D}),arcFirstPoint:R(\"BuiltIn\",\"arcFirstPoint\",{argumentTypes:[ue],returnType:D}),arcMiddlePoint:R(\"BuiltIn\",\"arcMiddlePoint\",{argumentTypes:[ue],returnType:D}),arcThirdPoint:R(\"BuiltIn\",\"arcThirdPoint\",{argumentTypes:[ue],returnType:D}),arcOmega:R(\"BuiltIn\",\"arcOmega\",{argumentTypes:[ue],returnType:x}),undirectedAngleMarker:R(\"BuiltIn\",\"undirectedAngleMarker\",{argumentTypes:[Ce],returnType:Ne}),directedAngleMarker:R(\"BuiltIn\",\"directedAngleMarker\",{argumentTypes:[D,x,x,x],returnType:Ce}),directedCoterminalAngle:R(\"BuiltIn\",\"directedCoterminalAngle\",{argumentTypes:[Ce],returnType:Ce}),undirectedCoterminalAngle:R(\"BuiltIn\",\"undirectedCoterminalAngle\",{argumentTypes:[Ne],returnType:Ne}),supplement:R(\"BuiltIn\",\"supplementAngle\",{argumentTypes:[Ce],returnType:Ce}),directedAngleMarkerRawDelta:R(\"BuiltIn\",\"angleMarkerRawDelta\",{argumentTypes:[Ce],returnType:x}),undirectedAngleMarkerRawDelta:R(\"BuiltIn\",\"angleMarkerRawDelta\",{argumentTypes:[Ne],returnType:x}),directedAngleMarkerMultiplier:R(\"BuiltIn\",\"angleMarkerMultiplier\",{argumentTypes:[Ce],returnType:x}),undirectedAngleMarkerMultiplier:R(\"BuiltIn\",\"angleMarkerMultiplier\",{argumentTypes:[Ne],returnType:x}),polygonInteriorUndirectedAngles:R(\"BuiltIn\",\"polygonInteriorUndirectedAngles\",{argumentTypes:[_e,x],returnType:Ur,allowDotCall:!0,tag:\"never-broadcast\"}),polygonInteriorDirectedAngles:R(\"BuiltIn\",\"polygonInteriorDirectedAngles\",{argumentTypes:[_e,x],returnType:zr,allowDotCall:!0,tag:\"never-broadcast\"}),vertices:R(\"BuiltIn\",\"vertices\",{argumentTypes:[_e],returnType:Yt,allowDotCall:!0,tag:\"never-broadcast\"}),segments:R(\"BuiltIn\",\"polygonEdges\",{argumentTypes:[_e],returnType:Er,allowDotCall:!0,tag:\"never-broadcast\"}),scaleTangentTransformation:R(\"BuiltIn\",\"scaleTangentTransformation\",{argumentTypes:[we,x],returnType:_e}),scaleTangentPolygon:R(\"BuiltIn\",\"scaleTangentPolygon\",{argumentTypes:[_e,x],returnType:_e}),scaleTangentSegment:R(\"BuiltIn\",\"scaleTangentSegment\",{argumentTypes:[he,x],returnType:he}),scaleTangentLine:R(\"BuiltIn\",\"scaleTangentLine\",{argumentTypes:[Ee,x],returnType:Ee}),scaleTangentRay:R(\"BuiltIn\",\"scaleTangentRay\",{argumentTypes:[Ae,x],returnType:Ae}),scaleTangentCircle:R(\"BuiltIn\",\"scaleTangentCircle\",{argumentTypes:[Te,x],returnType:Te}),scaleTangentArc:R(\"BuiltIn\",\"scaleTangentArc\",{argumentTypes:[ue,x],returnType:Te}),scaleTangentDirectedAngleMarker:R(\"BuiltIn\",\"scaleTangentAngle\",{argumentTypes:[Ce,x],returnType:Ce}),scaleTangentUndirectedAngleMarker:R(\"BuiltIn\",\"scaleTangentAngle\",{argumentTypes:[Ne,x],returnType:Ne}),addTangentPolygon:R(\"BuiltIn\",\"addTangentPolygon\",{argumentTypes:[_e,_e],returnType:_e}),addTangentSegment:R(\"BuiltIn\",\"addTangentSegment\",{argumentTypes:[he,he],returnType:he}),addTangentSegmentThreeD:R(\"BuiltIn\",\"addTangentSegmentThreeD\",{argumentTypes:[zt,zt],returnType:zt}),addTangentLine:R(\"BuiltIn\",\"addTangentLine\",{argumentTypes:[Ee,Ee],returnType:Ee}),addTangentRay:R(\"BuiltIn\",\"addTangentRay\",{argumentTypes:[Ae,Ae],returnType:Ae}),addTangentVector:R(\"BuiltIn\",\"addTangentVector\",{argumentTypes:[Pe,Pe],returnType:Pe}),addTangentCircle:R(\"BuiltIn\",\"addTangentCircle\",{argumentTypes:[Te,Te],returnType:Te}),addTangentArc:R(\"BuiltIn\",\"addTangentArc\",{argumentTypes:[ue,ue],returnType:ue}),addTangentTransformation:R(\"BuiltIn\",\"addTangentTransformation\",{argumentTypes:[we,we],returnType:we}),addTangentDirectedAngleMarker:R(\"BuiltIn\",\"addTangentAngle\",{argumentTypes:[Ce,Ce],returnType:Ce}),addTangentUndirectedAngleMarker:R(\"BuiltIn\",\"addTangentAngle\",{argumentTypes:[Ne,Ne],returnType:Ne}),segmentGlider:R(\"BuiltIn\",\"segmentGlider\",{argumentTypes:[he,x],returnType:D}),segmentThreeDGlider:R(\"BuiltIn\",\"segmentThreeDGlider\",{argumentTypes:[zt,x],returnType:G}),lineGlider:R(\"BuiltIn\",\"lineGlider\",{argumentTypes:[Ee,x],returnType:D}),rayGlider:R(\"BuiltIn\",\"rayGlider\",{argumentTypes:[Ae,x],returnType:D}),circleGlider:R(\"BuiltIn\",\"circleGlider\",{argumentTypes:[Te,x],returnType:D}),arcGlider:R(\"BuiltIn\",\"arcGlider\",{argumentTypes:[ue,x],returnType:D}),polygonEdgeByParameter:R(\"BuiltIn\",\"polygonEdgeByParameter\",{argumentTypes:[_e,x],returnType:he}),polygonGlider:R(\"BuiltIn\",\"polygonGlider\",{argumentTypes:[_e,x],returnType:D}),chooseNonIncidentPoint:R(\"BuiltIn\",\"chooseNonIncidentPoint\",{argumentTypes:[D,D,D],returnType:D}),circleCircleIntersection:R(\"BuiltIn\",\"circleCircleIntersection\",{argumentTypes:[Te,Te,x],returnType:D}),circleArcIntersection:R(\"BuiltIn\",\"circleArcIntersection\",{argumentTypes:[Te,ue,x],returnType:D}),circleLineIntersection:R(\"BuiltIn\",\"circleLineIntersection\",{argumentTypes:[Te,Ee,x],returnType:D}),arcCircleIntersection:R(\"BuiltIn\",\"arcCircleIntersection\",{argumentTypes:[ue,Te,x],returnType:D}),arcArcIntersection:R(\"BuiltIn\",\"arcArcIntersection\",{argumentTypes:[ue,ue,x],returnType:D}),arcLineIntersection:R(\"BuiltIn\",\"arcLineIntersection\",{argumentTypes:[ue,Ee,x],returnType:D}),lineCircleIntersection:R(\"BuiltIn\",\"lineCircleIntersection\",{argumentTypes:[Ee,Te,x],returnType:D}),lineArcIntersection:R(\"BuiltIn\",\"lineArcIntersection\",{argumentTypes:[Ee,ue,x],returnType:D}),lineLineIntersection:R(\"BuiltIn\",\"lineLineIntersection\",{argumentTypes:[Ee,Ee,x],returnType:D}),lineFromSegment:R(\"BuiltIn\",\"identity\",{argumentTypes:[he],returnType:Ee}),lineFromRay:R(\"BuiltIn\",\"identity\",{argumentTypes:[Ae],returnType:Ee}),parallel:R(\"BuiltIn\",\"parallel\",{argumentTypes:[Ee,D],returnType:Ee}),perpendicular:R(\"BuiltIn\",\"perpendicular\",{argumentTypes:[Ee,D],returnType:Ee}),anglebisector:R(\"BuiltIn\",\"anglebisector\",{argumentTypes:[Ne],returnType:Ae}),directedanglebisector:R(\"BuiltIn\",\"anglebisector\",{argumentTypes:[Ce],returnType:Ae}),rawTransform:R(\"BuiltIn\",\"rawTransform\",{argumentTypes:[D,D],returnType:we}),rawTransformConj:R(\"BuiltIn\",\"rawTransformConj\",{argumentTypes:[D,D],returnType:we}),transformWithoutTranslation:R(\"BuiltIn\",\"transformWithoutTranslation\",{argumentTypes:[we],returnType:we}),transformScaleFactor:R(\"BuiltIn\",\"transformScaleFactor\",{argumentTypes:[we],returnType:D}),translation:R(\"BuiltIn\",\"translation\",{argumentTypes:[D],returnType:we}),dilation:R(\"BuiltIn\",\"dilation\",{argumentTypes:[D,x],returnType:we}),rotation:R(\"BuiltIn\",\"rotation\",{tag:\"trig2\",argumentTypes:[D,x],returnType:we}),reflection:R(\"BuiltIn\",\"reflection\",{argumentTypes:[Ee],returnType:we}),compose:R(\"BuiltIn\",\"composeTransformation\",{argumentTypes:[we,we],returnType:we}),inverse:R(\"BuiltIn\",\"invertTransformation\",{argumentTypes:[we],returnType:we}),transformPoint:R(\"BuiltIn\",\"transformPoint\",{argumentTypes:[we,D],returnType:D}),transformSegment:R(\"BuiltIn\",\"transformSegment\",{argumentTypes:[we,he],returnType:he}),transformLine:R(\"BuiltIn\",\"transformLine\",{argumentTypes:[we,Ee],returnType:Ee}),transformRay:R(\"BuiltIn\",\"transformRay\",{argumentTypes:[we,Ae],returnType:Ae}),transformVector:R(\"BuiltIn\",\"transformVector\",{argumentTypes:[we,Pe],returnType:Pe}),transformCircle:R(\"BuiltIn\",\"transformCircle\",{argumentTypes:[we,Te],returnType:Te}),transformArc:R(\"BuiltIn\",\"transformArc\",{argumentTypes:[we,ue],returnType:ue}),transformPolygon:R(\"BuiltIn\",\"transformPolygon\",{argumentTypes:[we,_e],returnType:_e}),transformAngleMarker:R(\"BuiltIn\",\"transformAngleMarker\",{argumentTypes:[we,Ne],returnType:Ne}),transformDirectedAngleMarker:R(\"BuiltIn\",\"transformAngleMarker\",{argumentTypes:[we,Ce],returnType:Ce}),distanceThreeD:R(\"BuiltIn\",\"distanceThreeD\",{argumentTypes:[G,G]}),segmentThreeD:R(\"BuiltIn\",\"segmentThreeD\",{argumentTypes:[G,G],returnType:zt}),triangle:R(\"BuiltIn\",\"triangle\",{argumentTypes:[G,G,G],returnType:dr}),sphere:R(\"BuiltIn\",\"sphere\",{argumentTypes:[G,x],returnType:kr}),mean:R(\"BuiltIn\",\"mean\",{tag:\"reducer\"}),total:R(\"BuiltIn\",\"total\",{tag:\"reducer\"}),stdev:R(\"BuiltIn\",\"stdev\",{tag:\"reducer\"}),stdevp:R(\"BuiltIn\",\"stdevp\",{tag:\"reducer\"}),mad:R(\"BuiltIn\",\"mad\",{tag:\"reducer\"}),count:R(\"BuiltIn\",\"listLength\",{tag:\"reducer\",argumentTypes:[ar],noPeel:!0}),listMin:R(\"BuiltIn\",\"listMin\",{tag:\"reducer\"}),listMax:R(\"BuiltIn\",\"listMax\",{tag:\"reducer\"}),min:R(\"Math\",\"min\",{argumentTypes:[x,x],returnType:x}),max:R(\"Math\",\"max\",{argumentTypes:[x,x],returnType:x}),argmin:R(\"BuiltIn\",\"argMin\",{tag:\"reducer\",noPeel:!0}),argmax:R(\"BuiltIn\",\"argMax\",{tag:\"reducer\",noPeel:!0}),median:R(\"BuiltIn\",\"median\",{tag:\"reducer\"}),var:R(\"BuiltIn\",\"variance\",{tag:\"reducer\"}),varp:R(\"BuiltIn\",\"varp\",{tag:\"reducer\"}),cov:R(\"BuiltIn\",\"cov\",{tag:\"doubleReducer\"}),covp:R(\"BuiltIn\",\"covp\",{tag:\"doubleReducer\"}),corr:R(\"BuiltIn\",\"corr\",{tag:\"doubleReducer\"}),spearman:R(\"BuiltIn\",\"spearman\",{tag:\"doubleReducer\"}),quantile:R(\"BuiltIn\",\"quantile\",{tag:\"parameterizedReducer\"}),quartile:R(\"BuiltIn\",\"quartile\",{tag:\"parameterizedReducer\"}),upperQuantileIndex:R(\"BuiltIn\",\"upperQuantileIndex\",{tag:\"parameterizedReducer\"}),lowerQuantileIndex:R(\"BuiltIn\",\"lowerQuantileIndex\",{tag:\"parameterizedReducer\"}),quartileIndex:R(\"BuiltIn\",\"quartileIndex\",{tag:\"parameterizedReducer\"}),upperQuartileIndex:R(\"BuiltIn\",\"upperQuartileIndex\",{tag:\"parameterizedReducer\"}),lowerQuartileIndex:R(\"BuiltIn\",\"lowerQuartileIndex\",{tag:\"parameterizedReducer\"}),normalcdf:R(\"BuiltIn\",\"normalcdf\",{argumentTypes:[x,x,x,x],defaultArguments:[Mc,dl]}),normalpdf:R(\"BuiltIn\",\"normalpdf\",{argumentTypes:[x,x,x],defaultArguments:[Mc,dl]}),binomcdf:R(\"BuiltIn\",\"binomcdf\",{argumentTypes:[x,x,x,x],defaultArguments:[Kd]}),binompdf:R(\"BuiltIn\",\"binompdf\",{argumentTypes:[x,x,x],defaultArguments:[Kd]}),poissoncdf:R(\"BuiltIn\",\"poissoncdf\",{argumentTypes:[x,x,x]}),poissonpdf:R(\"BuiltIn\",\"poissonpdf\",{argumentTypes:[x,x]}),geocdf:R(\"BuiltIn\",\"geocdf\",{argumentTypes:[x,x,x]}),geopdf:R(\"BuiltIn\",\"geopdf\",{argumentTypes:[x,x]}),uniformcdf:R(\"BuiltIn\",\"uniformcdf\",{argumentTypes:[x,x,x,x],defaultArguments:[Mc,dl]}),uniformpdf:R(\"BuiltIn\",\"uniformpdf\",{argumentTypes:[x,x,x],defaultArguments:[Mc,dl]}),invT:R(\"BuiltIn\",\"invT\",{argumentTypes:[x,x]}),invPoisson:R(\"BuiltIn\",\"invPoisson\",{argumentTypes:[x,x]}),invGeo:R(\"BuiltIn\",\"invGeo\",{argumentTypes:[x,x]}),invBinom:R(\"BuiltIn\",\"invBinom\",{argumentTypes:[x,x,x]}),invUniform:R(\"BuiltIn\",\"invUniform\",{argumentTypes:[x,x,x]}),tpdf:R(\"BuiltIn\",\"tpdf\",{argumentTypes:[x,x]}),tcdf:R(\"BuiltIn\",\"tcdf\",{argumentTypes:[x,x,x,x,x]}),erf:R(\"BuiltIn\",\"erf\"),invNorm:R(\"BuiltIn\",\"invNorm\"),tscore:R(\"BuiltIn\",\"tscore\",{tag:\"parameterizedReducer\",defaultArguments:[Mc]}),normalSample:R(\"BuiltIn\",\"normalSample\",{argumentTypes:[Bt,x,x]}),uniformSample:R(\"BuiltIn\",\"uniformSample\",{argumentTypes:[Bt,x,x]}),tSample:R(\"BuiltIn\",\"tSample\",{argumentTypes:[Bt,x]}),poissonSample:R(\"BuiltIn\",\"poissonSample\",{argumentTypes:[Bt,x]}),binomSample:R(\"BuiltIn\",\"binomSample\",{argumentTypes:[Bt,x,x]}),rgb:R(\"BuiltIn\",\"rgb\",{returnType:fn,tag:\"color\"}),hsv:R(\"BuiltIn\",\"hsv\",{returnType:fn,tag:\"color\"}),tone:R(\"BuiltIn\",\"tone\",{argumentTypes:[x,x],returnType:pr,defaultArguments:[Kd],minArityExampleArgs:\"(440)\",maxArityExampleArgs:\"(440, 0.5)\"}),validateRangeLength:R(\"BuiltIn\",\"validateRangeLength\",{returnType:x,argumentTypes:[Z,Z,x,x],tag:\"never-broadcast\",noPeel:!0}),validateSampleCount:R(\"BuiltIn\",\"validateSampleCount\",{returnType:x,argumentTypes:[x]}),select:R(\"BuiltIn\",\"select\",{argumentTypes:[ar,vi],returnType:e=>e[0],tag:\"never-broadcast\",noPeel:!0}),shuffle:R(\"BuiltIn\",\"shuffle\",{argumentTypes:[Bt,ar],returnType:e=>e[1],tag:\"never-broadcast\"}),sortPerm:R(\"BuiltIn\",\"sortPerm\",{argumentTypes:[Z],returnType:Z,tag:\"never-broadcast\",noPeel:!0}),complexSortPerm:R(\"BuiltIn\",\"complexSortPerm\",{argumentTypes:[Ye],returnType:Z,tag:\"never-broadcast\",noPeel:!0}),elementsAt:R(\"BuiltIn\",\"elementsAt\",{argumentTypes:[ar,Z],returnType:e=>e[0],tag:\"never-broadcast\",noPeel:!0}),uniquePerm:R(\"BuiltIn\",\"uniquePerm\",{argumentTypes:[ar],returnType:Z,tag:\"never-broadcast\",noPeel:!0}),restriction:R(\"BuiltIn\",\"restriction\",{argumentTypes:[Oe],returnType:un}),restrictionToBoolean:R(\"BuiltIn\",\"restrictionToBoolean\",{argumentTypes:[un],returnType:Oe}),complex:R(\"BuiltIn\",\"complex\",{argumentTypes:[x,x],returnType:N}),arg:R(\"BuiltIn\",\"arg\",{argumentTypes:[N],returnType:x}),wirtingerEqualOrWarning:R(\"BuiltIn\",\"wirtingerEqualOrWarning\",{argumentTypes:[N,N],returnType:N}),complexDivide:R(\"BuiltIn\",\"complexDivide\",{argumentTypes:[N,N],returnType:N}),peelableCoerceComplexToReal:R(\"BuiltIn\",\"coerceComplexToReal\",{argumentTypes:[N],returnType:x}),peelableCoerceComplexToRealWithTolerance:R(\"BuiltIn\",\"coerceComplexToReal\",{argumentTypes:[N],returnType:x}),coerceComplexToReal:R(\"BuiltIn\",\"coerceComplexToReal\",{argumentTypes:[N],returnType:x}),coerceComplexToRealWithTolerance:R(\"BuiltIn\",\"coerceComplexToRealWithTolerance\",{argumentTypes:[N],returnType:x}),coerceRealToComplex:R(\"BuiltIn\",\"coerceRealToComplex\",{argumentTypes:[x],returnType:N}),complexSqrt:R(\"BuiltIn\",\"complexSqrt\",{argumentTypes:[N],returnType:N}),complexLn:R(\"BuiltIn\",\"complexLog\",{argumentTypes:[N],returnType:N}),complexLogbase:R(\"BuiltIn\",\"complexLogbase\",{argumentTypes:[N,N],returnType:N}),complexLog:R(\"BuiltIn\",\"complexCommonLog\",{argumentTypes:[N],returnType:N}),complexExp:R(\"BuiltIn\",\"complexExp\",{argumentTypes:[N],returnType:N}),complexPow:R(\"BuiltIn\",\"complexPow\",{argumentTypes:[N,N],returnType:N}),complexSin:R(\"BuiltIn\",\"complexSin\",{argumentTypes:[N],returnType:N}),complexCos:R(\"BuiltIn\",\"complexCos\",{argumentTypes:[N],returnType:N}),complexTan:R(\"BuiltIn\",\"complexTan\",{argumentTypes:[N],returnType:N}),complexSinh:R(\"BuiltIn\",\"complexSinh\",{argumentTypes:[N],returnType:N}),complexCosh:R(\"BuiltIn\",\"complexCosh\",{argumentTypes:[N],returnType:N}),complexTanh:R(\"BuiltIn\",\"complexTanh\",{argumentTypes:[N],returnType:N}),complexSec:R(\"BuiltIn\",\"complexSec\",{argumentTypes:[N],returnType:N}),complexCsc:R(\"BuiltIn\",\"complexCsc\",{argumentTypes:[N],returnType:N}),complexCot:R(\"BuiltIn\",\"complexCot\",{argumentTypes:[N],returnType:N}),complexSech:R(\"BuiltIn\",\"complexSech\",{argumentTypes:[N],returnType:N}),complexCsch:R(\"BuiltIn\",\"complexCsch\",{argumentTypes:[N],returnType:N}),complexCoth:R(\"BuiltIn\",\"complexCoth\",{argumentTypes:[N],returnType:N}),complexArcsin:R(\"BuiltIn\",\"complexAsin\",{argumentTypes:[N],returnType:N}),complexArccos:R(\"BuiltIn\",\"complexAcos\",{argumentTypes:[N],returnType:N}),complexArctan:R(\"BuiltIn\",\"complexAtan\",{argumentTypes:[N],returnType:N}),complexArcsec:R(\"BuiltIn\",\"complexAsec\",{argumentTypes:[N],returnType:N}),complexArccsc:R(\"BuiltIn\",\"complexAcsc\",{argumentTypes:[N],returnType:N}),complexArccot:R(\"BuiltIn\",\"complexAcot\",{argumentTypes:[N],returnType:N}),complexArcsinh:R(\"BuiltIn\",\"complexAsinh\",{argumentTypes:[N],returnType:N}),complexArccosh:R(\"BuiltIn\",\"complexAcosh\",{argumentTypes:[N],returnType:N}),complexArctanh:R(\"BuiltIn\",\"complexAtanh\",{argumentTypes:[N],returnType:N}),complexArcsech:R(\"BuiltIn\",\"complexAsech\",{argumentTypes:[N],returnType:N}),complexArccsch:R(\"BuiltIn\",\"complexAcsch\",{argumentTypes:[N],returnType:N}),complexArccoth:R(\"BuiltIn\",\"complexAcoth\",{argumentTypes:[N],returnType:N}),angleVertex:R(\"BuiltIn\",\"angleVertex\",{argumentTypes:[Ne],returnType:D}),angleStart:R(\"BuiltIn\",\"angleStart\",{argumentTypes:[Ne],returnType:x}),directedAngleVertex:R(\"BuiltIn\",\"angleVertex\",{argumentTypes:[Ce],returnType:D}),directedAngleStart:R(\"BuiltIn\",\"angleStart\",{argumentTypes:[Ce],returnType:x}),chisqIndependenceRowTotals:R(\"BuiltIn\",\"chisqIndependenceRowTotals\",{argumentTypes:[Z,x,x],returnType:Z,tag:\"never-broadcast\",noPeel:!0}),chisqIndependenceColTotals:R(\"BuiltIn\",\"chisqIndependenceColTotals\",{argumentTypes:[Z,x,x],returnType:Z,tag:\"never-broadcast\",noPeel:!0}),chisqIndependenceExpectedValues:R(\"BuiltIn\",\"chisqIndependenceExpectedValues\",{argumentTypes:[Z,Z],returnType:Z,tag:\"never-broadcast\",noPeel:!0}),chisqcdf:R(\"BuiltIn\",\"chisqcdf\",{argumentTypes:[x,x,x],returnType:x,noPeel:!0}),chisqpdf:R(\"BuiltIn\",\"chisqpdf\",{argumentTypes:[x,x],returnType:x,noPeel:!0}),invChisq:R(\"BuiltIn\",\"invChisq\",{argumentTypes:[x,x]})},tm={sqrt:\"complexSqrt\",ln:\"complexLn\",log:\"complexLog\",logbase:\"complexLogbase\",exp:\"complexExp\",sin:\"complexSin\",cos:\"complexCos\",tan:\"complexTan\",sinh:\"complexSinh\",cosh:\"complexCosh\",tanh:\"complexTanh\",sec:\"complexSec\",csc:\"complexCsc\",cot:\"complexCot\",sech:\"complexSech\",csch:\"complexCsch\",coth:\"complexCoth\",arcsin:\"complexArcsin\",arccos:\"complexArccos\",arctan:\"complexArctan\",arcsec:\"complexArcsec\",arccsc:\"complexArccsc\",arccot:\"complexArccot\",arcsinh:\"complexArcsinh\",arccosh:\"complexArccosh\",arctanh:\"complexArctanh\",arcsech:\"complexArcsech\",arccsch:\"complexArccsch\",arccoth:\"complexArccoth\",floor:\"complexFloor\",ceil:\"complexCeil\",mod:\"complexMod\",nthroot:\"complexNthRoot\",sortPerm:\"complexSortPerm\"},_5={sqrt:!0,ln:!0,log:!0,logbase:!0,arcsin:!0,arccos:!0,arcsec:!0,arccsc:!0,arccosh:!0,arctanh:!0,arcsech:!0,arccoth:!0,nthroot:!0};function px(e,t){return e.isComplexEnabled()&&t in _5?tm[t]:t}function em(e){return!!ur[e]}function qy(e,t){let n=Op(t)?Ja[t]:void 0;if(!n&&!em(t))return;let r=[];return n&&(r=[...n.getSignatures(e)]),em(t)&&!n&&r.push(...$M(t)),r}function $M(e){var o;let t=[],n=ur[e],r=(o=n.returnType)!=null?o:x;switch(n.tag){case\"reducer\":{if(Array.isArray(n.argumentTypes)&&typeof n.argumentTypes[0]==\"number\"&&W(n.argumentTypes[0])&&typeof r==\"number\"&&er(r)){let i=n.argumentTypes[0],s=rt(i);t.push(...nr(s))}else throw new Error(`Programming error: declared argumentTypes for built-in function ${e} is not consistent with \"reducer\"`);break}case\"parameterizedReducer\":{if(t.push(Ot(n.argumentTypes)),Array.isArray(n.argumentTypes)&&n.argumentTypes.length===2){let i=n.argumentTypes[1];t.push(Ot([n.argumentTypes[0],typeof i==\"number\"&&er(i)?Hr(i):i]))}break}case\"doubleReducer\":case\"never-broadcast\":{t.push(Ot(n.argumentTypes));break}default:{t.push(Ot(n.argumentTypes.map(i=>Ah(i)?Hr(i):i)));break}}return t}var $e=class extends X{constructor(t){super([]),this._symbol=ks(t),this._errorSymbol=this._symbol,this.addDependency(this._symbol)}setInputSpan(t){super.setInputSpan(t),this._errorSymbol=ks(this.getInputString())}getInputSpan(){return this._inputSpan===void 0?Zo(this._symbol,0,this._symbol.length):this._inputSpan}},Mn=class extends $e{constructor(){super(...arguments);this.type=\"Identifier\"}};var On=class extends X{constructor(t,n){super(n,{skipRegisterDependencies:!0}),typeof t==\"string\"&&(t=new Mn(t)),this._identifier=t,this._symbol=t._symbol,this._errorSymbol=t._errorSymbol===\"logbase\"?\"log\":t._errorSymbol,this.registerDependencies()}registerDependencies(){this.addDependency(this._symbol),super.registerDependencies(),ml(this._symbol)&&this.addDependency(\"trigAngleMultiplier\")}},rr=class extends On{constructor(){super(...arguments);this.type=\"FunctionCall\"}};var Hs=class extends X{slot(t){return this.args[t]}},fl=class extends Hs{constructor(){super(...arguments);this.type=\"ParenSeq\"}};var YM={pi:new Un(Math.PI),tau:new Un(2*Math.PI),e:new Un(Math.E),trigAngleMultiplier:new Un(Ie(1,1)),infty:new Un(1/0),identityTransformation:new rr(\"translation\",[new fl([new Un(0),new Un(0)])])};var Ap=class extends pt{constructor(){super(...arguments);this.type=\"Placeholder\"}};var wp,ct={};for(wp of fe(YM))ct[wp]=YM[wp];for(wp of fe(ur))ct[wp]=new Ap;for(wp of fe(Ja))ct[wp]=new Ap;var nm=class extends pt{constructor(n){super();this.type=\"AssignmentImport\";this._symbol=n.symbol,this.moduleID=n.moduleID,this.importFrom=n.importFrom,this.defaultDefinition=n.defaultDefinition,this._exports=[this._symbol]}},rm=class extends pt{constructor(n){super();this.type=\"ConcreteAssignmentImport\";this._symbol=n.symbol,this.moduleID=n.moduleID,this.importFrom=n.importFrom,this.resolvedRawNode=n.resolvedRawNode,this.concrete=n.concrete,this._exports=[this._symbol]}};var yo={\"<\":{inclusive:!1,direction:-1},\"!=\":{inclusive:!1,direction:0},\">\":{inclusive:!1,direction:1},\"<=\":{inclusive:!0,direction:-1},\"=\":{inclusive:!0,direction:0},\">=\":{inclusive:!0,direction:1}};function yl(e,t){switch(t){case-1:return e?\"<=\":\"<\";case 0:return e?\"=\":\"!=\";case 1:return e?\">=\":\">\";default:throw\"Programming error.  Comparators must have a direction of -1, 0, or 1\"}}var si=class extends X{constructor(){super(...arguments);this.type=\"Subtract\"}};var Ro=class extends X{constructor(n,r){super(r);this.operator=n;this._difference=yo[this.operator].direction===-1?new si([r[1],r[0]]):new si([r[0],r[1]])}asComparator(){return this}isInequality(){return yo[this.operator].direction!==0}},zy=class extends Ro{constructor(n){super(\"<\",n);this.type=\"Comparator['<']\"}},ky=class extends Ro{constructor(n){super(\"<=\",n);this.type=\"Comparator['<=']\"}},Hy=class extends Ro{constructor(n){super(\">\",n);this.type=\"Comparator['>']\"}},$y=class extends Ro{constructor(n){super(\">=\",n);this.type=\"Comparator['>=']\"}},Qa=class extends Ro{constructor(n){super(\"=\",n);this.type=\"Comparator['=']\"}};function dx(e,t){switch(e){case\">\":return new Hy(t);case\"<\":return new zy(t);case\">=\":return new $y(t);case\"<=\":return new ky(t);case\"=\":return new Qa(t);default:throw new Error(`Unsupported operator ${e}`)}}var gl=class extends pt{constructor(n,r){super();this.type=\"Equation\";this.mergeDependencies(n,r),this._lhs=n,this._rhs=r,this._difference=new si([this._lhs,this._rhs])}asComparator(){return new Qa([this._lhs,this._rhs])}};var Fr=class extends pt{constructor(n,r,o,i){super();this.recursionInfo=i;this.type=\"FunctionDefinition\";this.externalBaseCases=[];this._symbol=n._symbol,this._argSymbols=r.map(s=>s._symbol);for(let s of this._argSymbols)if(s===this._symbol)throw QE(s);this._exports=[this._symbol],this._expression=o,this.mergeDependenciesInScope(\"FunctionDefinition\",[this._symbol].concat(this._argSymbols),this._expression,{functionDefinitionSymbol:this._symbol}),this.combinedDependencies=super.getDependencies()}getDependencies(){return this.combinedDependencies}setExternalBaseCases(n){this.externalBaseCases=[...n],this.combinedDependencies=[...super.getDependencies()];for(let r of n){let o=r.getRef();o&&this.combinedDependencies.push(o)}}getExternalBaseCases(){return this.externalBaseCases}getSliderVariables(n,r){let o=this._argSymbols;return super.getSliderVariables(n,r).filter(i=>o.indexOf(i)===-1)}asEquation(){let n=this._argSymbols.map(o=>new Mn(o)),r=new gl(new rr(new Mn(this._symbol),n),this._expression);return r.userData=this.userData,r.metaData=this.metaData,r}};var Do=class e extends pt{constructor(n,r,o,i,s){super();this.specifiedArg=o;this.rhs=i;this.originalNode=s;this.type=\"RecursiveFunctionBaseCase\";if(this._symbol=n,this._argSymbols=r.map(a=>a._symbol),this._expression=i,this.userData=s.userData,this.metaData=s.metaData,this._inputSpan=s._inputSpan,this.mergeDependenciesInScope(\"FunctionDefinition\",this._argSymbols,this._expression,{functionDefinitionSymbol:this._symbol}),o.valid){let a=o.functionDefArgSymbols.slice();a[o.argIndex]=o.argValue.toString(),this.ref=`_base_case:${n}:${a.join(\",\")}`,this._exports=[this.ref]}else{let a=this._exports.find(u=>u.indexOf(\"idref\")!==-1);a&&(this.ref=a)}}static fromCallAssignment(n,r){let o=r._lhs;if(!(o instanceof On))return;let i=n[o._symbol];if(!i||!(i instanceof Fr))return;if(o.args.length!==i._argSymbols.length)return new e(i._symbol,[],{valid:!1,error:sC(i._symbol,i._argSymbols.length)},r._rhs,r);let s,a=[];for(let u=0;u<o.args.length;u++){let c=o.args[u];if(c instanceof $n){if(s){s={valid:!1,error:my()};break}s={valid:!0,argIndex:u,functionDefArgSymbols:i._argSymbols,argValue:c.asValue(),argSymbol:i._argSymbols[u]}}else if(c instanceof $e)if(c._symbol!==i._argSymbols[u]){s={valid:!1,error:hb()};break}else a.push(c);else{s={valid:!1,error:hb()};break}}if(s)return new e(i._symbol,a,s,r._rhs,r)}getRef(){return this.ref}getSliderVariables(n,r){let o=this._argSymbols;return super.getSliderVariables(n,r).filter(i=>o.indexOf(i)===-1)}};So();function fw(e){let t=1/0;for(let n=0;n<e.length;n++)(e[n].isList||e[n].isBroadcast)&&(t=Math.min(t,e[n].length));return t}var ns=class extends X{constructor(n){super(n);this.isList=!0;this.length=n.length}elementAt(n){if(n=Math.floor(n),n>=0&&n<this.args.length)return this.args[n];throw new Error(\"Out of bounds list access\")}eachElement(n){for(let r=0;r<this.length;r++)n(this.elementAt(r),r)}mapElements(n){let r=[];for(let o=0;o<this.length;o++)r.push(n(this.elementAt(o),o));return r}asValue(){let n=[];for(let r=0;r<this.args.length;r++)n.push(this.args[r].asValue());return n}asCompilerValue(){let n=[];for(let r=0;r<this.args.length;r++)n.push(this.args[r].asCompilerValue());return n}},Yy=class Yy extends ns{constructor(){super(...arguments);this.type=\"List\"}};Yy.eachArgs=function(n,r){let o=fw(n);if(!isFinite(o)){r(n);return}for(let i=0;i<o;i++){let s=[];for(let a=0;a<n.length;a++)s.push(ZM(n[a])||W(n[a].valueType)?n[a].elementAt(i):n[a]);r(s,i)}},Yy.wrap=function(n){return n instanceof ns||W(n.valueType)?n:new Yy([n])};var im=Yy,om=class om extends ns{constructor(){super(...arguments);this.type=\"List\"}};om.eachArgs=function(n,r){let o=fw(n);if(!isFinite(o)){r(n);return}for(let i=0;i<o;i++){let s=[];for(let a=0;a<n.length;a++)s.push(ZM(n[a])||W(n[a].valueType)?n[a].elementAt(i):n[a]);r(s,i)}},om.wrap=function(n){return n instanceof om||W(n.valueType)?n:new om([n])};var Xo=om;function Zy(e){return(e==null?void 0:e.type)===\"FunctionDefinition\"}function hl(e){return(e==null?void 0:e.type)===\"Placeholder\"||(e==null?void 0:e.type)===\"FunctionDefinition\"}function Ka(e){return e.type===\"Identifier\"}function Zu(e){return e.type===\"Table\"}function mx(e){return e.type===\"Image\"}function go(e){return e.type===\"Error\"}function Bi(e){return e.type===\"Regression\"}function eu(e){return e.type===\"TableColumn\"}function Xu(e){return e.type===\"TableColumnValue\"}function sm(e){return e.type===\"IRExpression\"||e instanceof ns}function ZM(e){return sm(e)&&e.isList}function fx(e){return(e==null?void 0:e.type)===\"Constant\"||(e==null?void 0:e.type)===\"IRExpression\"&&(e==null?void 0:e.isConstant)}function am(e){return(e==null?void 0:e.type)===\"MixedNumber\"||fx(e)}function $s(e){return e.type===\"MovablePoint\"||e.type===\"MovableComplexNumber\"||e.type===\"IRExpression\"&&e.isTypedConstant}function yx(e){return(e==null?void 0:e.type)===\"MovableComplexNumber\"||(e==null?void 0:e.type)===\"MovablePoint\"}function um(e){return(e==null?void 0:e.type)===\"AssignmentImport\"}function yw(e){return(e==null?void 0:e.type)===\"RecursiveFunctionBaseCase\"}var cm=class extends pt{constructor(n,r){super();this.type=\"Regression\";this.isRegression=!0;this.tableRegressionData=void 0;this._lhs=n,this.isLhsSimple=n instanceof $e,this._logLhs=new rr(\"ln\",[n]),this._rhs=r,this._difference=new si([n,r]),this._logDifference=new si([new rr(\"ln\",[n]),new rr(\"ln\",[r])]),this.mergeDependencies(n,r)}getExportsFromConcrete(n,r){if(go(r))return[];let o=[];for(let i of fe(r.parameters))n.assignmentForbidden(i)||o.push(i);return n.assignmentForbidden(r.residualVariable)||o.push(r.residualVariable),o}getSliderVariables(){return[]}};var gx=class extends pt{constructor(n,r,o,i){super();this.calcColumns=r;this.regression=o;this.type=\"Table\";this.exportPenalty=1;this.isTable=!0;this.columns=n,this.mergeDependencies.apply(this,n),this.tableFrameID=i}getExports(){return[]}getColumnIdsForGraphing(){return this.columns.map(n=>n.userData.id)}getColumnStatementIds(){return this.calcColumns.map(n=>n.userData.id)}getRegressionId(){var n;return(n=this.regression)==null?void 0:n.userData.id}columnIsViewportDependency(n){return this.calcColumns[n].isViewportDependency}isValueDraggable(n,r,o){if(n.columns[r].type!==\"TableColumnValue\"||!n.columns[r].isIndependent)return!1;let s=this.calcColumns[r].values,a=s&&s[o],u=a&&a.asValue();return!!(typeof u==\"number\"&&isFinite(u)&&a.getDependencies().length===0)}},Wu=class extends gx{},hx=class extends gx{};var tu=class extends pt{constructor(n,r,o,i){super();this.tableID=o;this.columnIndex=i;this.type=\"TableColumn\";this.headerDependencies=new Set;this.cellDependencies=new Set;this.length=0;this.isViewportDependency=!1;this.header=n,this.values=r,this.registerDependencies(),this._exports=this.computeExports(),this.tableFrameID=o}registerDependencies(){this.mergeDependencies(this.header),this.mergeDependencies.apply(this,this.values);for(let n of this.header.getDependencies())this.headerDependencies.add(n);for(let n of this.header.getOptionalDependencies())this.headerDependencies.add(n);for(let n of this.values){for(let r of n.getDependencies())this.cellDependencies.add(r);for(let r of n.getOptionalDependencies())this.cellDependencies.add(r)}}computeExports(){return this.header instanceof $e?[this.header._symbol]:[]}isFreeVariable(n){if(!(this.header instanceof $e))return!1;let r=vn(this.tableFrameID,this.header._symbol);return!!By(n).assignmentMaps.assignments.get(r)}};var Tx=\"dcg_viewport\",bx=class extends pt{constructor(n){super();this.type=\"Viewport\";this.bounds=n,this.mergeDependencies(this.bounds.xmin),this.mergeDependencies(this.bounds.xmax),this.mergeDependencies(this.bounds.ymin),this.mergeDependencies(this.bounds.ymax),this.bounds.zmin&&this.mergeDependencies(this.bounds.zmin),this.bounds.zmax&&this.mergeDependencies(this.bounds.zmax),this._exports=[Tx]}},lm=class extends bx{},xx=class extends bx{};function gw(e){let t=[];for(let n of e.assignmentMaps.assignments.keys())n.symbol.startsWith(\"idref_\")||t.push(n);return{allDefinedQualifiedNames:t,multiplyDefined:[...e.assignmentMaps.multiplyDefined]}}function Ix({statement:e,moduleID:t}){return e instanceof Do?{type:2}:Zy(e)?{type:1,directlyDependsOnSelf:e._expression.getDependencies().includes(e._symbol),fnName:vn(t,e._symbol)}:{type:0}}function D5(e,t,n){let{statement:r,id:o,moduleID:i}=t;if(r instanceof cm){let s=n==null?void 0:n.get(o);if(s)return{type:\"simple\",meta:Ix(t),exports:s,dependencies:[]}}if(r instanceof tu){if(r.tableFrameID===void 0)throw new Error(\"Programming Error: TableColumn missing tableFrameID.\");let s=r.header instanceof $e?vn(r.tableFrameID,r.header._symbol):void 0,a=DM(r.tableFrameID,r.headerDependencies),u=DM(r.tableFrameID,r.cellDependencies);return{type:\"table-column\",meta:Ix(t),exports:{moduleID:i,moduleExports:Dp(i,r.getLegalExports(e)),tableExports:Dp(r.tableFrameID,r.getExports(e))},dependencies:{headerIdent:s,headerDependencies:a,cellDependencies:u}}}return r instanceof nm?{type:\"simple\",meta:Ix(t),exports:[vn(i,r._symbol)],dependencies:[r.importFrom]}:{type:\"simple\",isViewport:r instanceof lm,meta:Ix(t),exports:Dp(i,r.getLegalExports(e)),dependencies:N5(t)}}function N5({statement:e,moduleID:t}){if(e instanceof Wu){let r=[];for(let o of e.getColumnStatementIds())r.push(vn(e.tableFrameID,`idref_${o}`));for(let o of e.getDependencies())r.push(vn(e.tableFrameID,o));return r}let n=Bi(e)&&e.tableRegressionData?e.tableRegressionData.tableId:t;return Dp(n,e.getDependencies())}function Xy(e,t,n,r){let o=O5(e,t,r),i=e.parentFrameMap,s=A5(o,i);return w5(e,o,s,n)}function O5(e,t,n){let r={};for(let o of t.values()){let i=D5(e.getPolicyContext(o.moduleID).policy,o,n);r[o.id]=i}return r}function XM(e,t,n){var o,i;let r=e.assignments.getOrInsert(t,[]);r.push(n),r.length>1&&e.multiplyDefined.add(t),(i=(o=e.resolvedExports)[n])!=null||(o[n]=[]),e.resolvedExports[n].push(t)}function A5(e,t){let n=new Ec,r=new Lr,o={assignments:n,resolvedExports:{},resolvedDependencies:{},parentFrameMap:t,multiplyDefined:r},i=new Lr;for(let s of fe(e)){let a=e[s];if(a.type===\"simple\"){for(let u of a.exports)ct[u.symbol]||(i.add(u),XM(o,u,s));o.resolvedDependencies[s]=a.dependencies}}for(let s of fe(e)){let a=e[s];if(a.type!==\"table-column\")continue;for(let l of a.exports.moduleExports)ct[l.symbol]||i.has(l)||XM(o,l,s);for(let l of a.exports.tableExports){let p=vn(a.exports.moduleID,l.symbol);ct[l.symbol]||i.has(p)||XM(o,l,s)}let u=a.dependencies,c=u.headerIdent&&o.assignments.get(u.headerIdent);o.resolvedDependencies[s]=c?u.cellDependencies:u.headerDependencies}return o}function hw(e,t){let{assignments:n,parentFrameMap:r}=e;for(;;){let o=n.get(t);if(o)return o;let i=r.get(t.frameID);if(!i)return[];t=vn(i,t.symbol)}}function w5(e,t,n,r){let o=[],i=new Set,s={},a=new Lr,u={},c=0,l=[],p=[];for(let y of r)u.hasOwnProperty(y)||d(y);function d(y){u[y]=u[y]||{};let h=u[y],b;h.id=y,h.index=c,h.lowlink=c,l.push(h),h.instack=!0,c++;let T=n.resolvedDependencies[y];for(let I of T){let E=hw(n,I);for(let S of E)u.hasOwnProperty(S)?(b=u[S],b.instack&&(h.lowlink=Math.min(h.lowlink,b.index))):(d(S),b=u[S],h.lowlink=Math.min(h.lowlink,b.lowlink))}if(h.lowlink===h.index)if(b=l.pop(),b.instack=!1,b===h)m(h.id);else{let I=[b.id];for(;b=l.pop(),b.instack=!1,I.push(b.id),b!==h;);f(I)}}function m(y){p.push(y);let h=t[y];if(h.meta.type===1){let b=h.meta.fnName;!e.getPolicyContextForFrame(b.frameID).policy.assignmentForbidden(b.symbol)&&h.meta.directlyDependsOnSelf&&!n.multiplyDefined.has(b)&&(s[y]=[y],a.add(b))}}function f(y){let h=[],b=!0,T=[],I=new Set;for(let E=y.length-1;E>=0;E--){let S=y[E],C=t[S];for(let v of n.resolvedExports[S])h.push(v);I.add(S),p.push(S),C.meta.type===1&&!n.multiplyDefined.has(C.meta.fnName)?T.push(S):b=!1,C.meta.type===2&&i.add(S)}if(b){for(let E of[...I])s[E]=T;for(let E of h)a.add(E)}o.push(h)}let g=new Set;for(let[y,h]of hN(t))if(h.type===\"simple\"&&h.isViewport&&n.resolvedDependencies[y]){let b=L5(n,y);for(let T of b)g.add(T)}return{resolved:p,cycles:o,recursiveFunctionGroups:s,recursiveFunctionSymbols:a,recursiveFunctionBaseCasesWithCycles:i,assignmentMaps:n,viewportTransitiveDependencies:g}}function L5(e,t){let n=new Set,r=[t];for(;r.length>0;){let o=r.pop(),i=e.resolvedDependencies[o];for(let s of i){let a=hw(e,s);for(let u of a)n.has(u)||(n.add(u),r.push(u))}}return n}var pm=class extends X{constructor(){super(...arguments);this.type=\"Add\"}};var Px=class extends $e{constructor(){super(...arguments);this.type=\"Ans\"}};var Bn=class extends pt{constructor(t,n){super(),t instanceof $e?this._symbol=t._symbol:this._symbol=t,this.mergeDependencies(n),this._expression=n,this._exports=this.computeExports()}shouldExportAns(){return!0}computeExports(){let t=this._symbol,n=this.getDependencies();for(let r=0;r<n.length;r++)if(n[r]===t)return[];return[t]}isEquation(t,n){let r=this._symbol,o=r===\"x\"||r===\"y\",i=r===\"r\"||r===\"z\",s=r===\"rho\",a=n.getDependencies(),u=this.graphmodeDependencies(t,n);return s||i||o&&a.includes(\"z\")?u.includes(r):a.includes(r)}asEquation(){let t=new gl(new Mn(this._symbol),this._expression);return t.userData=this.userData,t.metaData=this.metaData,t}shouldPromoteToSlider(t){if(this._expression.type!==\"Constant\")return!1;let n=this._expression.asValue();return typeof n!=\"number\"||!isFinite(n)?!1:t.isValidSlider(this._symbol)}},dm=class extends Bn{constructor(){super(...arguments);this.type=\"Assignment\"}};var Lp=class extends X{constructor(n){super(n);this.type=\"AssignmentExpression\";this._symbol=n[0]._symbol,this._lhs=n[0],this._rhs=n[1]}};var bl=class extends X{constructor(){super(...arguments);this.type=\"BareSeq\"}};var mm=class extends X{constructor(){super(...arguments);this.type=\"BoxPlot\";this._symbol=\"boxplot\"}};var No=class extends X{constructor(){super(...arguments);this.type=\"Piecewise\"}};function F5(e,t){let n=yo[e[0]].direction===-1?new si([t[1],t[0]]):new si([t[0],t[1]]);switch(e.length){case 0:throw new Error(\"Programming Error: ComparatorChain must have at least one comparator\");case 1:return n;default:return new No([new xl(e.slice(1),t.slice(1)),n,new Un(NaN)])}}var xl=class e extends X{constructor(n,r){super(r);this.symbols=n;this.type=\"ComparatorChain\";if(n.length<1)throw\"Programming Error: ComparatorChain must have at least one comparator.\";if(r.length!==n.length+1)throw\"Programming Error: ComparatorChain must have one more arg than symbols\";if(n.includes(\"=\")&&!n.every(o=>o===\"=\"))throw hC()}getRestrictedDifference(){return F5(this.symbols,this.args)}isInequality(){return!this.symbols.includes(\"=\")}withArgsCoerced(){let n=new e(this.symbols,this.args.map(r=>new rr(\"coerceToReal\",[r])));return n.userData=this.userData,n.metaData=this.metaData,n}};var Fp=class extends X{constructor(n){let r=n.map(o=>new Mn(\"\\\\idref_{\"+o+\"}\"));super(r);this.constructedObjectIds=n;this.type=\"Construction\";this._exports.push(\"construction\")}};var fm=class extends X{constructor(){super(...arguments);this.type=\"CrossMultiply\"}};var Vp=class extends X{constructor(n,r){super(r);this.type=\"Derivative\";n instanceof $e?this._symbol=n._symbol:this._symbol=new Mn(n)._symbol,this.addDependency(this._symbol)}};var ym=class extends X{constructor(){super(...arguments);this.type=\"Divide\"}};var ai=class extends X{constructor(){super(...arguments);this.type=\"DotAccess\"}registerDependencies(){if(super.registerDependencies(),this.args[1]instanceof $e){let n=this.args[1]._symbol;ml(n)&&this.addDependency(\"trigAngleMultiplier\")}}};var Tl=class extends X{constructor(){super(...arguments);this.type=\"DotMultiply\"}};var gm=class extends X{constructor(){super(...arguments);this.type=\"DotPlot\";this._symbol=\"dotplot\"}};var Sx=class extends pt{constructor(n){super();this.type=\"DoubleInequality\";let[r,o,i,s,a]=n;this.args=n,this._symbol=i._symbol,this._operators=[o,s],this._expressions=[r,a];let u=yl(yo[o].inclusive&&yo[n[3]].inclusive,yo[n[1]].direction);this._indicator=dx(u,[new rr(\"coerceToReal\",[n[0]]),new rr(\"coerceToReal\",[n[4]])]),this.addDependency(this._symbol),this.mergeDependencies(this._expressions[0],this._expressions[1])}isInequality(){return!0}isShadeBetween(){return!0}},Cx=class extends Sx{},hm=class extends Sx{};var Wy=class extends X{},bm=class extends Wy{constructor(){super(...arguments);this.type=\"Exponent\"}};var Bp=class extends X{constructor(n,r){super(r);this.type=\"ExtendSeed\";this.seed=r[0],this.userSeed=r[1],this.tag=n}asValue(){return this.seed.asValue()+\"::\"+this.tag+this.userSeed.asValue()}};var Il=class extends X{constructor(){super(...arguments);this.type=\"FunctionExponent\"}registerDependencies(){if(super.registerDependencies(),this.args[0].type===\"Identifier\"){let n=this.args[0]._symbol;ml(n)&&this.addDependency(\"trigAngleMultiplier\")}}};var Pl=class extends X{constructor(){super(...arguments);this.type=\"FunctionFactorial\"}registerDependencies(){if(this.addDependency(\"factorial\"),super.registerDependencies(),this.args[0].type===\"Identifier\"){let n=this.args[0]._symbol;ml(n)&&this.addDependency(\"trigAngleMultiplier\")}}};var xm=class extends X{constructor(){super(...arguments);this.type=\"Histogram\";this._symbol=\"histogram\"}};var Ex=class extends pt{constructor(n){super();this.type=\"Image\";this.isImage=!0;this.center=n.center,this.radianAngle=n.radianAngle,this.width=n.width,this.height=n.height,this.opacity=n.opacity,this.mergeDependencies(this.center,this.radianAngle,this.width,this.height,this.opacity)}},vx=class extends Ex{},Tm=class extends Ex{constructor(t){super(t)}};var Im=class extends X{constructor(n){super(n,{skipRegisterDependencies:!0});this.type=\"Integral\";this._differential=n[0],this.registerDependencies()}registerDependencies(){for(let n=1;n<=3;n++)this.mergeDependenciesInScope(\"Integral\",[this._differential._symbol],this.args[n])}};So();function Oo(e,t){return nu(Mx(e,t))}function Mx(e,t){let n=e.getInstruction(t);switch(n.type){case 1:return n.value;default:throw new Error(`Unexpected opcode ${n.type}.`)}}function nu(e){if(Array.isArray(e))return e.map(nu);switch(typeof e){case\"boolean\":case\"number\":case\"string\":return e;case\"object\":if(Sc(e)){let t={};for(let[n,r]of ms(e.updateRules))ox(t,n,{value:nu(r.value),valueType:r.valueType});return{type:\"Action\",updateRules:t}}else return F(e);default:throw new Error(`Unexpected value: ${e}`)}}function Wo(e,t){var o;let n=[],r=[];for(let i=0;i<t;i++)r.push(!1);r.push(!0);for(let i=t;i>=0;i--){if(!r[i])continue;let s=e.getInstruction(i);if(s.type===2)n.push({symbol:e.argNames[i],scope:\"free\"});else if(Zr(s))switch(s.type){case 21:n.push({symbol:s.callData.indexSymbol,scope:\"integral\"});break;case 19:n.push({symbol:s.callData.indexSymbol,scope:s.callData.type});break;case 23:if(((o=s.context)==null?void 0:o.type)===\"list-comprehension\")for(let u of s.context.callData.inputListSymbols)n.push({symbol:u,scope:\"comprehension\"});break;case 50:for(let u of s.callData.parameterSymbols)n.push({symbol:u,scope:\"map\"});break;case 53:{let u=e.getInstruction(s.args[0]);for(let c of u.parameterSymbols)n.push({symbol:c,scope:\"recursive-function\"});break}default:let a=s;throw new Error(`Programming Error: unexpected loop instruction ${a.type}`)}else s.type===3&&s.symbol&&n.push({symbol:s.symbol,scope:\"symbolic-var\"});if(me(s))for(let a of e.getDirectDependencies(s))r[a]=!0}return n.reverse()}function Sl(e,t){return ju(e,[t],0,e.instructionsLength()-1)}function ju(e,t,n,r){let o=[];for(let s=n;s<=r;s++)o[s]=!1;for(let s of t)o[s]=!0;let i=Math.min(...t);for(let s=0;s<=1;s++){let a=!1;for(let u=i+1;u<e.instructionsLength();u++){let c=e.getInstruction(u);if(!me(c)||o[u])continue;let l=!1;for(let p of e.getDirectDependencies(c))if(o[p]){l=!0;break}if(o[u]=l,l&&c.type===20&&!o[c.args[0]]){let p=c.args[0],d=c.args.length-1;for(let m=0;m<d;m++){let f=c.args[1+m],g=p+1+m;o[f]&&(o[g]=!0,a=!0)}}}if(!a)break}return o}function bw(e){if(e.isConstant())return;let t=[];for(let i=0;i<e.getReturnIndex();i++)e.getInstruction(i).type===44&&t.push(i);if(t.length===0)return;let n=Yr(e,e.getReturnIndex()),r=[];for(let i=0;i<e.argNames.length;i++)n[i]&&r.push(i);let o=ju(e,r,0,e.getReturnIndex());for(let i of t)if(n[i]&&o[i])throw Qv(Wo(e,i))}function Xr(e){if(!_c(e))throw new Error(\"Programming error: expected an array but found \"+typeof e)}function _c(e){return Array.isArray(e)}function xw(e){if(_c(e))for(let{compiled:t}of e)t&&WM(t)}function Cre(e){if(_c(e))for(let{compiled:t}of e)t&&V5(t)}function WM(e){delete e.fn}function V5(e){e.fn=jy(e.args,e.source,e.constants,e.executionMetadata)}function jy(e,t,n,r){let i=`var fn = (function(${e.join(\",\")}){\"use strict\"; ${t}});\nfn.__meta = __meta;\nreturn fn;\n`;return new Function(\"BuiltIn\",\"ErrorMsg\",\"_C\",\"__meta\",i)($o,Ct,n,r)}function Fn(e){return`_${e}`}function Pm(e){return`_${e}_thunk_computed`}function Sm(e){return`_${e}_thunk_function`}function _x(e){return`_${e}_next`}function Tw(e){return`_${e}_next1`}function JM(e,t){return`_${e}_${t}`}function QM(e){return`_${e}_inner`}function Iw(e){return`_${e}_cache`}function Pw(e){return`_${e}_key`}function Rx(e){return`_${e}_computationMetrics`}function Sw(e){return`_${e}_out`}function Cw(e){return`_${e}_computationMetrics`}function Ew(e){return`_${e}_cacheEntry`}function vw(e){return`_${e}_args`}function Jy(e,t){return`_${e}_prev_${t}`}function Mw(e){return`_${e}_computationDepth`}function _w(e){return`_${e}_computationCount`}var e0=class{constructor(t,n){this.chunk=t;this.recursiveFunctionGroup=n;this.referencesFrom={};this.referencesTo={};this.baseCases={};for(let c of Object.values(n))this.referencesFrom[c]=[],this.referencesTo[c]=[],this.baseCases[c]=[];let{dependsOnRecursiveCall:r,iterationParameterIndex:o,recursiveReferences:i}=U5(this.chunk,this.recursiveFunctionGroup);for(let c of i)this.referencesFrom[c.from].push(c),this.referencesTo[c.to].push(c);this.iterationParameterIndex=o;let{baseCases:s,isEveryBranchRecursiveOrBaseCase:a,isUnconditionallyRecursive:u}=q5(t,n,r,o);this.isEveryBranchRecursiveOrBaseCase=a,this.isUnconditionallyRecursive=u;for(let c of s)this.baseCases[c.fn].push(c)}hasRecursiveReferences(){for(let t of Object.values(this.referencesFrom))if(t.length>0)return!0;return!1}getBaseCasesForFunction(t){return this.baseCases[t]}getReferencesFrom(t){return this.referencesFrom[t]}getReferencesTo(t){return this.referencesTo[t]}getAllReferences(){let t=[];for(let n of Object.values(this.referencesFrom))t.push(...n);return t}};function G5(e,t,n){if(t===void 0)return;let r=e.getInstruction(n),o=e.getInstruction(r.args[0]);if(o.type!==25)return;let[i,s]=o.args,a;if(i===t)a=s;else if(s===t)a=i;else return;let u=e.getInstruction(a);if(De(u)&&u.valueType===x)return u.value}function q5(e,t,n,r){let o=[],i=!0,s=!0;for(let a in t){let u=t[a],l=e.getInstruction(u).endIndex,d=e.getInstruction(l).args[0],m=r!==void 0?d+r+1:void 0,f={[l]:!0};for(let g=l;g>d;g--){if(!f[g])continue;let y=e.getInstruction(g);if(me(y)){if(y.type===33){let h=y.args[1],b=y.args[2];if(!n[h]||!n[b]){i=!1;let I=G5(e,m,g);I!==void 0&&!n[h]?o.push({fn:u,argValue:I}):s=!1}}for(let h of y.args)f[h]=!0}}}return o.sort((a,u)=>F(a.argValue)-F(u.argValue)),{baseCases:o,isUnconditionallyRecursive:i,isEveryBranchRecursiveOrBaseCase:s}}var KM=Symbol(\"NON_ITERATIVE\");function U5(e,t){let n=new Set(Object.values(t)),r={},o=[],i;for(let s in t){let a=t[s],c=e.getInstruction(a).endIndex,p=e.getInstruction(c).args[0],d=Yr(e,c);for(let m=p;m<c;m++){let f=e.getInstruction(m);if(me(f)&&d[m]){if(f.type===55&&n.has(f.args[0])){r[m]=!0;let g=t0(e,p,f);g?(g.iterationParameterIndex!==void 0&&(i!==void 0&&i!==g.iterationParameterIndex?i=KM:i=g.iterationParameterIndex),o.push(g.ref)):i=KM}for(let g of e.getDirectDependencies(f))if(r[g]){r[m]=!0;break}}}}return i===void 0&&Object.values(t).every(s=>e.getInstruction(s).signature.argTypes.length===1)&&(i=0),{dependsOnRecursiveCall:r,iterationParameterIndex:i===KM?void 0:i,recursiveReferences:o}}function t0(e,t,n){let r=e.getInstruction(t),o,i;for(let s=1;s<n.args.length;s++){let a=n.args[s],u=e.getInstruction(a),c,l;if(u.type===9&&o===void 0){let m=e.getInstruction(u.args[1]);if(!(m.type===1&&m.valueType===x))return;l=F(m.value),c=u.args[0]}else l=0,c=a;let p=e.getInstruction(c);if(!(p.type===47&&p.args[0]===t&&s===c-t)||l!==Math.floor(l)||l<0)return;if(o===void 0)i=l,l!==0&&(o=s-1);else if(l!==0)return}if(i!==void 0)return{ref:{from:r.args[0],to:n.args[0],iterationParameterOffset:i},iterationParameterIndex:o}}function Rw(e,t){var c,l;let n=new e0(e,t),r={};for(let p in n.recursiveFunctionGroup){let d=n.recursiveFunctionGroup[p],m=n.getBaseCasesForFunction(d);if(m.length===0)continue;let f=F(m[0].argValue),g=1;for(;g<m.length&&F(m[g].argValue)===F(m[g-1].argValue)+1;)g++;let y=m.slice(g).map(h=>F(h.argValue));r[p]={min:f,consecutiveCount:g,additional:y}}let o={},i=-1/0,s=1/0;if(n.iterationParameterIndex!==void 0&&n.isEveryBranchRecursiveOrBaseCase){let p=new Map;for(let d of Object.values(n.recursiveFunctionGroup)){let m=e.getInstruction(d).symbol,f=-1/0;for(let g of n.getReferencesTo(d))f=Math.max(f,g.iterationParameterOffset);if(isFinite(f)&&(o[m]=f),f>0){let g=r[e.getInstruction(d).symbol],y=(c=g==null?void 0:g.min)!=null?c:-1/0;p.set(d,{min:y+f,max:y+((l=g==null?void 0:g.consecutiveCount)!=null?l:0)})}}for(let{min:d,max:m}of p.values())i=Math.max(i,d),s=Math.min(s,m)}let a={};for(let p in n.recursiveFunctionGroup){let d=n.recursiveFunctionGroup[p],m=e.getInstruction(d);a[p]=m.parameterSymbols}let u={};for(let p in n.recursiveFunctionGroup){let d=n.recursiveFunctionGroup[p],m=e.getInstruction(d);u[p]=m.signature.argTypes.map((f,g)=>g===n.iterationParameterIndex&&n.isEveryBranchRecursiveOrBaseCase&&!n.isUnconditionallyRecursive?1:0)}if(n.iterationParameterIndex!==void 0&&isFinite(i)&&i<=s){let p=z5(n);return{canIterate:!0,parameterSymbols:a,baseCaseInfo:r,maxRecursiveCallOffsets:o,iterationParameterIndex:n.iterationParameterIndex,domainInfo:u,loopStart:i,order:p}}else return{canIterate:!1,parameterSymbols:a,baseCaseInfo:r,maxRecursiveCallOffsets:o,iterationParameterIndex:n.iterationParameterIndex,domainInfo:u}}function z5(e){if(e.iterationParameterIndex===void 0)throw V(\"Programming error: no recursive parameter\");let n=Object.values(e.recursiveFunctionGroup),r=new Map,o=new Map,i=u=>{let c=new Set;for(let l of e.getReferencesTo(u))l.iterationParameterOffset===0&&c.add(l.from);return[...c]};n.forEach(u=>{let c=i(u);r.set(u,c);for(let l of c)o.set(l,(o.get(l)||0)+1);o.has(u)||o.set(u,0)});let s=[];o.forEach((u,c)=>{u===0&&s.push(c)});let a=[];for(;s.length>0;){let u=s.shift();a.push(u),(r.get(u)||[]).forEach(l=>{let p=l,d=o.get(p)-1;o.set(p,d),d===0&&s.push(p)})}if(a.length!==n.length)throw iC();return a}function Dx(e,t){let n;for(let s=t,a=0;s>0;s--){let u=e.getInstruction(s);if(u.type===53&&a===0){n=s;break}u.type===54&&a++,u.type===53&&a--}if(n===void 0)return!1;let r=e.getInstruction(t),o=e.getInstruction(r.args[0]),i=e.getInstruction(n).args[0];return o.recursionGroup.includes(i)}function Nx(e){for(let t=0;t<e.argCoeffs.length;t++)if(F(e.argCoeffs[t])!==0)return!1;return!0}var Ox=Ie(0,1),Dw=Ie(1,1);function Ax(e){if(e.op===\"&&\")return{op:\"||\",values:e.values.map(Ax)};if(e.op===\"||\")return{op:\"&&\",values:e.values.map(Ax)};switch(e.condition){case\">0\":return{op:\"comparator\",value:ui._neg(e.value),condition:\">=0\"};case\">=0\":return{op:\"comparator\",value:ui._neg(e.value),condition:\">0\"};case\"=0\":return{op:\"comparator\",value:e.value,condition:\"!=0\"};case\"!=0\":return{op:\"comparator\",value:e.value,condition:\"=0\"}}}function n0(e,t){let n=[];return e.op===\"&&\"?n.push(...e.values):n.push(e),t.op===\"&&\"?n.push(...t.values):n.push(t),{op:\"&&\",values:n}}var ui;(c=>{function e(l,p){if(!(l===void 0||p===void 0))return t(l,p)}c.add=e;function t(l,p){let d=[];for(let m=0;m<l.argCoeffs.length;m++)d.push(Ai(l.argCoeffs[m],p.argCoeffs[m]));return{argCoeffs:d,constantCoeff:Ai(l.constantCoeff,p.constantCoeff)}}c._add=t;function n(l,p){if(!(l===void 0||p===void 0))return r(l,p)}c.sub=n;function r(l,p){let d=[];for(let m=0;m<l.argCoeffs.length;m++)d.push(es(l.argCoeffs[m],p.argCoeffs[m]));return{argCoeffs:d,constantCoeff:es(l.constantCoeff,p.constantCoeff)}}c._sub=r;function o(l){if(l!==void 0)return i(l)}c.neg=o;function i(l){let p=[];for(let d=0;d<l.argCoeffs.length;d++)p.push(Oi(l.argCoeffs[d]));return{argCoeffs:p,constantCoeff:Oi(l.constantCoeff)}}c._neg=i;function s(l,p){if(l===void 0||p===void 0)return;let d=Nx(l),m=Nx(p);if(!d&&!m)return;m||([l,p]=[p,l]);let f=[];for(let g=0;g<l.argCoeffs.length;g++)f.push(oo(l.argCoeffs[g],p.constantCoeff));return{argCoeffs:f,constantCoeff:oo(l.constantCoeff,p.constantCoeff)}}c.mul=s;function a(l,p){if(l===void 0||p===void 0||!Nx(p))return;let m=[];for(let f=0;f<l.argCoeffs.length;f++)m.push(Yo(l.argCoeffs[f],p.constantCoeff));return{argCoeffs:m,constantCoeff:Yo(l.constantCoeff,p.constantCoeff)}}c.div=a;function u(l,p){if(!(l===void 0||p===void 0||!Nx(p)))return F(p.constantCoeff)===0?{argCoeffs:new Array(l.argCoeffs.length).fill(Ox),constantCoeff:Dw}:F(p.constantCoeff)===1?l:void 0}c.pow=u})(ui||(ui={}));var wx=class{constructor(t,n,r,o){this.chunk=t;this.coefficientTable=[];this.conditionTable=[];this.ZERO_COEFFS=new Array(n.length).fill(Ox),this.mask=ju(t,n,r,o);for(let i=0;i<n.length;i++){let s=[];for(let a=0;a<n.length;a++)s.push(i===a?Dw:Ox);this.coefficientTable[n[i]]={argCoeffs:s,constantCoeff:Ox}}}coeffs(t){let n=this.coefficientTable[t];if(n!==void 0)return n;let r,o=this.chunk.getInstruction(t);return o.type===1&&o.valueType===x?r={argCoeffs:this.ZERO_COEFFS,constantCoeff:o.value}:this.mask[t]?r=this._coeffs(t):r=void 0,this.coefficientTable[t]=r,r}_coeffs(t){let n=this.chunk.getInstruction(t);switch(n.type){case 8:{let[o,i]=n.args;return ui.add(this.coeffs(o),this.coeffs(i))}case 9:{let[o,i]=n.args;return ui.sub(this.coeffs(o),this.coeffs(i))}case 14:{let o=n.args[0];return ui.neg(this.coeffs(o))}case 10:{let[o,i]=n.args;return ui.mul(this.coeffs(o),this.coeffs(i))}case 11:{let[o,i]=n.args;return ui.div(this.coeffs(o),this.coeffs(i))}case 12:case 13:{let[o,i]=n.args;return ui.pow(this.coeffs(o),this.coeffs(i))}case 26:case 28:case 27:case 29:case 33:case 0:case 23:case 2:case 1:case 25:case 32:case 31:case 15:case 16:case 38:case 39:case 40:case 41:case 37:case 42:case 21:case 22:case 19:case 20:case 24:case 48:case 47:case 3:case 44:case 49:case 50:case 51:case 4:case 53:case 54:case 55:case 56:return;default:let r=n;throw new Error(`Unexpected opcode ${r.type}`)}}condition(t){let n=this.conditionTable[t];if(n!==void 0)return n;let r;return this.mask[t]?r=this._condition(t):r=void 0,this.conditionTable[t]=r,r}_condition(t){let n=this.chunk.getInstruction(t);switch(n.type){case 26:{let[o,i]=n.args,s=ui.sub(this.coeffs(i),this.coeffs(o));return s===void 0?void 0:{op:\"comparator\",value:s,condition:\">0\"}}case 28:{let[o,i]=n.args,s=ui.sub(this.coeffs(i),this.coeffs(o));return s===void 0?void 0:{op:\"comparator\",value:s,condition:\">=0\"}}case 27:{let[o,i]=n.args,s=ui.sub(this.coeffs(o),this.coeffs(i));return s===void 0?void 0:{op:\"comparator\",value:s,condition:\">0\"}}case 29:{let[o,i]=n.args,s=ui.sub(this.coeffs(o),this.coeffs(i));return s===void 0?void 0:{op:\"comparator\",value:s,condition:\">=0\"}}case 25:{let[o,i]=n.args,s=ui.sub(this.coeffs(o),this.coeffs(i));return s===void 0?void 0:{op:\"comparator\",value:s,condition:\"=0\"}}case 32:{let o=n.args.map(i=>this.condition(i));return o.some(i=>i===void 0)?void 0:{op:\"&&\",values:o}}case 31:{let o=n.args.map(i=>this.condition(i));return o.some(i=>i===void 0)?void 0:{op:\"||\",values:o}}case 8:case 9:case 14:case 56:case 10:case 11:case 12:case 13:case 33:case 0:case 23:case 2:case 1:case 15:case 16:case 38:case 39:case 40:case 41:case 37:case 42:case 21:case 22:case 19:case 20:case 24:case 48:case 47:case 3:case 44:case 49:case 50:case 51:case 4:case 53:case 54:case 55:return;default:let r=n;throw new Error(`Unexpected opcode ${r.type}`)}}};function Ow(e,t,n,r){let o=t.reachConditions[n];if(o!==void 0)return Aw(e,t,r,o)}function Aw(e,t,n,r){let o=t.argBlockvars;if(r.op===\"||\"||r.op===\"&&\"){let i=[];for(let s of r.values){let a=Aw(e,t,n,s);if(a===void 0)return;i.push(a)}return i.length===0?r.op===\"&&\"?\"true\":\"false\":`(${i.join(r.op)})`}switch(r.condition){case\">0\":case\">=0\":{let s=`(${Nw(e,r.value,o)}${r.condition})`,a=r0(e,r.value,o,n);return`(${s}&&${a})`}case\"!=0\":{let i=Nw(e,r.value,o),s=`(${i}>0)`,a=r0(e,r.value,o,n),u=`(${i}<0)`,c=r0(e,ui._neg(r.value),o,n);return`((${s}&&${a})||(${u}&&${c}))`}case\"=0\":return}}function r0(e,t,n,r){let o=[];for(let i=0;i<n.length;i++){let s=F(t.argCoeffs[i]),a=e.referenceArg(n[i]),u=e.referenceArg(r[i]);s>0?o.push(`${u}>=${a}`):s<0&&o.push(`${u}<=${a}`)}return o.length===0?!0:`(${o.join(\"&&\")})`}function Nw(e,t,n){let r=\"\";for(let o=0;o<n.length;o++){let i=e.printValue({value:t.argCoeffs[o],valueType:x},1),s=e.referenceArg(n[o]);r+=`${i}*${s}+`}return r+=e.printValue({value:t.constantCoeff,valueType:x},1),`(${r})`}var mn;(r=>(r.Noop=0,r.Inline=1,r.Block=2))(mn||(mn={}));function o0(e){switch(e.type){case mn.Noop:return\"\";case mn.Inline:return e.source+`;\n`;case mn.Block:return e.source}}function ww(e,t,n){if(e.glsl)throw V(\"GLSL function not implemented\");let{chunk:r,referenced:o}=e,i=t.args[0],s=r.getInstruction(i),a=s.signature.argTypes;if(e.isTailFunction[i])return{type:mn.Noop,nextIdx:s.endIndex+1};e.enterFunction(t,n,0);let u=\"\";for(let c=0;c<a.length;c++){let l=n+c+1;o[l]&&(u+=`${Fn(l)}=${JM(i,c)};\n`)}return{type:mn.Block,source:k5(e,t,n,u),nextIdx:n+1}}function k5(e,t,n,r){let{chunk:o}=e,i=t.args[0],s=o.getInstruction(i),a=s.signature.argTypes,u=\"\";for(let m=0;m<a.length;m++)m>0&&(u+=\",\"),u+=JM(i,m);let c=QM(i),l=Iw(i),p=Pw(i),d=Rx(i);return`\n    const ${p}=${a.length===1&&s.signature.argTypes[0]===x?\"({fn, args}) => `${fn}:${args[0]}`\":\"({fn, args}) => `${fn}:${JSON.stringify(args)}`\"};\n\n    const ${c}=((${l}, ${u}) => {\n      ${Cm(e,n+1,s.endIndex-1)}\n      const ${d} = {depth: 0, count: 0};\n      const cache = ${l};\n      ${r}\n    `}function Lw(e,t,n){let r=n+1,o=t.args[0],s=e.chunk.getInstruction(o).args[0];if(e.isTailFunction[s])throw V(\"Unexpected tail recursive function\");let a=H5(e,t),{referenced:u}=e;return u[n]&&(a+=`${Fn(n)}=${e.referenceArg(t.args[0])};\n`),e.exitFunction(),{type:mn.Block,source:a,nextIdx:r}}function H5(e,t){let n=t.args[0],r=e.chunk.getInstruction(n),o=r.args[0],i=Sw(o),s=Rx(o),a=r.valueType;return`\n${s}.count++;\n${s}.depth++;\nlet ${i};\nif ((${s}.depth > BuiltIn.RECURSIVE_DEPTH_LIMIT) || (${s}.count > BuiltIn.RECURSIVE_COMPUTATION_LIMIT)) {\n  ${i}=BuiltIn.handleRecursionLimitExceeded(__meta, ${a});\n} else {\n  ${i}=${e.referenceArg(t.args[1])};\n}\nreturn BuiltIn.recursionSuccess(${i},${s});\n});\n`}function Qy(e,t){return`{ fn: ${e}, args: ${t} }`}function Fw(e,t,n){let r=n+1,{chunk:o}=e,i=t.args[0],s=o.getInstruction(i),u=o.getInstruction(s.endIndex).args[0],c=t.args.slice(1).map(y=>e.referenceArg(y)),l=Fn(n),p=vw(n),d=Cw(n),m=Ew(n),f=o.getInstruction(u),g=o.getInstruction(f.args[0]);if(Dx(o,n)){if(e.recursiveFunctionInfo.length<1)throw V(\"Expected recursive function info\");let y=e.recursiveFunctionInfo[e.recursiveFunctionInfo.length-1],h=\"\",b=Ow(e,y,n,t.args.slice(1));if(e.isTailFunction[i]){let S=f.valueType;b&&(h=`\nif (${b}) {\n            return BuiltIn.recursionDiverges(__meta, ${S});\n          }`);let C=g.signature.argTypes,v=h+`\n`;v+=\"looping=true\";for(let _=0;_<C.length;_++){let L=_x(u+_+1);v+=`,\n${L}=${c[_]}`}return h?{type:mn.Block,source:v+`;\n`,nextIdx:r}:{type:mn.Inline,source:v,nextIdx:r}}else if(y.executionMode===1){let S=o.getInstruction(o.getInstruction(y.fn).endIndex),C=t0(o,S.args[0],t);if(!C)throw V(\"Expected valid iteration reference\");let v=Jy(C.ref.to,C.ref.iterationParameterOffset);return{type:mn.Inline,source:`${l}=${v}`,nextIdx:r}}b&&(h=`\nif (${b}) {\n          return BuiltIn.SYMBOL_DIVERGES;\n        }`);let T=Rx(y.fn),I=Qy(i,p),E=`\n      const ${p} = ([${c.join(\",\")}]);\n      ${h}\n      const ${m} = cache.get(BuiltIn.recursionCacheKey(${I}));\n      if (${m} === undefined) {\n        return BuiltIn.recursionMissingCacheEntry(${I});\n      }\n      ${l} = ${m}[0];\n      const ${d} = ${m}[1];\n      if (${d}.count > ${T}.count) {\n        ${T}.count = ${d}.count;\n      }\n      if (${d}.depth > ${T}.depth) {\n        ${T}.depth = ${d}.depth;\n      }\n    `;return{type:mn.Block,source:E,nextIdx:r}}else{let y=`{${g.recursionGroup.map(I=>`${I}: ${QM(I)}`).join(\",\")}}`,h=e.chunk.getRecursionStructure(f.args[0]);if(e.isTailFunction[i])return $5(e,t,n);if(h.canIterate)return Y5(e,t,n,h,{innerFunctionsMap:y});let b=Qy(i,`[${c.join(\",\")}]`),T=`${l}=BuiltIn.executeRecursiveFunction(\n      __meta,\n      ${y},\n      ${f.valueType},\n      ${b}\n    )`;return{type:mn.Inline,source:T,nextIdx:r}}}var Vw=Symbol(\"UPDATED_IN_BODY\");function Bw(e){let t=\"\";for(let n of e){let r=\"declare\"in n?`let ${n.declare}`:Fn(n.reference),o=n.initializeRHS;t+=`${r}=${o};\n`}return t}function Gw(e){let t=\"\",n=\"\";for(let r of e){let o=\"declare\"in r?r.declare:Fn(r.reference);r.updateRHS!==Vw&&(t&&(t+=\",\",n+=\",\"),t+=`${o}`,n+=`${r.updateRHS}`)}return`[${t}]=[${n}]`}function $5(e,t,n){let r=t.args[0],o=e.chunk.getInstruction(r),i=e.chunk.getInstruction(o.endIndex),s=i.args[0],a=e.chunk.getInstruction(s),u=a.valueType,c=Fn(n),l=[];e.enterFunction(a,s,2);let p=Lx(e,s,o.endIndex).source;e.exitFunction();let d=Mw(n),m=_w(n);l.push({declare:d,initializeRHS:\"0\",updateRHS:`${d}+1`},{declare:m,initializeRHS:\"0\",updateRHS:`${m}+1`});for(let g=1;g<t.args.length;g++){let y=s+g;if(!e.referenced[y])continue;let h=_x(y);l.push({reference:y,initializeRHS:e.referenceArg(t.args[g]),updateRHS:h},{declare:h,initializeRHS:void 0,updateRHS:Vw})}let f=`${c}=(() => {\n    ${Cm(e,s+1,o.endIndex-1)}\n\n    let looping = true;\n    ${Bw(l)}\n    while (looping) {\n      looping = false;\n\n      ${p}\n\n      if (looping) {\n        ${Gw(l)}\n      }\n\n      if ((${d} > BuiltIn.RECURSIVE_DEPTH_LIMIT) || (${m} > BuiltIn.RECURSIVE_COMPUTATION_LIMIT)) {\n        return BuiltIn.handleRecursionLimitExceeded(__meta, ${u});\n      };\n    }\n\n    return ${e.referenceArg(i.args[1])}\n  })()`;return{type:mn.Inline,source:f,nextIdx:n+1}}function Y5(e,t,n,r,o){let i=t.args[0],s=e.chunk.getInstruction(i),a=e.chunk.getInstruction(s.endIndex),u=a.args[0],c=Fn(n),l=[],p=\"\",d,{iterationParameterIndex:m,loopStart:f,order:g}=r,y=r.maxRecursiveCallOffsets,h=u+m+1,b=Fn(h),T=t.args[m+1],I=`(${f})`,E=e.chunk.getInstruction(T),S=(E.type===39||E.type===41)&&e.chunk.getInstruction(E.args[1]).type===23?E.args[0]:void 0,C=`(${e.referenceArg(T)})-${I}`,v,_;if(S!==void 0){let w=e.referenceArg(S);v=`BuiltIn.listMax(\n      (${w}).filter(\n        x => isFinite(x) &&\n        Math.floor(x - ${I}) === (x - ${I})\n      )\n    )`,_=`BuiltIn.getBroadcastTargetElements(${w}).has(${b})`}else v=`(${e.referenceArg(T)})`,_=\"false\";l.push({reference:h,initializeRHS:`(${I})`,updateRHS:`${b}+1`}),d=\"\";for(let w of g){let q=e.chunk.getInstruction(w),K=q.endIndex,le=e.chunk.getInstruction(K),te=le.args[0],Be=e.chunk.getInstruction(te);for(let oe=1;oe<t.args.length;oe++){let ee=te+oe;if(!e.referenced[ee])continue;let $=Fn(ee);oe===m+1?d+=`${$}=${e.referenceArg(h)};\n`:p+=`${$}=${e.referenceArg(t.args[oe])};\n`}p+=Cm(e,te+1,q.endIndex-1);let Ze=y[q.symbol];if(Ze!==void 0)for(let oe=1;oe<=Ze;oe++){let ee=Jy(w,oe),$=oe===1?e.referenceArg(le.args[1]):Jy(w,oe-1),ne=t.args.slice(1).map((Rt,Ko)=>Ko===m?f-oe:e.referenceArg(Rt)),Ve=Qy(w,`[${ne.join(\",\")}]`),_t=`BuiltIn.executeRecursiveFunction(\n            __meta,\n            ${o.innerFunctionsMap},\n            ${Be.valueType},\n            ${Ve}\n          )`,ht=`(\n          broadcastOutputMap\n            ? (broadcastOutputMap[BuiltIn.recursionCacheKey(${Ve})] = ${_t})\n            : ${_t}\n        )`;l.push({declare:ee,initializeRHS:ht,updateRHS:$})}e.enterFunction(Be,te,1),d+=Lx(e,te,q.endIndex).source,e.exitFunction(),d+=`const ${Jy(w,0)}=${e.referenceArg(le.args[1])};\n`}let L=t.args.slice(1).map(w=>e.referenceArg(w)),k=t.args.slice(1).map((w,q)=>q===m?b:e.referenceArg(w)),Q=`${c}=(() => {\n    ${p}\n    const broadcastOutputMap = ${S!==void 0?\"__meta.iterativeRecursionOutputs\":\"undefined\"};\n\n    ${Bw(l)}\n\n    const outerStackFrame = ${Qy(i,`[${L.join(\",\")}]`)};\n\n    if (broadcastOutputMap) {\n        const cacheEntry = broadcastOutputMap[BuiltIn.recursionCacheKey(outerStackFrame)];\n        if (cacheEntry !== undefined) {\n          return cacheEntry;\n        }\n      }\n\n\n    const targetLoopSteps = ${C}\n    if (targetLoopSteps < 0 || Math.floor(targetLoopSteps) !== targetLoopSteps) {\n      return BuiltIn.executeRecursiveFunction(\n        __meta,\n        ${o.innerFunctionsMap},\n        ${s.valueType},\n        outerStackFrame\n      );\n    }\n\n    const loopEnd = ${v};\n\n    let result;\n    while (true) {\n      ${d}\n\n      result = ${e.referenceArg(a.args[1])};\n\n      if (broadcastOutputMap && ${_}) {\n        const key = BuiltIn.recursionCacheKey(${Qy(i,`[${k.join(\",\")}]`)});\n        broadcastOutputMap[key] = result;\n      }\n\n      if (${b} < loopEnd) {\n        ${Gw(l)}\n      } else {\n        break;\n      }\n    }\n\n    ${S===void 0?\"return result;\":`const cached = broadcastOutputMap[BuiltIn.recursionCacheKey(outerStackFrame)];\n          if (cached === undefined) {\n            return BuiltIn.recursionDiverges(__meta, ${s.valueType});\n          }\n          return cached;\n          `}\n  })()`;return{type:mn.Inline,source:Q,nextIdx:n+1}}function Ky(e){let{chunk:t}=e,n=Cm(e,t.argNames.length,t.instructionsLength()-1),r=0;for(;r<t.instructionsLength();){let o=t.getInstruction(r),i=i0(e,o,r);n+=o0(i),r=i.nextIdx}return n+=`return ${e.referenceArg(t.getReturnIndex())};`,n}function Z5(e,t){let{chunk:n}=e,r=[],o=e.thunkName(t),i=e.thunkEnd(o),s=Pm(o),a=Sm(o),u=\"\",c=!1,l=!1;e.wantToInlineThunk(o)||(l=!0);let p=t;for(;p<=i;){let d=n.getInstruction(p),m=p===t?qw(e,d,p):i0(e,d,p);switch(m.type){case mn.Noop:break;case mn.Inline:c&&(u+=`,\n`),u+=m.source,c=!0;break;case mn.Block:c&&(u+=`;\n`),c=!1,u+=m.source,l=!0;break}r.push(u),p=m.nextIdx}if(u===\"\"&&(u=\"0\",l=!1),l){let d=`${s}=false;${a}=()=>{\n${s}=true;\n\n      ${u}${c?\";\":\"\"}\n    };\n`;return{type:mn.Block,source:d,nextIdx:p}}else return e.inlineThunk(o,u),{type:mn.Noop,nextIdx:p}}function i0(e,t,n){return e.isThunkBegin(n)?Z5(e,n):qw(e,t,n)}function qw(e,t,n){let r=n+1;if(!e.referenced[n])return{type:mn.Noop,nextIdx:r};switch(t.type){case 0:case 47:case 48:case 22:case 49:case 4:return{type:mn.Noop,nextIdx:r};case 21:if(e.glsl)throw lE();return W5(e,t,n);case 2:return e.inlineSource(n,e.chunk.argNames[n]),{type:mn.Noop,nextIdx:r};case 23:return{type:mn.Block,source:j5(e,t,n),nextIdx:r};case 24:return{type:mn.Block,source:J5(e,t,n),nextIdx:r};case 19:return{type:mn.Block,source:Q5(e,t,n),nextIdx:r};case 20:return{type:mn.Block,source:K5(e,t,n),nextIdx:r};case 50:return{type:mn.Block,source:eY(e,t,n),nextIdx:r};case 51:return{type:mn.Block,source:tY(e,t,n),nextIdx:r};case 53:return ww(e,t,n);case 54:return Lw(e,t,n);case 33:{let o=e.referenceArg(t.args[0]),i=e.referencePiecewiseBranch(t.args[1]),s=e.referencePiecewiseBranch(t.args[2]);if(!(i.thunkDependencies.some(p=>e.isEarlyReturningThunk(p))||s.thunkDependencies.some(p=>e.isEarlyReturningThunk(p)))){let p=e.emitTernary(o,i.expression,s.expression,t);return e.shouldInline(n)?(e.inlineSource(n,`(${p})`),{type:mn.Noop,nextIdx:r}):{type:mn.Inline,source:`${Fn(n)}=${p}`,nextIdx:r}}let u=Fn(n),c=p=>{if(p.length===0)return\"\";let d=\"\";for(let m of p){let f=e.inlinedThunks[m];if(f!==void 0){let g=`(${f},void 0)`;d!==\"\"?d=`(${d}||${g})`:d=g}else{let g=Pm(m),y=Sm(m);d!==\"\"&&(d+=\"||\"),d+=`(${g} ? undefined : ${y}())`}}return d=\"const earlyReturn =\"+d,d+=`;\nif (earlyReturn !== undefined) return earlyReturn;\n`,d},l=`if (${o}) {\n          ${c(i.thunkDependencies)}${u} = ${i.rawExpression};\n        } else {\n          ${c(s.thunkDependencies)}${u} = ${s.rawExpression};\n        }`;return{type:mn.Block,source:l,nextIdx:r}}case 55:return Fw(e,t,n);default:{let o=nY(e,t,n);return e.shouldInline(n)?(e.inlineSource(n,`(${o})`),{type:mn.Noop,nextIdx:r}):{type:mn.Inline,source:`${Fn(n)}=${o}`,nextIdx:r}}}}function Lx(e,t,n){let{chunk:r,referenced:o}=e,i=\"\",s=t+1;for(;s<n;){if(!o[s]){s=s+1;continue}let a=r.getInstruction(s),u=i0(e,a,s);i+=o0(u),s=u.nextIdx}return{type:mn.Block,source:i,nextIdx:s}}function X5(e,t,n){let{endIndex:r}=t,{chunk:o}=e,i=`function(${Fn(n)}) {\n`,s=n+1,a=r-1;i+=Cm(e,s,a),i+=Lx(e,n,r).source;let u=o.getInstruction(r);return i+=`return ${e.referenceArg(u.args[1])};\n}`,i}function W5(e,t,n){let r=\"BuiltIn.quad(\";r+=X5(e,t,n),r+=`,${e.referenceArg(t.args[0])},${e.referenceArg(t.args[1])})`;let{endIndex:o}=t,i=o+1;return e.shouldInline(i)?(e.inlineSource(i,r),{type:mn.Noop,nextIdx:t.endIndex}):{type:mn.Inline,source:`${Fn(o+1)}=${r}`,nextIdx:t.endIndex}}function Cm(e,t,n){let{chunk:r,referenced:o}=e,i=\"\",s=!1;for(let a=t;a<=n;a++){if(!e.glsl&&e.isThunkBegin(a)){let c=e.thunkName(a);i+=`${s?\",\":\"var \"}${Pm(c)}`,i+=`,${Sm(c)}`,s=!0}let u=r.getInstruction(a);if(!(u.type===0||u.type===24||u.type===20||!o[a])){if(u.type===21){let{endIndex:c}=u;a=c,e.shouldInline(c+1)&&a++;continue}if(e.glsl&&u.type===4)throw pE();if(!e.shouldInline(a)&&(i+=e.emitVarDeclaration(a,s),s=!0,u.type===53)){let{endIndex:c}=u;a=c-1;continue}}}return s&&(i+=`;\n`),i}function j5(e,t,n){let{glsl:r,chunk:o,referenced:i}=e,s=Fn(n),a=o.getInstruction(t.endIndex),u=e.referenceArg(t.args[0]);if(e.isIntervalEmitContext())throw V(\"Cannot use broadcast in interval\");let c=\"\";for(let p=1;p<a.args.length;p++){let d=t.endIndex+p;if(!i[d]||o.getInstruction(d).type!==48)continue;let f=Fn(d);r||(c+=`${f}=[];\n`)}return r||(c+=`if(${u}>${1e4}) throw ErrorMsg.maxListSize();\n`),c+=`for(${s}=1${r?\".0\":\"\"};${s}<=${u};${s}++){\n`,c}function J5(e,t,n){let{glsl:r,chunk:o,referenced:i}=e,s=\"\";for(let a=1;a<t.args.length;a++){let u=n+a;if(u>=o.instructionsLength()||!i[u]||o.getInstruction(u).type!==48)continue;let c=Fn(n+a),l=e.referenceArg(t.args[a]);if(r){let p=e.referenceArg(t.args[0]);s+=`${c}[int(${p})-1]=${l};\n`}else s+=`${c}.push(${l});\n`}return s+=`}\n`,s}function Q5(e,t,n){if(e.isIntervalEmitContext())throw new Error(\"Cannot emit loop in interval arithmetic.\");let{chunk:r,referenced:o}=e,i=Fn(n);e.beforeBeginLoop(t);let s=`${e.referenceArg(t.args[0])}`,a=`${e.referenceArg(t.args[1])}`,u=`if(${s}>${a}){\n`;for(let c=2;c<t.args.length;c++){let l=t.endIndex+c-1;if(l>=r.instructionsLength()||!o[l]||r.getInstruction(l).type!==47)continue;let p=Fn(l);u+=`${p}=${e.referenceArg(t.args[c])};\n`}u+=e.checkFiniteBounds(t,s,a),u+=`}else{\n`;for(let c=2;c<t.args.length;c++){let l=n+c-1;if(!o[l]||r.getInstruction(l).type!==47)continue;let p=Fn(l);u+=`${p}=${e.referenceArg(t.args[c])};\n`}return u+=`${i}=${s};\n`,u+=\"while (true) {\",u}function K5(e,t,n){let{chunk:r,referenced:o}=e,i=r.getInstruction(t.args[0]),s=`${e.referenceArg(i.args[1])}`,a=Fn(t.args[0]),u=`${a}++;`;u+=`if (${a}<=${s}) {\n`;let c=new Map,l=[];for(let p=1;p<t.args.length;p++){let d=t.args[0]+p;if(!o[d]||r.getInstruction(d).type!==47)continue;let m=t.args[p];c.set(d,e.referenceArg(m)),l[m]=e.isDirectlyReferencedByName(m)}for(let[p,d]of c.entries())if(l[p]){let m=Tw(p);u+=e.emitImmediateAssignment(p,m,d),c.set(p,m)}for(let[p,d]of c.entries())u+=`${Fn(p)}=${d};\n`;u+=`} else {\n`;for(let p=1;p<t.args.length;p++){let d=n+p;if(d>=r.instructionsLength()||!o[d]||r.getInstruction(d).type!==47)continue;let m=Fn(d);u+=`${m}=${e.referenceArg(t.args[p])};\n`}return u+=`break;\n`,u+=`}\n}\n`,u+=`}\n`,u}function eY(e,t,n){let{glsl:r}=e;if(r)throw V(\"GLSL map not implemented yet\");let o=Fn(t.endIndex+1),i=[];for(let a=0;a<t.callData.parameterSymbols.length;a++){let u=Fn(n+a+1);i.push(u)}let s=i.join(\",\");return`${o}=(${s}) => {\n`}function tY(e,t,n){let r=`return ${e.referenceArg(t.args[1])}`;return r+=`}\n`,r}function nY(e,t,n){switch(t.type){case 1:return e.emitConstant(t,t.mobility);case 8:case 9:case 10:case 11:case 12:case 13:case 25:case 26:case 27:case 28:case 29:case 31:case 32:return e.emitBinary(t,e.referenceArg(t.args[0]),e.referenceArg(t.args[1]));case 14:{let o=e.referenceArg(t.args[0]);return e.emitNeg(o)}case 56:{let o=e.referenceArg(t.args[0]);return e.emitSquare(o)}case 15:{let o=t.valueType;switch(o){case D:case N:return e.emitVec2(e.referenceArg(t.args[0]),e.referenceArg(t.args[1]));case G:return e.emitVec3(e.referenceArg(t.args[0]),e.referenceArg(t.args[1]),e.referenceArg(t.args[2]));case Nt:return e.emitVec3(e.referenceArg(t.args[0]),e.referenceArg(t.args[1]),e.referenceArg(t.args[2]));case Jt:case Ut:case sn:case on:case Zt:case cn:case Qt:case yn:case gn:case kn:case Hn:return e.emitVec(...t.args.map(s=>e.referenceArg(s)));default:let i=o;throw new Error(`Unexpected tuple type ${i}`)}}case 16:{let o=e.chunk.getInstruction(t.args[0]).valueType;switch(o){case D:case G:case N:case Nt:case Jt:case Ut:case sn:case on:case Zt:case cn:case Qt:case yn:case gn:case kn:case Hn:return e.emitVecAccess(e.referenceArg(t.args[0]),t.index);default:let i=o;throw new Error(`Unexpected tuple type ${i}`)}}case 38:return e.emitList(t.args.map(o=>e.referenceArg(o)),t);case 40:case 42:case 3:throw new Error(`Programming Error: expect ${_o(t.type)} to be removed before emitting code.`);case 39:{let o=t.valueType;return e.emitListAccess(e.referenceArg(t.args[0]),e.referenceArg(t.args[1]),e.printValue({value:Ho(o),valueType:o},0),t)}case 41:return e.emitInboundsListAccess(e.referenceArg(t.args[0]),e.referenceArg(t.args[1]));case 37:{let o=t.args.map(s=>e.referenceArg(s)),i=rY(e,t,n,o);return i!=null?i:e.emitNativeFunction(o,t)}case 44:return e.emitExtendSeed(e.referenceArg(t.args[0]),e.chunk.getInstruction(t.args[1]).valueType,e.referenceArg(t.args[1]),t.tag);case 2:case 0:case 21:case 22:case 19:case 20:case 23:case 24:case 47:case 48:case 49:case 50:case 51:case 53:case 54:case 33:case 55:case 4:throw new Error(`Unexpected opcode ${t.type}`);default:let r=t;throw new Error(`Unexpected opcode ${r.type}`)}}function rY(e,t,n,r){if(e.glsl)return;if(n===e.chunk.getReturnIndex()&&t.symbol===\"coerceComplexToReal\"||t.symbol===\"peelableCoerceComplexToReal\")return`BuiltIn.peelableCoerceComplexToReal(${r.join(\",\")},__meta)`;if(n===e.chunk.getReturnIndex()&&t.symbol===\"coerceComplexToRealWithTolerance\"||t.symbol===\"peelableCoerceComplexToRealWithTolerance\")return`BuiltIn.peelableCoerceComplexToRealWithTolerance(${r.join(\",\")},__meta)`}function Uw(e,t,n){if(t.recursionGroup.length>1)return!1;let r=t.endIndex,o=e.getInstruction(r),[i,...s]=o.args;if(s.length!==1)return!1;let u=e.getInstruction(i).args[0],c={};c[s[0]]=!1;for(let l=r-1;l>=i;l--){let p=e.getInstruction(l);if(me(p)&&n[l]){if(p.type===33&&!c[l])c[p.args[0]]=!0;else for(let d of p.args)c[d]=!0;if(p.type===55&&p.args[0]===u&&c[l])return!1}}return!0}function zw(e,t,n,r){let o=e.getInstruction(n.args[0]);if(o.recursionGroup.length>1)return[];let i=o.endIndex,s=e.getInstruction(i),a=new wx(e,r,t,i),u=[];for(let l=1;l<s.args.length;l++)u[s.args[l]]={op:\"&&\",values:[]};for(let l=i-1;l>t;l--){let p=u[l];if(p===void 0)continue;let d=e.getInstruction(l);if(me(d))if(d.type===33){u[d.args[0]]=p;let m=a.condition(d.args[0]);m!==void 0&&(u[d.args[1]]=n0(p,m),u[d.args[2]]=n0(p,Ax(m)))}else for(let m of d.args)u[m]=p}let c=[];e:for(let l=i-1;l>=t;l--){let p=e.getInstruction(l);if(p.type!==55)continue;let d=e.getInstruction(p.args[0]);if(l>d.endIndex)continue;let m=p.args.slice(1);if(m.length!==d.signature.argTypes.length)throw new Error(\"Programming error: Non-matching arg length\");let f=u[l];if(f!==void 0){if(f.op===\"&&\"&&f.values.length===0)throw new Error(\"Programming error: Recursive call unconditionally executed\");for(let g=0;g<m.length;g++){if(e.getInstruction(m[g]).valueType!==x)continue e;let y=a.coeffs(m[g]);if(y===void 0||!oY(y,g)||F(y.argCoeffs[g])<-1)continue e}c[l]=f}}return c}function oY(e,t){for(let n=0;n<e.argCoeffs.length;n++)if(n!==t&&F(e.argCoeffs[n])!==0)return!1;return!0}function kw(e,t){let n=e.getReturnIndex(),r=new Array(n),o=new Array(n).fill(!1);for(let s=0;s<=n;s++){let a=e.getInstruction(s);Zr(a)||mo(a)||a.type===48||a.type===47&&e.getInstruction(a.args[0]).type!==22||a.type===0||a.type===55?r[s]=2:r[s]=0}r[n]===0&&(r[n]=1,o[n]=!0);let i=0;for(let s=n;s>=0;s--){if(!t[s])continue;let a=e.getInstruction(s);if(a.type===54?i++:a.type===53&&i--,!me(a))continue;if(a.type===19||a.type===20||a.type===24||a.type===54||a.type===39||a.type===55)for(let c of a.args){let l=e.getInstruction(c);r[c]===0&&l.type===1&&l.valueType===x?(r[c]=1,o[c]=!0):(r[c]=2,o[c]=!1)}else{for(let c of a.args)switch(r[c]){case 0:r[c]=1,o[c]=!0;break;case 1:case 2:r[c]=2,o[c]=!1;break}i>0&&a.type===33&&(r[s]=2,o[s]=!1)}}return o}function iY(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}var Fx=class{constructor(t,n,r){this.chunk=t;this.referenced=n;this.shouldInline=r;this.thunkSets=[];this.thunkStarts=[];this.thunkEnds=[];this._isThunkEnd=[];this.piecewiseReferencedCount=[];this.dependencyThunkNames=[];this.parentFunctionStart=[];let o=t.getReturnIndex();for(let a=0;a<=t.instructionsLength();a++)this.thunkSets[a]=new Set;let i=t.argNames.length,s=[];for(let a=i;a<=t.getReturnIndex();a++){let u=t.getInstruction(a);this.parentFunctionStart[a]=s[s.length-1],u.type===53?s.push(a):u.type===54&&s.pop()}this.markThunkSets(i,o,[o],\"always\"),this.markThunks(i,o)}isThunkBegin(t){return this.thunkStarts[t]===t}isThunkEnd(t){return!!this._isThunkEnd[t]}containingThunkName(t){return this.thunkStarts[t]}thunkEnd(t){return this.thunkEnds[t]}isEarlyReturningThunk(t){let n=this.parentFunctionStart[t];return this.isThunkBegin(t)&&n!==void 0}dependencyThunkNamesForPiecewiseBranch(t){return this.dependencyThunkNames[t]}wantToInlineThunk(t){let n=this.thunkSets[t];if(n!==\"always\"&&n.size===1){for(let r of n)if(this.piecewiseReferencedCount[r]!==1)return!1;return!0}return!1}printChunkWithThunkInfo(){for(let t=0;t<=this.chunk.getReturnIndex();t++){let n=this.thunkSets[t],r=n===\"always\"?\"always\":`{${[...n].sort().join(\",\")}}`;if(this.isThunkBegin(t)&&(r+=\" beginThunk\"),this.isThunkEnd(t))r+=\" endThunk\";else{let o=this.containingThunkName(t);o!==void 0&&(r+=` start:${o}`)}this.shouldInline[t]&&(r+=\"\t[inline]\"),this.chunk.comments[t]=r}return this.chunk.print(this.chunk.getReturnIndex())}markThunkSets(t,n,r,o){let{chunk:i,referenced:s,thunkSets:a,piecewiseReferencedCount:u}=this;for(let l of r)a[l]=\"always\";function c(l,p){let d=a[l];if(d!==\"always\"){if(p===\"always\"){a[l]=p;return}for(let m of p)d.add(m)}}for(let l=n;l>=t;l--){if(!s[l])continue;let p=i.getInstruction(l);if(!me(p))continue;let d=a[l];if(mo(p)){let m=p.args[0];this.markThunkSets(m+1,l-1,p.args.slice(1),d),l=m+1;continue}for(let m=0;m<p.args.length;m++){let f=p.args[m];if(f<t)c(f,o);else if(m>0&&p.type===33){let g=a[f];g!==\"always\"&&g.add(f);let y=u[f];u[f]=(y!=null?y:0)+1}else c(f,d)}}}markThunks(t,n){var a,u;let{chunk:r,thunkSets:o}=this,i,s;for(let c=t;c<=n;c=s){let l=r.getInstruction(c),p=sY(this.chunk,l),d,m;if(p){let f=c+1,g=p.innerEndIndex-1;this.markThunks(f,g),m=o[p.innerEndIndex],s=p.outerEndIndex+1,d=this.thunkDecision(i,c,this.referenced[p.innerEndIndex],l.type===21&&this.shouldInline[p.outerEndIndex],m)}else m=o[c],s=c+1,d=this.thunkDecision(i,c,this.referenced[c],this.shouldInline[c],m);if(i!==void 0&&d.shouldEndThunk&&(this.markEndThunk(c-1,i),i=void 0),d.shouldStartThunk&&m!==\"always\"){for(let f of m)(u=(a=this.dependencyThunkNames)[f])!=null||(a[f]=[]),this.dependencyThunkNames[f].push(c);i={start:c,set:m}}if(i!==void 0&&(this.thunkStarts[c]=i.start,p))for(let f=p.innerEndIndex;f<=p.outerEndIndex;f++)this.thunkStarts[f]=i.start}i!==void 0&&this.markEndThunk(n,i)}thunkDecision(t,n,r,o,i){let s=this.chunk.getInstruction(n);if(s.type===33&&(o=!1),o||!r)return{shouldEndThunk:!1,shouldStartThunk:!1};if(i===\"always\")return{shouldEndThunk:t!==void 0,shouldStartThunk:!1};let a=s.type===1||s.type===47,u=i.size>0&&!a,c=t!==void 0&&!iY(i,t.set);return{shouldEndThunk:c,shouldStartThunk:(c||t===void 0)&&u}}markEndThunk(t,n){let{referenced:r}=this;for(;t>=0&&!r[t];)t--;this._isThunkEnd[t]=!0,this.thunkEnds[n.start]=t}};function sY(e,t){if(Zr(t)){let n=t.endIndex,r=e.getInstruction(n);if(r===void 0)return;if(cx(r))return{outerEndIndex:n+r.args.length-1,innerEndIndex:n};if(r.type===54)return{outerEndIndex:n,innerEndIndex:n}}}var Em=class{constructor(t,n){this.chunk=t;this.glsl=n;this.inlinedSource=[];this.inlinedThunks=[];this.recursiveFunctionInfo=[];this.isTailFunction=[];let r=t.getReturnIndex();this.referenced=Yr(t,r),this._shouldInline=kw(t,this.referenced),!this.glsl&&t.computeNeedsThunking()&&(this.thunks=new Fx(t,this.referenced,this._shouldInline));for(let o=0;o<=r;o++){let i=t.getInstruction(o);if(i.type===4){if(!this.referenced[o])continue;this.isTailFunction[o]=Uw(t,i,this.referenced),i.recursionGroup=i.recursionGroup.filter(s=>this.referenced[s])}}}isThunkBegin(t){return!!this.thunks&&this.thunks.isThunkBegin(t)}isThunkEnd(t){return!!this.thunks&&this.thunks.isThunkEnd(t)}isEarlyReturningThunk(t){return!!this.thunks&&this.thunks.isEarlyReturningThunk(t)&&this.inlinedThunks[t]===void 0}thunkName(t){var n;return(n=this.thunks)==null?void 0:n.containingThunkName(t)}thunkEnd(t){return this.thunks.thunkEnd(t)}shouldInline(t){return this._shouldInline[t]}inlineSource(t,n){this.inlinedSource[t]=n}wantToInlineThunk(t){return!!this.thunks&&this.thunks.wantToInlineThunk(t)}inlineThunk(t,n){this.inlinedThunks[t]=n}referenceArg(t){let n=this.inlinedSource[t];return n!==void 0?n:Fn(t)}isDirectlyReferencedByName(t){return this.inlinedSource[t]===void 0}referencePiecewiseBranch(t){var s;let n=this.referenceArg(t),r=(s=this.thunks)==null?void 0:s.dependencyThunkNamesForPiecewiseBranch(t);if(!r||r.length===0)return{expression:n,rawExpression:n,thunkDependencies:[]};let o=[],i=\"\";for(let a of r){let u=this.inlinedThunks[a];if(u!==void 0)i&&(i+=\",\"),i+=u;else{let c=Pm(a),l=Sm(a),p=`${c}||${l}()`;i&&(i+=\",\"),i+=`${p}`}o.push(a)}return{expression:\"(\"+i+\",\"+n+\")\",rawExpression:n,thunkDependencies:o}}enterFunction(t,n,r){let o=t.args[0],i=this.chunk.getInstruction(o),s=[];for(let u=0;u<i.signature.argTypes.length;u++)s.push(n+u+1);let a=zw(this.chunk,n,t,s);this.recursiveFunctionInfo.push({fn:o,argBlockvars:s,reachConditions:a,returnType:t.valueType,executionMode:r})}exitFunction(){this.recursiveFunctionInfo.pop()}};function Vx(e){let t=new s0(e),n=Ky(t);return t.finish(n)}var s0=class extends Em{constructor(n){super(n,!1);this.constants=[]}finish(n){return{source:n,constants:this.constants}}printValue(n){return Hw(n.value)}beforeBeginLoop(){}checkFiniteBounds(n,r,o){let i=`}else if(!isFinite(${o}-${r})){\n`;for(let s=2;s<n.args.length;s++){let a=n.endIndex+s-1;if(a>=this.chunk.instructionsLength()||!this.referenced[a])continue;let u=this.chunk.getInstruction(a);if(u.type!==47)continue;let c=Fn(a);la(u.valueType)?i+=`${c}=${this.printValue({value:Ho(u.valueType),valueType:u.valueType})};\n`:i+=`throw new Error('Cannot set ${c} of type ${tt(u.valueType)} to NaN value');\n`}return i}emitConstant(n){return n.valueType===x||n.valueType===Oe||n.valueType===D||n.valueType===G?this.printValue(n):(this.constants.push(nu(n.value)),`_C[${this.constants.length-1}]`)}emitNeg(n){return`-${n}`}emitSquare(n){return`(${n})**2`}emitTernary(n,r,o){return`${n}?${r}:${o}`}emitVec2(n,r){return`[${n},${r}]`}emitVec3(n,r,o){return`[${n},${r},${o}]`}emitVec(...n){return`[${n.join(\",\")}]`}emitVecAccess(n,r){return`${n}[${r}]`}emitBinary(n,r,o){switch(n.type){case 8:return`${r}+${o}`;case 9:return`${r}-${o}`;case 10:return`${r}*${o}`;case 11:return`${r}/${o}`;case 12:return`BuiltIn.pow(${r},${o})`;case 13:return`Math.pow(${r},${o})`;case 25:return`${r}===${o}`;case 26:return`${r}<${o}`;case 28:return`${r}<=${o}`;case 27:return`${r}>${o}`;case 29:return`${r}>=${o}`;case 31:return`${r}||${o}`;case 32:return`${r}&&${o}`;default:throw new Error(\"Programming Error: invalid binary opcode.\")}}emitList(n){return`[${n.join(\",\")}]`}emitListAccess(n,r,o){let i=`${n}.length`,s=`Math.floor(${r})`;return`(${s}>=1&&${s}<=${i})?${n}[${s}-1]:${o}`}emitInboundsListAccess(n,r){return`${n}[${r}-1]`}emitNativeFunction(n,r){let o=ur[r.symbol];return`${o.module}.${o.symbol}(${n.join(\",\")})`}emitExtendSeed(n,r,o,i){let s=r===x?o:`BuiltIn.serializeNonNumericSeedPart(${r},${o})`;return`${n}+'::${i}'+${s}`}emitVarDeclaration(n,r){let o=r?\",\":\"var \";return o+=Fn(n),o}emitImmediateAssignment(n,r,o){return`var ${r}=${o};`}emitFunctionCall(n,r,o,i){return`${n}(${r}, ${o}, ${i.join(\",\")})`}isIntervalEmitContext(){return!1}};function Hw(e){if(Array.isArray(e))return`[${e.map(Hw).join(\",\")}]`;switch(typeof e){case\"boolean\":case\"number\":return e.toString();case\"string\":return`${JSON.stringify(e)}`;case\"object\":if(Sc(e))throw new Error(\"Action values cannot be compiled\");return F(e).toString();default:throw new Error(`Unexpected value: ${e}`)}}function Bx(e){let t=e.getInstruction(e.getReturnIndex());if(t.type!==47)throw new Error(`Expected BlockVar, got ${t.type}`);let n=e.getInstruction(t.args[0]);if(n.type!==51)throw new Error(`Expected EndMap, got ${n.type}`);let r=tr(t.valueType),o=e.getInstruction(n.args[0]);if(o.type!==50)throw new Error(`Expected BeginMap, got ${o.type}`);let i=[];for(let p of o.args){let d=e.getInstruction(p);if(!De(d)||d.valueType!==x)throw V(\"Programming error: interval bounds must be constant numbers\");i.push(F(d.value))}let s,a;r===Ji||r===Qi||r===vo?(s=[\"t\"],a={type:\"1d\",min:i[0],max:i[1]}):(s=[\"u\",\"v\"],a={type:\"2d\",uMin:i[0],uMax:i[1],vMin:i[2],vMax:i[3]});let u=Vx(e),c=`\n  const mapFn = (function() {\n    \"use strict\";\n    ${u.source}\n  })();\n  return mapFn(${s.join(\",\")});\n`,l={};return{args:s,source:c,constants:u.constants,executionMetadata:l,fn:jy(s,c,u.constants,l),domain:a}}var _n=class e extends pt{constructor(n){super();this.type=\"IRExpression\";this.isError=!1;if(n.getError())throw new Error(\"Programming error: IRExpression should not be constructed with an error chunk\");if(this.warning=n.getWarning(),this._chunk=n,this.valueType=n.getReturnType(),this.addDependencies(n.getLiveArgNames()),this.isList=W(this.valueType),this.isList&&(this.length=this._chunk.getConstantListLength(),this.length===void 0))throw fM(n.getListLengthDependencies());bw(n);let r=n.isConstant();this.isConstant=r&&(this.valueType===x||this.valueType===Oe),this.isTypedConstant=r,this.isEmptyAction=r&&this.valueType===St&&fe(n.asValue().updateRules).length===0}shouldExportAns(){return!0}getCompiledFunction(n){return ka(this.valueType)?Bx(this._chunk):this._chunk.getCompiledFunction(n)}getRestrictedFunctionForGLSL(n,r){return this._chunk.getRestrictedFunctionForGLSL(n,r)}polynomialOrder(n){return this._chunk.polynomialOrder(n,{allowRestriction:!0,allowClosedBlockReferences:!1})}getPolynomialCoefficients(n){let r=this._chunk.getPolynomialCoefficients(n),o=r.chunk,i=r.coefficients,s=[];for(let a=0;a<i.length;a++){let u=o.copy();u.setReturnIndex(i[a]),u.fuseBroadcast(),s.push(new e(u))}return s}takeDerivative(n){let r=this._chunk.copy().takeDerivative(n).fuseBroadcast();return new e(r)}gradient(n){let r=this._chunk.copy().gradient(n).fuseBroadcast();return new e(r)}toImplicitBool(){let n=this._chunk.copy();return n.GreaterEqual([n.getReturnIndex(),n.ColdConstant(0)]),n.fuseBroadcast(),new e(n)}interpretWithParameters(n){let r,o=this._chunk.argNames;if(n.length===o.length)r=n;else{r=[];let i=this.getDependencies();for(let s=0,a=0;s<o.length;s++)i[a]===o[s]?(r.push(n[a]),a+=1):r.push(void 0)}return this._chunk.interpretWithParameters(r)}substituteConstantArguments(n){return new e(this._chunk.substituteConstantArguments(n))}boundDomain(n){return this._chunk.boundDomain(n)}asValue(){var n;if(this._chunk.isConstant())return this._chunk.asValue();if(this.isList){let r=[],o=nu(Ho(rt(this.valueType)));for(let i=0;i<((n=this.length)!=null?n:0);i++)r.push(o);return r}else return nu(Ho(this.valueType))}asCompilerValue(){return this._chunk.asCompilerValue()}isNaN(){return typeof this.asValue()==\"number\"&&isNaN(this.asValue())}findLinearSubset(n){return this._chunk.findLinearSubset(n)}deriveRegressionRestrictions(){let n=this._chunk.deriveRegressionRestrictions();return n===this._chunk?this:new e(n)}eachElement(n){var r;for(let o=0;o<((r=this.length)!=null?r:0);o++)n(this.elementAt(o),o)}mapElements(n){var o;let r=[];for(let i=0;i<((o=this.length)!=null?o:0);i++)r.push(n(this.elementAt(i),i));return r}elementAt(n){let r=this._chunk.elementAt(n);return new e(r)}getCursorContext(){return this._chunk.getCursorContext()}getRecursiveFunctionMetadata(){let n=this._chunk.getInstruction(this._chunk.getReturnIndex());if(n.type===55)return this._chunk.getRecursiveFunctionMetadata(n.args[0])}coerceToNumericIfPossible(n={}){if(ae(this.valueType,Ne)||ae(this.valueType,Ce)||ae(this.valueType,N)){let r=this._chunk.copy(),o=r.getReturnIndex();return r.coerceToNumericIfPossible(n)===o?this:new e(r)}else return this}coerceToNumericIfPossibleWithTolerance(){return this.coerceToNumericIfPossible({withTolerance:!0})}slot(n){let r=this._chunk.copy();return r.setReturnIndex(r.Slot(n,[r.getReturnIndex()])),new e(r)}getCompiledDerivative(){let n=this.getDependencies();return this.takeDerivative(n[0]||\"x\").getCompiledFunction()}};var ru=class extends X{constructor(n){super(n);this.type=\"ListAccess\";this.list=n[0],this.index=n[1]}};var Rc=class extends X{constructor(n,r,o,i,s=[]){super([n,r].concat(o),{skipRegisterDependencies:!0});this.shouldCoerceToList=i;this.parameters=s;this.type=\"ListComprehension\";this._index=n,this._body=r,this._inputLists=o,this.registerDependencies()}registerDependencies(){let n=[];for(let i of this._inputLists){let s=i._symbol;n.push(s)}for(let i of this.parameters){let s=i.identifier._symbol;n.push(s)}this.addOptionalDependencies(n);let o=[this._index._symbol,...n];for(let i of this._inputLists)this.mergeDependenciesInScope(\"ListComprehension\",o,i.args[1]);for(let i of this.parameters)this.mergeDependenciesInScope(\"ListComprehension\",o,i.bounds[0]),this.mergeDependenciesInScope(\"ListComprehension\",o,i.bounds[1]);this.mergeDependenciesInScope(\"ListComprehension\",o,this._body)}};var Gx=class extends $n{constructor(){super(...arguments);this.type=\"MixedNumber\"}};var ou=class extends Hs{constructor(n,r,o){super(n);this.type=\"MovablePoint\";this.moveStrategy=r,this.defaultDragMode=o,this.valueType=D}asValue(){return[+this.args[0].asValue(),+this.args[1].asValue()]}asCompilerValue(){return[this.args[0].asCompilerValue(),this.args[1].asCompilerValue()]}};var vm=class extends X{constructor(){super(...arguments);this.type=\"Multiply\"}};var Mm=class extends X{constructor(){super(...arguments);this.type=\"Negative\"}};var _m=class extends X{constructor(){super(...arguments);this.type=\"Norm\"}};So();var Rm=class extends pt{constructor(n,r,o,i,s){super();this.type=\"OptimizedRegression\";this.parameters=n,this.residuals=r,this.statistics=o,this.model=i,this.isModelValid=s.isModelValid,this.residualVariable=s.residualVariable,this.residualSuggestionId=s.residualSuggestionId,this.shouldSuggestLogMode=s.shouldSuggestLogMode,this.isLinear=s.isLinear,this.parameterWarning=s.parameterWarning,this.displayPrecision=s.displayPrecision,this.scaleFactors=s.scaleFactors,this._exports=[this.residualVariable];for(let a of fe(n))this._exports.push(a);this.mergeDependencies(i)}getCompiledFunction(){return this.model.getCompiledFunction.apply(this.model,arguments)}getCompiledDerivative(){return this.model.getCompiledDerivative.apply(this.model,arguments)}};var Dm=class extends X{constructor(){super(...arguments);this.type=\"Or\"}};var Nm=class extends X{constructor(){super(...arguments);this.type=\"PercentOf\"}};var Gp=class extends X{constructor(n,r){super(r);this.type=\"Prime\";this.order=n}};var Om=class extends X{constructor(t){super(t,{skipRegisterDependencies:!0}),this._index=t[0],this.registerDependencies()}registerDependencies(){for(let t=1;t<=3;t++)this.mergeDependenciesInScope(\"RepeatedOperator\",[this._index._symbol],this.args[t])}};var Am=class extends Om{constructor(){super(...arguments);this.type=\"Product\";this.in_place_operator=\"*=\";this.starting_value=1}evaluateConstant(n){let r=1+Math.round(n[1])-Math.round(n[0]);return r<=0?this.starting_value:Math.pow(n[2],r)}update(n,r){return n*r}};var qp=class extends X{constructor(n){super(n);this.type=\"Range\";this.beginning=n[0],this.end=n[1]}isHalfEmpty(){return this.end&&this.end.args&&this.end.args.length===0}};var Cl=class extends pt{constructor(n,r){super();this._symbol=n;this._optimizedRegression=r;this.type=\"RegressionParameter\"}asValue(){return this._optimizedRegression.parameters[this._symbol].asValue()}asCompilerValue(){return this._optimizedRegression.parameters[this._symbol].asCompilerValue()}};var wm=class extends X{constructor(){super(...arguments);this.type=\"Restriction\"}};var Up=class extends X{constructor(n){typeof n!=\"string\"&&(n=\"\"+n);super([]);this.type=\"Seed\";this.isString=!0;this._stringValue=n}asValue(){return this._stringValue}};var qx=class extends On{constructor(n,r){super(n,r);this.type=\"SeededFunctionCall\";this.seed=r[0]}};var Lm=class extends Bn{constructor(n,r){super(new Mn(n._symbol),n._expression);this.type=\"Slider\";this.setInputSpan(n._inputSpan),this.sliderAssignment=n,this.sliderMin=r.sliderMin,this.sliderMax=r.sliderMax,this.sliderSoftMin=r.sliderSoftMin,this.sliderSoftMax=r.sliderSoftMax,this.sliderStep=r.sliderStep,this.sliderIsPlayingOnce=r.sliderIsPlayingOnce,this.sliderMin&&this.mergeDependencies(this.sliderMin),this.sliderMax&&this.mergeDependencies(this.sliderMax),this.sliderStep&&this.mergeDependencies(this.sliderStep)}shouldPromoteToSlider(n){return!1}asAssignment(){return new dm(this._symbol,this._expression)}};var Ux=class extends pt{constructor(n,r,o,i){super();this.type=\"SolvedEquation\";this._symbol=n,this._expression=r,this.otherVariableSolutionData=o,this.mergeDependencies(r),this.branchMultiplier=i}};var Fm=class extends X{constructor(){super(...arguments);this.type=\"Stats\";this._symbol=\"stats\"}};var Ju=class extends X{constructor(n,r){super([n].concat(r),{skipRegisterDependencies:!0});this.type=\"Substitution\";this._body=n,this._assignments=r,this.registerDependencies()}registerDependencies(){let n=[];for(let r=0;r<this._assignments.length;r++){let o=this._assignments[r],i=o._lhs,s=o._rhs;if(i instanceof $e){let a=o._symbol;n.push(a),this.mergeDependencies(s)}else if(i instanceof On)this.mergeDependencies(o);else throw new Error(`Unexpected LHS in assignment expression: ${i.type}`);this.addSubstitutionDependencies(s.getDependencies())}this.addOptionalDependencies(n),this.mergeDependenciesInScope(\"Substitution\",n,this._body)}};var Vm=class extends Om{constructor(){super(...arguments);this.type=\"Sum\";this.in_place_operator=\"+=\";this.starting_value=0}evaluateConstant(n){let r=1+Math.round(n[1])-Math.round(n[0]);return r<=0?this.starting_value:r*n[2]}update(n,r){return n+r}};var zx=class extends pt{constructor(n){super();this.type=\"Ticker\";this.handler=n.handler,this.minStep=n.minStep,this.mergeDependencies(this.handler),this.mergeDependencies(this.minStep)}};var Bm=class extends X{constructor(n){super(n,{skipRegisterDependencies:!0});this.type=\"UpdateRule\";this._symbol=n[0]._symbol,this._expression=n[1],this.registerDependencies()}registerDependencies(){this.addUpdateSymbol(this._symbol),this.mergeDependencies(this._expression)}};var El=class extends pt{constructor(n,r){super();this.type=\"CallAssignment\";this._symbol=n._symbol,this.mergeDependencies(n,r),this._lhs=n,this._rhs=r}asComparator(){return new Qa([this._lhs,this._rhs])}};var Wr=\"i\",iu=class extends X{constructor(){super([]);this.type=\"ImaginaryUnit\"}};var Qu=class extends X{constructor(n,r,o){super(n);this.type=\"MovableComplexNumber\";this.moveStrategy=r,this.defaultDragMode=o,this.valueType=N}asValue(){return[+this.args[0].asValue(),+this.args[1].asValue()]}asCompilerValue(){return[this.args[0].asCompilerValue(),this.args[1].asCompilerValue()]}};var su=class extends X{constructor(n,r){super(r);this.type=\"NamedCoordinateAccess\";this.symbol=n}};function Vr(e){switch(e.type){case\"IRExpression\":case\"MovablePoint\":case\"MovableComplexNumber\":return{valueType:e.valueType,value:e.asValue()};default:return}}function kx(e,t){if(e.type===\"Error\")return[void 0,e.getError()];let n=Vr(e);return(n==null?void 0:n.valueType)!==t?[void 0,void 0]:[n,void 0]}function yt(e){if(jd(e)){let r=[],o=rt(e.valueType);for(let i of e.value)r.push(yt({valueType:o,value:i}));return new O.List(r)}let{value:t,valueType:n}=e;switch(n){case x:case Oe:return new O.Constant(t);case Bt:return new O.Seed(t);case N:return new O.Add([yt({valueType:x,value:t[0]}),new O.Multiply([yt({valueType:x,value:t[1]}),new O.ImaginaryUnit])]);case D:return new O.ParenSeq([yt({valueType:x,value:t[0]}),yt({valueType:x,value:t[1]})]);case G:return new O.ParenSeq([yt({valueType:x,value:t[0]}),yt({valueType:x,value:t[1]}),yt({valueType:x,value:t[2]})]);case zt:return new O.FunctionCall(\"segment\",[yt({valueType:G,value:t[0]}),yt({valueType:G,value:t[1]})]);case ke:return new O.FunctionCall(\"vector\",[yt({valueType:G,value:t[0]}),yt({valueType:G,value:t[1]})]);case dr:return new O.FunctionCall(\"triangle\",[yt({valueType:G,value:t[0]}),yt({valueType:G,value:t[1]}),yt({valueType:G,value:t[2]})]);case kr:return new O.FunctionCall(\"sphere\",[yt({valueType:G,value:t[0]}),yt({valueType:x,value:t[1]})]);case fn:return new O.FunctionCall(\"rgb\",[yt({valueType:x,value:t[0]}),yt({valueType:x,value:t[1]}),yt({valueType:x,value:t[2]})]);case _e:return new O.FunctionCall(\"polygon\",[yt({valueType:Yt,value:t})]);case he:return new O.FunctionCall(\"segment\",[yt({valueType:D,value:t[0]}),yt({valueType:D,value:t[1]})]);case Ee:return new O.FunctionCall(\"line\",[yt({valueType:D,value:t[0]}),yt({valueType:D,value:t[1]})]);case Ae:return new O.FunctionCall(\"ray\",[yt({valueType:D,value:t[0]}),yt({valueType:D,value:t[1]})]);case Pe:return new O.FunctionCall(\"mathVector\",[yt({valueType:D,value:t[0]}),yt({valueType:D,value:t[1]})]);case Te:return new O.FunctionCall(\"circle\",[yt({valueType:D,value:t[0]}),yt({valueType:x,value:t[1]})]);case ue:return new O.FunctionCall(\"arc\",[yt({valueType:D,value:t[0]}),yt({valueType:D,value:t[1]}),yt({valueType:D,value:t[2]})]);case Ne:return new O.FunctionCall(\"angle\",[yt({valueType:D,value:t[0]}),yt({valueType:x,value:t[1]}),yt({valueType:x,value:t[2]})]);case Ce:return new O.FunctionCall(\"directedangle\",[yt({valueType:D,value:t[0]}),yt({valueType:x,value:t[1]}),yt({valueType:x,value:t[2]})]);case pr:return new O.FunctionCall(\"tone\",[yt({valueType:x,value:t[0]}),yt({valueType:x,value:t[1]})]);case St:case we:case un:case Nt:case yn:case gn:case Jt:case Ut:case sn:case on:case Zt:case cn:case Qt:case kn:case Hn:throw new Error(`Programming error: cannot create parse node from valueType: ${tt(n)}`);default:throw new Error(`Programming error: unexpected value: ${e}`)}}function aY(e){if(!$s(e))return new Un(NaN);let t={value:e.asCompilerValue(),valueType:e.valueType};return t?yt(t):new Un(NaN)}function uY(e){if(!$s(e))return NaN;let t=Vr(e);if(!t)return NaN;switch(t.valueType){case x:return t.value;case N:return t.value;default:throw V(`Unexpected type ${tt(t.valueType)} in column.`)}}var Ku=class extends ns{constructor(n,r){super(n.map(aY));this.rawArgs=n;this.headerSymbol=r;this.type=\"TableColumnValue\";this.isIndependent=r!==void 0}asValueMixed(){return this.rawArgs.map(uY)}};var cY={Placeholder:Ap,Error:M,Constant:Un,MixedNumber:Gx,Identifier:Mn,Ans:Px,ImaginaryUnit:iu,List:im,TableColumnValue:Ku,Range:qp,ListAccess:ru,DotAccess:ai,Construction:Fp,ParenSeq:fl,MovableComplexNumber:Qu,MovablePoint:ou,NamedCoordinateAccess:su,BareSeq:bl,Norm:_m,ComparatorChain:xl,DoubleInequality:Cx,Sum:Vm,Product:Am,Integral:Im,AssignmentExpression:Lp,ListComprehension:Rc,FunctionCall:rr,RecursiveFunctionBaseCase:Do,SeededFunctionCall:qx,FunctionExponent:Il,FunctionFactorial:Pl,Prime:Gp,Piecewise:No,Restriction:wm,Derivative:Vp,UpdateRule:Bm,Substitution:Ju,Histogram:xm,DotPlot:gm,BoxPlot:mm,Stats:Fm,Assignment:dm,AssignmentImport:nm,FunctionDefinition:Fr,CallAssignment:El,Equation:gl,Regression:cm,Image:vx,Ticker:zx,Slider:Lm,RegressionParameter:Cl,Viewport:lm,ConcreteAssignmentImport:rm,Table:Wu,TableColumn:tu,SolvedEquation:Ux,OptimizedRegression:Rm,Seed:Up,ExtendSeed:Bp,IRExpression:_n,Add:pm,Subtract:si,Multiply:vm,DotMultiply:Tl,CrossMultiply:fm,Divide:ym,Exponent:bm,Negative:Mm,Or:Dm,PercentOf:Nm,\"Comparator['<']\":zy,\"Comparator['>']\":Hy,\"Comparator['<=']\":ky,\"Comparator['>=']\":$y,\"Comparator['=']\":Qa},O=cY;var FI={};Tu(FI,{parse:()=>mi,parseIdentifier:()=>U_,setInput:()=>CB});So();var Dc;function $w(e){Dc=e}function Yw(){Dc&&(Dc.cacheHits+=1)}function Zw(){Dc&&(Dc.cacheMisses+=1)}function Xw(){Dc&&(Dc.cacheWrites+=1)}function Ww(){Dc&&(Dc.cacheReads+=1)}function a0(e,t){let n=Math.round(1e6*e)/1e6;return Math.abs(n-e)<t?n:e}function fae(e){let t=!0,n=!0,r=!0;return e.hardMin!==void 0&&e.target<e.hardMin&&(t=!1),e.hardMax!==void 0&&e.target>e.hardMax&&(n=!1),e.step&&Hx({target:e.target,step:e.step,hardMin:t?e.hardMin:void 0,hardMax:n?e.hardMax:void 0})!==e.target&&(r=!1),{min:t,max:n,step:r}}function Hx(e){let{target:t,hardMin:n,hardMax:r,step:o}=e,i=1e-10;if(n!==void 0&&r!==void 0&&(i=Math.min(i,Math.abs(r-n)/1e3)),o&&(i=Math.min(i,o/10)),n!==void 0&&(n=a0(n,i)),r!==void 0&&(r=a0(r,i)),e.forceSliderToMax&&r!==void 0&&(t=r),n>r||t<=n)return n;if(t>=r)return r;if(o){let a=n!==void 0?n:0,u=Math.round((t-a)/o);t=o*u+a}let s=a0(t,i);return(o||n===s||r===s)&&(t=s),t<=n?n:t>=r?r:t}function jw(e){let{storedMax:t,sliderValue:n,hardMin:r,step:o}=e,i=e.is3d?ro.xmax:10;if(t>i&&(i=t),n>i&&(i=n),r>i&&(i=r),o){let s=Hx({target:i,hardMin:r,hardMax:void 0,step:o});s>=i?i=s:i=s+o}return i}var Gm=class e{constructor(t,n,r,o,i){this.frame=t;this.dynamic=n;this.lexical=r;this.maxBindingIndex=o;this.compiledGlobalCache=i}static empty(t){return new e(t,{},{},-1,{maxIndex:-1,entries:{}})}resolve(t){if(this.lexical[t])return this.lexical[t];if(this.dynamic[t])return this.dynamic[t];if(this.compiledGlobalCache.entries[t])return this.compiledGlobalCache.entries[t]}getSymbol(t){let n=this.resolve(t);if(n)switch(n.type){case\"lexical\":case\"dynamic\":case\"free\":return n.value;case\"global\":return n.value;case\"error\":throw n.error;default:throw new Error(\"Unexpected symbolMap entry type: \"+n.type)}}getMaxIndex(){return Math.max(this.maxBindingIndex,this.compiledGlobalCache.maxIndex)}getParseNode(t){let n=this.resolve(t);if(n)switch(n.type){case\"global\":case\"lexical\":case\"dynamic\":return n.node;case\"error\":case\"free\":return;default:throw new Error(\"Unexpected symbolMap entry type: \"+n.type)}}addLexicalBinding(t,n,r){this.addScopeEntry(t,{type:\"lexical\",value:n,node:r})}addDynamicBinding(t,n,r){this.addScopeEntry(t,{type:\"dynamic\",value:n,node:r})}cacheGlobal(t,n,r){this.compiledGlobalCache.entries[t]={type:\"global\",value:n,node:r},this.compiledGlobalCache.maxIndex=Math.max(this.compiledGlobalCache.maxIndex,n)}setFreeVariable(t,n){this.addScopeEntry(t,{type:\"free\",value:n})}setErrorIfAccessed(t,n){this.addScopeEntry(t,{type:\"error\",error:n})}addScopeEntry(t,n){var s;let r=this.lexical,o=this.dynamic,i;switch(n.type){case\"lexical\":{r[t]=n,this.frame[t]===void 0&&((s=this.dynamic[t])==null?void 0:s.type)!==\"dynamic\"?(o[t]=n,i=!0):i=!1;break}case\"dynamic\":{o[t]=n,r[t]={type:\"lexical\",value:n.value,node:n.node},i=!0;break}case\"error\":{o[t]=n,i=!0;break}case\"free\":{o[t]=n,i=!0;break}default:throw new Error(\"Unexpected symbolMap entry type: \"+n.type)}n.type!==\"error\"&&(this.maxBindingIndex=Math.max(this.maxBindingIndex,n.value)),i&&(this.compiledGlobalCache={maxIndex:-1,entries:{}})}isLocal(t){let n=this.resolve(t);return(n==null?void 0:n.type)===\"lexical\"||(n==null?void 0:n.type)===\"dynamic\"}isGlobal(t){return this.frame[t]!==void 0&&!this.isLocal(t)}isError(t){var r;let n=this.resolve(t);return n?n.type===\"error\":((r=this.frame[t])==null?void 0:r.type)===\"Error\"}isDefined(t){return this.isLocal(t)||this.isGlobal(t)}resolveVisibleGlobalDefinition(t){let n=this.resolve(t),r;switch(n==null?void 0:n.type){case\"free\":case\"global\":case void 0:r=Jw(this.frame[t]);break;case\"lexical\":case\"dynamic\":return;case\"error\":throw n.error;default:throw new Error(\"Unexpected symbolMap entry type: \"+n.type)}if(um(r)){let a=u0(Gy(this.frame),r);r=Jw(a.def),t=a.qualifiedName.symbol}if(!r)return;if(!r.moduleID)return{def:r};let o=ix(this.frame);if(r.moduleID===o)return{def:r};let{newPolicy:i,newScope:s}=this.newScopeAcrossModuleBoundary(r.moduleID);return{def:r,moduleInfo:{name:vn(r.moduleID,t),scope:s,policy:i}}}childScope(){return new e(this.frame,qn(this.dynamic),qn(this.lexical),this.maxBindingIndex,this.compiledGlobalCache)}childScopeWithChildGlobalCache(){return new e(this.frame,qn(this.dynamic),qn(this.lexical),this.maxBindingIndex,{maxIndex:this.compiledGlobalCache.maxIndex,entries:qn(this.compiledGlobalCache.entries)})}newLexicalScope(){return new e(this.frame,qn(this.dynamic),{},this.maxBindingIndex,this.compiledGlobalCache)}newScopeAcrossModuleBoundary(t){let n=Gy(this.frame),r=n.getFrame(t),o=n.getPolicyContextForFrame(t).policy,i=new e(r,qn(this.dynamic),{},this.maxBindingIndex,{maxIndex:0,entries:{}});return{newPolicy:o,newScope:i}}};function Jw(e){if((e==null?void 0:e.type)===\"Error\")throw e;return e}function u0(e,t){let n=new Lr;for(;;){if(n.has(t.importFrom))throw new Error(\"Programming Error: AssignmentImport cycle\");n.add(t.importFrom);let o=e.getFrame(t.importFrom.frameID)[t.importFrom.symbol];if(um(o))t=o;else{if(o)return{def:o,qualifiedName:t.importFrom};if(t.defaultDefinition)return{def:t.defaultDefinition,qualifiedName:vn(t.moduleID,t._symbol)};throw new Error(`Programming Error: could not resolve AssignmentImport ${t.importFrom.frameID}:${t.importFrom.symbol}`)}}}var pY=Uu;function dY(e){let t=[];for(let n=0;n<e.length;n++)t.push(se(e[n].valueType));return t}var zp=!0;function Qw(e,t,n){let r=t.length,o=t[0];if(r<n)throw cl(e._symbol,{blockExport:zp});if(!pY(o.valueType,[Z,He]))throw cl(e._symbol,{blockExport:zp});if(r>n)throw e.type===\"BoxPlot\"?cl(e._symbol,{blockExport:zp}):gE(e._symbol,2)}function $x(e,t){switch(e.type){case\"Histogram\":case\"DotPlot\":return Qw(e,t,2);case\"BoxPlot\":return Qw(e,t,1);case\"Stats\":{let n=t.length,r=t[0];if(n===0)throw cl(e._symbol,{blockExport:zp});if(r.valueType===He)throw ts(e._symbol,dY(t),{blockExport:zp});if(r.valueType!==Z)throw cl(e._symbol,{blockExport:zp});if(n>1)throw cl(e._symbol,{blockExport:zp});break}}}var Nc={coerceToNumber:\"all\"};function pe(e,t,n,r={}){if(e.type===\"IRExpression\"||e.type===\"Error\")return e;try{return au(e,t,n,r)}catch(o){return o instanceof O.Error?o:V(o)}}function au(e,t,n,r={}){let o=uu(e,t,n,{coerceToNumber:r.coerceToNumber});if(o.isError)throw o;return o}function l0(e,t,n){var a;let r=au(new O.Piecewise([e._indicator,new O.FunctionCall(\"coerceToReal\",[e._expressions[0]]),new Un(NaN)]),t,n),o=au(new O.Piecewise([e._indicator,new O.FunctionCall(\"coerceToReal\",[e._expressions[1]]),new Un(NaN)]),t,n),i=new hm([r,e._operators[0],new Mn(e._symbol),e._operators[1],o]),s=(a=r.warning)!=null?a:o.warning;return s&&(i.warning=s),i}function eg(e,t){return e.type===\"Error\"?e:t.indexOf(e.valueType)===-1?fy():e}function p0(e,t,n){let r=pe(e.center,t,n),o=pe(e.radianAngle,t,n,Nc),i=pe(e.width,t,n,Nc),s=pe(e.height,t,n,Nc),a=pe(e.opacity,t,n,Nc),u=[D,Yt,He],c=[x,Z,He];return r=eg(r,u),o=eg(o,c),i=eg(i,c),s=eg(s,c),a=eg(a,c),new Tm({center:r,radianAngle:o,width:i,height:s,opacity:a})}function d0(e,t,n){let r=pe(e.handler,t,n);!r.isError&&r.valueType!==St&&(r=by(se(r.valueType)));let o=r.getDependencies().filter(s=>!(t.graphingEnabled()&&t.validActionVariable(s)));return!(r.isError&&r.actionValue)&&o.length&&(r=En(t.sliderVariables(o)).setDependencies(o)),new O.Ticker({handler:r,minStep:pe(e.minStep,t,n,Nc)})}function Kw(e,t,n){let r=i=>{try{let a=au(i,t,n,{coerceToNumber:\"all\"});return a.isError,a}catch(s){return s instanceof M?s:V(s)}},o={xmin:r(e.bounds.xmin),xmax:r(e.bounds.xmax),ymin:r(e.bounds.ymin),ymax:r(e.bounds.ymax)};return e.bounds.zmin&&(o.zmin=r(e.bounds.zmin)),e.bounds.zmax&&(o.zmax=r(e.bounds.zmax)),new xx(o)}function c0(e,t,n){if(!t){n.valids[e]=!0;return}let r=t.getDependencies();if(t.type===\"Error\")n.errors[e]=!0;else if(r.length>0){n.errors[e]=!0;for(let o=0;o<r.length;o++)r[o]===n.exportedSymbol?n.errors.cycle=!0:n.missingVars.push(r[o])}else n.values[e]=+t.asValue();n.valids[e]=n.values[e]!==void 0&&isFinite(n.values[e]),n.valids[e]||(n.values[e]=void 0)}function Yx(e){return e&&e.valueType===Z&&e.type===\"List\"&&e.length===1&&\"args\"in e&&e.args?e.args[0]:e}function kp(e,t,n){let r=au(e._expression,t,n),o=Yx(e.sliderMin&&pe(e.sliderMin,t,n,Nc)),i=Yx(e.sliderMax&&pe(e.sliderMax,t,n,Nc)),s=Yx(e.sliderStep&&pe(e.sliderStep,t,n,Nc)),a={exportedSymbol:e._symbol,errors:{},values:{},valids:{},missingVars:[],errMsg:void 0};if(c0(\"min\",o,a),c0(\"max\",i,a),c0(\"step\",s,a),s&&a.valids.step&&(a.values.step===0?delete a.values.step:a.values.step=Math.abs(a.values.step)),a.errors.cycle?r=rv(a.exportedSymbol):(a.errors.min||!a.valids.min?a.errMsg=ov():a.errors.max||!a.valids.max?a.errMsg=iv():(a.errors.step||!a.valids.step)&&(a.errMsg=av()),a.values.min>a.values.max&&(a.valids.min=!1,a.valids.max=!1,a.errMsg||(a.errMsg=sv()))),r.type===\"IRExpression\"&&r.isConstant){let c=n.initialEvaluation&&n.initialEvaluation.asValue()&&e.sliderIsPlayingOnce,l=a.values.max,p=+r.asValue(),d=a.values.min,m=a.values.step;if(c&&!isFinite(l)){let h=Yx(e.sliderSoftMax&&pe(e.sliderSoftMax,t,n,Nc));h&&(l=jw({storedMax:+h.asValue(),sliderValue:p,step:m,hardMin:d,is3d:t.is3dProduct()}))}let f=Hx({target:p,hardMin:d,hardMax:l,step:m,forceSliderToMax:!!c}),g=fp(f.toString()),y=isFinite(F(g))?g:f;r=au(new Un(y),t,n)}return r.sliderInfo=a,r}function m0(e,t,n){if(!n[e._symbol])throw Wa(e._symbol,t);let r=e.args.map(o=>pe(o,t,n));if(r.length>0){if(r.length===1&&r.push(pe(new O.Constant(1),t,n)),r[1].getDependencies().length)throw _y(e._symbol).setDependencies(r[1].getDependencies());if(r[1].valueType!==x)throw _y(e._symbol);let o=r[1].asValue();if(!isFinite(o)||o<=0)throw _y(e._symbol)}return $x(e,r),new e.constructor(r)}function f0(e,t,n){if(!n[e._symbol])throw Wa(e._symbol,t);let r=e.args.map(o=>au(o,t,n));if($x(e,r),r.length===1&&(r[0].valueType===Z||r[0].valueType===He))return new O.BoxPlot(r);throw V(\"Failed to compile BoxPlot\")}function Ao(e,t,n,r,o){try{return e(t,n,r,o)}catch(i){return i instanceof M?i:V(i)}}function y0(e,t,n){if(!e._symbol||!n[e._symbol])throw Wa(e._symbol,t);let r=e.args.map(o=>au(o,t,n));return $x(e,r),e.copyWithArgs(r)}function g0(e,t,n){var s;let r=[];for(let a of e.columns){let u=eu(a)&&Ka(a.header)?n[a.header._symbol]:void 0;u&&Xu(u)?r.push(u):r.push(Ao(Zx,a,t,n))}let o=1;for(let a of r)sm(a)&&a.isList&&(o=Math.max((s=a.length)!=null?s:0,o));let i=[];for(let a of r)i.push(mY(a,o));return new hx(i,e.calcColumns,e.regression,e.tableFrameID)}function mY(e,t){if(go(e))return e;if(Xu(e))return e;if(sm(e)&&e.isList)return new O.TableColumnValue(e.mapElements(n=>n),void 0);if(e.isTypedConstant){let n=[];for(let r=0;r<t;r++)n.push(e);return new Ku(n,void 0)}else return V(`Invalid column: expected an error, constant, or list but got:\n ${e.repr(\"\",1)}`)}function Zx(e,t,n){var o,i,s,a;let r=e.header.tableError();if(r)throw _v(r);if(e.header instanceof $e){let u=n[e.header._symbol];if(u&&n.hasOwnProperty(e.header._symbol)&&go(u))throw u}if(e.isFreeVariable(n)){if(e.columnIndex===0){let c=e.header._symbol;if(!t.validFirstColumnVariable(c))throw Rv()}let u=[];for(let c=0;c<e.values.length;c++){let l=(i=(o=e.values[c]).tableError)==null?void 0:i.call(o);if(l){u.push(vy(l));continue}let p=pe(e.values[c],t,n),d=(s=p.tableError)==null?void 0:s.call(p);p.isError?u.push(p):d?u.push(vy(d)):p.valueType===x||p.valueType===N?u.push(p):u.push(YC([se(p.valueType)]))}for(let c=0;c<u.length;c++){if(u[c].isError)continue;let l=e.values[c]&&e.values[c].tableError();if(l){u[c]=vy(l);continue}let p=u[c].getDependencies();p.length&&(u[c]=En(p).setDependencies(p))}return new Ku(u,e.header._symbol)}else{let u=pe(e.header,t,n,{coerceToNumber:\"all-except-complex\"});if(!u.isError&&u.valueType!==x&&u.valueType!==Z&&u.valueType!==N&&u.valueType!==Ye&&u.valueType!==He)throw $C([se((a=u.valueType)!=null?a:Nn)]);if(u.getDependencies().length>0)throw En(u.getDependencies()).setDependencies(u.getDependencies());if(u.isError)throw u;return u}}function eL(e,t,n){let r=Gy(n),o=u0(r,e),i=o.def,s,a;i===e.defaultDefinition?(s=t,a=n):(s=r.getPolicyContextForFrame(o.qualifiedName.frameID).policy,a=r.getFrame(o.qualifiedName.frameID));let u=Oc(i,s,a);return u instanceof M&&(u=u.allowExport()),new rm({symbol:e._symbol,moduleID:e.moduleID,importFrom:e.importFrom,resolvedRawNode:i,concrete:u})}function Oc(e,t,n,r={}){try{return fY(e,t,n,r)}catch(o){return o instanceof M?o:V(o)}}function fY(e,t,n,r={}){switch(e.type){case\"IRExpression\":return e;case\"DoubleInequality\":return l0(e,t,n);case\"Error\":return e;case\"Image\":return p0(e,t,n);case\"Ticker\":return d0(e,t,n);case\"Slider\":return kp(e,t,n);case\"Table\":return g0(e,t,n);case\"TableColumn\":return Zx(e,t,n);case\"Histogram\":case\"DotPlot\":return m0(e,t,n);case\"BoxPlot\":return f0(e,t,n);case\"Stats\":return y0(e,t,n);case\"Regression\":case\"Placeholder\":throw new Error(\"Unexpected placeholder or regression\")}return au(e,t,n,r)}var tL={segment:!0,ray:!0,vector:!0,line:!0,circle:!0,arc:!0,polygon:!0,glider:!0,midpoint:!0,intersection:!0,strictintersection:!0,perpendicular:!0,parallel:!0,translate:!0,rotate:!0,dilate:!0,reflect:!0,apply:!0,segments:!0,vertices:!0,angle:!0,angles:!0,directedangle:!0,directedangles:!0,clockwise:!0,counterclockwise:!0,reflex:!0,start:!0,end:!0,anglebisector:!0};function cu(e){switch(e.type){case\"simple\":return;case\"list-access\":return e.listIndex;case\"polygon-edge\":return cu(e.polygon);case\"arbitrary-expression\":return;default:throw new Error(`Unexpected parent type: ${e.type}`)}}function ec(e){switch(e.type){case\"simple\":case\"list-access\":return e.identifier;case\"polygon-edge\":return ec(e.polygon);default:throw new Error(`Unexpected parent type: ${e.type}`)}}var qm={simple:e=>({type:\"simple\",identifier:e}),listAccess:(e,t)=>({type:\"list-access\",identifier:e,listIndex:t}),polygonEdge:(e,t)=>({type:\"polygon-edge\",polygon:{type:\"simple\",identifier:e},edgeIndex:t}),polygonListItemEdge:(e,t)=>({type:\"polygon-edge\",polygon:{type:\"list-access\",identifier:e,listIndex:t.listIndex},edgeIndex:t.edgeIndex}),arbitraryExpression:e=>({type:\"arbitrary-expression\",latex:e.getInputString()})};function yY(e){return e!==void 0&&e in tL}function tg(e){return yY(e)?e===\"rotate\"||e===\"dilate\"||e===\"translate\"||e===\"reflect\"?!0:!1:!1}function Xx(e){if(e instanceof ru&&e.list instanceof $e&&e.index instanceof $n)return qm.listAccess(e.list._symbol,e.index.asValue());if(e instanceof ru&&e.list instanceof ai&&e.index instanceof $n){let t=e.list.args[0],n=e.list.args[1];if(t instanceof $e&&n instanceof $e&&n._symbol===\"segments\")return qm.polygonEdge(t._symbol,e.index.asValue());if(t instanceof ru&&t.list instanceof $e&&t.index instanceof $n)return qm.polygonListItemEdge(t.list._symbol,{listIndex:t.index.asValue(),edgeIndex:e.index.asValue()})}return e.type===\"Identifier\"?qm.simple(e._symbol):qm.arbitraryExpression(e)}function Wx(e){let t={},n=e;if((n instanceof Bn||n instanceof Fr)&&(t.identifier=n._symbol,n=n._expression),n instanceof ru&&n.index instanceof $n&&(t.listAccess=n.index.asValue(),n=n.list),n instanceof On){let r=n._symbol,o=n.args[0]instanceof $e?n.args[0]._symbol:void 0;if(tg(r)&&e instanceof Fr&&o&&e._argSymbols.some(i=>i===o))t.tree={symbol:r,parents:n.args.slice(1).map(Xx)};else if(tL[r])t.tree={symbol:r,parents:n.args.map(Xx)};else{let i=qm.simple(n._symbol);t.tree={symbol:\"apply\",parents:[i,...n.args.map(Xx)]}}}else if(n instanceof ai){let r=n.args.map(Xx);r.length===2&&r[1]&&r[1].type===\"simple\"&&r[1].identifier===\"segments\"?t.tree={symbol:\"segments\",parents:[r[0]]}:r.length===2&&r[1]&&r[1].type===\"simple\"&&r[1].identifier===\"start\"?t.tree={symbol:\"start\",parents:[r[0]]}:r.length===2&&r[1]&&r[1].type===\"simple\"&&r[1].identifier===\"end\"&&(t.tree={symbol:\"end\",parents:[r[0]]})}return t}function oL(e,t,n,r,o){let i=ae(n,Te)||ae(n,ue),s=ae(o,Te)||ae(o,ue);if(!i&&!s)return;let a=rL(e,t,n),u=rL(e,r,o),c=a.filter(l=>{let p=ec(l);return p?u.some(d=>ei(l,d))&&!!e.lookup(p):!1});for(let l of a)nL(e,l,r)&&c.every(p=>!ei(l,p))&&c.push(l);for(let l of u)nL(e,l,t)&&c.every(p=>!ei(l,p))&&c.push(l);if(c.length===1)return c[0]}function nL(e,t,n){let r=ec(t),o=r!==void 0?e.lookup(r):void 0,i=o&&e.getGeometryTree(o);return((i==null?void 0:i.symbol)===\"glider\"||(i==null?void 0:i.symbol)===\"intersection\"||(i==null?void 0:i.symbol)===\"strictintersection\"||(i==null?void 0:i.symbol)===\"midpoint\")&&(i==null?void 0:i.parents.some(s=>{if(s.type===\"arbitrary-expression\")return!1;let a=ec(s);return a&&e.resolvesTo(a,n)&&(cu(t)===void 0||cu(s)===void 0||cu(s)===cu(t))}))}function rL(e,t,n){var i;let r=[],o=((i=e.getGeometryTree(t))==null?void 0:i.parents)||[];for(let s=0;s<o.length;s++){let a=o[s];if(ae(n,Te)&&s===0||a.type===\"arbitrary-expression\"||a.type===\"polygon-edge\")continue;let u=ec(a);if(!u)continue;let c=e.lookup(u);c&&e.isPointOrListOfPoints(c)&&r.push(a)}return r}function Um(e){if(e.length===0)return He;if(e.includes(N))return Ye;let t=e[0];if(t!==x&&lr(t,x))for(let n of e){let r=Qc(t,n);r!==void 0&&(t=r)}return er(t)?Zn(t):ar}function iL(e){let t=[];for(let n of e)n!==He&&t.push(tr(n));return Um(t)}var jx=class e{constructor(t,n,r){this.startIP=t;this.endIP=n;this.arr=r}static newFromRange(t,n){return new e(t,n,new Uint16Array(n-t+1))}clone(){return new e(this.startIP,this.endIP,this.arr.slice())}translateAddr(t){if(t<this.startIP||t>this.endIP)throw new Error(`get(${t}) out of range for IPMapArray(${this.startIP}, ${this.endIP}).`);return t-this.startIP}get(t){return this.arr[this.translateAddr(t)]}set(t,n){this.arr[this.translateAddr(t)]=n}};var ho=class e{constructor(t,n,r,o=t,i){this.oldChunk=t;this.oldStart=n;this.oldEnd=r;this.newChunk=o;if(r<n)throw new Error(\"End before start in ChunkCopyContext.\");this.oldIPtoNewIP=i!=null?i:jx.newFromRange(n,r)}clone(){return new e(this.oldChunk,this.oldStart,this.oldEnd,this.newChunk,this.oldIPtoNewIP.clone())}copyUntilEnd(t){for(let n=this.oldStart;n<=this.oldEnd;n++){let r=this.oldChunk.getInstruction(n),o=t(this.newChunk,r,n,this.oldChunk);this.markMappedIndex(n,o)}}markMappedIndex(t,n){this.oldIPtoNewIP.set(t,n)}mapIndex(t){return t<this.oldStart?t:this.oldIPtoNewIP.get(t)}mapArgs(t){let n=[];for(let r of t)n.push(this.mapIndex(r));return n}copyLeafOrFunctionHeader(t){if(mw(t)){let n=this.newChunk.FunctionHeader(t.symbol,t.valueType,t.signature,t.parameterSymbols);return this.functionHeaderCopied(t,n),n}else return this.newChunk.copyLeafInstruction(t)}functionHeaderCopied(t,n){var i;(i=this.unpatchedHeaderMap)!=null||(this.unpatchedHeaderMap=new Map);let r=t.recursionGroup[0],o=this.unpatchedHeaderMap.get(r);if(o===void 0&&(o=[],this.unpatchedHeaderMap.set(r,o)),o.push(n),o.length===t.recursionGroup.length){this.unpatchedHeaderMap.delete(r);for(let s of o)this.newChunk.getInstruction(s).recursionGroup=o}}};function io(e,t){let n=e.getInstruction(t);if(n.type!==48)return t;let r=n.args[0],o=e.getInstruction(r),i=o.args[0],s=!1;for(let c=i+1;c<r;c++){let l=e.getInstruction(c);if(l.type===40&&l.args[1]===i){s=!0;break}}if(!s)return t;let a=r+o.args.length-1,u=new ho(e,i,a);return u.copyUntilEnd((c,l)=>{if(me(l)){let p=u.mapArgs(l.args);return l.type===40?c.InboundsListAccess(p):c.copyInstructionWithArgs(l,p)}else return u.copyLeafOrFunctionHeader(l)}),e.getReturnIndex()}function lu(e,t,n){let r=Vn(e,t);if(r===void 0)throw new Error(`${n}\nNon-constant instruction: \"${Np(e,Mr(e,t))}\"`);return r}function h0(){return{cachedLengths:{},visitedFunctions:new Set}}function Vn(e,t,n){let r=Hp(e,t,n!=null?n:h0());if(!(r<0))return r}function Hp(e,t,n){var a;let{cachedLengths:r}=n,o=r[t];if(o)return o;let i=e.getInstruction(t),s;switch(i.type){case 38:s=i.args.length;break;case 1:s=i.value.length;break;case 48:{s=(a=i.constantLength)!=null?a:-1;break}}return s===void 0&&(s=gY(e,i,n)),r[t]=s,s}function gY(e,t,n){let{visitedFunctions:r}=n;switch(t.type){case 33:{let o=Hp(e,t.args[1],n),i=Hp(e,t.args[2],n);return o===i?o:-1}case 37:switch(t.symbol){case\"elementsAt\":return Hp(e,t.args[1],n);case\"sortPerm\":case\"complexSortPerm\":return Hp(e,t.args[0],n);case\"shuffle\":return Hp(e,t.args[1],n);default:return-1}case 55:{if(r.has(t.args[0]))return-1;r.add(t.args[0]);let o=e.dereferenceFunctionHeader(t.args[0]);if(o!==void 0){let i=e.getInstruction(o);return Hp(e,i.args[1],n)}return-1}default:{if(W(t.valueType))return-1;throw new Error(`Programming Error: cannot find the list length of ${_o(t.type)} ${se(t.valueType)}.`)}}}function Mr(e,t){let n=e.getInstruction(t);if(!W(n.valueType))throw new Error(`Programming Error: cannot find the list length of ${e.printInstruction(t)}`);switch(n.type){case 38:return e.ColdConstant(n.args.length);case 1:return e.Constant(n.value.length,n.mobility);case 48:{let r=e.getInstruction(n.args[0]);return e.getInstruction(r.args[0]).args[0]}case 37:switch(n.symbol){case\"elementsAt\":return Mr(e,n.args[1]);case\"sortPerm\":case\"complexSortPerm\":return Mr(e,n.args[0]);case\"shuffle\":return Mr(e,n.args[1])}}return e.NativeFunction(\"count\",[t])}function zm(e,t){let n=[];for(let s of t)W(e.getInstruction(s).valueType)&&n.push(s);if(n.length===0)return;if(n.length===1)return Mr(e,n[0]);let r=[];for(let s of n)r.push(Vn(e,s));let o,i=1/0;for(let s=0;s<r.length;s++){let a=n[s],u=r[s];if(u===void 0)return e.NativeFunction(\"listMin\",[e.List(n.map(c=>Mr(e,c)))]);u<i&&(o=a,i=u)}return o!==void 0?Mr(e,o):e.ColdConstant(i)}var ng=[Hr(x),Hr(x)],b0=[...rs([[Se,Se],[N,N],[D,x],[x,D],[x,Pe],[x,ke],[Pe,x],[ke,x],[G,x],[x,G],[un,Jf],[Jf,un]]),Ot([un,Qf]),Ot([Qf,un])],x0={Negative:rs([[Se],[N],[D],[Pe],[ke],[G]]),Add:rs([[Se,Se],[N,N],[D,D],[Pe,Pe],[ke,ke],[G,G]]),Subtract:rs([[Se,Se],[N,N],[D,D],[Pe,Pe],[ke,ke],[G,G]]),Multiply:b0,DotMultiply:[...rs([[Pe,Pe],[ke,ke],[G,G]]),...b0],CrossMultiply:[...rs([[ke,ke],[G,G]]),...rs([[Se,Se],[N,N],[D,x],[x,D],[Pe,x],[x,Pe],[ke,x],[x,ke],[un,Jf],[Jf,un]]),Ot([un,Qf]),Ot([Qf,un])],Divide:rs([[Se,Se],[N,N],[D,x],[Pe,x],[ke,x],[G,x]]),Exponent:rs([[Se,Se],[N,N]]),\"Comparator['=']\":[Ot(ng)],\"Comparator['>']\":[Ot(ng)],\"Comparator['<']\":[Ot(ng)],\"Comparator['>=']\":[Ot(ng)],\"Comparator['<=']\":[Ot(ng)],ComparatorChain:rs([{type:\"variadic\",initial:[x,x],rest:x}]),PercentOf:b0,Norm:rs([[x],[D],[G],[Pe],[ke],[he],[zt]]),ListAccess:[Ot([Ki,Hr(Cr.of([Oe,x]))])],Integral:rs([[x,x,Cr.of(Md,{coerceComplexToReal:!1})]])};function rs(e){return e.map(t=>U(t))}function Jx(e,t,n){if(t instanceof ns){let r=n.filter(i=>i!==void 0);if(r.length===0)return;let o=Um(r);return W(o)&&o!==ar?vl([Ot({type:\"variadic\",initial:[],rest:rt(o)})],n):[]}else if(t instanceof On||t instanceof ai){let r=t instanceof ai?t.args[1]._symbol:t._symbol;if(!r)return;let o=qy(e,r);return o?vl(o,n):void 0}else if(t instanceof No){let[r,o,i]=n,s=o!==void 0&&i!==void 0?Ic(o,i):void 0;!s&&i===x&&t.args[2]instanceof $n&&t.args[2].isNaN()&&(i=void 0);let a;if(s!==void 0)a=s;else if(o!==void 0)a=o;else if(i!==void 0)a=i;else return;a=tr(a);let u=er(a)?Hr(a):a;return vl([Ot([Hr(Oe),u,u])],[n[0],o,i])}else if(t instanceof Tl){let r=[...x0.DotMultiply,U([D,D])];return vl(r,n)}else if(t instanceof Hs){let r=[Ot({type:\"variadic\",initial:[St],rest:St}),U([x,x]),U([x,x,x])];return vl(r,n)}else if(t instanceof bl){let r=[Ot({type:\"variadic\",initial:[St],rest:St})],o=n.filter(i=>i!==void 0&&i!==x);if(o.length>0){let i=Um(o);W(i)&&i!==ar&&r.push(Ot({type:\"variadic\",initial:[],rest:rt(i)}))}return vl(r,n)}else if(t instanceof su){let r=t.symbol,o;switch(r){case\"x\":case\"y\":o=rs([[D],[G]]);break;case\"z\":o=rs([[G]]);break;case\"p\":o=rs([[yn],[gn],[Hn],[kn],...Dh.map(i=>[i])]);break;default:{let i=r;throw new Error(`Programming Error: unexpected named coordinate: '${i}'.`)}}return vl(o,n)}else if(t.type in x0&&n.some(r=>r!==void 0)){let r=x0[t.type];return r?vl(r,n):void 0}}function vl(e,t){return e.filter(n=>n.matches(t))}function aL(e,t,n,r){if(!cL(e,n,r))return;let o=t.type;switch(o){case\"Comparator['>']\":case\"Comparator['<']\":case\"Comparator['>=']\":case\"Comparator['<=']\":{e.setWarning(P(\"shared-calculator-error-complex-operation-undefined\",{symbol:Y(t.operator)}));break}case\"ComparatorChain\":{let[i]=t.symbols;if(i===void 0||i===\"=\")break;e.setWarning(P(\"shared-calculator-error-complex-operation-undefined\",{symbol:Y(i)}));break}case\"ParenSeq\":e.setWarning(P(\"shared-calculator-error-complex-point-coordinate\"));break;case\"Integral\":switch(lL(e,n,r)){case 0:e.setWarning(P(\"shared-calculator-error-integral-lower-bound-type-error\",{symbol:se(e.getInstruction(n[0]).valueType)}));break;case 1:e.setWarning(P(\"shared-calculator-error-integral-upper-bound-type-error\",{symbol:se(e.getInstruction(n[1]).valueType)}));break;default:break}break;case\"ListAccess\":e.setWarning(P(\"shared-calculator-error-complex-list-access\"));break;case\"CrossMultiply\":case\"DotMultiply\":case\"Multiply\":case\"PercentOf\":if(n.length!==2)break;e.setWarning(P(\"shared-calculator-error-multiply-type-error\",sL(e,n)));break;case\"Divide\":if(n.length!==2)break;e.setWarning(P(\"shared-calculator-error-divide-type-error\",sL(e,n)));break;case\"Sum\":case\"Product\":case\"Range\":break;case\"DotAccess\":case\"FunctionCall\":case\"SeededFunctionCall\":break;case\"Comparator['=']\":case\"Add\":case\"Subtract\":case\"Exponent\":case\"Negative\":case\"Or\":case\"Piecewise\":case\"Restriction\":case\"List\":case\"TableColumnValue\":case\"Norm\":case\"BareSeq\":case\"NamedCoordinateAccess\":case\"Ans\":case\"Constant\":case\"ImaginaryUnit\":case\"Assignment\":case\"RecursiveFunctionBaseCase\":case\"MixedNumber\":case\"Identifier\":case\"AssignmentImport\":case\"Construction\":case\"ListComprehension\":case\"FunctionExponent\":case\"FunctionFactorial\":case\"Prime\":case\"Derivative\":case\"UpdateRule\":case\"Substitution\":case\"FunctionDefinition\":case\"Slider\":case\"RegressionParameter\":case\"Seed\":case\"ExtendSeed\":case\"Placeholder\":break;default:}}function uL(e,t,n,r,o){if(t===\"sort\"){let i;if(r.length===1)i=r[0];else if(r.length===2)i=r[1];else return;pL(e.getInstruction(i))&&e.setWarning(P(\"shared-calculator-error-complex-sort\",{symbol:Y(n)}));return}if(cL(e,r,o))switch(t){case\"factorial\":case\"erf\":case\"nCr\":case\"nPr\":e.setWarning(P(\"shared-calculator-error-complex-operation-unimplemented\",{symbol:Y(n)}));break;case\"round\":e.setWarning(P(\"shared-calculator-error-complex-round\",{symbol:Y(n)}));break;default:e.setWarning(P(\"shared-calculator-error-complex-operation-undefined\",{symbol:Y(n)}));break}}function cL(e,t,n){return lL(e,t,n)!==-1}function lL(e,t,n){if(n.length===0)return-1;let r=n[0];for(let o=0;o<t.length;o++){let i=t[o],s=r.argTypeAtIndex(o);if(!(s===x||s===Z||typeof s==\"object\"&&s.coerceComplexToReal))continue;let u=e.getInstruction(i);if(pL(u))return o}return-1}function pL(e){if(e.type!==1)return!1;switch(e.valueType){case N:return F(e.value[1])!==0;case Ye:return e.value.some(t=>F(t[1])!==0);default:return!1}}function sL(e,t){let n=e.getInstruction(t[0]),r=e.getInstruction(t[1]);return{symbol1:se(n.valueType),symbol2:se(r.valueType)}}function mL(e,t,n,r,o,i){var b,T,I,E;if(n=px(t,n),!Op(n)&&!em(n)||tg(n))return;let s,a=!1,u=!1,c=0,l=[],p=[],d=o.map(S=>e.getInstruction(S).valueType),m=Op(n)?Ja[n]:void 0;if(m&&(a=m.isSeeded,s=void 0,l.push(...m.getSignatures(t)),c=(T=(b=m.defaultArguments)==null?void 0:b.length)!=null?T:0,p=Qx(l,d,c),u=m.allowDotCall),p.length===0&&(m!=null&&m.fallthroughUnlessDistribution)&&d.length>0&&ae(d[0],wn))l=l.filter(S=>{let C=S.argTypeAtIndex(0);return C===void 0?!1:dp(wn,C)}),p=[];else if(em(n)&&p.length===0){let S=ur[n];s=S.tag,l.push(...$M(n)),c=(E=(I=S.defaultArguments)==null?void 0:I.length)!=null?E:0,p=Qx(l,d,c),u=u||S.allowDotCall}let f=Math.min(...l.map(S=>S.minArity)),g=Math.max(...l.map(S=>{var C;return(C=S.maxArity)!=null?C:1/0})),y=o,h=o;if(a&&(h=y=o.slice(1),f-=1,g-=1),i){if(!u)throw hy(r);let S=e.getInstruction(y[0]).valueType;if(!W(S)&&S!==zt&&S!==ke&&S!==wn&&S!==pr&&S!==yn&&S!==gn&&S!==Nt&&S!==kn&&S!==Hn&&!Ni(S)&&(S===D||!Zf(S))&&n!==\"real\"&&n!==\"imag\")throw _C(r,se(S),{blockExport:e.areAllArgsConstant([y[0]])});r=\".\"+r,h=y.slice(1),f-=1,g-=1}if((t.isGeometryEnabled()||t.is3dPolicy())&&n===\"length\"&&h.length===1&&W(e.getInstruction(h[0]).valueType)){let S=t.is3dPolicy()?MC:vC;if(p.length===0)throw S(r,pu(e,h)[0],{blockExport:e.areAllArgsConstant(h)});if(h.length===1&&e.getInstruction(h[0]).valueType===He)throw S(r,pu(e,h)[0],{blockExport:e.areAllArgsConstant(h)})}if(p.length>0){uL(e,n,r,o,p);return}throw T0(e,{symbol:n,errorSymbol:r,providedArgs:h,argsWithoutSeed:y,isDotCall:i,minArity:f,maxArity:g,defaultArgumentCount:c,builtInTag:s,signatures:l})}function T0(e,{symbol:t,errorSymbol:n,providedArgs:r,argsWithoutSeed:o,isDotCall:i,minArity:s,maxArity:a,defaultArgumentCount:u,builtInTag:c,signatures:l}){if(c===\"doubleReducer\"&&r.length===2){if(!W(e.getInstruction(r[0]).valueType)||!W(e.getInstruction(r[1]).valueType))throw Ov(n,{blockExport:e.areAllArgsConstant(r)})}else if(c===\"parameterizedReducer\"&&!i&&r.length===2&&!W(e.getInstruction(r[0]).valueType))throw Av(n,{blockExport:e.areAllArgsConstant([r[0]])});if(t===\"logbase\"&&r.length!==2)return Xa(\"log\",1,r.length-1,{includeUsageExample:!0});if(t===\"random\")return TE();if(r.length<s||r.length>a){let{dotMinArityExampleArgs:g,dotMaxArityExampleArgs:y,minArityExampleArgs:h,maxArityExampleArgs:b}=hY(t),T,I;if(r.length<s?(I=s-u,i&&g?T=n+g:h&&(T=n+h)):(I=a,i&&y?T=n+y:b&&(T=n+b)),i&&(c===\"parameterizedReducer\"||t===\"pdf\"||t===\"cdf\"))return Xa(n,I,r.length,{includeUsageExample:!0,usageExample:T});if(c===\"reducer\"&&r.length===0)return vE(n);if(c===\"doubleReducer\")return EE(n);if(c===\"parameterizedReducer\")return CE(n);if(c===\"color\")return PE(n);if(Op(t))switch(t){case\"pdf\":return hE();case\"cdf\":return r.length<s?bE():xE();case\"tdist\":case\"length\":case\"round\":case\"floor\":case\"ceil\":case\"abs\":case\"sign\":case\"mod\":case\"gcd\":case\"lcm\":case\"min\":case\"max\":case\"midpoint\":case\"segment\":case\"vector\":case\"sphere\":case\"distance\":case\"circle\":case\"center\":case\"radius\":case\"glider\":case\"intersection\":case\"strictintersection\":case\"parallel\":case\"perpendicular\":case\"anglebisector\":case\"start\":case\"end\":case\"angle\":case\"directedangle\":case\"angles\":case\"directedangles\":case\"apply\":case\"translate\":case\"reflect\":case\"dilate\":case\"rotate\":case\"normaldist\":case\"poissondist\":case\"geodist\":case\"binomialdist\":case\"uniformdist\":case\"chisqdist\":case\"total\":case\"mean\":case\"median\":case\"stdev\":case\"stdevp\":case\"var\":case\"varp\":case\"covp\":case\"cov\":case\"corr\":case\"mad\":case\"quantile\":case\"sort\":case\"shuffle\":case\"join\":case\"unique\":case\"polygon\":case\"coterminal\":case\"coerceToReal\":case\"real\":case\"imag\":case\"conj\":case\"exp\":case\"sin\":case\"cos\":case\"tan\":case\"sinh\":case\"cosh\":case\"tanh\":case\"sec\":case\"csc\":case\"cot\":case\"sech\":case\"csch\":case\"coth\":case\"arccot\":case\"arcsinh\":case\"arccsch\":case\"arctan\":case\"nthroot\":case\"ztest\":case\"zproptest\":case\"ttest\":case\"null\":case\"chisqtest\":case\"chisqgof\":case\"score\":case\"conf\":case\"dof\":case\"estimate\":case\"stderr\":case\"pleft\":case\"pright\":case\"lower\":case\"upper\":case\"complexNthRoot\":return dL(n,I,l,r.map(S=>e.getInstruction(S).valueType),T);case\"points\":case\"lines\":case\"circles\":case\"polygons\":case\"rays\":case\"vectors\":case\"arcs\":throw Vi(n);case\"histogram\":case\"dotplot\":case\"boxplot\":case\"stats\":case\"det\":case\"inv\":case\"transpose\":case\"rref\":case\"trace\":throw V(`Unexpected arity error for ${t}`);default:let E=t;throw new Error(`Unexpected compiler function ${E}`)}return dL(n,I,l,r.map(E=>e.getInstruction(E).valueType),T)}if(t===\"polygon\"&&r.length===2&&e.getInstruction(r[0]).valueType===x&&e.getInstruction(r[1]).valueType===x)return Iy();let p=[],d=[];for(let g=0;g<o.length;g++){let y=o[g],h=c!==void 0&&c!==\"doubleReducer\"&&c!==\"never-broadcast\"&&!(c===\"parameterizedReducer\"&&g===0)&&t!==\"polygon\",b=e.getInstruction(y).valueType;W(b)&&h&&(b=rt(b)),p.push(b),d.push(se(b))}let m=e.areAllArgsConstant(o),f=fL(t);if(f&&!yL(t,l,p)){let g=new M(f);return m?g:g.allowExport()}return ts(n,d,{blockExport:m})}function dL(e,t,n,r,o){let i=fL(e);return i&&!yL(e,n,r)?new M(i):Xa(e,t,r.length,{includeUsageExample:!i,usageExample:o})}function hY(e){return Op(e)?Ja[e]:em(e)?ur[e]:{}}function Qx(e,t,n){return e.filter(r=>r.matches(t)&&t.length+n>=r.minArity)}function fL(e){switch(e){case\"midpoint\":return P(\"shared-calculator-error-required-arguments-midpoint\");case\"intersection\":return P(\"shared-calculator-error-required-arguments-intersection\");case\"segment\":case\"line\":case\"ray\":case\"distance\":return P(\"shared-calculator-error-required-arguments-points\",{symbol:e,count:2});case\"parallel\":case\"perpendicular\":return P(\"shared-calculator-error-required-arguments-perpendicular\",{symbol:e});case\"circle\":return P(\"shared-calculator-error-required-arguments-circle\");case\"arc\":case\"angle\":case\"directedangle\":return P(\"shared-calculator-error-required-arguments-points\",{symbol:e,count:3});case\"triangle\":return P(\"shared-calculator-error-required-arguments-triangle\");case\"polygon\":return P(\"shared-calculator-error-required-arguments-polygon\");case\"glider\":return P(\"shared-calculator-error-required-arguments-glider\");case\"vector\":return P(\"shared-calculator-error-required-arguments-vector\");case\"length\":return P(\"shared-calculator-error-required-arguments-length\");case\"area\":case\"perimeter\":case\"vertices\":case\"angles\":case\"directedangles\":case\"segments\":return P(\"shared-calculator-error-required-arguments-area\",{symbol:e});case\"radius\":case\"center\":return P(\"shared-calculator-error-required-arguments-radius\",{symbol:e});case\"anglebisector\":case\"coterminal\":return P(\"shared-calculator-error-required-arguments-coterminal\",{symbol:e});case\"supplement\":return P(\"shared-calculator-error-required-arguments-supplement\");case\"start\":case\"end\":return P(\"shared-calculator-error-required-arguments-start\",{symbol:e});case\"dilate\":case\"rotate\":return P(\"shared-calculator-error-required-arguments-dilate\",{symbol:e});case\"reflect\":return P(\"shared-calculator-error-required-arguments-reflect\");case\"translate\":return P(\"shared-calculator-error-required-arguments-translate\");case\"sphere\":return P(\"shared-calculator-error-required-arguments-sphere\")}}function yL(e,t,n){return e===\"polygon\"&&(t=t.filter(o=>o.maxArity!==1)),t.some(o=>o.maxArity===0||n.length<o.minArity?!1:n.every((i,s)=>{let a=o.argTypeAtIndex(s);return a===void 0?!0:wh(i,a)}))}function pu(e,t){let n=[];for(let r of t)n.push(se(e.getInstruction(r).valueType));return n}function Ml(e,t){let n=[];for(let r of t){let o=e.getInstruction(r).valueType,i=tr(o);n.push(se(i))}return n}function gt(e,t,n){return ae(e.getInstruction(t).valueType,n)}function du(e,t,n,r){var l,p;let o=n.type;if(o===\"FunctionCall\"||o===\"SeededFunctionCall\"||o===\"DotAccess\"){let d,m;if(n instanceof ai&&(n.args[1]instanceof $e||n.args[1]instanceof On))d=n.args[1]._symbol,m=(l=n.args[1]._errorSymbol)!=null?l:d;else if(n instanceof On)d=n._symbol,m=(p=n._errorSymbol)!=null?p:d;else return;if(d===\"polygon\"&&t.polygonUnsupportedPreferTriangle())throw Wb();if(d===\"length\"&&!t.isGeometryEnabled()&&!t.is3dPolicy()&&r.length===0)throw SE();mL(e,t,d,m,r,n instanceof ai);return}let i=r.map(d=>e.getInstruction(d).valueType),s=Jx(t,n,i);if(!s)return;let a=Math.min(...s.map(d=>d.minArity));if(s.length>0&&r.length>=a){aL(e,n,r,s);return}let u=bY(o,i,{specifyPointDimensions:n instanceof su&&n.symbol===\"z\"}),c=e.areAllArgsConstant(r);switch(o){case\"Add\":throw cC(u,{blockExport:c});case\"Subtract\":throw lC(u,{blockExport:c});case\"CrossMultiply\":throw i.length===2&&(ae(i[0],D)&&ae(i[1],D)||ae(i[0],x)&&ae(i[1],G)||ae(i[0],G)&&ae(i[1],x))?pC(u,{blockExport:c}):yy(u,{blockExport:c});case\"DotMultiply\":throw yy(u,{blockExport:c});case\"Multiply\":{if(t.is3dProduct()&&i.length===2){if(ae(i[0],G)&&ae(i[1],G))throw mC(u,{blockExport:c});if(ae(i[0],D)&&ae(i[1],D))throw dC(u,{blockExport:c})}throw yy(u,{blockExport:c})}case\"Divide\":throw fC(u,{blockExport:c});case\"Exponent\":throw yC(u,{blockExport:c});case\"Negative\":throw gC(u,{blockExport:c});case\"Comparator['=']\":case\"Comparator['>']\":case\"Comparator['<']\":case\"Comparator['>=']\":case\"Comparator['<=']\":case\"ComparatorChain\":throw xC(u,{blockExport:c});case\"Or\":throw IC(u,{blockExport:c});case\"Piecewise\":throw ae(i[0],Oe)?HC([se(e.getInstruction(r[1]).valueType),se(e.getInstruction(r[2]).valueType)],{blockExport:e.areAllArgsConstant([r[1],r[2]])}):Sb(u,{blockExport:e.areAllArgsConstant([r[0]])});case\"Restriction\":throw Sb(u,{blockExport:c});case\"List\":case\"TableColumnValue\":{gL(e,r);break}case\"ListAccess\":throw gy(u,{blockExport:c});case\"Norm\":throw ts(\"abs\",u,{blockExport:c});case\"ParenSeq\":{let d=i.indexOf(St)!==-1,m=i.some(g=>g!==St);if(d&&m)throw Eb([se(i[0]),se(i[1])],{blockExport:c});if(i.length!==2&&i.length!==3){let g=t.is3dPolicy()?3:2;throw RE(g)}let f=i.find(g=>!ae(g,x));throw f!==void 0?PC(se(f),{blockExport:c}):V(\"Unexpected error type checking ParenSeq\")}case\"BareSeq\":{if(i.length===0)throw Py();if(i.length===1)throw V(\"Length-1 BareSeq is impossible\");let d=i[0],m=i.find(f=>f!==d);if(m)throw Eb([se(d),se(m)],{blockExport:c});if(d===x)throw r.length===2?ME():_E();gL(e,r);break}case\"NamedCoordinateAccess\":throw SC(u,\".\"+n.symbol,{blockExport:c});case\"Integral\":{let[d,m,f]=i,g=tr(d),y=tr(m);throw lr(g,x)?lr(y,x)?BC([se(f)],{blockExport:c}):VC([se(m)],{blockExport:c}):FC([se(d)],{blockExport:c})}case\"Ans\":case\"Constant\":case\"ImaginaryUnit\":case\"Assignment\":case\"RecursiveFunctionBaseCase\":case\"MixedNumber\":case\"Identifier\":case\"AssignmentImport\":case\"Construction\":case\"Range\":case\"Sum\":case\"Product\":case\"ListComprehension\":case\"FunctionExponent\":case\"FunctionFactorial\":case\"Prime\":case\"Derivative\":case\"UpdateRule\":case\"Substitution\":case\"FunctionDefinition\":case\"Slider\":case\"RegressionParameter\":case\"Seed\":case\"ExtendSeed\":case\"PercentOf\":case\"Placeholder\":return;default:throw new Error(`Unexpected node type: ${o}`)}}function gL(e,t){if(t.length===0)return;let n=e.getInstruction(t[0]).valueType;if(!er(n))throw Ep([se(n)],{blockExport:De(e.getInstruction(t[0]))});let r=e.areAllArgsConstant(t);for(let o of t){let i=e.getInstruction(o).valueType;if(!er(i))throw Ep([se(i)],{blockExport:r});if(i!==n)throw xy({blockExport:r})}}function bY(e,t,n){switch(e){case\"Add\":case\"Subtract\":case\"Multiply\":case\"Divide\":case\"Exponent\":case\"Negative\":case\"Comparator['<']\":case\"Comparator['>']\":case\"Comparator['=']\":case\"Comparator['<=']\":case\"Comparator['>=']\":case\"NamedCoordinateAccess\":return t.map(r=>se(r,n));case\"ComparatorChain\":{for(let r=0;r<t.length;r++)if(!lr(t[r],x)&&!lr(t[r],Z))return r===0?[se(t[r]),se(t[r+1])]:[se(t[r-1]),se(t[r])];return t.map(r=>se(r))}case\"ListAccess\":case\"Constant\":case\"ImaginaryUnit\":case\"MixedNumber\":case\"Identifier\":case\"AssignmentImport\":case\"Ans\":case\"List\":case\"TableColumnValue\":case\"Range\":case\"Construction\":case\"ParenSeq\":case\"BareSeq\":case\"Norm\":case\"Sum\":case\"Product\":case\"Integral\":case\"ListComprehension\":case\"FunctionExponent\":case\"FunctionFactorial\":case\"Prime\":case\"Piecewise\":case\"Restriction\":case\"Derivative\":case\"UpdateRule\":case\"Substitution\":case\"Assignment\":case\"RecursiveFunctionBaseCase\":case\"FunctionDefinition\":case\"Slider\":case\"RegressionParameter\":case\"Seed\":case\"ExtendSeed\":case\"DotMultiply\":case\"CrossMultiply\":case\"Or\":case\"PercentOf\":return t.map(r=>se(r));case\"Placeholder\":throw new Error(\"Unexpected placeholder\");default:throw new Error(`Unexpected node type: ${e}`)}}function hL(e,t){var a;let n=e.getInstruction(t);if(!me(n))return;let r=Ot(I0(e,n).expectedTypes);if(n.type===49){for(let c of n.args){let l=e.getInstruction(c).valueType;if(!ae(l,x)&&!ae(l,N)&&!ae(l,D)&&!ae(l,G)&&!ae(l,fn)&&!ae(l,_e)&&!ae(l,he)&&!ae(l,Ee)&&!ae(l,Ae)&&!ae(l,Pe)&&!ae(l,Te)&&!ae(l,ue)&&!ae(l,Ne)&&!ae(l,pr)&&!ae(l,Ce))throw JC(se(l))}let u=new Lr;for(let c of n.qualifiedNames){if(u.has(c))throw KC(c.symbol);u.add(c)}return}let o=!1;for(let u=0;u<n.args.length;u++){let c=e.getInstruction(n.args[u]).valueType,l=r.argTypeAtIndex(u);if(l===void 0||!dp(c,l)){o=!0;break}}if(!o&&n.args.length>=r.minArity&&n.args.length<=((a=r.maxArity)!=null?a:1/0))return;let i=pu(e,n.args),s=e.areAllArgsConstant(n.args);switch(n.type){case 32:throw TC(i,{blockExport:s});case 22:case 21:case 44:case 31:case 15:case 16:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 56:case 25:case 26:case 27:case 28:case 29:case 38:case 39:case 40:case 41:case 37:case 42:case 33:case 48:case 47:case 23:case 24:case 19:case 20:case 50:case 51:case 53:case 54:case 55:throw V(`Invalid argument types for opcode ${n.type}`);default:{let u=n;throw new Error(`Unexpected opcode: ${u.type}`)}}}function I0(e,t,n=!1){switch(t.type){case 8:case 9:case 10:case 11:return n&&t.args.length>0&&e.getInstruction(t.args[0]).valueType===D?{expectedTypes:[D,D]}:{expectedTypes:[x,x]};case 12:case 13:case 25:case 26:case 27:case 28:case 29:return{expectedTypes:[x,x]};case 14:case 56:return{expectedTypes:[x]};case 31:return{expectedTypes:[Oe,Oe]};case 32:return{expectedTypes:[Oe,Oe]};case 33:return{expectedTypes:[Oe,t.valueType,t.valueType]};case 15:return{expectedTypes:Pc[t.valueType]};case 21:return{expectedTypes:[x,x]};case 22:{let r=e.getInstruction(t.args[1]).valueType;return _d(r)?{expectedTypes:[x,r]}:{expectedTypes:[x,x]}}case 38:{let r=t.valueType,o=rt(r);return{expectedTypes:{type:\"variadic\",initial:[],rest:o}}}case 39:case 40:case 41:return{expectedTypes:[ar,x]};case 37:{let r=t.symbol,o=ur[r],i=o.argumentTypes;return o.tag===\"reducer\"&&!xY(e,t.args)&&Array.isArray(i)&&typeof i[0]==\"number\"&&W(i[0])?{isReducerWithNoListArgs:!0,expectedTypes:{type:\"variadic\",initial:[],rest:rt(i[0])}}:{expectedTypes:i}}case 44:{let r=e.getInstruction(t.args[1]).valueType;return{expectedTypes:[Bt,r]}}case 47:return{expectedTypes:t.args.map(r=>e.getInstruction(r).valueType)};case 23:return{expectedTypes:[x]};case 19:return{expectedTypes:t.args.map(r=>{let o=e.getInstruction(r).valueType;return o===Oe||(t.callData.type===\"sum\"?_d(o):zP(o))?o:x})};case 50:{let r=t.callData.parameterSymbols.length,o=[];for(let i=0;i<r;i++)o.push(x,x);return{expectedTypes:o}}case 24:case 20:case 51:{let r=[x];for(let o=1;o<t.args.length;o++)r.push(e.getInstruction(t.args[o]).valueType);return{expectedTypes:r}}case 42:return{expectedTypes:t.args.map(()=>x)};case 48:case 49:return{expectedTypes:t.args.map(r=>e.getInstruction(r).valueType)};case 53:return{expectedTypes:[t.valueType]};case 54:return{expectedTypes:t.args.map(r=>e.getInstruction(r).valueType)};case 55:return{expectedTypes:t.args.map(r=>e.getInstruction(r).valueType)};case 16:return{expectedTypes:[UP]};default:{let r=t;throw new Error(`Unexpected opcode: ${r.type}`)}}}function xY(e,t){for(let n of t)if(W(e.getInstruction(n).valueType))return!0;return!1}var Kx=(e,t,n,r)=>{let o=[],i=!0,s=0;for(let h of t){let b=e.getInstruction(h);De(b)?s=Ir(s,b.mobility):i=!1;let T=b.valueType;if(T!==He)if(W(T))o.push({isList:!0,index:h,elementType:rt(T)});else if(er(T))o.push({isList:!1,index:h,elementType:T});else throw ts(n,pu(e,r),{blockExport:e.areAllArgsConstant(t)})}if(o.length===0)return e.ConstantOfType(He,[],s);for(let h of o)if(h.elementType!==o[0].elementType)throw ts(n,pu(e,r),{blockExport:e.areAllArgsConstant(t)});if(i){let h=[];for(let b of o){let T=e.getInstruction(io(e,b.index));pw(T),b.isList?h.push(...T.value):h.push(T.value)}return e.ConstantOfType(Zn(o[0].elementType),h,s)}let a=e.ColdConstant(0),u=e.ColdConstant(1),c={};for(let h of o)h.isList&&c[h.index]===void 0&&(c[h.index]=Mr(e,h.index));let l=e.NativeFunction(\"total\",o.map(h=>h.isList?c[h.index]:u)),p=e.BeginBroadcast([l]),d=a,m=[],f=[];for(let h of o){let b=h.isList?e.ListAccess([h.index,e.Subtract([p,d])]):h.index;if(f.push(b),h!==o[o.length-1]){let T=h.isList?c[h.index]:u;d=e.Add([d,T]),m.push(e.LessEqual([p,d]))}}let g=f[f.length-1];for(let h=f.length-2;h>=0;h--)g=e.Piecewise([m[h],f[h],g]);let y=e.EndBroadcast([p,g]);return e.BroadcastResult(Zn(o[0].elementType),[y])};var fa=(e,t,n)=>{var s;let r=e.getInstruction(n).valueType,o=tr(r),i=e.ColdConstant(0);return e.Piecewise([e.And([e.GreaterEqual([t.count,i]),e.GreaterEqual([(s=t.stdev)!=null?s:i,i])]),n,e.NanOfType(o,0)])},km=(e,t,n)=>{let r=e.getInstruction(n).valueType,o=tr(r),i=e.ColdConstant(0);return e.Piecewise([e.And([e.GreaterEqual([t.count,i]),e.LessEqual([t.successes,t.count])]),n,e.NanOfType(o,0)])},bL=(e,t)=>{let n=e.getInstruction(t).valueType,r=tr(n),o=e.ColdConstant(0),i=e.ColdConstant(1);return e.Piecewise([e.And([e.GreaterEqual([t,o]),e.LessEqual([t,i])]),t,e.NanOfType(r,0)])},eT=(e,t)=>{let n=e.NativeFunction(\"normalcdf\",[e.ColdConstant(-1/0),e.Negative([e.NativeFunction(\"abs\",[t])]),e.ColdConstant(0),e.ColdConstant(1)]),r=e.Subtract([e.ColdConstant(1),n]),o=e.ColdConstant(0),i=e.Piecewise([e.LessEqual([t,o]),n,r]),s=e.Piecewise([e.Greater([t,o]),n,r]);return{p:e.Multiply([e.ColdConstant(2),n]),pleft:i,pright:s}},TY=(e,t,n,r)=>fa(e,t,e.Divide([e.Subtract([t.mean,r]),e.Divide([n,e.NativeFunction(\"sqrt\",[t.count])])])),IY=(e,t,n,r,o,i)=>fa(e,t,fa(e,r,e.Divide([e.Subtract([e.Subtract([t.mean,r.mean]),i]),e.NativeFunction(\"sqrt\",[e.Add([e.Divide([e.Square([n]),t.count]),e.Divide([e.Square([o]),r.count])])])]))),PY=(e,t,n)=>{let r=e.Subtract([e.ColdConstant(1),n]);return km(e,t,e.Divide([e.Subtract([e.Divide([t.successes,t.count]),n]),e.NativeFunction(\"sqrt\",[e.Divide([e.Multiply([n,r]),t.count])])]))},tT=(e,t)=>e.NativeFunction(\"invNorm\",[e.Divide([e.Subtract([e.ColdConstant(1),bL(e,t)]),e.ColdConstant(2)])]),S0=(e,t)=>{let n=e.Divide([t.successes,t.count]),r=e.Subtract([e.ColdConstant(1),n]);return e.NativeFunction(\"sqrt\",[e.Divide([e.Multiply([n,r]),t.count])])},xL=(e,t,n)=>{let r=tT(e,n),o=e.Divide([t.successes,t.count]),i=S0(e,t),s=e.Multiply([r,i]);return km(e,t,e.TupleOfType(Nt,{min:e.Add([o,s]),max:e.Subtract([o,s]),dof:e.NanOfType(x,0),standardError:i}))},C0=(e,t,n)=>{let r=e.Divide([t.successes,t.count]),o=e.Subtract([e.ColdConstant(1),r]),i=e.Divide([n.successes,n.count]),s=e.Subtract([e.ColdConstant(1),i]);return e.NativeFunction(\"sqrt\",[e.Add([e.Divide([e.Multiply([r,o]),t.count]),e.Divide([e.Multiply([i,s]),n.count])])])},TL=(e,t,n,r)=>{let o=tT(e,r),i=e.Divide([t.successes,t.count]),s=e.Divide([n.successes,n.count]),a=C0(e,t,n),u=e.Multiply([o,a]),c=e.Subtract([i,s]);return km(e,t,km(e,n,e.TupleOfType(Nt,{min:e.Add([c,u]),max:e.Subtract([c,u]),dof:e.NanOfType(x,0),standardError:a})))},SY=(e,t,n,r)=>{let o=e.Divide([t.successes,t.count]),i=e.Divide([n.successes,n.count]),s=e.ColdConstant(1),a=e.Divide([e.Add([t.successes,n.successes]),e.Add([t.count,n.count])]),u=e.Subtract([s,a]),c=e.Divide([e.Subtract([e.Subtract([o,i]),r]),e.NativeFunction(\"sqrt\",[e.Multiply([e.Multiply([a,u]),e.Add([e.Divide([s,t.count]),e.Divide([s,n.count])])])])]),l=e.Divide([e.Subtract([e.Subtract([o,i]),r]),e.NativeFunction(\"sqrt\",[e.Add([e.Divide([e.Multiply([o,e.Subtract([s,o])]),t.count]),e.Divide([e.Multiply([i,e.Subtract([s,i])]),n.count])])])]);return km(e,t,km(e,n,e.Piecewise([e.Equal([r,e.ColdConstant(0)]),c,l])))},CY=(e,t,n)=>fa(e,t,e.Divide([e.Subtract([t.mean,n]),e.Divide([t.stdev,e.NativeFunction(\"sqrt\",[t.count])])])),EY=(e,t,n)=>e.Divide([e.Subtract([t.estimate,n]),t.standardError]),E0=(e,t,n)=>e.NativeFunction(\"invT\",[e.Divide([e.Subtract([e.ColdConstant(1),bL(e,t)]),e.ColdConstant(2)]),n]),v0=(e,t)=>e.Divide([t.stdev,e.NativeFunction(\"sqrt\",[t.count])]),IL=(e,t,n)=>{let r=e.Subtract([t.count,e.ColdConstant(1)]),o=E0(e,n,r),i=v0(e,t),s=e.Multiply([o,i]);return fa(e,t,e.TupleOfType(Nt,{min:e.Add([t.mean,s]),max:e.Subtract([t.mean,s]),dof:r,standardError:i}))},PL=(e,{estimate:t,dof:n,standardError:r},o)=>{let i=E0(e,o,n),s=e.Multiply([i,r]);return e.TupleOfType(Nt,{min:e.Add([t,s]),max:e.Subtract([t,s]),standardError:r,dof:n})},M0=(e,t,n)=>e.NativeFunction(\"sqrt\",[e.Add([e.Divide([e.Square([t.stdev]),t.count]),e.Divide([e.Square([n.stdev]),n.count])])]),SL=(e,t,n,r)=>{let o=nT(e,t,n),i=E0(e,r,o),s=M0(e,t,n),a=e.Multiply([i,s]),u=e.Subtract([t.mean,n.mean]);return fa(e,t,fa(e,n,e.TupleOfType(Nt,{min:e.Add([u,a]),max:e.Subtract([u,a]),standardError:s,dof:o})))},_0=(e,t,n)=>e.Divide([t,e.NativeFunction(\"sqrt\",[n])]),CL=(e,t,n,r)=>{let o=tT(e,r),i=_0(e,n,t.count),s=e.Multiply([o,i]);return fa(e,t,e.TupleOfType(Nt,{min:e.Add([t.mean,s]),max:e.Subtract([t.mean,s]),standardError:i,dof:e.NanOfType(x,0)}))},R0=(e,t,n,r,o)=>e.NativeFunction(\"sqrt\",[e.Add([e.Divide([e.Square([t]),n]),e.Divide([e.Square([r]),o])])]),EL=(e,t,n,r,o,i)=>{let s=tT(e,i),a=R0(e,n,t.count,o,r.count),u=e.Multiply([s,a]),c=e.Subtract([t.mean,r.mean]);return fa(e,t,fa(e,r,e.TupleOfType(Nt,{min:e.Add([c,u]),max:e.Subtract([c,u]),standardError:a,dof:e.NanOfType(x,0)})))},vY=(e,t,n,r)=>fa(e,t,fa(e,n,e.Divide([e.Subtract([e.Subtract([t.mean,n.mean]),r]),e.NativeFunction(\"sqrt\",[e.Add([e.Divide([e.Square([t.stdev]),t.count]),e.Divide([e.Square([n.stdev]),n.count])])])]))),P0=(e,t,n)=>{let r=e.NativeFunction(\"tcdf\",[e.ColdConstant(-1/0),e.Negative([e.NativeFunction(\"abs\",[t])]),n,e.ColdConstant(0),e.ColdConstant(1)]),o=e.Subtract([e.ColdConstant(1),r]),i=e.ColdConstant(0),s=e.Piecewise([e.LessEqual([t,i]),r,o]),a=e.Piecewise([e.Greater([t,i]),r,o]);return{p:e.Multiply([e.ColdConstant(2),r]),pleft:s,pright:a}},vL=(e,t,n)=>e.Divide([e.Square([e.Subtract([t,n])]),n]),ML=(e,t,n,r)=>{let o=Vn(e,t[0]);if(o===void 0)throw Fy(n);if(!(o>1))throw rx(n);for(let h=1;h<t.length;h++){let b=Vn(e,t[h]);if(b===void 0)throw Fy(n);if(b!==o)throw nx(n)}let s=e.Constant(o,1),a=Kx(e,t,n,r),u=e.Piecewise([e.Less([a,e.ColdConstant(0)]),e.NanOfType(x,0),a]),c=e.Constant(t.length,1),l=e.Multiply([e.Subtract([s,e.ColdConstant(1)]),e.Subtract([c,e.ColdConstant(1)])]),p=e.NativeFunction(\"total\",[u]),d=e.NativeFunction(\"chisqIndependenceRowTotals\",[u,s,c]),m=e.NativeFunction(\"chisqIndependenceColTotals\",[u,s,c]),f=e.NativeFunction(\"chisqIndependenceExpectedValues\",[d,m]),g=vL(e,u,f),y=e.NativeFunction(\"total\",[g]);return e.TupleOfType(Hn,{p:e.NativeFunction(\"chisqcdf\",[y,e.ColdConstant(1/0),l]),score:y,dof:l,rows:s,columns:c,observed:u,contributions:g,expected:f,rowTotals:d,columnTotals:m,total:p})},D0=(e,t,n,r)=>{let o=Vn(e,t),i=Vn(e,n);if(o===void 0||i===void 0)throw Fy(r);if(!(o>1))throw rx(r);if(o!==i)throw nx(r);let a=e.ColdConstant(0),u=e.Piecewise([e.Less([t,a]),e.NanOfType(x,0),t]),c=e.Piecewise([e.Less([n,a]),e.NanOfType(x,0),n]),l=e.NativeFunction(\"total\",[u]),p=e.NativeFunction(\"total\",[c]),d=e.getInstruction(l),m=e.getInstruction(p);if(d.type===1&&m.type===1&&d.valueType===x&&m.valueType===x){let h=d.value,b=m.value;ln(h)&&ln(b)&&F(h)!==F(b)&&F(b)!==1&&e.setWarning(P(\"shared-calculator-error-rescaled-observed\"))}c=e.Piecewise([e.Equal([l,p]),c,e.Multiply([e.Divide([l,p]),c])]);let f=vL(e,u,c),g=e.NativeFunction(\"total\",[f]),y=e.Subtract([e.NativeFunction(\"count\",[u]),e.ColdConstant(1)]);return e.TupleOfType(kn,{p:e.NativeFunction(\"chisqcdf\",[g,e.ColdConstant(1/0),y]),score:g,observed:u,expected:c,contributions:f,dof:y,total:l})},nT=(e,t,n)=>{let r=e.ColdConstant(2),o=e.ColdConstant(1),i=e.Divide([e.Exponent([t.stdev,r]),t.count]),s=e.Divide([e.Exponent([n.stdev,r]),n.count]),a=e.Subtract([t.count,o]),u=e.Subtract([n.count,o]);return e.Divide([e.Exponent([e.Add([i,s]),r]),e.Add([e.Divide([e.Exponent([i,r]),a]),e.Divide([e.Exponent([s,r]),u])])])},Hm=(e,t)=>{var r,o,i,s,a,u,c;let n=tr(e.getInstruction(t[0]).valueType);if(!Ni(n))throw new Error(`Unexpected arg type ${tt(n)}`);switch(n){case on:{let l={mean:e.NamedSlot(\"mean\",[t[0]]),count:e.NamedSlot(\"count\",[t[0]])},p=e.NamedSlot(\"stdevp\",[t[0]]),d=(r=t[1])!=null?r:e.ColdConstant(0),m=TY(e,l,p,d);return e.TupleOfType(yn,{...eT(e,m),score:m,hypothesis:d})}case Zt:{let l={mean:e.NamedSlot(\"mean1\",[t[0]]),count:e.NamedSlot(\"count1\",[t[0]])},p=e.NamedSlot(\"stdevp1\",[t[0]]),d={mean:e.NamedSlot(\"mean2\",[t[0]]),count:e.NamedSlot(\"count2\",[t[0]])},m=e.NamedSlot(\"stdevp2\",[t[0]]),f=(o=t[1])!=null?o:e.ColdConstant(0),g=IY(e,l,p,d,m,f);return e.TupleOfType(yn,{...eT(e,g),score:g,hypothesis:f})}case cn:{let l={successes:e.NamedSlot(\"successes\",[t[0]]),count:e.NamedSlot(\"count\",[t[0]])},p=(i=t[1])!=null?i:e.ColdConstant(.5),d=PY(e,l,p);return e.TupleOfType(yn,{...eT(e,d),score:d,hypothesis:p})}case Qt:{let l={successes:e.NamedSlot(\"successes1\",[t[0]]),count:e.NamedSlot(\"count1\",[t[0]])},p={successes:e.NamedSlot(\"successes2\",[t[0]]),count:e.NamedSlot(\"count2\",[t[0]])},d=(s=t[1])!=null?s:e.ColdConstant(0),m=SY(e,l,p,d);return e.TupleOfType(yn,{...eT(e,m),score:m,hypothesis:d})}case Jt:{let l={mean:e.NamedSlot(\"mean\",[t[0]]),stdev:e.NamedSlot(\"stdev\",[t[0]]),count:e.NamedSlot(\"count\",[t[0]])},p=(a=t[1])!=null?a:e.ColdConstant(0),d=CY(e,l,p),m=e.NamedSlot(\"dof\",[t[0]]);return e.TupleOfType(gn,{...P0(e,d,m),score:d,hypothesis:p,dof:m})}case Ut:{let l={mean:e.NamedSlot(\"mean1\",[t[0]]),stdev:e.NamedSlot(\"stdev1\",[t[0]]),count:e.NamedSlot(\"count1\",[t[0]])},p={mean:e.NamedSlot(\"mean2\",[t[0]]),stdev:e.NamedSlot(\"stdev2\",[t[0]]),count:e.NamedSlot(\"count2\",[t[0]])},d=(u=t[1])!=null?u:e.ColdConstant(0),m=e.NamedSlot(\"dof\",[t[0]]),f=vY(e,l,p,d);return e.TupleOfType(gn,{hypothesis:d,score:f,...P0(e,f,m),dof:m})}case sn:{let l={estimate:e.NamedSlot(\"pointEstimate\",[t[0]]),standardError:e.NamedSlot(\"standardError\",[t[0]]),dof:e.NamedSlot(\"dof\",[t[0]])},p=(c=t[1])!=null?c:e.ColdConstant(0),d=EY(e,l,p);return e.TupleOfType(gn,{...P0(e,d,l.dof),score:d,hypothesis:p,dof:e.NamedSlot(\"dof\",[t[0]])})}}};function $p(e,t,n){let r=e.getInstruction(t);if(r.type===1)switch(r.valueType){case x:{if(!(F(r.value)>1))throw Zb(n);return}case Z:for(let o of r.value)if(!(F(o)>1))throw Zb(n);return;default:return}}function rT(e){if(jd(e)){let t=rt(e.valueType);return e.value.some(n=>bo({valueType:t,value:n}))}return bo(e)}function bo({value:e,valueType:t}){switch(t){case x:return ri(e);case un:return e;case N:case D:{let[n,r]=e;return ri(n)||ri(r)}case G:{let[n,r,o]=e;return ri(n)||ri(r)||ri(o)}case fn:{let[n,r,o]=e;return ri(n)||ri(r)||ri(o)}case _e:{for(let n of e)if(bo({valueType:D,value:n}))return!0;return!1}case kr:{let[n,r]=e;return bo({valueType:G,value:n})||bo({valueType:x,value:r})}case dr:{let[n,r,o]=e;return bo({valueType:G,value:n})||bo({valueType:G,value:r})||bo({valueType:G,value:o})}case zt:case ke:{let[n,r]=e;return bo({valueType:G,value:n})||bo({valueType:G,value:r})}case he:case Ee:case Ae:case Pe:{let[n,r]=e;return bo({valueType:D,value:n})||bo({valueType:D,value:r})}case Te:{let[n,r]=e;return bo({valueType:D,value:n})||bo({valueType:x,value:r})}case ue:{let[n,r,o]=e;return bo({valueType:D,value:n})||bo({valueType:D,value:r})||bo({valueType:D,value:o})}case Ne:case Ce:{let[n,r,o]=e;return bo({valueType:D,value:n})||bo({valueType:x,value:r})||bo({valueType:x,value:o})}case Nt:case Jt:case Ut:case sn:case on:case Zt:case cn:case Qt:case yn:case gn:return e.some(ri);case kn:case Hn:return e.some(n=>Array.isArray(n)?n.some(ri):ri(n));case St:return Object.keys(e.updateRules).length===0;case Oe:case Bt:case we:return!1;case pr:{let[n,r]=e;return ri(n)||ri(r)}default:throw new Error(\"Type cannot contain a NaN value: \"+se(t)+\".\")}}function _L(e,t,n){let r=e.argNames.indexOf(t);if(r===-1)return 0;let o=wo(e,r,n);return Rn(o,e.getReturnIndex())}function wo(e,t,{allowRestriction:n,allowClosedBlockReferences:r}){return{chunk:e,argIndex:t,orderTable:[],mask:Sl(e,t),allowRestriction:n,allowClosedBlockReferences:r}}function Rn(e,t){let n=e.orderTable[t];if(n!==void 0)return n;let r=MY(e,t);return e.orderTable[t]=r,r}function MY(e,t){let{chunk:n,mask:r,argIndex:o,allowRestriction:i,allowClosedBlockReferences:s}=e;if(!s&&n.isInClosedBlock(t))return 1/0;if(t===o)return 1;if(!r[t])return 0;let a=n.getInstruction(t);if(Zr(a)||mo(a))return 1/0;switch(a.type){case 8:case 9:case 26:case 28:case 27:case 29:{let[c,l]=a.args;return Math.max(Rn(e,c),Rn(e,l))}case 10:{let[c,l]=a.args;return Rn(e,c)+Rn(e,l)}case 14:return Rn(e,a.args[0]);case 11:{let[c,l]=a.args;return Rn(e,l)>0?1/0:Rn(e,c)}case 12:case 13:{let[c,l]=a.args,p=n.getInstruction(l);if(Rn(e,c)===0&&Rn(e,l)===0)return 0;if(p.type===1){let d=F(p.value);return d===Math.round(d)&&d>0?Rn(e,c)*d:1/0}else return 1/0}case 56:return 2*Rn(e,a.args[0]);case 33:{let c=n.getInstruction(a.args[2]);return i&&c.type===1&&isNaN(F(c.value))?Rn(e,a.args[1]):1/0}case 16:case 37:case 2:case 0:case 1:case 25:case 32:case 31:case 15:case 38:case 39:case 40:case 41:case 42:case 48:case 47:case 3:case 44:case 49:case 4:case 55:return 1/0;default:let u=a;throw new Error(`Unexpected opcode ${u.type}`)}}function RL(e,t){let n=e.argNames.indexOf(t),r=e.getReturnIndex(),o=ya(wo(e,n,{allowRestriction:!0,allowClosedBlockReferences:!1}),r);if(Rn(o.orderCtx,r)>2)throw new Error(\"Programming Error: cannot compute polynomial coefficients for polynomials of order greater than 2\");let i=Pr(o,r),s=!1;for(let a=0;a<e.instructionsLength();a++)e.getInstruction(a).type===33&&o.mask[a]&&(s=!0);return{chunk:o.newChunk,coefficients:i,mappedArgIndex:n===-1?void 0:o.valueMap.get(n),mappedReturnIndex:o.valueMap.get(r),isRestrictedPolynomial:s}}function ya(e,t){let{chunk:n,argIndex:r}=e,o=Yr(n,t);if(n.isInClosedBlock(r))throw new Error(\"Programming Error: cannot find polynomial coefficients of an instruction in a closed block\");let i,s;r>=0&&r<n.argNames.length?(i=n.argNames.slice(),s=n.argTypes.slice(),i.splice(r,1),s.splice(r,1)):(i=n.argNames,s=n.argTypes);let a=new ga({argNames:i,argTypes:s}),u=0,c=n.instructionsLength()-1,l=new ho(n,u,c,a);l.copyUntilEnd((g,y,h)=>{if(!(o[h]||(y.type===47||y.type===48)&&o[y.args[0]]))return h;if(y.type===2)return h<r||r<0?h:h===r?g.SymbolicVar(n.argTypes[h]):h-1;if(me(y)){let b=l.mapArgs(y.args);return g.copyInstructionWithArgs(y,b)}else return l.copyLeafOrFunctionHeader(y)});let p=[],d=a.ColdConstant(0),m=a.ColdConstant(1),f=a.ColdConstant(NaN);return{chunk:n,newChunk:a,orderCtx:e,coefficientTable:p,mask:e.mask,valueMap:l.oldIPtoNewIP,argIndex:r,zero:d,one:m,nan:f}}function Pr(e,t){let{newChunk:n,orderCtx:r,coefficientTable:o,mask:i,valueMap:s,argIndex:a,zero:u,one:c,nan:l}=e,p=o[t];if(p!==void 0)return p;let d;for(i[t]?t===a?d=[u,c]:Rn(r,t)>2?d=[l]:d=_Y(e,t):d=[s.get(t)];d.length>1;){let m=n.getInstruction(d[d.length-1]);if(m.type===1&&F(m.value)===0)d.pop();else break}if(d.length===0)throw new Error(\"Programming Error: coefficients cannot be empty\");return o[t]=d,d}function _Y(e,t){let n=e.chunk.getInstruction(t),{newChunk:r}=e;switch(n.type){case 8:{let[i,s]=n.args,a=Pr(e,i),u=Pr(e,s),c=a.length-1,l=u.length-1,p=[];for(let d=0;d<=Math.max(c,l);d++)c>=d&&l>=d?p.push(r.Add([a[d],u[d]])):p.push(c>l?a[d]:u[d]);return p}case 9:case 26:case 28:case 27:case 29:{let[i,s]=n.args;(n.type===26||n.type==28)&&([i,s]=[s,i]);let a=Pr(e,i),u=Pr(e,s),c=a.length-1,l=u.length-1,p=[];for(let d=0;d<=Math.max(c,l);d++)c>=d&&l>=d?p.push(r.Subtract([a[d],u[d]])):p.push(c>l?a[d]:r.Negative([u[d]]));return p}case 14:{let i=n.args[0],s=Pr(e,i),a=[];for(let u=0;u<s.length;u++)a.push(r.Negative([s[u]]));return a}case 10:{let[i,s]=n.args,a=Pr(e,i),u=Pr(e,s),c=a.length-1,l=u.length-1,p=[];for(let d=0;d<=c;d++)for(let m=0;m<=l;m++){if(d+m>2)continue;let f=r.Multiply([a[d],u[m]]),g=p[d+m];g===void 0?p[d+m]=f:p[d+m]=r.Add([g,f])}return p}case 11:{let[i,s]=n.args,a=Pr(e,i),u=Pr(e,s),c=[];for(let l=0;l<a.length;l++)c.push(r.Divide([a[l],u[0]]));return c}case 12:case 13:{let[i,s]=n.args,a=Pr(e,i),u=Pr(e,s);if(a.length-1===0)return[r.RawExponent([a[0],u[0]])];let l=r.getInstruction(u[0]);switch(F(l.value)){case 0:return[r.ColdConstant(1)];case 1:return a;case 2:return[r.Square([a[0]]),r.Multiply([r.ColdConstant(2),r.Multiply([a[0],a[1]])]),r.Square([a[1]])]}}case 56:{let i=n.args[0],s=Pr(e,i);return s.length-1===0?[r.Square([s[0]])]:[r.Square([s[0]]),r.Multiply([r.ColdConstant(2),r.Multiply([s[0],s[1]])]),r.Square([s[1]])]}case 33:return Pr(e,n.args[1]);case 37:case 16:case 0:case 23:case 2:case 1:case 25:case 32:case 31:case 15:case 38:case 39:case 40:case 41:case 42:case 21:case 22:case 19:case 20:case 24:case 48:case 47:case 3:case 44:case 49:case 50:case 51:case 4:case 53:case 54:case 55:throw new Error(`Cannot find polynomial coefficients of opcode ${n.type} that depends on symbol.`);default:let o=n;throw new Error(`Unexpected opcode ${o.type}`)}}function DL(e,t,n){let r=e.argNames.indexOf(t);if(r===-1){let s=e.getInstruction(n);return s.type===1?NL(s):$r()}let o=wo(e,r,{allowRestriction:!0,allowClosedBlockReferences:!1}),i=RY(o,n);return ci(i,n)}function RY(e,t){let{chunk:n,mask:r}=e;return{chunk:n,mask:r,orderCtx:e,domainTable:[],index:t}}function ci(e,t){let{domainTable:n}=e,r=n[t];if(r!==void 0)return r;let o=DY(e,t);return n[t]=o,o}function DY(e,t){let{chunk:n,mask:r,orderCtx:o}=e,i=n.getInstruction(t);switch(i.type){case 1:return NL(i);case 3:case 2:return i.valueType===x?$a():$r();case 0:return $r();case 31:return ly(ci(e,i.args[0]),ci(e,i.args[1]));case 32:case 8:case 9:case 10:return fr(ci(e,i.args[0]),ci(e,i.args[1]));case 11:{let s=fr(ci(e,i.args[0]),ci(e,i.args[1])),a=n.getInstruction(i.args[1]);return a.type===1&&a.valueType===x&&F(a.value)!==0?s:fr($r(),s)}case 14:case 56:return ci(e,i.args[0]);case 15:{let s=i.valueType;switch(s){case D:case G:return NY(e,i.args);case N:return oT(e,i.args);case Nt:case yn:case gn:case Jt:case Ut:case sn:case on:case Zt:case cn:case Qt:case kn:case Hn:return oT(e,i.args);default:let a=s;throw new Error(`Unexpected tuple type ${a}`)}}case 12:case 13:case 47:case 48:case 16:case 42:case 21:case 22:case 23:case 24:case 19:case 20:case 39:case 40:case 41:case 44:case 50:case 51:case 54:case 55:return oT(e,i.args);case 4:case 53:return $r();case 49:return $r();case 38:return i.args.length===1?ci(e,i.args[0]):$r();case 25:return $r();case 33:return kA(ci(e,i.args[0]),ci(e,i.args[1]),ci(e,i.args[2]));case 26:case 27:case 28:case 29:{if(!r[t])return $a();let s=fr(ci(e,i.args[0]),ci(e,i.args[1]));if(Rn(o,t)>1)return fr($r(),s);let a=e.coefficientCtx;a===void 0&&(a=ya(o,e.index),e.coefficientCtx=a);let u=a.newChunk,c=Pr(a,t),[l,p]=c;if(!De(u.getInstruction(l)))return fr($r(),s);let d=Oo(u,l);if(isNaN(d))return Hu();if(p===void 0)return i.type===28||i.type===29?d>=0?s:Hu():d>0?s:Hu();{let m=Oo(u,p);return fr(s,zd(d,m))}}case 37:switch(i.symbol){case\"restriction\":case\"restrictionToBoolean\":return ci(e,i.args[0]);case\"count\":return $a();default:return ur[i.symbol].noPeel?$r():oT(e,i.args)}}}function NY(e,t){let n=$a();for(let r of t)n=fr(n,ci(e,r));return n}function oT(e,t){let n=$r();for(let r of t)n=fr(n,ci(e,r));return n}function NL(e){if(jd(e)&&e.value.length!==1)return $r();switch(e.valueType){case x:case Z:case D:case Yt:case G:case lo:return rT(e)?Hu():$a();case Oe:return e.value?$a():Hu();case vi:return e.value[0]?$a():Hu();default:return $r()}}function OL(e){let t=e.getReturnIndex(),n=e.getInstruction(t);if(!me(n))return t;let r=I0(e,n),o=Ot(r.expectedTypes),i=N0(e,n.args,[o]);if(r.isReducerWithNoListArgs){let s=AY(e,i.didCoerce?i.args:n.args),a=Zn(r.expectedTypes.rest);if(Bs(s,a)){i.didCoerce?e.replaceInstructionWithNoop(t):e.popInstruction();let u=e.List(n.args);return e.copyInstructionWithArgs(n,[u])}}else i.didCoerce&&(e.replaceInstructionWithNoop(t),e.copyInstructionWithArgs(n,i.args));return e.getReturnIndex()}function N0(e,t,n){let r=!1,o=[];for(let i=0;i<t.length;i++){let s=jf(n,i),a=t[i],u=e.getInstruction(a).valueType,c=a;s.every(l=>!Bs(u,l))&&(ae(s[0],x)?c=os(e,a):ae(s[0],N)&&(c=OY(e,a))),c!==a&&(r=!0),o.push(c)}return r?{didCoerce:r,args:o}:{didCoerce:!1}}function os(e,t,n={}){var o;let r=e.getInstruction(t);return r.valueType===He?t:ae(r.valueType,Ne)?wL(e,t):ae(r.valueType,Ce)?AL(e,t):ae(r.valueType,un)?e.Piecewise([e.NativeFunction(\"restrictionToBoolean\",[t]),e.ColdConstant(1),e.ColdConstant(NaN)]):ae(r.valueType,N)?(o=n.peelableCoerce)!=null&&o?e.NativeFunction(n.withTolerance?\"peelableCoerceComplexToRealWithTolerance\":\"peelableCoerceComplexToReal\",[t]):e.NativeFunction(n.withTolerance?\"coerceComplexToRealWithTolerance\":\"coerceComplexToReal\",[t]):t}function Yp(e,t){let n=e.getInstruction(t);return n.valueType===He||ae(n.valueType,N)?t:os(e,t)}function OY(e,t){let n=e.getInstruction(t);if(n.valueType===He)return t;if(ae(n.valueType,x))return e.NativeFunction(\"coerceRealToComplex\",[t]);if(ae(n.valueType,N))return t;if(lr(n.valueType,x)||lr(n.valueType,Z)){let r=os(e,t);return e.NativeFunction(\"coerceRealToComplex\",[r])}return t}function AY(e,t){let n=e.getInstruction(t[0]).valueType;if(!er(n))return ar;for(let r of t)if(e.getInstruction(r).valueType!==n)return ar;return Zn(n)}var Zp=-10;function O0(e,t,n){return A0(e,t,n)===Zp}function A0(e,t,n){let r=e.getInstruction(n);if(me(r)){for(let a of r.args)if(iT(e,a,n))return Zp}if(iT(e,n,n))return Zp;let o=[!0];for(let a=n+1;a<t;a++)o.push(!1);o.push(!0);let i=[t],s=0;for(;i.length;){let a=i.pop(),u=e.getInstruction(a);if(De(u)&&(s=Ir(s,u.mobility)),iT(e,a,n))return Zp;if(me(u))for(let c of u.args)if(c>=n)o[c-n]||(i.push(c),o[c-n]=!0);else{let l=e.getInstruction(c);if(De(l)&&(s=Ir(s,l.mobility)),iT(e,c,n))return Zp}}return s}function iT(e,t,n){let r=e.getInstruction(t);return t<n?r.type===4?!1:!De(r):r.type===50?!0:r.type===3}function rg(e,t,n){let r=e.getInstruction(t);if(W(r.valueType)){let o=Vn(e,t);n=Math.floor(n);let i=1;if(isNaN(n)||n<0||o!==void 0&&n>=o){let s=rt(r.valueType);return e.NanOfType(s,i)}return r.type===38?r.args[n]:r.type===1&&W(r.valueType)?e.ConstantOfType(rt(r.valueType),r.value[n],i):o!==void 0?e.InboundsListAccess([t,e.Constant(n+1,i)]):e.ListAccess([t,e.Constant(n+1,i)])}else throw new Error(`Cannot access elements of ${se(r.valueType)}`)}function sT(e,t,n){let r=1,o=e.getInstruction(t);if(n.length===0)return e.ConstantOfType(o.valueType,[],r);if(o.type===1&&W(o.valueType)){let i=[],s=rt(o.valueType);for(let a of n){let u=Math.floor(a);isNaN(u)||u<0||u>=lu(e,t,\"Programming error: expected Constant list instruction to have constant length.\")?i.push(Ho(s)):i.push(o.value[u])}return e.ConstantOfType(o.valueType,i,r)}else if(o.type===38){let i=[];for(let s of n){let a=Math.floor(s);if(isNaN(a)||a<0||a>=lu(e,t,\"Programming error: expected List instruction to have constant length.\")){let u=rt(o.valueType);i.push(e.NanOfType(u,r))}else i.push(o.args[a])}return e.List(i)}else{let i=[],s=!0,a=Vn(e,t);for(let c of n){let l=Math.floor(c);i.push(e.Constant(l+1,r)),(isNaN(l)||l<0||a===void 0||l>=a)&&(s=!1)}let u=[t,e.List(i)];return s?e.InboundsListAccess(u):e.ListAccess(u)}}function w0(e,t){return!ln(e)&&isNaN(e)||!ln(t)&&isNaN(t)?[NaN,NaN]:[e,t]}function aT(e){return Kt(F(e[0]),F(e[1]))}function LL([e,t]){return ln(e)&&ln(t)}function FL(e,t){if(!LL(e)||!LL(t))return il(aT(e),aT(t));let[n,r]=e,[o,i]=t,s=Ai(oo(o,o),oo(i,i)),a=Ai(oo(n,o),oo(r,i)),u=es(oo(r,o),oo(n,i)),c=Yo(a,s),l=Yo(u,s);return!ln(c)||!ln(l)?il(aT(e),aT(t)):w0(c,l)}function L0(e,t,n){let r;return uT(t)?r=V0(t,n):r=BL(t,n),e.ConstantOfType(t,r,1)}function F0(e){return uT(e)||VL(e)}function uT(e){switch(e){case He:case Z:case vi:case Ye:case Mu:case Yt:case Er:case _i:case Co:case Eo:case Di:case Ri:case wr:case Ur:case zr:case lo:case ji:case ni:case aa:case Wi:case ko:case _u:case Ru:case Gu:case qu:case Du:case Nu:case Fu:case Ou:case Au:case wu:case Lu:case Vu:case Bu:case sa:return!0;default:return!1}}function VL(e){switch(e){case x:case Oe:case N:case un:case D:case he:case Te:case ue:case Ae:case Pe:case Ee:case _e:case Ne:case Ce:case G:case ke:case dr:case kr:case zt:case fn:case pr:case we:case St:case Nt:case yn:case gn:case Jt:case Ut:case sn:case on:case Zt:case cn:case Qt:case Hn:case kn:case Bt:return!0;default:return!1}}function V0(e,t){if(e===He)return[];let n=rt(e);if(!VL(n))throw new Error(`Programming error: unexpected element type ${tt(n)} for list type ${tt(e)}.`);let r=[];for(let o=0;o<t.length;o++){let i=BL(n,t[o]);r.push(i)}return r}function BL(e,t){if(e===x)return Ie(t,1);if(e===D||e===N){let[n,r]=t;return[Ie(n,1),Ie(r,1)]}else if(e===G){let[n,r,o]=t;return[Ie(n,1),Ie(r,1),Ie(o,1)]}else return t}function B0(e,t){return Ai(e,t)}function G0(e,t){return es(e,t)}function q0(e,t){return oo(e,t)}function U0(e,t){return Yo(e,t)}function og(e,t){return F(e)===Math.E?Math.exp(F(t)):g1(e,t)}var LY=og;function z0(e){return Oi(e)}function k0(e){return oo(e,e)}function FY(e,t){return t[e]}function H0(e,t){return F(e)===F(t)}function $0(e,t){return F(e)<F(t)}function Y0(e,t){return F(e)>F(t)}function Z0(e,t){return F(e)<=F(t)}function X0(e,t){return F(e)>=F(t)}function qL(e,t){return e||t}function UL(e,t){return e&&t}function VY(e,t,n){let r=Math.floor(F(n))-1;return!isFinite(r)||r<0||r>=t.length?Ho(e):t[r]}function W0(e,t,n,r){ln(r)&&(r=F(r));let o=n===x||n===Bt?r:SS(n,r);return`${t}::${e}${o}`}function j0(e,t){switch(e){case\"mod\":return b1(t[0],t[1]);case\"abs\":return f1(t[0]);case\"sqrt\":return h1(t[0]);case\"total\":return jP(t[0]);case\"mean\":return x1(t[0]);case\"count\":return t[0].length;case\"validateRangeLength\":{let n=t[0],r=t[1],o=t[2],i=t[3],s=RS(n,r,o,i);if(s===0)throw My();return s}case\"validateSampleCount\":{let n=nu(t[0]),r=DS(n);if(r===0&&n!==0)throw Jv();return r}case\"select\":case\"elementsAt\":case\"uniquePerm\":{let n=ur[e];return $o[n.symbol].apply(null,t)}case\"complex\":return w0(t[0],t[1]);case\"complexDivide\":return FL(t[0],t[1]);case\"wirtingerEqualOrWarning\":return t[1];default:{let n=ur[e];return(n.module===\"Math\"?Math:$o)[n.symbol].apply(null,nu(t))}}}function J0(e,t){let n=F(t[0][0]),r=F(t[1][0]),o=F(t[0][1]),i=F(t[1][1]);if(n!==r||o!==i){let s=n-r,a=o-i;if(isNaN(s)||isNaN(a))return;let u=Math.abs(s)+Math.abs(a),c=Math.abs(n)+Math.abs(o),l=Math.abs(r)+Math.abs(i);if(u<1e-14*Math.max(c,l))return;e.setWarning(P(\"shared-calculator-error-complex-wirtinger-differs\"))}}function Q0(e,t){let n=F(t[0][1]);YS(n)&&e.setWarning(P(\"graphing-calculator-error-nan-blame-complex-coercion\"))}function zL(e,t){let n=Array(t+1);return Vt(e,t,n)}function kL(e,t,n){let r=Array(t+1);for(let o=0;o<n.length;o++)r[o]=n[o];return Vt(e,t,r)}function HL(e,t,n){if(t.constantLength)return t.constantLength;let r=t.args[0],i=e.getInstruction(r).args[0],s=e.getInstruction(i);return F(Vt(e,s.args[0],n))}function $L(e,t,n,r){let o=e.getInstruction(t),i=HL(e,o,r);if(!isFinite(n)||n<0||n>=i)return Ho(rt(o.valueType));let s=o.args[0],a=t-s,u=e.getInstruction(s),c=u.args[0],l=u.args[a];r[c]=n+1;let p=Vt(e,l,r);for(let d=c;d<=s;d++)r[d]=void 0;return p}function BY(e,t,n){let r=e.getInstruction(t),o=r.args[0],i=e.getInstruction(o).args[0];if(qY(e,i+1,o-1)&&uT(r.valueType)){let u=e.copy(),c=$m(u);return V0(r.valueType,c)}let s=HL(e,r,n),a=[];for(let u=s-1;u>=0;u--)a[u]=$L(e,t,u,n);return a}function YL(e,t,n){let r=Vt(e,t.args[1],n),o=t.args[0],i=e.getInstruction(o);if(i.type===48)return $L(e,o,F(r)-1,n);if(i.type===33){let s=Vt(e,i.args[0],n);return YL(e,{...t,args:[s?i.args[1]:i.args[2],t.args[1]]},n)}else{let s=Vt(e,t.args[0],n);return VY(t.valueType,s,r)}}function Vt(e,t,n){let r=n[t];if(r!==void 0)return r;let o=GY(e,t,n);return typeof o==\"number\"&&o===Math.floor(o)&&(o=Ie(o,1)),n[t]=o,o}function GY(e,t,n){let r=e.getInstruction(t);switch(r.type){case 1:return r.value;case 8:return B0(Vt(e,r.args[0],n),Vt(e,r.args[1],n));case 9:return G0(Vt(e,r.args[0],n),Vt(e,r.args[1],n));case 10:return q0(Vt(e,r.args[0],n),Vt(e,r.args[1],n));case 11:return U0(Vt(e,r.args[0],n),Vt(e,r.args[1],n));case 12:return og(Vt(e,r.args[0],n),Vt(e,r.args[1],n));case 13:return LY(Vt(e,r.args[0],n),Vt(e,r.args[1],n));case 14:return z0(Vt(e,r.args[0],n));case 56:return k0(Vt(e,r.args[0],n));case 15:return r.args.map(i=>Vt(e,i,n));case 16:return FY(r.index,Vt(e,r.args[0],n));case 25:return H0(Vt(e,r.args[0],n),Vt(e,r.args[1],n));case 26:return $0(Vt(e,r.args[0],n),Vt(e,r.args[1],n));case 27:return Y0(Vt(e,r.args[0],n),Vt(e,r.args[1],n));case 28:return Z0(Vt(e,r.args[0],n),Vt(e,r.args[1],n));case 29:return X0(Vt(e,r.args[0],n),Vt(e,r.args[1],n));case 31:return Vt(e,r.args[0],n)||Vt(e,r.args[1],n);case 32:return Vt(e,r.args[0],n)&&Vt(e,r.args[1],n);case 44:return W0(r.tag,Vt(e,r.args[0],n),e.getInstruction(r.args[1]).valueType,Vt(e,r.args[1],n));case 33:return Vt(e,r.args[0],n)?Vt(e,r.args[1],n):Vt(e,r.args[2],n);case 37:{let i=[];for(let s of r.args)i.push(Vt(e,s,n));return r.symbol===\"wirtingerEqualOrWarning\"&&J0(e,i),r.symbol===\"peelableCoerceComplexToReal\"&&Q0(e,i),j0(r.symbol,i)}case 38:{let i=[];for(let s of r.args)i.push(Vt(e,s,n));return i}case 39:case 40:case 41:return YL(e,r,n);case 48:return BY(e,t,n);case 47:{let i=r.args[0],s=t-i,u=e.getInstruction(i).args[s],c=GL(e,{endIndex:i,returnIndex:u,resultIndex:t},n);return $m(c)}case 55:{let i=r.args[0],a=e.getInstruction(i).endIndex,c=e.getInstruction(a).args[0],l=GL(e,{endIndex:a,returnIndex:c,resultIndex:t},n);return $m(l)}case 19:case 20:case 21:case 22:case 23:case 24:case 42:case 0:case 2:case 3:case 49:case 50:case 51:case 4:case 53:case 54:throw new Error(`Programming Error: cannot interpret opcode ${r.type}`);default:let o=r;throw new Error(`Programming Error: unexpected opcode ${o.type}`)}}function GL(e,t,n){let r=t.endIndex,o=t.returnIndex,i=t.resultIndex,s=e.getInstruction(r).args[0],a=[];a[o]=!0;let u=o;e.getInstruction(i).type===55&&(a[i]=!0,u=i);for(let f=u;f>=s;f--){if(!a[f])continue;let g=e.getInstruction(f);if(me(g))for(let y of g.args)y<s||y>r?Vt(e,y,n):a[y]=!0}let l=e.copy();l.unsafelyTruncate(s);for(let f=0;f<s;f++){let g=n[f],y=e.getInstruction(f);if(g!==void 0){let h=y.valueType;l.replaceInstructionWithConstant(f,{type:1,valueType:h,value:g,mobility:1})}}l.reopenAllBlocks();let p=i-1,d=new ho(e,s,p,l);d.copyUntilEnd((f,g)=>{if(me(g)){let y=d.mapArgs(g.args);return g.type===40?f.InboundsListAccess(y):f.copyInstructionWithArgs(g,y)}else return d.copyLeafOrFunctionHeader(g)}),l.Noop();let m=e.getInstruction(i);if(m.type===47)l.replaceInstructionWithBlockVarOrFunctionCall(l.getReturnIndex(),{type:47,valueType:m.valueType,args:[d.mapIndex(r)]});else if(m.type===55)l.replaceInstructionWithBlockVarOrFunctionCall(l.getReturnIndex(),{type:55,valueType:m.valueType,args:d.mapArgs(m.args)});else throw new Error(`Programming error: unexpected opcode ${_o(m.type)}`);return l}function qY(e,t,n){let r=[];for(let i=0;i<=t;i++)r.push(!1);let o=[];for(let i=t+1;i<=n;i++)o.push(i);for(;o.length;){let i=o.pop();if(r[i])continue;r[i]=!0;let s=e.getInstruction(i);if(s.type===55)return!0;if(me(s))for(let a of s.args)r[a]||o.push(a)}return!1}function ZL(e,t){let n=[];for(let o=0;o<=t;o++)n.push(!1);let r=[t];for(;r.length;){let o=r.pop();if(n[o])continue;n[o]=!0;let i=e.getInstruction(o);if(i.type===4&&i.endIndex===-1)return!0;if(me(i))for(let s of i.args)n[s]||r.push(s)}return!1}function $m(e){let t=e.getCompiledFunction();return t.executionMetadata.recursiveFunctionCache=new Ad,t.executionMetadata.iterativeRecursionOutputs={},t.fn()}function WL(e){if(e.instructionsLength()-1!==e.getReturnIndex())throw new Error(\"Programming Error: only the final instruction in a chunk can be constant collapsed\");let t=e.getInstruction(e.getReturnIndex());if(!me(t))return e.getReturnIndex();switch(t.type){case 8:{let r=e.getInstruction(t.args[0]),o=e.getInstruction(t.args[1]);return r.type===1&&o.type===1?(e.popInstruction(),e.Constant(B0(r.value,o.value),Ir(r.mobility,o.mobility))):r.type===1&&F(r.value)===0?(e.popInstruction(),t.args[1]):o.type===1&&F(o.value)===0?(e.popInstruction(),t.args[0]):e.getReturnIndex()}case 9:{let r=e.getInstruction(t.args[0]),o=e.getInstruction(t.args[1]);return r.type===1&&o.type===1?(e.popInstruction(),e.Constant(G0(r.value,o.value),Ir(r.mobility,o.mobility))):r.type===1&&F(r.value)===0?(e.popInstruction(),e.Negative([t.args[1]])):o.type===1&&F(o.value)===0?(e.popInstruction(),t.args[0]):e.getReturnIndex()}case 10:{let r=e.getInstruction(t.args[0]),o=e.getInstruction(t.args[1]);return r.type===1&&o.type===1?(e.popInstruction(),e.Constant(q0(r.value,o.value),Ir(r.mobility,o.mobility))):r.type===1&&F(r.value)===1?(e.popInstruction(),t.args[1]):o.type===1&&F(o.value)===1?(e.popInstruction(),t.args[0]):e.getReturnIndex()}case 11:{let r=e.getInstruction(t.args[0]),o=e.getInstruction(t.args[1]);return r.type===1&&o.type===1?(e.popInstruction(),e.Constant(U0(r.value,o.value),Ir(r.mobility,o.mobility))):o.type===1&&F(o.value)===1?(e.popInstruction(),t.args[0]):e.getReturnIndex()}case 12:{let r=e.getInstruction(t.args[0]),o=e.getInstruction(t.args[1]);if(r.type===1&&o.type===1)return e.popInstruction(),e.Constant(og(r.value,o.value),Ir(r.mobility,o.mobility));if(r.type===1&&r.valueType===x){let i=F(r.value);if(i===Math.E)return e.popInstruction(),e.NativeFunction(\"exp\",[t.args[1]]);if(i>0)return e.popInstruction(),e.RawExponent(t.args)}if(o.type===1&&o.valueType===x){let i=F(o.value);if(i===1)return e.popInstruction(),t.args[0];if(i===2)return e.popInstruction(),e.Square([t.args[0]]);if(i===Math.floor(i))return e.popInstruction(),e.RawExponent(t.args);if(ln(o.value)){let{n:s,d:a}=o.value;if(a%2===1){e.popInstruction();let u=e.RawExponent([e.NativeFunction(\"abs\",[t.args[0]]),t.args[1]]);return s%2===0?u:e.Multiply([e.NativeFunction(\"sign\",[t.args[0]]),u])}}}return e.getReturnIndex()}case 13:{let r=e.getInstruction(t.args[0]),o=e.getInstruction(t.args[1]);if(r.type===1&&o.type===1)return e.popInstruction(),e.Constant(og(r.value,o.value),Ir(r.mobility,o.mobility));if(o.type===1){let i=F(o.value);if(i===1)return e.popInstruction(),t.args[0];if(i===2)return e.popInstruction(),e.Square([t.args[0]])}return e.getReturnIndex()}case 14:{let r=e.getInstruction(t.args[0]);return r.type===1?(e.popInstruction(),e.Constant(z0(r.value),r.mobility)):e.getReturnIndex()}case 56:{let r=e.getInstruction(t.args[0]);return r.type===1?(e.popInstruction(),e.Constant(k0(r.value),r.mobility)):e.getReturnIndex()}case 25:{let r=e.getInstruction(t.args[0]),o=e.getInstruction(t.args[1]);return r.type===1&&o.type===1?(e.popInstruction(),e.ConstantOfType(Oe,H0(r.value,o.value),Ir(r.mobility,o.mobility))):e.getReturnIndex()}case 26:{let r=e.getInstruction(t.args[0]),o=e.getInstruction(t.args[1]);return r.type===1&&o.type===1?(e.popInstruction(),e.ConstantOfType(Oe,$0(r.value,o.value),Ir(r.mobility,o.mobility))):e.getReturnIndex()}case 27:{let r=e.getInstruction(t.args[0]),o=e.getInstruction(t.args[1]);return r.type===1&&o.type===1?(e.popInstruction(),e.ConstantOfType(Oe,Y0(r.value,o.value),Ir(r.mobility,o.mobility))):e.getReturnIndex()}case 28:{let r=e.getInstruction(t.args[0]),o=e.getInstruction(t.args[1]);return r.type===1&&o.type===1?(e.popInstruction(),e.ConstantOfType(Oe,Z0(r.value,o.value),Ir(r.mobility,o.mobility))):e.getReturnIndex()}case 29:{let r=e.getInstruction(t.args[0]),o=e.getInstruction(t.args[1]);return r.type===1&&o.type===1?(e.popInstruction(),e.ConstantOfType(Oe,X0(r.value,o.value),Ir(r.mobility,o.mobility))):e.getReturnIndex()}case 31:{let r=e.getInstruction(t.args[0]),o=e.getInstruction(t.args[1]);return r.type===1&&o.type===1?(e.popInstruction(),e.ConstantOfType(Oe,qL(r.value,o.value),r.value?r.mobility:Ir(r.mobility,o.mobility))):r.type===1?(e.popInstruction(),r.value?t.args[0]:t.args[1]):o.type===1?(e.popInstruction(),o.value?t.args[1]:t.args[0]):e.getReturnIndex()}case 32:{let r=e.getInstruction(t.args[0]),o=e.getInstruction(t.args[1]);return r.type===1&&o.type===1?(e.popInstruction(),e.ConstantOfType(Oe,UL(r.value,o.value),Ir(r.mobility,o.mobility))):r.type===1?(e.popInstruction(),r.value?t.args[1]:t.args[0]):o.type===1?(e.popInstruction(),o.value?t.args[0]:t.args[1]):e.getReturnIndex()}case 33:{let r=e.getInstruction(t.args[0]);if(r.type===1){e.popInstruction();let o=r.value?t.args[1]:t.args[2];return cT(e,o,r.mobility)}else return e.getReturnIndex()}case 16:{let r=e.getInstruction(t.args[0]),o=t.index;return r.type===15?(e.popInstruction(),r.args[o]):r.type===1?(e.popInstruction(),e.ConstantOfType(t.valueType,r.value[o],r.mobility)):e.getReturnIndex()}case 38:case 15:{if(XL(e,t.args)){e.popInstruction();let r=[],o=0;for(let i of t.args){let s=e.getInstruction(i);r.push(s.value),o=Ir(o,s.mobility)}return e.ConstantOfType(t.valueType,r,o)}return e.getReturnIndex()}case 39:case 41:{let r=t.args[0],o=e.getInstruction(r),i=e.getInstruction(t.args[1]),s=Vn(e,r);if(s===0)return e.popInstruction(),e.NanOfType(t.valueType,qM(o));if(o.type===33&&i.type===1){let a=t.type===39?e.ListAccess([o.args[1],t.args[1]]):e.InboundsListAccess([o.args[1],t.args[1]]),u=t.type===39?e.ListAccess([o.args[2],t.args[1]]):e.InboundsListAccess([o.args[2],t.args[1]]);return e.Piecewise([o.args[0],a,u])}if(o.type===48){e.popInstruction();let a=o.args[0],u=r-a,c=e.getInstruction(a),l=c.args[0],p,d;if(t.type===41)p=t.args[1];else if(i.type===1&&i.valueType===x&&s!==void 0){let g=F(i.value),y=Math.floor(g);if(y<1||y>s)return e.NanOfType(t.valueType,1);p=g===y?t.args[1]:e.Constant(y,i.mobility)}else{let g=e.ColdConstant(1),h=e.getInstruction(l).args[0],b=e.NativeFunction(\"floor\",[t.args[1]]),T=e.GreaterEqual([b,g]),I=e.LessEqual([b,h]);p=e.Piecewise([T,e.Piecewise([I,b,h]),g]),d={one:g,lengthIndex:h,roundedIndex:b,greaterEqualIndex:T,lessEqualIndex:I}}if(c.args[u]<l)return c.args[u];let m=c.args[u],f=new ho(e,l,m);if(f.copyUntilEnd((g,y,h)=>{if(h===l)return p;if(me(y)){let b=f.mapArgs(y.args);return y.type===40?g.InboundsListAccess(b):g.copyInstructionWithArgs(y,b)}else return f.copyLeafOrFunctionHeader(y)}),d){let{greaterEqualIndex:g,lessEqualIndex:y,lengthIndex:h,one:b}=d,T=rt(o.valueType),I=e.NanOfType(T,1),E=f.mapIndex(m),S=e.And([e.And([g,y]),e.GreaterEqual([h,b])]);return e.Piecewise([S,E,I])}else return f.mapIndex(m)}else if(i.type===1&&i.valueType===x)if(o.type===38){e.popInstruction();let a=Math.floor(F(i.value))-1;if(isNaN(a)||a<0||a>=o.args.length)return e.NanOfType(t.valueType,1);{let u=o.args[a];return cT(e,u,Ir(i.mobility,1))}}else if(o.type===1){e.popInstruction();let a=Math.floor(F(i.value))-1,u=Ir(o.mobility,i.mobility);return isNaN(a)||a<0||a>=o.value.length?e.NanOfType(t.valueType,u):e.ConstantOfType(rt(o.valueType),o.value[a],u)}else return e.getReturnIndex();else return e.getReturnIndex()}case 47:{let r=e.getInstruction(t.args[0]);if(!mo(r)||O0(e,e.getReturnIndex(),r.args[0]))return e.getReturnIndex();if(F0(t.valueType)){let o=e.copy(),i=$m(o);return e.popInstruction(),L0(e,t.valueType,i)}else throw new Error(`Constant collapsing a block with return type ${se(t.valueType)} is not implemented.`)}case 55:{let r=e.dereferenceFunctionHeader(t.args[0]);if(r===void 0||!XL(e,t.args.slice(1))||O0(e,r,t.args[0]))return e.getReturnIndex();if(F0(t.valueType)){let o=e.copy(),i=$m(o);return e.popInstruction(),L0(e,t.valueType,i)}else throw new Error(`Constant collapsing a function call with return type ${se(t.valueType)} is not implemented.`)}case 37:{let r=zY(e,t.args);if(r!==void 0){let{argValues:o,mobility:i}=r;return e.popInstruction(),t.symbol===\"wirtingerEqualOrWarning\"&&J0(e,o),t.symbol===\"peelableCoerceComplexToReal\"&&Q0(e,o),e.ConstantOfType(t.valueType,j0(t.symbol,o),i)}switch(t.symbol){case\"peelableCoerceComplexToReal\":{let o=e.getInstruction(t.args[0]);if(o.type===37){if(o.symbol===\"complex\"){let i=e.getInstruction(o.args[1]);if(i.type===1&&i.valueType===x&&F(i.value)===0)return e.popInstruction(),o.args[0]}else if(o.symbol===\"coerceRealToComplex\")return e.popInstruction(),o.args[0]}return e.getReturnIndex()}case\"complexPow\":{let o=e.getInstruction(t.args[1]);if(o.type===1&&o.valueType===N){let[i,s]=o.value;if(F(i)===1&&F(s)===0)return e.popInstruction(),t.args[0]}return e.getReturnIndex()}case\"count\":{let o=Vn(e,t.args[0]);if(o!==void 0){e.popInstruction();let i=e.getInstruction(t.args[0]),s=De(i)?i.mobility:1;return e.Constant(o,s)}else return e.getReturnIndex()}case\"select\":{let o=Vn(e,t.args[0]);if(o!==void 0&&De(e.getInstruction(t.args[1]))){e.popInstruction();let i=Oo(e,t.args[1]),s=[];for(let a=0;a<Math.min(o,i.length);a++)i[a]&&s.push(a);return sT(e,t.args[0],s)}else return e.getReturnIndex()}case\"shuffle\":{let o=t.args[0],i=t.args[1],s=Vn(e,i);if(s!==void 0&&De(e.getInstruction(o))){e.popInstruction();let a=ES(Oo(e,o),s);return sT(e,i,a)}else return e.getReturnIndex()}case\"elementsAt\":{let o=t.args[0],i=t.args[1];if(De(e.getInstruction(i))){e.popInstruction();let s=Oo(e,i);return sT(e,o,s)}return e.getReturnIndex()}case\"restrictionToBoolean\":{let o=e.getInstruction(t.args[0]);return De(o)?(e.popInstruction(),e.ConstantOfType(Oe,o.value,o.mobility)):o.type===37&&o.symbol===\"restriction\"?(e.popInstruction(),o.args[0]):e.getReturnIndex()}default:return e.getReturnIndex()}}case 44:{let r=e.getInstruction(t.args[0]),o=e.getInstruction(t.args[1]);return De(r)&&De(o)?e.ConstantOfType(Bt,W0(t.tag,Mx(e,t.args[0]),o.valueType,Mx(e,t.args[1])),Ir(r.mobility,o.mobility)):e.getReturnIndex()}case 48:{let r=e.getReturnIndex(),o=Vn(e,r);if(o!==void 0&&o===0)return e.popInstruction(),e.ConstantOfType(t.valueType,[],1);let i=t.args[0],s=e.getInstruction(i),a=s.args[0],u=r-i,c=s.args[u],l=A0(e,c,a);if(l!==Zp){let d=e.getInstruction(a).args[0],m=e.getInstruction(d),f=Ir(l,qM(m));if(t.valueType===Mi){if(o==null)throw Oy(Wo(e,r));let y=[];for(let h=0;h<o;h++){let b=e.InboundsListAccess([r,e.Constant(h+1,1)]);y.push(b)}return e.List(y)}if(ZL(e,r))return r;e.fuseBroadcast(),r=e.getReturnIndex();let g=zL(e,r);e.popInstruction(),e.ConstantOfType(t.valueType,g,f)}return r}case 49:{for(let o of t.args)if(!De(e.getInstruction(o)))return e.getReturnIndex();e.popInstruction();let r={};for(let o=0;o<t.qualifiedNames.length;o++){let i=t.qualifiedNames[o],s=e.getInstruction(t.args[o]);if(s.type===48&&(s=e.getInstruction(io(e,t.args[o]))),s.type!==1)throw new Error(\"Expected instruction to be constant\");rT(s)||ox(r,i,s)}return e.ConstantOfType(St,{type:\"Action\",updateRules:r},1)}case 20:case 22:case 23:case 24:case 40:case 42:case 21:case 19:case 50:case 51:case 53:case 54:return e.getReturnIndex();default:let n=t;throw new Error(`Unexpected opcode ${n.type}`)}}function cT(e,t,n){let r=e.getInstruction(t);return De(r)&&r.mobility<n?e.ConstantOfType(r.valueType,r.value,n):t}function XL(e,t){for(let n of t){let r=e.getInstruction(n);if(!De(r))return!1}return!0}function zY(e,t){let n=[],r=0;for(let o of t){let i=e.getInstruction(o);if(De(i))n.push(i.value),r=Ir(r,i.mobility);else return}return{argValues:n,mobility:r}}function Ym(e,t,n){switch(t.type){case 8:return e.Add(n);case 9:return e.Subtract(n);case 10:return e.Multiply(n);case 11:return e.Divide(n);case 12:return e.Exponent(n);case 13:return e.RawExponent(n);case 14:return e.Negative(n);case 56:return e.Square(n);case 25:return e.Equal(n);case 26:return e.Less(n);case 27:return e.Greater(n);case 28:return e.LessEqual(n);case 29:return e.GreaterEqual(n);case 31:return e.Or(n);case 32:return e.And(n);case 33:return e.Piecewise(n);case 47:return e.BlockVar(t.valueType,n);case 48:return e.BroadcastResult(t.valueType,n);case 15:return e.TupleOfType(t.valueType,n);case 16:return e.Slot(t.index,n);case 37:return e.NativeFunction(t.symbol,n);case 42:return e.Distribution(t.symbol,n);case 21:return e.BeginIntegral(t.callData,n);case 22:return e.EndIntegral(n);case 23:return e.BeginBroadcast(n,t.context);case 24:return e.EndBroadcast(n);case 19:return e.BeginLoop(t.callData,n);case 20:return e.EndLoop(n);case 38:return e.List(n);case 39:return e.ListAccess(n);case 40:return e.DeferredListAccess(n);case 41:return e.InboundsListAccess(n);case 44:return e.ExtendSeed(t.tag,n);case 49:return e.Action(t.qualifiedNames,n);case 50:return e.BeginMap(t.callData,n);case 51:return e.EndMap(n);case 53:return e.BeginFunction(n);case 54:return e.EndFunction(n);case 55:return e.FunctionCall(n);default:let r=t;throw new Error(`Unexpected opcode ${r.type}`)}}function jL(e){if(e.instructionsLength()-1!==e.getReturnIndex())throw new Error(\"Programming Error: only the final instruction in a chunk can be converted to broadcast\");let t=e.getInstruction(e.getReturnIndex());if(!me(t))return e.getReturnIndex();switch(t.type){case 8:case 9:case 10:case 11:case 12:case 13:case 25:case 26:case 27:case 28:case 29:case 31:case 32:case 16:case 14:case 56:case 33:return _l(e,t);case 15:{let r=Pc[t.valueType].map(o=>!W(o));return _l(e,t,r)}case 42:return io(e,_l(e,t));case 37:{let r=ur[t.symbol];switch(r.tag){case\"default\":case\"trig\":case\"trig2\":case\"inverseTrig\":case\"color\":return _l(e,t);case\"never-broadcast\":{let o=[],i=!1;for(let s of t.args){let a=io(e,s);a!==s?(i=!0,o.push(a)):o.push(s)}return i?e.copyInstructionWithArgs(t,o):e.getReturnIndex()}case\"reducer\":if(kY(e,t.args))if(t.args.length===1){let o=t.args[0],i=io(e,o);return i!==o?e.copyInstructionWithArgs(t,[i]):e.getReturnIndex()}else return _l(e,t);else return e.getReturnIndex();case\"doubleReducer\":{if(t.args.length!==2)throw new Error(\"Programming error: double reducers must have two arguments\");let o=io(e,t.args[0]),i=io(e,t.args[1]);return o!==t.args[0]||i!==t.args[1]?e.copyInstructionWithArgs(t,[o,i]):e.getReturnIndex()}case\"parameterizedReducer\":{if(t.args.length!==2)throw new Error(\"Programming error: double reducers must have two arguments\");let o=io(e,t.args[0]);return o===t.args[0]?_l(e,t,[!1,!0]):e.copyInstructionWithArgs(t,[o,t.args[1]])}default:{let o=r.tag;throw new Error(`Programming Error: unexpected tag ${o}`)}}}case 39:case 40:case 41:return e.getInstruction(t.args[0]).valueType===He&&W(e.getInstruction(t.args[1]).valueType)?e.ConstantOfType(He,[],0):_l(e,t,[!1,!0]);case 55:{let o=e.getInstruction(t.args[0]).signature.argTypes.map(a=>!W(a)),i=[t.args[0]],s=!1;for(let a=1;a<t.args.length;a++){let u=t.args[a],c=io(e,u);c!==u?(s=!0,i.push(c)):i.push(u)}return s?e.copyInstructionWithArgs(t,i):_l(e,t,[!1,...o])}case 21:case 22:case 19:case 20:case 50:case 51:return e.getReturnIndex();case 38:case 47:case 23:case 24:case 48:case 44:case 49:case 53:case 54:return e.getReturnIndex();default:let n=t;throw new Error(`Unexpected opcode ${n.type}`)}}function kY(e,t){for(let n of t)if(W(e.getInstruction(n).valueType))return!0;return!1}function _l(e,t,n){let r=t.args,o=!1,i=[];for(let m=0;m<r.length;m++){if(n&&!n[m])continue;let f=r[m],g=e.getInstruction(f).valueType;W(g)&&i.indexOf(f)===-1&&i.push(f),g===He&&(o=!0)}if(i.length===0)return e.getReturnIndex();if(t.type===33&&i.indexOf(t.args[0])==-1&&i.indexOf(t.args[1])>=0&&i.indexOf(t.args[2])>=0){let m=io(e,t.args[1]),f=io(e,t.args[2]);return m!==t.args[1]||f!==t.args[2]?Ym(e,t,[t.args[0],m,f]):e.getReturnIndex()}if(e.popInstruction(),o)return e.ConstantOfType(He,[],0);let s=zm(e,i);if(s===void 0)throw new Error(\"Programming Error: expected minListLength to be defined for \"+i.length+\" lists\");let a=s,u=e.BeginBroadcast([a],{type:\"implicit\"}),c=[];for(let m of i)c.push(tc(e,m,u));let l=[];for(let m=0;m<r.length;m++){let f=r[m];if(n&&!n[m])l.push(f);else{let g=i.indexOf(f);l.push(g===-1?f:c[g])}}let p=e.copyInstructionWithArgs(t,l),d=e.EndBroadcast([u,p]);return e.BroadcastResult(Zn(e.getInstruction(p).valueType),[d])}function tc(e,t,n){return e.getInstruction(t).type==48?e.DeferredListAccess([t,n]):e.InboundsListAccess([t,n])}function QL(e){let t=e.getReturnIndex(),n=Yr(e,t),r=e.getInstruction(t);if(r.type!==48)return e;let o=r.args[0],i=t-o,s=e.getInstruction(o),a=s.args[0],u=s.args[i],c=[],l=[];c.push(a);let p=lu(e,e.getReturnIndex(),\"Programming error: cannot optimize regression on non-constant-length list\");l.push({range:p-1,length:p});let d=!1,m=!1;for(let C=a+1;C<=u;C++){if(!n[C])continue;let v=e.getInstruction(C);if(Zr(v)||mo(v))return e;if(v.type===39||v.type===41||v.type===40){if(v.args[1]!==a)continue;let _=v.args[0];if(e.getInstruction(_).valueType!==Z||!De(e.getInstruction(_)))continue;let L=Oo(e,_),k=YY(L);if(!isFinite(k.range))continue;c.push(C),l.push(k)}else JL(v)?d=!0:(v.type===12||v.type===13)&&(m=!0)}if(c.length===0||!m&&!d)return e;let f=[],g=[];for(let C=0;C<e.argNames.length;C++)g.push(C),f.push($a());let y=[],h=[];for(let C=0;C<=u;C++)y.push(K0(e,g,y,C)),h.push(K0(e,c,h,C));for(let C=0;C<=u;C++){if(!n[C])continue;let v=e.getInstruction(C);if(v.type===33){let _=y[C];for(let L=0;L<_.length;L++)if(_[L])return e}else if(v.type===12||v.type===13){let _=!1,L=!1;for(let ee=0;ee<c.length;ee++)h[v.args[0]][ee]&&(_=!0),h[v.args[1]][ee]&&(L=!0);if(_||!L)continue;let k=y[v.args[0]],Q=0,w;for(let ee=0;ee<k.length;ee++)k[ee]&&(w=ee,Q+=1);if(Q!==1||w===void 0)continue;let q=g[w],K=wo(e.copy().reopenFinalBlock(),q,{allowRestriction:!1,allowClosedBlockReferences:!1});if(Rn(K,v.args[0])!==1)continue;let le=ya(K,v.args[0]),[te,Be]=Pr(le,v.args[0]);if(Be===void 0)continue;let Ze=Oo(le.newChunk,Be),oe=Oo(le.newChunk,te);f[w]=fr(f[w],zd(oe,Ze))}}if(d){let C=e.copy().reopenFinalBlock();for(let v=0;v<c.length;v++){let _=wo(C,c[v],{allowRestriction:!1,allowClosedBlockReferences:!1}),L=ya(_,u);for(let k=a+1;k<=u;k++){if(!n[k])continue;let Q=C.getInstruction(k);if(JL(Q)){let w=Q.args[0];if(Rn(_,w)!==1)continue;let q=Pr(L,w)[1];if(q===void 0)continue;let K=$Y(L.newChunk,q),le,te=0;for(let ht=0;ht<K.length;ht++)K[ht]&&(le=ht,te+=1);if(te!==1||le===void 0)continue;let Be=wo(L.newChunk,le,{allowRestriction:!1,allowClosedBlockReferences:!1});if(Rn(Be,q)!==1)continue;let Ze=ya(Be,q),[oe,ee]=Pr(Ze,q);if(ee===void 0||!De(Ze.newChunk.getInstruction(oe))||!De(Ze.newChunk.getInstruction(ee)))continue;let $=Oo(Ze.newChunk,oe),ne=Oo(Ze.newChunk,ee),Ve=XY(l[v]),_t=ZY(l[v]);if(!isFinite(Ve)||Ve<=0||!isFinite(_t)||_t<0||Ve<=_t)continue;f[le]=fr(f[le],fr(zd(-_t+$,ne),zd(Ve-$,-ne)))}}}}let b=!1;for(let C of f){if(Li(C)||!fs(C))return e;(C.bounds[0]!==-1/0||C.bounds[1]!==1/0)&&(b=!0)}if(!b)return e;let T=e.copy(),I=T.ColdConstant(1),E=T.ColdConstant(NaN),S=t;for(let C=0;C<T.argNames.length;C++)S=HY(T,f[C],S,C,I,E);return T.fuseBroadcast(),T}function HY(e,t,n,r,o,i){if(Li(t)||!fs(t)||t.bounds[0]===-1/0&&t.bounds[1]===1/0)return n;let s=1,a=e.And([e.LessEqual([e.Constant(t.bounds[0],s),r]),e.LessEqual([r,e.Constant(t.bounds[1],s)])]);return e.Multiply([n,e.Piecewise([a,o,i])])}function $Y(e,t){let n=[];for(let o=0;o<e.argNames.length;o++)n.push(o);let r=[];for(let o=0;o<=t;o++)r.push(K0(e,n,r,o));return r[t]}function JL(e){return e.type===37&&(e.symbol===\"sin\"||e.symbol===\"cos\")}function YY(e){let t=1/0,n=-1/0,r=e.length;for(let o of e)t=Math.min(t,o),n=Math.max(n,o);return{range:n-t,length:r}}function ZY({range:e}){return 1e-5/e}function XY({range:e,length:t}){let n=e/Math.min(t-1,31);return Math.PI/n}function K0(e,t,n,r){let o=e.getInstruction(r),i=WY(t.length);for(let s=0;s<t.length;s++)if(t[s]===r)return i[s]=!0,i;if(!me(o))return i;for(let s of o.args){let a=n[s];for(let u=0;u<a.length;u++)i[u]=i[u]||a[u]}return i}function WY(e){let t=[];for(let n=0;n<e;n++)t.push(!1);return t}function jn(e){return{type:\"scalar\",value:e}}function jr(e,t,n){return{type:\"scalar\",value:`${e} dcg_[[name_here]](${t}){ ${n} }`}}function li(e,{inType:t,outType:n,deps:r}={}){let o=t!=null?t:s=>`float[${s}]`,i=n!=null?n:()=>\"float\";return{type:\"reducer\",value:s=>`${i(s)} dcg_[[name_here]](${o(s)} L) { ${e(s)} }`,deps:r!=null?r:[],depsInterval:[]}}function Ys(e,{deps:t,depsInterval:n}={}){return{type:\"reducer\",value:e,deps:t!=null?t:[],depsInterval:n!=null?n:[]}}function lT(e){return{type:\"double-reducer\",value:(t,n)=>{let r=Math.min(t,n),o=e(r);return`float dcg_[[name_here]](float[${t}] X, float[${n}] Y) { ${o} }`}}}function jY(e,t){switch(e.type){case\"scalar\":return e.value.replace(\"[[name_here]]\",t);case\"reducer\":{let n=e.value;return r=>n(r).replace(\"[[name_here]]\",t)}case\"double-reducer\":{let n=e.value;return(r,o)=>n(r,o).replace(\"[[name_here]]\",t)}default:return e.value}}function pT(e){for(let[t,n]of Object.entries(e))n.type!==\"omitted\"&&(n.value=jY(n,t));return e}function ye(e,...t){let n=e[0];for(let r=0;r<t.length;r++)n+=t[r],n+=e[r+1];return KL(n)}function Le(e,...t){let n=e.map(o=>o.replace(/\\.hi/g,\".u\").replace(/\\.lo/g,\".l\")),r=n[0];for(let o=0;o<t.length;o++)r+=t[o],r+=n[o+1];return KL(r)}function KL(e){let t=e.split(`\n`);if(/^\\s/.test(t[0][0]))throw new Error(\"Programming error: Expected un-indented first line\");if(t.length<=1)return e;let n=Math.min(...t.slice(1).map(r=>r.match(/^\\s*/)[0].length));return t[0]+`\n`+t.slice(1).map(r=>r.slice(n)).join(`\n`)}var iF=pT({sin:Jn(\"isinf(x) || isnan(x) ? NaN : sin(x)\"),cos:Jn(\"isinf(x) || isnan(x) ? NaN : cos(x)\"),tan:is(ye`float a=abs(x);\n    return isinf(x) || isnan(x) ? NaN : tan(x);`),cot:is(ye`float a=abs(x);\n      return isinf(x) || isnan(x) ? NaN\n        : a < 0.03 ? 1.0/x - x/3.0\n        : 1.0 / tan(x);`),sec:Jn(\"isinf(x) || isnan(x) ? NaN : 1.0 / cos(x)\"),csc:is(ye`float a=abs(x);\n      return isinf(x) || isnan(x) ? NaN\n        : a < 0.03 ? 1.0/x + x/6.0\n        : 1.0 / sin(x);`),arcsin:is(ye`if (isinf(x) || isnan(x)) { return NaN; }\n    if (x == 1.0) { return dcg_PI/2.0; }\n    if (x == -1.0) { return -dcg_PI/2.0; }\n    if (x > 1.0 || x < -1.0) return NaN;\n    float y0 = asin(x);\n    return y0 + (x - sin(y0)) / cos(y0);`),arccos:is(ye`if (isinf(x) || isnan(x)) { return NaN; }\n    if (x == 1.0) { return 0.0; }\n    if (x == -1.0) { return dcg_PI; }\n    if (x > 1.0 || x < -1.0) return NaN;\n    float y0 = acos(x);\n    return y0 + (cos(y0) - x) / sin(y0);`),arctan:ig(ye`isnan(x) || isnan(y) ? NaN\n      : isinf(x) && isinf(y) ?\n        (y > 0.0 ? 0.25 : 0.75) * sign(x) * dcg_PI\n      : x == 0.0 && y == 0.0 ? y\n      : atan(x, y)\n    `),arccot:Jn(\"isnan(x) ? NaN : dcg_PI/2.0 - atan(x)\"),arcsec:Jn(\"isnan(x) ? NaN : dcg_arccos(1.0/x)\"),arccsc:Jn(\"isnan(x) ? NaN : dcg_arcsin(1.0/x)\"),sinh:Jn(\"isinf(x) ? x : isnan(x) ? NaN : sinh(x)\"),cosh:Jn(\"isinf(x) ? Infinity : isnan(x) ? NaN : cosh(x)\"),tanh:Jn(\"abs(x) > 10.0 ? sign(x) : isnan(x) ? NaN : tanh(x)\"),coth:Jn(\"abs(x) > 10.0 ? sign(x) : isnan(x) ? NaN : x == 0.0 ? Infinity : abs(x) < 0.03 ? 1.0/x + x/3.0 : 1.0/tanh(x)\"),sech:Jn(\"isinf(x) ? 0.0 : isnan(x) ? NaN : 1.0/cosh(x)\"),csch:Jn(\"isinf(x) ? 0.0 : isnan(x) ? NaN : x == 0.0 ? Infinity : abs(x) < 0.03 ? 1.0/x - x/6.0 : 1.0/sinh(x)\"),arcsinh:is(ye`float a=abs(x);\n      return isnan(x) ? NaN : sign(x) * (\n        1.0 + x * x == 1.0\n          ? dcg_log1p(a)\n          : log(a + dcg_rtxsqpone(a))\n      );`),arccosh:Jn(\"x < 1.0 || isnan(x) ? NaN : log(x + dcg_rtxsqmone(x))\"),arctanh:is(ye`if (isnan(x) || abs(x) > 1.0) { return NaN; }\n      if (x == 1.0) { return Infinity; }\n      if (x == -1.0) { return -Infinity; }\n      float y0 = 0.5*(dcg_log1p(x) - dcg_log1p(-x));\n      float c = cosh(y0);\n      return y0 + (x - tanh(y0)) * c * c;`),arccoth:Jn(\"isnan(x) ? NaN : abs(x) >= 1.0 ? dcg_arctanh(1.0/x) : NaN\"),arcsech:Jn(\"isnan(x) ? NaN : 0.0 < x && x <= 1.0 ? dcg_arccosh(1.0/x) : x == 0.0 ? Infinity : NaN\"),arccsch:Jn(\"isinf(x) ? 0.0 : isnan(x) ? NaN : dcg_arcsinh(1.0/x)\"),sinpiSeries:is(ye`float xsq = x*x;\n    return x*(dcg_PI-xsq*(5.167708-xsq*(2.549761-xsq*0.5890122)));`),sinpi:is(ye`if (isnan(x) || isinf(x)) { return NaN; }\n    if (x==0.0) { return x; }\n    if (x == floor(x)) { return x > 0.0 ? 0.0 : -0.0; }\n    int i = int(dcg_round(2.0*x));\n    float t = -0.5 * float(i) + x;\n    float s = bool(i & 2) ? -1.0 : 1.0;\n    float y = bool(i & 1) ? cos(dcg_PI * t) : dcg_sinpiSeries(t);\n    return s*y;`),sincpi:Jn(\"isnan(x) ? NaN : isinf(x) ? 0.0 : x == 0.0 ? 1.0 : dcg_sinpi(x)/(dcg_PI*x);\"),sqrt:Jn(\"isnan(x) ? NaN : x >= 0.0 ? sqrt(x) : NaN\"),rtxsqpone:Jn(\"dcg_hypot(x, 1.0)\"),rtxsqmone:is(\"float t = x*x; return isnan(x) || t < 1.0 ? NaN : t - 1.0 == t ? abs(x) : sqrt(t - 1.0);\"),hypot:sF(ye`if (isnan(x) || isnan(y)) return NaN;\n      if (isinf(x) || isinf(y)) return Infinity;\n      x = abs(x);\n      y = abs(y);\n      float m = max(x,y);\n      x /= m;\n      y /= m;\n      return m == 0.0 ? 0.0 : sqrt(x*x + y*y) * m;`),min:ig(ye`isnan(x) || isnan(y) ? NaN : min(x, y)`),max:ig(ye`isnan(x) || isnan(y) ? NaN : max(x, y)`),log:Jn(\"isnan(x) ? NaN : x > 0.0 ? log(x)*0.4342944819 : x == 0.0 ? -Infinity : NaN\"),logbase:ig(ye`isnan(x) || isnan(y) ? NaN\n      : y == 1.0 ?\n        (\n          x > 1.0 ? Infinity\n          : x == 1.0 ? NaN\n          : x < 0.0 ? NaN\n          : -Infinity\n        )\n      : y > 0.0 ?\n        (\n          x > 0.0 ? log(x)/log(y)\n          : x == 0.0 && !isinf(y) ? -Infinity\n          : NaN\n        )\n      : NaN`),ln:Jn(\"isnan(x) ? NaN : x > 0.0 ? log(x) : x == 0.0 ? -Infinity : NaN\"),exp:Jn(\"isnan(x) ? NaN : exp(x)\"),floor:Jn(\"isnan(x) ? NaN : floor(x)\"),ceil:Jn(\"isnan(x) ? NaN : ceil(x)\"),round:Jn(\"isinf(x) || isnan(x) ? x : floor(0.5 + x)\"),abs:Jn(\"isnan(x) ? NaN : abs(x)\"),sign:Jn(\"isnan(x) ? NaN : sign(x)\"),mod:ig(\"isinf(x) || isinf(y) || isnan(x) || isnan(y) || y == 0.0 ? NaN : mod(x, y)\"),stirlingPrefactor:jr(\"float\",\"float x, float y\",ye`if (isnan(x) || isnan(y)) { return NaN; }\n    return pow(x/exp(1.0), y);`),stirlerrSeries:is(ye`float S0 = 0.083333336;\n    float S1 = 0.0027777778;\n    float S2 = 0.0007936508;\n    float nn = x*x;\n    return (S0-(S1-S2/nn)/nn)/x;`),factorialAsymptotic:Jn(\"dcg_stirlingPrefactor(x,x)*sqrt(2.0*dcg_PI*x)*exp(dcg_stirlerrSeries(x))\"),factorialMinimax:is(ye`float n1 = 2.1618295;\n    float n2 = 1.5849807;\n    float n3 = 0.4026814;\n    float d1 = 2.2390451;\n    float d2 = 1.6824219;\n    float d3 = 0.43668285;\n\n    float n = 1.0 + x*(n1 + x*(n2 + x*n3));\n    float d = 1.0 + x*(d1 + x*(d2 + x*d3));\n    float xp1 = x+1.0;\n\n    return dcg_stirlingPrefactor(xp1,x)*sqrt(xp1)*(n/d);\n    `),factorialPositive:Jn(ye`(x>33.0)?Infinity:(x>8.0)?dcg_factorialAsymptotic(x):dcg_factorialMinimax(x);`),factorial:is(ye`if (isnan(x) || (isinf(x) && x < 0.0)) { return NaN; }\n    bool isInteger = x == floor(x);\n    if (x < 0.0) {\n      if (isInteger) return Infinity;\n      return 1.0 / (dcg_sincpi(x) * dcg_factorialPositive(-x));\n    }\n    float approx = dcg_factorialPositive(x);\n    return isInteger ? dcg_round(approx) : approx;`),distance:jr(\"float\",\"vec2 a, vec2 b\",ye`\n      if (any(isnan(a)) || any(isnan(b))) return NaN;\n      vec2 d = a-b;\n      return dcg_hypot(d.x, d.y);`),distanceThreeD:jr(\"float\",\"vec3 a, vec3 b\",ye`\n      if (any(isnan(a)) || any(isnan(b))) return NaN;\n      vec3 d = a-b;\n      return dcg_hypot(dcg_hypot(d.x, d.y), d.z);`),hsv:jr(\"vec3\",\"float h, float s, float v\",ye`if (isnan(h) || isnan(s) || isnan(v)) {discard;}\n      vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n      if (isinf(h)) h = 0.0;\n      vec3 p = abs(fract(h / 360.0 + K.xyz) * 6.0 - K.www);\n      return vec3(clamp(v, 0.0, 1.0) * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), clamp(s, 0.0, 1.0)));`),rgb:jr(\"vec3\",\"float r, float g, float b\",ye`if (isnan(r) || isnan(g) || isnan(b)) {discard;}\n    return clamp(vec3(r,g,b),0.0,255.0)/255.0;`),erf:is(ye`if (isnan(x)) return NaN;\n      float t = abs(x);\n      float n = x*x;\n      float r = -n;\n      return sign(x) * (\n        r < -750.0\n          ? 1.0\n          : t >= 0.065\n          ? 1.0 - exp(r) * (\n            t > 50000000.0\n              ? r / t\n              : t > 50.0\n              ? (r * (n * (n + 4.5) + 2.0)) / (t * (n * (n + 5.0) + 3.75))\n              : ((0.9999999999999999+t*(2.224574423459406+t*(2.444115549920689+\n                t*(1.7057986861852539+t*(0.8257463703357973+\n                  t*(0.28647031042892007+t*(0.07124513844341643+\n                    t*(0.012296749268608364+t*(0.001347817214557592+\n                      0.00007263959403471071*t))))))))\n                )/(1.0+t*(3.352953590554884+t*(5.227518529742423+\n                  t*(5.003720878235473+t*(3.266590890998987+\n                    t*(1.5255421920765353+t*(0.5185887413188858+\n                      t*(0.12747319185915415+t*(0.02185979575963238+\n                        t*(0.0023889438122503674+0.00012875032817508128*t\n                ))))))))))\n              )\n          )\n          : t*(1.1283791670955126+r*(0.37612638903183754+\n              r*(0.11283791670955126+r*(0.026866170645131252+\n                0.005223977625442188*r))))\n      );`),restriction:jr(\"bool\",\"bool x\",\"return x;\"),restrictionToBoolean:jr(\"bool\",\"bool x\",\"return x;\"),complex:jr(\"vec2\",\"float u, float v\",ye`if (isnan(u) || isnan(v)) { return vec2(NaN, NaN); }\n    return vec2(u,v);`),real:jr(\"float\",\"vec2 c\",\"return c.x;\"),imag:jr(\"float\",\"vec2 c\",\"return c.y;\"),arg:jr(\"float\",\"vec2 c\",\"return dcg_arctan(c.y,c.x);\"),peelableCoerceComplexToReal:jr(\"float\",\"vec2 a\",\"return a.y == 0.0 ? a.x : NaN;\"),coerceComplexToReal:jr(\"float\",\"vec2 a\",\"return a.y == 0.0 ? a.x : NaN;\"),coerceRealToComplex:jr(\"vec2\",\"float x\",\"return isnan(x) ? vec2(NaN, NaN) : vec2(x, 0);\"),complexSqrt:Gi(ye`float u = z.x; float v = z.y;\n    float r = sqrt(0.5 * (abs(u) + dcg_hypot(u, v)));\n    if (r == 0.0 || isnan(v) || isinf(v)) return dcg_complex(r, v);\n    if (u > 0.0) return dcg_complex(r, 0.5 * (v / r));\n    if (v < 0.0) r = -r;\n    return dcg_complex(0.5 * (v / r), r);`),complexDivide:jr(\"vec2\",\"vec2 a, vec2 b\",ye`float u1 = a.x; float v1 = a.y;\n      float u2 = b.x; float v2 = b.y;\n      if (isnan(u1) || isnan(v1) || isnan(u2) || isnan(v2)) return vec2(NaN, NaN);\n      if (isinf(u1) || isinf(v1)) return vec2(NaN, NaN);\n      if (u2 == 0.0 && v2 == 0.0) return vec2(NaN, NaN);\n      if (isinf(u2) || isinf(v2)) return vec2(0.0, 0.0);\n      if (abs(v2) <= abs(u2)) {\n        return dcg_subComplexDivide(a, b);\n      } else {\n        return dcg_conj(dcg_subComplexDivide(a.yx, b.yx));\n      }`),wirtingerEqualOrWarning:jr(\"vec2\",\"vec2 a, vec2 b\",\"return b;\"),complexLn:Gi(ye`float u = z.x; float v = z.y;\n      return dcg_complex(dcg_ln(dcg_hypot(u,v)), dcg_arctan(v,u));`),complexExp:Gi(ye`float u = z.x; float v = z.y;\n      if (isnan(u)) return vec2(NaN, NaN);\n      float r = exp(u);\n      return v == 0.0 ? vec2(r, 0.0) : dcg_complexFromPolarRounded(r, v);`),complexPow:jr(\"vec2\",\"vec2 z1, vec2 z2\",ye`float u2 = z2.x; float v2 = z2.y;\n      float u1 = z1.x; float v1 = z1.y;\n      if (isnan(u1) || isnan(v1) || isnan(u2) || isnan(v2))\n        return vec2(NaN, NaN);\n      float r1 = dcg_hypot(u1, v1);\n      float theta1 = dcg_arctan(v1, u1);\n      float rOut = pow(r1, u2) * exp(-theta1 * v2);\n      float thetaOut = log(r1) * v2 + theta1 * u2;\n      if (!isinf(rOut)) {\n        return dcg_complexFromPolarRounded(rOut, thetaOut);\n      } else {\n        return dcg_complexFromPolarRounded(\n          exp(u2 * log(r1) - theta1 * v2),\n          thetaOut\n        );\n      }\n      `),complexSin:Gi(ye`float u = z.x; float v = z.y;\n      return dcg_complex(dcg_sin(u) * dcg_cosh(v), dcg_cos(u) * dcg_sinh(v));`),complexCos:Gi(ye`float u = z.x; float v = z.y;\n      return dcg_complex(dcg_cos(u) * dcg_cosh(v), -dcg_sin(u) * dcg_sinh(v));`),complexSinh:Gi(ye`float u = z.x; float v = z.y;\n      return dcg_complex(dcg_sinh(u) * dcg_cos(v), dcg_cosh(u) * dcg_sin(v));`),complexCosh:Gi(ye`float u = z.x; float v = z.y;\n      return dcg_complex(dcg_cosh(u) * dcg_cos(v), dcg_sinh(u) * dcg_sin(v));`),complexTanh:Gi(ye`float u = z.x; float v = z.y;\n      float tanv = dcg_tan(v); float tanhu = dcg_tanh(u);\n      if (isnan(tanv) || isnan(tanhu)) return vec2(NaN, NaN);\n      if (isinf(tanv)) return vec2(1.0 / tanhu, 0.0);\n\n      float tanv2 = tanv * tanv;\n      float secv2 = 1.0 + tanv2;\n      float sinhu = dcg_sinh(u);\n      float sinhu2 = sinhu * sinhu;\n      float tanhu2 = tanhu * tanhu;\n      return dcg_complex(\n        (secv2 * tanhu) / (1.0 + tanv2 * tanhu2),\n        tanv / (1.0 + secv2 * sinhu2)\n      );`),complexTan:Gi(ye`float u = z.x; float v = z.y;\n      vec2 t = dcg_complexTanh(vec2(-v, u));\n      return vec2(t.y, -t.x);`),complexSec:Gi(\"return dcg_complexReciprocal(dcg_complexCos(z));\"),complexCsc:Gi(\"return dcg_complexReciprocal(dcg_complexSin(z));\"),complexCot:Gi(\"return dcg_complexReciprocal(dcg_complexTan(z));\"),complexSech:Gi(\"return dcg_complexReciprocal(dcg_complexCosh(z));\"),complexCsch:Gi(\"return dcg_complexReciprocal(dcg_complexSinh(z));\"),complexCoth:Gi(\"return dcg_complexReciprocal(dcg_complexTanh(z));\"),complexLogbase:jr(\"vec2\",\"vec2 z, vec2 base\",ye`\n      float u = z.x; float v = z.y;\n      float bu = base.x; float bv = base.y;\n      if (any(isnan(z)) || any(isnan(base))) return vec2(NaN, NaN);\n      if (bv == 0.0 && bu == 0.0) return vec2(NaN, NaN);\n      if (u == 0.0 && v == 0.0) return vec2(-Infinity, 0);${\"\"}\n      return dcg_complexDivide(dcg_complexLn(z), dcg_complexLn(base));`),complexLog:Gi(\"return dcg_complexLogbase(z, vec2(10.0,0.0));\")});function is(e){return jr(\"float\",\"float x\",e)}function Jn(e){return is(`return ${e};`)}function sF(e){return jr(\"float\",\"float x, float y\",e)}function ig(e){return sF(`return ${e};`)}function Gi(e){return jr(\"vec2\",\"vec2 z\",e)}var JY=pT({lcm:li(e=>ye`float g = abs(dcg_round(L[0]));\n      if (isnan(g) || isinf(g)) return NaN;\n      for (int i=1; i<${e}; i++) {\n        float v = abs(dcg_round(L[i]));\n        if (isnan(v) || isinf(v)) return NaN;\n        if (g != 0.0)\n          g *= dcg_round(v / dcg_gcd2(g, v));\n      }\n      return g;`),gcd:li(e=>ye`float g = abs(dcg_round(L[0]));\n      if (isnan(g) || isinf(g)) return NaN;\n      for (int i=1; i<${e}; i++) {\n        float x = L[i];\n        if (isnan(x) || isinf(x)) return NaN;\n        g = dcg_gcd2(g, abs(dcg_round(x)));\n      }\n      return g;`),mean:li(e=>ye`float tot = 0.0;\n      for (int i=0; i<${e}; i++) {\n        float x = L[i];\n        if (isnan(x) || (isinf(x) && x == -tot)) return NaN;\n        tot += x;\n      }\n      return tot / ${e}.0;`),total:li(e=>ye`float tot = 0.0;\n      for (int i=0; i<${e}; i++) {\n        float x = L[i];\n        if (isnan(x) || (isinf(x) && x == -tot)) return NaN;\n        tot += x;\n      }\n      return tot;`),stdev:li(e=>tF(e,e-1),{deps:[\"mean\"]}),stdevp:li(e=>tF(e,e),{deps:[\"mean\"]}),mad:li(e=>ye`float mean = dcg_mean(L);\n      if (isnan(mean) || isinf(mean)) return NaN;\n      float tot = 0.0;\n      for (int i=0; i<${e}; i++) {\n        tot += abs(L[i] - mean);\n      }\n      return tot / ${e}.0;`,{deps:[\"mean\"]}),listMin:li(e=>nF(e,\"min\")),listMax:li(e=>nF(e,\"max\")),argmin:li(e=>rF(e,\"<\")),argmax:li(e=>rF(e,\">=\")),median:li(e=>e%2===1?`return L[int(dcg_sortPerm(L)[${(e-1)/2}])];`:ye`float[${e}] perm = dcg_sortPerm(L);\n          return 0.5*(L[int(perm[${e/2}])]+L[int(perm[${e/2-1}])]);`,{deps:[\"sortPerm\"]}),varp:li(e=>eF(e,e),{deps:[\"mean\"]}),var:li(e=>eF(e,e-1),{deps:[\"mean\"]}),sortPerm:li(e=>{if(e>100)throw vp();return ye`float[${e}] permFloat;\n        float lastMin = -Infinity;\n        int lastIndex = -1;\n        for (int i=0; i<${e}; i++) {\n          float currMin = NaN;\n          int currIndex = ${e};\n          int j;\n          for (j=0; j<${e}; j++) {\n            float e = L[j];\n            float cmpLast = dcg_compareAscendingNaNLast(e, lastMin);\n            float cmpCurr = dcg_compareAscendingNaNLast(currMin, e);\n            if (\n              (cmpLast > 0.0 || (cmpLast == 0.0 && j > lastIndex))\n              && (cmpCurr > 0.0 || (cmpCurr == 0.0 && j < currIndex))\n            ) {\n              currMin = e;\n              currIndex = j;\n            }\n          }\n          permFloat[i] = float(currIndex);\n          lastMin = currMin;\n          lastIndex = currIndex;\n        }\n        return permFloat;`},{outType:e=>`float[${e}]`}),complexSortPerm:li(e=>{if(e>100)throw vp();return ye`float[${e}] permFloat;\n      vec2 lastMin = vec2(-Infinity,-Infinity);\n      int lastIndex = -1;\n      for (int i=0; i<${e}; i++) {\n        vec2 currMin = vec2(NaN,NaN);\n        int currIndex = ${e};\n        int j;\n        for (j=0; j<${e}; j++) {\n          vec2 e = L[j];\n          float cmpLast = dcg_compareComplexLexicographic(e, lastMin);\n          float cmpCurr = dcg_compareComplexLexicographic(currMin, e);\n          if (\n            (cmpLast > 0.0 || (cmpLast == 0.0 && j > lastIndex))\n            && (cmpCurr > 0.0 || (cmpCurr == 0.0 && j < currIndex))\n          ) {\n            currMin = e;\n            currIndex = j;\n          }\n        }\n        permFloat[i] = float(currIndex);\n        lastMin = currMin;\n        lastIndex = currIndex;\n      }\n      return permFloat;`},{inType:e=>`vec2[${e}]`,outType:e=>`float[${e}]`})});function eF(e,t){return t===0?\"return NaN;\":ye`float mean = dcg_mean(L);\n    if (isnan(mean) || isinf(mean)) return NaN;\n    float tot = 0.0;\n    for (int i=0; i<${e}; i++) {\n      float delta = L[i] - mean;\n      tot += delta * delta;\n    }\n    return tot / ${t}.0;`}function tF(e,t){return t===0?\"return NaN;\":ye`float mean = dcg_mean(L);\n    if (isnan(mean) || isinf(mean)) return NaN;\n    float tot = 0.0;\n    for (int i=0; i<${e}; i++) {\n      tot = dcg_hypot(tot, L[i] - mean);\n    }\n    return tot / ${Zm(Math.sqrt(t))};`}function nF(e,t){return ye`float m = L[0];\n    if (isnan(m)) return NaN;\n    for (int i=1; i<${e}; i++) {\n      float x = L[i];\n      if (isnan(x)) return NaN;\n      m = ${t}(m, x);\n    }\n    return m;`}function rF(e,t){return ye`if (isnan(L[0])) return 0.0;\n    int arg = 0;\n    float best = L[0];\n    for (int i=1; i<${e}; i++) {\n      float e = L[i];\n      if (isnan(e)) return 0.0;\n      if (e ${t} best) {\n        arg = i;\n        best = e;\n      }\n    }\n    return float(arg + 1);`}var QY=pT({cov:lT(e=>oF(e,e-1)),covp:lT(e=>oF(e,e)),corr:lT(e=>ye`${aF(e)}\n      float t1 = 0.0;\n      float t2 = 0.0;\n      float tc = 0.0;\n      for (int i=0; i<${e}; i++) {\n        float d1 = X[i] - m1;\n        float d2 = Y[i] - m2;\n        t1 = dcg_hypot(t1, d1);\n        t2 = dcg_hypot(t2, d2);\n        tc += d1 * d2;\n      }\n      return tc / (t1 * t2);`)}),KY={type:\"elementsAt\",value:(e,t)=>`${e}[${t}] dcg_elementsAt(${e}[${t}] X, float[${t}] Y) {\n      ${e}[${t}] outList;\n      for (int i=0; i<${t}; i++) {\n        outList[i] = X[int(Y[i])];\n      }\n      return outList;\n    }`},eZ={...iF,...JY,...QY,elementsAt:KY},dT=eZ;function oF(e,t){return ye`${aF(e)}\n    float tot = 0.0;\n    for (int i=0; i<${e}; i++) {\n      tot += (X[i] - m1) * (Y[i] - m2);\n    }\n    return tot / ${t}.0;`}function aF(e){return ye`float m1 = 0.0;\n    for (int i=0; i<${e}; i++) {\n      float x = X[i];\n      if (isnan(x) || isinf(x)) return NaN;\n      m1 += x;\n    }\n    m1 /= ${e}.0;\n    float m2 = 0.0;\n    for (int i=0; i<${e}; i++) {\n      float y = Y[i];\n      if (isnan(y) || isinf(y)) return NaN;\n      m2 += y;\n    }\n    m2 /= ${e}.0;`}var tZ=[ye`float dcg_rawpow(float x, float y) {\n    if (isnan(x) || isnan(y)) return NaN;\n    if (y==0.0) return 1.0;\n    if (isinf(y)) {${\"\"}\n      float a = abs(x);\n      if (a == 1.0) return NaN;\n      if (y > 0.0) {\n        return a > 1.0 ? Infinity : 0.0;\n      } else {\n        return a < 1.0 ? Infinity : 0.0;\n      }\n    }\n    if (x > 0.0) return pow(x, y);\n    else if (x == 0.0) {\n      if (y > 0.0) return 0.0;\n      else if (y == 0.0) return 1.0;\n      else return Infinity;\n    } else {\n      float m = mod(y, 2.0);\n      if (m == 1.0) return -pow(-x, y);\n      else return pow(-x, y);\n    }\n  }`,ye`float dcg_pow(float x, float y) {\n    if (isnan(x) || isnan(y)) return NaN;\n    if (y==0.0) return 1.0;\n    if (isinf(y)) {\n      float a = abs(x);\n      if (a == 1.0) return NaN;\n      if (y > 0.0) {\n        return a > 1.0 ? Infinity : 0.0;\n      } else {\n        return a < 1.0 ? Infinity : 0.0;\n      }\n    }\n    if (x > 0.0) return pow(x,y);\n    else if (x == 0.0) {\n      if (y > 0.0) return 0.0;\n      if (y == 0.0) return 1.0;\n      if (y < 0.0) return Infinity;\n    } else {\n      float m = mod(y, 2.0);\n      if (m == 0.0) return pow(-x, y);\n      else if (m == 1.0) return -pow(-x, y);\n      else {${\"\"}\n        vec2 a0 = vec2(0.0, 1.0);\n        vec2 a1 = vec2(1.0, 0.0);\n        float approx = y;\n        for (int i=0; i<12; i+=1) {\n          float whole = floor(approx);\n          vec2 a = whole * a1 + a0;\n          if (a.y > 100.0) break;\n          a0 = a1; a1 = a;\n          if (approx == whole) break;\n          approx = 1.0 / (approx - whole);\n        }${\"\"}\n        float r = a1.x / a1.y;\n        float m = max(max(abs(y), abs(r)), 1.0);\n        if (abs(mod(a1.y, 2.0) - 1.0) < 0.01 && abs((r - y)/y) < 0.00001) {\n          return (mod(a1.x, 2.0) == 0.0 ? 1.0 : -1.0) * pow(-x, y);\n        } else {\n          return NaN;\n        }\n      }\n    }\n  }`,ye`float dcg_add(float x, float y) {\n    return isnan(x) || isnan(y) ? NaN\n      : isinf(x) && isinf(y) && x != y ? NaN\n      : x + y;\n  }`,ye`float dcg_sub(float x, float y) {\n    return isnan(x) || isnan(y) ? NaN\n      : isinf(x) && isinf(y) && x != -y ? NaN\n      : x - y;\n  }`,ye`float dcg_mul(float x, float y) {\n    return isnan(x) || isnan(y) ? NaN\n      : isinf(x) && y == 0.0 ? NaN\n      : x == 0.0 && isinf(y) ? NaN\n      : x * y;\n  }`,ye`float dcg_div(float x, float y) {\n    return isnan(x) || isnan(y) ? NaN\n      : isinf(x) && isinf(y) ? NaN\n      : x == 0.0 && y == 0.0 ? NaN\n      : x / y;\n  }`,ye`float dcg_neg(float x) {\n    return isnan(x) ? NaN : -x;\n  }`,ye`float dcg_square(float x) {\n    return x*x;\n  }`,ye`bool dcg_equal(float x, float y) {\n    return isnan(x) || isnan(y) ? false : x == y;\n  }`,ye`bool dcg_less(float x, float y) {\n    return isnan(x) || isnan(y) ? false : x < y;\n  }`,ye`bool dcg_lessEqual(float x, float y) {\n    return isnan(x) || isnan(y) ? false : x <= y;\n  }`,ye`bool dcg_greater(float x, float y) {\n    return isnan(x) || isnan(y) ? false : x > y;\n  }`,ye`bool dcg_greaterEqual(float x, float y) {\n    return isnan(x) || isnan(y) ? false : x >= y;\n  }`,ye`float dcg_gcd2(float u, float v) {\n    for (int i=0; i<95; i++) {\n      if (v == 0.0) break;\n      u = mod(u, v);\n      if (u == 0.0) break;\n      v = mod(v, u);\n    }\n    return u+v;\n  }`,ye`float dcg_log1p(float x) {\n    return x - 0.5 * x * x == x ? x : log(1.0 + x);\n  }`,\"vec2 dcg_conj(vec2 a) { return vec2(a.x, -a.y); }\",ye`vec2 dcg_subComplexDivide(vec2 a, vec2 b) {\n    float u1 = a.x; float v1 = a.y;\n    float u2 = b.x; float v2 = b.y;\n    float r = v2 / u2;\n    float t = 1.0 / (u2 + v2 * r);\n    if (r == 0.0) {\n      return dcg_complex((u1 + v2 * (v1 / u2)) * t, (v1 - v2 * (u1 / u2)) * t);\n    } else {\n      return dcg_complex((u1 + v1 * r) * t, (v1 - u1 * r) * t);\n    }\n  }`,ye`vec2 dcg_complexFromPolarRounded(float r, float theta) {\n    if (isnan(r) || isnan(theta)) return vec2(NaN, NaN);\n    if (r == 0.0) return vec2(0.0, 0.0);\n    return dcg_complex(r * dcg_cos(theta), r * dcg_sin(theta));\n  }`,ye`vec2 dcg_complexReciprocal(vec2 z) {\n    return dcg_complexDivide(vec2(1.0,0.0), z);\n  }`,ye`float dcg_compareAscendingNaNLast(float x, float y) {\n    float diff = dcg_sub(x,y);\n    return !isnan(diff) ? diff : float(isnan(x)) - float(isnan(y));\n  }`,ye`float dcg_compareComplexLexicographic(vec2 x, vec2 y) {\n    float realComparison = dcg_compareAscendingNaNLast(x.x, y.x);\n    return realComparison != 0.0 ? realComparison : dcg_compareAscendingNaNLast(x.y, y.y);\n  }`].join(`\n`),nZ=`\n  float dcg_round(float x);\n  float dcg_hypot(float x, float y);\n  float dcg_rtxsqpone(float x);\n  float dcg_rtxsqmone(float x);\n  float dcg_cos(float x);\n  float dcg_sin(float x);\n  float dcg_tan(float x);\n  float dcg_tanh(float x);\n  vec2 dcg_complex(float u, float v);\n  vec2 dcg_complexDivide(vec2 a, vec2 b);\n`,rZ=Object.values(iF).map(e=>e.value).join(`\n`),dle=ye`uniform float NaN;\n    uniform float Infinity;\n    #define dcg_PI 3.141592653589793\n    ${nZ}\\n\n    ${tZ}\\n\n    ${rZ}`;var oZ=Le`\n  const uint dNaN = uint(1);\n  const uint dUnionNaN = uint(2);\n  const uint dDefined = uint(3);\n  const uint dContinuous = uint(4);\n\n  uint unionNaN(uint deco) {\n    return min(deco, dUnionNaN);\n  }\n\n  uint discontinuous(uint deco) {\n    return min(deco, dDefined);\n  }\n\n  uint constant(uint deco) {\n    return deco >= dDefined ? dContinuous : deco;\n  }\n`,pF={sin:jn(Le`iFloat iSin(iFloat x) {\n    float u = dcg_PI * round(x.l / dcg_PI) + dcg_PI * 1.5;\n\n    if (u < x.u) {\n      return iFloat(-1.0, 1.0, x.deco);\n    }\n\n    u -= dcg_PI;\n    vec2 s = vec2(sin(x.l), sin(x.u));\n    vec2 r = vec2(min(s.x, s.y), max(s.x, s.y));\n\n    if (u < x.u) {\n      float s = sin(u);\n      return iFloat(min(r.x, s), max(r.y, s), x.deco);\n    }\n\n    return iFloat(r.x, r.y, x.deco);\n  }`),cos:jn(Le`iFloat iCos(iFloat x) {\n    return iSin(iAdd(x, ifloat(dcg_PI / 2.0, dContinuous)));\n  }`),tan:jn(Le`iFloat iTan(iFloat x) {\n    float a = tan(x.l);\n    float b = tan(x.u);\n    if (b < a || isinf(a) || isinf(b) || x.u - x.l >= dcg_PI) {\n      ${\"\"}\n      return iFloat(-Infinity, Infinity, discontinuous(x.deco));\n    }\n    return iFloat(a, b, x.deco);\n  }`),arcsin:jn(Le`iFloat iArcsin(iFloat x) {\n    if (x.u < -1.0) {\n      return EMPTY_SET;\n    }\n\n    if (x.l <= -1.0) {\n      if (x.u < 1.0) {\n        ${\"\"}\n        return iFloat(-dcg_PI / 2.0, asin(x.u), unionNaN(x.deco));\n      } else {\n        ${\"\"}\n        return iFloat(-dcg_PI / 2.0, dcg_PI / 2.0, unionNaN(x.deco));\n      }\n    }\n\n    if (x.u < 1.0) {\n      ${\"\"}\n      return iFloat(asin(x.l), asin(x.u), x.deco);\n    }\n\n    if (x.l < 1.0) {\n      ${\"\"}\n      return iFloat(asin(x.l), dcg_PI / 2.0, unionNaN(x.deco));\n    }\n\n    if (x.l == 1.0) {\n      ${\"\"}\n      return ifloat(dcg_PI / 2.0, unionNaN(x.deco));\n    }\n\n    ${\"\"}\n    return EMPTY_SET;\n  }`),arccos:jn(Le`iFloat iArccos(iFloat x) {\n    if (x.u < -1.0) {\n      return EMPTY_SET;\n    }\n\n    if (x.l <= -1.0) {\n      if (x.u < 1.0) {\n        ${\"\"}\n        return iFloat(acos(x.u), dcg_PI, unionNaN(x.deco));\n      } else {\n        ${\"\"}\n        return iFloat(0.0, dcg_PI, unionNaN(x.deco));\n      }\n    }\n\n    if (x.u < 1.0) {\n      ${\"\"}\n      return iFloat(acos(x.u), acos(x.l), x.deco);\n    }\n\n    if (x.l < 1.0) {\n      ${\"\"}\n      return iFloat(0.0, acos(x.l), unionNaN(x.deco));\n    }\n\n    if (x.l == 1.0) {\n      ${\"\"}\n      return ifloat(0.0, unionNaN(x.deco));\n    }\n\n    ${\"\"}\n    return EMPTY_SET;\n  }`),arctan:jn(Le`iFloat iArctan(iFloat y, iFloat x) {\n    uint min_deco = min(y.deco, x.deco);\n\n    if (x.u < 0.0) {\n      if (y.u < 0.0) {\n        ${\"\"}\n        return iFloat(atan(y.u, x.l), atan(y.l, x.u), min_deco);\n      }\n\n      if (y.l < 0.0) {\n        ${\"\"}\n        return iFloat(-dcg_PI, dcg_PI, discontinuous(min_deco));\n      }\n\n      ${\"\"}\n      return iFloat(atan(y.u, x.u), atan(y.l, x.l), min_deco);\n    }\n\n    if (x.u == 0.0) {\n      if (x.l < 0.0) {\n        if (y.u < 0.0) {\n          ${\"\"}\n          return iFloat(atan(y.u, x.l), -dcg_PI / 2.0, min_deco);\n        }\n\n        if (y.l < 0.0) {\n          ${\"\"}\n          return iFloat(-dcg_PI, dcg_PI, discontinuous(min_deco));\n        }\n\n        if (y.l == 0.0) {\n          ${\"\"}\n          return iFloat(0.0, dcg_PI, discontinuous(min_deco));\n        }\n\n        ${\"\"}\n        return iFloat(dcg_PI / 2.0, atan(y.l, x.l), min_deco);\n      }\n\n      ${\"\"}\n\n      if (y.u < 0.0) {\n        ${\"\"}\n        return ifloat(-dcg_PI / 2.0, constant(min_deco));\n      }\n\n      if (y.u == 0.0) {\n        if (y.l < 0.0) {\n          ${\"\"}\n          return iFloat(-dcg_PI / 2.0, 0.0, discontinuous(min_deco));\n        }\n\n        ${\"\"}\n        return ifloat(0.0, constant(min_deco));\n      }\n\n      if (y.l < 0.0) {\n        ${\"\"}\n        return iFloat(-dcg_PI / 2.0, dcg_PI / 2.0, discontinuous(min_deco));\n      }\n\n      if (y.l == 0.0) {\n        ${\"\"}\n        return iFloat(0.0, dcg_PI / 2.0, discontinuous(min_deco));\n      }\n\n      ${\"\"}\n      return ifloat(dcg_PI / 2.0, constant(min_deco));\n    }\n\n    ${\"\"}\n    if (x.l < 0.0) {\n      if (y.u < 0.0) {\n        ${\"\"}\n        return iFloat(atan(y.u, x.l), atan(y.u, x.u), min_deco);\n      }\n\n      if (y.u == 0.0) {\n        if (y.l == 0.0) {\n          ${\"\"}\n          return iFloat(0.0, dcg_PI, discontinuous(min_deco));\n        }\n\n        ${\"\"}\n        return iFloat(-dcg_PI, dcg_PI, discontinuous(min_deco));\n      }\n\n      if (y.l < 0.0) {\n        ${\"\"}\n        return iFloat(-dcg_PI, dcg_PI, discontinuous(min_deco));\n      }\n\n      if (y.l == 0.0) {\n        ${\"\"}\n        return iFloat(0.0, dcg_PI, discontinuous(min_deco));\n      }\n\n      ${\"\"}\n      return iFloat(atan(y.l, x.u), atan(y.l, x.l), min_deco);\n    }\n\n    if (x.l == 0.0) {\n      if (y.u == 0.0) {\n        ${\"\"}\n        return iFloat(-dcg_PI / 2.0, 0.0, discontinuous(min_deco));\n      }\n\n      if (y.u < 0.0) {\n        ${\"\"}\n        return iFloat(-dcg_PI / 2.0, atan(y.u, x.u), min_deco);\n      }\n\n      if (y.l < 0.0) {\n        ${\"\"}\n        return iFloat(-dcg_PI / 2.0, dcg_PI / 2.0, discontinuous(min_deco));\n      }\n\n      if (y.l == 0.0) {\n        ${\"\"}\n        return iFloat(0.0, dcg_PI / 2.0, discontinuous(min_deco));\n      }\n\n      ${\"\"}\n      return iFloat(atan(y.l, x.u), dcg_PI / 2.0, min_deco);\n    }\n\n    ${\"\"}\n    return iAtan(iDiv(y, x));\n  }`),sinh:jn(Le`iFloat iSinh(iFloat x) {\n    return iFloat(sinh(x.l), sinh(x.u), x.deco);\n  }`),cosh:jn(Le`iFloat iCosh(iFloat x) {\n    if (x.u <= 0.0) {\n      return iFloat(cosh(x.u), cosh(x.l), x.deco);\n    }\n\n    if (x.l <= 0.0 && 0.0 < x.u) {\n      return iFloat(1.0, cosh(max(-x.l, x.u)), x.deco);\n    }\n\n    return iFloat(cosh(x.l), cosh(x.u), x.deco);\n  }`),tanh:jn(Le`iFloat iTanh(iFloat x) {\n    return iFloat(dcg_tanh(x.l), dcg_tanh(x.u), x.deco);\n  }`),arcsinh:jn(Le`iFloat iArcsinh(iFloat x) {\n    return iFloat(dcg_arcsinh(x.l), dcg_arcsinh(x.u), x.deco);\n  }`),arccosh:jn(Le`iFloat iArccosh(iFloat x) {\n    if (x.u < 1.0) {\n      ${\"\"}\n      return EMPTY_SET;\n    }\n\n    if (x.u == 1.0) {\n      ${\"\"}\n      uint deco = x.l == 1.0 ? x.deco : unionNaN(x.deco);\n      return ifloat(0.0, deco);\n    }\n\n    if (x.l < 1.0) {\n      ${\"\"}\n      return iFloat(0.0, acosh(x.u), unionNaN(x.deco));\n    }\n\n    ${\"\"}\n    return iFloat(acosh(x.l), acosh(x.u), x.deco);\n  }`),arctanh:jn(Le`iFloat iArctanh(iFloat x) {\n    if (x.u <= -1.0) {\n      return EMPTY_SET;\n    }\n\n    if (x.l <= -1.0) {\n      if (x.u < 1.0) {\n        return iFloat(-Infinity, atanh(x.u), unionNaN(x.deco));\n      }\n\n      return iFloat(-Infinity, Infinity, unionNaN(x.deco));\n    }\n\n    if (x.l < 1.0) {\n      if (x.u < 1.0) {\n        return iFloat(atanh(x.l), atanh(x.u), x.deco);\n      }\n\n      return iFloat(atanh(x.l), Infinity, unionNaN(x.deco));\n    }\n\n    return EMPTY_SET;\n  }`),exp:jn(Le`iFloat iExp(iFloat x) {\n    return iFloat(exp(x.l), exp(x.u), x.deco);\n  }`),ln:jn(Le`iFloat iLn(iFloat x) {\n    if (x.l > 0.0) {\n      return iFloat(log(x.l), log(x.u), x.deco);\n    }\n\n    if (x.u > 0.0) {\n      return iFloat(-Infinity, log(x.u), unionNaN(x.deco));\n    }\n\n    return EMPTY_SET;\n  }`),pow:jn(Le`iFloat iPow(iFloat x, iFloat y) {\n    uint min_deco = min(y.deco, x.deco);\n\n    ${\"\"}\n    if (x.l < 0.0 && y.l == y.u && fract(y.l) == 0.0) {\n      float y = y.l;\n\n      if (y == 0.0) {\n        return ifloat(1.0, constant(min_deco));\n      }\n\n      if (y > 0.0) {\n        if (mod(y, 2.0) == 1.0) {\n          ${\"\"}\n          return iFloat(-pow(-x.l, y), pow(abs(x.u), y) * sign(x.u), min_deco);\n        }\n\n        if (x.u > 0.0) {\n          ${\"\"}\n          return iFloat(0.0, pow(max(-x.l, x.u), y), min_deco);\n        }\n\n        ${\"\"}\n        return iFloat(pow(-x.u, y), pow(-x.l, y), min_deco);;\n      }\n\n      if (mod(y, 2.0) == 1.0) {\n        if (x.u > 0.0) {\n          ${\"\"}\n          return iFloat(-Infinity, Infinity, min_deco);\n        }\n\n        if (x.u == 0.0) {\n          ${\"\"}\n          return iFloat(-Infinity, -pow(-x.l, y), min_deco);\n        }\n\n        ${\"\"}\n        return iFloat(-pow(-x.u, y), -pow(-x.l, y), min_deco);\n      }\n\n      if (x.u > 0.0) {\n        ${\"\"}\n        return iFloat(min(pow(-x.l, y), pow(x.u, y)), Infinity, min_deco);\n      }\n\n      if (x.u == 0.0) {\n        ${\"\"}\n        return iFloat(pow(-x.l, y), Infinity, min_deco);\n      }\n\n      ${\"\"}\n      return iFloat(pow(-x.l, y), pow(-x.u, y), min_deco);\n    }\n\n    ${\"\"}\n\n    if (x.u < 0.0) {\n      ${\"\"}\n      return EMPTY_SET;\n    }\n\n    if (x.l < 0.0) {\n      ${\"\"}\n      min_deco = unionNaN(x.deco);\n    }\n\n    if (x.u == 0.0) {\n      ${\"\"}\n      ${\"\"}\n\n      if (y.l > 0.0) {\n        ${\"\"}\n        return ifloat(0.0, constant(min_deco));\n      }\n\n      if (y.l == 0.0) {\n        if (y.u > 0.0) {\n          ${\"\"}\n          return iFloat(0.0, 1.0, discontinuous(min_deco));\n        }\n\n        ${\"\"}\n        return ifloat(1.0, constant(min_deco));\n      }\n\n      if (y.u > 0.0) {\n        ${\"\"}\n        return iFloat(0.0, Infinity, discontinuous(min_deco));\n      }\n\n      if (y.u == 0.0) {\n        ${\"\"}\n        return iFloat(1.0, Infinity, discontinuous(min_deco));\n      }\n\n      ${\"\"}\n      return ifloat(Infinity, constant(min_deco));\n    }\n\n    ${\"\"}\n\n    if (x.l <= 0.0) {\n      ${\"\"}\n      if (y.u <= 0.0) {\n        if (y.l == 0.0) {\n          ${\"\"}\n          return ifloat(1.0, min_deco);\n        }\n\n        if (x.u < 1.0) {\n          ${\"\"}\n          return iFloat(pow(x.u, y.u), Infinity, discontinuous(min_deco));\n        }\n\n        ${\"\"}\n        return iFloat(pow(x.u, y.l), Infinity, discontinuous(min_deco));\n      }\n\n      ${\"\"}\n\n      if (y.l < 0.0) {\n        ${\"\"}\n        return iFloat(0.0, Infinity, discontinuous(min_deco));\n      }\n\n      if (y.l == 0.0) {\n        ${\"\"}\n        return iFloat(0.0, max(1.0, pow(x.u, y.u)), discontinuous(min_deco));\n      }\n\n      ${\"\"}\n      if (x.l < 0.0) {\n        x.l = 0.0;\n      }\n    }\n\n    ${\"\"}\n    ${\"\"}\n    return iMinMaxFloat(pow(x.l, y.l), pow(x.l, y.u), pow(x.u, y.l), pow(x.u, y.u), min_deco);\n  }`),rawpow:jn(Le`iFloat iRawpow(iFloat x, iFloat y) {\n    return iPow(x, y);\n  }`),sqrt:jn(Le`iFloat iSqrt(iFloat x) {\n    if (x.u < 0.0) {\n      ${\"\"}\n      return EMPTY_SET;\n    }\n\n    if (x.u == 0.0) {\n      ${\"\"}\n      return ifloat(0.0, x.l == 0.0 ? x.deco : unionNaN(x.deco));\n    }\n\n    if (x.l < 0.0) {\n      ${\"\"}\n      return iFloat(0.0, sqrt(x.u), unionNaN(x.deco));\n    }\n\n    ${\"\"}\n    return iFloat(sqrt(x.l), sqrt(x.u), x.deco);\n  }`),sign:jn(Le`iFloat iSign(iFloat x) {\n    uint deco = x.l <= 0.0 && x.u >= 0.0 && x.l != x.u\n      ? discontinuous(x.deco)\n      : x.deco;\n\n    return iFloat(sign(x.l), sign(x.u), deco);\n  }`),abs:jn(Le`iFloat iAbs(iFloat x) {\n    if (x.l >= 0.0) {\n      return x;\n    }\n\n    if (x.u <= 0.0) {\n      return iNeg(x);\n    }\n\n    return iFloat(0.0, max(-x.l, x.u), x.deco);\n  }`),hypot:jn(Le`iFloat iHypot(iFloat x, iFloat y) {\n    iFloat absX = iAbs(x);\n    iFloat absY = iAbs(y);\n    float lo = dcg_hypot(absX.lo, absY.lo);\n    float hi = dcg_hypot(absX.hi, absY.hi);\n    uint min_deco = min(x.deco, y.deco);\n    return iFloat(lo, hi, min_deco);\n  }`),floor:jn(Le`iFloat iFloor(iFloat x) {\n    float lo = floor(x.l);\n    float hi = floor(x.u);\n    uint deco = lo == hi ? x.deco : discontinuous(x.deco);\n    return iFloat(lo, hi, deco);\n  }`),ceil:jn(Le`iFloat iCeil(iFloat x) {\n    float lo = ceil(x.l);\n    float hi = ceil(x.u);\n    uint deco = lo == hi ? x.deco : discontinuous(x.deco);\n    return iFloat(lo, hi, deco);\n  }`),round:jn(Le`iFloat iRound(iFloat x) {\n    float lo = dcg_round(x.l);\n    float hi = dcg_round(x.u);\n    uint deco = lo == hi ? x.deco : discontinuous(x.deco);\n    return iFloat(lo, hi, deco);\n  }`),mod:jn(Le`iFloat iMod(iFloat x, iFloat y) {\n    return iSub(x, iMul(y, iFloor(iDiv(x, y))));\n  }`),distance:jn(Le`iFloat iDistance(iVec2 a, iVec2 b) {\n    return iHypot(iSub(a.x, b.x), iSub(a.y, b.y));\n  }`),distanceThreeD:jn(Le`iFloat iDistanceThreeD(iVec3 a, iVec3 b) {\n    return iHypot(iHypot(iSub(a.x, b.x), iSub(a.y, b.y)), iSub(a.z, b.z));\n  }`),min:jn(Le`iFloat iMin(iFloat x, iFloat y) {\n    uint min_deco = min(x.deco, y.deco);\n    return iFloat(min(x.l, y.l), min(x.u, y.u), min_deco);\n  }`),max:jn(Le`iFloat iMax(iFloat x, iFloat y) {\n    uint min_deco = min(x.deco, y.deco);\n    return iFloat(max(x.l, y.l), max(x.u, y.u), min_deco);\n  }`)},iZ={lcm:Ys(e=>Le`iFloat iLcm(iFloat[${e}] L) {\n      float wideLo = 1.0;\n      float wideHi = 1.0;\n      float lcm = 1.0;\n      uint deco = dContinuous;\n      for (int i=0; i<${e}; i++) {\n        iFloat v = iAbs(iRound(L[i]));\n        deco = min(deco, v.deco);\n        if (!isinf(v.lo) && v.lo == v.hi) {\n          ${\"\"}\n          if (v.lo == 0.0) {\n            ${\"\"}\n            ${\"\"}\n            lcm = 0.0;\n          }\n          lcm *= dcg_round(v.lo / dcg_gcd2(lcm, v.lo));\n        } else {${\"\"}\n          if (v.lo == 0.0 || wideLo == 0.0) {\n            wideLo = 0.0;\n          } else {\n            wideLo = max(wideLo, v.lo);\n          }\n          if (isinf(wideHi) || isinf(v.hi)) {\n            wideHi = Infinity;\n            ${\"\"}\n            deco = unionNaN(deco);\n          } else {\n            wideHi *= v.hi;\n          }\n        }\n      }\n      return iFloat(wideLo * lcm, wideHi * lcm, deco);\n    }`),gcd:Ys(e=>Le`iFloat iGcd(iFloat[${e}] L) {\n      float gcd = 0.0;\n      bool seenWide = false;\n      bool seenZero = false;\n      float wideHi = 1.0;\n      uint deco = dContinuous;\n      for (int i=0; i<${e}; i++) {\n        iFloat v = iAbs(iRound(L[i]));\n        deco = min(deco, v.deco);\n        if (!isinf(v.lo) && v.lo == v.hi) {${\"\"}\n          gcd = dcg_gcd2(gcd, v.lo);\n          if (v.lo == 0.0)\n              seenZero = true;\n        } else {${\"\"}\n          if (seenWide) {\n            wideHi = min(wideHi, v.hi);\n          } else {\n            wideHi = v.hi;\n          }\n          seenWide = true;\n          if (v.lo == 0.0)\n            seenZero = true;\n        }\n      }\n      if (gcd == 0.0) {${\"\"}\n        if (seenWide) {${\"\"}\n          gcd = 1.0;\n        } else {${\"\"}\n          return iFloat(0.0, 0.0, deco);\n        }\n      }\n      if (!seenWide) {${\"\"}\n        return iFloat(gcd, gcd, deco);\n      }\n      float lo = seenZero ? 0.0 : 1.0;\n      return iFloat(lo, wideHi * gcd, deco);\n    }`),mean:Ys(e=>Le`iFloat iMean(iFloat[${e}] L) {\n      iFloat tot = iFloat(0.0, 0.0, dContinuous);\n      for (int i=0; i<${e}; i++) {\n        iFloat x = L[i];\n        tot.deco = min(tot.deco, x.deco);\n        tot.lo += x.lo;\n        tot.hi += x.hi;\n      }\n      return iFloat(tot.lo / ${e}.0, tot.hi / ${e}.0, tot.deco);\n    }`),total:Ys(e=>Le`iFloat iTotal(iFloat[${e}] L) {\n      iFloat tot = iFloat(0.0, 0.0, dContinuous);\n      for (int i=0; i<${e}; i++) {\n        iFloat x = L[i];\n        tot.deco = min(tot.deco, x.deco);\n        tot.lo += x.lo;\n        tot.hi += x.hi;\n      }\n      return tot;\n    }`),stdev:Ys(e=>cF(\"iStdev\",e,e-1),{depsInterval:[\"mean\"]}),stdevp:Ys(e=>cF(\"iStdevp\",e,e),{depsInterval:[\"mean\"]}),mad:Ys(e=>Le`iFloat iMad(iFloat[${e}] L) {\n      iFloat mean = iMean(L);\n      iFloat tot = iFloat(0.0, 0.0, dContinuous);\n      for (int i=0; i<${e}; i++) {\n        tot = iAdd(tot, iAbs(iSub(L[i], mean)));\n      }\n      return iFloat(tot.lo / ${e}.0, tot.hi / ${e}.0, tot.deco);\n    }`,{depsInterval:[\"mean\"]}),listMin:Ys(e=>lF(\"iListMin\",e,\"min\")),listMax:Ys(e=>lF(\"iListMax\",e,\"max\")),median:Ys(e=>Le`iFloat iMedian(iFloat[${e}] L) {\n      float[${e}] lo;\n      float[${e}] hi;\n      uint deco = dContinuous;\n      for (int i=0; i<${e}; i++) {\n        iFloat x = L[i];\n        deco = min(deco, x.deco);\n        lo[i] = x.lo;\n        hi[i] = x.hi;\n      }\n      return iFloat(dcg_median(lo), dcg_median(hi), deco);\n    }`,{deps:[\"sortPerm\",\"median\"]}),varp:Ys(e=>uF(\"iVarp\",e,e),{depsInterval:[\"mean\"]}),var:Ys(e=>uF(\"iVar\",e,e-1),{depsInterval:[\"mean\"]})};function uF(e,t,n){return n===0?Le`iFloat ${e}(iFloat[${t}] L) {\n      return EMPTY_SET;\n    }`:Le`iFloat ${e}(iFloat[${t}] L) {\n    iFloat mean = iMean(L);\n    iFloat tot = iFloat(0.0, 0.0, dContinuous);\n    for (int i=0; i<${t}; i++) {\n      iFloat delta = iSub(L[i], mean);\n      tot = iAdd(tot, iSquare(delta));\n    }\n    return iFloat(tot.lo / ${n}.0, tot.hi / ${n}.0, tot.deco);\n  }`}function cF(e,t,n){if(n===0)return Le`iFloat ${e}(iFloat[${t}] L) {\n      return EMPTY_SET;\n    }`;let r=Zm(Math.sqrt(n));return Le`iFloat ${e}(iFloat[${t}] L) {\n    iFloat mean = iMean(L);\n    iFloat tot = iFloat(0.0, 0.0, dContinuous);\n    for (int i=0; i<${t}; i++) {\n      iFloat delta = iSub(L[i], mean);\n      tot = iHypot(tot, delta);\n    }\n    return iFloat(tot.lo / ${r}, tot.hi / ${r}, tot.deco);\n  }`}function lF(e,t,n){return Le`iFloat ${e}(iFloat[${t}] L) {\n      iFloat res = L[0];\n      for (int i=1; i<${t}; i++) {\n        iFloat x = L[i];\n        res.lo = ${n}(res.lo, x.lo);\n        res.hi = ${n}(res.hi, x.hi);\n        res.deco = min(res.deco, x.deco);\n      }\n      return res;\n  }`}var sZ={...pF,...iZ},mT=sZ;var aZ=Le`struct iFloat {\n    float l;\n    float u;\n    uint deco;\n  };\n\n  struct iVec2 {\n    iFloat x;\n    iFloat y;\n  };\n\n  struct iVec3 {\n    iFloat x;\n    iFloat y;\n    iFloat z;\n  };\n\n  struct iBool {\n    bool l;\n    bool u;\n  };`,uZ=Le`iFloat ifloat(float x, uint deco) {\n    return iFloat(x, x, deco);\n  }\n  iBool ibool(bool x) {\n    return iBool(x, x);\n  }`,cZ=Le`const iFloat EMPTY_SET = iFloat(0.0, 0.0, dNaN);`,lZ=[Le`iFloat iMinMaxFloat(float x, float y, float z, float w, uint deco) {\n    return iFloat(\n      min(x, min(y, min(z, w))),\n      max(x, max(y, max(z, w))),\n      deco\n    );\n  }`,Le`iFloat iSquare(iFloat x) {\n      if (x.u <= 0.0) {\n        ${\"\"}\n        return iFloat(x.u * x.u, x.l * x.l, x.deco);\n      }\n\n      if (x.l >= 0.0) {\n        ${\"\"}\n        return iFloat(x.l * x.l, x.u * x.u, x.deco);\n      }\n\n      ${\"\"}\n      float t = max(-x.l, x.u);\n      return iFloat(0.0, t * t, x.deco);\n  }`,Le`iFloat iAtan(iFloat x) {\n    return iFloat(atan(x.l), atan(x.u), x.deco);\n  }`,Le`iFloat iInv(iFloat x) {\n    if (x.l > 0.0 || x.u < 0.0) {\n      ${\"\"}\n      return iFloat(1.0 / x.u, 1.0 / x.l, x.deco);\n    } else if (x.l < 0.0 && x.u > 0.0) {\n      ${\"\"}\n      return iFloat(-Infinity, Infinity, discontinuous(x.deco));\n    } else if (x.u == 0.0) {\n      ${\"\"}\n      return iFloat(-Infinity, Infinity, discontinuous(x.deco));\n    } else {\n      ${\"\"}\n      return iFloat(1.0 / x.u, Infinity, x.deco);\n    }\n  }`,Le`iFloat iDiv(iFloat x, iFloat y) {\n    return iMul(x, iInv(y));\n  }`,Le`iFloat iNeg(iFloat x) {\n    return iFloat(-x.u, -x.l, x.deco);\n  }`,Le`iFloat iTernary(iBool P, iFloat x, iFloat y) {\n    if (P.l) {\n      ${\"\"}\n      return x;\n    }\n\n    if (!P.u) {\n      ${\"\"}\n      return y;\n    }\n\n    ${\"\"}\n    ${\"\"}\n    if (x.deco == dNaN) {\n      return iFloat(y.lo, y.hi, unionNaN(y.deco));\n    } else if (y.deco == dNaN) {\n      return iFloat(x.lo, x.hi, unionNaN(x.deco));\n    } else {\n      uint min_deco = min(x.deco, y.deco);\n      return iFloat(min(x.l, y.l), max(x.u, y.u), discontinuous(min_deco));\n    }\n  }`,Le`iBool iEqual(iFloat x, iFloat y) {\n    if (x.lo == x.hi && x.hi == y.lo && y.lo == y.hi && x.deco > dUnionNaN && y.deco > dUnionNaN) {\n      ${\"\"}\n      return ibool(true);\n    }\n\n    if (x.l <= y.u && y.l <= x.u) {\n      ${\"\"}\n      return iBool(false, true);\n    }\n\n    return ibool(false);\n  }`,Le`iFloat iAdd(iFloat x, iFloat y) {\n    uint min_deco = min(x.deco, y.deco);\n    return iFloat(x.l + y.l, x.u + y.u, min_deco);\n  }`,Le`iFloat iSub(iFloat x, iFloat y) {\n    uint min_deco = min(x.deco, y.deco);\n    return iFloat(x.l - y.u, x.u - y.l, min_deco);\n  }`,Le`iFloat iMul(iFloat x, iFloat y) {\n    uint min_deco = min(x.deco, y.deco);\n    return iMinMaxFloat(x.l * y.l, x.l * y.u, x.u * y.l, x.u * y.u, min_deco);\n  }`,Le`iBool iGreater(iFloat x, iFloat y) {\n    if (x.u <= y.l) {\n      ${\"\"}\n      return ibool(false);\n    }\n\n    if (x.l > y.u && x.deco > dUnionNaN && y.deco > dUnionNaN) {\n      ${\"\"}\n      return ibool(true);\n    }\n\n    return iBool(false, true);\n  }`,Le`iBool iGreaterEqual(iFloat x, iFloat y) {\n    if (x.u < y.l) {\n      ${\"\"}\n      return ibool(false);\n    }\n\n    if (x.l >= y.u && x.deco > dUnionNaN && y.deco > dUnionNaN) {\n      ${\"\"}\n      return ibool(true);\n    }\n\n    return iBool(false, true);\n  }`,Le`iBool iLess(iFloat x, iFloat y) {\n    if (x.l >= y.u) {\n      ${\"\"}\n      return ibool(false);\n    }\n\n    if (x.u < y.l && x.deco > dUnionNaN && y.deco > dUnionNaN) {\n      ${\"\"}\n      return ibool(true);\n    }\n\n    return iBool(false, true);\n  }`,Le`iBool iLessEqual(iFloat x, iFloat y) {\n    if (x.l > y.u) {\n      ${\"\"}\n      return ibool(false);\n    }\n\n    if (x.u <= y.l && x.deco > dUnionNaN && y.deco > dUnionNaN) {\n      ${\"\"}\n      return ibool(true);\n    }\n\n    return iBool(false, true);\n  }`,Le`iBool iAnd(iBool x, iBool y) {\n    return iBool(x.l && y.l, x.u && y.u);\n  }`,Le`iBool iOr(iBool x, iBool y) {\n    return iBool(x.l || y.l, x.u || y.u);\n  }`].join(`\n`),pZ=Le`iFloat iMul(iFloat x, iFloat y);`,dZ=Object.values(pF).map(e=>e.value).join(`\n`),gle=oZ+Le`\n  #define dcg_PI 3.141592653589793\n  ${aZ}\\n\n  ${uZ}\\n\n  ${cZ}\\n\n  ${pZ}\\n\n  ${lZ}\\n\n  ${dZ}\\n`;function Lo(e,t){let n=new fT(e,t,{interval:!1}),r=Ky(n);return n.finish(r)}function Xm(e,t){let n=new fT(e,t,{interval:!0}),r=Ky(n);return n.finish(r)}var fT=class extends Em{constructor(n,r,o){super(n,!0);this.maxUniforms=r;this.glsl=!0;this.shaderUniforms=[];this.definitions={};this.interval=o.interval}finish(n){return{source:n,shaderFunctions:fZ(this.chunk,this.definitions,{interval:this.interval}),shaderUniforms:this.shaderUniforms}}printValue(n,r){let{value:o,valueType:i}=n;if(Array.isArray(o)){if(o.length>100)throw vp();let s=W(i),a=tr(i),u=o.map(p=>this.printValue({value:p,valueType:a},r)).join(\",\"),c=sg(i,this.interval),l=dF({type:c,arity:o.length});return this.definitions[l]=!0,(s?\"buildList\":c)+\"(\"+u+\")\"}switch(typeof o){case\"boolean\":return o.toString();case\"number\":return this.printFloatOrUniformGLSL(o,r);case\"string\":throw $d(\"random\");case\"object\":if(i===St)throw new Error(\"Action values cannot be compiled\");return this.printFloatOrUniformGLSL(F(o),r);default:throw new Error(`Unexpected value: ${o}`)}}printFloatOrUniformGLSL(n,r){let o=this._printFloatOrUniformGLSL(n,r);return this.interval?`ifloat(${o},dContinuous)`:o}_printFloatOrUniformGLSL(n,r){let o=this.shaderUniforms.length;if(r===0||o>=this.maxUniforms)return Zm(n);{let i=\"_DCG_SC_\"+this.shaderUniforms.length;return this.shaderUniforms.push(n),i}}beforeBeginLoop(n){let r=this.chunk.getInstruction(n.args[0]),o=this.chunk.getInstruction(n.args[1]),i=n.callData.type===\"sum\";if(r.type!==1){let u=Wo(this.chunk,n.args[0]);throw i?vb(u):Mb(u)}if(o.type!==1){let u=Wo(this.chunk,n.args[1]);throw i?vb(u):Mb(u)}if(r.valueType!==x||o.valueType!==x)throw new Error(\"Programming error: non-number in summation bounds\");let s=F(r.value),a=F(o.value);if(!isFinite(a-s)||a-s>=1e3)throw i?dE():mE()}checkFiniteBounds(){return\"\"}emitConstant(n,r){return this.printValue(n,r)}emitNeg(n){return`${this.functionName(\"neg\")}(${n})`}emitSquare(n){return`${this.functionName(\"square\")}(${n})`}emitTernary(n,r,o,i){return W(i.valueType)||this.interval?`${this.functionName(\"ternary\")}(${n},${r},${o})`:`${n}?${r}:${o}`}emitVec2(n,r){return this.interval?`iVec2(${n},${r})`:`vec2(${n},${r})`}emitVec3(n,r,o){return this.interval?`iVec3(${n},${r},${o})`:`vec3(${n},${r},${o})`}emitVec(...n){throw new Error(\"Unimplemented\")}emitVecAccess(n,r){return`${n}.${r===0?\"x\":r===1?\"y\":\"z\"}`}emitBinary(n,r,o){switch(n.type){case 8:return`${this.functionName(\"add\")}(${r},${o})`;case 9:return`${this.functionName(\"sub\")}(${r},${o})`;case 10:return`${this.functionName(\"mul\")}(${r},${o})`;case 11:return`${this.functionName(\"div\")}(${r},${o})`;case 12:return`${this.functionName(\"pow\")}(${r},${o})`;case 13:return`${this.functionName(\"rawpow\")}(${r},${o})`;case 25:return`${this.functionName(\"equal\")}(${r},${o})`;case 26:return`${this.functionName(\"less\")}(${r},${o})`;case 28:return`${this.functionName(\"lessEqual\")}(${r},${o})`;case 27:return`${this.functionName(\"greater\")}(${r},${o})`;case 29:return`${this.functionName(\"greaterEqual\")}(${r},${o})`;case 31:return this.interval?`${this.functionName(\"or\")}(${r},${o})`:`${r}||${o}`;case 32:return this.interval?`${this.functionName(\"and\")}(${r},${o})`:`${r}&&${o}`;default:throw new Error(\"Programming Error: invalid binary opcode.\")}}emitList(n,r){let o=dF({type:sg(r.valueType,this.interval),arity:r.args.length});return this.definitions[o]=!0,`buildList(${n.join(\",\")})`}emitListAccess(n,r,o,i){let s=Vn(this.chunk,i.args[0]);if(s===void 0)throw al(Wo(this.chunk,i.args[0]));let a=`int(${r})`;if(this.interval)throw V(\"Cannot use list access in interval\");return`(${a}>=1&&${a}<=${s})?${n}[${a}-1]:${o}`}emitInboundsListAccess(n,r){if(this.interval)throw V(\"Cannot use inbounds list access in interval\");return`${n}[int(${r})-1]`}emitNativeFunction(n,r){if(!(this.interval?mT:dT)[r.symbol])throw $d(r.symbol);return`${this.functionName(r.symbol)}(${n.join(\",\")})`}emitExtendSeed(){throw $d(\"random\")}emitVarDeclaration(n,r){let o=r?\";\":\"\";return o+=e_(this.chunk,n,this.interval)+\" \"+Fn(n),o}emitImmediateAssignment(n,r,o){return`${e_(this.chunk,n,this.interval)} ${r}=${o};`}emitFunctionCall(){throw $d(\"recursion\")}functionName(n){return this.interval?mZ(n):\"dcg_\"+n}isIntervalEmitContext(){return this.interval}};function mZ(e){return e.length===0?e:\"i\"+e[0].toUpperCase()+e.slice(1)}function _le(...e){return Object.keys(Object.assign({},...e)).join(`\n`)}function dF(e){let{type:t,arity:n}=e,r=t+\"[\"+n+\"]\",o=r+\" buildList(\";for(let i=0;i<n-1;i++)o+=`${t} _${i}, `;o+=`${t} _${n-1}) {\n`,o+=r+` a;\n`;for(let i=0;i<n;i++)o+=`a[${i}] = _${i};\n`;return o+=`return a;\n}\n`,o}function fZ(e,t,{interval:n}){let r=e.argNames.length,o=e.instructionsLength()-1,i=n?mT:dT;for(let s=r;s<=o;s++){let a=e.getInstruction(s);if(a.type===33){if(W(a.valueType)){let u=e_(e,s,n),c=`${u} dcg_ternary(bool x, ${u} y, ${u} z) { if (x) return y; return z; }`;t[c]=!0}}else if(a.type===37){let u=i[a.symbol];if((u==null?void 0:u.type)===\"reducer\"){let c=a.args[0],l=Vn(e,c);if(l===void 0)throw al(Wo(e,c));for(let p of u.deps)t[dT[p].value(l)]=!0;for(let p of u.depsInterval)t[mT[p].value(l)]=!0;t[u.value(l)]=!0}else if((u==null?void 0:u.type)===\"double-reducer\"){let c=a.args[0],l=a.args[1],p=Vn(e,c),d=Vn(e,l);if(p===void 0)throw al(Wo(e,c));if(d===void 0)throw al(Wo(e,l));t[u.value(p,d)]=!0}else if((u==null?void 0:u.type)===\"elementsAt\"){let c=sg(rt(a.valueType),n),l=a.args[1],p=Vn(e,l);if(p===void 0)throw al(Wo(e,l));t[u.value(c,p)]=!0}}}return t}function Zm(e){let t=e.toString();return/^-?\\d+$/.test(t)?t+\".0\":t}function sg(e,t){return t?yZ(e):gZ(e)}function yZ(e){switch(tr(e)){case Oe:return\"iBool\";case x:return\"iFloat\";case D:case N:return\"iVec2\";case fn:case G:return\"iVec3\";default:throw new Error(\"Unexpected type: \"+tt(e))}}function gZ(e){switch(tr(e)){case Oe:return\"bool\";case x:return\"float\";case D:case N:return\"vec2\";case fn:case G:return\"vec3\";default:throw new Error(\"Unexpected type: \"+tt(e))}}function e_(e,t,n){let r=e.getInstruction(t);if(W(r.valueType)){let o=Vn(e,t);if(o===void 0)throw al(Wo(e,t));if(o>100)throw vp();return`${sg(r.valueType,n)}[${o}]`}else return sg(r.valueType,n)}function Rle(e){let t={},n=\"\";if(e)for(let r=0;r<e.length;r++){let o=\"_DCG_SC_\"+r;t[o]={value:e[r]},n+=\"uniform float \"+o+`;\n`}return{uniforms:t,declarations:n}}function Dle(e,t){let n=[],r=[];for(let i of e){let s=n.length,a=Math.min(i.shaderUniforms.length,t-s);n.push(...i.shaderUniforms.slice(0,a));let u;s===0&&a===i.shaderUniforms.length?u=i.source:u=i.source.replace(/_DCG_SC_(\\d+)/g,(c,l)=>{let p=parseFloat(l);return p<a?`_DCG_SC_${p+s}`:Zm(i.shaderUniforms[p])}),r.push(u)}let o=Object.assign({},...Object.values(e).map(i=>i==null?void 0:i.shaderFunctions));return{sources:r,shaderFunctions:o,shaderUniforms:n}}function mF(e){let t=[],n=[];for(let r=0;r<e.argNames.length;r++){let o=[],i=[];for(let s=0;s<e.argNames.length;s++)o.push(e.argTypes[s]===x),i.push(r===s);n.push(i),t.push(o)}for(let r=e.argNames.length;r<=e.getReturnIndex();r++)n.push(hZ(e,n,r)),t.push(bZ(e,n,t,r));return t[e.getReturnIndex()]}function hZ(e,t,n){let r=e.getInstruction(n),o=TZ(e.argNames.length);if(!me(r))return o;for(let i of r.args){let s=t[i];for(let a=0;a<s.length;a++)o[a]=o[a]||s[a]}return o}function bZ(e,t,n,r){let o=e.getInstruction(r);if(!me(o))return t_(e.argNames.length);switch(o.type){case 8:case 9:case 14:case 15:case 16:case 38:{let s=t_(e.argNames.length);for(let a=0;a<o.args.length;a++){let u=n[o.args[a]];for(let c=0;c<u.length;c++)s[c]=s[c]&&u[c]}return s}case 11:{let s=[],a=n[o.args[0]],u=t[o.args[1]];for(let c=0;c<a.length;c++)s.push(a[c]&&!u[c]);return s}case 10:{let s=n[o.args[0]].slice(),a=n[o.args[1]].slice(),u=t[o.args[0]],c=t[o.args[1]],l=0,p=0;for(let d=0;d<s.length;d++){let m=s[d]&&!c[d],f=a[d]&&!u[d];s[d]=m,a[d]=f,m&&(l+=1),f&&(p+=1)}return l>=p?s:a}case 33:{let s=t[o.args[0]],a=n[o.args[1]],u=n[o.args[2]],c=[];for(let l=0;l<s.length;l++)c.push(!s[l]&&a[l]&&u[l]);return c}case 39:case 40:case 41:{let s=n[o.args[0]],a=t[o.args[1]],u=[];for(let c=0;c<a.length;c++)u.push(s[c]&&!a[c]);return u}case 48:{let s=o.args[0],a=e.getInstruction(s),u=r-s;return n[a.args[u]]}case 37:return xZ(e,o,t,n,r);case 56:case 12:case 13:case 26:case 28:case 27:case 29:case 25:case 32:case 31:case 42:case 21:case 22:case 19:case 20:case 23:case 24:case 47:case 44:case 49:case 50:case 51:case 53:case 54:case 55:{let s=t[r],a=[];for(let u of s)a.push(!u);return a}default:let i=o;throw new Error(`Unexpected opcode ${i.type}`)}}function xZ(e,t,n,r,o){switch(t.symbol){case\"complex\":{let i=t_(e.argNames.length);for(let s=0;s<t.args.length;s++){let a=r[t.args[s]];for(let u=0;u<a.length;u++)i[u]=i[u]&&a[u]}return i}default:{let i=n[o],s=[];for(let a of i)s.push(!a);return s}}}function TZ(e){let t=[];for(let n=0;n<e;n++)t.push(!1);return t}function t_(e){let t=[];for(let n=0;n<e;n++)t.push(!0);return t}function Yn(e,t,n){switch(t){case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 56:case 21:case 19:case 23:case 50:return x;case 25:case 26:case 27:case 28:case 29:case 31:case 32:return Oe;case 33:{let o=e.getInstruction(n[1]).valueType,i=e.getInstruction(n[2]).valueType,s=Ic(o,i);return s===void 0?o:s}case 38:return Um(n.map(o=>e.getInstruction(o).valueType));case 39:case 40:case 41:{let o=e.getInstruction(n[0]).valueType;return W(o)?rt(o):Nn}case 44:return Bt;case 49:return St;case 55:return e.getInstruction(n[0]).valueType;case 1:case 2:case 37:case 42:case 47:case 48:case 3:case 0:case 24:case 22:case 20:case 51:case 4:case 53:case 54:case 15:case 16:return Nn;default:let r=t;throw new Error(`Unexpected opcode ${r}`)}}function fF(e){if(e.instructionsLength()-1!==e.getReturnIndex())throw new Error(\"Programming Error: only the final instruction in a chunk can be lifted to numbers\");let t=e.getInstruction(e.getReturnIndex());if(!me(t))return e.getReturnIndex();switch(t.type){case 8:let[n,r]=t.args;return Br(e,n)&&Br(e,r)?(e.popInstruction(),e.NativeFunction(\"complex\",[e.Add([e.Slot(0,[n]),e.Slot(0,[r])]),e.Add([e.Slot(1,[n]),e.Slot(1,[r])])])):Br(e,n)&&Fo(e,r)?(e.popInstruction(),e.NativeFunction(\"complex\",[e.Add([e.Slot(0,[n]),r]),e.Slot(1,[n])])):Fo(e,n)&&Br(e,r)?(e.popInstruction(),e.NativeFunction(\"complex\",[e.Add([n,e.Slot(0,[r])]),e.Slot(1,[r])])):Rl(e,n)&&Rl(e,r)?(e.popInstruction(),e.TupleOfType(D,[e.Add([e.Slot(0,[n]),e.Slot(0,[r])]),e.Add([e.Slot(1,[n]),e.Slot(1,[r])])])):Dl(e,n)&&Dl(e,r)?(e.popInstruction(),e.TupleOfType(G,[e.Add([e.Slot(0,[n]),e.Slot(0,[r])]),e.Add([e.Slot(1,[n]),e.Slot(1,[r])]),e.Add([e.Slot(2,[n]),e.Slot(2,[r])])])):Ac(e,t.args)?(e.popInstruction(),Nl(e,[e.Add([pi(e,n),pi(e,r)]),mu(e,t.args[0])])):e.getReturnIndex();case 9:{let[i,s]=t.args;return Br(e,i)&&Br(e,s)?(e.popInstruction(),e.NativeFunction(\"complex\",[e.Subtract([e.Slot(0,[i]),e.Slot(0,[s])]),e.Subtract([e.Slot(1,[i]),e.Slot(1,[s])])])):Br(e,i)&&Fo(e,s)?(e.popInstruction(),e.NativeFunction(\"complex\",[e.Subtract([e.Slot(0,[i]),s]),e.Slot(1,[i])])):Fo(e,i)&&Br(e,s)?(e.popInstruction(),e.NativeFunction(\"complex\",[e.Subtract([i,e.Slot(0,[s])]),e.Negative([e.Slot(1,[s])])])):Rl(e,i)&&Rl(e,s)?(e.popInstruction(),e.TupleOfType(D,[e.Subtract([e.Slot(0,[i]),e.Slot(0,[s])]),e.Subtract([e.Slot(1,[i]),e.Slot(1,[s])])])):Dl(e,i)&&Dl(e,s)?(e.popInstruction(),e.TupleOfType(G,[e.Subtract([e.Slot(0,[i]),e.Slot(0,[s])]),e.Subtract([e.Slot(1,[i]),e.Slot(1,[s])]),e.Subtract([e.Slot(2,[i]),e.Slot(2,[s])])])):Ac(e,t.args)?(e.popInstruction(),Nl(e,[e.Subtract([pi(e,i),pi(e,s)]),mu(e,i)])):e.getReturnIndex()}case 14:{let[i]=t.args;return Br(e,i)?(e.popInstruction(),e.NativeFunction(\"complex\",[e.Negative([e.Slot(0,[i])]),e.Negative([e.Slot(1,[i])])])):Rl(e,i)?(e.popInstruction(),e.TupleOfType(D,[e.Negative([e.Slot(0,[i])]),e.Negative([e.Slot(1,[i])])])):Dl(e,i)?(e.popInstruction(),e.TupleOfType(G,[e.Negative([e.Slot(0,[i])]),e.Negative([e.Slot(1,[i])]),e.Negative([e.Slot(2,[i])])])):Ac(e,t.args)?(e.popInstruction(),Nl(e,[e.Negative([pi(e,i)]),mu(e,i)])):e.getReturnIndex()}case 10:{let[i,s]=t.args;if(Br(e,i)&&Br(e,s)){e.popInstruction();let a=e.Slot(0,[i]),u=e.Slot(1,[i]),c=e.Slot(0,[s]),l=e.Slot(1,[s]);return e.NativeFunction(\"complex\",[e.Subtract([e.Multiply([a,c]),e.Multiply([u,l])]),e.Add([e.Multiply([a,l]),e.Multiply([c,u])])])}else{if(Br(e,i)&&Fo(e,s))return e.popInstruction(),e.NativeFunction(\"complex\",[e.Multiply([e.Slot(0,[i]),s]),e.Multiply([e.Slot(1,[i]),s])]);if(Fo(e,i)&&Br(e,s))return e.popInstruction(),e.NativeFunction(\"complex\",[e.Multiply([i,e.Slot(0,[s])]),e.Multiply([i,e.Slot(1,[s])])]);if(ag(e,i)&&ag(e,s))return e.popInstruction(),e.NativeFunction(\"restriction\",[e.And([e.NativeFunction(\"restrictionToBoolean\",[i]),e.NativeFunction(\"restrictionToBoolean\",[s])])]);if(ag(e,i)||ag(e,s)){let a,u;ag(e,i)?(a=i,u=s):(a=s,u=i);let c=e.getInstruction(u).valueType;return la(c)?(e.popInstruction(),e.Piecewise([e.NativeFunction(\"restrictionToBoolean\",[a]),u,e.NanOfType(c,0)])):e.getReturnIndex()}else return Rl(e,i)&&Fo(e,s)?(e.popInstruction(),e.TupleOfType(D,[e.Multiply([e.Slot(0,[i]),s]),e.Multiply([e.Slot(1,[i]),s])])):Fo(e,i)&&Rl(e,s)?(e.popInstruction(),e.TupleOfType(D,[e.Multiply([i,e.Slot(0,[s])]),e.Multiply([i,e.Slot(1,[s])])])):Ac(e,[i])&&Fo(e,s)?(e.popInstruction(),Nl(e,[e.Multiply([pi(e,i),s]),mu(e,i)])):Fo(e,i)&&Ac(e,[s])?(e.popInstruction(),Nl(e,[e.Multiply([i,pi(e,s)]),mu(e,s)])):Dl(e,i)&&Fo(e,s)?(e.popInstruction(),e.TupleOfType(G,[e.Multiply([e.Slot(0,[i]),s]),e.Multiply([e.Slot(1,[i]),s]),e.Multiply([e.Slot(2,[i]),s])])):Fo(e,i)&&Dl(e,s)?(e.popInstruction(),e.TupleOfType(G,[e.Multiply([i,e.Slot(0,[s])]),e.Multiply([i,e.Slot(1,[s])]),e.Multiply([i,e.Slot(2,[s])])])):e.getReturnIndex()}}case 11:{let[i,s]=t.args;return Br(e,i)&&Br(e,s)?(e.popInstruction(),e.NativeFunction(\"complexDivide\",[i,s])):Br(e,i)&&Fo(e,s)?(e.popInstruction(),e.NativeFunction(\"complex\",[e.Divide([e.Slot(0,[i]),s]),e.Divide([e.Slot(1,[i]),s])])):Fo(e,i)&&Br(e,s)?(e.popInstruction(),e.NativeFunction(\"complexDivide\",[e.NativeFunction(\"complex\",[i,e.ColdConstant(0)]),s])):Rl(e,i)&&Fo(e,s)?(e.popInstruction(),e.TupleOfType(D,[e.Divide([e.Slot(0,[i]),s]),e.Divide([e.Slot(1,[i]),s])])):Ac(e,[i])&&Fo(e,s)?(e.popInstruction(),Nl(e,[e.Divide([pi(e,i),s]),mu(e,i)])):Dl(e,i)&&Fo(e,s)?(e.popInstruction(),e.TupleOfType(G,[e.Divide([e.Slot(0,[i]),s]),e.Divide([e.Slot(1,[i]),s]),e.Divide([e.Slot(2,[i]),s])])):e.getReturnIndex()}case 25:{let[i,s]=t.args;if(Br(e,i)&&Br(e,s)){e.popInstruction();let a=e.Slot(0,[i]),u=e.Slot(0,[s]),c=e.Slot(1,[i]),l=e.Slot(1,[s]);return e.And([e.Equal([a,u]),e.Equal([c,l])])}else if(Fo(e,i)&&Br(e,s)){e.popInstruction();let a=i,u=e.Slot(0,[s]),c=e.ColdConstant(0),l=e.Slot(1,[s]);return e.And([e.Equal([a,u]),e.Equal([c,l])])}else if(Br(e,i)&&Fo(e,s)){e.popInstruction();let a=e.Slot(0,[i]),u=s,c=e.Slot(1,[i]),l=e.ColdConstant(0);return e.And([e.Equal([a,u]),e.Equal([c,l])])}else return e.getReturnIndex()}case 28:case 29:{let[i,s]=t.args;if(Br(e,i)&&Br(e,s)){e.popInstruction();let a=t.type===28?e.Less(t.args):e.Greater(t.args);return e.Or([a,e.Equal(t.args)])}else return e.getReturnIndex()}case 12:case 56:case 13:case 26:case 27:case 32:case 31:case 15:case 33:case 16:case 37:case 42:case 39:case 40:case 41:case 21:case 22:case 19:case 20:case 38:case 47:case 23:case 24:case 48:case 44:case 49:case 50:case 51:case 53:case 54:case 55:return e.getReturnIndex();default:let o=t;throw new Error(`Unexpected opcode ${o.type}`)}}function Rl(e,t){return e.getInstruction(t).valueType===D}function Dl(e,t){return e.getInstruction(t).valueType===G}function Fo(e,t){return e.getInstruction(t).valueType===x}function Br(e,t){return e.getInstruction(t).valueType===N}function ag(e,t){return e.getInstruction(t).valueType===un}function Ac(e,t){return t.every(n=>gt(e,n,Pe))||t.every(n=>gt(e,n,ke))}function Nl(e,t){return Zs(e,t,\"mathVector\",ug(\"mathVector\",\"mathVectorThreeD\"))}function mu(e,t){return Zs(e,[t],\"start\",[{match:[Pe],build:()=>e.NativeFunction(\"basePointFromVector\",[t])},{match:[ke],build:()=>e.NativeFunction(\"basePointFromVectorThreeD\",[t])}])}function pi(e,t){return Zs(e,[t],\"displacement\",[{match:[Pe],build:()=>e.NativeFunction(\"vectorDisplacementAsPoint\",[t])},{match:[ke],build:()=>e.NativeFunction(\"vectorThreeDDisplacementAsPoint\",[t])}])}function ug(e,t){return[{match:[D,D],build:(n,r)=>n.NativeFunction(e,r)},{match:[G,G],build:(n,r)=>n.NativeFunction(t,r)}]}function Ol(e,t){if(t.type!==33)return!1;let n=e.getInstruction(t.args[2]);return n.type===1&&la(n.valueType)&&m1(n.valueType,n.value)||Ol(e,n)&&yF(e,t.args[1])&&yF(e,n.args[1])}function n_(e,t){let n=[];for(;t.type===33;)n.push(t.args[0]),t=e.getInstruction(t.args[2]);return n}function*yT(e,t){let n=e.getInstruction(t);n.type!==32?yield t:(yield*yT(e,n.args[0]),yield*yT(e,n.args[1]))}function gF(e,t){return e.getInstruction(t).type===25}function hF(e,t){let n=e.getInstruction(t);if(n.type!==25)return;let r=n.args[0],o=n.args[1],i=e.getInstruction(r),s=e.getInstruction(o),a=(s.type===41||s.type===40)&&De(e.getInstruction(s.args[0]));return i.type===2&&(De(s)||a)&&ae(s.valueType,x)?{type:\"constant\",variable:e.argNames[r],index:o}:ae(i.valueType,x)&&ae(s.valueType,x)?{type:\"implicit\",index:e.Subtract([r,o])}:void 0}function yF(e,t){let n=e.getInstruction(t);return n.type===1&&n.valueType===x&&F(n.value)===1}var o_=class{constructor(t,n,r,o){this.openChunk=t;this.returnIndex=n;this.restrictionIndex=r;this.slices=o}getSliceVariablesOrImplicit(){return this.slices.map(t=>t.type===\"constant\"?t.variable:\"_implicit\")}getPeeledSlices(){let t=[];for(let n of this.slices)if(n.type===\"constant\"){let r=this.openChunk.getInstruction(n.index);if(De(r)&&r.valueType===x)t.push({type:\"constant\",variable:n.variable,value:F(r.value)});else if(!(De(r)&&r.valueType===Z))throw $u()}else if(this.openChunk.getInstruction(n.index).valueType===x){let o=this.openChunk.copy();o.setReturnIndex(n.index),o.fuseBroadcast(),t.push({type:\"implicit\",sliceChunk:o})}else throw $u();return t}getValueAndRestrictionChunk(){let t=this.getPeeledSlices(),n=this.openChunk.copy();n.setReturnIndex(this.returnIndex),n.fuseBroadcast();let r;return this.restrictionIndex!==void 0&&(r=this.openChunk.copy(),r.setReturnIndex(this.restrictionIndex),r.fuseBroadcast()),{valueChunk:n,restrictionChunk:r,slices:t}}getSlicesAndRestrictionChunk(){let t=this.getPeeledSlices(),n=this.openChunk.copy(),r=n.GreaterEqual([this.returnIndex,n.ColdConstant(0)]);return this.restrictionIndex!==void 0&&(r=n.And([r,this.restrictionIndex])),n.setReturnIndex(r),n.fuseBroadcast(),{restrictionChunk:n,slices:t}}},hT=class{constructor(t,n,r){this.chunk=t;this.slices=[];this.oldIPToRestriction=[];var o,i;this.produceNumbers=(o=r==null?void 0:r.produceNumbers)!=null?o:!1,this.allowSlices=(i=r==null?void 0:r.allowSlices)!=null?i:!1,this.newChunk=new ga({argNames:t.argNames,argTypes:t.argTypes}),this.startTrue=this.produceNumbers?this.newChunk.ColdConstant(1/0):this.newChunk.ConstantOfType(Oe,!0,0),this.peelable=SZ(t),this.dependsOnArgs=s_(t),this.copyCtx=new ho(t,0,t.instructionsLength()-1,this.newChunk),EZ(t,this.peelable,n)}selectRestriction(){return!0}};function s_(e){let t=[];for(let n=0;n<e.argNames.length;n++)t.push(n);return ju(e,t,0,e.getReturnIndex())}var i_=class extends hT{constructor(n,r,o){super(n,r,o);this.currSelectIndex=0;this.selectIndex=o.selectIndex}selectRestriction(){let n=this.selectIndex===this.currSelectIndex;return this.currSelectIndex++,this.produceNumbers?n:!n}};function wc(e,t,n){let r=new hT(e,t,n);a_(r,0,e.instructionsLength()-1);let o=r.oldIPToRestriction[e.getReturnIndex()];return new o_(r.newChunk,r.copyCtx.mapIndex(e.getReturnIndex()),r.startTrue===o?void 0:o,r.slices)}function*xF(e,t,n){var o,i;let r=r_(e,n,{produceNumbers:!1,selectIndex:0});if(r===void 0||r.count<=1){yield{value:t,restriction:void 0};return}for(let s=0;s<r.count;s++){let a=(o=r_(e,n,{produceNumbers:!0,selectIndex:s}))==null?void 0:o.chunk,u=s===0?r.chunk:(i=r_(e,n,{produceNumbers:!1,selectIndex:s}))==null?void 0:i.chunk;if(!a||!u)throw new Error(\"Programming Error: selectIndex gave invalid chunk.\");yield{value:a,restriction:u}}}function r_(e,t,n){let r=new i_(e,t,n);a_(r,0,e.instructionsLength()-1);let o=r.oldIPToRestriction[e.getReturnIndex()];if(r.currSelectIndex===0)return;let i=r.copyCtx.mapIndex(e.getReturnIndex()),s=r.newChunk.getInstruction(i);if(s.type!==29)throw new Error(\"Programming Error: Expected GreaterEqual.\");let a=r.produceNumbers?r.newChunk.Subtract([s.args[0],s.args[1]]):i;return r.selectRestriction()&&(o=bT(r,[o,a])),r.newChunk.setReturnIndex(o),{chunk:r.newChunk,count:r.currSelectIndex}}function a_(e,t,n){let{chunk:r,newChunk:o,copyCtx:i,peelable:s,oldIPToRestriction:a}=e;for(let u=t;u<=n;u++){let c=r.getInstruction(u);if(s[u]&&(c.type===19||c.type===23)){u=PZ(e,u);continue}let l,p;if(c.type===2)l=u,p=e.startTrue;else if(!me(c))l=i.copyLeafOrFunctionHeader(c),p=e.startTrue;else if(s[u]&&Ol(r,c)&&e.dependsOnArgs[c.args[0]]){l=i.mapIndex(c.args[1]);let d=c.args.map(m=>a[m]);for(let m of vZ(e,c))e.selectRestriction()&&d.push(m);p=bT(e,d)}else l=o.copyInstructionWithArgs(c,i.mapArgs(c.args)),p=bT(e,c.args.map(d=>a[d]));i.markMappedIndex(u,l),a[u]=p}}function bT(e,t){let r=[...new Set(t)].filter(o=>!TF(e,o));return r.length?xT(e,r).reduce((o,i)=>e.produceNumbers?e.newChunk.NativeFunction(\"listMin\",[o,i]):e.newChunk.And([o,i])):e.startTrue}function IZ(e,t){let n=[...new Set(t)];return n.some(r=>!TF(e,r))?xT(e,n).reduce((r,o)=>e.produceNumbers?e.newChunk.NativeFunction(\"listMax\",[r,o]):e.newChunk.Or([r,o])):e.startTrue}function xT(e,t){if(!e.produceNumbers)return t;let n=e.newChunk;return t.map(r=>{let o=n.getInstruction(r);if(o.valueType!==Oe)return r;switch(o.type){case 27:case 29:return n.Subtract([o.args[0],o.args[1]]);case 26:case 28:return n.Subtract([o.args[1],o.args[0]]);case 25:throw V(\"convertBoolsToNums on an equality.\");case 32:return n.NativeFunction(\"listMin\",xT(e,o.args));case 31:return n.NativeFunction(\"listMax\",xT(e,o.args));case 1:return n.Constant(o.value?1/0:-1/0,o.mobility);default:throw V(\"convertBoolsToNums on a non-opcode condition.\")}})}function TF({newChunk:e},t){let n=e.getInstruction(t);return n.type===1&&(n.valueType===x&&n.value===1/0||n.valueType===Oe&&n.value)}function PZ(e,t){let{chunk:n,newChunk:r,copyCtx:o,oldIPToRestriction:i,startTrue:s}=e,a=n.getInstruction(t),u=a.endIndex,c=n.getInstruction(u),l,p;if(a.type===23){let y=r.copyInstructionWithArgs(a,[o.mapIndex(a.args[0])]);o.markMappedIndex(t,y),i[t]=s,p=t+1}else{let y=o.mapArgs(a.args);y.push(s);let h=r.copyInstructionWithArgs(a,y);i[t]=s,o.markMappedIndex(t,h);for(let b=2;b<a.args.length;b++){let T=t+b-1,I=r.copyInstructionWithArgs(n.getInstruction(T),[o.mapIndex(T)]);i[T]=s,o.markMappedIndex(T,I)}l=r.BlockVar(e.produceNumbers?x:Oe,[o.mapIndex(t)]),p=t+a.args.length-1}a_(e,p,u-1);let d=o.mapArgs(c.args),m=e.slices.filter(y=>p<=y.index&&y.index<u),f=l;if(a.type===19){if(l===void 0)throw new Error(\"Expected restrictionAccumVar to be defined\");f=bT(e,[l,i[c.args[1]]]),d.push(f)}else{d.push(i[c.args[1]]);for(let y of m)d.push(y.index)}let g=r.copyInstructionWithArgs(c,d);i[u]=s,o.markMappedIndex(u,g);for(let y=1;y<c.args.length;y++){let h=r.copyInstructionWithArgs(n.getInstruction(u+y),[o.mapIndex(u)]);o.markMappedIndex(u+y,h)}if(a.type===23){let y=r.BroadcastResult(e.produceNumbers?Z:vi,[o.mapIndex(u)]);for(let h of m)h.index=r.BroadcastResult(Z,[o.mapIndex(u)]);for(let h=1;h<c.args.length;h++)i[u+h]=y}else{let y=r.BlockVar(e.produceNumbers?x:Oe,[o.mapIndex(u)]);l===f&&(y=s);for(let h=1;h<c.args.length;h++)i[u+h]=y}return u+c.args.length-1}function SZ(e){let t=[];for(let r=0;r<e.instructionsLength();r++)t.push(!1);t[e.getReturnIndex()]=!0;let n=e.instructionsLength()-1;for(let r=n;r>=0;r--){if(!t[r])continue;let o=e.getInstruction(r);if(me(o))for(let i of CZ(e,o))t[i]=!0}return t}function CZ(e,t){switch(t.type){case 14:case 56:case 8:case 9:case 26:case 28:case 27:case 29:case 10:case 11:case 12:case 13:case 25:case 32:case 15:case 38:case 47:case 19:case 39:case 40:case 41:case 23:case 24:case 48:case 50:return t.args;case 33:return Ol(e,t)?n_(e,t).concat([t.args[1]]):[];case 37:{let r=ur[t.symbol];return r.noPeel?[]:r.tag===\"reducer\"||r.tag===\"doubleReducer\"||r.tag===\"never-broadcast\"||r.tag===\"parameterizedReducer\"?t.args.filter(o=>e.getInstruction(o).type!==48):t.args}case 20:return t.args.slice(1);case 51:return[t.args[1]];case 31:return[];case 16:case 42:case 21:case 22:case 44:case 49:case 53:case 54:case 55:return[];default:let n=t;throw new Error(`Unexpected opcode ${n.type}`)}}function EZ(e,t,n){let r=[];for(let o=0;o<e.argNames.length;o++){let i=e.argNames[o];n.indexOf(i)<0&&r.push(o)}for(let o of r){let i=Sl(e,o);for(let s=0;s<e.instructionsLength();s++)t[o]&&(t[o]=!i[s])}}function vZ(e,t){let n=n_(e.chunk,t),r=e.copyCtx.mapArgs(n);if(e.allowSlices&&r.length===1){let o=hF(e.newChunk,r[0]);if(o)return e.slices.push(o),[]}if(r.some(o=>gF(e.newChunk,o)))throw $u();if(r.length===1){let o=r[0];return[...yT(e.newChunk,o)]}return[IZ(e,r)]}function TT(e,t){let n={value:[],error:\"unhandled restriction\"},r={value:[],error:u_},o=e.getInstruction(e.getReturnIndex());if(o.type==1){if(o.valueType===dr)return{value:gT([o.value])};if(o.valueType===ni)return{value:gT(o.value)}}if(o.type===33&&o.valueType===dr){let g=e.copy(),y=bF(g,o);if(y===void 0)return n;let h=e.getInstruction(y);if(h.type===1&&h.valueType===dr){let b=Lo(g,t.maxSurfaceUniforms());return{value:gT([h.value]),restriction:b}}}if(o.type!==48)return n;let i=e.getInstruction(o.args[0]);if(i.type!==24)return n;let s=e.getInstruction(i.args[1]);if(s.type!==33)return n;let a=MZ(e),u=e.copy(),c=bF(u,s,a);if(c===void 0)return r;let l=e.getInstruction(c);if(l.type!==41)return n;if(a[s.args[0]])return r;let d=e.getInstruction(l.args[0]);if(d.type!==1||d.valueType!==ni)return n;let m=gT(d.value),f=Lo(u,t.maxSurfaceUniforms());return{value:m,restriction:f}}function MZ(e){let t=[];for(let n=0;n<e.getReturnIndex();n++)e.getInstruction(n).type===23&&t.push(n);return ju(e,t,0,e.getReturnIndex()-1)}var u_=\"restriction list on triangles\";function gT(e){return e.map(t=>{let n=t[0].map(i=>F(i)),r=t[1].map(i=>F(i)),o=t[2].map(i=>F(i));return[n,r,o]})}function bF(e,t,n){let r=t.args[0],o=t.args[1];if(!(n&&n[r])){for(;e.getInstruction(o).type===33;){if(t=e.getInstruction(o),n&&n[t.args[0]])return;r=e.And([r,t.args[0]]),o=t.args[1]}return e.setReturnIndex(r),o}}function IF(e,t){let n=[],r=[];for(let a=0;a<e.argNames.length;a++)t.hasOwnProperty(e.argNames[a])||(n.push(e.argNames[a]),r.push(e.argTypes[a]));let o=new ga({argNames:n,argTypes:r}),i=new ho(e,0,e.instructionsLength()-1,o),s=0;return i.copyUntilEnd((a,u,c)=>{if(c<e.argNames.length){if(t.hasOwnProperty(e.argNames[c]))return a.ConstantOfType(e.argTypes[c],t[e.argNames[c]],1);{let l=s;return s+=1,l}}if(me(u)){let l=i.mapArgs(u.args);return a.copyInstructionWithArgs(u,l)}else return i.copyLeafOrFunctionHeader(u)}),o}var IT=class e{constructor(){this.maps={real:{},complexOne:{},complexI:{}}}clone(){let t=new e;return t.maps=Zi(this.maps),t}pruneIP(t){for(let n of Object.values(this.maps))delete n[t]}truncate(t){for(let n of Object.values(this.maps))for(let r in n){let o=+r;o>=t?delete n[o]:_Z(n[o],t)}}getMapEntry(t,n,r){let o=this.maps[n],i=o[r];if(i)return i;let s={maxValidReference:t.instructionsLength()-1,map:[]};return o[r]=s,s}_cachedDerivativesForTests(){let t=[];for(let[n,r]of Object.entries(this.maps))for(let o in r)t.push(`${o} ${n}`);return t.sort(),t}};function _Z(e,t){e.map.length=Math.min(e.map.length,t),e.maxValidReference=Math.min(e.maxValidReference,t-1)}var RZ={\"+\":!0,\"-\":!0,\"*\":!0,\"\\\\cdot\":!0,\"\\\\times\":!0,\"/\":!0,\"!\":!0,\"(\":!0,\")\":!0,\"\\\\{\":!0,\"\\\\}\":!0,\"(|\":!0,\"|)\":!0,\"[\":!0,\"]\":!0,\",\":!0,\"...\":!0,\":\":!0,\"=\":!0,\">\":!0,\"<\":!0,\">=\":!0,\"<=\":!0,\"->\":!0,\"~\":!0,\"%\":!0,\".\":!0,for:!0,with:!0,Letter:!0,Decimal:!0,Cmd:!0,TokenNode:!0,Differential:!0,End:!0,Trig:!0,Ln:!0,Log:!0,Int:!0,Sum:!0,Prod:!0,Err:!0};function spe(e){let t=Lc[e];if(!t)return!0;switch(t){case\"Ln\":case\"Log\":case\"for\":case\"with\":case\"Trig\":return!0;default:return!1}}var Lc={\"\\\\lt\":\"<\",\"\\\\gt\":\">\",\"\\\\le\":\"<=\",\"\\\\ge\":\">=\",\"\\\\leq\":\"<=\",\"\\\\geq\":\">=\",\"\\\\ldots\":\"...\",\"\\\\sim\":\"~\",\"\\\\to\":\"->\",\"\\\\cdot\":\"\\\\cdot\",\"\\\\times\":\"\\\\times\",\"\\\\div\":\"/\",\"\\\\ln\":\"Ln\",\"\\\\log\":\"Log\",\"\\\\int\":\"Int\",\"\\\\sum\":\"Sum\",\"\\\\prod\":\"Prod\",\"\\\\backslash\":\"Err\",\"\\\\for\":\"for\",\"\\\\with\":\"with\"},DZ=[\"sin\",\"cos\",\"tan\",\"cot\",\"sec\",\"csc\"];for(let e of DZ)Lc[\"\\\\\"+e]=\"Trig\",Lc[\"\\\\\"+e+\"h\"]=\"Trig\",Lc[\"\\\\arc\"+e]=\"Trig\",Lc[\"\\\\arc\"+e+\"h\"]=\"Trig\",Lc[\"\\\\ar\"+e+\"h\"]=\"Trig\";function ape(e){return e===\"\\\\log\"||e===\"\\\\prod\"||e===\"\\\\sum\"||e===\"\\\\int\"}var c_={\"+\":\"+\",\"-\":\"-\",\"*\":\"*\",\"/\":\"/\",\"!\":\"!\",\"(\":\"(\",\")\":\")\",\"[\":\"[\",\"]\":\"]\",\",\":\",\",\"...\":\"...\",\":\":\":\",\"=\":\"=\",\">=\":\">=\",\"<=\":\"<=\",\">\":\">\",\"<\":\"<\",\"~\":\"~\",\".\":\".\"},PF={\"\\\\{\":\"\\\\{\",\"\\\\}\":\"\\\\}\",\"\\\\%\":\"%\"},SF={\"|\":\"(|\",\"\\\\{\":\"\\\\{\",\"[\":\"[\",\"(\":\"(\"},CF={\"|\":\"|)\",\"\\\\}\":\"\\\\}\",\"]\":\"]\",\")\":\")\"},EF=Object.keys(RZ);function vF(e){return 48<=e&&e<=57}function NZ(e){return 97<=e&&e<=122}function OZ(e){return 65<=e&&e<=90}function PT(e){return NZ(e)||OZ(e)}function ST(e){return e===92}function l_(e){return e===39}function MF(e){if(9<=e&&e<=13||8192<=e&&e<=8202)return!0;switch(e){case 32:case 160:case 5760:case 8232:case 8233:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}}var AZ={mcd:\"gcd\",gcf:\"gcd\",mcm:\"lcm\",signum:\"sign\",sgn:\"sign\",stdDevP:\"stdevp\",stddevp:\"stdevp\",stdDev:\"stdev\",stddev:\"stdev\",variance:\"var\",TScore:\"tscore\",inverseCdf:\"quantile\",inversecdf:\"quantile\",arsinh:\"arcsinh\",arcosh:\"arccosh\",artanh:\"arctanh\",arcsch:\"arccsch\",arsech:\"arcsech\",arcoth:\"arccoth\"};function _F(e){let t=0;for(;ST(e.charCodeAt(t));)t+=1;return t>0&&(e=e.slice(t)),AZ[e]||e}function RF(e,t,n){return{type:\"Comparator\",span:e,symbol:t,args:n}}function DF(e,t,n){if(t.length<1)throw\"Programming Error: ComparatorChain must have at least one comparator.\";if(n.length!==t.length+1)throw\"Programming Error: ComparatorChain must have one more arg than symbols\";return{type:\"ComparatorChain\",span:e,args:n,symbols:t}}function NF(e,t){return{type:\"Tilde\",span:e,args:t}}function OF(e,t){return{type:\"Pos\",span:e,args:t}}function AF(e,t){return{type:\"Neg\",span:e,args:t}}function wF(e,t){return{type:\"Add\",span:e,args:t}}function LF(e,t){return{type:\"Sub\",span:e,args:t}}function FF(e,t){return{type:\"Mul\",span:e,args:t}}function VF(e,t){return{type:\"DotMul\",span:e,args:t}}function BF(e,t){return{type:\"CrossMul\",span:e,args:t}}function GF(e,t){return{type:\"Div\",span:e,args:t}}function qF(e,t){return{type:\"Bang\",span:e,args:t}}function cg(e,t){return{type:\"Call\",span:e,args:t}}function p_(e,t){return{type:\"ImplicitCall\",span:e,args:t}}function UF(e,t){return{type:\"Index\",span:e,args:t}}function d_(e,t){return{type:\"Paren\",span:e,args:t}}function m_(e,t){return{type:\"List\",span:e,args:t}}function zF(e,t){return{type:\"Pipes\",span:e,args:t}}function f_(e,t){return{type:\"Subscript\",span:e,args:t}}function CT(e,t){return{type:\"Superscript\",span:e,args:t}}function lg(e,t,n){return{type:\"Prime\",span:e,nprimes:t,args:n}}function ET(e,t){return{type:\"Seq\",span:e,args:t}}function kF(e,t){return{type:\"Sqrt\",span:e,args:t}}function HF(e,t){return{type:\"Nthroot\",span:e,args:t}}function $F(e,t){return{type:\"Frac\",span:e,args:t}}function YF(e,t){return{type:\"Derivative\",span:e,args:t}}function ZF(e,t){return{type:\"Integral\",span:e,args:t}}function XF(e,t){return{type:\"EmptyIntegral\",span:e,args:t}}function WF(e,t){return{type:\"Sum\",span:e,args:t}}function jF(e,t){return{type:\"Product\",span:e,args:t}}function JF(e,t){return{type:\"Piecewise\",span:e,args:t}}function QF(e){return{type:\"EmptyPiecewise\",span:e}}function KF(e){return{type:\"EmptyRangeEnd\",span:e}}function eV(e,t){return{type:\"Colon\",span:e,args:t}}function y_(e,t){return{type:\"Ellipsis\",span:e,args:t}}function tV(e,t){return{type:\"For\",span:e,args:t}}function nV(e,t){return{type:\"With\",span:e,args:t}}function rV(e,t){return{type:\"Dot\",span:e,args:t}}function oV(e,t){return{type:\"PercentOf\",span:e,args:t}}function iV(e,t){return{type:\"RightArrow\",span:e,args:t}}function g_(e,t){return{type:\"Juxt\",span:e,args:t}}function sV(e,t){return{type:\"Letter\",span:e,val:t}}function vT(e,t){return{type:\"Decimal\",span:e,val:t}}function Xp(e,t){return{type:\"Cmd\",span:e,val:_F(t)}}function aV(e,t){return{type:\"Alphanumeric\",span:e,val:t}}function uV(e,t,n,r){return{type:\"MixedNumber\",span:e,whole:t,num:n,den:r}}function _r(e){if(e.type===\"Subscript\"){if(e.args[1].type!==\"Alphanumeric\")return!1;e=e.args[0]}switch(e.type){case\"Cmd\":return!0;case\"Letter\":return!0;default:return!1}}function cV(e){return e.type!==\"Superscript\"?!1:_r(e.args[0])}function lV(e,t){if(e.type!==\"Letter\"||e.val!==\"d\"||t.type!==\"Juxt\")return!1;let[n,r]=t.args;return n.type!==\"Letter\"||n.val!==\"d\"?!1:_r(r)}function Vo(e){return e.type===\"Seq\"?e.args:[e]}function pV(e,t,n,r,o,i,s,a){return{opts:e,input:t,prevSpan:n,startIndex:r,endIndex:o,token:i,mode:s,parent:a}}function ve(e,t){return Fi(e.token.span,t.prevSpan)}function Rr(e,t){return Fi(e,t.prevSpan)}function b_(e){return Ya(e.token.span.input,e.token.span.start)}function LZ(e,t){return{type:\"Differential\",span:e,val:t}}function di(e,t,n){return{type:e,span:t,val:n}}function Fc(e,t){let n=Ya(e.span.input,e.span.start);return x_(t,e,0,n,void 0,void 0)}function x_(e,t,n,r,o,i){let s=t.args;if(n>s.length&&i)return dV(i,r);n=pg(s,n);let{token:a,endIndex:u}=mV(t,n,o);if(a.type===\"End\"&&i){let c=i.input.args[i.startIndex];if(c.type===\"LeftRight\"){let l=c.right,p=CF[l.val]||\"Err\",d=di(p,l.span,l.val);return pV(e,t,r,n,u,d,o,i)}}else a.type===\"Int\"?o=FZ(o):a.type===\"Differential\"&&(o=VZ(o));return pV(e,t,r,n,u,a,o,i)}function Je(e){let t=e.input.args[e.startIndex],n=e.token.span;return t&&t.type===\"LeftRight\"?x_(e.opts,t.arg,0,n,e.mode,e):dV(e,n)}function dV(e,t){let{input:n,endIndex:r,mode:o,parent:i}=e;return x_(e.opts,n,r+1,t,o,i)}function Bo(e){return e.token}function FZ(e){return{type:\"integral\",parent:e}}function VZ(e){if(!e||e.type!==\"integral\")throw new Error(\"Programming Error: expected lexer to be in integral mode.\");return e.parent}function xo(e,t){return Bo(e).type===t}function RT(e){if(e.startIndex<e.input.args.length)return!1;let t=e.parent;return!(t&&t.input.args[t.startIndex].type===\"LeftRight\"&&e.startIndex===e.input.args.length)}function T_(e,t){return t.token.span.start>e.token.span.start}function Jr(e,t){return{token:t,endIndex:e}}function mV(e,t,n){let r=e.args;if(t>=r.length){let i=Ya(e.span.input,e.span.end);return Jr(t,di(\"End\",i,\"\"))}let o=e.args[t];switch(o.type){case\"Sqrt\":case\"Frac\":case\"SupSub\":return Jr(t,o);case\"Letter\":{if(!n||n.type!==\"integral\"||o.val!=\"d\")return Jr(t,o);let{endIndex:c,token:l}=mV(e,t+1,n);if(l.type===\"Letter\"||l.type===\"Cmd\"){let p=LZ(Fi(o.span,l.span),l.val);return Jr(c,p)}else return Jr(t,o)}case\"LeftRight\":{let c=o.left,l=SF[c.val]||\"Err\",p=Fi(o.span,c.span);return Jr(t,di(l,p,c.val))}case\"OperatorName\":let i=[];for(let c of o.arg.args){if(c.type!==\"Letter\")return Jr(t,di(\"Err\",o.span,vr(o.arg.span)));i.push(c.val)}let s=\"\\\\\"+i.join(\"\"),a=Lc[s]||\"Cmd\";return Jr(t,di(a,o.span,s));case\"TokenNode\":{let c=\"$\";if(o.arg.args.length===0)return Jr(t,di(\"Err\",o.span,vr(o.arg.span)));for(let l of o.arg.args){if(l.type!==\"Digit\")return Jr(t,di(\"Err\",o.span,vr(o.arg.span)));c+=l.val}return Jr(t,di(\"TokenNode\",o.span,c))}case\"Cmd\":{let c=Lc[o.val]||\"Cmd\";return Jr(t,di(c,o.span,o.val))}case\"EscapedSymbol\":{let c=PF[o.val]||\"Err\";return Jr(t,di(c,o.span,o.val))}case\"Symbol\":return BZ(e,t,o);case\"Digit\":return fV(e,t);default:throw`Unexpected atom ${o.type}.`}}function BZ(e,t,n){switch(n.val){case\".\":return GZ(e,t);case\"-\":{let o=e.args[t+1];if(o&&MT(o,\">\")){let i=di(\"->\",Fi(n.span,o.span),\"->\");return Jr(t+1,i)}break}case\"<\":{let o=e.args[t+1];if(o&&MT(o,\"=\")){let i=di(\"<=\",Fi(n.span,o.span),\"<=\");return Jr(t+1,i)}break}case\">\":{let o=e.args[t+1];if(o&&MT(o,\"=\")){let i=di(\">=\",Fi(n.span,o.span),\">=\");return Jr(t+1,i)}break}}let r=c_[n.val]||\"Err\";return Jr(t,di(r,n.span,n.val))}function GZ(e,t){let n=e.args[t];if(n.type!==\"Symbol\"||n.val!==\".\")throw new Error(\"Programming Error: expected '.'\");if(t+2<e.args.length&&_T(e.args[t+1])&&_T(e.args[t+2])){let i=Fi(n.span,e.args[t+2].span);return Jr(t+2,di(\"...\",i,vr(i)))}let r=pg(e.args,t+1);if(r<e.args.length&&e.args[r].type===\"Digit\")return fV(e,t);let o=c_[n.val]||\"Err\";return Jr(t,di(o,n.span,n.val))}function fV(e,t){let n=qZ(e,t);if(n)return n;let r=e.args,o=e.args[t].span,i=[],s=!1,a=!1;for(;t<r.length;t++){let c=pg(r,t);if(c>=r.length)break;let l=r[c];if(l.type===\"Digit\")t=c,s=!0,i.push(l.val);else if(!a&&_T(l)){if(c+1<r.length&&_T(e.args[c+1]))break;t=c,a=!0,i.push(\".\")}else break}if(!s)throw new Error(\"Programming Error: decimals must have at least one digit.\");let u=Fi(o,e.args[t-1].span);return Jr(t-1,di(\"Decimal\",u,i.join(\"\")))}function qZ(e,t){let n=e.args,r=n[t].span,o=[];for(;t<n.length;t++){let c=pg(n,t);if(c>=n.length)break;let l=n[c];if(l.type!==\"Digit\")break;t=c,o.push(l.val)}if(t=pg(n,t),t>=n.length)return;let i=n[t];if(i.type!==\"Frac\")return;let s=[],a=[];for(let c of i.num.args)if(!h_(c)){if(c.type!==\"Digit\")return;s.push(c.val)}for(let c of i.den.args)if(!h_(c)){if(c.type!==\"Digit\")return;a.push(c.val)}let u=Fi(r,i.span);return Jr(t,uV(u,o.join(\"\"),s.join(\"\"),a.join(\"\")))}function h_(e){switch(e.type){case\"Sqrt\":case\"Frac\":case\"SupSub\":case\"LeftRight\":case\"OperatorName\":case\"TokenNode\":case\"Symbol\":case\"Letter\":case\"Digit\":return!1;case\"Cmd\":return e.val===\"\\\\space\";case\"EscapedSymbol\":return e.val===\"\\\\ \"||e.val===\"\\\\:\"||e.val===\"\\\\,\"||e.val===\"\\\\;\";default:throw`Unexpected atom ${e.type}.`}}function pg(e,t){for(;t<e.length&&h_(e[t]);)t+=1;return t}function _T(e){return MT(e,\".\")}function MT(e,t){return e.type===\"Symbol\"&&e.val===t}var Wm={},UZ=[\"sin\",\"cos\",\"tan\",\"cot\",\"sec\",\"csc\",\"sinh\",\"cosh\",\"tanh\",\"coth\",\"sech\",\"csch\"];UZ.forEach(e=>{Wm[e]=\"arc\"+e,Wm[\"arc\"+e]=e});var zZ=0;function PV(e,t){return kZ(e,t)}function Pt(e,t){let n=[];for(let r=0;r<t.length;r++)n.push(zn(e,t[r]));return n}function yV(e,t,n){let r=e.nodes,[o,i]=Pt(e,t);if(OT(n)){let s=Ya(n.span.input,n.span.end),a=e.setInput(MV(e),s);i=e.setInput(new r.SeededFunctionCall(i,[a]),n.span)}return[o,i]}function kZ(e,t){return e.setInput(HZ(e,t),t.span)}function SV(e){if(e.type!==\"Call\")return;let[t,n]=e.args,r=Vo(n);if(_r(t)&&r.every(_r))return{base:t,args:r}}function Ppe(e){return SV(e)!==void 0}function CV(e){if(e.type!==\"Call\")return!1;let[t,n]=e.args;return _r(t)}function C_(e){return _r(e)}function HZ(e,t){let n=e.nodes;switch(t.type){case\"Comparator\":if(t.symbol===\"=\"){let[r,o]=t.args,i=SV(r);if(i){let{base:s,args:a}=i,u=Pt(e,a),c=e;if(e.includeFunctionParametersInRandomSeed)for(let p of u)c=fg(c,{prefix:\"fc\",expr:p});let l=zn(c,o);return new n.FunctionDefinition(zn(e,s),u,l)}else{if(r.type===\"Call\"&&_r(r.args[0]))return new n.CallAssignment(zn(e,r),zn(e,o));if(C_(r)){let s;return o.type===\"For\"?s=e.setInput(DT(e,o,{parentIsList:!1}),o.span):s=zn(e,o),new n.Assignment(zn(e,r),s)}}return new n.Equation(zn(e,r),zn(e,o))}else return nc(e,t);case\"Tilde\":{let[r,o]=Pt(e,t.args);return new n.Regression(r,o)}case\"ComparatorChain\":{if(!e.specializeDoubleInequalities||t.symbols.length!==2)return nc(e,t);let[r,o,i]=t.args,[s,a]=t.symbols;return!_r(o)||t.symbols.includes(\"=\")?nc(e,t):new n.DoubleInequality([zn(e,r),s,zn(e,o),a,zn(e,i)])}case\"Call\":{let[r,o]=t.args;if(r.type===\"Cmd\")switch(r.val){case\"histogram\":return new n.Histogram(Pt(e,Vo(o)));case\"dotplot\":return new n.DotPlot(Pt(e,Vo(o)));case\"boxplot\":return new n.BoxPlot(Pt(e,Vo(o)));case\"stats\":return new n.Stats(Pt(e,Vo(o)));default:return dg(e,t)}return dg(e,t)}case\"For\":return DT(e,t,{parentIsList:!1});default:return dg(e,t)}}function EV(e){if(e.type!==\"Paren\")return!1;let[t]=e.args;return t.type!==\"Seq\"?!1:t.args.length===2||t.args.length===3}function gV(e,t,n,r){let o=$Z(e,n,r);if(o!==void 0)return e.setInput(o,Fi(t.args[0].span,r.span))}function $Z(e,t,n){let r=e.nodes;if(n.type===\"Letter\")switch(n.val){case\"x\":case\"y\":case\"z\":case\"p\":return new r.NamedCoordinateAccess(n.val,[t])}else if(n.type===\"Cmd\")switch(n.val){case\"real\":case\"imag\":throw RC(n.val)}}function zn(e,t){return e.setInput(dg(e,t),t.span)}function dg(e,t){let n=e.nodes;switch(t.type){case\"Pos\":return zn(e,t.args[0]);case\"Neg\":let r=-1,o=t.args[0];for(;;)if(o.type===\"Pos\"||o.type===\"Paren\"&&!EV(o))o=o.args[0];else if(o.type===\"Neg\")o=o.args[0],r*=-1;else break;switch(o.type){case\"Decimal\":{let s=TV(o);return new n.Constant(r===-1?Oi(s):s)}case\"MixedNumber\":{let s=IV(o);return new n.MixedNumber(r===-1?Oi(s):s)}default:return r===-1?new n.Negative([zn(e,o)]):zn(e,o)}case\"Add\":return new n.Add(Pt(e,t.args));case\"Sub\":return new n.Subtract(Pt(e,t.args));case\"Mul\":return new n.Multiply(Pt(e,t.args));case\"DotMul\":return new n.DotMultiply(Pt(e,t.args));case\"CrossMul\":return new n.CrossMultiply(Pt(e,t.args));case\"Div\":return new n.Divide(Pt(e,t.args));case\"Bang\":{let[s]=t.args;return s.type===\"Call\"&&_r(s.args[0])&&!OT(s.args[0])&&Vo(s.args[1]).length===1?new n.FunctionFactorial(Pt(e,s.args)):new n.FunctionCall(\"\\\\factorial\",Pt(e,t.args))}case\"PercentOf\":return new n.PercentOf(Pt(e,t.args));case\"Call\":return bV(e,t);case\"ImplicitCall\":return JZ(t),bV(e,t);case\"Dot\":{let s=t.args[1],[a,u]=yV(e,t.args,s);if(s.type===\"Letter\")switch(s.val){case\"x\":case\"y\":case\"z\":case\"p\":return new n.NamedCoordinateAccess(s.val,[a]);default:break}else if(s.type===\"Call\"){let c=s.args[0],l=gV(e,t,a,c);if(l!==void 0){let p=hV(s);return new n.Multiply([l,I_(e,s.args[1],Zo(t.span.input,p,s.span.end))])}}return new n.DotAccess([a,u])}case\"Prime\":{let[s]=t.args;if(s.type===\"Call\"){let[a,u]=s.args,c=Vo(u).length;if(a.type===\"Cmd\"&&a.val===\"logbase\"){if(c!==2)throw Mp()}else if(c!==1)throw Mp();return new n.Prime(t.nprimes,Pt(e,t.args))}else throw s.type===\"ImplicitCall\"?wb():Ab()}case\"Index\":{let[s,a]=t.args;if(a.type===\"Seq\")return new n.ListAccess([zn(e,s),e.setInput(new n.List(Pt(e,a.args)),void 0)]);if(a.type===\"Ellipsis\"){let[u,c]=a.args;return new n.ListAccess([zn(e,s),e.setInput(new n.Range([e.setInput(new n.List(Pt(e,Vo(u))),void 0),e.setInput(new n.List(c.type===\"EmptyRangeEnd\"?[]:Pt(e,Vo(c))),void 0)]),void 0)])}return mg(a)?new n.ListAccess([zn(e,s),e.setInput(nc(e,a),void 0)]):new n.ListAccess(Pt(e,t.args))}case\"Paren\":{let[s]=t.args;return I_(e,s,t.span)}case\"List\":{if(t.args.length===0)return new n.List([]);let s=t.args[0];if(s.type===\"Ellipsis\"){let[a,u]=s.args;return new n.Range([e.setInput(new n.List(Pt(e,Vo(a))),void 0),e.setInput(new n.List(Pt(e,Vo(u))),void 0)])}else if(s.type===\"For\")return DT(e,s,{parentIsList:!0});return new n.List(Pt(e,Vo(s)))}case\"Pipes\":{let[s]=t.args;return new n.Norm([zn(e,s)])}case\"Subscript\":{let[s,a]=t.args;if(a.val.length===0)throw Ob();let u;switch(s.type){case\"Letter\":u=s.val;break;case\"Cmd\":u=s.val;break;default:throw qE()}if(u===\"ans\")throw Vi(\"ans\");return new n.Identifier(`${u}_${a.val}`)}case\"Superscript\":{let[s,a]=t.args;if(s.type===\"Call\"&&s.args[1].type!==\"Seq\"&&!OT(s.args[0])&&!QZ(s))return new n.FunctionExponent(Pt(e,[s.args[0],s.args[1],a]));if(s.type===\"Dot\"){let u=s.args[1],[c,l]=yV(e,s.args,u),p=zn(e,a);if(u.type===\"Letter\")switch(u.val){case\"x\":case\"y\":case\"z\":return new n.Exponent([e.setInput(new n.NamedCoordinateAccess(u.val,[c]),s.span),p]);default:break}else if(u.type===\"Call\"){let d=u.args[0],m=gV(e,s,c,d);if(m!==void 0){let f=hV(u);return new n.Multiply([m,e.setInput(new n.Exponent([I_(e,u.args[1],Zo(t.span.input,f,u.span.end)),p]),Zo(t.span.input,f,a.span.end))])}}return new n.Exponent([e.setInput(new n.DotAccess([c,l]),s.span),p])}else return new n.Exponent(Pt(e,t.args))}case\"Sqrt\":return new n.FunctionCall(\"sqrt\",Pt(e,t.args));case\"Nthroot\":return new n.FunctionCall(\"nthroot\",Pt(e,[t.args[1],t.args[0]]));case\"Frac\":return new n.Divide(Pt(e,t.args));case\"Derivative\":{let s=Pt(e,t.args);if(!_r(t.args[0]))throw V(`Expected identifier in derivative, but found ${t.args[0].type}`);return new n.Derivative(s[0],[s[1]])}case\"Integral\":{let[s,a,u,c]=t.args,l=Pt(e,[s,a,u,c]);return new n.Integral(l)}case\"EmptyIntegral\":{let[s,a,u]=Pt(e,t.args),c=e.setInput(new n.Constant(Ie(1,1)),void 0);return new n.Integral([s,a,u,c])}case\"Sum\":{let[s,a,u]=t.args;if(a.type!==\"Comparator\"||!jm(a))throw Vv();let c=Pt(e,[a.args[0],a.args[1],u]),l=zn(fg(e,{prefix:\"ro\",expr:c[0]}),s);return new n.Sum(c.concat(l))}case\"Product\":{let[s,a,u]=t.args;if(a.type!==\"Comparator\"||!jm(a))throw Bv();let c=Pt(e,[a.args[0],a.args[1],u]),l=zn(fg(e,{prefix:\"ro\",expr:c[0]}),s);return new n.Product(c.concat(l))}case\"Juxt\":{if(e.writeIntegral){let[u,c]=t.args;if(c.type===\"Letter\"&&c.val===\"t\"&&u.type===\"Juxt\"&&([u,c]=u.args,c.type===\"Letter\"&&c.val===\"n\")){if(u.type===\"Juxt\"){if([u,c]=u.args,c.type===\"Letter\"&&c.val===\"i\")throw Xb()}else if(u.type===\"Letter\"&&u.val===\"i\")throw Xb()}}let[s,a]=t.args;if(s.type===\"MixedNumber\"&&!(_r(a)||a.type===\"Piecewise\"||a.type===\"Call\"||a.type===\"Paren\"))throw Rb(NT(s));if(a.type===\"MixedNumber\")throw Rb(NT(a));return new n.Multiply(Pt(e,t.args))}case\"Letter\":return new n.Identifier(t.val);case\"Cmd\":{let s=t.val;switch(s){case\"ans\":{if(e.index===void 0)throw Ry(\"ans\");return new n.Ans(`ans_{${e.index-1}}`)}case\"approx\":throw bb(s);case\"dt\":{if(!e.allowDt)throw Ry(s);return new n.Identifier(s)}case\"index\":{if(!e.allowIndex)throw Ry(s);return new n.Identifier(s)}default:return new n.Identifier(s)}}case\"With\":{if(e.isSubstitutionRHS)throw ex();let[s,a]=t.args,u={...e,isSubstitutionRHS:!0};return new n.Substitution(zn(u,s),XZ(u,a))}case\"Decimal\":return new n.Constant(TV(t));case\"MixedNumber\":return new n.MixedNumber(IV(t));case\"Piecewise\":return jZ(e,t);case\"RightArrow\":return WZ(e,t);case\"Seq\":return new n.BareSeq(Pt(e,t.args));case\"EmptyPiecewise\":return new n.Restriction([e.setInput(new n.Constant(!0),Ya(t.span.input,t.span.start))]);case\"Comparator\":throw t.symbol===\"=\"?Vi(\"=\"):xb();case\"ComparatorChain\":throw t.symbols.includes(\"=\")?uC():xb();case\"Tilde\":throw Vi(\"~\");case\"Colon\":throw Vi(\":\");case\"Ellipsis\":throw Vi(\"...\");case\"For\":return DT(e,t,{parentIsList:!1});case\"EmptyRangeEnd\":throw wv();case\"Err\":throw KZ(t.error);default:throw`Unexpected surface node ${t.type}.`}}function P_(e){return Wm.hasOwnProperty(e)}function I_(e,t,n){let r=e.nodes;if(t.type===\"Seq\"){if(t.args.length===0)throw Py();return e.setInput(new r.ParenSeq(Pt(e,t.args)),n)}else return zn(e,t)}function vV(e){return e===\"ln\"||e===\"log\"||e===\"logbase\"}function YZ(e){return e.type===\"Decimal\"&&e.val===\"2\"}function ZZ(e){return e.type!==\"Neg\"?!1:(e=e.args[0],e.type===\"Decimal\"&&e.val===\"1\")}function hV(e){return e.args[0].span.end}function bV(e,t){let n=e.nodes,[r,o]=t.args,i=zn(e,r),s=Vo(o),a=Pt(e,s);if(OT(r)){let u=Ya(o.span.input,o.span.start),c=e.setInput(MV(e),u);return new n.SeededFunctionCall(i,[c].concat(a))}if(_r(r))return new n.FunctionCall(i,a);if(r.type===\"Superscript\"){let[u,c]=r.args;if(u.type===\"Cmd\"){let l=u.val;if(P_(l)||vV(l)){if(YZ(c))return new n.Exponent([e.setInput(new n.FunctionCall(l,a),void 0),zn(e,c)]);if(ZZ(c)&&Wm[l]!==void 0)return new n.FunctionCall(Wm[l],a);throw P_(l)?YE(l):ZE(l===\"logbase\"?\"log\":l)}}}return new n.Multiply([i,zn(e,o)])}function DT(e,t,{parentIsList:n}){let r=e.nodes,[o,i]=t.args,s=e.setInput(new r.Identifier(`_comprehensionIndex_${zZ++}`),void 0);if(o.type===\"For\")throw ll(\"for\");let a=zn(fg(e,{prefix:\"li\",expr:s}),o),u=[];if(i.type===\"Seq\"){let p=!1,d=!1,m=!1;for(let f=0;f<i.args.length;f++){let g=i.args[f];jm(g)||e.allowIntervalComprehensions&&g.type===\"ComparatorChain\"?p=!0:d=!0,g.type===\"Cmd\"&&g.val===\"cursor\"&&(m=!0)}if(p&&d){let f=ll(\"for\");throw m&&f.setCursorContext({type:\"for-assignment-lhs\",allowedTypes:[D]}),f}}let c=[];for(let p of Vo(i))if(e.allowIntervalComprehensions&&p.type===\"ComparatorChain\"){let d=S_(p),{min:m,identifier:f,max:g,open:y}=d;c.push({identifier:zn(e,f),bounds:[zn(e,m),zn(e,g)],open:y})}else if(p.type===\"Comparator\"&&jm(p)){let d=e.setInput(new r.AssignmentExpression(Pt(e,p.args)),p.span);u.push(d)}else{if(p.type===\"Comparator\")throw Wd(\"a\");{let d=pM();throw p.type===\"Cmd\"&&p.val===\"cursor\"&&d.setCursorContext({type:\"for-assignment-lhs\",allowedTypes:[D]}),d}}let l=n;return new r.ListComprehension(s,a,u,l,c)}function XZ(e,t){let n=e.nodes;if(t.type===\"Seq\"){let i=!1,s=!1,a=!1;for(let u=0;u<t.args.length;u++){let c=t.args[u];if(c.type===\"With\")throw ll(\"with\");if(jm(c)||xV(c))i=!0;else if(e.allowIntervalComprehensions&&c.type===\"ComparatorChain\")try{S_(c),s=!0}catch(l){a=!0}else a=!0}if((i||s)&&a)throw ll(\"with\");if(s)throw tx()}if(e.allowIntervalComprehensions&&t.type===\"ComparatorChain\"){let i;try{S_(t),i=!0}catch(s){i=!1}if(i)throw tx()}if(t.type===\"With\")throw ex();let r=Vo(t),o=[];for(let i of r){if(i.type!=\"Comparator\"||!jm(i)&&!xV(i))throw Ay();let s=e.setInput(new n.AssignmentExpression(Pt(e,i.args)),i.span);o.push(s)}return o}function xV(e){if(e.type!==\"Comparator\"||e.symbol!==\"=\")return!1;let t=e.args[0];if(t.type!==\"Call\")return!1;let[n]=t.args;return!!_r(n)}function S_(e){if(e.symbols.length!==2)throw Wd(\"a\");let[t,n,r]=e.args,[o,i]=e.symbols;if(!_r(n))throw Wd(\"a\");if(o!==\"<\"&&o!==\"<=\"||i!==\"<\"&&i!==\"<=\"||e.symbols.includes(\"=\"))throw Wd(vr(n.span));return{min:t,identifier:n,max:r,open:[o===\"<\",i===\"<\"]}}function WZ(e,t){let n=e.nodes;if(!_r(t.args[0]))throw QC();return e=fg(e,{prefix:\"ec\",expr:e.setInput(new n.Identifier(\"globalEventCount\"),void 0)}),new n.UpdateRule(Pt(e,t.args))}function jZ(e,t){let n=e.nodes,[r]=t.args,o=Vo(r);if(o.length===1&&mg(o[0])){let d=o[0];return new n.Restriction([e.setInput(nc(e,d),d.span)])}if(o.length>1&&o.every(mg)){let d=e.setInput(nc(e,o[0]),o[0].span);for(let m=1;m<o.length;m++){let f=e.setInput(nc(e,o[m]),o[m].span);d=e.setInput(new n.Or([d,f]),Fi(o[0].span,o[m].span))}return new n.Restriction([d])}let i,s=[];e:for(i=0;i<o.length;i++){let d=o[i];switch(d.type){case\"Colon\":{let[m,f]=d.args;if(!mg(m))throw jE();if(f.type===\"With\"&&f.args[1].type===\"Seq\")throw ll(\"with\");s.push({condition:e.setInput(nc(e,m),m.span),if_expr:zn(e,f)});break}case\"Comparator\":case\"ComparatorChain\":s.push({condition:e.setInput(nc(e,d),d.span),if_expr:e.setInput(new n.Constant(Ie(1,1)),Zo(\"1\",0,1))});break;case\"For\":throw ll(\"for\");default:break e}}if(i===0)throw XE();if(i<o.length-1)throw WE();let a,u;i===o.length-1?(a=dg(e,o[i]),u=o[i]):a=new n.Constant(NaN);let c=a,l=u==null?void 0:u.span,p;for(;s.length;)p=s.pop(),c=new n.Piecewise([p.condition,p.if_expr,e.setInput(c,l)]),l=void 0;return c}function mg(e){return e.type===\"Comparator\"||e.type===\"ComparatorChain\"}function nc(e,t){let n=e.nodes;switch(t.type){case\"Comparator\":switch(t.symbol){case\"<\":return new n[\"Comparator['<']\"](Pt(e,t.args));case\"<=\":return new n[\"Comparator['<=']\"](Pt(e,t.args));case\">\":return new n[\"Comparator['>']\"](Pt(e,t.args));case\">=\":return new n[\"Comparator['>=']\"](Pt(e,t.args));case\"=\":return new n[\"Comparator['=']\"](Pt(e,t.args));default:throw new Error(`Unexpected symbol ${t.symbol}`)}case\"ComparatorChain\":return new n.ComparatorChain(t.symbols,Pt(e,t.args));default:throw V(`Unexpected type for condition: ${t.type}`)}}function JZ(e){let[t,n]=e.args;if(t.type===\"Superscript\"&&(t=t.args[0]),t.type===\"Cmd\"&&t.val===\"logbase\"&&n.type===\"Seq\"&&n.args.length===2){if(!fu(n.args[0]))throw _b(\"log\")}else if(!fu(n))throw t.type===\"Cmd\"?_b(t.val):V(`Unexpected type for args of implicit call: ${n.type}`)}function TV(e){return fp(e.val)}function IV(e){let t=fp(e.whole),n=fp(e.num),r=fp(e.den);return Ai(t,Yo(n,r))}function QZ(e){if(e.type!==\"Call\")return!1;let t=e.args[0];for(;t.type===\"Superscript\"||t.type===\"Subscript\"||t.type===\"Prime\";)t=t.args[0];return t.type!==\"Cmd\"?!1:P_(t.val)||vV(t.val)}function jm(e){return e.type===\"Comparator\"&&e.symbol===\"=\"&&_r(e.args[0])}function KZ(e){switch(e.type){case\"UnexpectedParseError\":case\"MissingBound\":case\"EmptyGroup\":case\"UnexpectedDifferential\":case\"UnexpectedEnd\":return V(`Unexpected error type: ${e.type}`);case\"InvalidOperatorName\":return GE();case\"UnexpectedCloseDelimiter\":case\"MissingCloseDelimiter\":return Xv(e.open,e.close);case\"UnrecognizedSymbol\":return e.val===\".\"?Vi(e.val):bb(e.val);case\"EmptyInput\":return Sy();case\"BinaryOperatorMissingRight\":case\"BinaryOperatorMissingLeft\":return Yd(e.val===\"%\"?\"% of\":e.val);case\"UnaryOperatorMissingLeft\":return OE(e.val);case\"UnaryOperatorMissingRight\":return AE(e.val);case\"UnexpectedSubscript\":return KE(e.base);case\"PercentMissingOf\":return jv();case\"SumMissingBound\":return Lv();case\"ProductMissingBound\":return Fv();case\"IntegralMissingBound\":return Uv();case\"SumMissingBody\":return Hv();case\"ProductMissingBody\":return $v();case\"IntegralMissingBody\":return Yv();case\"DerivativeMissingBody\":return Zv();case\"IntegralMissingDifferential\":return zv();case\"DifferentialWithSuperscript\":return kv();case\"FractionMissingNumerator\":return wE();case\"FractionMissingDenominator\":return LE();case\"FractionEmpty\":return FE();case\"EmptySuperscript\":return VE();case\"EmptySubscript\":return Ob();case\"InvalidSubscript\":return BE(e.val);case\"SuperscriptWithPrime\":return UE();case\"PrimeWithoutParen\":return wb();case\"UnexpectedPrime\":return Ab();case\"EmptyRadical\":return zE();case\"EmptyRadicalIndex\":return kE();case\"EmptySquareBracket\":return HE();case\"EmptyPipe\":return $E();case\"FunctionMissingArgument\":return Xa(e.val,1,0,{includeUsageExample:!0});case\"AdjacentNumbers\":return DE(NT(e.args[0]),NT(e.args[1]));case\"TokenWithSubscript\":return NE();case\"UnexpectedFor\":return Vi(\"for\");default:throw`Unexpected surface node ${e.type}.`}}function NT(e){switch(e.type){case\"Decimal\":return e.val;case\"MixedNumber\":return`${e.whole} ${e.num}/${e.den}`;default:let t=e;throw new Error(`Unexpected node type ${t.type}`)}}function fu(e){switch(e.type){case\"Letter\":case\"Decimal\":case\"MixedNumber\":case\"Cmd\":case\"EmptyPiecewise\":return!0;case\"Neg\":{let n=e.args[0];for(;;)if(n.type===\"Pos\"||n.type===\"Paren\"&&!EV(n))n=n.args[0];else if(n.type===\"Neg\")n=n.args[0];else break;return n.type===\"Decimal\"||n.type===\"MixedNumber\"}case\"Pos\":return fu(e.args[0]);case\"Paren\":return fu(e.args[0]);case\"Juxt\":case\"Mul\":case\"DotMul\":case\"CrossMul\":case\"Div\":return fu(e.args[0])&&fu(e.args[1]);case\"Subscript\":return fu(e.args[0]);case\"Superscript\":case\"Frac\":case\"Add\":case\"Sub\":return fu(e.args[0])&&fu(e.args[1]);case\"Piecewise\":{let[n]=e.args;return mg(n)}case\"Call\":{let[n,r]=e.args;return _r(n)||cV(n)?!1:fu(n)&&fu(r)}case\"Derivative\":case\"Sqrt\":case\"Nthroot\":case\"Pipes\":case\"Bang\":return!1;case\"Comparator\":case\"ComparatorChain\":case\"Tilde\":case\"ImplicitCall\":case\"Index\":case\"List\":case\"Seq\":case\"Integral\":case\"EmptyIntegral\":case\"Sum\":case\"Product\":case\"Colon\":case\"Ellipsis\":case\"For\":case\"With\":case\"Dot\":case\"PercentOf\":case\"Prime\":case\"EmptyRangeEnd\":case\"RightArrow\":return!1;default:throw`Unexpected surface node ${e.type}.`}}function OT(e){return e.type!==\"Cmd\"?!1:e.val===\"random\"||e.val===\"shuffle\"}function MV(e){let t=new e.nodes.ExtendSeed(\"\",[e.setInput(new e.nodes.Identifier(\"globalRandomSeed\"),void 0),e.setInput(new e.nodes.Seed(e.nextSeed()),void 0)]);if(!e.seedExtensions)return t;for(let{prefix:n,expr:r}of e.seedExtensions)t=new e.nodes.ExtendSeed(n,[e.setInput(t,void 0),r]);return t}function fg(e,t){let n=e.seedExtensions||[];return{...e,seedExtensions:n.concat(t)}}function Jm(e){return{type:\"initial\",tokenType:e}}function yg(e){return{type:\"l\",tokenType:e}}function gg(e){return{type:\"r\",tokenType:e}}function Pn(e){return{type:\"la\",tokenType:e}}function Qm(e){return{type:\"ra\",tokenType:e}}function _V(e,t){for(let n of EF)if(t[n]===void 0)throw new Error(`Programming Error: token ${n} must be a assigned a ${e} precedence`)}function Wp(e,t,n,r){if(t[n]!==void 0)throw new Error(`Programming Error: duplicate ${e} entry for token ${n}.`);t[n]=r}function RV(e){let t={},n={},r={};for(let a=0;a<e.length;a++){let u=e[a];for(let{type:c,tokenType:l}of u)switch(c){case\"initial\":Wp(\"initial\",t,l,a);break;case\"l\":Wp(\"left\",n,l,a);break;case\"r\":Wp(\"right\",r,l,a);break;case\"la\":Wp(\"left\",n,l,a),Wp(\"right\",r,l,a);break;case\"ra\":Wp(\"left\",n,l,a),Wp(\"right\",r,l,a-1);break}}_V(\"left\",n),_V(\"right\",r);function o(a){return r[a]}function i(a){return n[a]}function s(a){let u=t[a];return u===void 0?o(a):u}return{rightPrec:o,leftPrec:i,initialPrec:s}}function Ue(e,t){return{type:\"Err\",span:e,error:t}}function DV(){return{type:\"UnexpectedParseError\"}}function NV(){return{type:\"EmptyInput\"}}function OV(){return{type:\"EmptyGroup\"}}function E_(){return{type:\"EmptySubscript\"}}function AV(){return{type:\"EmptySuperscript\"}}function v_(){return{type:\"EmptyRadical\"}}function wV(){return{type:\"EmptySquareBracket\"}}function LV(){return{type:\"EmptyPipe\"}}function FV(){return{type:\"EmptyRadicalIndex\"}}function M_(){return{type:\"UnexpectedEnd\"}}function jp(e){return{type:\"BinaryOperatorMissingRight\",val:e}}function VV(e){return{type:\"BinaryOperatorMissingLeft\",val:e}}function __(e){return{type:\"UnaryOperatorMissingRight\",val:e}}function R_(e){return{type:\"UnaryOperatorMissingLeft\",val:e}}function BV(e,t){return{type:\"MissingCloseDelimiter\",open:e,close:t}}function hg(e,t){return{type:\"UnexpectedCloseDelimiter\",open:e,close:t}}function GV(){return{type:\"UnexpectedDifferential\"}}function qV(e){return{type:\"UnrecognizedSymbol\",val:e}}function UV(e){return{type:\"InvalidSubscript\",val:e}}function zV(e){return{type:\"UnexpectedSubscript\",base:e}}function D_(e){return{type:\"FunctionMissingArgument\",val:e}}function kV(){return{type:\"PercentMissingOf\"}}function N_(){return{type:\"PrimeWithoutParen\"}}function HV(){return{type:\"SuperscriptWithPrime\"}}function AT(){return{type:\"UnexpectedPrime\"}}function $V(){return{type:\"SumMissingBound\"}}function YV(){return{type:\"ProductMissingBound\"}}function O_(){return{type:\"MissingBound\"}}function ZV(){return{type:\"IntegralMissingBound\"}}function XV(){return{type:\"SumMissingBody\"}}function WV(){return{type:\"ProductMissingBody\"}}function jV(){return{type:\"IntegralMissingBody\"}}function JV(){return{type:\"DerivativeMissingBody\"}}function QV(){return{type:\"IntegralMissingDifferential\"}}function KV(){return{type:\"DifferentialWithSuperscript\"}}function eB(){return{type:\"FractionMissingNumerator\"}}function tB(){return{type:\"FractionMissingDenominator\"}}function nB(){return{type:\"FractionEmpty\"}}function A_(e){return{type:\"AdjacentNumbers\",args:e}}function rB(){return{type:\"TokenWithSubscript\"}}var tX=[[Jm(\"(\"),Pn(\")\"),Jm(\"\\\\{\"),Pn(\"\\\\}\"),gg(\"[\"),Pn(\"]\"),Jm(\"(|\"),Pn(\"|)\"),Pn(\"Differential\"),Pn(\"End\")],[Pn(\"for\")],[gg(\"with\")],[Qm(\"...\")],[Pn(\",\")],[Qm(\":\")],[gg(\"->\")],[yg(\"with\")],[Pn(\"=\"),Pn(\">\"),Pn(\"<\"),Pn(\">=\"),Pn(\"<=\"),Pn(\"~\")],[yg(\"->\")],[Pn(\"+\"),Pn(\"-\")],[Pn(\"*\"),Pn(\"\\\\cdot\"),Pn(\"\\\\times\"),Pn(\"/\"),Pn(\"Decimal\"),Pn(\"MixedNumber\"),Pn(\"Letter\"),Pn(\"Cmd\"),Pn(\"TokenNode\"),Pn(\"%\"),gg(\"(\"),Pn(\"\\\\{\"),Pn(\"(|\"),Pn(\"Frac\"),Pn(\"Sqrt\"),Pn(\"Trig\"),Pn(\"Ln\"),Pn(\"Log\"),Qm(\"Int\"),Qm(\"Sum\"),Qm(\"Prod\")],[Jm(\"+\"),Jm(\"-\")],[Pn(\"!\")],[Pn(\"SupSub\")],[yg(\"[\"),Pn(\".\")],[yg(\"(\")],[Pn(\"Err\")]],{leftPrec:L_,rightPrec:oB,initialPrec:F_}=RV(tX),iB={trailingComma:!1};function uB(e,t){let n=t?{...iB,...t}:iB,r=Fc(e,n),o=nX(r);return o.type===\"Err\"&&o.error.type===\"EmptyGroup\"?Ue(o.span,NV()):o}function nX(e){return Al(e,{isToplevel:!0})}function Al(e,{isToplevel:t}={isToplevel:!1}){if(RT(e))return Ue(ve(e,e),OV());let{state:n,tree:r}=Gr(e,0,{isToplevel:t});return r.type!==\"Err\"&&!RT(n)?V_(n).tree:r}function H(e,t){return{state:e,tree:t}}function Gr(e,t,{isToplevel:n}={isToplevel:!1}){let r=e,o;if({state:r,tree:o}=rX(r),o.type===\"Err\")return H(r,o);if(!T_(e,r))throw new Error(\"Programming Error: parseInitial did not advance state.\");for(;!RT(r);){let i;if(xo(r,\"(\")&&!sX(o)?i=oB(\"(\"):i=L_(Bo(r).type),t>=i)break;let s=r,a=oX(r,o,n)?F_(\"(\"):oB(Bo(r).type);if({state:r,tree:o}=iX(r,o,a),o.type===\"Err\")return H(r,o);if(!T_(s,r))throw new Error(\"Programming Error: parseSuccessor did not advance state.\")}return H(r,o)}function gs(e){return e.type===\"UnexpectedDifferential\"||e.type===\"UnexpectedCloseDelimiter\"||e.type===\"UnexpectedEnd\"}function rX(e){let t=e,n=Bo(e),r=F_(n.type),o;switch(n.type){case\"+\":{if(e=Je(e),{state:e,tree:o}=Gr(e,r),o.type===\"Err\"){if(!gs(o.error))return H(e,o);let s=ve(t,e),a=Ue(s,__(n.val));return H(e,a)}return H(e,OF(ve(t,e),[o]))}case\"-\":if(e=Je(e),{state:e,tree:o}=Gr(e,r),o.type===\"Err\"){if(!gs(o.error))return H(e,o);let s=ve(t,e),a=Ue(s,__(n.val));return H(e,a)}else return H(e,AF(ve(t,e),[o]));case\"(\":return bg(e);case\"\\\\{\":return e=Je(e),xo(e,\"\\\\}\")?(e=Je(e),H(e,QF(ve(t,e)))):({state:e,tree:o}=Gr(e,r),{state:e,tree:o}=xg(t,e,o,\"\\\\{\",\"\\\\}\"),o.type===\"Err\"?H(e,o):H(e,JF(ve(t,e),[o])));case\"[\":return e=Je(e),xo(e,\"]\")?(e=Je(e),H(e,m_(ve(t,e),[]))):({state:e,tree:o}=Gr(e,r),{state:e,tree:o}=xg(t,e,o,\"[\",\"]\"),o.type===\"Err\"?H(e,o):H(e,m_(ve(t,e),[o])));case\"(|\":{if(e=Je(e),xo(e,\"|)\")){e=Je(e);let s=ve(t,e);return H(e,Ue(s,LV()))}return{state:e,tree:o}=Gr(e,r),{state:e,tree:o}=xg(t,e,o,\"(|\",\"|)\"),o.type===\"Err\"?H(e,o):H(e,zF(ve(t,e),[o]))}case\"Frac\":{if(e.opts.disallowFrac)throw Qb();e=Je(e);let s=Al(Fc(n.num,e.opts)),a=Al(Fc(n.den,e.opts));if(s.type===\"Err\"&&s.error.type===\"EmptyGroup\"&&a.type===\"Err\"&&a.error.type===\"EmptyGroup\"){let u=ve(t,e),c=Ue(u,nB());return H(e,c)}if(s.type===\"Err\"&&s.error.type===\"EmptyGroup\"){let u=ve(t,e),c=Ue(u,eB());return H(e,c)}if(a.type===\"Err\"&&a.error.type===\"EmptyGroup\"){let u=ve(t,e),c=Ue(u,tB());return H(e,c)}if(s.type===\"Err\")return H(e,s);if(a.type===\"Err\")return H(e,a);if(lV(s,a)&&a.type===\"Juxt\"){let u=a.args[1],c;if({state:e,tree:c}=Gr(e,L_(\"*\")-1),c.type===\"Err\"){if(gs(c.error)){let l=ve(t,e);return H(e,Ue(l,JV()))}return H(e,c)}return H(e,YF(ve(t,e),[u,c]))}return H(e,$F(ve(t,e),[s,a]))}case\"Sqrt\":if(e=Je(e),n.optArg){let s=Al(Fc(n.optArg,e.opts));if(s.type===\"Err\")return s.error.type===\"EmptyGroup\"?H(e,Ue(s.span,FV())):H(e,s);let a=Al(Fc(n.arg,e.opts));return a.type===\"Err\"?a.error.type===\"EmptyGroup\"?H(e,Ue(a.span,v_())):H(e,a):H(e,HF(ve(t,e),[s,a]))}else{let s=Al(Fc(n.arg,e.opts));return s.type===\"Err\"?s.error.type===\"EmptyGroup\"?H(e,Ue(s.span,v_())):H(e,s):H(e,kF(ve(t,e),[s]))}case\"Trig\":case\"Ln\":{e=Je(e);let s=Xp(ve(t,e),n.val),a=0,u=Bo(e);if(u.type===\"SupSub\"){if(e=Je(e),u.sub){let p=ve(t,e),d=Ue(p,zV(s.val));return H(e,d)}let l=wT(u,e.opts);if(l){if(l.type===\"Err\")return H(e,l);s=CT(ve(t,e),[s,l])}a=u.nprimes}let c=xo(e,\"(\");if(c){if({state:e,tree:o}=bg(e),o.type===\"Err\")return H(e,o);o=cg(ve(t,e),[s,o.args[0]])}else{if({state:e,tree:o}=Gr(e,r-1),o.type===\"Err\")return gs(o.error)?H(e,Ue(ve(t,e),D_(n.val))):H(e,o);o=p_(ve(t,e),[s,o])}if(a>0){let l=ve(t,e);if(!c){let p=Ue(l,N_());return H(e,p)}o=lg(l,a,[o])}return H(e,o)}case\"Log\":{e=Je(e);let s=ve(t,e),a=Xp(s,n.val),u=0,c,l,p=Bo(e);if(p.type===\"SupSub\"&&(e=Je(e),c=cB(p,e.opts),l=wT(p,e.opts),u=p.nprimes),c&&c.type===\"Err\")return H(e,c);if(l&&l.type===\"Err\")return H(e,l);let d=xo(e,\"(\");if(d){if({state:e,tree:o}=bg(e),o.type===\"Err\")return H(e,o);o=o.args[0]}else if({state:e,tree:o}=Gr(e,r-1),o.type===\"Err\")return gs(o.error)?H(e,Ue(ve(t,e),D_(n.val))):H(e,o);let m=c?Xp(s,\"\\\\logbase\"):a,f=c?ET(ve(t,e),Vo(o).concat(c)):o;if(l&&(m=CT(ve(t,e),[m,l])),d?o=cg(ve(t,e),[m,f]):o=p_(ve(t,e),[m,f]),u>0){let g=ve(t,e);if(!d){let y=Ue(g,N_());return H(e,y)}o=lg(g,u,[o])}return H(e,o)}case\"Int\":{e=Je(e);let s=Bo(e);e=Je(e);let a=w_(s,t,e);if(a.type===\"Err\")return a.error.type===\"MissingBound\"?H(e,Ue(a.span,ZV())):H(e,a);let{sup:u,sub:c}=a,l;if(xo(e,\"Differential\"))return{state:e,tree:l}=aB(e),l.type===\"Err\"?H(e,l):H(e,XF(ve(t,e),[l,c,u]));if({state:e,tree:o}=Gr(e,r),o.type===\"Err\")return gs(o.error)?H(e,Ue(o.span,jV())):H(e,o);let p=o;return xo(e,\"Differential\")?({state:e,tree:l}=aB(e),l.type===\"Err\"?H(e,l):H(e,ZF(ve(t,e),[l,c,u,p]))):H(e,Ue(ve(t,e),QV()))}case\"Sum\":{e=Je(e);let s=Bo(e);e=Je(e);let a=w_(s,t,e);if(a.type===\"Err\")return a.error.type===\"MissingBound\"?H(e,Ue(a.span,$V())):H(e,a);let{sup:u,sub:c}=a;return{state:e,tree:o}=Gr(e,r),o.type===\"Err\"?gs(o.error)?H(e,Ue(o.span,XV())):H(e,o):H(e,WF(ve(t,e),[o,c,u]))}case\"Prod\":{e=Je(e);let s=Bo(e);e=Je(e);let a=w_(s,t,e);if(a.type===\"Err\")return a.error.type===\"MissingBound\"?H(e,Ue(a.span,YV())):H(e,a);let{sup:u,sub:c}=a;return{state:e,tree:o}=Gr(e,r),o.type===\"Err\"?gs(o.error)?H(e,Ue(o.span,WV())):H(e,o):H(e,jF(ve(t,e),[o,c,u]))}case\"Cmd\":return e=Je(e),o=Xp(ve(t,e),n.val),H(e,o);case\"TokenNode\":{e=Je(e);let s=Bo(e);return s.type===\"SupSub\"&&s.sub?(e=Je(e),H(e,Ue(ve(t,e),rB()))):(o=Xp(ve(t,e),n.val),H(e,o))}case\"Letter\":return e=Je(e),o=sV(ve(t,e),n.val),H(e,o);case\"Decimal\":{e=Je(e);let s=vT(ve(t,e),n.val),a=e.token;if(a.type===\"Decimal\"||a.type===\"MixedNumber\"){let u=e;e=Je(e);let c=ve(t,e),l=a.type===\"MixedNumber\"?a:vT(ve(u,e),a.val);return H(e,Ue(c,A_([s,l])))}if(n.val.endsWith(\".\")&&a.type===\"Cmd\"&&(a.val===\"\\\\real\"||a.val===\"\\\\imag\"))throw Tb();return H(e,s)}case\"MixedNumber\":{if(e.opts.disallowFrac)throw Qb();e=Je(e);let s=e.token;if(s.type===\"Decimal\"||s.type===\"MixedNumber\"){let a=e;e=Je(e);let u=ve(t,e),c=s.type===\"MixedNumber\"?s:vT(ve(a,e),s.val);return H(e,Ue(u,A_([n,c])))}return H(e,n)}case\"*\":case\"\\\\cdot\":case\"\\\\times\":case\"/\":case\",\":case\"=\":case\">\":case\"<\":case\">=\":case\"<=\":case\"->\":case\"~\":case\":\":case\"...\":case\"%\":case\".\":case\"for\":case\"with\":{e=Je(e);let s=ve(t,e),a=Ue(s,VV(n.val));return H(e,a)}case\"!\":{e=Je(e);let s=ve(t,e),a=Ue(s,R_(n.val));return H(e,a)}case\"SupSub\":{e=Je(e);let s=\"supsub\";n.sub?s=\"subscript\":n.sup?s=\"superscript\":n.nprimes>0&&(s=\"prime\");let a=ve(t,e),u=Ue(a,R_(s));return H(e,u)}case\")\":case\"\\\\}\":case\"]\":case\"|)\":case\"Differential\":return V_(e);case\"Err\":{e=Je(e);let s=ve(t,e),a=Ue(s,qV(n.val));return H(e,a)}case\"End\":{let s=ve(t,e),a=Ue(s,M_());return H(e,a)}default:throw`Unexpected token type ${n.type}.`}}function oX(e,t,n){return xo(e,\"=\")&&n&&(CV(t)||C_(t))}function iX(e,t,n){let r=Bo(e),o;switch(r.type){case\"+\":case\"-\":case\"*\":case\"\\\\cdot\":case\"\\\\times\":case\"/\":case\"~\":case\":\":case\".\":case\"->\":case\"for\":{if(e=Je(e),{state:e,tree:o}=Gr(e,n),o.type===\"Err\")if(gs(o.error)){let s=Rr(t.span,e),a=Ue(s,jp(r.val));return H(e,a)}else return H(e,o);return H(e,sB(r.type,Rr(t.span,e),[t,o]))}case\"with\":{if(e=Je(e),{state:e,tree:o}=Gr(e,n),o.type===\"Err\")if(gs(o.error)){let s=Rr(t.span,e),a=Ue(s,jp(r.val));return H(e,a)}else return H(e,o);return H(e,sB(r.type,Rr(t.span,e),[t,o]))}case\"%\":{e=Je(e);let s=Bo(e);if(s.type!==\"Cmd\"||s.val!==\"of\"&&s.val!==\"\\\\of\"){let a=Ue(r.span,kV());return H(e,a)}if(e=Je(e),{state:e,tree:o}=Gr(e,n),o.type===\"Err\")if(gs(o.error)){let a=Rr(t.span,e),u=Ue(a,jp(r.val));return H(e,u)}else return H(e,o);return H(e,oV(Rr(t.span,e),[t,o]))}case\"=\":case\">=\":case\"<=\":case\">\":case\"<\":{let s=[t],a=[];for(;;){let c=Bo(e).type;if(c!==\"=\"&&c!==\">=\"&&c!==\"<=\"&&c!==\">\"&&c!==\"<\")break;if(a.push(c),e=Je(e),{state:e,tree:o}=Gr(e,n),o.type===\"Err\")if(gs(o.error)){let l=Rr(t.span,e),p=Ue(l,jp(r.val));return H(e,p)}else return H(e,o);s.push(o)}let u=s[s.length-1];return u.type===\"Comparator\"?(s.pop(),Array.prototype.push.apply(s,u.args),a.push(u.symbol)):u.type===\"ComparatorChain\"&&(s.pop(),Array.prototype.push.apply(s,u.args),Array.prototype.push.apply(a,u.symbols)),s.length===2?H(e,RF(Rr(t.span,e),a[0],s)):H(e,DF(Rr(t.span,e),a,s))}case\"!\":return e=Je(e),H(e,qF(Rr(t.span,e),[t]));case\"[\":{let s=e;if(e=Je(e),xo(e,\"]\")){e=Je(e);let a=ve(s,e);return H(e,Ue(a,wV()))}return{state:e,tree:o}=Gr(e,n),{state:e,tree:o}=xg(s,e,o,\"[\",\"]\"),o.type===\"Err\"?H(e,o):H(e,UF(Rr(t.span,e),[t,o]))}case\"Sqrt\":case\"Frac\":case\"Letter\":case\"Cmd\":case\"TokenNode\":case\"Trig\":case\"Ln\":case\"Log\":case\"Sum\":case\"Int\":case\"Prod\":case\"Decimal\":case\"MixedNumber\":case\"\\\\{\":case\"(|\":return{state:e,tree:o}=Gr(e,n),o.type===\"Err\"?H(e,o):H(e,g_(Rr(t.span,e),[t,o]));case\"(\":if(_r(t)){if({state:e,tree:o}=bg(e),o.type===\"Err\")return H(e,o);let s=Rr(t.span,e);return H(e,cg(s,[t,o.args[0]]))}else if(t.type===\"Prime\"&&_r(t.args[0])){if({state:e,tree:o}=bg(e),o.type===\"Err\")return H(e,o);let s=Rr(t.span,e);return H(e,lg(s,t.nprimes,[cg(s,[t.args[0],o.args[0]])]))}else return{state:e,tree:o}=Gr(e,n),o.type===\"Err\"?H(e,o):H(e,g_(Rr(t.span,e),[t,o]));case\"SupSub\":{e=Je(e);let s=lB(r),a=wT(r,e.opts);if(s&&s.type===\"Err\")return H(e,s);if(a&&a.type===\"Err\")return H(e,a);if(s&&(t=f_(Rr(t.span,e),[t,s])),a&&(t=CT(Rr(t.span,e),[t,a])),r.nprimes>0){let u=Rr(t.span,e);if(!_r(t)){let c=Ue(u,AT());return H(e,c)}t=lg(u,r.nprimes,[t])}return H(e,t)}case\",\":{let s=[t];for(;xo(e,\",\")&&(e=Je(e),!(xo(e,\"...\")||e.opts.trailingComma&&aX(e)));){if({state:e,tree:o}=Gr(e,n),o.type===\"Err\")if(gs(o.error)){let a=Rr(t.span,e),u=Ue(a,jp(r.val));return H(e,u)}else return H(e,o);s.push(o)}return H(e,ET(Rr(t.span,e),s))}case\"...\":{if(e=Je(e),xo(e,\",\")&&(e=Je(e)),n>=L_(Bo(e).type))return H(e,y_(Rr(t.span,e),[t,KF(b_(e))]));if({state:e,tree:o}=Gr(e,n),o.type===\"Err\")if(gs(o.error)){let s=Rr(t.span,e),a=Ue(s,jp(r.val));return H(e,a)}else return H(e,o);return H(e,y_(Rr(t.span,e),[t,o]))}case\"]\":case\")\":case\"\\\\}\":case\"|)\":case\"Differential\":return V_(e);case\"Err\":return Gr(e,n);case\"End\":{let s=ve(e,e),a=Ue(s,M_());return H(e,a)}default:throw`Unexpected token type ${r.type}.`}}function sX(e){return!!(_r(e)||e.type===\"Prime\"&&_r(e.args[0]))}function sB(e,t,n){switch(e){case\"+\":return wF(t,n);case\"-\":return LF(t,n);case\"*\":return FF(t,n);case\"\\\\cdot\":return VF(t,n);case\"\\\\times\":return BF(t,n);case\"/\":return GF(t,n);case\"~\":return NF(t,n);case\":\":return eV(t,n);case\".\":switch(n[0].type){case\"Decimal\":case\"MixedNumber\":throw Tb();default:return rV(t,n)}case\"->\":return iV(t,n);case\"for\":return tV(t,n);case\"with\":return nV(t,n);default:throw`Unexpected token type ${e}.`}}function cB(e,t){if(!e.sub)return;let n=e.sub,r=Al(Fc(n,t));return r.type===\"Err\"&&r.error.type===\"EmptyGroup\"?Ue(r.span,E_()):r}function lB(e){if(!e.sub)return;let t=e.sub;if(t.args.length===0)return Ue(t.span,E_());let n=[];for(let r of t.args)if(r.type===\"Digit\"||r.type===\"Letter\")n.push(r.val);else{let o=r.span;return Ue(o,UV(vr(o)))}return aV(t.span,n.join(\"\"))}function wT(e,t){if(!e.sup)return;let n=Al(Fc(e.sup,t));return n.type===\"Err\"?n.error.type===\"EmptyGroup\"?Ue(n.span,AV()):n:e.nprimes>0?Ue(e.span,HV()):n}function w_(e,t,n){if(e.type!==\"SupSub\"){let i=ve(t,n);return Ue(i,O_())}if(e.nprimes>0){let i=ve(t,n);return Ue(i,AT())}let r=cB(e,n.opts),o=wT(e,n.opts);if(!r||r.type===\"Err\"&&r.error.type===\"EmptySubscript\"||!o||o.type===\"Err\"&&o.error.type===\"EmptySuperscript\"){let i=ve(t,n);return Ue(i,O_())}return r.type===\"Err\"?r:o.type===\"Err\"?o:{type:\"Bounds\",sup:o,sub:r}}function bg(e){if(e.opts.disableParentheses)throw cM();let t=e,n=Bo(e),r=F_(n.type);if(xo(e,\"(\"))e=Je(e);else throw new Error(\"Programming Error: expected '(' at start of parseParen.\");if(xo(e,\")\")){let i=ET(b_(e),[]);e=Je(e);let s=ve(t,e);return H(e,d_(s,[i]))}let o;return{state:e,tree:o}=Gr(e,r),{state:e,tree:o}=xg(t,e,o,\"(\",\")\"),o.type===\"Err\"?H(e,o):H(e,d_(ve(t,e),[o]))}function aB(e){let t=e,n=Bo(e);if(n.type!==\"Differential\")throw new Error(\"Programming Error: expected differential\");e=Je(e);let r=Xp(n.span,n.val),o=Bo(e);if(o.type===\"SupSub\"){e=Je(e);let i=ve(t,e),s=lB(o);if(s){if(s.type===\"Err\")return H(e,s);r=f_(i,[r,s])}if(o.sup)return H(e,Ue(i,KV()));if(o.nprimes>0)return H(e,Ue(i,AT()))}return H(e,r)}function xg(e,t,n,r,o){if(n.type===\"Err\"&&n.error.type!==\"UnexpectedEnd\")return H(t,n);if(n.type===\"Err\"||!xo(t,o)){let i=ve(e,t),s=Ue(i,BV(r,o));return H(t,s)}return t=Je(t),H(t,n)}function V_(e){let t=e;switch(Bo(e).type){case\")\":{e=Je(e);let r=ve(t,e);return H(e,Ue(r,hg(\"(\",\")\")))}case\"]\":{e=Je(e);let r=ve(t,e);return H(e,Ue(r,hg(\"[\",\"]\")))}case\"\\\\}\":{e=Je(e);let r=ve(t,e);return H(e,Ue(r,hg(\"\\\\{\",\"\\\\}\")))}case\"|)\":{e=Je(e);let r=ve(t,e);return H(e,Ue(r,hg(\"|\",\"|\")))}case\"Differential\":{e=Je(e);let r=ve(t,e);return H(e,Ue(r,GV()))}default:{e=Je(e);let r=ve(t,e);return H(e,Ue(r,DV()))}}}function aX(e){return xo(e,\")\")||xo(e,\"]\")||xo(e,\"\\\\}\")}function wl(e,t){return Fi(e.token.span,t.prevSpan)}function rc(e,t,n){return{type:e,span:t,val:n}}function uX(e,t,n,r){return{input:e,prevSpan:t,pos:n,token:r}}function pB(e){return dB(e,0,Ya(e,0))}function dB(e,t,n){for(;MF(e.charCodeAt(t));)t+=1;let r=lX(e,t);return uX(e,n,t,r)}function ha(e){return dB(e.input,e.token.span.end,e.token.span)}function yu(e){return e.token}function gu(e,t){if(yu(e).type!==t)throw new Error(`Parse Error: expected ${t}.`);return ha(e)}function B_(e,t){return yu(e).type===t}function LT(e){return e.pos>=e.input.length}var cX={\"[\":\"[\",\"]\":\"]\",\"{\":\"{\",\"}\":\"}\",\"^\":\"^\",_:\"_\"};function lX(e,t){let n=t;if(t>=e.length)return rc(\"End\",Ya(e,t),\"\");let r=e.charCodeAt(t);if(vF(r)){let o=Zo(e,n,t+1);return rc(\"Digit\",o,e.charAt(n))}else if(PT(r)){let o=Zo(e,n,t+1);return rc(\"Letter\",o,e.charAt(n))}else if(ST(r))if(t+=1,PT(e.charCodeAt(t))){for(;PT(e.charCodeAt(t));)t+=1;let o=Zo(e,n,t),i=vr(o);return rc(i===\"\\\\left\"?\"Left\":i===\"\\\\right\"?\"Right\":\"Cmd\",o,i)}else{t+=1;let o=Zo(e,n,t),i=vr(o);return rc(\"EscapedSymbol\",o,i)}else if(l_(r)){for(t+=1;l_(e.charCodeAt(t));)t+=1;if(e.charAt(t)===\"^\"){t+=1;let o=Zo(e,n,t),i=vr(o);return rc(\"Primes^\",o,i)}else{let o=Zo(e,n,t),i=vr(o);return rc(\"Primes\",o,i)}}else{let o=Zo(e,n,t+1),i=e.charAt(n),s=cX[i]||\"Symbol\";return rc(s,o,i)}}function G_(e,t){return{type:\"Group\",span:e,args:t}}function mB(e,t,n){return{type:\"Sqrt\",span:e,optArg:t,arg:n}}function fB(e,t,n){return{type:\"Frac\",span:e,num:t,den:n}}function yB(e,t,n,r){return{type:\"SupSub\",span:e,sup:t,sub:n,nprimes:r}}function gB(e,t,n,r){return{type:\"LeftRight\",span:e,left:t,right:n,arg:r}}function hB(e,t){return{type:\"OperatorName\",span:e,arg:t}}function bB(e,t){return{type:\"TokenNode\",span:e,arg:t}}function xB(e,t){return{type:\"Symbol\",span:e,val:t}}var q_={type:\"primitive\",errorName:\"^\"},TB={type:\"primitive\",errorName:\"_\"},dX={\"\\\\frac\":{type:\"macro\",errorName:\"\\\\frac\",expandsToSingleAtom:!0},\"\\\\operatorname\":{type:\"macro\",errorName:\"\\\\operatorname\",expandsToSingleAtom:!1},\"\\\\token\":{type:\"macro\",errorName:\"\\\\token\",expandsToSingleAtom:!1}};function IB(e){let t=yu(e);if(t.type===\"Cmd\")return t.val===\"\\\\sqrt\"?B_(ha(e),\"[\")?{type:\"macro\",errorName:\"\\\\sqrt[*]\",expandsToSingleAtom:!1}:{type:\"primitive\",errorName:\"\\\\sqrt\"}:dX[t.val];if(t.type===\"^\"||t.type===\"Primes^\")return q_;if(t.type===\"_\")return TB}function PB(e){let{state:t,tree:n}=FT(pB(e),!1);if(!LT(t))throw new Error(`Parse error: unexpected ${vr(yu(t).span)}.`);return n}function Xs(e,t){return{state:e,tree:t}}function FT(e,t){let n=e,r=[];e:for(;!LT(e);){let i=yu(e);switch(i.type){case\"Cmd\":case\"EscapedSymbol\":case\"Letter\":case\"Digit\":case\"Symbol\":case\"[\":case\"{\":case\"^\":case\"_\":case\"Primes\":case\"Primes^\":case\"Left\":case\"]\":{if(i.type===\"]\"&&t)break e;let a;if({state:e,tree:a}=SB(e),a.type===\"Group\")for(let u of a.args)r.push(u);else r.push(a);break}case\"}\":case\"Right\":case\"End\":break e;default:let s=i.type;throw new Error(`Unexpected token type ${s}.`)}}let o=wl(n,e);return Xs(e,G_(o,r))}function SB(e){let t=yu(e);switch(t.type){case\"EscapedSymbol\":case\"Letter\":case\"Digit\":case\"Symbol\":return e=ha(e),Xs(e,t);case\"[\":case\"]\":return e=ha(e),Xs(e,xB(t.span,t.val));case\"{\":{e=ha(e);let r;return{state:e,tree:r}=FT(e,!1),e=gu(e,\"}\"),Xs(e,r)}case\"^\":case\"_\":case\"Primes\":case\"Primes^\":return xX(e);case\"Left\":return bX(e);case\"Cmd\":return mX(e);case\"}\":case\"Right\":throw new Error(`Parse Error: unexpected ${t.val}.`);case\"End\":throw new Error(\"Parse Error: unexpected end.\");default:let n=t.type;throw new Error(`Unexpected token type ${n}.`)}}function mX(e){let t=IB(e),n=yu(e);if(!t)return e=gu(e,\"Cmd\"),Xs(e,n);switch(n.val){case\"\\\\operatorname\":return fX(e,t);case\"\\\\token\":return yX(e,t);case\"\\\\sqrt\":return gX(e,t);case\"\\\\frac\":return hX(e,t);default:throw new Error(`Unexpected command ${n.val}.`)}}function fX(e,t){let n=e;e=gu(e,\"Cmd\");let r;({state:e,tree:r}=Ll(e,t));let o=wl(n,e);return Xs(e,hB(o,r))}function yX(e,t){let n=e;e=gu(e,\"Cmd\");let r;({state:e,tree:r}=Ll(e,t));let o=wl(n,e);return Xs(e,bB(o,r))}function gX(e,t){let n=e;e=gu(e,\"Cmd\");let r;B_(e,\"[\")&&({state:e,tree:r}=TX(e));let o;({state:e,tree:o}=Ll(e,t));let i=wl(n,e);return Xs(e,mB(i,r,o))}function hX(e,t){let n=e;e=gu(e,\"Cmd\");let r;({state:e,tree:r}=Ll(e,t));let o;({state:e,tree:o}=Ll(e,t));let i=wl(n,e);return Xs(e,fB(i,r,o))}function bX(e){let t=e;e=gu(e,\"Left\");let n=yu(e);e=ha(e);let r;({state:e,tree:r}=FT(e,!1)),e=gu(e,\"Right\");let o=yu(e);e=ha(e);let i=wl(t,e);return Xs(e,gB(i,n,o,r))}function xX(e){let t=e,n,r,o=0;e:for(;!LT(e);){let s=yu(e);switch(s.type){case\"^\":if(e=ha(e),n)throw new Error(\"Parse Error: double superscript.\");({state:e,tree:n}=Ll(e,q_));break;case\"_\":if(e=ha(e),r)throw new Error(\"Parse Error: double subscript.\");({state:e,tree:r}=Ll(e,TB));break;case\"Primes\":if(e=ha(e),o>0)throw new Error(\"Parse Error: double primes.\");o=s.val.length;break;case\"Primes^\":if(e=ha(e),o>0)throw new Error(\"Parse Error: double primes.\");if(n)throw new Error(\"Parse Error: double superscript\");o=s.val.length-1,{state:e,tree:n}=Ll(e,q_);break;default:break e}}let i=wl(t,e);return Xs(e,yB(i,n,r,o))}function Ll(e,t){let n,r=IB(e);if(r&&(t.type!==\"primitive\"||!(r.type===\"macro\"&&r.expandsToSingleAtom)))throw new Error(`Parse Error: can't use ${r.errorName} as argument of ${t.errorName}. Use {}.`);return{state:e,tree:n}=SB(e),n.type!==\"Group\"&&(n=G_(n.span,[n])),Xs(e,n)}function TX(e){e=gu(e,\"[\");let t;return{state:e,tree:t}=FT(e,!0),e=gu(e,\"]\"),Xs(e,t)}function IX(){throw uM()}function CB(e,t){return t&&!e._inputSpan&&e.setInputSpan(t),e}function U_(e){try{let t=mi(e);return t instanceof $e?t:V(\"expected an identifer here.\")}catch(t){return V(t)}}function mi(e,t={}){let n=typeof e;if(n!==\"string\")throw new Error(`Type Error: parse can only be called with strings, got ${JSON.stringify(e)} of type ${n}`);let r=O;if(t.disabledFeatures){r=Object.create(r);for(let c of t.disabledFeatures){if(!r[c])throw new Error(`Programming Error: ${c} cannot be disabled because it is not a parsenode.`);r[c]=IX}}let o=t.seedPrefix===void 0?\"\":t.seedPrefix,i=0,s=()=>{let c=`${o}::vc${i}`;return i+=1,c},a={};t.trailingComma!==void 0&&(a.trailingComma=t.trailingComma),t.disallowFrac&&(a.disallowFrac=!0),t.disableParentheses&&(a.disableParentheses=!0);function u(c){return c.parseOptions=t,c}if(e===\"\")return u(Sy());try{let c=PB(e),l=uB(c,a),p=PV({...t,nodes:r,setInput:CB,nextSeed:s},l);return p.parseOptions=t,p}catch(c){let l;return c instanceof O.Error?l=c:typeof c==\"string\"?l=new O.Error(c):l=V(c),u(l)}}var SX=[\"Sum\",\"Product\",\"Integral\",\"List\",\"Derivative\",\"Piecewise\",\"Restriction\",\"Norm\",\"Exponent\",\"PercentOf\",\"FunctionDefinition\",\"UpdateRule\",\"Substitution\",\"ListComprehension\"],VT={isGeometryEnabled(){return!1},is3dProduct(){return!1},is3dPolicy(){return!1},polygonUnsupportedPreferTriangle(){return!1},areAllScalesLinear(){return!0},assignmentForbidden(e){return!0},graphingEnabled(){return!1},isValidSlider(e){return!1},sliderVariables(e){return[]},ansEnabled(){return!1},disabledFeatures(){return SX},dimensionVarsEnabled(){return!1},shouldIncludeFunctionParametersInRandomSeed(){return!0},isComplexEnabled(){return!1},isRecursionEnabled(){return!1},isRayCastEnabled(){return!1}},EB={...VT,isComplexEnabled(){return!0}},vB={...VT,isGeometryEnabled(){return!0},is3dProduct(){return!0},is3dPolicy(){return!0},isComplexEnabled(){return!1}};function Vc(e,t,n,r){return Fl({chunk:e,argMap:[t],start:n,unpatchedHeaderMap:new Map,processedHeaders:new Set},r)}function CX(e,t){let{chunk:n}=e,r=n.getInstruction(t),o=[];for(let i of r.recursionGroup){let s=e.unpatchedHeaderMap.get(i);if(s===void 0)throw new Error(\"Programming Error: `substitute` did not include all headers in a recursion group.\");o.push(s)}for(let i of r.recursionGroup)e.unpatchedHeaderMap.delete(i);for(let i of o)n.getInstruction(i).recursionGroup=o}function Fl(e,t){let{chunk:n,argMap:r,start:o}=e;if(t<o)return t;let i=r[t-o];if(i!==void 0)return i;let s=EX(e,t);e.argMap[t-o]=s;let a=n.getInstruction(t);if(a.type===4){let u=s;e.unpatchedHeaderMap.set(t,u),e.processedHeaders.add(t);for(let c of a.recursionGroup)e.processedHeaders.has(c)||Fl(e,c);return Fl(e,a.endIndex),u}if(Zr(a))switch(a.type){case 23:case 21:case 50:break;case 19:{let c=a.args.length-2;for(let l=0;l<c;l++)Fl(e,t+1+l);break}case 53:{let l=n.getInstruction(a.args[0]).signature.argTypes.length;for(let p=0;p<l;p++)Fl(e,t+1+p);break}default:let u=a;throw new Error(`Programming Error. Unexpected OpCode: ${u.type}`)}else if(cx(a)){let u=a.args.length-1;for(let c=0;c<u;c++)Fl(e,t+1+c)}return s}function EX(e,t){let{chunk:n,start:r}=e,o=n.getInstruction(t);if(mo(o)){let a=o.args[0];for(let u=a;u<=t;u++){let c=n.getInstruction(u);if(me(c))for(let l of c.args)l<a&&Fl(e,l)}}if(o.type===4)return n.FunctionHeader(o.symbol,o.valueType,o.signature,o.parameterSymbols);if(!me(o))return n.copyLeafInstruction(o);let i=[];for(let a of o.args)i.push(Fl(e,a));let s=e.argMap[t-r];if(s!==void 0)return s;if(o.type===55&&!Dx(n,t)){let a=o.args[0];e.unpatchedHeaderMap.has(a)&&CX(e,a)}return n.copyInstructionWithArgs(o,i)}function GT(e,t,n,r){let o=Yp(e,t),i=e.ColdConstant(0);if(t<n)return i;let s=e.ColdConstant(1),a=e.ColdConstant(NaN),u=Sl(e,n),c=uw(e,o),l=e.derivativeMaps.getMapEntry(e,r,n),{map:p,maxValidReference:d}=l;for(let b=0;b<p.length;b++){let T=p[b];T!==void 0&&T>d&&(p[b]=void 0)}let m=!1,f=e.instructionsLength()-1;for(let b=0;b<n;b++)p[b]=i;let g=new ho(e,n,f),y=Yr(e,o);return qT({chunk:e,derivativeVarIndex:n,forwardSeed:r,forwardMask:u,backwardMask:c,referenced:y,copyCtx:g,derivativeMap:p,mustCopy:m,ZERO:i,ONE:s,NAN:a},n,o),l.maxValidReference=e.instructionsLength()-1,p[o]}function qT(e,t,n){let{chunk:r,copyCtx:o,derivativeMap:i,backwardMask:s}=e;for(let a=t;a<=n;a++){let u=i[a];if(u!==void 0)if(r.getInstruction(u).type===0)i[a]=void 0;else{o.markMappedIndex(a,BT(e,a));continue}if(!s[a]){o.markMappedIndex(a,BT(e,a));continue}let c=r.getInstruction(a);if(Zr(c)&&c.endIndex!==-1)switch(c.type){case 21:{a=vX(e,a);continue}case 19:case 23:{a=RX(e,a);continue}case 53:{a=NX(e,a);continue}}o.markMappedIndex(a,BT(e,a)),i[a]=OX(e,a)}return n}function vX(e,t){let{chunk:n,forwardMask:r,copyCtx:o,derivativeMap:i,ZERO:s}=e,a=n.getInstruction(t),u=a.endIndex,c=n.getInstruction(u),l=s;if(r[a.args[1]]){let p=o.mapIndex(a.args[1]);l=n.Add([l,n.Multiply([i[a.args[1]],Vc(n,p,t,c.args[1])])])}if(r[a.args[0]]){let p=o.mapIndex(a.args[0]);l=n.Subtract([l,n.Multiply([i[a.args[0]],Vc(n,p,t,c.args[1])])])}if(MX(n,t,r)){let p=o.clone(),d=n.copyInstructionWithArgs(a,p.mapArgs(a.args));p.markMappedIndex(t,d),i[t]=s,qT({...e,copyCtx:p,mustCopy:!0},t+1,u-1);let m=n.copyInstructionWithArgs(c,[p.mapIndex(c.args[0]),i[c.args[1]]]);i[u]=m,l=n.Add([l,n.copyInstructionWithArgs(n.getInstruction(u+1),[m])])}else for(let p=t;p<=u;p++)i[p]=s;if(_X(n,t,o)){let p={...e,mustCopy:!0};for(let d=t;d<=u+1;d++)o.markMappedIndex(d,BT(p,d))}else for(let p=t;p<=u+1;p++)o.markMappedIndex(p,p);return i[u+1]=l,u+c.args.length-1}function MX(e,t,n){let r=e.getInstruction(t),o=e.getInstruction(r.endIndex);if(o.args[1]<t+1)return n[o.args[1]];for(let i=t+1;i<=o.args[1];i++){let s=e.getInstruction(i);if(me(s)){for(let a of s.args)if(a<t&&n[a])return!0}}return!1}function _X(e,t,n){let r=e.getInstruction(t);for(let o=t;o<=r.endIndex;o++){let i=e.getInstruction(o);if(me(i)){for(let s of i.args)if(n.mapIndex(s)!==s)return!0}}return!1}function RX(e,t){let{chunk:n,derivativeMap:r,copyCtx:o,ZERO:i}=e,s=n.getInstruction(t),a=s.endIndex,u=n.getInstruction(a),c;if(s.type===23)o.markMappedIndex(t,n.copyInstructionWithArgs(s,[o.mapIndex(s.args[0])])),r[t]=i,c=t+1;else{let p=[];p.push(o.mapIndex(s.args[0]),o.mapIndex(s.args[1]));for(let d=2;d<s.args.length;d++)p.push(o.mapIndex(s.args[d]),r[s.args[d]]);o.markMappedIndex(t,n.copyInstructionWithArgs(s,p)),r[t]=i;for(let d=2;d<s.args.length;d++){let m=t+d-1;o.markMappedIndex(m,n.copyInstructionWithArgs(n.getInstruction(m),[o.mapIndex(t)])),r[m]=n.copyInstructionWithArgs(n.getInstruction(m),[o.mapIndex(t)])}c=t+s.args.length-1}qT({...e,mustCopy:!0},c,a-1);let l=[];l.push(o.mapIndex(u.args[0]));for(let p=1;p<u.args.length;p++)l.push(o.mapIndex(u.args[p]),r[u.args[p]]);o.markMappedIndex(a,n.copyInstructionWithArgs(u,l)),r[a]=i;for(let p=1;p<u.args.length;p++){let d=a+p;o.markMappedIndex(d,n.copyInstructionWithArgs(n.getInstruction(d),[o.mapIndex(a)])),r[d]=n.copyInstructionWithArgs(n.getInstruction(d),[o.mapIndex(a)])}return a+u.args.length-1}function BT(e,t){let{chunk:n,copyCtx:r,mustCopy:o,referenced:i}=e;if(!i[t])return t;let s=n.getInstruction(t);if(me(s)){let a=[],u=!1;for(let c of s.args){let l=r.mapIndex(c);a.push(l),l!==c&&(u=!0)}return u||o?n.copyInstructionWithArgs(s,a):t}else return o?r.copyLeafOrFunctionHeader(s):t}function DX(e,t){let{chunk:n,derivativeMap:r}=e,o=n.getInstruction(t),i=[],s=o.recursionGroup;for(let a of s){let u=n.getInstruction(a),c={argTypes:[]};for(let p of u.signature.argTypes)c.argTypes.push(p,p);let l=r[a];l||(l=n.FunctionHeader(u.symbol+`_\\u2202${e.derivativeVarIndex}`,u.valueType,c,u.parameterSymbols),i.push(l)),e.derivativeMap[a]=l}for(let a of i){let u=n.getInstruction(a);u.recursionGroup=i}return e.derivativeMap[t]}function NX(e,t){let{chunk:n,copyCtx:r,derivativeMap:o}=e,s=n.getInstruction(t).args[0],a=n.getInstruction(s),u=a.endIndex,l=n.getInstruction(u).args[1],p=o[s],d=n.BeginFunction([p]);o[t]=d;let m=a.signature.argTypes,f=[];for(let T=0;T<m.length;T++){let I=m[T],E=t+T+1;f.push(E);let S=n.BlockVar(I,[d]),C=n.BlockVar(I,[d]);r.markMappedIndex(E,S),o[E]=C}let g=t+m.length+1,y=u-1,h=ju(n,f,g,y),b=r.clone();return b.markMappedIndex(s,s),qT({...e,copyCtx:b,mustCopy:!0,forwardMask:h},g,y),n.EndFunction([d,o[l]]),u}function OX(e,t){let{chunk:n,derivativeVarIndex:r,forwardSeed:o,forwardMask:i,copyCtx:s,derivativeMap:a,ZERO:u,ONE:c,NAN:l}=e,p=n.getInstruction(t);if(t===r){let m;switch(o){case\"real\":m=c;break;case\"complexOne\":m=n.NativeFunction(\"complex\",[c,u]);break;case\"complexI\":m=n.NativeFunction(\"complex\",[u,c]);break}if(W(p.valueType)){let f=Mr(n,t),g=n.BeginBroadcast([f]),y=n.EndBroadcast([g,m]);return n.BroadcastResult(p.valueType,[y])}else return m}if(Zr(p)||mo(p)||p.type===47||p.type===48||p.type===25||p.type===27||p.type===26||p.type===29||p.type===28||p.type===32||p.type===31||p.type===42||p.type===44||p.type===49||p.valueType===Bt)return u;if(p.type===4)return DX(e,t);if(!i[t]||ux(p))return p.valueType!==x?wX(n,[s.mapIndex(t),u]):p.type!==1||isFinite(F(p.value))?u:l;if(p.type===38||p.type===15){let m=[];for(let f of p.args)m.push(a[f]);return n.copyInstructionWithArgs(p,m)}if(p.type===33)return n.copyInstructionWithArgs(p,[s.mapIndex(p.args[0]),a[p.args[1]],a[p.args[2]]]);if(p.type===55){let m=n.getInstruction(p.args[0]);if(m.endIndex===-1)throw zC(m.symbol);let g=[a[p.args[0]]];for(let y of p.args.slice(1)){g.push(s.mapIndex(y));let h=a[y];if(h===u){let b=n.getInstruction(y).valueType;l1(b)&&(h=n.ZeroOfType(b,0))}g.push(h)}return n.FunctionCall(g)}let d=u;for(let m=0;m<p.args.length;m++){if(!i[p.args[m]])continue;let f=a[p.args[m]];if(f===u)continue;let g=AX(e,s.mapIndex(t),m,f);g!==u&&(d=d===u?g:LX(n,[g,d]))}return d}function AX(e,t,n,r){let{chunk:o,ZERO:i,ONE:s,NAN:a}=e,u=o.getInstruction(t);switch(u.type){case 8:return r;case 9:switch(n){case 0:return r;default:return o.Negative([r])}case 10:switch(n){case 0:return o.Multiply([r,u.args[1]]);default:return o.Multiply([u.args[0],r])}case 11:switch(n){case 0:return o.Divide([r,u.args[1]]);default:return o.Multiply([u.args[0],o.Divide([o.Negative([r]),o.Square([u.args[1]])])])}case 14:return o.Negative([r]);case 56:return o.Multiply([o.ColdConstant(2),o.Multiply([u.args[0],r])]);case 12:case 13:switch(n){case 0:return o.Multiply([o.Multiply([u.args[1],o.Exponent([u.args[0],o.Subtract([u.args[1],s])])]),r]);default:return o.Multiply([o.Piecewise([o.Equal([u.args[0],i]),o.Piecewise([o.GreaterEqual([u.args[1],i]),i,a]),o.Multiply([o.NativeFunction(\"ln\",[u.args[0]]),t])]),r])}case 37:return FX(o,t,GX(u.symbol)[n],r);case 39:case 40:case 41:switch(n){case 0:return o.copyInstructionWithArgs(u,[r,u.args[1]]);default:return i}case 16:return o.copyInstructionWithArgs(u,[r]);default:{let c=u;throw new Error(`Unimplemented derivative for opcode ${c.type}`)}}}function wX(e,t){switch(e.getInstruction(t[0]).valueType){case he:return e.NativeFunction(\"scaleTangentSegment\",t);case Ee:return e.NativeFunction(\"scaleTangentLine\",t);case Ae:return e.NativeFunction(\"scaleTangentRay\",t);case Te:return e.NativeFunction(\"scaleTangentCircle\",t);case ue:return e.NativeFunction(\"scaleTangentArc\",t);case Ne:return e.NativeFunction(\"scaleTangentUndirectedAngleMarker\",t);case Ce:return e.NativeFunction(\"scaleTangentDirectedAngleMarker\",t);case _e:return e.NativeFunction(\"scaleTangentPolygon\",t);case we:return e.NativeFunction(\"scaleTangentTransformation\",t);default:return e.Multiply(t)}}function LX(e,t){switch(e.getInstruction(t[0]).valueType){case he:return e.NativeFunction(\"addTangentSegment\",t);case zt:return e.NativeFunction(\"addTangentSegmentThreeD\",t);case Ee:return e.NativeFunction(\"addTangentLine\",t);case Ae:return e.NativeFunction(\"addTangentRay\",t);case Pe:return e.NativeFunction(\"addTangentVector\",t);case Te:return e.NativeFunction(\"addTangentCircle\",t);case ue:return e.NativeFunction(\"addTangentArc\",t);case Ne:return e.NativeFunction(\"addTangentUndirectedAngleMarker\",t);case Ce:return e.NativeFunction(\"addTangentDirectedAngleMarker\",t);case _e:return e.NativeFunction(\"addTangentPolygon\",t);case we:return e.NativeFunction(\"addTangentTransformation\",t);default:return e.Add(t)}}function FX(e,t,n,r){let o=Gm.empty(ct),s=e.getInstruction(t).args;for(let a=0;a<s.length;a++){let u=VX[a];o.addLexicalBinding(u,s[a])}return o.addLexicalBinding(\"x_1\",r),o.addLexicalBinding(\"q\",t),Fe(k_(vB,e,o,Tg.root,void 0,void 0),n)}var VX=[\"x\",\"y\",\"z\",\"u\",\"v\"],BX={exp:[\"q*x_1\"],complexExp:[\"q*x_1\"],ln:[\"\\\\{x >= 0: x_1/x \\\\}\"],complexLn:[\"x_1/x\"],log:[\"\\\\{x >= 0: x_1/(x*\\\\ln(10)) \\\\}\"],complexLog:[\"x_1/(x*\\\\ln(10))\"],sqrt:[\"x_1/(2*q)\"],complexSqrt:[\"x_1/(2*q)\"],complexPow:[\"y*\\\\complexPow(x,y-1)*x_1\",\"q*\\\\complexLn(x)*x_1\"],rtxsqpone:[\"x*x_1/q\"],rtxsqmone:[\"x*x_1/q\"],sin:[\"\\\\cos(x)*x_1\"],complexSin:[\"\\\\cos(x)*x_1\"],cos:[\"-\\\\sin(x)*x_1\"],complexCos:[\"-\\\\sin(x)*x_1\"],tan:[\"(1+q^2)*x_1\"],complexTan:[\"(s*s)*x_1 \\\\with s=\\\\sec(x)\"],arcsin:[\"x_1/\\\\sqrt{1 - x^2}\"],complexArcsin:[\"x_1/(\\\\complexSqrt(1+x)\\\\complexSqrt(1-x))\"],arccos:[\"-x_1/\\\\sqrt{1 - x^2}\"],complexArccos:[\"-x_1/(\\\\complexSqrt(1+x)\\\\complexSqrt(1-x))\"],sinh:[\"\\\\cosh(x)*x_1\"],complexSinh:[\"\\\\cosh(x)*x_1\"],cosh:[\"\\\\sinh(x)*x_1\"],complexCosh:[\"\\\\sinh(x)*x_1\"],tanh:[\"(\\\\sech(x))^2*x_1\"],complexTanh:[\"(s*s)*x_1 \\\\with s=\\\\sech(x)\"],arcsinh:[\"x_1/\\\\rtxsqpone(x)\"],complexArcsinh:[\"x_1/(\\\\complexSqrt(1+\\\\complex(0,1)x)\\\\complexSqrt(1-\\\\complex(0,1)x))\"],arccosh:[\"\\\\{ x > 0: x_1/\\\\rtxsqmone(x) \\\\}\"],complexArccosh:[\"x_1/(\\\\complexSqrt(x+1)\\\\complexSqrt(x-1))\"],arctanh:[\"\\\\{ \\\\abs(x) < 1: x_1/(1 - x^2) \\\\}\"],complexArctanh:[\"x_1/((1+x)(1-x))\"],csc:[\"-\\\\cot(x)*q*x_1\"],complexCsc:[\"-\\\\cot(x)*q*x_1\"],sec:[\"\\\\tan(x)*q*x_1\"],complexSec:[\"\\\\tan(x)*q*x_1\"],cot:[\"-(1+q^2)*x_1\"],complexCot:[\"-(c*c)*x_1 \\\\with c=\\\\csc(x)\"],arccsc:[\"-x_1/(\\\\abs(x)*\\\\rtxsqmone(x))\"],complexArccsc:[\"-x_1/((x\\\\complexSqrt(1-1/x))(x\\\\complexSqrt(1+1/x)))\"],arcsec:[\"x_1/(\\\\abs(x)*\\\\rtxsqmone(x))\"],complexArcsec:[\"x_1/((x\\\\complexSqrt(1-1/x))(x\\\\complexSqrt(1+1/x)))\"],arccot:[\"-x_1/(1+x^2)\"],complexArccot:[\"-x_1/((x+\\\\complex(0,1))(x-\\\\complex(0,1)))\"],csch:[\"-\\\\coth(x)*q*x_1\"],complexCsch:[\"-\\\\coth(x)*q*x_1\"],sech:[\"-\\\\tanh(x)*q*x_1\"],complexSech:[\"-\\\\tanh(x)*q*x_1\"],coth:[\"-(\\\\csch(x))^2*x_1\"],complexCoth:[\"-(c*c)*x_1 \\\\with c=\\\\csch(x)\"],arccsch:[\"-x_1/(\\\\abs(x)*\\\\rtxsqpone(x))\"],complexArccsch:[\"-x_1/((x\\\\complexSqrt(1+\\\\complex(0,1)/x))(x\\\\complexSqrt(1-\\\\complex(0,1)/x)))\"],arcsech:[\"\\\\{ x >= 0: -x_1/(x*\\\\sqrt{1 - x^2}) \\\\}\"],complexArcsech:[\"-x_1/((x\\\\complexSqrt((1-x)/(1+x)))(1+x))\"],arccoth:[\"\\\\{ \\\\abs(x) > 1 : x_1/(1 - x^2) \\\\}\"],complexArccoth:[\"x_1/((1+x)(1-x))\"],factorial:[\"q*\\\\polyGamma(0, x + 1)*x_1\"],floor:[\"\\\\{ q=x: 0/0, 0*x_1 \\\\}\"],complexFloor:[\"\\\\{ \\\\real(d) + \\\\imag(d) = 0: 0/0, \\\\imag(d) - \\\\real(d) = 1: 0/0, 0*x_1 \\\\} \\\\with d = x - q\"],ceil:[\"\\\\{ q=x: 0/0, 0*x_1 \\\\}\"],complexCeil:[\"\\\\{ \\\\real(d) + \\\\imag(d) = 0: 0/0, \\\\imag(d) - \\\\real(d) = -1: 0/0, 0*x_1 \\\\} \\\\with d = x - q\"],round:[\"\\\\{ \\\\abs(\\\\mod(x, 1) - 0.5) > 0: 0*x_1 \\\\}\"],complexRound:[\"\\\\{ \\\\real(q) - \\\\real(x) = 0.5: 0/0, \\\\imag(q) - \\\\imag(x) = 0.5: 0/0, 0*x_1 \\\\}\"],abs:[\"\\\\{ x=0: 0/0, \\\\sign(x)*x_1 \\\\}\"],sign:[\"\\\\{ x=0: 0/0, 0*x_1 \\\\}\"],distance:[\"-((y.x-x.x)*x_1.x+(y.y-x.y)*x_1.y)/q\",\"((y.x-x.x)*x_1.x+(y.y-x.y)*x_1.y)/q\"],distanceThreeD:[\"-((y.x-x.x)*x_1.x+(y.y-x.y)*x_1.y+(y.z-x.z)*x_1.z)/q\",\"((y.x-x.x)*x_1.x+(y.y-x.y)*x_1.y+(y.z-x.z)*x_1.z)/q\"],segmentThreeD:[\"\\\\segmentThreeD(x_1,(0,0,0))\",\"\\\\segmentThreeD((0,0,0),x_1)\"],vectorThreeD:[\"\\\\vectorThreeD(x_1,(0,0,0))\",\"\\\\vectorThreeD((0,0,0),x_1)\"],triangle:[\"\\\\triangle(x_1,(0,0,0),(0,0,0))\",\"\\\\triangle((0,0,0),x_1,(0,0,0))\",\"\\\\triangle((0,0,0),(0,0,0),x_1)\"],sphere:[\"\\\\sphere(x_1,0)\",\"\\\\sphere((0,0,0),x_1)\"],pointDet:[\"\\\\pointDet(x_1,y)\",\"\\\\pointDet(x,x_1)\"],pointDot:[\"\\\\pointDot(x_1,y)\",\"\\\\pointDot(x,x_1)\"],pointPerp:[\"\\\\pointPerp(x_1)\"],complexMultiplyPoints:[\"\\\\complexMultiplyPoints(x_1,y)\",\"\\\\complexMultiplyPoints(x,x_1)\"],segment:[\"\\\\segment(x_1,(0,0))\",\"\\\\segment((0,0),x_1)\"],line:[\"\\\\line(x_1,(0,0))\",\"\\\\line((0,0),x_1)\"],ray:[\"\\\\ray(x_1,(0,0))\",\"\\\\ray((0,0),x_1)\"],vector:[\"\\\\vector(x_1, (0,0))\",\"\\\\vector((0,0), x_1)\"],mathVector:[\"\\\\mathVector(x_1,(0,0))\",\"\\\\mathVector((0,0),x_1)\"],mathVectorThreeD:[\"\\\\mathVectorThreeD(x_1,(0,0,0))\",\"\\\\mathVectorThreeD((0,0,0),x_1)\"],rawTransform:[\"\\\\rawTransform(x_1,(0,0))\",\"\\\\rawTransform((0,0),x_1)\"],rawTransformConj:[\"\\\\rawTransformConj(x_1,(0,0))\",\"\\\\rawTransformConj((0,0),x_1)\"],transformWithoutTranslation:[\"\\\\transformWithoutTranslation(x_1)\"],transformScaleFactor:[\"\\\\transformScaleFactor(x_1)\"],vectorDisplacementAsPoint:[\"\\\\vectorDisplacementAsPoint(x_1)\"],vectorThreeDDisplacementAsPoint:[\"\\\\vectorThreeDDisplacementAsPoint(x_1)\"],basePointFromVector:[\"\\\\basePointFromVector(x_1)\"],basePointFromVectorThreeD:[\"\\\\basePointFromVectorThreeD(x_1)\"],circle:[\"\\\\circle(x_1,0)\",\"\\\\circle((0,0),x_1)\"],arc:[\"\\\\arc(x_1,(0,0),(0,0))\",\"\\\\arc((0,0),x_1,(0,0))\",\"\\\\arc((0,0),(0,0),x_1)\"],arcCenter:[\"(\\\\pointDot(q-p1,p1_1)\\\\pointPerp(v_2)+\\\\pointDot(q-p2,p2_1)\\\\pointPerp(v_3)+\\\\pointDot(q-p3,p3_1)\\\\pointPerp(v_1))/\\\\pointDet(v_2,v_1) \\\\with v_1=p2-p1,v_2=p3-p2,v_3=p1-p3\".replace(/p1_1/g,\"\\\\arcFirstPoint(x_1)\").replace(/p2_1/g,\"\\\\arcMiddlePoint(x_1)\").replace(/p3_1/g,\"\\\\arcThirdPoint(x_1)\").replace(/p1/g,\"\\\\arcFirstPoint(x)\").replace(/p2/g,\"\\\\arcMiddlePoint(x)\").replace(/p3/g,\"\\\\arcThirdPoint(x)\")],arcFirstPoint:[\"\\\\arcFirstPoint(x_1)\"],arcMiddlePoint:[\"\\\\arcMiddlePoint(x_1)\"],arcThirdPoint:[\"\\\\arcThirdPoint(x_1)\"],arcOmega:[\"2 * (X_1*Y/(Y*Y+X*X) - Y_1*X/(Y*Y+X*X))\".replace(/X_1/g,\"((v1x * v2y_1 + v1x_1 * v2y) - (v2x_1 * v1y + v2x * v1y_1))\").replace(/Y_1/g,\"((v1x * v2x_1 + v1x_1 * v2x) + (v1y_1 * v2y + v1y * v2y_1))\").replace(/X/g,\"(v1x * v2y - v2x * v1y)\").replace(/Y/g,\"(v1x * v2x + v1y * v2y)\").replace(/v1x_1/g,\"(\\\\arcMiddlePoint(x_1) - \\\\arcFirstPoint(x_1)).x\").replace(/v2x_1/g,\"(\\\\arcThirdPoint(x_1) - \\\\arcMiddlePoint(x_1)).x\").replace(/v1y_1/g,\"(\\\\arcMiddlePoint(x_1) - \\\\arcFirstPoint(x_1)).y\").replace(/v2y_1/g,\"(\\\\arcThirdPoint(x_1) - \\\\arcMiddlePoint(x_1)).y\").replace(/v1x/g,\"(\\\\arcMiddlePoint(x) - \\\\arcFirstPoint(x)).x\").replace(/v2x/g,\"(\\\\arcThirdPoint(x) - \\\\arcMiddlePoint(x)).x\").replace(/v1y/g,\"(\\\\arcMiddlePoint(x) - \\\\arcFirstPoint(x)).y\").replace(/v2y/g,\"(\\\\arcThirdPoint(x) - \\\\arcMiddlePoint(x)).y\")],center:[\"\\\\center(x_1)\"],radius:[\"\\\\radius(x_1)\"],undirectedAngleMarker:[\"\\\\undirectedAngleMarker(x_1)\"],directedAngleMarker:[\"\\\\directedAngleMarker(x_1,0,0,0)\",\"\\\\directedAngleMarker((0,0),x_1,0,0)\",\"\\\\directedAngleMarker((0,0),0,x_1,0)\",\"\\\\directedAngleMarker((0,0),0,0,x_1)\"],directedCoterminalAngle:[\"\\\\directedAngleMarker((0,0),0,\\\\directedAngleMarkerRawDelta(x_1),0)\"],undirectedCoterminalAngle:[\"\\\\undirectedAngleMarker(\\\\directedAngleMarker((0,0),0,\\\\undirectedAngleMarkerRawDelta(x_1),0))\"],supplement:[\"\\\\directedAngleMarker((0,0),0,-\\\\directedAngleMarkerRawDelta(x_1),0)\"],directedAngleMarkerMultiplier:[\"\\\\directedAngleMarkerMultiplier(x_1)\"],undirectedAngleMarkerMultiplier:[\"\\\\undirectedAngleMarkerMultiplier(x_1)\"],directedAngleMarkerRawDelta:[\"\\\\directedAngleMarkerRawDelta(x_1)\"],undirectedAngleMarkerRawDelta:[\"\\\\undirectedAngleMarkerRawDelta(x_1)\"],polygonInteriorUndirectedAngles:[\"\\\\polygonInteriorUndirectedAngles(x_1)\"],polygonInteriorDirectedAngles:[\"\\\\polygonInteriorDirectedAngles(x_1)\"],lineFromSegment:[\"\\\\lineFromSegment(x_1)\"],lineFromRay:[\"\\\\lineFromRay(x_1)\"],segmentGlider:[\"\\\\segmentGlider(x_1,y)\",\"\\\\{0<y<1:(\\\\segmentGlider(x,1)-\\\\segmentGlider(x,0))*x_1,(0,0)\\\\}\"],segmentThreeDGlider:[\"\\\\segmentThreeDGlider(x_1,y)\",\"\\\\{0<y<1:(\\\\segmentThreeDGlider(x,1)-\\\\segmentThreeDGlider(x,0))*x_1,(0,0,0)\\\\}\"],rayGlider:[\"\\\\rayGlider(x_1,y)\",\"\\\\{0<y:(\\\\rayGlider(x,1)-\\\\rayGlider(x,0))*x_1,(0,0)\\\\}\"],lineGlider:[\"\\\\lineGlider(x_1,y)\",\"(\\\\lineGlider(x,1)-\\\\lineGlider(x,0))*x_1\"],circleGlider:[\"\\\\circleGlider(x_1,y)\",\"\\\\{0<y<1:2*\\\\pi*\\\\pointPerp(q-\\\\center(x))*x_1,(0,0)\\\\}\"],arcGlider:[\"(0/0,0/0)\",\"(0/0,0/0)\"],polygonEdgeByParameter:[\"\\\\polygonEdgeByParameter(x_1,y)\",\"\\\\{\\\\floor(y)=y:\\\\segment((0/0,0/0),(0/0,0/0)),\\\\segment((0,0),(0,0))\\\\}\"],polygonGlider:[\"\\\\polygonGlider(x_1,y)\",\"\\\\{y<0:(0,0),y>x.\\\\vertices.\\\\count:(0,0),\\\\floor(y)=y:(0/0,0/0),(x_1*(\\\\segmentGlider(s,1)-\\\\segmentGlider(s,0))\\\\with s=\\\\polygonEdgeByParameter(x,y))\\\\}\"],chooseNonIncidentPoint:[\"(0/0,0/0)\"],circleCircleIntersection:[\"(\\\\radius(x)*\\\\radius(x_1)+\\\\pointDot(\\\\center(x_1),(q-\\\\center(x))))/\\\\pointDot(\\\\pointPerp(q-\\\\center(y)),q-\\\\center(x))*\\\\pointPerp(q-\\\\center(y))\",\"(\\\\radius(y)*\\\\radius(x_1)+\\\\pointDot(\\\\center(x_1),(q-\\\\center(y))))/\\\\pointDot(\\\\pointPerp(q-\\\\center(x)),q-\\\\center(y))*\\\\pointPerp(q-\\\\center(x))\"],circleArcIntersection:[\"(0/0,0/0)\"],circleLineIntersection:[\"(\\\\radius(x)*\\\\radius(x_1)+\\\\pointDot(\\\\center(x_1),(q-\\\\center(x))))/\\\\pointDot((\\\\lineGlider(y,1)-\\\\lineGlider(y,0)),q-\\\\center(x))*(\\\\lineGlider(y,1)-\\\\lineGlider(y,0))\",\"(\\\\pointDet(\\\\lineGlider(x_1,0),\\\\lineGlider(y,1))+\\\\pointDet(\\\\lineGlider(y,0),\\\\lineGlider(x_1,1))-\\\\pointDet(q,\\\\lineGlider(x_1,1)-\\\\lineGlider(x_1,0)))/(\\\\pointDet(\\\\pointPerp(q-\\\\center(x)),\\\\lineGlider(y,1)-\\\\lineGlider(y,0)))*(\\\\pointPerp(q-\\\\center(x)))\"],arcCircleIntersection:[\"(0/0,0/0)\"],arcArcIntersection:[\"(0/0,0/0)\"],arcLineIntersection:[\"(0/0,0/0)\"],lineCircleIntersection:[\"(\\\\pointDet(\\\\lineGlider(x_1,0),\\\\lineGlider(x,1))+\\\\pointDet(\\\\lineGlider(x,0),\\\\lineGlider(x_1,1))-\\\\pointDet(q,\\\\lineGlider(x_1,1)-\\\\lineGlider(x_1,0)))/(\\\\pointDet(\\\\pointPerp(q-\\\\center(y)),\\\\lineGlider(x,1)-\\\\lineGlider(x,0)))*(\\\\pointPerp(q-\\\\center(y)))\",\"(\\\\radius(y)*\\\\radius(x_1)+\\\\pointDot(\\\\center(x_1),(q-\\\\center(y))))/\\\\pointDot((\\\\lineGlider(x,1)-\\\\lineGlider(x,0)),q-\\\\center(y))*(\\\\lineGlider(x,1)-\\\\lineGlider(x,0))\"],lineArcIntersection:[\"(0/0,0/0)\"],lineLineIntersection:[\"(\\\\pointDet(\\\\lineGlider(x_1,0),\\\\lineGlider(x,1))+\\\\pointDet(\\\\lineGlider(x,0),\\\\lineGlider(x_1,1))-\\\\pointDet(q,\\\\lineGlider(x_1,1)-\\\\lineGlider(x_1,0)))/(\\\\pointDet(\\\\lineGlider(y,1)-\\\\lineGlider(y,0),\\\\lineGlider(x,1)-\\\\lineGlider(x,0)))*(\\\\lineGlider(y,1)-\\\\lineGlider(y,0))\",\"(\\\\pointDet(\\\\lineGlider(x_1,0),\\\\lineGlider(y,1))+\\\\pointDet(\\\\lineGlider(y,0),\\\\lineGlider(x_1,1))-\\\\pointDet(q,\\\\lineGlider(x_1,1)-\\\\lineGlider(x_1,0)))/(\\\\pointDet(\\\\lineGlider(x,1)-\\\\lineGlider(x,0),\\\\lineGlider(y,1)-\\\\lineGlider(y,0)))*(\\\\lineGlider(x,1)-\\\\lineGlider(x,0))\"],parallel:[\"\\\\parallel(x_1,(0,0))\",\"\\\\parallel(\\\\line((0,0),(0,0)),x_1)\"],perpendicular:[\"\\\\perpendicular(x_1,(0,0))\",\"\\\\perpendicular(\\\\line((0,0),(0,0)),x_1)\"],angleVertex:[\"\\\\angleVertex(x_1)\"],angleStart:[\"\\\\angleStart(x_1)\"],directedAngleVertex:[\"\\\\directedAngleVertex(x_1)\"],directedAngleStart:[\"\\\\directedAngleStart(x_1)\"],anglebisector:[\"\\\\ray(\\\\angleVertex(x_1),\\\\angleVertex(x_1) + \\\\pointPerp( \\\\rayGlider(q,1) - \\\\angleVertex(x) ) * (s_1 + d_1 / 2)) \\\\with s_1 = \\\\angleStart(x_1), d_1 = \\\\undirectedAngleMarkerRawDelta(x_1)\"],directedanglebisector:[\"\\\\ray(\\\\directedAngleVertex(x_1),\\\\directedAngleVertex(x_1) + \\\\pointPerp( \\\\rayGlider(q,1) - \\\\directedAngleVertex(x) ) * (s_1 + d_1 / 2)) \\\\with s_1 = \\\\directedAngleStart(x_1), d_1 = \\\\directedAngleMarkerRawDelta(x_1)\"],scaleTangentTransformation:[\"\\\\scaleTangentTransformation(x_1, y)\",\"\\\\scaleTangentTransformation(x, x_1)\"],scaleTangentPolygon:[\"\\\\scaleTangentPolygon(x_1, y)\",\"\\\\scaleTangentPolygon(x, x_1)\"],scaleTangentSegment:[\"\\\\scaleTangentSegment(x_1, y)\",\"\\\\scaleTangentSegment(x, x_1)\"],scaleTangentLine:[\"\\\\scaleTangentLine(x_1, y)\",\"\\\\scaleTangentLine(x, x_1)\"],scaleTangentRay:[\"\\\\scaleTangentRay(x_1, y)\",\"\\\\scaleTangentRay(x, x_1)\"],scaleTangentCircle:[\"\\\\scaleTangentCircle(x_1, y)\",\"\\\\scaleTangentCircle(x, x_1)\"],scaleTangentArc:[\"\\\\scaleTangentArc(x_1, y)\",\"\\\\scaleTangentArc(x, x_1)\"],scaleTangentDirectedAngleMarker:[\"\\\\scaleTangentDirectedAngleMarker(x_1, y)\",\"\\\\scaleTangentDirectedAngleMarker(x, x_1)\"],scaleTangentUndirectedAngleMarker:[\"\\\\scaleTangentUndirectedAngleMarker(x_1, y)\",\"\\\\scaleTangentUndirectedAngleMarker(x, x_1)\"],addTangentPolygon:[\"x_1\",\"x_1\"],addTangentSegment:[\"x_1\",\"x_1\"],addTangentSegmentThreeD:[\"x_1\",\"x_1\"],addTangentLine:[\"x_1\",\"x_1\"],addTangentRay:[\"x_1\",\"x_1\"],addTangentVector:[\"x_1\",\"x_1\"],addTangentCircle:[\"x_1\",\"x_1\"],addTangentArc:[\"x_1\",\"x_1\"],addTangentDirectedAngleMarker:[\"x_1\",\"x_1\"],addTangentUndirectedAngleMarker:[\"x_1\",\"x_1\"],addTangentTransformation:[\"x_1\",\"x_1\"],translation:[\"\\\\rawTransform((0,0),x_1)\"],dilation:[\"\\\\rawTransform((0,0),(1-y)x_1)\",\"\\\\rawTransform((x_1,0),-x*x_1)\"],reflection:[\"\\\\rawTransformConj(a_1,p1_1-\\\\complexMultiplyPoints(a_1,(p1.x,-p1.y))-\\\\complexMultiplyPoints(qa,(p1_1.x,-p1_1.y)))\\\\with a_1=\\\\pointPerp(qa)*(\\\\pointDet(v,v_1)*2/(v.x^2+v.y^2))\".replace(/p1_1/g,\"\\\\glider(x_1,0)\").replace(/p1/g,\"\\\\glider(x,0)\").replace(/v_1/g,\"(\\\\glider(x_1,1)-\\\\glider(x_1,0))\").replace(/v/g,\"(\\\\glider(x,1)-\\\\glider(x,0))\").replace(/qa/g,\"\\\\transformScaleFactor(q)\")],rotation:[\"\\\\rawTransform((0,0),\\\\complexMultiplyPoints(p,x_1))\\\\with p=(1,0)-(\\\\cos(y),\\\\sin(y))\",\"\\\\rawTransform(p,\\\\complexMultiplyPoints(-p,x))\\\\with p=(-x_1*\\\\sin(y),x_1*\\\\cos(y))\"],compose:[\"\\\\reflection(\\\\line((0/0,0/0),(0/0,0/0)))\",\"\\\\reflection(\\\\line((0/0,0/0),(0/0,0/0)))\"],inverse:[\"\\\\reflection(\\\\line((0/0,0/0),(0/0,0/0)))\"],transformPoint:[\"\\\\transformPoint(x_1,y)\",\"\\\\transformPoint(\\\\transformWithoutTranslation(x),x_1)\"],transformSegment:[\"\\\\transformSegment(x_1,y)\",\"\\\\transformSegment(\\\\transformWithoutTranslation(x),x_1)\"],transformVector:[\"\\\\transformVector(x_1,y)\",\"\\\\transformVector(\\\\transformWithoutTranslation(x),x_1)\"],transformLine:[\"\\\\transformLine(x_1,y)\",\"\\\\transformLine(\\\\transformWithoutTranslation(x),x_1)\"],transformRay:[\"\\\\transformRay(x_1,y)\",\"\\\\transformRay(\\\\transformWithoutTranslation(x),x_1)\"],transformCircle:[\"\\\\circle(\\\\transformPoint(x_1,y.\\\\center), y.\\\\radius * \\\\pointDot(a_1,a) / \\\\hypot(a.x,a.y))\\\\with a=\\\\transformScaleFactor(x),a_1=\\\\transformScaleFactor(x_1)\",\"\\\\transformCircle(\\\\transformWithoutTranslation(x),x_1)\"],transformArc:[\"\\\\transformArc(x_1,y)\",\"\\\\transformArc(\\\\transformWithoutTranslation(x),x_1)\"],transformPolygon:[\"\\\\transformPolygon(x_1,y)\",\"\\\\transformPolygon(\\\\transformWithoutTranslation(x),x_1)\"],transformAngleMarker:[\"\\\\angle((1,0),(0,0),(1,0))\",\"\\\\transformAngleMarker(\\\\transformWithoutTranslation(x),x_1)\"],transformDirectedAngleMarker:[\"\\\\directedangle((1,0),(0,0),(1,0))\",\"\\\\transformDirectedAngleMarker(\\\\transformWithoutTranslation(x),x_1)\"],mean:[\"\\\\mean(x_1)\"],total:[\"\\\\total(x_1)\"],count:[\"0\"],var:[\"2*\\\\cov(x, x_1)\"],varp:[\"2*\\\\cov(x, x_1)*(\\\\count(x)-1)/\\\\count(x)\"],stdev:[\"\\\\cov(x, x_1)/q\"],stdevp:[\"\\\\covp(x, x_1)/q\"],mad:[\"\\\\mean(\\\\sign(x-\\\\mean(x))*(x_1 - \\\\mean(x_1)))\"],listMin:[\"x_1[\\\\argmin(x)]\"],listMax:[\"x_1[\\\\argmax(x)]\"],min:[\"\\\\{x>y:0,x_1\\\\}\",\"\\\\{x<=y:0,x_1\\\\}\"],max:[\"\\\\{x<y:0,x_1\\\\}\",\"\\\\{x>=y:0,x_1\\\\}\"],median:[\"0.5*(x_1[\\\\lowerQuantileIndex(x, 0.5)] + x_1[\\\\upperQuantileIndex(x, 0.5)])\"],argmin:[\"0/0\"],argmax:[\"0/0\"],gcd:[\"0/0\"],complexGCD:[\"0/0\"],lcm:[\"0/0\"],complexLCM:[\"0/0\"],erf:[\"\\\\frac{2x_1}{\\\\sqrt{\\\\pi }}\\\\exp(-x^2)\"],invNorm:[\"\\\\frac{x_1}{\\\\pdf(\\\\normaldist(0,1),q)}\"],logbase:[\"\\\\{x > 0: \\\\frac{x_1}{x*\\\\ln(y)} \\\\}\",\"\\\\frac{-q*x_1}{y*\\\\ln(y)}\"],complexLogbase:[\"\\\\frac{x_1}{x*\\\\complexLn(y)}\",\"\\\\frac{-q*x_1}{y*\\\\complexLn(y)}\"],hypot:[\"x_1*x/q\",\"x_1*y/q\"],polyGamma:[\"0/0\",\"\\\\polyGamma(1 + x, y)*x_1\"],mod:[\"\\\\{ q=0: 0/0, x_1 \\\\}\",\"\\\\{ \\\\mod(x/y, 1) > 0: -\\\\floor(x/y)*x_1 \\\\}\"],complexMod:[\"\\\\{ q=0: 0/0, x_1 \\\\}\",\"\\\\{ \\\\round(r)=r: 0/0, -\\\\floor(x/y)*x_1 \\\\} \\\\with r=x/y\"],cov:[\"\\\\cov(x_1, y)\",\"\\\\cov(x, x_1)\"],covp:[\"\\\\covp(x_1, y)\",\"\\\\covp(x, x_1)\"],corr:[\"(\\\\cov(x_1, y) - (\\\\cov(x, y)*\\\\cov(x, x_1)/\\\\var(x)))/(\\\\stdevp(x)\\\\stdevp(y))\",\"(\\\\cov(x, x_1) - (\\\\cov(x, y)*\\\\cov(y, x_1)/\\\\var(y)))/(\\\\stdevp(x)\\\\stdevp(y))\"],spearman:[\"0/0\",\"0/0\"],quantile:[\"\\\\{ \\\\floor(y*(\\\\count(x)-1)) = y*(\\\\count(x)-1) :   x_1[\\\\upperQuantileIndex(x, y)],  (\\\\ceil(y*(\\\\count(x)-1)) - y*(\\\\count(x)-1))*x_1[\\\\lowerQuantileIndex(x, y)] +   (y*(\\\\count(x)-1) - \\\\floor(y*(\\\\count(x)-1)))*x_1[\\\\upperQuantileIndex(x, y)]\\\\}\",\"\\\\{ \\\\floor(y*(\\\\count(x)-1)) < y*(\\\\count(x)-1) :   (\\\\count(x)-1)*(x[\\\\upperQuantileIndex(x, y)] - x[\\\\lowerQuantileIndex(x, y)])*x_1\\\\}\"],quartile:[\"0.5*(x_1[\\\\lowerQuartileIndex(x, y)] + x_1[\\\\upperQuartileIndex(x, y)])\",\"0/0\"],tscore:[\"\\\\frac{\\\\sqrt{\\\\count(x)}(\\\\stdev(x)*\\\\mean(x_1)-(\\\\mean(x)-y)*\\\\frac{\\\\cov(x,x_1)}{\\\\stdev(x)})}{\\\\stdev(x)^2}\",\"-x_1*\\\\sqrt{\\\\count(x)}/\\\\stdev(x)\"],quartileIndex:[\"0/0\",\"0/0\"],upperQuartileIndex:[\"0/0\",\"0/0\"],lowerQuartileIndex:[\"0/0\",\"0/0\"],upperQuantileIndex:[\"0/0\",\"0/0\"],lowerQuantileIndex:[\"0/0\",\"0/0\"],nCr:[\"x_1*q*(\\\\polyGamma(0, 1 + x) - \\\\polyGamma(0, 1 + x - y))\",\"x_1*q*(\\\\polyGamma(0, 1 + x - y) - \\\\polyGamma(0, 1 + y))\"],nPr:[\"x_1*q*(\\\\polyGamma(0, 1 + x) - \\\\polyGamma(0, 1 + x - y))\",\"x_1*q*\\\\polyGamma(0, 1 + x - y)\"],arctan:[\"x_1*y/(y^2+x^2)\",\"-x_1*x/(y^2+x^2)\"],complexArctan:[\"x_1/((x+\\\\complex(0,1))(x-\\\\complex(0,1)))\"],poissonpdf:[\"0/0\",\"x_1\\\\frac{\\\\exp(-y)(\\\\floor(x)-y)y^{(\\\\floor(x)-1)}}{(\\\\floor(x))!}\"],invPoisson:[\"0/0\",\"0/0\"],tpdf:[\"x_1*q*\\\\frac{-(y+1)*x}{y+x^2}\",\"x_1*\\\\frac{1}{2}q*(  \\\\frac{x^2-1}{y + x^2} + \\\\ln(\\\\frac{y}{y + x^2}) +   \\\\polyGamma(0, \\\\frac{1+y}{2}) - \\\\polyGamma(0, y/2))\"],invT:[\"x_1/\\\\pdf(\\\\tdist(y),q)\",\"0/0\"],tcdf:[\"\\\\{x<y:-1,1\\\\}\\\\pdf(\\\\tdist(z,u,v),x)*x_1\",\"\\\\{y<x:-1,1\\\\}\\\\pdf(\\\\tdist(z,u,v),y)*x_1\",\"0/0\",\"\\\\{x<y:-1,1\\\\}(\\\\pdf(\\\\tdist(z,u,v), y) - \\\\pdf(\\\\tdist(z,u,v), x))*x_1\",\"\\\\{y<x:-1,1\\\\}(\\\\{\\\\abs(y)=1/0:0,\\\\frac{u-y}{v}\\\\pdf(\\\\tdist(z,u,v),y)\\\\} - \\\\{\\\\abs(x)=1/0:0,\\\\frac{u-x}{v}\\\\pdf(\\\\tdist(z,u,v),x)\\\\})*x_1\"],poissoncdf:[\"0/0\",\"0/0\",\"x_1\\\\sum _{n=\\\\max(0,\\\\floor(\\\\min(x,y)))}^{\\\\floor(\\\\max(x,y))}\\\\frac{\\\\exp(-z)(n-z)z^{(n-1)}}{n!}\"],normalpdf:[\"-x_1*\\\\frac{x-y}{z^2} q\",\"x_1*\\\\frac{x-y}{z^2} q\",\"x_1*(\\\\frac{(x-y-z)*(x-y+z)}{z^3}) q\"],binompdf:[\"0/0\",\"0/0\",\"\\\\{0<=z<=1: x_1*q*(\\\\frac{\\\\round(x)}{z}-\\\\frac{\\\\round(y)-\\\\round(x)}{1-z}), 0 \\\\}\"],invBinom:[\"0/0\",\"0/0\",\"0/0\"],uniformpdf:[\"0\",\"\\\\{y<=x: \\\\frac{x_1}{(z-y)^2}, 0\\\\}\",\"\\\\{z>=x: -\\\\frac{x_1}{(z-y)^2}, 0\\\\}\"],invUniform:[\"\\\\{y<=x<=z: x_1*(z-y), 0\\\\}\",\"\\\\{y<=x<=z: x_1*(1-x), 0\\\\}\",\"\\\\{y<=x<=z: x_1*x, 0\\\\}\"],normalcdf:[\"\\\\{x<y:-1,1\\\\}\\\\pdf(\\\\normaldist(z,u), x)*x_1\",\"\\\\{y<x:-1,1\\\\}\\\\pdf(\\\\normaldist(z,u), y)*x_1\",\"\\\\{x<y:-1,1\\\\}(\\\\pdf(\\\\normaldist(z,u), y) - \\\\pdf(\\\\normaldist(z,u), x))*x_1\",\"\\\\{y<x:-1,1\\\\}(\\\\{\\\\abs(y)=1/0:0,\\\\frac{z-y}{u}\\\\pdf(\\\\normaldist(z,u),y)\\\\} - \\\\{\\\\abs(x)=1/0:0,\\\\frac{z-x}{u}\\\\pdf(\\\\normaldist(z,u),x)\\\\})*x_1\"],binomcdf:[\"0/0\",\"0/0\",\"0/0\",\"\\\\{0<=u<=1: x_1*\\\\sum _{n=\\\\max(0,\\\\round(\\\\min(x,y)))}^{\\\\round(\\\\max(x,y))}(  \\\\pdf(\\\\binomialdist(z,u),n)*(\\\\frac{n}{u}-\\\\frac{\\\\round(z)-n}{1-u})), 0 \\\\}\"],uniformcdf:[\"\\\\{z>u: 0/0, \\\\{x<y:-1,1\\\\}\\\\pdf(\\\\uniformdist(z,u), x)*x_1\\\\}\",\"\\\\{z>u: 0/0, \\\\{y<x:-1,1\\\\}\\\\pdf(\\\\uniformdist(z,u), y)*x_1\\\\}\",\"\\\\{z>u: 0/0, \\\\{y<x:-1,1\\\\}(\\\\frac{\\\\{z<x<u:u-x,0\\\\} + \\\\{z<y<u:y-u,0\\\\}}{(u-z)^2})*x_1\\\\}\",\"\\\\{z>u: 0/0, \\\\{y<x:-1,1\\\\}(\\\\frac{\\\\{z<x<u:x-z,0\\\\} + \\\\{z<y<u:z-y,0\\\\}}{(u-z)^2})*x_1\\\\}\"],geopdf:[\"0/0\",\"\\\\{y<=0:0/0,y>1:0,\\\\round(x)=1:1,(1/y-\\\\round(x))\\\\geopdf(x-1,y)\\\\}x_1\"],geocdf:[\"0/0\",\"0/0\",\"\\\\{z>1:0,(b/z)\\\\geopdf(b,z)-(\\\\max(a,0)/z)\\\\geopdf(a,z)\\\\}x_1 \\\\with a=\\\\ceil(\\\\min(x,y))-1, b=\\\\floor(\\\\max(x,y))\"],invGeo:[\"0/0\",\"0/0\"],normalSample:[\"0/0\",\"0/0\",\"0/0\"],uniformSample:[\"0/0\",\"0/0\",\"0/0\"],tSample:[\"0/0\",\"0/0\"],poissonSample:[\"0/0\",\"0/0\"],binomSample:[\"0/0\",\"0/0\",\"0/0\"],rgb:[\"0/0\",\"0/0\",\"0/0\"],hsv:[\"0/0\",\"0/0\",\"0/0\"],polygon:[\"\\\\polygon(x_1)\"],area:[\"0/0\"],perimeter:[\"0/0\"],vertices:[\"\\\\vertices(x_1)\"],segments:[\"\\\\segments(x_1)\"],validateRangeLength:[\"0\",\"0\",\"0\",\"\\\\{q \\\\ge 1: x_1, 0\\\\}\"],validateSampleCount:[\"\\\\{x<0:0,1\\\\}*x_1\"],select:[\"\\\\select(x_1, y)\",\"0*q\"],shuffle:[\"0*y\",\"\\\\shuffle(x, x_1)\"],sortPerm:[\"0*x\"],complexSortPerm:[\"0*x\"],elementsAt:[\"\\\\elementsAt(x_1, y)\",\"0*q\"],uniquePerm:[\"0*q\"],tone:[\"\\\\tone(x_1,0)\",\"\\\\tone(0,x_1)\"],restriction:[\"0\"],restrictionToBoolean:[\"0\"],complex:[\"\\\\complex(x_1,0)\",\"\\\\complex(0,x_1)\"],arg:[\"\\\\imag(x_1/x)\"],complexDivide:[\"x_1/y\",\"-(q/y)x_1\"],wirtingerEqualOrWarning:[\"0\",\"x_1\"],coerceComplexToReal:[\"\\\\coerceComplexToReal(x_1)\"],coerceComplexToRealWithTolerance:[\"\\\\coerceComplexToRealWithTolerance(x_1)\"],peelableCoerceComplexToReal:[\"\\\\peelableCoerceComplexToReal(x_1)\"],peelableCoerceComplexToRealWithTolerance:[\"\\\\peelableCoerceComplexToRealWithTolerance(x_1)\"],coerceRealToComplex:[\"\\\\coerceRealToComplex(x_1)\"],chisqIndependenceColTotals:[\"(0/0)x\",\"(0/0)x\",\"(0/0)x\"],chisqIndependenceRowTotals:[\"(0/0)x\",\"(0/0)x\",\"(0/0)x\"],chisqIndependenceExpectedValues:[\"(0/0)x\",\"(0/0)x\"],chisqcdf:[\"\\\\{x<y:-1,1\\\\}\\\\chisqpdf(x,z)*x_1\",\"\\\\{y<x:-1,1\\\\}\\\\chisqpdf(y,z)*x_1\",\"0/0\"],chisqpdf:[\"-(1/2)(1+(2-y)/x)q*x_1\",\"(1/2)(\\\\ln(x/2)-\\\\polyGamma(0,y/2))q*x_1\"],invChisq:[\"x_1/\\\\chisqpdf(q, y)\",\"0/0\"]},z_={};function GX(e){if(!z_[e]){let t=BX[e],n=[];for(let r=0;r<t.length;r++){let o=t[r];n.push(mi(o,{}))}z_[e]=n}return z_[e]}function Ig(e){return ae(e,x)?\"number\":ae(e,N)?\"complex\":void 0}function UT(e,t,n,r){let o=e.getInstruction(n).valueType;if(Ig(o)!==r)throw V(`Incorrect derivative strategy '${r}' for type ${o}.`);let i=e.getInstruction(t).valueType;if(!qX(i,r)){let s=e.areAllArgsConstant([t]);throw r===\"number\"?GC([se(i)],{blockExport:s}):qC([se(i),se(o)],{blockExport:s})}switch(r){case\"number\":return GT(e,t,n,\"real\");case\"complex\":let s=GT(e,t,n,\"complexOne\"),a=GT(e,t,n,\"complexI\"),u=e.Multiply([e.Negative([e.ImaginaryUnit()]),a]),c=e.NativeFunction(\"wirtingerEqualOrWarning\",[s,u]);return e.Multiply([e.ColdConstant(Ie(1,2)),e.Add([s,c])]);default:throw V(`Invalid derivative strategy '${r}'.`)}}function qX(e,t){switch(t){case\"number\":return lr(e,N)||lr(e,Ye)||ae(e,D)||ae(e,G);case\"complex\":return lr(e,N)||lr(e,Ye);default:throw V(`Invalid derivative strategy '${t}'.`)}}function H_(e,t,n){let r=e.getInstruction(n).valueType,o=Ig(r);if(!o)throw V(`chunk.derivative called on non-number ${tt(r)}.`);return UT(e,t,n,o)}function MB(e){let t=[];t.push(\"digraph {\");for(let n=0;n<e.instructionsLength();n++)e.getInstruction(n).type!==0&&t.push(`${n} [label=\"${n}: ${Np(e,n)}\"];`);for(let n=0;n<e.instructionsLength();n++){let r=e.getInstruction(n);if(me(r))for(let o of r.args)t.push(`${n} -> ${o};`)}return t.push(\"}\"),t.join(`\n`)}var ga=class e{constructor(t){this.derivativeMaps=new IT;if(this.instructions=[],this.blockMask=[],this.comments=[],t.argNames.length!==t.argTypes.length)throw new Error(\"Programming Error: length of argNames must match length of argTypes\");this.argNames=t.argNames,this.argTypes=t.argTypes;for(let n=0;n<this.argTypes.length;n++){let r=this.argTypes[n];this.LoadArg(r)}this.returnIndex=this.ColdConstant(NaN)}computeNeedsThunking(){for(let t=this.returnIndex;t>=0;t--)if(this.instructions[t].type===55)return!0;return!1}setError(t){this.error=t}getError(){return this.error}setWarning(t){this.warning===void 0&&(this.warning=t)}restoreWarning(t){this.warning=t}getWarning(){return this.warning}getReturnIndex(){return this.returnIndex}setReturnIndex(t){if(!(0<=t&&t<this.instructions.length))throw new Error(`Programming Error: out of bounds return index ${t}`);this.returnIndex=t}addComments(t){for(let n in t){let r=this.comments[n]||\"\";r&&(r+=\" \"),this.comments[n]=r+t[n]}return this}addMobilityComments(){let t={};for(let n=0;n<this.instructionsLength();n++){let r=this.getInstruction(n);r.type===1&&(t[n]=dw(r.mobility))}this.addComments(t)}instructionsLength(){return this.instructions.length}getInstruction(t){return this.instructions[t]}popInstruction(){this.unsafelyTruncate(this.instructions.length-1)}unsafelyTruncate(t){this.instructions.length=Math.min(t,this.instructions.length),this.blockMask.length=Math.min(t,this.blockMask.length),this.comments.length=Math.min(t,this.comments.length),this.derivativeMaps.truncate(t),this.setReturnIndex(this.instructions.length-1)}dereferenceFunctionHeader(t){let n=this.getInstruction(t);return n.endIndex===-1?void 0:n.endIndex}getDirectDependencies(t){if(t.type===55){let n=t.args,r=this.dereferenceFunctionHeader(n[0]);if(r!==void 0)return n.concat(r)}return t.args}getRecursionStructure(t){let n=this.getInstruction(t);if(n.endIndex===-1)throw V(\"Programming error: cannot get recursion structure before function is closed\");if(!n.__cachedRecursionStructure){let r={};for(let o of n.recursionGroup){let i=this.getInstruction(o);r[i.symbol]=o}n.__cachedRecursionStructure=Rw(this,r)}return n.__cachedRecursionStructure}getRecursiveFunctionMetadata(t){let n=this.getRecursionStructure(t),r=this.getInstruction(t);return{type:n.canIterate?\"iterative\":\"general\",recursionGroup:r.recursionGroup.map(o=>this.getInstruction(o).symbol),returnType:r.valueType,signature:r.signature,recursiveStructure:n}}pushInstructionChecked(t){if(this.instructions.length>=32768)throw aE();this.instructions.push(t),this.setReturnIndex(this.instructions.length-1)}pushLeafInstruction(t){return this.pushInstructionChecked(t),this.getReturnIndex()}pushFunctionHeaderInstruction(t){return this.pushInstructionChecked(t),this.getReturnIndex()}pushInstruction(t){return this.checkInstructionArguments(t),this.pushInstructionChecked(t),this.setReturnIndex(jL(this)),this.setReturnIndex(fF(this)),this.setReturnIndex(OL(this)),hL(this,this.getReturnIndex()),this.returnIndex===this.instructions.length-1&&this.setReturnIndex(WL(this)),this.getReturnIndex()}checkInstructionArguments(t){for(let n of t.args)if(this.blockMask[n])throw new Error(\"Programming Error: cannot reference an instruction in a closed block\")}markClosedBlock(t,n){for(let r=t;r<n;r++)this.blockMask[r]=!0}LoadArg(t){return this.pushLeafInstruction({type:2,valueType:t})}BlockVar(t,n){return this.pushInstruction({type:47,valueType:t,args:n})}SymbolicVar(t,n){return this.pushLeafInstruction({type:3,valueType:t,symbol:n})}BroadcastResult(t,n){let r=n[0],i=this.instructions[r].args[0],a=this.getInstruction(i).args[0],u=this.getInstruction(a);return this.pushInstruction({type:48,valueType:t,args:n,constantLength:De(u)?Oo(this,a):void 0})}ColdConstant(t){return this.ConstantOfType(x,t,0)}Constant(t,n){return this.ConstantOfType(x,t,n)}ConstantOfType(t,n,r){if(typeof n==\"number\"&&(n=Ie(n,1)),W(t)&&n.length>1e4)throw Ty();return this.pushLeafInstruction({type:1,valueType:t,value:n,mobility:r})}TupleOfType(t,n){let r;return Array.isArray(n)?r=n:r=$f[t].map(o=>n[o]),this.pushInstruction({type:15,valueType:t,args:r})}Slot(t,n){let r=16,o=this.getInstruction(n[0]).valueType,i=Pc[o],s=i?i[t]:Nn;if(s===void 0)throw V(`Invalid slot index: ${t} for ${tt(o)}.`);return this.pushInstruction({type:r,valueType:s,args:n,index:t})}NamedSlot(t,n){let r=this.getInstruction(n[0]).valueType;if(r===He)return n[0];let o=W(r)?rt(r):r;return this.Slot(Yf(o,t),n)}ImaginaryUnit(){return this.ConstantOfType(N,[Ie(0,1),Ie(1,1)],0)}NanOfType(t,n){if(t===wn){let r=this.Constant(NaN,n);return this.Distribution(\"uniformdist\",[r,r])}else return this.ConstantOfType(t,Ho(t),n)}ZeroOfType(t,n){return this.ConstantOfType(t,p1(t),n)}Add(t){let n=8,r=Yn(this,n,t);return this.pushInstruction({type:n,valueType:r,args:t})}Subtract(t){let n=9,r=Yn(this,n,t);return this.pushInstruction({type:n,valueType:r,args:t})}Multiply(t){let n=10,r=Yn(this,n,t);return this.pushInstruction({type:n,valueType:r,args:t})}Divide(t){let n=11,r=Yn(this,n,t);return this.pushInstruction({type:n,valueType:r,args:t})}Exponent(t){let n=12,r=Yn(this,n,t);return this.pushInstruction({type:n,valueType:r,args:t})}RawExponent(t){let n=13,r=Yn(this,n,t);return this.pushInstruction({type:n,valueType:r,args:t})}Negative(t){let n=14,r=Yn(this,n,t);return this.pushInstruction({type:n,valueType:r,args:t})}Square(t){let n=56,r=Yn(this,n,t);return this.pushInstruction({type:n,valueType:r,args:t})}Equal(t){let n=25,r=Yn(this,n,t);return this.pushInstruction({type:n,valueType:r,args:t})}Less(t){let n=26,r=Yn(this,n,t);return this.pushInstruction({type:n,valueType:r,args:t})}Greater(t){let n=27,r=Yn(this,n,t);return this.pushInstruction({type:n,valueType:r,args:t})}LessEqual(t){let n=28,r=Yn(this,n,t);return this.pushInstruction({type:n,valueType:r,args:t})}GreaterEqual(t){let n=29,r=Yn(this,n,t);return this.pushInstruction({type:n,valueType:r,args:t})}Comparator(t,n){switch(t){case\"=\":return this.Equal(n);case\">\":return this.Greater(n);case\"<\":return this.Less(n);case\"<=\":return this.LessEqual(n);case\">=\":return this.GreaterEqual(n);default:{let r=t;throw new Error(`Unexpected comparator symbol: ${r}`)}}}Or(t){let n=31,r=Yn(this,n,t);return this.pushInstruction({type:n,valueType:r,args:t})}And(t){let n=32,r=Yn(this,n,t);return this.pushInstruction({type:n,valueType:r,args:t})}Piecewise(t){let n=33,r=Yn(this,n,t);return this.pushInstruction({type:n,valueType:r,args:t})}List(t){let n=38,r=Yn(this,n,t);if(t.length>1e4)throw Ty();return this.pushInstruction({type:n,valueType:r,args:t})}ListAccess(t){let n=39,r=Yn(this,n,t);return this.pushInstruction({type:n,valueType:r,args:t})}DeferredListAccess(t){let n=40,r=Yn(this,n,t);return this.pushInstruction({type:n,valueType:r,args:t})}InboundsListAccess(t){let n=41,r=Yn(this,n,t);return this.pushInstruction({type:n,valueType:r,args:t})}NativeFunction(t,n){let r=37,o=ur[t].returnType,i=typeof o==\"function\"?o(n.map(s=>this.getInstruction(s).valueType)):o;return this.pushInstruction({type:r,valueType:i,args:n,symbol:t})}Distribution(t,n){let r=42,o=wn;return this.pushInstruction({type:r,valueType:o,args:n,symbol:t})}BeginIntegral(t,n){let r=21,o=Yn(this,r,[]);return this.pushInstruction({type:r,valueType:o,args:n,endIndex:-1,callData:t})}EndIntegral(t){let n=22,r=Yn(this,n,t),o=t[0],i=this.getInstruction(o);this.instructions[o]={type:i.type,valueType:i.valueType,args:i.args,endIndex:this.instructionsLength(),callData:i.callData};let s=this.pushInstruction({type:n,valueType:r,args:t});return this.markClosedBlock(o,s),s}BeginBroadcast(t,n){let r=23,o=Yn(this,r,[]),i=this.getInstruction(t[0]);if(De(i)&&Oo(this,t[0])>1e4)throw Ty();return this.pushInstruction({type:r,valueType:o,endIndex:-1,args:t,context:n})}EndBroadcast(t){let n=24,r=Yn(this,n,t),o=t[0],i=this.getInstruction(o),s={type:i.type,valueType:i.valueType,args:i.args,endIndex:this.instructionsLength(),context:i.context};this.instructions[o]=s;let a=this.pushInstruction({type:n,valueType:r,args:t});return this.markClosedBlock(o,a),a}BeginLoop(t,n){let r=19,o=Yn(this,r,n);return this.pushInstruction({type:r,valueType:o,args:n,endIndex:-1,callData:t})}EndLoop(t){let n=20,r=Yn(this,n,t),o=t[0],i=this.getInstruction(o);this.instructions[o]={type:i.type,valueType:i.valueType,args:i.args,endIndex:this.instructionsLength(),callData:i.callData};let s=this.pushInstruction({type:n,valueType:r,args:t});return this.markClosedBlock(o,s),s}BeginMap(t,n){let r=50,o=Yn(this,r,n);return this.pushInstruction({type:r,valueType:o,args:n,endIndex:-1,callData:t})}EndMap(t){let n=51,r=Yn(this,n,t),o=t[0],i=this.getInstruction(o);this.instructions[o]={type:i.type,valueType:i.valueType,args:i.args,endIndex:this.instructionsLength(),callData:i.callData};let s=this.pushInstruction({type:n,valueType:r,args:t});return this.markClosedBlock(o,s),s}FunctionHeader(t,n,r,o){let i=4;return this.pushFunctionHeaderInstruction({type:i,valueType:n,endIndex:-1,symbol:t,signature:r,parameterSymbols:o,recursionGroup:[]})}BeginFunction(t){let n=53,r=this.getInstruction(t[0]);return this.pushInstruction({type:n,valueType:r.valueType,endIndex:-1,args:t})}EndFunction(t){let n=54,r=t[0],o=this.getInstruction(r);this.instructions[r]={type:o.type,valueType:o.valueType,args:o.args,endIndex:this.instructionsLength()};let i=o.args[0],s=this.getInstruction(o.args[0]);this.instructions[i]={type:s.type,valueType:s.valueType,endIndex:this.instructionsLength(),symbol:s.symbol,signature:s.signature,parameterSymbols:s.parameterSymbols,recursionGroup:s.recursionGroup};let a=this.pushInstruction({type:n,valueType:Nn,args:t});return this.markClosedBlock(r,a),a}FunctionCall(t){let n=55;return this.pushInstruction({type:n,valueType:Yn(this,n,t),args:t})}ExtendSeed(t,n){let r=44,o=Bt;return this.pushInstruction({type:r,valueType:o,args:n,tag:t})}Noop(){let t=0,n=Nn;return this.pushLeafInstruction({type:t,valueType:n})}Action(t,n){return this.pushInstruction({type:49,valueType:St,args:n,qualifiedNames:t})}replaceInstructionWithConstant(t,n){this.instructions[t]=n,this.blockMask[t]=void 0}replaceInstructionWithBlockVarOrFunctionCall(t,n){this.instructions[t]=n}reopenFinalBlock(){let t=this.getInstruction(this.getReturnIndex());if(t.type!==48)return this;let n=t.args[0],o=this.getInstruction(n).args[0];for(let i=o;i<n;i++)this.blockMask[i]=void 0;return this.unsafelyTruncate(n),this}reopenAllBlocks(){this.blockMask=[]}isInClosedBlock(t){return!!this.blockMask[t]}copy(){let t=new e({argNames:this.argNames,argTypes:this.argTypes});return t.instructions=this.instructions.slice(),t.blockMask=this.blockMask.slice(),t.comments=this.comments.slice(),t.derivativeMaps=this.derivativeMaps.clone(),t.warning=this.warning,t.setReturnIndex(this.getReturnIndex()),t}fuseBroadcast(){return this.setReturnIndex(io(this,this.getReturnIndex())),this}copyLeafInstruction(t){return this.pushLeafInstruction(t)}copyInstructionWithArgs(t,n){return Ym(this,t,n)}replaceInstructionWithNoop(t){this.instructions[t]={type:0,valueType:Nn}}getReturnType(){return this.instructions[this.getReturnIndex()].valueType}isConstant(){return De(this.instructions[this.getReturnIndex()])}areAllArgsConstant(t){for(let n of t)if(!De(this.instructions[n]))return!1;return!0}asValue(){return Oo(this,this.getReturnIndex())}asCompilerValue(){let t=this.instructions[this.getReturnIndex()];switch(t.type){case 1:return t.value;default:throw new Error(`Unexpected opcode ${t.type}.`)}}getConstantListLength(){return Vn(this,this.getReturnIndex())}getListLengthDependencies(){let t=this.copy(),n=Mr(t,t.getReturnIndex());return Wo(t,n)}elementAt(t){let n=this.copy(),r=n.getReturnIndex();return n.setReturnIndex(rg(n,r,t)),n}substituteConstantArguments(t){return IF(this,t)}interpretWithParameters(t){return kL(this,this.getReturnIndex(),t)}getCompiledFunction(t){let n;if(t){n=t.slice();for(let s of this.argNames)n.indexOf(s)===-1&&n.push(s)}else n=this.argNames;let{source:r,constants:o}=Vx(this),i={};return{args:n,source:r,constants:o,executionMetadata:i,fn:jy(n,r,o,i)}}getRestrictedFunctionForGLSL(t,n){let r=wc(this,t,{allowSlices:!0}),{restrictionChunk:o,valueChunk:i}=r.getValueAndRestrictionChunk(),s;if(o!==void 0)try{s=Lo(o,n)}catch(a){o=void 0}return s===void 0||o===void 0?r.getSliceVariablesOrImplicit().length==0?{concrete:new _n(this),restriction:void 0,restrictionExpr:void 0}:{concrete:new _n(i),restriction:void 0,restrictionExpr:void 0}:{concrete:new _n(i),restriction:s,restrictionExpr:o&&new _n(o)}}polynomialOrder(t,n){return _L(this,t,n)}getPolynomialCoefficients(t){return RL(this,t)}takeDerivative(t){let n=this.argNames.indexOf(t);return n===-1?this.setReturnIndex(this.ZeroOfType(this.getReturnType(),0)):this.setReturnIndex(H_(this,this.getReturnIndex(),n)),this}gradient(t){let n=[],r=this.getReturnIndex();for(let o of t){let i=this.argNames.indexOf(o);i===-1?n.push(this.ColdConstant(0)):n.push(H_(this,r,i))}return this.List(n),this}deriveRegressionRestrictions(){return QL(this)}boundDomain(t){return DL(this,t,this.getReturnIndex())}findLinearSubset(t){let n=mF(this),r=[];for(let o of t){let i=this.argNames.indexOf(o);if(i===-1)throw new Error(\"Programming Error: findLinearSubset called with a non-dependency\");r.push(n[i])}return r}isLinearIn(t){let n=this.argNames.filter(r=>t.includes(r));return n.length===0?!1:this.findLinearSubset(n).every(Boolean)}isImplicitPlane(){let t=n=>n===\"x\"||n===\"y\"||n===\"z\";return this.isLinearIn([\"x\",\"y\",\"z\"])&&this.argNames.every(t)}print(t,n=this.comments){let r;return t===void 0?(t=this.instructionsLength()-1,r={printUnreferencedInstructions:!0,comments:n}):r={printUnreferencedInstructions:!1,comments:n},lw(this,t,r)}printInstruction(t){return Np(this,t)}toDot(){return MB(this)}getLiveArgNames(){let t=Yr(this,this.getReturnIndex()),n=[];for(let r=0;r<this.argNames.length;r++)t[r]&&n.push(this.argNames[r]);return n}getCursorContext(){return this.cursorContext}setCursorContext(t){this.cursorContext=t}coerceToNumericIfPossible(t={}){return os(this,this.getReturnIndex(),t)}coerceNonComplexToNumberIfPossible(){return Yp(this,this.getReturnIndex())}};function Jp(e,t){return $_(e,t).freeDependencies}function $_(e,t){let n={};if(t.type===\"FunctionDefinition\"||t.type===\"RecursiveFunctionBaseCase\"){let{freeDependencies:r,updateSymbols:o}=zT(e,t._expression,n),i=r.filter(s=>s!==t._symbol);if(t instanceof Fr||t instanceof Do)for(let s of t._argSymbols)i.includes(s)||i.push(s);return{freeDependencies:i,updateSymbols:o}}return zT(e,t,n)}function _B(e,t,n){let r=[],o=[],i=[];for(let s of t.scopes){let a=_B(e,s,n);for(let u of a.freeDependencies)r.indexOf(u)===-1&&t.definitions.indexOf(u)===-1&&r.push(u);for(let u of a.updateSymbols)o.indexOf(u)===-1&&o.push(u)}for(let s of t.dependencies){if(t.definitions.indexOf(s)!==-1)continue;let a=UX(e,s,n),u=t.substitutionDependencies.indexOf(s)!==-1;for(let c of a.freeDependencies)r.indexOf(c)===-1&&t.definitions.indexOf(c)===-1&&r.push(c),u&&i.indexOf(c)===-1&&t.definitions.indexOf(c)===-1&&i.push(c);for(let c of a.updateSymbols)o.indexOf(c)===-1&&o.push(c)}return{freeDependencies:r,updateSymbols:o}}function zT(e,t,n){if(t.type===\"Slider\"||t.type===\"Assignment\")return zT(e,t._expression,n);{let{freeDependencies:r,updateSymbols:o}=_B(e,t.getScope(),n),i=t.getUpdateSymbols();if(i.length>0){o=o.slice();for(let s of i)o.indexOf(s)===-1&&o.push(s)}return{freeDependencies:r,updateSymbols:o}}}function UX(e,t,n){if(n[t])return n[t];let r=zX(e,t,n);return n[t]=r,r}function zX(e,t,n){if(ct[t])return{freeDependencies:[],updateSymbols:[]};let r=e[t];return r?(n[t]={freeDependencies:[],updateSymbols:[]},zT(e,r,n)):{freeDependencies:[t],updateSymbols:[]}}function RB(e,t){let n={},r=t.getDependencies().slice();for(;r.length;){let o=r.pop();if(n.hasOwnProperty(o))continue;if(e.isLocal(o)||e.isError(o))return;let i=e.resolveVisibleGlobalDefinition(o);if(i!=null&&i.moduleInfo)return;let s=i==null?void 0:i.def;n[o]=s,s&&s.getDependencies&&Array.prototype.push.apply(r,s.getDependencies())}return Object.entries(n)}function DB(e,t,n){NB(e,t,n,{})}function NB(e,t,n,r){let o={};for(let i of n.definitions){if(o[i])switch(n.kind){case\"Integral\":case\"RepeatedOperator\":throw V(new Error(`${n.kind} scope is not expected to define multiple symbols`));case\"FunctionDefinition\":throw JE(i);case\"ListComprehension\":throw Kb(i);case\"Substitution\":throw TM(i);default:let s=n.kind;throw V(new Error(`Unexpected scope kind ${s}`))}o[i]=!0}for(let i of n.definitions){let s=t[i];if(s){if(e.assignmentForbidden(i))switch(n.kind){case\"RepeatedOperator\":throw Vb(i);case\"Integral\":throw Yb(i);case\"FunctionDefinition\":throw Fb(i);case\"Substitution\":case\"ListComprehension\":throw wy(i);default:let a=n.kind;throw V(new Error(`Unexpected scope kind ${a}`))}if((n.kind===\"ListComprehension\"||n.kind===\"Substitution\")&&s.type===\"FunctionDefinition\")throw Ly(i)}if(r[i])switch(n.kind){case\"RepeatedOperator\":throw Vb(i);case\"Integral\":throw Yb(i);case\"FunctionDefinition\":throw Fb(i);case\"ListComprehension\":throw Kb(i);case\"Substitution\":throw bM(i);default:let a=n.kind;throw V(new Error(`Unexpected scope kind ${a}`))}}r=qn(r);for(let i of n.definitions)r[i]=!0;for(let i of n.scopes)NB(e,t,i,r)}var ba={normaldist:{pdf:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"normalpdf\",n.concat(r.args))},cdf:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"normalcdf\",n.concat(r.args))},mean:function(e,t,n){return e.getInstruction(t).args[0]},median:function(e,t,n){return ba.normaldist.mean(e,t,n)},stdev:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"abs\",[r.args[1]])},var:function(e,t,n){let r=e.getInstruction(t);return e.Square([r.args[1]])},quantile:function(e,t,n){let r=e.getInstruction(t);return e.Add([e.Multiply([e.NativeFunction(\"invNorm\",n),e.NativeFunction(\"abs\",[r.args[1]])]),r.args[0]])},random:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"normalSample\",[n[0],r.args[0],r.args[1]])}},tdist:{pdf:function(e,t,n){let r=e.getInstruction(t),o=r.args[1],i=e.NativeFunction(\"abs\",[r.args[2]]),s=e.Divide([e.Subtract([n[0],o]),i]);return e.Divide([e.NativeFunction(\"tpdf\",[s,r.args[0]]),i])},cdf:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"tcdf\",[n[0],n[1],r.args[0],r.args[1],r.args[2]])},mean:function(e,t,n){return e.getInstruction(t).args[1]},median:function(e,t,n){return ba.tdist.mean(e,t,n)},stdev:function(e,t,n){return e.NativeFunction(\"sqrt\",[ba.tdist.var(e,t,n)])},var:function(e,t,n){let r=e.getInstruction(t),o=e.ColdConstant(1),i=e.ColdConstant(2),s=r.args[0],a=r.args[2];return e.Piecewise([e.Greater([s,o]),e.Piecewise([e.Greater([s,i]),e.Multiply([e.Divide([s,e.Subtract([s,i])]),e.Square([a])]),e.ColdConstant(1/0)]),e.ColdConstant(NaN)])},quantile:function(e,t,n){let r=e.getInstruction(t),o=r.args[1],i=e.NativeFunction(\"abs\",[r.args[2]]);return e.Add([e.Multiply([e.NativeFunction(\"invT\",[n[0],r.args[0]]),i]),o])},random:function(e,t,n){let r=e.getInstruction(t),o=r.args[1],i=e.NativeFunction(\"abs\",[r.args[2]]);return e.Add([e.Multiply([e.NativeFunction(\"tSample\",[n[0],r.args[0]]),i]),o])}},poissondist:{pdf:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"poissonpdf\",n.concat(r.args))},cdf:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"poissoncdf\",n.concat(r.args))},mean:function(e,t,n){return e.getInstruction(t).args[0]},median:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"invPoisson\",[e.ColdConstant(.5),r.args[0]])},stdev:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"sqrt\",[r.args[0]])},var:function(e,t,n){return ba.poissondist.mean(e,t,n)},quantile:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"invPoisson\",[n[0],r.args[0]])},random:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"poissonSample\",[n[0],r.args[0]])}},geodist:{pdf:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"geopdf\",n.concat(r.args))},cdf:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"geocdf\",n.concat(r.args))},mean:function(e,t,n){let r=e.getInstruction(t);return e.Divide([e.ColdConstant(1),r.args[0]])},median:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"invGeo\",[e.ColdConstant(.5),r.args[0]])},stdev:function(e,t,n){return e.NativeFunction(\"sqrt\",[ba.geodist.var(e,t,n)])},var:function(e,t,n){let o=e.getInstruction(t).args[0];return e.Divide([e.Subtract([e.ColdConstant(1),o]),e.Square([o])])},quantile:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"invGeo\",[n[0],r.args[0]])},random:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"invGeo\",[e.NativeFunction(\"uniformSample\",[n[0],e.ColdConstant(0),e.ColdConstant(1)]),r.args[0]])}},binomialdist:{pdf:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"binompdf\",n.concat(r.args))},cdf:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"binomcdf\",n.concat(r.args))},mean:function(e,t,n){let r=e.getInstruction(t);return e.Multiply([r.args[0],r.args[1]])},median:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"invBinom\",[e.ColdConstant(.5),r.args[0],r.args[1]])},stdev:function(e,t,n){return e.NativeFunction(\"sqrt\",[ba.binomialdist.var(e,t,n)])},var:function(e,t,n){let r=e.getInstruction(t),[o,i]=r.args;return e.Multiply([o,e.Multiply([i,e.Subtract([e.ColdConstant(1),i])])])},quantile:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"invBinom\",[n[0],r.args[0],r.args[1]])},random:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"binomSample\",[n[0],r.args[0],r.args[1]])}},uniformdist:{pdf:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"uniformpdf\",n.concat(r.args))},cdf:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"uniformcdf\",n.concat(r.args))},mean:function(e,t,n){let r=e.getInstruction(t);return e.Divide([e.Add([r.args[0],r.args[1]]),e.ColdConstant(2)])},median:function(e,t,n){return ba.uniformdist.mean(e,t,n)},stdev:function(e,t,n){return e.NativeFunction(\"sqrt\",[ba.uniformdist.var(e,t,n)])},var:function(e,t,n){let r=e.getInstruction(t),o=e.Subtract([r.args[1],r.args[0]]);return e.Divide([e.Square([o]),e.ColdConstant(12)])},quantile:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"invUniform\",[n[0],r.args[0],r.args[1]])},random:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"uniformSample\",[n[0],r.args[0],r.args[1]])}},chisqdist:{pdf:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"chisqpdf\",n.concat(r.args))},cdf:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"chisqcdf\",n.concat(r.args))},mean:function(e,t,n){return e.getInstruction(t).args[0]},median:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"invChisq\",[e.ColdConstant(.5),r.args[0]])},stdev:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"sqrt\",[e.Multiply([e.ColdConstant(2),r.args[0]])])},var:function(e,t,n){let r=e.getInstruction(t);return e.Multiply([e.ColdConstant(2),r.args[0]])},quantile:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"invChisq\",[n[0],r.args[0]])},random:function(e,t,n){let r=e.getInstruction(t);return e.NativeFunction(\"invChisq\",[e.NativeFunction(\"uniformSample\",[n[0],e.ColdConstant(0),e.ColdConstant(1)]),r.args[0]])}}};function OB(e,t,n){let r=n[0],o=e.ColdConstant(0),i=e.ColdConstant(1);if(Vn(e,t)===0)return e.ColdConstant(NaN);let a=Mr(e,t);return e.InboundsListAccess([t,e.Add([e.NativeFunction(\"floor\",[e.Multiply([e.NativeFunction(\"uniformSample\",[r,o,i]),a])]),i])])}function AB(e,t,n){switch(t){case N:return e.NativeFunction(\"complex\",n);case D:case G:return e.TupleOfType(t,n);default:throw V(`Type ${tt(t)} is not a supported aggregate type for building.`)}}function Pg(e){if(!e)return;let{latex:t,latexSelection:n}=e;if(t===void 0||n===void 0)return;let{start:r,end:o}=n;return{input:t,start:r,end:o}}function Y_(e,t,n){if(!t)return;let r=Z_(t,n._expression);r===\"start-to-end\"?e.setCursorContext({type:n.type===\"Assignment\"?\"assignment-rhs\":\"function-definition-body\",allowedTypes:[Nn]}):r===\"empty-list\"&&e.setCursorContext({type:\"expression-arguments\",expressionType:\"List\",argIndex:0,argCount:0,isLastValidArg:!1,positionWithinArg:\"start-to-end\",allowedTypesForInsertedArg:[Nn]})}function wB(e,t,n){if(t){let r=Z_(t,n.args[1]);r===\"start-to-end\"?e.setCursorContext({type:\"for-assignment-rhs\",allowedTypes:[he,Te,ue,Ee,Ae,_e,...Ki.types]}):r===\"empty-list\"&&e.setCursorContext({type:\"for-assignment-rhs\",allowedTypes:[Nn]})}}function Km(e,t,n,r,o){let i=kX(e,t,n,r,o);i&&e.setCursorContext(i)}function Z_(e,t){let n=t.getInputSpan();return n?e.start===n.start&&e.end===n.end?\"start-to-end\":e.start===e.end&&e.start===n.end?\"end\":e.start===e.end&&e.start===n.start?\"start\":e.start===e.end&&t.type===\"List\"&&t.args.length===0?\"empty-list\":\"not-aligned\":\"not-aligned\"}function X_(e,t){if(!e)return;let n=!1;t instanceof ai&&t.args[1]instanceof rr&&(n=!0,t=t.args[1]);let r=t.args;if(r){if(r.length===0){let o=t.getInputSpan();if(!o)return;let i=vr(o),s=-1;return t.type===\"List\"?s=i.indexOf(\"[\"):(t.type===\"FunctionCall\"||t.type===\"SeededFunctionCall\")&&(s=i.indexOf(\"(\")),s<0?void 0:e.start===o.start+s+1?{argIndex:0,positionWithinArg:\"start-to-end\",isDotCall:n}:void 0}for(let o=0;o<r.length;o++){let i=r[o],s=i.getInputSpan();if((s==null?void 0:s.input)!==e.input)continue;if(e.start<s.start)break;let a=Z_(e,i);if(a!==\"not-aligned\")return{argIndex:o,positionWithinArg:a,isDotCall:n}}}}function kX(e,t,n,r,o){if(!n||!r.args)return;let i=X_(n,r);if(i===void 0)return;i.isDotCall&&(r=r.args[1]);let s=i.positionWithinArg===\"end\"?i.argIndex+1:i.argIndex;i.isDotCall&&(s+=1);let a;i.positionWithinArg===\"empty-list\"||i.positionWithinArg===\"start-to-end\"?a=[...o.slice(0,s),void 0,...o.slice(s+1)]:r instanceof No?a=s===1?[o[0],void 0,o[1]]:[o[0],o[1],void 0]:a=[...o.slice(0,s),void 0,...o.slice(s)],a=a.map(p=>{if(!(p===void 0||e.getInstruction(p).type===2))return p});let u=[];for(let p of a)u.push(p===void 0?void 0:e.getInstruction(p).valueType);let c=Jx(t,r,u),l=c&&jf(c,s);if(i.positionWithinArg===\"empty-list\"){let p=l==null?void 0:l.filter(W).map(rt);return(p==null?void 0:p.length)===0?void 0:{type:\"expression-arguments\",expressionType:\"List\",argIndex:0,argCount:0,isLastValidArg:!1,positionWithinArg:\"start-to-end\",allowedTypesForInsertedArg:p!=null?p:[Nn]}}else{if((l==null?void 0:l.length)===0)return;let p=!1;if(c){let f=0;for(let g of c){let y=g.maxArity!==void 0?g.maxArity-1:1/0;f=Math.max(f,y)}p=i.positionWithinArg===\"end\"&&i.argIndex===f-1||i.positionWithinArg===\"start-to-end\"&&i.argIndex===f}let d=r.args.length;if(r instanceof No&&r.args.length===3){let f=r.args[2];f instanceof Un&&f.isNaN()&&(d=2)}let m={type:\"expression-arguments\",expressionType:r.type,argIndex:i.argIndex,argCount:d,isLastValidArg:p,positionWithinArg:i.positionWithinArg,allowedTypesForInsertedArg:l!=null?l:[Nn]};if(r instanceof rr&&(m.functionSymbol=r._symbol,m.isDotCall=i.isDotCall,r instanceof rr&&r._symbol===\"polygon\")){let f=r.args.filter(g=>!(g instanceof Mn&&g._symbol===\"cursor\"));if(f.length>0){let g=f[0].getInputSpan(),y=f[f.length-1].getInputSpan();m.polygonVertices=g&&y?{firstLatex:vr(g),lastLatex:vr(y)}:void 0}}return m}}function Sg(e,t,n){if(t===n)return!0;if(t<n)return!1;let r=[!0];for(let i=n+1;i<=t;i++)r.push(!1);let o=[t];for(;o.length;){let i=o.pop();if(r[i-n])continue;r[i-n]=!0;let s=e.getInstruction(i);if(me(s))for(let a of e.getDirectDependencies(s)){if(a===n)return!0;a<n||r[a-n]||o.push(a)}}return!1}function LB(e,t,n){return kT(e,r=>{var p,d;let{chunk:o}=r,i=[],s=[];for(let m=0;m<n.length;m++){let f=o.getInstruction(n[m]).valueType;W(f)?(i.push(2),s.push(o.SymbolicVar(f,t._argSymbols[m]))):(i.push(0),s.push(n[m]))}if(i.every(m=>m===0))return i;let a=HT(r,t,s),u=Math.min(...s),c=Yr(o,a),l=[];for(let m=0;m<s.length;m++)l[s[m]]=new Set([m]);for(let m=u;m<=a;m++){if(!c[m])continue;let f=o.getInstruction(m);if(me(f)){if(f.type===39||f.type===40||f.type===41){let g=f.args[0],y=f.args[1],h=o.getInstruction(y);if(h.type===23){let b=h.endIndex,T=(p=l[b])!=null?p:new Set;for(let I of l[g]||[])T.add(I);l[b]=T;continue}}if(f.type===48)l[m]=l[f.args[0]];else if(f.type===37&&f.symbol===\"count\"&&f.args.length===1)l[m]=l[f.args[0]];else if(!(f.type===23&&((d=f.context)==null?void 0:d.type)===\"implicit\")){if(!(f.type===44&&f.tag===\"fc\"))for(let g of f.args){let y=l[g]||[];for(let h of y)i[h]=1}}}}return i})}function HX(e,t,n){let r=Gm.empty(t);for(let o=0;o<e.argNames.length;o++){let i=e.argNames[o];n.includes(i)?r.addLexicalBinding(i,o):r.setFreeVariable(i,o)}return r}var ef=class ef{constructor(t,n,r,o,i){if(this.kind=t,this.substitutedGlobals={...n==null?void 0:n.substitutedGlobals},this.functionBodySubstitutions={...n==null?void 0:n.functionBodySubstitutions},t&&r&&i){let s=i.filter(a=>r.isGlobal(a));for(let a of s)this.substitutedGlobals[a]||(this.substitutedGlobals[a]=t);if(o&&s.length>0){let a=this.recursionGroupKey(o.fnSymbols);this.functionBodySubstitutions[a]||(this.functionBodySubstitutions[a]={operator:t,substitutedGlobals:s})}}}recursionGroupKey(t){return[...t].sort().join(\",\")}getFunctionBodySubstitution(t){let n=this.recursionGroupKey(t);return this.functionBodySubstitutions[n]}allowsRegressionParameterDependency(){if(!this.kind)return!0;for(let t in this.substitutedGlobals)return!1;return!0}getRegressionDependencyError(t){if(this.allowsRegressionParameterDependency())return;let[n,r]=Object.entries(this.substitutedGlobals)[0];return xM(n,t,r)}getKind(){return this.kind}getSubstitutedGlobals(){return this.substitutedGlobals}with(t,n,r){return new ef(\"with\",this,t,n,r)}for(t,n,r){return new ef(\"for\",this,t,n,r)}};ef.root=new ef;var Tg=ef,J_=class{constructor(t,n){this.definitions=t;this.baseCases=n;this.type=\"type-inference\";this.argTypes={};this.returnTypes={};this.baseCaseTypes={};this.firstValidBaseCaseIdentifiers={};this.stack=[];this.isUnconditionallyRecursive=!1;this.fnSymbols=Object.keys(t)}registerFunctionCall(t,n){this.argTypes[t]||(this.argTypes[t]=n)}};function k_(e,t,n,r,o,i){return{policy:e,chunk:t,scope:n,substitutionContext:r,recursiveFunctionContext:o,selection:i}}function hs(e,t){return{...e,scope:t}}function Ta(e,t){var r,o;let n=e.scope.resolveVisibleGlobalDefinition(t);if(n)return{def:n.def,symbol:(o=(r=n.moduleInfo)==null?void 0:r.name.symbol)!=null?o:t,ctx:n.moduleInfo?{...e,scope:n.moduleInfo.scope,policy:n.moduleInfo.policy}:e}}function kT(e,t){let{chunk:n,scope:r}=e,o=n.instructionsLength(),i=r.childScopeWithChildGlobalCache(),s=hs(e,i),a=t(s);return n.unsafelyTruncate(o),a}function JT(e){let{policy:t,frame:n,argNames:r,argTypes:o,selection:i,locals:s}=e,a=new ga({argNames:r,argTypes:o}),u=HX(a,n,s);return k_(t,a,u,Tg.root,void 0,i)}function tf(e,t){let{policy:n,frame:r,argNames:o,argTypes:i}=e,s=Pg(t.userData),a=$_(r,t),{freeDependencies:u,updateSymbols:c}=a;if(o||(o=u),!i){i=[];for(let d=0;d<o.length;d++)i.push(x)}let l;t.type===\"FunctionDefinition\"||t.type===\"RecursiveFunctionBaseCase\"?l=t._argSymbols:l=[];let p=JT({policy:n,frame:r,argNames:o,argTypes:i,selection:s,locals:l});try{DB(n,r,t.getScope()),Fe(p,t),e.coerceToNumber===\"all\"||ae(p.chunk.getReturnType(),un)?p.chunk.coerceToNumericIfPossible():e.coerceToNumber===\"all-except-complex\"&&p.chunk.coerceNonComplexToNumberIfPossible(),e.wrapInList&&!W(p.chunk.getReturnType())&&p.chunk.List([p.chunk.getReturnIndex()]),p.chunk.fuseBroadcast(),$X(p,t,c)}catch(d){let m=d instanceof M?d:V(d);m.setCursorContext(p.chunk.getCursorContext()),p.chunk.setError(m)}return p.chunk}function $X(e,t,n){let{chunk:r,scope:o}=e;if(t.type===\"FunctionDefinition\"){for(let s of n)if(t._argSymbols.indexOf(s)!==-1||t._symbol===s)throw Cb(s)}let i=[];for(let s of n)o.isDefined(s)||i.push(s);if(i.length){let s=eR(e,i[0]).setDependencies(r.argNames.concat(i));throw r.isConstant()&&r.getReturnType()===St&&s.setActionValue(r.asValue()),s}}function Fe(e,t){let{chunk:n}=e,r;if(Ww(),XX(e,t)){Yw(),r=n.copyLeafInstruction(t.__IRCache.instruction);let o=t.__IRCache.warning;o!==void 0&&n.setWarning(o)}else{Zw();let o=n.instructionsLength(),i=n.getWarning()===void 0;r=WX(e,t),r=YX(e,o,r);let s=i?n.getWarning():void 0;ZX(e,t,r,s)}return n.setReturnIndex(r),r}function YX(e,t,n){let{chunk:r,scope:o}=e;if(n<=t)return n;let i=r.getInstruction(n);return De(i)?(r.unsafelyTruncate(Math.max(t,o.getMaxIndex()+1)),r.copyLeafInstruction(i)):n}function ZX(e,t,n,r){let{chunk:o,scope:i}=e,s=o.getInstruction(n);if(!De(s))return;let a=RB(i,t);a&&(Xw(),t.__IRCache={keyComplexEnabled:e.policy.isComplexEnabled(),keys:a,instruction:s,warning:r})}function XX(e,t){var i;let{scope:n,substitutionContext:r}=e;if(!t.__IRCache)return!1;let o=t.__IRCache.keys;for(let[s,a]of o){if(n.isLocal(s)||n.isError(s))return!1;let u=(i=n.resolveVisibleGlobalDefinition(s))==null?void 0:i.def;if(u!==a||u&&u.type===\"RegressionParameter\"&&!r.allowsRegressionParameterDependency())return!1}return e.policy.isComplexEnabled()===t.__IRCache.keyComplexEnabled}function WX(e,t){var u,c,l,p,d,m,f,g,y,h;let{policy:n,chunk:r,scope:o,substitutionContext:i,selection:s}=e,a=t.type;switch(a){case\"Constant\":{let b=t._constantValue,T=typeof b==\"boolean\"?Oe:x;return r.ConstantOfType(T,b,0)}case\"RegressionParameter\":return r.Constant(t.asCompilerValue(),1);case\"MixedNumber\":return r.ColdConstant(t._constantValue);case\"ImaginaryUnit\":return r.ImaginaryUnit();case\"Negative\":return r.Negative($T(e,t,t.args));case\"Add\":return r.Add(xa(e,t,t.args));case\"Subtract\":return r.Subtract(xa(e,t,t.args));case\"Multiply\":return r.Multiply(xa(e,t,t.args));case\"DotMultiply\":{let[b,T]=xa(e,t,t.args);return(c=(u=BB(e,b,T))!=null?u:Ac(r,[b,T])?BB(e,pi(r,b),pi(r,T)):void 0)!=null?c:r.Multiply([b,T])}case\"CrossMultiply\":{let[b,T]=xa(e,t,t.args);return gt(r,b,ke)&&gt(r,T,ke)?Nl(r,[GB(e,pi(r,b),pi(r,T)),mu(r,b)]):gt(r,b,G)&&gt(r,T,G)?GB(e,b,T):r.Multiply([b,T])}case\"Divide\":return r.Divide(xa(e,t,t.args));case\"Exponent\":{let b=xa(e,t,t.args);if(n.isComplexEnabled()){let T=t.args[1];if(pW(T)){let I=r.getInstruction(b[0]).valueType;if(up(I,x)||up(I,Z))return T.asValue()===2?r.Square([b[0]]):r.Exponent(b)}return r.NativeFunction(\"complexPow\",b)}else return r.Exponent(b)}case\"Comparator['=']\":case\"Comparator['>']\":case\"Comparator['<']\":case\"Comparator['>=']\":case\"Comparator['<=']\":return r.Comparator(t.operator,xa(e,t,t.args));case\"ComparatorChain\":{let b=Vl(e,t,t.args),T=r.Comparator(t.symbols[0],[b[0],b[1]]);for(let I=1;I<t.symbols.length;I++)T=r.And([T,r.Comparator(t.symbols[I],[b[I],b[I+1]])]);return T}case\"Or\":return r.Or(xa(e,t,t.args));case\"PercentOf\":return r.Divide([r.Multiply(xa(e,t,t.args)),r.ColdConstant(100)]);case\"ParenSeq\":return tW(e,t);case\"BareSeq\":return nW(e,t);case\"NamedCoordinateAccess\":{let[b]=$T(e,t,t.args),T=t.symbol;switch(T){case\"x\":case\"y\":case\"z\":return r.NamedSlot(T,[b]);case\"p\":{let I=r.getInstruction(b).valueType;return Ni(tr(I))?r.NamedSlot(T,[Hm(r,[b])]):r.NamedSlot(T,[b])}default:{let I=T;throw new Error(`Programming Error: unexpected named coordinate: '${I}'.`)}}}case\"Norm\":{let b=$T(e,t,t.args)[0];return gt(r,b,N)?ZT(r,b):gt(r,b,he)?K_(e,b):gt(r,b,zt)?WB(e,b):(p=(l=Q_(e,b))!=null?l:Ac(r,[b])?Q_(e,pi(r,b)):void 0)!=null?p:r.NativeFunction(\"abs\",[b])}case\"UpdateRule\":{let b=t._symbol;if(o.isLocal(b))throw eR(e,b);let T=o.resolveVisibleGlobalDefinition(b);if(T!==void 0){let E=T.def;if(E.type!==\"Assignment\"&&E.type!==\"Slider\")throw eR(e,b)}let I=Fe(e,t.args[1]);return r.Action([(m=(d=T==null?void 0:T.moduleInfo)==null?void 0:d.name)!=null?m:{symbol:b,frameID:ix(e.scope.frame)}],[I])}case\"List\":case\"TableColumnValue\":{if(t.getDependencies().length>0)return Xr(t.args),r.List(Vl(e,t,t.args));if(t.args.length===0)return Km(r,n,s,t,[]),r.ConstantOfType(He,[],0);{let b=r.instructionsLength(),T=[],I,E;Xr(t.args);let S=!0;for(let v of t.args){let _=Fe(e,v),L=r.getInstruction(_);if(I===void 0){if(I=L.valueType,!er(I))throw Ep([se(I)],{blockExport:S});E=Zn(I)}else if(L.valueType!==I){if(Qc(I,L.valueType)!==void 0)return r.unsafelyTruncate(b),r.List(Vl(e,t,t.args));throw xy({blockExport:S})}if(L.type!==1)throw new Error(\"Programming error: expected list with no dependencies to constant collapse.\");T.push(L.value),r.unsafelyTruncate(b)}let C=X_(e.selection,t);if(e.selection&&C!==void 0&&E!==void 0&&C.positionWithinArg!==\"empty-list\"){let v=rt(E);r.setCursorContext({type:\"expression-arguments\",expressionType:\"List\",argIndex:C.argIndex,argCount:t.args.length,isLastValidArg:!1,positionWithinArg:C.positionWithinArg,allowedTypesForInsertedArg:[v]})}return r.ConstantOfType(E,T,0)}}case\"ListAccess\":{let b=Fe(e,t.args[0]),T=r.getInstruction(b);if(t.args[1].type===\"Range\"&&t.args[1].args[1].length===0){if(!W(T.valueType))throw gy([se(T.valueType),se(x)],{blockExport:De(T)});let I=Mr(r,b),E=tR(e,Fe(e,t.args[1].args[0]),r.List([I]),{stepMustBePositive:!0});return r.ListAccess([b,E])}else{let I=Fe(e,t.args[1]),E=r.getInstruction(I);if(du(r,n,t,[b,I]),E.valueType===vi)return r.NativeFunction(\"select\",[b,I]);if(E.valueType===Oe&&W(T.valueType)){let S=r.ConstantOfType(T.valueType,[],0);return r.Piecewise([I,b,S])}return r.ListAccess([b,I])}}case\"Range\":{let[b,T]=xa(e,t,t.args);return tR(e,b,T,{stepMustBePositive:!1})}case\"ListComprehension\":return oW(e,t);case\"Piecewise\":{let b=Fe(e,t.args[0]),T=r.getInstruction(b),I=T.type===1&&T.value===!1,E=T.type===1&&T.value===!0,S;S=r.getWarning();let C=Fe(e,t.args[1]);I&&r.restoreWarning(S),S=r.getWarning();let v=Fe(e,t.args[2]);E&&r.restoreWarning(S);let _=[b,C,v];Km(e.chunk,e.policy,e.selection,t,_),du(e.chunk,e.policy,t,_);let L=r.getInstruction(_[1]),k=r.getInstruction(_[2]),Q=Bs(L.valueType,k.valueType)||Bs(k.valueType,L.valueType);if(T.type===1&&T.valueType===Oe&&Q){let K=_[T.value?1:2],le=r.getInstruction(K),te=L.valueType!==He?L.valueType:k.valueType;return le.valueType===He&&te!==He?r.ConstantOfType(te,[],T.mobility):cT(r,K,T.mobility)}let w=L.valueType,q=tr(w);if(!Q&&De(k)&&k.valueType===x&&ri(k.value)&&la(q)){if(ae(L.valueType,un))return r.NativeFunction(\"restriction\",[r.And([_[0],r.NativeFunction(\"restrictionToBoolean\",[_[1]])])]);let K=r.NanOfType(q,0);_=[_[0],_[1],K]}return r.Piecewise(_)}case\"Restriction\":return r.NativeFunction(\"restriction\",$T(e,t,t.args));case\"Ans\":case\"Identifier\":{let b=t._symbol,T=t._errorSymbol;if(t.type===\"Ans\"&&r.argNames.indexOf(b)!==-1)throw Kv();let I=o.getSymbol(b);if(I!==void 0)return I;let E=Ta(e,b);if(E===void 0)throw ct[b]?ct[b].type===\"Placeholder\"?Wa(T,e.policy):Dy(T):e.recursiveFunctionContext&&e.recursiveFunctionContext.fnSymbols.includes(b)?Db(b):V(`Programming Error: reached undefined symbol ${b}`);let S=E.def;if(e=E.ctx,{scope:o,policy:n}=e,o.isLocal(b)||hl(S))throw Db(T);if(S.type===\"RegressionParameter\"){let v=i.getRegressionDependencyError(T);if(v)throw v}let C;if(S instanceof Do)C=Fe(e,S);else{let v=o.newLexicalScope(),_=hs(e,v);C=Fe(_,S)}return o.cacheGlobal(b,C,S),C}case\"AssignmentImport\":throw V(\"AssignmentImport statements cannot be compiled directly.\").allowExport();case\"FunctionCall\":case\"SeededFunctionCall\":{let b=dW(e,t);if(b!==void 0)return b;Xr(t.args);let T=Vl(e,t,t.args);return Xr(T),YT(e,t._symbol,t._errorSymbol,T,t.args)}case\"Substitution\":return uW(e,t);case\"FunctionExponent\":{let b=t.args[0]._symbol,T=(f=Ta(e,b))==null?void 0:f.def,I=o.getSymbol(b),E=I!==void 0?r.getInstruction(I):void 0;return o.isLocal(b)&&(E==null?void 0:E.type)===4||hl(T)?Fe(e,new O.Exponent([new O.FunctionCall(b,[t.args[1]]),t.args[2]])):Fe(e,new O.Multiply([t.args[0],new O.Exponent([t.args[1],t.args[2]])]))}case\"FunctionFactorial\":{let b=t.args[0]._symbol,T=(g=Ta(e,b))==null?void 0:g.def,I=o.getSymbol(b),E=I!==void 0?r.getInstruction(I):void 0;return o.isLocal(b)&&(E==null?void 0:E.type)===4||hl(T)?Fe(e,new O.FunctionCall(\"\\\\factorial\",[new O.FunctionCall(b,[t.args[1]])])):Fe(e,new O.Multiply([t.args[0],new O.FunctionCall(\"\\\\factorial\",[t.args[1]])]))}case\"DotAccess\":{let b=t.args[0],T=t.args[1],I=(y=Ta(e,T._symbol))==null?void 0:y.def;if(b.type===\"Identifier\"&&b._symbol===\"construction\")return cW(e,T);if((T.type===\"Identifier\"||T.type===\"FunctionCall\")&&hl(I)){let E=T._symbol,S=T._errorSymbol;if(Zy(I))throw hy(S);let C=T.type===\"Identifier\"?[b]:[b].concat(T.args),v=Vl(e,t,C);return YT(e,E,S,v,C)}else if(T.type===\"SeededFunctionCall\"){let E=T._symbol,S=T._errorSymbol,C=[T.seed,b].concat(T.args.slice(1)),v=Vl(e,t,C);return YT(e,E,S,v,C)}else throw Vi(\".\")}case\"Seed\":return r.ConstantOfType(Bt,t._stringValue,1);case\"ExtendSeed\":return r.ExtendSeed(t.tag,xa(e,t,t.args));case\"Integral\":{let b=t._differential._symbol,T=o.childScope();T.setErrorIfAccessed(b,Wv(b));let I=hs(e,T),E=Fe(I,t.args[1]),S=Fe(I,t.args[2]),C=r.getInstruction(E),v=r.getInstruction(S),_=r.SymbolicVar(x,b),L=o.childScope();L.addLexicalBinding(b,_);let k=Fe(hs(e,L),t.args[3]);if(du(r,n,t,[E,S,k]),!Sg(r,k,_))return r.Multiply([k,r.Subtract([os(r,S),os(r,E)])]);let Q=zm(r,[E,S,k]);if(Q!==void 0&&Sg(r,Q,_))throw hM(b);let w=Q!==void 0?r.BeginBroadcast([Q]):void 0,q=E;w!==void 0&&W(C.valueType)&&(q=tc(r,E,w));let K=S;w!==void 0&&W(v.valueType)&&(K=tc(r,S,w));let le=r.getInstruction(k).valueType,te=tr(le),Be;if(_d(te)&&te!==x){let Ze=[],oe=te===N||te===D?2:3;for(let ee=0;ee<oe;ee++){let $=r.BeginIntegral({indexSymbol:b},[q,K]),ne=Vc(r,$,_,k),Ve=r.getInstruction(ne);w!==void 0&&W(Ve.valueType)&&(ne=tc(r,ne,w)),ne=r.Slot(ee,[ne]);let _t=r.EndIntegral([$,ne]);Ze.push(r.BlockVar(x,[_t]))}Be=AB(r,te,Ze)}else{let Ze=r.BeginIntegral({indexSymbol:b},[q,K]),oe=Vc(r,Ze,_,k),ee=r.getInstruction(oe);w!==void 0&&W(ee.valueType)&&(oe=tc(r,oe,w));let $=r.EndIntegral([Ze,oe]);Be=r.BlockVar(x,[$])}if(w!==void 0){let Ze=r.EndBroadcast([w,Be]);return r.BroadcastResult(Zn(te),[Ze])}else return Be}case\"Sum\":case\"Product\":{let b=t._index._symbol,T=t.type===\"Sum\",I=o.childScope();I.setErrorIfAccessed(b,T?Gv(b):qv(b));let E=hs(e,I),S=Fe(E,t.args[1]);S=os(E.chunk,S);let C=Fe(E,t.args[2]);if(C=os(E.chunk,C),!gt(r,S,x)){let An=Ml(r,[S]),Nr=r.areAllArgsConstant([S]);throw T?DC(An,{blockExport:Nr}):AC(An,{blockExport:Nr})}if(!gt(r,C,x)){let An=Ml(r,[C]),Nr=r.areAllArgsConstant([C]);throw T?NC(An,{blockExport:Nr}):wC(An,{blockExport:Nr})}let v=r.NativeFunction(\"round\",[S]),_=r.NativeFunction(\"round\",[C]),L=r.getInstruction(v),k=r.getInstruction(_);if(L.type===1&&L.valueType===x&&!isFinite(F(L.value)))throw T?Ib():Pb();if(k.type===1&&k.valueType===x&&!isFinite(F(k.value)))throw T?Ib():Pb();let Q=r.SymbolicVar(x,b),w=o.childScope();w.addLexicalBinding(b,Q);let q=Fe(hs(e,w),t.args[3]),K=r.getInstruction(q).valueType,le=tr(K),Be=(t.type===\"Sum\"?Md:_h).find(An=>up(le,An));if(Be===void 0){let An=Ml(r,[q]),Nr=r.areAllArgsConstant([q]);throw T?OC(An,{blockExport:Nr}):LC(An,{blockExport:Nr})}if(!Sg(r,q,Q)){let An=r.Add([r.Subtract([_,v]),r.ColdConstant(1)]);An=r.NativeFunction(\"listMax\",[An,r.ColdConstant(0)]);let Nr=T?r.Multiply([q,An]):Be===N?r.NativeFunction(\"complexPow\",[q,An]):r.RawExponent([q,An]);return r.Piecewise([r.Equal([An,r.ColdConstant(0)]),T?r.ZeroOfType(Be,0):r.ColdConstant(1),r.Piecewise([r.Less([An,r.ColdConstant(1/0)]),Nr,r.NanOfType(Be,0)])])}let Ze=zm(r,[v,_,q]);if(Ze!==void 0&&Sg(r,Ze,Q))throw T?yM(b):gM(b);let oe=Ze!==void 0?r.BeginBroadcast([Ze]):void 0,ee=v;oe!==void 0&&W(L.valueType)&&(ee=tc(r,v,oe));let $=_;oe!=null&&W(k.valueType)&&($=tc(r,_,oe));let ne=T?r.ZeroOfType(Be,0):Be===N?r.NativeFunction(\"complex\",[r.ColdConstant(1),r.ColdConstant(0)]):r.ColdConstant(1),Ve=r.BeginLoop({type:T?\"sum\":\"product\",indexSymbol:b},[ee,$,ne]),_t=r.BlockVar(Be,[Ve]),ht=Vc(r,Ve,Q,q),Rt=r.getInstruction(ht);oe!==void 0&&W(Rt.valueType)&&(ht=tc(r,ht,oe));let Ko=T?r.Add([_t,ht]):r.Multiply([_t,ht]),br=r.EndLoop([Ve,Ko]),Ci=r.BlockVar(Be,[br]);if(oe!==void 0){let An=r.EndBroadcast([oe,Ci]);return r.BroadcastResult(Zn(Be),[An])}else return Ci}case\"Derivative\":{let b=t._symbol,T=Fe(e,new O.Identifier(b)),I=Yp(r,T),E=r.getInstruction(I),S=Ig(E.valueType);if(!S)throw UC(b,Ml(r,[I]),{blockExport:De(E)});let C,v,_=!1;if((E.type===2||E.type===3)&&E.valueType===x)C=e,v=I;else{let w=o.childScope();v=r.SymbolicVar(E.valueType),w.addDynamicBinding(b,v),_=!0,C=hs(e,w)}let L=1;for(;t.args[0].type===\"Derivative\"&&t.args[0]._symbol===t._symbol;)L+=1,t=t.args[0];let Q=io(r,Fe(C,t.args[0]));for(let w=0;w<L;w++)Q=UT(r,Q,v,S);return v===I?Q:(_&&r.derivativeMaps.pruneIP(v),Vc(r,I,v,Q))}case\"Prime\":{let b=t.args[0];if(o.isLocal(b._symbol))throw Nb(b._symbol);let T=(h=Ta(e,b._symbol))==null?void 0:h.def;if(!T)throw Lb(b._symbol);if(!hl(T))throw Nb(b._symbol);let I=Fe(e,b.args[0]),E=Yp(r,I),S=r.getInstruction(E),C=Ig(S.valueType);if(!C)throw kC(b._symbol,Ml(r,[E]),{blockExport:De(S)});let v=!1,_;(S.type===2||S.type===3)&&S.valueType===x?_=E:(_=r.SymbolicVar(S.valueType),v=!0);let L,k;if(b._symbol===\"logbase\"){if(b.args.length!==2)throw Mp();L=[_,Fe(e,b.args[1])],k=[b.args[0],b.args[1]]}else{if(b.args.length!==1)throw Mp();L=[_],k=[b.args[0]]}let w=io(r,YT(e,b._symbol,b._errorSymbol,L,k));for(let q=0;q<t.order;q++)w=UT(r,w,_,C);return _===E?w:(v&&r.derivativeMaps.pruneIP(_),Vc(r,E,_,w))}case\"Slider\":return e.chunk.Constant(Ao(kp,t,n,o.frame).asCompilerValue(),2);case\"Assignment\":{Y_(r,e.selection,t);let b=Fe(e,t._expression),T=r.getInstruction(b);return De(T)&&T.mobility<1&&(b=r.ConstantOfType(T.valueType,T.value,1)),b}case\"FunctionDefinition\":{let b=t;if(Y_(r,e.selection,b),b.recursionInfo)return eG(e,b,b.recursionInfo);{let T=e.policy.isRecursionEnabled()&&e.policy.assignmentForbidden(b._symbol),I=o.childScope();return I.setErrorIfAccessed(b._symbol,_p([b._symbol],{suggestAlternativeFunctionName:T})),Fe(hs(e,I),t._expression)}}case\"RecursiveFunctionBaseCase\":{let b=o.childScope(),T=t;return b.setErrorIfAccessed(T._symbol,tv(T._symbol)),Fe(hs(e,b),t._expression)}case\"Construction\":throw Vi(\"construction\");case\"Placeholder\":throw new Error(\"Programming error, unexpected placeholder\");default:throw new Error(`Programming error, unimplemented node type ${a}`)}}function $T(e,t,n){let r=[Fe(e,n[0])];return Km(e.chunk,e.policy,e.selection,t,r),du(e.chunk,e.policy,t,r),r}function xa(e,t,n){let r=[Fe(e,n[0]),Fe(e,n[1])];return Km(e.chunk,e.policy,e.selection,t,r),du(e.chunk,e.policy,t,r),r}function ZT(e,t){return e.NativeFunction(\"hypot\",[e.Slot(0,[t]),e.Slot(1,[t])])}function $B(e,t){return gt(e,t,x)?t:e.Slot(0,[t])}function YB(e,t){return gt(e,t,x)?e.ColdConstant(0):e.Slot(1,[t])}function ZB(e,t){return gt(e,t,x)?t:e.NativeFunction(\"complex\",[e.Slot(0,[t]),e.Negative([e.Slot(1,[t])])])}function Ws(e,t){return XB(e,t,\"mean\")}function XB(e,t,n){return Zs(e,t,n,[{match:po(Se,0),build:()=>e.NativeFunction(n,t)},{match:po(N,1),build:()=>e.NativeFunction(\"complex\",[e.NativeFunction(n,t.map(r=>$B(e,r))),e.NativeFunction(n,t.map(r=>YB(e,r)))])},{match:po(D,1),build:()=>{let r=o=>e.NativeFunction(n,t.map(i=>e.Slot(o,[i])));return e.TupleOfType(D,[r(0),r(1)])}},{match:po(G,1),build:()=>{let r=o=>e.NativeFunction(n,t.map(i=>e.Slot(o,[i])));return e.TupleOfType(G,[r(0),r(1),r(2)])}}])}function Cg(e,t){return Zs(e,t,\"varp\",[{match:po(Se,0),build:()=>e.NativeFunction(\"varp\",t)},{match:po(N,1),build:()=>{let n=Ws(e,t);return Ws(e,t.map(r=>jX(e,e.Subtract([r,n]))))}}])}function FB(e,t){return XT(e,t)?Eg(e,t,\"var\"):Zs(e,t,\"var\",[{match:po(Se,1),build:()=>e.NativeFunction(\"var\",t)},{match:po(N,1),build:()=>{let n=e.NativeFunction(\"count\",t);return e.Divide([e.Multiply([Cg(e,t),n]),e.Subtract([n,e.ColdConstant(1)])])}}])}function VB(e,t,n){let r=e.BeginBroadcast([n]),o=e.InboundsListAccess([t,r]),i=e.EndBroadcast([r,o]);return e.BroadcastResult(Zn(e.getInstruction(o).valueType),[i])}function W_(e,t){return Zs(e,t,\"covp\",[{match:[ca,ca],noBroadcast:!0,build:()=>e.NativeFunction(\"covp\",t)},{match:[Ye,Ye],noBroadcast:!0,build:()=>{let n=e.NativeFunction(\"listMin\",[Mr(e,t[0]),Mr(e,t[1])]),r=VB(e,t[0],n),o=VB(e,t[1],n),i=Ws(e,[r]),s=Ws(e,[o]);return Ws(e,[e.Multiply([e.Subtract([r,i]),ZB(e,e.Subtract([o,s]))])])}}])}function jX(e,t){return e.Add([e.Square([e.Slot(0,[t])]),e.Square([e.Slot(1,[t])])])}function Q_(e,t){let n=e.chunk;return gt(n,t,G)?n.NativeFunction(\"hypot\",[n.Slot(0,[t]),n.NativeFunction(\"hypot\",[n.Slot(1,[t]),n.Slot(2,[t])])]):gt(n,t,D)?n.NativeFunction(\"hypot\",[n.Slot(0,[t]),n.Slot(1,[t])]):void 0}function K_(e,t){let{chunk:n}=e,r=n.ColdConstant(0),o=n.ColdConstant(1);return n.NativeFunction(\"distance\",[n.NativeFunction(\"segmentGlider\",[t,r]),n.NativeFunction(\"segmentGlider\",[t,o])])}function WB(e,t){let{chunk:n}=e,r=n.ColdConstant(0),o=n.ColdConstant(1);return n.NativeFunction(\"distanceThreeD\",[n.NativeFunction(\"segmentThreeDGlider\",[t,r]),n.NativeFunction(\"segmentThreeDGlider\",[t,o])])}function BB(e,t,n){let r=e.chunk;return gt(r,t,D)&&gt(r,n,D)?r.Add([r.Multiply([r.Slot(0,[t]),r.Slot(0,[n])]),r.Multiply([r.Slot(1,[t]),r.Slot(1,[n])])]):gt(r,t,G)&&gt(r,n,G)?r.Add([r.Add([r.Multiply([r.Slot(0,[t]),r.Slot(0,[n])]),r.Multiply([r.Slot(1,[t]),r.Slot(1,[n])])]),r.Multiply([r.Slot(2,[t]),r.Slot(2,[n])])]):void 0}function GB(e,t,n){let r=e.chunk,o=r.Slot(0,[t]),i=r.Slot(1,[t]),s=r.Slot(2,[t]),a=r.Slot(0,[n]),u=r.Slot(1,[n]),c=r.Slot(2,[n]);return r.TupleOfType(G,[r.Subtract([r.Multiply([i,c]),r.Multiply([s,u])]),r.Subtract([r.Multiply([s,a]),r.Multiply([o,c])]),r.Subtract([r.Multiply([o,u]),r.Multiply([i,a])])])}function Vl(e,t,n){let r=[];for(let o of n)r.push(Fe(e,o));return Km(e.chunk,e.policy,e.selection,t,r),du(e.chunk,e.policy,t,r),r}function YT(e,t,n,r,o){var m;let i=Ta(e,t);i&&(e=i.ctx,t=i.symbol);let{chunk:s,scope:a,recursiveFunctionContext:u,substitutionContext:c,policy:l}=e;if(t=px(l,t),u&&u.type===\"type-inference\"&&u.definitions[t]){let f=c.getFunctionBodySubstitution(u.fnSymbols);if(f&&f.substitutedGlobals.length>0)throw IM(f.operator,f.substitutedGlobals[0],t);u.registerFunctionCall(t,r.map(h=>s.getInstruction(h).valueType));let g=u.definitions[t];if(g instanceof M)throw g;let y=nG(e,u,g,r);return s.SymbolicVar(y.returnType)}let p=a.getSymbol(t);if(p!==void 0){let f=s.getInstruction(p);if(f.type===4){if(f.signature.argTypes.length!==r.length)throw Xa(t,f.signature.argTypes.length,r.length,{includeUsageExample:!0});for(let g=0;g<r.length;g++){let y=s.getInstruction(r[g]).valueType,h=f.signature.argTypes[g];if(!ae(y,h))throw aC(g,tt(h),tt(y),{blockExport:De(s.getInstruction(r[g]))})}return s.FunctionCall([p,...r])}else if(ae(f.valueType,we))return jT(e.chunk,[p,...r],n,!0);if(r.length>=1)return HB(e,t,o,r);throw f.type===2?Lb(n):f.valueType===wn?$b(n):Hb(n)}let d=i==null?void 0:i.def;if(d===void 0||!hl(d)){if(((m=ct[t])==null?void 0:m.type)===\"Placeholder\")throw t===\"logbase\"&&a.isGlobal(\"ln\")&&a.isGlobal(\"log\")?tM():Wa(n,e.policy);if(d){let f=Fe(e,d);if(s.getInstruction(f).valueType===wn)throw $b(n);if(ae(s.getInstruction(f).valueType,we))return jT(e.chunk,[f,...r],n,!0)}if(r.length>=1)return HB(e,t,o,r);throw d?Hb(n):V(`Programming Error: reached undefined symbol ${t}`)}if(Zy(d)){if(r.length!==d._argSymbols.length)throw Xa(n,d._argSymbols.length,r.length,{includeUsageExample:!0});if(d.getDependencies().includes(\"globalRandomSeed\")&&l.shouldIncludeFunctionParametersInRandomSeed()){let f=LB(e,d,r),g=r.filter((y,h)=>f[h]===2);if(g.length>0){let y=zm(s,g);if(y===void 0)throw V(\"Programming error: expected list length to be defined\");let h=s.BeginBroadcast([y]),b=[];for(let S=0;S<r.length;S++)f[S]===2?b.push(tc(s,r[S],h)):b.push(r[S]);let T=HT(e,d,b,o),I=s.EndBroadcast([h,T]),E=s.getInstruction(T).valueType;if(er(E))return s.BroadcastResult(Zn(E),[I])}}return HT(e,d,r,o)}else{if(Ja.hasOwnProperty(t))return KX(e,t,n,r,o);if(ur.hasOwnProperty(t))return ss(e,t,r);throw Wa(n,e.policy)}}function HT(e,t,n,r){let{scope:o}=e,i=o.newLexicalScope().childScope();for(let a=0;a<t._argSymbols.length;a++)i.addLexicalBinding(t._argSymbols[a],n[a],r&&r[a]);let s=hs(e,i);return t.recursionInfo?eG(s,t,t.recursionInfo):Fe(s,t._expression)}function JX(e,t){let n=mu(e,t),r=e.Add([n,pi(e,t)]);return e.NativeFunction(\"segment\",[n,r])}function ss(e,t,n){let{chunk:r}=e,o=ur[t],i=n.length,{minArity:s,maxArity:a}=o;if(i>a||i<s)throw V(\"Unexpected arity mismatch\");let u=jB(r,n,o);switch(o.tag){case\"default\":case\"reducer\":case\"doubleReducer\":case\"parameterizedReducer\":case\"color\":case\"never-broadcast\":return r.NativeFunction(t,u);case\"trig\":{let c=Fe(e,new O.Identifier(\"trigAngleMultiplier\")),l=r.Multiply([u[0],c]);return r.NativeFunction(t,[l])}case\"trig2\":{let c=Fe(e,new O.Identifier(\"trigAngleMultiplier\")),l=r.Multiply([u[1],c]);return r.NativeFunction(t,[u[0],l])}case\"inverseTrig\":{let c=Fe(e,new O.Identifier(\"trigAngleMultiplier\")),l=r.NativeFunction(t,u);return r.Divide([l,c])}default:{let c=o.tag;throw new Error(`Programming Error: unexpected tag ${c}`)}}}function jB(e,t,{minArity:n,defaultArguments:r}){if(!r||!(t.length-n<r.length))return t;let o=t.slice();for(;o.length-n<r.length;)o.push(e.copyLeafInstruction(r[o.length-n]));return o}function QX(e,t,n){let r=[n.noBroadcast?Ot(n.match):U(n.match)];return Qx(r,t.map(o=>e.getInstruction(o).valueType),0).length>0}function Zs(e,t,n,r){let o=r.find(i=>QX(e,t,i));if(!o){if(typeof n==\"string\")throw ts(n,pu(e,t),{blockExport:e.areAllArgsConstant(t)});return n(e,t)}return o.build(e,t)}function qB(e,t){if(t.length!==2)throw V(\"Can only take the midpoint of two points\");let n=e.ColdConstant(Ie(1,2));return e.Multiply([n,e.Add(t)])}function KX(e,t,n,r,o){var f,g;let{chunk:i,policy:s}=e,a=Ja[t],{minArity:u,maxArity:c}=a,l=r.length;if(l<u||l>c)throw tg(t)?T0(i,{symbol:t,errorSymbol:n,argsWithoutSeed:r,signatures:a.getSignatures(s),minArity:u,providedArgs:r,builtInTag:void 0,defaultArgumentCount:(g=(f=a.defaultArguments)==null?void 0:f.length)!=null?g:0,isDotCall:!1,maxArity:c}):new Error(\"Programming Error: unexpected arity mismatch\");let p;if(t===\"cdf\")l===2?p=[r[0],i.ColdConstant(-1/0),r[1]]:p=r;else if(t===\"random\")if(l===1||l<4&&!W(i.getInstruction(r[1]).valueType)&&i.getInstruction(r[1]).valueType!==wn){let y=i.Distribution(\"uniformdist\",[i.ColdConstant(0),i.ColdConstant(1)]);p=[r[0],y].concat(r.slice(1))}else p=r;else p=jB(i,r,a);let d=qy(s,t);if(t===\"join\"){let y=[];for(let b of p)y.push(i.getInstruction(b).valueType);let h=iL(y);d=[Ot({type:\"variadic\",initial:[h,h],rest:h})]}if(d){let y=N0(i,p,d);y.didCoerce&&(p=y.args)}function m(y,h=n){return Zs(i,p,h,y)}switch(t){case\"length\":if(s.isGeometryEnabled()||s.is3dPolicy()){let y=p[0];return m([{match:[zt],build:()=>WB(e,y)},{match:[he],build:()=>K_(e,y)},{match:[ue],build:()=>{let h=i.NativeFunction(\"abs\",[i.NativeFunction(\"arcOmega\",[p[0]])]),{radius:b,startPoint:T}=iW(i,p[0]),I=i.NativeFunction(\"arcThirdPoint\",[p[0]]);return i.Piecewise([i.Equal([h,i.ColdConstant(0)]),i.NativeFunction(\"distance\",[T,I]),i.Multiply([b,h])])}},{match:[kP],build:()=>Q_(e,pi(i,y))}])}else return i.NativeFunction(\"count\",p);case\"round\":return m([{match:[Se],build:()=>i.NativeFunction(\"round\",p)},{match:[Se,x],build:()=>{let y=i.NativeFunction(\"round\",[p[1]]),h=i.RawExponent([i.ColdConstant(10),y]);return i.Divide([i.NativeFunction(\"round\",[i.Multiply([p[0],h])]),h])}},{match:[N],build:()=>i.NativeFunction(\"complexRound\",p)},{match:[N,x],build:()=>{let y=i.NativeFunction(\"round\",[p[1]]),h=i.RawExponent([i.ColdConstant(10),y]);return i.Divide([i.NativeFunction(\"complexRound\",[i.Multiply([p[0],h])]),h])}}]);case\"abs\":return m([{match:[Se],build:()=>i.NativeFunction(t,p)},{match:[N],build:()=>ZT(i,p[0])}]);case\"coerceToReal\":return m([{match:[N],build:()=>i.NativeFunction(\"peelableCoerceComplexToReal\",p)},{match:[Nn],build:()=>p[0]}]);case\"real\":return $B(i,p[0]);case\"imag\":return YB(i,p[0]);case\"conj\":return ZB(i,p[0]);case\"exp\":case\"sin\":case\"cos\":case\"tan\":case\"sinh\":case\"cosh\":case\"tanh\":case\"sec\":case\"csc\":case\"cot\":case\"sech\":case\"csch\":case\"coth\":case\"arccot\":case\"arcsinh\":case\"arccsch\":case\"floor\":case\"ceil\":return m([{match:[Se],build:()=>ss(e,t,p)},{match:[N],build:()=>ss(e,tm[t],p)}]);case\"arctan\":return m([{match:[Se],build:()=>ss(e,t,p.concat(i.ColdConstant(1)))},{match:[x,x],build:()=>ss(e,t,p)},{match:[N],build:()=>ss(e,tm[t],p)}]);case\"mod\":return m([{match:[Se,Se],build:()=>ss(e,t,p)},{match:[N,N],build:()=>ss(e,tm[t],p)}]);case\"nthroot\":return i.Exponent([p[0],i.Divide([i.ColdConstant(1),p[1]])]);case\"complexNthRoot\":return i.NativeFunction(\"complexPow\",[p[0],i.Divide([i.ColdConstant(1),p[1]])]);case\"sign\":return m([{match:[Se],build:()=>ss(e,t,p)},{match:[N],build:()=>{let y=p[0];return i.Piecewise([i.Equal([y,i.ZeroOfType(N,0)]),y,i.Divide([y,ZT(i,y)])])}}]);case\"midpoint\":return m([{match:[he],build:()=>{let y=i.ColdConstant(Ie(1,2));return i.NativeFunction(\"segmentGlider\",[p[0],y])}},{match:[zt],build:()=>{let y=i.ColdConstant(Ie(1,2));return i.NativeFunction(\"segmentThreeDGlider\",[p[0],y])}},{match:[D,D],build:qB},{match:[G,G],build:qB}]);case\"circle\":return m([{match:[D,he],build:()=>i.NativeFunction(\"circle\",[p[0],K_(e,p[1])])},{match:[D,D],build:()=>i.NativeFunction(\"circle\",[p[0],i.NativeFunction(\"distance\",p)])},{match:[D,x],build:()=>i.NativeFunction(\"circle\",p)}]);case\"segment\":return m(ug(\"segment\",\"segmentThreeD\"));case\"vector\":return m(ug(\"vector\",\"vectorThreeD\"));case\"sphere\":return m([{match:[G,x],build:(y,h)=>y.NativeFunction(\"sphere\",h)},{match:[D,x],build:(y,h)=>y.NativeFunction(\"sphere\",[y.TupleOfType(G,[y.Slot(0,[h[0]]),y.Slot(1,[h[0]]),y.ColdConstant(0)]),h[1]])}]);case\"distance\":return m(ug(\"distance\",\"distanceThreeD\"));case\"center\":return m([{match:[Te],build:()=>i.NativeFunction(\"center\",[p[0]])},{match:[ue],build:()=>i.NativeFunction(\"arcCenter\",[p[0]])}]);case\"radius\":return m([{match:[Te],build:()=>i.NativeFunction(\"radius\",[p[0]])},{match:[ue],build:()=>i.NativeFunction(\"distance\",[i.NativeFunction(\"arcFirstPoint\",[p[0]]),i.NativeFunction(\"arcCenter\",[p[0]])])}]);case\"glider\":return JB(e.chunk,p);case\"intersection\":case\"strictintersection\":{let y=0;t===\"strictintersection\"&&((gt(i,p[0],he)||gt(i,p[0],ue))&&(y+=3),(gt(i,p[1],he)||gt(i,p[1],ue))&&(y+=12),gt(i,p[0],Ae)&&(y+=1),gt(i,p[1],Ae)&&(y+=4));let h=aW(e,o,p),b=h&&ec(h);if(!h||!b)return j_(i,p,y);let T=Fe(e,new O.Identifier(b)),I=cu(h);return I!==void 0&&(T=i.ListAccess([T,i.Constant(I,1)])),i.NativeFunction(\"chooseNonIncidentPoint\",[T,j_(i,[p[0],p[1]],y),j_(i,[p[1],p[0]],y<<2&12|y>>2&3)])}case\"parallel\":case\"perpendicular\":return m([{match:[Rh,D],build:()=>{let h=[WT(i,p[0]),p[1]];return i.NativeFunction(t,h)}}]);case\"anglebisector\":return m([{match:[Ne],build:()=>i.NativeFunction(\"anglebisector\",p)},{match:[Ce],build:()=>i.NativeFunction(\"directedanglebisector\",p)}]);case\"start\":return mu(i,p[0]);case\"end\":return i.Add([mu(i,p[0]),pi(i,p[0])]);case\"translate\":case\"reflect\":case\"rotate\":case\"dilate\":return sW(e,t,p);case\"apply\":return jT(i,p,n,!1);case\"normaldist\":case\"tdist\":case\"chisqdist\":case\"poissondist\":case\"geodist\":case\"binomialdist\":case\"uniformdist\":return i.Distribution(t,p);case\"median\":case\"quantile\":return XT(i,r)?Eg(i,p,t):ss(e,t,r);case\"stdev\":return XT(i,r)?Eg(i,p,t):m([{match:po(Se,1),build:()=>ss(e,t,r)},{match:po(N,1),build:()=>i.NativeFunction(\"sqrt\",[FB(i,p)])}]);case\"stdevp\":return m([{match:po(Se,1),build:()=>ss(e,t,r)},{match:po(N,1),build:()=>i.NativeFunction(\"sqrt\",[Cg(i,p)])}]);case\"var\":return FB(i,p);case\"cov\":return m([{match:[ca,ca],noBroadcast:!0,build:()=>ss(e,t,r)},{match:[Ye,Ye],noBroadcast:!0,build:()=>{let y=i.NativeFunction(\"listMin\",[Mr(i,p[0]),Mr(i,p[1])]);return i.Divide([i.Multiply([W_(i,p),y]),i.Subtract([y,i.ColdConstant(1)])])}}]);case\"corr\":return m([{match:[ca,ca],noBroadcast:!0,build:()=>ss(e,t,r)},{match:[Ye,Ye],noBroadcast:!0,build:()=>i.Divide([W_(i,p),i.NativeFunction(\"sqrt\",[i.Multiply([Cg(i,[p[0]]),Cg(i,[p[1]])])])])}]);case\"mad\":return m([{match:po(Se,1),build:()=>ss(e,t,r)},{match:po(N,1),build:()=>{let y=Ws(i,p);return Ws(i,p.map(h=>ZT(i,i.Subtract([h,y]))))}}]);case\"pdf\":case\"cdf\":return Eg(i,p,t);case\"varp\":return Cg(i,p);case\"covp\":return W_(i,p);case\"total\":case\"mean\":return t===\"mean\"&&XT(i,r)?Eg(i,p,t):XB(i,p,t);case\"lcm\":case\"gcd\":return m([{match:po(Se,1),build:()=>i.NativeFunction(t,p)},{match:po(N,1),build:()=>{let y;switch(t){case\"lcm\":y=\"complexLCM\";break;case\"gcd\":y=\"complexGCD\";break}return i.NativeFunction(y,p)}}]);case\"min\":return m([{match:[x,x],build:()=>i.NativeFunction(\"min\",p)},{match:po(x,0),build:()=>i.NativeFunction(\"listMin\",p)},{match:[Nt],build:()=>i.NamedSlot(\"min\",[p[0]])}]);case\"lower\":return m([{match:[Nt],build:()=>i.NamedSlot(\"min\",[p[0]])}]);case\"max\":return m([{match:[x,x],build:()=>i.NativeFunction(\"max\",p)},{match:po(x,0),build:()=>i.NativeFunction(\"listMax\",p)},{match:[Nt],build:()=>i.NamedSlot(\"max\",[p[0]])}]);case\"upper\":return m([{match:[Nt],build:()=>i.NamedSlot(\"max\",[p[0]])}]);case\"random\":{let y=p[0],h=p[1],b=i.getInstruction(p[0]),T=i.getInstruction(h);if(b.valueType!==Bt)throw V(`Unexpected value type for seed arg: ${b.valueType}`);if(T.valueType===Mi)throw IE();let I;if(W(T.valueType))I=OB;else{if(T.type!==42||T.valueType!==wn)throw V('Expected distribution argument to \"random\"');I=ba[T.symbol][t]}if(p.length>2){let E=p[2],S=i.getInstruction(E);if(S.valueType!==x)throw V(`Expected numSamples argument to random() to be a number but got ${S.valueType}`);if(p.length===4){if(i.getInstruction(p[3]).valueType!==x)throw V(`Expected userSeed argument to random() to be a number but got ${S.valueType}`);y=i.ExtendSeed(\"us\",[y,p[3]])}let C=i.ColdConstant(1),v=i.NativeFunction(\"round\",[i.NativeFunction(\"validateSampleCount\",[E])]),_=i.BeginBroadcast([v]);y=i.ExtendSeed(\"lc\",[y,i.Subtract([_,C])]);let L=I(i,h,[y]),k=i.EndBroadcast([_,L]);return i.BroadcastResult(Zn(i.getInstruction(L).valueType),[k])}return I(i,h,[y])}case\"shuffle\":{let y=p[0],h=p[1],b=p[2];if(!W(i.getInstruction(h).valueType)||b!==void 0&&i.getInstruction(b).valueType!==x)throw V(`Unexpected args for \"${t}\"`);return b!==void 0&&(y=i.ExtendSeed(\"us\",[y,b])),i.NativeFunction(\"shuffle\",[y,h])}case\"sort\":return m([{match:[Z],noBroadcast:!0,build:()=>UB(e,p[0],p[0])},{match:[Ki,Z],noBroadcast:!0,build:()=>UB(e,p[0],p[1])}]);case\"join\":return Kx(i,p,n,r);case\"unique\":{let y=p[0],h=i.getInstruction(y);if(!W(h.valueType)||h.valueType===Mi)throw V(`Unexpected types for ${t}`);return i.NativeFunction(\"elementsAt\",[y,i.NativeFunction(\"uniquePerm\",[y])])}case\"polygon\":return m([{match:[],build:()=>{let y=i.ConstantOfType(Yt,[],0);return i.NativeFunction(\"polygon\",[y])}},{match:[x,x],noBroadcast:!0,build:()=>{throw Iy()}},{match:[x,x],build:()=>{let y=i.TupleOfType(D,p);return i.NativeFunction(\"polygon\",[y])}},{match:{type:\"variadic\",initial:[],rest:D},build:()=>i.NativeFunction(\"polygon\",p)}]);case\"directedangle\":return zB(e,p,n);case\"angle\":return i.NativeFunction(\"undirectedAngleMarker\",[zB(e,p,n)]);case\"angles\":return i.NativeFunction(\"polygonInteriorUndirectedAngles\",[p[0],Fe(e,new O.Identifier(\"trigAngleMultiplier\"))]);case\"directedangles\":return i.NativeFunction(\"polygonInteriorDirectedAngles\",[p[0],Fe(e,new O.Identifier(\"trigAngleMultiplier\"))]);case\"coterminal\":{if(gt(i,p[0],Ce))return i.NativeFunction(\"directedCoterminalAngle\",p);if(gt(i,p[0],Ne))return i.NativeFunction(\"undirectedCoterminalAngle\",p);throw V(`Unexpected types for ${t}`)}case\"ttest\":return m([{match:[Z],noBroadcast:!0,build:()=>{let y=p[0],h=i.NativeFunction(\"count\",[y]);return $p(i,h,n),i.TupleOfType(Jt,{mean:Ws(i,[y]),stdev:i.NativeFunction(\"stdev\",[y]),count:h,dof:i.Subtract([h,i.ColdConstant(1)])})}},{match:[x,x,x],build:()=>{let[y,h,b]=p;return $p(i,y,n),i.TupleOfType(Jt,{count:y,mean:h,stdev:b,dof:i.Subtract([y,i.ColdConstant(1)])})}},{match:[Z,Z],noBroadcast:!0,build:()=>{let y=p[0],h=p[1],b={mean:Ws(i,[y]),count:i.NativeFunction(\"count\",[y]),stdev:i.NativeFunction(\"stdev\",[y])},T={mean:Ws(i,[h]),count:i.NativeFunction(\"count\",[h]),stdev:i.NativeFunction(\"stdev\",[h])};return $p(i,b.count,n),$p(i,T.count,n),i.TupleOfType(Ut,{mean1:b.mean,stdev1:b.stdev,count1:b.count,mean2:T.mean,stdev2:T.stdev,count2:T.count,dof:nT(i,b,T)})}},{match:[x,x,x,x,x,x],build:()=>{let[y,h,b,T,I,E]=p,S={count:y,mean:h,stdev:b},C={count:T,mean:I,stdev:E};return $p(i,S.count,n),$p(i,C.count,n),i.TupleOfType(Ut,{count1:y,mean1:h,stdev1:b,count2:T,mean2:I,stdev2:E,dof:nT(i,S,C)})}}]);case\"ztest\":return m([{match:[Z,Hr(x)],noBroadcast:!0,build:()=>{let y=p[0];return i.TupleOfType(on,{mean:Ws(i,[y]),count:i.NativeFunction(\"count\",[y]),stdevp:p[1]})}},{match:[x,x,x],build:()=>{let[y,h,b]=p;return i.TupleOfType(on,{count:y,mean:h,stdevp:b})}},{match:[Z,Hr(x),Z,Hr(x)],noBroadcast:!0,build:()=>{let y=p[0],h=p[2];return i.TupleOfType(Zt,{mean1:Ws(i,[y]),count1:i.NativeFunction(\"count\",[y]),stdevp1:p[1],mean2:Ws(i,[h]),count2:i.NativeFunction(\"count\",[h]),stdevp2:p[3]})}},{match:[x,x,x,x,x,x],build:()=>{let[y,h,b,T,I,E]=p;return i.TupleOfType(Zt,{mean1:h,count1:y,stdevp1:b,mean2:I,count2:T,stdevp2:E})}}]);case\"zproptest\":return m([{match:[x,x],build:()=>i.TupleOfType(cn,{successes:p[0],count:p[1]})},{match:[x,x,x,x],build:()=>i.TupleOfType(Qt,{successes1:p[0],count1:p[1],successes2:p[2],count2:p[3]})}]);case\"null\":return Hm(i,p);case\"conf\":return m([{match:[Jt,x],build:()=>{let y={mean:i.NamedSlot(\"mean\",[p[0]]),stdev:i.NamedSlot(\"stdev\",[p[0]]),count:i.NamedSlot(\"count\",[p[0]])},h=p[1];return IL(i,y,h)}},{match:[Ut,x],build:()=>{let y={mean:i.NamedSlot(\"mean1\",[p[0]]),stdev:i.NamedSlot(\"stdev1\",[p[0]]),count:i.NamedSlot(\"count1\",[p[0]])},h={mean:i.NamedSlot(\"mean2\",[p[0]]),stdev:i.NamedSlot(\"stdev2\",[p[0]]),count:i.NamedSlot(\"count2\",[p[0]])},b=p[1];return SL(i,y,h,b)}},{match:[sn,x],build:()=>{let y={estimate:i.NamedSlot(\"pointEstimate\",[p[0]]),standardError:i.NamedSlot(\"standardError\",[p[0]]),dof:i.NamedSlot(\"dof\",[p[0]])},h=p[1];return PL(i,y,h)}},{match:[on,x],build:()=>{let y={mean:i.NamedSlot(\"mean\",[p[0]]),count:i.NamedSlot(\"count\",[p[0]])},h=i.NamedSlot(\"stdevp\",[p[0]]),b=p[1];return CL(i,y,h,b)}},{match:[Zt,x],build:()=>{let y={mean:i.NamedSlot(\"mean1\",[p[0]]),count:i.NamedSlot(\"count1\",[p[0]])},h=i.NamedSlot(\"stdevp1\",[p[0]]),b={mean:i.NamedSlot(\"mean2\",[p[0]]),count:i.NamedSlot(\"count2\",[p[0]])},T=i.NamedSlot(\"stdevp2\",[p[0]]),I=p[1];return EL(i,y,h,b,T,I)}},{match:[cn,x],build:()=>xL(i,{successes:i.NamedSlot(\"successes\",[p[0]]),count:i.NamedSlot(\"count\",[p[0]])},p[1])},{match:[Qt,x],build:()=>TL(i,{successes:i.NamedSlot(\"successes1\",[p[0]]),count:i.NamedSlot(\"count1\",[p[0]])},{successes:i.NamedSlot(\"successes2\",[p[0]]),count:i.NamedSlot(\"count2\",[p[0]])},p[1])}]);case\"score\":{let y=i.getInstruction(p[0]).valueType,h=Ni(tr(y))?Hm(i,p):p[0];return i.NamedSlot(\"score\",[h])}case\"dof\":return i.NamedSlot(\"dof\",[p[0]]);case\"estimate\":return m([{match:[sn],build:()=>i.NamedSlot(\"pointEstimate\",[p[0]])},{match:[Jt],build:()=>i.NamedSlot(\"mean\",[p[0]])},{match:[on],build:()=>i.NamedSlot(\"mean\",[p[0]])},{match:[Ut],build:()=>i.Subtract([i.NamedSlot(\"mean1\",[p[0]]),i.NamedSlot(\"mean2\",[p[0]])])},{match:[Zt],build:()=>i.Subtract([i.NamedSlot(\"mean1\",[p[0]]),i.NamedSlot(\"mean2\",[p[0]])])},{match:[cn],build:()=>i.Divide([i.NamedSlot(\"successes\",[p[0]]),i.NamedSlot(\"count\",[p[0]])])},{match:[Qt],build:()=>i.Subtract([i.Divide([i.NamedSlot(\"successes1\",[p[0]]),i.NamedSlot(\"count1\",[p[0]])]),i.Divide([i.NamedSlot(\"successes2\",[p[0]]),i.NamedSlot(\"count2\",[p[0]])])])}]);case\"stderr\":return m([{match:[sn],build:()=>i.NamedSlot(\"standardError\",[p[0]])},{match:[Jt],build:()=>v0(i,{stdev:i.NamedSlot(\"stdev\",[p[0]]),count:i.NamedSlot(\"count\",[p[0]])})},{match:[Ut],build:()=>M0(i,{stdev:i.NamedSlot(\"stdev1\",[p[0]]),count:i.NamedSlot(\"count1\",[p[0]])},{stdev:i.NamedSlot(\"stdev2\",[p[0]]),count:i.NamedSlot(\"count2\",[p[0]])})},{match:[on],build:()=>_0(i,i.NamedSlot(\"stdevp\",[p[0]]),i.NamedSlot(\"count\",[p[0]]))},{match:[Zt],build:()=>R0(i,i.NamedSlot(\"stdevp1\",[p[0]]),i.NamedSlot(\"count1\",[p[0]]),i.NamedSlot(\"stdevp2\",[p[0]]),i.NamedSlot(\"count2\",[p[0]]))},{match:[cn],build:()=>S0(i,{successes:i.NamedSlot(\"successes\",[p[0]]),count:i.NamedSlot(\"count\",[p[0]])})},{match:[Qt],build:()=>C0(i,{successes:i.NamedSlot(\"successes1\",[p[0]]),count:i.NamedSlot(\"count1\",[p[0]])},{successes:i.NamedSlot(\"successes2\",[p[0]]),count:i.NamedSlot(\"count2\",[p[0]])})}]);case\"pleft\":{let y=i.getInstruction(p[0]).valueType,h=Ni(tr(y))?Hm(i,p):p[0];return i.NamedSlot(\"pleft\",[h])}case\"pright\":{let y=i.getInstruction(p[0]).valueType,h=Ni(tr(y))?Hm(i,p):p[0];return i.NamedSlot(\"pright\",[h])}case\"chisqtest\":return ML(i,p,n,r);case\"chisqgof\":return m([{match:[Z],noBroadcast:!0,build:()=>{let y=i.NativeFunction(\"mean\",p),h=i.Piecewise([i.ConstantOfType(Oe,!0,0),y,p[0]]);return D0(i,p[0],h,n)}},{match:[Z,Z],noBroadcast:!0,build:()=>D0(i,p[0],p[1],n)}]);case\"histogram\":case\"dotplot\":case\"boxplot\":case\"stats\":case\"det\":case\"inv\":case\"transpose\":case\"rref\":case\"trace\":case\"points\":case\"lines\":case\"circles\":case\"polygons\":case\"rays\":case\"arcs\":case\"vectors\":throw Vi(n);default:{let y=t;throw new Error(`Programming Error: unexpected compiler function ${y}`)}}}function JB(e,t){return Zs(e,t,\"glider\",[{match:[he,x],build:()=>e.NativeFunction(\"segmentGlider\",t)},{match:[Ee,x],build:()=>e.NativeFunction(\"lineGlider\",t)},{match:[Ae,x],build:()=>e.NativeFunction(\"rayGlider\",t)},{match:[Te,x],build:()=>e.NativeFunction(\"circleGlider\",t)},{match:[ue,x],build:()=>e.NativeFunction(\"arcGlider\",t)},{match:[_e,x],build:()=>e.NativeFunction(\"polygonGlider\",t)}])}function UB(e,t,n){let{chunk:r}=e;if(Vn(r,n)===0)return n;let i=r.NativeFunction(\"listMin\",[Mr(r,t),Mr(r,n)]);return n=r.ListAccess([n,tR(e,r.List([r.ColdConstant(1)]),r.List([i]),{stepMustBePositive:!0})]),r.NativeFunction(\"elementsAt\",[t,eW(e,[n])])}function eW(e,t){let{chunk:n}=e,r=\"sortPerm\";return Zs(n,t,\"sort\",[{match:[ca],build:()=>n.NativeFunction(r,t),noBroadcast:!0},{match:[Ye],build:()=>n.NativeFunction(tm[r],t),noBroadcast:!0}])}function Eg(e,t,n){let r=t[0],o=e.getInstruction(r);if(!ae(o.valueType,wn))throw V(`Unexpected args for \"${n}\"`);let i=t.slice(1);for(let s of i)if(!ae(e.getInstruction(s).valueType,x))throw V(`Unexpected args for \"${n}\"`);if(W(o.valueType)){let s=[],a=1/0;for(let c of t){let l=io(e,c);s.push(l);let p=e.getInstruction(l);if(W(p.valueType)){let d=Vn(e,l);if(d===void 0)throw Oy(Wo(e,l));a=Math.min(a,d)}}let u=[];for(let c=0;c<a;c++){let l=rg(e,s[0],c),p=e.getInstruction(l);if(p.type!==42)throw V(`Unexpected opcode for distribution arg: ${p.type}`);let d=[];for(let m of s.slice(1))W(e.getInstruction(m).valueType)?d.push(rg(e,m,c)):d.push(m);u.push(ba[p.symbol][n](e,l,d))}return e.List(u)}else{if(o.type!==42)throw V(`Unexpected opcode for distribution arg: ${o.type}`);return ba[o.symbol][n](e,r,i)}}function XT(e,t){return t.length!==0&&e.getInstruction(t[0]).valueType!==He&&ae(e.getInstruction(t[0]).valueType,wn)}function tW(e,t){Xr(t.args);let n=Vl(e,t,t.args);return QB(e,n)}function QB(e,t){let{chunk:n}=e,r=!1,o=!1;for(let i=0;i<t.length;i++){let a=n.getInstruction(t[i]).valueType;r=r||a===St,o=o||a!==St}if(r&&o)throw V(\"Unexpected mix of actions and non-actions\");if(r)return KB(e,t);if(t.length===2)return n.TupleOfType(D,t);if(t.length==3)return n.TupleOfType(G,t);throw V(`Unexpected tuple dimensions: ${t.length}`)}function nW(e,t){let{chunk:n}=e;Xr(t.args);let r=Vl(e,t,t.args);if(r.length<1)throw V(\"Empty bare sequence\");let o=n.getInstruction(r[0]).valueType;if(o===x)throw V(\"Ambiguous bare sequence\");return o===St?KB(e,r):n.List(r)}function KB(e,t){let{chunk:n}=e,r=[],o=[];for(let i of t){let s=n.getInstruction(i);switch(s.type){case 49:{Array.prototype.push.apply(r,s.qualifiedNames),Array.prototype.push.apply(o,s.args);break}case 1:{let a=s.value;for(let[u,c]of ms(a.updateRules))r.push(u),o.push(n.ConstantOfType(c.valueType,c.value,1));break}default:{let a=Wo(n,i);throw a.length>0?rE(a):V(`Unexpected opcode for action: ${s.type}`)}}}return n.Action(r,o)}function eR(e,t){var i;let{scope:n,policy:r}=e;if(n.isLocal(t))return Cb(t);let o=(i=Ta(e,t))==null?void 0:i.def;return r.assignmentForbidden(t)?tE(t):o&&o.type===\"FunctionDefinition\"?nE(t):eE(t).allowExport()}function rW(e,t){switch(e.getInstruction(t).valueType){case he:case Te:case ue:return[e.ColdConstant(0),e.ColdConstant(1)];case Ee:return[e.ColdConstant(-1/0),e.ColdConstant(1/0)];case Ae:return[e.ColdConstant(0),e.ColdConstant(1/0)];case _e:return[e.ColdConstant(0),e.NativeFunction(\"count\",[e.NativeFunction(\"vertices\",[t])])];default:return}}function oW(e,t){let{policy:n,chunk:r,scope:o,selection:i}=e;if(!(t instanceof Rc))throw new Error(\"Programming error: expected a ListComprehension node but got \"+t.type);let s=t._body,a=[],u=[],c=r.ColdConstant(1),l=o.childScope();Xr(t._inputLists);for(let{_symbol:b}of t._inputLists){let T=b;l.setErrorIfAccessed(T,dM(T))}for(let b of t.parameters){let T=b.identifier._symbol;l.setErrorIfAccessed(T,mM(T))}let p=hs(e,l);for(let b=t._inputLists.length-1;b>=0;b--){let T=t._inputLists[b],I=T._symbol,E=Fe(p,T.args[1]);wB(r,i,T);let S=r.getInstruction(E);if(!W(S.valueType)){let v=rW(r,E);if(v){a.push({symbol:I,object:E,gliderBounds:v});continue}let _;if(er(S.valueType)){let L=T.args[1].getInputSpan();L&&(_=vr(L))}throw lM(I,se(S.valueType),_,{blockExport:De(S)})}let C=Mr(r,E);u.push({symbol:I,assignedList:E,lengthIndex:C}),c=r.Multiply([c,C])}let d=o.childScope(),m=[],f;if(u.length>0){let b=r.ColdConstant(1);f=r.BeginBroadcast([c],{type:\"list-comprehension\",callData:{inputListSymbols:u.map(I=>I.symbol)}}),d.addLexicalBinding(t._index._symbol,f);let T=b;for(let I=u.length-1;I>=0;I--){let{symbol:E,assignedList:S,lengthIndex:C}=u[I],v;if(u.length===1)v=f;else{let _=r.NativeFunction(\"floor\",[r.Divide([r.Subtract([f,b]),T])]);v=r.Add([r.NativeFunction(\"mod\",[_,C]),b]),I>0&&(T=r.Multiply([T,C]))}d.addDynamicBinding(E,r.ListAccess([S,v])),m.push(E)}}let g;if(t.parameters.length>0||a.length>0){let b=[],T=[];for(let I of t.parameters)b.push(I.identifier._symbol),T.push(Fe(p,I.bounds[0]),Fe(p,I.bounds[1]));for(let I of a)b.push(I.symbol),T.push(I.gliderBounds[0],I.gliderBounds[1]);g=r.BeginMap({parameterSymbols:b},T);for(let I=0;I<t.parameters.length+a.length;I++)r.BlockVar(x,[g]);for(let I=0;I<t.parameters.length;I++){let E=t.parameters[I].identifier._symbol,C=g+I+1;d.addDynamicBinding(E,C),m.push(E)}for(let I=0;I<a.length;I++){let E=a[I].symbol,S=g+t.parameters.length+I+1;d.addDynamicBinding(E,JB(r,[a[I].object,S])),m.push(E)}}let h=Fe({...hs(e,d),substitutionContext:e.substitutionContext.for(o,e.recursiveFunctionContext,m)},s);if(g!==void 0){let b=r.EndMap([g,h]),T=r.getInstruction(h).valueType;if(ka(T))throw EM();if(!$P(T))throw SM(T);let I=n.is3dPolicy()?2:1;if(t.parameters.length+a.length>I)throw T===G&&!n.is3dPolicy()?ul(vo):CM(T,t.parameters.length);let E=YP(T,t.parameters.length+a.length);h=r.BlockVar(E,[b])}if(f!==void 0){let b=r.getInstruction(h);if(!er(b.valueType))throw Ep([se(b.valueType)],{blockExport:De(b)});let T=r.EndBroadcast([f,h]);h=r.BroadcastResult(Zn(b.valueType),[T])}else t.shouldCoerceToList&&(h=r.List([h]));return h}function tR(e,t,n,r){let{stepMustBePositive:o}=r,{chunk:i}=e;t=os(i,t),n=os(i,n);let s=i.getInstruction(t),a=i.getInstruction(n),u=lu(i,t,\"Programming error: expected range start list to have constant length.\"),c=lu(i,n,\"Programming error: expected range start list to have constant length.\"),l=i.ColdConstant(c);if(s.valueType!==Z||a.valueType!==Z)throw My();let p=i.ColdConstant(1),d=i.ColdConstant(0),m=i.ListAccess([t,p]),f=i.ListAccess([t,i.ColdConstant(2)]),g=i.ListAccess([n,l]),y=i.Subtract([g,m]),h=u>1?i.Subtract([f,m]):i.Piecewise([i.GreaterEqual([y,d]),p,i.ColdConstant(-1)]),b=i.Add([p,i.NativeFunction(\"round\",[i.Divide([y,h])])]),T=i.NativeFunction(\"validateRangeLength\",[t,n,h,b]);o&&(T=i.Piecewise([i.GreaterEqual([h,d]),T,d]));let I=i.BeginBroadcast([T]),E=i.Add([m,i.Multiply([h,i.Subtract([I,p])])]),S=i.EndBroadcast([I,E]);return i.addComments({[m]:\"start\",[f]:\"second\",[g]:\"last\",[b]:\"proposedLength\",[h]:\"step\",[E]:\"body\"}),i.BroadcastResult(Zn(i.getInstruction(E).valueType),[S])}function WT(e,t){return gt(e,t,he)?e.NativeFunction(\"lineFromSegment\",[t]):gt(e,t,Pe)?e.NativeFunction(\"lineFromSegment\",[JX(e,t)]):gt(e,t,Ae)?e.NativeFunction(\"lineFromRay\",[t]):t}function iW(e,t){let n=e.NativeFunction(\"arcCenter\",[t]),r=e.NativeFunction(\"arcFirstPoint\",[t]),o=e.NativeFunction(\"distance\",[n,r]);return{center:n,radius:o,startPoint:r}}function zB(e,t,n){let{chunk:r}=e;if(t.length===3&&gt(r,t[0],D)&&gt(r,t[1],D)&&gt(r,t[2],D)){let o=t[0],i=t[1],s=t[2],a=r.Subtract([o,i]),u=r.Subtract([s,i]),c=r.Slot(0,[a]),l=r.Slot(1,[a]),p=r.Slot(0,[u]),d=r.Slot(1,[u]),m=r.NativeFunction(\"arctan\",[l,c]),f=r.Subtract([r.Multiply([c,d]),r.Multiply([l,p])]),g=r.Add([r.Multiply([c,p]),r.Multiply([l,d])]),y=r.NativeFunction(\"arctan\",[f,g]),h=r.NativeFunction(\"abs\",[y]),b=r.ColdConstant(Math.PI),T=r.ColdConstant(Math.PI*2);y=r.Piecewise([r.Equal([h,b]),b,r.Piecewise([r.Less([h,b]),y,r.Multiply([r.Multiply([r.NativeFunction(\"sign\",[y]),r.ColdConstant(-1)]),r.Subtract([T,h])])])]);let I=r.NativeFunction(\"directedAngleMarker\",[i,m,y,Fe(e,new O.Identifier(\"trigAngleMultiplier\"))]),E=r.ColdConstant(0),S=r.And([r.Equal([f,E]),r.Equal([g,E])]);return r.Piecewise([S,r.NanOfType(Ce,0),I])}else throw V(`Unexpected types for ${n}`)}function AL(e,t){return e.Divide([e.NativeFunction(\"directedAngleMarkerRawDelta\",[t]),e.NativeFunction(\"directedAngleMarkerMultiplier\",[t])])}function wL(e,t){return e.NativeFunction(\"abs\",[e.Divide([e.NativeFunction(\"undirectedAngleMarkerRawDelta\",[t]),e.NativeFunction(\"undirectedAngleMarkerMultiplier\",[t])])])}function sW(e,t,n){let{chunk:r,policy:o}=e,i=n.slice(1),s=qy(o,t);if(!s)throw new Error(`Unexpected transformation type: ${t}`);let a=s.map(p=>{let d=0;for(let m=1;m<n.length;m++){let f=r.getInstruction(n[m]).valueType,g=p.argTypeAtIndex(m);g&&dp(f,g)&&d++}return{signature:p,matchedArgsCount:d,signatureArgsCount:p.maxArity===void 0?p.initial.length+1:p.argTypes.length-1,providedArgsCount:n.length-1}}).sort((p,d)=>d.matchedArgsCount!==p.matchedArgsCount?d.matchedArgsCount-p.matchedArgsCount:p.signatureArgsCount-d.signatureArgsCount),u;switch(t){case\"translate\":{u=[{match:[Pe],build:()=>r.NativeFunction(\"translation\",[r.NativeFunction(\"vectorDisplacementAsPoint\",i)])},{match:[D,D],build:()=>r.NativeFunction(\"translation\",[r.Subtract([i[1],i[0]])])}];break}case\"reflect\":{u=[{match:[Rh],build:()=>{let p=WT(r,i[0]);return r.NativeFunction(\"reflection\",[p])}}];break}case\"rotate\":{u=[{match:[D,x],build:()=>{let p=Fe(e,new O.Identifier(\"trigAngleMultiplier\"));return r.NativeFunction(\"rotation\",[i[0],r.Multiply([i[1],p])])}}];break}case\"dilate\":{u=[{match:[D,x],build:()=>r.NativeFunction(\"dilation\",i)}];break}default:{let p=t;throw new Error(`Programming error: exhaustive check failed: ${p}`)}}let c=r.areAllArgsConstant(i),l=Zs(r,i,()=>{throw CC(t,pu(r,i),a[0].signature,{blockExport:c})},u);return jT(r,[l,n[0]],t,!0)}function jT(e,t,n,r){let o=[[we,\"compose\"],[D,\"transformPoint\"],[he,\"transformSegment\"],[Ee,\"transformLine\"],[Ae,\"transformRay\"],[Pe,\"transformVector\"],[Te,\"transformCircle\"],[ue,\"transformArc\"],[_e,\"transformPolygon\"],[Ne,\"transformAngleMarker\"],[Ce,\"transformDirectedAngleMarker\"]].map(([s,a])=>({match:[we,s],build:(u,c)=>u.NativeFunction(a,c)}));function i(){if(r){let s=t.slice(1);throw EC(n,Ml(e,s),{blockExport:e.areAllArgsConstant(s)})}else throw ts(n,Ml(e,t),{blockExport:e.areAllArgsConstant(t)})}return Zs(e,t,i,o)}function j_(e,t,n){let r=WT(e,t[0]),o=WT(e,t[1]),i=[r,o,e.ConstantOfType(x,n,0)];if(gt(e,r,Te)){if(gt(e,o,Te))return e.NativeFunction(\"circleCircleIntersection\",i);if(gt(e,o,ue))return e.NativeFunction(\"circleArcIntersection\",i);if(gt(e,o,Ee))return e.NativeFunction(\"circleLineIntersection\",i)}if(gt(e,r,ue)){if(gt(e,o,Te))return e.NativeFunction(\"arcCircleIntersection\",i);if(gt(e,o,ue))return e.NativeFunction(\"arcArcIntersection\",i);if(gt(e,o,Ee))return e.NativeFunction(\"arcLineIntersection\",i)}if(gt(e,r,Ee)){if(gt(e,o,Te))return e.NativeFunction(\"lineCircleIntersection\",i);if(gt(e,o,ue))return e.NativeFunction(\"lineArcIntersection\",i);if(gt(e,o,Ee))return e.NativeFunction(\"lineLineIntersection\",i)}throw V(\"Invalid intersection types\")}function aW(e,[t,n],[r,o]){let{chunk:i,scope:s}=e,a=i.getInstruction(r).valueType,u=i.getInstruction(o).valueType,c=d=>{var m,f;return(f=s.getParseNode(d))!=null?f:(m=Ta(e,d))==null?void 0:m.def},l=Ka(t)?c(t._symbol):t,p=Ka(n)?c(n._symbol):n;if(!(!l||!p))return oL({getGeometryTree:d=>Wx(d).tree,lookup:c,isPointOrListOfPoints:d=>{if(hl(d))return!1;let m=Fe(e,d);return ae(i.getInstruction(m).valueType,D)},resolvesTo:(d,m)=>{var f;return((f=Ta(e,d))==null?void 0:f.def)===m}},l,a,p,u)}function uW(e,t){var u;let{policy:n,scope:r}=e,o=t._body,i=r.childScope(),s=[];for(let c=0;c<t._assignments.length;c++){let l=t._assignments[c]._lhs,p;if(l instanceof $e)p=l._symbol;else throw Ay();let d=t._assignments[c].args[1],m=(u=Ta(e,p))==null?void 0:u.def;if(m){if(m.type===\"FunctionDefinition\")throw Ly(p);if(n.assignmentForbidden(p))throw wy(p)}let f=Fe(e,d);i.addDynamicBinding(p,f,d),s.push(p)}return Fe({...hs(e,i),substitutionContext:e.substitutionContext.with(r,e.recursiveFunctionContext,s)},o)}var kB={points:Yt,lines:Ri,segments:Er,polygons:wr,circles:_i,arcs:Co,angles:Ur,directedangles:zr,rays:Eo,vectors:Di};function cW(e,t){var u;let{chunk:n}=e,r=(u=Ta(e,\"construction\"))==null?void 0:u.def;if(!r)throw V(\"Expected 'construction' to be defined in the frame\");if(r.type!==\"Construction\"||!(r instanceof X))throw V(`Expected construction node but found ${r.type}}`);if(!Ka(t))throw V(`Expected identifier but found ${t.type}`);let o=t._symbol;if(!(o in kB))throw Vi(\"construction\");let i=kB[o];if(r.args.length===0)return n.ConstantOfType(i,[],0);let s=rt(i),a=[];for(let c of r.args)try{let l=Fe(e,c);n.getInstruction(l).valueType===s&&a.push(l)}catch(l){if(l instanceof M)continue;throw l}return n.List(a)}function vg(e,t){let n=e.args,r=e instanceof On?e._symbol:e instanceof Pl||e instanceof Il?e.args[0]._symbol:void 0;if(r&&t.definitions[r])return!1;if(e instanceof No){let a=[vg(e.args[0],t)||new Un(!0)],u=vg(e.args[1],t),c=vg(e.args[2],t);return u&&a.push(u),c&&a.push(c),a.length===1?!1:(a.length===2&&a.push(a[1]),new No(a))}let o=[],i=!1;for(let s of n){let a=vg(s,t);if(a===!1){i=!0;continue}o.push(a)}return i?!1:e.copyWithArgs(o)}function eG(e,t,n){let{chunk:r,scope:o}=e,i={},s=fe(n.definitions);for(let f of s){let g=n.definitions[f];if(g instanceof M)throw g;i[f]=g}let a=t._argSymbols.map(f=>Fe(e,new Mn(f))),u=new J_(i,n.baseCases);try{nG(e,u,t,a)}catch(f){throw u.isUnconditionallyRecursive&&f instanceof M&&!f.blocksExport?s.length>1||tG(t,t._expression)?_p(s,{suggestAlternativeFunctionName:!1}):gb(s):f}let c={},l={},p={},d=o.childScope();for(let f of s){let g=u.returnTypes[f];if(g===void 0)throw V(`Could not infer the return type for recursive function ${f}.`);let y=u.argTypes[f];if(y===void 0)throw V(`Could not infer the argument types for recursive function ${f}.`);l[f]={argTypes:y},c[f]=g,p[f]=r.FunctionHeader(f,g,l[f],i[f]._argSymbols),d.addLexicalBinding(f,p[f])}let m=[];for(let f of s)m.push(p[f]);for(let f of m)r.getInstruction(f).recursionGroup=m;for(let f of s){let g=d.childScope(),y=i[f],h=p[f],b=r.BeginFunction([h]);for(let E=0;E<y._argSymbols.length;E++){let S=y._argSymbols[E],C=r.BlockVar(l[f].argTypes[E],[b]);g.addLexicalBinding(S,C)}let T={...hs(e,g),recursiveFunctionContext:{type:\"compile-general\",fnSymbols:s}},I=rG(T,y,n.baseCases,Fe(T,y._expression));if(r.getInstruction(I).valueType!==c[f])throw ts(f,pu(r,a),{blockExport:r.areAllArgsConstant(a)});I=io(r,I),r.EndFunction([b,I])}if(u.isUnconditionallyRecursive){let f=r.getRecursiveFunctionMetadata(p[t._symbol]),g=f==null?void 0:f.recursiveStructure;throw g!=null&&g.canIterate?new Error(\"Programming error: expected canIterate==false for unconditionally recursive function.\"):g!=null&&g.maxRecursiveCallOffsets&&s.every(y=>g.maxRecursiveCallOffsets[y]===0)?_p(s,{suggestAlternativeFunctionName:!1}):nC(s,{type:\"missing-non-recursive-branch\",recursionGroup:s,recursiveStructure:g})}return r.FunctionCall([p[t._symbol],...a])}function tG(e,t){return t instanceof On&&t._symbol===e._symbol?t.args.every((n,r)=>n instanceof $e&&n._symbol===e._argSymbols[r]):t.args.every(n=>tG(e,n))}function nG(e,t,n,r){let{chunk:o}=e,i=t.returnTypes[n._symbol],s=t.argTypes[n._symbol];if(i!==void 0&&s!==void 0)return{returnType:i,argTypes:s};let a=n._argSymbols.length,u=r.length;if(a!==u)throw Xa(n._symbol,a,u,{includeUsageExample:!0});let c=r.map(m=>o.getInstruction(m).valueType),l=`${n._symbol}:${c.join(\",\")}:${Object.keys(t.returnTypes).join(\",\")}`;if(t.stack.includes(l))return t.isUnconditionallyRecursive=!0,{returnType:x,argTypes:c};t.stack.push(l);let p=o.getReturnIndex(),d;return kT(e,m=>{var E;let f=vg(n._expression,t),g=n._symbol,y=(E=t.baseCases[g])!=null?E:[],h={...m,recursiveFunctionContext:t},b=h.scope,T=[];for(let S=0;S<n._argSymbols.length;S++){let C=n._argSymbols[S],v=o.SymbolicVar(c[S]);T.push(v),b.addLexicalBinding(C,v)}if(!t.baseCaseTypes.hasOwnProperty(g)){let S,C,v,_=!0;for(let L of y){let k=L.getRef();if(!L.specifiedArg.valid||!k)continue;let Q=new Mn(k),w=Fe(h,Q);v||(v=Q);let q=o.getInstruction(w),K=q.valueType;if(De(q)||(_=!1),S===void 0)S=L.specifiedArg.argIndex;else if(S!==L.specifiedArg.argIndex)throw my();let le=C;if(le===void 0)C=K;else{let te=Ic(le,K);if(te===void 0)throw dy({blockExport:_});C=te}}t.baseCaseTypes[g]=C,t.firstValidBaseCaseIdentifiers[g]=v}let I=t.firstValidBaseCaseIdentifiers[g];if(f||I){let S=rG(h,n,t.baseCases,Fe(h,f||I)),{someArgBroadcasts:C,inferredArgTypes:v}=lW(o,T,p,S);if(c=v,d=o.getInstruction(S).valueType,C){if(!W(d))throw V(`TODO: expected a list type but found ${tt(d)}`);d=rt(d)}let _=t.returnTypes[n._symbol];if(_!==void 0&&d!==_)throw dy({blockExport:!1});t.argTypes[n._symbol]=v,t.returnTypes[n._symbol]=d}}),kT(e,m=>{let f={...m,recursiveFunctionContext:t},g=f.scope;for(let T=0;T<n._argSymbols.length;T++){let I=n._argSymbols[T],E=o.SymbolicVar(c[T]);g.addLexicalBinding(I,E)}let y=Fe(f,n._expression);t.stack.pop();let h=o.getInstruction(y).valueType,b=d===void 0?h:Ic(d,h);if(b===void 0)throw V(`Mismatched return types: ${d&&tt(d)} vs ${tt(h)}`);return t.returnTypes[n._symbol]=b,{returnType:b,argTypes:c}})}function lW(e,t,n,r){let o=[],u=[];for(let p=0;p<r-n;p++)u.push(0);if(e.getInstruction(r).type===48){u.push(1);for(let p=r;p>=0;p--){let d=u[p-n];if(d===0)continue;let m=e.getInstruction(p);if(me(m)){if(m.type===24?o.push(p):m.type===23&&o.pop(),(m.type===48||m.type===24)&&(u[m.args[0]-n]|=d),m.type===39||m.type===41||m.type===40)for(let f of o){let y=e.getInstruction(f).args[0];if(m.args[1]===y){u[m.args[0]-n]|=d;break}}if(o.length>0){let f=o[o.length-1],y=e.getInstruction(f).args[0];for(let h of m.args)h>=y&&(u[h-n]|=d);m.type===33&&m.args[0]>=y&&(u[m.args[0]-n]|=2)}}}}let c=[],l=!1;for(let p=0;p<t.length;p++){let d=t[p],m=e.getInstruction(d).valueType;if(u[d-n]&2){if(!W(m))throw V(`Expected list type but found ${tt(m)}`);l=!0,c.push(rt(m))}else c.push(m)}return{inferredArgTypes:c,someArgBroadcasts:l}}function rG(e,t,n,r){let{chunk:o}=e,i=!0,s=n[t._symbol];for(let a of s){let u=a.specifiedArg;if(!u.valid)continue;let c=t._argSymbols[u.argIndex],l=Fe(e,new Mn(c)),p=o.Equal([l,o.Constant(u.argValue,1)]),d=Fe(e,a),m=o.getInstruction(d);De(m)||(i=!1);let f=o.getInstruction(d).valueType,g=o.getInstruction(r).valueType;if(Ic(f,g)===void 0)throw dy({blockExport:i});r=o.Piecewise([p,d,r])}return r}function pW(e){return e.type===\"Constant\"&&Number.isInteger(e.asValue())}function HB(e,t,n,r){var d;let{policy:o,chunk:i,scope:s}=e,a=new O.Identifier(t),u,c;r.length===1?(u=n[0],c=r[0]):(u=new O.ParenSeq(n),du(i,o,u,r),c=QB(e,r));let p=[(d=s.getSymbol(t))!=null?d:Fe(e,a),c];return du(i,o,new O.Multiply([a,u]),p),i.Multiply(p)}function dW(e,t){var d,m;let{chunk:n}=e;if(t._symbol!==\"ttest\"||t.args.length!==1||t.args[0].type!==\"Identifier\"||t.args[0]._symbol===void 0)return;let r=(d=Ta(e,t.args[0]._symbol))==null?void 0:d.def;if((r==null?void 0:r.type)!==\"RegressionParameter\")return;let o=r,i=o._optimizedRegression;if(!i.scaleFactors)throw tC();let s=o.asCompilerValue(),a=i.residuals.asValue(),u=a.length-Object.keys(i.parameters).length,c=(m=i.scaleFactors[o._symbol])==null?void 0:m.asValue(),l=0;for(let f of a)l+=f*f;let p=Math.sqrt(c*(l/u));return n.TupleOfType(sn,{pointEstimate:n.Constant(s,1),standardError:n.Constant(p,1),dof:n.Constant(u,1)})}function uu(e,t,n,r){var i;if(e.type===\"Error\")return e;let o=tf({policy:t,frame:n,wrapInList:r&&r.wrapInList,coerceToNumber:r&&r.coerceToNumber},e);return t.isGeometryEnabled()&&o.argNames.some(s=>s[0]===\"$\")?PM():(i=o.getError())!=null?i:new _n(o)}var js=function(e,t=\"\",n=0){let r=Array(n+1).join(\"  \"),o=r+\"  \";return`[\n`+o+e.map(i=>i.repr(t,n+1)).join(`,\n`+o)+`\n`+r+\"]\"},gr=function(e,t=\"\"){return t=t||\"\",\"new \"+t+e};X.prototype.repr=function(e,t){return gr(this.type,e)+\"(\"+js(this.args,e,t)+\")\"};Ro.prototype.repr=function(e,t){return e===\"nodes.\"?`new nodes[\"${this.type}\"](`+js(this.args,e,t)+\")\":gr(this.type,e)+\"(\"+js(this.args,e,t)+\")\"};O.IRExpression.prototype.repr=function(e,t=0){let n=Array(t+1).join(\"  \"),r=n+\"  \",o=this._chunk.print().split(`\n`);return o.pop(),gr(this.type,e)+\"(`\\n\"+r+o.join(`\n`+r)+`\n`+n+\"`)\"};O.DoubleInequality.prototype.repr=function(e,t=0){let n=Array(t+1).join(\"  \"),r=n+\"  \";return gr(this.type,e)+`([\n`+r+this.args[0].repr(e,t+1)+`,\n`+r+\"'\"+this.args[1]+`',\n`+r+this.args[2].repr(e,t+1)+`,\n`+r+\"'\"+this.args[3]+`',\n`+r+this.args[4].repr(e,t+1)+`\n`+n+\"])\"};O.ComparatorChain.prototype.repr=function(e,t=0){return gr(this.type,e)+\"([\"+this.symbols.map(n=>`'${n}'`).join(\",\")+`],\n`+js(this.args,e,t)+\")\"};$e.prototype.repr=function(e){return gr(this.type,e)+\"('\"+this._symbol+\"')\"};$n.prototype.repr=function(e){return gr(this.type,e)+\"(\"+this.asValue()+\")\"};O.ExtendSeed.prototype.repr=function(e,t){return gr(this.type,e)+\"('\"+this.tag+\"', \"+js(this.args,e,t)+\")\"};O.Seed.prototype.repr=function(e){return gr(this.type,e)+\"(\"+this.asValue()+\")\"};On.prototype.repr=function(e,t){return gr(this.type,e)+\"('\"+this._symbol+\"', \"+js(this.args,e,t)+\")\"};O.RecursiveFunctionBaseCase.prototype.repr=function(e,t){return this.originalNode.repr(e,t)};Bn.prototype.repr=function(e,t){return gr(this.type,e)+\"(\"+new O.Identifier(this._symbol).repr(e,t)+\", \"+this._expression.repr(e,t)+\")\"};O.AssignmentImport.prototype.repr=function(e,t){return gr(this.type,e)+\"(\"+new O.Identifier(this._symbol).repr(e,t)+`, qualifiedName(${this.importFrom.frameID},${this.importFrom.frameID})`+(this.defaultDefinition?`, default=\n`+js([this.defaultDefinition],e,t):\"\")+\")\"};O.ConcreteAssignmentImport.prototype.repr=function(e,t){return gr(this.type,e)+\"(\"+new O.Identifier(this._symbol).repr(e,t)+`, qualifiedName(${this.importFrom.frameID},${this.importFrom.frameID})resolvedTo=\n`+js([this.resolvedRawNode,this.concrete],e,t)+\")\"};O.Regression.prototype.repr=O.Equation.prototype.repr=O.CallAssignment.prototype.repr=function(e,t){return gr(this.type,e)+\"(\"+this._lhs.repr(e,t)+\", \"+this._rhs.repr(e,t)+\")\"};O.FunctionDefinition.prototype.repr=function(e,t){return gr(this.type,e)+\"(\"+new O.Identifier(this._symbol).repr(e,t)+\", \"+js(this._argSymbols.map(n=>new O.Identifier(n)),e,t)+\", \"+this._expression.repr(e,t)+\")\"};O.Error.prototype.repr=function(e,t){return gr(this.type,e)+\"('\"+this._msg+\"')\"};O.Derivative.prototype.repr=function(e,t){return gr(this.type,e)+\"('\"+this._symbol+\"', \"+js(this.args,e,t)+\")\"};O.SolvedEquation.prototype.repr=function(e,t){return gr(this.type,e)+\"('\"+this._symbol+\"', \"+this._expression.repr(e,t)+\")\"};O.OptimizedRegression.prototype.repr=function(e,t=0){return gr(this.type,e)+\"(\"+JSON.stringify(this.parameters)+\", \"+JSON.stringify(this.residuals)+\", \"+JSON.stringify(this.statistics)+\", \"+this.model.repr(e,t+1)+\", \"+JSON.stringify({isModelValid:this.isModelValid,residualVariable:this.residualVariable,residualSuggestionId:this.residualSuggestionId,shouldSuggestLogMode:this.shouldSuggestLogMode,isLinear:this.isLinear,parameterWarning:this.parameterWarning})+\")\"};O.Table.prototype.repr=function(e,t){return gr(this.type,e)+\"(\"+js(this.columns,e,t)+\", \"+this.tableFrameID+\")\"};O.TableColumn.prototype.repr=function(e,t){return gr(this.type,e)+\"(\"+this.header.repr(e,t)+\", \"+this.length+\", \"+js(this.values,e,t)+\", \"+this.tableFrameID+\", \"+this.columnIndex+\")\"};O.TableColumnValue.prototype.repr=function(e,t){return\"TableColumnValue(\"+js(this.rawArgs,e,t)+\", \"+this.headerSymbol+\")\"};O.Image.prototype.repr=function(e,t=0){let n=Array(t+1).join(\"  \"),r=n+\"  \";return gr(this.type,e)+`({\n`+r+\"center: \"+this.center.repr(e,t+1)+`,\n`+r+\"radianAngle: \"+this.radianAngle.repr(e,t+1)+`,\n`+r+\"width: \"+this.width.repr(e,t+1)+`,\n`+r+\"height: \"+this.height.repr(e,t+1)+`},\n`+r+\"opacity: \"+this.opacity.repr(e,t+1)+`,\n`+r+JSON.stringify(this.moveStrategy)+`\n`+n+\"})\"};O.Ticker.prototype.repr=function(e,t=0){let n=Array(t+1).join(\"  \"),r=n+\"  \";return gr(this.type,e)+`({\n`+r+\"handler: \"+this.handler.repr(e,t+1)+`,\n`+r+\"minStep: \"+this.minStep.repr(e,t+1)+`\n`+n+\"})\"};O.Slider.prototype.repr=function(e,t=0){let n=Array(t+1).join(\"  \"),r=n+\"  \";return gr(this.type,e)+`({\n`+r+\"sliderAssignment: \"+this.sliderAssignment.repr(e,t+1)+`,\n`+r+\"sliderMin: \"+(this.sliderMin&&this.sliderMin.repr(e,t+1))+`,\n`+r+\"sliderMax: \"+(this.sliderMax&&this.sliderMax.repr(e,t+1))+`,\n`+r+\"sliderStep: \"+(this.sliderStep&&this.sliderStep.repr(e,t+1))+`},\n`+n+\")\"};O.ImaginaryUnit.prototype.repr=function(e){return gr(this.type,e)+\"()\"};O.RegressionParameter.prototype.repr=function(e,t){return gr(this.type,e)+\"('\"+this._symbol+\"', \"+this._optimizedRegression.repr(e,t)+\")\"};var QT=function(e,t){return e.map(n=>n.substitute(t))};$e.prototype.substitute=function(e){return e[this._symbol]?e[this._symbol]:this};On.prototype.substitute=function(e){let t=e[this._symbol];if(t){if(t.type===\"Identifier\")return new O.FunctionCall(t,QT(this.args,e));if(t.type===\"Constant\")return new O.Multiply([t,this.args.length===1?this.args[0].substitute(e):new O.Constant(NaN)])}return X.prototype.substitute.call(this,e)};$n.prototype.substitute=function(e){return this};X.prototype.substitute=function(e){return this.copyWithArgs(QT(this.args,e))};O.Derivative.prototype.substitute=function(e){let t=e[this._symbol];if(t){if(t.type===\"Identifier\")return new O.Derivative(t,QT(this.args,e));throw new Error(\"Cannot substitute for a derivative variable with a non-Identifier\")}return new O.Derivative(this._symbol,QT(this.args,e))};X.prototype.simpleFunctionExpression=function(){return this};Bn.prototype.simpleFunctionExpression=function(){return this._expression};O.FunctionDefinition.prototype.simpleFunctionExpression=function(){return this._expression};O.RecursiveFunctionBaseCase.prototype.simpleFunctionExpression=function(){return this._expression};O.Equation.prototype.simpleFunctionExpression=O.CallAssignment.prototype.simpleFunctionExpression=function(){return this.asComparator().simpleFunctionExpression()};function oc(e){return e>=100}function oG(e,t){switch(e){case 106:return 200;case 107:return 201;case 108:return 202;case 103:return 214;case 130:return 215;case 112:return 209;case 113:return 210;case 110:switch(t){case\"z\":return 206;case\"theta\":return 205;case\"x\":case\"y\":case\"r\":case\"_implicit\":return 211;default:return 10}case 109:switch(t){case\"r\":return 203;case\"theta\":return 204;case\"x\":case\"y\":case\"z\":case\"_implicit\":return 213;default:return 10}case 111:switch(t){case\"theta\":return 207;case\"phi\":return 208;case\"x\":case\"y\":case\"z\":case\"rho\":case\"_implicit\":return 212;default:return 10}default:return 10}}function nR(e){switch(e){case 123:case 122:case 121:case 120:case 124:case 126:case 127:return!0;default:return!1}}function Bl(e){return e===26||e===4}function Ofe(e){return Bl(e)||e===3||e===25}function iG(e){let t=[];for(let r=0;r<e.instructionsLength();r++)t.push(!1);let n=[];t[e.getReturnIndex()]=!0;for(let r=e.instructionsLength()-1;r>=0;r--){if(!t[r])continue;let o=e.getInstruction(r);if(o.type===2&&n.push(e.argNames[r]),!me(o))continue;let i=Ol(e,o)?[o.args[1]]:o.args;for(let s of i)t[s]=!0}return n}var{sin:mW,cos:fW}=Math,lt=class e{constructor(t=0,n=0,r=0){this.x=t;this.y=n;this.z=r}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}set(t,n,r){return this.x=t,this.y=n,this.z=r,this}clone(){return new e(this.x,this.y,this.z)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}isZero(){return this.x===0&&this.y===0&&this.z===0}isFinite(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.z)}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this}multiply(t){return this.x*=t,this.y*=t,this.z*=t,this}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){return this.multiply(1/this.magnitude()),this}cross(t){return this.crossVectors(this,t)}crossVectors(t,n){let r=t.x,o=t.y,i=t.z,s=n.x,a=n.y,u=n.z;return this.x=o*u-i*a,this.y=i*s-r*u,this.z=r*a-o*s,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}rotateAroundAxis(t,n){let r=yW(t,n);return new e(r[0]*this.x+r[1]*this.y+r[2]*this.z,r[3]*this.x+r[4]*this.y+r[5]*this.z,r[6]*this.x+r[7]*this.y+r[8]*this.z)}};function yW(e,t){let n=e.x,r=e.y,o=e.z,i=mW(t),s=fW(t),a=1-s;return[a*n*n+s,a*n*r+i*o,a*n*o-i*r,a*r*n-i*o,a*r*r+s,a*r*o+i*n,a*o*n+i*r,a*o*r-i*n,a*o*o+s]}function nf(e,t,n,r,o,i,s){let[a,u,c]=[new lt,new lt,new lt],[l,p,d]=[new lt,new lt,new lt],[m,f]=[new lt,new lt];for(let g=0;g<e.length/3;g++){let y=e[3*g],h=e[3*g+1],b=e[3*g+2];a.set(t[3*y],t[3*y+1],t[3*y+2]),u.set(t[3*h],t[3*h+1],t[3*h+2]),c.set(t[3*b],t[3*b+1],t[3*b+2]),l.set(n[3*y],n[3*y+1],n[3*y+2]),p.set(n[3*h],n[3*h+1],n[3*h+2]),d.set(n[3*b],n[3*b+1],n[3*b+2]),m.subVectors(c,a),f.subVectors(a,u);let T=m.cross(f).normalize();if(!(l.dot(T)>s&&p.dot(T)>s&&d.dot(T)>s)||l.dot(p)<0||l.dot(d)<0||p.dot(d)<0){let E=t.length/3;e[3*g]=E,e[3*g+1]=E+1,e[3*g+2]=E+2,t.push(a.x,a.y,a.z),t.push(u.x,u.y,u.z),t.push(c.x,c.y,c.z),n.push(T.x,T.y,T.z),n.push(T.x,T.y,T.z),n.push(T.x,T.y,T.z),r.push(r[2*y],r[2*y+1]),r.push(r[2*h],r[2*h+1]),r.push(r[2*b],r[2*b+1]);let S=o;if(o>0){for(let C=0;C<S;C++)i.push(i[S*y+C]);for(let C=0;C<S;C++)i.push(i[S*h+C]);for(let C=0;C<S;C++)i.push(i[S*b+C])}}}}function eI(e){let{triangles:t,normalDirHints:n}=e.triangulate(),{extraAttrCount:r}=e,o=e.getVertexCount(),i=new Array(o),s=new Array(o*3),a=[],u=!1,c=new Array(o*3),l=new Array(o*2),p=new Array(o*r),d=[],m=0;function f(y){let h=e.getVertex(y);if(!h)return null;let b=n[y],T=b?e.hintedNormal(y,b):e.getNormal(y);T?(c[3*m]=T[0],c[3*m+1]=T[1],c[3*m+2]=T[2]):(a[m]=!0,u=!0,c[3*m]=0,c[3*m+1]=0,c[3*m+2]=0),s[3*m]=h[0],s[3*m+1]=h[1],s[3*m+2]=h[2];let I=e.getUV(y);if(l[2*m]=I[0],l[2*m+1]=I[1],r>0)for(let E=0;E<r;E++)p[r*m+E]=e.getExtraAttr(y,E);return m++}function g(y){let h=i[y];return h===void 0?i[y]=f(y):h}for(let y=0;y<t.length;y+=3){let h=t[y],b=t[y+1],T=t[y+2],I=g(h),E=g(b),S=g(T);if(I===null||E===null||S===null)continue;d.push(I,E,S);let C=a[I],v=a[E],_=a[S];if(C||v||_){let L=s,k=c,Q=new lt(L[3*I],L[3*I+1],L[3*I+2]),w=new lt(L[3*E],L[3*E+1],L[3*E+2]),q=new lt(L[3*S],L[3*S+1],L[3*S+2]),K=new lt().subVectors(q,Q),le=new lt().subVectors(Q,w),te=K.cross(le);if(!te.isFinite())continue;C&&(k[3*I+0]+=te.x,k[3*I+1]+=te.y,k[3*I+2]+=te.z),v&&(k[3*E+0]+=te.x,k[3*E+1]+=te.y,k[3*E+2]+=te.z),_&&(k[3*S+0]+=te.x,k[3*S+1]+=te.y,k[3*S+2]+=te.z)}}if(s.length=m*3,c.length=m*3,l.length=m*2,u)for(let y=0;y<m;y++){if(!a[y])continue;let h=c[3*y],b=c[3*y+1],T=c[3*y+2],I=Math.sqrt(h*h+b*b+T*T);c[3*y]=h/I,c[3*y+1]=b/I,c[3*y+2]=T/I}return nf(d,s,c,l,r,p,0),{positions:s,normals:c,faces:d,uvs:l,resolved:!0,extraAttrs:p}}var iR=class{constructor({resolution:t,uRange:n,vRange:r,du:o,dv:i,extraAttrCount:s}){this.normalDirHints=[];this.isVertexAtCreaseCache=[];this.triangles=[];this.edgeVertices=new Map;this.edgeNormalVertices=new Map;this.finiteVertices=new Map;this.resolution=t,this.uRange=n,this.vRange=r,this.du=o,this.dv=i,this.extraAttrCount=s,this.duSquared=o*o,this.dvSquared=i*i}addVertex(t){return this.normalDirHints.push(void 0),this.isVertexAtCreaseCache.push(void 0),this._addVertex(t)}jumpAlongEdge(t,n){let r=0;if(t>n){let u=t;t=n,n=u,r=1}let o=n*n+t,i=this.edgeVertices.get(o);if(i===null)return;if(i!==void 0)return[i[r],i[1-r]];let s=this.findJumpBetweenTwoSamples(t,n);if(s===void 0){this.edgeVertices.set(o,null);return}let a=[this.addVertex(s[0]),this.addVertex(s[1])];return this.edgeVertices.set(o,a),[a[r],a[1-r]]}edgeNormalFeature(t,n){let r=0;if(t>n){let u=t;t=n,n=u,r=1}let o=n*n+t,i=this.edgeNormalVertices.get(o);if(i!==void 0)return this.flipEdgeNormalFeature(i,r);let s=this.findCreaseBetweenTwoSamples(t,n),a=s===null?null:s.type===\"high-curvature\"?{type:\"high-curvature\",pos:this.addVertex(s.pos)}:{type:\"crease\",left:this.addVertex(s.left),right:this.addVertex(s.right)};return this.edgeNormalVertices.set(o,a),this.flipEdgeNormalFeature(a,r)}flipEdgeNormalFeature(t,n){return(t==null?void 0:t.type)===\"crease\"?{type:\"crease\",left:n===0?t.left:t.right,right:n===0?t.right:t.left}:t}findCreaseBetweenTwoSamples(t,n){let i=this.getUV(t),s=this.getUV(n),a=this.getNormal(t),u=this.getNormal(n),c=b=>{var I;let T=Ar(i,s,b);return(I=this.fn(T).normal)!=null?I:[NaN,NaN,NaN]};if(!a||!u)return null;let l=s[0]-i[0],p=s[1]-i[1],d=this.du,m=this.dv,f=(Math.abs(d*l)+Math.abs(m*p))/(l*l+p*p),g=bh(0,a,1,u,c,.01,2*f,.9);if(g===void 0)return null;if(typeof g==\"number\")return g<f||g>1-f?null:{type:\"high-curvature\",pos:this.fn(Ar(i,s,g))};let y=g[0],h=g[1];return y<f||h>1-f?null:(y-=f,h+=f,y<=1e-8&&(y=1e-8),h>=1-1e-8&&(h=1-1e-8),{type:\"crease\",left:this.fn(Ar(i,s,y)),right:this.fn(Ar(i,s,h))})}isVertexAtCrease(t){let n=this.isVertexAtCreaseCache[t];if(n!==void 0)return n;let r=this._isVertexAtCrease(t);return this.isVertexAtCreaseCache[t]=r,r}finiteAlongEdge(t,n){if(t>n){let a=t;t=n,n=a}let r=n*n+t,o=this.finiteVertices.get(r);if(o!==void 0)return o;let i=this.findFiniteBetweenTwoSamples(t,n);if(i===void 0)return;let s=this.addVertex(i);return this.finiteVertices.set(r,s),s}pushTriangle(t,n,r){this.isDegenerate(t,n,r)||this.triangles.push(t,n,r)}getTriangles(){return this.triangles}},gW=1e-4,hW=.99,of=.9999;function rR(e,t){return!e||!t?!0:e[0]*t[0]+e[1]*t[1]+e[2]*t[2]<hW}var sR=class extends iR{hintVec(t,n){let r=this.getUV(t),o=this.getUV(n);return _O(MO(o,r),gW)}hintNormal1(t,n,r){let o=this.hintVec(t,n),i=this.hintVec(t,r);this.normalDirHints[t]=[o,i]}hintNormals2(t,n){let r=this.hintVec(t,n),o=oR(r);this.normalDirHints[t]=[KT(r),o],this.normalDirHints[n]=[o,KT(o)]}hintNormals2Finite(t,n){let r=this.hintVec(t,n),o=KT(r);this.normalDirHints[t]=this.normalDirHints[n]=[o,oR(o)]}hintNormalFirstBad(t,n){let r=this.hintVec(t,n);this.normalDirHints[t]=[KT(r),oR(r)]}hintNormalSecondBad(t,n){let r=this.hintVec(n,t);this.normalDirHints[n]=[xW(r),bW(r)]}},aR=class extends sR{oneJump(t,n,r,o){let i=o[0],s=o[1];this.pushTriangle(i,r,t),this.pushTriangle(s,n,r),this.hintNormalFirstBad(i,r),this.hintNormalSecondBad(r,s)}oneJumpOneExtra(t,n,r,o,i){let s=o[0],a=o[1];this.pushTriangle(s,r,t),this.pushTriangle(s,i,r),this.pushTriangle(a,n,i),this.hintNormalFirstBad(s,r),this.hintNormalSecondBad(r,a)}oneJumpOneExtra2(t,n,r,o,i){let s=o[0],a=o[1];this.pushTriangle(a,n,r),this.pushTriangle(a,r,i),this.pushTriangle(s,i,t),this.hintNormalFirstBad(s,r),this.hintNormalSecondBad(r,a)}oneJumpTwoExtra(t,n,r,o,i,s){let a=o[0],u=o[1];this.pushTriangle(a,s,t),this.pushTriangle(a,i,s),this.pushTriangle(i,r,s),this.pushTriangle(u,n,i)}twoJumps(t,n,r,o,i){let s=o[0],a=o[1],u=i[0],c=i[1];this.pushTriangle(s,r,t),this.pushTriangle(s,c,r),this.pushTriangle(a,n,u),this.hintNormals2(s,c),this.hintNormals2(u,a)}twoJumpsOneExtraPoint(t,n,r,o,i,s){let a=o[0],u=o[1],c=i[0],l=i[1];this.pushTriangle(a,s,t),this.pushTriangle(a,l,s),this.pushTriangle(l,r,s),this.pushTriangle(u,n,c),this.hintNormals2(a,l),this.hintNormals2(c,u)}oneExtraPoint(t,n,r,o){this.pushTriangle(o,r,t),this.pushTriangle(o,n,r)}oneExtraPointOneVertexCrease(t,n,r,o){let i=this.copyVertex(r);this.pushTriangle(o,i,t),this.pushTriangle(o,n,i),this.hintNormal1(i,t,n)}twoExtraPoints(t,n,r,o,i){this.pushTriangle(o,r,t),this.pushTriangle(o,i,r),this.pushTriangle(o,n,i)}threeExtraPoints(t,n,r,o,i,s){this.pushTriangle(o,s,t),this.pushTriangle(o,i,s),this.pushTriangle(o,n,i),this.pushTriangle(i,r,s)}oneEdgeJumpOneVertexCrease(t,n,r,o){let i=o[0],s=o[1],a=this.copyVertex(r),u=this.copyVertex(r);this.pushTriangle(i,a,t),this.pushTriangle(s,n,u),this.hintNormals2(u,s),this.hintNormals2(i,a)}threeVertexCrease(t,n,r){let o=this.copyVertex(t),i=this.copyVertex(n),s=this.copyVertex(r);this.pushTriangle(o,i,s),this.hintNormals2(o,i),this.hintNormalFirstBad(s,o)}twoVertexCrease(t,n,r){let o=this.copyVertex(t),i=this.copyVertex(n);this.pushTriangle(o,i,r),this.hintNormals2(o,i)}oneVertexCrease(t,n,r){let o=this.copyVertex(t);this.pushTriangle(o,n,r),this.hintNormal1(o,n,r)}pushTrianglesBasedOnJumps(t,n,r){let o=this.jumpAlongEdge(t,n),i=this.jumpAlongEdge(n,r),s=this.jumpAlongEdge(r,t);if(o&&i&&s){let y=this.getUV(t),h=this.getUV(n),b=this.getUV(r),T=this.addVertex(this.fn(Ar(y,Ar(h,b,.5),1e-4))),I=this.addVertex(this.fn(Ar(h,Ar(b,y,.5),1e-4))),E=this.addVertex(this.fn(Ar(b,Ar(y,h,.5),1e-4))),S=this.jumpAlongEdge(T,I),C=this.jumpAlongEdge(I,E),v=this.jumpAlongEdge(E,T);if(S&&C&&v)return;t=T,n=I,r=E,o=S,i=C,s=v}let a=this.getNormal(t),u=this.getNormal(n),c=this.getNormal(r),l=this.isVertexAtCrease(t),p=this.isVertexAtCrease(n),d=this.isVertexAtCrease(r),m,f,g;if(!l&&!p&&!o&&rR(a,u)){let y=this.edgeNormalFeature(t,n);y!==null&&(y.type===\"high-curvature\"?m=y.pos:o=[y.left,y.right])}if(!p&&!d&&!i&&rR(u,c)){let y=this.edgeNormalFeature(n,r);y!==null&&(y.type===\"high-curvature\"?f=y.pos:i=[y.left,y.right])}if(!d&&!l&&!s&&rR(c,a)){let y=this.edgeNormalFeature(r,t);y!==null&&(y.type===\"high-curvature\"?g=y.pos:s=[y.left,y.right])}o&&i?g?this.twoJumpsOneExtraPoint(t,n,r,o,i,g):this.twoJumps(t,n,r,o,i):i&&s?m?this.twoJumpsOneExtraPoint(n,r,t,i,s,m):this.twoJumps(n,r,t,i,s):s&&o?f?this.twoJumpsOneExtraPoint(r,t,n,s,o,f):this.twoJumps(r,t,n,s,o):o?d?this.oneEdgeJumpOneVertexCrease(t,n,r,o):f&&g?this.oneJumpTwoExtra(t,n,r,o,f,g):f?this.oneJumpOneExtra(t,n,r,o,f):g?this.oneJumpOneExtra2(t,n,r,o,g):this.oneJump(t,n,r,o):i?l?this.oneEdgeJumpOneVertexCrease(n,r,t,i):g&&m?this.oneJumpTwoExtra(n,r,t,i,g,m):g?this.oneJumpOneExtra(n,r,t,i,g):m?this.oneJumpOneExtra2(n,r,t,i,m):this.oneJump(n,r,t,i):s?p?this.oneEdgeJumpOneVertexCrease(r,t,n,s):m&&f?this.oneJumpTwoExtra(r,t,n,s,m,f):m?this.oneJumpOneExtra(r,t,n,s,m):f?this.oneJumpOneExtra2(r,t,n,s,f):this.oneJump(r,t,n,s):l&&p&&d?this.threeVertexCrease(t,n,r):l&&p?this.twoVertexCrease(t,n,r):p&&d?this.twoVertexCrease(n,r,t):d&&l?this.twoVertexCrease(r,t,n):l?f?this.oneExtraPointOneVertexCrease(n,r,t,f):this.oneVertexCrease(t,n,r):p?g?this.oneExtraPointOneVertexCrease(r,t,n,g):this.oneVertexCrease(n,r,t):d?m?this.oneExtraPointOneVertexCrease(t,n,r,m):this.oneVertexCrease(r,t,n):m&&f&&g?this.threeExtraPoints(t,n,r,m,f,g):m&&f?this.twoExtraPoints(t,n,r,m,f):f&&g?this.twoExtraPoints(n,r,t,f,g):g&&m?this.twoExtraPoints(r,t,n,g,m):m?this.oneExtraPoint(t,n,r,m):f?this.oneExtraPoint(n,r,t,f):g?this.oneExtraPoint(r,t,n,g):this.pushTriangle(t,n,r)}oneNonFinite(t,n,r){let o=this.finiteAlongEdge(n,r),i=this.finiteAlongEdge(t,r);i!==void 0&&o!==void 0&&(this.pushTrianglesBasedOnJumps(o,t,n),this.pushTrianglesBasedOnJumps(o,i,t),this.hintNormals2Finite(o,i))}twoNonFinite(t,n,r){let o=this.finiteAlongEdge(t,n),i=this.finiteAlongEdge(t,r);o!==void 0&&i!==void 0&&(this.pushTrianglesBasedOnJumps(t,o,i),this.hintNormals2Finite(o,i))}pushTriangles(t,n,r){let o=this.allowVertex(t),i=this.allowVertex(n),s=this.allowVertex(r);o&&i&&s?this.pushTrianglesBasedOnJumps(t,n,r):o&&i?this.oneNonFinite(t,n,r):i&&s?this.oneNonFinite(n,r,t):s&&o?this.oneNonFinite(r,t,n):o?this.twoNonFinite(t,n,r):i?this.twoNonFinite(n,r,t):s&&this.twoNonFinite(r,t,n)}},rf=class extends aR{triangulate(){let t=this.resolution,{uRange:n,vRange:r,fn:o}=this,i=[n.min,r.min],s=[n.max,r.max],a=t-1,u=new Array(t*t);u[0]=this.addVertex(o(i));for(let c=1;c<=a;c++)u[c]=this.addVertex(o(gh(i,s,[c/a,0]))),u[t*c]=this.addVertex(o(gh(i,s,[0,c/a])));for(let c=1;c<=a;c++)for(let l=1;l<=a;l++){let p=u[(l-1)*t+(c-1)],d=u[l*t+(c-1)],m=u[(l-1)*t+c],f=this.addVertex(o(gh(i,s,[c/a,l/a])));u[l*t+c]=f,(c+l)%2===0?(this.pushTriangles(p,f,d),this.pushTriangles(p,m,f)):(this.pushTriangles(p,m,d),this.pushTriangles(m,f,d))}return{triangles:this.getTriangles(),normalDirHints:this.normalDirHints}}};function bW(e){let t=e[0]*Math.SQRT1_2,n=e[1]*Math.SQRT1_2;return[t+n,n-t]}function KT(e){let t=e[0]*Math.SQRT1_2,n=e[1]*Math.SQRT1_2;return[t-n,t+n]}function xW(e){return[e[1],-e[0]]}function oR(e){return[-e[1],e[0]]}var ze=class{constructor(t,n){this.min=t;this.max=n}get width(){return this.max-this.min}};var uR=class extends rf{constructor(n,r,o,i,s,a=[0,1,2]){let u=r.width/1e8,c=o.width/1e8;super({resolution:s,uRange:r,vRange:o,du:u,dv:c,extraAttrCount:0});this.vertices=[];this.fn=n=>{let r=this._fn(n),o=this.tangentInForcedDf(n,[this.du,0],r),i=this.tangentInForcedDf(n,[0,this.dv],r),s=Sd([this.du,0,o],[0,this.dv,i]);return{uv:n,f:r,normal:[s[this.perm0],s[this.perm1],s[this.perm2]],dfEast:o,dfNorth:i}};this._fn=l=>n(l[0],l[1]),this.paddedOutputDomain=new ze(i.min-5*i.width,i.max+5*i.width),this.jumpTolerance=i.width/1e3,this.perm0=a[0],this.perm1=a[1],this.perm2=a[2]}getVertexCount(){return this.vertices.length}getUV(n){return this.vertices[n].uv}getNormal(n){return this.vertices[n].normal}_addVertex(n){return this.vertices.push(n)-1}copyVertex(n){return this.addVertex(this.vertices[n])}getF(n){return this.vertices[n].f}getDfNorth(n){return this.vertices[n].dfNorth}getDfEast(n){return this.vertices[n].dfEast}tangentInForcedDf(n,r,o){let i=wf(n,r);return this._fn(i)-o}tangentInForced(n,r,o){let i=wf(n,r);return[r[0],r[1],this._fn(i)-o]}getExtraAttr(){throw new Error(\"Unexpected getExtraAttr call in explicit-surface.ts\")}_isVertexAtCrease(n){let r=this.getUV(n),o=this.getDfEast(n),i=this.getDfNorth(n),s=this.getF(n),a=this.tangentInForcedDf(r,[-this.du,0],s);if((-this.duSquared+a*o)/Math.sqrt((this.duSquared+a*a)*(this.duSquared+o*o))>-of)return!0;let l=this.tangentInForcedDf(r,[0,-this.dv],s);return(-this.dvSquared+i*l)/Math.sqrt((this.dvSquared+i*i)*(this.dvSquared+l*l))>-of}hintedNormal(n,r){let o=this.getUV(n),i=this.getF(n),s=Sd(this.tangentInForced(o,r[0],i),this.tangentInForced(o,r[1],i));return Cd(...s)?[s[this.perm0],s[this.perm1],s[this.perm2]]:this.getNormal(n)}getVertex(n){if(!this.allowVertex(n))return;let r=this.getF(n),o=this.getUV(n);return[this.perm0===2?r:o[this.perm0],this.perm1===2?r:o[this.perm1],this.perm2===2?r:o[this.perm2]]}findJumpBetweenTwoSamples(n,r){let o=this.getUV(n),i=this.getF(n),s=0,a=this.getUV(r),u=this.getF(r),c=1,l=d=>this._fn(Ar(o,a,d));if(!isFinite(i)||!isFinite(u))return;let p=qO(s,i,c,u,l,this.jumpTolerance);if(p)return[this.fn(Ar(o,a,Ls(p[0],0,1e-5))),this.fn(Ar(o,a,Ls(p[1],1,1e-5)))]}findFiniteBetweenTwoSamples(n,r){let o=this.getUV(n),i=this.getF(n),s=this.getUV(r),a=this.getF(r),u=p=>{let d=this._fn(p);return d<this.paddedOutputDomain.min||d>this.paddedOutputDomain.max?NaN:d},c=p=>u(Ar(o,s,p)),l=ti(0,this.paddedOutputDomain.min<i&&i<this.paddedOutputDomain.max?i:NaN,1,this.paddedOutputDomain.min<a&&a<this.paddedOutputDomain.max?a:NaN,c);if(l!==void 0)return this.fn(Ar(o,s,l))}allowVertex(n){let r=this.getF(n);return this.paddedOutputDomain.min<r&&r<this.paddedOutputDomain.max}isDegenerate(n,r,o){let i=this.getUV(n),s=this.getUV(r),a=this.getUV(o),u=this.uRange.width*1e-6,c=this.vRange.width*1e-6;return Math.abs(i[0]-s[0])<u&&Math.abs(i[1]-s[1])<c||Math.abs(s[0]-a[0])<u&&Math.abs(s[1]-a[1])<c||Math.abs(a[0]-i[0])<u&&Math.abs(a[1]-i[1])<c}};function tI(e,t,n,r,o,i=[0,1,2]){let s=new uR(e,t,n,r,o,i);return eI(s)}var Js=class{constructor(t){this.xtolerance=t.xtolerance||t.tolerance||0,this.ytolerance=t.ytolerance||t.tolerance||0,this.ztolerance=t.ztolerance||t.tolerance||0,this.map=t.map,this.segments=[],this.segment=[],this.pivotPoint=void 0,this.pendingPoint=void 0}colinear(t,n,r){let o=this.map(t),i=this.map(n),s=this.map(r),a=ia(s[0],s[1],s[2]||0,o[0],o[1],o[2]||0,i[0],i[1],i[2]||0);if(a<1)return!1;let u=[o[0]+a*(i[0]-o[0]),o[1]+a*(i[1]-o[1]),o.length===3?o[2]+a*(i[2]-o[2]):0];return Math.abs(s[0]-u[0])<=this.xtolerance&&Math.abs(s[1]-u[1])<=this.ytolerance&&(o.length===2||Math.abs(s[2]-u[2])<=this.ztolerance)}addPoint(t){if(this.dimensions=t.length,this.xtolerance<0&&this.ytolerance<0&&(this.dimensions===2||this.ztolerance<0)){this.segment.push.apply(this.segment,t);return}if(!this.segment.length){this.segment.push.apply(this.segment,t);return}let n=this.dimensions===2?[this.segment[this.segment.length-2],this.segment[this.segment.length-1]]:[this.segment[this.segment.length-3],this.segment[this.segment.length-2],this.segment[this.segment.length-1]];if(!(t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2])){if(!this.pivotPoint||!this.pendingPoint){this.pivotPoint=t,this.pendingPoint=t;return}(!this.colinear(n,this.pivotPoint,t)||ws(n[0]-t[0],n[1]-t[1],(n[2]||0)-(t[2]||0))<ws(n[0]-this.pendingPoint[0],n[1]-this.pendingPoint[1],(n[2]||0)-(this.pendingPoint[2]||0)))&&(this.flushPending(),this.pivotPoint=t),this.pendingPoint=t}}flushPending(){this.pendingPoint&&(this.segment.push.apply(this.segment,this.pendingPoint),this.pivotPoint=void 0,this.pendingPoint=void 0)}breakSegment(){this.flushPending(),this.segment.length>(this.dimensions||2)&&this.segments.push(this.segment),this.segment=[]}getSegments(){return this.breakSegment(),this.segments}finish(){return{segments:this.getSegments(),resolved:!0}}};var aG=5,TW=Math.pow(2,14),{abs:Ia}=Math;function Dg(e,t){let n=IW(e,t);return{segments:n.contours.strokeSegments,fillSegments:n.contours.fillSegments,resolved:n.quadTree.resolved}}function IW(e,t){let n=Math.pow(2,-aG),r=sG(t,n),o=sG(t,2*n),i=PW(e,r,o),s=RW(i.root,e,r),a=wW(s,e,r);return{paddedDomain:r,rootDomain:o,quadTree:i,triangles:s,contours:a}}function af(e,t,n){return{x:e,y:t,z:n}}function Gl(e,t,n){return{x:e,y:t,isZero:n}}function nI(e,t,n){return{vertices:[e,t,n],visited:!1,next:void 0}}function sG(e,t){let{mathToPixels:n}=e,r=n.interpolateX(e.xmin,e.xmax,-t),o=n.interpolateX(e.xmax,e.xmin,-t),i=n.interpolateY(e.ymin,e.ymax,-t),s=n.interpolateY(e.ymax,e.ymin,-t);return{...e,xmin:r,ymin:i,xmax:o,ymax:s}}function Mg(e,t){return{depth:e,vertices:t,children:void 0,center:void 0}}function cR(e,t,n){e.center=uG(e.vertices[0],e.vertices[1],e.vertices[2],e.vertices[3],t,n)}function PW(e,t,n){let r=SW(e,n),o=[],i=[];i.push(r);let s=1,a=!0;e:for(;i.length;){let u=o;o=i,i=u;let c;for(;c=o.pop();)if(EW(c,e,t)){if(CW(c,e,t),!c.children){a=!1;break e}if(i.push(c.children[0]),i.push(c.children[1]),i.push(c.children[2]),i.push(c.children[3]),s+=3,s>=TW){a=!1;break e}}else cR(c,e,t)}for(let u=0;u<o.length;u++)cR(o[u],e,t);for(let u=0;u<i.length;u++)cR(i[u],e,t);return{root:r,resolved:a}}function SW(e,t){let n=t.xmin,r=t.xmax,o=t.ymin,i=t.ymax;return Mg(0,[sf(n,i,e),sf(r,i,e),sf(r,o,e),sf(n,o,e)])}function CW(e,t,n){let r=e.depth+1,o=e.vertices[0],i=e.vertices[1],s=e.vertices[2],a=e.vertices[3],u=fi(o,i,t,n),c=fi(i,s,t,n),l=fi(s,a,t,n),p=fi(a,o,t,n),d=fi(o,s,t,n);e.children=[Mg(r,[o,u,d,p]),Mg(r,[u,i,c,d]),Mg(r,[d,c,s,l]),Mg(r,[p,d,l,a])]}function EW(e,t,n){if(e.depth<aG)return!0;if(MW(e,n)||vW(e,n))return!1;let r=e.vertices[0],o=e.vertices[1],i=e.vertices[2],s=e.vertices[3];if(isNaN(r.z)&&isNaN(o.z)&&isNaN(i.z)&&isNaN(s.z))return!1;if(isNaN(r.z)||isNaN(o.z)||isNaN(i.z)||isNaN(s.z))return!0;let a=uG(r,o,i,s,t,n),u=sc(r,o,t,n),c=sc(o,i,t,n),l=sc(i,s,t,n),p=sc(s,r,t,n);return Ul(r,u,t,n)||Ul(o,u,t,n)||Ul(o,c,t,n)||Ul(i,c,t,n)||Ul(i,l,t,n)||Ul(s,l,t,n)||Ul(s,p,t,n)||Ul(r,p,t,n)||ql(r,u,a,t,n)||ql(u,o,a,t,n)||ql(o,c,a,t,n)||ql(c,i,a,t,n)||ql(i,l,a,t,n)||ql(l,s,a,t,n)||ql(s,p,a,t,n)||ql(p,r,a,t,n)}function ql(e,t,n,r,o){if(e.z>0==t.z>0&&t.z>0==n.z>0)return!1;let i=0;isFinite(e.z)&&(i=Math.max(i,Math.abs(e.z))),isFinite(t.z)&&(i=Math.max(i,Math.abs(t.z))),isFinite(n.z)&&(i=Math.max(i,Math.abs(n.z)));let s=32*Number.EPSILON*i,a,u,c,l;if(e.z>0==t.z>0){if(a=fi(e,t,r,o),a.z>0!=e.z>0)return!0;u=ic(e,n,r,o,s),c=ic(t,n,r,o,s),l=ic(a,n,r,o,s)}else if(t.z>0==n.z>0){if(a=fi(t,n,r,o),a.z>0!=t.z>0)return!0;u=ic(t,e,r,o,s),c=ic(n,e,r,o,s),l=ic(a,e,r,o,s)}else{if(a=fi(n,e,r,o),a.z>0!=n.z>0)return!0;u=ic(n,t,r,o,s),c=ic(e,t,r,o,s),l=ic(a,t,r,o,s)}let{mathToPixels:p,map3d:d}=o;if(d){let m=d(l.x,l.y),f=d(u.x,u.y),g=d(c.x,c.y);return EO(m[0],m[1],m[2],f[0],f[1],f[2],g[0],g[1],g[2])>o.tolerance}else{let[m,f]=p.mapCoordinatePair([l.x,l.y]),[g,y]=p.mapCoordinatePair([u.x,u.y]),[h,b]=p.mapCoordinatePair([c.x,c.y]);return CO(m,f,g,y,h,b)>o.tolerance}}function Ul(e,t,n,r){if(isNaN(e.z)&&isNaN(t.z))return!1;if(isNaN(e.z)||isNaN(t.z))return e.z>0||t.z>0;let i=4*fi(e,t,n,r).z-t.z-3*e.z,s=1e-4,a=(n((1-s)*e.x+s*t.x,(1-s)*e.y+s*t.y)-e.z)/s,u=Math.max(Math.abs(e.z),Math.abs(t.z));return Math.abs(i-a)>.125*u}function vW(e,t){let{mathToPixels:n,map3d:r,tolerance:o}=t;if(r)return!1;{let[i,s]=n.mapCoordinatePair([e.vertices[1].x,e.vertices[1].y]),[a,u]=n.mapCoordinatePair([e.vertices[0].x,e.vertices[0].y]),[c,l]=n.mapCoordinatePair([e.vertices[3].x,e.vertices[3].y]);if(Ia(i-a)<10*o||Ia(u-l)<10*o)return!0}return!1}function MW(e,t){return e.vertices[0].x<t.xmin||e.vertices[0].y>t.ymax||e.vertices[2].x>t.xmax||e.vertices[2].y<t.ymin}function uf(e,t){return e.x<t.xmin||e.x>t.xmax||e.y<t.ymin||e.y>t.ymax}function sf(e,t,n){return af(e,t,n(e,t))}function fi(e,t,n,r){let{mathToPixels:o}=r;return sf(o.interpolateX(e.x,t.x,.5),o.interpolateY(e.y,t.y,.5),n)}function sc(e,t,n,r){if(uf(e,r)||uf(t,r))return fi(e,t,n,r);if(isNaN(e.z)||isNaN(t.z))return _W(e,t,n,r);if(e.z>0!=t.z>0)return fi(e,t,n,r);let o=.01,i=n((1-o)*e.x+o*t.x,(1-o)*e.y+o*t.y)-e.z,s=t.z-n(o*e.x+(1-o)*t.x,o*e.y+(1-o)*t.y);return isNaN(i)||isNaN(s)||i>0==s>0?fi(e,t,n,r):cG(af(e.x,e.y,i),af(t.x,t.y,s),n,r)}function uG(e,t,n,r,o,i){let s=sc(e,n,o,i);return e.z>0==n.z>0&&s.z>0!=e.z>0||(s=sc(t,r,o,i),t.z>0==r.z>0&&s.z>0!=t.z>0)?s:fi(e,n,o,i)}function cG(e,t,n,r){if(isNaN(e.z))return t;if(isNaN(t.z))return e;if(!isFinite(e.z)&&!isFinite(t.z))return fi(e,t,n,r);if(isFinite(e.z))if(isFinite(t.z)){let o=1-e.z/t.z,i=1-t.z/e.z;return sf(e.x/o+t.x/i,e.y/o+t.y/i,n)}else return e;else return t}function ic(e,t,n,r,o){let{mathToPixels:i,map3d:s}=r,a=e.x,u=t.x,c=e.y,l=t.y,p=e.z,d=t.z;if(uf(e,r)||uf(t,r)){let m=fi(e,t,n,r);return Gl(m.x,m.y,!1)}if(s){let[m,f,g]=s(a,c),[y,h,b]=s(u,l);for(;Ia(m-y)>r.tolerance||Ia(f-h)>r.tolerance||Ia(g-b)>r.tolerance;){let T=.5*(a+u),I=.5*(c+l),E=n(T,I);if(E>0==p>0?(a=T,c=I,p=E):(u=T,l=I,d=E),(T===a||T===u)&&(I===c||I===l))break;[m,f,g]=s(a,c),[y,h,b]=s(u,l)}}else{let[m,f]=i.mapCoordinatePair([a,c]),[g,y]=i.mapCoordinatePair([u,l]);for(;Ia(m-g)>r.tolerance||Ia(f-y)>r.tolerance;){let h=.5*(a+u),b=.5*(c+l),T=n(h,b);T>0==p>0?(a=h,c=b,p=T):(u=h,l=b,d=T),[m,f]=i.mapCoordinatePair([a,c]),[g,y]=i.mapCoordinatePair([u,l])}}if(isNaN(p))return Gl(u,l,!1);if(isNaN(d))return Gl(a,c,!1);{let m=Math.abs(p),f=Math.abs(d);if(m<o&&f>100*o)return 1/m>=f?Gl(a,c,!0):Gl(u,l,!1);if(f<o&&m>100*o)return 1/f>=m?Gl(u,l,!0):Gl(a,c,!1);let g=cG(af(a,c,p),af(u,l,d),n,r),y=p===0||d===0||g.z===0||g.z>=p==d>=g.z&&Math.abs(g.z)<1e250;return Gl(g.x,g.y,y)}}function _W(e,t,n,r){let{mathToPixels:o,map3d:i}=r;if(isNaN(e.z)===isNaN(t.z))return fi(e,t,n,r);if(isNaN(e.z)){let p=e;e=t,t=p}let s=e.x,a=t.x,u=e.y,c=t.y,l=e.z;if(i){let[p,d,m]=i(s,u),[f,g,y]=i(a,c);for(;Ia(p-f)>r.tolerance||Ia(d-g)>r.tolerance||Ia(m-y)>r.tolerance||isNaN(p)||isNaN(f);){let h=.5*(s+a),b=.5*(u+c),T=n(h,b);if(isNaN(T)===isNaN(l)?(s=h,u=b,l=T):(a=h,c=b),(h===s||h===a)&&(b===u||b===c))break;[p,d,m]=i(s,u),[f,g,y]=i(a,c)}}else{let[p,d]=o.mapCoordinatePair([s,u]),[m,f]=o.mapCoordinatePair([a,c]);for(;Ia(p-m)>r.tolerance||Ia(d-f)>r.tolerance;){let g=.5*(s+a),y=.5*(u+c),h=n(g,y);isNaN(h)===isNaN(l)?(s=g,u=y,l=h):(a=g,c=y),[p,d]=o.mapCoordinatePair([s,u]),[m,f]=o.mapCoordinatePair([a,c])}}return af(s,u,l)}function RW(e,t,n){let r={triangles:[],edgeCache:{},domain:n,fn:t};return _g(e,r),r.triangles}function _g(e,t){e.children&&(_g(e.children[0],t),_g(e.children[1],t),_g(e.children[2],t),_g(e.children[3],t),zl(e.children[0],e.children[1],t),zl(e.children[3],e.children[2],t),kl(e.children[1],e.children[2],t),kl(e.children[0],e.children[3],t))}function zl(e,t,n){e.children&&t.children?(zl(e.children[1],t.children[0],n),zl(e.children[2],t.children[3],n)):e.children?(zl(e.children[1],t,n),zl(e.children[2],t,n)):t.children?(zl(e,t.children[0],n),zl(e,t.children[3],n)):DW(e,t,n)}function kl(e,t,n){e.children&&t.children?(kl(e.children[2],t.children[1],n),kl(e.children[3],t.children[0],n)):e.children?(kl(e.children[2],t,n),kl(e.children[3],t,n)):t.children?(kl(e,t.children[1],n),kl(e,t.children[0],n)):NW(e,t,n)}function DW(e,t,n){if(!e.center||!t.center)return;let r,o;e.depth>=t.depth?(r=sc(e.vertices[1],e.vertices[2],n.fn,n.domain),o=iI(e.vertices[1],t.center,e.vertices[2],e.center,r)):(r=sc(t.vertices[0],t.vertices[3],n.fn,n.domain),o=iI(t.vertices[0],t.center,t.vertices[3],e.center,r)),lG(o,n.edgeCache,n.domain);for(let i=0;i<4;i++)n.triangles.push(o[i])}function NW(e,t,n){if(!e.center||!t.center)return;let r,o;e.depth>=t.depth?(r=sc(e.vertices[3],e.vertices[2],n.fn,n.domain),o=iI(e.vertices[2],t.center,e.vertices[3],e.center,r)):(r=sc(t.vertices[1],t.vertices[0],n.fn,n.domain),o=iI(t.vertices[1],t.center,t.vertices[0],e.center,r)),lG(o,n.edgeCache,n.domain);for(let i=0;i<4;i++)n.triangles.push(o[i])}function iI(e,t,n,r,o){return[nI(e,o,t),nI(t,o,n),nI(n,o,r),nI(r,o,e)]}function Rg(e,t,n){return e.z>0&&!uf(e,n)&&(!(t.z>0)||uf(t,n))}function rI(e,t){return\"\"+e.x+\",\"+e.y+\",\"+t.x+\",\"+t.y}function lG(e,t,n){oI(e[0],e[1],e[2],rI(e[1].vertices[2],e[1].vertices[0]),t,n),oI(e[1],e[2],e[3],rI(e[2].vertices[0],e[2].vertices[2]),t,n),oI(e[2],e[3],e[0],rI(e[3].vertices[2],e[3].vertices[0]),t,n),oI(e[3],e[0],e[1],rI(e[0].vertices[0],e[0].vertices[2]),t,n)}function oI(e,t,n,r,o,i){let s=t.vertices[0],a=t.vertices[1],u=t.vertices[2];Rg(a,u,i)&&(t.next=n),Rg(s,a,i)&&(t.next=e),Rg(u,s,i)&&AW(t,r,o),Rg(s,u,i)&&OW(t,r,o)}function OW(e,t,n){n[t]?n[t].next=e:n[t]=e}function AW(e,t,n){n[t]?e.next=n[t]:n[t]=e}function wW(e,t,n){let{tolerance:r,mathToPixels:o,map3d:i}=n,s;if(i){let a={tolerance:r,map:u=>i(u[0],u[1])};s={fillAccumulator:new Js(a),strokeAccumulator:new Js(a),fn:t,domain:n}}else{let a={tolerance:r,map:u=>o.mapCoordinatePair(u)};s={fillAccumulator:new Js(a),strokeAccumulator:new Js(a),fn:t,domain:n}}for(let a=0;a<e.length;a++){let u=e[a];u.next&&!u.visited&&LW(u,s)}return{strokeSegments:s.strokeAccumulator.finish().segments,fillSegments:s.fillAccumulator.finish().segments}}function LW(e,t){for(;;){let n=e.vertices[0],r=e.vertices[1],o=e.vertices[2],i=0;isFinite(n.z)&&(i=Math.max(i,Math.abs(n.z))),isFinite(r.z)&&(i=Math.max(i,Math.abs(r.z))),isFinite(o.z)&&(i=Math.max(i,Math.abs(o.z)));let s=32*Number.EPSILON*i;if(lR(n,r,t,s),lR(r,o,t,s),lR(o,n,t,s),e.visited||!e.next)break;e.visited=!0,e=e.next}t.strokeAccumulator.breakSegment(),t.fillAccumulator.breakSegment()}function lR(e,t,n,r){if(Rg(e,t,n.domain)){let o=ic(e,t,n.fn,n.domain,r);n.fillAccumulator.addPoint([o.x,o.y]),o.isZero?n.strokeAccumulator.addPoint([o.x,o.y]):n.strokeAccumulator.breakSegment()}}function pR(e,t){return{type:\"linear\",s:e,t}}function pG(e,t){return{type:\"logarithmic\",s:e,t}}function dG(e,t){return{type:\"exponential\",s:e,t}}function dR(){return pR(1,0)}function FW([e,t],[n,r]){let o=(r-n)/(t-e),i=(n+r)/2-o*(t+e)/2;return pR(o,i)}function VW([e,t],[n,r]){let o=(r-n)/(Math.log(t)-Math.log(e)),i=(Math.log(t)*n-Math.log(e)*r)/(Math.log(t)-Math.log(e));return pG(o,i)}function BW([e,t],[n,r]){let o=(Math.log(r)-Math.log(n))/(t-e),i=(t*Math.log(n)-e*Math.log(r))/(t-e);return dG(o,i)}function mR(e,t,n){switch(e){case\"linear\":return FW(t,n);case\"logarithmic\":return VW(t,n);case\"exponential\":return BW(t,n);default:{let r=e;throw new Error(\"Unexpected scale type: \"+r)}}}function fR({type:e,s:t,t:n},r){switch(e){case\"linear\":return t*r+n;case\"logarithmic\":return t*Math.log(r)+n;case\"exponential\":return Math.exp(t*r+n);default:let o=e;throw new Error(\"Unexpected scale type: \"+o)}}function yR(e,t,n,r){switch(e){case\"linear\":return GW(t,n,r);case\"logarithmic\":return Math.pow(t,1-r)*Math.pow(n,r);case\"exponential\":return r===0?t:r===1?n:Math.log((1-r)*Math.exp(t)+r*Math.exp(n));default:let o=e;throw new Error(\"Unexpected scale type: \"+o)}}function GW(e,t,n){return(1-n)*e+n*t}function gR({type:e,s:t,t:n}){switch(e){case\"linear\":return pR(1/t,-n/t);case\"logarithmic\":return dG(1/t,-n/t);case\"exponential\":return pG(1/t,-n/t);default:let r=e;throw new Error(\"Unexpected scale type: \"+r)}}function hR(e){switch(e){case\"linear\":return\"linear\";case\"logarithmic\":return\"exponential\";case\"exponential\":return\"logarithmic\";default:let t=e;throw new Error(\"Unexpected scale type: \"+t)}}function sI({width:e,height:t}){return{left:0,right:e,top:0,bottom:t}}function aI({xmin:e,xmax:t,ymin:n,ymax:r}){return{left:e,right:t,bottom:n,top:r}}var Hl=class e{constructor(t,n){this.xScale=t,this.yScale=n}static fromRects(t,n,{xAxisScale:r,yAxisScale:o}){return new e(mR(r,[t.left,t.right],[n.left,n.right]),mR(o,[t.bottom,t.top],[n.bottom,n.top]))}static fromRectsInverse(t,n,{xAxisScale:r,yAxisScale:o}){return e.fromRects(n,t,{xAxisScale:hR(r),yAxisScale:hR(o)})}inverse(){return new e(gR(this.xScale),gR(this.yScale))}mapX(t){return fR(this.xScale,t)}mapY(t){return fR(this.yScale,t)}mapPoint({x:t,y:n}){return{x:this.mapX(t),y:this.mapY(n)}}mapCoordinatePair([t,n]){return[this.mapX(t),this.mapY(n)]}mapRect({top:t,bottom:n,left:r,right:o}){return{left:this.mapX(r),right:this.mapX(o),bottom:this.mapY(n),top:this.mapY(t)}}interpolateX(t,n,r){return yR(this.xScale.type,t,n,r)}interpolateY(t,n,r){return yR(this.yScale.type,t,n,r)}dangerouslyGetXScaleFactor(){if(this.xScale.type!==\"linear\")throw new Error(`Cannot get scale factor a '${this.xScale.type}' scale`);return this.xScale.s}dangerouslyGetYScaleFactor(){if(this.yScale.type!==\"linear\")throw new Error(`Cannot get scale factor a '${this.yScale.type}' scale`);return this.yScale.s}};function uI(e,t,n,r){let o=[],i=[],s=[],a=[],{xmin:u,xmax:c,ymin:l,ymax:p,zmin:d,zmax:m}=n,f,g,y;switch(r){case\"z\":f={xmin:u,xmax:c,ymin:l,ymax:p},g=(I,E)=>[I[E],I[E+1],d,I[E],I[E+1],m],y=(I,E)=>e(I,E,0);break;case\"y\":f={xmin:u,xmax:c,ymin:d,ymax:m},g=(I,E)=>[I[E],l,I[E+1],I[E],p,I[E+1]],y=(I,E)=>e(I,0,E);break;case\"x\":f={xmin:d,xmax:m,ymin:l,ymax:p},g=(I,E)=>[u,I[E+1],I[E],c,I[E+1],I[E]],y=(I,E)=>e(0,E,I);break}let h=sI({width:500,height:500}),b={...f,mathToPixels:Hl.fromRects(aI(f),h,{xAxisScale:\"linear\",yAxisScale:\"linear\"}),tolerance:Pa},T=Dg(y,b);for(let I of T.segments)for(let E=0;E<I.length/2;E++){let[S,C,v,_,L,k]=g(I,2*E);if(o.push(S,C,v,_,L,k),s.push(S,C,_,L),t){let Q=t(S,C,v),w=t(_,L,k);i.push(Q[0],Q[1],Q[2]),i.push(w[0],w[1],w[2])}else i.push(0,0,0),i.push(0,0,0);if(E>0){let Q=o.length/3-4;a.push(Q,Q+1,Q+2),a.push(Q+2,Q+1,Q+3)}}return nf(a,o,i,s,0,[],.7),{positions:o,normals:i,faces:a,uvs:s,resolved:T.resolved,extraAttrs:[]}}var cI=[[1,2,4,21,20,18],[0,1,3,20,19,18],[2,6,7,25,21,18],[5,6,8,25,22,18],[5,9,11,23,22,18],[0,9,10,23,19,18],[10,12,14,24,23,19],[3,12,13,24,20,19],[4,13,15,24,21,20],[15,7,16,25,24,21],[11,17,14,24,23,22],[17,8,16,25,24,22]],To=[0,1,0,2,0,3,1,2,2,3,0,4,0,7,3,7,4,7,0,5,1,5,4,5,1,6,2,6,5,6,3,6,6,7,4,6,0,8,1,8,2,8,3,8,4,8,5,8,6,8,7,8],fG=[[0,2,3,8],[0,1,2,8],[0,3,7,8],[0,4,7,8],[0,4,5,8],[0,1,5,8],[1,5,6,8],[1,2,6,8],[2,3,6,8],[3,6,7,8],[4,5,6,8],[4,6,7,8]],yG=[[0,0,0],[0,1,0],[1,1,0],[1,0,0],[0,0,1],[0,1,1],[1,1,1],[1,0,1],[.5,.5,.5]],bR=[[1,2,4],[4,20,21],[2,18,21],[1,18,20],[0,1,3],[3,19,20],[0,18,19],[2,6,7],[7,21,25],[6,18,25],[5,6,8],[8,22,25],[5,18,22],[5,9,11],[11,22,23],[9,18,23],[0,9,10],[10,19,23],[10,12,14],[14,23,24],[12,19,24],[3,12,13],[13,20,24],[4,13,15],[15,21,24],[15,7,16],[16,24,25],[11,17,14],[17,22,24],[17,8,16]],xR=[];for(let e=0;e<30;e++){let t=bR[e],n=new Set;for(let r of t)n.add(To[r*2]),n.add(To[r*2+1]);xR[e]=[...n]}var gG=[[0,3,2,1],[4,6,3,5],[7,2,9,8],[10,12,9,11],[13,12,15,14],[16,6,15,17],[18,17,20,19],[21,5,20,22],[23,1,22,24],[25,24,8,26],[27,14,28,19],[29,28,11,26]],UW=1<<31,zW=1<<30,mG=1<<24,Qp=1<<24,Qs=1<<24,Sa=65536,Ca=256,Ea=1;function hG(e,t,n){return n*Sa+t*Ca+e*Ea}var kW={0:0*mG,1:Ca,2:Ea+Ca,3:Ea,4:Sa,5:Ca+Sa,6:Ea+Ca+Sa,7:Ea+Sa,8:8*mG};function bG(e,t){return UW+e+kW[t]}var HW={3:2*Qs+Ca,4:0*Qs+Ea,7:5*Qs+Ea,8:2*Qs+Sa,10:5*Qs+Ca,11:0*Qs+Sa,12:6*Qs+Ca,13:5*Qs+Ea+Ca,14:2*Qs+Ca+Sa,15:9*Qs+Ea,16:0*Qs+Ea+Sa,17:1*Qs+Sa};function Ng(e,t){var n;return zW+e+((n=HW[t])!=null?n:Qs*t)}var $W={18:10*Qp+Ca,21:7*Qp+Ca,23:16*Qp+Ea,25:13*Qp+Ea,27:4*Qp+Sa,29:0*Qp+Sa};function TR(e,t){var n;return e+((n=$W[t])!=null?n:Qp*t)}var cf=class{constructor(t,n,r,o,i){this.PAConstructor=t;this.x=n;this.y=r;this.z=o;this.gridsize=i;this.i=0;this.j=0;this.k=0;this.cubeVertex=new Array(9);this.cubeVertexValue=new this.PAConstructor(9);if(i>250)throw new Error(\"Programming Error: resolution should be clamped well below 250.\");this.size=new lt(this.x.width/i,this.y.width/i,this.z.width/i)}loopOverUnitCubes(t){let n=this.gridsize,r=n+1,o=new lI(this.x.min,this.y.min,this.z.min,this.size.x,this.size.y,this.size.z,n+1,n+1,n+1),i=new lI(this.x.min+this.size.x/2,this.y.min+this.size.y/2,this.z.min+this.size.z/2,this.size.x,this.size.y,this.size.z,n,n,n),s=o.setupArray(this.PAConstructor),a=o.setupArray(this.PAConstructor),u=i.setupArray(this.PAConstructor);this.evaluateArray(a,o,0);for(let c=0;c<n;c++){this.k=c,[s,a]=[a,s],this.evaluateArray(a,o,c+1),this.evaluateArray(u,i,c);for(let l=0;l<n;l++){this.j=l;for(let p=0;p<n;p++){this.i=p;let d=l*r+p;this.cubeVertexValue.setFrom(0,s,d),this.cubeVertexValue.setFrom(1,s,d+r),this.cubeVertexValue.setFrom(2,s,d+r+1),this.cubeVertexValue.setFrom(3,s,d+1),this.cubeVertexValue.setFrom(4,a,d),this.cubeVertexValue.setFrom(5,a,d+r),this.cubeVertexValue.setFrom(6,a,d+r+1),this.cubeVertexValue.setFrom(7,a,d+1),this.cubeVertexValue.setFrom(8,u,l*n+p),t()}}}}evaluateArray(t,n,r){let o=n.z0+r*n.dz;for(let i=0;i<n.numX;i++)for(let s=0;s<n.numY;s++){let a=n.x0+i*n.dx,u=n.y0+s*n.dy;this.setAt(t,s*n.numX+i,a,u,o)}}setVertexPositions(){for(let t=0;t<9;t++){let n=yG[t];this.cubeVertex[t]=[this.x.min+(this.i+n[0])*this.size.x,this.y.min+(this.j+n[1])*this.size.y,this.z.min+(this.k+n[2])*this.size.z]}}},lI=class{constructor(t,n,r,o,i,s,a,u,c){this.x0=t;this.y0=n;this.z0=r;this.dx=o;this.dy=i;this.dz=s;this.numX=a;this.numY=u;this.numZ=c}setupArray(t){return new t(this.numX*this.numY)}};var pI=class{constructor(t){this.length=t;this.n=1;this.buffer=new Float64Array(t)}set(t,n){this.buffer[t]=n}get(t){return this.buffer[t]}setFrom(t,n,r){if(n.n!==this.n)throw new Error(\"Programming Error: Mismatched dimensions\");this.set(t,n.get(r))}},dI=class{constructor(t){this.length=t;this.n=2;this.buffer=new Float64Array(t*2)}set(t,n,r){this.buffer[t*2]=n,this.buffer[t*2+1]=r}getX(t){return this.buffer[t*2]}getY(t){return this.buffer[t*2+1]}setFrom(t,n,r){if(n.n!==this.n)throw new Error(\"Programming Error: Mismatched dimensions\");this.set(t,n.getX(r),n.getY(r))}};function Og(e,t,n,r,o,i=100){if(isFinite(r)||([r,o]=[o,r],[t,n]=[n,t]),isFinite(o))return IR(e,t,n,r,o,i);for(;;){let s=Fs(t,n,.5),a=e(...s);if(a===0)return s;if(!isFinite(a))n=s,o=a;else if(r<0==a<0)t=s,r=a;else return n=s,o=a,IR(e,t,n,r,o,i);if(i*=.5,i<1)return}}function xG(e,t,n,r,o,i=100){if(isFinite(r)||([r,o]=[o,r],[t,n]=[n,t]),!isFinite(o))for(;;){let s=Fs(t,n,.5),a=e(...s);if(a===0)return{posNeg:s};if(!isFinite(a))n=s,o=a;else if(r<0==a<0)t=s,r=a;else if(r>0){n=s,o=a;break}else return{posNeg:PR(e,s,t,a,r,i),posNaN:YW(e,s,n,i)};if(i*=.5,i<1){let u=Fs(t,n,.5);return r>0?{posNaN:u}:{}}}return{posNeg:IR(e,t,n,r,o,i)}}function IR(e,t,n,r,o,i){return r>0?PR(e,t,n,r,o,i):PR(e,n,t,o,r,i)}function PR(e,t,n,r,o,i){let s=r-o;for(;;){let a=Fs(t,n,.5),u=e(...a);if(u<0)n=a,o=u;else if(u>0)t=a,r=u;else return u===0?a:void 0;if(i*=.5,i<1){if(r-o<.1*s)return Fs(t,n,.5);if(i<1e-6)return}}}function YW(e,t,n,r){for(;;){let o=Fs(t,n,.5),i=e(...o);if(!isFinite(i))n=o;else if(i>=0)t=o;else return;if(r*=.5,r<1)return Fs(t,n,.5)}}var wg=50;function Kp(e){return e!==void 0&&e!==0}function ZW(e){return Kp(e.posNeg)||Kp(e.posNaN)}var Ag={};function SR(e=Ag,t=Ag,n=Ag){return{edge0:e,edge1:t,edge2:n}}function TG(e,t,n,r,{isInequality:o}){return new CR(e,t,new ze(n.xmin,n.xmax),new ze(n.ymin,n.ymax),new ze(n.zmin,n.zmax),r,{isInequality:o}).fullLoopOverUnitCubes()}var CR=class extends cf{constructor(n,r,o,i,s,a,{isInequality:u}){super(pI,o,i,s,a);this.f=n;this.gradient=r;this.cubeEdge=new Array(26);this.face=SR();this.cubeHasCrossing=!1;this.allNormalsFromGradient=!0;this.normalFromGradient=[];this.edgesMaybeCross=0;this.positions=[];this.uvs=[];this.normals=[];this.triangles=[];this.isInequality=u,this.sheet=Array((a+1)*(a+1)),this.strip=Array(a+1);for(let c=0;c<(a+1)*(a+1);c++)this.sheet[c]=SR();for(let c=0;c<a+1;c++)this.strip[c]=SR()}setAt(n,r,o,i,s){let a=this.f(o,i,s);n.set(r,a)}fullLoopOverUnitCubes(){this.positions=[],this.normals=[],this.triangles=[],this.loopOverUnitCubes(this.onEachCube.bind(this));let{uvs:n,positions:r,normals:o}=this;if(!this.allNormalsFromGradient)for(let i=0;i<o.length/3;i++){if(this.normalFromGradient[i])continue;let s=o[3*i],a=o[3*i+1],u=o[3*i+2],c=Math.sqrt(s*s+a*a+u*u);o[3*i]=s/c,o[3*i+1]=a/c,o[3*i+2]=u/c}return nf(this.triangles,this.positions,o,n,0,[],.7),{positions:r,normals:o,faces:this.triangles,uvs:n,resolved:!0,extraAttrs:[]}}onEachCube(){this.edgesMaybeCross=0,this.cubeHasCrossing=!1;for(let n=0;n<26;n++){let r=this.cubeVertexValue.get(To[n*2]),o=this.cubeVertexValue.get(To[n*2+1]);(r===0||o===0)&&(this.cubeHasCrossing=!0),!(r>0&&o>0||r<0&&o<0)&&(isFinite(r)||isFinite(o))&&(this.edgesMaybeCross|=1<<n)}this.edgesMaybeCross&&(this.setVertexPositions(),this.setEdges()),this.saveEdges(),this.cubeHasCrossing&&this.generateTriangles()}setEdges(){let{i:n,j:r,k:o,gridsize:i}=this,s=this.sheet[(n+0)*(i+1)+r+0],a=this.sheet[(n+1)*(i+1)+r+0],u=this.sheet[(n+0)*(i+1)+r+1],c=0;o>0&&(this.cubeEdge[0]=s.edge0,this.cubeEdge[1]=s.edge1,this.cubeEdge[2]=s.edge2,this.cubeEdge[3]=u.edge2,this.cubeEdge[4]=a.edge0,c|=31),r>0&&(this.cubeEdge[5]=this.strip[n].edge0,this.cubeEdge[6]=this.strip[n].edge1,this.cubeEdge[7]=this.strip[n+1].edge0,this.cubeEdge[8]=this.strip[n].edge2,c|=480,o==0&&(this.cubeEdge[2]=s.edge2,c|=4)),n>0&&(this.cubeEdge[9]=this.face.edge0,this.cubeEdge[10]=this.face.edge1,this.cubeEdge[11]=this.face.edge2,c|=3584,o==0&&(this.cubeEdge[0]=s.edge0,c|=1),r==0&&(this.cubeEdge[5]=this.strip[n].edge0,c|=32));for(let l=0;l<26;l++){if(~this.edgesMaybeCross>>l&1){this.cubeEdge[l]=Ag;continue}if(c>>l&1){!this.cubeHasCrossing&&(this.cubeEdge[l].posNeg||this.cubeEdge[l].posNaN)&&(this.cubeHasCrossing=!0);continue}let p=this.findSurfaceCrossingEDI(To[l*2],To[l*2+1]);this.cubeEdge[l]=p,ZW(p)&&(this.cubeHasCrossing=!0)}}saveEdges(){let{i:n,j:r,k:o,gridsize:i}=this;o<i-1&&(this.sheet[(n+0)*(i+1)+r+0].edge0=this.cubeEdge[11],this.sheet[(n+0)*(i+1)+r+0].edge1=this.cubeEdge[17],this.sheet[(n+0)*(i+1)+r+0].edge2=this.cubeEdge[8]),r<i-1&&(this.strip[n].edge0=this.cubeEdge[10],this.strip[n].edge1=this.cubeEdge[12],this.strip[n].edge2=this.cubeEdge[14]),n<i-1&&(this.face.edge0=this.cubeEdge[15],this.face.edge1=this.cubeEdge[13],this.face.edge2=this.cubeEdge[16]),o==0&&(this.sheet[(n+0)*(i+1)+r+1].edge2=this.cubeEdge[3],this.sheet[(n+1)*(i+1)+r+0].edge0=this.cubeEdge[4]),r==0&&(this.strip[n+1].edge0=this.cubeEdge[7]),r==i-1&&(this.sheet[n*(i+1)+i].edge2=this.cubeEdge[14]),n==i-1&&(this.sheet[(i+0)*(i+1)+r].edge0=this.cubeEdge[16],this.strip[i].edge0=this.cubeEdge[13])}findSurfaceCrossingEDI(n,r){let o=this.cubeVertexValue.get(n),i=this.cubeVertexValue.get(r);if(o===0||i===0)return Ag;let s=this.cubeVertex[n],a=this.cubeVertex[r];if(this.isInequality){let{posNeg:u,posNaN:c}=xG(this.f,s,a,o,i);return{posNeg:u!==void 0?this.pushPositionWithGradient(...u):void 0,posNaN:c!==void 0?this.pushPositionNoGradient(...c):void 0}}else{let u=Og(this.f,s,a,o,i);return{posNeg:u!==void 0?this.pushPositionWithGradient(...u):void 0}}}pushPositionWithGradient(n,r,o){if(!(isFinite(n)&&isFinite(r)&&isFinite(o)))return 0;let[i,s,a]=this.computeGradient(n,r,o),u=Math.sqrt(i*i+s*s+a*a);return i/=-u,s/=-u,a/=-u,Cd(i,s,a)?(this.normalFromGradient.push(!0),this._pushPositionAndNormal(n,r,o,i,s,a)):this.pushPositionNoGradient(n,r,o)}pushPositionNoGradient(n,r,o){return isFinite(n)&&isFinite(r)&&isFinite(o)?(this.allNormalsFromGradient=!1,this.normalFromGradient.push(!1),this._pushPositionAndNormal(n,r,o,0,0,0)):0}_pushPositionAndNormal(n,r,o,i,s,a){return this.positions.push(n,r,o),this.uvs.push((n-this.x.min)/this.x.width,(r-this.y.min)/this.y.width),this.normals.push(i,s,a),this.positions.length/3}computeGradient(n,r,o){let i=NaN,s=NaN,a=NaN;if(this.gradient&&([i,s,a]=this.gradient(n,r,o),isFinite(i)&&isFinite(s)&&isFinite(a)))return[i,s,a];let u=.001*Math.min(this.size.x,this.size.y,this.size.z),c=this.f(n,r,o);if(isFinite(i)||(i=(this.f(n+u,r,o)-c)/u),isFinite(i)||(i=(c-this.f(n-u,r,o))/u),isFinite(s)||(s=(this.f(n,r+u,o)-c)/u),isFinite(s)||(s=(c-this.f(n,r-u,o))/u),isFinite(a)||(a=(this.f(n,r,o+u)-c)/u),isFinite(a)||(a=(c-this.f(n,r,o-u))/u),isFinite(i)&&isFinite(s)&&isFinite(a))return[i,s,a];let l=NaN,p=NaN,d=NaN,m=NaN,f=NaN,g=NaN,y=u/2;return(!isFinite(i)||!isFinite(s))&&(l=(this.f(n+y,r+y,o)-c)/u,isFinite(l)||(l=(c-this.f(n-y,r-y,o))/u),p=(this.f(n+y,r-y,o)-c)/u,isFinite(p)||(p=(c-this.f(n-y,r+y,o))/u),isFinite(l)&&isFinite(p)&&(isFinite(i)||(i=l+p),isFinite(s)||(s=l-p))),(!isFinite(s)||!isFinite(a))&&(d=(this.f(n,r+y,o+y)-c)/u,isFinite(d)||(d=(c-this.f(n,r-y,o-y))/u),m=(this.f(n,r+y,o-y)-c)/u,isFinite(m)||(m=(c-this.f(n,r-y,o+y))/u),isFinite(d)&&isFinite(m)&&(isFinite(s)||(s=d+m),isFinite(a)||(a=d-m))),(!isFinite(a)||!isFinite(i))&&(f=(this.f(n+y,r,o+y)-c)/u,isFinite(f)||(f=(c-this.f(n-y,r,o-y))/u),g=(this.f(n-y,r,o+y)-c)/u,isFinite(g)||(g=(c-this.f(n+y,r,o-y))/u),isFinite(f)&&isFinite(g)&&(isFinite(i)||(i=f-g),isFinite(a)||(a=f+g))),[i,s,a]}generateTriangles(){for(let n=0;n<12;n++){let r=cI[n],o=[],i=0,s=fG[n],a=0,u=s[0],c=Math.abs(this.cubeVertexValue.get(u));c>a&&isFinite(c)&&(a=c);let l=s[1],p=Math.abs(this.cubeVertexValue.get(l));p>a&&isFinite(p)&&(a=p);let d=s[2],m=Math.abs(this.cubeVertexValue.get(d));m>a&&isFinite(m)&&(a=m);let f=s[3],g=Math.abs(this.cubeVertexValue.get(f));g>a&&isFinite(g)&&(a=g);let y=a*Number.EPSILON*32;if(c<=y){i|=35;let b=this.pushPositionWithGradient(...this.cubeVertex[u]);b!==void 0&&o.push(b)}if(p<=y){i|=21;let b=this.pushPositionWithGradient(...this.cubeVertex[l]);b!==void 0&&o.push(b)}if(m<=y){i|=14;let b=this.pushPositionWithGradient(...this.cubeVertex[d]);b!==void 0&&o.push(b)}if(g<=y){i|=56;let b=this.pushPositionWithGradient(...this.cubeVertex[f]);b!==void 0&&o.push(b)}if(o.length===4)continue;let h;for(let b=0;b<4;b++){let T=s[b];if(this.cubeVertexValue.get(T)>y){h=this.cubeVertex[T];break}}if(h===void 0&&this.isInequality)for(let b=0;b<6;b++){if(i>>b&1)continue;let{posNeg:T,posNaN:I}=this.cubeEdge[r[b]];if(Kp(T)&&Kp(I)){h=Fs(this.positions.slice((T-1)*3,T*3),this.positions.slice((I-1)*3,I*3),.5);break}}if(h===void 0)for(let b=0;b<4;b++){let T=s[b];if(!isFinite(this.cubeVertexValue.get(T))){h=this.cubeVertex[T];break}}if(h===void 0&&i&&o.length>0){let b;for(let T=0;T<4;T++){let I=s[T];if(this.cubeVertexValue.get(I)<-y){b=this.cubeVertex[I];break}}if(b){let T=o[0],I=this.positions.slice((T-1)*3,T*3);h=Fs(b,I,2)}}if(h!==void 0){if(this.isInequality){let b=[],T=[],I=!1;for(let E=0;E<6;E++){if(i>>E&1)continue;let{posNeg:S,posNaN:C}=this.cubeEdge[r[E]],v=Kp(S),_=Kp(C);v&&b.push(S),_&&T.push(C),v&&_&&(I=!0)}if(I){b.push(...o),this.pushTriangleFromCorners(T,h),this.pushTriangleFromCorners(b,h);continue}}for(let b=0;b<6;b++){if(i>>b&1)continue;let{posNeg:T,posNaN:I}=this.cubeEdge[r[b]],E=T||I;Kp(E)&&o.push(E)}this.pushTriangleFromCorners(o,h)}}}pushTriangleFromCorners(n,r){if(n.length>=3){let o=n[0]-1,i=n[1]-1,s=n[2]-1;this.pushTriangle(o,i,s,r)}if(n.length==4){let o=n[0]-1,i=n[2]-1,s=n[3]-1;this.pushTriangle(o,i,s,r)}}pushTriangle(n,r,o,i){this.allNormalsFromGradient||this.fixBadNormals(n,r,o,i),this.checkWindingOrder(n,r,o)&&([r,o]=[o,r]),this.triangles.push(n,r,o)}fixBadNormals(n,r,o,i){let s=!this.normalFromGradient[n],a=!this.normalFromGradient[r],u=!this.normalFromGradient[o];if(!(s||a||u))return;let c=this.positions,l=this.normals,p=new lt(c[3*n],c[3*n+1],c[3*n+2]),d=new lt(c[3*r],c[3*r+1],c[3*r+2]),m=new lt(c[3*o],c[3*o+1],c[3*o+2]),f=new lt().subVectors(m,p),g=new lt().subVectors(p,d),y=f.cross(g),h=new lt().subVectors(p,new lt(...i));y.dot(h)<0&&y.multiply(-1),y.isFinite()&&(s&&(l[3*n+0]+=y.x,l[3*n+1]+=y.y,l[3*n+2]+=y.z),a&&(l[3*r+0]+=y.x,l[3*r+1]+=y.y,l[3*r+2]+=y.z),u&&(l[3*o+0]+=y.x,l[3*o+1]+=y.y,l[3*o+2]+=y.z))}checkWindingOrder(n,r,o){let i=this.positions,s=this.normals,a=i[3*o]-i[3*n],u=i[3*o+1]-i[3*n+1],c=i[3*o+2]-i[3*n+2],l=i[3*n]-i[3*r],p=i[3*n+1]-i[3*r+1],d=i[3*n+2]-i[3*r+2],m=u*d-c*p,f=c*l-a*d,g=a*p-u*l,y=s[3*n],h=s[3*n+1],b=s[3*n+2];return m*y+f*h+g*b<0}};var{floor:XW}=Math;function ER(e){let t=[];for(let n of e)t.push(...n),t.push(NaN,NaN,NaN);return t}function ed(e,t,n,r){(n===void 0||isNaN(n))&&(n=MR(t.min,t.max)),n=mr(XW(n),2,2e3);let{xmin:o,xmax:i,ymin:s,ymax:a,zmin:u,zmax:c}=r.viewport;u!=null||(u=ro.zmin),c!=null||(c=ro.zmax);let l=mI(e,{min:t.min,max:t.max,nInitialSamples:n,xtolerance:(i-o)/1e3,ytolerance:(a-s)/1e3,ztolerance:(c-u)/1e3,map:p=>p});return ER(l.segments)}function vR(e,t,n,r){let o=r.degreeMode?Math.PI/180:1;return ed(i=>{let s=e(i),a=s[0],u=s[1],c=s[2];return[a*Xn(u*o),a*Ln(u*o),c]},t,n,r)}function IG(e,t,n,r){let o=r.degreeMode?Math.PI/180:1;return ed(i=>{let s=e(i),a=s[0],u=s[1],c=s[2];return[a*Ln(c*o)*Xn(u*o),a*Ln(c*o)*Ln(u*o),a*Xn(c*o)]},t,n,r)}function vG(e,t,n,r){let o=WW(e,t,n,r);return ER(o)}function WW(e,t,n,r){return new NR(e,t,new ze(n.xmin,n.xmax),new ze(n.ymin,n.ymax),new ze(n.zmin,n.zmax),r).run()}var jW={},NR=class extends cf{constructor(n,r,o,i,s,a){super(dI,o,i,s,a);this.f=n;this.g=r;this.vertexFGZs={};this.vertexZeroF={};this.vertexZeroG={};this.threshF=0;this.threshG=0;this.cubeID=0;this.edgesMaybeCrossF=0;this.edgesMaybeCrossG=0;this.tetEdgeCrossings=new Array(26);this.edgeFGZs=new Array(26);this.edgeCrossings=new Map;this.allFGZs=new Map}setAt(n,r,o,i,s){let a=this.f(o,i,s),u=this.g(o,i,s);n.set(r,a,u)}run(){return this.loopOverUnitCubes(this.onEachCube.bind(this)),this.traceCurves()}onEachCube(){this.cubeID=hG(this.i,this.j,this.k),this.pruneEdges(),this.edgesMaybeCrossF&&this.edgesMaybeCrossG&&(this.setVertexPositions(),this.setVertexZeros(),this.setEdgeCrossings(),this.insertCurveSegmentsFromCube())}pruneEdges(){this.edgesMaybeCrossF=0,this.edgesMaybeCrossG=0;for(let n=0;n<26;n++){let r=To[n*2],o=To[n*2+1],i=this.cubeVertexValue.getX(r),s=this.cubeVertexValue.getY(r),a=this.cubeVertexValue.getX(o),u=this.cubeVertexValue.getY(o);!(i>0&&a>0||i<0&&a<0)&&(isFinite(i)||isFinite(a))&&(this.edgesMaybeCrossF|=1<<n),!(s>0&&u>0||s<0&&u<0)&&(isFinite(s)||isFinite(u))&&(this.edgesMaybeCrossG|=1<<n)}}setVertexZeros(){let n=0,r=0;for(let s=0;s<9;s++){let a=this.cubeVertexValue.getX(s),u=this.cubeVertexValue.getY(s),c=Math.abs(a),l=Math.abs(u);c>n&&isFinite(c)&&(n=c),l>r&&isFinite(c)&&(r=l)}let o=this.threshF=n*Number.EPSILON*32,i=this.threshG=r*Number.EPSILON*32;for(let s=0;s<9;s++){let a=this.cubeVertexValue.getX(s),u=this.cubeVertexValue.getY(s),c=Math.abs(a),l=Math.abs(u);if(this.vertexZeroF[s]=c<=o,this.vertexZeroG[s]=l<=i,c<=o&&l<=i){let p=this.cubeVertex[s],d=this.createFGZ(bG(this.cubeID,s),p);this.vertexFGZs[s]=d}else this.vertexFGZs[s]=void 0}}getEdgeCrossings(n){let r=this.edgesMaybeCrossF>>n&1,o=this.edgesMaybeCrossG>>n&1;if(!r&&!o)return jW;let i=Ng(this.cubeID,n),s=this.edgeCrossings.get(i);if(s!==void 0)return s;let a=this.getEdgeCrossingsUncached(n,r,o);return this.edgeCrossings.set(i,a),a}getEdgeCrossingsUncached(n,r,o){let i=To[n*2],s=To[n*2+1],a=this.cubeVertexValue.getX(i),u=this.cubeVertexValue.getY(i),c=this.cubeVertexValue.getX(s),l=this.cubeVertexValue.getY(s),p=this.cubeVertex[i],d=this.cubeVertex[s],m=!r||a===0||c===0?void 0:Og(this.f,p,d,a,c),f=!o||u===0||l===0?void 0:Og(this.g,p,d,u,l),g=this.threshF;!m&&f&&Math.abs(a)<=g&&Math.abs(c)<=g&&Math.abs(this.f(f[0],f[1],f[2]))<=g&&(m=f);let y=this.threshG;return!f&&m&&Math.abs(u)<=y&&Math.abs(l)<=y&&Math.abs(this.g(m[0],m[1],m[2]))<=y&&(f=m),{f:m,g:f}}getTriangleCrossing(n){let r=TR(this.cubeID,n),o=this.allFGZs.get(r);if(o!==void 0)return o;let i=this.getTriangleCrossingUncached(n);return this.allFGZs.set(r,i),i}createFGZ(n,r){let o=this.allFGZs.get(n);if(o)return o;let i={id:n,pos:r,connections:[],visited:!1};return this.allFGZs.set(n,i),i}getTriangleCrossingUncached(n){let r=[],o=[],i=xR[n];for(let a=0;a<3;a++){let u=i[a];if(this.vertexFGZs[u])return null;this.vertexZeroF[u]&&r.push(this.cubeVertex[u]),this.vertexZeroG[u]&&o.push(this.cubeVertex[u])}let s=bR[n];for(let a=0;a<3;a++){let u=s[a],c=this.tetEdgeCrossings[u];if(this.edgeFGZs[u]||!c)continue;let l=c.f,p=c.g,d=To[2*u],m=To[2*u+1];l&&!this.vertexZeroF[d]&&!this.vertexZeroF[m]&&r.push(l),p&&!this.vertexZeroG[d]&&!this.vertexZeroG[m]&&o.push(p)}if(r.length===2&&o.length===2){let a=JW(r[0],r[1],o[0],o[1]);return a?{id:TR(this.cubeID,n),pos:a,connections:[],visited:!1}:null}else return null}setEdgeCrossings(){for(let n=0;n<26;n++){let r=this.getEdgeCrossings(n),o=r.f,i=r.g,s=To[n*2],a=To[n*2+1];if(this.vertexFGZs[s]||this.vertexFGZs[a])this.tetEdgeCrossings[n]=void 0,this.edgeFGZs[n]=void 0;else if(o&&this.vertexZeroG[s]&&this.vertexZeroG[a]){let u=this.createFGZ(Ng(this.cubeID,n),o);this.edgeFGZs[n]=u,this.tetEdgeCrossings[n]=void 0}else if(i&&this.vertexZeroF[s]&&this.vertexZeroF[a]){let u=this.createFGZ(Ng(this.cubeID,n),i);this.edgeFGZs[n]=u,this.tetEdgeCrossings[n]=void 0}else if(o&&i&&xc(o,i)<1e-8){let u=this.createFGZ(Ng(this.cubeID,n),o);this.edgeFGZs[n]=u,this.tetEdgeCrossings[n]=void 0}else this.edgeFGZs[n]=void 0,this.tetEdgeCrossings[n]=r}}insertCurveSegmentsFromCube(){for(let n=0;n<12;n++)this.insertCurveSegmentsFromTetrahedron(n)}insertCurveSegmentsFromTetrahedron(n){let r=[],o=gG[n];for(let l=0;l<4;l++){let p=this.getTriangleCrossing(o[l]);p&&r.push(p)}let i=[],s=cI[n];for(let l=0;l<6;l++){let p=this.edgeFGZs[s[l]];p&&i.push(p)}let a=[],u=[To[s[0]*2],To[s[0]*2+1],To[s[3]*2],To[s[3]*2+1]];for(let l of u){let p=this.vertexFGZs[l];p&&a.push(p)}let c=[...a,...i,...r];switch(c.length){case 0:case 1:break;case 2:this.connectCrossings(c[0],c[1]);break;case 3:r.length===2&&this.connectCrossings(r[0],r[1]);break;case 4:r.length===4&&(this.connectCrossings(r[0],r[1]),this.connectCrossings(r[2],r[3]));break;default:throw new Error(\"Programming error: 5 is impossible.\")}}connectCrossings(n,r){n.connections.some(o=>o.id===r.id)||r.connections.some(o=>o.id===n.id)||n.connections.length>=2||r.connections.length>=2||(n.connections.push(r),r.connections.push(n))}traceCurves(){let n={xtolerance:this.size.x*.1,ytolerance:this.size.y*.1,ztolerance:this.size.z*.1,map:o=>o},r=new Js(n);for(let o of this.allFGZs.values())o&&!o.visited&&o.connections.length===1&&this.traceCurve(r,o);for(let o of this.allFGZs.values())o&&!o.visited&&this.traceCurve(r,o);return r.finish().segments}traceCurve(n,r){let o=r;for(;;){n.addPoint(r.pos),r.visited=!0;let i;for(let s of r.connections)s.visited||(i=s);if(!i)break;r=i}o.connections.length===2&&n.addPoint(o.pos),n.breakSegment()}},[fI,PG,_R]=[new lt,new lt,new lt],SG=new lt,[RR,DR,CG]=[new lt,new lt,new lt],[yI,EG,gI]=[new lt,new lt,new lt];function JW(e,t,n,r){fI.set(e[0],e[1],e[2]),PG.set(t[0],t[1],t[2]),_R.set(n[0],n[1],n[2]),SG.set(r[0],r[1],r[2]),RR.subVectors(PG,fI),DR.subVectors(SG,_R),CG.subVectors(_R,fI),yI.crossVectors(RR,DR),EG.crossVectors(CG,DR);let o=yI.dot(EG)/yI.dot(yI);return 0<=o&&o<=1?(gI.addVectors(fI,RR.multiply(o)),[gI.x,gI.y,gI.z]):null}var MG=80;var OR=class extends rf{constructor(n,r,o,i,s,a){let u=o.width/1e8,c=i.width/1e8;super({resolution:s,uRange:o,vRange:i,du:u,dv:c,extraAttrCount:a});this.vertices=[];this.fn=n=>{let r=this._fn(n),o=this.tangentInForced(n,[this.du,0],r),i=this.tangentInForced(n,[0,this.dv],r),s=Sd(o,i);return{uv:n,f:r,normal:s,dfEast:o,dfNorth:i}};this._fn=l=>n(l[0],l[1]),this.xmin=r.xmin*6-r.xmax*5,this.xmax=r.xmax*6-r.xmin*5,this.ymin=r.ymin*6-r.ymax*5,this.ymax=r.ymax*6-r.ymin*5,this.zmin=r.zmin*6-r.zmax*5,this.zmax=r.zmax*6-r.zmin*5,this.distThresh=((r.xmax-r.xmin)*1e-6)**2}getVertexCount(){return this.vertices.length}getUV(n){return this.vertices[n].uv}getNormal(n){return this.vertices[n].normal}_addVertex(n){return this.vertices.push(n)-1}copyVertex(n){return this.addVertex(this.vertices[n])}getF(n){return this.vertices[n].f}getDfNorth(n){return this.vertices[n].dfNorth}getDfEast(n){return this.vertices[n].dfEast}insidePaddedDomain(n){return this.zmin<=n[2]&&n[2]<=this.zmax&&this.ymin<=n[1]&&n[1]<=this.ymax&&this.xmin<=n[0]&&n[0]<=this.xmax}tangentInForced(n,r,o){let i=wf(n,r);return EP(this._fn(i),o)}_isVertexAtCrease(n){let r=this.getUV(n),o=this.getDfEast(n),i=this.getDfNorth(n),s=this.getF(n),a=this.tangentInForced(r,[-this.du,0],s);if(vP(a,o)/Math.sqrt(Pd(a)*Pd(o))>-of)return!0;let c=this.tangentInForced(r,[0,-this.dv],s);return vP(i,c)/Math.sqrt(Pd(i)*Pd(c))>-of}hintedNormal(n,r){let o=this.getUV(n),i=this.getF(n),s=Sd(this.tangentInForced(o,r[0],i),this.tangentInForced(o,r[1],i));return Cd(...s)?s:this.getNormal(n)}getVertex(n){if(this.allowVertex(n))return this.getF(n)}getExtraAttr(n,r){return this.vertices[n].f[3+r]}findJumpBetweenTwoSamples(n,r){let o=this.getUV(n),i=this.getF(n),s=0,a=this.getUV(r),u=this.getF(r),c=1,l=m=>this._fn(Ar(o,a,m));if(!isFinite(i[0])||!isFinite(i[1])||!isFinite(i[2])||!isFinite(u[0])||!isFinite(u[1])||!isFinite(u[2]))return;let d=bh(s,i,c,u,l,(this.xmax-this.xmin)*1e-6,0,0);if(d)return[this.fn(Ar(o,a,Ls(d[0],0,1e-5))),this.fn(Ar(o,a,Ls(d[1],1,1e-5)))]}clip(n){return this.insidePaddedDomain(n)?n:[NaN,NaN,NaN]}findFiniteBetweenTwoSamples(n,r){let o=this.getUV(n),i=this.getF(n),s=this.getUV(r),a=this.getF(r),u=l=>this.clip(this._fn(Ar(o,s,l))),c=hh(0,this.clip(i),1,this.clip(a),u);if(c!==void 0)return this.fn(Ar(o,s,c))}allowVertex(n){return this.insidePaddedDomain(this.getF(n))}isDegenerate(n,r,o){let i=this.getF(n),s=this.getF(r);if(xc(i,s)<this.distThresh)return!0;let a=this.getF(o);return xc(s,a)<this.distThresh||xc(i,a)<this.distThresh}};function Lg(e,t,n,r,o,i){let s=new OR(e,t,n,r,o,i);return eI(s)}function _G(e){return QW(e)||bI(e)||RG(e)}function QW(e){return e===3}function hI(e,t,n,r){return e.is3dPolicy()&&bI(t.branchMode)?Fg(t,n,r!=null?r:1):t}function bI(e){switch(e){case 1:case 2:case 6:case 8:case 5:return!0;default:return!1}}function Fg(e,t,n,r=0){var s;let o=DG(e,t,r),i=lf(o,t.viewport,n);return{branchMode:128,guid:Qr(),points:i,resolved:e.resolved,color:e.color,compiled:e.compiled,thickness:(s=e.lineWidth)!=null?s:1}}function LR(e,t,n){return e.is3dPolicy()&&RG(t.branchMode)?KW(t,n):t}function RG(e){switch(e){case 17:case 24:return!0;default:return!1}}function KW(e,t){var r;let n=DG(e,t);return{branchMode:e.branchMode===17?119:e.branchMode===24?129:128,guid:Qr(),points:e4(n),color:e.color,thickness:(r=e.lineWidth)!=null?r:1}}function e4(e){let t=[];for(let[n,r,o]of e)t.push(n,r,o);return t}function DG(e,t,n=0){function r(i,s){if(e.branchMode===1)return[s,i];if(e.branchMode===6){let a=t.degreeMode?i*Math.PI/180:i;return[s*Math.cos(a),s*Math.sin(a)]}else return[i,s]}let o=[];for(let i=0;i<e.segments.length;i++){let s=e.segments[i];for(let a=0;a<s.length/2;a++){let[u,c]=r(s[2*a],s[2*a+1]);o.push([u,c,n])}i<e.segments.length-1&&o.push([NaN,NaN,0])}return o}function lf(e,t,n){if(t.zmin===void 0||t.zmax===void 0)return[];let{xmin:r,xmax:o,ymin:i,ymax:s,zmin:a,zmax:u}=t,c=o-r,l=s-i,p=u-a,d=n/200,m=[],f=1e-4;for(let h=0;h<e.length;h++){let b=e[h];if(isFinite(b[0])&&isFinite(b[1])&&isFinite(b[2])){let T=m[m.length-1];T!==void 0&&Math.abs(b[0]-T[0])<f*c&&Math.abs(b[1]-T[1])<f*l&&Math.abs(b[2]-T[2])<f*p||m.push(b)}else m.push(void 0)}let g=[],y=m.length;for(let h=0;h<y;h++){let b=m[h];if(!b){g.push(NaN,NaN,NaN);continue}let[T,I,E]=b,S=m[h-1],C=m[h+1];if(S&&C){let[v,_,L]=S,[k,Q,w]=C,q=(T-v)/c,K=(k-T)/c,le=(I-_)/l,te=(Q-I)/l,Be=(E-L)/p,Ze=(w-E)/p,oe=oi(q,le,Be),ee=oi(K,te,Ze);if((K*q+te*le+Ze*Be)/(oe*ee)<.7&&oe>d&&ee>d){let ne=.5*(d/oe),Ve=.5*(d/ee),_t=va(v,T,1-ne),ht=va(_,I,1-ne),Rt=va(L,E,1-ne),Ko=va(T,k,Ve),br=va(I,Q,Ve),Ci=va(E,w,Ve);g.push(_t,ht,Rt),g.push(va(_t,T,.5),va(ht,I,.5),va(Rt,E,.5)),g.push(T,I,E),g.push(va(T,Ko,.5),va(I,br,.5),va(E,Ci,.5)),g.push(Ko,br,Ci)}else g.push(T,I,E)}else g.push(T,I,E)}return g}function va(e,t,n){return(1-n)*e+n*t}function wR(e,t){let n=t!=null?t:{};if(!Array.isArray(e))return()=>e;let r=Object.keys(n).length===0?e:e.filter((o,i)=>!n[i]);return o=>r[o]}function NG(e){var i,s;let t=e.droppedIndices,n=wR((i=e.pointSize)!=null?i:1,t),r=wR(e.color,t),o=wR((s=e.pointOpacity)!=null?s:1,t);return e.segments[0].map(([a,u],c)=>({branchMode:114,position:[a,u,0],radius:.02*n(c),guid:Qr(),color:r(c),fillOpacity:o(c)}))}var Is={pointsOfInterest:!0,plotSingleVariableImplicitEquations:!0,plotImplicits:!0,plotInequalities:!0,sliders:!0};function FR(e){return Math.abs(e)<5e-8}var Vg=class extends Js{constructor(t,n,r){let{tolerance:o,mathToPixels:i}=t;super({tolerance:o,map:s=>i.mapCoordinatePair(s)}),this.fn=n,this.mappedFn=s=>i.mapY(n(s)),this.derivative=r,this.poiData={zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}},this.zeroBuffer=[],this.extremumBuffer=[]}getPOI(){return Is.pointsOfInterest?(this.poiData.intercept=this.findIntercept(this.fn),this.poiData):{zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}}}addPoint(t){this.segment.length===0&&FR(t[1])&&(this.poiData.zeros.x.push(t[0]),this.poiData.zeros.y.push(t[1])),this.updateZeroBuffer(t),this.updateExtremumBuffer(t),super.addPoint(t)}updateZeroBuffer(t){let[n,r]=this.map?this.map(t):t;if(!isFinite(n)||!isFinite(r)){this.zeroBuffer.length=0;return}switch(this.zeroBuffer.length){case 0:{if(FR(t[1]))return;this.zeroBuffer.push(t);return}case 1:if(t[1]===0){this.zeroBuffer.push(t);return}else if(t[1]>0!=this.zeroBuffer[0][1]>0){let o=NP(this.zeroBuffer[0][0],this.zeroBuffer[0][1],t[0],t[1],this.fn);o&&(this.poiData.zeros.x.push(o[0]),this.poiData.zeros.y.push(o[1])),this.zeroBuffer.length=0,this.zeroBuffer.push(t);return}else{this.zeroBuffer.length=0,this.zeroBuffer.push(t);return}case 2:{if(t[1]===0)return;if(t[1]>0!=this.zeroBuffer[0][1]>0){let o=Ff(this.zeroBuffer[0][0],this.zeroBuffer[0][1],this.zeroBuffer[1][0],this.zeroBuffer[1][1],t[0],t[1],this.fn);o&&(this.poiData.zeros.x.push(o[0]),this.poiData.zeros.y.push(o[1])),this.zeroBuffer.length=0,this.zeroBuffer.push(t);return}else{this.zeroBuffer.length=0,this.zeroBuffer.push(t);return}}}}updateExtremumBuffer(t){let[n,r]=this.map?this.map(t):t;if(!isFinite(n)||!isFinite(r)){this.extremumBuffer.length=0;return}switch(this.extremumBuffer.length){case 0:{this.extremumBuffer.push(t);return}case 1:{t[1]===this.extremumBuffer[0][1]&&(this.extremumBuffer.length=0),this.extremumBuffer.push(t);return}case 2:if(t[1]===this.extremumBuffer[1][1]){this.extremumBuffer.push(t);return}else if(t[1]>this.extremumBuffer[1][1]!=this.extremumBuffer[1][1]>this.extremumBuffer[0][1]){let o=this.bisectExtremumUsingDerivative(this.extremumBuffer[0][0],this.extremumBuffer[0][1],this.extremumBuffer[1][0],this.extremumBuffer[1][1],t[0],t[1]);o&&(this.poiData.extrema.x.push(o[0]),this.poiData.extrema.y.push(o[1]),!Ed(this.extremumBuffer[0][0],this.mappedFn(this.extremumBuffer[0][0]),o[0],this.mappedFn(o[0]),t[0],this.mappedFn(t[0]),this.mappedFn,this.ytolerance)&&o[0]>this.segment[this.segment.length-2]&&(this.pendingPoint=o)),this.extremumBuffer.shift(),this.extremumBuffer.push(t);return}else{this.extremumBuffer.shift(),this.extremumBuffer.push(t);return}case 3:{if(t[1]===this.extremumBuffer[1][1])return;if(t[1]>this.extremumBuffer[1][1]!=this.extremumBuffer[1][1]>this.extremumBuffer[0][1]){let o,i=.5*(this.extremumBuffer[1][0]+this.extremumBuffer[2][0]),s=this.fn(i);s===this.extremumBuffer[1][1]?o=Ff(this.extremumBuffer[0][0],this.extremumBuffer[0][1],this.extremumBuffer[1][0],this.extremumBuffer[1][1],t[0],t[1],this.fn):o=this.bisectExtremumUsingDerivative(this.extremumBuffer[1][0],this.extremumBuffer[1][1],i,s,this.extremumBuffer[2][0],this.extremumBuffer[2][1]),o&&(this.poiData.extrema.x.push(o[0]),this.poiData.extrema.y.push(o[1])),this.extremumBuffer.shift(),this.extremumBuffer.shift(),this.extremumBuffer.push(t);return}else{this.extremumBuffer.shift(),this.extremumBuffer.shift(),this.extremumBuffer.push(t);return}}}}bisectExtremumUsingDerivative(t,n,r,o,i,s){let a;if(this.derivative){let u=this.derivative(t),c=this.derivative(i);if(!isNaN(u)&&!isNaN(c)&&(o>n&&u>0&&c<0||o<n&&u<0&&c>0)){let l=NP(t,u,i,c,this.derivative);l&&(a=[l[0],this.fn(l[0])])}}return a||(a=GO(t,n,r,o,i,s,this.fn)),a}breakSegment(){this.zeroBuffer.length=0,this.extremumBuffer.length=0,this.flushPending(),this.segment.length>2&&(this.segments.push(this.segment),FR(this.segment[this.segment.length-1])&&(this.poiData.zeros.x.push(this.segment[this.segment.length-2]),this.poiData.zeros.y.push(this.segment[this.segment.length-1]))),this.segment=[]}findIntercept(t){if(!t)return{x:[],y:[]};let n=t(0);return isFinite(n)?{x:[0],y:[t(0)]}:{x:[],y:[]}}finish(){return{segments:this.getSegments(),resolved:!0,poi:this.getPOI()}}};var{floor:OG}=Math,AG=1e4,xI=5,wG=(e,t,n)=>({x:e,y:t,z:n}),LG=(e,t,n)=>({x:n,y:e,z:t}),FG=(e,t,n)=>({x:e,y:n,z:t}),TI=class{constructor(){this.xmin=ro.xmin;this.xmax=ro.xmax;this.ymin=ro.ymin;this.ymax=ro.ymax;this.zmin=ro.zmin;this.zmax=ro.zmax}},t4=0;function Qr(){return\"result_\"+t4++}var II;(n=>(n.None=void 0,n.ComplexCoercion=\"ComplexCoercion\"))(II||(II={}));function n4(){return{zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}}}function UG(e){return{branchMode:15,error:e,segments:[]}}function BR(e,t){let n=e[0]+t.min*e[1],r=e[0]+t.max*e[1],o={zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}};if(!isFinite(n)||!isFinite(r))return{segments:[],poi:o,resolved:!0};let i=[[t.min,n,t.max,r]],s=-e[0]/e[1];return!isNaN(s)&&s>=t.min&&s<=t.max&&(o.zeros.x.push(s),o.zeros.y.push(0)),0>=t.min&&0<=t.max&&(o.intercept.x.push(0),o.intercept.y.push(e[0])),{segments:i,poi:o,resolved:!0}}function r4(e,t){let n=BR(e[0],t),r=BR(e[1],t);return n.segments.length&&r.segments.length&&n.segments[0].length===4&&r.segments[0].length===4?{segments:[[n.segments[0][1],r.segments[0][1],n.segments[0][3],r.segments[0][3]]],resolved:!0}:{segments:[],resolved:!0}}function o4(e,t){let n=e(t);return{segments:[[...n,...n]],resolved:!0}}function VG(e,t,n){let{mappedFn:r,jumpTolerance:o,screen:i}=n,[s,a]=e,[u,c]=t,l=gc(s,u),p=r(l),d=i.height;if(!(a<0&&c<0&&(a>=p||c>=p))&&!(a>d&&c>d&&(a<=p||c<=p)))return Ed(s,a,l,p,u,c,r,o)}var VR=(e,t,n)=>{let{fn:r,mappedFn:o,jumpTolerance:i,accumulator:s}=n;if(!isFinite(i)||i<=0)return;let a=VG(e,t,n);if(!a)return;let u=(t[0]-e[0])/10,c=[-u,u],l;for(let p=0;p<c.length;p++){let d=e[0]+c[p],m=o(d);isFinite(m)||([d,m]=e,d=e[0],m=e[1]);let f=t[0]+c[p],g=o(f);if(isFinite(g)?l=f:[f,g]=t,VG([d,m],[f,g],n)){let[y,h]=a;s.addPoint([y,r(y)]),s.breakSegment(),s.addPoint([h,r(h)]);return}}return l},GR=class{constructor(t,n,r){let o=i=>n.mathToPixels.mapY(t(i));this.derivative=r,this.accumulator=new Vg(n,t,r),this.fn=t,this.mathToPixels=n.mathToPixels,this.mappedFn=o,this.jumpTolerance=n.tolerance||0,this.screen=n.screen}};function BG(e,t,n,r){let o=n,i=e(o),s=t.mapY(i);return r>0&&!isFinite(s)&&(o=n+r,i=e(o),s=t.mapY(i)),r>0&&!isFinite(s)&&(o=n-r,i=e(o),s=t.mapY(i)),[o,i,s]}function UR(e,t,n){let r=new GR(e,t,n),{mathToPixels:o,mappedFn:i}=r,s=t.nInitialSamples,[a,u,c]=BG(e,o,t.min,0);isFinite(c)&&r.accumulator.addPoint([a,u]);for(let l=1;l<s;l++){let p=o.interpolateX(t.min,t.max,l/(s-1)),d=l===s-1?0:Math.abs(a-p)/10,[m,f,g]=BG(e,o,p,d);if(isFinite(g)&&isFinite(c)){let y=VR([a,c],[m,g],r);y!==void 0&&(m=y,f=e(m),g=o.mapY(f)),r.accumulator.addPoint([m,f])}else if(isFinite(g)&&!isFinite(c)){let y=ti(a,c,m,g,i);if(y!==void 0){y!==m&&r.accumulator.addPoint([y,e(y)]);let h=VR([y,i(y)],[m,g],r);h!==void 0&&(m=h,f=e(m),g=o.mapY(f)),r.accumulator.addPoint([m,f])}}else if(!isFinite(g)&&isFinite(c)){let y=ti(a,c,m,g,i);if(y!==void 0){let h=VR([a,c],[y,i(y)],r);h!==void 0&&(y=h),y!==a&&r.accumulator.addPoint([y,e(y)]),r.accumulator.breakSegment()}}a=m,u=f,c=g}return r.accumulator.finish()}function zG(e){let{fn:t,min:n,max:r}=e,o=Math.floor(n),i=Math.ceil(r),s=!0;i-o+1>AG&&(i=o+(AG-1),s=!1);let a=[];for(let u=o;u<=i;u++){let c=t(u);!isFinite(u)||!isFinite(c)||a.push([u,c])}return{segments:a,resolved:s}}function i4(e,t,n,r){let o=t.min,i=t.max-t.min,s=t.rtoleranceMath,a=Math.floor(i/(Math.PI/n)),u,c,l;function p(d,m){let f=m%2===0?1:-1;if(!r&&f===-1)return!1;let g=m*(Math.PI/n),y=[o,o+1,o+2,o+3],h=!1;for(let b=0,T=y.length;b<T;b++){let I=d(y[b]),E=d(y[b]+g);if(isFinite(I)&&isFinite(E)&&(h=!0),isFinite(I)!==isFinite(E)||Math.abs(I-f*E)>s)return!1}return!!h}for(u=1;u<=a;u++)if(p(e,u)){for(l=u,c=2;c*u<=a;c++)p(e,c*u)||(l=void 0);if(l)break}return l?l*(Math.PI/n):null}function kG(e){return[e[1]*Math.cos(e[0]),e[1]*Math.sin(e[0])]}function mI(e,t){if(t.max<t.min)return{segments:[],resolved:!0};if(t.parameterTransform){let p=t.parameterTransform,d=e;e=m=>d(p(m))}let{xtolerance:n,ytolerance:r,ztolerance:o,map:i}=t,s=new Js({xtolerance:n,ytolerance:r,ztolerance:o,map:i}),a=10,u=t.min,c=e(u);isFinite(c[0])&&isFinite(c[1])&&s.addPoint(c);let l=t.nInitialSamples;for(let p=1;p<l;p++){let d=p/(l-1),m=(1-d)*t.min+d*t.max,f=e(m);Bg(e,u,c,m,f,a,s,t.screen),u=m,c=f}return s.finish()}function s4(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Bg(e,t,n,r,o,i,s,a){if(r===t)return;let{xtolerance:u,ytolerance:c,ztolerance:l,map:p}=s,d=gc(t,r),m=e(d),f=p(n),g=p(o),y=p(m),h=isFinite(f[0])&&isFinite(f[1])&&(f.length===2||isFinite(f[2])),b=isFinite(g[0])&&isFinite(g[1])&&(g.length===2||isFinite(g[2])),T=isFinite(y[0])&&isFinite(y[1])&&(y.length===2||isFinite(y[2]));if(i===0||d===t||d===r){s.breakSegment(),b&&s.addPoint(o);return}if(!(!h&&!b)){if(h!==b){let I=t,E=r,S=n,C=o;for(;t!==d&&d!==r;)T==h?(t=d,n=m,f=y,h=T):(r=d,o=m,g=y,b=T),d=t+(r-t)/2,m=e(d),y=p(m),T=isFinite(y[0])&&isFinite(y[1])&&(y.length===2||isFinite(y[2]));h?(Bg(e,I,S,t,n,i-1,s,a),s.breakSegment()):(s.breakSegment(),s.addPoint(o),Bg(e,r,o,E,C,i-1,s,a));return}if(h&&T&&b){let I=s4(f,g),E=ia(y[0],y[1],y[2]||0,f[0],f[1],f[2]||0,g[0],g[1],g[2]||0),S=E>.2&&E<.8&&Math.abs(y[0]-(f[0]+E*(g[0]-f[0])))<=u&&Math.abs(y[1]-(f[1]+E*(g[1]-f[1])))<=c&&(f.length===2||Math.abs(y[2]-(f[2]+E*(g[2]-f[2])))<=l);if(I||S||a&&a4(f,y,g,a)){s.addPoint(o);return}}Bg(e,t,n,d,m,i-1,s,a),Bg(e,d,m,r,o,i-1,s,a)}}function a4(e,t,n,{width:r,height:o}){return e[0]<0&&n[0]<0&&(e[0]>=t[0]||n[0]>=t[0])||e[0]>r&&n[0]>r&&(e[0]<=t[0]||n[0]<=t[0])||e[1]<0&&n[1]<0&&(e[1]>=t[1]||n[1]>=t[1])||e[1]>o&&n[1]>o&&(e[1]<=t[1]||n[1]<=t[1])}function u4(){return Ds({positions:[],normals:[],faces:[],uvs:[],resolved:!0,extraAttrs:[]})}function zR(e,t,n,r,o,{isInequality:i}){let s=e.fn,a;return t&&!t.includes(\"z\")?a=uI(s,n,r,\"z\"):t&&!t.includes(\"x\")?a=uI(s,n,r,\"x\"):t&&!t.includes(\"y\")?a=uI(s,n,r,\"y\"):a=TG(s,n,r,o,{isInequality:i}),Ds(a)}function GG(e,t,n,r,o){let i=Lg(e,t,n,r,o,0);return Ds(i)}function c4(e,t,n){let r=e.fn,o=tI((i,s)=>r(i,s),new ze(t.xmin,t.xmax),new ze(t.ymin,t.ymax),new ze(t.zmin,t.zmax),n);return Ds(o)}function l4(e,t,n){let r=e.fn,o=tI((i,s)=>r(i,s),new ze(t.ymin,t.ymax),new ze(t.zmin,t.zmax),new ze(t.xmin,t.xmax),n,[2,0,1]);return Ds(o)}function p4(e,t,n){let r=e.fn,o=tI((i,s)=>r(s,i),new ze(t.zmin,t.zmax),new ze(t.xmin,t.xmax),new ze(t.ymin,t.ymax),n,[1,2,0]);return Ds(o)}function d4(e,t,n,r,o,i){let s=i?Math.PI/180:1,a=e.fn,u=Lg((c,l)=>[c*Xn(l*s),c*Ln(l*s),a(c,l)],t,n,r,o,0);return Ds(u)}function m4(e,t,n,r,o,i){let s=i?Math.PI/180:1,a=e.fn,u=Lg((c,l)=>{let p=a(c,l);return[p*Xn(c*s),p*Ln(c*s),l,p]},t,n,r,o,1);return Ds(u)}function f4(e,t,n,r,o,i){let s=i?Math.PI/180:1,a=e.fn,u=Lg((c,l)=>{let p=a(c,l);return[p*Ln(l*s)*Xn(c*s),p*Ln(l*s)*Ln(c*s),p*Xn(l*s),p]},t,n,r,o,1);return Ds(u)}function Ds(e){let{positions:t,normals:n,faces:r,uvs:o,extraAttrs:i,resolved:s}=e;return{guid:Qr(),positions:new Float32Array(t),normals:new Float32Array(n),faces:new Uint32Array(r),uvs:new Float32Array(o),resolved:s,extraAttrs:new Float32Array(i)}}function qG(e){for(let t of e)if(t!==0)return!1;return!0}function HG(e,t){let{min:n,max:r,mathToPixels:o,nInitialSamples:i}=t,s=o.interpolateX(n,r,0),a=e(s),u=qG(a),c=!1,l=[];for(let p=1;p<i;p++){let d=o.interpolateX(n,r,p/(i-1)),m=e(d),f=qG(m);if(u){s=d,a=m,f||(u=!1);continue}if(f){c?(u=!0,c=!1):c=!0;continue}let g=BO(s,a,d,m,e);g!==void 0&&l.push(g),s=d,a=m}return l}function $G(e){if(!e)return!1;let t=e.viewport.xmin,n=e.viewport.xmax,r=e.viewport.ymin,o=e.viewport.ymax;return!(!isFinite(t)||!isFinite(n)||n<=t||!isFinite(r)||!isFinite(o)||o<=r||!isFinite(e.screen.width)||e.screen.width<=0||!isFinite(e.screen.height)||e.screen.height<=0)}function MR(e,t){let n=t-e;return 1+Math.ceil(n/(n/1e3))}var Pa=.001,Yl=new Hl(dR(),dR());function nd(e,t,n){var k,Q,w,q,K,le,te,Be,Ze;let{viewport:r,screen:o,xAxisScale:i,yAxisScale:s,degreeMode:a}=e,u=a?Math.PI/180:1,c=e.viewport.xmin,l=e.viewport.xmax,p=e.viewport.ymin,d=e.viewport.ymax,m=(k=e.viewport.zmin)!=null?k:ro.zmin,f=(Q=e.viewport.zmax)!=null?Q:ro.zmax,g=((w=t.domain)==null?void 0:w.type)===\"2d\",{uMin:y,uMax:h,vMin:b,vMax:T}=((q=t.domain)==null?void 0:q.type)===\"2d\"?t.domain:{uMin:0,uMax:1,vMin:0,vMax:1},I=t.lineWidth;if(t.willConvertTo3D||I>3){let oe=t.willConvertTo3D?200:e.screen.width,ee=I*(l-c)/oe,$=t.willConvertTo3D?200:e.screen.height,ne=I*(d-p)/$;c-=ee,l+=ee,p-=ne,d+=ne}let S=1/4,C=t.domainBound,v,_=Hl.fromRects(aI(r),sI(o),{xAxisScale:i,yAxisScale:s}),L={xmin:c,xmax:l,ymin:p,ymax:d,zmin:m,zmax:f};switch(t.graphMode){case 1:switch(v=fr(ys([p,d]),C),v.type){case\"empty\":return!1;case\"interval\":p=v.bounds[0],d=v.bounds[1]}let oe=Math.max(xI,1+Math.ceil(Math.abs(_.mapY(d)-_.mapY(p))/S)),ee=new Hl(_.yScale,_.xScale);return{min:p,max:d,tolerance:S,nInitialSamples:oe,mathToPixels:ee,screen:{width:o.height,height:o.width}};case 2:{switch(v=fr(ys([c,l]),C),v.type){case\"empty\":return!1;case\"interval\":c=v.bounds[0],l=v.bounds[1]}let $=Math.max(xI,1+Math.ceil(Math.abs(_.mapX(l)-_.mapX(c))/S));return{min:c,max:l,tolerance:S,nInitialSamples:$,mathToPixels:_,screen:o}}case 6:{let $=e.degreeMode?Math.PI/180:1;if(((K=t.domain)==null?void 0:K.type)!==\"1d\")throw new Error(\"Expected polar graph to have domain\");let{min:ne,max:Ve}=t.domain;switch(v=fr(ys([ne,Ve]),C),v.type){case\"empty\":return!1;case\"interval\":ne=v.bounds[0],Ve=v.bounds[1]}let _t=Math.max(xI,1+Math.min(Math.ceil($*Math.abs(Ve-ne)/(2*Math.PI)*1e3),12e3)),ht=Math.abs(_.mapX(l)-_.mapX(c)),Rt=Math.abs(_.mapY(d)-_.mapY(p)),Ko=Math.hypot(ht,Rt),Ci=Math.hypot(l-c,d-p)/Ko,An={min:ne,max:Ve,screen:o,nInitialSamples:_t,xtolerance:S,ytolerance:S,rtoleranceMath:Ci,map:([Nr,Hc])=>_.mapCoordinatePair(kG([$*Nr,Hc]))};if(!t.domain.isExplicit){let Nr=i4(n,An,$,t.operator===\"=\");Nr&&(An.max=An.min+Nr,An.nInitialSamples=Math.max(xI,1+Math.min(Math.ceil($*Math.abs(An.max-An.min)/(2*Math.PI)*1e3),12e3)))}return An}case 5:case 100:{let $={min:0,max:1},{min:ne,max:Ve}=((le=t.domain)==null?void 0:le.type)===\"1d\"?t.domain:$;switch(v=fr(ys([ne,Ve]),C),v.type){case\"empty\":return!1;case\"interval\":ne=v.bounds[0],Ve=v.bounds[1]}let _t;return(!isFinite(ne)||!isFinite(Ve))&&(_t=YG,ne=PI(ne),Ve=PI(Ve)),{min:ne,max:Ve,screen:o,nInitialSamples:MR(ne,Ve),xtolerance:S,ytolerance:S,ztolerance:S,parameterTransform:_t,map:([ht,Rt])=>_.mapCoordinatePair([ht,Rt])}}case 8:return{xmin:c,xmax:l,ymin:p,ymax:d,mathToPixels:_,tolerance:S};case 106:return{...L,u:new ze(c,l),v:new ze(p,d)};case 120:case 122:case 107:return{...L,u:new ze(p,d),v:new ze(m,f)};case 121:case 123:case 108:return{...L,u:new ze(c,l),v:new ze(m,f)};case 109:return{...L,u:new ze(y,g?h:ro.xmax),v:new ze(b,g?T:2*Math.PI)};case 124:case 110:{let{min:$,max:ne}=((te=t.domain)==null?void 0:te.type)===\"1d\"?t.domain:{min:0,max:2*Math.PI};return{...L,u:new ze($,ne),v:new ze(m,f)}}case 211:{let{min:$,max:ne}=((Be=t.domain)==null?void 0:Be.type)===\"1d\"?t.domain:{min:0,max:2*Math.PI/u};return{...{xmin:$,xmax:ne,ymin:m,ymax:f},u:new ze($,ne),v:new ze(m,f),mathToPixels:Yl,tolerance:Pa}}case 212:{let $=g?h:2*Math.PI/u,ne=g?T:Math.PI/u;return{...{xmin:y,xmax:$,ymin:b,ymax:ne},u:new ze(y,$),v:new ze(b,ne),mathToPixels:Yl,tolerance:Pa}}case 215:case 214:return{...{xmin:y,xmax:h,ymin:b,ymax:T},u:new ze(y,h),v:new ze(b,b),mathToPixels:Yl,tolerance:Pa};case 213:{let $=g?h:ro.xmax,ne=g?T:2*Math.PI/u;return{...{xmin:y,xmax:$,ymin:b,ymax:ne},u:new ze(y,$),v:new ze(b,ne),mathToPixels:Yl,tolerance:Pa}}case 111:return{...L,u:new ze(y,g?h:2*Math.PI/u),v:new ze(b,g?T:Math.PI/u)};case 117:case 118:case 119:case 129:case 130:case 103:case 112:case 126:case 113:case 127:case 210:case 114:return{...L,u:new ze(y,h),v:new ze(b,T)};case 200:case 201:case 202:case 206:case 205:case 203:case 204:case 207:case 208:{if(t.graphMode===200&&(t.slice_coordinate===\"z\"||t.slice_coordinate===\"_implicit\"))return{xmin:c,xmax:l,ymin:p,ymax:d,mathToPixels:_,tolerance:Pa};if(t.graphMode===201&&(t.slice_coordinate===\"x\"||t.slice_coordinate===\"_implicit\"))return{...{xmin:p,xmax:d,ymin:m,ymax:f},mathToPixels:Yl,tolerance:Pa};if(t.graphMode===202&&(t.slice_coordinate===\"y\"||t.slice_coordinate===\"_implicit\"))return{...{xmin:c,xmax:l,ymin:m,ymax:f},mathToPixels:Yl,tolerance:Pa};let{min:$,max:ne}=((Ze=t.domain)==null?void 0:Ze.type)===\"1d\"?t.domain:{min:0,max:2*Math.PI};return{x:new ze(c,l),y:new ze(p,d),z:new ze(m,f),t:new ze($,ne),u:new ze(y,h),v:new ze(b,T)}}case 209:return t.slice_coordinate===\"z\"?{xmin:c,xmax:l,ymin:p,ymax:d,mathToPixels:_,tolerance:Pa}:t.slice_coordinate===\"x\"?{...{xmin:p,xmax:d,ymin:m,ymax:f},mathToPixels:Yl,tolerance:Pa}:t.slice_coordinate===\"y\"?{...{xmin:c,xmax:l,ymin:m,ymax:f},mathToPixels:Yl,tolerance:Pa}:t.slice_coordinate===\"_implicit\"?{...L,u:new ze(c,l),v:new ze(p,d)}:!1;default:return!1}}function YG(e){return Math.sinh(10*e)/(1-e*e)}function PI(e){if(e===1/0)return 1;if(e===-1/0)return-1;let t=Math.asinh(e);return 2*t/(10+Math.sqrt(100+4*t*t))}function y4(e){switch(e){case 120:case 122:return 107;case 121:case 123:return 108;case 124:return 110;case 126:return 112;case 127:return 113;default:return e}}function Oa(e){var g,y,h,b,T,I,E,S,C,v,_,L,k,Q,w;let{viewState:t,graphInfo:n,compiled:r,derivative:o}=e,i=r.fn,{degreeMode:s}=t,a=s?Math.PI/180:1,u=nd(t,n,i),c,l,p,d=y4(n.graphMode),m=t.xAxisScale===\"linear\"&&t.yAxisScale===\"linear\";if(!u)c={segments:[],resolved:!0};else{switch(d){case 1:case 2:let q=o?o.fn:void 0;c=n.isLinear&&m&&_c(n.linearCoefficients)?BR(n.linearCoefficients,u):UR(i,u,q);break;case 6:c=mI(oe=>[oe,i(oe)],u);break;case 8:c=Dg(i,u);break;case 5:u.max===u.min?c=o4(i,u.min):c=n.isLinear&&m&&_c(n.linearCoefficients)?r4(n.linearCoefficients,u):mI(i,u);break;case 100:let K=r.fn,{min:le,max:te}=((g=n.domain)==null?void 0:g.type)===\"1d\"?n.domain:{min:0,max:1};if(!isFinite(le)||!isFinite(te)){le=PI(le),te=PI(te);let oe=K;K=ee=>oe(YG(ee))}let Be=new ze(le,te),Ze=ed(K,Be,n.resolution,t);return{branchMode:100,guid:Qr(),points:Ze,color:n.color,thickness:n.lineWidth,compiled:r};case 112:case 113:case 130:case 103:case 106:case 107:case 108:case 109:case 110:case 111:{let oe=u,{u:ee,v:$}=oe,ne=d===112||d===113,Ve=n.graphMode===122||n.graphMode===123,_t=ne?wg:Ve?2:MG,{resolution:ht}=n,Rt=ht===void 0||isNaN(ht)?_t:mr(OG(ht),2,100),Ko=ys([ee.min,ee.max]).type!==\"empty\"&&ys([$.min,$.max]).type!==\"empty\",br;switch(Ko&&d){case 103:{let Nr=r.fn;br=GG(Nr,oe,ee,$,Rt);break}case 130:{br=GG((Hc,iP)=>{let[nt,re]=r.fn(Hc,iP);return[nt,re,0]},oe,ee,$,Rt);break}case 106:br=c4(r,oe,Rt);break;case 107:br=l4(r,oe,Rt);break;case 108:br=p4(r,oe,Rt);break;case 109:br=d4(r,oe,ee,$,Rt,s);break;case 110:br=m4(r,oe,ee,$,Rt,s);break;case 111:br=f4(r,oe,ee,$,Rt,s);break;case 112:case 113:br=zR(r,e.dependencies,e.gradient,u,Rt,{isInequality:(y=e.isImplicit3dInequality)!=null?y:!1});break;case!1:br=u4();break}let Ci=n.graphMode===113||n.graphMode===127;return{meshData:br,resolved:br.resolved,color:n.color,surfaceOpacity:Ci?1:(h=n.surfaceOpacity)!=null?h:1,uvArgs:(b=us[n.graphMode])!=null?b:[],extraMeshArgs:(T=Zl[n.graphMode])!=null?T:[],branchMode:d,compiled:r,restrictionShader:e.restrictionShader3d}}case 200:case 201:case 202:case 211:case 206:case 205:case 203:case 204:case 213:case 207:case 208:case 212:case 214:case 215:case 209:{let oe=(nt,re,Sn)=>{let Dt=(nh,rh)=>{let dd=Sn(nh,rh);return isNaN(dd[0])||isNaN(dd[1])||isNaN(dd[2])?NaN:nt(nh,rh)},Xe=t.viewport,{xmin:bt,xmax:Kn,ymin:et,ymax:Ge,zmin:an,zmax:pd}=Xe,Ef=(bt+Kn)/2,sP=(et+Ge)/2,aP=(an+pd)/2,Hq=Kn-bt,$q=Ge-et,Yq=pd-an,tN=Dg(Dt,{...re,map3d:(nh,rh)=>{let[dd,nN,rN]=Sn(nh,rh);return isNaN(dd)||isNaN(nN)||isNaN(rN)?[NaN,NaN,NaN]:[(dd-Ef)/Hq,(nN-sP)/$q,(rN-aP)/Yq]}});return{segments:tN.segments,resolved:tN.resolved,branchMode:8,color:n.color,lineWidth:n.lineWidth,lineOpacity:n.lineOpacity,listIndex:n.listIndex,operator:n.operator,compiled:r,poi:{}}},ee=r.fn,$=(I=n.slice_value)!=null?I:0,ne=(E=n.slice_coordinate)!=null?E:\"\",Ve=u,_t,ht,Rt,Ko={},br=!0,Ci=(nt,re)=>{let Dt=oe(nt,u,(et,Ge)=>{let{x:an,y:pd,z:Ef}=re(et,Ge,nt(et,Ge));return[an,pd,Ef]}),Xe=n.lineWidth,bt=Fg(Dt,t,Xe,$),Kn=bt.points;for(let et=0;et<Kn.length/3;et++){let Ge=Kn[3*et],an=Kn[3*et+1],pd=Kn[3*et+2],{x:Ef,y:sP,z:aP}=re(Ge,an,pd);Kn[3*et]=Ef,Kn[3*et+1]=sP,Kn[3*et+2]=aP}return bt},An=(nt,re)=>{let Sn=[];for(let bt=0;bt<nt.segments.length;bt++){let Kn=nt.segments[bt];for(let et=0;et<Kn.length/2;et++){let Ge=Kn[2*et],an=Kn[2*et+1];Sn.push(re(Ge,an))}bt<nt.segments.length-1&&Sn.push([NaN,NaN,0])}let Dt=n.lineWidth,Xe=t.viewport;return lf(Sn,Xe,Dt)},Nr=u,Hc=(nt,re)=>{var Dt;let Sn=oe(nt,Nr,re);return br=(Dt=Sn.resolved)!=null?Dt:!0,An(Sn,re)};switch(d){case 200:{if(ne===\"z\")return Ci((re,Sn)=>ee(re,Sn)-$,wG);if(ne===\"_implicit\"){let re=n.slice_function.fn;Rt=Hc((Xe,bt)=>re(Xe,bt,ee(Xe,bt)),(Xe,bt)=>[Xe,bt,ee(Xe,bt)]);break}let nt=ne===\"x\";_t=nt?Ve.y:Ve.x,ht=nt?re=>[$,re,ee($,re)]:re=>[re,$,ee(re,$)],Rt=ed(ht,_t,n.resolution,t);break}case 201:{if(ne===\"x\")return Ci((re,Sn)=>ee(re,Sn)-$,LG);if(ne===\"_implicit\"){let re=n.slice_function.fn;Rt=Hc((Xe,bt)=>re(ee(Xe,bt),Xe,bt),(Xe,bt)=>[ee(Xe,bt),Xe,bt]);break}let nt=ne===\"y\";_t=nt?Ve.z:Ve.y,ht=nt?re=>[ee($,re),$,re]:re=>[ee(re,$),re,$],Rt=ed(ht,_t,n.resolution,t);break}case 202:{if(ne===\"y\")return Ci((re,Sn)=>ee(re,Sn)-$,FG);if(ne===\"_implicit\"){let re=n.slice_function.fn;Rt=Hc((Xe,bt)=>re(Xe,ee(Xe,bt),bt),(Xe,bt)=>[Xe,ee(Xe,bt),bt]);break}let nt=ne===\"x\";_t=nt?Ve.z:Ve.x,ht=nt?re=>[$,ee($,re),re]:re=>[re,ee(re,$),$],Rt=ed(ht,_t,n.resolution,t);break}case 209:{let nt=r.fn;if(ne===\"x\")return Ci((re,Sn)=>nt($,re,Sn),LG);if(ne===\"y\")return Ci((re,Sn)=>nt(re,$,Sn),FG);if(ne===\"z\")return Ci((re,Sn)=>nt(re,Sn,$),wG);if(ne===\"_implicit\"){let{resolution:re}=n,Sn=re===void 0||isNaN(re)?wg:mr(OG(re),2,100);Rt=vG(r.fn,n.slice_function.fn,u,Sn);let Dt=t.viewport,Xe=[];for(let bt=0;bt<Rt.length/3;bt++)Xe.push([Rt[3*bt],Rt[3*bt+1],Rt[3*bt+2]]);Rt=lf(Xe,Dt,n.lineWidth),Ko=n.slice_function.executionMetadata;break}else throw new Error(\"Programming Error: unexpected slice coordinate\")}case 206:case 205:{let nt=ne===\"z\";_t=nt?Ve.t:Ve.z,ht=nt?re=>[ee(re,$),re,$]:re=>[ee($,re),$,re],Rt=vR(ht,_t,n.resolution,t);break}case 211:{let nt=r.fn,re;switch(ne){case\"x\":re=(et,Ge)=>nt(et,Ge)*Xn(et*a)-$;break;case\"y\":re=(et,Ge)=>nt(et,Ge)*Ln(et*a)-$;break;case\"r\":re=(et,Ge)=>nt(et,Ge)-$;break;case\"_implicit\":let Kn=n.slice_function.fn;re=(et,Ge)=>Kn(nt(et,Ge)*Xn(et*a),nt(et,Ge)*Ln(et*a),Ge,nt(et,Ge),et);break;default:throw new Error(\"Programming Error: bad slice\")}let Sn=ne===\"x\",Dt=ne===\"y\",Xe=(Kn,et)=>[Sn?$:nt(Kn,et)*Xn(Kn*a),Dt?$:nt(Kn,et)*Ln(Kn*a),et],bt=oe(re,Nr,Xe);Rt=An(bt,Xe),br=(S=bt.resolved)!=null?S:!0;break}case 213:{let nt=ne===\"x\",re=ne===\"y\",Sn=ne===\"z\",Dt=r.fn,Xe;switch(ne){case\"x\":Xe=(Ge,an)=>Ge*Xn(an*a)-$;break;case\"y\":Xe=(Ge,an)=>Ge*Ln(an*a)-$;break;case\"z\":Xe=(Ge,an)=>Dt(Ge,an)-$;break;case\"_implicit\":let et=n.slice_function.fn;Xe=(Ge,an)=>et(Ge*Xn(an*a),Ge*Ln(an*a),Dt(Ge,an),Ge,an);break;default:throw new Error(\"Programming Error: bad slice\")}let bt=(et,Ge)=>[nt?$:et*Xn(Ge*a),re?$:et*Ln(Ge*a),Sn?$:Dt(et,Ge)],Kn=oe(Xe,Nr,bt);Rt=An(Kn,bt);break}case 212:{let nt=ne===\"x\",re=ne===\"y\",Sn=ne===\"z\",Dt=r.fn,Xe;switch(ne){case\"x\":Xe=(Ge,an)=>Dt(Ge,an)*Ln(an*a)*Xn(Ge*a)-$;break;case\"y\":Xe=(Ge,an)=>Dt(Ge,an)*Ln(an*a)*Ln(Ge*a)-$;break;case\"z\":Xe=(Ge,an)=>Dt(Ge,an)*Xn(an*a)-$;break;case\"rho\":Xe=(Ge,an)=>Dt(Ge,an)-$;break;case\"_implicit\":let et=n.slice_function.fn;Xe=(Ge,an)=>et(Dt(Ge,an)*Ln(an*a)*Ln(Ge*a),Dt(Ge,an)*Ln(an*a)*Xn(Ge*a),Dt(Ge,an)*Xn(an*a),Dt(Ge,an),Ge,an);break;default:throw new Error(\"Programming Error: bad slice\")}let bt=(et,Ge)=>[nt?$:Dt(et,Ge)*Ln(Ge*a)*Xn(et*a),re?$:Dt(et,Ge)*Ln(Ge*a)*Ln(et*a),Sn?$:Dt(et,Ge)*Xn(Ge*a)],Kn=oe(Xe,Nr,bt);Rt=An(Kn,bt),br=(C=Kn.resolved)!=null?C:!0;break}case 215:case 214:{let nt=d===214?r.fn:(Sn,Dt)=>{let[Xe,bt]=r.fn(Sn,Dt);return[Xe,bt,0]},re;switch(ne){case\"x\":re=(Dt,Xe)=>nt(Dt,Xe)[0]-$;break;case\"y\":re=(Dt,Xe)=>nt(Dt,Xe)[1]-$;break;case\"z\":re=(Dt,Xe)=>nt(Dt,Xe)[2]-$;break;case\"u\":re=(Dt,Xe)=>Dt-$;break;case\"v\":re=(Dt,Xe)=>Xe-$;break;case\"_implicit\":let Sn=n.slice_function.fn;re=(Dt,Xe)=>{let[bt,Kn,et]=nt(Dt,Xe);return Sn(bt,Kn,et,Dt,Xe)};break;default:throw new Error(\"Programming Error: bad slice\")}Rt=Hc(re,nt),Ko=(_=(v=n.slice_function)==null?void 0:v.executionMetadata)!=null?_:{};break}case 203:case 204:{let nt=ne===\"r\";_t=nt?Ve.v:Ve.u,ht=nt?re=>[$,re,ee($,re)]:re=>[re,$,ee(re,$)],Rt=vR(ht,_t,n.resolution,t);break}case 207:case 208:{let nt=ne===\"theta\";_t=nt?Ve.v:Ve.u,ht=nt?re=>[ee($,re),$,re]:re=>[ee(re,$),re,$],Rt=IG(ht,_t,n.resolution,t);break}}let iP={goodCoercionCount:((L=Ko.goodCoercionCount)!=null?L:0)+((k=r.executionMetadata.goodCoercionCount)!=null?k:0),badCoercionCount:((Q=Ko.badCoercionCount)!=null?Q:0)+((w=r.executionMetadata.badCoercionCount)!=null?w:0)};return{branchMode:100,guid:Qr(),points:Rt,resolved:br,color:n.color,thickness:n.lineWidth,compiled:{...r,executionMetadata:iP}}}default:throw new Error(\"Programming Error: unexpected graphmode \"+d)}p=c.poi}if((!p||p.zeros.x.length+p.extrema.x.length+p.intercept.x.length>250)&&(p=n4()),d===1)for(let q in p){if(!p.hasOwnProperty(q))continue;let K=q;l=p[K].y,p[K].y=p[K].x,p[K].x=l}let f={segments:c.segments,resolved:c.resolved,branchMode:d,color:n.color,style:n.lineStyle,lineWidth:n.lineWidth,lineOpacity:n.lineOpacity,listIndex:n.listIndex,operator:n.operator,poi:p,compiled:r};if(d===6){let q=u;f.sampledDomain={min:q.min,max:q.max}}return c.fillSegments&&(f.fillSegments=c.fillSegments),f}function g4(e,t,n){let r,o,i,s,a=[],u=null;switch(n){case 6:u=kG;break;case 1:u=function(c){return[c[1],c[0]]};break}for(r=0;r<e.length;r++)for(s=e[r],o=0;o<s.length;o+=2)i=[s[o],s[o+1]],u&&(i=u(i)),a.push(i[0],i[1]);for(r=t.length-1;r>=0;r--)for(s=t[r],o=s.length-2;o>=0;o-=2)i=[s[o],s[o+1]],u&&(i=u(i)),a.push(i[0],i[1]);return a}function df(e,t,n){let r=l=>l[l.length-2],o=[],i=0,s=0,a=[],u=[],c=-1/0;for(;;){for(;s<e.length&&!(e[s].length>=2);)s+=1;for(;i<t.length&&!(t[i].length>=2);)i+=1;(s>=e.length||e[s][0]>c)&&(i>=t.length||t[i][0]>c)&&(a.length>0&&u.length>0&&o.push(g4(a,u,n)),a=[],u=[],c=Math.max(c,s<e.length?r(e[s]):1/0),c=Math.max(c,i<t.length?r(t[i]):1/0));let l=!1;if(s<e.length&&e[s][0]<=c&&(c=Math.max(c,r(e[s])),a.push(e[s]),s+=1,l=!0),i<t.length&&t[i][0]<=c&&(c=Math.max(c,r(t[i])),u.push(t[i]),i+=1,l=!0),!l)break}return o}function rd(e){let t=[],n={};for(let r=0;r<e.length;r++){let o=e[r],[i,s]=o;!isNaN(i)&&!isNaN(s)?t.push(o):n[r]=!0}return{points:t,droppedIndices:n}}var us={[8]:[\"x\",\"y\"],[106]:[\"x\",\"y\"],[120]:[\"y\",\"z\"],[122]:[\"y\",\"z\"],[107]:[\"y\",\"z\"],[121]:[\"x\",\"z\"],[123]:[\"x\",\"z\"],[108]:[\"x\",\"z\"],[109]:[\"r\",\"theta\"],[124]:[\"theta\",\"z\"],[110]:[\"theta\",\"z\"],[111]:[\"theta\",\"phi\"],[130]:[\"u\",\"v\"],[103]:[\"u\",\"v\"],[126]:[\"x\",\"y\"],[112]:[\"x\",\"y\",\"z\"],[113]:[\"x\",\"y\",\"z\"],[127]:[\"x\",\"y\"],[201]:[\"y\",\"z\"],[202]:[\"x\",\"z\"],[200]:[\"x\",\"y\"],[206]:[\"theta\",\"z\"],[205]:[\"theta\",\"z\"],[211]:[\"theta\",\"z\"],[203]:[\"r\",\"theta\"],[204]:[\"r\",\"theta\"],[213]:[\"r\",\"theta\"],[207]:[\"theta\",\"phi\"],[208]:[\"theta\",\"phi\"],[212]:[\"theta\",\"phi\"],[214]:[\"u\",\"v\"],[215]:[\"u\",\"v\"],[209]:[\"x\",\"y\",\"z\"],[210]:[\"x\",\"y\",\"z\"]},Zl={[110]:[\"r\"],[111]:[\"rho\"]};function lge(e){return e.branchMode===3||e.branchMode===25||Bl(e.branchMode)}function pge(e){return Bl(e.branchMode)}var A={X_OR_Y:\"X_OR_Y\",SINGLE_POINT:\"SINGLE_POINT\",POINT_LIST:\"POINT_LIST\",PARAMETRIC:\"PARAMETRIC\",POLAR:\"POLAR\",IMPLICIT:\"IMPLICIT\",POLYGON:\"POLYGON\",HISTOGRAM:\"HISTOGRAM\",DOTPLOT:\"DOTPLOT\",BOXPLOT:\"BOXPLOT\",STATS:\"STATS\",VECTOR2D:\"VECTOR2D\",POINT3D:\"POINT3D\",POINT3D_LIST:\"POINT3D_LIST\",TRIANGLE3D:\"TRIANGLE3D\",SEGMENT3D:\"SEGMENT3D\",VECTOR3D:\"VECTOR3D\",SPHERE3D:\"SPHERE3D\",CURVE3D_xyz_t:\"CURVE3D_xyz_t\",SURFACE_xyz_uv:\"SURFACE_xyz_uv\",SURFACE_z_r\\u03B8:\"SURFACE_z_r\\u03B8\",SURFACE_r_\\u03B8z:\"SURFACE_r_\\u03B8z\",SURFACE_r_\\u03B8\\u03C6:\"SURFACE_r_\\u03B8\\u03C6\",SURFACE_r_\\u03B8z_AMBIGUOUS:\"SURFACE_r_\\u03B8z_AMBIGUOUS\",SURFACE_AMBIGUOUS:\"SURFACE_AMBIGUOUS\",SURFACE_CONSTANT_AMBIGUOUS:\"SURFACE_CONSTANT_AMBIGUOUS\",SURFACE:\"SURFACE\",IMPLICIT_SURFACE:\"IMPLICIT_SURFACE\",IMPLICIT_SURFACE_AMBIGUOUS:\"IMPLICIT_SURFACE_AMBIGUOUS\",SLICE:\"SLICE\",SLICE_r\\u03B8z_at_z:\"SLICE_r\\u03B8z_at_z\",SLICE_zr\\u03B8_at_r:\"SLICE_zr\\u03B8_at_r\",SLICE_zr\\u03B8_at_\\u03B8:\"SLICE_zr\\u03B8_at_\\u03B8\",SLICE_zr\\u03B8_at_xyz:\"SLICE_zr\\u03B8_at_xyz\",SLICE_r\\u03B8\\u03C6_at_\\u03B8:\"SLICE_r\\u03B8\\u03C6_at_\\u03B8\",SLICE_r\\u03B8\\u03C6_at_\\u03C6:\"SLICE_r\\u03B8\\u03C6_at_\\u03C6\",SLICE_r\\u03B8\\u03C6_at_xyz:\"SLICE_r\\u03B8\\u03C6_at_xyz\",SLICE_xyz_uv:\"SLICE_xyz_uv\"},h4={X_OR_Y:{points:!1,lines:!0,fill:!1},SINGLE_POINT:{points:!0,lines:!1,fill:!1},POINT_LIST:{points:!0,lines:!1,fill:!1},PARAMETRIC:{points:!1,lines:!0,fill:!1},POLAR:{points:!1,lines:!0,fill:!1},IMPLICIT:{points:!1,lines:!0,fill:!1},POLYGON:{points:!1,lines:!0,fill:!0},HISTOGRAM:{points:!1,lines:!0,fill:!0},DOTPLOT:{points:!0,lines:!1,fill:!1},BOXPLOT:{points:!1,lines:!0,fill:!1},STATS:{points:!1,lines:!1,fill:!1},VECTOR2D:{points:!1,lines:!0,fill:!1},POINT3D:{points:!0,lines:!1,fill:!1},POINT3D_LIST:{points:!0,lines:!1,fill:!1},CURVE3D_xyz_t:{points:!1,lines:!0,fill:!1},SLICE:{points:!1,lines:!0,fill:!1},SLICE_r\\u03B8z_at_z:{points:!1,lines:!0,fill:!1},SLICE_zr\\u03B8_at_r:{points:!1,lines:!0,fill:!1},SLICE_zr\\u03B8_at_\\u03B8:{points:!1,lines:!0,fill:!1},SLICE_zr\\u03B8_at_xyz:{points:!1,lines:!0,fill:!1},SLICE_r\\u03B8\\u03C6_at_\\u03B8:{points:!1,lines:!0,fill:!1},SLICE_r\\u03B8\\u03C6_at_\\u03C6:{points:!1,lines:!0,fill:!1},SLICE_r\\u03B8\\u03C6_at_xyz:{points:!1,lines:!0,fill:!1},SLICE_xyz_uv:{points:!1,lines:!0,fill:!1},SEGMENT3D:{points:!1,lines:!0,fill:!1},VECTOR3D:{points:!1,lines:!0,fill:!1},SPHERE3D:{points:!1,lines:!0,fill:!1},SURFACE_xyz_uv:{points:!1,lines:!0,fill:!1},SURFACE_z_r\\u03B8:{points:!1,lines:!0,fill:!1},SURFACE_r_\\u03B8z:{points:!1,lines:!0,fill:!1},SURFACE_r_\\u03B8\\u03C6:{points:!1,lines:!0,fill:!1},SURFACE_r_\\u03B8z_AMBIGUOUS:{points:!1,lines:!0,fill:!1},SURFACE:{points:!1,lines:!0,fill:!1},TRIANGLE3D:{points:!1,lines:!0,fill:!1},SURFACE_AMBIGUOUS:{points:!1,lines:!0,fill:!1},SURFACE_CONSTANT_AMBIGUOUS:{points:!1,lines:!0,fill:!1},IMPLICIT_SURFACE:{points:!1,lines:!0,fill:!1},IMPLICIT_SURFACE_AMBIGUOUS:{points:!1,lines:!0,fill:!1}};function kR(e,t,n){var o,i,s,a,u,c;if(e===void 0)return{points:!1,lines:!1,fill:!1};let r=h4[e];switch(e){case A.SINGLE_POINT:return{points:!0,lines:!1,fill:!1};case A.POINT_LIST:case A.POINT3D_LIST:case A.DOTPLOT:return{points:(o=t.points)!=null?o:r.points,lines:(i=t.lines)!=null?i:r.lines,fill:!1};case A.POINT3D:return{points:(s=t.points)!=null?s:r.points,lines:!1,fill:!1};case A.PARAMETRIC:case A.POLYGON:case A.X_OR_Y:case A.VECTOR2D:case A.POLAR:case A.IMPLICIT:case A.HISTOGRAM:case A.BOXPLOT:case A.STATS:case A.CURVE3D_xyz_t:return{points:!1,lines:(a=t.lines)!=null?a:r.lines,fill:(u=t.fill)!=null?u:r.fill};case A.TRIANGLE3D:case A.SPHERE3D:case A.SURFACE:case A.SURFACE_r_\\u03B8z:case A.SURFACE_z_r\\u03B8:case A.SURFACE_r_\\u03B8\\u03C6:case A.SURFACE_xyz_uv:case A.IMPLICIT_SURFACE:case A.SURFACE_AMBIGUOUS:case A.SURFACE_CONSTANT_AMBIGUOUS:case A.SURFACE_r_\\u03B8z_AMBIGUOUS:case A.IMPLICIT_SURFACE_AMBIGUOUS:case A.SEGMENT3D:case A.VECTOR3D:case A.SLICE:case A.SLICE_r\\u03B8z_at_z:case A.SLICE_zr\\u03B8_at_r:case A.SLICE_zr\\u03B8_at_\\u03B8:case A.SLICE_zr\\u03B8_at_xyz:case A.SLICE_r\\u03B8\\u03C6_at_\\u03B8:case A.SLICE_r\\u03B8\\u03C6_at_\\u03C6:case A.SLICE_r\\u03B8\\u03C6_at_xyz:case A.SLICE_xyz_uv:return{points:!1,lines:(c=t.lines)!=null?c:r.lines,fill:!1};default:n&&n(e);let l=e;return kR(e,t)||l}}function ZG(e){if(e===void 0)return!1;switch(e){case A.SINGLE_POINT:case A.POINT_LIST:case A.PARAMETRIC:case A.POLYGON:case A.X_OR_Y:case A.VECTOR2D:case A.POLAR:case A.IMPLICIT:case A.SURFACE:case A.SURFACE_AMBIGUOUS:case A.SURFACE_CONSTANT_AMBIGUOUS:case A.SURFACE_r_\\u03B8z:case A.SURFACE_r_\\u03B8z_AMBIGUOUS:case A.SURFACE_z_r\\u03B8:case A.SURFACE_r_\\u03B8\\u03C6:case A.SURFACE_xyz_uv:case A.IMPLICIT_SURFACE:case A.IMPLICIT_SURFACE_AMBIGUOUS:case A.CURVE3D_xyz_t:case A.SLICE:case A.SLICE_r\\u03B8z_at_z:case A.SLICE_zr\\u03B8_at_r:case A.SLICE_zr\\u03B8_at_\\u03B8:case A.SLICE_zr\\u03B8_at_xyz:case A.SLICE_r\\u03B8\\u03C6_at_\\u03B8:case A.SLICE_r\\u03B8\\u03C6_at_\\u03C6:case A.SLICE_r\\u03B8\\u03C6_at_xyz:case A.SLICE_xyz_uv:case A.SEGMENT3D:case A.VECTOR3D:case A.SPHERE3D:case A.POINT3D:case A.POINT3D_LIST:case A.TRIANGLE3D:return!0;case A.HISTOGRAM:case A.BOXPLOT:case A.DOTPLOT:case A.STATS:return!1;default:return e}}function XG(e){return e===A.SURFACE_r_\\u03B8\\u03C6||e===A.SLICE_r\\u03B8\\u03C6_at_\\u03B8||e===A.SLICE_r\\u03B8\\u03C6_at_\\u03C6||e===A.SLICE_r\\u03B8\\u03C6_at_xyz}function WG(e){return e===A.SURFACE_z_r\\u03B8||e===A.SLICE_zr\\u03B8_at_r||e===A.SLICE_zr\\u03B8_at_\\u03B8||e===A.SLICE_zr\\u03B8_at_xyz}function jG(e){return e===A.SURFACE_r_\\u03B8z||e===A.SURFACE_r_\\u03B8z_AMBIGUOUS||e===A.SLICE_r\\u03B8z_at_z}var S4={};Tu(S4,{LinearToSRGB:()=>I4,SRGBToLinear:()=>CI,colorString:()=>JG,colors:()=>od,colors3d:()=>P4,convertColorStringToLinearRGB:()=>$R,getDisplayColor:()=>ea,invertColor:()=>x4,isValidHexColor:()=>EI,mutateOpacity:()=>T4,normalizeColor:()=>HR,parseHex:()=>QG,shadeColor:()=>b4});function HR(e){return EI(e)?(e.match(/^#([A-Fa-f0-9]{3})$/g)&&(e=\"#\"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),e.toLowerCase()):e}function EI(e){return typeof e==\"string\"&&(e.match(/^#([A-Fa-f0-9]{3})$/g)||e.match(/^#([A-Fa-f0-9]{6})$/g))}function b4(e,t){if(e=HR(e),!EI(e))return e;t>1&&(t=1),t<-1&&(t=-1);let n=parseInt(e.slice(1),16),r=t<0?0:255,o=t<0?t*-1:t,i=n>>16,s=n>>8&255,a=n&255;return JG(Math.round((r-i)*o)+i,Math.round((r-s)*o)+s,Math.round((r-a)*o)+a)}function JG(e,t,n){return\"#\"+(16777216+Math.round(e)*65536+Math.round(t)*256+Math.round(n)).toString(16).slice(1)}function x4(e){if(e=HR(e),!EI(e))return e;let t=\"0123456789abcdef\";return\"#\"+e.slice(1).split(\"\").map(n=>t[15-t.indexOf(n)]).join(\"\")}function QG(e){e=e.replace(/#/,\"\");let t,n,r;return e.length===3?(t=parseInt(e.slice(0,1)+e.slice(0,1),16),n=parseInt(e.slice(1,2)+e.slice(1,2),16),r=parseInt(e.slice(2,3)+e.slice(2,3),16)):e.length===6?(t=parseInt(e.slice(0,2),16),n=parseInt(e.slice(2,4),16),r=parseInt(e.slice(4,6),16)):(t=0,n=0,r=0),{r:t,g:n,b:r}}function T4(e,t){let n=/(rgba\\([\\d]+\\,\\ ?[\\d]+\\,\\ ?[\\d]+\\,\\ ?)[\\d.]+(\\))/;return e.match(n)?e.replace(n,`$1${t}$2`):e}function ea(e,t){if(t&&t.colorLatexValue){let n=t.colorLatexValue;return Array.isArray(n)?n[0]:n}return e.color}function CI(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function I4(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}function $R(e){let t=QG(e);return[CI(t.r/255),CI(t.g/255),CI(t.b/255)]}var od={RED:\"#c74440\",BLUE:\"#2d70b3\",GREEN:\"#348543\",PURPLE:\"#6042a6\",ORANGE:\"#fa7e19\",BLACK:\"#000000\",GRAY:\"#aaaaaa\",FOCUS_OUTLINE:\"#2f72dc\"},P4={RED:od.RED,BLUE:od.BLUE,GREEN:od.GREEN,ORANGE:od.ORANGE,PURPLE:od.PURPLE,GRAY:od.GRAY};function Io(e,t,n,r,o){let i=n.getDependencies(),s,a;switch(i.length){case 0:s=KG(n),a=n.boundDomain(\"x\");break;case 1:a=n.boundDomain(i[0]),fs(a)&&!Li(a)&&(s=KG(n));break;default:a=$r();break}return{graphMode:e.getGraphMode(t,n),color:ea(r,o),pointStyle:r.pointStyle,lineStyle:r.lineStyle,arrowMode:r.arrowMode,operator:e.getOperator(),isLinear:!!s,linearCoefficients:s,domainBound:a}}function KG(e){switch(e.valueType){case x:return YR(e);case D:{let t=YR(e.slot(0)),n=YR(e.slot(1));return!t||!n?void 0:[t,n]}default:return}}function YR(e){let t=e.getDependencies();switch(t.length){case 0:return[+e.asValue(),0];case 1:if(e.polynomialOrder(t[0])>1)return;let n=e.getPolynomialCoefficients(t[0]);return[n[0]?+n[0].asValue():0,n[1]?+n[1].asValue():0];default:return}}var Gg=class{constructor(t){this.parentType=t;this.count=0;this.intersections=[]}addPoint(t){this.intersections.push(t),this.count+=1}addPoints(t){this.intersections.push(...t),this.count+=t.length}addIntersection(t,n){n.valueType===D?this.addPoint(n.value):this.addPoints(n.value)}getPoints(){return this.intersections}},mf=class{constructor(t){this.parentType=t;this.count=0;this.intersectionsByIndex=new Map;if(t===Er)this.scalarType=he;else if(t===Eo)this.scalarType=Ae;else if(t===Co)this.scalarType=ue;else throw new Error(`Expected ListOfSegment or ListOfArc but got ${tt(t)}`)}getListItemIntersections(t){let n=this.intersectionsByIndex.get(t);return n||(n=new Gg(this.scalarType),this.intersectionsByIndex.set(t,n)),n}addIntersection(t,n){let r=cu(t);if(r!==void 0){let o=r-1,i=this.getListItemIntersections(o);n.valueType===Yt?i.addPoints(n.value):i.addPoint(n.value),this.count+=1}else{zu(n.valueType,[Yt]);for(let o=0;o<n.value.length;o++)this.getListItemIntersections(o).addPoint(n.value[o]);this.count+=n.value.length}}},ZR=class{constructor(){this.parentType=_e;this.count=0;this.intersectionsByEdgeIndex=new Map}getEdgeIntersections(t){let n=this.intersectionsByEdgeIndex.get(t);return n||(n=new Gg(he),this.intersectionsByEdgeIndex.set(t,n)),n}addPoint(t,n){this.getEdgeIntersections(t).addPoint(n),this.count+=1}addIntersection(t,n){if(t.type!==\"polygon-edge\")throw new Error(`Expected a polygon edge parent ref type but got ${t.type}`);let r=t.edgeIndex-1,o=this.getEdgeIntersections(r);n.valueType===Yt?(o.addPoints(n.value),this.count+=n.value.length):(o.addPoint(n.value),this.count+=1)}},XR=class{constructor(){this.parentType=wr;this.count=0;this.intersectionsByEdgeIndex=new Map}getEdgeIntersections(t){let n=this.intersectionsByEdgeIndex.get(t);return n||(n=new mf(Er),this.intersectionsByEdgeIndex.set(t,n)),n}addIntersection(t,n){if(t.type!==\"polygon-edge\")throw new Error(`Expected a polygon edge parent ref type but got ${t.type}`);let r=t.edgeIndex-1,o=this.getEdgeIntersections(r),i=cu(t);if(i!==void 0){let s=i-1;n.valueType===Yt?o.getListItemIntersections(s).addPoints(n.value):o.getListItemIntersections(s).addPoint(n.value),this.count+=1}else{zu(n.valueType,[Yt]);for(let s=0;s<n.value.length;s++)o.getListItemIntersections(s).addPoint(n.value[s]);this.count+=n.value.length}}},ff=class{constructor(){this.data={}}getChildIntersections(t){return this.data[t]}addChildIntersection(t,n){zu(n==null?void 0:n.valueType,[D,Yt]);let r;if(t.valueType==wr)r=this.data[t.id]||new XR;else if(t.valueType===Er||t.valueType===Eo||t.valueType===Co)r=this.data[t.id]||new mf(t.valueType);else if(t.valueType===_e)r=this.data[t.id]||new ZR;else if(t.valueType===he||t.valueType===Ae||t.valueType===ue)r=this.data[t.id]||new Gg(t.valueType);else return;this.data[t.id]=r,r.addIntersection(t.ref,n)}static compareIntersectionCounts({prevChildIntersections:t,nextChildIntersections:n}){var i,s;let r={},o=new Set([...Object.keys(t.data),...Object.keys(n.data)]);for(let a of o){let u=((i=t.data[a])==null?void 0:i.count)||0,c=((s=n.data[a])==null?void 0:s.count)||0;r[a]={prev:u,next:c}}return r}};function WR(e,t){let n;switch(t){case\"solvedEquation\":n=2;break;case\"baseComparator\":n=4;break;default:n=1;break}return Math.floor(e/n)}var C4={lineOpacity:\"computedLineOpacity\",lineWidth:\"computedLineWidth\",color:\"colorLatexValue\",fillOpacity:\"fillOpacity\",surfaceOpacity:\"surfaceOpacity\",resolution:\"resolution\"};function E4(e){return e.startsWith(\"shader:\")}function MI(e,t){return\"colorLatex\"in e&&E4(e.colorLatex)?e.colorLatex:t}function Aa(e,t,n){return Array.isArray(e)?e[WR(t,n)]:e}function ta(e,t,n){let r=1/0;for(let i of t){let s=e[i];Array.isArray(s)&&s.length<r&&(r=s.length)}let o=1;return n===\"solvedEquation\"?o=2:n===\"baseComparator\"&&(o=4),o*r}function bu(e,t,n,r){let o=WR(n,r),i=e.lineStyle,s=Aa(t.computedLineWidth,n,r),a=Aa(t.computedLineOpacity,n,r),u=Aa(t.computedFillOpacity,n,r),c=Aa(t.computedSurfaceOpacity,n,r),l=t.colorLatexValue?Aa(t.colorLatexValue,n,r):e.color,p=Aa(t.computedResolution,n,r);return{listIndex:o,style:i,lineWidth:s,lineOpacity:a,fillOpacity:u,surfaceOpacity:c,color:l,resolution:p}}function Po(e,{node:t,userData:n,metaData:r,concrete:o,graphInfo:i,styleBroadcastStrategy:s,policy:a},u){let c=ta(r,Object.keys(e).map(p=>C4[p]),s),l=[];return Xo.wrap(o).eachElement((p,d)=>{if(d>=c)return;let m=Io(t,a,p,n,r);m.graphMode=i.graphMode;let f=bu(n,r,d,s);m.listIndex=f.listIndex,m.style=f.style,\"lineWidth\"in e&&(m.lineWidth=f.lineWidth),\"lineOpacity\"in e&&(m.lineOpacity=f.lineOpacity),\"fillOpacity\"in e&&(m.fillOpacity=f.fillOpacity),\"surfaceOpacity\"in e&&(m.surfaceOpacity=f.surfaceOpacity),\"color\"in e&&(m.color=MI(n,f.color)),\"resolution\"in e&&(m.resolution=f.resolution),l.push(...u(p,m))}),l}function jR(...e){return e.some(t=>isNaN(t))}function _I(e,t){if(!t)return[];let n=[];for(let r of e){let o=t;if(\"listIndex\"in r&&r.listIndex!==void 0&&t instanceof mf&&(o=t.getListItemIntersections(r.listIndex)),r.branchMode===17||r.branchMode===19){zu(o.parentType,[he,Ae]);let i=o.getPoints();if(!i)continue;let s=0,a,u=1,c,[l,p,d,m]=r.segments[0];for(let f=0;f<i.length;f++){let[g,y]=i[f],h=ia(g,y,0,l,p,0,d,m,0);h<s&&(s=h,a=f),r.branchMode===17&&h>u&&(u=h,c=f)}a!==void 0&&n.push(vI(r,17,[[l,p,i[a][0],i[a][1]]])),c!==void 0&&n.push(vI(r,17,[[d,m,i[c][0],i[c][1]]]))}else if(r.branchMode===21){zu(o.parentType,[ue]);let i=o.getPoints();if(!i)continue;let[s,a,u,c,l]=r.segments[0],p=l-c+(l<c?1:-1)*2*Math.PI,d=[];for(let m of i){let[f,g]=m,y=Math.atan2(g-a,f-s),h=SO(y,c,p);0<h&&h<1&&d.push(h)}if(d.length){d.push(0,1),d.sort();let m=0,f=0;for(let h=0;h<d.length-1;h++){let b=d[h+1]-d[h];(m===void 0||b>m)&&(m=b,f=h)}let g=d[f],y=d[f+1];g>0&&n.push(vI(r,21,[[s,a,u,c,c+g*p]])),y<1&&n.push(vI(r,21,[[s,a,u,l,l-(1-y)*p]]))}}}return n}function vI(e,t,n){return{resolved:!0,branchMode:t,segments:n,operator:e.operator,poi:{},color:e.color,style:Td.DASHED,lineWidth:1,lineOpacity:.5,isIntersectionExtension:!0}}function RI(e){let t=[],n=[];for(let[r,o]of e)!isNaN(r)&&!isNaN(o)?t.push(r,o):(t.length>=4&&n.push(t),t=[]);return t.length>=4&&n.push(t),n}function e2({userData:e,metaData:t,reconciledProps:n,styleBroadcastStrategy:r,viewState:o,concrete:i}){let s=[],a=e.shouldGraph&&n.points,u=e.shouldGraph&&n.lines,c=[\"colorLatexValue\"];a&&c.push(\"computedPointOpacity\",\"computedPointSize\");let l=Xo.wrap(i).asValue();Xr(l);let p=ta(t,c,r),d=Math.min(l.length,p);if(a)for(let m=0;m<d;m++){let{color:f}=bu(e,t,m,r),g=Aa(t.computedPointSize,m,r);s.push({branchMode:114,position:l[m],radius:.02*g,guid:Qr(),color:f})}if(u){let m=Aa(t.computedLineWidth,0,r),{color:f}=bu(e,t,0,r);s.push({branchMode:100,points:lf(l,o.viewport,m),thickness:m,guid:Qr(),color:f})}return s}function t2(e){var E;let{userData:t,metaData:n}=e,{concrete:r}=e,o=n.colorLatexValue?!Array.isArray(n.colorLatexValue):!0,i=n.computedSurfaceOpacity,s=[],a=[],u=[],c=[],l=[],p=[],[d,m,f]=[new lt,new lt,new lt],[g,y,h]=[new lt,new lt,new lt],b=(S,C,v,_,L,k,Q,w,q)=>{if(g.set(S,C,v),y.set(_,L,k),h.set(Q,w,q),!g.isFinite()||!y.isFinite()||!h.isFinite())return!1;let K=s.length/3;return s.push(g.x,g.y,g.z,y.x,y.y,y.z,h.x,h.y,h.z),d.subVectors(g,h),m.subVectors(y,g),f.crossVectors(d,m),a.push(f.x,f.y,f.z,f.x,f.y,f.z,f.x,f.y,f.z),u.push(K,K+1,K+2),c.push(0,0,0,1,1,0),!0},T=()=>{let S={guid:Qr(),resolved:!0,positions:new Float32Array(s),normals:new Float32Array(a),faces:new Uint32Array(u),uvs:new Float32Array(c),extraAttrs:new Float32Array([])};return p.length&&(S.colors=new Float32Array(p)),S};if(r.valueType===ni&&!Array.isArray(i)){let S=n.computedSurfaceOpacity,C=\"\";if(o){let k=(E=n.colorLatexValue)!=null?E:t.color;C=MI(t,k)}let v=TT(r._chunk,e.policy),_=v.value,L=v.restriction;for(let k=0;k<_.length;k++){let[[Q,w,q],[K,le,te],[Be,Ze,oe]]=_[k],ee=b(Q,w,q,K,le,te,Be,Ze,oe);if(!o&&ee){let $=n.colorLatexValue[k],[ne,Ve,_t]=$R($);p.push(ne,Ve,_t,ne,Ve,_t,ne,Ve,_t)}ee&&l.push(k)}return[{meshData:T(),color:C,surfaceOpacity:S!=null?S:1,restrictionShader:L,listIndexes:l,branchMode:117}]}let I=r.getRestrictedFunctionForGLSL([\"x\",\"y\",\"z\"],e.policy.maxSurfaceUniforms());return r=I.concrete,Po({color:!0,surfaceOpacity:!0},{...e,concrete:r},(S,C)=>{var te;let[[v,_,L],[k,Q,w],[q,K,le]]=S.asValue();return s=[],a=[],u=[],c=[],b(v,_,L,k,Q,w,q,K,le),[{meshData:T(),color:MI(t,C.color),surfaceOpacity:(te=C.surfaceOpacity)!=null?te:1,restrictionShader:I.restriction,listIndexes:[0],branchMode:117}]})}function n2(e){var i;let{userData:t,metaData:n,concrete:r}=e,o=n.colorLatexValue?!Array.isArray(n.colorLatexValue):!0;if(r.valueType===Wi&&o&&!Array.isArray(n.computedLineWidth)){let s=(i=n.colorLatexValue)!=null?i:t.color,a=n.computedLineWidth,u=[];return Po({color:!0},e,c=>{if(c.valueType===zt){let[[l,p,d],[m,f,g]]=c.asValue();u.push(l,p,d,m,f,g,NaN,NaN,NaN)}return[]}),[{branchMode:119,guid:Qr(),points:u,color:s,thickness:a!=null?a:1}]}return Po({color:!0,lineWidth:!0},e,(s,a)=>{let{lineWidth:u,color:c}=a,l=s.asValue(),[[p,d,m],[f,g,y]]=l;return jR(p,d,m,f,g,y)?[]:[{branchMode:119,guid:Qr(),points:[p,d,m,f,g,y],color:c,listIndex:a.listIndex,thickness:u}]})}function r2(e){var i;let{userData:t,metaData:n,concrete:r}=e,o=n.colorLatexValue?!Array.isArray(n.colorLatexValue):!0;if(r.valueType===ji&&o&&!Array.isArray(n.computedLineWidth)){let s=(i=n.colorLatexValue)!=null?i:t.color,a=n.computedLineWidth,u=[];return Po({color:!0},e,c=>{if(c.valueType===ke){let[[l,p,d],[m,f,g]]=c.asValue();u.push(m,f,g,l+m,p+f,d+g)}return[]}),[{branchMode:129,guid:Qr(),points:u,color:s,thickness:a!=null?a:1}]}return Po({color:!0,lineWidth:!0},e,(s,a)=>{let{lineWidth:u,color:c}=a,l=s.asValue(),[[p,d,m],[f,g,y]]=l;return jR(p,d,m,f,g,y)?[]:[{branchMode:129,guid:Qr(),points:[f,g,y,p+f,d+g,m+y],color:c,thickness:u,listIndex:a.listIndex}]})}function o2(e){return Po({color:!0,resolution:!0,surfaceOpacity:!0},e,(t,n)=>{let{color:r,surfaceOpacity:o}=n,i=t.asValue(),[[s,a,u],c]=i,l=Math.abs(c);return isNaN(s)||isNaN(a)||isNaN(u)||isNaN(c)?[]:[{branchMode:118,position:[s,a,u],radius:[l,l,l],guid:Qr(),color:r,surfaceOpacity:o!=null?o:1,listIndex:n.listIndex}]})}function v4(){throw new Error(\"Programming error: this function is not expected to be called\")}function JR(e,t,n,r,o,i){let s=[];for(let a=0;a<t.otherVariableSolutionData.length;a++){let u=t.otherVariableSolutionData[a];if(!u)continue;let{coefficients:c,restriction:l}=u,p=c.argNames[0];if(p!==\"x\"&&p!==\"y\")continue;let d=c.getCompiledFunction().fn,m,f;p===\"y\"?(m=1,f=2):(m=2,f=1);let g=void 0,{listIndex:y,style:h,lineWidth:b,lineOpacity:T,color:I}=bu(o,i,a,g),E=nd(n,{graphMode:m,domainBound:$r(),lineWidth:b,operator:\"=\"},v4);if(!E)continue;let S=HG(d,E);for(let C of S){let v=new _n(l.substituteConstantArguments({[p]:C})),_=Io(e,r,v,o,i);_={..._,graphMode:f,lineWidth:b};let k=lc(e,r,v,n,_,o,i,void 0,t.branchMultiplier===2?\"solvedEquation\":void 0);for(let Q of k)s.push({...Q,listIndex:y,style:h,lineWidth:b,lineOpacity:T,color:I})}}return s.length>0?s:!1}function i2(e,t,n,r,o,i){let s=Io(e,t,n,o,i),a=s.graphMode,u=\"baseComparator\",c=o.lines===void 0?!0:o.lines;if(a===8||a===112||a===113||a===127||a===210)return lc(e,t,n,r,s,o,i);if(a===10)return[];if(!(n instanceof O.SolvedEquation))return[];let l=e.getOperator(),p=[],d=[],m=!0;n._expression.eachElement(T=>{p.push(T.getCompiledFunction());try{d.push(T.getCompiledDerivative())}catch(I){m=!1}}),m||(d=void 0);let f=[],g=[-1,0,0,1],y=ta(i,[\"computedLineWidth\",\"computedLineOpacity\",\"computedFillOpacity\",\"colorLatexValue\"],u),h=Math.min(p.length,y);for(let T=0;T<h;T++){let I=Io(e,t,n._expression.args[T],o,i);I.graphMode=a;let{listIndex:E,style:S,color:C,lineWidth:v,lineOpacity:_,fillOpacity:L}=bu(o,i,T,u);I.listIndex=E,I.style=S,I.color=C,s.graphMode===6&&(I.domain={type:\"1d\",min:i.evaluatedDomainMin,max:i.evaluatedDomainMax,isExplicit:i.isExplicitDomain});let k=Oa({viewState:r,graphInfo:I,compiled:p[T],derivative:d?d[T]:void 0});k.lineWidth=v,k.lineOpacity=_,k.fillOpacity=L,k.operator=yl(yo[l].inclusive,g[T%4]),c||(k.lineWidth=0),f.push(k)}for(let T=0;T<h;T+=4){let I=df(f[T+1].segments,f[T+2].segments,a);f.push({branchMode:7,listIndex:f[T].listIndex,segments:I,poi:{},fillOpacity:f[T].fillOpacity,color:f[T].color})}let b=JR(e,n,r,t,o,i);if(b){for(let T of b)T.operator=yl(yo[l].inclusive,0);Array.prototype.push.apply(f,b)}return f}function s2(e,t,n,r,o,i){let s=Io(e,t,n,o,i);if(s.graphMode===10)return[];let a=[],u=yl(yo[e._operators[0]].inclusive,0),c=yl(yo[e._operators[1]].inclusive,0),l=o.lines===void 0?!0:o.lines,p=[\"colorLatexValue\",\"computedFillOpacity\"];l&&p.push(\"computedLineWidth\",\"computedLineOpacity\");let d=ta(i,p),m=n._expressions;return Xr(m),Xo.eachArgs(m,(f,g)=>{let y=g;if(y>=d)return;let h=void 0,{color:b,lineWidth:T,lineOpacity:I,fillOpacity:E}=bu(o,i,y,h),S,C;f[0].type===\"IRExpression\"&&(S=lc(e,t,f[0],r,s,o,i)[0],S.listIndex=y,S.operator=u,S.color=b,S.lineWidth=T,S.lineOpacity=I,a.push(S)),f[1].type===\"IRExpression\"&&(C=lc(e,t,f[1],r,s,o,i)[0],C.listIndex=y,C.operator=c,C.color=b,C.lineWidth=T,C.lineOpacity=I,a.push(C));let v=S==null?void 0:S.segments,_=C==null?void 0:C.segments;if(Xr(v),Xr(_),S&&C){let L=df(v,_,S.branchMode);l||(S.lineWidth=0,C.lineWidth=0),a.push({branchMode:7,listIndex:S.listIndex,segments:L,lineOpacity:I,fillOpacity:E,poi:{},color:b})}}),a}function a2(e=void 0){let{xmin:t,xmax:n,ymin:r,ymax:o,zmin:i,zmax:s}=e!=null?e:new TI,a=[t,r,s,t,o,s,n,o,s,n,r,s,t,r,i,t,o,i,n,o,i,n,r,i,t,r,i,t,r,s,t,o,s,t,o,i,n,r,i,n,r,s,n,o,s,n,o,i,n,r,i,n,r,s,t,r,s,t,r,i,n,o,i,n,o,s,t,o,s,t,o,i],u=[0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0],c=[0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,0,1,1,0,1,0,1,1,1,1,1,0,1,0,0,0,0,0,1,1,1,1,0,1,0,1],l=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23];return{positions:new Float32Array(a),normals:new Float32Array(u),faces:new Uint16Array(l),uvs:new Float32Array(c)}}var{abs:Xl,min:QR,max:KR}=Math;function eD(e,t){let{xmin:n,xmax:r,ymin:o,ymax:i,zmin:s,zmax:a}=t,u=[[n,o,a],[n,i,a],[r,i,a],[r,o,a],[n,o,s],[n,i,s],[r,i,s],[r,o,s]],c=[[0,1],[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[1,5],[2,6],[3,7]],l=[];for(let[v,_]of c){let L=u[v],k=u[_],Q=e(...L),w=e(...k),q=Q/(Q-w);0<=q&&q<=1&&l.push(Fs(L,k,q))}if(l.length<3)return;let p=QR(...l.map(v=>v[0])),d=KR(...l.map(v=>v[0])),m=QR(...l.map(v=>v[1])),f=KR(...l.map(v=>v[1])),g=QR(...l.map(v=>v[2])),y=KR(...l.map(v=>v[2])),h=e(n,o,s),b=(e(r,o,s)-h)/(r-n),T=(e(n,i,s)-h)/(i-o),I=(e(n,o,a)-h)/(a-s),E,S,C;return Xl(I)>=Xl(b)&&Xl(I)>=Xl(T)?(E=(v,_)=>[v,_,s-(h+b*(v-n)+T*(_-o))/I],S=new ze(p,d),C=new ze(m,f)):Xl(T)>=Xl(I)&&Xl(T)>=Xl(b)?(E=(v,_)=>[v,o-(h+b*(v-n)+I*(_-s))/T,_],S=new ze(p,d),C=new ze(g,y)):(E=(v,_)=>[n-(h+T*(v-o)+I*(_-s))/b,v,_],S=new ze(m,f),C=new ze(g,y)),{explicitPlane:E,u:S,v:C}}function qg(e,t){let n=[],r=[],o=[],i=[],s=eD(e,t);if(s){let{explicitPlane:a,u,v:c}=s;n.push(...a(u.min,c.min),...a(u.max,c.min),...a(u.min,c.max),...a(u.max,c.max));let l=new lt(n[0],n[1],n[2]),p=new lt(n[3],n[4],n[5]),d=new lt(n[6],n[7],n[8]),m=new lt().subVectors(d,l),f=new lt().subVectors(l,p),g=m.cross(f).normalize();r.push(g.x,g.y,g.z,g.x,g.y,g.z,g.x,g.y,g.z,g.x,g.y,g.z),o.push(0,0,0,1,1,0,1,1),i.push(0,1,2,3,2,1)}return{positions:n,normals:r,faces:i,uvs:o,resolved:!0,extraAttrs:[]}}function u2(e,t,n){let r=new ga({argNames:t,argTypes:n}),o=new ho(e,0,e.getReturnIndex(),r);if(t.length!==n.length)throw new Error(\"newArgNames is not same length as newArgTypes.\");for(let i=0;i<e.argNames.length;i++){let s=t.indexOf(e.argNames[i]);if(s===-1)throw new Error(\"newArgNames is not a superset of chunk.argNames.\");if(n[s]!==e.argTypes[i])throw new Error(\"newArgTypes does not match chunk.argTypes where it should.\")}return o.copyUntilEnd((i,s,a)=>{if(a<e.argNames.length)return t.indexOf(e.argNames[a]);if(me(s)){let u=o.mapArgs(s.args);return i.copyInstructionWithArgs(s,u)}else return o.copyLeafOrFunctionHeader(s)}),r}function M4(e,t){let n={referenced:Yr(e,t),listLengthContext:h0()};return nD(e,0,t,n)}function yf(e){return M4(e,e.getReturnIndex())}function nD(e,t,n,r){let{referenced:o}=r,i=0;for(let s=t;s<=n;s++){if(!o[s])continue;let a=e.getInstruction(s);Zr(a)?(i+=_4(e,s,a,r),s=a.endIndex):i+=R4(e,s,r)}return i}function _4(e,t,n,r){switch(n.type){case 19:{let o=e.getInstruction(n.args[0]),i=e.getInstruction(n.args[1]);if(!De(o)||!De(i))return 1/0;let s=Math.max(0,1+Math.round(F(i.value))-Math.round(F(o.value)));if(!isFinite(s))return 1/0;if(s===0)return 0;let a=nD(e,t+1,n.endIndex-1,r);return s*a}case 23:{let o=e.getInstruction(n.args[0]);if(!De(o))return 1/0;let i=F(o.value);if(!isFinite(i))return 1/0;if(i===0)return 0;let s=nD(e,t+1,n.endIndex-1,r);return i*s}case 21:case 50:case 53:return 1/0;default:throw new Error(`Unexpected op code ${n.type}: expected an instruction that begins a block`)}}function R4(e,t,n){let r=e.getInstruction(t);if(ux(r)||Zr(r)||mo(r))return 0;switch(r.type){case 8:case 9:case 10:case 14:case 56:case 11:case 25:case 26:case 27:case 28:case 29:case 31:case 32:case 33:return 1;case 12:case 13:return 5;case 15:case 16:return 5;case 37:let o=w4[r.symbol];return o===void 0?1/0:typeof o==\"number\"?o:o(e,t,r,n);case 38:return r.args.length;case 39:case 40:case 41:return 5;case 47:case 48:return 0;case 42:case 44:case 49:case 55:case 4:return 1/0;default:throw new Error(`Unexpected op code ${r.type}`)}}function D4(e,t,n,r){var o;return(o=Vn(e,n.args[0],r.listLengthContext))!=null?o:1e4}function N4(e,t,n,r){var o;return(o=Vn(e,n.args[1],r.listLengthContext))!=null?o:1e4}function O4(e,t,n,r){var i;let o=1/0;for(let s of n.args)o=Math.min(o,(i=Vn(e,s,r.listLengthContext))!=null?i:1e4);return o}function ki(e){return function(t,n,r,o){return e*D4(t,n,r,o)}}function A4(e){return function(t,n,r,o){return e*N4(t,n,r,o)}}function tD(e){return function(t,n,r,o){return e*O4(t,n,r,o)}}var w4={abs:1,sign:1,min:1,max:1,sqrt:1,exp:5,complexExp:5,ln:5,complexLn:5,log:5,complexLog:5,complexSqrt:5,complexPow:5,rtxsqpone:5,rtxsqmone:5,sin:5,complexSin:5,cos:5,complexCos:5,tan:5,complexTan:5,arcsin:5,arccos:5,sinh:5,complexSinh:5,cosh:5,complexCosh:5,tanh:5,complexTanh:5,arcsinh:5,arccosh:5,arctanh:5,csc:5,complexCsc:5,sec:5,complexSec:5,cot:5,complexCot:5,arccsc:5,arcsec:5,arccot:5,csch:5,complexCsch:5,sech:5,complexSech:5,coth:5,complexCoth:5,arccsch:5,arcsech:5,arccoth:5,arctan:5,factorial:5,floor:5,ceil:5,round:5,distance:5,distanceThreeD:5,erf:5,logbase:5,complexLogbase:5,hypot:5,mod:5,rgb:5,hsv:5,complex:5,arg:5,complexDivide:5,coerceComplexToReal:5,peelableCoerceComplexToReal:5,coerceRealToComplex:5,restriction:0,restrictionToBoolean:0,wirtingerEqualOrWarning:0,mean:ki(5),total:ki(5),var:ki(5),varp:ki(5),stdev:ki(5),stdevp:ki(5),mad:ki(5),listMin:ki(5),listMax:ki(5),median:ki(5),argmin:ki(5),argmax:ki(5),gcd:ki(5),lcm:ki(5),sortPerm:ki(5),complexSortPerm:ki(5),elementsAt:A4(5),cov:tD(5),covp:tD(5),corr:tD(5)};function c2(e){let t=0,n=0,r=[],o=Yr(e,e.getReturnIndex()),i=s_(e);for(let s=0;s<e.instructionsLength();s++){if(!o[s])continue;let a=e.getInstruction(s);a.type===25?r[s]=1:a.type===31||a.type===32?r[s]=r[a.args[0]]+r[a.args[1]]:r[s]=0,Ol(e,a)&&i[a.args[0]]&&(t+=1,n+=r[a.args[0]])}return{numRestrictions:t,numEqualityRestrictions:n}}function gf(e,t,n){try{return L4(e,t,n)}catch(r){return r instanceof M?r:V(r)}}function L4(e,t,n){var l,p;if(!e.is3dProduct()||n.type===\"Error\")return n;if(!(n instanceof _n))return V(\"Expected peel error to be checked on an IRExpression\");function r(d,m){let f=m.filter(g=>d.indexOf(g)<0);if(f.length)return fv(f[0]).allowExport().setDependencies(f)}function o(){let d=DI(s),m=F4(e,n);return r(d,m)}function i(){let d=l2(s);if(s===117){let f=B4(n,e);return f.error===u_?yv():r(d,f.mispredicted)}let m=V4(e,n,s);return r(d,m)}let s=t.getGraphMode(e,n),a=n._chunk,{numRestrictions:u,numEqualityRestrictions:c}=c2(a);if(c!==0)if(c===1){if(u!==c&&!t.isInequality())return cE();let f=wc(a,[],{allowSlices:!0}).getSliceVariablesOrImplicit();if(f.length!==1)return $u();let g=rD(s),y=f[0];if(g.indexOf(y)<0)return y===\"_implicit\"?$u().allowExport():hv(y).allowExport().setDependencies([y])}else return uE();return(p=(l=o())!=null?l:i())!=null?p:n}function F4(e,t){let n=wa(e,t);return t.getDependencies().filter(o=>n.indexOf(o)<0)}function V4(e,t,n){let r=wa(e,t),o=new Set;if(t instanceof _n){let s=t.getRestrictedFunctionForGLSL(DI(n),e.maxSurfaceUniforms()).concrete;for(let a of s.getDependencies())r.indexOf(a)>-1||o.add(a)}return[...o]}function B4(e,t){let n=new Set,r;if(e instanceof _n){let o=e._chunk;o.argNames.forEach(s=>n.add(s));let i=TT(o,t);r=i.error,i.restriction!==void 0&&[\"x\",\"y\",\"z\"].forEach(s=>n.delete(s))}return{mispredicted:[...n],error:r}}function DI(e){var n;if(!oc(e))return[];let t=G4(e)?[\"x\",\"y\",\"z\"]:[];return e===211&&t.push(\"r\"),e===212&&t.push(\"rho\"),t.push(...(n=Zl[e])!=null?n:[]),t.push(...l2(e).filter(r=>t.indexOf(r)<0)),t}function G4(e){return q4(e)||e==200||e==201||e==202||e==211||e==212||e==213||e==214||e==215}function q4(e){if(!oc(e))return!1;switch(e){case 106:case 107:case 108:case 110:case 111:case 109:case 122:case 123:case 112:case 131:case 113:case 127:case 130:case 103:case 210:case 117:return!0;case 124:case 120:case 121:case 126:case 114:case 118:case 119:case 129:case 128:case 100:case 200:case 201:case 202:case 206:case 205:case 211:case 203:case 204:case 213:case 207:case 208:case 212:case 214:case 215:case 209:return!1;default:return!1}}function l2(e){var t;return oc(e)?(t=us[e])!=null?t:[]:[]}var U4=e=>{let t=[],n=[],r=e.length;for(let o=0;o<r;o++)t.push(e[o][0]),n.push(e[o][1]);return{defined:{x:t,y:n}}},Hi=U4;function d2(e,t,n){let r=e!==void 0&&t!==void 0?Math.min(e,t):void 0,o=e!==void 0&&t!==void 0?Math.max(e,t):void 0;switch(n){case\"left\":return[[-1/0,e]];case\"right\":return[[e,1/0]];case\"inner\":return[[r,o]];case\"outer\":return[[-1/0,r],[o,1/0]];default:throw new Error(`Unexpected tails ${n}`)}}function z4(e){let{viewState:t,graphInfo:n,compiled:r,derivative:o,bounds:i}=e,s=Zi(n),a=fr(n.domainBound,ys(i));if(!Li(a))return s.domainBound=a,s.lineStyle=Td.SOLID,Oa({graphInfo:s,viewState:t,compiled:r,derivative:o})}function m2(e){let{viewState:t,graphInfo:n,compiled:r,minOverride:o,maxOverride:i,showPoint:s}=e,a=r.fn,u=nd(t,n,a),c;if(!u)c={segments:[],resolved:!0};else{let{min:d,max:m}=u;c=zG({fn:a,min:Math.max(d,o!=null?o:0),max:i!==void 0?Math.min(i,m):m})}let{points:l,droppedIndices:p}=rd(c.segments);return{segments:[l],droppedIndices:p,branchMode:3,color:n.color,style:n.pointStyle,poi:Hi(c.segments),resolved:c.resolved,showPoint:s}}function NI(e){let{viewState:t,graphInfo:n,compiled:r,bounds:o,showPoint:i}=e,s=Zi(n),a=fr(n.domainBound,ys(o));if(!Li(a))return s.domainBound=a,s.pointStyle=Xc.POINT,m2({graphInfo:s,viewState:t,compiled:r,showPoint:i,minOverride:void 0,maxOverride:void 0})}function k4(e){let{viewState:t,graphInfo:n,compiled:r,cdfBound1:o,cdfBound2:i,tails:s,maxOverride:a,showPoint:u}=e,c=d2(o,i,s),l=[];for(let[p,d]of c){p=Math.ceil(p),d=Math.floor(d);let m=a!==void 0?a:1/0;p===-1/0&&d>=m?l.push(NI({bounds:[p,m],viewState:t,graphInfo:n,compiled:r,showPoint:u})):p===-1/0&&d<1/0?l.push(NI({bounds:[p,d],viewState:t,graphInfo:n,compiled:r,showPoint:u})):p>-1/0&&d>=m?l.push(NI({bounds:[p,m],viewState:t,graphInfo:n,compiled:r,showPoint:u})):l.push(NI({bounds:[p,d],viewState:t,graphInfo:n,compiled:r,showPoint:u}))}return l}function H4(e){if(!e)return;let t=e.defaults.map((n,r)=>{var o,i;return(i=(o=e.evaluatedParams)==null?void 0:o[r])!=null?i:n});switch(e.symbol){case\"tdist\":{let[n,r,o]=t,i=Qh(0,n!=null?n:1);return{type:\"continuousDistribution\",xmin:-3*o+r,xmax:3*o+r,ymin:0,ymax:i/o}}case\"normaldist\":{let[n,r]=t,o=Kh(n,n,r);return{type:\"continuousDistribution\",xmin:n-2*Math.abs(r),xmax:n+2*Math.abs(r),ymin:0,ymax:o}}case\"chisqdist\":{let[n]=t;n===void 0&&(n=2);let r=n<2?5:vS(n-2,n);return{type:\"continuousDistribution\",xmin:n-2*Math.sqrt(2*n),xmax:n+2*Math.sqrt(2*n),ymin:0,ymax:r}}case\"poissondist\":{let[n]=t;n===void 0&&(n=.5);let r=Math.max(tb(Math.floor(n),n),tb(Math.ceil(n),n));return{type:\"discreteDistribution\",xmin:0,xmax:2.5*n,ymin:0,ymax:r}}case\"uniformdist\":{let[n,r]=t,o=(n+r)/2,i=r-n,s=MS(o,n,r);return{type:\"continuousDistribution\",xmin:n-i/3,xmax:r+i/3,ymin:0,ymax:s}}case\"binomialdist\":{let[n,r]=t;n===void 0&&(n=1);let o=eb(r*n,n,r);return{type:\"discreteDistribution\",xmin:0,xmax:n,ymin:0,ymax:o}}case\"geodist\":{let[n]=t,r=n;return{type:\"discreteDistribution\",xmin:1,xmax:-5/Math.log1p(-n),ymin:0,ymax:r}}default:throw new Error(`Unhandled distribution type ${e.symbol}`)}}function p2(e){var t;if(e!==void 0&&e.symbol===\"binomialdist\")return(t=e.evaluatedParams)==null?void 0:t[0]}function $4(e){if(e!==void 0&&e.symbol===\"geodist\")return 1}function f2(e,t,n,r,o,i,s){var h,b;let a=s.evaluatedDistributionSpec,u=s.evaluatedCDFBound1,c=s.evaluatedCDFBound2,l=H4(a),p=a&&a.discrete,d=(b=(h=i.cdf)==null?void 0:h.tails)!=null?b:\"inner\",m=u!==void 0&&!isNaN(u),f=c!==void 0&&!isNaN(c)||d===\"right\"||d===\"left\",g=m&&f&&o,y=[{...p?m2({viewState:t,graphInfo:{...n,pointStyle:g?Xc.OPEN:Xc.POINT},compiled:e,showPoint:i.shouldGraph,minOverride:$4(a),maxOverride:p2(a)}):Oa({viewState:t,graphInfo:n,compiled:e}),boundingBox:l}];if(g)if(p){let T=k4({viewState:t,graphInfo:n,compiled:e,tails:d,cdfBound1:u,cdfBound2:c,maxOverride:p2(a),showPoint:i.shouldGraph});y.push(...T.filter(E=>!!E));let I=[];T.forEach(E=>E==null?void 0:E.segments[0].forEach(S=>{!isNaN(S[0])&&!isNaN(S[1])&&I.push([S[0],0,S[0],S[1]])})),y.push({branchMode:5,segments:I,boundingBox:l,poi:{},color:n.color})}else d2(u,c,d).map(I=>z4({bounds:I,viewState:t,graphInfo:n,compiled:e,derivative:r})).forEach(I=>{if(I&&I.segments.length){let E,S;for(let C=0;C<I.segments.length;C++){let v=I.segments[C];if(v.length>=4){E=v[0];break}}for(let C=I.segments.length-1;C>=0;C--){let v=I.segments[C];if(v.length>=4){S=v[v.length-2];break}}if(E!==void 0&&S!==void 0&&isFinite(E)&&isFinite(S)){let C=df(I.segments,[[E,0,S,0]],I.branchMode);y.push({branchMode:7,segments:C,poi:{},color:n.color})}}});return y}var Y4={branchesReplacement:function(e,t,n,r){}};function h2(e,t){let{viewState:n,concrete:r,policy:o,userData:i,metaData:s}=t,a=r.valueType===x;return Po({lineOpacity:!0,lineWidth:!0,resolution:!0,fillOpacity:!0,surfaceOpacity:!0,color:!0},t,(u,c)=>{var I,E,S,C,v,_,L,k,Q,w,q,K;(e===6||e===110||e===124)&&(c.domain={type:\"1d\",min:s.evaluatedDomainMin,max:s.evaluatedDomainMax,isExplicit:s.isExplicitDomain});let l=(I=us[e])!=null?I:[],p=u.getCompiledFunction(l);(e==130||e==103||e==111||e==109)&&(c.domain=(E=p.domain)!=null?E:{type:\"2d\",uMin:s.evaluatedDomain3DMin1,uMax:s.evaluatedDomain3DMax1,vMin:s.evaluatedDomain3DMin2,vMax:s.evaluatedDomain3DMax2});let d=[],m;try{m=u.getCompiledDerivative()}catch(le){m=void 0}if(((S=s.evaluatedDistributionSpec)==null?void 0:S.type)===\"distribution\"){let le=f2(p,n,c,m,a,i,s);if(le)return le}let f=nR(c.graphMode),g=(C=i.extendTo3D)!=null?C:!1,y=f&&!g,h=!o.is3dPolicy()||y,b=(v=i.lines)!=null?v:h,T=(_=i.lines)!=null?_:!y;if(c.graphMode===127&&!g&&((L=i.lines)==null||L)){let le=(k=us[c.graphMode])!=null?k:[],te=u._chunk.copy();te.GreaterEqual([te.getReturnIndex(),te.ColdConstant(0)]);let Be=u.getCompiledFunction(le),Ze=0,oe=n.viewport,$=qg((_t,ht,Rt)=>Rt-Ze,oe);return[{meshData:Ds($),color:c.color,surfaceOpacity:(Q=c.surfaceOpacity)!=null?Q:1,uvArgs:(w=us[c.graphMode])!=null?w:[],extraMeshArgs:(q=Zl[c.graphMode])!=null?q:[],branchMode:106,compiled:Be,restrictionShader:Lo(te,o.maxSurfaceUniforms())}]}if(f&&(i.lines===!0?(b=y,T=!y):i.lines===!1&&(b=!1,T=!1)),T&&oc(c.graphMode)){let le=DI(c.graphMode);if(c.graphMode===113||c.graphMode===127){let{positions:te,normals:Be,faces:Ze,uvs:oe}=a2(),ee={guid:Qr(),isDomainCube:!0,resolved:!0,positions:te,normals:Be,faces:Ze,uvs:oe,extraAttrs:new Float32Array([])},$=u.toImplicitBool();d.push({meshData:ee,branchMode:113,color:c.color,surfaceOpacity:1,uvArgs:[],extraMeshArgs:[],compiled:p,restrictionShader:Lo($._chunk,o.maxSurfaceUniforms()),listIndex:c.listIndex});let ne=xF($._chunk,u._chunk,le);for(let Ve of ne){let _t=Z4(Ve.value,Ve.restriction,o.maxSurfaceUniforms()),ht=g2(c,_t,n,o);(ht.branchMode===113||ht.branchMode===131||ht.branchMode===118)&&(ht.listIndex=c.listIndex),d.push(ht)}}else{let te=u.getRestrictedFunctionForGLSL(le,o.maxSurfaceUniforms()),Be=g2(c,te,n,o);d.push(Be)}}if(b&&X4(s,c),!oc(c.graphMode)){let le=Y4.branchesReplacement(t,u,c,Lo);if(le)return le.map(Be=>({branchMode:Be.graphMode,...Be}));let te=Oa({viewState:n,graphInfo:c,compiled:p,derivative:m});if(o.is3dPolicy()&&b&&bI(te.branchMode)){let Be=(K=c.lineWidth)!=null?K:1;d.push(Fg(te,n,Be))}else if(te.fillSegments){let{fillSegments:Be,...Ze}=te;b||(Ze.lineWidth=0),d.push(Ze)}else b||(te.lineWidth=0),(b||!oc(e))&&d.push(te);c.graphMode===8&&c.operator!==\"=\"&&d.push({branchMode:7,segments:te.fillSegments,poi:{},listIndex:c.listIndex,color:c.color,fillOpacity:c.fillOpacity})}return d})}function Z4(e,t,n){let r;if(t)try{r=Lo(t,n)}catch(o){t=void 0}return r&&t?{concrete:new _n(e),restriction:r,restrictionExpr:new _n(t)}:{concrete:new _n(e),restriction:void 0,restrictionExpr:void 0}}function X4(e,t){var r,o,i;if(nR(t.graphMode))switch(t.graphMode){case 121:case 123:{t.graphMode=2,t.willConvertTo3D=!0,(r=t.lineWidth)!=null||(t.lineWidth=1);break}case 120:case 122:{t.graphMode=1,t.willConvertTo3D=!0,(o=t.lineWidth)!=null||(t.lineWidth=1);break}case 124:let{min:s,max:a}=((i=t.domain)==null?void 0:i.type)===\"1d\"?t.domain:{min:0,max:2*Math.PI};t.graphMode=6,t.domain={type:\"1d\",min:s,max:a,isExplicit:e.isExplicitDomain};break;case 126:t.graphMode=8;break}}function y2(e,t,n,r){var s;let o,i;if(t.restrictionExpr){let a=t.restrictionExpr._chunk;if(!r.canRaycastWithCost(yf(a)))return;try{o=Xm(a,r.maxRayCastUniforms()),i=Lo(a,r.maxRayCastUniforms())}catch(u){return}}try{let a;if(n===\"implicit\")a=t.concrete._chunk;else{let p=t.concrete._chunk.copy(),d=u2(p,[\"x\",\"y\",\"z\"],[x,x,x]),m=[\"x\",\"y\",\"z\"].indexOf(n),f=d.Subtract([m,d.getReturnIndex()]);d.setReturnIndex(f),a=d}let u=yf(a);if(!r.canRaycastWithCost(u))return;let c=Lo(a,r.maxRayCastUniforms()),l=Xm(a,r.maxRayCastUniforms());return{fxn:c,intervalFxn:l,color:e.color,isSurfaceSelected:!1,surfaceOpacity:e.graphMode===113?1:(s=e.surfaceOpacity)!=null?s:1,branchMode:131,operator:oD(e.operator),guid:Qr(),branchId:\"\",restrictionShader:i,intervalRestrictionShader:o,listIndex:e.listIndex}}catch(a){return}}function oD(e){switch(e){case\"<\":case\">\":return\">\";case\"<=\":case\">=\":return\">=\";case\"=\":return\"=\";case\"!=\":throw new Error(\"Impossible to get inequality comparison\")}}function g2(e,t,n,r){var l,p,d;let o=(l=us[e.graphMode])!=null?l:[],i=t.concrete.getCompiledFunction(o),s,a,u=!1;if(e.graphMode===112||e.graphMode===126||e.graphMode===113){e.operator!==\"=\"&&(u=!0);try{s=t.concrete.gradient([\"x\",\"y\",\"z\"])._chunk,a=s.getCompiledFunction([\"x\",\"y\",\"z\"]).fn}catch(m){}}if(e.graphMode===112&&a&&s){let m=W4(i.fn,a,s,n.viewport);if(m)return{branchMode:118,position:m.center,radius:m.radii,guid:Qr(),color:e.color,restrictionShader:t.restriction,surfaceOpacity:(p=e.surfaceOpacity)!=null?p:1}}let c=e.graphMode;if((c===112||c===113||c===127||c===106||c===107||c===108)&&t.concrete._chunk.isLinearIn([\"x\",\"y\",\"z\"])||c===106&&t.concrete._chunk.isConstant()){let m=n.viewport,f;switch(c){case 106:f=(h,b,T)=>T-i.fn(h,b);break;case 107:f=(h,b,T)=>h-i.fn(b,T);break;case 108:f=(h,b,T)=>b-i.fn(h,T);break;case 112:case 113:case 127:f=i.fn;break}let g=Ds(qg(f,m)),y=c===113||c===127;return c===127&&(c=113),{meshData:g,color:e.color,surfaceOpacity:y?1:(d=e.surfaceOpacity)!=null?d:1,uvArgs:[],extraMeshArgs:[],branchMode:c,compiled:i,restrictionShader:t.restriction}}if(r.isRayCastEnabled()&&(c===112||c===113)){let m=y2(e,t,\"implicit\",r);if(m)return m}if(r.isRayCastEnabled()&&(c===107||c===108||c===106)){let m={[107]:\"x\",[108]:\"y\",[106]:\"z\"},f=y2(e,t,m[c],r);if(f)return f}return Oa({viewState:n,graphInfo:e,compiled:i,restrictionShader3d:t.restriction,isImplicit3dInequality:u,gradient:a,dependencies:t.concrete._dependencies})}function W4(e,t,n,r){if(r.zmin===void 0||r.zmax===void 0)return;let o=n.argNames.indexOf(\"x\"),i=n.argNames.indexOf(\"y\"),s=n.argNames.indexOf(\"z\");if(o===-1||i===-1||s===-1)return;let a=n.getInstruction(n.getReturnIndex());if(a.type!==38||a.args.length!==3)return;let[u,c,l]=a.args,p=wo(n,o,{allowRestriction:!1,allowClosedBlockReferences:!1}),d=wo(n,i,{allowRestriction:!1,allowClosedBlockReferences:!1}),m=wo(n,s,{allowRestriction:!1,allowClosedBlockReferences:!1});if(Rn(p,u)!==1||Rn(d,c)!==1||Rn(m,l)!==1||Rn(d,u)!==0||Rn(m,u)!==0||Rn(p,c)!==0||Rn(m,c)!==0||Rn(p,l)!==0||Rn(d,l)!==0)return;let{xmin:f,ymin:g,zmin:y,xmax:h,ymax:b,zmax:T}=r,I=t(f,g,y),E=t(h,b,T),S=.5*(E[0]-I[0])/(h-f),C=.5*(E[1]-I[1])/(b-g),v=.5*(E[2]-I[2])/(T-y),_=(f*E[0]-h*I[0])/(E[0]-I[0]),L=(g*E[1]-b*I[1])/(E[1]-I[1]),k=(y*E[2]-T*I[2])/(E[2]-I[2]),Q=-e(_,L,k),w=Math.sqrt(Q/S),q=Math.sqrt(Q/C),K=Math.sqrt(Q/v);if(!(!isFinite(_)||!isFinite(L)||!isFinite(k)||!isFinite(w)||!isFinite(q)||!isFinite(K)||w===0||q===0||K===0))return{center:[_,L,k],radii:[w,q,K]}}var j4=!1;function J4(e,t){let n=t.viewport.xmax-t.viewport.xmin,r=t.viewport.ymax-t.viewport.ymin,o=ws(n,r),i=ws(30,30),s=Math.round(2-Math.log(o/i)/Math.LN10);if(s<=0)return Math.round(e)+\"\";{let a=Math.pow(10,s);return Math.round(e*a)/a+\"\"}}function Q4(e,t){return t.degreeMode?Math.round(e/(Math.PI/180)*10)/10+\"\\xB0\":Math.round(e*100)/100+\"\"}function K4(e,t){let n=t.viewport.xmax-t.viewport.xmin,r=t.viewport.ymax-t.viewport.ymin,o=n*r,i=30*30,s=Math.round(2-Math.log(o/i)/Math.LN10);if(s<=0)return Math.round(e)+\"\";{let a=Math.pow(10,s);return Math.round(e*a)/a+\"\"}}function b2({node:e,policy:t,styleBroadcastStrategy:n,viewState:r,concrete:o,childIntersections:i,userData:s,metaData:a}){let u=[],c=s.lines===void 0?!0:s.lines,l=s.fill===void 0?!0:s.fill;if(!l&&!c)return u;let p=ta(a,[\"computedLineOpacity\",\"computedLineWidth\",\"colorLatexValue\",\"fillOpacity\"],n),d=o.asValue();W(o.valueType)||(d=[d]);for(let m=0;m<d.length;m++){if(m>p-1)continue;let f=d[m];if(!f.length)continue;let g=Io(e,t,o,s,a),{listIndex:y,lineWidth:h,lineOpacity:b,fillOpacity:T,color:I}=bu(s,a,m,n);!s.shouldOmitLastPolygonSegment&&f.length>2&&(f=[...f,f[0]]),Xr(f);let E=RI(f);if(E.length){if(l&&f.length>2&&u.push({segments:E,branchMode:7,poi:{},color:I,fillOpacity:T,style:g.style,listIndex:y}),c&&(u.push({segments:E,branchMode:5,poi:{},color:I,style:s.lineStyle,lineWidth:h,lineOpacity:b,listIndex:y}),i))for(let S=0;S<f.length-1;S++){zu(i.parentType,[_e,wr]);let C=i.getEdgeIntersections(S);if(!C)continue;let[v,_]=f[S],[L,k]=f[S+1];u.push(..._I([{segments:[[v,_,L,k]],resolved:!0,branchMode:17,color:I,style:s.lineStyle,arrowMode:g.arrowMode,lineWidth:h,lineOpacity:b,listIndex:y,poi:{}}],C))}if(j4&&s.showLabel){let S=e.computedLabels&&e.computedLabels[y||0];u.push({branchMode:22,objectType:16,segments:E,color:I,listIndex:y,showLabel:!0,labelSize:a.computedLabelSize,labelAngle:a.computedLabelAngle,labelOrientation:s.labelOrientation,labels:S?[S]:[K4(NS(f),r)]})}}}return u}function x2(e){return Po({lineOpacity:!0,lineWidth:!0,color:!0},e,(t,n)=>{let[[r,o],i]=t.asValue();return isNaN(r)||isNaN(o)||isNaN(i)?[]:[{segments:[[r,o,i]],resolved:!0,branchMode:20,color:n.color,style:n.lineStyle,lineWidth:n.lineWidth,lineOpacity:n.lineOpacity,listIndex:n.listIndex,operator:n.operator,poi:{}}]})}function T2(e){let{graphInfo:t,childIntersections:n}=e;return Po({color:!0,lineWidth:!0,lineOpacity:!0},e,(r,o)=>{let i=ub(r.asValue());if(!i)return[];let s=[];return i.type===\"arc\"?s.push({branchMode:21,segments:[[i.center[0],i.center[1],i.radius,i.startAngle,i.endAngle]],color:o.color,style:o.lineStyle,lineWidth:o.lineWidth,lineOpacity:o.lineOpacity,listIndex:o.listIndex,operator:t.operator,poi:{}}):i.type===\"rays\"?s.push({branchMode:19,segments:[[i.start1[0],i.start1[1],i.end1[0],i.end1[1]]],color:o.color,style:o.lineStyle,lineWidth:o.lineWidth,lineOpacity:o.lineOpacity,listIndex:o.listIndex,operator:t.operator,poi:{}},{branchMode:19,segments:[[i.start2[0],i.start2[1],i.end2[0],i.end2[1]]],color:o.color,style:o.lineStyle,lineWidth:o.lineWidth,lineOpacity:o.lineOpacity,listIndex:o.listIndex,operator:t.operator,poi:{}}):s.push({branchMode:17,segments:[[i.start[0],i.start[1],i.end[0],i.end[1]]],color:o.color,style:o.lineStyle,lineWidth:o.lineWidth,lineOpacity:o.lineOpacity,listIndex:o.listIndex,operator:t.operator,poi:{}}),[...s,..._I(s,n)]})}function I2(e){let{node:t,graphInfo:n,policy:r,viewState:o,childIntersections:i,userData:s,metaData:a}=e;return Po({color:!0,lineWidth:!0,lineOpacity:!0},e,(u,c)=>{let[[l,p],[d,m]]=u.asValue();if(isNaN(l)||isNaN(p)||isNaN(d)||isNaN(m))return[];let f=[],g={segments:[[l,p,d,m]],resolved:!0,branchMode:c.graphMode,color:c.color,style:c.lineStyle,arrowMode:c.arrowMode,lineWidth:c.lineWidth,lineOpacity:c.lineOpacity,listIndex:c.listIndex,operator:n.operator,poi:{}};if(f.push(LR(r,g,o)),f.push(..._I([g],i)),s.showLabel&&n.graphMode===17){let y=c.listIndex,h=t.computedLabels&&t.computedLabels[y||0];f.push({branchMode:22,objectType:17,segments:[[l,p,d,m]],color:c.color,listIndex:y,showLabel:!0,labelSize:a.computedLabelSize,labelAngle:a.computedLabelAngle,labelOrientation:s.labelOrientation,labels:h?[h]:[J4(ws(d-l,m-p),o)]})}return f})}function P2(e){let{policy:t,graphInfo:n,viewState:r}=e;return Po({lineOpacity:!0,lineWidth:!0,color:!0},e,(o,i)=>{let[s,a]=o.asValue(),[[u,c],[l,p]]=[a,[a[0]+s[0],a[1]+s[1]]];if(isNaN(l)||isNaN(p)||isNaN(u)||isNaN(c))return[];let d={segments:[[u,c,l,p]],resolved:!0,branchMode:24,color:i.color,style:i.lineStyle,arrowMode:i.arrowMode,lineWidth:i.lineWidth,lineOpacity:i.lineOpacity,listIndex:i.listIndex,operator:n.operator,poi:{}};return[LR(t,d,r)]})}function S2(e){let{node:t,graphInfo:n,viewState:r,userData:o,metaData:i}=e;return Po({lineOpacity:!0,lineWidth:!0,color:!0},e,(s,a)=>{let u=Vr(s);if(!u)return[];let{value:c,valueType:l}=u,[[p,d],m,f]=c;if(isNaN(p)||isNaN(d)||isNaN(m)||isNaN(f))return[];let g=a.listIndex,y=l===Ce,h=y?f:Math.abs(f),b=[];if(b.push({branchMode:23,segments:[[p,d,m,f,y?1:0]],color:a.color,style:a.lineStyle,lineWidth:a.lineWidth,lineOpacity:a.lineOpacity,listIndex:g,operator:n.operator,poi:{}}),o.showAngleLabel){let T=t.computedLabels&&t.computedLabels[g||0];b.push({branchMode:22,objectType:23,segments:[[p,d,m,f]],color:a.color,listIndex:g,showLabel:!0,labelSize:i.computedLabelSize,labelAngle:i.computedLabelAngle,labelOrientation:o.labelOrientation,labels:T?[T]:[Q4(h,r)]})}return b})}function e6(e,t,n){return e?t===0&&n===0?e[2].type!==\"none\"||e[3].type!==\"none\":t!==0&&n!==0?e[0].type!==\"none\"&&e[1].type!==\"none\":t!==0?e[0].type!==\"none\":n!==0?e[1].type!==\"none\":!1:!1}function C2(e,t,n){let r=[];if(e.center.valueType!==D||e.center.getDependencies().length!==0||e.radianAngle.type!==\"IRExpression\"||e.width.type!==\"IRExpression\"||e.height.type!==\"IRExpression\"||e.opacity.type!==\"IRExpression\"||!e.radianAngle.isConstant||!e.width.isConstant||!e.height.isConstant||!e.opacity.isConstant)return r;let o=[],i=[],s=e.width.asValue()/2,a=e.height.asValue()/2,u=e.radianAngle.asValue();for(let c=-1;c<=1;c++)for(let l=-1;l<=1;l++){let[p,d]=e.center.asValue(),m=[p+c*s*Math.cos(u)+l*a*Math.sin(u),d-c*s*Math.sin(u)+l*a*Math.cos(u)];e6(e.moveStrategy,c,l)&&(o.push(m),i.push([c,l]))}return r.push({segments:[o],scaleFactors:[i],branchMode:4,color:ea(t,n),style:t.style,poi:Hi(o),movablePointInfo:[],pointOpacity:1}),r}function E2(e){let{policy:t,reconciledProps:n,viewState:r,userData:o,metaData:i}=e,s=Po({color:!0,lineOpacity:!0,lineWidth:!0,resolution:!0,fillOpacity:!0},e,(u,c)=>{var p;let l=u.getDependencies();if(l.length===0&&!ka(u.valueType)){let{points:d,droppedIndices:m}=rd([u.asValue()]);return[{segments:[d],branchMode:3,droppedIndices:m,color:ea(o,i),style:o.lineStyle,showPoint:!1,poi:Hi(d)}]}else{let d=u.getCompiledFunction(l);c.domain=(p=d.domain)!=null?p:{type:\"1d\",min:i.evaluatedDomainMin,max:i.evaluatedDomainMax};let m=Oa({viewState:r,graphInfo:c,compiled:d}),f=hI(t,m,r,c.lineWidth);if(n.lines&&!n.fill)return[f];let g={segments:f.segments,color:c.color,fillOpacity:c.fillOpacity,listIndex:c.listIndex,branchMode:7,poi:{}};return n.lines?[f,g]:[g]}}),a=[];for(let u of s)u&&a.push(u);return a}function iD(e){let t=e.editableLabelMode;return t===ax.Text||t===ax.Math}function v2(e,{node:t,reconciledProps:n,concrete:r,userData:o,metaData:i}){let{points:s,droppedIndices:a}=rd([r.asValue()]),u=o.shouldGraph&&n.points,c=o.showLabel&&!u;if(u)return[{segments:[s],branchMode:e,droppedIndices:a,color:ea(o,i),style:o.pointStyle,showLabel:!!o.showLabel,labelSize:i.computedLabelSize,labelAngle:i.computedLabelAngle,labelOrientation:o.labelOrientation,pointOpacity:i.computedPointOpacity,pointSize:i.computedMovablePointSize,suppressTextOutline:o.suppressTextOutline,pointOutline:o.pointOutline,editableLabel:iD(o),labels:t.computedLabels||[],poi:Hi(s),movablePointInfo:[]}];if(c){let l;switch(e){case 4:l=3;break;case 26:l=25;break;default:let p=e;throw new Error(`Unexpected graphMode: ${p}`)}return[{segments:[s],branchMode:l,color:ea(o,i),style:o.pointStyle,showLabel:!!o.showLabel,nakedLabel:!0,labelSize:i.computedLabelSize,labelAngle:i.computedLabelAngle,labelOrientation:o.labelOrientation,pointOpacity:i.computedPointOpacity,suppressTextOutline:o.suppressTextOutline,pointOutline:o.pointOutline,editableLabel:iD(o),labels:t.computedLabels||[],poi:Hi(s),showPoint:!1}]}else return[]}function M2(e,{node:t,policy:n,styleBroadcastStrategy:r,viewState:o,reconciledProps:i,concrete:s,userData:a,metaData:u}){let c=[],l=a.shouldGraph&&i.points,p=a.shouldGraph&&i.lines,d=[\"colorLatexValue\"];l&&d.push(\"computedPointOpacity\",\"computedPointSize\"),(a.showLabel||l)&&d.push(\"computedLabelSize\",\"computedLabelAngle\");let m=ta(u,d,r),f=Xo.wrap(s).asValue();Xr(f),f.length>m&&(f.length=m);let g=a.showLabel&&!l&&!p,y=rd(f);if(a.showLabel||l){let h={segments:[y.points],branchMode:e,droppedIndices:y.droppedIndices,color:u.colorLatexValue||a.color,style:a.pointStyle,showLabel:!!a.showLabel,showPoint:l,labelSize:u.computedLabelSize,labelAngle:u.computedLabelAngle,labelOrientation:a.labelOrientation,pointSize:u.computedPointSize,pointOpacity:u.computedPointOpacity,suppressTextOutline:a.suppressTextOutline,pointOutline:a.pointOutline,interactiveLabel:!!a.interactiveLabel,editableLabel:iD(a),nakedLabel:g,labels:t.computedLabels||[],poi:Hi(f)};n.is3dPolicy()?c.push(...NG(h)):c.push(h)}if(p){let h=u.computedLineWidth,b={segments:RI(f),branchMode:5,color:ea(a,u),style:a.lineStyle,lineWidth:h,lineOpacity:u.computedLineOpacity,poi:{}};c.push(hI(n,b,o,h))}return c}function _2(e,t,n,r,o,i){var c;let s=Io(e,t,n,o,i);if(n.model.type===\"Error\")return[];let u=lc(e,t,n.model,r,s,o,i);for(let l of u)(c=e.tableRegressionData)!=null&&c.tableId&&(l.tableId=e.tableRegressionData.tableId);return u}function R2(e,t){let{mappedArgIndex:n,mappedReturnIndex:r,solutionIndex:o}=t,i=Sl(e,n),s=t6(e,i,r),a=o,u=e.NanOfType(e.getReturnType(),0),c=new ho(e,0,r);return c.copyUntilEnd((l,p,d)=>{if(d===n)return o;if(!i[d]&&!l.isInClosedBlock(d))return d;if(me(p)){let m=c.mapArgs(p.args);return p.type===33&&s[d]&&(a=l.Piecewise([m[0],a,u])),l.copyInstructionWithArgs(p,m)}else return c.copyLeafOrFunctionHeader(p)}),a}function t6(e,t,n){let r=[];for(let o=0;o<n;o++)r.push(!1);r[n]=t[n];for(let o=n;o>=0;o--){if(!r[o]||!t[o])continue;let i=e.getInstruction(o);if(i.type===33)r[i.args[1]]=!0;else if(me(i))for(let s of i.args)r[s]=!0}return r}function D2(e,t){try{return n6(e,t)}catch(n){return n instanceof M?n:V(n)}}function sD(e,t){try{let n=new _n(t),r=Jp({},n),o=[];for(let s=0;s<r.length;s++)o.push(x);let i=JT({policy:e,frame:{},argNames:r,argTypes:o,selection:void 0,locals:[]});return i.chunk=t,t.fuseBroadcast(),N2({policy:e,ctx:i,isInequality:!1,allowSolvingIn3D:!0},t)}catch(n){return n instanceof M?n:V(n)}}function OI(e,t){let n=e.getInstruction(t);if(n.type!==1)return!1;switch(n.valueType){case N:return Number.isNaN(n.value[0]);case x:return Number.isNaN(n.value);case Ye:return n.value.length>0&&n.value.every(r=>Number.isNaN(r[0]));case Z:return n.value.length>0&&n.value.every(r=>Number.isNaN(r));case un:return!n.value;case Mu:return n.value.length>0&&n.value.every(r=>!r);case Ne:case Ce:return Number.isNaN(n.value[2]);case Ur:case zr:return n.value.length>0&&n.value.every(r=>Number.isNaN(r[2]));default:throw V(\"Unexpected type in isConstantNaN: \"+tt(n.valueType))}}function n6({policy:e,frame:t},n){let r=!1,o=[];if(n instanceof El){let b=n._lhs,T=b._symbol;if(!t[T]&&!e.assignmentForbidden(T)&&(r=!0,o=b._dependencies,b.args.length>1)){let E=n._dependencies.filter(C=>!o.includes(C)),S=En([T]).setDependencies(E);throw S.silent=!0,S}}let i=n.asComparator(),s=Jp(t,i),a=[];for(let b=0;b<s.length;b++)a.push(x);let u=JT({policy:e,frame:t,argNames:s,argTypes:a,selection:void 0,locals:[]}),{chunk:c}=u,l=i.getOperator(),p=l!==\"=\",d=Fe(u,i.args[0]),m=os(c,d,{peelableCoerce:!0});if(m!==d&&!OI(c,d)&&OI(c,m))throw Xd(l);let f=Fe(u,i.args[1]),g=os(c,f,{peelableCoerce:!0});if(g!==f&&!OI(c,f)&&OI(c,g))throw Xd(l);try{du(c,e,i,[m,g])}catch(b){throw b instanceof M&&r&&(b.silent=!0),b}switch(l){case\"<\":c.Less([m,g]);break;case\">\":c.Greater([m,g]);break;case\"<=\":c.LessEqual([m,g]);break;case\">=\":c.GreaterEqual([m,g]);break;case\"=\":c.Equal([m,g]);break}if(c.fuseBroadcast(),c.isConstant())return new _n(c);let h=c.getInstruction(m).type!==2||Jp(t,i.args[1]).indexOf(c.argNames[m])!==-1;if(!Is.plotImplicits&&h)throw Sv();return yo[l].direction===-1?c.Subtract([g,m]):c.Subtract([m,g]),c.fuseBroadcast(),N2({policy:e,ctx:u,isInequality:p,allowSolvingIn3D:!1,maybeBaseCase:r,callParameters:o},c)}function N2({policy:e,ctx:t,isInequality:n,allowSolvingIn3D:r,maybeBaseCase:o,callParameters:i},s){let a=s.getLiveArgNames();if(a.length===0)throw V(`Unexpected: non-constant node with dependencies: ${a}`);if(a.length===1&&!n&&!Is.plotSingleVariableImplicitEquations)return Pv();let u=g=>g===\"x\"||g===\"y\"||g===\"z\";if(e.is3dPolicy()?!a.every(u):a.length>2){let g=e.sliderVariables(a);if(o){let y=i?a.filter(b=>!i.includes(b)):a,h=En(g).setDependencies(y);return h.silent=!0,h}else return En(g).setDependencies(a)}if(n&&!e.validInequalityVariables(a))return Tv().setDependencies(a);let{localFrames:c,effectiveOrder:l,variableOfInterest:p}=r6(t,n);if(e.complicatedPolarImplicit(p,l))return Cv().setDependencies(a);if(!e.validImplicitVariables(a)){let g=Rp();return o&&(g.silent=!0),g}if(e.is3dPolicy()&&r&&l!==1)return $u();if(l>2||e.is3dPolicy()&&!r)return new _n(s);let d=[],m=[],f=1;for(let g=0;g<c.length;g++){let y=c[g],h=o6(y,n);f=h.length;for(let T of h){let I=y.chunk.copy();if(I.setReturnIndex(T),y.isRestrictedPolynomial){let{mappedArgIndex:E,mappedReturnIndex:S}=y;I.setReturnIndex(R2(I,{mappedArgIndex:E,mappedReturnIndex:S,solutionIndex:I.getReturnIndex()}))}I.fuseBroadcast(),d.push(new _n(I))}let b=!1;for(let T of y.coefficients){let I=y.chunk.getInstruction(T);I.type===1&&I.value!==0&&(b=!0)}if(s.argNames.length!==2||b)m.push(void 0);else{let T=y.chunk.copy(),I=y.coefficients.slice();T.List(I);let E=W(s.getReturnType())?s.elementAt(g):s.copy(),C=E.argNames.indexOf(p)===0?1:0,v=E.getReturnIndex();E.Add([C,E.Multiply([E.ColdConstant(0),v])]),m.push({coefficients:T,restriction:E})}}return new O.SolvedEquation(p,new Xo(d),m,f)}function r6(e,t){let n=e.chunk,r=e.policy,o=n.argNames,i=W(n.getReturnType()),s=[];e:for(let a=0;a<o.length;a++){let u=o[a],c=o.length>1&&!r.validSolvedVariable(u);s[a]={localFrames:[],effectiveOrder:0,variableOfInterest:u};let l=!t;if(c){s[a].effectiveOrder=1/0;continue}let p=i?n.getConstantListLength():1;if(p==null)throw new Error(\"Programming error: cannot solve a variable-length list expression\");for(let d=0;d<p;d++){let m=i?n.elementAt(d):n;if(m.polynomialOrder(u,{allowRestriction:l,allowClosedBlockReferences:!1})>2){s[a].effectiveOrder=1/0;continue e}let g=m.getPolynomialCoefficients(u);s[a].localFrames.push(g),s[a].effectiveOrder=Math.max(s[a].effectiveOrder,g.coefficients.length-1)}}if(o.length===1)return s[0];if(o.length===2&&!o.includes(\"z\"))return o[0]===\"y\"&&(s=[s[1],s[0]]),s[0].effectiveOrder===0?s[1]:s[1].effectiveOrder===0?s[0]:s[s[0].effectiveOrder<s[1].effectiveOrder?0:1];{let a=s.filter(c=>c.effectiveOrder===1);if(a.length>0)return a[0];let u=s.filter(c=>c.effectiveOrder===2);return u.length>0?u[0]:s[0]}}function o6(e,t){return t?s6(e):i6(e)}function i6({chunk:e,coefficients:t}){let[n,r,o]=t,i=e.ColdConstant(Ie(0,1)),s=e.ColdConstant(NaN);if(o===void 0){r===void 0&&(r=i);let a=e.Negative([e.Divide([n,r])]),u=e.Equal([r,i]);return[e.Piecewise([u,s,a])]}else{let a=e.ColdConstant(Ie(2,1)),u=e.Multiply([a,o]),c=e.Negative([e.Divide([r,u])]),l=e.Divide([n,o]),p=e.Subtract([e.Square([c]),l]),d=e.Equal([o,i]),m=e.Equal([p,i]),f=e.getInstruction(p);if(f.type===1&&F(f.value)===0)return[e.Piecewise([d,s,c])];{let g=e.NativeFunction(\"sqrt\",[p]),y=e.Greater([r,i]),h=e.Less([r,i]),b=e.Greater([c,i]),T=e.Piecewise([b,e.Add([c,g]),e.Subtract([c,g])]),I=e.Piecewise([m,T,e.Divide([l,T])]),E=e.Negative([e.Divide([n,r])]);return[e.Piecewise([d,e.Piecewise([h,E,s]),T]),e.Piecewise([d,e.Piecewise([y,E,s]),I])]}}}function s6({chunk:e,coefficients:t}){let[n,r,o]=t,i=e.ColdConstant(Ie(0,1));o===void 0&&(o=i),r===void 0&&(r=i),n===void 0&&(n=i);let s=e.ColdConstant(Ie(2,1)),a=e.ColdConstant(NaN),u=e.ColdConstant(Ie(1e305,1)),c=e.Negative([u]),l=e.Multiply([s,o]),p=e.Negative([e.Divide([r,l])]),d=e.Divide([n,o]),m=e.Subtract([e.Square([p]),d]),f=e.NativeFunction(\"sqrt\",[m]),g=e.Negative([e.Divide([n,r])]),y=e.Equal([o,i]),h=e.Equal([m,i]),b=e.Greater([o,i]),T=e.Equal([r,i]),I=e.Greater([r,i]),E=e.Less([r,i]),S=e.Greater([p,i]),C=e.Greater([n,i]),v=e.Less([m,i]),_=e.Piecewise([S,e.Add([p,f]),e.Subtract([p,f])]),L=e.Piecewise([h,_,e.Divide([d,_])]),k=e.Piecewise([S,L,_]),Q=e.Piecewise([S,_,L]);return[e.Piecewise([y,e.Piecewise([E,g,a]),e.Piecewise([b,k,a])]),e.Piecewise([y,e.Piecewise([T,e.Piecewise([C,c,a]),a]),e.Piecewise([b,e.Piecewise([v,c,a]),k])]),e.Piecewise([y,e.Piecewise([T,e.Piecewise([C,u,a]),a]),e.Piecewise([b,e.Piecewise([v,u,a]),Q])]),e.Piecewise([y,e.Piecewise([I,g,a]),e.Piecewise([b,Q,a])])]}function O2(e,t){let{viewState:n,policy:r,metaData:o}=t;return Po({color:!0,lineWidth:!0,lineOpacity:!0,resolution:!0},t,(i,s)=>{var E;let a=(E=us[e])!=null?E:[],u=i.getCompiledFunction(a).domain;switch(e){case 206:case 211:s.domain={type:\"1d\",min:o.evaluatedDomainMin,max:o.evaluatedDomainMax,isExplicit:o.isExplicitDomain};break;case 203:case 204:case 213:case 207:case 208:case 212:case 214:case 215:s.domain=u!=null?u:{type:\"2d\",uMin:o.evaluatedDomain3DMin1,uMax:o.evaluatedDomain3DMax1,vMin:o.evaluatedDomain3DMin2,vMax:o.evaluatedDomain3DMax2};break}let c={allowSlices:!0},l=wc(i._chunk,a,c),{valueChunk:p,slices:d}=l.getValueAndRestrictionChunk(),m=p.getInstruction(p.getReturnIndex()).valueType,f=ka(m)?Bx(p):p.getCompiledFunction(a),g=d[0],y=g.type===\"implicit\",h=y?NaN:g.value,b=y?\"_implicit\":g.variable,T,I=S=>Oa({viewState:n,graphInfo:{...s,slice_coordinate:b,slice_value:h,slice_function:S},compiled:f});if(y){let S=[\"x\",\"y\",\"z\"],C=[\"x\",\"y\",\"z\",\"r\",\"theta\"],v=[\"x\",\"y\",\"z\",\"rho\",\"theta\",\"phi\"],_=[\"x\",\"y\",\"z\",\"u\",\"v\"],L=g.sliceChunk;switch(e){case 200:case 201:case 202:T=L.getCompiledFunction(S);break;case 211:case 213:T=L.getCompiledFunction(C);break;case 212:T=L.getCompiledFunction(v);break;case 215:case 214:T=L.getCompiledFunction(_);break;case 209:{let k=(q,K)=>{let le=K.getCompiledFunction(S),te=q._symbol,Be=q._expression.args,Ze=[];for(let oe of Be){if(!(oe instanceof _n))throw V(\"Programming Error: bad type\");if(te===\"x\")f=oe._chunk.getCompiledFunction([\"y\",\"z\"]),s.graphMode=201;else if(te===\"y\")f=oe._chunk.getCompiledFunction([\"x\",\"z\"]),s.graphMode=202;else if(te===\"z\")f=oe._chunk.getCompiledFunction([\"x\",\"y\"]),s.graphMode=200;else throw V(\"Programming Error: bad lhs\");Ze.push(I(le))}return Ze},Q=(q,K)=>{let le=n.viewport,te=K.getCompiledFunction(S),Be=q.getCompiledFunction(S).fn,Ze=eD(Be,le);if(Ze){let{explicitPlane:oe,u:ee,v:$}=Ze;return s.graphMode=214,f={args:[\"u\",\"v\"],source:\"\",constants:[],fn:oe,executionMetadata:{}},s.domain={type:\"2d\",uMin:ee.min,uMax:ee.max,vMin:$.min,vMax:$.max},[I(te)]}else return[]};if(L.isImplicitPlane())return Q(L,p);if(p.isImplicitPlane())return Q(p,L);let w=sD(r,p);return w.type===\"SolvedEquation\"?k(w,L):(w=sD(r,L),w.type===\"SolvedEquation\"?k(w,p):[I(L.getCompiledFunction(S))])}}}return[I(T)]})}function A2(e){let{viewState:t,graphInfo:n,policy:r}=e;return Po({color:!0,surfaceOpacity:!0,resolution:!0},e,(o,i)=>{var T,I,E,S,C,v,_,L;let s=(T=us[n.graphMode])!=null?T:[],a={allowSlices:!0},u=wc(o._chunk,s,a),{restrictionChunk:c,slices:l}=u.getSlicesAndRestrictionChunk(),p=c.getCompiledFunction(s);if(l[0].type===\"implicit\"){let k=l[0].sliceChunk;if(r.isRayCastEnabled()){let le=a6(n,k,c,r);if(le)return[le]}let Q;try{Q=k.copy().gradient([\"x\",\"y\",\"z\"]).getCompiledFunction([\"x\",\"y\",\"z\"]).fn}catch(le){}let w=(I=i.resolution)!=null?I:NaN;return isNaN(w)&&(w=wg),w=mr(w,0,100),[{meshData:zR(k.getCompiledFunction(s),void 0,Q,t.viewport,w,{isInequality:!1}),color:i.color,surfaceOpacity:(E=i.surfaceOpacity)!=null?E:1,uvArgs:(S=us[i.graphMode])!=null?S:[],extraMeshArgs:(C=Zl[i.graphMode])!=null?C:[],branchMode:210,compiled:p,restrictionShader:Lo(c,r.maxSurfaceUniforms())}]}let d=l[0].value,m=l[0].variable,f=t.viewport,g;switch(m){case\"x\":g=(k,Q,w)=>k-d;break;case\"y\":g=(k,Q,w)=>Q-d;break;case\"z\":g=(k,Q,w)=>w-d;break;default:return[]}let y=qg(g,f);return[{meshData:Ds(y),color:i.color,surfaceOpacity:(v=i.surfaceOpacity)!=null?v:1,uvArgs:(_=us[i.graphMode])!=null?_:[],extraMeshArgs:(L=Zl[i.graphMode])!=null?L:[],branchMode:210,compiled:p,restrictionShader:Lo(c,r.maxSurfaceUniforms())}]})}function a6(e,t,n,r){var u;let o,i,s=r.maxRayCastUniforms(),a=yf(n);if(r.canRaycastWithCost(a)){try{o=Xm(n,s),i=Lo(n,s)}catch(c){return}try{if(!r.canRaycastWithCost(yf(t)))return;let c=Lo(t,s),l=Xm(t,s);return{fxn:c,intervalFxn:l,color:e.color,isSurfaceSelected:!1,surfaceOpacity:(u=e.surfaceOpacity)!=null?u:1,branchMode:131,operator:oD(e.operator),guid:Qr(),branchId:\"\",restrictionShader:i,intervalRestrictionShader:o,listIndex:e.listIndex}}catch(c){return}}}function u6(e){return Array.prototype.concat.apply([],e)}function w2(e){let t=[];for(let n of e)typeof n==\"number\"?t.push(n):t.push($S(n));return t}function L2(e,t){let n={},r=t.columns[0];if(r.type===\"Error\")return n;let o=w2(r.asValueMixed());for(let i=1;i<e.columns.length;i++){let s=t.columns[i];if(s.type===\"Error\")continue;let a=w2(s.asValueMixed()),u=e.columns[i].header.userData,c=e.columns[i].header.metaData;if(u.hidden)continue;let l=ta(c,[\"colorLatexValue\",\"computedPointSize\",\"computedPointOpacity\"]),p=u.dragMode;(e.columnIsViewportDependency(0)||e.columnIsViewportDependency(i))&&(p=rn.NONE);let d=p===rn.X||p===rn.XY,m=p===rn.Y||p===rn.XY,f=!!u.points,g=!!u.lines,y=[],h=[],b=[],T=[],I=[],E=[],S=1/0,C=-1/0,v=1/0,_=-1/0,L={};for(let w=0;w<o.length;w++){let q=o[w],K=a[w];if(!isFinite(q)||!isFinite(K)){L[w]=!0,g&&(E.length>1&&I.push(E),E=[]);continue}if(f){if(w>=l)continue;let le=d&&e.isValueDraggable(t,0,w),te=m&&e.isValueDraggable(t,i,w);le||te?(b.push([q,K]),T.push({index:w,dragX:le,dragY:te})):h.push([q,K])}g&&E.push([q,K]),q<S&&(S=q),q>C&&(C=q),K<v&&(v=K),K>_&&(_=K)}let k=e.columns[i],Q={type:\"table\",symbol:\"header\"in k?k.header._symbol:void 0,xmin:S,xmax:C,ymin:v,ymax:_};b.length&&y.push({branchMode:4,segments:[b],color:c.colorLatexValue||u.color,tableId:u.tableId,poi:Hi(b),movablePointInfo:T,boundingBox:Q,pointOpacity:c.computedPointOpacity,pointSize:c.computedMovablePointSize,pointOutline:u.pointOutline,style:u.pointStyle}),h.length&&y.push({segments:[h],droppedIndices:L,branchMode:3,showPoint:!0,poi:Hi(h),color:c.colorLatexValue||u.color,pointSize:c.computedPointSize,pointOutline:u.pointOutline,pointOpacity:c.computedPointOpacity,style:u.pointStyle,tableId:u.tableId,boundingBox:Q}),(I.length||E.length)&&(I.push(E),y.push({segments:I.map(u6),branchMode:5,poi:{},color:ea(u,c),style:u.lineStyle,lineWidth:Array.isArray(c.computedLineWidth)?c.computedLineWidth[0]:c.computedLineWidth,lineOpacity:Array.isArray(c.computedLineOpacity)?c.computedLineOpacity[0]:c.computedLineOpacity,tableId:u.tableId,boundingBox:Q})),y.length&&(n[u.id]=y)}return n}function $be(e){return 2*c6(e*.5)}function c6(e){return e<=8?3*e:e>=16?2*e:e+16}function uD(e,t){let n=1/0,r=-1/0,o=1/0,i=-1/0;for(let s of t)for(let a=0;a<s.length;a+=2){let u=s[a],c=s[a+1];u<n&&(n=u),u>r&&(r=u),c<o&&(o=c),c>i&&(i=c)}if(isFinite(n)&&isFinite(o))return{type:e,xmin:n,ymin:o,xmax:r,ymax:i}}function B2(e,t,n){let r={};n-=.5*t;for(let o=e.length-1;o>=0;o--){let i=e[o],s=Math.floor((i-n)/t);r[s]?r[s].data.push(i):r[s]={id:s,data:[i],min:s*t+n,max:s*t+n+t,center:s*t+n+t/2}}return r}function G2(e,t,n,r,o){let i=Io(e,t,n,r,o),s=n.args[0].asValue(),a=n.args[1].asValue(),u=r.vizProps&&r.vizProps.binAlignment===\"left\"?a/2:0;Xr(s);let c=B2(s,a,u),l=1;r.vizProps&&r.vizProps.histogramMode===\"density\"?l=1/(s.length*a):r.vizProps&&r.vizProps.histogramMode===\"relative\"&&(l=1/s.length);let p=[],d=[];for(let f in c){let g=c[f],y=g.data.length;d.push([g.min,0*l,g.min,y*l,g.max,y*l,g.max,0*l]);let h=0;c[g.id+1]&&(h=c[g.id+1].data.length);let b=[g.min,0*l,g.min,y*l,g.max,y*l];h<y&&b.push(g.max,h*l),p.push(b)}let m=uD(\"histogram\",d);return m&&a&&(m.binWidth=a),[{segments:d,branchMode:7,boundingBox:m,poi:{},color:i.color,fillOpacity:.4},{segments:p,branchMode:2,poi:{zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}},color:i.color}]}function q2(e,t,n,r,o){let i=Io(e,t,n,r,o),s=n.args[1].asValue(),a=r.vizProps&&r.vizProps.binAlignment===\"left\"?s/2:0,u=n.args[0].asValue();Xr(u);let c=B2(u,s,a),l=!1,p,d=[];for(let b in c){let T=c[b];for(let I=T.data.length-1;I>=0;I--)T.center!==T.data[I]&&(l=!0)}if(r.vizProps&&r.vizProps.dotplotXMode===\"exact\")for(let b in c){p=c[b].data,p.reverse();for(let I=0;I<p.length;I++)d.push([p[I],I+1])}else for(let b in c){let T=c[b];p=T.data;for(let I=0;I<p.length;I++)d.push([T.center,I+1])}let m=uD(\"dotplot\",d);m&&s&&(m.ymin=0,m.xmin-=.5*s,m.xmax+=.5*s,m.binWidth=s);let{computedPointOpacity:f,computedPointSize:g}=o,y=Aa(f,0),h=r.pointSize?Aa(g,0):14;return[{segments:[d],branchMode:3,boundingBox:m,poi:Hi(d),color:i.color,style:r.pointStyle,pointSize:h,pointOpacity:y,showPoint:!0,needsDotplotXMode:l}]}function U2(e,t,n,r,o){let i=Io(e,t,n,r,o),s=o.evaluatedAxisOffset,a=o.evaluatedBreadth,u=n.args[0].asValue();if(Xr(u),isNaN(a)||isNaN(s))return[];let c=Math.min.apply(null,u),l=Math.max.apply(null,u),p=hp(u,1),d=hp(u,2),m=hp(u,3),f=s,g=f-a/2,y=f+a/2,h=a/10,b=[];if(r.vizProps.showBoxplotOutliers){let E=m-p,S=p-1.5*E,C=m+1.5*E;c=1/0,l=-1/0,u.forEach(v=>{S<=v&&v<c&&(c=v),l<v&&v<=C&&(l=v),(v<S||v>C)&&b.push([v,f])})}let T=[[p,g,m,g,m,y,p,y,p,g],[d,g,d,y],[p,f,c,f],[m,f,l,f],[c,f-h,c,f+h],[l,f-h,l,f+h]];if(r.vizProps&&r.vizProps.alignedAxis===\"y\"){for(let E of T)for(let S=0;S<E.length;S+=2){let C=E[S];E[S]=E[S+1],E[S+1]=C}for(let E of b){let S=E[0];E[0]=E[1],E[1]=S}}let I=[{segments:T,branchMode:5,boundingBox:uD(\"boxplot\",T.concat(b)),poi:{},color:i.color}];return b.length&&I.push({segments:[b],branchMode:3,color:i.color,style:Xc.OPEN,showPoint:!0,poi:Hi(b)}),I}var p6=80,z2=p6+30,d6=55,k2=d6+30;function H2(e,t,n,r,o,i,s){switch(e.type){case\"Image\":return C2(n,i,s);case\"Table\":return L2(e,n);case\"BoxPlot\":return U2(e,t,n,i,s);case\"DotPlot\":return q2(e,t,n,i,s);case\"Histogram\":return G2(e,t,n,i,s);case\"Regression\":return _2(e,t,n,r,i,s);case\"DoubleInequality\":return s2(e,t,n,r,i,s);case\"AssignmentImport\":{let a=n;return H2(a.resolvedRawNode,t,a.concrete,r,o,i,s)}}return e instanceof Ro?i2(e,t,n,r,i,s):m6(e,t,n,r,o,i,s)}function lc(e,t,n,r,o,i,s,a,u){if(n instanceof O.SolvedEquation){let m=lc(e,t,n._expression,r,o,i,s,a,n.branchMultiplier===2?\"solvedEquation\":void 0),f=JR(e,n,r,t,i,s);return f&&(m||(m=[]),Array.prototype.push.apply(m,f)),m}let c=n.getExpressionType(o.graphMode,n.valueType),l=kR(c,{points:i.points,lines:i.lines,fill:i.fill}),p={node:e,concrete:n,userData:i,metaData:s,reconciledProps:l,styleBroadcastStrategy:u,viewState:r,graphInfo:o,policy:t,childIntersections:a},d=o.graphMode;switch(d){case 20:return x2(p);case 21:return T2(p);case 17:case 18:case 19:return I2(p);case 24:return P2(p);case 23:return S2(p);case 16:return b2(p);case 114:return e2(p);case 117:return t2(p);case 119:return n2(p);case 129:return r2(p);case 118:return o2(p);case 26:case 4:return v2(d,p);case 25:case 3:return M2(d,p);case 5:case 100:return E2(p);case 1:case 2:case 8:case 112:case 131:case 126:case 113:case 127:case 6:case 130:case 103:case 106:case 107:case 108:case 109:case 110:case 111:case 120:case 121:case 122:case 123:case 124:return h2(d,p);case 200:case 201:case 202:case 206:case 205:case 211:case 203:case 204:case 213:case 207:case 208:case 212:case 214:case 215:case 209:return O2(d,p);case 210:return A2(p);case 7:case 22:case 128:case 11:case 10:case 15:return[];default:let m=d;throw new Error(`Unexpected graphMode: ${m}`)}}function $2(e,t,n,r,o){var i,s,a;try{let u=H2(e,t,n,r,o,e.userData,e.metaData);if(Array.isArray(u))for(let c of u){if(!(\"compiled\"in c))continue;let l=(i=c.compiled)==null?void 0:i.executionMetadata;l&&(l.recursionTerminationStatus&&(c.recursionTerminationStatus=l.recursionTerminationStatus),((s=l.badCoercionCount)!=null?s:0)>=1&&((a=l.goodCoercionCount)!=null?a:0)<=2&&(c.nanBlame=II.ComplexCoercion))}return u}catch(u){let c=u instanceof O.Error?u.getError():V(u).getError();return[UG(c)]}}function m6(e,t,n,r,o,i,s){let a=Io(e,t,n,i,s);return lc(e,t,n,r,a,i,s,o)}var hf=class{constructor({enableGeometry:t,enable3d:n,scales:r,includeFunctionParametersInRandomSeed:o,isComplexEnabled:i,customRegressions:s,isRecursionEnabled:a}){this._isGeometry=!1;this._is3dProduct=!1;this._isGeometry=t,this._is3dProduct=n,this._scales=r,this._includeFunctionParametersInRandomSeed=o,this._isComplexEnabled=!!i,this._customRegressions=s,this._isRecursionEnabled=!!a}isGeometryEnabled(){return this._isGeometry}is3dProduct(){return this._is3dProduct}is3dPolicy(){return!1}isComplexEnabled(){return this._isComplexEnabled}isRecursionEnabled(){return this._isRecursionEnabled}isRayCastEnabled(){return!1}polygonUnsupportedPreferTriangle(){return!1}areAllScalesLinear(){return this._scales?this._scales.xAxisScale===\"linear\"&&this._scales.yAxisScale===\"linear\":!0}assignmentForbidden(t){return t===\"x\"||t===\"y\"||t===\"theta\"||t===\"index\"||t===\"dt\"||t.slice(0,3)===\"tmp\"||ct.hasOwnProperty(t)||this.isComplexEnabled()&&t===Wr}isValidSlider(t){return t===\"x\"||t===\"y\"?!0:!(t.slice(0,3)===\"ans\"||t.slice(0,6)===\"idref_\"||this.assignmentForbidden(t))}sliderVariables(t){return t.indexOf(\"theta\")!==-1&&(t=t.filter(n=>n!==\"r\")),t.filter(n=>!(this.assignmentForbidden(n)||n.slice(0,3)===\"ans\"||n.slice(0,6)===\"idref_\"||n[0]===\"_\"||this.isGeometryEnabled()&&n[0]===\"$\"))}tooManySliderVariables(t,n,r){return r?t.length>=1:t.length>=2&&n.length>=1}graphingEnabled(){return!0}ansEnabled(){return!1}dimensionVarsEnabled(){return!0}validRegressionParameter(t){return t!==\"x\"&&t!==\"y\"}validLHS(t){return t!==\"theta\"&&t.slice(0,6)!==\"idref_\"}unplottablePolarFunction(t,n){return t!==\"theta\"?!1:n.indexOf(\"r\")!==-1}validDoubleInequalitySymbol(t){return t===\"x\"||t===\"y\"}validDoubleInequalityVariables(t){return t.length>2?!1:t.every(this.validDoubleInequalitySymbol)}validExpressionVariables(t){return t.length===1&&t[0]===\"x\"}validSolvedVariable(t){return t===\"x\"||t===\"y\"||t===\"r\"}validImplicitVariables(t){switch(t.length){case 0:return!0;case 1:return t[0]===\"x\"||t[0]===\"y\"||t[0]===\"r\";case 2:return t[0]===\"x\"&&t[1]===\"y\"||t[0]===\"y\"&&t[1]===\"x\"||t[0]===\"r\"&&t[1]===\"theta\"||t[0]===\"theta\"&&t[1]===\"r\";default:return!1}}graphableListVariables(t,n){return t===\"x\"||t===\"y\"||t===\"r\"||n===\"x\"||n===\"y\"}validParametricVariable(t){return t===\"t\"}validParametricVariables(t){return t.length===1&&this.validParametricVariable(t[0])}validInequalityVariables(t){switch(t.length){case 1:return t[0]===\"x\"||t[0]===\"y\"||t[0]===\"r\";case 2:return this.validImplicitVariables(t);default:return!1}}validFirstColumnVariable(t){return t!==\"y\"&&t!==\"r\"&&t!==\"theta\"&&!t.match(/y_(\\d+)/)}validActionVariable(t){return t===\"dt\"||t===\"index\"}complicatedPolarImplicit(t,n){return t===\"theta\"||t===\"r\"&&n!==1}graphMode(t,n,r){if(n.length===0)return t===\"x\"?1:t===\"r\"?6:t===\"y\"?2:10;let o=n[0];return o===\"y\"?1:t===\"x\"?1:t===\"r\"&&o===\"theta\"?6:this.isComplexEnabled()&&t!==\"y\"&&o!==\"x\"?10:2}functionDefinitionGraphMode(t,n){return this.graphMode(t,n)}tableableAsConstant(t){return!(t===\"x\"||t===\"r\"||t===\"theta\")}implicitIndependent(t){return\"x\"}implicitDependency(t){return t.length!==1?\"y\":t[0]===\"y\"?\"x\":t[0]===\"theta\"?\"r\":\"y\"}disabledFeatures(){return[]}shouldIncludeFunctionParametersInRandomSeed(){return this._includeFunctionParametersInRandomSeed}isCustomRegressionSupported(){return this._customRegressions}getScales(){var t;return(t=this._scales)!=null?t:{xAxisScale:\"linear\",yAxisScale:\"linear\"}}maxRayCastUniforms(){return 0}maxSurfaceUniforms(){return 0}canRaycastWithCost(t){return!1}},AI=class{constructor({beta3d:t,includeFunctionParametersInRandomSeed:n,isComplexEnabled:r,customRegressions:o,isRecursionEnabled:i,rayCast:s,ignoreCostEstimate:a,maxFragmentUniformComponents:u}){this._isBeta3d=!1;this._isBeta3d=t,this.rayCast=s,this.ignoreCostEstimate=a,this.maxFragmentUniformComponents=u,this.policy2d=new hf({enableGeometry:!1,enable3d:!0,scales:{xAxisScale:\"linear\",yAxisScale:\"linear\"},includeFunctionParametersInRandomSeed:n,isComplexEnabled:r,customRegressions:o,isRecursionEnabled:i})}isGeometryEnabled(){return!1}is3dProduct(){return!0}is3dPolicy(){return!0}isBeta3d(){return this._isBeta3d}isRayCastEnabled(){return this.rayCast}isComplexEnabled(){return this.policy2d.isComplexEnabled()}isRecursionEnabled(){return this.policy2d.isRecursionEnabled()}maxRayCastUniforms(){return this.maxFragmentUniformComponents-z2}maxSurfaceUniforms(){return this.maxFragmentUniformComponents-k2}canRaycastWithCost(t){return t<=50||this.ignoreCostEstimate}polygonUnsupportedPreferTriangle(){return!0}areAllScalesLinear(){return!0}graphingEnabled(){return!0}ansEnabled(){return!1}dimensionVarsEnabled(){return!1}validInequalityVariables(t){return this.validImplicitVariables(t)}validFirstColumnVariable(t){return this.policy2d.validFirstColumnVariable(t)}validActionVariable(t){return this.policy2d.validActionVariable(t)}tableableAsConstant(t){return this.policy2d.tableableAsConstant(t)}implicitIndependent(t){return this.policy2d.implicitIndependent(t)}validRegressionParameter(t){return this.policy2d.validRegressionParameter(t)}assignmentForbidden(t){return t===\"x\"||t===\"y\"||t===\"z\"||t===\"r\"||t===\"rho\"||t===\"theta\"||t===\"phi\"||this.policy2d.assignmentForbidden(t)}sliderVariables(t){return t.filter(n=>!(this.assignmentForbidden(n)||n.slice(0,3)===\"ans\"||n.slice(0,6)===\"idref_\"||n[0]===\"_\"))}tooManySliderVariables(t,n,r){return r?this.isBeta3d()?n.length>=1:t.length>=1:n.length>=1}isValidSlider(t){return!(t.slice(0,3)===\"ans\"||t.slice(0,6)===\"idref_\"||this.assignmentForbidden(t))}validLHS(t){return t!==\"phi\"&&this.policy2d.validLHS(t)}unplottablePolarFunction(t,n){return!1}complicatedPolarImplicit(t,n){return!1}validDoubleInequalitySymbol(t){return kg(t)}validDoubleInequalityVariables(t){return t.every(kg)}validExpressionVariables(t){return t.length===2&&t.every(n=>n==\"x\"||n==\"y\")}validSolvedVariable(t){return kg(t)||t===\"r\"||t===\"rho\"}validImplicitVariables(t){return t.every(kg)}graphableListVariables(t,n){return t===\"x\"||t===\"y\"||t===\"z\"||t===\"r\"||t===\"rho\"||n===\"x\"||n===\"y\"}validParametricVariable(t){return t===\"t\"||t===\"u\"||t===\"v\"}validParametricVariables(t){return t.length===1&&this.validParametricVariable(t[0])||t.length===2&&t.every(lD)}functionDefinitionGraphMode(t,n){if(n.length===1)switch(n[0]){case\"x\":return 121;case\"y\":return 120;default:return 10}else if(n.length===2&&n.every(r=>r==\"x\"||r==\"y\"))return 106;return 10}graphMode(t,n,r){if(r!=null||(r=n),n.length===0)switch(t){case\"z\":return r.some(o=>o===\"r\"||o===\"theta\")?109:106;case\"y\":return r.includes(\"z\")?108:123;case\"x\":return r.includes(\"z\")?107:122;case\"r\":return r.indexOf(\"r\")>-1?10:Y2(r);case\"rho\":return 111;default:return 10}switch(t){case\"z\":return n.every(o=>o==\"x\"||o==\"y\")?106:n.every(o=>o==\"r\"||o==\"theta\")?109:10;case\"y\":return n.every(o=>o==\"x\")?r.some(o=>o===\"z\")?108:121:n.every(o=>o==\"x\"||o==\"z\")?108:10;case\"x\":return n.every(o=>o==\"y\")?r.some(o=>o===\"z\")?107:120:n.every(o=>o==\"y\"||o==\"z\")?107:10;case\"r\":return n.every(o=>o==\"theta\")?Y2(r):n.every(o=>o==\"theta\"||o==\"z\")?110:10;case\"rho\":return n.every(o=>o==\"theta\"||o==\"phi\")?111:10;default:return 10}}implicitDependency(t){if(t.length!==2)return\"z\";let n=t[0]<t[1]?t[0]+t[1]:t[1]+t[0];return n===\"xy\"?\"z\":n===\"xz\"?\"y\":n===\"yz\"?\"x\":\"z\"}disabledFeatures(){return[]}shouldIncludeFunctionParametersInRandomSeed(){return this.policy2d.shouldIncludeFunctionParametersInRandomSeed()}isCustomRegressionSupported(){return this.policy2d.isCustomRegressionSupported()}getScales(){return{xAxisScale:\"linear\",yAxisScale:\"linear\"}}},kg=e=>e===\"x\"||e===\"y\"||e===\"z\",lD=e=>e===\"u\"||e===\"v\";function Y2(e){return e.some(n=>kg(n)||n===\"r\")?110:124}pt.prototype.getGraphMode=function(e,t){return 10};pt.prototype.graphmodeDependencies=wa;function wa(e,t){let n=t.getDependencies();if(e.is3dProduct()&&t instanceof _n){let r=new Set(iG(t._chunk));return n.filter(o=>r.has(o))}else return n}function y6(e,t){let n;return e&&e.hasOwnProperty(\"dragMode\")?e.dragMode===rn.AUTO?n=t.defaultDragMode:n=e.dragMode:n=t.defaultDragMode,xO(n,t.moveStrategy)}function Z2(e,t){let n=e.is3dPolicy();if(yx(t)&&!n&&y6(this.userData,t)!==rn.NONE)return t.valueType===N?26:4;let r=wa(e,t);switch(t.valueType){case lo:case G:if(n){if(r.length===0)return 114;if(e.validParametricVariables(r))return r.length==1?100:pc(103,t)}return 10;case N:case Ye:case D:case Yt:{let o=ae(t.valueType,N);return r.length===0?o?25:3:n&&e.validParametricVariables(r)?r.length===1?5:r.every(lD)?pc(130,t):10:e.validParametricVariables(r)?5:10}case x:case Z:return!e.is3dPolicy()&&r.length===1?2:n&&r.length===2&&r.indexOf(\"x\")>-1&&r.indexOf(\"y\")>-1?pc(106,t):10}if(r.length>0)return 10;switch(t.valueType){case Qi:case Ua:return 5;case Ji:case Ba:return 5;case vo:case ua:return n?100:10;case Us:case za:return n?pc(130,t):10;case Gs:case Ga:return n?pc(130,t):10;case qs:case qa:return n?pc(103,t):10;case zt:case Wi:return n?119:10;case ke:case ji:return n?129:10;case dr:case ni:return n?117:10;case kr:case aa:return n?118:10;case _e:case wr:return 16;case Te:case _i:return 20;case ue:case Co:return 21;case he:case Er:return 17;case Ee:case Ri:return 18;case Ae:case Eo:return 19;case Pe:case Di:return this instanceof $e&&this.getDependencies().length===1?10:24;case Ne:case Ur:case Ce:case zr:return 23;default:return 10}}X.prototype.getGraphMode=Z2;function X2(e,t){let n=t._expression.getDependencies();if(n.length>1)return 10;if(sm(t._expression)&&t._expression.isList&&t._expression.length===0)return 10;let r=t._symbol,o=t.getDependencies();return e.graphMode(r,n,o)}O.Equation.prototype.getGraphMode=O.CallAssignment.prototype.getGraphMode=Ro.prototype.getGraphMode=O.ComparatorChain.prototype.getGraphMode=function(e,t){if(t.type===\"Error\")return 10;let n=wa(e,t),r=t.getDependencies();if(e.is3dPolicy()){let o=10;return n.length>0&&(r.includes(\"z\")?o=this.isInequality()?113:112:o=this.isInequality()?127:126),pc(o,t)}return t.type===\"IRExpression\"&&t.isConstant?10:t instanceof O.SolvedEquation?X2(e,t):n.length===1||n.length===2?8:10};function rD(e){var t;return e===106||e===200||e===107||e===201||e===108||e===202?[\"x\",\"y\",\"z\",\"_implicit\"]:e===110||e===211?[\"x\",\"y\",\"z\",\"r\",\"theta\",\"_implicit\"]:e===111||e===212?[\"x\",\"y\",\"z\",\"rho\",\"theta\",\"phi\",\"_implicit\"]:e===109||e===213?[\"x\",\"y\",\"z\",\"r\",\"theta\",\"_implicit\"]:e===103||e===214||e===130||e===215?[\"x\",\"y\",\"z\",\"u\",\"v\",\"_implicit\"]:e===113||e===210||e===112||e===209?[\"x\",\"y\",\"z\",\"_implicit\"]:(t=us[e])!=null?t:[]}function pc(e,t){let n=rD(e),r=t._chunk;try{let i=wc(r,n,{allowSlices:!0}).getSliceVariablesOrImplicit();if(i.length!==1)return e;let s=i[0];return n.indexOf(s)<0?10:oG(e,s)}catch(o){return 10}}O.DoubleInequality.prototype.getGraphMode=function(e,t){let n=t.getDependencies();return e.graphMode(t._symbol,[],n)};Bn.prototype.getGraphMode=function(e,t){if(t instanceof O.SolvedEquation)return X2(e,t);if(this.isEquation(e,t))return this.asEquation().getGraphMode(e,t);let n=wa(e,t),r=this._symbol,o=t.getDependencies();switch(t.valueType){case x:case Z:case He:switch(n.length){case 0:{let s=e.graphMode(r,[],o);return e.is3dPolicy()?pc(s,t):s}case 1:if(t.valueType===Z&&!e.graphableListVariables(r,n[0]))return 10;if(this.type===\"Slider\")return 10;let i=e.graphMode(r,n,o);return e.is3dPolicy()?pc(i,t):i;default:return e.is3dPolicy()?pc(e.graphMode(r,n,o),t):10}case G:if(!e.is3dPolicy()||e.assignmentForbidden(r)||n.length>0&&!e.validParametricVariables(n))return 10;switch(n.length){case 0:return 114;case 1:return 100;case 2:return 103;default:return 10}default:return Z2.call(this,e,t)}};O.FunctionDefinition.prototype.getGraphMode=function(e,t){let n=e.is3dPolicy();if(this._argSymbols.length!==1&&!n)return 10;if(this.recursionInfo){let i=t instanceof _n?t.getRecursiveFunctionMetadata():void 0;if((i==null?void 0:i.type)===\"missing-non-recursive-branch\")return 10;if((i==null?void 0:i.recursiveStructure.domainInfo[this._symbol][0])===1)return 10}let r=e.functionDefinitionGraphMode(this._symbol,this._argSymbols),o=wa(e,t);switch(t.valueType){case x:case Z:if(n)return r;switch(o.length){case 0:return r;case 1:return o[0]!==this._argSymbols[0]?10:r;default:return 10}break;default:return 10}};O.Regression.prototype.getGraphMode=function(e,t){return this.isLhsSimple?t.isModelValid?t.model.getDependencies().length!==1?10:2:10:10};function pD(e,t){return t.type===\"Error\"?10:11}O.Histogram.prototype.getGraphMode=pD;O.DotPlot.prototype.getGraphMode=pD;O.BoxPlot.prototype.getGraphMode=pD;O.Image.prototype.getGraphMode=function(e,t){return this.userData.showPoints?this.center.type===\"Error\"||this.radianAngle.type===\"Error\"||this.width.type===\"Error\"||this.height.type===\"Error\"||this.opacity.type===\"Error\"?10:3:10};O.AssignmentImport.prototype.getGraphMode=function(e,t){return t.type===\"ConcreteAssignmentImport\"?t.resolvedRawNode.getGraphMode(e,t.concrete):10};So();function j2(e){return e instanceof $n||e instanceof Hs&&e.args.length===1&&e.args[0]instanceof $n}function W2(e){return!!(e instanceof $e&&e._symbol===Wr||(e instanceof O.Multiply||e instanceof O.CrossMultiply||e instanceof O.DotMultiply)&&e.args.length===2&&e.args.some(t=>t instanceof $e&&t._symbol===Wr)&&e.args.some(t=>j2(t))||e instanceof O.Negative&&e.args[0]instanceof $e&&e.args[0]._symbol===Wr||e instanceof On&&e._symbol===Wr&&e.args.length===1&&e.args[0]instanceof $n)}function J2(e){return e instanceof Bn?$g(e._expression):$g(e)}function $g(e){return W2(e)?!0:(e instanceof O.Add||e instanceof O.Subtract)&&e.args.some(t=>W2(t))&&e.args.some(t=>j2(t))}function dD(e){let t;for(let n=0;n<e.length;n++)if(e[n].dependsOn(Wr)){if(t!==void 0)return;t=n}return t}function Hg(e,t){var n;if(t.dependsOn(Wr))switch(t.type){case\"Identifier\":return new O.Constant(1);case\"Negative\":{let r=Hg(e,t.args[0]);return r===void 0?void 0:t.copyWithArgs([r])}case\"Multiply\":case\"DotMultiply\":case\"CrossMultiply\":switch(dD(t.args)){case 0:{let o=Hg(e,t.args[0]);return o===void 0?void 0:t.copyWithArgs([o,t.args[1]])}case 1:{let o=Hg(e,t.args[1]);return o===void 0?void 0:t.copyWithArgs([t.args[0],o])}default:return}case\"Divide\":{if(dD(t.args)!==0)return;let o=Hg(e,t.args[0]);return o===void 0?void 0:t.copyWithArgs([o,t.args[1]])}case\"FunctionCall\":return t._symbol===Wr&&t.args.length===1&&!t.args[0].dependsOn(Wr)?t.args[0]:t.args.length===1&&t.args[0].type===\"Identifier\"&&t.args[0]._symbol===Wr&&t._symbol!==void 0&&((n=e[t._symbol])==null?void 0:n.type)!==\"Placeholder\"?new O.Identifier(t._symbol):void 0;default:return}}function wI(e,t){if(t.dependsOn(Wr))switch(t.type){case\"Add\":case\"Subtract\":switch(dD(t.args)){case 0:{let r=wI(e,t.args[0]);return r===void 0?void 0:[t.copyWithArgs([r[0],t.args[1]]),r[1]]}case 1:{let r=wI(e,t.args[1]);return r===void 0?void 0:[t.copyWithArgs([t.args[0],r[0]]),t.type===\"Subtract\"?new O.Negative([r[1]]):r[1]]}default:return}default:{let n=Hg(e,t);return n===void 0?void 0:[new O.Constant(0),n]}}}var Q2=new O.Constant(Ie(0,1));function Yg(e,t){var n;if(e.userData&&e.userData.id){let r=e.userData.id;return!!((n=By(t).viewportTransitiveDependencies)!=null&&n.has(r))}return!1}Bn.prototype.getMoveStrategy=function(e,t,n,r){if(!Yg(this,t))return this._expression.getMoveStrategy(e,t,n,r)};function g6(e){return{type:\"updateSliderNonlinear\",id:e.id,initialValue:e.initialValue,min:e.min,max:e.max,compiled:e.compiled,isComplex:e.isComplex}}function h6(e){return{type:\"updateGliderParameter\",span:e.span,movesOn:e.movesOn}}function b6(e){return{type:\"updateSliderForGlider\",id:e.sliderId,movesOn:e.movesOn,min:e.min,max:e.max}}function K2(e,t,n,r,o,i){var a,u;let s=t.getDependencies();for(let c of s)if(o[c])return;for(let c=s.length-1;c>=0;c--){let l=s[c];if(i[l])continue;let p=r[l];if(p===void 0)continue;let d=n[l];if(d.order!==1)continue;let m=d.tree,f=m.type===\"IRExpression\"?m.getPolynomialCoefficients(l):void 0,g=(a=f==null?void 0:f[1])!=null?a:Q2,y=(u=f==null?void 0:f[0])!=null?u:Q2;if(!am(y)||!am(g)||!isFinite(y.asValue())||!isFinite(g.asValue())||g.asValue()===0)continue;let h=[-y.asValue()/g.asValue(),1/g.asValue()];return{symbol:l,id:p,coefficients:h}}}function x6(e,t){for(let n of fe(t))if(t[n].evaluationState.assignment===e)return n}function T6(e){let t={};for(let n=0;n<e.length;n++)t[e[n]]=!0;return t}function mD(e,t,n){var s;let r=T6(t),o=By(e),i={};for(let a of fe(n)){if((s=o.viewportTransitiveDependencies)!=null&&s.has(a))continue;let u=n[a].evaluationState.assignment;n[a].evaluationState.is_slidable&&r[u]&&(i[u]=a)}return i}function e3(e,t,n,r){let o=[];for(let i=0;i<n.length;i++){let s=n[i],a={};o.push(a);for(let u=0;u<r.length;u++){let c=r[u],l=qn(t);l[c]=void 0;let p=pe(s,e,l);if(p.type===\"Error\"){a[c]={tree:p,order:1/0};continue}else a[c]={tree:p,order:p.polynomialOrder(c)}}}return o}function t3(e,t,n){for(let r=0;r<e.length;r++){let o=e[r];t[o].order!==0&&(n[o]=!0)}}Hs.prototype.getMoveStrategy=function(e,t,n,r){if(!Yg(this,t))return n3(this,e,t,n,r)};function n3(e,t,n,r,o){var T;let i=r.valueType===N;if(r.valueType!==D&&!i||r.getDependencies().length!==0)return;if(i&&J2(e)){let I=e.getInputSpan();return I?[{type:\"updateCoordinate\",inputSpan:I},{type:\"updateCoordinate\",inputSpan:I}]:[{type:\"none\"},{type:\"none\"}]}let s=e.getDependencies(),a=mD(n,s,o),u=fe(a),c;i?c=wI(n,e):c=e.args;let l=[{type:\"none\"},{type:\"none\"}];if(c){let I=e3(t,n,c,u),E={},S={};for(let C=0;C<2;C++){let v=c[C],_=e.args[C];if(am(_)&&!i){let k=_==null?void 0:_.getInputSpan();l[C]=k?{type:\"updateCoordinate\",inputSpan:k}:{type:\"none\"};continue}let L=K2(t,v,I[C],a,E,S);L&&(l[C]={type:\"updateSlider\",id:L.id,coefficients:L.coefficients},E[L.symbol]=!0,t3(u,I[C],S)),l[C]||(l[C]={type:\"none\"})}i&&(l[0].type===\"updateSlider\"&&l[1].type===\"none\"?pe(c[1],t,n).valueType!==x&&(l[0]={type:\"none\"}):l[0].type===\"none\"&&l[1].type===\"updateSlider\"&&pe(c[0],t,n).valueType!==x&&(l[1]={type:\"none\"}))}let[p,d]=l,m;if(p.type===\"none\"&&d.type===\"none\"&&u.length===1&&(m=u[0]),!m)return p.type!==\"none\"||d.type!==\"none\"?l:void 0;let f=a[m],g=qn(n);g[m]=void 0;let y=pe(e,t,g);if(y.isError)return;let h=y.getCompiledFunction();WM(h);let b=o[f].evaluationState;return[g6({id:f,initialValue:(T=b.typed_constant_value)==null?void 0:T.value,min:b.slider_min_number,max:b.slider_max_number,compiled:h,isComplex:i}),{type:\"none\"}]}function I6(e,t,n,r,o){if(!$s(r)||r.valueType!==D)return;let i,s,a;switch(e.args[1].type){case\"Constant\":{if(typeof e.args[1].asValue()!=\"number\"||(i=pe(e.args[0],t,n),!$s(i)))return;a=Vr(i);let c=e.args[1].getInputSpan();return[c?h6({span:c,movesOn:a}):{type:\"none\"},{type:\"none\"}]}case\"Identifier\":{let u=e.args[1]._symbol;if(!u)return;let l=mD(n,[u],o)[u];if(l===void 0)return;let p=o[l].evaluationState,d=qn(n);return d[u]=void 0,i=pe(e.args[0],t,d),$s(i)?(a=Vr(i),s={min:p.slider_min_number,max:p.slider_max_number},[b6({min:s.min,max:s.max,movesOn:a,sliderId:l}),{type:\"none\"}]):void 0}default:return}}function r3(e,t,n,r,o){if(r.valueType===N)return n3(e,t,n,r,o)}X.prototype.getMoveStrategy=function(e,t,n,r){if(!Yg(this,t))return r3(this,e,t,n,r)};On.prototype.getMoveStrategy=function(e,t,n,r){if(!Yg(this,t))return this._symbol==\"glider\"?I6(this,e,t,n,r):r3(this,e,t,n,r)};O.Image.prototype.getMoveStrategy=function(e,t,n,r){if(Yg(this,t)||n.center.valueType!==D||n.center.getDependencies().length!==0||n.radianAngle.type!==\"IRExpression\"||n.width.type!==\"IRExpression\"||n.height.type!==\"IRExpression\"||n.opacity.type!==\"IRExpression\"||!n.width.isConstant||!n.height.isConstant||!n.radianAngle.isConstant||!n.opacity.isConstant)return;let o=this.getDependencies(),i=mD(t,o,r),s=fe(i),a=[this.width,this.height];this.center.type===\"ParenSeq\"?a.push(this.center.args[0],this.center.args[1]):this.center.type===\"Identifier\"&&(this.center.referencedStatementId=x6(this.center._symbol,r));let u={},c={},l=e3(e,t,a,s),p=[{type:\"none\"},{type:\"none\"},{type:\"none\"},{type:\"none\"}],d=[2,3,0,1];for(let m=0;m<d.length;m++){let f=d[m],g=a[f];if(!g)continue;if(g.type===\"Constant\"){let h=g.getInputSpan();p[f]=h?{type:\"updateCoordinate\",inputSpan:h}:{type:\"none\"};continue}let y=K2(e,g,l[f],i,u,c);y&&(p[f]={type:\"updateSlider\",id:y.id,coefficients:y.coefficients},u[y.symbol]=!0,t3(s,l[f],c))}if(!(p[0].type===\"none\"&&p[1].type===\"none\"&&p[2].type===\"none\"&&p[3].type===\"none\"))return p};var fD=e=>e==null?void 0:e.some(t=>\"isComplex\"in t&&t.isComplex);function Zg(e,t){if(e instanceof On||e instanceof Bn){if(t[0].type!==\"none\"&&t[1].type!==\"none\")return rn.XY;if(t[0].type!==\"none\")return rn.X;if(t[1].type!==\"none\")return rn.Y}else if(e instanceof X){if(t[0].type===\"updateSlider\"&&t[1].type===\"updateSlider\")return rn.XY;if(t[0].type===\"updateSlider\")return rn.X;if(t[1].type===\"updateSlider\")return rn.Y;if(t[0].type===\"updateSliderNonlinear\"&&t[0].isComplex)return rn.X}return rn.NONE}var P6=[\"ttest\",\"ztest\",\"zproptest\",\"chisqgof\",\"chisqtest\"];function o3(e){return!!e&&P6.includes(e)}function S6(e,t,{firstArgIsList:n,firstArgIsRegressionParameter:r}){switch(e){case\"ttest\":if(n===void 0&&t<=1)return{type:\"inference\",symbol:e,params:[\"list\"],samples:1};if(n&&t<=2)switch(t){case 1:return{type:\"inference\",symbol:e,params:[\"list\"],samples:1};case 2:return{type:\"inference\",symbol:e,params:[\"list\"],samples:2}}else{if(r&&t<=1)return{type:\"inference\",symbol:e,params:[\"regression-parameter\"],samples:1};switch(t){case 1:case 2:case 3:return{type:\"inference\",symbol:e,params:[\"sample-size\",\"mean\",\"stdev\"],samples:1};case 4:case 5:case 6:return{type:\"inference\",symbol:e,params:[\"sample-size\",\"mean\",\"stdev\"],samples:2}}}break;case\"ztest\":return n===void 0&&t<=1?{type:\"inference\",symbol:e,params:[\"list\",\"stdevp\"],samples:1}:n&&t<=4?t<=2?{type:\"inference\",symbol:e,params:[\"list\",\"stdevp\"],samples:1}:{type:\"inference\",symbol:e,params:[\"list\",\"stdevp\"],samples:2}:t<=3?{type:\"inference\",symbol:e,params:[\"sample-size\",\"mean\",\"stdevp\"],samples:1}:{type:\"inference\",symbol:e,params:[\"sample-size\",\"mean\",\"stdevp\"],samples:2};case\"zproptest\":return t<=2?{type:\"inference\",symbol:e,params:[\"successes\",\"sample-size\"],samples:1}:{type:\"inference\",symbol:e,params:[\"successes\",\"sample-size\"],samples:2};case\"chisqgof\":case\"chisqtest\":return{type:\"inference\",symbol:e,params:[]};default:throw new Error(`Unexpected symbol ${e}`)}}function i3(e,t,n){return S6(e,t.args.length,n)}function s3(e,t,n){var g,y,h,b,T,I,E,S;let{evaluationState:r,rawTree:o}=e,i=o.metaData,s=e.rawTree.userData;if(((g=r.top_level_function_spec)==null?void 0:g.type)!==\"inference\")return;let a=r.top_level_function_spec.symbol,u=r.typed_constant_value,c=o.type===\"Assignment\"?o._expression:o,l=new rr(\"estimate\",[c]),p=new rr(\"stderr\",[c]),[d]=kx(pe(l,t,n),x),[m]=kx(pe(p,t,n),x);r.point_estimate_value=d==null?void 0:d.value,r.standard_error_value=m==null?void 0:m.value,r.hypothesis_value!==void 0&&((h=(y=s==null?void 0:s.inference)==null?void 0:y.significance)==null?void 0:h.hypothesis)===\"\"&&(r.hypothesis_placeholder=r.hypothesis_value);let f=r.hypothesis_value;if(r.hypothesis_valid&&(f===void 0||Array.isArray(f)?r.hypothesis_valid=!1:a===\"zproptest\"&&(u3(u)===2?(f<-1||f>1)&&(r.hypothesis_valid=!1):(f<0||f>1)&&(r.hypothesis_valid=!1))),(b=s.inference)!=null&&b.significance.show){if(e.evaluationState.hypothesis_valid){let C=new rr(\"null\",[c,new Un(r.hypothesis_value)]),v=Vr(pe(C,t,n));r.significance_value=(v==null?void 0:v.valueType)===yn||(v==null?void 0:v.valueType)===gn?v:void 0}r.hypothesis_variables=(T=i.hypothesis)==null?void 0:T.getSliderVariables(t,pe(i.hypothesis,t,n))}if((I=s.inference)!=null&&I.confidence.show){if(e.evaluationState.confidence_level_valid){let C=new rr(\"conf\",[c,new Un(r.confidence_level_value)]),[v]=kx(pe(C,t,n),Nt);r.confidence_value=v}r.confidence_level_variables=(E=i.confidenceLevel)==null?void 0:E.getSliderVariables(t,pe(i.confidenceLevel,t,n))}r.variables=(S=r.variables)==null?void 0:S.filter(C=>{var v,_;return!((v=r.confidence_level_variables)!=null&&v.includes(C))&&!((_=r.hypothesis_variables)!=null&&_.includes(C))})}function yD(e){e.type===\"Assignment\"&&(e=e._expression);let t;return e.type!==\"FunctionCall\"?t=void 0:[\"ttest\",\"ztest\",\"zproptest\",\"chisqgof\",\"chisqtest\"].indexOf(e._symbol)!==-1?t=e._symbol:t=void 0,t}var a3=(e,t)=>{if(!e||!t)return 0;let n=yD(e),r=Vr(t);return n===\"zproptest\"&&u3(r)===1?.5:0},u3=e=>{if(!(!e||!Ni(e.valueType)))return Uu(e.valueType,[Qt,Ut,Zt])?2:1};var Xg={normaldist:{type:\"distribution\",symbol:\"normaldist\",params:[\"mean\",\"stdev\"],defaults:[0,1],discrete:!1},tdist:{type:\"distribution\",symbol:\"tdist\",params:[\"dof\",\"shift\",\"scale\"],defaults:[void 0,0,1],discrete:!1},chisqdist:{type:\"distribution\",symbol:\"chisqdist\",params:[\"dof\"],defaults:[void 0],discrete:!1},binomialdist:{type:\"distribution\",symbol:\"binomialdist\",params:[\"trials\",\"probsuccess\"],defaults:[void 0,.5],discrete:!0},poissondist:{type:\"distribution\",symbol:\"poissondist\",params:[\"mean\"],defaults:[void 0],discrete:!0},geodist:{type:\"distribution\",symbol:\"geodist\",params:[\"probsuccess\"],defaults:[.5],discrete:!0},uniformdist:{type:\"distribution\",symbol:\"uniformdist\",params:[\"min\",\"max\"],defaults:[0,1],discrete:!1}},C6={Histogram:{type:\"visualization\",symbol:\"histogram\",params:[\"data\",\"binwidth\"],defaults:[void 0,1]},DotPlot:{type:\"visualization\",symbol:\"dotplot\",params:[\"data\",\"binwidth\"],defaults:[void 0,1]},BoxPlot:{type:\"visualization\",symbol:\"boxplot\",params:[\"data\"],defaults:[void 0]}};function sd(e,t,n){var a;if(e.type===\"Assignment\")return sd(e._expression,t,n);if(e.type===\"Error\"&&e.userData.latex)return sd(mi(e.userData.latex,{trailingComma:!0}),t,n);let r;switch(e.type){case\"Histogram\":case\"DotPlot\":case\"BoxPlot\":r=C6[e.type];break;case\"FunctionCall\":let u=e._symbol;if(u in Xg)r=Xg[u];else if(o3(u)){let c=e.args[0],l=!1;c?(((a=e.args[0])==null?void 0:a.type)===\"List\"||t&&n&&pe(e.args[0],t,n).isList)&&(l=!0):l=void 0;let p=c&&c instanceof Mn&&(n==null?void 0:n[c._symbol])instanceof Cl;r=i3(u,e,{firstArgIsList:l,firstArgIsRegressionParameter:p})}break;default:return}if(!r)return;let o={},i=r.params,s=e.args;for(let u=0;u<i.length;u++){let c=s[u];o[i[u]]=c&&c.getInputString()||\"\"}return{...r,span:e.getInputSpan(),values:o}}function bTe(e,t){switch(e){case\"normaldist\":return t.map(n=>n.type===\"default\"?!0:n.type===\"error\"?!1:isFinite(n.value));case\"binomialdist\":return t.map((n,r)=>r===0?n.type===\"number\"&&n.value>0&&isFinite(n.value):r===1?n.type===\"default\"?!0:n.type===\"number\"&&n.value>=0&&n.value<=1:!1);case\"chisqdist\":return t.map((n,r)=>r===0?n.type===\"number\"&&n.value>0&&isFinite(n.value):!1);case\"poissondist\":return t.map((n,r)=>r===0?n.type===\"number\"&&n.value>=0&&isFinite(n.value):!1);case\"geodist\":return t.map((n,r)=>r===0?n.type===\"default\"?!0:n.type===\"number\"&&n.value>0&&n.value<=1:!1);case\"tdist\":return t.map((n,r)=>r===0?n.type===\"number\"&&n.value>0&&isFinite(n.value):r===1||r===2?n.type===\"default\"?!0:n.type===\"number\"&&isFinite(n.value):!1);case\"uniformdist\":return t.map((n,r)=>{if(n.type===\"error\")return!1;if(n.type===\"default\")return!0;if(!isFinite(n.value))return!1;if(r===0){let o=t[1],i=1/0;return o.type===\"default\"&&(i=1),o.type===\"number\"&&(i=o.value),n.type===\"number\"&&n.value<i}else if(r===1){let o=t[0],i=-1/0;return o.type===\"default\"&&(i=0),o.type===\"number\"&&(i=o.value),n.type===\"number\"&&n.value>i}else return!1});default:return t.map(()=>!1)}}X.prototype.tableInfo=function(e,t){return!1};$e.prototype.tableInfo=function(e,t){return e.validFirstColumnVariable(this._symbol)?{independent_variable:this._symbol,dependent_column:this.getInputString(),by_reference:!1}:!1};X.prototype.tableInfo=function(e,t){let n=t.getDependencies();if(sd(this))return!1;switch(t.valueType){case D:case Yt:return n.length!==0||yx(t)&&(t.moveStrategy[0].type===\"updateSlider\"||t.moveStrategy[1].type===\"updateSlider\")?!1:{independent_variable:\"x\",dependent_column:\"y\",by_reference:!1,values:W(t.valueType)?t.asValue():[t.asValue()]};case x:if(n.length!==1)return!1;let o=n[0];return e.validFirstColumnVariable(o)?{independent_variable:o,dependent_column:this.getInputString(),by_reference:!1}:!1;default:return!1}};Bn.prototype.tableInfo=function(e,t){if(!this.getInputString().length||sd(this)||Zf(t.valueType))return!1;let n=t.getDependencies();if(n.length>1)return!1;let r;if(n.length===0){if(!e.tableableAsConstant(this._symbol))return!1;r=e.implicitIndependent(this._symbol)}else r=n[0];if(!e.validFirstColumnVariable(r))return!1;let o=e.assignmentForbidden(this._symbol)?ma(this.getInputString().replace(/[^=]*=/,\"\")):ma(this.getInputString().split(\"=\")[0]);return{independent_variable:r,dependent_column:o,by_reference:!e.assignmentForbidden(this._symbol)}};O.FunctionDefinition.prototype.tableInfo=function(e,t){if(this._argSymbols.length!==1||!this.getInputString().length||t.getDependencies().length>1)return!1;let r=this._argSymbols[0];if(!e.validFirstColumnVariable(r))return!1;let o=e.assignmentForbidden(this._symbol),i=o?ma(this.getInputString().replace(/[^=]*=/,\"\")):ma(this.getInputString().split(\"=\")[0]);return{independent_variable:r,dependent_column:i,by_reference:!o}};Ro.prototype.tableInfo=function(e,t){return!1};O.ComparatorChain.prototype.tableInfo=function(e,t){return!1};O.DoubleInequality.prototype.tableInfo=function(e,t){return!1};O.Equation.prototype.tableInfo=function(e,t){return!1};pt.prototype.tableError=function(){return this.isInequality()?P(\"shared-calculator-error-table-inequality-supplement\"):!(this instanceof X)&&!(this instanceof O.IRExpression)?P(\"shared-calculator-error-table-generic-supplement\"):!1};ns.prototype.tableError=function(){return P(\"shared-calculator-error-table-list-supplement\")};O.Equation.prototype.tableError=Bn.prototype.tableError=function(){return P(\"shared-calculator-error-table-equation-supplement\")};O.ComparatorChain.prototype.tableError=function(){return this.symbols.includes(\"=\")?P(\"shared-calculator-error-table-equation-supplement\"):P(\"shared-calculator-error-table-inequality-supplement\")};O.FunctionDefinition.prototype.tableError=function(){return P(\"shared-calculator-error-table-function-definition-supplement\")};O.Regression.prototype.tableError=function(){return P(\"shared-calculator-error-table-regression-supplement\")};function E6(){return Mo(this._symbol)+\" \"}$e.prototype.printLatex=E6;$n.prototype.printLatex=function(){return da(this.asValue())};O.Ticker.prototype.printLatex=function(){return\"\\\\ticker\\\\left(\"+this.args.map(cs).join(\", \")+\"\\\\right)\"};O.Negative.prototype.printLatex=function(){return\"-\\\\left(\"+this.args[0].printLatex()+\"\\\\right)\"};O.Add.prototype.printLatex=function(){return\"\\\\left(\"+this.args[0].printLatex()+\"\\\\right)+\\\\left(\"+this.args[1].printLatex()+\"\\\\right)\"};O.PercentOf.prototype.printLatex=function(){return this.args[0].printLatex()+\" \\\\% \\\\operatorname{of} \"+this.args[1].printLatex()};O.Subtract.prototype.printLatex=function(){return\"\\\\left(\"+this.args[0].printLatex()+\"\\\\right)-\\\\left(\"+this.args[1].printLatex()+\"\\\\right)\"};O.Multiply.prototype.printLatex=function(){return\"\\\\left(\"+this.args[0].printLatex()+\"\\\\right)*\\\\left(\"+this.args[1].printLatex()+\"\\\\right)\"};O.DotMultiply.prototype.printLatex=function(){return\"\\\\left(\"+this.args[0].printLatex()+\"\\\\right)\\\\cdot\\\\left(\"+this.args[1].printLatex()+\"\\\\right)\"};O.CrossMultiply.prototype.printLatex=function(){return\"\\\\left(\"+this.args[0].printLatex()+\"\\\\right)\\\\times\\\\left(\"+this.args[1].printLatex()+\"\\\\right)\"};O.Divide.prototype.printLatex=function(){return\"\\\\frac{\"+this.args[0].printLatex()+\"}{\"+this.args[1].printLatex()+\"}\"};Wy.prototype.printLatex=function(){return\"\\\\left(\"+this.args[0].printLatex()+\"\\\\right)^{\"+this.args[1].printLatex()+\"}\"};Bn.prototype.printLatex=function(){return Mo(this._symbol)+\"=\"+this._expression.printLatex()};O.Equation.prototype.printLatex=O.CallAssignment.prototype.printLatex=function(){return this._lhs.printLatex()+\"=\"+this._rhs.printLatex()};function LI(e){switch(e){case\">\":return\">\";case\"<\":return\"<\";case\">=\":return\"\\\\ge \";case\"<=\":return\"\\\\le \";case\"=\":return\"=\"}return\"\"}Ro.prototype.printLatex=function(){return\"\\\\left(\"+this.args[0].printLatex()+\"\\\\right)\"+LI(this.operator)+\"\\\\left(\"+this.args[1].printLatex()+\"\\\\right)\"};O.ComparatorChain.prototype.printLatex=function(){let e=\"\";for(let t=0;t<this.symbols.length;t++)e+=`\\\\left(${this.args[t].printLatex()}\\\\right)${LI(this.symbols[t])}`;return e+=`\\\\left(${this.args[this.args.length-1].printLatex()}\\\\right)`,e};O.DoubleInequality.prototype.printLatex=function(){return\"\\\\left(\"+this.args[0].printLatex()+\"\\\\right)\"+LI(this.args[1])+this.args[2].printLatex()+LI(this.args[3])+\"\\\\left(\"+this.args[4].printLatex()+\"\\\\right)\"};O.Or.prototype.printLatex=function(){return this.args[0].printLatex()+\",\"+this.args[1].printLatex()};function cs(e){return e.printLatex()}function v6(){switch(this._symbol){case\"sqrt\":return\"\\\\sqrt{\"+this.args[0].printLatex()+\"}\";case\"nthroot\":return\"\\\\sqrt[\"+this.args[1].printLatex()+\"]{\"+this.args[0].printLatex()+\"}\";case\"logbase\":return\"\\\\log_{\"+this.args[1].printLatex()+\"}\\\\left(\"+this.args[0].printLatex()+\"\\\\right)\";default:return Mo(this._symbol)+\"\\\\left(\"+this.args.map(cs).join(\", \")+\"\\\\right)\"}}On.prototype.printLatex=v6;O.RecursiveFunctionBaseCase.prototype.printLatex=function(){return this.originalNode.printLatex()};O.SeededFunctionCall.prototype.printLatex=function(){return Mo(this._symbol)+\"\\\\left(\"+this.args.slice(1).map(cs).join(\", \")+\"\\\\right)\"};O.DotAccess.prototype.printLatex=function(){return\"(\"+this.args[0].printLatex()+\").(\"+this.args[1].printLatex()+\")\"};O.Prime.prototype.printLatex=function(){switch(this.args[0]._symbol){case\"logbase\":return\"\\\\log_{\"+this.args[0].args[1].printLatex()+\"}\"+Array(this.order+1).join(\"'\")+\"\\\\left(\"+this.args[0].args[0].printLatex()+\"\\\\right)\";default:return Mo(this.args[0]._symbol)+Array(this.order+1).join(\"'\")+\"\\\\left(\"+this.args[0].args.map(cs).join(\", \")+\"\\\\right)\"}};ns.prototype.printLatex=function(){return\"\\\\left[\"+this.args.map(cs).join(\", \")+\"\\\\right]\"};O.Range.prototype.printLatex=function(){return\"\\\\left[\"+this.args[0].args.map(cs).join(\", \")+\" ... \"+this.args[1].args.map(cs).join(\", \")+\"\\\\right]\"};O.UpdateRule.prototype.printLatex=function(){return this.args[0].printLatex()+\"\\\\to(\"+this.args[1].printLatex()+\")\"};O.ListAccess.prototype.printLatex=function(){return\"\\\\left(\"+this.args[0].printLatex()+\"\\\\right)\\\\left[\"+this.args[1].printLatex()+\"\\\\right]\"};Hs.prototype.printLatex=function(){return\"\\\\left(\"+this.args.map(cs).join(\", \")+\"\\\\right)\"};O.BareSeq.prototype.printLatex=function(){return this.args.map(cs).join(\", \")};O.NamedCoordinateAccess.prototype.printLatex=function(){return\"\\\\left(\\\\left(\"+this.args[0].printLatex()+\"\\\\right).\"+this.symbol+\"\\\\right)\"};O.Norm.prototype.printLatex=function(){return\"\\\\left|\"+this.args[0].printLatex()+\"\\\\right|\"};O.Sum.prototype.printLatex=function(){return\"\\\\sum_{\"+this.args[0].printLatex()+\"=\"+this.args[1].printLatex()+\"}^{\"+this.args[2].printLatex()+\"}\\\\left(\"+this.args[3].printLatex()+\"\\\\right)\"};O.Product.prototype.printLatex=function(){return\"\\\\prod_{\"+this.args[0].printLatex()+\"=\"+this.args[1].printLatex()+\"}^{\"+this.args[2].printLatex()+\"}\\\\left(\"+this.args[3].printLatex()+\"\\\\right)\"};O.Integral.prototype.printLatex=function(){return\"\\\\int_{\"+this.args[1].printLatex()+\"}^{\"+this.args[2].printLatex()+\"}\\\\left(\"+this.args[3].printLatex()+\"\\\\right)d\"+this.args[0].printLatex()};O.FunctionExponent.prototype.printLatex=function(){return this.args[0].printLatex()+\"\\\\left(\"+this.args[1].printLatex()+\"\\\\right)^{\"+this.args[2].printLatex()+\"}\"};O.FunctionFactorial.prototype.printLatex=function(){return this.args[0].printLatex()+\"\\\\left(\"+this.args[1].printLatex()+\"\\\\right)!\"};function gD(e){return e instanceof $n&&e.asValue()===!0}function M6(e){return e instanceof $n&&e.isNaN()}O.Piecewise.prototype.printLatex=function(){let e=this;if(gD(e.args[0]))return e.args[1].printLatex();let t=[\"\\\\left\\\\{\"];for(;;){if(gD(e.args[0])){t.push(e.args[1].printLatex());break}if(t.push(e.args[0].printLatex(),\": \"),M6(e.args[2])){t.push(e.args[1].printLatex());break}if(t.push(e.args[1].printLatex(),\", \"),!(e.args[2]instanceof O.Piecewise)){t.push(e.args[2].printLatex());break}e=e.args[2]}return t.push(\"\\\\right\\\\}\"),t.join(\"\")};O.Restriction.prototype.printLatex=function(){return gD(this.args[0])?\"\\\\left\\\\{\\\\right\\\\}\":\"\\\\left\\\\{\"+this.args[0].printLatex()+\"\\\\right\\\\}\"};O.FunctionDefinition.prototype.printLatex=function(){return Mo(this._symbol)+\"\\\\left(\"+this._argSymbols.map(Mo).join(\", \")+\"\\\\right) = \"+this._expression.printLatex()};O.Derivative.prototype.printLatex=function(){return\"\\\\frac{d}{d\"+Mo(this._symbol)+\"}\\\\left(\"+this.args[0].printLatex()+\"\\\\right)\"};O.Regression.prototype.printLatex=function(){return\"\\\\left(\"+this._lhs.printLatex()+\"\\\\right)\\\\sim\\\\left(\"+this._rhs.printLatex()+\"\\\\right)\"};O.Histogram.prototype.printLatex=function(){return\"\\\\histogram\\\\left(\"+this.args.map(cs).join(\", \")+\"\\\\right)\"};O.DotPlot.prototype.printLatex=function(){return\"\\\\dotplot\\\\left(\"+this.args.map(cs).join(\", \")+\"\\\\right)\"};O.BoxPlot.prototype.printLatex=function(){return\"\\\\boxplot\\\\left(\"+this.args.map(cs).join(\", \")+\"\\\\right)\"};O.Stats.prototype.printLatex=function(){return\"\\\\Stats\\\\left(\"+this.args.map(cs).join(\", \")+\"\\\\right)\"};O.AssignmentExpression.prototype.printLatex=function(){return Mo(this._symbol)+\"=\"+this.args[1].printLatex()};O.ListComprehension.prototype.printLatex=function(){return\"\\\\left[\"+this._body.printLatex()+\"\\\\operatorname{for}\"+this._inputLists.map(cs).join(\", \")+\"\\\\right]\"};O.Substitution.prototype.printLatex=function(){return\"\\\\left(\\\\left(\"+this._body.printLatex()+\"\\\\right)\\\\operatorname{with}\"+this._assignments.map(cs).join(\", \")+\"\\\\right)\"};O.Construction.prototype.printLatex=function(){return\"\\\\construction \"};O.ImaginaryUnit.prototype.printLatex=function(){return Wr};O.MovableComplexNumber.prototype.printLatex=function(){return uy(this.asValue())};pt.prototype.getExpressionType=function(e,t){switch(e){case 114:return t&&W(t)?A.POINT3D_LIST:A.POINT3D;case 100:case 128:return A.CURVE3D_xyz_t;case 119:return A.SEGMENT3D;case 129:return A.VECTOR3D;case 130:case 103:return A.SURFACE_xyz_uv;case 110:return A.SURFACE_r_\\u03B8z;case 124:return A.SURFACE_r_\\u03B8z_AMBIGUOUS;case 109:return A.SURFACE_z_r\\u03B8;case 111:return A.SURFACE_r_\\u03B8\\u03C6;case 107:case 108:case 106:return A.SURFACE;case 118:return A.SPHERE3D;case 117:return A.TRIANGLE3D;case 120:case 121:return A.SURFACE_AMBIGUOUS;case 122:case 123:return A.SURFACE_CONSTANT_AMBIGUOUS;case 112:case 113:case 210:return A.IMPLICIT_SURFACE;case 126:case 127:return A.IMPLICIT_SURFACE_AMBIGUOUS;case 3:case 4:case 25:case 26:return t&&W(t)?A.POINT_LIST:A.SINGLE_POINT;case 1:case 2:return A.X_OR_Y;case 5:return A.PARAMETRIC;case 6:return A.POLAR;case 8:return A.IMPLICIT;case 24:case 17:return A.VECTOR2D;case 200:case 201:case 202:case 205:case 209:return A.SLICE;case 211:case 206:return A.SLICE_r\\u03B8z_at_z;case 203:return A.SLICE_zr\\u03B8_at_r;case 204:return A.SLICE_zr\\u03B8_at_\\u03B8;case 213:return A.SLICE_zr\\u03B8_at_xyz;case 207:return A.SLICE_r\\u03B8\\u03C6_at_\\u03B8;case 208:return A.SLICE_r\\u03B8\\u03C6_at_\\u03C6;case 212:return A.SLICE_r\\u03B8\\u03C6_at_xyz;case 214:case 215:return A.SLICE_xyz_uv;default:return t!==void 0&&ae(t,_e)?A.POLYGON:A.X_OR_Y}};O.Histogram.prototype.getExpressionType=function(e,t){return A.HISTOGRAM};O.DotPlot.prototype.getExpressionType=function(e,t){return A.DOTPLOT};O.BoxPlot.prototype.getExpressionType=function(e,t){return A.BOXPLOT};function _6(e){return function(n){return new e(n)}}var R6=[pm,bl,mm,fm,ym,ai,Tl,gm,bm,Il,Pl,xm,Im,im,ru,vm,Mm,_m,Dm,fl,Nm,No,Vm,Am,wm,Fm,si,Bm];for(let e of R6)e.prototype.copyWithArgs=_6(e);Lp.prototype.copyWithArgs=function(e){return new Lp(e)};Ro.prototype.copyWithArgs=function(e){return dx(this.operator,e)};xl.prototype.copyWithArgs=function(e){return new xl(this.symbols,e)};$n.prototype.copyWithArgs=function(e){return new Un(this._constantValue)};Fp.prototype.copyWithArgs=function(e){return new Fp(this.constructedObjectIds)};Vp.prototype.copyWithArgs=function(e){return new Vp(this._symbol,e)};Bp.prototype.copyWithArgs=function(e){return new Bp(this.tag,e)};On.prototype.copyWithArgs=function(e){return new rr(new Mn(this._symbol),e)};$e.prototype.copyWithArgs=function(e){return new Mn(this._symbol)};iu.prototype.copyWithArgs=function(e){return new iu};Rc.prototype.copyWithArgs=function(e){return new Rc(e[0],e[1],e.slice(2),this.shouldCoerceToList,this.parameters)};Qu.prototype.copyWithArgs=function(e){return new Qu(e,this.moveStrategy,this.defaultDragMode)};ou.prototype.copyWithArgs=function(e){return new ou(e,this.moveStrategy,this.defaultDragMode)};su.prototype.copyWithArgs=function(e){return new su(this.symbol,e)};Gp.prototype.copyWithArgs=function(e){return new Gp(this.order,e)};qp.prototype.copyWithArgs=function(e){return new qp(e)};Ju.prototype.copyWithArgs=function(e){return new Ju(e[0],e.slice(1))};Up.prototype.copyWithArgs=function(e){return new Up(this._stringValue)};Ku.prototype.copyWithArgs=function(e){return new Ku(e,this.headerSymbol)};function tPe(e){return Wg(e).stripped}function Wg(e){let t,n=\"\",r=e,o=ma(e);return o.startsWith(\"\\\\operatorname{export}\")?(n=\"\\\\operatorname{export}\",t=\"export\",r=o.slice(n.length)):o.startsWith(\"\\\\operatorname{default}\")&&(n=\"\\\\operatorname{default}\",t=\"default\",r=o.slice(n.length)),{keyword:t,prefix:n,stripped:r}}var bf=class{constructor({id:t,statement:n,moduleID:r,rootModuleId:o,origin:i}){this.id=t,this.statement=n,this.statement.moduleID=r,this.rootModuleId=o,this.moduleID=r,this.origin=i}};var VI={};Tu(VI,{getFrame:()=>O6});function O6(e){let t={};return e.additionalFunctions&&e.additionalFunctions.indexOf(\"sqrt\")!==-1&&(t.sqrt=ct.sqrt),e.width&&(t.width=e.width),e.height&&(t.height=e.height),t}var jg={};Tu(jg,{getFrame:()=>G6,statsFunctionMathquillOperators:()=>m3});So();var c3={segment:!0,line:!0,ray:!0,circle:!0,arc:!0,vector:!0,glider:!0,parallel:!0,perpendicular:!0,center:!0,radius:!0,area:!0,perimeter:!0,start:!0,end:!0,angles:!0,angle:!0,directedangles:!0,directedangle:!0,coterminal:!0,supplement:!0,vertices:!0,segments:!0,intersection:!0,strictintersection:!0,translate:!0,dilate:!0,rotate:!0,reflect:!0,construction:!0,points:!0,lines:!0,circles:!0,arcs:!0,polygons:!0,rays:!0,anglebisector:!0};var l3={segment:!0,triangle:!0,vector:!0,start:!0,end:!0,sphere:!0};var p3=[\"csc\",\"sec\",\"cot\",\"arccsc\",\"arcsec\",\"arccot\",\"csch\",\"sech\",\"coth\",\"arccsch\",\"arcsech\",\"arccoth\",\"mad\",\"cov\",\"covp\",\"distance\",\"midpoint\"],d3=[\"histogram\",\"dotplot\",\"boxplot\"],A6=[...d3,\"polygon\"],m3=[\"chisqtest|chi-square-test\",\"chisqgof|chi-square-goodness-of-fit\",\"score\",\"conf|confidence\",\"pleft|p-left\",\"pright|p-right\",\"ztest|z-test\",\"zproptest|z-prop-test\",\"score\",\"dof|degrees-of-freedom\",\"estimate\",\"stderr|standard-error\",\"null\",\"upper\",\"lower\"],w6=m3.map(e=>e.split(\"|\")[0]),L6=[\"erf\",\"ttest|t-test\",\"tscore|t-score\",\"normaldist|normal-distribution\",\"tdist|t-distribution\",\"chisqdist|chi-square-distribution\",\"poissondist|poisson-distribution\",\"binomialdist|binomial-distribution\",\"geodist|geometric-distribution\",\"pdf\",\"cdf\",\"random\",...d3,...w6],f3=L6.map(e=>e.split(\"|\")[0]),F6=[\"distance\",\"midpoint\"],V6=[\"det\",\"inv\",\"transpose\",\"rref\",\"trace\"],y3=Object.keys(c3).filter(e=>e!==\"construction\"),g3=Object.keys(py),B6=[\"complexMultiplyPoints\",\"rawTransform\",\"rawTransformConj\",\"transformWithoutTranslation\",\"transformScaleFactor\",\"scaleTangentTransformation\",\"addTangentVector\",\"addTangentTransformation\",\"complex\",\"complexDivide\",\"coerceComplexToReal\",\"coerceComplexToRealWithTolerance\",\"coerceRealToComplex\",\"peelableCoerceComplexToRealWithTolerance\",\"peelableCoerceRealToComplex\"];function BI(e,t){for(let n of e)if(!t.hasOwnProperty(n))throw new Error(\"Programming Error: key '\"+n+`' does not exist in table. Must be one of:\n`+Object.keys(t).join(`\n`))}BI(p3,ct);BI(f3,ct);BI(y3,ct);BI(g3,ct);function G6(e){let t={},n;for(n of fe(ct)){if(B6.includes(n)||e.restrictedFunctions===!0&&p3.indexOf(n)!==-1&&!(e.forceEnableGeometryFunctions===!0&&F6.indexOf(n)!==-1)||e.distributions===!1&&f3.indexOf(n)!==-1)continue;let r=y3.indexOf(n)!==-1,o=n in l3;if(r&&o){if(!(e.isGeometryCalculator||e.is3DCalculator))continue}else if(r){if(!e.isGeometryCalculator)continue}else if(o){if(!e.is3DCalculator)continue}else if(A6.indexOf(n)!==-1&&e.is3DCalculator)continue;g3.indexOf(n)!==-1&&!e.isComplexEnabled||V6.indexOf(n)===-1&&(t[n]=ct[n])}return e.trigAngleMultiplier&&(t.trigAngleMultiplier=e.trigAngleMultiplier),e.globalRandomSeed&&(t.globalRandomSeed=e.globalRandomSeed),e.initialEvaluation&&(t.initialEvaluation=e.initialEvaluation),e.globalEventCount&&(t.globalEventCount=e.globalEventCount),e.width&&(t.width=e.width),e.height&&(t.height=e.height),e.isComplexEnabled&&(t[Wr]=new iu),t}var hD={};Tu(hD,{getFrame:()=>z6});var h3=[\"pi\",\"e\",\"trigAngleMultiplier\"],b3=[\"sqrt\",\"nthroot\",\"abs\",\"ln\",\"sin\",\"cos\",\"tan\",\"log\",\"arcsin\",\"arccos\",\"arctan\",\"mean\",\"round\",\"stdev\",\"stdevp\",\"nCr\",\"nPr\",\"exp\",\"factorial\"],q6=[\"complexMultiplyPoints\",\"complex\",\"complexDivide\",\"coerceComplexToReal\",\"coerceComplexToRealWithTolerance\",\"coerceRealToComplex\",\"complexSqrt\"],U6=Object.keys(py);function x3(e,t){for(let n of e)if(!t.hasOwnProperty(n))throw new Error(\"Programming Error: key '\"+n+`' does not exist in table. Must be one of:\n`+Object.keys(t).join(`\n`))}x3(h3,ct);x3(b3,ct);function z6(e){let t={};return h3.forEach(n=>{t[n]=ct[n]}),b3.forEach(n=>{e.replaceRoundWithReciprocal&&n===\"round\"||(t[n]=ct[n])}),e.trigAngleMultiplier&&(t.trigAngleMultiplier=e.trigAngleMultiplier),e.isComplexEnabled&&(U6.forEach(n=>t[n]=ct[n]),q6.forEach(n=>t[n]=ct[n]),t[Wr]=new iu),e.width&&(t.width=e.width),e.height&&(t.height=e.height),t}var bD={};Tu(bD,{getFrame:()=>k6});var T3=[\"pi\",\"e\",\"trigAngleMultiplier\"],I3=[\"sqrt\",\"nthroot\",\"abs\",\"ln\",\"sin\",\"cos\",\"tan\",\"log\",\"arcsin\",\"arccos\",\"arctan\",\"exp\",\"factorial\"];function P3(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(!t.hasOwnProperty(r))throw new Error(\"Programming Error: key '\"+r+`' does not exist in table. Must be one of:\n`+Object.keys(t).join(`\n`))}}P3(T3,ct);P3(I3,ct);function k6(e){let t={};return T3.forEach(n=>{t[n]=ct[n]}),I3.forEach(n=>{t[n]=ct[n]}),e.trigAngleMultiplier&&(t.trigAngleMultiplier=e.trigAngleMultiplier),e.width&&(t.width=e.width),e.height&&(t.height=e.height),t}var Jg=class{constructor(t){this.singleExpression=t.singleExpression,this.complexEnabled=!!t.isComplexEnabled}isGeometryEnabled(){return!1}is3dProduct(){return!1}is3dPolicy(){return!1}isComplexEnabled(){return this.complexEnabled}isRecursionEnabled(){return!1}isRayCastEnabled(){return!1}polygonUnsupportedPreferTriangle(){return!1}areAllScalesLinear(){return!0}assignmentForbidden(t){return this.singleExpression?t.slice(0,3)!==\"ans\":t.slice(0,3)===\"tmp\"}isValidSlider(t){return!1}sliderVariables(){return[]}graphingEnabled(){return!1}ansEnabled(){return!this.singleExpression}dimensionVarsEnabled(){return!1}disabledFeatures(){return this.singleExpression?[\"Sum\",\"Product\",\"Integral\",\"Derivative\",\"Piecewise\",\"Substitution\",\"PercentOf\"]:[\"Sum\",\"Product\",\"Integral\",\"Derivative\",\"Piecewise\",\"Substitution\"]}shouldIncludeFunctionParametersInRandomSeed(){return!0}};var{Constant:xf,Seed:S3}=O,H6={fourFunction:VI,singleExpressionFourFunction:VI,scientific:hD,singleExpressionScientific:bD,graphing:jg,graphing_3d:jg,geometry:jg};function $6({evaluationMode:e,is3dProduct:t,isBeta3d:n,isComplexEnabled:r,scales:o,includeFunctionParametersInRandomSeed:i,customRegressions:s,isRecursionEnabled:a,rayCast:u,ignoreCostEstimate:c,maxFragmentUniformComponents:l}){switch(e){case\"fourFunction\":return new Sp({singleExpression:!1});case\"singleExpressionFourFunction\":return new Sp({singleExpression:!0});case\"scientific\":return new Jg({singleExpression:!1,isComplexEnabled:r});case\"singleExpressionScientific\":return new Jg({singleExpression:!0,isComplexEnabled:r});case\"graphing\":return new hf({enableGeometry:!1,enable3d:t,scales:o,isComplexEnabled:r,includeFunctionParametersInRandomSeed:i,customRegressions:s,isRecursionEnabled:a});case\"geometry\":return new hf({enableGeometry:!0,enable3d:!1,scales:o,includeFunctionParametersInRandomSeed:i,isComplexEnabled:r,customRegressions:s,isRecursionEnabled:a});case\"graphing_3d\":return new AI({beta3d:n,includeFunctionParametersInRandomSeed:i,isComplexEnabled:r,customRegressions:s,isRecursionEnabled:a,rayCast:u,ignoreCostEstimate:c,maxFragmentUniformComponents:l})}}var GI=class{constructor(){this.policyContexts=new Map;this.moduleToRootModule=new Map;this.parentFrameMap=new Map}getOrCreatePolicyContext(t){let n=this.policyContexts.get(t);return n||(n=new xD,this.policyContexts.set(t,n)),n}setRootModule(t,n){this.moduleToRootModule.set(t,n)}updateParentFrameMap(t){this.parentFrameMap=this.buildParentFrameMap(t)}buildParentFrameMap(t){let n=new Map;for(let r of this.rootModules())n.set(r,pl(r));for(let[r,o]of this.policyContexts)o.globParentId&&n.set(pl(r),o.globParentId);for(let[r,o]of this.moduleToRootModule)n.set(r,o);for(let{id:r,moduleID:o,statement:i}of t.values())i instanceof Wu&&n.set(r,o);return n}isRootModule(t){return this.policyContexts.has(t)}rootModules(){return new Set(this.policyContexts.keys())}*policyContextEntries(){yield*this.policyContexts}getPolicyContextForFrame(t){let n=ZA(t);for(n&&(t=n);;){let r=this.policyContexts.get(t);if(r)return r;let o=this.parentFrameMap.get(t);if(!o)throw V(`Frame '${t}' does not have a policy specified`);t=o}}getPolicyContext(t){return this.getPolicyContextForFrame(t)}getAllContexts(){return this.policyContexts.values()}deleteModule(t){this.moduleToRootModule.delete(t),this.policyContexts.delete(t);for(let[n,r]of this.moduleToRootModule)r===t&&this.moduleToRootModule.delete(n)}},xD=class{constructor(){this.use_degrees=!1;this.initialEvaluation=!1;this.evaluationMode=\"graphing\";this.product=\"graphing\";this.beta3d=!1;this.restrictedFunctions=!1;this.forceEnableGeometryFunctions=!1;this.functionDefinition=!0;this.replaceRoundWithReciprocal=!1;this.distributions=!0;this.actions=!0;this.substitutions=!0;this.intervalComprehensions=!0;this.recursion=!0;this.rayCast=!1;this.ignoreCostEstimate=!1;this.maxFragmentUniformComponents=0;this.dimensions={width:0,height:0};this.includeFunctionParametersInRandomSeed=!0;this.complex=!1;this.customRegressions=!0;this.shouldSkipPlotting=!1;this.globParentId=void 0;this.setPolicy(),this.setParentFrame()}getPolicyFrame(t){return t?this.getRegressionPolicyFrame():this.policy_frame}getRegressionPolicyFrame(){if(!this.regressionPolicyFrame){this.regressionPolicyFrame={};for(let[t,n]of Object.entries(this.policy_frame))this.regressionPolicyFrame[t]=n}return this.regressionPolicyFrame}markRegressionPolicyFrameDirty(){this.regressionPolicyFrame=void 0}setPolicy(){let t=this.viewState?{xAxisScale:this.viewState.xAxisScale,yAxisScale:this.viewState.yAxisScale}:void 0;this.policy=$6({evaluationMode:this.evaluationMode,is3dProduct:this.product===\"graphing-3d\",isBeta3d:this.beta3d,isComplexEnabled:this.complex,scales:t,includeFunctionParametersInRandomSeed:this.includeFunctionParametersInRandomSeed,customRegressions:this.customRegressions,isRecursionEnabled:this.recursion,rayCast:this.rayCast,ignoreCostEstimate:this.ignoreCostEstimate,maxFragmentUniformComponents:this.maxFragmentUniformComponents}),this.policy.globParentId=this.globParentId}setParentFrame(){this.policy_frame=H6[this.evaluationMode].getFrame({restrictedFunctions:this.restrictedFunctions,forceEnableGeometryFunctions:this.forceEnableGeometryFunctions,isGeometryCalculator:this.evaluationMode===\"geometry\",is3DCalculator:this.product===\"graphing-3d\",isComplexEnabled:this.complex,replaceRoundWithReciprocal:this.replaceRoundWithReciprocal,distributions:this.distributions,additionalFunctions:this.additionalFunctions,disableParentheses:this.disableParentheses,trigAngleMultiplier:new xf(this.use_degrees?Math.PI/180:Ie(1,1)),initialEvaluation:new xf(this.initialEvaluation?1:0),globalEventCount:new xf(0),globalRandomSeed:new S3(this.globalRandomSeedString||\"\"),width:this.policy.dimensionVarsEnabled()?new xf(Ie(this.dimensions.width,1)):jb(\"width\"),height:this.policy.dimensionVarsEnabled()?new xf(Ie(this.dimensions.height,1)):jb(\"height\")}),this.policy_frame.construction=this.constructionNode,this.markRegressionPolicyFrameDirty()}markConstruction(t){this.policy_frame.construction=t,this.constructionNode=t,this.markRegressionPolicyFrameDirty()}getParseOptions(t){return{index:this.policy.ansEnabled()?t.index:void 0,disabledFeatures:this.getDisabledFeatures(),disallowFrac:this.areFractionsDisallowed(),disableParentheses:!!this.disableParentheses,allowIntervalComprehensions:!!this.intervalComprehensions,seedPrefix:Dn(t.id),writeIntegral:this.evaluationMode===\"geometry\",specializeDoubleInequalities:!this.policy.is3dProduct(),includeFunctionParametersInRandomSeed:this.includeFunctionParametersInRandomSeed}}getViewState(){return this.viewState}getShouldSkipPlotting(){return this.shouldSkipPlotting}setWorkerConfigProperty(t,n){return n===Is[t]?!1:(Is[t]=n,!0)}processEvaluatorConfig(t){var s;let n=!!t.isCompleteState&&!t.isUndoRedoState;n!==this.initialEvaluation&&(this.initialEvaluation=n,this.policy_frame.initialEvaluation=new xf(n?1:0),this.markRegressionPolicyFrameDirty()),t.hasOwnProperty(\"logInternalErrors\")&&KS(t.logInternalErrors);let r=!1,o=!1;if(t.viewState&&!ei(t.viewState,this.viewState)){let a=t.viewState,u=!!(this.viewState&&a.xAxisScale===this.viewState.xAxisScale&&a.yAxisScale===this.viewState.yAxisScale);this.viewState=a,u?r=!0:o=!0}if(t.hasOwnProperty(\"degreeMode\")&&(this.use_degrees=t.degreeMode,o=!0),t.hasOwnProperty(\"globalRandomSeed\")){let a=t.globalRandomSeed;this.globalRandomSeedString=a,this.policy_frame.globalRandomSeed=new S3(a),this.markRegressionPolicyFrameDirty()}if(t.hasOwnProperty(\"includeFunctionParametersInRandomSeed\")&&(this.includeFunctionParametersInRandomSeed=t.includeFunctionParametersInRandomSeed,this.setPolicy()),t.hasOwnProperty(\"evaluationMode\")&&(this.evaluationMode=t.evaluationMode,o=!0),t.hasOwnProperty(\"additionalFunctions\")&&(this.additionalFunctions=t.additionalFunctions,o=!0),t.hasOwnProperty(\"disableParentheses\")&&(this.disableParentheses=t.disableParentheses,o=!0),t.hasOwnProperty(\"restrictedFunctions\")&&(this.restrictedFunctions=t.restrictedFunctions,o=!0),t.hasOwnProperty(\"forceEnableGeometryFunctions\")&&(this.forceEnableGeometryFunctions=t.forceEnableGeometryFunctions,o=!0),t.hasOwnProperty(\"distributions\")&&(this.distributions=t.distributions,o=!0),t.hasOwnProperty(\"functionDefinition\")&&(this.functionDefinition=t.functionDefinition,o=!0),t.hasOwnProperty(\"replaceRoundWithReciprocal\")&&(this.replaceRoundWithReciprocal=t.replaceRoundWithReciprocal,o=!0),t.hasOwnProperty(\"pointsOfInterest\")){let a=this.setWorkerConfigProperty(\"pointsOfInterest\",t.pointsOfInterest);o=o||a}if(t.hasOwnProperty(\"plotSingleVariableImplicitEquations\")){let a=this.setWorkerConfigProperty(\"plotSingleVariableImplicitEquations\",t.plotSingleVariableImplicitEquations);o=o||a}if(t.hasOwnProperty(\"plotImplicits\")){let a=this.setWorkerConfigProperty(\"plotImplicits\",t.plotImplicits);o=o||a}if(t.hasOwnProperty(\"plotInequalities\")){let a=this.setWorkerConfigProperty(\"plotInequalities\",t.plotInequalities);o=o||a}if(t.hasOwnProperty(\"sliders\")){let a=this.setWorkerConfigProperty(\"sliders\",t.sliders);o=o||a}t.hasOwnProperty(\"actions\")&&t.actions!==this.actions&&(this.actions=!!t.actions,o=!0),t.hasOwnProperty(\"substitutions\")&&t.substitutions!==this.substitutions&&(this.substitutions=!!t.substitutions,o=!0),t.hasOwnProperty(\"intervalComprehensions\")&&t.intervalComprehensions!==this.intervalComprehensions&&(this.intervalComprehensions=!!t.intervalComprehensions,o=!0),t.hasOwnProperty(\"recursion\")&&t.recursion!==this.recursion&&(this.recursion=!!t.recursion,o=!0),t.hasOwnProperty(\"rayCast\")&&t.rayCast!==this.rayCast&&(this.rayCast=!!t.rayCast,o=!0),t.hasOwnProperty(\"maxFragmentUniformComponents\")&&t.maxFragmentUniformComponents!==this.maxFragmentUniformComponents&&(this.maxFragmentUniformComponents=(s=t.maxFragmentUniformComponents)!=null?s:0),t.hasOwnProperty(\"ignoreCostEstimate\")&&t.ignoreCostEstimate!==this.ignoreCostEstimate&&(this.ignoreCostEstimate=!!t.ignoreCostEstimate,o=!0);let i=t.recursionDepthLimit;return i!==void 0&&i>0&&i<=10**6&&bS(i),t.hasOwnProperty(\"beta3d\")&&(this.beta3d=!!t.beta3d,o=!0),t.hasOwnProperty(\"product\")&&(this.product=t.product,o=!0),t.hasOwnProperty(\"dimensions\")&&t.dimensions!==void 0&&(this.dimensions=t.dimensions,o=!0),t.hasOwnProperty(\"complex\")&&t.complex!==this.complex&&(this.complex=!!t.complex,o=!0),t.hasOwnProperty(\"customRegressions\")&&t.customRegressions!==this.customRegressions&&(this.customRegressions=!!t.customRegressions,o=!0),t.hasOwnProperty(\"globParentId\")&&t.globParentId!==this.globParentId&&(this.globParentId=t.globParentId?t.globParentId:void 0,o=!0),t.hasOwnProperty(\"shouldSkipPlotting\")&&t.shouldSkipPlotting!==this.shouldSkipPlotting&&(this.shouldSkipPlotting=!!t.shouldSkipPlotting,r=!0),o&&(this.setPolicy(),this.setParentFrame()),{invalidateGraphs:r,invalidateAll:o}}updateEvaluatedViewport(t){this.viewState&&(this.viewState.viewport=t)}getDisabledFeatures(){let t=this.policy.disabledFeatures();this.functionDefinition===!1&&(t=t.concat(\"FunctionDefinition\")),this.actions===!1&&(t=t.concat(\"UpdateRule\")),this.substitutions===!1&&(t=t.concat([\"Substitution\",\"ListComprehension\"]));let n=this.additionalFunctions||[];return t=t.filter(r=>!(r===\"Exponent\"&&n.indexOf(\"exponent\")!==-1||r===\"PercentOf\"&&n.indexOf(\"percent\")!==-1)),t}areFractionsDisallowed(){let{evaluationMode:t}=this;return t!==\"fourFunction\"&&t!==\"singleExpressionFourFunction\"?!1:!this.additionalFunctions||this.additionalFunctions.indexOf(\"fraction\")===-1}};So();function ad(e,t,n=!1){if(/^\\s*(\\-|\\+)?([0-9]+(\\.[0-9]+)?)\\s*$/.test(e))return parseFloat(e);let o={coerceToNumber:\"all\"},i=qn(ct);return i.trigAngleMultiplier=new Un(t?Math.PI/180:1),+Ao(au,mi(e),n?EB:VT,i,o).asValue()}var TD=10,ID=3;function qI(e,t){return e+1e-8*(t-e)>e&&t-e>1e-300&&t-e<1e300}function C3(e,t){return e>1e-300&&qI(e,t)}var UI=class e{constructor(t,n,r,o,i,s){this.xmin=t,this.xmax=n,this.ymin=r,this.ymax=o,this.zmin=i,this.zmax=s}static evaluateFromLatex(t,n,r){var i,s;let o=e.evaluateFromLatexPartial(t,n,r);if(!(isNaN(o.xmin)||isNaN(o.xmax)||isNaN(o.ymin)||isNaN(o.ymax)||t.zmin!==void 0&&isNaN((i=o.zmin)!=null?i:NaN)||t.zmax!==void 0&&isNaN((s=o.zmax)!=null?s:NaN)))return e.fromObject(o)}static evaluateFromLatexPartial(t,n,r){return e.fromObject({xmin:ad(t.xmin,n,r),xmax:ad(t.xmax,n,r),ymin:ad(t.ymin,n,r),ymax:ad(t.ymax,n,r),zmin:t.zmin?ad(t.zmin,n,r):void 0,zmax:t.zmax?ad(t.zmax,n,r):void 0})}static fromObject({xmin:t,xmax:n,ymin:r,ymax:o,zmin:i,zmax:s}){return new e(t,n,r,o,i,s)}toObject(){return{xmin:this.xmin,ymin:this.ymin,zmin:this.zmin,xmax:this.xmax,ymax:this.ymax,zmax:this.zmax}}equals(t){return!(this.xmin!==t.xmin||this.ymin!==t.ymin||this.zmin!==t.zmin||this.xmax!==t.xmax||this.ymax!==t.ymax||this.zmax!==t.zmax)}isXValid(t){return t===\"linear\"?qI(this.xmin,this.xmax):C3(this.xmin,this.xmax)}isYValid(t){return t===\"linear\"?qI(this.ymin,this.ymax):C3(this.ymin,this.ymax)}isZValid(){return this.zmin===void 0||this.zmax===void 0?!1:qI(this.zmin,this.zmax)}isValid(t){return this.isXValid(t.xAxisScale)&&this.isYValid(t.yAxisScale)}isSquare(t,n){return Math.abs(t.height-t.width*this.aspectRatio(n))<1}isSquare3D(){let{xmin:t,xmax:n,ymin:r,ymax:o,zmin:i,zmax:s}=this;if(i===void 0||s===void 0)return!1;let a=[n-t,o-r,s-i];return Math.min(...a)/Math.max(...a)>.99999}aspectRatio(t){let n=TD/ID,r=t.yAxisScale===\"linear\"?this.ymax-this.ymin:Math.log10(this.ymax/this.ymin)*n,o=t.xAxisScale===\"linear\"?this.xmax-this.xmin:Math.log10(this.xmax/this.xmin)*n;return r/o}getSquaredAxisLimits({axis:t,screen:n,settings:r}){let[o,i,s,a,u]=t===\"y\"?[{min:this.ymin,max:this.ymax},{min:this.xmin,max:this.xmax},n.height/n.width,r.yAxisScale,r.xAxisScale]:[{min:this.xmin,max:this.xmax},{min:this.ymin,max:this.ymax},n.width/n.height,r.xAxisScale,r.yAxisScale];if(a===\"logarithmic\"){let l=u===\"logarithmic\"?Math.log(i.max)-Math.log(i.min):(i.max-i.min)*ID/(TD*Math.LOG10E),{min:p,max:d}=E3({min:Math.log(o.min),max:Math.log(o.max)},s*l);return{min:Math.exp(p),max:Math.exp(d)}}let c=u===\"logarithmic\"?(Math.log10(i.max)-Math.log10(i.min))*TD/ID:i.max-i.min;return E3(o,c*s)}squareXAxis(t,n){let{min:r,max:o}=this.getSquaredAxisLimits({axis:\"x\",screen:t,settings:n}),i=new e(r,o,this.ymin,this.ymax);return i.isXValid(n.xAxisScale)?i:this}squareYAxis(t,n){let{min:r,max:o}=this.getSquaredAxisLimits({axis:\"y\",screen:t,settings:n}),i=new e(this.xmin,this.xmax,r,o);return i.isYValid(n.yAxisScale)?i:this}squareCrop(t,n){return this.aspectRatio({xAxisScale:n.xAxisScale,yAxisScale:n.yAxisScale})>t.height/t.width?this.squareYAxis(t,n):this.squareXAxis(t,n)}polarDiameter(){let t=Math.abs(this.xmax),n=Math.abs(this.xmin),r=Math.abs(this.ymax),o=Math.abs(this.ymin);return 1.5*Math.max(t,n,r,o)}largestR(){return Math.sqrt(Math.pow(Math.max(-this.xmin,this.xmax),2)+Math.pow(Math.max(-this.ymin,this.ymax),2))}smallestR(){return this.xmin<=0&&this.xmax>=0&&this.ymin<=0&&this.ymax>=0?0:this.xmin<=0&&this.xmax>=0?Math.min(Math.abs(this.ymin),Math.abs(this.ymax)):this.ymin<=0&&this.ymax>=0?Math.min(Math.abs(this.xmin),Math.abs(this.xmax)):Math.sqrt(Math.pow(Math.max(this.xmin,-this.xmax),2)+Math.pow(Math.max(this.ymin,-this.ymax),2))}};function E3(e,t){let n=.5*(e.min+e.max),[r,o]=[n-.5*t,n+.5*t];return Math.abs((o-r)/t-1)>.1?{min:-.5*t,max:.5*t}:{min:r,max:o}}function sr(e){let{value:t,valueType:n}=e;if(NM(e)){let r=[];for(let o=0;o<e.value.length;o++)r.push(sr(ew(e,o)));return`\\\\left[${r.join(\",\")}\\\\right]`}switch(n){case x:return da(t);case N:let[r,o]=t,i=da(r),s=da(Math.abs(o));return i===\"\\\\frac{0}{0}\"||s===\"\\\\frac{0}{0}\"?\"\\\\frac{0}{0}i\":(s.endsWith(\"\\\\infty\")&&(s=`${s} `),i!==\"0\"?`${i}${o>=0?\"+\":\"-\"}${s!==\"1\"?`${s}`:\"\"}i`:`${o>=0?\"\":\"-\"}${s!==\"1\"?`${s}`:\"\"}i`);case D:{let[l,p]=t;return`\\\\left(${da(l)},${da(p)}\\\\right)`}case G:{let[l,p,d]=t;return`\\\\left(${da(l)},${da(p)},${da(d)}\\\\right)`}case fn:return\"\\\\operatorname{rgb}\\\\left(\"+[sr({valueType:x,value:t[0]}),sr({valueType:x,value:t[1]}),sr({valueType:x,value:t[2]})].join(\",\")+\"\\\\right)\";case _e:{let l=[];for(let p of t)l.push(sr({valueType:D,value:p}));return\"\\\\operatorname{polygon}\\\\left(\"+l.join(\",\")+\"\\\\right)\"}case he:return\"\\\\operatorname{segment}\\\\left(\"+[sr({valueType:D,value:t[0]}),sr({valueType:D,value:t[1]})].join(\",\")+\"\\\\right)\";case Ee:return\"\\\\operatorname{line}\\\\left(\"+[sr({valueType:D,value:t[0]}),sr({valueType:D,value:t[1]})].join(\",\")+\"\\\\right)\";case Ae:return\"\\\\operatorname{ray}\\\\left(\"+[sr({valueType:D,value:t[0]}),sr({valueType:D,value:t[1]})].join(\",\")+\"\\\\right)\";case Pe:let a=t[0],u=t[1],c=[u[0]+a[0],u[1]+a[1]];return`\\\\operatorname{vector}\\\\left(${sr({valueType:D,value:u})},${sr({valueType:D,value:c})}\\\\right)`;case Te:return\"\\\\operatorname{circle}\\\\left(\"+[sr({valueType:D,value:t[0]}),sr({valueType:x,value:t[1]})].join(\",\")+\"\\\\right)\";case ue:return\"\\\\operatorname{arc}\\\\left(\"+[sr({valueType:D,value:t[0]}),sr({valueType:D,value:t[1]}),sr({valueType:D,value:t[2]})].join(\",\")+\"\\\\right)\";case Ne:return\"\\\\operatorname{angle}\\\\left(\"+[sr({valueType:D,value:t[0]}),sr({valueType:x,value:t[1]}),sr({valueType:x,value:t[2]})].join(\",\")+\"\\\\right)\";case Ce:return\"\\\\operatorname{directedangle}\\\\left(\"+[sr({valueType:D,value:t[0]}),sr({valueType:x,value:t[1]}),sr({valueType:x,value:t[2]})].join(\",\")+\"\\\\right)\";case pr:return`\\\\operatorname{tone}\\\\left(${sr({valueType:x,value:t[0]})},${sr({valueType:x,value:t[1]})}\\\\right)`;default:throw new Error(\"Cannot serialize a value of type \"+se(n)+\".\")}}function PD(e){let t={};for(let[{frameID:n,symbol:r},o]of ms(e.updateRules))t[r]=SD(o,{frameID:n,symbol:r});return t}function SD(e,t){return`${Mo(t.symbol)}=${sr(e)}`}function Y6(e){return e.type!==\"List\"?!1:e.args.every(t=>fx(t))}function Z6(e){return e.type!==\"List\"?!1:e.args.every(t=>fx(t)||$g(t))}function X6(e){return e.type!==\"List\"?!1:e.args.length===0}var W6=[x,D,Yt,G,lo,He,Z,N,Ye,fn,ko];function zI(e,t,n){if(t.type===\"FunctionDefinition\"||t.type===\"RecursiveFunctionBaseCase\"||t.type===\"Equation\"||t.type===\"ComparatorChain\"||!Uu(e,W6))return!1;let r=t instanceof Bn;switch(e!==x&&r&&(t=t instanceof Bn?t._expression:t),e){case He:return!X6(t);case x:return t.type!==\"Constant\"&&t.type!==\"MixedNumber\";case Z:return!Y6(t);case N:return!$g(t);case Ye:return!Z6(t);case D:case G:return!v3(t);case Yt:case lo:return!j6(t);case fn:case ko:return r;default:return!1}}function v3(e){return e.type===\"ParenSeq\"&&e.args.every(t=>am(t))}function j6(e){return e.type!==\"List\"?!1:e.args.every(t=>v3(t))}function J6(e){return e.type===\"Error\"?e.getError():e.valueType===N?e.asValue():+e.asValue()}function Q6(e,t,n,r){let o=[],i=!1;for(let s=0;s<n.columns.length;s++){let a=r.columns[s],u=n.columns[s],c=a.type===\"Error\"?[]:a.rawArgs.map(J6),l=go(a)?a.isCyclicDependencyError&&eu(u)&&u.isFreeVariable(t):Xu(a)&&a.isIndependent,p=s>=1&&r.columns[0].type!==\"Error\"&&a.type!==\"Error\"&&!u.header.userData.hidden;p&&(i=!0);let d={computed:!l,values:c,plotted:p};a.type===\"Error\"&&(d.error=a.getError()),o.push(d)}return o[0].plotted=i,{column_data:o}}function K6(e,t,n){let r={variables:[],errorMap:{},dimensions:{}};if(e.areAllScalesLinear()||(r.errorMap.scale=!0),n.center.isError&&(r.errorMap.center=!0),n.radianAngle.isError&&(r.errorMap.angle=!0),n.width.isError&&(r.errorMap.width=!0),n.height.isError&&(r.errorMap.height=!0),n.opacity.isError&&(r.errorMap.opacity=!0),Object.keys(r.errorMap).length>0)return r.variables=t.getSliderVariables(e,n),r;r.dimensions.x=[],r.dimensions.y=[],r.dimensions.radianAngle=[],r.dimensions.width=[],r.dimensions.height=[],r.dimensions.opacity=[];let o=[n.center,n.radianAngle,n.width,n.height,n.opacity];return o.some(s=>s&&s.valueType&&W(s.valueType))&&(r.is_concrete_list=!0),O.List.eachArgs(o,s=>{let a=s[0].asValue(),u=+s[1].asValue(),c=Math.atan2(Math.sin(u),Math.cos(u));r.dimensions.x.push(+a[0]),r.dimensions.y.push(+a[1]),r.dimensions.radianAngle.push(c),r.dimensions.width.push(+s[2].asValue()),r.dimensions.height.push(+s[3].asValue()),r.dimensions.opacity.push(Math.max(0,Math.min(1,+s[4].asValue())))}),(e.graphingEnabled()?t.getGraphMode(e,n):10)!==10&&(r.is_graphable=!0),n.moveStrategy&&(r.move_strategy=n.moveStrategy),t.center&&(t.center.type===\"Identifier\"?(r.center_reference_id=t.center.referencedStatementId,r.center_reference_symbol=t.center._symbol):t.center.type===\"ParenSeq\"&&n.center.valueType===D&&(r.center_is_point_literal=!0)),r}function e9(e,t,n){let r=n.handler,o=n.minStep,i={},s={};for(let d of r.getDependencies())e.validActionVariable(d)||(i[d]=!0);for(let d of o.getDependencies())s[d]=!0;let a;if(go(o))a={status:\"error\",error:o.getError()};else{let d=o.asValue();typeof d==\"number\"&&!isNaN(d)&&d>=0?a={status:\"valid\",value:d}:a={status:\"error\",error:nv().getError()}}let u=Object.keys(i),c={};go(r)&&r.actionValue?c.action_slider_defaults=PD(r.actionValue):u.length>0&&(r=En(u).setDependencies(r.getDependencies()));let l;r.type===\"Error\"&&!ED(e,r)?l={status:\"error\",error:r.getError()}:r.isEmptyAction?l={status:\"empty\"}:l={status:\"maybe-valid\"};let p={handler:l,minStep:a,variables:[],...c};return Uc(p,e,{...i,...s}),p}function t9(e,t,n){let r=e.is3dPolicy()?{xmin:NaN,xmax:NaN,ymin:NaN,ymax:NaN,zmin:NaN,zmax:NaN}:{xmin:NaN,xmax:NaN,ymin:NaN,ymax:NaN},o={};for(let f in n.bounds){let g=f,y=n.bounds[g];if(!y)continue;let h=Vr(y);y.type===\"Error\"?o[g]=!0:(h==null?void 0:h.valueType)===x?r[g]=h.value:o[g]=!0}let{xAxisScale:i,yAxisScale:s}=e.getScales(),{xmin:a,xmax:u,ymin:c,ymax:l,zmin:p,zmax:d}=r,m=new UI(a,u,c,l,p,d);return isFinite(u)&&!isFinite(a)?o.xmin=!0:isFinite(a)&&!isFinite(u)?o.xmax=!0:m.isXValid(i)||(o.xmin=o.xmax=!0),isFinite(l)&&!isFinite(c)?o.ymin=!0:isFinite(c)&&!isFinite(l)?o.ymax=!0:m.isYValid(s)||(o.ymin=o.ymax=!0),e.is3dPolicy()&&(isFinite(d)&&!isFinite(p)?o.zmin=!0:isFinite(p)&&!isFinite(d)?o.zmax=!0:m.isZValid()||(o.zmin=o.zmax=!0)),Object.keys(o).length>0?{viewport:{status:\"error\",errors:o,value:r}}:{viewport:{status:\"valid\",value:r}}}function n9(){return{operator:\"=\",variables:[]}}function CD(e,t,n,r){var c;if(Zu(n))return Q6(e,t,n,r);if(mx(n))return K6(e,n,r);if(n.type===\"AssignmentImport\"&&r.type===\"ConcreteAssignmentImport\"){let l=CD(e,t,r.resolvedRawNode,r.concrete);return l.import={from:n.importFrom,to:vn(n.moduleID,n._symbol),wasDefaultOverridden:!!(n.defaultDefinition&&n.defaultDefinition!==r.resolvedRawNode)},l}let o=n.userData,i=n9();if(i.evaluated_latex=o.latex,Wg((c=o.latex)!=null?c:\"\").keyword===\"export\"&&n._exports.length!==1&&(r=Vy()),n instanceof O.Ticker)return e.graphingEnabled()?e9(e,n,r):(i.error=V(\"Ticker without graphing\").getError(),i);if(n instanceof O.Viewport)return e.graphingEnabled()?t9(e,n,r):(i.error=V(\"Viewport without graphing\").getError(),i);if(e.is3dProduct()){let l=e,p=n.getGraphMode(l,r);if((p===100||p===5)&&r.getDependencies().length===1){let d=r.getDependencies()[0];(d===\"u\"||d===\"v\"||d===\"t\")&&(i.internal_domain_dependency=d)}}let a=Pg(o);if(a){let l=r.getCursorContext();if(l)i.cursor_context={...l,selection:a};else if(go(r)){let p=o9(e,t,n);p&&(i.cursor_context={...p,selection:a})}}if((n instanceof O.FunctionDefinition||n instanceof Bn||n instanceof O.RecursiveFunctionBaseCase)&&(n._symbol.startsWith(\"_\")||(i.defined_name=n._symbol)),n instanceof Fr&&r instanceof _n?i.recursion=r.getRecursiveFunctionMetadata():n instanceof Fr&&r instanceof M&&r.recursionMetadata&&(i.recursion=r.recursionMetadata),n instanceof Do&&(i.recursion_base_case={symbol:n._symbol,argValue:n.specifiedArg.valid?n.specifiedArg.argValue:void 0}),r.warning!==void 0&&(i.warning=r.warning),i.top_level_function_spec=sd(n,e,t),r.type===\"Error\"&&!((n instanceof O.FunctionDefinition||n instanceof O.RecursiveFunctionBaseCase)&&!r.blocksExport)&&!r.silent){i.error=r.getError(),i.variables=n.getSliderVariables(e,r),i.is_single_identifier=n instanceof $e,r.actionValue&&(i.action_slider_defaults=PD(r.actionValue));let l=M3(e,t,n,r);return l&&(i.geometry=l),i}if(r.valueType===fn&&r.getDependencies().length===0){let l=r.asValue();i.rgb_value=ip(l[0],l[1],l[2]).formatHex()}r.moveStrategy&&(i.move_strategy=r.moveStrategy,i.default_drag_mode=r.defaultDragMode),n.isInequality()&&(i.is_inequality=!0),i.operator=n.getOperator(),r instanceof O.SolvedEquation?r._expression.asValue()!==!0&&r._expression.asValue()!==!1&&(i.assignment=r._symbol):n instanceof Bn&&(n._symbol.startsWith(\"_\")||(i.assignment=n._symbol)),n instanceof O.FunctionDefinition&&(i.function_definition=n._symbol);let u=e.graphingEnabled()?n.getGraphMode(e,r):10;if(e.graphingEnabled()&&e.is3dPolicy()&&(!oc(u)&&!_G(u)&&(u=10),r instanceof O.OptimizedRegression&&(u=10)),u!==10&&(i.is_graphable=!0,i.expression_type=n.getExpressionType(u,r.valueType),e.is3dPolicy()&&(i.expression_type===A.SINGLE_POINT?i.expression_type=A.POINT3D:i.expression_type===A.POINT_LIST&&(i.expression_type=A.POINT3D_LIST)),r.valueType&&ka(r.valueType)&&(i.map_type=r.valueType),r.isShadeBetween()&&(i.is_shade_between=!0),i.expression_type!==A.POINT3D&&i.expression_type!==A.POINT3D_LIST)){let l=n.tableInfo(e,r);l&&(i.is_tableable=!0,i.table_info=l)}if(r.valueType!==void 0&&W(r.valueType)&&(i.is_concrete_list=!0,r.valueType===ko&&r.getDependencies().length===0)){let l=r.asValue();l&&(i.rgb_value=l.map(p=>ip(p[0],p[1],p[2]).formatHex()))}if(i.variables=i.is_graphable?[]:n.getSliderVariables(e,r),i.is_single_identifier=n instanceof $e,$s(r)){let l=Vr(r);i.typed_constant_value=l,r9(l==null?void 0:l.valueType)&&(i.geometry=M3(e,t,n,r))}if(i.operator===\"=\"&&r.getDependencies().length===0&&zI(r.valueType,n,e)&&(i.is_evaluable=!0),r instanceof O.OptimizedRegression){let l=r,p={};for(let d of fe(l.parameters))l.parameters.hasOwnProperty(d)&&(p[Mo(d)]=+l.parameters[d].asValue());i.is_regression=!0,i.regression={parameters:p,displayPrecision:l.displayPrecision,residualVariable:Mo(l.residualVariable),residualSuggestionId:l.residualSuggestionId,shouldSuggestLogMode:l.shouldSuggestLogMode,isLinear:l.isLinear,statistics:l.statistics,parameterWarning:l.parameterWarning}}return i}function r9(e){switch(e){case D:case Yt:case Ee:case Ri:case he:case Er:case Ae:case Eo:case Pe:case Di:case Te:case _i:case ue:case Co:case _e:case wr:case Ne:case Ur:case Ce:case zr:case we:case sa:return!0;default:return!1}}function M3(e,t,n,r){let o={};r.valueType!==void 0&&(o.valueType=r.valueType),o.valueType&&ae(o.valueType,D)&&e.graphingEnabled()&&Bl(n.getGraphMode(e,r))&&(o.isMovablePoint=!0);let{identifier:i,listAccess:s,tree:a}=Wx(n);if(i&&(o.identifier=i),s&&(o.listAccess=s),a&&(o.call=a,r.valueType&&ae(r.valueType,we)&&n instanceof Fr)){let c=n._expression;o.transformation_preview_info={type:a.symbol,args:c.args.slice(1).map(l=>Vr(pe(l,e,t)))}}let u=r.moveStrategy&&r.moveStrategy[0];if(u&&\"initialValue\"in u&&u.initialValue!==void 0&&(o.gliderParameter=u.initialValue),Object.keys(o).length>0){let c=n.getLegalExports(e);return{parentDependencies:n.getDependencies().filter(p=>!ct[p]&&!c.includes(p)),...o}}}function o9(e,t,n){let r=Pg(n.userData);if(!r)return;let{input:o,start:i,end:s}=r;if(o.trim()===\"\")return{type:\"empty\",allowedTypes:[Nn]};let a=\"\\\\cursor\",u=o.slice(0,i)+a+\" \"+o.slice(s),c={start:i,end:i+a.length},l=mi(u,{...n.parseOptions});return l.userData={...n.userData,latex:u,latexSelection:c},l.isError?l.getCursorContext():tf({policy:e,frame:t},l).getCursorContext()}function Uc(e,t,n){let r=e.variables;if(r&&r.length){let o={};for(let i of r)o[i]=!0;for(let i of fe(n))o[i]=!0;n=o}e.variables=t.sliderVariables(fe(n))}function ED(e,t){if(t.blocksExport)return!1;let n=t.getDependencies();if(n.length===0)return!1;for(let r of n)if(!e.validActionVariable(r))return!1;return!0}function i9(e){var n;let t=e.rawTree.userData;return!!(t.cdf&&t.cdf.show&&((n=e.evaluationState.top_level_function_spec)==null?void 0:n.type)===\"distribution\")}var{Constant:to,FunctionCall:ls,Add:s9}=O;function _3(e,t,n,r,o,i,s){var p,d;let a,u=1/0,c=-1/0,l=e.defaults.map((m,f)=>{var g,y;return(y=(g=e.evaluatedParams)==null?void 0:g[f])!=null?y:m});switch(e.symbol){case\"normaldist\":{let[m,f]=l;t===\"left\"||t===\"right\"?a={bound1:m,bound2:void 0,p:.5}:a={bound1:m-f,bound2:m+f,p:t===\"inner\"?.6826894921370859:.31731050786291415};break}case\"tdist\":{let[m,f,g]=l;if(t===\"left\"||t===\"right\")a={bound1:f,bound2:void 0,p:.5};else{let y=f-g,h=f+g,b=new ls(\"cdf\",[o,new to(y),new to(h)]);a={bound1:f-g,bound2:f+g,p:t===\"inner\"?pe(b,i,s).asValue():1-pe(b,i,s).asValue()}}break}case\"uniformdist\":{let[m,f]=l;if(m>f){a={bound1:0,bound2:1,p:.5};break}u=f,c=m;let g=f-m;t===\"left\"||t===\"right\"?a={bound1:m+.5*g,bound2:void 0,p:.5}:a={bound1:m+.25*g,bound2:m+.75*g,p:.5};break}case\"poissondist\":case\"binomialdist\":case\"chisqdist\":case\"geodist\":if(c=0,e.symbol===\"binomialdist\"&&(u=(d=(p=e.evaluatedParams)==null?void 0:p[0])!=null?d:1/0),t===\"left\"||t===\"right\"){let m=new ls(\"quantile\",[o,new to(.5)]);a={bound1:pe(m,i,s).asValue(),bound2:void 0,p:.5}}else{let m=new ls(\"quantile\",[o,new to(.25)]),f=new ls(\"quantile\",[o,new to(3/4)]);a={bound1:pe(m,i,s).asValue(),bound2:pe(f,i,s).asValue(),p:.5}}break;default:throw new Error(`Unhandled distribution type ${e.symbol}`)}return(t===\"inner\"||t===\"outer\")&&(n!==void 0&&!isNaN(n)&&r===void 0?(a.bound2=u,a.bound1=n):r!==void 0&&!isNaN(r)&&n===void 0&&(a.bound1=c,a.bound2=r)),a}function R3({distributionTree:e,tails:t,bound1Valid:n,bound1:r,bound2Valid:o,bound2:i,policy:s,frame:a}){let u,c=Math.min(r,i),l=Math.max(r,i);switch(t){case\"left\":n&&(u=new ls(\"cdf\",[e,new to(-1/0),new to(r)]));break;case\"right\":n&&(u=new ls(\"cdf\",[e,new to(r),new to(1/0)]));break;case\"inner\":n&&o&&(u=new ls(\"cdf\",[e,new to(c),new to(l)]));break;case\"outer\":n&&o&&(c===l?u=new to(1):u=new s9([new ls(\"cdf\",[e,new to(-1/0),new to(c)]),u=new ls(\"cdf\",[e,new to(l),new to(1/0)])]));break}if(u)return pe(u,s,a).asValue()}function a9(e,t,n,r){var h,b,T;let{evaluationState:o,rawTree:i}=e,s=(b=(h=i.userData.cdf)==null?void 0:h.tails)!=null?b:\"inner\",a=i.metaData.cdfBound1,u=i.metaData.cdfBound2,c=i.type===\"Assignment\"?i._expression:i,l=o.top_level_function_spec;if((l==null?void 0:l.type)!==\"distribution\")return;let p=Ns(t,n,a,r,void 0),d=Ns(t,n,u,r,void 0),m=_3(l,s,p,d,c,t,n);o.cdf_bound1_default=m.bound1,o.cdf_bound2_default=m.bound2,o.cdf_p_default=m.p,p===void 0&&(p=m.bound1),d===void 0&&(d=(T=m.bound2)!=null?T:NaN);let f=!0,g=!0;isNaN(p)&&(f=!1,p=NaN),isNaN(d)&&(g=!1,d=NaN),(!f||!g&&(s===\"inner\"||s===\"outer\"))&&(o.cdf_error=pv().getError()),i.metaData.evaluatedCDFBound1=p,i.metaData.evaluatedCDFBound2=d,o.cdf_bound1_valid=f,o.cdf_bound2_valid=g,o.cdf_bound1=p,o.cdf_bound2=d;let y=R3({distributionTree:c,bound1Valid:f,bound1:p,bound2Valid:g,bound2:d,policy:t,frame:n,tails:s});y!==void 0&&(o.cdf_p=y)}function u9(e,t,n,r){var m,f;let{evaluationState:o,rawTree:i}=e,s=i.type===\"Assignment\"?i._expression:i,a=o.top_level_function_spec;if((a==null?void 0:a.type)!==\"distribution\")return;let u=i.metaData.cdfP,c=Ns(t,n,i.metaData.cdfBound1,r,void 0),l=Ns(t,n,i.metaData.cdfBound2,r,void 0),p=_3(a,i.userData.cdf.tails,c,l,s,t,n);c===void 0&&(c=p.bound1),l===void 0&&(l=p.bound2),o.cdf_p_default=p.p,o.cdf_bound1_default=p.bound1,o.cdf_bound2_default=p.bound2;let d=Ns(t,n,u,r,p.p);if(d===void 0||isNaN(d)||d<0||d>1){o.cdf_error=eC().getError(),o.cdf_p_valid=!1;return}else o.cdf_p=d,o.cdf_p_valid=!0;if(i.metaData.cdfBound1||i.metaData.cdfBound2){let g=!0,y=!0;(c===void 0||isNaN(c))&&(g=!1,c=NaN),(l===void 0||isNaN(l))&&(y=!1,l=NaN);let h=(f=(m=i.userData.cdf)==null?void 0:m.tails)!=null?f:\"inner\",b=R3({bound1:c,bound1Valid:g,bound2:l,bound2Valid:y,distributionTree:s,tails:h,policy:t,frame:n});if(b!==void 0&&Math.abs(b-d)<=.001*Math.abs(d)){o.cdf_bound1=c,o.cdf_bound2=l,i.metaData.evaluatedCDFBound1=c,i.metaData.evaluatedCDFBound2=l;return}}switch(i.userData.cdf.tails){case\"inner\":{let g=new ls(\"quantile\",[s,new to((1-d)/2)]),y=new ls(\"quantile\",[s,new to((1+d)/2)]);o.cdf_bound1=+pe(g,t,n).asValue(),o.cdf_bound2=+pe(y,t,n).asValue();break}case\"outer\":{let g=new ls(\"quantile\",[s,new to(d/2)]),y=new ls(\"quantile\",[s,new to(1-d/2)]);o.cdf_bound1=+pe(g,t,n).asValue(),o.cdf_bound2=+pe(y,t,n).asValue();break}case\"left\":{let g=new ls(\"quantile\",[s,new to(d)]);o.cdf_bound1=+pe(g,t,n).asValue();break}case\"right\":{let g=new ls(\"quantile\",[s,new to(1-d)]);o.cdf_bound1=+pe(g,t,n).asValue();break}}i.metaData.evaluatedCDFBound1=o.cdf_bound1,i.metaData.evaluatedCDFBound2=o.cdf_bound2}function c9(e,t,n,r){var u;let{evaluationState:o,rawTree:i}=e,s=i.type===\"Assignment\"?i._expression:i,a=e.evaluationState.top_level_function_spec;if((a==null?void 0:a.type)===\"distribution\"){let c={...a,evaluatedParams:[]};(u=s.args)==null||u.forEach((l,p)=>{let d=pe(l,t,n);for(let m of d.getDependencies())r[m]=!0;d.type===\"IRExpression\"&&d.isConstant?c.evaluatedParams[p]=+d.asValue():c.evaluatedParams[p]=void 0}),o.top_level_function_spec=c,i.metaData.evaluatedDistributionSpec=c}}function D3(e,t,n){var i,s,a;let r=e.evaluationState,o={};c9(e,t,n,o),i9(e)&&((i=e.rawTree.metaData.evaluatedDistributionSpec)!=null&&i.discrete||((a=(s=e.rawTree.userData.cdf)==null?void 0:s.compute)!=null?a:\"p\")===\"p\"?a9(e,t,n,o):u9(e,t,n,o),r.is_single_identifier=!1,Uc(r,t,o))}So();So();var B=function(){};B.version=\"1.2.6\";B._myIndexOf=function(t){var n=this.length,r;for(r=0;r<n;++r)if(this[r]===t)return r;return-1};B.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:B._myIndexOf;B.precision=4;B.largeArray=50;B.compile=function(){var e=Array.prototype.slice.call(arguments),t=e.pop();return t=\"return function (\"+e.join(\",\")+\") {\"+t+\"}\",new Function([\"numeric\"],t)(B)};B._dim=function(t){for(var n=[];typeof t==\"object\";)n.push(t.length),t=t[0];return n};B.dim=function(t){var n,r;return typeof t==\"object\"?(n=t[0],typeof n==\"object\"?(r=n[0],typeof r==\"object\"?B._dim(t):[t.length,n.length]):[t.length]):[]};B.mapreduce=function(t,n){return B.compile(\"x\",\"accum\",\"_s\",\"_k\",'if(typeof accum === \"undefined\") accum = '+n+`;\nif(typeof x === \"number\") { var xi = x; `+t+`; return accum; }\nif(typeof _s === \"undefined\") _s = numeric.dim(x);\nif(typeof _k === \"undefined\") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    `+t+`;\n    xi = x[i-1];\n    `+t+`;\n}\nif(i === 0) {\n    xi = x[i];\n    `+t+`\n}\nreturn accum;`)};B.mapreduce2=function(t,n){return B.compile(\"x\",`var n = x.length;\nvar i,xi;\n`+n+`\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    `+t+`\n}\nreturn accum;`)};B.rep=function(t,n,r){typeof r==\"undefined\"&&(r=0);var o=t[r],i=Array(o),s;if(r===t.length-1){for(s=o-2;s>=0;s-=2)i[s+1]=n,i[s]=n;return s===-1&&(i[0]=n),i}for(s=o-1;s>=0;s--)i[s]=B.rep(t,n,r+1);return i};B.dotMMsmall=function(t,n){var r,o,i,s,a,u,c,l,p,d,m,f,g,y;for(s=t.length,a=n.length,u=n[0].length,c=Array(s),r=s-1;r>=0;r--){for(l=Array(u),p=t[r],i=u-1;i>=0;i--){for(d=p[a-1]*n[a-1][i],o=a-2;o>=1;o-=2)m=o-1,d+=p[o]*n[o][i]+p[m]*n[m][i];o===0&&(d+=p[0]*n[0][i]),l[i]=d}c[r]=l}return c};B._getCol=function(t,n,r){var o=t.length,i;for(i=o-1;i>0;--i)r[i]=t[i][n],--i,r[i]=t[i][n];i===0&&(r[0]=t[0][n])};B.dotMMbig=function(t,n){var r=B._getCol,o=n.length,i=Array(o),s=t.length,a=n[0].length,u=new Array(s),c,l=B.dotVV,p,d,m,f;for(--o,--s,p=s;p!==-1;--p)u[p]=Array(a);for(--a,p=a;p!==-1;--p)for(r(n,p,i),d=s;d!==-1;--d)f=0,c=t[d],u[d][p]=l(c,i);return u};B.dotMV=function(t,n){var r=t.length,o=n.length,i,s=Array(r),a=B.dotVV;for(i=r-1;i>=0;i--)s[i]=a(t[i],n);return s};B.dotVM=function(t,n){var r,o,i,s,a,u,c,l,p,d,m,f,g,y,h,b,T,I,E;for(s=t.length,a=n[0].length,c=Array(a),i=a-1;i>=0;i--){for(d=t[s-1]*n[s-1][i],o=s-2;o>=1;o-=2)m=o-1,d+=t[o]*n[o][i]+t[m]*n[m][i];o===0&&(d+=t[0]*n[0][i]),c[i]=d}return c};B.dotVV=function(t,n){var r,o=t.length,i,s=t[o-1]*n[o-1];for(r=o-2;r>=1;r-=2)i=r-1,s+=t[r]*n[r]+t[i]*n[i];return r===0&&(s+=t[0]*n[0]),s};B.dot=function(t,n){var r=B.dim;switch(r(t).length*1e3+r(n).length){case 2002:return n.length<10?B.dotMMsmall(t,n):B.dotMMbig(t,n);case 2001:return B.dotMV(t,n);case 1002:return B.dotVM(t,n);case 1001:return B.dotVV(t,n);case 1e3:return B.mulVS(t,n);case 1:return B.mulSV(t,n);case 0:return t*n;default:throw new Error(\"numeric.dot only works on vectors and matrices\")}};B.diag=function(t){var n,r,o,i=t.length,s=Array(i),a;for(n=i-1;n>=0;n--){for(a=Array(i),r=n+2,o=i-1;o>=r;o-=2)a[o]=0,a[o-1]=0;for(o>n&&(a[o]=0),a[n]=t[n],o=n-1;o>=1;o-=2)a[o]=0,a[o-1]=0;o===0&&(a[0]=0),s[n]=a}return s};B.getDiag=function(e){var t=Math.min(e.length,e[0].length),n,r=Array(t);for(n=t-1;n>=1;--n)r[n]=e[n][n],--n,r[n]=e[n][n];return n===0&&(r[0]=e[0][0]),r};B.identity=function(t){return B.diag(B.rep([t],1))};B.pointwise=function(t,n,r){typeof r==\"undefined\"&&(r=\"\");var o=[],i,s=/\\[i\\]$/,a,u=\"\",c=!1;for(i=0;i<t.length;i++)s.test(t[i])?(a=t[i].substring(0,t[i].length-3),u=a):a=t[i],a===\"ret\"&&(c=!0),o.push(a);return o[t.length]=\"_s\",o[t.length+1]=\"_k\",o[t.length+2]='if(typeof _s === \"undefined\") _s = numeric.dim('+u+`);\nif(typeof _k === \"undefined\") _k = 0;\nvar _n = _s[_k];\nvar i`+(c?\"\":\", ret = Array(_n)\")+`;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee(`+t.join(\",\")+`,_s,_k+1);\n    return ret;\n}\n`+r+`\nfor(i=_n-1;i!==-1;--i) {\n    `+n+`\n}\nreturn ret;`,B.compile.apply(null,o)};B.pointwise2=function(t,n,r){typeof r==\"undefined\"&&(r=\"\");var o=[],i,s=/\\[i\\]$/,a,u=\"\",c=!1;for(i=0;i<t.length;i++)s.test(t[i])?(a=t[i].substring(0,t[i].length-3),u=a):a=t[i],a===\"ret\"&&(c=!0),o.push(a);return o[t.length]=\"var _n = \"+u+`.length;\nvar i`+(c?\"\":\", ret = Array(_n)\")+`;\n`+r+`\nfor(i=_n-1;i!==-1;--i) {\n`+n+`\n}\nreturn ret;`,B.compile.apply(null,o)};B._biforeach=function e(t,n,r,o,i){if(o===r.length-1){i(t,n);return}var s,a=r[o];for(s=a-1;s>=0;s--)e(typeof t==\"object\"?t[s]:t,typeof n==\"object\"?n[s]:n,r,o+1,i)};B._biforeach2=function e(t,n,r,o,i){if(o===r.length-1)return i(t,n);var s,a=r[o],u=Array(a);for(s=a-1;s>=0;--s)u[s]=e(typeof t==\"object\"?t[s]:t,typeof n==\"object\"?n[s]:n,r,o+1,i);return u};B._foreach=function e(t,n,r,o){if(r===n.length-1){o(t);return}var i,s=n[r];for(i=s-1;i>=0;i--)e(t[i],n,r+1,o)};B._foreach2=function e(t,n,r,o){if(r===n.length-1)return o(t);var i,s=n[r],a=Array(s);for(i=s-1;i>=0;i--)a[i]=e(t[i],n,r+1,o);return a};B.ops2={add:\"+\",sub:\"-\",mul:\"*\",div:\"/\",mod:\"%\",and:\"&&\",or:\"||\",eq:\"===\",neq:\"!==\",lt:\"<\",gt:\">\",leq:\"<=\",geq:\">=\",band:\"&\",bor:\"|\",bxor:\"^\",lshift:\"<<\",rshift:\">>\",rrshift:\">>>\"};B.opseq={addeq:\"+=\",subeq:\"-=\",muleq:\"*=\",diveq:\"/=\",modeq:\"%=\",lshifteq:\"<<=\",rshifteq:\">>=\",rrshifteq:\">>>=\",bandeq:\"&=\",boreq:\"|=\",bxoreq:\"^=\"};B.mathfuns=[\"abs\",\"acos\",\"asin\",\"atan\",\"ceil\",\"cos\",\"exp\",\"floor\",\"log\",\"round\",\"sin\",\"sqrt\",\"tan\",\"isNaN\",\"isFinite\"];B.mathfuns2=[\"atan2\",\"pow\",\"max\",\"min\"];B.ops1={neg:\"-\",not:\"!\",bnot:\"~\",clone:\"\"};B.mapreducers={any:[\"if(xi) return true;\",\"var accum = false;\"],all:[\"if(!xi) return false;\",\"var accum = true;\"],sum:[\"accum += xi;\",\"var accum = 0;\"],prod:[\"accum *= xi;\",\"var accum = 1;\"],norm2Squared:[\"accum += xi*xi;\",\"var accum = 0;\"],norminf:[\"accum = max(accum,abs(xi));\",\"var accum = 0, max = Math.max, abs = Math.abs;\"],norm1:[\"accum += abs(xi);\",\"var accum = 0, abs = Math.abs;\"],sup:[\"accum = max(accum,xi);\",\"var accum = -Infinity, max = Math.max;\"],inf:[\"accum = min(accum,xi);\",\"var accum = Infinity, min = Math.min;\"]};(function(){var e,t;for(e=0;e<B.mathfuns2.length;++e)t=B.mathfuns2[e],B.ops2[t]=t;for(e in B.ops2)if(B.ops2.hasOwnProperty(e)){t=B.ops2[e];var n,r,o=\"\";B.myIndexOf.call(B.mathfuns2,e)!==-1?(o=\"var \"+t+\" = Math.\"+t+`;\n`,n=function(i,s,a){return i+\" = \"+t+\"(\"+s+\",\"+a+\")\"},r=function(i,s){return i+\" = \"+t+\"(\"+i+\",\"+s+\")\"}):(n=function(i,s,a){return i+\" = \"+s+\" \"+t+\" \"+a},B.opseq.hasOwnProperty(e+\"eq\")?r=function(i,s){return i+\" \"+t+\"= \"+s}:r=function(i,s){return i+\" = \"+i+\" \"+t+\" \"+s}),B[e+\"VV\"]=B.pointwise2([\"x[i]\",\"y[i]\"],n(\"ret[i]\",\"x[i]\",\"y[i]\"),o),B[e+\"SV\"]=B.pointwise2([\"x\",\"y[i]\"],n(\"ret[i]\",\"x\",\"y[i]\"),o),B[e+\"VS\"]=B.pointwise2([\"x[i]\",\"y\"],n(\"ret[i]\",\"x[i]\",\"y\"),o),B[e]=B.compile(`var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric.`+e+\"VV, VS = numeric.\"+e+\"VS, SV = numeric.\"+e+`SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === \"object\") {\n      if(typeof y === \"object\") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === \"object\") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else `+r(\"x\",\"y\")+`\n}\nreturn x;\n`),B[t]=B[e],B[e+\"eqV\"]=B.pointwise2([\"ret[i]\",\"x[i]\"],r(\"ret[i]\",\"x[i]\"),o),B[e+\"eqS\"]=B.pointwise2([\"ret[i]\",\"x\"],r(\"ret[i]\",\"x\"),o),B[e+\"eq\"]=B.compile(`var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric.`+e+\"eqV, S = numeric.\"+e+`eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === \"object\") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n`)}for(e=0;e<B.mathfuns2.length;++e)t=B.mathfuns2[e],delete B.ops2[t];for(e=0;e<B.mathfuns.length;++e)t=B.mathfuns[e],B.ops1[t]=t;for(e in B.ops1)B.ops1.hasOwnProperty(e)&&(o=\"\",t=B.ops1[e],B.myIndexOf.call(B.mathfuns,e)!==-1&&Math.hasOwnProperty(t)&&(o=\"var \"+t+\" = Math.\"+t+`;\n`),B[e+\"eqV\"]=B.pointwise2([\"ret[i]\"],\"ret[i] = \"+t+\"(ret[i]);\",o),B[e+\"eq\"]=B.compile(\"x\",'if(typeof x !== \"object\") return '+t+`x\nvar i;\nvar V = numeric.`+e+`eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n`),B[e+\"V\"]=B.pointwise2([\"x[i]\"],\"ret[i] = \"+t+\"(x[i]);\",o),B[e]=B.compile(\"x\",'if(typeof x !== \"object\") return '+t+`(x)\nvar i;\nvar V = numeric.`+e+`V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n`));for(e=0;e<B.mathfuns.length;++e)t=B.mathfuns[e],delete B.ops1[t];for(e in B.mapreducers)B.mapreducers.hasOwnProperty(e)&&(t=B.mapreducers[e],B[e+\"V\"]=B.mapreduce2(t[0],t[1]),B[e]=B.compile(\"x\",\"s\",\"k\",t[1]+`if(typeof x !== \"object\") {    xi = x;\n`+t[0]+`\n    return accum;\n}if(typeof s === \"undefined\") s = numeric.dim(x);\nif(typeof k === \"undefined\") k = 0;\nif(k === s.length-1) return numeric.`+e+`V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n`+t[0]+`\n}\nreturn accum;\n`))})();B.inv=function(g){var n=B.dim(g),r=Math.abs,o=n[0],i=n[1],s=B.clone(g),a,u,c=B.identity(o),l,p,d,m,f,g;for(m=0;m<i;++m){var y=-1,h=-1;for(d=m;d!==o;++d)f=r(s[d][m]),f>h&&(y=d,h=f);for(u=s[y],s[y]=s[m],s[m]=u,p=c[y],c[y]=c[m],c[m]=p,g=u[m],f=m;f!==i;++f)u[f]/=g;for(f=i-1;f!==-1;--f)p[f]/=g;for(d=o-1;d!==-1;--d)if(d!==m){for(a=s[d],l=c[d],g=a[m],f=m+1;f!==i;++f)a[f]-=u[f]*g;for(f=i-1;f>0;--f)l[f]-=p[f]*g,--f,l[f]-=p[f]*g;f===0&&(l[0]-=p[0]*g)}}return c};B.det=function(t){var n=B.dim(t);if(n.length!==2||n[0]!==n[1])throw new Error(\"numeric: det() only works on square matrices\");var r=n[0],o=1,i,s,a,u=B.clone(t),c,l,p,d,m,f,g;for(s=0;s<r-1;s++){for(a=s,i=s+1;i<r;i++)Math.abs(u[i][s])>Math.abs(u[a][s])&&(a=i);for(a!==s&&(d=u[a],u[a]=u[s],u[s]=d,o*=-1),c=u[s],i=s+1;i<r;i++){for(l=u[i],p=l[s]/c[s],a=s+1;a<r-1;a+=2)m=a+1,l[a]-=c[a]*p,l[m]-=c[m]*p;a!==r&&(l[a]-=c[a]*p)}if(c[s]===0)return 0;o*=c[s]}return o*u[s][s]};B.transpose=function(t){var n,r,o=t.length,i=t[0].length,s=Array(i),a,u,c;for(r=0;r<i;r++)s[r]=Array(o);for(n=o-1;n>=1;n-=2){for(u=t[n],a=t[n-1],r=i-1;r>=1;--r)c=s[r],c[n]=u[r],c[n-1]=a[r],--r,c=s[r],c[n]=u[r],c[n-1]=a[r];r===0&&(c=s[0],c[n]=u[0],c[n-1]=a[0])}if(n===0){for(a=t[0],r=i-1;r>=1;--r)s[r][0]=a[r],--r,s[r][0]=a[r];r===0&&(s[0][0]=a[0])}return s};B.negtranspose=function(t){var n,r,o=t.length,i=t[0].length,s=Array(i),a,u,c;for(r=0;r<i;r++)s[r]=Array(o);for(n=o-1;n>=1;n-=2){for(u=t[n],a=t[n-1],r=i-1;r>=1;--r)c=s[r],c[n]=-u[r],c[n-1]=-a[r],--r,c=s[r],c[n]=-u[r],c[n-1]=-a[r];r===0&&(c=s[0],c[n]=-u[0],c[n-1]=-a[0])}if(n===0){for(a=t[0],r=i-1;r>=1;--r)s[r][0]=-a[r],--r,s[r][0]=-a[r];r===0&&(s[0][0]=-a[0])}return s};B.norm2=function(t){return Math.sqrt(B.norm2Squared(t))};B.linspace=function(t,n,r){if(typeof r==\"undefined\"&&(r=Math.max(Math.round(n-t)+1,1)),r<2)return r===1?[t]:[];var o,i=Array(r);for(r--,o=r;o>=0;o--)i[o]=(o*n+(r-o)*t)/r;return i};B.getBlock=function(t,n,r){var o=B.dim(t);function i(s,a){var u,c=n[a],l=r[a]-c,p=Array(l);if(a===o.length-1){for(u=l;u>=0;u--)p[u]=s[u+c];return p}for(u=l;u>=0;u--)p[u]=i(s[u+c],a+1);return p}return i(t,0)};B.setBlock=function(t,n,r,o){var i=B.dim(t);function s(a,u,c){var l,p=n[c],d=r[c]-p;if(c===i.length-1)for(l=d;l>=0;l--)a[l+p]=u[l];for(l=d;l>=0;l--)s(a[l+p],u[l],c+1)}return s(t,o,0),t};B.getRange=function(t,n,r){var o=n.length,i=r.length,s,a,u=Array(o),c,l;for(s=o-1;s!==-1;--s)for(u[s]=Array(i),c=u[s],l=t[n[s]],a=i-1;a!==-1;--a)c[a]=l[r[a]];return u};B.blockMatrix=function(t){var n=B.dim(t);if(n.length<4)return B.blockMatrix([t]);var r=n[0],o=n[1],i,s,a,u,c;for(i=0,s=0,a=0;a<r;++a)i+=t[a][0].length;for(u=0;u<o;++u)s+=t[0][u][0].length;var l=Array(i);for(a=0;a<i;++a)l[a]=Array(s);var p=0,d,m,f,g,y;for(a=0;a<r;++a){for(d=s,u=o-1;u!==-1;--u)for(c=t[a][u],d-=c[0].length,f=c.length-1;f!==-1;--f)for(y=c[f],m=l[p+f],g=y.length-1;g!==-1;--g)m[d+g]=y[g];p+=t[a][0].length}return l};B.tensor=function(t,n){if(typeof t==\"number\"||typeof n==\"number\")return B.mul(t,n);var r=B.dim(t),o=B.dim(n);if(r.length!==1||o.length!==1)throw new Error(\"numeric: tensor product is only defined for vectors\");var i=r[0],s=o[0],a=Array(i),u,c,l,p;for(c=i-1;c>=0;c--){for(u=Array(s),p=t[c],l=s-1;l>=3;--l)u[l]=p*n[l],--l,u[l]=p*n[l],--l,u[l]=p*n[l],--l,u[l]=p*n[l];for(;l>=0;)u[l]=p*n[l],--l;a[c]=u}return a};B.epsilon=2220446049250313e-31;B.LU=function(e,t){t=t||!1;var n=Math.abs,r,o,i,s,a,u,c,l,p,d=e.length,m=d-1,f=new Array(d);for(t||(e=B.clone(e)),i=0;i<d;++i){for(c=i,u=e[i],p=n(u[i]),o=i+1;o<d;++o)s=n(e[o][i]),p<s&&(p=s,c=o);for(f[i]=c,c!=i&&(e[i]=e[c],e[c]=u,u=e[i]),a=u[i],r=i+1;r<d;++r)e[r][i]/=a;for(r=i+1;r<d;++r){for(l=e[r],o=i+1;o<m;++o)l[o]-=l[i]*u[o],++o,l[o]-=l[i]*u[o];o===m&&(l[o]-=l[i]*u[o])}}return{LU:e,P:f}};B.LUsolve=function(t,n){var r,o,i=t.LU,s=i.length,a=B.clone(n),u=t.P,c,l,p,d;for(r=s-1;r!==-1;--r)a[r]=n[r];for(r=0;r<s;++r)for(c=u[r],u[r]!==r&&(d=a[r],a[r]=a[c],a[c]=d),l=i[r],o=0;o<r;++o)a[r]-=a[o]*l[o];for(r=s-1;r>=0;--r){for(l=i[r],o=r+1;o<s;++o)a[r]-=a[o]*l[o];a[r]/=l[r]}return a};B.solve=function(t,n,r){return B.LUsolve(B.LU(t,r),n)};var hr=B;var l9=Math.pow(2,-52);function kI(e){for(let t of e)for(let n of t)if(!ln(n))return!1;return!0}function O3(e){let t=[];for(let n of e)t.push(n.slice());return t}function vD(e){let{numRows:t,numCols:n}=Tf(e),r=[];for(let o=0;o<n;o++)r.push([]);for(let o=0;o<t;o++)for(let i=0;i<n;i++)r[i].push(e[o][i]);return r}function Tf(e){let t=e.length,n=t>0?e[0].length:0;return{numRows:t,numCols:n}}function A3(e){let{numRows:t,numCols:n}=Tf(e);return t===n}function MD(e){if(!A3(e))return!0;let t=F(m9(e));return!isFinite(t)||t===0}function p9(){throw new Error(\"Matrix dimension mismatch\")}function d9(){throw new Error(\"Expected square matrix\")}function HI(e,t){let n=Tf(e),r=Tf(t);n.numCols!==r.numRows&&p9();let o=[];for(let i=0;i<n.numRows;i++){let s=[];for(let a=0;a<r.numCols;a++){let u=Ie(0,1);for(let c=0;c<e[i].length;c++)u=Ai(u,oo(e[i][c],t[c][a]));s.push(u)}o.push(s)}return o}function m9(e){let{determinant:t}=_D(O3(e));return t}function w3(e){if(A3(e)||d9(),MD(e))throw new Error(\"Cannot invert a singular matrix\");let{numRows:t,numCols:n}=Tf(e),r=[];for(let i=0;i<t;i++){let s=e[i].slice();for(let a=0;a<n;a++)s.push(Ie(i===a?1:0,1));r.push(s)}_D(r);let o=[];for(let i of r)o.push(i.slice(n));return o}function L3(e){let t=O3(e);return _D(t),t}function f9(e){let t=0;for(let n of e)for(let r of n){let o=Math.abs(F(r));if(!isFinite(o))return NaN;o>t&&(t=o)}return t}function N3(e){for(let t=0;t<e.length;t++)for(let n=0;n<e[t].length;n++)e[t][n]=NaN}function _D(e){let{numRows:t,numCols:n}=Tf(e),r=f9(e);if(!isFinite(r))return N3(e),{determinant:NaN,rank:0};let o=Math.max(t,n)*r*l9,i=Ie(1,1),s=0,a=0;for(;s<t&&a<n;){let u=s,c=Math.abs(F(e[s][a]));for(let p=s+1;p<t;p++){let d=Math.abs(F(e[p][a]));(!isFinite(d)||d>c)&&(c=d,u=p)}if(!isFinite(c))return N3(e),{determinant:NaN,rank:0};if(c===0){i=Ie(0,1),a+=1;continue}if(!ln(e[u][a])&&c<o){for(let p=s;p<t;p++)e[s][p]=0;i=0,a+=1;continue}if(u!==s){i=Oi(i);let p=e[s];e[s]=e[u],e[u]=p}for(let p=0;p<t;p++){if(p===s)continue;let d=Yo(e[p][a],e[s][a]);e[p][a]=Ie(0,1);for(let m=a+1;m<n;m++)e[p][m]=es(e[p][m],oo(d,e[s][m]))}let l=e[s][a];i=oo(i,l),e[s][a]=Ie(1,1);for(let p=a+1;p<n;p++)e[s][p]=Yo(e[s][p],l);s+=1,a+=1}return{rank:s,determinant:s===t&&s===n?i:Ie(0,1)}}function g9(e,t){let n=e.length,r=t.length,o=0,i=0;for(let a=r-n;a<r;a++)o+=e[a+n-r]*t[a],i+=e[a+n-r]*e[a+n-r];let s=o/i;for(let a=r-n;a<r;a++)t[a]=2*s*e[a+n-r]-t[a]}function h9(e,t,n){let r=e.length,o=t.length,i=0,s=0;for(let u=o-r;u<o;u++)i+=e[u+r-o]*t[u][n],s+=e[u+r-o]*e[u+r-o];let a=i/s;for(let u=o-r;u<o;u++)t[u][n]=2*a*e[u+r-o]-t[u][n]}function b9(e,t,n,r){let o=Array(e.length-t);if(o.length===1)return o[0]=1,o;if(r===0){o[0]=1;for(let s=1;s<o.length;s++)o[s]=0;return o}let i=e[t][n]<0?-1:1;o[0]=e[t][n]+i*Math.sqrt(r);for(let s=t+1;s<e.length;s++)o[s-t]=e[s][n];return o}function x9(e,t,n){let r=0;for(;t<e.length;t++)r+=e[t][n]*e[t][n];return r}function $I(e,t){if(!t||!t.mutateInput){let i=e;e=Array(e.length);for(let s=0;s<i.length;s++)e[s]=i[s].slice()}let n=Math.min(e.length,e[0].length),r=Array(n),o=[];for(let i=0;i<n;i++){let s=-1/0,a=i;for(let c=i;c<e[i].length;c++){let l=x9(e,i,c);l>s&&(s=l,a=c)}if(r[i]=a,a!==i)for(let c=0;c<e.length;c++){let l=e[c][a];e[c][a]=e[c][i],e[c][i]=l}let u=b9(e,i,i,s);for(let c=i;c<e[i].length;c++)h9(u,e,c);o.push(u)}return{reflectors:o,r:e,p:r}}function F3(e,t,n){let{reflectors:r,r:o,p:i}=e,s=t.slice();for(let c=0;c<r.length;c++)g9(r[c],s);for(let c=r.length;c<o[0].length;c++)s[c]=0;s.length=o[0].length;let a=Math.pow(2,-52),u=n.regularize?a*Math.abs(o[0][0])*Math.max(o.length,o[0].length):0;for(let c=r.length-1;c>=0;c--){let l=o[c];if(Math.abs(l[c])<=u)s[c]=0;else{for(let p=c+1;p<r.length;p++)s[c]-=s[p]*l[p];s[c]/=l[c]}}for(let c=i.length-1;c>=0;c--)if(i[c]!==c){let l=s[c];s[c]=s[i[c]],s[i[c]]=l}return s}function T9(e,t,n){let r=Array(e.r[0].length);for(let i=0;i<r.length;i++)r[i]=Array(t[0].length);let o=Array(t.length);for(let i=0;i<t[0].length;i++){for(let a=0;a<t.length;a++)o[a]=t[a][i];let s=F3(e,o,n);for(let a=0;a<s.length;a++)r[a][i]=s[a]}return r}function ud(e,t,n){return Array.isArray(t[0])?T9(e,t,n):F3(e,t,n)}function I9(e){let t=e.r,n=Math.min(t.length,t[0].length),r=t[0][0],o=t[n-1][n-1];return r===0?1/0:Math.abs(r/o)}function V3(e){let t=Math.pow(2,-52);return Math.max(e.r.length,e.r[0].length)*t*I9(e)<1}function ZI(e,t){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function Qg(e,t){let n=jl(e,t),r=0;for(let o of n){let i=o;r+=i*i}return r/n.length}function jl(e,t){return e.apply(void 0,t)}function YI(e,t){let n=[];for(let r of e){let o=r.apply(void 0,t);n.push(o)}return n}function B3(e,t){let n=[];for(let r=0;r<e.length;r++)t[r]&&n.push(e[r]);return n}function RD(e,t,n){let r=[];for(let o=0,i=0;o<e.length;o++){let s=0;n[o]&&(s=t[i],i+=1),r.push(e[o]+s)}return r}function OD(e,t){let n=t.solution.map(u=>Math.abs(u)<1e-6?0:u),r=t.solution.map(()=>0),o=Qg(e,n),i=jl(e,n),s=jl(e,r),a=0;for(let u=0;u<i.length;u++){let c=s[u]*1e-15;a+=Math.abs(i[u]*c)+c*c}return a/=i.length,isFinite(a)||(a=0),isFinite(t.MSE)&&!isFinite(o)?t:o<=t.MSE+a?{solution:n,MSE:o}:t}function AD(e,t){if(!kI(t)||!kI([e]))return;let n=vD(t),r=HI([e],n)[0],o=HI(t,n);for(let c=0;c<r.length;c++)o[c].push(Oi(r[c]));let i=L3(o);if(!kI(i))return;let s=[],a=r.length,u=0;for(let c of i)for(;u<a;)if(F(c[u])===1){s.push(c[c.length-1]),u++;break}else s.push(Ie(0,1)),u++;for(;u<a;)s.push(Ie(0,1)),u++;return s}function wD(e){let t=HI(e,vD(e));if(MD(t)){let o=[];for(let i=0;i<t.length;i++)o.push(NaN);return o}let n=w3(t),r=[];for(let o=0;o<n.length;o++)r.push(n[o][o]);return r}function LD(e,t){let n=ZI(0,t.length),r=YI(t,n),o=$I(hr.transpose(r),{mutateInput:!0});for(let u=0;u<2;u++){let c=jl(e,n),l=hr.neg(ud(o,c,{regularize:!1}));n=hr.add(n,l)}let i=Qg(e,n);if(V3(o))return{solution:n,MSE:i};let s=ZI(0,t.length);for(let u=0;u<2;u++){let c=jl(e,s),l=hr.neg(ud(o,c,{regularize:!0}));s=hr.add(s,l)}let a=Qg(e,s);return .999*a<=i?{solution:s,MSE:a}:{solution:n,MSE:i}}function DD(e,t,n,r){let o=r.maxIterations,i=r.linearSubset||ZI(!1,n.length),s=hr.not(i),a=B3(t,i),u=B3(t,s),c=2,l=.1,p=n,d=0,m=.001,f;if(a.length>0){let h=hr.transpose(YI(a,p)),b=$I(h);f={Jv:h,F:b};let T=jl(e,p),I=hr.neg(ud(b,T,{regularize:!0}));p=RD(p,I,i)}let g=!1,y=Qg(e,p);for(;d<o&&!g&&isFinite(y);){let h=jl(e,p),b=YI(u,p),T=hr.transpose(b),I,E;if(f){let{F:v,Jv:_}=f;I=hr.dot(b,hr.sub(h,hr.dot(_,ud(v,h,{regularize:!0})))),E=hr.dot(b,hr.sub(T,hr.dot(_,ud(v,T,{regularize:!0}))))}else I=hr.dot(b,h),E=hr.dot(b,T);let S=p,C=!1;for(;d<o&&!g&&!C;){d+=1;let v=hr.add(E,hr.diag(ZI(m,u.length))),_=hr.neg(hr.solve(v,I,!0));S=RD(p,_,s),g=hr.all(hr.eq(S,p));let L;if(f){let Q=hr.transpose(YI(a,S)),w=$I(Q);L={Jv:Q,F:w};let q=jl(e,S),K=hr.neg(ud(w,q,{regularize:!0}));S=RD(S,K,i)}let k=Qg(e,S);C=k<y,C?(p=S,y=k,f=L,m*=l):(m=Math.max(m,1e-64),m*=c)}}return{solution:p,MSE:y}}var ND=[18.9,.105,.0113,.089,4.414,.373,.06,.149,1.84,9.26,5,.7,.2,1.13,2.61,1,.007,30,120,1500,4e-4,7.23,-1,-.0081,-.03,-28.6,-1.71,-.4,-6.94,-.777,-500];function P9(e){let t=e*503%ND.length;return ND[t]}function S9(e){let t=[];for(let n=0;n<ND.length;n++){let r=[];for(let o=0;o<e;o++)n===0&&e!==1?r[o]=0:n===1&&e!==1?r[o]=1:r[o]=P9(n*e+o);t.push(r)}return t}function G3(e,t,n,r,o){let i=[];for(let a of n)i.push({soln:DD(e,t,a,o),initialGuess:a});i.sort((a,u)=>isNaN(a.soln.MSE)?1:isNaN(u.soln.MSE)?-1:a.soln.MSE-u.soln.MSE);let s=[];for(let a=0;a<r;a++)s.push(i[a].initialGuess);return s}function C9(e,t,n,r){if(!t||Li(t))return e;let o=t.bounds;return o[0]===-1/0&&o[1]===1/0?e:o[0]===-1/0?o[1]-Math.exp(-e):o[1]===1/0?o[0]+Math.exp(e):n/(r-1)*o[1]+(r-1-n)/(r-1)*o[0]}var q3=[3,5,7,11,13,17,19];function E9(e,t){let n=[];for(let r=0;r<e.length;r++){let o=e[r],i=[];for(let s=0;s<o.length;s++){let a=q3[s%q3.length]*r%e.length;i.push(C9(o[s],t[s],a,e.length))}n.push(i)}return n}function U3(e,t,n){n||(n={});let{linearSubset:r,bounds:o,preferredInitialGuess:i}=n,s=S9(t.length);o&&(s=E9(s,o));let a=G3(e,t,s,5,{maxIterations:3,linearSubset:r}),u=G3(e,t,a,1,{maxIterations:60,linearSubset:r}),c=DD(e,t,u[0],{maxIterations:250,linearSubset:r});if(!i)return c;let l=DD(e,t,i,{maxIterations:100,linearSubset:r});return isFinite(l.MSE)&&(l.MSE<c.MSE||Xi(l.MSE,c.MSE,8))?l:c}function FD(e){return{chunk:e,isLazy:!0}}function z3(e){return e.slice()}function WI(e){if(!e.isLazy)return e;let t=e.chunk.copy();return t.reopenFinalBlock(),{chunk:t,forwardParameterMap:z3,reverseParameterMap:z3,isLazy:!1,valueMap:N9(e.chunk.instructionsLength()),replacementMask:If(e.chunk.argNames.length)}}function k3(e){let{chunk:t,forwardParameterMap:n,reverseParameterMap:r,isLazy:o,valueMap:i,replacementMask:s,didShiftScale:a}=e;return{chunk:t.copy(),forwardParameterMap:n,reverseParameterMap:r,isLazy:o,valueMap:i.slice(),replacementMask:s.slice(),didShiftScale:a}}function v9(e){let t=1/0,n=-1/0,r=e.length;for(let o of e)t=Math.min(t,o),n=Math.max(n,o);return{min:t,max:n,length:r}}function Y3(e){let t=e.getInstruction(e.getReturnIndex());if(t.type!==48)return;let n=t.args[0],r=e.getReturnIndex()-n,o=e.getInstruction(n);if(o.args.length!==2)return;let i=o.args[0],s=o.args[r],a=[],u=[];a.push(i),u.push({min:1,max:lu(e,e.getReturnIndex(),\"Programming error: cannot optimize regression on non-constant-length list\"),length:lu(e,e.getReturnIndex(),\"Programming error: cannot optimize regression on non-constant-length list\")});let c=!1,l=!1;for(let y=i+1;y<=s;y++){let h=e.getInstruction(y);if(h.type===39||h.type===41||h.type===40){if(h.args[1]!==i)continue;let b=h.args[0];if(e.getInstruction(b).valueType!==Z||!De(e.getInstruction(b)))continue;let T=Oo(e,b),I=v9(T);if(!isFinite(I.min)||!isFinite(I.max))continue;a.push(y),u.push(I)}else if(h.type===37)h.symbol===\"exp\"?l=!0:$3(h)&&(c=!0);else if(h.type===12||h.type===13)l=!0;else if(Zr(h)||mo(h))return}if(a.length===0||!l&&!c)return;let p=[];for(let y=0;y<=s;y++){let h=a.indexOf(y);if(h!==-1){let b=If(a.length);b[h]=!0,p.push(b)}else p.push(XI(e,p,a.length,y))}let d=[];for(let y=0;y<=e.getReturnIndex();y++)if(e.getInstruction(y).type===2){let b=If(e.argNames.length);b[y]=!0,d.push(b)}else d.push(XI(e,d,e.argNames.length,y));let m={listAccessDependencyTable:p,listAccesses:a,listStatisticsTable:u},f;for(let y=i+1;y<=e.getReturnIndex();y++){let h=e.getInstruction(y);switch(h.type){case 37:{if(h.symbol===\"exp\"){let K=h.args[0],le=VD(m,K);if(le===void 0){zc(e,d,f,y);break}let{listStatistics:te,listAccessIndex:Be}=le,Ze=Kg(FD(e),y,K,Be,te);Ze?f=[Ze]:zc(e,d,f,y)}break}case 12:case 13:{let[K,le]=h.args,te=VD(m,le);if(te===void 0||H3(m,K)){zc(e,d,f,y);break}let{listStatistics:Be,listAccessIndex:Ze}=te,oe=_9(FD(e),y,Ze,Be);oe?f=[oe]:zc(e,d,f,y);break}case 10:if(f&&f.length>1){zc(e,d,f,y);break}let b=f&&f.length>0?f[0]:FD(e),[T,I]=h.args,E=b.isLazy?T:b.valueMap[T],S=b.isLazy?I:b.valueMap[I],C=b.chunk.getInstruction(E),v=b.chunk.getInstruction(S),_,L,k;if(C.type===37)_=T,k=C,L=I;else if(v.type===37)_=I,k=v,L=T;else{zc(e,d,f,y);break}let Q=VD(m,_);if(Q===void 0||H3(m,L)){zc(e,d,f,y);break}let{listAccessIndex:w,listStatistics:q}=Q;if(k.symbol===\"exp\"){let K=R9(b,y,L,_,w,q);if(K){f=K;break}}else if($3(k)){let K=M9(b,y,L,_,w);if(K){f=[K];break}}zc(e,d,f,y);break;default:{zc(e,d,f,y);break}}}if(f===void 0||f.length===0)return;let g=[];for(let y of f)g.push({chunk:y.chunk,forwardParameterMap:y.forwardParameterMap,reverseParameterMap:y.reverseParameterMap});return g}function zc(e,t,n,r){if(n===void 0)return;let o=e.getInstruction(r);if(me(o))for(let i of n){let{chunk:s,valueMap:a}=i,u=[],c=0;for(let l of o.args){if(a[l]!==l){if(c+=1,c>1){n.length=0;return}}else{let p=t[l];for(let d=0;d<p.length;d++)if(p[d]&&i.replacementMask[d]){n.length=0;return}}u.push(a[l])}a[r]=c>0?Ym(s,o,u):r}else for(let i of n)i.valueMap[r]=r}function VD(e,t){let{listAccessDependencyTable:n,listAccesses:r,listStatisticsTable:o}=e,i,s=n[t];for(let a=0;a<s.length;a++)if(s[a]){if(i)return;i={listAccessIndex:r[a],listStatistics:o[a]}}return i}function H3(e,t){let{listAccessDependencyTable:n}=e,r=n[t];for(let o of r)if(o)return!0;return!1}function BD(e,t){let n=[];for(let i=0;i<=t;i++)if(e.getInstruction(i).type===2){let a=If(e.argNames.length);a[i]=!0,n.push(a)}else n.push(XI(e,n,e.argNames.length,i));let r,o=n[t];for(let i=0;i<o.length;i++)if(o[i]){if(r!==void 0)return;r=i}return r}function M9(e,t,n,r,o){let i=e.chunk,s=BD(i,n);if(s===void 0)return;let a=GD(e,n,s);if(a===void 0)return;let u=i.getInstruction(r),c=u.args[0];if(a=Z3(a,c,o),a===void 0)return;let{chunk:l,valueMap:p}=a,d=l.getInstruction(p[c]);if(d.type!==8)return;let m=d.args[1],f=l.getInstruction(d.args[0]);if(f.type!==10)return;let[g,y]=f.args,h=s,b=m,T=g,I=y,E=l.Multiply([T,I]),S=l.NativeFunction(\"cos\",[E]),C=l.NativeFunction(\"sin\",[E]),v=u.symbol===\"sin\"?l.Add([l.Multiply([h,C]),l.Multiply([b,S])]):l.Subtract([l.Multiply([h,S]),l.Multiply([b,C])]);p[t]=v;function _(Q){let w=a.forwardParameterMap(Q),q=w[s],K=w[m],le=q*Math.cos(K),te=q*Math.sin(K);return w[s]=le,w[m]=te,w}function L(Q){let w=Q.slice(),q=Q[s],K=Q[m],le=oi(q,K),te=Math.atan2(K,q);return w[s]=le,w[m]=te,a.reverseParameterMap(w)}let k=a.replacementMask.slice();return k[s]=!0,k[g]=!0,k[m]=!0,{chunk:l,forwardParameterMap:_,reverseParameterMap:L,valueMap:p,replacementMask:k,isLazy:!1}}function _9(e,t,n,r){let o=e.chunk,i=o.getInstruction(t),[s,a]=i.args,u=o.getInstruction(s);if(u.type===1&&u.valueType===x&&F(u.value)>0){let b=WI(e),{chunk:T,valueMap:I}=b,E=T.Multiply([T.NativeFunction(\"ln\",[I[s]]),I[a]]);return I[a]=E,I[t]=T.NativeFunction(\"exp\",[E]),Kg(b,t,a,n,r)||b}let c=BD(o,s);if(c===void 0)return;let l=GD(e,s,c);if(l===void 0)return;let{chunk:p,valueMap:d}=l,m=p.Multiply([d[s],d[a]]);d[a]=m,d[t]=p.NativeFunction(\"exp\",[m]);function f(b){let T=l.forwardParameterMap(b),I=T[c],E=Math.log(I);return T[c]=E,T}function g(b){let T=b.slice(),I=T[c],E=Math.exp(I);return T[c]=E,l.reverseParameterMap(T)}let y=l.replacementMask.slice();y[c]=!0;let h={chunk:p,forwardParameterMap:f,reverseParameterMap:g,isLazy:!1,valueMap:d,replacementMask:y};return Kg(h,t,a,n,r)||h}function R9(e,t,n,r,o,i){if(!e.isLazy&&e.didShiftScale)return;let s=e.isLazy?e:k3(e),a=e.chunk,u=BD(a,n);if(u===void 0)return;let c=GD(e,n,u);if(c===void 0)return;let{chunk:l,valueMap:p}=c,d=l.getInstruction(p[r]).args[0],m=l.Add([d,p[n]]);p[n]=m,p[t]=l.NativeFunction(\"exp\",[m]);function f(S){let C=c.forwardParameterMap(S),v=C[u],_=Math.log(v);return C[u]=_,C}function g(S){let C=S.slice(),v=C[u],_=Math.exp(v);return C[u]=_,c.reverseParameterMap(C)}function y(S){let C=c.forwardParameterMap(S),v=C[u],_=Math.log(-v);return C[u]=_,C}function h(S){let C=S.slice(),v=C[u],_=-Math.exp(v);return C[u]=_,c.reverseParameterMap(C)}let b=c.replacementMask.slice();b[u]=!0;let T=WI(s);T.valueMap[t]=T.chunk.Multiply([T.valueMap[n],T.valueMap[r]]);let I={chunk:l,forwardParameterMap:f,reverseParameterMap:g,isLazy:!1,valueMap:p,replacementMask:b},E=k3(I);return E.forwardParameterMap=y,E.reverseParameterMap=h,I=Kg(I,t,n,o,i)||I,E=Kg(E,t,n,o,i)||E,E.valueMap[t]=E.chunk.Negative([E.valueMap[t]]),[T,I,E]}function Kg(e,t,n,r,o){let i=D9(e,n,r,o);if(i!==void 0)return i.valueMap[t]=i.chunk.NativeFunction(\"exp\",[i.valueMap[n]]),i}function D9(e,t,n,r){let o=Z3(e,t,n);if(o===void 0)return;let{chunk:i,valueMap:s}=o,a=i.getInstruction(s[t]);if(a.type!==8)return;let u=a.args[1],c=i.getInstruction(a.args[0]);if(c.type!==10)return;let[l,p]=c.args,{min:d,max:m}=r,f=m-d,g=.5*(m+d),y=i.Divide([i.Subtract([p,i.Constant(g,1)]),i.Constant(f,1)]),h=i.Add([i.Multiply([l,y]),u]);s[t]=h;function b(I){let E=o.forwardParameterMap(I),S=E[l],C=E[u],v=S*f,_=C+g*S;return E[l]=v,E[u]=_,E}function T(I){let E=I.slice(),S=I[l],C=I[u],v=S/f,_=C-v*g;return E[l]=v,E[u]=_,o.reverseParameterMap(E)}return{chunk:i,forwardParameterMap:b,reverseParameterMap:T,isLazy:!1,valueMap:s,replacementMask:o.replacementMask,didShiftScale:!0}}function GD(e,t,n){let r=e.chunk,o=wo(r,n,{allowRestriction:!1,allowClosedBlockReferences:!1});if(Rn(o,t)!==1)return;let i=ya(o,t),[s,a]=Pr(i,t);if(a===void 0)return;let u=i.newChunk.getInstruction(s);if(u.type!==1||u.valueType!==x)return;let c=i.newChunk.getInstruction(a);if(c.type!==1||c.valueType!==x)return;let l=WI(e),{chunk:p,valueMap:d}=l,m=F(u.value),f=F(c.value);d[t]=n;function g(b){let T=l.forwardParameterMap(b),I=T[n],E=m+f*I;return T[n]=E,T}function y(b){let T=b.slice(),E=(T[n]-m)/f;return T[n]=E,l.reverseParameterMap(T)}let h=l.replacementMask.slice();return h[n]=!0,{chunk:p,forwardParameterMap:g,reverseParameterMap:y,isLazy:!1,valueMap:d,replacementMask:h}}function Z3(e,t,n){let r=e.chunk,o=e.isLazy?t:e.valueMap[t],i=wo(r,n,{allowRestriction:!1,allowClosedBlockReferences:!0});if(Rn(i,o)!==1)return;e.isLazy&&(i=wo(r.copy().reopenFinalBlock(),n,{allowRestriction:!1,allowClosedBlockReferences:!1}));let s=ya(i,o),[a,u]=Pr(s,o);if(u===void 0)return;let c=s.newChunk,l=Math.max(u,a),p=[];for(let ee=0;ee<=l;ee++)if(c.getInstruction(ee).type===2){let ne=If(c.argNames.length);ne[ee]=!0,p.push(ne)}else p.push(XI(c,p,c.argNames.length,ee));let d,m;for(let ee=0;ee<r.argNames.length;ee++)if(p[u][ee])if(d===void 0)d=ee;else return;else if(p[a][ee])if(m===void 0)m=ee;else return;if(d===void 0||m===void 0)return;let f=wo(c,d,{allowRestriction:!1,allowClosedBlockReferences:!1});if(Rn(f,u)!==1)return;let g=wo(c,m,{allowRestriction:!1,allowClosedBlockReferences:!1});if(Rn(g,a)!==1)return;let y=ya(f,u),h=ya(g,a),[b,T]=Pr(y,u),I=y.newChunk.getInstruction(b);if(I.type!==1||I.valueType!==x)return;let E=y.newChunk.getInstruction(T);if(E.type!==1||E.valueType!==x)return;let S=WI(e),{chunk:C,valueMap:v}=S,_=C.Add([C.Multiply([d,n]),m]);v[t]=_;let L=c.copy();L.List([u,a]);let k=L.getCompiledFunction().fn;function Q(ee){let $=S.forwardParameterMap(ee),[ne,Ve]=k.apply(null,$);return $[d]=ne,$[m]=Ve,$}let w=F(I.value),q=F(E.value),[K,le]=Pr(h,a),te=h.newChunk.copy();te.List([K,le]);let Be=te.getCompiledFunction().fn;function Ze(ee){let $=ee.slice(),ne=ee[d],Ve=ee[m],_t=(ne-w)/q,ht=ee.slice();ht[d]=_t,ht.splice(m,1);let[Rt,Ko]=Be.apply(null,ht),br=(Ve-Rt)/Ko;return $[d]=_t,$[m]=br,S.reverseParameterMap($)}let oe=S.replacementMask.slice();return oe[d]=!0,oe[m]=!0,{chunk:C,forwardParameterMap:Q,reverseParameterMap:Ze,isLazy:!1,valueMap:v,replacementMask:oe}}function XI(e,t,n,r){let o=e.getInstruction(r),i=If(n);if(!me(o))return i;for(let s of o.args){let a=t[s];for(let u=0;u<a.length;u++)i[u]=i[u]||a[u]}return i}function If(e){let t=[];for(let n=0;n<e;n++)t.push(!1);return t}function N9(e){let t=[];for(let n=0;n<e;n++)t.push(n);return t}function $3(e){return e.type===37&&(e.symbol===\"sin\"||e.symbol===\"cos\")}function iq(e,t){try{return w9(e,t)}catch(n){return n instanceof O.Error?n:V(n)}}var Pf={coerceToNumber:\"all-except-complex\"},qD={...Pf,wrapInList:!0};function X3(e){return e===x||e===Z||e===N||e===Ye}function O9(e){return!!e.tableRegressionData}function A9(e,t){return e===He||t===He?!1:X3(e)&&X3(t)}function w9(e,t){let{policy:n,frame:r,lastExportFrame:o}=e,i=uu(t._lhs,n,r,Pf),s=uu(t._rhs,n,r,Pf);if(i.isError)throw i;if(s.isError)throw s;if(!A9(i.valueType,s.valueType))throw jC([se(i.valueType),se(s.valueType)]);let a=uu(t._difference,n,r,qD);if(a.isError)throw a;for(let S of a.getDependencies())if(!n.validRegressionParameter(S))throw Dv(S);let u=a.valueType,l=!O9(t)?j3(a.getDependencies(),t.userData.regressionParameters,o):j3(a.getDependencies(),{},{}),{parameters:p,scaleFactors:d,residuals:m,isLinear:f,parameterWarning:g,displayPrecision:y}=oq(l,a,i),h={policy:n,frame:r},b=W3(h,t,p),T=zo.NONE;u===Z&&(T=U9(t,i,b));let I;if(t.userData.isLogModeRegression&&(T===zo.LOGLIN||T===zo.LOGLOG)){let S=uu(t._logDifference,n,r,qD);if(S.isError)throw S;let C=uu(t._logLhs,n,r,qD);if(C.isError)throw C;({parameters:p,isLinear:f,parameterWarning:g,displayPrecision:y}=oq(l,S,i)),b=W3(h,t,p),m=tq(h,t._difference,p);let v=tq(h,t._logDifference,p);I=K3(t,C,b,v,t.userData.isLogModeRegression,T,u)}else I=K3(t,i,b,m,t.userData.isLogModeRegression,T,u);let E={isModelValid:!!b.uniqueRHSNumberList,shouldSuggestLogMode:T!==zo.NONE,isLinear:f,scaleFactors:d,displayPrecision:y,parameterWarning:g};return{concreteDifference:a,plannedOpts:E,statistics:I,residuals:m,model:b,parameters:p}}function sq(e,t,n){let{residualVariable:r,tableStatements:o}=e,{concreteDifference:i,plannedOpts:s,statistics:a,residuals:u,model:c,parameters:l}=n,p=i.valueType,d=q9(t,r,o,u);return t.userData.residualVariable=Mo(r),new O.OptimizedRegression(l,yt({valueType:p,value:u}),a,c.substituted,{...s,residualVariable:r,residualSuggestionId:d})}function L9(e){return!e.startsWith(\"dcgcolumnstmt\")}function aq(e,t,n){function r(a){var u;return!n.has(a)&&!((u=t.get(a))!=null&&u.some(L9))}if(e.userData&&e.userData.residualVariable){let a=ks(e.userData.residualVariable);if(r(a))return a}let o=e.getDependencies().filter(a=>a[0]!==\"_\"&&!a.startsWith(\"regressionparameter_\")&&!a.startsWith(\"idref_\")),i;for(let a of o){let u=a.match(/_(.*)/);if(u&&(i=\"e_\"+u[1],r(i)))return i}let s=1;for(;;){if(i=\"e_\"+s,r(i))return i;s++}}function W3({policy:e,frame:t},n,r){let o=n._rhs.getDependencies(),i,s;for(let p of o){if(r.hasOwnProperty(p))continue;let d=t[p];if(!d||d.type===\"Placeholder\")continue;d.type===\"Assignment\"&&(d=d._expression);let m=uu(d,e,t,Pf);if(!m.isError&&lr(m.valueType,Z)){if(i!==void 0){i=void 0,s=void 0;break}m.getDependencies().length===0&&(i=p,s=m)}}let a=qn(t);i!==void 0&&(a[i]=void 0);let u=uu(n._rhs,e,a,Pf),c=qn(a);for(let p of fe(r))c[p]=r[p];let l=uu(n._rhs,e,c,Pf);return{node:u,substituted:l,uniqueRHSNumberList:s}}function j3(e,t,n){let r=[];if(t||(t={}),n||(n={}),!e.every(o=>o in n||o in t))return e.map(o=>1);for(let o of e){let i=Mo(o),s=n[o];s&&isFinite(s.asValue())?r.push(+s.asValue()):t.hasOwnProperty(i)&&isFinite(+t[i])?r.push(+t[i]):r.push(1)}return r}function kD(e,t){switch(t){case Z:return e;case Ye:return function(...r){let o=e.apply(void 0,r);return F9(o)};default:throw V(\"Regression with invalid value type.\")}}function J3(e,t){switch(t){case Z:return e;case Ye:return V9(e);default:throw V(\"Regression with invalid value type.\")}}function F9(e){let t=[];for(let[n,r]of e)t.push(n,r);return t}function V9(e){let t=[];for(let[n,r]of e)t.push(n,r);return t}function Q3(e,t){let n=t.getDependencies(),r=t.getCompiledFunction(n).fn,o=t.valueType,i=kD(r,o);if(n.length){let s=t.findLinearSubset(n),a=s.every(c=>c),u=[];for(let c of n){let l=t.takeDerivative(c).getCompiledFunction(n).fn;u.push(kD(l,o))}if(a){let c=n.map(()=>Ie(0,1)),l=t.interpretWithParameters(c),p=J3(l,o),d=[];for(let y of n){let h=t.takeDerivative(y).interpretWithParameters(c);d.push(J3(h,o))}let m=AD(p,d);if(m){let y=t.interpretWithParameters(m);return{solution:m,scaleFactors:wD(d),residuals:y,MSE:jI(y,o),isLinear:a}}let{solution:f,MSE:g}=OD(i,LD(i,u));return{solution:f,scaleFactors:wD(d),residuals:r.apply(void 0,f),MSE:nq(g,o),isLinear:a}}else{let c=[];for(let m of n)c.push(t.boundDomain(m));let l={linearSubset:s,bounds:c,preferredInitialGuess:e},{solution:p,MSE:d}=OD(i,U3(i,u,l));return{solution:p,residuals:r.apply(void 0,p),MSE:nq(d,o),isLinear:a}}}else return{solution:[],residuals:t.interpretWithParameters([]),MSE:uq(r,[],o),isLinear:!0}}function UD(e,t){let n={},r=t.getDependencies();for(let o=0;o<r.length;o++){let i=new O.Constant(e[o]);n[r[o]]=i}return n}function K3(e,t,n,r,o,i,s){let a=jI(r,s);if(!isFinite(a))throw Nv();if(t.getDependencies().length>0)return{RMSE:Math.sqrt(a)};let u=z9(t.asValue(),t.valueType);if(t.getDependencies().length||!isFinite(u)||u<=0||!e.isLhsSimple)return{RMSE:Math.sqrt(a)};{let c=1-a/u,l=B9(t,n,o,i,a);return l!==void 0?{r:l,rsquared:l*l}:{Rsquared:c}}}function eq(e){if(!$s(e))return NaN;let t={valueType:e.valueType,value:e.asCompilerValue()},{value:n,valueType:r}=t;switch(r){case x:return n;case N:return F(n[1])===0?n[0]:NaN;default:return NaN}}function B9(e,t,n,r,o){if(!t.uniqueRHSNumberList)return;let i=[],s=[],a=n&&(r===zo.LINLOG||r===zo.LOGLOG);Xo.eachArgs([t.uniqueRHSNumberList,e],l=>{let p=eq(l[0]),d=eq(l[1]);i.push(a?Math.log(F(p)):p),s.push(d)});let u=sb(i.map(F),s.map(F));if(!isFinite(u))return;let c=G9(i,s);if(Xi(c.MSE,o,8))return u}function G9(e,t){let n=t,r=[e.map(a=>Oi(a)),e.map(()=>Ie(-1,1))],o=AD(n,r);if(o){let[a,u]=o,c=[];for(let l=0;l<t.length;l++)c.push(es(t[l],Ai(oo(a,e[l]),u)));return{solution:o,MSE:jI(c,Z)}}function i(a,u){let c=[];for(let l=0;l<e.length;l++)c.push(F(t[l])-(a*F(e[l])+u));return c}return LD(i,[function(){return e.map(a=>-F(a))},function(){return e.map(()=>-1)}])}function q9(e,t,n,r){var a,u;let o=e._rhs.getDependencies(),i;(a=e.tableRegressionData)!=null&&a.tableId&&(i=(u=e.tableRegressionData)==null?void 0:u.tableId);for(let c in n){let l=n[c];if(l.columns.length===0)continue;let p=l.columns[0];i===void 0&&eu(p)&&Ka(p.header)&&o.includes(p.header._symbol)&&(i=c);for(let d=1;d<l.columns.length;d++)if(l.columns[d].getDependencies().includes(t))return}if(!r.some(c=>Array.isArray(c)&&F(c[1])!==0))return i}function zD(e,t){let n=e.length,r=e[0],o=t[0],i=e[n-1],s=t[n-1];if(!isFinite(r)||!isFinite(i)||!isFinite(o)||!isFinite(s)||s-o===0)return!1;let a=i-r;if(a===0)return!1;for(let u=1;u<n-1;u++){let c=e[u],l=t[u],p=(s*(c-r)+o*(i-c))/a;if(!Xi(l,p,5))return!1}return!0}var zo={NONE:0,LOGLIN:1,LOGLOG:2,LINLOG:3};function U9(e,t,n){if(!e.isLhsSimple||!n.uniqueRHSNumberList||ae(t.valueType,N))return zo.NONE;let r=n.substituted;if(r.isError||r.valueType!==x)return zo.NONE;let o=r.getDependencies();if(o.length!==1||n.node.type===\"IRExpression\"&&isFinite(n.node.polynomialOrder(o[0])))return zo.NONE;let i=r.getCompiledFunction(o).fn,s=n.uniqueRHSNumberList;if(r.valueType!==x)return zo.NONE;let a=s.mapElements(d=>+d.asValue());if(a.length<3)return zo.NONE;a.sort((d,m)=>d-m);let u=a.map(i),c=u.map(Math.log),l=a.map(Math.log),p=!0;return Xo.wrap(t).eachElement(d=>{isFinite(Math.log(+d.asValue()))||(p=!1)}),zD(a,c)&&p?zo.LOGLIN:zD(l,c)&&p?zo.LOGLOG:zD(l,u)?zo.LINLOG:zo.NONE}function tq({policy:e,frame:t},n,r){let o=qn(t);for(let a of fe(r))o[a]=r[a];let i=tf({policy:e,frame:o,wrapInList:!0},n),s=i.getError();if(s)throw s;return i.asCompilerValue()}function jI(e,t){switch(t){case Z:{let n=0;for(let r of e){let o=F(r);n+=o*o}return n/e.length}case Ye:{let n=0;for(let[r,o]of e){let i=F(r);n+=i*i;let s=F(o);n+=s*s}return n/e.length}default:throw V(\"Regression with invalid value type.\")}}function z9(e,t){switch(t){case x:case N:return 0;case Z:return iy(e);case Ye:{let n=e,r=0,o=0;for(let[u,c]of n)r+=u,o+=c;let i=r/n.length,s=o/n.length,a=0;for(let[u,c]of n){let l=F(u)-i;a+=l*l;let p=F(c)-s;a+=p*p}return a/n.length}default:throw V(\"Regression with invalid value type.\")}}function uq(e,t,n){let r=e.apply(void 0,t);return jI(r,n)}function nq(e,t){switch(t){case Z:return e;case Ye:return e*Math.SQRT2;default:throw V(\"Regression with invalid value type.\")}}function rq(e,t,n,r){let o=5;if(!r)return o;let i=t.apply(void 0,e);for(let s=4;s<15;s++){let a=e.map(l=>parseFloat(l.toPrecision(s))),u=t.apply(void 0,a),c=0;for(let l=0;l<i.length;l++){let p=Math.abs(i[l]-u[l]);p>c&&(c=p)}if(c<n){o=s;break}}return o}function k9(e){let t=0;if(W(e==null?void 0:e.valueType)){let n=e.asValue(),r=ob(n),o=rb(n);t=(o<0&&0<r?r-o:Math.max(Math.abs(o),Math.abs(r)))/500}return t}function oq(e,t,n){let r,o,i=t._chunk;i&&(o=Y3(i));let s=W(n==null?void 0:n.valueType),a=k9(n);if(!o||o.length===0){t=t.deriveRegressionRestrictions(),r=Q3(e,t);let I=t.getCompiledFunction(t.getDependencies()).fn,E=rq(r.solution.map(S=>F(S)),I,a,s);return{parameters:UD(r.solution,t),scaleFactors:r.scaleFactors?UD(r.scaleFactors,t):void 0,displayPrecision:E,residuals:r.residuals,isLinear:r.isLinear,parameterWarning:!1}}let u=t.getDependencies(),c=t.valueType,l=t.getCompiledFunction(u).fn,p=kD(l,c),d=1/0,m={},f,g=!1,y=1/0,h=5;for(let I of o){let E=new _n(I.chunk);if(E=E.deriveRegressionRestrictions(),r=Q3(I.forwardParameterMap(e),E),r.MSE<d){let S=I.reverseParameterMap(r.solution.map(v=>F(v))),C=uq(l,S,c);if(m&&(!isFinite(C)||C>=d)){isFinite(C)||(g=!0,r.MSE<y&&(y=r.MSE));continue}d=r.MSE,m=UD(S,t),f=p.apply(void 0,S),h=rq(S,p,a,s)}}let b=Object.keys(m).length,T=s?n.asValue().length:1;return{parameters:m,displayPrecision:h,residuals:f,isLinear:!1,parameterWarning:g&&y<d&&T>b}}var j=class{constructor(t,n,r,o){this.policy=t,this.rawTree=r,this.concreteTree=o,this.evaluationState=CD(t,n,r,o)}graph(t,n){return $2(this.rawTree,this.policy,this.concreteTree,t,n)}getGraphMode(){return this.policy.graphingEnabled()?this.rawTree.getGraphMode(this.policy,this.concreteTree):10}getGraphInfo(){return Io(this.rawTree,this.policy,this.concreteTree,this.rawTree.userData,this.rawTree.metaData)}shouldIntersect(){if(!this.evaluationState.is_graphable||!this.rawTree.userData.shouldGraph||!Is.pointsOfInterest)return!1;let t=this.getGraphMode();return t===1||t===2}};function Sf(e,t,n,r){switch(e.type){case\"Assignment\":return W9(e,t,n,r);case\"Equation\":case\"CallAssignment\":case\"Comparator['<']\":case\"Comparator['>']\":case\"Comparator['<=']\":case\"Comparator['>=']\":case\"Comparator['=']\":return JI(e,t,n);case\"ComparatorChain\":return ij(e,t,n);case\"DoubleInequality\":return oj(e,t,n);case\"FunctionCall\":case\"SeededFunctionCall\":return Y9(e,t,n,r);case\"FunctionDefinition\":return X9(e,t,n);case\"Identifier\":case\"Ans\":return $9(e,t,n,r);case\"Image\":return uj(e,t,n,r);case\"MovablePoint\":case\"ParenSeq\":return sj(e,t,n,r);case\"RecursiveFunctionBaseCase\":return j9(e,t,n);case\"Slider\":return cj(e,t,n);case\"Table\":return aj(e,t,n);case\"TableColumn\":return K9(e,t,n);case\"Ticker\":return ej(e,t,n);case\"Viewport\":return tj(e,t,n);case\"AssignmentImport\":return lj(e,t,n);case\"Stats\":return rj(e,t,n);case\"Histogram\":case\"DotPlot\":case\"BoxPlot\":return nj(e,t,n);case\"Placeholder\":throw new Error(\"Unexpected placeholder\");default:return e instanceof X?Z9(e,t,n,r):H9(e,t,n,r)}}function H9(e,t,n,r){return Si(e)?$i(t,n,e):new j(t,n,e,pe(e,t,n))}function QI(e,t,n,r){var u;if(r.isError)return new j(e,t,n,r);if(!e.areAllScalesLinear()&&!pp(r.valueType)){let c=Hd(se(r.valueType));return c.setCursorContext(r.getCursorContext()),new j(e,t,n,c)}let o=wa(e,r),i=r.getDependencies(),s,a=ae(r.valueType,N)&&o.some(c=>e.validParametricVariable(c));switch(i.length>0&&!a&&(r=r.coerceToNumericIfPossibleWithTolerance()),r.valueType){case wn:case Mi:case He:{s=r;break}case fn:case ko:case he:case Er:case Te:case _i:case ue:case Co:case Ee:case Ri:case Ae:case Eo:case Pe:case Di:case Ne:case Ur:case Ce:case zr:case we:case sa:case St:case _e:case wr:case zt:case Wi:case ke:case ji:case dr:case ni:case kr:case aa:case pr:case _u:case Nt:case Ru:case Jt:case Du:case Ut:case Nu:case sn:case Fu:case on:case Ou:case Zt:case Au:case cn:case wu:case Qt:case Lu:case yn:case gn:case Gu:case qu:case Hn:case Bu:case kn:case Vu:!e.is3dPolicy()&&(r.valueType===zt||r.valueType===Wi)?s=ul(zt):!e.is3dPolicy()&&(r.valueType===ke||r.valueType===ji)?s=ul(ke):o.length?s=En(n.getSliderVariables(e,r)).setDependencies(o):s=r;break;case D:case G:case Yt:case lo:case N:case Ye:if(!e.is3dPolicy()&&(r.valueType===G||r.valueType===lo))r.isTypedConstant&&zI(r.valueType,n,e)?s=r:s=ul(G);else if(o.length)if(e.validParametricVariables(o))s=r;else{let c=n.getSliderVariables(e,r);s=En(c).setDependencies(c)}else s=r;break;case Ji:case Qi:case Gs:case Us:case vo:case qs:case Ba:case Ua:case Ga:case za:case ua:case qa:{!e.is3dPolicy()&&(r.valueType===vo||r.valueType===ua)?s=ul(vo):o.length===0?s=r:s=En(n.getSliderVariables(e,r)).setDependencies(o);break}case x:case Z:o.length===0?s=r:o.length<=(e.is3dPolicy()?2:1)?e.is3dPolicy()&&i.length>o.length&&!e.validImplicitVariables(i)?s=En(n.getSliderVariables(e,r)).setDependencies(i):e.validExpressionVariables(o)?s=r:(u=n.userData)!=null&&u.disallowAssignment?s=En(n.getSliderVariables(e,r)).setDependencies(i):s=kb(e.implicitDependency(o)).setDependencies(o):e.validImplicitVariables(o)?s=kb().setDependencies(o):s=En(n.getSliderVariables(e,r)).setDependencies(i);break;default:s=V(`Programming error: unexpected value type ${r.valueType}`)}return go(s)&&s.setCursorContext(r.getCursorContext()),s=gf(e,n,s),new j(e,t,n,s)}function pq(e){return e._symbol===\"chisqdist\"?new O.FunctionCall(\"pdf\",[e,new O.Multiply([new O.Identifier(\"x\"),new O.Restriction([new O[\"Comparator['>=']\"]([new O.Identifier(\"x\"),new O.Constant(0)])])])]):new O.FunctionCall(\"pdf\",[e,new O.Identifier(\"x\")])}function $9(e,t,n,r){if(e._symbol===Wr){let s=HD(e,t,n,pe(e,t,n),r);if(s)return new j(t,n,e,s)}let o=pe(e,t,n,{coerceToNumber:\"all-except-complex\"}),i=QI(t,n,e,o);return Si(e)&&!$D(i)?$i(t,n,e):i}function Y9(e,t,n,r){let o;Xg[e._symbol]&&Jp(n,e).length===0&&!t.is3dPolicy()?o=pe(pq(e),t,n):o=pe(e,t,n);let i=QI(t,n,e,o);if(Si(e)&&!$D(i))return $i(t,n,e);let s=e.getMoveStrategy(t,n,o,r);if(s){let a=Zg(e,s),u=o.asCompilerValue(),c=[new O.Constant(u[0]),new O.Constant(u[1])];return o=KI(o,fD(s)?new Qu(c,s,a):new ou(c,s,a)),new j(t,n,e,o)}return i}function HD(e,t,n,r,o,i){if(r.valueType!==N)return;let s=e.getMoveStrategy(t,n,r,o);if(!s)return;let a=Zg(i!=null?i:e,s),u=r.asCompilerValue(),c=KI(r,new O.MovableComplexNumber([new O.Constant(u[0]),new O.Constant(u[1])],s,a));return c.metaData=e.metaData,c}function Z9(e,t,n,r){let o=QI(t,n,e,pe(e,t,n));if(Si(e)&&!$D(o))return $i(t,n,e);let i=HD(e,t,n,o.concreteTree,r);return i?new j(t,n,e,i):o}function X9(e,t,n){var u;if(Si(e))return $i(t,n,e);if(ct[e._symbol])return JI(e.asEquation(),t,n);let r=e._symbol.split(\"_\")[0];if(((u=ct[r])==null?void 0:u.type)===\"Placeholder\")return new j(t,n,e,Zd(e._symbol,r));let o=pe(e,t,n);if(o instanceof O.Error&&!o.blocksExport&&e._argSymbols.length===1){let c=qn(n);c[e._argSymbols[0]]=new Mn(\"identityTransformation\");let l=pe(e._expression,t,c);if(l instanceof _n&&ae(l.valueType,we))return new j(t,n,e,l)}if(t.is3dPolicy()&&t.assignmentForbidden(e._symbol))return new j(t,n,e,Jb(e._symbol));if(o.isError)return new j(t,n,e,o);let i=e._argSymbols,s=o.getDependencies();s.length>0&&(o=o.coerceToNumericIfPossibleWithTolerance());let a=s.filter(c=>i.indexOf(c)===-1);if(t.unplottablePolarFunction(e._symbol,s))return new j(t,n,e,xv());if(a.some(c=>t.assignmentForbidden(c)))return new j(t,n,e,Ey(a,e._symbol,i).setDependencies(s));if(a.length){let c=e.getSliderVariables(t,o);return new j(t,n,e,En(c).setDependencies(c))}return!t.areAllScalesLinear()&&!pp(o.valueType)?new j(t,n,e,Hd(se(o.valueType))):(o=gf(t,e,o),new j(t,n,e,o))}function W9(e,t,n,r){if(Si(e))return $i(t,n,e);let o=e._symbol;if(!t.validLHS(o))return new j(t,n,e,bv(o));if(ct.hasOwnProperty(o)||t.isComplexEnabled()&&o===Wr)return JI(e.asEquation(),t,n);let i;if(e._expression instanceof On&&Xg[e._expression._symbol]&&Jp(n,e).length===0&&!t.is3dPolicy())i=pe(pq(e._expression),t,n);else{let f=qn(n);f[o]=t.validSolvedVariable(o)?void 0:Rp(),i=pe(e,t,f)}if(i.isError)return new j(t,n,e,i);if(!t.areAllScalesLinear()&&!pp(i.valueType))return new j(t,n,e,Hd(se(i.valueType)));if(e.isEquation(t,i))return JI(e.asEquation(),t,n);let s=i.valueType===fn||i.valueType===ko;if(t.assignmentForbidden(o)&&s){let f=gv(o).allowExport().setDependencies([o]);return new j(t,n,e,f)}let a=i.getDependencies(),u=wa(t,i);if(!(e.getGraphMode(t,i)===5&&!t.assignmentForbidden(o))&&(a.length>0||t.graphMode(o,u,a)!==10)){let f=i._chunk,g=f.getInstruction(f.getReturnIndex());if(g.valueType===N&&De(g)&&F(g.value[1])!==0)return new j(t,n,e,Xd(\"=\"));i=i.coerceToNumericIfPossibleWithTolerance()}let c=u.includes(\"x\")||u.includes(\"y\"),l=u.includes(\"r\")||u.includes(\"theta\");if(o===\"r\"&&a.includes(\"phi\")){let f=u.includes(\"z\")?Bb():dv();return new j(t,n,e,f)}if(o===\"rho\"&&u.includes(\"z\")){let f=a.includes(\"phi\")?Bb():mv();return new j(t,n,e,f)}let p=e.getSliderVariables(t,i,a);if(t.tooManySliderVariables(a,p,s)||c&&l){let f=En(p).allowExport().setDependencies(p);return new j(t,n,e,f)}let d=HD(e._expression,t,n,i,r,e);if(d)return new j(t,n,e,d);let m=e.getMoveStrategy(t,n,i,r);if(m){let f=Zg(e,m),g=[i.slot(0),i.slot(1)];return i=KI(i,fD(m)?new Qu(g,m,f):new ou(g,m,f)),new j(t,n,e,i)}return i=gf(t,e,i),new j(t,n,e,i)}function j9(e,t,n){if(Si(e))return $i(t,n,e);if(!e.specifiedArg.valid)return new j(t,n,e,e.specifiedArg.error);let r=pe(e,t,n);if(r.isError)return new j(t,n,e,r);let o=e._argSymbols,i=r.getDependencies();if(t.is3dPolicy()&&t.assignmentForbidden(e._symbol))return new j(t,n,e,Jb(e._symbol));let s=i.filter(a=>o.indexOf(a)===-1);if(s.includes(e.specifiedArg.argSymbol))return new j(t,n,e,oC(e.specifiedArg.argSymbol));for(let a of s)if(t.assignmentForbidden(a))return new j(t,n,e,rC(a));if(s.length){let a=e.getSliderVariables(t,r);return new j(t,n,e,En(a).setDependencies(a))}return!t.areAllScalesLinear()&&!pp(r.valueType)?new j(t,n,e,Hd(se(r.valueType))):new j(t,n,e,r)}function cq(e,t,n){let r=pe(new Mn(n),e,t);if(go(r))return r;if(r.isTypedConstant){let o=Vr(r);if(o!==void 0)return o}return WC()}function J9(e){return e[1]!==0&&!isNaN(e[1])}function lq(e){return e.valueType===Ye&&e.value.some(J9)}function Q9(e,t,n){let[r,o]=n.variables,i=cq(e,t,r),s=cq(e,t,o);if(!(\"value\"in i))return i;if(!(\"value\"in s))return s;if(lq(i)||lq(s))return XC(se(N))}function dq(e,t,n,r){if(!t.isCustomRegressionSupported()&&!e.tableRegressionData)return sM();if(Si(e))return Yd(\"=\");let o={policy:t,frame:n,lastExportFrame:r};if(e.tableRegressionData){let i=Q9(t,n,e.tableRegressionData);if(i)return i}return iq(o,e)}function mq(e,t,n,r,o){if(o instanceof O.Error)return new j(t,n,e,o);let i=sq(r,e,o);if(i.model instanceof O.IRExpression&&(i.model=i.model.coerceToNumericIfPossibleWithTolerance()),e.tableRegressionData){let s=fe(i.parameters).filter(a=>!/^regressionparameter_/.test(a));if(s.length)return new j(t,n,e,En(s))}return new j(t,n,e,i)}function K9(e,t,n){return Si(e)?$i(t,n,e):new j(t,n,e,Ao(Zx,e,t,n))}function ej(e,t,n){return Si(e)?$i(t,n,e):new j(t,n,e,Ao(d0,e,t,n))}function tj(e,t,n){return new j(t,n,e,Ao(Kw,e,t,n))}function nj(e,t,n){if(Si(e))return $i(t,n,e);if(!t.areAllScalesLinear()){let i;switch(e.type){case\"BoxPlot\":i=sE();break;case\"DotPlot\":i=iE();break;case\"Histogram\":i=oE();break;default:throw new Error(`Unexpected node type ${e}`)}return new j(t,n,e,i)}let r=e.type===\"BoxPlot\"?Ao(f0,e,t,n):Ao(m0,e,t,n),o=r.getDependencies();return o.length?new j(t,n,e,En(e.getSliderVariables(t,r)).setDependencies(o)):new j(t,n,e,r)}function rj(e,t,n){if(Si(e))return $i(t,n,e);let r=Ao(y0,e,t,n),o=r.getDependencies();if(o.length)return new j(t,n,e,En(e.getSliderVariables(t,r)).setDependencies(o));let i=new j(t,n,e,r);return r.type!==\"Error\"&&(i.evaluationState.expression_type=A.STATS,i.evaluationState.stats_results=_S(r.args[0].asValue())),i}function JI(e,t,n){if(Si(e))return $i(t,n,e);if(e.getOperator()!==\"=\"&&!Is.plotInequalities)return new j(t,n,e,Gb());let o=D2({policy:t,frame:n},e);if(o.type===\"Error\")return new j(t,n,e,o);let i=wa(t,o);if(o instanceof O.SolvedEquation&&i.length){let s=i.concat(o._symbol);if(!t.validImplicitVariables(s))return new j(t,n,e,Rp().setDependencies(s))}return e.getGraphMode(t,o)===8&&!t.validImplicitVariables(i)?new j(t,n,e,Rp().setDependencies(i)):(o=gf(t,e,o),new j(t,n,e,o))}function oj(e,t,n){if(Si(e))return $i(t,n,e);if(!Is.plotInequalities)return new j(t,n,e,Gb());let r=Ao(l0,e,t,n);if(r.type===\"Error\")return new j(t,n,e,r);let o=r.getDependencies();return yo[e._operators[0]].direction!==yo[e._operators[1]].direction?new j(t,n,e,Ub()):t.validDoubleInequalitySymbol(r._symbol)?t.validDoubleInequalityVariables(o)?o.length>2?new j(t,n,e,En(e.getSliderVariables(t,r)).setDependencies(o)):r._expressions[0].getDependencies().indexOf(r._symbol)!==-1||r._expressions[1].getDependencies().indexOf(r._symbol)!==-1?new j(t,n,e,zb().setDependencies(o)):new j(t,n,e,r):new j(t,n,e,qb().setDependencies(o)):new j(t,n,e,qb().setDependencies(o))}function ij(e,t,n){let r=e.withArgsCoerced();if(Si(r))return $i(t,n,r);let o=pe(r,t,n);if(o.isError)return new j(t,n,r,o);let i=o.getDependencies();if(i.length)if(t.is3dPolicy()){if(!t.validImplicitVariables(i))return new j(t,n,r,(r.symbols.includes(\"=\")?Iv():Ev()).setDependencies(i));if(!(r.symbols.every(a=>a===\"<\"||a===\"<=\")||r.symbols.every(a=>a===\">\"||a===\">=\")||r.symbols.every(a=>a===\"=\")))return new j(t,n,r,Ub().setDependencies(i));if(r.symbols.some(a=>a===\"=\")&&!i.includes(\"z\"))return new j(t,n,r,vv().setDependencies(i));let s=pe(r.getRestrictedDifference(),t,n);return o.warning&&(s.warning=o.warning),s=gf(t,r,s),new j(t,n,r,s)}else return r.symbols.includes(\"=\")?new j(t,n,r,Mv()):r.symbols.length>2?new j(t,n,r,bC()):t.validDoubleInequalityVariables(i)?new j(t,n,r,zb()):new j(t,n,r,En(r.getSliderVariables(t,o)).setDependencies(i));return new j(t,n,r,o)}function sj(e,t,n,r){if(Si(e))return $i(t,n,e);let o=pe(e,t,n);if(o.isError)return new j(t,n,e,o);let i=e.getMoveStrategy(t,n,o,r);if(i){let s=Zg(e,i),a=o.asCompilerValue(),u=[new O.Constant(a[0]),new O.Constant(a[1])];return o=KI(o,new ou(u,i,s)),new j(t,n,e,o)}return QI(t,n,e,o)}function aj(e,t,n){let r=Ao(g0,e,t,n),o=new j(t,n,e,r);return o.evaluationState.is_graphable=!0,o}function uj(e,t,n,r){let o=Ao(p0,e,t,n);if(o.type===\"Error\"||o.radianAngle.type===\"Error\"||o.center.type===\"Error\"||o.width.type===\"Error\"||o.height.type===\"Error\"||o.opacity.type===\"Error\")return new j(t,n,e,o);let i=o.center.getDependencies(),s=o.radianAngle.getDependencies(),a=o.width.getDependencies(),u=o.height.getDependencies(),c=o.opacity.getDependencies();return i.length||s.length||a.length||u.length||c.length?new j(t,n,e,new Tm({center:i.length?En(s).setDependencies(i):o.center,radianAngle:s.length?En(s).setDependencies(s):o.radianAngle,width:a.length?En(a).setDependencies(a):o.width,height:u.length?En(u).setDependencies(u):o.height,opacity:c.length?En(c).setDependencies(c):o.opacity})):(o.moveStrategy=e.getMoveStrategy(t,n,o,r),new j(t,n,e,o))}function cj(e,t,n){if(Si(e))return $i(t,n,e);let r=Ao(kp,e,t,n),o=fq(r),i;if(o!=null&&o.missingVars.length){let s=IP(o.missingVars);i=new j(t,n,e,En(t.sliderVariables(s)).setDependencies(s).allowExport())}else i=new j(t,n,e,r);return yq(e,o,i.evaluationState),i}function fq(e){return e.type===\"IRExpression\"||e instanceof kd?e.sliderInfo:void 0}function yq(e,t,n){if(Is.sliders){n.assignment=t==null?void 0:t.exportedSymbol,n.slider_min_number=t==null?void 0:t.values.min,n.slider_max_number=t==null?void 0:t.values.max,n.slider_step_number=t==null?void 0:t.values.step,n.slider_min_valid=t==null?void 0:t.valids.min,n.slider_max_valid=t==null?void 0:t.valids.max,n.slider_step_valid=t==null?void 0:t.valids.step;let r=n.slider_min_valid&&n.slider_max_valid&&n.slider_step_valid;n.is_slider=!0,n.raw_slider_latex=e.getInputString(),n.is_slidable=r,n.is_animatable=n.is_slidable&&!n.is_graphable,t!=null&&t.errMsg&&(n.error=t==null?void 0:t.errMsg.getError())}delete n.is_evaluable}function lj(e,t,n){let r=Ao(eL,e,t,n),o=new j(t,n,e,r);return r.type===\"ConcreteAssignmentImport\"&&r.resolvedRawNode===e.defaultDefinition&&r.resolvedRawNode.type===\"Slider\"&&yq(r.resolvedRawNode,fq(r.concrete),o.evaluationState),o}function Si(e){return e.userData&&\"latex\"in e.userData&&ma(e.userData.latex).slice(-1)===\"=\"}function $i(e,t,n){return new j(e,t,n,Yd(\"=\"))}function $D(e){return e.concreteTree.type===\"IRExpression\"&&$s(e.concreteTree)&&(e.concreteTree.valueType===x||e.concreteTree.valueType===N)}function KI(e,t){return t.warning=e.warning,t}So();So();function eP({moduleContexts:e,frameContext:t,dependencyOrder:n,moduleID:r,id:o,raw:i,concrete:s}){let a=e.getPolicyContext(r).policy,u=t.getFrame(r);if(Bi(i)){let c=u;if(s.type===\"Error\")return[];if(!(s instanceof Rm))throw V(`Expected optimized regression but got ${s.type}.`);let l=[];for(let p of fe(s.parameters))a.assignmentForbidden(p)||(l.push(p),c[p]=c[p]?Cy(p):new Cl(p,s));return a.assignmentForbidden(s.residualVariable)?[]:(c[s.residualVariable]=s.residuals,l.push(s.residualVariable),l)}else{let c=[],l;yw(i)?l=Dp(r,i.getLegalExports(a)):l=n.assignmentMaps.resolvedExports[o]||[];for(let{frameID:p,symbol:d}of l){let m=t.getFrame(p);if(m.hasOwnProperty(d))continue;let f;eu(i)?i.isFreeVariable(m)?f=s:f=s.type===\"Error\"&&s.blocksExport?s:i.header:f=s.type===\"Error\"&&s.blocksExport?s:i,m[d]=f,p===r&&c.push(d)}return c}}function gq(e,t,n,r,o){try{return pj(e,t,n,r,o)}catch(i){if(!(i instanceof M))throw i;let s=[];for(let a of fe(o))s.push({id:a,stmtAnalysis:new j(e.getPolicyContext(r).policy,t.getFrame(r),o[a],i)});return s}}function pj(e,t,n,r,o){let i=e.getPolicyContext(r).policy;if(!i.graphingEnabled())throw new Error(\"Programming Error: expected graphing policy for recursive function\");let s=t.getFrame(r),a={};for(let m of fe(o))a[o[m]._symbol]=o[m];let u=new YD(a),c={},l={definitions:c,baseCases:u.getBaseCases()};for(let m of fe(o)){let f=o[m];dj(u,f,l)}for(let{id:m,baseCase:f}of u.getBaseCaseExports()){let g=Sf(f,i,s,{});for(let y of f.getLegalExports(i))delete s[y];eP({moduleContexts:e,frameContext:t,dependencyOrder:n,moduleID:r,id:m,raw:g.rawTree,concrete:g.concreteTree})}let p=qn(s);for(let m of fe(c))p[m]=c[m];let d=[];for(let m of fe(o)){let f=o[m],g=f._symbol,y=c[g];y.userData=f.userData,y.metaData=f.metaData,y instanceof M?d.push({id:m,stmtAnalysis:new j(i,s,f,y)}):d.push({id:m,stmtAnalysis:Sf(y,i,p,{})})}return d}var YD=class{constructor(t){this.baseCases={};this.baseCaseExports=[];this.analyzedFunctions={};this.recursiveFunctionGroup=t;for(let n in t)this.baseCases[n]=[];for(let n in this.recursiveFunctionGroup){let o=this.recursiveFunctionGroup[n].userData.id;if(!o)throw new Error(`Programming Error: FunctionDefinition ${n} missing userData.id.`);this.analyzeRecursiveFunctionDefinition(o,this.recursiveFunctionGroup[n])}}analyzeRecursiveFunctionDefinition(t,n){let r;for(let o of n.getExternalBaseCases())this.addBaseCase(o);if(n._expression instanceof No){r=n._expression;do{let o=r.args[0],i=r.args[1];if(this.recursiveParameterIndex!==void 0&&o instanceof Qa){let s=n._argSymbols[this.recursiveParameterIndex],a=o.args.findIndex(d=>d instanceof $e&&d._symbol===s);if(a===-1)break;let u=o.args[1-a];if(!(u instanceof $n))break;let c=u.asValue(),l=n._argSymbols.filter((d,m)=>m!==this.recursiveParameterIndex).map(d=>new Mn(d)),p=new Do(n._symbol,l,{valid:!0,argIndex:this.recursiveParameterIndex,argValue:c,functionDefArgSymbols:n._argSymbols,argSymbol:n._argSymbols[this.recursiveParameterIndex]},i,i);this.baseCaseExports.push({id:t,baseCase:p}),this.addBaseCase(p)}else break;r=r.args[2]}while(r instanceof No)}else if(n._expression instanceof Ju){let o=[];for(let i of n._expression._assignments){let s=Do.fromCallAssignment(this.recursiveFunctionGroup,i);if((s==null?void 0:s.specifiedArg.valid)===!1)throw s.specifiedArg.error;s&&n._symbol===s._symbol?(this.baseCaseExports.push({id:t,baseCase:s}),this.addBaseCase(s)):o.push(i)}o.length>0?r=new Ju(n._expression._body,o):r=n._expression._body}else r=n._expression;this.analyzedFunctions[n._symbol]={recursiveExpression:r}}addBaseCase(t){this.baseCases[t._symbol].push(t)}getBaseCases(){return this.baseCases}getBaseCaseExports(){return this.baseCaseExports}getFunctionAnalysis(t){return this.analyzedFunctions[t]}};function dj(e,t,n){let r=e.getFunctionAnalysis(t._symbol);if(!r){n.definitions[t._symbol]=t;return}let o=new Fr(new Mn(t._symbol),t._argSymbols.map(i=>new Mn(i)),r.recursiveExpression,n);o.setExternalBaseCases(t.getExternalBaseCases()),n.definitions[t._symbol]=o}function ZD(e,t,n){switch(e.type){case\"ParenSeq\":case\"MovablePoint\":return new j(t,n,e,aM());case\"Regression\":return new j(t,n,e,iM());case\"DoubleInequality\":case\"ComparatorChain\":case\"Comparator['<']\":case\"Comparator['>']\":case\"Comparator['<=']\":case\"Comparator['>=']\":case\"Comparator['=']\":return new j(t,n,e,oM());case\"Equation\":case\"CallAssignment\":return new j(t,n,e,Ny())}}function hq(e,t,n){let r=ZD(e,t,n);if(r)return r;if(e instanceof Fr){if(ct[e._symbol])return new j(t,n,e,Zd(e._symbol));let o=pe(e,t,n);if(o.isError)return new j(t,n,e,o);let i=e._argSymbols,s=o.getDependencies();if(s.indexOf(e._symbol)!==-1)return new j(t,n,e,_p([e._symbol],{suggestAlternativeFunctionName:!1}));let a=s.filter(u=>i.indexOf(u)===-1);return a.length?new j(t,n,e,Ey(a,e._symbol,i)):new j(t,n,e,o)}else if(e instanceof Bn){let o=e._symbol;if(ct[o])return new j(t,n,e,Zd(o));let i=qn(n);i[o]=Ny();let s=e.type===\"Slider\"?Ao(kp,e,t,i):pe(e,t,i);if(s.isError)return new j(t,n,e,s);let a=s.getDependencies();return e.isEquation(t,s)?new j(t,n,e,Ny()):a.length>0?new j(t,n,e,En(a)):new j(t,n,e,s)}else if(e instanceof X){let o=pe(e,t,n);if(o.isError)return new j(t,n,e,o);let i=o.getDependencies();return i.length>0?new j(t,n,e,En(i)):new j(t,n,e,o)}else{let o=Oc(e,t,n);return o.type===\"Error\"?new j(t,n,e,o):new j(t,n,e,V(`Unexpected node type ${e.type}`))}}function tP(e,t,n){let r=ZD(e,t,n);if(r)return r;switch(e.type){case\"FunctionDefinition\":return new j(t,n,e,rM());case\"Assignment\":case\"Slider\":return new j(t,n,e,nM())}if(e instanceof X){let i=pe(e,t,n);if(i.isError)return new j(t,n,e,i);let s=i.getDependencies();if(s.length>0){let a=s[0],u,c=ct[a];return c?u=c.type===\"Placeholder\"?Wa(a,t):Dy(a):u=eM(a),new j(t,n,e,u)}return new j(t,n,e,i)}let o=Oc(e,t,n);return o.type===\"Error\"?new j(t,n,e,o):new j(t,n,e,V(`Unexpected node type ${e.type}`))}function bq(e,t,n){return tP(e,t,n)}So();function Iq(e,t){let n=new Ec;for(let r of t.values()){let o=r.id,i=r.statement,s=r.moduleID,a=i.metaData,c={frameIds:xq(e.parentFrameMap,s),id:o},l=e.getPolicyContext(r.moduleID).policy;if(i.type===\"AssignmentImport\"){cd(n,c,i.getLegalExports(l));let p=xq(e.parentFrameMap,i.importFrom.frameID);cd(n,{frameIds:p,id:o},[i.importFrom.symbol]);continue}if(cd(n,c,i.getDependencies()),cd(n,c,i.getLegalExports(l)),Bi(i)&&i.userData&&i.userData.residualVariable&&cd(n,c,[ks(i.userData.residualVariable)]),Tq(n,c,a),Zu(i)&&i.columns)for(let p=0;p<i.columns.length;p++){let d=i.columns[p];if(Xu(d))throw V(\"Unexpected concrete column.\");!go(d)&&d.header&&d.header.metaData&&Tq(n,c,d.header.metaData)}}return n}function xq(e,t){let n=[];for(;;){n.push(t);let r=e.get(t);if(r===void 0)break;t=r}return n}function cd(e,t,n){let{id:r,frameIds:o}=t;for(let i of n)for(let s of o)e.getOrInsert(vn(s,i),[]).push(r)}function Tq(e,t,n){if(n.extraDepNodes)for(let r of n.extraDepNodes)r&&cd(e,t,r.getDependencies());n.clickHandler&&cd(e,t,n.clickHandler.getDependencies())}function ld(e,t,n,r,o){let i=new Lr,s={},a=[],u=[];for(let c of fe(r))r[c]&&(s[c]=!0,a.push(c));for(let c of o)i.add(c),u.push(c);for(;a.length||u.length;){for(;a.length;){let c=a.pop(),l=t.get(c);if(!l)continue;let p=e.getPolicyContext(l.moduleID).policy;for(let d of l.statement.getLegalExports(p)){let m=l.moduleID,f=vn(m,d);i.has(f)||(i.add(f),u.push(f))}}for(;u.length;){let c=u.pop(),l=n.get(c);if(l)for(let p of l)s[p]||(s[p]=!0,a.push(p))}}return{ids:s,symbols:i}}function Pq(e){var t;return(t=e.get(vn(Tr,\"globalRandomSeed\")))!=null?t:[]}var mj=100;function nP(e){let t=[];for(let n=0;n<e;n++)t[n]={x:[],y:[],intersects:[]};return t}function fj(e,t,n,r){return n===1&&r===1||n===2&&r===2?function(o){return t(o)-e(o)}:n===1&&r===2||n===2&&r===1?function(o){return o-t(e(o))}:!1}function Sq(e,t){t instanceof O.SolvedEquation?t=t._expression:t instanceof O.OptimizedRegression&&(t=t.model);let n=[],r=[];return t instanceof hm?Xo.eachArgs(t._expressions,o=>{n.push(o[0].getCompiledFunction()),r.push(o[0].isConstant&&o[1].isNaN()),n.push(o[1].getCompiledFunction()),r.push(o[1].isConstant&&o[1].isNaN())}):Xo.wrap(t).eachElement(o=>{n.push(o.getCompiledFunction()),r.push(o.isConstant&&o.isNaN())}),{functions:n,skipIntersecting:r}}function yj(e,t){let n=[];for(let r in e){if(!e.hasOwnProperty(r)||String(r)===String(t)||!e[r].shouldIntersect())continue;let o=e[r],i=Sq(o.policy,o.concreteTree);n.push({id:r,graphMode:o.getGraphMode(),functions:i.functions,skipIntersecting:i.skipIntersecting})}return n}function gj(e,t){e.intersects=Array(e.x.length);for(let n=0;n<e.x.length;n++)e.intersects[n]=t}function hj(e,t){if(t===1){let n=e.y;e.y=e.x,e.x=n}}function bj(e,t){Array.prototype.push.apply(e.x,t.x),Array.prototype.push.apply(e.y,t.y),e.intersects&&t.intersects&&Array.prototype.push.apply(e.intersects,t.intersects)}function xj(e,t,n){let r=UR(e,t),o=r.poi.zeros,i=r.poi.extrema,s=[],a=0,u=0;for(a=0;a<o.x.length;a++){for(;u<i.x.length&&i.x[u]<o.x[a];u++)Xi(i.y[u],0)&&s.push(i.x[u]);s.push(o.x[a])}for(;u<i.x.length;u++)Xi(i.y[u],0)&&s.push(i.x[u]);return{x:s,y:s.map(n)}}function Cq(e,t,n){let r=e[n],o=r.getGraphInfo(),i=r.getGraphMode(),s,a,u;try{s=Sq(r.policy,r.concreteTree),a=nP(s.functions.length),u=yj(e,n)}catch(l){return nP(0)}if(!u)return a;let c=0;for(let l=0;l<u.length;l++){let p=u[l];for(let d=0;d<s.functions.length;d++){if(s.skipIntersecting[d])continue;let m=s.functions[d].fn,f=nd(t,o,m);for(let g=0;g<p.functions.length;g++){if(u[l].skipIntersecting[g])continue;let y=p.functions[g].fn,h=fj(m,y,i,p.graphMode);if(!h)continue;let b;try{b=xj(h,f,m)}catch(T){return nP(0)}if(c+=b.x.length,c>mj)return nP(s.functions.length);gj(b,p.id),hj(b,i),bj(a[d],b)}}}return a}So();var Cf=class{constructor(t,n){this.moduleContexts=t;this.isRegressionFrame=n;this.frames=new Map;this.syncPolicyFramesAndFixPrototypes()}getFrame(t){return this._getFrame(t!=null?t:Tr)}getPolicyContextForFrame(t){return this.moduleContexts.getPolicyContextForFrame(t)}getOrCreateParentFrame(t){let n=this.moduleContexts.parentFrameMap.get(t);return n?this._getFrame(n):{}}_getFrame(t){let n=this.frames.get(t);if(n)return n;let r=this.getOrCreateParentFrame(t),o=qn(r);return this.moduleContexts.isRootModule(t)&&KA(o,t),JA(o,this),this.frames.set(t,o),o}syncPolicyFramesAndFixPrototypes(){for(let[t,n]of this.moduleContexts.policyContextEntries()){let r=pl(t),o=n.getPolicyFrame(this.isRegressionFrame);this.frames.set(r,o)}for(let[t,n]of this.moduleContexts.parentFrameMap)Object.setPrototypeOf(this._getFrame(t),this._getFrame(n))}markDependencyOrder(t){for(let n of this.moduleContexts.rootModules()){let r=this._getFrame(pl(n));WA(r,t)}}cloneFrameMapWithoutPrototypes(){let t=new Map;for(let[n,r]of this.frames){let o={};for(let i of fe(r))o[i]=r[i];t.set(n,o)}return t}deleteTableFrame(t){return t===void 0||!this.frames.has(t)?!1:(this.frames.delete(t),!0)}deleteFrame(t){this.frames.delete(t)}deleteName(t){let n=this.getFrame(t.frameID);n&&delete n[t.symbol]}resolveDefiningFrameID(t){let{frameID:n,symbol:r}=t;for(;;){let o=this.getFrame(n);if(!o)return;if(o.hasOwnProperty(r))return n;let i=this.moduleContexts.parentFrameMap.get(n);if(!i)return;n=i}}};function Eq(e,t){var a;let n={},r={},o={},i=[],s={};for(let u of e.values()){let c=u.statement,l=u.id;if(c instanceof tu){let p=c.tableFrameID;if(!p)throw new Error(`Programming error: missing tableFrameID on table column ${l}`);s[p]||(s[p]=[]),s[p].push(c)}}for(let u of e.values()){let c=u.statement,l=u.id;if(!(c.type===\"Construction\"&&!t.isGeometryEnabled())&&c.type!==\"Ticker\"&&c.type!==\"Viewport\")switch(c.type){case\"Error\":break;case\"Regression\":{o[l]=[],i.push(l);break}case\"TableColumn\":continue;default:{let p=c.getLegalExports(t);if(c.type===\"Table\"){let d=s[l]||[];for(let m of d)for(let f of m.getLegalExports(t))!f.startsWith(\"idref_\")&&!p.includes(f)&&p.push(f)}if(p){for(let m of p)c.tableFrameID!==void 0?r[m]=l:n[m]=l;let d=[];for(let m of c.getDependencies())d.push(m);o[l]=PP(d,c.getOptionalDependencies(),p)}break}}}for(let u of i){let c=(a=e.get(u))==null?void 0:a.statement;if(!c)continue;let l=ks(c.userData.residualVariable);l&&(r[l]=u);let p=c.getDependencies().slice(),d={},m;for(;m=p.pop();){if(d[m])continue;d[m]=!0;let f=n[m]||r[m];if(f){p.push(...o[f]),o[u].push(m);continue}r[m]=u}}return{exportMap:n,weakExportMap:r,dependencyMap:o}}function vq(e){if(e.length<2)return\"text\";let t=e.split(\"`\").length-1;return t<2?\"text\":t===2&&e[0]===\"`\"&&e[e.length-1]===\"`\"?\"latex\":\"mixed\"}function Mq(e){if(e.length===0)return[\"\"];let t=[],n=e.split(/(`)/),r=!1,o=\"\";for(let i=0;i<n.length;i++){let s=n[i];s.length&&(s===\"`\"?(o+=\"`\",r=!r,r||(t.push(o),o=\"\")):(o+=s,r||(t.push(o),o=\"\")))}return o.length&&t.push(o),t}function XD(e){return Mq(e).map(Tj)}function Tj(e){let n=\"\\\\$({\"+[\"[a-zA-Z][0-9]*\",\"[a-zA-Z]_[a-zA-Z0-9]+\",\"[a-zA-Z]_\\\\{[a-zA-Z0-9]+\\\\}\",\"\\\\\\\\[a-zA-Z]+\",\"\\\\\\\\[a-zA-Z]+_{[a-zA-Z0-9]+}\",\"\\\\\\\\[a-zA-Z]+_[a-zA-Z0-9]+\"].join(\"})|\\\\$({\")+\"})\",r=new RegExp(n,\"g\"),o=[],i=0,s=0,a;for(;a=r.exec(e);){s=a.index,s>i&&o.push(e.substr(i,s-i));let u=a[0],c=u.replace(/[{}\\$]/g,\"\").replace(/^([a-zA-Z])([0-9]+)$/,\"$1_$2\");o.push({symbol:c,str:u}),i=a.index+u.length}return i<e.length&&o.push(e.substr(i)),{raw:e,parts:o}}var _q={bigCutoff:1e7,digits:8};function Rq(e,t){let n=t?sl(e,_q):Ud(e,_q);return t?`{${n}}`:n}function Dq(e,t){let n={...jS,digits:8,scientificNotationDigits:3},r=t?uy(e,n):JS(e,n);return t?`{${r}}`:r}function WD(e,t,n,r){return e.map(o=>Ij(o,t,n,r)).join(\"\")}function Ij(e,t,n,r){var s,a,u,c;let o=[],i=vq(e.raw)===\"latex\";for(let l of e.parts)if(typeof l==\"string\")o.push(l);else{let p=pe(new O.Identifier(l.symbol),t,n,{coerceToNumber:\"all-except-complex\"});if(p.type===\"IRExpression\"){if(p.valueType===x&&p.getDependencies().length===0){let d=p.asValue();if(typeof d==\"number\"){o.push(Rq(d,i));continue}}else if(p.valueType===Z&&r<((s=p.length)!=null?s:0)&&p.getDependencies().length===0){let d=(a=p.elementAt)==null?void 0:a.call(p,r).asValue();if(typeof d==\"number\"){o.push(Rq(d,i));continue}}else if(p.valueType===N&&p.getDependencies().length===0){let d=Vr(p);if((d==null?void 0:d.valueType)===N){o.push(Dq(d.value,i));continue}}else if(p.valueType===Ye&&r<((u=p.length)!=null?u:0)&&p.getDependencies().length===0){let d=Vr((c=p.elementAt)==null?void 0:c.call(p,r));if((d==null?void 0:d.valueType)===N){o.push(Dq(d.value,i));continue}}}i?o.push(\"{?}\"):o.push(\"?\")}return o.join(\"\")}function Sj(e){let t=sl(e,{bigCutoff:1e9,smallCutoff:1e-6,digits:12});return t.indexOf(\"\\\\times\")===-1?t:t[0]===\"-\"?\"-\\\\left(\"+t.substring(1)+\"\\\\right)\":\"\\\\left(\"+t+\"\\\\right)\"}function Cj(e){switch(e){case\"exponential\":case\"power\":case\"logarithmic\":return!0;case\"cubic\":case\"linear\":case\"logistic\":case\"sinusoidal\":case\"quadratic\":case\"quartic\":return!1}}function Ej(e,t){let n=t.parameterValues||{},[r,o]=t.variables,i=a=>{if(n===\"canonical\")return a;let u=Mj(a),c=n&&n[u];return c!==void 0?Sj(c):u},s;switch(e){case\"linear\":{let[a,u]=[i(\"m\"),i(\"b\")];s=`${[`${a}${r}`,`${u}`].join(\"+\")}`;break}case\"quadratic\":{let[a,u,c]=[i(\"a\"),i(\"b\"),i(\"c\")];s=`${[`${a}${r}^2`,`${u}${r}`,`${c}`].join(\"+\")}`;break}case\"cubic\":{let[a,u,c,l]=[i(\"a\"),i(\"b\"),i(\"c\"),i(\"d\")];s=`${[`${a}${r}^3`,`${u}${r}^2`,`${c}${r}`,`${l}`].join(\"+\")}`;break}case\"quartic\":{let[a,u,c,l,p]=[i(\"a\"),i(\"b\"),i(\"c\"),i(\"d\"),i(\"f\")];s=`${[`${a}${r}^4`,`${u}${r}^3`,`${c}${r}^2`,`${l}${r}`,`${p}`].join(\"+\")}`;break}case\"exponential\":{let[a,u]=[i(\"a\"),i(\"b\")];s=`${a}\\\\cdot ${u}^{${r}}`;break}case\"logarithmic\":{let[a,u]=[i(\"a\"),i(\"b\")];s=`${a}+${u}\\\\cdot \\\\ln\\\\left(${r}\\\\right)`;break}case\"logistic\":{let[a,u,c]=[i(\"a\"),i(\"b\"),i(\"c\")];s=`\\\\frac{${a}}{1+e^{-\\\\left(${u}${r}+${c}\\\\right)}}`;break}case\"power\":{let[a,u]=[i(\"a\"),i(\"b\")];s=`${a}\\\\cdot ${r}^{${u}}`;break}case\"sinusoidal\":{let[a,u,c,l]=[i(\"a\"),i(\"b\"),i(\"c\"),i(\"d\")];s=`${a}\\\\cdot \\\\sin\\\\left(${u}${r}+${c}\\\\right)+${l}`;break}default:throw new Error(`Unknown regression type: ${e}`)}return`${o}${t.operator}${vj(s)}`}function vj(e){return e.replace(/\\+-/g,\"-\").replace(/--/g,\"\")}function Mj(e){return`\\\\regressionparameter_{${e}}`}var Nq=/\\\\regressionparameter_{([^}]+)}/g;function qEe(e){var n;return((n=e.match(Nq))!=null?n:[]).map(r=>r.replace(Nq,(o,i)=>i))}function Oq(e,t,n,r){let o=e.regression;if(!o)return;Cj(o.type)||(o.isLogMode=!1);let i=e.columns,{columnIds:s}=o,a=r.get(s.x),u=r.get(s.y);if(!(a&&u))return V(\"Missing columns for table regression\");let c=[{id:a.userData.id,isIdentifier:Ka(a.header),latex:i[a.columnIndex].latex},{id:u.userData.id,isIdentifier:Ka(u.header),latex:i[u.columnIndex].latex}],l=[c[0].isIdentifier?c[0].latex:`\\\\idref_{${c[0].id}}`,c[1].isIdentifier?c[1].latex:`\\\\idref_{${c[1].id}}`],p=Ej(o.type,{operator:\"~\",variables:l}),d=mi(p,n);if(go(d))return d;if(!Bi(d))return V(`Expected table regression to parse as Regression, but got ${d.type}`);let m=d;return m.tableRegressionData={tableId:t,columnInfo:c!=null?c:[],variables:l},m.metaData={extraDepNodes:[]},m.userData={id:o.id,color:o.color,lineStyle:o.lineStyle,isLogModeRegression:o.isLogMode,shouldGraph:!o.hidden,residualVariable:o.residualVariable},m}var Jl=typeof performance!=\"undefined\"?()=>performance.now():()=>Date.now();function Uq(){return{intersections:{},graphs:{}}}var{Constant:oP,Image:Oj,Construction:Aj}=O,dc=ra(\"**dcg_geo_construction_statement_id**\");function no(e,t){let n=mi(e,t);return n.isError||n instanceof X?n:fy()}function wj(e){let t=e.evaluationState.expression_type,n=e.rawTree.userData;return!n.clickableInfo||!n.clickableInfo.enabled?!1:mx(e.rawTree)?!0:Bl(e.getGraphMode())?!1:ZG(t)}function Dn(e,t){let n=\"id\"+e;for(let[r,o]of t||[])n+=\"::\"+r+o;return n}var Lj=new oP(Ie(0,1)),Fj=new oP(Ie(1,1)),Vj=new oP(NaN);function Yi(e,t){return e?e===\"0\"?Lj:e===\"1\"?Fj:no(e,t):Vj}function kc(e,t){if(e)return no(e,t)}function Bj(e){return e.slice(0,3)!==\"ans\"}function Gj(e){return e.slice(0,6)!==\"idref_\"}function wq(e,t,n){let{cycles:r,recursiveFunctionSymbols:o,assignmentMaps:i}=e;for(let s of r){let a=[...new Set(s.map(({symbol:u})=>u))].filter(Bj).filter(Gj).sort();for(let u of s){let{symbol:c,frameID:l}=u;if(n.getPolicyContextForFrame(l).recursion&&o.has(u))continue;let d=ev(a),m=t.getFrame(l);m[c]=d}}for(let s of i.multiplyDefined){let a=t.getFrame(s.frameID);a[s.symbol]=Cy(s.symbol)}}function eh(e){var t;return(t=e.statement.tableFrameID)!=null?t:e.moduleID}function Ql(e,t){return e.getFrame(eh(t))}function na(e,t){return e.getPolicyContext(t.moduleID).policy}var eN={coerceToNumber:\"all\"};function qj(e,t,n,r,o){let i={},s=!0,a=NaN,u,c=!1;if(n){let l=pe(n,e,t,eN);u=l.getDependencies().length===0?l.asValue():NaN,c=Array.isArray(u),a=c?u:+u;for(let p of l.getDependencies())i[p]=!0}if(c){for(let l of a)if(!isFinite(+l)){s=!1,a=NaN;break}}else isFinite(+a)?o!==void 0&&a>o&&(a=o):(s=!1,a=NaN);return n||(s=!0,r!==void 0&&(a=r)),{value:a,valid:s,missingVarsMap:i}}var th={lineWidth:{parseNode:\"lineWidth\",valueOutputProp:\"computedLineWidth\",formulaOutputProp:\"\",validOutputProp:\"line_width_valid\",default:e=>e.is3dPolicy()?1:2.5,transform:void 0,shouldEvaluate:void 0,getLatex:void 0,seed:\"lw\"},resolution:{parseNode:\"resolution\",valueOutputProp:\"computedResolution\",formulaOutputProp:\"\",validOutputProp:\"resolution_valid\",default:()=>{},transform:void 0,shouldEvaluate:void 0,getLatex:void 0,seed:\"re\"},lineOpacity:{parseNode:\"lineOpacity\",valueOutputProp:\"computedLineOpacity\",formulaOutputProp:\"\",validOutputProp:\"line_opacity_valid\",default:()=>1,transform:void 0,shouldEvaluate:void 0,getLatex:void 0,seed:\"lo\"},pointOpacity:{parseNode:\"pointOpacity\",valueOutputProp:\"computedPointOpacity\",formulaOutputProp:\"\",validOutputProp:\"point_opacity_valid\",default:()=>1,transform:void 0,shouldEvaluate:void 0,getLatex:void 0,seed:\"po\"},pointSize:{parseNode:\"pointSize\",valueOutputProp:\"computedPointSize\",formulaOutputProp:\"\",validOutputProp:\"point_size_valid\",default:e=>e.is3dProduct()?3:8,shouldEvaluate:void 0,transform:void 0,getLatex:void 0,seed:\"ps\"},movablePointSize:{parseNode:\"movablePointSize\",valueOutputProp:\"computedMovablePointSize\",formulaOutputProp:\"\",validOutputProp:\"movable_point_size_valid\",default:()=>8,shouldEvaluate:void 0,transform:void 0,getLatex:void 0,seed:\"ps\"},fillOpacity:{parseNode:\"fillOpacity\",valueOutputProp:\"computedFillOpacity\",formulaOutputProp:\"\",validOutputProp:\"fill_opacity_valid\",default:()=>.4,transform:void 0,shouldEvaluate:e=>{if(!e)return!1;let{expression_type:t,is_inequality:n}=e.evaluationState;return!!(t===A.POLYGON||t===A.PARAMETRIC||n)},getLatex:void 0,seed:\"fo\"},surfaceOpacity:{parseNode:\"surfaceOpacity\",valueOutputProp:\"computedSurfaceOpacity\",formulaOutputProp:\"\",validOutputProp:\"surface_opacity_valid\",default:()=>1,transform:void 0,shouldEvaluate:e=>{if(!e)return!1;let{expression_type:t}=e.evaluationState;return t===A.CURVE3D_xyz_t||t===A.SURFACE||t===A.SPHERE3D||t===A.SURFACE_AMBIGUOUS||t===A.SURFACE_CONSTANT_AMBIGUOUS||t===A.IMPLICIT_SURFACE||t===A.IMPLICIT_SURFACE_AMBIGUOUS||t===A.SURFACE_xyz_uv||t===A.SURFACE_z_r\\u03B8||t===A.SURFACE_r_\\u03B8z||t===A.SURFACE_r_\\u03B8\\u03C6||t===A.SURFACE_r_\\u03B8z_AMBIGUOUS||t===A.TRIANGLE3D},getLatex:void 0,seed:\"fo\"},labelSize:{parseNode:\"labelSize\",valueOutputProp:\"computedLabelSize\",formulaOutputProp:\"\",validOutputProp:\"label_size_valid\",transform:void 0,default:()=>1,shouldEvaluate:void 0,getLatex:void 0,seed:\"ls\"},labelAngle:{parseNode:\"labelAngle\",valueOutputProp:\"computedLabelAngle\",formulaOutputProp:\"label_angle_value\",validOutputProp:\"label_angle_valid\",default:()=>0,transform:e=>`-\\\\trigAngleMultiplier*(${e})`,shouldEvaluate:void 0,getLatex:void 0,seed:\"la\"},hypothesis:{getLatex:e=>\"inference\"in e&&e.inference.significance.show?e.inference.significance.hypothesis:void 0,parseNode:\"hypothesis\",valueOutputProp:\"computedHypothesis\",formulaOutputProp:\"hypothesis_value\",validOutputProp:\"hypothesis_valid\",transform:void 0,seed:\"hy\",default:(e,t)=>{let{rawTree:n,concreteTree:r}=t;return a3(n,r)},shouldEvaluate:e=>{var t,n;return Ni((n=(t=e==null?void 0:e.evaluationState)==null?void 0:t.typed_constant_value)==null?void 0:n.valueType)}},confidenceLevel:{getLatex:e=>\"inference\"in e&&e.inference.confidence.show?e.inference.confidence.confidenceLevel:void 0,parseNode:\"confidenceLevel\",valueOutputProp:\"computedConfidenceLevel\",formulaOutputProp:\"confidence_level_value\",validOutputProp:\"confidence_level_valid\",transform:void 0,seed:\"co\",default:()=>ow,shouldEvaluate:e=>{var t,n;return Ni((n=(t=e==null?void 0:e.evaluationState)==null?void 0:t.typed_constant_value)==null?void 0:n.valueType)}}};function Lq(e,t,n,r,o,i){let s=th[o],a=s.default&&s.default(n,i),u=[\"lineWidth\",\"pointSize\",\"movablePointSize\"].indexOf(o)>=0,c=qj(n,r,t[s.parseNode],a,u?1e4:void 0);t[s.valueOutputProp]=c.value,s.formulaOutputProp&&(e[s.formulaOutputProp]=c.value),e[s.validOutputProp]=c.valid,Uc(e,n,c.missingVarsMap)}function Uj(e,t,n,r){let o,i;if(Zu(e.rawTree)&&e.evaluationState.column_data&&e.rawTree.columns)for(let s=0;s<e.evaluationState.column_data.length;s++){o=e.evaluationState.column_data[s];let a=e.rawTree.columns[s];if(!go(a)){if(Xu(a))throw V(\"Unexpected concrete column.\");i=a.header.metaData,Lq(o,i,t,n,r,e)}}else o=e.evaluationState,i=e.rawTree.metaData,Lq(o,i,t,n,r,e)}function Fq(e){return ip(e[0],e[1],e[2]).formatHex()}function Vq(e,t,n,r,o){let i;if(e){let s=pe(e,r,o),a=s.getDependencies().length>0?void 0:s.asValue(),{valueType:u}=s;if(i=!!(a&&(u===fn||u===ko)),i){let c=s&&s.valueType===fn?Fq(a):a.map(Fq);t.colorLatexValue=c,n.color_latex_value=c}else delete t.colorLatexValue,delete n.color_latex_value}else i=!0;n.color_latex_valid=i}function zj(e,t,n){let r,o,i;if(Zu(e.rawTree)&&e.evaluationState.column_data&&e.rawTree.columns)for(let s=0;s<e.evaluationState.column_data.length;s++){r=e.evaluationState.column_data[s];let a=e.rawTree.columns[s];if(!go(a)){if(Xu(a))throw V(\"Unexpected concrete column.\");o=a.header.metaData,i=o.colorLatex,Vq(i,o,r,t,n)}}else r=e.evaluationState,o=e.rawTree.metaData,i=o.colorLatex,Vq(i,o,r,t,n)}function kj(e,t){if(e.concreteTree.valueType===fn&&e.concreteTree.getDependencies().length>0){let n=e.concreteTree._chunk;try{e.evaluationState.shader=Lo(n,t.maxSurfaceUniforms())}catch(r){e.evaluationState.error=r instanceof O.Error?r.getError():V(r).getError()}}}function Hj(e,t,n){let r=e.evaluationState,o=e.rawTree,i={},s=o.metaData.clickHandler;if(!s)return;let a=pe(s,t,n);!a.isError&&a.valueType!==St&&(a=by(se(a.valueType)));for(let c of a.getDependencies())t.validActionVariable(c)||(i[c]=!0);let u=Object.keys(i);u.length>0&&(a=En(u).setDependencies(a.getDependencies())),a.isError&&!ED(t,a)?r.click_handler={status:\"error\",error:a.getError()}:a.isEmptyAction?r.click_handler={status:\"empty\"}:r.click_handler={status:\"maybe-valid\"},Uc(r,t,i)}function $j(e,t,n){let r,o=e.evaluationState,i=e.rawTree,s,a;o.internal_domain_dependency?(r=o.internal_domain_dependency,r===\"u\"?(s=i.metaData.parametricDomain3DuMin,a=i.metaData.parametricDomain3DuMax):r===\"v\"?(s=i.metaData.parametricDomain3DvMin,a=i.metaData.parametricDomain3DvMax):(s=i.metaData.parametricDomainMin,a=i.metaData.parametricDomainMax)):o.expression_type===A.POLAR||jG(o.expression_type)?(s=i.metaData.polarDomainMin,a=i.metaData.polarDomainMax,r=\"theta\"):(s=i.metaData.parametricDomainMin,a=i.metaData.parametricDomainMax,r=\"t\");let u={},c=!!(s||a),l=Ns(t,n,s,u,0),p=NaN;a?p=Ns(t,n,a,u,NaN):o.expression_type===A.PARAMETRIC||o.expression_type===A.CURVE3D_xyz_t?p=1:o.expression_type===A.POLAR?p=Math.PI*12/+n.trigAngleMultiplier.asValue():(o.expression_type===A.SURFACE_r_\\u03B8z||o.expression_type===A.SURFACE_r_\\u03B8z_AMBIGUOUS||o.expression_type===A.SLICE_r\\u03B8z_at_z)&&(p=Math.PI*2/+n.trigAngleMultiplier.asValue());let d=JD(l,p,o);({min:l,max:p}=d),i.metaData.evaluatedDomainMin=l,i.metaData.evaluatedDomainMax=p,(o.expression_type===A.POLAR||o.expression_type===A.SURFACE_r_\\u03B8z||o.expression_type===A.SURFACE_r_\\u03B8z_AMBIGUOUS||o.expression_type===A.SLICE_r\\u03B8z_at_z)&&(i.metaData.isExplicitDomain=c),o.domains=[{variable:r,minNumber:l,maxNumber:p,minValid:d.minValid,maxValid:d.maxValid}],o.expression_type===A.PARAMETRIC&&delete u.t,o.expression_type===A.CURVE3D_xyz_t&&(delete u.t,delete u.u,delete u.v),Uc(o,t,u)}function Yj(e,t,n){let r=e.evaluationState,o=r.expression_type,i=e.rawTree,s,a,u,c,l={},p=0,d=1,m=0,f=1,g,y;XG(o)?(g=\"theta\",y=\"phi\",s=i.metaData.polarDomainMin,a=i.metaData.polarDomainMax,u=i.metaData.parametricDomain3DphiMin,c=i.metaData.parametricDomain3DphiMax,d=2*Math.PI/+n.trigAngleMultiplier.asValue(),f=Math.PI/+n.trigAngleMultiplier.asValue()):WG(o)?(g=\"r\",y=\"theta\",s=i.metaData.parametricDomain3DrMin,a=i.metaData.parametricDomain3DrMax,u=i.metaData.polarDomainMin,c=i.metaData.polarDomainMax,d=ro.xmax,f=2*Math.PI/+n.trigAngleMultiplier.asValue()):(g=\"u\",y=\"v\",s=i.metaData.parametricDomain3DuMin,a=i.metaData.parametricDomain3DuMax,u=i.metaData.parametricDomain3DvMin,c=i.metaData.parametricDomain3DvMax),p=Ns(t,n,s,l,p),d=Ns(t,n,a,l,d),m=Ns(t,n,u,l,m),f=Ns(t,n,c,l,f);let h=JD(p,d,r);({min:p,max:d}=h);let b=JD(m,f,r);({min:m,max:f}=b),i.metaData.evaluatedDomain3DMin1=p,i.metaData.evaluatedDomain3DMax1=d,i.metaData.evaluatedDomain3DMin2=m,i.metaData.evaluatedDomain3DMax2=f,r.domains=[{variable:g,minNumber:p,minValid:h.minValid,maxNumber:d,maxValid:h.maxValid},{variable:y,minNumber:m,minValid:b.minValid,maxNumber:f,maxValid:b.maxValid}],(r.expression_type===A.SURFACE_xyz_uv||r.expression_type===A.SLICE_xyz_uv)&&(delete l.u,delete l.v),Uc(r,t,l)}function Ns(e,t,n,r,o){if(n){let i=pe(n,e,t,eN);for(let s of i.getDependencies())r[s]=!0;return i.type===\"IRExpression\"&&i.isConstant?+i.asValue():NaN}else return o}function JD(e,t,n){let r=!0,o=!0;return isFinite(e)||(r=!1,e=NaN),isFinite(t)||(o=!1,t=NaN),r?o?e>t&&(r=!1,o=!1,n.error=lv().getError()):n.error=cv().getError():n.error=uv().getError(),{min:e,max:t,minValid:r,maxValid:o}}function Zj(e,t,n){let r=e.evaluationState,o=e.rawTree,i=o.metaData.vizAxisOffset,s=o.metaData.vizBreadth,a={},u=Ns(t,n,i,a,1),c=Ns(t,n,s,a,1),l=!0,p=!0;isFinite(u)||(l=!1,u=NaN),isFinite(c)||(p=!1,c=NaN),l?p||(r.error=yE().getError()):r.error=fE().getError(),o.metaData.evaluatedAxisOffset=u,o.metaData.evaluatedBreadth=c,r.viz_values={axisOffset:u,breadth:c},r.viz_valids={axisOffset:l,breadth:p},Uc(r,t,a)}function jD(e,t,n,r){if(e.type===\"Error\"||e.getDependencies().length||e.valueType!==St)return;let o=e.asValue();if(!o)return;function i(s){let a=r.get(s);if(a)return a;let u={};return r.set(s,u),u}if(o.updateRules)for(let[s,a]of ms(o.updateRules)){t.set(s,SD(a,s));let u=n.resolveDefiningFrameID(s);if(!u)throw new Error(\"Programming error: action updating undefined symbol.\");let c=i(u),l=n.getFrame(u);c[s.symbol]||(c[s.symbol]=l[s.symbol]),l[s.symbol]=new O.Assignment(s.symbol,yt(a))}}function Xj(e,t){if(e.type!==\"statement\"||t.type!==\"statement\"||ei(e.latexSelection,t.latexSelection))return!1;let n=Zi(e),r=Zi(t);return delete n.latexSelection,delete r.latexSelection,ei(n,r)}function Wj(e,t){if(!(e instanceof Fr))return!1;let n=t[e._symbol];return n?!!n.recursionInfo:!1}function ra(e){return e.toString()}function QD(e){return e?e:Tr}function jj(e,t){return\"moduleID\"in e&&e.moduleID?e.moduleID:zq(e,t)}function zq(e,t){return\"rootModuleId\"in e&&e.rootModuleId?QD(e.rootModuleId):t}var rP=class{constructor(t){this.inner=new KD(t)}processChangeSet(t){return this.inner.processChangeSet(t)}getCLSymbolMap(){return this.inner.getCLSymbolMap()}get mainFrameContext(){let t=this;return{get global(){return t.inner.getGlobalFrameForMathtools()}}}setDegreeMode(t){this.inner.processEvaluatorConfig({degreeMode:t})}setEvaluationMode(t){this.inner.processEvaluatorConfig({evaluationMode:t})}setGlobalRandomSeed(t){this.inner.processEvaluatorConfig({globalRandomSeed:t})}get statements(){return this.inner.getStatements()}get analysis(){return this.inner.analysis}getFullStatementMap(){return this.inner.getFullStatementMap()}getModuleContexts(){return this.inner.moduleContexts}addStatement(t){this.inner.addStatement(t,Tr)}updateAnalysis(){this.inner.updateAnalysis()}get evaluationMode(){return this.inner.moduleContexts.getPolicyContext(Tr).evaluationMode}get dirtyExportedSymbolRoots(){return this.inner.dirtyExportedSymbolRoots}get dirtyStatementRoots(){return this.inner.dirtyStatementRoots}get policy(){return this.inner.moduleContexts.getPolicyContext(Tr).policy}get use_degrees(){return this.inner.moduleContexts.getPolicyContext(Tr).use_degrees}get childIntersections(){return this.inner.childIntersections}processEvaluatorConfig(t){this.inner.processEvaluatorConfig(t)}setViewState(t){this.inner.processEvaluatorConfig({viewState:t})}removeStatement(t,n){this.inner.removeStatement(ra(t),n!=null?n:Uq())}markExportsDirty(t){this.inner.markExportsDirty(ra(t))}getFrame(){return this.inner.updateAnalysis(),this.inner.getGlobalFrameForMathtools()}getAnalysis(){return this.inner.getAnalysis()}getEvaluationState(t){return this.inner.getEvaluationState(ra(t))}buildSymbolToExpressionDirtyMap(){return this.inner.buildSymbolToIdDirtyMap()}getPolicy(){return this.inner.moduleContexts.getPolicyContext(Tr).policy}},KD=class{constructor(t){this.sendMessageForProgressUpdate=t;this.fullStatements=new Map;this.statementGraphIDs=new Map;this.analysis={};this.currentStatus={};this.currentLabel={};this.analysisNeedsPublishIds=new Set;this.needGraphingIds=new Set;this.selectionOnlyChangeIds=new Set;this.intersectId=void 0;this.dirtyExportedSymbolRoots=new Lr;this.dirtyStatementRoots={};this.markedRegressionDirty=!1;this.childIntersections=new ff;this.globalEventCount=0;this.moduleContexts=new GI;this.lastClockTickTime=void 0;this.moduleContexts.getOrCreatePolicyContext(Tr),this.invalidate()}getGlobalFrameForMathtools(){return this.mainFrameContext.getFrame(Tr)}getStatements(){let t={};for(let[n,r]of this.fullStatements)t[n]=r.statement;return t}_getStatement(t){var n;return(n=this.getFullStatement(t))==null?void 0:n.statement}_getOrigin(t){var n;return(n=this.getFullStatement(t))==null?void 0:n.origin}getFullStatementMap(){return this.fullStatements}getFullStatement(t){return this.fullStatements.get(t)}assertFullStatement(t){let n=this.getFullStatement(t);if(!n)throw V(`Programming Error: expected FullStatement for id ${t}`);return n}_deleteStatement(t){this.fullStatements.delete(t)}_allStatementIDs(){return[...this.fullStatements.keys()]}invalidate(){this._deleteStatement(dc);for(let t of this._allStatementIDs())this.markAsDirtyRoot(t);this.currentStatus={},this.analysis={},this.mainFrameContext=new Cf(this.moduleContexts,!1),this.lastMainFrameMap=this.mainFrameContext.cloneFrameMapWithoutPrototypes(),this.lastClockTickTime=void 0}invalidateGraphsOnly(){for(let t of this._allStatementIDs())this.markNeedsGraphing(t)}getCLSymbolMap(){return this.updateConstruction(),Eq(this.getFullStatementMap(),this.moduleContexts.getPolicyContext(Tr).policy)}processEvaluatorConfig(t){let n=[...this._configs(t)];if(t.removesRootModules)for(let i of fe(t.removesRootModules)){let s=i;this.moduleContexts.deleteModule(s),this.mainFrameContext.deleteFrame(s),this.mainFrameContext.deleteFrame(pl(s))}let r=!1,o=!1;for(let[i,s]of n){let u=this.moduleContexts.getOrCreatePolicyContext(i).processEvaluatorConfig(s);r||(r=u.invalidateAll),o||(o=u.invalidateGraphs),s.hasOwnProperty(\"globalRandomSeed\")&&this.dirtyExportedSymbolRoots.add(vn(i,\"globalRandomSeed\"))}this.moduleContexts.updateParentFrameMap(this.fullStatements),r?this.invalidate():o&&this.invalidateGraphsOnly()}*_configs(t){var o;yield[QD(t.defaultRootModuleId),t];let r=(o=t.rootModuleConfigs)!=null?o:{};if(t.defaultRootModuleId&&(r!=null&&r[t.defaultRootModuleId]))throw new Error(\"Programming error: defaultRootModuleId found on rootModuleConfigs.\");for(let i of fe(r)){let s=r[i];t.isCompleteState&&(s={...s,isCompleteState:!0}),yield[i,s]}}processChangeSet(t){let n=Jl(),r={cacheWrites:0,cacheReads:0,cacheHits:0,cacheMisses:0};$w(r);let o=Uq();if(t.isCompleteState&&this.clearState(o),t.hasOwnProperty(\"selectedIds\")){let d=t.selectedIds||{};if(this.intersectId===void 0||!d[this.intersectId]){let[m]=fe(d);this.intersectId=m}}this.processEvaluatorConfig(t);let i=Jl();this.processStatements(t,o);let s=Jl();r.processStatements=s-i,i=s;let a=this.updateAnalysis();s=Jl(),r.updateAnalysis=s-i,i=s;let u=this._publishAllStatuses();s=Jl(),r.publishAllStatuses=s-i,i=s,this._computeAllLabels(),s=Jl(),r.computeAllLabels=s-i,i=s,this._computeAriaDescriptions(),s=Jl(),r.computeAriaDescriptions=s-i,i=s,this._graphAllChanged(o),s=Jl(),r.graphAllChanges=s-i,r.updateIntersections=0;let c=this.processEvents(t.events);this.analysisNeedsPublishIds=new Set,this.needGraphingIds=new Set,this.selectionOnlyChangeIds=new Set,r.timeInWorker=s-n;let l={};for(let[d,m]of this.moduleContexts.policyContextEntries())m.getShouldSkipPlotting()||(l[d]=!0);let p=[];for(let d of fe(this.analysis)){let m=this.analysis[d];um(m.rawTree)&&p.push(d)}return{syncId:t.syncId,isCompleteState:t.isCompleteState,intersectionChanges:o.intersections,statusChanges:u,graphChanges:o.graphs,plottedModules:l,timingData:r,eventUpdates:c,dependencyOrder:gw(a),importStatementIds:p}}processStatements(t,n){if(t.removesRootModules){let r=new Set;for(let i of fe(t.removesRootModules))r.add(i);let o=[];for(let[i,s]of this.fullStatements)r.has(s.rootModuleId)&&o.push(i);for(let i of o)this.removeStatement(i,n)}if(t.removes)for(let r of fe(t.removes))this.removeStatement(r,n);if(t.statements)for(let r in t.statements){let o=t.statements[r];o===null||(o.id=ra(o.id),this.addStatement(o,QD(t.defaultRootModuleId)))}}_publishAllStatuses(){let t={},n=this.currentStatus;this.currentStatus={};for(let r of this.analysisNeedsPublishIds){if(!this.analysis.hasOwnProperty(r))continue;let o=this.analysis[r].evaluationState;ei(o,n[r])||(t[r]=o),this.currentStatus[r]=o}return t}_computeAllLabels(){for(let t of fe(this.currentLabel)){let n=this.getFullStatement(t);if(!n)continue;let r=Ql(this.mainFrameContext,n),o=n.statement,i=na(this.moduleContexts,n),s=Oc(o,i,r),a=1;(s.valueType===Yt||s.valueType===Ye||s.valueType===Er||s.valueType===wr||s.valueType===Ur||s.valueType===zr)&&(a=s.length);let u=[],c=this.currentLabel[t];if(_c(c))for(let l=0;l<a;l++)u.push(WD(c,i,r,l));ei(u,o.computedLabels)||(o.computedLabels=u,this.markNeedsGraphing(t))}}_computeAriaDescriptions(){for(let t of fe(this.analysis)){let n=this.getFullStatement(t);if(!n)continue;let r=this.analysis[t],o=r.evaluationState,s=r.rawTree.userData,a;if(s.description?a=s.description:s.label&&(a=s.label),a){o.computed_description=[];let u=1;r.concreteTree.isList?u=r.concreteTree.length:o.dimensions&&o.dimensions.x&&Array.isArray(o.dimensions.x)&&(u=o.dimensions.x.length);let c=Ql(this.mainFrameContext,n),l=na(this.moduleContexts,n);for(let p=0;p<u;p++)o.computed_description.push(WD(XD(a),l,c,p))}}}_graphAllChanged(t){var o;let n=!1,r=!1;for(let i of this.needGraphingIds){let s=this.getFullStatement(i);if(!s)continue;let a=this.moduleContexts.getPolicyContext(s.rootModuleId).viewState;if(!a||!$G(a))continue;let u=this._getOrigin(i);if((u==null?void 0:u.type)!==\"REAL\")continue;let c=(o=this.statementGraphIDs.get(i))!=null?o:[];for(let m of c)this._notifyGraphRemoved(m,t);let l=Kj(this.analysis,i,a,this.postProgressUpdate.bind(this),this.childIntersections),p=[];for(let{graphID:m,graphData:f}of l)f&&(this._notifyGraphComputed(m,f,t),p.push(m));this.statementGraphIDs.set(i,p);let d=this.analysis[i];d&&!Zu(d.rawTree)&&(r=!0,i===this.intersectId&&(n=!0,this._updateIntersections(i,t)))}r&&!n&&(this.lastComputedIntersectId=void 0),this.intersectId!==void 0&&!n&&(r||this.intersectId!==this.lastComputedIntersectId)&&this._updateIntersections(this.intersectId,t)}_notifyGraphRemoved(t,n){n.graphs[t]=void 0}_notifyGraphComputed(t,n,r){xw(n),r.graphs[t]=n}_updateIntersections(t,n){this.lastComputedIntersectId=t;let r=this.getFullStatement(t);if(!r)return;let o=this.moduleContexts.getPolicyContext(r.rootModuleId).viewState;if(!o)return;if(!this.analysis[t]||!this.analysis[t].shouldIntersect()){n.intersections[t]=[];return}this.postProgressUpdate(\"GRAPHING\",[t]);let i=Cq(this.analysis,o,t);n.intersections[t]=i,this.postProgressUpdate(\"UNPUBLISHED\",[t])}addStatement(t,n){if(!t)return;t.id=ra(t.id);let r=t,o=r.id,i=this.getFullStatement(o),s=this._getOrigin(o),a=i==null?void 0:i.statement,u=a==null?void 0:a.userData,c=!!u&&!!i&&Xj(u,r)&&!Wj(a,Ql(this.mainFrameContext,i)),l=jj(t,n),p=zq(t,n);l!==p&&this.moduleContexts.setRootModule(l,p);let d=this.moduleContexts.getPolicyContext(p),m=Qj(r,d.getParseOptions(r),d.policy,l,p),f=new Set(m.map(y=>y.id));for(let{id:y,statementNode:h,moduleID:b}of m){let T=y===r.id?{type:\"REAL\",childIDs:f}:{type:\"CHILD\",parentID:r.id};this.updateSingleStatement(y,new bf({id:y,statement:h,moduleID:b,rootModuleId:p,origin:T}),{selectionOnlyChange:c})}if((s==null?void 0:s.type)===\"REAL\")for(let y of s.childIDs)f.has(y)||this.removeSingleStatement(y);let g=r.label;if(g){let y=this.currentLabel[o];(!y||y.raw!==g)&&(this.currentLabel[o]=XD(g))}else delete this.currentLabel[o]}replaceStatementParsenode(t,n){this.updateSingleStatement(t.id,new bf({id:t.id,statement:n,moduleID:t.moduleID,rootModuleId:t.rootModuleId,origin:t.origin}),{selectionOnlyChange:!1})}updateSingleStatement(t,n,{selectionOnlyChange:r}){r?this.selectionOnlyChangeIds.add(t):(this.markExportsDirty(t),this.markAsDirtyRoot(t)),this.fullStatements.set(t,n)}clearState(t){this.invalidate(),this.currentLabel={},this.fullStatements=new Map;for(let n of this.statementGraphIDs.values())for(let r of n)this._notifyGraphRemoved(r,t);this.statementGraphIDs=new Map}removeStatement(t,n){let r=this._getOrigin(t);if((r==null?void 0:r.type)===\"REAL\"){for(let i of r.childIDs)this.removeSingleStatement(i);let o=this.statementGraphIDs.get(t);for(let i of o!=null?o:[])this._notifyGraphRemoved(i,n)}this.removeSingleStatement(t)}removeSingleStatement(t){this._getStatement(t)&&(this.markExportsDirty(t),delete this.currentLabel[t],this._deleteStatement(t),delete this.analysis[t],delete this.currentStatus[t],this.mainFrameContext.deleteTableFrame(t))}markExportsDirty(t){let n=this.getFullStatement(t);if(!n)return;Bi(n.statement)&&(this.markedRegressionDirty=!0);let r=na(this.moduleContexts,n);for(let o of n.statement.getLegalExports(r)){let i=n.moduleID;this.dirtyExportedSymbolRoots.add(vn(i,o)),this.dirtyExportedSymbolRoots.add(vn(n.moduleID,o))}}markAsDirtyRoot(t){this.dirtyStatementRoots[t]=!0}shouldPublishAndGraph(t){let n=this.getFullStatement(t);return(n==null?void 0:n.origin.type)===\"REAL\"||um(n==null?void 0:n.statement)}markNeedsGraphing(t){if(!this.shouldPublishAndGraph(t))return;let n=this.assertFullStatement(t);this.moduleContexts.getPolicyContext(n.rootModuleId).getShouldSkipPlotting()||this.needGraphingIds.add(t)}getAnalysis(){return this.updateAnalysis(),this.analysis}getEvaluationState(t){if(this.updateAnalysis(),!!this.analysis[t])return this.analysis[t].evaluationState}_updateRegressions(t){var m,f,g;let n=[];for(let y of t.keys()){let h=this._getStatement(y);h&&Bi(h)&&n.push(y)}if(n.length===0)return;let r=new Cf(this.moduleContexts,!0),o=Xy(this.moduleContexts,this.getFullStatementMap(),n);r.markDependencyOrder(o),wq(o,r,this.moduleContexts);let i=o.resolved;this.postProgressUpdate(\"RESOLVED\",i);let s={};for(let y of this._allStatementIDs()){let h=this._getStatement(y);h&&Zu(h)&&(s[y]=h)}let a=new Map,u=new Set;for(let y of i){if(y===dc){this.postProgressUpdate(\"UNPUBLISHED\",[y]);continue}if(u.has(y))continue;this.postProgressUpdate(\"ANALYZING\",[y]);let h=this.getFullStatement(y);if(!h){this.postProgressUpdate(\"UNPUBLISHED\",[y]);continue}let b=h.statement,T=na(this.moduleContexts,h);if(Bi(b)){if(!T.graphingEnabled())throw new Error(\"Programming Error: expected graphing policy when analyzing regression\");let I=((m=b.tableRegressionData)==null?void 0:m.tableId)===void 0?Ql(r,h):r.getFrame(b.tableRegressionData.tableId),E=(f=this.lastMainFrameMap.get(eh(h)))!=null?f:{[Symbol(\"DUMMY_NO_LAST_FRAME\")]:!0},S=dq(b,T,I,E);a.set(y,S),this.postProgressUpdate(\"UNPUBLISHED\",[y])}else{let I=Ql(r,h),E=this.analyzeSingleStatementGraphing(y,this.analysis,I,o,\"regression\"),S=[];for(let C of E)this.exportTo(C,r,o),S.push(C.id),C.id!==y&&u.add(C.id);this.postProgressUpdate(\"UNPUBLISHED\",S)}}let c=new Lr;for(let[y,h]of a){if(h instanceof M)continue;let b=this.getFullStatement(y),T=eh(b);for(let I of fe(h.parameters)){if(na(this.moduleContexts,b).assignmentForbidden(I))continue;let E=vn(T,I);c.add(E)}}let l=new Map,p=y=>{var T,I;let h=this.getFullStatement(y),b=eh(h);return aq(h.statement,(T=o.assignmentMaps.assignments.mapForFrame(b))!=null?T:new Map,(I=c.mapForFrame(b))!=null?I:new Map)},d=(y,h)=>{l.set(y,h);let b=this.getFullStatement(y);if(!na(this.moduleContexts,b).assignmentForbidden(h)){let T=eh(b);c.add(vn(T,h))}};for(let[y,h]of a){if(h instanceof M)continue;let b=this._getStatement(y);if(!((g=b.userData)!=null&&g.residualVariable))continue;let T=p(y);T===ks(b.userData.residualVariable)&&d(y,T)}for(let y of a.keys()){if(l.has(y))continue;let h=p(y);d(y,h)}for(let[y,h]of a){let b=this.getFullStatement(y),T=na(this.moduleContexts,b);if(!T.graphingEnabled())throw new Error(\"Programming Error: expected graphing policy when analyzing regression\");let I=Ql(this.mainFrameContext,b),E=l.get(y),S=mq(b.statement,T,I,{residualVariable:E,tableStatements:s},h);this.analysis[y]=S;let C=this.exportTo({id:y,stmtAnalysis:S},this.mainFrameContext,o);S.evaluationState.exported_variables=C,t.delete(y)}}_updateAnalysisAndFrame(t,n,r){var a;let o=this.analysis;this.mainFrameContext.markDependencyOrder(t),wq(t,this.mainFrameContext,this.moduleContexts);let i=t.resolved.filter(u=>r.has(u));this.postProgressUpdate(\"RESOLVED\",i);let s=new Set;for(let u of i){if(u===dc){this.postProgressUpdate(\"UNPUBLISHED\",[u]);continue}if(n.has(u)){this.postProgressUpdate(\"UNPUBLISHED\",[u]);continue}if(s.has(u))continue;this.postProgressUpdate(\"ANALYZING\",[u]);let c=this.analyzeSingleStatement(u,o,t),l=[];for(let p of c){o[p.id]=p.stmtAnalysis;let d=this.exportTo(p,this.mainFrameContext,t),m=this._getOrigin(p.id);if((m==null?void 0:m.type)===\"REAL\"){let f=new Set(d);for(let g of m.childIDs){let y=this.analysis[g],h=(a=y==null?void 0:y.evaluationState.exported_variables)!=null?a:[];for(let b of h)f.add(b)}d=[...f]}p.stmtAnalysis.evaluationState.exported_variables=d,l.push(p.id),p.id!==u&&s.add(p.id)}this.postProgressUpdate(\"UNPUBLISHED\",l)}return{analyzedStatements:i}}exportTo(t,n,r){let o=this.getFullStatement(t.id);if(!o)throw V(\"Missing statement corresponding to entry that was just created.\");let{moduleID:i}=o;return eP({id:t.id,moduleID:i,moduleContexts:this.moduleContexts,frameContext:n,dependencyOrder:r,raw:t.stmtAnalysis.rawTree,concrete:t.stmtAnalysis.concreteTree})}buildSymbolToIdDirtyMap(){return Iq(this.moduleContexts,this.fullStatements)}buildChildIntersectionMap(){let t=this.childIntersections,n=new ff;for(let o of fe(this.analysis)){let i=this.analysis[o],{geometry:s}=i.evaluationState;if(s!=null&&s.call&&s.call.symbol===\"intersection\"&&this._getStatement(o).userData.shouldGraph&&i.concreteTree.type!==\"Error\"){let a=!!this.needGraphingIds.has(o),u=Vr(i.concreteTree);for(let c of s.call.parents){if(c.type===\"arbitrary-expression\")continue;let l=ec(c);if(!l)continue;let p=this.mainFrameContext.getFrame(Tr)[l],d=p&&p.userData.id;if(d==null)continue;let m=this.analysis[d],f=Vr(m.concreteTree);f&&u&&n.addChildIntersection({id:d,valueType:f.valueType,ref:c},u),a&&this.markNeedsGraphing(d)}}}let r=ff.compareIntersectionCounts({nextChildIntersections:n,prevChildIntersections:t});for(let o of fe(r)){let{prev:i,next:s}=r[o];s<i&&this.markNeedsGraphing(o)}return n}findAllRegressionExports(){let t=new Map,n=new Lr;for(let r of this._allStatementIDs()){let o=this.getFullStatement(r);if(!o||!Bi(o.statement))continue;let i=this.analysis[r];if(!i||!Bi(i.rawTree))continue;let s=i.concreteTree,a=i.rawTree.getExportsFromConcrete(na(this.moduleContexts,o),s),u=[];for(let c of a){let l=vn(o.moduleID,c);n.add(l),u.push(l)}t.set(r,u)}return{regressionExportMap:t,regressionExportRoots:n}}updateConstruction(){let t=[];for(let s of this._allStatementIDs())this._getStatement(s).userData.isInConstructionsFolder&&t.push(s);let n=this._getStatement(dc),r=new Aj(t);r.metaData={extraDepNodes:[]},r.userData={};let o={};for(let s of(n==null?void 0:n.getDependencies())||[])o[s]=!0;let i={};for(let s of r.getDependencies())i[s]=!0;if(!n||!ei(o,i)){let s={type:\"AUX\"},a=Tr,u=Tr;this.updateSingleStatement(dc,new bf({id:dc,statement:r,moduleID:a,rootModuleId:u,origin:s}),{selectionOnlyChange:!1}),this.moduleContexts.getPolicyContext(a).markConstruction(r)}}analyzeExternalRecursiveBaseCases(){let t=[],n={};for(let a of this._allStatementIDs()){let u=this.getFullStatement(a);if(!u)continue;let c=this.moduleContexts.getPolicyContext(u.moduleID);if(!c.recursion)continue;let l=this._getStatement(a);l instanceof Fr&&!c.policy.assignmentForbidden(l._symbol)&&(t.push(a),n[l._symbol]=l)}let{recursiveFunctionGroups:r}=Xy(this.moduleContexts,this.getFullStatementMap(),t),o=new Set;for(let a of t){let u=this._getStatement(a);u instanceof Fr&&r[a]&&o.add(u._symbol)}let i={},s=[];for(let a of this._allStatementIDs()){let u=this.getFullStatement(a);if(!u)continue;let c=u.statement;if(c instanceof El&&o.has(c._lhs._symbol)){let l=Do.fromCallAssignment(n,c);if(!l)continue;this.replaceStatementParsenode(u,l);let p=l._symbol;i[p]||(i[p]=[]),i[p].push(l),l.getDependencies().length&&s.push(a)}else if(c instanceof Do){let l=c._symbol;o.has(c._symbol)?(i[l]||(i[l]=[]),i[l].push(c),c.getDependencies().length&&s.push(a)):this.replaceStatementParsenode(u,c.originalNode)}}for(let a of fe(n)){let u=n[a],c=u.getExternalBaseCases(),l=i[a]||[];Jj(l,c)||(u.setExternalBaseCases(l),this.markExportsDirty(u.userData.id),this.markAsDirtyRoot(u.userData.id))}if(s.length){let{recursiveFunctionBaseCasesWithCycles:a}=Xy(this.moduleContexts,this.getFullStatementMap(),s);for(let u of a){let c=this.getFullStatement(u);if(!c)continue;let l=c.statement;if(l instanceof Do){let p=n[l._symbol];p.setExternalBaseCases(p.getExternalBaseCases().filter(d=>d!==l)),this.replaceStatementParsenode(c,l.originalNode)}}}}updateAnalysis(){var S,C,v,_,L,k,Q;this.updateConstruction(),this.moduleContexts.updateParentFrameMap(this.fullStatements),this.mainFrameContext.syncPolicyFramesAndFixPrototypes(),this.analyzeExternalRecursiveBaseCases();let t=this.getFullStatementMap(),n=this.buildSymbolToIdDirtyMap(),r=ld(this.moduleContexts,this.fullStatements,n,this.dirtyStatementRoots,this.dirtyExportedSymbolRoots),o=!1;for(let w of this.moduleContexts.rootModules()){let q=vn(w,Tx);r.symbols.has(q)&&(o=!0)}o&&this.invalidateGraphsOnly();let i=this.markedRegressionDirty;for(let w of fe(r.ids)){let q=this._getStatement(w);q&&Bi(q)&&(i=!0)}let s=new Set;if(i){for(let w of this._allStatementIDs())this._getStatement(w)&&s.add(w);this.mainFrameContext=new Cf(this.moduleContexts,!1)}else{let w=r.ids;for(let K of fe(w))this._getStatement(K)&&s.add(K);let q=r.symbols;for(let K of q)this.mainFrameContext.deleteName(K)}let a=!1;for(let w of s.keys()){this.markNeedsGraphing(w);let q=this.mainFrameContext.deleteTableFrame(w);a||(a=q)}if(a)for(let w of this._allStatementIDs()){let q=this._getStatement(w);q.tableFrameID&&s.has(q.tableFrameID)&&s.add(w)}let u=new Set([...s,...this.selectionOnlyChangeIds]);this.analysisNeedsPublishIds=new Set;for(let w of u)this.shouldPublishAndGraph(w)&&this.analysisNeedsPublishIds.add(w);this.markedRegressionDirty=!1,this.dirtyExportedSymbolRoots=new Lr,this.dirtyStatementRoots={};let c=this.analysis;i&&[...this.moduleContexts.getAllContexts()].some(w=>w.evaluationMode===\"graphing\"||w.evaluationMode===\"geometry\"||w.evaluationMode===\"graphing_3d\")&&this._updateRegressions(s);let{regressionExportMap:l,regressionExportRoots:p}=this.findAllRegressionExports(),d=Xy(this.moduleContexts,t,this._allStatementIDs(),l),m={};for(let w of d.viewportTransitiveDependencies)(S=this.lastViewportDependencies)!=null&&S.has(w)||(m[w]=!0);for(let w of(C=this.lastViewportDependencies)!=null?C:[])!d.viewportTransitiveDependencies.has(w)&&this.fullStatements.has(w)&&(m[w]=!0);this.lastViewportDependencies=d.viewportTransitiveDependencies;let f=ld(this.moduleContexts,this.fullStatements,n,m,new Lr),g=new Set(d.resolved);for(let w of fe(f.ids))g.has(w)||d.resolved.push(w),u.has(w)||u.add(w),this.shouldPublishAndGraph(w)&&this.analysisNeedsPublishIds.add(w);let{analyzedStatements:y}=this._updateAnalysisAndFrame(d,new Set(l.keys()),u);for(let w of y){let q=this.getFullStatement(w);q&&eu(q.statement)&&(q.statement.isViewportDependency=d.viewportTransitiveDependencies.has(w))}let h=ld(this.moduleContexts,this.fullStatements,n,{},p),b=new Lr;for(let w of d.recursiveFunctionSymbols)b.add(w);let T=ld(this.moduleContexts,this.fullStatements,n,{},b);this.markRegressionAndRecursionDependents({regressionDependentStatements:h.ids,recursionDependentStatements:T.ids});for(let w of fe(this.analysis)){let q=this.analysis[w];if(Bi(q.rawTree)&&((v=q.rawTree.tableRegressionData)!=null&&v.tableId)){let K=q.evaluationState,le=this.analysis[q.rawTree.tableRegressionData.tableId];if(!le)throw new Error(`Programming error: table ${q.rawTree.tableRegressionData.tableId} not found for table regression ${w}`);let te=le.evaluationState;if(K.regression){let Ze=q.rawTree.tableRegressionData.columnInfo.filter($=>$.isIdentifier).map($=>ks($.latex)).filter($=>q.policy.assignmentForbidden($)),oe=(_=q.rawTree.tableRegressionData.columnInfo.find($=>!$.isIdentifier))==null?void 0:_.latex,ee;Ze.length>0?ee=MM(Ze).getError():oe&&(ee=vM(oe).getError()),te.table_regression={status:\"success\",result:K.regression,export_info:ee?{status:\"unexportable\",reason:ee}:{status:\"exportable\"}}}else te.table_regression={status:\"error\",error:(L=K.error)!=null?L:V('Expected regression state to define either \"regression\" or \"error\"').getError()}}}for(let w of this.moduleContexts.rootModules()){let q=this.moduleContexts.getPolicyContext(w);if(!(q.policy.graphingEnabled()&&q.viewState))continue;let le=(k=this.mainFrameContext.getFrame(w)[Tx])==null?void 0:k.userData.id;if(!le)continue;let te=c[le],Be=te==null?void 0:te.evaluationState;(Be==null?void 0:Be.viewport.status)===\"valid\"&&q.updateEvaluatedViewport(Be.viewport.value)}for(let w of y){let q=this.getFullStatement(w);if(!q)continue;let K=na(this.moduleContexts,q);K.graphingEnabled()&&this.evaluateMetadataForStatement(w,Ql(this.mainFrameContext,q),K)}this.childIntersections=this.buildChildIntersectionMap(),Pq(n).forEach(w=>{c[w].evaluationState.depends_on_random_seed=!0});let I=ld(this.moduleContexts,this.fullStatements,n,{[dc]:!0},new Lr([vn(Tr,\"construction\")]));for(let w of fe(I.ids)){if(w===dc)continue;let q=c[w].evaluationState;q.geometry&&(q.geometry.unconstructable=!0)}let E;for(let w of this._allStatementIDs())if((Q=this._getStatement(w).userData)!=null&&Q.latexSelection){E=w;break}if(E){let w=ld(this.moduleContexts,this.fullStatements,n,{[E]:!0},new Lr([vn(Tr,`idref_${E}`)]));for(let q of fe(w.ids)){if(q===dc)continue;let K=c[q].evaluationState;K.geometry&&(K.geometry.depends_on_selected=!0)}}return this.lastMainFrameMap=this.mainFrameContext.cloneFrameMapWithoutPrototypes(),d}analyzeSingleStatement(t,n,r){let o=this.getFullStatement(t),i=Ql(this.mainFrameContext,o),s=o.statement,a=this.moduleContexts.getPolicyContext(o.moduleID);switch(a.evaluationMode){case\"fourFunction\":case\"singleExpressionFourFunction\":return[{id:t,stmtAnalysis:bq(s,a.policy,i)}];case\"scientific\":return[{id:t,stmtAnalysis:hq(s,a.policy,i)}];case\"singleExpressionScientific\":return[{id:t,stmtAnalysis:tP(s,a.policy,i)}];case\"graphing\":case\"graphing_3d\":case\"geometry\":return this.analyzeSingleStatementGraphing(t,n,i,r,\"main\")}}analyzeSingleStatementGraphing(t,n,r,o,i){let s=this.getFullStatement(t);if(!s)throw V(\"Missing full statement.\");let a=this.moduleContexts.getPolicyContext(s.moduleID);if(!a.policy.graphingEnabled())throw V(\"Expected graphing policy\");if(i===\"main\"&&r.r){let c=qn(r);c.r=void 0;let l=Sf(this._getStatement(t),a.policy,c,n);if(l.getGraphMode()===6)return[{id:t,stmtAnalysis:l}]}let u=o.recursiveFunctionGroups[t];if(u&&a.recursion){if(i===\"regression\")for(let l of u){let p=this.assertFullStatement(l),d=this._getStatement(l),m=ZC(),f={policy:na(this.moduleContexts,p),rawTree:d,concreteTree:m};return[{id:l,stmtAnalysis:f}]}let c={};for(let l of u)c[l]=this._getStatement(l);return gq(this.moduleContexts,this.mainFrameContext,o,s.moduleID,c)}if(i===\"regression\"){let c=this._getStatement(t),l=Oc(c,a.policy,r),p={policy:a.policy,rawTree:c,concreteTree:l};return[{id:t,stmtAnalysis:p}]}else{let c=Sf(this._getStatement(t),a.policy,r,n);return[{id:t,stmtAnalysis:c}]}}evaluateMetadataForStatement(t,n,r){var a,u;if(t===dc)return;let o=this.analysis[t],i=o.evaluationState.expression_type,s=this.moduleContexts.getPolicyContext(this.assertFullStatement(t).moduleID);for(let c of fe(th)){let l=th[c];s.evaluationMode!==\"graphing_3d\"&&c===\"resolution\"||(!l.shouldEvaluate||l.shouldEvaluate(o))&&Uj(o,r,n,c)}zj(o,r,n),s.product===\"graphing-3d\"&&kj(o,r),s.actions&&wj(o)&&Hj(o,r,n),i===A.PARAMETRIC||i===A.CURVE3D_xyz_t||i===A.POLAR||i===A.SURFACE_r_\\u03B8z||i===A.SURFACE_r_\\u03B8z_AMBIGUOUS||i===A.SLICE_r\\u03B8z_at_z?$j(o,r,n):i===A.SURFACE_xyz_uv||i===A.SLICE_xyz_uv||i===A.SURFACE_r_\\u03B8\\u03C6||i===A.SURFACE_z_r\\u03B8||i===A.SLICE_zr\\u03B8_at_r||i===A.SLICE_zr\\u03B8_at_\\u03B8||i===A.SLICE_zr\\u03B8_at_xyz||i===A.SLICE_r\\u03B8\\u03C6_at_\\u03B8||i===A.SLICE_r\\u03B8\\u03C6_at_\\u03C6||i===A.SLICE_r\\u03B8\\u03C6_at_xyz?Yj(o,r,n):i===A.BOXPLOT?Zj(o,r,n):((a=o.evaluationState.top_level_function_spec)==null?void 0:a.type)===\"distribution\"?D3(o,r,n):(Ni((u=o.evaluationState.typed_constant_value)==null?void 0:u.valueType)||yD(o.rawTree))&&s3(o,r,n)}markRegressionAndRecursionDependents(t){for(let n of fe(this.analysis)){let r=this.analysis[n];if(eu(r.rawTree)){let o=this.analysis[r.rawTree.tableID];if(!o)continue;let i=o.evaluationState.column_data[r.rawTree.columnIndex];if(!i)continue;i.depends_on_regression=!!t.regressionDependentStatements[n],i.depends_on_recursive_function=!!t.recursionDependentStatements[n]}else r.evaluationState.depends_on_regression=!!t.regressionDependentStatements[n],r.evaluationState.depends_on_recursive_function=!!t.recursionDependentStatements[n]}}childFrameWithIncrementedEventCount(t){let n=this.mainFrameContext.getFrame(t),r=qn(n);return this.globalEventCount+=1,r.globalEventCount=new O.Constant(this.globalEventCount),r}processEvents(t){if(!t||[...this.moduleContexts.getAllContexts()].every(a=>!a.actions))return;let n=new Ec,r=new Map,o=!1,i=!1,s;for(let a of t)switch(a.type){case\"step\":{let c=this.getFullStatement(ra(a.expressionId)),l=c==null?void 0:c.statement;if(!l)continue;let p=c.moduleID,d=this.childFrameWithIncrementedEventCount(p),m=Oc(l,na(this.moduleContexts,c),d);i=!0,jD(m,n,this.mainFrameContext,r);break}case\"click\":{let c=this.getFullStatement(ra(a.expressionId)),l=c==null?void 0:c.statement;if(!l||!l.metaData.clickHandler)continue;let p=c.moduleID,d=this.childFrameWithIncrementedEventCount(p);d.index=new O.Constant(a.indexVar+1);let m=pe(l.metaData.clickHandler,na(this.moduleContexts,c),d);i=!0,o=!0,jD(m,n,this.mainFrameContext,r);break}case\"clock-tick\":{(s===void 0||a.isFirstTick&&!s.isFirstTick)&&(s=a);break}default:return a}if(s){let a=this.getFullStatement(ra(s.id)),u=a==null?void 0:a.statement;if(u&&u instanceof O.Ticker){let c=na(this.moduleContexts,a),l=a.moduleID,p=this.childFrameWithIncrementedEventCount(l),d=pe(u.minStep,c,p,eN).asValue();if(typeof d==\"number\"&&d>=0&&isFinite(d)){let f=this.lastClockTickTime;if(this.lastClockTickTime=Date.now(),!s.isFirstTick&&f!==void 0){p.dt=new O.Constant(this.lastClockTickTime-f);let g=pe(u.handler,c,p);jD(g,n,this.mainFrameContext,r)}}}}for(let[a,u]of r){let c=this.mainFrameContext.getFrame(a);for(let l of fe(u))c[l]=u[l]}return{objectClicked:o,userAction:i,updates:n.toQualifiedNameRecord()}}postProgressUpdate(t,n){var r;(r=this.sendMessageForProgressUpdate)==null||r.call(this,\"evaluatorProgressUpdate\",{update:t,ids:n})}};function Jj(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Bq(e){let t=U_(e.symbol);return t instanceof M?t:vn(e.frameID,t._symbol)}function Gq(e,t,n){let r=n.frameID;return{id:e,moduleID:r,rootModuleId:r,statementNode:new O.AssignmentImport({symbol:n.symbol,moduleID:r,importFrom:t,defaultDefinition:void 0})}}function Qj(e,t,n,r,o){let i=e.id,s={extraDepNodes:[]},a;function u(c){return c.userData=e,c.metaData=s,[{id:i,statementNode:c,moduleID:r,rootModuleId:o}]}switch(e.type){case\"table\":{e.shouldGraph=!0;let c=e.columns,l=[],p=new Map,d=y=>!y.replace(/\\\\space|\\\\ /g,\"\").match(/\\S/),m=[];for(let y=0;y<c.length;y++){let h=c[y],b=mi(h.latex,{...t,seedPrefix:Dn(i,[[\"tr\",0],[\"tc\",y]])}),T=[],I=-1;for(let v=0;v<c[y].values.length;v++)d(h.values[v])?T.push(new oP(NaN)):(T.push(mi(h.values[v],{...t,seedPrefix:Dn(i,[[\"tr\",v+1],[\"tc\",y]])})),I=v);T=T.slice(0,I+1);let E=new tu(b,T,ra(e.id),y),S=ra(`dcgcolumnstmt${h.id}`);E.userData={id:S},p.set(ra(h.id),E),m.push({id:S,statementNode:E,moduleID:r,rootModuleId:o});let C=new tu(b,T,e.id,y);if(C.userData=h,C.header){if(C.header.userData=h,C.header.metaData={extraDepNodes:[]},h.colorLatex){let v=no(h.colorLatex,{...t,seedPrefix:Dn(i,[[\"tr\",0],[\"tc\",y],[\"cl\",y]])});C.header.metaData.colorLatex=v,C.header.metaData.extraDepNodes.push(v)}if(h.pointSize){let v=no(h.pointSize,{...t,seedPrefix:Dn(i,[[\"tr\",0],[\"tc\",y],[\"ps\",y]])});C.header.metaData.pointSize=v,C.header.metaData.extraDepNodes.push(v)}if(h.pointOpacity){let v=no(h.pointOpacity,{...t,seedPrefix:Dn(i,[[\"tr\",0],[\"tc\",y],[\"po\",y]])});C.header.metaData.pointOpacity=v,C.header.metaData.extraDepNodes.push(v)}if(h.lineWidth){let v=no(h.lineWidth,{...t,seedPrefix:Dn(i,[[\"tr\",0],[\"tc\",y],[\"lw\",y]])});C.header.metaData.lineWidth=v,C.header.metaData.extraDepNodes.push(v)}if(h.lineOpacity){let v=no(h.lineOpacity,{...t,seedPrefix:Dn(i,[[\"tr\",0],[\"tc\",y],[\"lo\",y]])});C.header.metaData.lineOpacity=v,C.header.metaData.extraDepNodes.push(v)}}l.push(C)}let f;e.regression&&(f=Oq(e,i,t,p),f!==void 0&&m.push({id:ra(e.regression.id),statementNode:f,moduleID:r,rootModuleId:o}));let g=new Wu(l,[...p.values()],f,i);return g.userData=e,g.metaData=s,m.push({id:i,statementNode:g,moduleID:r,rootModuleId:o}),m}case\"image\":{let c=\"-\\\\trigAngleMultiplier*(\"+e.angle+\")\",l=no(e.center,{...t,seedPrefix:Dn(i,[[\"ic\",i]])}),p=no(c,{...t,seedPrefix:Dn(i,[[\"ia\",i]])}),d=no(e.width,{...t,seedPrefix:Dn(i,[[\"iw\",i]])}),m=no(e.height,{...t,seedPrefix:Dn(i,[[\"ih\",i]])}),f=no(e.opacity,{...t,seedPrefix:Dn(i,[[\"io\",i]])});return qq(s,e,t),u(new Oj({center:l,radianAngle:p,width:d,height:m,opacity:f}))}case\"ticker\":return u(new O.Ticker({handler:no(e.handlerLatex,{...t,allowDt:!0}),minStep:no(e.minStepLatex||\"0\",t)}));case\"geometry-toolbar-predicate\":return u(no(`\\\\{${e.latex}:1,0\\\\}`,{...t}));case\"module\":{let c=[];for(let l=0;l<e.imports.length;l++){let p=e.imports[l],d=RM(e.id,l),m=Bq(p.to),f=Bq(p.from);if(m instanceof M){c.push({id:d,statementNode:m,moduleID:Tr,rootModuleId:Tr});continue}if(f instanceof M){c.push({id:d,statementNode:f,moduleID:Tr,rootModuleId:Tr});continue}c.push(Gq(d,f,m))}return c}case\"viewport\":return u(new O.Viewport({xmin:no(e.viewport.xmin,t),xmax:no(e.viewport.xmax,t),ymin:no(e.viewport.ymin,t),ymax:no(e.viewport.ymax,t),zmin:e.viewport.zmin?no(e.viewport.zmin,t):void 0,zmax:e.viewport.zmax?no(e.viewport.zmax,t):void 0}));default:{e=e;let c=e.latex,l=ma(e.latex),p=Wg(l);p.keyword&&(a=p.keyword,c=p.stripped),!e.disallowAssignment&&l.slice(-1)===\"=\"&&(c=l.substring(0,l.length-1));for(let g of fe(th)){let y=th[g],h=y.getLatex?y.getLatex(e):e[g];if(h){y.transform&&(h=y.transform(h));let b=Yi(h,{...t,seedPrefix:Dn(i,[[y.seed,i]])});s[g]=b,s.extraDepNodes.push(b)}}if(e.colorLatex){let g=kc(e.colorLatex,{...t,seedPrefix:Dn(i,[[\"ac\",i]])});s.colorLatex=g,s.extraDepNodes.push(g)}e.polarDomain&&e.polarDomain.min&&(s.polarDomainMin=Yi(e.polarDomain.min,{...t,seedPrefix:Dn(i,[[\"lm\",i]])}),s.extraDepNodes.push(s.polarDomainMin)),e.polarDomain&&e.polarDomain.max&&(s.polarDomainMax=Yi(e.polarDomain.max,{...t,seedPrefix:Dn(i,[[\"lM\",i]])}),s.extraDepNodes.push(s.polarDomainMax)),e.parametricDomain&&e.parametricDomain.min&&(s.parametricDomainMin=Yi(e.parametricDomain.min,{...t,seedPrefix:Dn(i,[[\"lm\",i]])}),s.extraDepNodes.push(s.parametricDomainMin)),e.parametricDomain&&e.parametricDomain.max&&(s.parametricDomainMax=Yi(e.parametricDomain.max,{...t,seedPrefix:Dn(i,[[\"lM\",i]])}),s.extraDepNodes.push(s.parametricDomainMax)),e.parametricDomain3Du&&e.parametricDomain3Du.min&&(s.parametricDomain3DuMin=Yi(e.parametricDomain3Du.min,{...t,seedPrefix:Dn(i,[[\"lm\",i]])}),s.extraDepNodes.push(s.parametricDomain3DuMin)),e.parametricDomain3Du&&e.parametricDomain3Du.max&&(s.parametricDomain3DuMax=Yi(e.parametricDomain3Du.max,{...t,seedPrefix:Dn(i,[[\"lM\",i]])}),s.extraDepNodes.push(s.parametricDomain3DuMax)),e.parametricDomain3Dv&&e.parametricDomain3Dv.min&&(s.parametricDomain3DvMin=Yi(e.parametricDomain3Dv.min,{...t,seedPrefix:Dn(i,[[\"lm\",i]])}),s.extraDepNodes.push(s.parametricDomain3DvMin)),e.parametricDomain3Dv&&e.parametricDomain3Dv.max&&(s.parametricDomain3DvMax=Yi(e.parametricDomain3Dv.max,{...t,seedPrefix:Dn(i,[[\"lM\",i]])}),s.extraDepNodes.push(s.parametricDomain3DvMax)),e.parametricDomain3Dr&&e.parametricDomain3Dr.min&&(s.parametricDomain3DrMin=Yi(e.parametricDomain3Dr.min,{...t,seedPrefix:Dn(i,[[\"lm\",i]])}),s.extraDepNodes.push(s.parametricDomain3DrMin)),e.parametricDomain3Dr&&e.parametricDomain3Dr.max&&(s.parametricDomain3DrMax=Yi(e.parametricDomain3Dr.max,{...t,seedPrefix:Dn(i,[[\"lM\",i]])}),s.extraDepNodes.push(s.parametricDomain3DrMax)),e.parametricDomain3Dphi&&e.parametricDomain3Dphi.min&&(s.parametricDomain3DphiMin=Yi(e.parametricDomain3Dphi.min,{...t,seedPrefix:Dn(i,[[\"lm\",i]])}),s.extraDepNodes.push(s.parametricDomain3DphiMin)),e.parametricDomain3Dphi&&e.parametricDomain3Dphi.max&&(s.parametricDomain3DphiMax=Yi(e.parametricDomain3Dphi.max,{...t,seedPrefix:Dn(i,[[\"lM\",i]])}),s.extraDepNodes.push(s.parametricDomain3DphiMax)),e.vizProps&&(e.vizProps.axisOffset&&(s.vizAxisOffset=Yi(e.vizProps.axisOffset,{...t,seedPrefix:Dn(i,[[\"vo\",i]])}),s.extraDepNodes.push(s.vizAxisOffset)),e.vizProps.breadth&&(s.vizBreadth=Yi(e.vizProps.breadth,{...t,seedPrefix:Dn(i,[[\"vb\",i]])}),s.extraDepNodes.push(s.vizBreadth))),e.cdf&&e.cdf.show&&(e.cdf.bound1&&(s.cdfBound1=kc(e.cdf.bound1,{...t,seedPrefix:Dn(i,[[\"lm\",i]])}),s.extraDepNodes.push(s.cdfBound1)),e.cdf.bound2&&(s.cdfBound2=kc(e.cdf.bound2,{...t,seedPrefix:Dn(i,[[\"lM\",i]])}),s.extraDepNodes.push(s.cdfBound2)),e.cdf.p&&(s.cdfP=kc(e.cdf.p,{...t,seedPrefix:Dn(i,[[\"pv\",i]])}),s.extraDepNodes.push(s.cdfP)));let d=e.disallowAssignment?Yi(c,t):mi(c,t);if(d.shouldPromoteToSlider(n)){let g=e.slider,y=!!(g&&g.isPlayingOnce),h=kc(g&&g.softMin,t),b=kc(g&&g.softMax,t),T=kc(g&&g.min,{...t,seedPrefix:Dn(i,[[\"lm\",i]])}),I=kc(g&&g.max,{...t,seedPrefix:Dn(i,[[\"lM\",i]])}),E=kc(g&&g.step,{...t,seedPrefix:Dn(i,[[\"ls\",i]])});d=new Lm(d,{sliderMin:T,sliderMax:I,sliderStep:E,sliderIsPlayingOnce:y,sliderSoftMin:h,sliderSoftMax:b})}a===\"export\"&&d.isRegression&&(d=Vy());let m=n.globParentId;if(a===\"default\"&&m)if(d.type===\"Slider\"||d.type===\"Assignment\"||d.type===\"FunctionDefinition\"){d.userData=e,d.metaData=s;let g=d,y=g._symbol;d=new O.AssignmentImport({symbol:y,moduleID:r,importFrom:vn(m,y),defaultDefinition:g})}else d=_M();qq(s,e,t);let f=u(d);if(a===\"export\"&&m){let g=0;for(let y of d.getLegalExports(n)){if(y.startsWith(\"idref_\"))continue;let h=RM(i,g),b=vn(r,y),T=vn(m,y);f.push(Gq(h,b,T)),g++}}return f}}}function qq(e,t,n){let r=t.clickableInfo;r&&r.enabled&&r.latex&&(e.clickHandler=no(r.latex,{...n,allowIndex:!0}))}function Kj(e,t,n,r,o){var u;if(!e.hasOwnProperty(t))return[];let i=e[t],s=i.evaluationState.expression_type,a=s===A.SINGLE_POINT||s===A.POINT_LIST;if(Zu(i.rawTree)){let c=i.graph(n,void 0),l=i.rawTree.getColumnIdsForGraphing(),p=[];for(let d of l)p.push({graphID:d,graphData:c[d]});if((u=i.rawTree.regression)!=null&&u.userData){let d=i.rawTree.regression.userData.id,m=e[d];if(m!=null&&m.evaluationState.is_graphable&&i.rawTree.regression.userData.shouldGraph){let f=m.graph(n,void 0);p.push({graphID:d,graphData:f})}}return p}else if(i.evaluationState.is_graphable&&(i.rawTree.userData.shouldGraph||i.rawTree.userData.showLabel&&a)){r(\"GRAPHING\",[t]);let c=i.graph(n,o.getChildIntersections(t));return r(\"UNPUBLISHED\",[t]),[{graphID:t,graphData:c}]}return[]}var kq=class{constructor(t){this.context=new rP(t),this.sendMessage=t}processChangeSet(t){let n=this.context.processChangeSet(t);this.sendMessage(\"changeSetResult\",n)}};Object.defineProperty(__dcg_chunk_exports__, 'a', { get: () => t7 });\nObject.defineProperty(__dcg_chunk_exports__, 'b', { get: () => Cn });\nObject.defineProperty(__dcg_chunk_exports__, 'c', { get: () => n7 });\nObject.defineProperty(__dcg_chunk_exports__, 'd', { get: () => Tu });\nObject.defineProperty(__dcg_chunk_exports__, 'e', { get: () => r7 });\nObject.defineProperty(__dcg_chunk_exports__, 'f', { get: () => LU });\nObject.defineProperty(__dcg_chunk_exports__, 'g', { get: () => YJ });\nObject.defineProperty(__dcg_chunk_exports__, 'h', { get: () => ZJ });\nObject.defineProperty(__dcg_chunk_exports__, 'i', { get: () => sO });\nObject.defineProperty(__dcg_chunk_exports__, 'j', { get: () => jJ });\nObject.defineProperty(__dcg_chunk_exports__, 'k', { get: () => QJ });\nObject.defineProperty(__dcg_chunk_exports__, 'l', { get: () => IP });\nObject.defineProperty(__dcg_chunk_exports__, 'm', { get: () => GU });\nObject.defineProperty(__dcg_chunk_exports__, 'n', { get: () => UU });\nObject.defineProperty(__dcg_chunk_exports__, 'o', { get: () => rQ });\nObject.defineProperty(__dcg_chunk_exports__, 'p', { get: () => sQ });\nObject.defineProperty(__dcg_chunk_exports__, 'q', { get: () => aQ });\nObject.defineProperty(__dcg_chunk_exports__, 'r', { get: () => jU });\nObject.defineProperty(__dcg_chunk_exports__, 's', { get: () => ei });\nObject.defineProperty(__dcg_chunk_exports__, 't', { get: () => pQ });\nObject.defineProperty(__dcg_chunk_exports__, 'u', { get: () => ez });\nObject.defineProperty(__dcg_chunk_exports__, 'v', { get: () => IQ });\nObject.defineProperty(__dcg_chunk_exports__, 'w', { get: () => oc });\nObject.defineProperty(__dcg_chunk_exports__, 'x', { get: () => Bl });\nObject.defineProperty(__dcg_chunk_exports__, 'y', { get: () => Ofe });\nObject.defineProperty(__dcg_chunk_exports__, 'z', { get: () => O7 });\nObject.defineProperty(__dcg_chunk_exports__, 'A', { get: () => fe });\nObject.defineProperty(__dcg_chunk_exports__, 'B', { get: () => B7 });\nObject.defineProperty(__dcg_chunk_exports__, 'C', { get: () => TU });\nObject.defineProperty(__dcg_chunk_exports__, 'D', { get: () => q7 });\nObject.defineProperty(__dcg_chunk_exports__, 'E', { get: () => z7 });\nObject.defineProperty(__dcg_chunk_exports__, 'F', { get: () => SJ });\nObject.defineProperty(__dcg_chunk_exports__, 'G', { get: () => vJ });\nObject.defineProperty(__dcg_chunk_exports__, 'H', { get: () => So });\nObject.defineProperty(__dcg_chunk_exports__, 'I', { get: () => vO });\nObject.defineProperty(__dcg_chunk_exports__, 'J', { get: () => SO });\nObject.defineProperty(__dcg_chunk_exports__, 'K', { get: () => yh });\nObject.defineProperty(__dcg_chunk_exports__, 'L', { get: () => BQ });\nObject.defineProperty(__dcg_chunk_exports__, 'M', { get: () => ws });\nObject.defineProperty(__dcg_chunk_exports__, 'N', { get: () => gc });\nObject.defineProperty(__dcg_chunk_exports__, 'O', { get: () => ia });\nObject.defineProperty(__dcg_chunk_exports__, 'P', { get: () => pz });\nObject.defineProperty(__dcg_chunk_exports__, 'Q', { get: () => qQ });\nObject.defineProperty(__dcg_chunk_exports__, 'R', { get: () => UQ });\nObject.defineProperty(__dcg_chunk_exports__, 'S', { get: () => Xi });\nObject.defineProperty(__dcg_chunk_exports__, 'T', { get: () => zQ });\nObject.defineProperty(__dcg_chunk_exports__, 'U', { get: () => ps });\nObject.defineProperty(__dcg_chunk_exports__, 'V', { get: () => NO });\nObject.defineProperty(__dcg_chunk_exports__, 'W', { get: () => ZQ });\nObject.defineProperty(__dcg_chunk_exports__, 'X', { get: () => QQ });\nObject.defineProperty(__dcg_chunk_exports__, 'Y', { get: () => Hf });\nObject.defineProperty(__dcg_chunk_exports__, 'Z', { get: () => vh });\nObject.defineProperty(__dcg_chunk_exports__, '_', { get: () => da });\nObject.defineProperty(__dcg_chunk_exports__, '$', { get: () => cb });\nObject.defineProperty(__dcg_chunk_exports__, 'aa', { get: () => WS });\nObject.defineProperty(__dcg_chunk_exports__, 'ba', { get: () => F8 });\nObject.defineProperty(__dcg_chunk_exports__, 'ca', { get: () => qA });\nObject.defineProperty(__dcg_chunk_exports__, 'da', { get: () => jS });\nObject.defineProperty(__dcg_chunk_exports__, 'ea', { get: () => zA });\nObject.defineProperty(__dcg_chunk_exports__, 'fa', { get: () => pb });\nObject.defineProperty(__dcg_chunk_exports__, 'ga', { get: () => db });\nObject.defineProperty(__dcg_chunk_exports__, 'ha', { get: () => sl });\nObject.defineProperty(__dcg_chunk_exports__, 'ia', { get: () => Mo });\nObject.defineProperty(__dcg_chunk_exports__, 'ja', { get: () => ks });\nObject.defineProperty(__dcg_chunk_exports__, 'ka', { get: () => ma });\nObject.defineProperty(__dcg_chunk_exports__, 'la', { get: () => uy });\nObject.defineProperty(__dcg_chunk_exports__, 'ma', { get: () => $8 });\nObject.defineProperty(__dcg_chunk_exports__, 'na', { get: () => Y8 });\nObject.defineProperty(__dcg_chunk_exports__, 'oa', { get: () => Ha });\nObject.defineProperty(__dcg_chunk_exports__, 'pa', { get: () => cy });\nObject.defineProperty(__dcg_chunk_exports__, 'qa', { get: () => OK });\nObject.defineProperty(__dcg_chunk_exports__, 'ra', { get: () => vr });\nObject.defineProperty(__dcg_chunk_exports__, 'sa', { get: () => lr });\nObject.defineProperty(__dcg_chunk_exports__, 'ta', { get: () => Nn });\nObject.defineProperty(__dcg_chunk_exports__, 'ua', { get: () => x });\nObject.defineProperty(__dcg_chunk_exports__, 'va', { get: () => D });\nObject.defineProperty(__dcg_chunk_exports__, 'wa', { get: () => St });\nObject.defineProperty(__dcg_chunk_exports__, 'xa', { get: () => ar });\nObject.defineProperty(__dcg_chunk_exports__, 'ya', { get: () => Z });\nObject.defineProperty(__dcg_chunk_exports__, 'za', { get: () => Yt });\nObject.defineProperty(__dcg_chunk_exports__, 'Aa', { get: () => He });\nObject.defineProperty(__dcg_chunk_exports__, 'Ba', { get: () => fn });\nObject.defineProperty(__dcg_chunk_exports__, 'Ca', { get: () => ko });\nObject.defineProperty(__dcg_chunk_exports__, 'Da', { get: () => _e });\nObject.defineProperty(__dcg_chunk_exports__, 'Ea', { get: () => he });\nObject.defineProperty(__dcg_chunk_exports__, 'Fa', { get: () => Er });\nObject.defineProperty(__dcg_chunk_exports__, 'Ga', { get: () => Te });\nObject.defineProperty(__dcg_chunk_exports__, 'Ha', { get: () => ue });\nObject.defineProperty(__dcg_chunk_exports__, 'Ia', { get: () => Ee });\nObject.defineProperty(__dcg_chunk_exports__, 'Ja', { get: () => Ri });\nObject.defineProperty(__dcg_chunk_exports__, 'Ka', { get: () => Ae });\nObject.defineProperty(__dcg_chunk_exports__, 'La', { get: () => Eo });\nObject.defineProperty(__dcg_chunk_exports__, 'Ma', { get: () => Ne });\nObject.defineProperty(__dcg_chunk_exports__, 'Na', { get: () => Ur });\nObject.defineProperty(__dcg_chunk_exports__, 'Oa', { get: () => Ce });\nObject.defineProperty(__dcg_chunk_exports__, 'Pa', { get: () => zr });\nObject.defineProperty(__dcg_chunk_exports__, 'Qa', { get: () => we });\nObject.defineProperty(__dcg_chunk_exports__, 'Ra', { get: () => sa });\nObject.defineProperty(__dcg_chunk_exports__, 'Sa', { get: () => Pe });\nObject.defineProperty(__dcg_chunk_exports__, 'Ta', { get: () => Di });\nObject.defineProperty(__dcg_chunk_exports__, 'Ua', { get: () => un });\nObject.defineProperty(__dcg_chunk_exports__, 'Va', { get: () => N });\nObject.defineProperty(__dcg_chunk_exports__, 'Wa', { get: () => Ye });\nObject.defineProperty(__dcg_chunk_exports__, 'Xa', { get: () => pr });\nObject.defineProperty(__dcg_chunk_exports__, 'Ya', { get: () => _u });\nObject.defineProperty(__dcg_chunk_exports__, 'Za', { get: () => Nt });\nObject.defineProperty(__dcg_chunk_exports__, '_a', { get: () => Jt });\nObject.defineProperty(__dcg_chunk_exports__, '$a', { get: () => Ut });\nObject.defineProperty(__dcg_chunk_exports__, 'ab', { get: () => on });\nObject.defineProperty(__dcg_chunk_exports__, 'bb', { get: () => Zt });\nObject.defineProperty(__dcg_chunk_exports__, 'cb', { get: () => cn });\nObject.defineProperty(__dcg_chunk_exports__, 'db', { get: () => Qt });\nObject.defineProperty(__dcg_chunk_exports__, 'eb', { get: () => sn });\nObject.defineProperty(__dcg_chunk_exports__, 'fb', { get: () => kn });\nObject.defineProperty(__dcg_chunk_exports__, 'gb', { get: () => Hn });\nObject.defineProperty(__dcg_chunk_exports__, 'hb', { get: () => yn });\nObject.defineProperty(__dcg_chunk_exports__, 'ib', { get: () => gn });\nObject.defineProperty(__dcg_chunk_exports__, 'jb', { get: () => G });\nObject.defineProperty(__dcg_chunk_exports__, 'kb', { get: () => lo });\nObject.defineProperty(__dcg_chunk_exports__, 'lb', { get: () => o1 });\nObject.defineProperty(__dcg_chunk_exports__, 'mb', { get: () => Cr });\nObject.defineProperty(__dcg_chunk_exports__, 'nb', { get: () => Vz });\nObject.defineProperty(__dcg_chunk_exports__, 'ob', { get: () => tt });\nObject.defineProperty(__dcg_chunk_exports__, 'pb', { get: () => se });\nObject.defineProperty(__dcg_chunk_exports__, 'qb', { get: () => W });\nObject.defineProperty(__dcg_chunk_exports__, 'rb', { get: () => rt });\nObject.defineProperty(__dcg_chunk_exports__, 'sb', { get: () => tr });\nObject.defineProperty(__dcg_chunk_exports__, 'tb', { get: () => Zf });\nObject.defineProperty(__dcg_chunk_exports__, 'ub', { get: () => Uu });\nObject.defineProperty(__dcg_chunk_exports__, 'vb', { get: () => Rh });\nObject.defineProperty(__dcg_chunk_exports__, 'wb', { get: () => ae });\nObject.defineProperty(__dcg_chunk_exports__, 'xb', { get: () => ka });\nObject.defineProperty(__dcg_chunk_exports__, 'yb', { get: () => Ni });\nObject.defineProperty(__dcg_chunk_exports__, 'zb', { get: () => zz });\nObject.defineProperty(__dcg_chunk_exports__, 'Ab', { get: () => Ot });\nObject.defineProperty(__dcg_chunk_exports__, 'Bb', { get: () => U });\nObject.defineProperty(__dcg_chunk_exports__, 'Cb', { get: () => wh });\nObject.defineProperty(__dcg_chunk_exports__, 'Db', { get: () => ce });\nObject.defineProperty(__dcg_chunk_exports__, 'Eb', { get: () => $A });\nObject.defineProperty(__dcg_chunk_exports__, 'Fb', { get: () => WC });\nObject.defineProperty(__dcg_chunk_exports__, 'Gb', { get: () => j8 });\nObject.defineProperty(__dcg_chunk_exports__, 'Hb', { get: () => K8 });\nObject.defineProperty(__dcg_chunk_exports__, 'Ib', { get: () => Tr });\nObject.defineProperty(__dcg_chunk_exports__, 'Jb', { get: () => NM });\nObject.defineProperty(__dcg_chunk_exports__, 'Kb', { get: () => ew });\nObject.defineProperty(__dcg_chunk_exports__, 'Lb', { get: () => Ho });\nObject.defineProperty(__dcg_chunk_exports__, 'Mb', { get: () => oi });\nObject.defineProperty(__dcg_chunk_exports__, 'Nb', { get: () => Wz });\nObject.defineProperty(__dcg_chunk_exports__, 'Ob', { get: () => mr });\nObject.defineProperty(__dcg_chunk_exports__, 'Pb', { get: () => rS });\nObject.defineProperty(__dcg_chunk_exports__, 'Qb', { get: () => Qh });\nObject.defineProperty(__dcg_chunk_exports__, 'Rb', { get: () => Kh });\nObject.defineProperty(__dcg_chunk_exports__, 'Sb', { get: () => vS });\nObject.defineProperty(__dcg_chunk_exports__, 'Tb', { get: () => Wk });\nObject.defineProperty(__dcg_chunk_exports__, 'Ub', { get: () => iA });\nObject.defineProperty(__dcg_chunk_exports__, 'Vb', { get: () => Ld });\nObject.defineProperty(__dcg_chunk_exports__, 'Wb', { get: () => Gd });\nObject.defineProperty(__dcg_chunk_exports__, 'Xb', { get: () => qd });\nObject.defineProperty(__dcg_chunk_exports__, 'Yb', { get: () => LS });\nObject.defineProperty(__dcg_chunk_exports__, 'Zb', { get: () => FS });\nObject.defineProperty(__dcg_chunk_exports__, '_b', { get: () => uS });\nObject.defineProperty(__dcg_chunk_exports__, '$b', { get: () => h$ });\nObject.defineProperty(__dcg_chunk_exports__, 'ac', { get: () => TA });\nObject.defineProperty(__dcg_chunk_exports__, 'bc', { get: () => x$ });\nObject.defineProperty(__dcg_chunk_exports__, 'cc', { get: () => ub });\nObject.defineProperty(__dcg_chunk_exports__, 'dc', { get: () => ny });\nObject.defineProperty(__dcg_chunk_exports__, 'ec', { get: () => VS });\nObject.defineProperty(__dcg_chunk_exports__, 'fc', { get: () => BS });\nObject.defineProperty(__dcg_chunk_exports__, 'gc', { get: () => IA });\nObject.defineProperty(__dcg_chunk_exports__, 'hc', { get: () => P$ });\nObject.defineProperty(__dcg_chunk_exports__, 'ic', { get: () => PA });\nObject.defineProperty(__dcg_chunk_exports__, 'jc', { get: () => S$ });\nObject.defineProperty(__dcg_chunk_exports__, 'kc', { get: () => SA });\nObject.defineProperty(__dcg_chunk_exports__, 'lc', { get: () => C$ });\nObject.defineProperty(__dcg_chunk_exports__, 'mc', { get: () => B$ });\nObject.defineProperty(__dcg_chunk_exports__, 'nc', { get: () => U$ });\nObject.defineProperty(__dcg_chunk_exports__, 'oc', { get: () => z$ });\nObject.defineProperty(__dcg_chunk_exports__, 'pc', { get: () => pa });\nObject.defineProperty(__dcg_chunk_exports__, 'qc', { get: () => Kt });\nObject.defineProperty(__dcg_chunk_exports__, 'rc', { get: () => i8 });\nObject.defineProperty(__dcg_chunk_exports__, 'sc', { get: () => s8 });\nObject.defineProperty(__dcg_chunk_exports__, 'tc', { get: () => $S });\nObject.defineProperty(__dcg_chunk_exports__, 'uc', { get: () => X });\nObject.defineProperty(__dcg_chunk_exports__, 'vc', { get: () => Mn });\nObject.defineProperty(__dcg_chunk_exports__, 'wc', { get: () => ct });\nObject.defineProperty(__dcg_chunk_exports__, 'xc', { get: () => yo });\nObject.defineProperty(__dcg_chunk_exports__, 'yc', { get: () => si });\nObject.defineProperty(__dcg_chunk_exports__, 'zc', { get: () => _c });\nObject.defineProperty(__dcg_chunk_exports__, 'Ac', { get: () => Cre });\nObject.defineProperty(__dcg_chunk_exports__, 'Bc', { get: () => V5 });\nObject.defineProperty(__dcg_chunk_exports__, 'Cc', { get: () => _n });\nObject.defineProperty(__dcg_chunk_exports__, 'Dc', { get: () => ZM });\nObject.defineProperty(__dcg_chunk_exports__, 'Ec', { get: () => Vr });\nObject.defineProperty(__dcg_chunk_exports__, 'Fc', { get: () => ro });\nObject.defineProperty(__dcg_chunk_exports__, 'Gc', { get: () => fae });\nObject.defineProperty(__dcg_chunk_exports__, 'Hc', { get: () => Hx });\nObject.defineProperty(__dcg_chunk_exports__, 'Ic', { get: () => jw });\nObject.defineProperty(__dcg_chunk_exports__, 'Jc', { get: () => Oc });\nObject.defineProperty(__dcg_chunk_exports__, 'Kc', { get: () => cu });\nObject.defineProperty(__dcg_chunk_exports__, 'Lc', { get: () => ec });\nObject.defineProperty(__dcg_chunk_exports__, 'Mc', { get: () => tg });\nObject.defineProperty(__dcg_chunk_exports__, 'Nc', { get: () => oL });\nObject.defineProperty(__dcg_chunk_exports__, 'Oc', { get: () => ye });\nObject.defineProperty(__dcg_chunk_exports__, 'Pc', { get: () => dle });\nObject.defineProperty(__dcg_chunk_exports__, 'Qc', { get: () => gle });\nObject.defineProperty(__dcg_chunk_exports__, 'Rc', { get: () => _le });\nObject.defineProperty(__dcg_chunk_exports__, 'Sc', { get: () => Rle });\nObject.defineProperty(__dcg_chunk_exports__, 'Tc', { get: () => Dle });\nObject.defineProperty(__dcg_chunk_exports__, 'Uc', { get: () => Zi });\nObject.defineProperty(__dcg_chunk_exports__, 'Vc', { get: () => spe });\nObject.defineProperty(__dcg_chunk_exports__, 'Wc', { get: () => Lc });\nObject.defineProperty(__dcg_chunk_exports__, 'Xc', { get: () => ape });\nObject.defineProperty(__dcg_chunk_exports__, 'Yc', { get: () => PT });\nObject.defineProperty(__dcg_chunk_exports__, 'Zc', { get: () => ST });\nObject.defineProperty(__dcg_chunk_exports__, '_c', { get: () => _r });\nObject.defineProperty(__dcg_chunk_exports__, '$c', { get: () => Ppe });\nObject.defineProperty(__dcg_chunk_exports__, 'ad', { get: () => uB });\nObject.defineProperty(__dcg_chunk_exports__, 'bd', { get: () => pB });\nObject.defineProperty(__dcg_chunk_exports__, 'cd', { get: () => ha });\nObject.defineProperty(__dcg_chunk_exports__, 'dd', { get: () => LT });\nObject.defineProperty(__dcg_chunk_exports__, 'ed', { get: () => PB });\nObject.defineProperty(__dcg_chunk_exports__, 'fd', { get: () => mi });\nObject.defineProperty(__dcg_chunk_exports__, 'gd', { get: () => VT });\nObject.defineProperty(__dcg_chunk_exports__, 'hd', { get: () => rn });\nObject.defineProperty(__dcg_chunk_exports__, 'id', { get: () => xO });\nObject.defineProperty(__dcg_chunk_exports__, 'jd', { get: () => lt });\nObject.defineProperty(__dcg_chunk_exports__, 'kd', { get: () => yW });\nObject.defineProperty(__dcg_chunk_exports__, 'ld', { get: () => mR });\nObject.defineProperty(__dcg_chunk_exports__, 'md', { get: () => fR });\nObject.defineProperty(__dcg_chunk_exports__, 'nd', { get: () => yR });\nObject.defineProperty(__dcg_chunk_exports__, 'od', { get: () => sI });\nObject.defineProperty(__dcg_chunk_exports__, 'pd', { get: () => aI });\nObject.defineProperty(__dcg_chunk_exports__, 'qd', { get: () => Hl });\nObject.defineProperty(__dcg_chunk_exports__, 'rd', { get: () => wg });\nObject.defineProperty(__dcg_chunk_exports__, 'sd', { get: () => MG });\nObject.defineProperty(__dcg_chunk_exports__, 'td', { get: () => TI });\nObject.defineProperty(__dcg_chunk_exports__, 'ud', { get: () => II });\nObject.defineProperty(__dcg_chunk_exports__, 'vd', { get: () => lge });\nObject.defineProperty(__dcg_chunk_exports__, 'wd', { get: () => pge });\nObject.defineProperty(__dcg_chunk_exports__, 'xd', { get: () => A });\nObject.defineProperty(__dcg_chunk_exports__, 'yd', { get: () => kR });\nObject.defineProperty(__dcg_chunk_exports__, 'zd', { get: () => ZG });\nObject.defineProperty(__dcg_chunk_exports__, 'Ad', { get: () => XG });\nObject.defineProperty(__dcg_chunk_exports__, 'Bd', { get: () => WG });\nObject.defineProperty(__dcg_chunk_exports__, 'Cd', { get: () => jG });\nObject.defineProperty(__dcg_chunk_exports__, 'Dd', { get: () => HR });\nObject.defineProperty(__dcg_chunk_exports__, 'Ed', { get: () => EI });\nObject.defineProperty(__dcg_chunk_exports__, 'Fd', { get: () => b4 });\nObject.defineProperty(__dcg_chunk_exports__, 'Gd', { get: () => JG });\nObject.defineProperty(__dcg_chunk_exports__, 'Hd', { get: () => x4 });\nObject.defineProperty(__dcg_chunk_exports__, 'Id', { get: () => QG });\nObject.defineProperty(__dcg_chunk_exports__, 'Jd', { get: () => CI });\nObject.defineProperty(__dcg_chunk_exports__, 'Kd', { get: () => I4 });\nObject.defineProperty(__dcg_chunk_exports__, 'Ld', { get: () => $R });\nObject.defineProperty(__dcg_chunk_exports__, 'Md', { get: () => od });\nObject.defineProperty(__dcg_chunk_exports__, 'Nd', { get: () => P4 });\nObject.defineProperty(__dcg_chunk_exports__, 'Od', { get: () => S4 });\nObject.defineProperty(__dcg_chunk_exports__, 'Pd', { get: () => Xc });\nObject.defineProperty(__dcg_chunk_exports__, 'Qd', { get: () => Td });\nObject.defineProperty(__dcg_chunk_exports__, 'Rd', { get: () => E4 });\nObject.defineProperty(__dcg_chunk_exports__, 'Sd', { get: () => a2 });\nObject.defineProperty(__dcg_chunk_exports__, 'Td', { get: () => Of });\nObject.defineProperty(__dcg_chunk_exports__, 'Ud', { get: () => Af });\nObject.defineProperty(__dcg_chunk_exports__, 'Vd', { get: () => CQ });\nObject.defineProperty(__dcg_chunk_exports__, 'Wd', { get: () => TO });\nObject.defineProperty(__dcg_chunk_exports__, 'Xd', { get: () => vQ });\nObject.defineProperty(__dcg_chunk_exports__, 'Yd', { get: () => IO });\nObject.defineProperty(__dcg_chunk_exports__, 'Zd', { get: () => Zc });\nObject.defineProperty(__dcg_chunk_exports__, '_d', { get: () => RQ });\nObject.defineProperty(__dcg_chunk_exports__, '$d', { get: () => AQ });\nObject.defineProperty(__dcg_chunk_exports__, 'ae', { get: () => wQ });\nObject.defineProperty(__dcg_chunk_exports__, 'be', { get: () => PO });\nObject.defineProperty(__dcg_chunk_exports__, 'ce', { get: () => LQ });\nObject.defineProperty(__dcg_chunk_exports__, 'de', { get: () => OM });\nObject.defineProperty(__dcg_chunk_exports__, 'ee', { get: () => jK });\nObject.defineProperty(__dcg_chunk_exports__, 'fe', { get: () => JK });\nObject.defineProperty(__dcg_chunk_exports__, 'ge', { get: () => QK });\nObject.defineProperty(__dcg_chunk_exports__, 'he', { get: () => tee });\nObject.defineProperty(__dcg_chunk_exports__, 'ie', { get: () => nee });\nObject.defineProperty(__dcg_chunk_exports__, 'je', { get: () => AM });\nObject.defineProperty(__dcg_chunk_exports__, 'ke', { get: () => ree });\nObject.defineProperty(__dcg_chunk_exports__, 'le', { get: () => oee });\nObject.defineProperty(__dcg_chunk_exports__, 'me', { get: () => ax });\nObject.defineProperty(__dcg_chunk_exports__, 'ne', { get: () => T5 });\nObject.defineProperty(__dcg_chunk_exports__, 'oe', { get: () => fee });\nObject.defineProperty(__dcg_chunk_exports__, 'pe', { get: () => rw });\nObject.defineProperty(__dcg_chunk_exports__, 'qe', { get: () => sx });\nObject.defineProperty(__dcg_chunk_exports__, 're', { get: () => ow });\nObject.defineProperty(__dcg_chunk_exports__, 'se', { get: () => iw });\nObject.defineProperty(__dcg_chunk_exports__, 'te', { get: () => sw });\nObject.defineProperty(__dcg_chunk_exports__, 'ue', { get: () => aw });\nObject.defineProperty(__dcg_chunk_exports__, 've', { get: () => yee });\nObject.defineProperty(__dcg_chunk_exports__, 'we', { get: () => gee });\nObject.defineProperty(__dcg_chunk_exports__, 'xe', { get: () => I5 });\nObject.defineProperty(__dcg_chunk_exports__, 'ye', { get: () => hee });\nObject.defineProperty(__dcg_chunk_exports__, 'ze', { get: () => bee });\nObject.defineProperty(__dcg_chunk_exports__, 'Ae', { get: () => $be });\nObject.defineProperty(__dcg_chunk_exports__, 'Be', { get: () => c6 });\nObject.defineProperty(__dcg_chunk_exports__, 'Ce', { get: () => z2 });\nObject.defineProperty(__dcg_chunk_exports__, 'De', { get: () => k2 });\nObject.defineProperty(__dcg_chunk_exports__, 'Ee', { get: () => hf });\nObject.defineProperty(__dcg_chunk_exports__, 'Fe', { get: () => Xg });\nObject.defineProperty(__dcg_chunk_exports__, 'Ge', { get: () => bTe });\nObject.defineProperty(__dcg_chunk_exports__, 'He', { get: () => FI });\nObject.defineProperty(__dcg_chunk_exports__, 'Ie', { get: () => ad });\nObject.defineProperty(__dcg_chunk_exports__, 'Je', { get: () => tPe });\nObject.defineProperty(__dcg_chunk_exports__, 'Ke', { get: () => Wg });\nObject.defineProperty(__dcg_chunk_exports__, 'Le', { get: () => c3 });\nObject.defineProperty(__dcg_chunk_exports__, 'Me', { get: () => l3 });\nObject.defineProperty(__dcg_chunk_exports__, 'Ne', { get: () => m3 });\nObject.defineProperty(__dcg_chunk_exports__, 'Oe', { get: () => TD });\nObject.defineProperty(__dcg_chunk_exports__, 'Pe', { get: () => ID });\nObject.defineProperty(__dcg_chunk_exports__, 'Qe', { get: () => UI });\nObject.defineProperty(__dcg_chunk_exports__, 'Re', { get: () => W6 });\nObject.defineProperty(__dcg_chunk_exports__, 'Se', { get: () => n9 });\nObject.defineProperty(__dcg_chunk_exports__, 'Te', { get: () => vq });\nObject.defineProperty(__dcg_chunk_exports__, 'Ue', { get: () => Mq });\nObject.defineProperty(__dcg_chunk_exports__, 'Ve', { get: () => Cj });\nObject.defineProperty(__dcg_chunk_exports__, 'We', { get: () => Ej });\nObject.defineProperty(__dcg_chunk_exports__, 'Xe', { get: () => Nq });\nObject.defineProperty(__dcg_chunk_exports__, 'Ye', { get: () => qEe });\nObject.defineProperty(__dcg_chunk_exports__, 'Ze', { get: () => rP });\nObject.defineProperty(__dcg_chunk_exports__, '_e', { get: () => kq });\n\n    return __dcg_chunk_exports__;\n  })();"
  const __dcg_shared_module_exports__ = eval(__dcg_shared_module_source__);
  const __dcg_worker_source_exports__ = (function () {
    // worker.js
    const __dcg_worker_source__ = `
      // store the code for the worker module as a function that takes the shared module exports as an argument
      const __dcg_worker_module__ = (__dcg_shared_module_exports__) => {
` + "var n={},e=self;e.window=e;e.onmessage=function(a){let o=a.data&&a.data.connectionId;if(o)if(a.data.originalMessage.type===\"destroy\")delete n[o];else{let s=n[o];s||(s=new __dcg_shared_module_exports__['_e']((r,i)=>{e.postMessage({connectionId:o,originalMessage:{type:r,payload:i}})}),n[o]=s),s.processChangeSet(a.data.originalMessage)}};e.loadMessageQueue&&(e.loadMessageQueue.forEach(a=>{e.onmessage(a)}),delete e.loadMessageQueue);\n" + `
      };
      // execute the shared module store its exports
      const __dcg_worker_shared_module_exports__ = ${__dcg_shared_module_source__};
      // call the worker module, passing in the shared module exports
      __dcg_worker_module__(__dcg_worker_shared_module_exports__);`

    let createWorker;
    if (typeof Blob !== 'undefined' && URL && typeof URL.createObjectURL === 'function') {
      createWorker = () => {
        const workerURL = URL.createObjectURL(new Blob([__dcg_worker_source__], { type: 'application/javascript' }))
        const worker = new Worker(workerURL);
        worker.revokeObjectURL = () => {
          URL.revokeObjectURL(workerURL);
        }
        return worker;
      }
    } else {
      // Just for testing in Node
      createWorker = () => {
        (new Function(__dcg_worker_source__))();
      }
    }

    return {createWorker, default: {createWorker}};
  })();
  var B5=__dcg_shared_module_exports__['b'](()=>{});function Lr(r,e){pg==null||pg.notify(r,e)}function ry(r,e,t){pg==null||pg.leaveBreadcrumb(r,e,t)}var pg,bn=__dcg_shared_module_exports__['b'](()=>{});function u(r=void 0){let e=()=>r;return e.isDCGViewConst=!0,e}function ci(r){return typeof r=="function"&&!!r.isDCGViewConst}var ce=__dcg_shared_module_exports__['b'](()=>{});function U5(r){let e=r();if(typeof e=="string")return e;if(typeof e!="object")throw new Error(`Unsupported type returned from class getter: ${typeof e}`);return Object.keys(e).filter(t=>e[t]).join(" ")}function z5(r){let e=r.trim();return e?new Set(e.split(Sre)):new Set}function q5(r){let e=U5(r);if(ci(r))return{value:e};let t=z5(e);return{value:e,bindings:{onUpdate:o=>{let i=U5(r);if(e===i)return;let n=z5(i);for(let a of t.keys())n.has(a)||o.classList.remove(a);for(let a of n.keys())t.has(a)||o.classList.add(a);t=n,e=i}}}}var Sre,H5=__dcg_shared_module_exports__['b'](()=>{ce();Sre=/\s+/});function K5(r){return e=>{if(typeof e!="function")throw new Error(`The ${r} attribute expects a function for the value`);if(ci(e))throw new Error(`The ${r} attribute does not expect a const for the value`);return{bindings:{[r]:e}}}}var W5=__dcg_shared_module_exports__['b'](()=>{ce()});function OS(r,e,t){return t===void 0?r.removeAttribute(e):r.setAttribute(e,`${t}`)}var zL=__dcg_shared_module_exports__['b'](()=>{});function $5(r){let e=r();if(typeof e=="string")return e;if(!e||typeof e!="object")throw new Error(`Unsupported type returned from style getter: ${typeof e}`);return Object.entries(e).filter(([t,o])=>e.hasOwnProperty(t)&&o!==null&&o!==void 0).map(([t,o])=>`${t}:${o}`).join(";")}function j5(r){let e=$5(r),t=ci(r)?void 0:{onUpdate:o=>{let i=$5(r);e!==i&&(OS(o,"style",i),e=i)}};return{value:e,bindings:t}}var Y5=__dcg_shared_module_exports__['b'](()=>{zL();ce()});function Qi(r,e){qL[r]=e}function X5(r){return qL.hasOwnProperty(r)}function J5(r,e){let t=qL[r];return t(e)}var qL,RS=__dcg_shared_module_exports__['b'](()=>{qL={}});function Z5(r,e,t,o){r.forEach(i=>{if(Un(i)){let n=al(i);n.renderTo(t,e),n._parentElement=o;return}if(ci(i)){t.appendChild(document.createTextNode(String(i())));return}if(typeof i=="function"){e.bindText(t,()=>{let n=i();return n==null?"":typeof n=="string"?n:String(n)});return}t.appendChild(document.createTextNode(String(i)))})}var ug,FS,GS,HL=__dcg_shared_module_exports__['b'](()=>{ce();ya();ug=class{},FS=class extends ug{constructor(t,o){super();this.tagName=t;this.props=o}findFirstRootDOMNode(){return this._element}findLastRootDOMNode(){return this._element}renderTo(t,o){if(this._element=document.createElement(this.tagName),o.bindAttributesTo(this._element,this.props),t.appendChild(this._element),"children"in this.props){let i=Array.isArray(this.props.children)?this.props.children:[this.props.children];Z5(i,o,this._element,this)}}},GS=class extends ug{constructor(t=[]){super();this.children=t;this._startPlaceholder=document.createTextNode(""),t.length?this._endPlaceholder=document.createTextNode(""):this._endPlaceholder=this._startPlaceholder}findFirstRootDOMNode(){return this._startPlaceholder}findLastRootDOMNode(){return this._endPlaceholder}renderTo(t,o){t.appendChild(this._startPlaceholder),Z5(this.children,o,t,this),this._endPlaceholder!==this._startPlaceholder&&t.appendChild(this._endPlaceholder)}}});function Q5(r,e){if(e!=null){if(typeof r!="string")throw new Error("Must pass a string for an EventHandler name");if(typeof e!="function")throw new Error("Must pass a function for an EventHandler callback");return{bindings:{onMount(t){t&&(t[r.toLowerCase()]=(o,...i)=>{o&&e.apply(t,[o,...i])})}}}}}var eU=__dcg_shared_module_exports__['b'](()=>{});function tU(r,e){let t=e(),o;return ci(e)||(o={onUpdate(i){if(!i)return;let n=e();n!==t&&(t=n,OS(i,r,n))}}),{value:t,bindings:o}}var rU=__dcg_shared_module_exports__['b'](()=>{zL();ce()});function oU(r){return r.startsWith("on")&&r[2]===r[2].toUpperCase()}var iU=__dcg_shared_module_exports__['b'](()=>{});function nU(r,e){if(typeof e!="function")throw new Error(`Expected the "${r}" attribute to be a function, but got ${JSON.stringify(e)} instead.`);return X5(r)?J5(r,e):oU(r)?Q5(r,e):tU(r,e)}var aU=__dcg_shared_module_exports__['b'](()=>{eU();rU();RS();iU()});function sU(r,e,t){let o=r._bindings[e];r._bindings[e]=o?[...o,t]:[t]}function bs(r,e){var o;((o=r._bindings[e])!=null?o:[]).forEach(i=>i())}var KL=__dcg_shared_module_exports__['b'](()=>{});function iy(r){oy.push(r)}function WL(r){let e=oy.filter(t=>t!==r);oy.length=0,oy.push(...e)}function $L(r,e){if(NS(e)){let o=`[${e._viewName}]`,i=e.traceViewHierarchy(),n=i.ancestors.length>0?`
View Hierarchy:
${i.formatted}`:"";r=`${r} ${o}${n}`}let t=new Error(r);console.warn(t),oy.forEach(o=>o(t))}var oy,jL=__dcg_shared_module_exports__['b'](()=>{Ka();oy=[]});var NS,jr,Ka=__dcg_shared_module_exports__['b'](()=>{aU();KL();ce();ya();HL();jL();NS=r=>r instanceof jr,jr=class extends ug{constructor(t){var o,i;super();this.props=t;this._childViews=[];this._bindings={};this._isMounted=!1;this._willBeUnmounted=!1;this.const=u;this._viewName=(i=(o=this.constructor)==null?void 0:o.name)!=null?i:"Anonymous DCGView"}init(){}template(){throw new Error("template() must be implemented")}_construct(){var o;(o=this.init)==null||o.call(this);let t=this.template();if(!Un(t))throw new Error("template() must return a DCGElement");return this._elementSpec=t,this}bindFn(t){return t.bind(this)}bindIfMounted(t){return this.bindFn((...o)=>{if(this._isMounted)return t.apply(this,o)})}traceViewHierarchy(){let t=[],o=this._parentElement;for(;o;)t.unshift(o),o=o._parentElement;let i=a=>NS(a)&&!(a._viewName==="Switch"&&NS(a._parentElement)&&a._parentElement._viewName==="If")&&!["ForWrapper","SwitchWrapper"].includes(a._viewName),n=[...t,this].filter(i).map((a,s)=>"  ".repeat(s)+"<"+a._viewName+">").join(`
`);return{ancestors:t,formatted:n}}renderTo(t,o){o&&o._childViews.push(this),this._element=al(this._elementSpec),this._element._parentElement=this,this._element.renderTo(t,this)}findFirstRootDOMNode(){return this._element.findFirstRootDOMNode()}findLastRootDOMNode(){return this._element.findLastRootDOMNode()}findAllRootDOMNodes(){let t=this.findFirstRootDOMNode(),o=this.findLastRootDOMNode(),i=[],n=t;for(;n&&(i.push(n),n!==o);)n=n.nextSibling;return i}update(){var t,o,i;if(!this._isMounted)return $L("Trying to update view that is not mounted. Ignoring update.",this);this.shouldUpdate&&!this.shouldUpdate()||((t=this.willUpdate)==null||t.call(this),bs(this,"willUpdate"),bs(this,"onUpdate"),(o=this.onUpdate)==null||o.call(this),this.updateChildren(),bs(this,"didUpdate"),(i=this.didUpdate)==null||i.call(this))}updateChildren(){this._childViews.forEach(t=>t.update())}bindText(t,o){let i=o(),n=document.createTextNode(i);t.appendChild(n),sU(this,"onUpdate",()=>{let a=o();i!==a&&(n.nodeValue=a,i=a)})}addAttributeBindingsTo(t,o){Object.entries(o).forEach(([i,n])=>{if(!n)return;if(["onMount","didMount","willUnmount","willUpdate","onUpdate","didUpdate"].includes(i)&&(n=n.bind(null,t)),["willMount","onMount","didMount","willUnmount","onUnmount","didUnmount"].includes(i)){let c=!1,p=n;n=(...h)=>{if(c){$L(`${i} is a one-time binding but was called multiple times`,this);return}c=!0,p(...h)}}let l=this._bindings[i];this._bindings[i]=l?[...l,n]:[n]})}bindAttributesTo(t,o){Object.keys(o).filter(i=>i!=="children").forEach(i=>{let n=nU(i,o[i]);n&&("value"in n&&n.value!==void 0&&t.setAttribute(i,String(n.value)),n.bindings&&this.addAttributeBindingsTo(t,n.bindings))})}}});function Un(r){return!!(r!=null&&r.isDCGElementSpec)}function al(r){switch(r.type){case"fragment":return new GS(r.children);case"element":return new FS(r.tagName,r.props);case"view":let e=new r.viewClass(r.props)._construct();return r.viewName&&(e._viewName=r.viewName),e;default:}throw new Error("could not init DCGElementSpec.")}function vi(r,e={}){let t=[];if("children"in e&&(Array.isArray(e.children)?e.children:[e.children]).forEach(i=>lU(i,t)),r===ny)return{isDCGElementSpec:!0,type:"fragment",children:t};if(typeof r=="string")return{isDCGElementSpec:!0,type:"element",tagName:r,props:{...e,children:t}};if(r===jr||r.prototype instanceof jr){let o;return t.length===1?o=t[0]:t.length>1&&(o=t),{isDCGElementSpec:!0,type:"view",viewClass:r,props:{...e,children:o}}}throw new Error(`Expected type to be a Fragment symbol, string, or View class, but got ${r}.`)}var ny,lU,ya=__dcg_shared_module_exports__['b'](()=>{HL();Ka();ny=Symbol(),lU=(r,e)=>{r!=null&&(Array.isArray(r)?r.forEach(t=>lU(t,e)):e.push(r))}});function d(r,e,...t){return vi(r,!("key"in e)&&t.length>=1?{...e,key:t[0]}:e)}function _(r,e,...t){return d(r,e,...t)}var tr,ie=__dcg_shared_module_exports__['b'](()=>{ya();tr=ny});var VS,cU=__dcg_shared_module_exports__['b'](()=>{ie();Ka();VS=class extends jr{constructor(){super(...arguments),this._viewName="Checkbox"}computeChecked(){return!!this.props.checked()}template(){if(!this.props.checked)throw new Error('<Checkbox> expects a "checked={}" prop');if(!this.props.onChange)throw new Error('<Checkbox> expects an "onChange={}" prop');let e={...this.props,type:this.const("checkbox"),checked:this.const(this.computeChecked()?!0:void 0),onChange:t=>{this.props.onChange(t.target.checked),this._isMounted&&this.update()},onMount:t=>{this.rootDOM=t,this.props.onMount&&this.props.onMount(t)}};return d("input",{...e})}didUpdate(){let e=this.computeChecked();this.rootDOM.checked!==e&&(this.rootDOM.checked=e)}}});var dU,pU=__dcg_shared_module_exports__['b'](()=>{dU=r=>{let e=r.length,t=new Array(e),o=new Array(e+1),i=0,n;for(let l=0;l<e;l++){if(r[o[i]]<r[l])n=i+1;else{let c=1,p=i-1;for(;c<=p;){let h=Math.ceil((c+p)/2);r[o[h]]<r[l]?c=h+1:p=h-1}n=c}t[l]=o[n-1],o[n]=l,n>i&&(i=n)}let a=new Array(i),s=o[i];for(let l=i-1;l>=0;l--)a[l]=r[s],s=t[s];return a}});function uU(r,e){let t=new Map(e.map((l,c)=>[l,c])),o=r.filter(l=>!t.has(l)),i=r.filter(l=>t.has(l)).map(l=>t.get(l)),n=dU(i),a=new Set(n.map(l=>e[l])),s=e.reduceRight((l,c,p)=>{if(!a.has(c)){let h=p+1;l.push({key:c,...h in e?{beforeKey:e[h]}:{}})}return l},[]);return{removes:o,inserts:s}}var hU=__dcg_shared_module_exports__['b'](()=>{pU()});function YL(r,e,t){if(!e||e.nodeType!==1)throw new Error("Must pass an HTMLElement for the node");if(e._mountedDCGView)throw new Error("This node is already mounted by a view");let o=new r(t)._construct(),i=document.createDocumentFragment();return o.renderTo(i),e.innerHTML="",hg(o),e._mountedDCGView=o,e.appendChild(i),gg(o),mg(o),o}function XL(r){let e=r._mountedDCGView;if(!e)throw new Error("This node is not mounted by a DCGView");fg(e),r.innerHTML="",delete r._mountedDCGView,bg(e),yg(e)}function hg(r){r.willMount&&r.willMount(),bs(r,"willMount"),r._childViews.forEach(hg)}function gg(r){r._isMounted=!0,r.onMount&&r.onMount(),bs(r,"onMount"),r._childViews.forEach(gg)}function mg(r){r.didMount&&r.didMount(),bs(r,"didMount"),r._childViews.forEach(mg)}function fg(r){r.willUnmount&&r.willUnmount(),bs(r,"willUnmount"),r._childViews.forEach(fg)}function bg(r){r._isMounted=!1,r._childViews.forEach(bg),bs(r,"onUnmount"),r.onUnmount&&r.onUnmount()}function yg(r){r._childViews.forEach(yg),bs(r,"didUnmount"),r.didUnmount&&r.didUnmount()}function BS(r,e){let t=document.createDocumentFragment();return r.renderTo(t,e),t}var US=__dcg_shared_module_exports__['b'](()=>{KL()});var gU,JL,ZL,QL,zS,xg,mU=__dcg_shared_module_exports__['b'](()=>{ie();hU();ce();ya();ya();US();Ka();gU=r=>{if(Array.isArray(r))throw new Error(`<For> expects a single child. You passed ${r.length}.`);if(Un(r))throw new Error("<For> expects a function that constructs a DCGElement. You passed a DCGElement directly");if(typeof r!="function"){let e=JSON.stringify(r);throw new Error(`<For> expects a function that constructs a DCGElement. You passed ${e}`)}if(ci(r))throw new Error("<For> expects a function that constructs a DCGElement. You passed a constant")},JL=class extends jr{constructor(){super(...arguments),this._viewName="For.Simple"}template(){let{children:e}=this.props;return gU(e),d(xg,{each:this.props.each,children:(t,o)=>e(t(),o)},t=>t)}},ZL=class extends jr{constructor(){super(...arguments),this._viewName="For.Count"}makeStepsArray(){let e=this.props.from?this.props.from():0,t=Math.floor(this.props.count());return!isFinite(e)||!isFinite(t)?[]:Array.from({length:t},(o,i)=>e+i)}template(){return d(xg,{each:()=>this.makeStepsArray(),children:e=>this.props.children(e())},e=>e)}},QL=class extends jr{constructor(){super(...arguments),this._viewName="ForWrapper"}template(){return this.props.children}},zS=class zS extends jr{constructor(){super(...arguments),this._viewName="For",this._keyToData=new Map,this._keyToView=new Map}getKeys(){this._keyToData.clear();let e=this.props.each();if(!Array.isArray(e))throw new Error("<For each={}> must return an array");let t=e.map((o,i)=>this.props.key(o,i,e));return t.forEach((o,i)=>{if(this._keyToData.has(o))throw new Error(`The key: ${JSON.stringify(o)} is not unique`);this._keyToData.set(o,{item:e[i],index:i})}),t}createViewForKey(e){let t=this._keyToData.get(e),o=this._viewFunction.call(this,()=>(this._keyToData.has(e)&&(t=this._keyToData.get(e)),t.item),()=>(this._keyToData.has(e)&&(t=this._keyToData.get(e)),t.index));if(Un(o)&&o.type==="view"){let n=al(o);return this._keyToView.set(e,n),n}let i=al(vi(QL,{children:o}));return this._keyToView.set(e,i),i}detachAllRemovedViews(){let e=this._childViews,t=0;for(let o=0;o<e.length;o++){let i=e[o];i._willBeUnmounted?t++:e[o-t]=i}e.splice(e.length-t,t)}findFirstRootDOMNode(){return this._startPlaceholder.findFirstRootDOMNode()}findLastRootDOMNode(){return this._endPlaceholder.findLastRootDOMNode()}updateChildren(){let e=this._keys,t=this.getKeys();this._keys=t;let o=uU(e,t),i=[];for(let a=o.removes.length-1;a>=0;a--){let s=o.removes[a],l=this._keyToView.get(s);fg(l),this._keyToView.delete(s),l._willBeUnmounted=!0,l.findAllRootDOMNodes().forEach(c=>c.remove()),i.push(l)}i.length>0&&(this.detachAllRemovedViews(),i.forEach(bg),i.forEach(yg));let n=[];for(let a=o.inserts.length-1;a>=0;a--){let s=o.inserts[a].key;if(this._keyToView.has(s))continue;let l=this.createViewForKey(s);BS(l,this),n.push(l)}n.forEach(hg),o.inserts.forEach(a=>{let s=this._keyToView.get(a.key).findAllRootDOMNodes(),l;"beforeKey"in a?l=this._keyToView.get(a.beforeKey).findFirstRootDOMNode():l=this.findLastRootDOMNode(),s.forEach(c=>{l.before(c)})}),n.forEach(gg),n.forEach(mg);for(let a=0;a<this._childViews.length-n.length;a++)this._childViews[a].update()}renderTo(e,t){super.renderTo(e,t),this._startPlaceholder=this._element;for(let o of this._keys)this._keyToView.get(o).renderTo(e,this);this._endPlaceholder=al(vi(ny)),this._endPlaceholder.renderTo(e,t)}template(){if(typeof this.props.each!="function")throw new Error("<For each={}> must be a function");if(!("children"in this.props))throw new Error("<For> expects a child.");let{children:e}=this.props;return gU(e),this._viewFunction=e,this._keys=this.getKeys(),this._keys.map(t=>{let o=this.createViewForKey(t);return o._parentElement=this,o}),d(tr,{})}};zS.Simple=JL,zS.Count=ZL;xg=zS});var eP,Wa,vg=__dcg_shared_module_exports__['b'](()=>{ie();ce();ya();US();Ka();eP=class extends jr{constructor(){super(...arguments),this._viewName="SwitchWrapper"}template(){return this.props.children}},Wa=class extends jr{constructor(){super(...arguments),this._viewName="Switch"}updateKey(){this._key=this.props.key()}createViewSpec(){var t;let e=(t=this._viewFunction(this._key))!=null?t:d(tr,{});return vi(eP,{children:e})}createView(){let e=this.createViewSpec(),t=al(e);return t._parentElement=this,t}template(){if(typeof this.props.key!="function")throw new Error("<Switch key={}> must be a function");if(!("children"in this.props))throw new Error("<Switch> expects a child.");let{children:e}=this.props;if(Array.isArray(e))throw new Error(`<Switch> expects a single child. You passed ${e.length}.`);if(Un(e))throw new Error("<Switch> expects a function that constructs a DCGElement. You passed a DCGElement directly");if(typeof e!="function"){let t=JSON.stringify(e);throw new Error("<Switch> expects a function that constructs a DCGElement. You passed "+t)}if(ci(e))throw new Error("<Switch> expects a function that constructs a DCGElement. You passed a constant");return this._viewFunction=e,this.updateKey(),this.createViewSpec()}updateChildren(){let e=this._key;this.updateKey();let t=this._key;if(e===t){this._element.update();return}let o=this.findAllRootDOMNodes(),i=document.createTextNode("");o[0].before(i),fg(this._element),this._childViews=[],o.forEach(a=>a.remove()),bg(this._element),yg(this._element),this._element=this.createView();let n=BS(this._element,this);hg(this._element),i.before(n),i.remove(),gg(this._element),mg(this._element)}}});var Xt,sl=__dcg_shared_module_exports__['b'](()=>{ie();vg();Ka();Xt=class extends jr{template(){return d(Wa,{children:e=>e?this.props.children:void 0},()=>this.props.when())}}});var qS,fU=__dcg_shared_module_exports__['b'](()=>{ie();sl();Ka();qS=class extends jr{template(){return d(Xt,{when:()=>!this.props.when(),children:this.props.children})}}});var HS,bU=__dcg_shared_module_exports__['b'](()=>{ce();ya();vg();Ka();HS=class extends jr{constructor(){super(...arguments),this._viewName="If"}template(){let{predicate:e}=this.props;if(typeof e!="function")throw new Error("<If predicate={}> must be a function");if(!("children"in this.props))throw new Error("<If> expects a child.");if(Array.isArray(this.props.children))throw new Error(`<If> expects a single child. You passed ${this.props.children.length}.`);let t=this.props.children;if(Un(t))throw new Error("<If> expects a function that constructs a DCGElement. You passed a DCGElement directly");if(typeof t!="function"){let n=JSON.stringify(t);throw new Error(`<If> expects a function that constructs a DCGElement. You passed ${n}`)}if(ci(t))throw new Error("<If> expects a function that constructs a DCGElement. You passed a constant");return vi(Wa,{key:()=>!!e(),children:n=>n?t():void 0})}}});function KS(r,e,t){return{...vi(Wa,{key:()=>{let i=r();return i!=null},children:i=>i?e(r):t==null?void 0:t()}),viewName:"IfDefined"}}var tP=__dcg_shared_module_exports__['b'](()=>{ya();vg()});function wg(r,e,t){let o=typeof t=="undefined",i,n;return o?(i=r,n=a=>{var l;let s=e;return(l=s[a])==null?void 0:l.call(s,()=>a)}):(i=()=>{let a=r();return a&&a[e]},n=a=>{var l;let s=t;return(l=s[a])==null?void 0:l.call(s,r)}),{...vi(Wa,{key:i,children:n}),viewName:"SwitchUnion"}}var WS=__dcg_shared_module_exports__['b'](()=>{ya();vg()});function Sg(r,e){return{...wg(()=>r()?"true":"false",e),viewName:"IfElse"}}var rP=__dcg_shared_module_exports__['b'](()=>{WS()});var $S,yU=__dcg_shared_module_exports__['b'](()=>{ie();Ka();$S=class extends jr{constructor(){super(...arguments),this._viewName="Input"}computeValue(){let e=this.props.value();return e==null?"":`${e}`}template(){let{value:e,onInput:t,onEnterPressed:o,disabled:i,readOnly:n}=this.props;if(!e)throw new Error('<Input> expects a "value={}" prop');let a={...this.props,value:this.const(this.computeValue()),onInput:(s=>{t==null||t(s.target.value),this._isMounted&&this.update()}).bind(this)};return o&&(a.onKeyPress=s=>{s.which===13&&o()}),i&&(a.disabled=()=>i()?!0:void 0),n&&(a.readOnly=()=>n()?!0:void 0),a.hasOwnProperty("tabIndex")||(a.tabIndex=()=>i&&i()?"-1":"0"),a.onMount=s=>{this.rootDOM=s,this.props.onMount&&this.props.onMount(s)},d("input",{...a})}didUpdate(){let e=this.computeValue();this.rootDOM.value!==e&&(this.rootDOM.value=e)}}});var jS,xU=__dcg_shared_module_exports__['b'](()=>{ya();Ka();jS=class extends jr{constructor(){super(...arguments),this._viewName="Textarea"}computeValue(){let e=this.props.value();return e==null?"":`${e}`}template(){let{value:e,onInput:t,disabled:o,readOnly:i}=this.props;if(!e)throw new Error('<Textarea> expects a "value={}" prop');if(!t)throw new Error('<Textarea> expects an "onInput={}" prop');let n={...this.props,children:this.const(this.computeValue()),onInput:(a=>{this.props.onInput(a.target.value),this._isMounted&&this.update()}).bind(this)};return o&&(n.disabled=()=>o()?!0:void 0),i&&(n.readOnly=()=>i()?!0:void 0),n.onMount=a=>{this.rootDOM=a,this.props.onMount&&this.props.onMount(a)},delete n.value,vi("textarea",n)}didUpdate(){let e=this.computeValue();this.rootDOM.value!==e&&(this.rootDOM.value=e)}}});var ay={};__dcg_shared_module_exports__['d'](ay,{Checkbox:()=>VS,For:()=>xg,Hide:()=>qS,If:()=>HS,IfDefined:()=>KS,IfElse:()=>Sg,Input:()=>$S,Show:()=>Xt,Switch:()=>Wa,SwitchUnion:()=>wg,Textarea:()=>jS});var du=__dcg_shared_module_exports__['b'](()=>{cU();mU();fU();bU();tP();rP();yU();sl();vg();WS();xU()});var oP={};__dcg_shared_module_exports__['d'](oP,{Components:()=>ay,View:()=>jr,addCustomAttribute:()=>Qi,addWarningHandler:()=>iy,const:()=>u,isConst:()=>ci,isSpec:()=>Un,mountToNode:()=>YL,removeWarningHandler:()=>WL,unmountFromNode:()=>XL});var iP=__dcg_shared_module_exports__['b'](()=>{H5();W5();Y5();RS();du();ce();ya();RS();US();Ka();jL();Qi("style",j5);Qi("class",q5);["willMount","onMount","didMount","willUnmount","onUnmount","didUnmount","willUpdate","onUpdate","didUpdate"].forEach(r=>Qi(r,K5(r)))});var nP={};__dcg_shared_module_exports__['d'](nP,{Components:()=>ay,View:()=>jr,addCustomAttribute:()=>Qi,addWarningHandler:()=>iy,const:()=>u,default:()=>Tre,isConst:()=>ci,isSpec:()=>Un,mountToNode:()=>YL,removeWarningHandler:()=>WL,unmountFromNode:()=>XL});var Tre,vU=__dcg_shared_module_exports__['b'](()=>{iP();iP();Tre=oP});function e0(r){return r==null?r+"":typeof r=="object"||typeof r=="function"?QS[PU.call(r)]||"object":typeof r}function aP(r){var e=!!r&&"length"in r&&r.length,t=e0(r);return fc(r)||Cg(r)?!1:t==="array"||e===0||typeof e=="number"&&e>0&&e-1 in r}function Tg(r,e){return r.nodeName&&r.nodeName.toLowerCase()===e.toLowerCase()}function Pre(r,e){return e.toUpperCase()}function hc(r){return r.replace(Are,"ms-").replace(Lre,Pre)}function cy(){this.expando=he.expando+cy.uid++}function Rre(r){return r==="true"?!0:r==="false"?!1:r==="null"?null:r===+r+""?+r:Dre.test(r)?JSON.parse(r):r}function wU(r,e,t){var o;if(t===void 0&&r.nodeType===1)if(o="data-"+e.replace(Ore,"-$&").toLowerCase(),t=r.getAttribute(o),typeof t=="string"){try{t=Rre(t)}catch(i){}gc.set(r,e,t)}else t=void 0;return t}function Gre(r,e,t,o){var i,n,a=20,s=o?function(){return o.cur()}:function(){return he.css(r,e,"")},l=s(),c=t&&t[3]||(he.cssNumber[e]?"":"px"),p=r.nodeType&&(he.cssNumber[e]||c!=="px"&&+l)&&t0.exec(he.css(r,e));if(p&&p[3]!==c){for(l=l/2,c=c||p[3],p=+l||1;a--;)he.style(r,e,p+c),(1-n)*(1-(n=s()/l||.5))<=0&&(a=0),p=p/n;p=p*2,he.style(r,e,p+c),t=t||[]}return t&&(p=+p||+l||0,i=t[1]?p+(t[1]+1)*t[2]:+t[2],o&&(o.unit=c,o.start=p,o.end=i)),i}function Eg(){return!0}function Ig(){return!1}function Nre(r,e){return r===Vre()==(e==="focus")}function Vre(){try{return di.activeElement}catch(r){}}function cP(r,e,t,o,i,n){var a,s;if(typeof e=="object"){typeof t!="string"&&(o=o||t,t=void 0);for(s in e)cP(r,s,t,o,e[s],n);return r}if(o==null&&i==null?(i=t,o=t=void 0):i==null&&(typeof t=="string"?(i=o,o=void 0):(i=o,o=t,t=void 0)),i===!1)i=Ig;else if(!i)return r;return n===1&&(a=i,i=function(l){return he().off(l),a.apply(this,arguments)},i.guid=a.guid||(a.guid=he.guid++)),r.each(function(){he.event.add(this,e,i,o,t)})}function ZS(r,e,t){if(!t){fo.get(r,e)===void 0&&he.event.add(r,e,Eg);return}fo.set(r,e,!1),he.event.add(r,e,{namespace:!1,handler:function(o){var i,n,a=fo.get(this,e);if(o.isTrigger&1&&this[e]){if(a.length)(he.event.special[e]||{}).delegateType&&o.stopPropagation();else if(a=YS.call(arguments),fo.set(this,e,a),i=t(this,e),this[e](),n=fo.get(this,e),a!==n||i?fo.set(this,e,!1):n={},a!==n)return o.stopImmediatePropagation(),o.preventDefault(),n&&n.value}else a.length&&(fo.set(this,e,{value:he.event.trigger(he.extend(a[0],he.Event.prototype),a.slice(1),this)}),o.stopImmediatePropagation())}})}function sy(r,e,t){var o,i,n,a,s=r.style;return t=t||r0(r),t&&(a=t.getPropertyValue(e)||t[e],a===""&&!GU(r)&&(a=he.style(r,e)),!pi.pixelBoxStyles()&&uP.test(a)&&Bre.test(e)&&(o=s.width,i=s.minWidth,n=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=t.width,s.width=o,s.minWidth=i,s.maxWidth=n)),a!==void 0?a+"":a}function VU(r,e){return{get:function(){if(r()){delete this.get;return}return(this.get=e).apply(this,arguments)}}}function Ure(r){for(var e=r[0].toUpperCase()+r.slice(1),t=TU.length;t--;)if(r=TU[t]+e,r in BU)return r}function EU(r){var e=he.cssProps[r]||kU[r];return e||(r in BU?r:kU[r]=Ure(r)||r)}function UU(r,e,t){var o=t0.exec(e);return o?Math.max(0,o[2]-(t||0))+(o[3]||"px"):e}function dP(r,e,t,o,i,n){var a=e==="width"?1:0,s=0,l=0;if(t===(o?"border":"content"))return 0;for(;a<4;a+=2)t==="margin"&&(l+=he.css(r,t+Sd[a],!0,i)),o?(t==="content"&&(l-=he.css(r,"padding"+Sd[a],!0,i)),t!=="margin"&&(l-=he.css(r,"border"+Sd[a]+"Width",!0,i))):(l+=he.css(r,"padding"+Sd[a],!0,i),t!=="padding"?l+=he.css(r,"border"+Sd[a]+"Width",!0,i):s+=he.css(r,"border"+Sd[a]+"Width",!0,i));return!o&&n>=0&&(l+=Math.max(0,Math.ceil(r["offset"+e[0].toUpperCase()+e.slice(1)]-n-l-s-.5))||0),l}function _U(r,e,t){var o=r0(r),i=!pi.boxSizingReliable()||t,n=i&&he.css(r,"boxSizing",!1,o)==="border-box",a=n,s=sy(r,e,o),l="offset"+e[0].toUpperCase()+e.slice(1);if(uP.test(s)){if(!t)return s;s="auto"}return(!pi.boxSizingReliable()&&n||!pi.reliableTrDimensions()&&Tg(r,"tr")||s==="auto"||!parseFloat(s)&&he.css(r,"display",!1,o)==="inline")&&r.getClientRects().length&&(n=he.css(r,"boxSizing",!1,o)==="border-box",a=l in r,a&&(s=r[l])),s=parseFloat(s)||0,s+dP(r,e,t||(n?"border":"content"),a,o,s)+"px"}function pP(r,e,t,o){var i;if(Array.isArray(e))he.each(e,function(n,a){t||Hre.test(r)?o(r,a):pP(r+"["+(typeof a=="object"&&a!=null?n:"")+"]",a,t,o)});else if(!t&&e0(e)==="object")for(i in e)pP(r+"["+i+"]",e[i],t,o);else o(r,e)}var mc,kre,YS,Ere,LU,Ire,QS,PU,XS,DU,Cre,pi,fc,Cg,di,OU,he,_re,RU,Mre,lP,ly,Are,Lre,JS,fo,gc,Dre,Ore,FU,t0,Sd,kg,GU,Fre,sP,SU,uP,r0,NU,Bre,TU,BU,kU,zre,IU,qre,CU,MU,AU,Hre,Kre,Wre,$re,re,Vt=__dcg_shared_module_exports__['b'](()=>{"use strict";mc=[],kre=Object.getPrototypeOf,YS=mc.slice,Ere=mc.flat?function(r){return mc.flat.call(r)}:function(r){return mc.concat.apply([],r)},LU=mc.push,Ire=mc.indexOf,QS={},PU=QS.toString,XS=QS.hasOwnProperty,DU=XS.toString,Cre=DU.call(Object),pi={},fc=function(e){return typeof e=="function"&&typeof e.nodeType!="number"&&typeof e.item!="function"},Cg=function(e){return e!=null&&e===e.window},di=window.document;OU="3.6.0",he=function(r,e){return new he.fn.init(r,e)};he.fn=he.prototype={jquery:OU,constructor:he,length:0,toArray:function(){return YS.call(this)},get:function(r){return r==null?YS.call(this):r<0?this[r+this.length]:this[r]},pushStack:function(r){var e=he.merge(this.constructor(),r);return e.prevObject=this,e},each:function(r){return he.each(this,r)},map:function(r){return this.pushStack(he.map(this,function(e,t){return r.call(e,t,e)}))},slice:function(){return this.pushStack(YS.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(he.grep(this,function(r,e){return(e+1)%2}))},odd:function(){return this.pushStack(he.grep(this,function(r,e){return e%2}))},eq:function(r){var e=this.length,t=+r+(r<0?e:0);return this.pushStack(t>=0&&t<e?[this[t]]:[])},end:function(){return this.prevObject||this.constructor()},push:LU,sort:mc.sort,splice:mc.splice};he.extend=he.fn.extend=function(){var r,e,t,o,i,n,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[s]||{},s++),typeof a!="object"&&!fc(a)&&(a={}),s===l&&(a=this,s--);s<l;s++)if((r=arguments[s])!=null)for(e in r)o=r[e],!(e==="__proto__"||a===o)&&(c&&o&&(he.isPlainObject(o)||(i=Array.isArray(o)))?(t=a[e],i&&!Array.isArray(t)?n=[]:!i&&!he.isPlainObject(t)?n={}:n=t,i=!1,a[e]=he.extend(c,n,o)):o!==void 0&&(a[e]=o));return a};he.extend({expando:"jQuery"+(OU+Math.random()).replace(/\D/g,""),isReady:!0,error:function(r){throw new Error(r)},noop:function(){},isPlainObject:function(r){var e,t;return!r||PU.call(r)!=="[object Object]"?!1:(e=kre(r),e?(t=XS.call(e,"constructor")&&e.constructor,typeof t=="function"&&DU.call(t)===Cre):!0)},isEmptyObject:function(r){var e;for(e in r)return!1;return!0},each:function(r,e){var t,o=0;if(aP(r))for(t=r.length;o<t&&e.call(r[o],o,r[o])!==!1;o++);else for(o in r)if(e.call(r[o],o,r[o])===!1)break;return r},makeArray:function(r,e){var t=e||[];return r!=null&&(aP(Object(r))?he.merge(t,typeof r=="string"?[r]:r):LU.call(t,r)),t},inArray:function(r,e,t){return e==null?-1:Ire.call(e,r,t)},merge:function(r,e){for(var t=+e.length,o=0,i=r.length;o<t;o++)r[i++]=e[o];return r.length=i,r},grep:function(r,e,t){for(var o,i=[],n=0,a=r.length,s=!t;n<a;n++)o=!e(r[n],n),o!==s&&i.push(r[n]);return i},map:function(r,e,t){var o,i,n=0,a=[];if(aP(r))for(o=r.length;n<o;n++)i=e(r[n],n,t),i!=null&&a.push(i);else for(n in r)i=e(r[n],n,t),i!=null&&a.push(i);return Ere(a)},guid:1,support:pi});typeof Symbol=="function"&&(he.fn[Symbol.iterator]=mc[Symbol.iterator]);he.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(r,e){QS["[object "+e+"]"]=e.toLowerCase()});_re=function(r){var e,t,o,i,n,a,s,l=r.document,c=[],p=c.push,h=c.push,g=c.slice,m=/HTML$/i,b=/^[^{]+\{\s*\[native \w/,x=function(){o()};try{h.apply(c=g.call(l.childNodes),l.childNodes),c[l.childNodes.length].nodeType}catch(k){h={apply:c.length?function(T,I){p.apply(T,g.call(I))}:function(T,I){for(var P=T.length,A=0;T[P++]=I[A++];);T.length=P-1}}}function E(){}function S(k){var T=i.createElement("fieldset");try{return!!k(T)}catch(I){return!1}finally{T.parentNode&&T.parentNode.removeChild(T),T=null}}return e=E.support={},t=E.isXML=function(k){var T=k&&k.namespaceURI,I=k&&(k.ownerDocument||k).documentElement;return!m.test(T||I&&I.nodeName||"HTML")},o=E.setDocument=function(k){var T,I,P=k?k.ownerDocument||k:l;return P==i||P.nodeType!==9||!P.documentElement||(i=P,n=i.documentElement,a=!t(i),l!=i&&(I=i.defaultView)&&I.top!==I&&(I.addEventListener?I.addEventListener("unload",x,!1):I.attachEvent&&I.attachEvent("onunload",x)),e.attributes=S(function(A){return A.className="i",!A.getAttribute("className")}),e.getElementsByTagName=S(function(A){return A.appendChild(i.createComment("")),!A.getElementsByTagName("*").length}),T=b.test(n.compareDocumentPosition),s=T||b.test(n.contains)?function(A,D){var G=A.nodeType===9?A.documentElement:A,N=D&&D.parentNode;return A===N||!!(N&&N.nodeType===1&&(G.contains?G.contains(N):A.compareDocumentPosition&&A.compareDocumentPosition(N)&16))}:function(A,D){if(D){for(;D=D.parentNode;)if(D===A)return!0}return!1}),i},E.contains=function(k,T){return(k.ownerDocument||k)!=i&&o(k),s(k,T)},o(),e.sortDetached=S(function(k){return k.compareDocumentPosition(i.createElement("fieldset"))&1}),E}(window);he.contains=_re.contains;Mre=he.fn.init=function(r,e,t){if(!r)return this;if(t=t||RU,typeof r=="string")throw new Error("$(string) implementation has been removed");if(r.nodeType)return this[0]=r,this.length=1,this;if(fc(r))throw new Error("$(function) implementation has been removed");return he.makeArray(r,this)};Mre.prototype=he.fn;RU=he(di);lP=/[^\x20\t\r\n\f]+/g,ly=function(r,e,t,o,i,n,a){var s=0,l=r.length,c=t==null;if(e0(t)==="object"){i=!0;for(s in t)ly(r,e,s,t[s],!0,n,a)}else if(o!==void 0&&(i=!0,fc(o)||(a=!0),c&&(a?(e.call(r,o),e=null):(c=e,e=function(p,h,g){return c.call(he(p),g)})),e))for(;s<l;s++)e(r[s],t,a?o:o.call(r[s],s,e(r[s],t)));return i?r:c?e.call(r):l?e(r[0],t):n},Are=/^-ms-/,Lre=/-([a-z])/g;JS=function(r){return r.nodeType===1||r.nodeType===9||!+r.nodeType};cy.uid=1;cy.prototype={cache:function(r){var e=r[this.expando];return e||(e={},JS(r)&&(r.nodeType?r[this.expando]=e:Object.defineProperty(r,this.expando,{value:e,configurable:!0}))),e},set:function(r,e,t){var o,i=this.cache(r);if(typeof e=="string")i[hc(e)]=t;else for(o in e)i[hc(o)]=e[o];return i},get:function(r,e){return e===void 0?this.cache(r):r[this.expando]&&r[this.expando][hc(e)]},access:function(r,e,t){return e===void 0||e&&typeof e=="string"&&t===void 0?this.get(r,e):(this.set(r,e,t),t!==void 0?t:e)},remove:function(r,e){var t,o=r[this.expando];if(o!==void 0){if(e!==void 0)for(Array.isArray(e)?e=e.map(hc):(e=hc(e),e=e in o?[e]:e.match(lP)||[]),t=e.length;t--;)delete o[e[t]];(e===void 0||he.isEmptyObject(o))&&(r.nodeType?r[this.expando]=void 0:delete r[this.expando])}},hasData:function(r){var e=r[this.expando];return e!==void 0&&!he.isEmptyObject(e)}};fo=new cy,gc=new cy,Dre=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ore=/[A-Z]/g;he.extend({hasData:function(r){return gc.hasData(r)||fo.hasData(r)},data:function(r,e,t){return gc.access(r,e,t)},removeData:function(r,e){gc.remove(r,e)},_data:function(r,e,t){return fo.access(r,e,t)},_removeData:function(r,e){fo.remove(r,e)}});he.fn.extend({data:function(r,e){var t,o,i,n=this[0],a=n&&n.attributes;if(r===void 0){if(this.length&&(i=gc.get(n),n.nodeType===1&&!fo.get(n,"hasDataAttrs"))){for(t=a.length;t--;)a[t]&&(o=a[t].name,o.indexOf("data-")===0&&(o=hc(o.slice(5)),wU(n,o,i[o])));fo.set(n,"hasDataAttrs",!0)}return i}return typeof r=="object"?this.each(function(){gc.set(this,r)}):ly(this,function(s){var l;if(n&&s===void 0)return l=gc.get(n,r),l!==void 0||(l=wU(n,r),l!==void 0)?l:void 0;this.each(function(){gc.set(this,r,s)})},null,e,arguments.length>1,null,!0)},removeData:function(r){return this.each(function(){gc.remove(this,r)})}});FU=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,t0=new RegExp("^(?:([+-])=|)("+FU+")([a-z%]*)$","i"),Sd=["Top","Right","Bottom","Left"],kg=di.documentElement,GU=function(r){return he.contains(r.ownerDocument,r)},Fre={composed:!0};kg.getRootNode&&(GU=function(r){return he.contains(r.ownerDocument,r)||r.getRootNode(Fre)===r.ownerDocument});sP=/^(?:checkbox|radio)$/i;(function(){var r=di.createDocumentFragment(),e=r.appendChild(di.createElement("div")),t=di.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),pi.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",pi.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,e.innerHTML="<option></option>",pi.option=!!e.lastChild})();SU=/^([^.]*)(?:\.(.+)|)/;he.event={global:{},add:function(r,e,t,o,i){var n,a,s,l,c,p,h,g,m,b,x,E=fo.get(r);if(JS(r)){if(t.handler&&(n=t,t=n.handler,i=n.selector),i)throw new Error("Support for event delegation has been removed");for(t.guid||(t.guid=he.guid++),(l=E.events)||(l=E.events=Object.create(null)),(a=E.handle)||(a=E.handle=function(S){return typeof he!="undefined"&&he.event.triggered!==S.type?he.event.dispatch.apply(r,arguments):void 0}),e=(e||"").match(lP)||[""],c=e.length;c--;)if(s=SU.exec(e[c])||[],m=x=s[1],b=(s[2]||"").split(".").sort(),!!m){if(h=he.event.special[m]||{},m=(i?h.delegateType:h.bindType)||m,h=he.event.special[m]||{},p=he.extend({type:m,origType:x,data:o,handler:t,guid:t.guid,selector:i,namespace:b.join(".")},n),(g=l[m])||(g=l[m]=[],g.delegateCount=0,(!h.setup||h.setup.call(r,o,b,a)===!1)&&r.addEventListener&&r.addEventListener(m,a)),h.add&&(h.add.call(r,p),p.handler.guid||(p.handler.guid=t.guid)),i)throw new Error("Support for event delegation has been removed");g.push(p),he.event.global[m]=!0}}},remove:function(r,e,t,o,i){var n,a,s,l,c,p,h,g,m,b,x,E=fo.hasData(r)&&fo.get(r);if(!(!E||!(l=E.events))){for(e=(e||"").match(lP)||[""],c=e.length;c--;){if(s=SU.exec(e[c])||[],m=x=s[1],b=(s[2]||"").split(".").sort(),!m){for(m in l)he.event.remove(r,m+e[c],t,o,!0);continue}for(h=he.event.special[m]||{},m=(o?h.delegateType:h.bindType)||m,g=l[m]||[],s=s[2]&&new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=n=g.length;n--;)p=g[n],(i||x===p.origType)&&(!t||t.guid===p.guid)&&(!s||s.test(p.namespace))&&(!o||o===p.selector||o==="**"&&p.selector)&&(g.splice(n,1),p.selector&&g.delegateCount--,h.remove&&h.remove.call(r,p));a&&!g.length&&((!h.teardown||h.teardown.call(r,b,E.handle)===!1)&&he.removeEvent(r,m,E.handle),delete l[m])}he.isEmptyObject(l)&&fo.remove(r,"handle events")}},dispatch:function(r){var e,t,o,i,n,a,s=new Array(arguments.length),l=he.event.fix(r),c=(fo.get(this,"events")||Object.create(null))[l.type]||[],p=he.event.special[l.type]||{};for(s[0]=l,e=1;e<arguments.length;e++)s[e]=arguments[e];if(l.delegateTarget=this,!(p.preDispatch&&p.preDispatch.call(this,l)===!1)){for(a=he.event.handlers.call(this,l,c),e=0;(i=a[e++])&&!l.isPropagationStopped();)for(l.currentTarget=i.elem,t=0;(n=i.handlers[t++])&&!l.isImmediatePropagationStopped();)(!l.rnamespace||n.namespace===!1||l.rnamespace.test(n.namespace))&&(l.handleObj=n,l.data=n.data,o=((he.event.special[n.origType]||{}).handle||n.handler).apply(i.elem,s),o!==void 0&&(l.result=o)===!1&&(l.preventDefault(),l.stopPropagation()));return p.postDispatch&&p.postDispatch.call(this,l),l.result}},handlers:function(r,e){var t=[],o=e.delegateCount,i=r.target;if(o)throw new Error("Support for event delegtaion has been removed");return i=this,o<e.length&&t.push({elem:i,handlers:e.slice(o)}),t},addProp:function(r,e){Object.defineProperty(he.Event.prototype,r,{enumerable:!0,configurable:!0,get:fc(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[r]},set:function(t){Object.defineProperty(this,r,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(r){return r[he.expando]?r:new he.Event(r)},special:{load:{noBubble:!0},click:{setup:function(r){var e=this||r;return sP.test(e.type)&&e.click&&Tg(e,"input")&&ZS(e,"click",Eg),!1},trigger:function(r){var e=this||r;return sP.test(e.type)&&e.click&&Tg(e,"input")&&ZS(e,"click"),!0},_default:function(r){var e=r.target;return sP.test(e.type)&&e.click&&Tg(e,"input")&&fo.get(e,"click")||Tg(e,"a")}},beforeunload:{postDispatch:function(r){r.result!==void 0&&r.originalEvent&&(r.originalEvent.returnValue=r.result)}}}};he.removeEvent=function(r,e,t){r.removeEventListener&&r.removeEventListener(e,t)};he.Event=function(r,e){if(!(this instanceof he.Event))return new he.Event(r,e);r&&r.type?(this.originalEvent=r,this.type=r.type,this.isDefaultPrevented=r.defaultPrevented||r.defaultPrevented===void 0&&r.returnValue===!1?Eg:Ig,this.target=r.target&&r.target.nodeType===3?r.target.parentNode:r.target,this.currentTarget=r.currentTarget,this.relatedTarget=r.relatedTarget):this.type=r,e&&he.extend(this,e),this.timeStamp=r&&r.timeStamp||Date.now(),this[he.expando]=!0};he.Event.prototype={constructor:he.Event,isDefaultPrevented:Ig,isPropagationStopped:Ig,isImmediatePropagationStopped:Ig,isSimulated:!1,preventDefault:function(){var r=this.originalEvent;this.isDefaultPrevented=Eg,r&&!this.isSimulated&&r.preventDefault()},stopPropagation:function(){var r=this.originalEvent;this.isPropagationStopped=Eg,r&&!this.isSimulated&&r.stopPropagation()},stopImmediatePropagation:function(){var r=this.originalEvent;this.isImmediatePropagationStopped=Eg,r&&!this.isSimulated&&r.stopImmediatePropagation(),this.stopPropagation()}};he.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},he.event.addProp);he.each({focus:"focusin",blur:"focusout"},function(r,e){he.event.special[r]={setup:function(){return ZS(this,r,Nre),!1},trigger:function(){return ZS(this,r),!0},_default:function(){return!0},delegateType:e}});he.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(r,e){he.event.special[r]={delegateType:e,bindType:e,handle:function(t){var o,i=this,n=t.relatedTarget,a=t.handleObj;return(!n||n!==i&&!he.contains(i,n))&&(t.type=a.origType,o=a.handler.apply(this,arguments),t.type=e),o}}});he.fn.extend({on:function(r,e,t,o){return cP(this,r,e,t,o)},one:function(r,e,t,o){return cP(this,r,e,t,o,1)},off:function(r,e,t){var o,i;if(r&&r.preventDefault&&r.handleObj)return o=r.handleObj,he(r.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if(typeof r=="object"){for(i in r)this.off(i,e,r[i]);return this}return(e===!1||typeof e=="function")&&(t=e,e=void 0),t===!1&&(t=Ig),this.each(function(){he.event.remove(this,r,t,e)})}});uP=new RegExp("^("+FU+")(?!px)[a-z%]+$","i"),r0=function(r){var e=r.ownerDocument.defaultView;return(!e||!e.opener)&&(e=window),e.getComputedStyle(r)},NU=function(r,e,t){var o,i,n={};for(i in e)n[i]=r.style[i],r.style[i]=e[i];o=t.call(r);for(i in e)r.style[i]=n[i];return o},Bre=new RegExp(Sd.join("|"),"i");(function(){function r(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",kg.appendChild(l).appendChild(c);var p=window.getComputedStyle(c);t=p.top!=="1%",s=e(p.marginLeft)===12,c.style.right="60%",n=e(p.right)===36,o=e(p.width)===36,c.style.position="absolute",i=e(c.offsetWidth/3)===12,kg.removeChild(l),c=null}}function e(p){return Math.round(parseFloat(p))}var t,o,i,n,a,s,l=di.createElement("div"),c=di.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",pi.clearCloneStyle=c.style.backgroundClip==="content-box",he.extend(pi,{boxSizingReliable:function(){return r(),o},pixelBoxStyles:function(){return r(),n},pixelPosition:function(){return r(),t},reliableMarginLeft:function(){return r(),s},scrollboxSize:function(){return r(),i},reliableTrDimensions:function(){var p,h,g,m;return a==null&&(p=di.createElement("table"),h=di.createElement("tr"),g=di.createElement("div"),p.style.cssText="position:absolute;left:-11111px;border-collapse:separate",h.style.cssText="border:1px solid",h.style.height="1px",g.style.height="9px",g.style.display="block",kg.appendChild(p).appendChild(h).appendChild(g),m=window.getComputedStyle(h),a=parseInt(m.height,10)+parseInt(m.borderTopWidth,10)+parseInt(m.borderBottomWidth,10)===h.offsetHeight,kg.removeChild(p)),a}}))})();TU=["Webkit","Moz","ms"],BU=di.createElement("div").style,kU={};zre=/^(none|table(?!-c[ea]).+)/,IU=/^--/,qre={position:"absolute",visibility:"hidden",display:"block"},CU={letterSpacing:"0",fontWeight:"400"};he.extend({cssHooks:{opacity:{get:function(r,e){if(e){var t=sy(r,"opacity");return t===""?"1":t}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(r,e,t,o){if(!(!r||r.nodeType===3||r.nodeType===8||!r.style)){var i,n,a,s=hc(e),l=IU.test(e),c=r.style;if(l||(e=EU(s)),a=he.cssHooks[e]||he.cssHooks[s],t!==void 0){if(n=typeof t,n==="string"&&(i=t0.exec(t))&&i[1]&&(t=Gre(r,e,i),n="number"),t==null||t!==t)return;n==="number"&&!l&&(t+=i&&i[3]||(he.cssNumber[s]?"":"px")),!pi.clearCloneStyle&&t===""&&e.indexOf("background")===0&&(c[e]="inherit"),(!a||!("set"in a)||(t=a.set(r,t,o))!==void 0)&&(l?c.setProperty(e,t):c[e]=t)}else return a&&"get"in a&&(i=a.get(r,!1,o))!==void 0?i:c[e]}},css:function(r,e,t,o){var i,n,a,s=hc(e),l=IU.test(e);return l||(e=EU(s)),a=he.cssHooks[e]||he.cssHooks[s],a&&"get"in a&&(i=a.get(r,!0,t)),i===void 0&&(i=sy(r,e,o)),i==="normal"&&e in CU&&(i=CU[e]),t===""||t?(n=parseFloat(i),t===!0||isFinite(n)?n||0:i):i}});he.each(["height","width"],function(r,e){he.cssHooks[e]={get:function(t,o,i){if(o)return zre.test(he.css(t,"display"))&&(!t.getClientRects().length||!t.getBoundingClientRect().width)?NU(t,qre,function(){return _U(t,e,i)}):_U(t,e,i)},set:function(t,o,i){var n,a=r0(t),s=!pi.scrollboxSize()&&a.position==="absolute",l=s||i,c=l&&he.css(t,"boxSizing",!1,a)==="border-box",p=i?dP(t,e,i,c,a):0;return c&&s&&(p-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(a[e])-dP(t,e,"border",!1,a)-.5)),p&&(n=t0.exec(o))&&(n[3]||"px")!=="px"&&(t.style[e]=o,o=he.css(t,e)),UU(t,o,p)}}});he.cssHooks.marginLeft=VU(pi.reliableMarginLeft,function(r,e){if(e)return(parseFloat(sy(r,"marginLeft"))||r.getBoundingClientRect().left-NU(r,{marginLeft:0},function(){return r.getBoundingClientRect().left}))+"px"});he.each({margin:"",padding:"",border:"Width"},function(r,e){he.cssHooks[r+e]={expand:function(t){for(var o=0,i={},n=typeof t=="string"?t.split(" "):[t];o<4;o++)i[r+Sd[o]+e]=n[o]||n[o-2]||n[0];return i}},r!=="margin"&&(he.cssHooks[r+e].set=UU)});he.fn.extend({css:function(r,e){return ly(this,function(t,o,i){var n,a,s={},l=0;if(Array.isArray(o)){for(n=r0(t),a=o.length;l<a;l++)s[o[l]]=he.css(t,o[l],!1,n);return s}return i!==void 0?he.style(t,o,i):he.css(t,o)},r,e,arguments.length>1)}});(function(){var r=di.createElement("input"),e=di.createElement("select"),t=e.appendChild(di.createElement("option"));r.type="checkbox",pi.checkOn=r.value!=="",pi.optSelected=t.selected,r=di.createElement("input"),r.value="t",r.type="radio",pi.radioValue=r.value==="t"})();pi.focusin="onfocusin"in window;MU=/^(?:focusinfocus|focusoutblur)$/,AU=function(r){r.stopPropagation()};he.extend(he.event,{trigger:function(r,e,t,o){var i,n,a,s,l,c,p,h,g=[t||di],m=XS.call(r,"type")?r.type:r,b=XS.call(r,"namespace")?r.namespace.split("."):[];if(n=h=a=t=t||di,!(t.nodeType===3||t.nodeType===8)&&!MU.test(m+he.event.triggered)&&(m.indexOf(".")>-1&&(b=m.split("."),m=b.shift(),b.sort()),l=m.indexOf(":")<0&&"on"+m,r=r[he.expando]?r:new he.Event(m,typeof r=="object"&&r),r.isTrigger=o?2:3,r.namespace=b.join("."),r.rnamespace=r.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,r.result=void 0,r.target||(r.target=t),e=e==null?[r]:he.makeArray(e,[r]),p=he.event.special[m]||{},!(!o&&p.trigger&&p.trigger.apply(t,e)===!1))){if(!o&&!p.noBubble&&!Cg(t)){for(s=p.delegateType||m,MU.test(s+m)||(n=n.parentNode);n;n=n.parentNode)g.push(n),a=n;a===(t.ownerDocument||di)&&g.push(a.defaultView||a.parentWindow||window)}for(i=0;(n=g[i++])&&!r.isPropagationStopped();)h=n,r.type=i>1?s:p.bindType||m,c=(fo.get(n,"events")||Object.create(null))[r.type]&&fo.get(n,"handle"),c&&c.apply(n,e),c=l&&n[l],c&&c.apply&&JS(n)&&(r.result=c.apply(n,e),r.result===!1&&r.preventDefault());return r.type=m,!o&&!r.isDefaultPrevented()&&(!p._default||p._default.apply(g.pop(),e)===!1)&&JS(t)&&l&&fc(t[m])&&!Cg(t)&&(a=t[l],a&&(t[l]=null),he.event.triggered=m,r.isPropagationStopped()&&h.addEventListener(m,AU),t[m](),r.isPropagationStopped()&&h.removeEventListener(m,AU),he.event.triggered=void 0,a&&(t[l]=a)),r.result}},simulate:function(r,e,t){var o=he.extend(new he.Event,t,{type:r,isSimulated:!0});he.event.trigger(o,null,e)}});he.fn.extend({trigger:function(r,e){return this.each(function(){he.event.trigger(r,e,this)})},triggerHandler:function(r,e){var t=this[0];if(t)return he.event.trigger(r,e,t,!0)}});pi.focusin||he.each({focus:"focusin",blur:"focusout"},function(r,e){var t=function(o){he.event.simulate(e,o.target,he.event.fix(o))};he.event.special[e]={setup:function(){var o=this.ownerDocument||this.document||this,i=fo.access(o,e);i||o.addEventListener(r,t,!0),fo.access(o,e,(i||0)+1)},teardown:function(){var o=this.ownerDocument||this.document||this,i=fo.access(o,e)-1;i?fo.access(o,e,i):(o.removeEventListener(r,t,!0),fo.remove(o,e))}}});Hre=/\[\]$/;he.param=function(r,e){var t,o=[],i=function(n,a){var s=fc(a)?a():a;o[o.length]=encodeURIComponent(n)+"="+encodeURIComponent(s==null?"":s)};if(r==null)return"";if(Array.isArray(r)||r.jquery&&!he.isPlainObject(r))he.each(r,function(){i(this.name,this.value)});else for(t in r)pP(t,r[t],e,i);return o.join("&")};he.offset={setOffset:function(r,e,t){var o,i,n,a,s,l,c,p=he.css(r,"position"),h=he(r),g={};p==="static"&&(r.style.position="relative"),s=h.offset(),n=he.css(r,"top"),l=he.css(r,"left"),c=(p==="absolute"||p==="fixed")&&(n+l).indexOf("auto")>-1,c?(o=h.position(),a=o.top,i=o.left):(a=parseFloat(n)||0,i=parseFloat(l)||0),fc(e)&&(e=e.call(r,t,he.extend({},s))),e.top!=null&&(g.top=e.top-s.top+a),e.left!=null&&(g.left=e.left-s.left+i),"using"in e?e.using.call(r,g):h.css(g)}};he.fn.extend({offset:function(r){if(arguments.length)return r===void 0?this:this.each(function(i){he.offset.setOffset(this,r,i)});var e,t,o=this[0];if(o)return o.getClientRects().length?(e=o.getBoundingClientRect(),t=o.ownerDocument.defaultView,{top:e.top+t.pageYOffset,left:e.left+t.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var r,e,t,o=this[0],i={top:0,left:0};if(he.css(o,"position")==="fixed")e=o.getBoundingClientRect();else{for(e=this.offset(),t=o.ownerDocument,r=o.offsetParent||t.documentElement;r&&(r===t.body||r===t.documentElement)&&he.css(r,"position")==="static";)r=r.parentNode;r&&r!==o&&r.nodeType===1&&(i=he(r).offset(),i.top+=he.css(r,"borderTopWidth",!0),i.left+=he.css(r,"borderLeftWidth",!0))}return{top:e.top-i.top-he.css(o,"marginTop",!0),left:e.left-i.left-he.css(o,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var r=this.offsetParent;r&&he.css(r,"position")==="static";)r=r.offsetParent;return r||kg})}});he.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(r,e){var t=e==="pageYOffset";he.fn[r]=function(o){return ly(this,function(i,n,a){var s;if(Cg(i)?s=i:i.nodeType===9&&(s=i.defaultView),a===void 0)return s?s[e]:i[n];s?s.scrollTo(t?s.pageXOffset:a,t?a:s.pageYOffset):i[n]=a},r,o,arguments.length)}});he.each(["top","left"],function(r,e){he.cssHooks[e]=VU(pi.pixelPosition,function(t,o){if(o)return o=sy(t,e),uP.test(o)?he(t).position()[e]+"px":o})});he.each({Height:"height",Width:"width"},function(r,e){he.each({padding:"inner"+r,content:e,"":"outer"+r},function(t,o){he.fn[o]=function(i,n){var a=arguments.length&&(t||typeof i!="boolean"),s=t||(i===!0||n===!0?"margin":"border");return ly(this,function(l,c,p){var h;return Cg(l)?o.indexOf("outer")===0?l["inner"+r]:l.document.documentElement["client"+r]:l.nodeType===9?(h=l.documentElement,Math.max(l.body["scroll"+r],h["scroll"+r],l.body["offset"+r],h["offset"+r],h["client"+r])):p===void 0?he.css(l,c,s):he.style(l,c,p,s)},e,a?i:void 0,a)}})});he.fn.extend({bind:function(r,e,t){return this.on(r,null,e,t)},unbind:function(r,e){return this.off(r,null,e)},delegate:function(r,e,t,o){return this.on(e,r,t,o)},undelegate:function(r,e,t){return arguments.length===1?this.off(r,"**"):this.off(e,r||"**",t)},hover:function(r,e){return this.mouseenter(r).mouseleave(e||r)}});he.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(r,e){he.fn[e]=function(t,o){return arguments.length>0?this.on(e,null,t,o):this.trigger(e)}});Kre=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;he.isArray=Array.isArray;he.parseJSON=JSON.parse;he.nodeName=Tg;he.isFunction=fc;he.isWindow=Cg;he.camelCase=hc;he.type=e0;he.now=Date.now;he.isNumeric=function(r){var e=he.type(r);return(e==="number"||e==="string")&&!isNaN(r-parseFloat(r))};he.trim=function(r){return r==null?"":(r+"").replace(Kre,"")};Wre=window.jQuery,$re=window.$;he.noConflict=function(r){return window.$===he&&(window.$=$re),r&&window.jQuery===he&&(window.jQuery=Wre),he};typeof noGlobal=="undefined"&&(window.jQuery=window.$=he);re=he});function o0(r,e){var o;let t="";return e!==void 0?t=e:typeof window!="undefined"&&window.location&&window.location.search&&(t=(o=new URLSearchParams(window.location.search).get("lang"))!=null?o:""),__dcg_shared_module_exports__['D'](r,t)}var zU=__dcg_shared_module_exports__['b'](()=>{__dcg_shared_module_exports__['H']()});var se=__dcg_shared_module_exports__['c']((hwe,qU)=>{B5();bn();vU();Vt();zU();iy(r=>Lr(r));Qi("href",r=>{let e=o0(r());return{value:`${o0(r())}`,bindings:{onMount(t){if(!["a","use"].includes(t.tagName.toLowerCase()))throw new Error("Cannot have an href on a non-link element.")},onUpdate(t){let o=o0(r());e!==o&&(e=o,t.setAttribute("href",o))}}}});Qi("onTap",r=>({value:"",bindings:{onMount(e){re(e).on("dcg-tap",r)}}}));Qi("onTapStart",r=>({bindings:{onMount(e){re(e).on("dcg-tapstart",r)}}}));Qi("onTapMove",r=>({bindings:{onMount(e){re(e).on("dcg-tapmove",r)}}}));Qi("onTapEnd",r=>({bindings:{onMount(e){re(e).on("dcg-tapend",r)}}}));Qi("onLongHold",r=>({bindings:{onMount(e){re(e).on("dcg-longhold",r)}}}));Qi("ignoreRealClick",r=>({bindings:{onMount(e){re(e).on("click",t=>{!(t.altKey||t.shiftKey||t.metaKey)&&r()&&t.preventDefault()})}}}));Qi("manageFocus",r=>r()===void 0?{}:{bindings:{onMount(e){r().shouldBeFocused()&&e.focus(),e.onfocus=function(t){r().shouldBeFocused()||r().onFocusedChanged(!0,t)},e.onblur=function(t){r().shouldBeFocused()&&t.target!==document.activeElement&&r().onFocusedChanged(!1,t)}},onUpdate(e){let t=r().shouldBeFocused(),o=document.activeElement===e;t&&!o?e.focus():o&&!t&&e.blur()},willUnmount(e){e.onfocus=null,e.onblur=null}}});qU.exports=nP});var yz=__dcg_shared_module_exports__['c'](xy=>{var dt=xy&&xy.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,i){o.__proto__=i}||function(o,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(o[n]=i[n])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function o(){this.constructor=e}e.prototype=t===null?Object.create(t):(o.prototype=t.prototype,new o)}}(),v0=xy&&xy.__assign||function(){return v0=Object.assign||function(r){for(var e,t=1,o=arguments.length;t<o;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},v0.apply(this,arguments)};(function(){var r=-1,e=1,t=Math.min,o=Math.max;function i(){}function n(M){for(;M;){if(!M.parent)return M;M=M.parent}}function a(M,v,f){if(!v){var y=new Error("prayer failed: "+M);if(f){var C={};y.dcgExtraErrorMetaData=C;for(var R in f){var z=f[R],W=C[R]={};if(z){W.localLatex=z.latex();var ee=n(z);ee&&(W.rootLatex=ee.latex())}else W.emptyNode=!0}}throw y}}function s(M){a("a direction was passed",M===r||M===e)}function l(M){var v=document.implementation.createHTMLDocument("");if(v.body.innerHTML=M,v.body.children.length===1)return v.body.children[0];for(var f=document.createDocumentFragment();v.body.firstChild;)f.appendChild(v.body.firstChild);return f}var c=function(v,f,y){var C;switch(v){case"svg":case"path":C=document.createElementNS("http://www.w3.org/2000/svg",v);break;default:C=document.createElement(v)}for(var R in f){var z=f[R];z!==void 0&&C.setAttribute(R,typeof z=="string"?z:String(z))}if(y)for(var W=0;W<y.length;W++)C.appendChild(y[W]);return C};c.text=function(M){return document.createTextNode(M)},c.block=function(M,v,f,y){var C=[f.html()];y!=null&&y.beforeChild&&C.unshift(y.beforeChild),y!=null&&y.afterChild&&C.push(y.afterChild);var R=c(M,v,C);return f.setDOM(R),F.linkElementByBlockNode(R,f),R},c.entityText=function(M){var v=l(M);return a("entity parses to a single text node",v instanceof DocumentFragment&&v.childNodes.length===1&&v.childNodes[0]instanceof Text),v.childNodes[0]};function p(M,v){var f,y;if(typeof(M==null?void 0:M.closest)=="function")return M.closest(v);if(!(M instanceof HTMLElement))return null;var C=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,R=M;do{if(C.call(R,v))return R;R=(y=(f=R==null?void 0:R.parentElement)!==null&&f!==void 0?f:R==null?void 0:R.parentNode)!==null&&y!==void 0?y:null}while(R!==null&&R.nodeType===1);return null}var h="\xA0",g="\u200B",m="\u02D9",b="\u2211",x="\u220F",E="\u2210",S="\u222B";function k(M){return M.getClientRects().length?M.getBoundingClientRect():{top:0,left:0,height:0,width:0,x:0,y:0,bottom:0,right:0}}function T(){return window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft}function I(){return window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}var P=function(){var M,v;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(M=requestAnimationFrame,v=cancelAnimationFrame):(M=function(f){return setTimeout(f,13)},v=clearTimeout),function(f,y){var C=Date.now(),R,z=0;function W(){var ze=(Date.now()-C)/f;ze<=z?ye():z=ze,y(z,ye,ee)}function ee(){R!==void 0&&v(R),R=void 0}function ye(){ee(),R=M(W)}y(f<=0?1:0,ye,ee)}}(),A=function(){function M(v){this.span=c("span",{class:"dcg-mq-aria-alert","aria-live":"assertive","aria-atomic":"true"}),this.msg="",this.items=[],this.controller=v}return M.prototype.attach=function(){var v=this.controller.container;this.span.parentNode!==v&&G(v).prepend(G(this.span))},M.prototype.queue=function(v,f){f===void 0&&(f=!1);var y="";if(v instanceof xt){var C=v.mathspeak({ignoreShorthand:!0});f&&(v.parent&&v.parent.ariaLabel&&v.ariaLabel==="block"?y=v.parent.ariaLabel+" "+C:v.ariaLabel&&(y=v.ariaLabel+" "+C)),y===""&&(y=C)}else y=v||"";return this.items.push(y),this},M.prototype.queueDirOf=function(v){return s(v),this.queue(v===r?"before":"after")},M.prototype.queueDirEndOf=function(v){return s(v),this.queue(v===r?"beginning of":"end of")},M.prototype.alert=function(v){return this.attach(),v&&this.queue(v),this.items.length&&(this.msg=this.items.join(" ").replace(/ +(?= )/g,"").trim(),this.controller.containerHasFocus()&&(this.controller.options.logAriaAlerts&&this.msg&&console.log(this.msg),this.span.textContent=this.msg)),this.clear()},M.prototype.clear=function(v){return this.items.length=0,v!=null&&v.emptyContent&&(this.span.textContent=""),this},M}(),D=function(){function M(v,f){var y;arguments.length===1&&(f=v),!(!v||!f)&&(this.ends=(y={},y[r]=v,y[e]=f,y))}return M.create=function(v,f){arguments.length===1&&(f=v),a("No half-empty DOMFragments",!!v==!!f);var y=new M(v,f);return a("last is a forward sibling of first",y.isValid()),y},M.prototype.isEmpty=function(){return this.ends===void 0},M.prototype.isOneNode=function(){return!!(this.ends&&this.ends[r]===this.ends[e])},M.prototype.isValid=function(){if(!this.ends||this.ends[r]===this.ends[e])return!0;var v;return this.eachNode(function(f){return v=f}),v===this.ends[e]},M.prototype.firstNode=function(){return a("Fragment is not empty",this.ends),this.ends[r]},M.prototype.lastNode=function(){return a("Fragment is not empty",this.ends),this.ends[e]},M.prototype.children=function(){var v=this.oneNode(),f=v.firstChild,y=v.lastChild;return f&&y?new M(f,y):new M},M.prototype.join=function(v){if(!this.ends)return v;if(!v.ends)return this;for(var f=!1,y=this.ends[e].nextSibling;y;){if(y===v.ends[r]){f=!0;break}y=y.nextSibling}return a("sibling must be a forward DOM sibling of this fragment",f),new M(this.ends[r],v.ends[e])},M.prototype.oneNode=function(){return a("Fragment has a single node",this.ends&&this.ends[r]===this.ends[e]),this.ends[r]},M.prototype.oneElement=function(){var v=this.oneNode();return a("Node is an Element",v.nodeType===Node.ELEMENT_NODE),v},M.prototype.oneText=function(){var v=this.oneNode();return a("Node is Text",v.nodeType===Node.TEXT_NODE),v},M.prototype.eachNode=function(v){if(!this.ends)return this;for(var f=this.ends[e],y=this.ends[r],C=void 0;y&&(C=y.nextSibling,v(y),y!==f);y=C);return this},M.prototype.eachElement=function(v){return this.eachNode(function(f){f.nodeType===Node.ELEMENT_NODE&&v(f)}),this},M.prototype.text=function(){var v="";return this.eachNode(function(f){v+=f.textContent||""}),v},M.prototype.toNodeArray=function(){var v=[];return this.eachNode(function(f){return v.push(f)}),v},M.prototype.toElementArray=function(){var v=[];return this.eachElement(function(f){return v.push(f)}),v},M.prototype.toDocumentFragment=function(){var v=document.createDocumentFragment();return this.eachNode(function(f){return v.appendChild(f)}),v},M.prototype.insertBefore=function(v){return this.insDirOf(r,v)},M.prototype.insertAfter=function(v){return this.insDirOf(e,v)},M.prototype.append=function(v){return v.appendTo(this.oneElement()),this},M.prototype.prepend=function(v){return v.prependTo(this.oneElement()),this},M.prototype.appendTo=function(v){return this.insAtDirEnd(e,v)},M.prototype.prependTo=function(v){return this.insAtDirEnd(r,v)},M.prototype.parent=function(){if(!this.ends)return this;var v=this.ends[r].parentNode;return v?new M(v):new M},M.prototype.wrapAll=function(v){if(v.textContent="",!this.ends)return this;var f=this.ends[r].parentNode,y=this.ends[e].nextSibling;return this.appendTo(v),f&&f.insertBefore(v,y),this},M.prototype.replaceWith=function(v){var f,y=(f=this.ends)===null||f===void 0?void 0:f[e],C=y==null?void 0:y.parentNode,R=y==null?void 0:y.nextSibling;this.detach();var z=v.toDocumentFragment();return!y||!C?this:(C.insertBefore(z,R||null),this)},M.prototype.nthElement=function(v){if(this.ends&&!(v<0||v!==Math.floor(v)))for(var f=this.ends[r];f;){if(f.nodeType===Node.ELEMENT_NODE){if(v<=0)return f;v-=1}if(f===this.ends[e])return;f=f.nextSibling}},M.prototype.firstElement=function(){return this.nthElement(0)},M.prototype.lastElement=function(){if(this.ends)for(var v=this.ends[e];v;){if(v.nodeType===Node.ELEMENT_NODE)return v;if(v===this.ends[r])return;v=v.previousSibling}},M.prototype.first=function(){return new M(this.firstElement())},M.prototype.last=function(){return new M(this.lastElement())},M.prototype.eq=function(v){return new M(this.nthElement(v))},M.prototype.slice=function(v){if(!this.ends)return this;var f=this.nthElement(v);return f?new M(f,this.ends[e]):new M},M.prototype.next=function(){for(var v=this.oneNode();v;)if(v=v.nextSibling,v&&v.nodeType===Node.ELEMENT_NODE)return new M(v);return new M},M.prototype.prev=function(){for(var v=this.oneNode();v;)if(v=v.previousSibling,v&&v.nodeType===Node.ELEMENT_NODE)return new M(v);return new M},M.prototype.empty=function(){return this.eachElement(function(v){v.textContent=""}),this},M.prototype.remove=function(){return this.toDocumentFragment(),this},M.prototype.detach=function(){return this.remove()},M.prototype.insDirOf=function(v,f){var y;if(!this.ends)return this;var C=(y=f.ends)===null||y===void 0?void 0:y[v];return!C||!C.parentNode?this.detach():(N(v,C.parentNode,this.toDocumentFragment(),C),this)},M.prototype.insAtDirEnd=function(v,f){return this.ends?(U(v,this.toDocumentFragment(),f),this):this},M.prototype.hasClass=function(v){var f=!1;return this.eachElement(function(y){y.classList.contains(v)&&(f=!0)}),f},M.prototype.addClass=function(v){for(var f=function(W){if(!W)return"continue";y.eachElement(function(ee){ee.classList.add(W)})},y=this,C=0,R=v.split(/\s+/);C<R.length;C++){var z=R[C];f(z)}return this},M.prototype.removeClass=function(v){for(var f=function(W){if(!W)return"continue";y.eachElement(function(ee){ee.classList.remove(W)})},y=this,C=0,R=v.split(/\s+/);C<R.length;C++){var z=R[C];f(z)}return this},M.prototype.toggleClass=function(v,f){if(f===!0)return this.addClass(v);if(f===!1)return this.removeClass(v);for(var y=function(ee){if(!ee)return"continue";C.eachElement(function(ye){ye.classList.toggle(ee)})},C=this,R=0,z=v.split(/\s+/);R<z.length;R++){var W=z[R];y(W)}return this},M}(),G=D.create;function N(M,v,f,y){v.insertBefore(f,M===r?y:y.nextSibling)}function U(M,v,f){M===r?f.insertBefore(v,f.firstChild):f.appendChild(v)}var K=function(){function M(v,f,y){this.init(v,f,y)}return M.prototype.init=function(v,f,y){this.parent=v,this[r]=f,this[e]=y},M.copy=function(v){return new M(v.parent,v[r],v[e])},M}();function H(M,v){var f=M[r];if(f){var y=M[e];if(y)for(y=y[e];f!==y;f=f[e]){var C=v(f);if(C===!1)break}}}function w(M,v,f){var y=M[r];if(!y)return v;var C=M[e];if(!C)return v;for(C=C[e];y!==C;y=y[e])v=f(v,y);return v}var F=function(){function M(){var y;this[v]=0,this[f]=0,this.parent=0,this.ends=(y={},y[r]=0,y[e]=0,y),this.id=M.uniqueNodeId()}M.uniqueNodeId=function(){return M.idCounter+=1},M.getNodeOfElement=function(y){if(y){if(!y.nodeType)throw new Error("must pass an Element to NodeBase.getNodeOfElement");var C=y;return C.mqBlockNode||C.mqCmdNode}},M.linkElementByBlockNode=function(y,C){y.mqBlockNode=C},M.linkElementByCmdNode=function(y,C){y.mqCmdNode=C},M.prototype.setEnds=function(y){this.ends=y,a("No half-empty node ends",!!this.ends[r]==!!this.ends[e])},M.prototype.getEnd=function(y){return this.ends[y]},M.prototype.toString=function(){return"{{ MathQuill Node #"+this.id+" }}"},M.prototype.setDOM=function(y){return y&&a("DOM is an element or a text node",y.nodeType===Node.ELEMENT_NODE||y.nodeType===Node.TEXT_NODE),this._el=y,this},M.prototype.domFrag=function(){return G(this._el)},M.prototype.createDir=function(y,C){s(y);var R=this;return R.html(),R.domFrag().insDirOf(y,C.domFrag()),C[y]=R.adopt(C.parent,C[r],C[e]),R},M.prototype.createLeftOf=function(y){this.createDir(r,y)},M.prototype.selectChildren=function(y,C){return new ue(y,C)},M.prototype.bubble=function(y){for(var C=this.getSelfNode(),R=C;R;R=R.parent){var z=y(R);if(z===!1)break}return this},M.prototype.postOrder=function(y){var C=this.getSelfNode();return function R(z){return z?(z.eachChild(R),y(z),!0):!1}(C),C},M.prototype.isEmpty=function(){return this.ends[r]===0&&this.ends[e]===0},M.prototype.isQuietEmptyDelimiter=function(y){if(!this.isEmpty()||!y||!this.parent||this.parent.ctrlSeq===void 0)return!1;var C=this.parent.ctrlSeq.replace(/^\\(left|right)?/,"");return y.hasOwnProperty(C)},M.prototype.isStyleBlock=function(){return!1},M.prototype.isTextBlock=function(){return!1},M.prototype.children=function(){return new B(this.getEnd(r),this.getEnd(e))},M.prototype.eachChild=function(y){return H(this.ends,y),this},M.prototype.foldChildren=function(y,C){return w(this.ends,y,C)},M.prototype.withDirAdopt=function(y,C,R,z){var W=this.getSelfNode();return new B(W,W).withDirAdopt(y,C,R,z),this},M.prototype.adopt=function(y,C,R){var z=this.getSelfNode();return new B(z,z).adopt(y,C,R),this.getSelfNode()},M.prototype.disown=function(){var y=this.getSelfNode();return new B(y,y).disown(),this},M.prototype.remove=function(){return this.domFrag().remove(),this.disown()},M.prototype.shouldIgnoreSubstitutionInSimpleSubscript=function(y){var C=y.disableAutoSubstitutionInSubscripts;if(!C||!this.parent||!(this.parent.parent instanceof Na))return!1;var R=this.parent.parent[r];return!(typeof C=="object"&&R instanceof fr&&R.endsWord&&C.except[R.endsWord]||!this.parent.domFrag().hasClass("dcg-mq-sub"))},M.prototype.getSelfNode=function(){return this},M.prototype.parser=function(){a("Abstract parser() method is never called",!1)},M.prototype.html=function(){throw new Error("html() unimplemented in NodeBase")},M.prototype.text=function(){return""},M.prototype.latex=function(){var y={uncleanedLatex:"",uncleanedStartIndex:-1,uncleanedEndIndex:-1};return this.latexRecursive(y),y.uncleanedLatex},M.prototype.latexRecursive=function(y){},M.prototype.checkCursorContextOpen=function(y){var C=y.uncleanedLatex.length;y.startSelectionBefore===this&&(y.uncleanedStartIndex=C),y.endSelectionBefore===this&&(y.uncleanedEndIndex=C);var R=y.restoreInfo;R&&C===R.uncleanedStartIndex&&(R.uncleanedEndIndex===R.uncleanedStartIndex?C===R.uncleanedStartIndex&&(R.cursorParent=this.parent):R.selectionL=this)},M.prototype.checkCursorContextClose=function(y){var C=y.uncleanedLatex.length;y.startSelectionAfter===this&&(y.uncleanedStartIndex=C),y.endSelectionAfter===this&&(y.uncleanedEndIndex=C);var R=y.restoreInfo;R&&C===R.uncleanedEndIndex&&(R.uncleanedStartIndex===R.uncleanedEndIndex?(R.cursorL||(R.cursorL=this),R.cursorParent?R.cursorParent===this.parent&&(R.cursorParent=this,R.cursorL=0):R.cursorParent=this.parent):R.selectionR||(R.selectionR=this))},M.prototype.finalizeTree=function(y,C){},M.prototype.contactWeld=function(y,C){},M.prototype.blur=function(y){},M.prototype.focus=function(){},M.prototype.intentionalBlur=function(){},M.prototype.reflow=function(){},M.prototype.registerInnerField=function(y,C){},M.prototype.chToCmd=function(y,C){a("Abstract chToCmd() method is never called",!1)},M.prototype.mathspeak=function(y){return""},M.prototype.seek=function(y,C){},M.prototype.siblingDeleted=function(y,C){},M.prototype.siblingCreated=function(y,C){},M.prototype.finalizeInsert=function(y,C){},M.prototype.fixDigitGrouping=function(y){},M.prototype.writeLatex=function(y,C){},M.prototype.write=function(y,C){};var v,f;return v=r,f=e,M.idCounter=0,M}();function V(M,v,f){a("a parent is always present",M),a("leftward is properly set up",function(){return v?v[e]===f&&v.parent===M:M.getEnd(r)===f}(),{parent:M,leftward:v,leftwardL:v&&v[r],leftwardR:v&&v[e],rightwardL:f&&f[r],rightwardR:f&&f[e]}),a("rightward is properly set up",function(){return f?f[r]===v&&f.parent===M:M.getEnd(e)===v}(),{parent:M,rightward:f,leftwardL:v&&v[r],leftwardR:v&&v[e],rightwardL:f&&f[r],rightwardR:f&&f[e],rightwardParent:f&&f.parent})}var B=function(){function M(v,f,y){var C,R;if(this.disowned=!1,y===void 0&&(y=r),s(y),a("no half-empty fragments",!v==!f,{withDir:v,oppDir:f}),!v||!f){this.setEnds((C={},C[r]=0,C[e]=0,C));return}a("withDir is passed to Fragment",v instanceof xt),a("oppDir is passed to Fragment",f instanceof xt),a("withDir and oppDir have the same parent",v.parent===f.parent);var z=(R={},R[y]=v,R[-y]=f,R);this.setEnds(z);var W=0;this.each(function(ee){W=ee}),a("following direction siblings from start reaches end",W===z[e])}return M.prototype.getDOMFragFromEnds=function(){var v=this.ends[r],f=this.ends[e];return v===0||f===0?G():v===f?v.domFrag():v.domFrag().join(f.domFrag())},M.prototype.setEnds=function(v){this.ends=v},M.prototype.getEnd=function(v){return this.ends?this.ends[v]:0},M.prototype.domFrag=function(){return this.getDOMFragFromEnds()},M.prototype.withDirAdopt=function(v,f,y,C){return v===r?this.adopt(f,y,C):this.adopt(f,C,y)},M.prototype.adopt=function(v,f,y){var C;V(v,f,y);var R=this;this.disowned=!1;var z=R.ends[r];if(!z)return this;var W=R.ends[e];if(!W)return this;var ee=(C={},C[r]=v.getEnd(r),C[e]=v.getEnd(e),C);return f||(ee[r]=z),y?y[r]=W:ee[e]=W,v.setEnds(ee),W[e]=y,R.each(function(ye){return ye[r]=f,ye.parent=v,f&&(f[e]=ye),f=ye,!0}),R},M.prototype.disown=function(){var v,f=this,y=f.ends[r];if(!y||f.disowned)return f;this.disowned=!0;var C=f.ends[e];if(!C)return f;var R=y.parent;V(R,y[r],y),V(R,C,C[e]);var z=(v={},v[r]=R.getEnd(r),v[e]=R.getEnd(e),v);if(y[r]){var W=y[r];W[e]=C[e]}else z[r]=C[e];if(C[e]){var ee=C[e];ee[r]=y[r]}else z[e]=y[r];return z[r]&&z[e]?R.setEnds(z):R.ends=z,f},M.prototype.remove=function(){return this.domFrag().remove(),this.disown()},M.prototype.each=function(v){return H(this.ends,v),this},M.prototype.fold=function(v,f){return w(this.ends,v,f)},M}(),L={},q={};function le(M){return M&&M.prototype instanceof xt}var $=function(M){dt(v,M);function v(f,y,C){var R=M.call(this,f,y,C)||this;return R.ancestors={},R}return v.fromCursor=function(f){return new v(f.parent,f[r],f[e])},v}(K),ne=function(M){dt(v,M);function v(f,y,C){var R=M.call(this,f,0,0)||this;return R.upDownCache={},R.cursorElement=c("span",{class:"dcg-mq-cursor"},[c.text(g)]),R._domFrag=G(),R.controller=C,R.options=y,R.setDOMFrag(G(R.cursorElement)),R.blink=function(){G(R.cursorElement).toggleClass("dcg-mq-blink")},R}return v.prototype.setDOMFrag=function(f){return this._domFrag=f,this},v.prototype.domFrag=function(){return this._domFrag},v.prototype.show=function(){if(G(this.cursorElement).removeClass("dcg-mq-blink"),this.setDOMFrag(G(this.cursorElement)),this.intervalId)clearInterval(this.intervalId);else{var f=this[e];if(f){var y=this.selection;y&&y.getEnd(r)[r]===this[r]?this.domFrag().insertBefore(y.domFrag()):this.domFrag().insertBefore(f.domFrag())}else this.domFrag().appendTo(this.parent.domFrag().oneElement());this.parent.focus()}return this.intervalId=setInterval(this.blink,500),this},v.prototype.hide=function(){return this.intervalId&&clearInterval(this.intervalId),this.intervalId=0,this.domFrag().detach(),this.setDOMFrag(G()),this},v.prototype.withDirInsertAt=function(f,y,C,R){var z=this.parent;this.parent=y,this[f]=C,this[-f]=R,z!==y&&z.blur&&z.blur(this)},v.prototype.insDirOf=function(f,y){return s(f),this.domFrag().insDirOf(f,y.domFrag()),this.withDirInsertAt(f,y.parent,y[f],y),this.parent.domFrag().addClass("dcg-mq-hasCursor"),this},v.prototype.insLeftOf=function(f){return this.insDirOf(r,f)},v.prototype.insRightOf=function(f){return this.insDirOf(e,f)},v.prototype.insAtDirEnd=function(f,y){return s(f),this.domFrag().insAtDirEnd(f,y.domFrag().oneElement()),this.withDirInsertAt(f,y,0,y.getEnd(f)),y.focus(),this},v.prototype.insAtLeftEnd=function(f){return this.insAtDirEnd(r,f)},v.prototype.insAtRightEnd=function(f){return this.insAtDirEnd(e,f)},v.prototype.jumpUpDown=function(f,y){var C=this;C.upDownCache[f.id]=K.copy(C);var R=C.upDownCache[y.id];if(R){var z=R[e];z?C.insLeftOf(z):C.insAtRightEnd(R.parent)}else{var W=C.getBoundingClientRectWithoutMargin().left;y.seek(W,C)}C.controller.aria.queue(y,!0)},v.prototype.getBoundingClientRectWithoutMargin=function(){var f=this.domFrag();f.removeClass("dcg-mq-cursor");var y=k(f.oneElement()),C=y.left,R=y.right;return f.addClass("dcg-mq-cursor"),{left:C,right:R}},v.prototype.unwrapGramp=function(){var f=this.parent.parent,y=f.parent,C=f[e],R=this,z=f[r];if(f.disown().eachChild(function(Ce){return Ce.isEmpty()||(Ce.children().adopt(y,z,C).each(function(Ue){return Ue.domFrag().insertBefore(f.domFrag()),!0}),z=Ce.getEnd(e)),!0}),!this[e]){var W=this[r];if(W)this[e]=W[e];else for(;!this[e];){var ee=this.parent[e];if(ee)this.parent=ee,this[e]=ee.getEnd(r);else{this[e]=f[e],this.parent=y;break}}}var ye=this[e];ye?this.insLeftOf(ye):this.insAtRightEnd(y),f.domFrag().remove();var ze=f[r],De=f[e];ze&&ze.siblingDeleted(R.options,e),De&&De.siblingDeleted(R.options,r)},v.prototype.startSelection=function(){for(var f=this.anticursor=$.fromCursor(this),y=f.ancestors,C=f;C.parent;C=C.parent)y[C.parent.id]=C},v.prototype.endSelection=function(){delete this.anticursor},v.prototype.select=function(){var f,y=this.anticursor;if(this[r]===y[r]&&this.parent===y.parent)return!1;for(var C=this;C.parent;C=C.parent)if(C.parent.id in y.ancestors){f=C.parent;break}a("cursor and anticursor in the same tree",f);var R=f,z=y.ancestors[R.id],W,ee,ye=e;if(C[r]!==z){for(var ze=C;ze;ze=ze[e])if(ze[e]===z[e]){ye=r,W=C,ee=z;break}}ye===e&&(W=z,ee=C),W instanceof K&&(W=W[e]),ee instanceof K&&(ee=ee[r]),this.hide().selection=R.selectChildren(W,ee);var De=this.selection.getEnd(ye);return this.insDirOf(ye,De),this.selectionChanged(),!0},v.prototype.resetToEnd=function(f){this.clearSelection();var y=f.root;this[e]=0,this[r]=y.getEnd(e),this.parent=y},v.prototype.clearSelection=function(){return this.selection&&(this.selection.clear(),delete this.selection,this.selectionChanged()),this},v.prototype.deleteSelection=function(){var f=this.selection;f&&(this[r]=f.getEnd(r)[r],this[e]=f.getEnd(e)[e],f.remove(),this.selectionChanged(),delete this.selection)},v.prototype.replaceSelection=function(){var f=this.selection;return f&&(this[r]=f.getEnd(r)[r],this[e]=f.getEnd(e)[e],delete this.selection),f},v.prototype.depth=function(){for(var f=this,y=0;f=f.parent;)y+=f instanceof ft?1:0;return y},v.prototype.isTooDeep=function(f){return this.options.maxDepth!==void 0?this.depth()+(f||0)>this.options.maxDepth:!1},v.prototype.selectionChanged=function(){},v}(K),ue=function(M){dt(v,M);function v(f,y,C){var R=M.call(this,f,y,C)||this;return R._el=c("span",{class:"dcg-mq-selection"}),R.getDOMFragFromEnds().wrapAll(R._el),R}return v.prototype.isCleared=function(){return this._el===void 0},v.prototype.domFrag=function(){return this.isCleared()?this.getDOMFragFromEnds():G(this._el)},v.prototype.setEnds=function(f){a("Selection ends are never empty",f[r]&&f[e]),this.ends=f},v.prototype.getEnd=function(f){return this.ends[f]},v.prototype.adopt=function(f,y,C){return this.clear(),M.prototype.adopt.call(this,f,y,C)},v.prototype.clear=function(){var f=this.getDOMFragFromEnds();return this.domFrag().replaceWith(f),this._el=void 0,this},v.prototype.join=function(f,y){return y===void 0&&(y=""),this.fold("",function(C,R){return C+y+R[f]()})},v}(B),de=function(){function M(v,f,y){this.isMouseSelecting=!1,this.textareaEventListeners={},this.id=v.id,this.data={},this.root=v,this.container=f,this.options=y,this.aria=new A(this.getControllerSelf()),this.ariaLabel="Math Input",this.ariaPostLabel="",v.controller=this.getControllerSelf(),this.cursor=v.cursor=new ne(v,y,this.getControllerSelf())}return M.prototype.getControllerSelf=function(){return this},M.prototype.handle=function(v,f){var y,C=this.options.handlers,R=(y=this.options.handlers)===null||y===void 0?void 0:y.fns[v];if(R){var z=C==null?void 0:C.APIClasses[this.KIND_OF_MQ];a("APIClass is defined",z);var W=new z(this);f===r||f===e?R(f,W):R(W)}},M.onNotify=function(v){M.notifyees.push(v)},M.prototype.notify=function(v){for(var f=0;f<M.notifyees.length;f+=1)M.notifyees[f](this.cursor,v);return this},M.prototype.setAriaLabel=function(v){var f=this.getAriaLabel();return!v&&this.editable?this.ariaLabel="Math Input":this.ariaLabel=v,v!==f&&!this.containerHasFocus()&&this.updateMathspeak(),this},M.prototype.getAriaLabel=function(){return this.ariaLabel!=="Math Input"?this.ariaLabel:this.editable?"Math Input":""},M.prototype.setAriaPostLabel=function(v,f){var y=this;return v&&typeof v=="string"&&v!==""?(v!==this.ariaPostLabel&&typeof f=="number"&&(this._ariaAlertTimeout&&clearTimeout(this._ariaAlertTimeout),this._ariaAlertTimeout=setTimeout(function(){y.containerHasFocus()?y.aria.alert(y.root.mathspeak().trim()+" "+v.trim()):y.updateMathspeak()},f)),this.ariaPostLabel=v):(this._ariaAlertTimeout&&clearTimeout(this._ariaAlertTimeout),this.ariaPostLabel=""),this},M.prototype.getAriaPostLabel=function(){return this.ariaPostLabel||""},M.prototype.containerHasFocus=function(){return document.activeElement&&this.container.contains(document.activeElement)},M.prototype.getTextarea=function(){var v=this.textarea;return a("textarea initialized",v),v},M.prototype.getTextareaSpan=function(){var v=this.textareaSpan;return a("textareaSpan initialized",v),v},M.prototype.addTextareaEventListeners=function(v){if(this.textarea)for(var f in v){var y=f;this.removeTextareaEventListener(y),this.textarea.addEventListener(y,v[y])}},M.prototype.removeTextareaEventListener=function(v){if(this.textarea){var f=this.textareaEventListeners[v];f&&this.textarea.removeEventListener(v,f)}},M.prototype.exportMathSpeak=function(){return this.root.mathspeak()},M.prototype.updateMathspeak=function(v){},M.prototype.scrollHoriz=function(){},M.prototype.selectionChanged=function(){},M.prototype.setOverflowClasses=function(){},M.notifyees=[],M}(),pe={},Y={},j={handlers:!0,autoCommands:!0,quietEmptyDelimiters:!0,autoParenthesizedFunctions:!0,autoOperatorNames:!0,infixOperatorNames:!0,prefixOperatorNames:!0,leftRightIntoCmdGoes:!0,maxDepth:!0,interpretTildeAsSim:!0,disableAutoSubstitutionInSubscripts:!0},X={},xe=function(){function M(v){this.version=v}return M.prototype.assertJquery=function(){return a("Interface versions > 2 do not depend on JQuery",this.version<=2),a("JQuery is set for interface v < 3",this.jQuery),this.jQuery},M}(),fe=function(){function M(){}return M}(),Se=function(){window.console&&console.warn(`You are using the MathQuill API without specifying an interface version, which will fail in v1.0.0. Easiest fix is to do the following before doing anything else:

    MathQuill = MathQuill.getInterface(1);
    // now MathQuill.MathField() works like it used to

See also the "\`dev\` branch (2014\u20132015) \u2192 v0.10.0 Migration Guide" at
  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide`)},ke;function Le(M){return Se(),ke||(ke=J(1)),ke(M)}Le.prototype=fe.prototype,Le.VERSION="v0.10.1",Le.interfaceVersion=function(M){if(M!==1)throw"Only interface version 1 supported. You specified: "+M;return Se=function(){window.console&&console.warn(`You called MathQuill.interfaceVersion(1); to specify the interface version, which will fail in v1.0.0. You can fix this easily by doing this before doing anything else:

    MathQuill = MathQuill.getInterface(1);
    // now MathQuill.MathField() works like it used to

See also the "\`dev\` branch (2014\u20132015) \u2192 v0.10.0 Migration Guide" at
  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide`)},Se(),Le},Le.getInterface=J;var $e=J.MIN=1,Q=J.MAX=3;function J(M){if(M!==1&&M!==2&&M!==3)throw"Only interface versions between "+$e+" and "+Q+" supported. You specified: "+M;var v=M;if(v<3){var f=window.jQuery;if(!f)throw"MathQuill interface version ".concat(v," requires jQuery 1.5.2+ to be loaded first");xe.prototype.jQuery=f}var y=v0(v0({},X),{handlers:function(De){return{fns:De||{},APIClasses:ee}}});function C(De,Ce){for(var Ue in Ce)if(Ce.hasOwnProperty(Ue)){if(Ue==="substituteKeyboardEvents"&&v>=3)throw new Error(["As of interface version 3, the 'substituteKeyboardEvents'","option is no longer supported. Use 'overrideTypedText' and","'overrideKeystroke' instead."].join(" "));var We=Ce[Ue],ot=y[Ue];De[Ue]=ot?ot(We):We}}var R=v<3?xe:function(De){dt(Ce,De);function Ce(){return De!==null&&De.apply(this,arguments)||this}return Ce}(xe),z=function(De){dt(Ce,De);function Ce(Ue){var We=De.call(this)||this;return We.__controller=Ue,We.__options=Ue.options,We.id=Ue.id,We.data=Ue.data,We}return Ce.prototype.mathquillify=function(Ue){var We=this.__controller,ot=We.root,ct=We.container;We.createTextarea();var kt=G(ct).addClass(Ue).children().detach();ot.setDOM(G(c("span",{class:"dcg-mq-root-block","aria-hidden":!0})).appendTo(ct).oneElement()),F.linkElementByBlockNode(ot.domFrag().oneElement(),ot),this.latex(kt.text()),this.revert=function(){return We.removeMouseEventListener(),G(ct).removeClass("dcg-mq-editable-field dcg-mq-math-mode dcg-mq-text-mode").empty().append(kt),v<3?this.__options.assertJquery()(ct):ct}},Ce.prototype.setAriaLabel=function(Ue){return this.__controller.setAriaLabel(Ue),this},Ce.prototype.getAriaLabel=function(){return this.__controller.getAriaLabel()},Ce.prototype.config=function(Ue){return C(this.__options,Ue),Ue.tabindex!==void 0&&this.__controller.setTabindex(Ue.tabindex),this},Ce.prototype.el=function(){return this.__controller.container},Ce.prototype.text=function(){return this.__controller.exportText()},Ce.prototype.mathspeak=function(){return this.__controller.exportMathSpeak()},Ce.prototype.latex=function(Ue){if(arguments.length>0){this.__controller.renderLatexMath(Ue);var We=this.__controller.cursor;return this.__controller.blurred&&We.hide().parent.blur(We),this}return this.__controller.exportLatex()},Ce.prototype.selection=function(Ue){return Ue?(this.__controller.restoreLatexSelection(Ue),this):this.__controller.exportLatexSelection().selection},Ce.prototype.html=function(){return this.__controller.root.domFrag().oneElement().innerHTML.replace(/ jQuery\d+="(?:\d+|null)"/g,"").replace(/ mathquill-(?:command|block)-id="?\d+"?/g,"").replace(/<span class="?dcg-mq-cursor( dcg-mq-blink)?"?>.?<\/span>/i,"").replace(/ dcg-mq-hasCursor|dcg-mq-hasCursor ?/,"").replace(/ class=(""|(?= |>))/g,"")},Ce.prototype.reflow=function(){return this.__controller.root.postOrder(function(Ue){Ue.reflow()}),this},Ce.prototype.focus=function(){return this.__controller.getTextarea().focus(),this.__controller.editable&&this.__controller.scrollHoriz(),this},Ce.prototype.select=function(){return this.__controller.selectAll(),this},Ce.prototype.blur=function(){return this.__controller.getTextarea().blur(),this},Ce}(fe),W=function(De){dt(Ce,De);function Ce(){return De!==null&&De.apply(this,arguments)||this}return Ce.prototype.mathquillify=function(Ue){return De.prototype.mathquillify.call(this,Ue),this.__controller.editable=!0,this.__controller.addMouseEventListener(),this.__controller.editablesTextareaEvents(),this},Ce.prototype.clearSelection=function(){return this.__controller.cursor.clearSelection(),this},Ce.prototype.write=function(Ue){this.__controller.writeLatex(Ue),this.__controller.scrollHoriz();var We=this.__controller.cursor;return this.__controller.blurred&&We.hide().parent.blur(We),this},Ce.prototype.empty=function(){var Ue,We=this.__controller.root,ot=this.__controller.cursor;return We.setEnds((Ue={},Ue[r]=0,Ue[e]=0,Ue)),We.domFrag().empty(),delete ot.selection,ot.insAtRightEnd(We),this},Ce.prototype.cmd=function(Ue){var We=this.__controller.notify(void 0),ot=We.cursor;if(/^\\[a-z]+$/i.test(Ue)&&!ot.isTooDeep()){Ue=Ue.slice(1);var ct=L[Ue],kt;ct&&(ct.constructor?kt=new ct(Ue):kt=ct(Ue),ot.selection&&kt.replaces(ot.replaceSelection()),kt.createLeftOf(ot.show()))}else ot.parent.write(ot,Ue);return We.scrollHoriz(),We.blurred&&ot.hide().parent.blur(ot),this},Ce.prototype.moveToDirEnd=function(Ue){return this.__controller.notify("move").cursor.insAtDirEnd(Ue,this.__controller.root),this},Ce.prototype.moveToLeftEnd=function(){return this.moveToDirEnd(r)},Ce.prototype.moveToRightEnd=function(){return this.moveToDirEnd(e)},Ce.prototype.keystroke=function(Ue,We){for(var ot=Ue.replace(/^\s+|\s+$/g,"").split(/\s+/),ct=0;ct<ot.length;ct+=1)this.__controller.keystroke(ot[ct],We);return this},Ce.prototype.typedText=function(Ue){for(var We=0;We<Ue.length;We+=1)this.__controller.typedText(Ue.charAt(We));return this},Ce.prototype.dropEmbedded=function(Ue,We,ot){var ct=Ue-T(),kt=We-I(),cr=document.elementFromPoint(ct,kt);this.__controller.seek(cr,ct,kt);var ni=new fN().setOptions(ot);ni.createLeftOf(this.__controller.cursor)},Ce.prototype.setAriaPostLabel=function(Ue,We){return this.__controller.setAriaPostLabel(Ue,We),this},Ce.prototype.getAriaPostLabel=function(){return this.__controller.getAriaPostLabel()},Ce.prototype.clickAt=function(Ue,We,ot){ot=ot||document.elementFromPoint(Ue,We);var ct=this.__controller,kt=ct.root,cr=kt.domFrag().oneElement();return cr.contains(ot)||(ot=cr),ct.seek(ot,Ue,We),ct.blurred&&this.focus(),this},Ce.prototype.ignoreNextMousedown=function(Ue){return this.__controller.cursor.options.ignoreNextMousedown=Ue,this},Ce.prototype.isUserSelecting=function(){return this.__controller.isMouseSelecting},Ce}(z),ee={AbstractMathQuill:z,EditableField:W};a("API.StaticMath defined",pe.StaticMath),ee.StaticMath=pe.StaticMath(ee),a("API.MathField defined",pe.MathField),ee.MathField=pe.MathField(ee),a("API.InnerMathField defined",pe.InnerMathField),ee.InnerMathField=pe.InnerMathField(ee),pe.TextField&&(ee.TextField=pe.TextField(ee));var ye=function(De){if(!De||!De.nodeType)return null;for(var Ce,Ue=G(De).children().toElementArray(),We=0,ot=Ue;We<ot.length;We++){var ct=ot[We];if(ct.classList.contains("dcg-mq-root-block")){Ce=ct;break}}var kt=F.getNodeOfElement(Ce),cr=kt&&kt.controller,ni=cr&&ee[cr.KIND_OF_MQ];return cr&&ni?new ni(cr):null};ye.L=r,ye.R=e,ye.config=function(De){return C(R.prototype,De),this},ye.registerEmbed=function(De,Ce){if(!/^[a-z][a-z0-9]*$/i.test(De))throw"Embed name must start with letter and be only letters and digits";Y[De]=Ce},ye.StaticMath=ze("StaticMath",ee.StaticMath),ye.MathField=ze("MathField",ee.MathField),ye.InnerMathField=ze("InnerMathField",ee.InnerMathField),ee.TextField&&(ye.TextField=ze("TextField",ee.TextField)),ye.prototype=z.prototype,ye.EditableField=function(){throw"wtf don't call me, I'm 'abstract'"},ye.EditableField.prototype=W.prototype,v<3&&(ye.saneKeyboardEvents=xo);function ze(De,Ce){a(De+" is defined",Ce);function Ue(We,ot){if(!We||!We.nodeType)return null;var ct=ye(We);if(ct instanceof Ce)return ct;var kt=new it(new Ce.RootBlock,We,new R(v));return kt.KIND_OF_MQ=De,new Ce(kt).__mathquillify(ot||{},v)}return Ue.prototype=Ce.prototype,Ue}return ye}Le.noConflict=function(){return window.MathQuill=ve,Le};var ve=window.MathQuill;window.MathQuill=Le;function Ie(M){M.moveOutOf=function(v){a("controller is defined",this.controller),this.controller.handle("moveOutOf",v)},M.deleteOutOf=function(v){a("controller is defined",this.controller),this.controller.handle("deleteOutOf",v)},M.selectOutOf=function(v){a("controller is defined",this.controller),this.controller.handle("selectOutOf",v)},M.upOutOf=function(){a("controller is defined",this.controller),this.controller.handle("upOutOf")},M.downOutOf=function(){a("controller is defined",this.controller),this.controller.handle("downOutOf")},M.reflow=function(){a("controller is defined",this.controller),this.controller.handle("reflow"),this.controller.handle("edited"),this.controller.handle("edit")}}function He(M,v){throw M?M="'"+M+"'":M="EOF","Parse Error: "+v+" at "+M}var ge=function(){function M(v){this._=v}return M.prototype.parse=function(v){return this.skip(M.eof)._(""+v,f,He);function f(y,C){return C}},M.prototype.or=function(v){a("or is passed a parser",v instanceof M);var f=this;return new M(function(y,C,R){return f._(y,C,z);function z(W){return v._(y,C,R)}})},M.prototype.then=function(v){var f=this;return new M(function(y,C,R){return f._(y,z,R);function z(W,ee){var ye=v instanceof M?v:v(ee);return a("a parser is returned",ye instanceof M),ye._(W,C,R)}})},M.prototype.many=function(){var v=this;return new M(function(f,y,C){for(var R=[];v._(f,z,W););return y(f,R);function z(ee,ye){return f=ee,R.push(ye),!0}function W(){return!1}})},M.prototype.times=function(v,f){arguments.length<2&&(f=v);var y=this;return new M(function(C,R,z){for(var W=[],ee=!0,ye,ze=0;ze<v;ze+=1)if(ee=!!y._(C,De,Ce),!ee)return z(C,ye);for(;ze<f&&ee;ze+=1)y._(C,De,Ue);return R(C,W);function De(We,ot){return W.push(ot),C=We,!0}function Ce(We,ot){return ye=ot,C=We,!1}function Ue(We,ot){return!1}})},M.prototype.result=function(v){return this.then(M.succeed(v))},M.prototype.atMost=function(v){return this.times(0,v)},M.prototype.atLeast=function(v){var f=this;return f.times(v).then(function(y){return f.many().map(function(C){return y.concat(C)})})},M.prototype.map=function(v){return this.then(function(f){return M.succeed(v(f))})},M.prototype.skip=function(v){return this.then(function(f){return v.result(f)})},M.string=function(v){var f=v.length,y="expected '"+v+"'";return new M(function(C,R,z){var W=C.slice(0,f);return W===v?R(C.slice(f),W):z(C,y)})},M.regex=function(v){a("regexp parser is anchored",v.toString().charAt(1)==="^");var f="expected "+v;return new M(function(y,C,R){var z=v.exec(y);if(z){var W=z[0];return C(y.slice(W.length),W)}else return R(y,f)})},M.succeed=function(v){return new M(function(f,y){return y(f,v)})},M.fail=function(v){return new M(function(f,y,C){return C(f,v)})},M.letter=M.regex(/^[a-z]/i),M.letters=M.regex(/^[a-z]*/i),M.digit=M.regex(/^[0-9]/),M.digits=M.regex(/^[0-9]*/),M.whitespace=M.regex(/^\s+/),M.optWhitespace=M.regex(/^\s*/),M.any=new M(function(v,f,y){return v?f(v.slice(1),v.charAt(0)):y(v,"expected any character")}),M.all=new M(function(v,f,y){return f("",v)}),M.eof=new M(function(v,f,y){return v?y(v,"expected EOF"):f(v,v)}),M}(),Ze=function(){function M(){this.fn=i}return M.prototype.listen=function(v){this.fn=v,clearTimeout(this.timeoutId),this.timeoutId=setTimeout(this.fn)},M.prototype.listenOnce=function(v){var f=this;this.listen(function(){for(var y=[],C=0;C<arguments.length;C++)y[C]=arguments[C];f.clearListener(),v.apply(void 0,y)})},M.prototype.clearListener=function(){this.fn=i,clearTimeout(this.timeoutId)},M.prototype.trigger=function(){for(var v=[],f=0;f<arguments.length;f++)v[f]=arguments[f];this.fn.apply(this,v)},M}(),rt=function(){var M={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"},v={ArrowRight:"Right",ArrowLeft:"Left",ArrowDown:"Down",ArrowUp:"Up",Delete:"Del",Escape:"Esc"," ":"Spacebar"};function f(z){switch(C(z)){case"Right":case"Left":case"Down":case"Up":return!0}return!1}function y(z){return z.length===1&&z>="a"&&z<="z"}function C(z){var W;if(z.key===void 0){var ee=z.which||z.keyCode;return M[ee]||String.fromCharCode(ee)}return y(z.key)?z.key.toUpperCase():(W=v[z.key])!==null&&W!==void 0?W:z.key}function R(z){var W=C(z),ee=[];return z.ctrlKey&&ee.push("Ctrl"),z.metaKey&&ee.push("Meta"),z.altKey&&ee.push("Alt"),z.shiftKey&&ee.push("Shift"),ee.length?(W!=="Alt"&&W!=="Control"&&W!=="Meta"&&W!=="Shift"&&ee.push(W),ee.join("-")):W}return function(W,ee){var ye=null,ze=null,De=new Ze;function Ce(){try{W instanceof HTMLTextAreaElement&&W.select()}catch(dr){}}function Ue(dr){De.trigger(),De.clearListener(),W instanceof HTMLTextAreaElement&&(W.value=dr),dr&&Ce(),We=!!dr}var We=!1;function ot(){return!("selectionStart"in W)||!(W instanceof HTMLTextAreaElement)?!1:W.selectionStart!==W.selectionEnd}function ct(){ee.options&&ee.options.overrideKeystroke?ee.options.overrideKeystroke(R(ye),ye):ee.keystroke(R(ye),ye)}function kt(dr){De.trigger(dr),dr.target===W&&(ye=dr,ze=null,We&&De.listenOnce(function(hs){hs&&hs.type==="focusout"||Ce()}),ct())}function cr(dr){De.trigger(dr),dr.target===W&&(ye&&ze&&ct(),ze=dr,f(dr)?De.listenOnce(Co):De.listen(_r))}function ni(dr){De.trigger(dr),dr.target===W&&ye&&!ze&&(f(dr)?De.listenOnce(Co):De.listen(_r))}function _r(){if(!ot()&&W instanceof HTMLTextAreaElement){var dr=W.value;ye&&(ye.key==="Unidentified"||!ye.altKey&&ye.ctrlKey&&!ye.metaKey&&ye.shiftKey&&(ye.key==="U"||ye.key==="Process"))||(dr.length===1?(W.value="",ee.options&&ee.options.overrideTypedText?ee.options.overrideTypedText(dr):ee.typedText(dr)):Co())}}function Co(){W instanceof HTMLTextAreaElement&&W.value.length>1&&Ce()}function pa(){ye=null,ze=null,De.clearListener(),W instanceof HTMLTextAreaElement&&(W.value="")}function Ba(dr){De.trigger(),dr.target===W&&(document.activeElement!==W&&W.focus(),De.listen(function(){if(W instanceof HTMLTextAreaElement){var Fn=W.value;W.value="",Fn&&ee.paste(Fn)}}))}function Bp(dr){De.trigger(dr)}return ee.KIND_OF_MQ==="StaticMath"?(ee.addTextareaEventListeners({keydown:function(dr){var hs,Fn;(Fn=(hs=ee.options).overrideKeystroke)===null||Fn===void 0||Fn.call(hs,R(dr),dr)}}),{select:Ue}):(ee.options&&ee.options.disableCopyPaste?ee.addTextareaEventListeners({keydown:kt,keypress:cr,keyup:ni,focusout:pa,copy:function(dr){dr.preventDefault()},cut:function(dr){dr.preventDefault()},paste:function(dr){De.trigger(),dr.preventDefault()},input:Bp}):ee.addTextareaEventListeners({keydown:kt,keypress:cr,keyup:ni,focusout:pa,cut:function(){De.listenOnce(function(){ee.cut()})},copy:function(){De.listenOnce(function(){ee.copy()})},paste:Ba,input:Bp}),{select:Ue})}}(),Ee=function(M){dt(v,M);function v(){return M!==null&&M.apply(this,arguments)||this}return v.prototype.exportText=function(){return this.root.foldChildren("",function(f,y){return f+y.text()})},v}(de);de.onNotify(function(M,v){if(v==="edit"||v==="replace"||v===void 0){var f=M.controller;if(!f||!f.options.enableDigitGrouping||f.blurred!==!1)return;f.disableGroupingForSeconds(1)}});var At=function(M){dt(v,M);function v(){var f=M!==null&&M.apply(this,arguments)||this;return f.handleTextareaFocusEditable=function(){var y=f.cursor;f.updateMathspeak(),f.blurred=!1,clearTimeout(f.blurTimeout),G(f.container).addClass("dcg-mq-focused"),y.parent||y.insAtRightEnd(f.root),y.selection?(y.selection.domFrag().removeClass("dcg-mq-blur"),f.selectionChanged()):y.show(),f.setOverflowClasses()},f.handleTextareaBlurEditable=function(){f.textareaSelectionTimeout&&(clearTimeout(f.textareaSelectionTimeout),f.textareaSelectionTimeout=0),f.disableGroupingForSeconds(0),f.blurred=!0,f.blurTimeout=setTimeout(function(){f.root.postOrder(function(y){y.intentionalBlur()}),f.cursor.clearSelection().endSelection(),f.blur(),f.updateMathspeak({emptyContent:!0}),f.scrollHoriz()}),window.addEventListener("blur",f.handleWindowBlur)},f.handleTextareaFocusStatic=function(){f.cursor.selection||f.cursor.controller.selectAll(),f.blurred=!1},f.handleTextareaBlurStatic=function(){f.cursor.clearSelection(),f.updateMathspeak({emptyContent:!0})},f.handleWindowBlur=function(){clearTimeout(f.blurTimeout),f.cursor.selection&&f.cursor.selection.domFrag().addClass("dcg-mq-blur"),f.blurWithoutResettingCursor(),f.updateMathspeak({emptyContent:!0})},f}return v.prototype.disableGroupingForSeconds=function(f){var y=this;clearTimeout(this.__disableGroupingTimeout),f===0?this.root.domFrag().removeClass("dcg-mq-suppress-grouping"):(this.root.domFrag().addClass("dcg-mq-suppress-grouping"),this.__disableGroupingTimeout=setTimeout(function(){y.root.domFrag().removeClass("dcg-mq-suppress-grouping")},f*1e3))},v.prototype.blur=function(){this.blurWithoutResettingCursor(),this.options&&this.options.resetCursorOnBlur&&this.cursor.resetToEnd(this)},v.prototype.blurWithoutResettingCursor=function(){this.cursor.hide().parent.blur(this.cursor),G(this.container).removeClass("dcg-mq-focused"),window.removeEventListener("blur",this.handleWindowBlur)},v.prototype.addEditableFocusBlurListeners=function(){var f=this,y=f.cursor;this.addTextareaEventListeners({focus:this.handleTextareaFocusEditable,blur:this.handleTextareaBlurEditable}),f.blurred=!0,y.hide().parent.blur(y)},v.prototype.addStaticFocusBlurListeners=function(){this.addTextareaEventListeners({focus:this.handleTextareaFocusStatic,blur:this.handleTextareaBlurStatic})},v}(Ee),Tt=!1,xt=function(M){dt(v,M);function v(){return M!==null&&M.apply(this,arguments)||this}return v.prototype.keystroke=function(f,y,C){var R=C.cursor;switch(f){case"Ctrl-Shift-Backspace":case"Ctrl-Backspace":C.ctrlDeleteDir(r);break;case"Shift-Backspace":case"Backspace":C.backspace();break;case"Esc":case"Tab":C.escapeDir(e,f,y);return;case"Shift-Tab":case"Shift-Esc":C.escapeDir(r,f,y);return;case"End":C.notify("move").cursor.insAtRightEnd(R.parent),C.aria.queue("end of").queue(R.parent,!0);break;case"Ctrl-End":C.notify("move").cursor.insAtRightEnd(C.root),C.aria.queue("end of").queue(C.ariaLabel).queue(C.root).queue(C.ariaPostLabel);break;case"Shift-End":C.selectToBlockEndInDir(e);break;case"Ctrl-Shift-End":C.selectToRootEndInDir(e);break;case"Home":C.notify("move").cursor.insAtLeftEnd(R.parent),C.aria.queue("beginning of").queue(R.parent,!0);break;case"Ctrl-Home":C.notify("move").cursor.insAtLeftEnd(C.root),C.aria.queue("beginning of").queue(C.ariaLabel).queue(C.root).queue(C.ariaPostLabel);break;case"Shift-Home":C.selectToBlockEndInDir(r);break;case"Ctrl-Shift-Home":C.selectToRootEndInDir(r);break;case"Left":C.moveLeft();break;case"Shift-Left":C.selectLeft();break;case"Ctrl-Left":break;case"Right":C.moveRight();break;case"Shift-Right":C.selectRight();break;case"Ctrl-Right":break;case"Up":C.moveUp();break;case"Down":C.moveDown();break;case"Shift-Up":C.withIncrementalSelection(function(z){if(R[r])for(;R[r];)z(r);else z(r)});break;case"Shift-Down":C.withIncrementalSelection(function(z){if(R[e])for(;R[e];)z(e);else z(e)});break;case"Ctrl-Up":break;case"Ctrl-Down":break;case"Ctrl-Shift-Del":case"Ctrl-Del":C.ctrlDeleteDir(e);break;case"Shift-Del":case"Del":C.deleteForward();break;case"Meta-A":case"Ctrl-A":C.selectAll();break;case"Ctrl-Alt-Up":R.parent.parent&&R.parent.parent instanceof v?C.aria.queue(R.parent.parent):C.aria.queue("nothing above");break;case"Ctrl-Alt-Down":R.parent&&R.parent instanceof v?C.aria.queue(R.parent):C.aria.queue("block is empty");break;case"Ctrl-Alt-Left":R.parent.parent&&R.parent.parent.getEnd(r)?C.aria.queue(R.parent.parent.getEnd(r)):C.aria.queue("nothing to the left");break;case"Ctrl-Alt-Right":R.parent.parent&&R.parent.parent.getEnd(e)?C.aria.queue(R.parent.parent.getEnd(e)):C.aria.queue("nothing to the right");break;case"Ctrl-Alt-Shift-Down":R.selection?C.aria.queue(R.selection.join("mathspeak"," ").trim()+" selected"):C.aria.queue("nothing selected");break;case"Ctrl-Alt-=":case"Ctrl-Alt-Shift-Right":C.ariaPostLabel.length?C.aria.queue(C.ariaPostLabel):C.aria.queue("no answer");break;default:return}C.aria.alert(),y==null||y.preventDefault(),C.scrollHoriz()},v.prototype.moveOutOf=function(f,y,C){a("overridden or never called on this node",!1)},v.prototype.moveTowards=function(f,y,C){a("overridden or never called on this node",!1)},v.prototype.deleteOutOf=function(f,y){a("overridden or never called on this node",!1)},v.prototype.deleteTowards=function(f,y){a("overridden or never called on this node",!1)},v.prototype.unselectInto=function(f,y){a("overridden or never called on this node",!1)},v.prototype.selectOutOf=function(f,y){a("overridden or never called on this node",!1)},v.prototype.selectTowards=function(f,y){a("overridden or never called on this node",!1)},v}(F);de.onNotify(function(M,v){(v==="move"||v==="upDown")&&M.show().clearSelection()}),X.leftRightIntoCmdGoes=function(M){if(M&&M!=="up"&&M!=="down")throw'"up" or "down" required for leftRightIntoCmdGoes option, got "'+M+'"';return M},de.onNotify(function(M,v){v!=="upDown"&&(M.upDownCache={})}),de.onNotify(function(M,v){v==="edit"&&M.show().deleteSelection()}),de.onNotify(function(M,v){v!=="select"&&M.endSelection()});var sr=function(M){dt(v,M);function v(){return M!==null&&M.apply(this,arguments)||this}return v.prototype.keystroke=function(f,y){this.cursor.parent.keystroke(f,y,this.getControllerSelf())},v.prototype.escapeDir=function(f,y,C){s(f);var R=this.cursor;if(R.parent!==this.root&&(C==null||C.preventDefault()),R.parent!==this.root)return R.clearSelection(),R.parent.moveOutOf(f,R),R.controller.aria.alert(),this.notify("move")},v.prototype.moveDir=function(f){s(f);var y=this.cursor,C=y.options.leftRightIntoCmdGoes,R=y[f];return y.selection?y.insDirOf(f,y.selection.getEnd(f)):R?R.moveTowards(f,y,C):y.parent.moveOutOf(f,y,C),this.notify("move")},v.prototype.moveLeft=function(){return this.moveDir(r)},v.prototype.moveRight=function(){return this.moveDir(e)},v.prototype.moveUp=function(){return this.moveUpDown("up")},v.prototype.moveDown=function(){return this.moveUpDown("down")},v.prototype.moveUpDown=function(f){var y=this,C=y.notify("upDown").cursor,R,z;f==="up"?(R="upInto",z="upOutOf"):(R="downInto",z="downOutOf");var W=C[r],ee=C[e],ye=ee&&ee[R],ze=W&&W[R];return ye?C.insAtLeftEnd(ye):ze?C.insAtRightEnd(ze):C.parent.bubble(function(De){var Ce=De[z];if(Ce&&(typeof Ce=="function"&&(Ce=Ce.call(De,C)),Ce instanceof xt&&C.jumpUpDown(De,Ce),Ce!==!0))return!1}),y},v.prototype.deleteDir=function(f){s(f);var y=this.cursor,C=y[f],R=y.parent.parent,z=y.controller;if(C&&C instanceof xt)C.sides?z.aria.queue(C.parent.chToCmd(C.sides[-f].ch).mathspeak({createdLeftOf:y})):!C.blocks&&C.parent.ctrlSeq!=="\\text"&&z.aria.queue(C);else if(R&&R instanceof xt)if(R.sides)z.aria.queue(R.parent.chToCmd(R.sides[f].ch).mathspeak({createdLeftOf:y}));else if(R.blocks&&R.mathspeakTemplate)if(R.upInto&&R.downInto)z.aria.queue(R.mathspeakTemplate[1]);else{var W=R.mathspeakTemplate,ee=f===r?W[0]:W[W.length-1];z.aria.queue(ee)}else z.aria.queue(R);var ye=y.selection;if(this.notify("edit"),!ye){var ze=y[f];ze?ze.deleteTowards(f,y):y.parent.deleteOutOf(f,y)}var De=y[r],Ce=y[e];return De.siblingDeleted&&De.siblingDeleted(y.options,e),Ce.siblingDeleted&&Ce.siblingDeleted(y.options,r),y.parent.bubble(function(Ue){Ue.reflow()}),this},v.prototype.ctrlDeleteDir=function(f){s(f);var y=this.cursor;if(!y[f]||y.selection)return this.deleteDir(f);this.notify("edit");var C;f===r?C=new B(y.parent.getEnd(r),y[r]):C=new B(y[e],y.parent.getEnd(e)),y.controller.aria.queue(C),C.remove(),y.insAtDirEnd(f,y.parent);var R=y[r],z=y[e];return R&&R.siblingDeleted(y.options,e),z&&z.siblingDeleted(y.options,r),y.parent.bubble(function(W){W.reflow()}),this},v.prototype.backspace=function(){return this.deleteDir(r)},v.prototype.deleteForward=function(){return this.deleteDir(e)},v.prototype.startIncrementalSelection=function(){a("Multiple selections can't be simultaneously open",!Tt),Tt=!0,this.notify("select");var f=this.cursor;f.anticursor||f.startSelection()},v.prototype.selectDirIncremental=function(f){a("A selection is open",Tt),Tt=!0;var y=this.cursor,C=y.selection;s(f);var R=y[f];R?C&&C.getEnd(f)===R&&y.anticursor[-f]!==R?R.unselectInto(f,y):R.selectTowards(f,y):y.parent.selectOutOf(f,y)},v.prototype.finishIncrementalSelection=function(){a("A selection is open",Tt);var f=this.cursor;f.clearSelection(),f.select()||f.show();var y=f.selection;y&&f.controller.aria.clear().queue(y.join("mathspeak"," ").trim()+" selected"),Tt=!1},v.prototype.withIncrementalSelection=function(f){var y=this;try{this.startIncrementalSelection();try{f(function(C){return y.selectDirIncremental(C)})}finally{this.finishIncrementalSelection()}}finally{Tt=!1}},v.prototype.selectDir=function(f){this.withIncrementalSelection(function(y){return y(f)})},v.prototype.selectLeft=function(){return this.selectDir(r)},v.prototype.selectRight=function(){return this.selectDir(e)},v.prototype.selectAll=function(){this.notify("move");var f=this.cursor;f.insAtRightEnd(this.root),this.withIncrementalSelection(function(y){for(;f[r];)y(r)})},v.prototype.selectToBlockEndInDir=function(f){var y=this.cursor;this.withIncrementalSelection(function(C){for(;y[f];)C(f)})},v.prototype.selectToRootEndInDir=function(f){var y=this,C=this.cursor;this.withIncrementalSelection(function(R){for(;C[f]||C.parent!==y.root;)R(f)})},v}(At),oe=function(M){dt(v,M);function v(f){return M.call(this)||this}return v}(xt),te=function(){function M(_r){var Co=new ft;return _r.adopt(Co,0,0),Co}function v(_r){for(var Co=_r[0]||new ft,pa=1;pa<_r.length;pa+=1)_r[pa].children().adopt(Co,Co.getEnd(e),0);return Co}var f=ge.string,y=ge.regex,C=ge.letter,R=ge.digit,z=ge.any,W=ge.optWhitespace,ee=ge.succeed,ye=ge.fail,ze=C.map(function(_r){return new fr(_r)}),De=R.map(function(_r){return new Ct(_r)}),Ce=y(/^[^${}\\_^]/).map(function(_r){return new Z(_r)}),Ue=y(/^[^\\a-eg-zA-Z]/).or(f("\\").then(y(/^[a-z]+/i).or(y(/^\s+/).result(" ")).or(z))).then(function(_r){var Co=L[_r];if(Co)if(Co.constructor){var pa=Co;return new pa(_r).parser()}else{var Ba=Co;return Ba(_r).parser()}else return ye("unknown command: \\"+_r)}),We=Ue.or(ze).or(De).or(Ce),ot=f("{").then(function(){return kt}).skip(f("}")),ct=W.then(ot.or(We.map(M))),kt=ct.many().map(v).skip(W),cr=f("[").then(ct.then(function(_r){return _r.join("latex")!=="]"?ee(_r):ye("")}).many().map(v).skip(W)).skip(f("]")),ni=kt;return ni.block=ct,ni.optBlock=cr,ni}();X.maxDepth=function(M){return typeof M=="number"?M:void 0};var Fe=function(M){dt(v,M);function v(){return M!==null&&M.apply(this,arguments)||this}return v.prototype.cleanLatex=function(f){return f.replace(/(\\[a-z]+) (?![a-z])/gi,"$1")},v.prototype.exportLatex=function(){return this.cleanLatex(this.root.latex())},v.prototype.writeLatex=function(f){var y=this.notify("edit").cursor;return y.parent.writeLatex(y,f),this},v.prototype.prepareCursorForRestoration=function(){return this.cursor.clearSelection().endSelection(),this.notify("move").cursor},v.prototype.restoreLatexSelection=function(f){var y=this,C=this.exportLatexSelection(),R=C.selection,z=R.latex,W=f.latex;if(W===z&&!(f.startIndex===R.startIndex&&f.endIndex===R.endIndex))if(f.endIndex===0)this.prepareCursorForRestoration().insAtDirEnd(r,this.root);else if(f.startIndex===W.length)this.prepareCursorForRestoration().insAtDirEnd(e,this.root);else{var ee=Qe(z,C.ctx.uncleanedLatex,f),ye=this.exportLatexSelection(ee).ctx.restoreInfo;if(f.startIndex===f.endIndex)ye!=null&&ye.cursorL?this.prepareCursorForRestoration().insRightOf(ye.cursorL):ye!=null&&ye.cursorParent&&this.prepareCursorForRestoration().insAtLeftEnd(ye.cursorParent);else if(ye!=null&&ye.selectionL&&ye.selectionR){this.prepareCursorForRestoration().insRightOf(ye.selectionR);var ze=this.cursor.controller.root;this.withIncrementalSelection(function(De){do if(De(r),!y.cursor[r]&&y.cursor.parent===ze)break;while(y.cursor[e]!==ye.selectionL)})}}},v.prototype.exportLatexSelection=function(f){var y={uncleanedLatex:"",uncleanedStartIndex:-1,uncleanedEndIndex:-1};f&&(y.restoreInfo={uncleanedStartIndex:f.uncleanStartIndex,uncleanedEndIndex:f.uncleanEndIndex});var C=this.cursor.selection;if(C&&this.cursor.anticursor)y.startSelectionBefore=C.getEnd(r),y.endSelectionAfter=C.getEnd(e);else{var R=this.cursor[r];R?y.startSelectionAfter=R:y.startSelectionBefore=this.cursor.parent;var z=this.cursor[e];z?y.endSelectionBefore=z:y.endSelectionAfter=this.cursor.parent}this.root.latexRecursive(y);var W=y.uncleanedLatex,ee=this.cleanLatex(W),ye=me(W,ee,y),ze=ye.startIndex,De=ye.endIndex;return{selection:{latex:ee,startIndex:ze,endIndex:De},ctx:y}},v.prototype.classifyLatexForEfficientUpdate=function(f){if(typeof f=="string"){var y=f.match(/-?[0-9.]+$/g);if(y&&y.length===1)return{latex:f,prefix:f.substr(0,f.length-y[0].length),digits:y[0]}}},v.prototype.updateLatexMathEfficiently=function(f,y){var C,R,z,W,ee=this.root,ye,ze=this.classifyLatexForEfficientUpdate(f);if(ze){if(ye=this.classifyLatexForEfficientUpdate(y),!ye||ye.prefix!==ze.prefix)return!1}else return!1;var De=ye.digits,Ce=ze.digits,Ue=!1,We=!1;De[0]==="-"&&(Ue=!0,De=De.substr(1)),Ce[0]==="-"&&(We=!0,Ce=Ce.substr(1));for(var ot=this.root.getEnd(e),ct=[],kt=De.length-1;kt>=0;kt--){if(!ot||ot.ctrlSeq!==De[kt]||ot.parent!==ee)return!1;ct.unshift(ot),ot=ot[r]}if(Ue&&!We){var cr=ot;if(!cr||cr.ctrlSeq!=="-"||cr[e]!==ct[0]||cr.parent!==ee)return!1;var ni=cr[r];if(ni&&ni.parent!==ee)return!1;ct[0][r]=cr[r],ee.getEnd(r)===cr&&ee.setEnds((C={},C[r]=ct[0],C[e]=ee.getEnd(e),C)),ni&&(ni[e]=ct[0]),cr.domFrag().remove()}if(!Ue&&We){var _r=new ec("-"),Co=document.createElement("span");Co.textContent="-",_r.setDOM(Co);var pa=ct[0][r];pa&&(pa[e]=_r),ee.getEnd(r)===ct[0]&&ee.setEnds((R={},R[r]=_r,R[e]=ee.getEnd(e),R)),_r.parent=ee,_r[r]=ct[0][r],_r[e]=ct[0],ct[0][r]=_r,_r.contactWeld(this.cursor),_r.domFrag().insertBefore(ct[0].domFrag())}var Ba=Math.min(De.length,Ce.length);for(kt=0;kt<Ba;kt++){var Bp=Ce[kt];ot=ct[kt],ot.ctrlSeq!==Bp&&(ot.ctrlSeq=Bp,ot.domFrag().oneElement().textContent=Bp,ot.mathspeakName=Bp)}if(De.length>Ce.length)for(ot=ct[Ce.length-1],ee.setEnds((z={},z[r]=ee.getEnd(r),z[e]=ot,z)),ot[e]=0,kt=De.length-1;kt>=Ba;kt--)ct[kt].domFrag().remove();if(Ce.length>De.length){var dr=document.createDocumentFragment();for(kt=Ba;kt<Ce.length;kt++){var hs=document.createElement("span");hs.className="dcg-mq-digit",hs.textContent=Ce[kt];var Fn=new Ct(Ce[kt]);Fn.parent=ee,Fn.setDOM(hs),dr.appendChild(hs),Fn[r]=ee.getEnd(e),Fn[e]=0;var jJ=Fn[r];jJ[e]=Fn,ee.setEnds((W={},W[r]=ee.getEnd(r),W[e]=Fn,W))}ee.domFrag().oneElement().appendChild(dr)}var yN=this.exportLatex();if(yN!==f)return console.warn("tried updating latex efficiently but did not work. Attempted: "+f+" but wrote: "+yN),!1;var xN=ee.getEnd(e);return xN&&xN.fixDigitGrouping(this.cursor.options),!0},v.prototype.renderLatexMathFromScratch=function(f){var y,C=this.root,R=this.cursor,z=ge.all,W=ge.eof,ee=te.skip(W).or(z.result(!1)).parse(f);if(C.setEnds((y={},y[r]=0,y[e]=0,y)),ee&&ee.children().adopt(C,0,0),ee){var ye=C.domFrag();ye.children().remove(),ye.oneElement().appendChild(ee.html()),C.finalizeInsert(R.options,R)}else C.domFrag().empty()},v.prototype.renderLatexMath=function(f){var y=this.cursor,C=this.root;this.notify("replace"),y.clearSelection();var R=this.exportLatex();(!C.getEnd(r)||!C.getEnd(e)||R!==f)&&(this.updateLatexMathEfficiently(f,R)||this.renderLatexMathFromScratch(f),this.updateMathspeak()),y.insAtRightEnd(C)},v.prototype.renderLatexText=function(f){var y,C=this.root,R=this.cursor;C.domFrag().children().slice(1).remove(),C.setEnds((y={},y[r]=0,y[e]=0,y)),delete R.selection,R.show().insAtRightEnd(C);var z=ge.regex,W=ge.string,ee=ge.eof,ye=ge.all,ze=W("$").then(te).skip(W("$").or(ee)).map(function(ct){var kt=new RootMathCommand(R);kt.createBlocks();var cr=kt.getEnd(r);return ct.children().adopt(cr,0,0),kt}),De=W("\\$").result("$"),Ce=De.or(z(/^[^$]/)).map(function(ct){return new Z(ct)}),Ue=ze.or(Ce).many(),We=Ue.skip(ee).or(ye.result(!1)).parse(f);if(We){for(var ot=0;ot<We.length;ot+=1)We[ot].adopt(C,C.getEnd(e),0);G(C.html()).appendTo(C.domFrag().oneElement()),C.finalizeInsert(R.options,R)}},v}(sr);function me(M,v,f){for(var y=f.uncleanedStartIndex,C=f.uncleanedEndIndex,R=0,z=0;R<f.uncleanedEndIndex;R++)M[R]!==v[z]?(R<f.uncleanedStartIndex&&(y-=1),C-=1):z+=1;return{startIndex:y,endIndex:C}}function Qe(M,v,f){for(var y=f.startIndex,C=f.endIndex,R=y,z=C,W=0,ee=0;W<v.length;W++)v[W]!==M[ee]?(ee<=y&&(R+=1),ee<=C&&(z+=1)):ee+=1;return{uncleanStartIndex:R,uncleanEndIndex:z}}var Ne=function(M){return!1};xe.prototype.ignoreNextMousedown=Ne;var lr;(function(){de.onNotify(function(M,v){(v==="edit"||v==="replace")&&lr&&lr.cursor===M&&lr.cb()})})();var nt=function(M){dt(v,M);function v(){var f=M!==null&&M.apply(this,arguments)||this;return f.handleMouseDown=function(y){var C=p(y.target,".dcg-mq-root-block"),R=C&&F.getNodeOfElement(C)||F.getNodeOfElement(f.root.domFrag().oneElement()),z=R.domFrag().firstNode().ownerDocument,W=R.controller,ee=W.cursor,ye=ee.blink,ze=W.getTextarea();if(y.preventDefault(),y.target.unselectable=!0,ee.options.ignoreNextMousedown(y)||p(y.target,".dcg-mq-ignore-mousedown"))return;var De=null;function Ce(cr){De=cr.target}function Ue(cr){ee.anticursor||ee.startSelection(),W.seek(De,cr.clientX,cr.clientY).cursor.select(),ee.selection&&ee.controller.aria.clear().queue(ee.selection.join("mathspeak")+" selected").alert(),De=null}function We(){C==null||C.removeEventListener("mousemove",Ce),z==null||z.removeEventListener("mousemove",Ue),z==null||z.removeEventListener("mouseup",ct),lr=void 0,W.isMouseSelecting=!1}function ot(){W.editable&&(ee.show(),ee.controller.aria.queue(ee.parent).alert())}function ct(){ee.blink=ye,ee.selection||ot(),We()}var kt;lr={cursor:ee,cb:function(){kt=!0,ee.blink=ye,ee.clearSelection(),ot(),We()}},!(W.blurred&&(f.editable&&ze.focus(),kt))&&(ee.blink=i,W.isMouseSelecting=!0,W.seek(y.target,y.clientX,y.clientY).cursor.startSelection(),C==null||C.addEventListener("mousemove",Ce),z==null||z.addEventListener("mousemove",Ue),z==null||z.addEventListener("mouseup",ct))},f}return v.prototype.addMouseEventListener=function(){this.container.addEventListener("mousedown",this.handleMouseDown)},v.prototype.removeMouseEventListener=function(){this.container.removeEventListener("mousedown",this.handleMouseDown)},v.prototype.seek=function(f,y,C){for(var R=this.notify("select").cursor,z;f&&(z=F.getNodeOfElement(f),!z);)f=f.parentElement;return z||(z=this.root),R.clearSelection().show(),z.seek(y,R),this.scrollHoriz(),this},v}(Fe),Di=function(M){dt(v,M);function v(){return M!==null&&M.apply(this,arguments)||this}return v.prototype.setOverflowClasses=function(){var f=this.root.domFrag().oneElement(),y=!1,C=!1;if(!this.blurred){var R=k(f).width,z=f.scrollWidth,W=f.scrollLeft;y=z>R+W,C=W>0}f.classList.contains("dcg-mq-editing-overflow-right")!==y&&f.classList.toggle("dcg-mq-editing-overflow-right"),f.classList.contains("dcg-mq-editing-overflow-left")!==C&&f.classList.toggle("dcg-mq-editing-overflow-left")},v.prototype.scrollHoriz=function(){var f=this,y=this.cursor,C=y.selection,R=k(this.root.domFrag().oneElement());if(y.domFrag().isEmpty()&&!C){this.cancelScrollHoriz&&(this.cancelScrollHoriz(),this.cancelScrollHoriz=void 0);var z=this.root.domFrag().oneElement(),W=z.scrollLeft;P(this.getScrollAnimationDuration(),function(ct,kt,cr){ct>=1?(f.cancelScrollHoriz=void 0,z.scrollLeft=0,f.setOverflowClasses()):(f.cancelScrollHoriz=cr,kt(),z.scrollLeft=Math.round((1-ct)*W))});return}else if(C){var ze=k(C.domFrag().oneElement()),De=ze.left-(R.left+20),Ce=ze.right-(R.right-20);if(C.getEnd(r)===y[e])if(De<0)var ye=De;else if(Ce>0)if(ze.left-Ce<R.left+20)var ye=De;else var ye=Ce;else return;else if(Ce>0)var ye=Ce;else if(De<0)if(ze.right-De>R.right-20)var ye=Ce;else var ye=De;else return}else{var ee=k(y.domFrag().oneElement()).left;if(ee>R.right-20)var ye=ee-(R.right-20);else if(ee<R.left+20)var ye=ee-(R.left+20);else return}var Ue=this.root.domFrag().oneElement();if(!(ye<0&&Ue.scrollLeft===0)&&!(ye>0&&Ue.scrollWidth<=Ue.scrollLeft+R.width)){this.cancelScrollHoriz&&(this.cancelScrollHoriz(),this.cancelScrollHoriz=void 0);var We=this.root.domFrag().oneElement(),ot=We.scrollLeft;P(this.getScrollAnimationDuration(),function(ct,kt,cr){ct>=1?(f.cancelScrollHoriz=void 0,We.scrollLeft=Math.round(ot+ye),f.setOverflowClasses()):(f.cancelScrollHoriz=cr,kt(),We.scrollLeft=Math.round(ot+ct*ye))})}},v.prototype.getScrollAnimationDuration=function(){var f;return(f=this.options.scrollAnimationDuration)!==null&&f!==void 0?f:100},v}(nt);xe.prototype.substituteTextarea=function(){return c("textarea",{autocapitalize:"off",autocomplete:"off",autocorrect:"off",spellcheck:!1,"x-palm-disable-ste-all":!0})};function zr(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(M){var v=Math.random()*16|0,f=M==="x"?v:v&3|8;return f.toString(16)})}function xo(M,v){return rt(M[0],v)}xe.prototype.substituteKeyboardEvents=xo;var it=function(M){dt(v,M);function v(){var f=M!==null&&M.apply(this,arguments)||this;return f.selectFn=i,f}return v.prototype.createTextarea=function(){this.textareaSpan=c("span",{class:"dcg-mq-textarea"});var f=this.options.substituteTextarea();if(!f.nodeType)throw"substituteTextarea() must return a DOM element, got "+f;this.textarea=G(f).appendTo(this.textareaSpan).oneElement(),this.mathspeakSpan||(this.mathspeakId=zr(),this.mathspeakSpan=c("span",{class:"dcg-mq-mathspeak",id:this.mathspeakId}),G(this.textareaSpan).prepend(G(this.mathspeakSpan))),this.mathspeakId&&(f==null||f.setAttribute("aria-labelledby",this.mathspeakId));var y=this;y.cursor.selectionChanged=function(){y.selectionChanged()};var C=this.options.tabindex!==void 0?this.options.tabindex:this.KIND_OF_MQ==="StaticMath"?-1:0;this.setTabindex(C)},v.prototype.setTabindex=function(f){var y,C,R,z,W;f===this.previousTabindex||!this.textarea||(this.previousTabindex=f,(y=this.textarea)===null||y===void 0||y.setAttribute("tabindex",""+f),f<0&&this.KIND_OF_MQ==="StaticMath"?(C=this.textarea)===null||C===void 0||C.setAttribute("aria-hidden","true"):(R=this.textarea)===null||R===void 0||R.removeAttribute("aria-hidden"),f>=0?(z=this.mathspeakSpan)===null||z===void 0||z.setAttribute("aria-hidden","true"):(W=this.mathspeakSpan)===null||W===void 0||W.removeAttribute("aria-hidden"))},v.prototype.selectionChanged=function(){var f=this;f.textareaSelectionTimeout||(f.textareaSelectionTimeout=setTimeout(function(){f.setTextareaSelection()}))},v.prototype.setTextareaSelection=function(){this.textareaSelectionTimeout=0;var f="";this.cursor.selection&&(f=this.cleanLatex(this.cursor.selection.join("latex")),this.options.statelessClipboard&&(f="$"+f+"$")),this.selectFn(f)},v.prototype.staticMathTextareaEvents=function(){var f=this;this.removeTextareaEventListener("cut"),this.removeTextareaEventListener("paste"),f.options.disableCopyPaste?this.removeTextareaEventListener("copy"):this.addTextareaEventListeners({copy:function(){f.setTextareaSelection()}}),this.addStaticFocusBlurListeners();var y=this.getTextarea(),C=rt(y,this).select;this.selectFn=C;var R=this.getTextareaSpan();G(this.container).prepend(G(R))},v.prototype.editablesTextareaEvents=function(){var f=this,y=f.getTextarea(),C=f.getTextareaSpan();if(this.options.version<3){var R=this.options.assertJquery(),z=this.options.substituteKeyboardEvents(R(y),this);this.selectFn=function(ee){z.select(ee)}}else{var W=rt(y,this).select;this.selectFn=W}G(this.container).prepend(G(C)),this.addEditableFocusBlurListeners(),this.updateMathspeak()},v.prototype.unbindEditablesEvents=function(){var f=this,y=f.getTextarea(),C=f.getTextareaSpan();this.selectFn=function(R){y instanceof HTMLTextAreaElement&&(y.value=R,R&&y.select())},G(C).remove(),this.removeTextareaEventListener("focus"),this.removeTextareaEventListener("blur"),f.blurred=!0,this.removeTextareaEventListener("cut"),this.removeTextareaEventListener("paste")},v.prototype.typedText=function(f){if(f===`
`)return this.handle("enter");var y=this.notify(void 0).cursor;y.parent.write(y,f),this.scrollHoriz()},v.prototype.cut=function(){var f=this,y=f.cursor;y.selection&&setTimeout(function(){f.notify("edit"),y.parent.bubble(function(C){C.reflow()}),f.options&&f.options.onCut&&f.options.onCut()})},v.prototype.copy=function(){this.setTextareaSelection()},v.prototype.paste=function(f){this.options.statelessClipboard&&(f.slice(0,1)==="$"&&f.slice(-1)==="$"?f=f.slice(1,-1):f="\\text{"+f+"}"),this.writeLatex(f).cursor.show(),this.scrollHoriz(),this.options&&this.options.onPaste&&this.options.onPaste()},v.prototype.setupStaticField=function(){this.updateMathspeak(),this.blurred=!0,this.cursor.hide().parent.blur(this.cursor)},v.prototype.updateMathspeak=function(f){var y=this,C=y.getAriaLabel(),R=/[A-Za-z0-9]$/.test(C)?C+":":C,z=y.root.mathspeak().trim(),W=!!(f!=null&&f.emptyContent);this.aria.clear({emptyContent:W}),y.mathspeakSpan&&(y.mathspeakSpan.textContent=(R+" "+z+" "+y.ariaPostLabel).trim())},v}(Di),vt=function(M){dt(v,M);function v(){return M!==null&&M.apply(this,arguments)||this}return v.prototype.finalizeInsert=function(f,y){var C=this;C.postOrder(function(W){W.finalizeTree(f)}),C.postOrder(function(W){W.contactWeld(y)}),C.postOrder(function(W){W.blur(y)}),C.postOrder(function(W){W.reflow()});var R=C[e],z=C[r];R&&R.siblingCreated(f,r),z&&z.siblingCreated(f,e),C.bubble(function(W){W.reflow()})},v.prototype.prepareInsertionAt=function(f){var y=f.options.maxDepth;if(y!==void 0){var C=f.depth();if(C>y)return!1;this.removeNodesDeeperThan(y-C)}return!0},v.prototype.removeNodesDeeperThan=function(f){for(var y=0,C=[[this,y]],R;R=C.shift();){var z=R;z[0].children().each(function(W){var ee=W instanceof ft?1:0;y=z[1]+ee,y<=f?C.push([W,y]):(ee?W.children():W).remove()})}},v}(xt),at=function(){function M(v,f){this.childCount=v,this.render=f}return M}(),be=function(M){dt(v,M);function v(f,y,C){var R=M.call(this)||this;return R.textTemplate=[""],R.mathspeakTemplate=[""],R.setCtrlSeqHtmlAndText(f,y,C),R}return v.prototype.setEnds=function(f){a("MathCommand ends are never empty",f[r]&&f[e]),this.ends=f},v.prototype.getEnd=function(f){return this.ends[f]},v.prototype.setCtrlSeqHtmlAndText=function(f,y,C){this.ctrlSeq||(this.ctrlSeq=f),y&&(this.domView=y),C&&(this.textTemplate=C)},v.prototype.replaces=function(f){f.disown(),this.replacedFragment=f},v.prototype.isEmpty=function(){return this.foldChildren(!0,function(f,y){return f&&y.isEmpty()})},v.prototype.parser=function(){var f=this,y=te.block;return y.times(this.numBlocks()).map(function(C){f.blocks=C;for(var R=0;R<C.length;R+=1)C[R].adopt(f,f.getEnd(e),0);return f})},v.prototype.createLeftOf=function(f){var y=this,C=y.replacedFragment;if(y.createBlocks(),M.prototype.createLeftOf.call(this,f),C){var R=y.getEnd(r);C.adopt(R,0,0),C.domFrag().appendTo(R.domFrag().oneElement()),y.placeCursor(f),y.prepareInsertionAt(f)}y.finalizeInsert(f.options,f),y.placeCursor(f)},v.prototype.createBlocks=function(){for(var f=this,y=f.numBlocks(),C=f.blocks=Array(y),R=0;R<y;R+=1){var z=C[R]=new ft;z.adopt(f,f.getEnd(e),0)}},v.prototype.placeCursor=function(f){f.insAtRightEnd(this.foldChildren(this.getEnd(r),function(y,C){return y.isEmpty()?y:C}))},v.prototype.moveTowards=function(f,y,C){var R;C==="up"?R=this.upInto:C==="down"&&(R=this.downInto);var z=R||this.getEnd(-f);y.insAtDirEnd(-f,z),y.controller.aria.queueDirEndOf(-f).queue(y.parent,!0)},v.prototype.deleteTowards=function(f,y){this.isEmpty()?y[f]=this.remove()[f]:this.moveTowards(f,y)},v.prototype.selectTowards=function(f,y){y[-f]=this,y[f]=this[f]},v.prototype.selectChildren=function(){return new ue(this,this)},v.prototype.unselectInto=function(f,y){var C=y.anticursor,R=C.ancestors[this.id];y.insAtDirEnd(-f,R)},v.prototype.seek=function(f,y){function C(ee){var ye,ze=ee.domFrag().oneElement(),De=k(ze).left,Ce=De+ze.offsetWidth;return ye={},ye[r]=De,ye[e]=Ce,ye}var R=this,z=C(R);if(f<z[r])return y.insLeftOf(R);if(f>z[e])return y.insRightOf(R);var W=z[r];R.eachChild(function(ee){var ye=C(ee);if(f<ye[r])return f-W<ye[r]-f?ee[r]?y.insAtRightEnd(ee[r]):y.insLeftOf(R):y.insAtLeftEnd(ee),!1;if(f>ye[e]){ee[e]?W=ye[e]:z[e]-f<f-ye[e]?y.insRightOf(R):y.insAtRightEnd(ee);return}else return ee.seek(f,y),!1})},v.prototype.numBlocks=function(){return this.domView.childCount},v.prototype.html=function(){var f=this.blocks;a("domView is defined",this.domView);var y=this.domView,C=y.render(f||[]);return this.setDOM(C),F.linkElementByCmdNode(C,this),C},v.prototype.latexRecursive=function(f){this.checkCursorContextOpen(f),f.uncleanedLatex+=this.ctrlSeq||"",this.eachChild(function(y){f.uncleanedLatex+="{";var C=f.uncleanedLatex.length;y.latexRecursive(f);var R=f.uncleanedLatex.length;C===R&&(f.uncleanedLatex+=" "),f.uncleanedLatex+="}"}),this.checkCursorContextClose(f)},v.prototype.text=function(){var f=this,y=0;return f.foldChildren(f.textTemplate[y],function(C,R){y+=1;var z=R.text();return C&&f.textTemplate[y]==="("&&z[0]==="("&&z.slice(-1)===")"?C+z.slice(1,-1)+f.textTemplate[y]:C+z+(f.textTemplate[y]||"")})},v.prototype.mathspeak=function(){var f=this,y=0;return f.foldChildren(f.mathspeakTemplate[y]||"Start"+f.ctrlSeq+" ",function(C,R){return y+=1,C+" "+R.mathspeak()+" "+(f.mathspeakTemplate[y]+" "||"End"+f.ctrlSeq+" ")})},v}(vt),Lt=function(M){dt(v,M);function v(f,y,C,R){var z=M.call(this)||this;return z.setCtrlSeqHtmlTextAndMathspeak(f,y?new at(0,function(){return y.cloneNode(!0)}):void 0,C,R),z}return v.prototype.setCtrlSeqHtmlTextAndMathspeak=function(f,y,C,R){!C&&f&&(C=f.replace(/^\\/,"")),this.mathspeakName=R||C,M.prototype.setCtrlSeqHtmlAndText.call(this,f,y,[C||""])},v.prototype.parser=function(){return ge.succeed(this)},v.prototype.numBlocks=function(){return 0},v.prototype.replaces=function(f){f.remove()},v.prototype.createBlocks=function(){},v.prototype.moveTowards=function(f,y){y.domFrag().insDirOf(f,this.domFrag()),y[-f]=this,y[f]=this[f],y.controller.aria.queue(this)},v.prototype.deleteTowards=function(f,y){y[f]=this.remove()[f]},v.prototype.seek=function(f,y){var C=this.domFrag().oneElement(),R=k(C).left;return f-R<C.offsetWidth/2?y.insLeftOf(this):y.insRightOf(this),y},v.prototype.latexRecursive=function(f){this.checkCursorContextOpen(f),f.uncleanedLatex+=this.ctrlSeq||"",this.checkCursorContextClose(f)},v.prototype.text=function(){return this.textTemplate.join("")},v.prototype.mathspeak=function(f){return this.mathspeakName||""},v.prototype.placeCursor=function(){},v.prototype.isEmpty=function(){return!0},v}(be),Z=function(M){dt(v,M);function v(f,y,C){return M.call(this,f,c("span",{},[y||c.text(f)]),void 0,C)||this}return v}(Lt);function Ve(M,v,f){return function(){return new Z(M,v?c.entityText(v):void 0,f)}}var Ae=function(M){dt(v,M);function v(f,y,C,R,z){var W=this;return z?W=M.call(this,f,c("span",{},[y||c.text(f||"")]),void 0,R)||this:W=M.call(this,f,c("span",{class:"dcg-mq-binary-operator"},y?[y]:[]),C,R)||this,W}return v.prototype.isBinaryOperator=function(){return!0},v}(Lt);function st(M,v,f,y){return function(){return new Ae(M,v?c.entityText(v):void 0,f,y)}}var ft=function(M){dt(v,M);function v(){var f=M!==null&&M.apply(this,arguments)||this;return f.ariaLabel="block",f}return v.prototype.join=function(f){return this.foldChildren("",function(y,C){return y+C[f]()})},v.prototype.html=function(){var f=document.createDocumentFragment();return this.eachChild(function(y){var C=y.html();f.appendChild(C)}),f},v.prototype.latexRecursive=function(f){this.checkCursorContextOpen(f),this.eachChild(function(y){return y.latexRecursive(f)}),this.checkCursorContextClose(f)},v.prototype.text=function(){var f=this.getEnd(r),y=this.getEnd(e);return f===y&&f!==0?f.text():this.join("text")},v.prototype.mathspeak=function(){var f="",y={};return this.controller&&(y=this.controller.options.autoOperatorNames),this.foldChildren([],function(C,R){if(R.isPartOfOperator)f+=R.mathspeak();else{if(f!==""){if(y._maxLength>0){var z=y[f.toLowerCase()];typeof z=="string"&&(f=z)}C.push(f+" "),f=""}var W=R.mathspeak(),ee=R.ctrlSeq;isNaN(ee)&&ee!=="."&&(!R.parent||!R.parent.parent||!R.parent.parent.isTextBlock())&&(W=" "+W+" "),C.push(W)}return C}).join("").replace(/ +(?= )/g,"").replace(/(\.)([0-9]+)/g,function(C,R,z){return R+z.split("").join(" ").trim()})},v.prototype.keystroke=function(f,y,C){if(C.options.spaceBehavesLikeTab&&(f==="Spacebar"||f==="Shift-Spacebar")){y==null||y.preventDefault(),C.escapeDir(f==="Shift-Spacebar"?r:e,f,y);return}return M.prototype.keystroke.call(this,f,y,C)},v.prototype.moveOutOf=function(f,y,C){var R;if(C==="up"?R=this.parent.upInto:C==="down"&&(R=this.parent.downInto),!R&&this[f]){var z=-f;y.insAtDirEnd(z,this[f]),y.controller.aria.queueDirEndOf(z).queue(y.parent,!0)}else y.insDirOf(f,this.parent),y.controller.aria.queueDirOf(f).queue(this.parent)},v.prototype.selectOutOf=function(f,y){y.insDirOf(f,this.parent)},v.prototype.deleteOutOf=function(f,y){y.unwrapGramp()},v.prototype.seek=function(f,y){var C=this.getEnd(e);if(!C)return y.insAtRightEnd(this);var R=C.domFrag().oneElement(),z=k(R).left;if(z+R.offsetWidth<f)return y.insAtRightEnd(this);var W=this.getEnd(r);if(f<k(W.domFrag().oneElement()).left)return y.insAtLeftEnd(this);for(;f<k(C.domFrag().oneElement()).left;)C=C[r];return C.seek(f,y)},v.prototype.chToCmd=function(f,y){var C;return f.match(/^[a-eg-zA-Z]$/)?new fr(f):/^\d$/.test(f)?new Ct(f):y&&y.typingSlashWritesDivisionSymbol&&f==="/"?L["\xF7"](f):y&&y.typingAsteriskWritesTimesSymbol&&f==="*"?L["\xD7"](f):y&&y.typingPercentWritesPercentOf&&f==="%"?L.percentof(f):(C=q[f]||L[f])?C.constructor?new C(f):C(f):new Z(f)},v.prototype.write=function(f,y){var C=this.chToCmd(y,f.options);f.selection&&C.replaces(f.replaceSelection()),f.isTooDeep()||(C.createLeftOf(f.show()),y==="/"?f.controller.aria.alert("over"):f.controller.aria.alert(C.mathspeak({createdLeftOf:f})))},v.prototype.writeLatex=function(f,y){var C=ge.all,R=ge.eof,z=te.skip(R).or(C.result(!1)).parse(y);if(z&&!z.isEmpty()&&z.prepareInsertionAt(f)){z.children().adopt(f.parent,f[r],f[e]),G(z.html()).insertBefore(f.domFrag()),f[r]=z.getEnd(e),z.finalizeInsert(f.options,f);var W=z.getEnd(e),ee=z.getEnd(r),ye=W[e],ze=ee[r];ye&&ye.siblingCreated(f.options,r),ze&&ze.siblingCreated(f.options,e),f.parent.bubble(function(De){De.reflow()})}},v.prototype.focus=function(){return this.domFrag().addClass("dcg-mq-hasCursor"),this.domFrag().removeClass("dcg-mq-empty"),this},v.prototype.blur=function(f){return this.domFrag().removeClass("dcg-mq-hasCursor"),this.isEmpty()&&(this.domFrag().addClass("dcg-mq-empty"),f&&this.isQuietEmptyDelimiter(f.options.quietEmptyDelimiters)&&this.domFrag().addClass("dcg-mq-quiet-delimiter")),this},v}(vt);xe.prototype.mouseEvents=!0,pe.StaticMath=function(M){var v;return v=function(f){dt(y,f);function y(C){var R=f.call(this,C)||this,z=R.innerFields=[];return R.__controller.root.postOrder(function(W){W.registerInnerField(z,M.InnerMathField)}),R}return y.prototype.__mathquillify=function(C,R){return this.config(C),f.prototype.mathquillify.call(this,"dcg-mq-math-mode"),this.__controller.setupStaticField(),this.__options.mouseEvents&&this.__controller.addMouseEventListener(),this.__controller.staticMathTextareaEvents(),this},y.prototype.latex=function(C){var R=f.prototype.latex.apply(this,arguments);if(arguments.length>0){var z=this.innerFields=[];this.__controller.root.postOrder(function(W){W.registerInnerField(z,M.InnerMathField)}),this.__controller.updateMathspeak()}return R},y.prototype.setAriaLabel=function(C){return this.__controller.setAriaLabel(C),this},y.prototype.getAriaLabel=function(){return this.__controller.getAriaLabel()},y}(M.AbstractMathQuill),v.RootBlock=ft,v};var lt=function(M){dt(v,M);function v(){return M!==null&&M.apply(this,arguments)||this}return v}(ft);Ie(lt.prototype),pe.MathField=function(M){var v;return v=function(f){dt(y,f);function y(){return f!==null&&f.apply(this,arguments)||this}return y.prototype.__mathquillify=function(C,R){return this.config(C),R>1&&(this.__controller.root.reflow=i),f.prototype.mathquillify.call(this,"dcg-mq-editable-field dcg-mq-math-mode"),delete this.__controller.root.reflow,this},y}(M.EditableField),v.RootBlock=lt,v},pe.InnerMathField=function(M){return a("MathField class is defined",M.MathField),function(v){dt(f,v);function f(){return v!==null&&v.apply(this,arguments)||this}return f.prototype.makeStatic=function(){this.__controller.editable=!1,this.__controller.root.blur(),this.__controller.unbindEditablesEvents(),G(this.__controller.container).removeClass("dcg-mq-editable-field")},f.prototype.makeEditable=function(){this.__controller.editable=!0,this.__controller.editablesTextareaEvents(),this.__controller.cursor.insAtRightEnd(this.__controller.root),G(this.__controller.container).addClass("dcg-mq-editable-field")},f}(M.MathField)};var zt="\\ ",Ot=".",wt=function(M){dt(v,M);function v(){return M!==null&&M.apply(this,arguments)||this}return v.prototype.finalizeTree=function(f,y){this.sharedSiblingMethod(f,y)},v.prototype.siblingDeleted=function(f,y){this.sharedSiblingMethod(f,y)},v.prototype.siblingCreated=function(f,y){this.sharedSiblingMethod(f,y)},v.prototype.sharedSiblingMethod=function(f,y){y!==r&&this[e]instanceof v||this.fixDigitGrouping(f)},v.prototype.fixDigitGrouping=function(f){if(f.enableDigitGrouping){var y=this,C=y;do if(/^[0-9]$/.test(C.ctrlSeq))y=C;else if(C.ctrlSeq===zt)y=C;else if(C.ctrlSeq===Ot)y=C;else break;while(C=y[r]);v.fixDigitGroupingFromLeft(f,y)}},v.fixDigitGroupingFromLeft=function(f,y){for(;y&&y.ctrlSeq===zt;){if(!y[e])return;y=y[e]}if(y instanceof v){var C=y;a("node",C);var R=y,z=0,W=0,ee=[];do{if(/^[0-9]$/.test(C.ctrlSeq))R=C,W=0;else if(C.ctrlSeq===zt)R=C,z+=1,W=0;else if(C.ctrlSeq===Ot&&C instanceof v)R=C,ee.push(C),f.tripleDotsAreEllipsis&&(W+=1);else break;if(W==3)break}while(C=R[e]);if(W===3){var ye=ee.pop(),ze=ee.pop(),De=ee.pop();if(ye[e]instanceof v&&v.fixDigitGroupingFromLeft(f,ye[e]),ye.setGroupingClass("dcg-mq-ellipsis-end"),ze.setGroupingClass("dcg-mq-ellipsis-middle"),De.setGroupingClass("dcg-mq-ellipsis-start"),R=De[r],y===De)return}for(;R!==y&&R&&R.ctrlSeq===zt;)R=R[r],z-=1;if(!(y===R&&y&&y.ctrlSeq===zt)){var Ce=z>0||ee.length>1;Ce?v.removeGroupingBetween(y,R):ee[0]?(ee[0]!==y&&v.addGroupingBetween(ee[0][r],y),ee[0]!==R&&v.removeGroupingBetween(ee[0],R)):v.addGroupingBetween(R,y)}}},v.removeGroupingBetween=function(f,y){var C=f;do if(C instanceof v&&C.setGroupingClass(void 0),!C||C===y)break;while(C=C[e])},v.addGroupingBetween=function(f,y){for(var W=f,C=0,R=0;W&&(R+=1,a("digit",W instanceof v),W!==y);)W=W[r];var z=R%3;z===0&&(z=3);for(var W=f;W;){C+=1;var ee=void 0;if(R>=4&&(C===R?ee="dcg-mq-group-leading-"+z:C%3===0&&C!==R&&(ee="dcg-mq-group-start"),ee||(ee="dcg-mq-group-other")),W instanceof v&&W.setGroupingClass(ee),W===y)break;W=W[r]}},v.prototype.setGroupingClass=function(f){this._groupingClass!==f&&(this._groupingClass&&this.domFrag().removeClass(this._groupingClass),f&&this.domFrag().addClass(f),this._groupingClass=f)},v}(Lt),Ct=function(M){dt(v,M);function v(f,y){return M.call(this,f,c("span",{class:"dcg-mq-digit"},[c.text(f)]),void 0,y)||this}return v.prototype.createLeftOf=function(f){var y=f[r],C=y&&y[r],R=f.parent.parent instanceof Na?f.parent.parent.sub:void 0;f.options.autoSubscriptNumerals&&f.parent!==R&&(y instanceof Kt&&y.isItalic!==!1||y instanceof Na&&C instanceof Kt&&C.isItalic!==!1)?(new Na("sub").createLeftOf(f),M.prototype.createLeftOf.call(this,f),f.insRightOf(f.parent.parent)):M.prototype.createLeftOf.call(this,f)},v.prototype.mathspeak=function(f){if(f&&f.createdLeftOf){var y=f.createdLeftOf,C=y[r],R=C&&C[r],z=y.parent.parent instanceof Na?y.parent.parent.sub:void 0;if(y.options.autoSubscriptNumerals&&y.parent!==z&&(C instanceof Kt&&C.isItalic!==!1||y[r]instanceof Na&&R instanceof Kt&&R.isItalic!==!1))return"Subscript "+M.prototype.mathspeak.call(this)+" Baseline"}return M.prototype.mathspeak.call(this)},v}(wt),Kt=function(M){dt(v,M);function v(f,y){return M.call(this,f,c("var",{},[y||c.text(f)]))||this}return v.prototype.text=function(){var f=this.ctrlSeq||"";return this.isPartOfOperator?f[0]=="\\"?f=f.slice(1,f.length):f[f.length-1]==" "&&(f=f.slice(0,-1)):(this[r]&&!(this[r]instanceof v)&&!(this[r]instanceof Ae)&&this[r].ctrlSeq!=="\\ "&&(f="*"+f),this[e]&&!(this[e]instanceof Ae)&&!(this[e]instanceof Na)&&(f+="*")),f},v.prototype.mathspeak=function(){var f=this.ctrlSeq||"";return this.isPartOfOperator||f.length>1||this.parent&&this.parent.parent&&this.parent.parent.isTextBlock()?M.prototype.mathspeak.call(this):'"'+f+'"'},v}(Lt);function Gt(M,v,f){return function(){return new Kt(M,c.entityText(v))}}xe.prototype.autoCommands={_maxLength:0},X.autoCommands=function(M){if(typeof M!="string"||!/^[a-z]+(?: [a-z]+)*$/i.test(M))throw'"'+M+'" not a space-delimited list of only letters';for(var v=M.split(" "),f={},y=0,C=0;C<v.length;C+=1){var R=v[C];if(R.length<2)throw'autocommand "'+R+'" not minimum length of 2';if(L[R]===ca)throw'"'+R+'" is a built-in operator name';f[R]=1,y=o(y,R.length)}return f._maxLength=y,f},xe.prototype.quietEmptyDelimiters={},X.quietEmptyDelimiters=function(M){M===void 0&&(M="");for(var v=M.split(" "),f={},y=0;y<v.length;y+=1){var C=v[y];f[C]=1}return f},xe.prototype.autoParenthesizedFunctions={_maxLength:0},X.autoParenthesizedFunctions=function(M){if(typeof M!="string"||!/^[a-z]+(?: [a-z]+)*$/i.test(M))throw'"'+M+'" not a space-delimited list of only letters';for(var v=M.split(" "),f={},y=0,C=0;C<v.length;C+=1){var R=v[C];if(R.length<2)throw'autocommand "'+R+'" not minimum length of 2';f[R]=1,y=o(y,R.length)}return f._maxLength=y,f};function Nr(M,v){for(var f="",y=0;M instanceof fr&&M.ctrlSeq===M.letter&&y<v;)f=M.letter+f,M=M[r],y+=1;return f}var fr=function(M){dt(v,M);function v(f){var y=M.call(this,f)||this;return y.letter=f,y}return v.prototype.checkAutoCmds=function(f){var y;if(!this.shouldIgnoreSubstitutionInSimpleSubscript(f.options)){var C=f.options.autoCommands,R=C._maxLength||0;if(R>0)for(var z=(y=Nr(this,R))!==null&&y!==void 0?y:"";z.length;){if(C.hasOwnProperty(z)){for(var W=this,ee=1;W&&ee<z.length;ee+=1,W=W[r]);new B(W,this).remove(),f[r]=W[r];var ye=L[z],ze;return le(ye)?ze=new ye(z):ze=ye(z),ze.createLeftOf(f)}z=z.slice(1)}}},v.prototype.autoParenthesize=function(f){var y=f.parent.getEnd(e);if(!(y&&y instanceof Va&&y.ctrlSeq==="\\left(")&&!this.shouldIgnoreSubstitutionInSimpleSubscript(f.options)){for(var C="",R=this,z=0,W=f.options.autoParenthesizedFunctions,ee=W._maxLength||0,ye=f.options.autoOperatorNames;R instanceof v&&z<ee;)C=R.letter+C,R=R[r],z+=1;for(;C.length;){if(W.hasOwnProperty(C)&&ye.hasOwnProperty(C))return f.parent.write(f,"(");C=C.slice(1)}}},v.prototype.createLeftOf=function(f){M.prototype.createLeftOf.call(this,f),this.checkAutoCmds(f),this.autoParenthesize(f)},v.prototype.italicize=function(f){return this.isItalic=f,this.isPartOfOperator=!f,f&&(delete this.endsCategory,delete this.endsWord),this.domFrag().toggleClass("dcg-mq-operator-name",!f),this},v.prototype.finalizeTree=function(f,y){this.sharedSiblingMethod(f,y)},v.prototype.siblingDeleted=function(f,y){this.sharedSiblingMethod(f,y)},v.prototype.siblingCreated=function(f,y){this.sharedSiblingMethod(f,y)},v.prototype.sharedSiblingMethod=function(f,y){y!==r&&this[e]instanceof v||this.autoUnItalicize(f)},v.prototype.autoUnItalicize=function(f){var y=f.autoOperatorNames;if(y._maxLength!==0&&!this.shouldIgnoreSubstitutionInSimpleSubscript(f)){for(var C=this.letter,R=this[r];R instanceof v;R=R[r])C=R.letter+C;for(var z=this[e];z instanceof v;z=z[e])C+=z.letter;var W=R&&R[e],ee=z&&z[r];new B(W||this.parent.getEnd(r),ee||this.parent.getEnd(e)).each(function(Ba){Ba instanceof v&&(Ba.italicize(!0).domFrag().removeClass("dcg-mq-first dcg-mq-last dcg-mq-followed-by-supsub"),Ba.ctrlSeq=Ba.letter)});var ye=y._maxLength||0;e:for(var ze=0,De=R[e]||this.parent.getEnd(r);De&&ze<C.length;ze+=1,De=De[e])for(var Ce=t(ye,C.length-ze);Ce>0;Ce-=1){var Ue=C.slice(ze,ze+Ce),We=void 0;if(y.hasOwnProperty(Ue)){for(var ot=0,ct=De;ot<Ce;ot+=1,ct=ct[e])ct instanceof v&&(ct.italicize(!1),We=ct);var kt=Rn.hasOwnProperty(Ue);if(De.ctrlSeq=(kt?"\\":"\\operatorname{")+De.ctrlSeq,We.ctrlSeq+=kt?" ":"}",We.endsWord=Ue,f.infixOperatorNames[Ue]?We.endsCategory="infix":f.prefixOperatorNames[Ue]&&(We.endsCategory="prefix"),Zo.hasOwnProperty(Ue)){var cr=We[r],ni=cr&&cr[r],_r=ni&&ni[r];_r.domFrag().addClass("dcg-mq-last")}if(this.shouldOmitPadding(De[r])||De.domFrag().addClass("dcg-mq-first"),!this.shouldOmitPadding(We[e]))if(We[e]instanceof Na){var Co=We[e],pa=Co.siblingCreated=Co.siblingDeleted=function(){Co.domFrag().toggleClass("dcg-mq-after-operator-name",!(Co[e]instanceof Va))};pa()}else We.domFrag().toggleClass("dcg-mq-last",!(We[e]instanceof Va));ze+=Ce-1,De=We;continue e}}}},v.prototype.shouldOmitPadding=function(f){return!!(!f||f.ctrlSeq==="."||f instanceof Ae&&f.isBinaryOperator()||f instanceof Vp)},v}(Kt),Rn={};xe.prototype.autoOperatorNames=br();var Zo={limsup:1,liminf:1,projlim:1,injlim:1};function br(){for(var M={_maxLength:9},v="arg deg det dim exp gcd hom inf ker lg lim ln log max min sup limsup liminf injlim projlim Pr".split(" "),f=0;f<v.length;f+=1)Rn[v[f]]=M[v[f]]=1;for(var y="sin cos tan arcsin arccos arctan sinh cosh tanh sec csc cot coth".split(" "),f=0;f<y.length;f+=1)Rn[y[f]]=1;for(var C="sin cos tan sec cosec csc cotan cot ctg".split(" "),f=0;f<C.length;f+=1)M[C[f]]=M["arc"+C[f]]=M[C[f]+"h"]=M["ar"+C[f]+"h"]=M["arc"+C[f]+"h"]=1;for(var R="gcf hcf lcm proj span".split(" "),f=0;f<R.length;f+=1)M[R[f]]=1;return M}X.autoOperatorNames=function(M){if(typeof M!="string")throw'"'+M+'" not a space-delimited list';if(!/^[a-z\|\-]+(?: [a-z\|\-]+)*$/i.test(M))throw'"'+M+'" not a space-delimited list of letters or "|"';for(var v=M.split(" "),f={},y=0,C=0;C<v.length;C+=1){var R=v[C];if(R.length<2)throw'"'+R+'" not minimum length of 2';if(R.indexOf("|")<0)f[R]=R,y=o(y,R.length);else{var z=R.split("|");if(z.length>2)throw'"'+R+'" has more than 1 mathspeak delimiter';if(z[0].length<2)throw'"'+R[0]+'" not minimum length of 2';f[z[0]]=z[1].replace(/-/g," "),y=o(y,z[0].length)}}return f._maxLength=y,f},xe.prototype.infixOperatorNames={},X.infixOperatorNames=Ro,xe.prototype.prefixOperatorNames={},X.prefixOperatorNames=Ro,xe.prototype.disableAutoSubstitutionInSubscripts=!1,X.disableAutoSubstitutionInSubscripts=function(M){if(typeof M=="boolean")return M;if(typeof M!="object"||M===null||!("except"in M))throw'"'+M+'" not an object with property "except"';return{except:Ro(M.except)}};function Ro(M){if(typeof M!="string")throw'"'+M+'" not a space-delimited list';if(!/^[a-z]+(?: [a-z]+)*$/i.test(M))throw'"'+M+'" not a space-delimited list of letters';for(var v=M.split(" "),f={},y=0;y<v.length;y+=1){var C=v[y];if(C.length<2)throw'"'+C+'" not minimum length of 2';f[C]=!0}return f}var ca=function(M){dt(v,M);function v(f){return M.call(this,f||"")||this}return v.prototype.createLeftOf=function(f){for(var y=this.ctrlSeq,C=0;C<y.length;C+=1)new fr(y.charAt(C)).createLeftOf(f)},v.prototype.parser=function(){for(var f=this.ctrlSeq,y=new ft,C=0;C<f.length;C+=1)new fr(f.charAt(C)).adopt(y,y.getEnd(e),0);return ge.succeed(y.children())},v}(Lt);for(var gn in xe.prototype.autoOperatorNames)xe.prototype.autoOperatorNames.hasOwnProperty(gn)&&(L[gn]=ca);L.operatorname=function(M){dt(v,M);function v(){return M!==null&&M.apply(this,arguments)||this}return v.prototype.createLeftOf=function(){},v.prototype.numBlocks=function(){return 1},v.prototype.parser=function(){return te.block.map(function(f){var y=!0,C="",R=f.children();return R.each(function(z){z instanceof fr?C+=z.letter:y=!1}),y&&C==="ans"?dN():R})},v}(be),L.f=function(M){dt(v,M);function v(){var f=this,y="f";return f=M.call(this,y)||this,f.letter=y,f.domView=new at(0,function(){return c("var",{class:"dcg-mq-f"},[c.text("f")])}),f}return v.prototype.italicize=function(f){return this.domFrag().eachElement(function(y){return y.textContent="f"}),this.domFrag().toggleClass("dcg-mq-f",f),M.prototype.italicize.call(this,f)},v}(fr),L[" "]=L.space=function(){return new wt("\\ ",c("span",{},[c.text(h)])," ")},L["."]=function(){return new wt(".",c("span",{class:"dcg-mq-digit"},[c.text(".")]),".")},L["'"]=L.prime=Ve("'","&prime;","prime"),L["\u2033"]=L.dprime=Ve("\u2033","&Prime;","double prime"),L.backslash=Ve("\\backslash ","\\","backslash"),q["\\"]||(q["\\"]=L.backslash),L.$=Ve("\\$","$","dollar"),L["?"]=Ve("?","?","question mark"),L["\u25A1"]=L.square=Ve("\\square ","\u25A1","square"),L.mid=Ve("\\mid ","\u2223","mid");var rN=function(M){dt(v,M);function v(f,y){return M.call(this,f,c("span",{class:y},[c.text(f)]))||this}return v}(Lt);L[","]=function(){return new rN(",","dcg-mq-comma")};var Ql=function(M){dt(v,M);function v(f,y,C){return M.call(this,f,c("span",{class:"dcg-mq-nonSymbola"},[y||c.text(f)]))||this}return v}(Lt);L["@"]=function(){return new Ql("@")},L["&"]=function(){return new Ql("\\&",c.entityText("&amp;"),"and")},L["%"]=function(M){dt(v,M);function v(){return M.call(this,"\\%",c.text("%"),"percent")||this}return v.prototype.parser=function(){var f=ge.optWhitespace,y=ge.string;return f.then(y("\\operatorname{of}").map(function(){return pN()})).or(M.prototype.parser.call(this))},v}(Ql),L["\u2225"]=L.parallel=Ve("\\parallel ","&#x2225;","parallel"),L["\u2226"]=L.nparallel=Ve("\\nparallel ","&#x2226;","not parallel"),L["\u27C2"]=L.perp=Ve("\\perp ","&#x27C2;","perpendicular");function go(M){return Gt("\\"+M+" ","&"+M+";",M)}L.\u03B1=L.alpha=go("alpha"),L.\u03B2=L.beta=go("beta"),L.\u03B3=L.gamma=go("gamma"),L.\u03B4=L.delta=go("delta"),L.\u03B6=L.zeta=go("zeta"),L.\u03B7=L.eta=go("eta"),L.\u03B8=L.theta=go("theta"),L.\u03B9=L.iota=go("iota"),L.\u03BA=L.kappa=go("kappa"),L.\u03BC=L.mu=go("mu"),L.\u03BD=L.nu=go("nu"),L.\u03BE=L.xi=go("xi"),L.\u03C1=L.rho=go("rho"),L.\u03C3=L.sigma=go("sigma"),L.\u03C4=L.tau=go("tau"),L.\u03C7=L.chi=go("chi"),L.\u03C8=L.psi=go("psi"),L.\u03C9=L.omega=go("omega"),L.\u03D5=L.phi=Gt("\\phi ","&#981;","phi"),L.\u03C6=L.phiv=L.varphi=Gt("\\varphi ","&phi;","phi"),L["\u03F5"]=L.epsilon=Gt("\\epsilon ","&#1013;","epsilon"),L.\u03B5=L.epsiv=L.varepsilon=Gt("\\varepsilon ","&epsilon;","epsilon"),L.\u03D6=L.piv=L.varpi=Gt("\\varpi ","&piv;","piv"),L.\u03C2=L.sigmaf=L.sigmav=L.varsigma=Gt("\\varsigma ","&sigmaf;","sigma"),L.\u03D1=L.thetav=L.vartheta=L.thetasym=Gt("\\vartheta ","&thetasym;","theta"),L.\u03C5=L.upsilon=L.upsi=Gt("\\upsilon ","&upsilon;","upsilon"),L.\u03DC=L.gammad=L.Gammad=L.digamma=Gt("\\digamma ","&#989;","gamma"),L.\u03F0=L.kappav=L.varkappa=Gt("\\varkappa ","&#1008;","kappa"),L.\u03F1=L.rhov=L.varrho=Gt("\\varrho ","&#1009;","rho"),L.pi=L.\u03C0=function(){return new Ql("\\pi ",c.entityText("&pi;"),"pi")},L.\u03BB=L.lambda=function(){return new Ql("\\lambda ",c.entityText("&lambda;"),"lambda")},L.\u03A5=L.Upsilon=L.Upsi=L.upsih=L.Upsih=function(){return new Lt("\\Upsilon ",c("var",{style:"font-family: serif"},[c.entityText("&upsih;")]),"capital upsilon")};function $i(M){return function(){return new Z("\\"+M+" ",c.entityText("&"+M+";"))}}L.\u0393=L.Gamma=$i("Gamma"),L.\u0394=L.Delta=$i("Delta"),L.\u0398=L.Theta=$i("Theta"),L.\u039B=L.Lambda=$i("Lambda"),L.\u039E=L.Xi=$i("Xi"),L.\u03A0=L.Pi=$i("Pi"),L.\u03A3=L.Sigma=$i("Sigma"),L.\u03A6=L.Phi=$i("Phi"),L.\u03A8=L.Psi=$i("Psi"),L.\u03A9=L.Omega=$i("Omega"),L["\u2200"]=L.forall=$i("forall");var vo=function(M){dt(v,M);function v(f){var y=M.call(this)||this;return y.latexStr=f,y}return v.prototype.createLeftOf=function(f){var y=te.parse(this.latexStr);y.children().adopt(f.parent,f[r],f[e]),f[r]=y.getEnd(e),G(y.html()).insertBefore(f.domFrag()),y.finalizeInsert(f.options,f);var C=y.getEnd(e),R=C&&C[e];R&&R.siblingCreated(f.options,r);var z=y.getEnd(r),W=z&&z[r];W&&W.siblingCreated(f.options,e),f.parent.bubble(function(ee){ee.reflow()})},v.prototype.mathspeak=function(){return te.parse(this.latexStr).mathspeak()},v.prototype.parser=function(){var f=te.parse(this.latexStr).children();return ge.succeed(f)},v}(be);L["\u2070"]=function(){return new vo("^0")},L["\xB9"]=function(){return new vo("^1")},L["\xB2"]=function(){return new vo("^2")},L["\xB3"]=function(){return new vo("^3")},L["\u2074"]=function(){return new vo("^4")},L["\u2075"]=function(){return new vo("^5")},L["\u2076"]=function(){return new vo("^6")},L["\u2077"]=function(){return new vo("^7")},L["\u2078"]=function(){return new vo("^8")},L["\u2079"]=function(){return new vo("^9")},L["\xBC"]=function(){return new vo("\\frac14")},L["\xBD"]=function(){return new vo("\\frac12")},L["\xBE"]=function(){return new vo("\\frac34")},L["\u221A"]=function(){return new vo("\\sqrt{}")};function Eb(M){return M instanceof Ae||M instanceof fr&&M.endsCategory=="infix"}function $s(M){if(!M)return!1;var v=M[r];if(v){if(Eb(v)||v instanceof fr&&v.endsCategory=="prefix"||!(v instanceof Va)&&/^(\\ )|[,;:\(\[]$/.test(v.ctrlSeq))return!1}else return M.parent&&M.parent.parent&&M.parent.parent.isStyleBlock()?$s(M.parent.parent):!1;return!0}var ec=function(M){dt(v,M);function v(f,y,C){return M.call(this,f,y,void 0,C,!0)||this}return v.prototype.isBinaryOperator=function(){return $s(this)},v.prototype.contactWeld=function(f,y){this.sharedSiblingMethod(f.options,y)},v.prototype.siblingCreated=function(f,y){this.sharedSiblingMethod(f,y)},v.prototype.siblingDeleted=function(f,y){this.sharedSiblingMethod(f,y)},v.prototype.sharedSiblingMethod=function(f,y){if(y!==e)return this.domFrag().oneElement().className=$s(this)?"dcg-mq-binary-operator":"",this},v}(Ae);L["+"]=function(M){dt(v,M);function v(){return M.call(this,"+",c.text("+"))||this}return v.prototype.mathspeak=function(){return $s(this)?"plus":"positive"},v}(ec);var da=function(M){dt(v,M);function v(){return M.call(this,"-",c.entityText("&minus;"))||this}return v.prototype.mathspeak=function(){return $s(this)?"minus":"negative"},v}(ec);L["\u2212"]=L["\u2014"]=L["\u2013"]=L["-"]=da,L["\xB1"]=L.pm=L.plusmn=L.plusminus=function(){return new ec("\\pm ",c.entityText("&plusmn;"),"plus-or-minus")},L.mp=L.mnplus=L.minusplus=function(){return new ec("\\mp ",c.entityText("&#8723;"),"minus-or-plus")},q["*"]=L.sdot=L.cdot=st("\\cdot ","&middot;","*","times");var oN=function(M){dt(v,M);function v(){return M.call(this,"\\to ",c.entityText("&rarr;"),"to")||this}return v.prototype.deleteTowards=function(f,y){if(f===r){var C=y[r];new B(C,this).remove(),y[r]=C[r],new da().createLeftOf(y),y[r].bubble(function(R){R.reflow()});return}M.prototype.deleteTowards.call(this,f,y)},v}(Ae);L["\u2192"]=L.to=oN;var Ib=function(M){dt(v,M);function v(f,y){var C=this,R=y?"Strict":"";return C=M.call(this,f["ctrlSeq".concat(R)],c.entityText(f["htmlEntity".concat(R)]),f["text".concat(R)],f["mathspeak".concat(R)])||this,C.data=f,C.strict=y,C}return v.prototype.swap=function(f){this.strict=f;var y=f?"Strict":"";this.ctrlSeq=this.data["ctrlSeq".concat(y)],this.domFrag().children().replaceWith(G(c.entityText(this.data["htmlEntity".concat(y)]))),this.textTemplate=[this.data["text".concat(y)]],this.mathspeakName=this.data["mathspeak".concat(y)]},v.prototype.deleteTowards=function(f,y){if(f===r&&!this.strict){this.swap(!0),this.bubble(function(C){C.reflow()});return}M.prototype.deleteTowards.call(this,f,y)},v}(Ae),iN={ctrlSeq:"\\le ",htmlEntity:"&le;",text:"\u2264",mathspeak:"less than or equal to",ctrlSeqStrict:"<",htmlEntityStrict:"&lt;",textStrict:"<",mathspeakStrict:"less than"},nN={ctrlSeq:"\\ge ",htmlEntity:"&ge;",text:"\u2265",mathspeak:"greater than or equal to",ctrlSeqStrict:">",htmlEntityStrict:"&gt;",textStrict:">",mathspeakStrict:"greater than"},BJ=function(M){dt(v,M);function v(){return M.call(this,nN,!0)||this}return v.prototype.createLeftOf=function(f){var y=f[r];if(y instanceof Ae&&y.ctrlSeq==="-"){var C=y;f[r]=C[r],C.remove(),new oN().createLeftOf(f),f[r].bubble(function(R){R.reflow()});return}M.prototype.createLeftOf.call(this,f)},v}(Ib);L["<"]=L.lt=function(){return new Ib(iN,!0)},L[">"]=L.gt=BJ,L["\u2264"]=L.le=L.leq=function(){return new Ib(iN,!1)},L["\u2265"]=L.ge=L.geq=function(){return new Ib(nN,!1)},L["\u221E"]=L.infty=L.infin=L.infinity=Ve("\\infty ","&infin;","infinity"),L["\u2260"]=L.ne=L.neq=st("\\ne ","&ne;","not equal");var aN=function(M){dt(v,M);function v(){return M.call(this,"=",c.text("="),"=","equals")||this}return v.prototype.createLeftOf=function(f){var y=f[r];if(y instanceof Ib&&y.strict){y.swap(!1),y.bubble(function(C){C.reflow()});return}M.prototype.createLeftOf.call(this,f)},v}(Ae);L["="]=aN,L["\xD7"]=L.times=L.cross=st("\\times ","&times;","[x]","times"),L["\xF7"]=L.div=L.divide=L.divides=st("\\div ","&divide;","[/]","divided by");var sN=function(M){dt(v,M);function v(){return M.call(this,"\\sim ",c.text("~"),"~","tilde")||this}return v.prototype.createLeftOf=function(f){if(f[r]instanceof v){var y=f[r];f[r]=y[r],y.remove(),new lN().createLeftOf(f),f[r].bubble(function(C){C.reflow()});return}M.prototype.createLeftOf.call(this,f)},v}(Ae),lN=function(M){dt(v,M);function v(){return M.call(this,"\\approx ",c.entityText("&approx;"),"\u2248","approximately equal")||this}return v.prototype.deleteTowards=function(f,y){if(f===r){var C=y[r];new B(C,this).remove(),y[r]=C[r],new sN().createLeftOf(y),y[r].bubble(function(R){R.reflow()});return}M.prototype.deleteTowards.call(this,f,y)},v}(Ae);L.tildeNbsp=Ve("~",h," "),L.sim=sN,L["\u2248"]=L.approx=lN,q["~"]=L.sim,L["~"]=L.tildeNbsp,X.interpretTildeAsSim=function(M){var v=!!M;return v?L["~"]=L.sim:L["~"]=L.tildeNbsp,v},L["\u25EF"]=L.bigcirc=Ve("\\bigcirc ","&#9711;","circle"),L["\u2220"]=L.ang=L.angle=Ve("\\angle ","&ang;","angle"),L["\xB0"]=L.degree=Ve("\\degree ","&deg;","degrees"),L["\u25B3"]=L.triangle=Ve("\\triangle ","&#9651;","triangle"),L["\u2245"]=L.cong=st("\\cong ","&cong;","cong","congruent"),L["\u2221"]=L.measuredangle=Ve("\\measuredangle ","&#8737;","measured angle"),L["\u25B1"]=L.parallelogram=Ve("\\parallelogram ","&#9649;","parallelogram"),L["\u2247"]=L.ncong=st("\\ncong ","&ncong;","ncong","not congruent"),L["\u2241"]=L.nsim=st("\\nsim ","&nsim;","nsim","not similar");var Cb={sqrt:{width:"",html:function(){return c("svg",{preserveAspectRatio:"none",viewBox:"0 0 32 54"},[c("path",{d:"M0 33 L7 27 L12.5 47 L13 47 L30 0 L32 0 L13 54 L11 54 L4.5 31 L0 33"})])}},"|":{width:".4em",html:function(){return c("svg",{preserveAspectRatio:"none",viewBox:"0 0 10 54"},[c("path",{d:"M4.4 0 L4.4 54 L5.6 54 L5.6 0"})])}},"[":{width:".55em",html:function(){return c("svg",{preserveAspectRatio:"none",viewBox:"0 0 11 24"},[c("path",{d:"M8 0 L3 0 L3 24 L8 24 L8 23 L4 23 L4 1 L8 1"})])}},"]":{width:".55em",html:function(){return c("svg",{preserveAspectRatio:"none",viewBox:"0 0 11 24"},[c("path",{d:"M3 0 L8 0 L8 24 L3 24 L3 23 L7 23 L7 1 L3 1"})])}},"(":{width:".55em",html:function(){return c("svg",{preserveAspectRatio:"none",viewBox:"3 0 106 186"},[c("path",{d:"M85 0 A61 101 0 0 0 85 186 L75 186 A75 101 0 0 1 75 0"})])}},")":{width:".55em",html:function(){return c("svg",{preserveAspectRatio:"none",viewBox:"3 0 106 186"},[c("path",{d:"M24 0 A61 101 0 0 1 24 186 L34 186 A75 101 0 0 0 34 0"})])}},"{":{width:".7em",html:function(){return c("svg",{preserveAspectRatio:"none",viewBox:"10 0 210 350"},[c("path",{d:"M170 0 L170 6 A47 52 0 0 0 123 60 L123 127 A35 48 0 0 1 88 175 A35 48 0 0 1 123 223 L123 290 A47 52 0 0 0 170 344 L170 350 L160 350 A58 49 0 0 1 102 301 L103 220 A45 40 0 0 0 58 180 L58 170 A45 40 0 0 0 103 130 L103 49 A58 49 0 0 1 161 0"})])}},"}":{width:".7em",html:function(){return c("svg",{preserveAspectRatio:"none",viewBox:"10 0 210 350"},[c("path",{d:"M60 0 L60 6 A47 52 0 0 1 107 60 L107 127 A35 48 0 0 0 142 175 A35 48 0 0 0 107 223 L107 290 A47 52 0 0 1 60 344 L60 350 L70 350 A58 49 0 0 0 128 301 L127 220 A45 40 0 0 1 172 180 L172 170 A45 40 0 0 1 127 130 L127 49 A58 49 0 0 0 70 0"})])}},"&#8741;":{width:".7em",html:function(){return c("svg",{preserveAspectRatio:"none",viewBox:"0 0 10 54"},[c("path",{d:"M3.2 0 L3.2 54 L4 54 L4 0 M6.8 0 L6.8 54 L6 54 L6 0"})])}},"&lang;":{width:".55em",html:function(){return c("svg",{preserveAspectRatio:"none",viewBox:"0 0 10 54"},[c("path",{d:"M6.8 0 L3.2 27 L6.8 54 L7.8 54 L4.2 27 L7.8 0"})])}},"&rang;":{width:".55em",html:function(){return c("svg",{preserveAspectRatio:"none",viewBox:"0 0 10 54"},[c("path",{d:"M3.2 0 L6.8 27 L3.2 54 L2.2 54 L5.8 27 L2.2 0"})])}}},g1="\u27A4",us=function(M){dt(v,M);function v(f,y,C,R,z){var W=M.call(this,f,new at(1,function(ee){var ye,ze;return c.block(y,C,ee[0],{beforeChild:(ye=z==null?void 0:z.beforeChild)===null||ye===void 0?void 0:ye.call(z),afterChild:(ze=z==null?void 0:z.afterChild)===null||ze===void 0?void 0:ze.call(z)})}))||this;return W.ariaLabel=R||f.replace(/^\\/,""),W.mathspeakTemplate=["Start"+W.ariaLabel+",","End"+W.ariaLabel],W.shouldNotSpeakDelimiters=z&&z.shouldNotSpeakDelimiters,W}return v.prototype.mathspeak=function(f){return!this.shouldNotSpeakDelimiters||f&&f.ignoreShorthand?M.prototype.mathspeak.call(this):this.foldChildren("",function(y,C){return y+" "+C.mathspeak(f)}).trim()},v}(be);L.mathrm=function(M){dt(v,M);function v(){return M.call(this,"\\mathrm","span",{class:"dcg-mq-roman dcg-mq-font"},"Roman Font",{shouldNotSpeakDelimiters:!0})||this}return v.prototype.isTextBlock=function(){return!0},v}(us),L.mathit=function(){return new us("\\mathit","i",{class:"dcg-mq-font"},"Italic Font")},L.mathbf=function(){return new us("\\mathbf","b",{class:"dcg-mq-font"},"Bold Font")},L.mathsf=function(){return new us("\\mathsf","span",{class:"dcg-mq-sans-serif dcg-mq-font"},"Serif Font")},L.mathtt=function(){return new us("\\mathtt","span",{class:"dcg-mq-monospace dcg-mq-font"},"Math Text")},L.underline=function(){return new us("\\underline","span",{class:"dcg-mq-non-leaf dcg-mq-underline"},"Underline")},L.overline=L.bar=function(){return new us("\\overline","span",{class:"dcg-mq-non-leaf dcg-mq-overline"},"Overline")},L.overrightarrow=function(){return new us("\\overrightarrow","span",{class:"dcg-mq-non-leaf dcg-mq-overarrow"},"Over Right Arrow",{afterChild:function(){return c("span",{class:"dcg-mq-arrow-right-content"},[c.text(g1)])}})},L.overleftarrow=function(){return new us("\\overleftarrow","span",{class:"dcg-mq-non-leaf dcg-mq-overarrow"},"Over Left Arrow",{beforeChild:function(){return c("span",{class:"dcg-mq-arrow-left-content"},[c.text(g1)])}})},L.overleftrightarrow=function(){return new us("\\overleftrightarrow ","span",{class:"dcg-mq-non-leaf dcg-mq-overarrow"},"Over Left and Right Arrow",{beforeChild:function(){return c("span",{class:"dcg-mq-arrow-left-content"},[c.text(g1)])},afterChild:function(){return c("span",{class:"dcg-mq-arrow-right-content"},[c.text(g1)])}})},L.overarc=function(){return new us("\\overarc","span",{class:"dcg-mq-non-leaf dcg-mq-overarc"},"Over Arc")},L.dot=function(){return new be("\\dot",new at(1,function(M){return c("span",{class:"dcg-mq-non-leaf"},[c("span",{class:"dcg-mq-dot-recurring-inner"},[c("span",{class:"dcg-mq-dot-recurring"},[c.text(m)]),c.block("span",{class:"dcg-mq-empty-box"},M[0])])])}))},L.textcolor=function(M){dt(v,M);function v(){return M!==null&&M.apply(this,arguments)||this}return v.prototype.setColor=function(f){this.color=f,this.domView=new at(1,function(y){return c.block("span",{class:"dcg-mq-textcolor",style:"color:"+f},y[0])}),this.ariaLabel=f.replace(/^\\/,""),this.mathspeakTemplate=["Start "+this.ariaLabel+",","End "+this.ariaLabel]},v.prototype.latexRecursive=function(f){this.checkCursorContextOpen(f);var y=this.blocks[0];f.uncleanedLatex+="\\textcolor{"+this.color+"}{",y.latexRecursive(f),f.uncleanedLatex+="}",this.checkCursorContextClose(f)},v.prototype.parser=function(){var f=this,y=ge.optWhitespace,C=ge.string,R=ge.regex;return y.then(C("{")).then(R(/^[#\w\s.,()%-]*/)).skip(C("}")).then(function(z){return f.setColor(z),M.prototype.parser.call(f)})},v.prototype.isStyleBlock=function(){return!0},v}(be);var Mfe=L.class=function(M){dt(v,M);function v(){return M!==null&&M.apply(this,arguments)||this}return v.prototype.parser=function(){var f=this,y=ge.string,C=ge.regex;return ge.optWhitespace.then(y("{")).then(C(/^[-\w\s\\\xA0-\xFF]*/)).skip(y("}")).then(function(R){return f.cls=R||"",f.domView=new at(1,function(z){return c.block("span",{class:"dcg-mq-class ".concat(R)},z[0])}),f.ariaLabel=R+" class",f.mathspeakTemplate=["Start "+f.ariaLabel+",","End "+f.ariaLabel],M.prototype.parser.call(f)})},v.prototype.latexRecursive=function(f){this.checkCursorContextOpen(f);var y=this.blocks[0];f.uncleanedLatex+="\\class{"+this.cls+"}{",y.latexRecursive(f),f.uncleanedLatex+="}",this.checkCursorContextClose(f)},v.prototype.isStyleBlock=function(){return!0},v}(be),m1=/^[\+\-]?[\d]+$/;function s2(M){if(!M)return"";var v="";return M.eachChild(function(f){f.ctrlSeq!==void 0&&(v+=f.ctrlSeq)}),v}xe.prototype.charsThatBreakOutOfSupSub="";var Na=function(M){dt(v,M);function v(f){var y=this,C="_{...}^{...}",R;return f==="sub"?R=new at(1,function(z){return c("span",{class:"dcg-mq-supsub dcg-mq-non-leaf"},[c.block("span",{class:"dcg-mq-sub"},z[0]),c("span",{style:"display:inline-block;width:0"},[c.text(g)])])}):R=new at(1,function(z){return c("span",{class:"dcg-mq-supsub dcg-mq-non-leaf dcg-mq-sup-only"},[c.block("span",{class:"dcg-mq-sup"},z[0])])}),y=M.call(this,C,R)||this,y.ariaLabel=f==="sub"?"subscript":"superscript",y.supsub=f,y}return v.prototype.setEnds=function(f){a("SupSub ends must be MathBlocks",f[r]instanceof ft&&f[e]instanceof ft),this.ends=f},v.prototype.getEnd=function(f){return this.ends[f]},v.prototype.createLeftOf=function(f){if(!(!this.replacedFragment&&!f[r]&&f.options.supSubsRequireOperand))return M.prototype.createLeftOf.call(this,f)},v.prototype.contactWeld=function(f){for(var y=r;y;y=y===r?e:!1){var C=this[y],R=void 0;if(C instanceof v){for(var z="sub";z;z=z==="sub"?"sup":!1){var W=this[z],ee=C[z];if(W){if(!ee)C.addBlock(W.disown());else if(W.isEmpty())R=new K(ee,0,ee.getEnd(r));else{W.domFrag().children().insAtDirEnd(-y,ee.domFrag().oneElement());var ye=W.children().disown();R=new K(ee,ye.getEnd(e),ee.getEnd(r)),y===r?ye.adopt(ee,ee.getEnd(e),0):ye.adopt(ee,0,ee.getEnd(r))}this.placeCursor=function(ze,De){return function(Ce){Ce.insAtDirEnd(-y,ze||De)}}(ee,W)}}this.remove(),f&&f[r]===this&&(y===e&&R?R[r]?f.insRightOf(R[r]):f.insAtLeftEnd(R.parent):f.insRightOf(C));break}}},v.prototype.finalizeTree=function(){this.supsub==="sub"?(this.downInto=this.sub=this.getEnd(r),this.sub.upOutOf=l2):this.supsub==="sup"&&(this.upInto=this.sup=this.getEnd(e),this.sup.downOutOf=l2);var f=this.getEnd(r);f.write=function(y,C){if(y.options.autoSubscriptNumerals&&this===this.parent.sub&&"0123456789".indexOf(C)>=0){var R=this.chToCmd(C,y.options);R instanceof Lt?y.deleteSelection():y.clearSelection().insRightOf(this.parent),R.createLeftOf(y.show()),y.controller.aria.queue("Baseline").alert(R.mathspeak({createdLeftOf:y}));return}y[r]&&!y[e]&&!y.selection&&y.options.charsThatBreakOutOfSupSub.indexOf(C)>-1&&(y.insRightOf(this.parent),y.controller.aria.queue("Baseline")),ft.prototype.write.call(this,y,C)}},v.prototype.moveTowards=function(f,y,C){y.options.autoSubscriptNumerals&&!this.sup?y.insDirOf(f,this):M.prototype.moveTowards.call(this,f,y,C)},v.prototype.deleteTowards=function(f,y){if(y.options.autoSubscriptNumerals&&this.sub){var C=this.sub.getEnd(-f);C instanceof Lt?C.remove():C&&C.deleteTowards(f,y.insAtDirEnd(-f,this.sub)),this.sub.isEmpty()&&(this.sub.deleteOutOf(r,y.insAtLeftEnd(this.sub)),this.sup&&y.insDirOf(-f,this))}else M.prototype.deleteTowards.call(this,f,y)},v.prototype.latexRecursive=function(f){if(this.checkCursorContextOpen(f),this.sub){f.uncleanedLatex+="_{";var y=f.uncleanedLatex.length;this.sub.latexRecursive(f);var C=f.uncleanedLatex.length;y===C&&(f.uncleanedLatex+=" "),f.uncleanedLatex+="}"}if(this.sup){f.uncleanedLatex+="^{";var y=f.uncleanedLatex.length;this.sup.latexRecursive(f);var C=f.uncleanedLatex.length;y===C&&(f.uncleanedLatex+=" "),f.uncleanedLatex+="}"}this.checkCursorContextClose(f)},v.prototype.mathspeak=function(f){if(this.sup!==void 0){var y=s2(this.sup);if((!f||!f.ignoreShorthand)&&m1.test(y)){var C="";return this.sub&&(C=c2[0]+" "+this.sub.mathspeak()+" "+c2[1]+" "),C+qJ(this.sup,y)}}return this.mathspeakTemplate=this.getMathspeakTemplate(),M.prototype.mathspeak.call(this)},v.prototype.getMathspeakTemplate=function(){return this.sub&&this.sup?zJ:this.sup?UJ:c2},v.prototype.text=function(){function f(y,C){var R=C&&C.text()||"";return C?y+(R.length===1?R:"("+(R||" ")+")"):""}return f("_",this.sub)+f("^",this.sup)},v.prototype.addBlock=function(f){this.supsub==="sub"?(this.sup=this.upInto=this.sub.upOutOf=f,f.adopt(this,this.sub,0).downOutOf=this.sub,f.setDOM(G(c("span",{class:"dcg-mq-sup"})).append(f.domFrag().children()).prependTo(this.domFrag().oneElement()).oneElement()),F.linkElementByBlockNode(f.domFrag().oneElement(),f)):(this.sub=this.downInto=this.sup.downOutOf=f,f.adopt(this,0,this.sup).upOutOf=this.sup,this.domFrag().removeClass("dcg-mq-sup-only"),f.setDOM(G(c("span",{class:"dcg-mq-sub"})).append(f.domFrag().children()).appendTo(this.domFrag().oneElement()).oneElement()),F.linkElementByBlockNode(f.domFrag().oneElement(),f),this.domFrag().append(G(c("span",{style:"display:inline-block;width:0"},[c.text(g)]))));for(var y=function(z){var W=C,ee=["sub","sup"][z],ye=["sup","sub"][z],ze=["down","up"][z],De=W[ee];De.deleteOutOf=function(Ce,Ue){if(Ue.insDirOf(this[Ce]?-Ce:Ce,this.parent),!this.isEmpty()){var We=this.getEnd(Ce);this.children().disown().withDirAdopt(Ce,Ue.parent,Ue[Ce],Ue[-Ce]).domFrag().insDirOf(-Ce,Ue.domFrag()),Ue[-Ce]=We}W.supsub=ye,delete W[ee],delete W["".concat(ze,"Into")];var ot=W[ye];ot["".concat(ze,"OutOf")]=l2,delete ot.deleteOutOf,ee==="sub"&&W.domFrag().addClass("dcg-mq-sup-only").children().last().remove(),this.remove()}},C=this,R=0;R<2;R+=1)y(R)},v}(be);function l2(M){var v=this.parent,f=M;do{if(f[e])return M.insLeftOf(v);f=f.parent.parent}while(f!==v);M.insRightOf(v)}var c2=["Subscript,",", Baseline"],UJ=["Superscript,",", Baseline"],zJ=["Subscript,",", Baseline Superscript,",", Baseline"];function qJ(M,v){if(v==="0")return"to the 0 power";if(v==="2")return"squared";if(v==="3")return"cubed";var f="";/^[+-]?\d{1,3}$/.test(v)&&(/(11|12|13|4|5|6|7|8|9|0)$/.test(v)?f="th":/1$/.test(v)?f="st":/2$/.test(v)?f="nd":/3$/.test(v)&&(f="rd"));var y=typeof M=="object"?M.mathspeak():v;return"to the "+y+f+" power"}L.subscript=L._=function(){return new Na("sub")},L.superscript=L.supscript=L["^"]=function(){return new Na("sup")};var Vp=function(M){dt(v,M);function v(f,y,C){var R=M.call(this)||this;R.ariaLabel=C||f.replace(/^\\/,"");var z=new at(2,function(W){return c("span",{class:"dcg-mq-large-operator dcg-mq-non-leaf"},[c("span",{class:"dcg-mq-to"},[c.block("span",{},W[1])]),c("big",{},[c.text(y)]),c("span",{class:"dcg-mq-from"},[c.block("span",{},W[0])])])});return Lt.prototype.setCtrlSeqHtmlTextAndMathspeak.call(R,f,z),R}return v.prototype.createLeftOf=function(f){M.prototype.createLeftOf.call(this,f),f.options.sumStartsWithNEquals&&(new fr("n").createLeftOf(f),new aN().createLeftOf(f))},v.prototype.latexRecursive=function(f){this.checkCursorContextOpen(f),f.uncleanedLatex+=this.ctrlSeq+"_{";var y=f.uncleanedLatex.length;this.getEnd(r).latexRecursive(f);var C=f.uncleanedLatex.length;C===y&&(f.uncleanedLatex+=" "),f.uncleanedLatex+="}^{",y=f.uncleanedLatex.length,this.getEnd(e).latexRecursive(f),C=f.uncleanedLatex.length,y===C&&(f.uncleanedLatex+=" "),f.uncleanedLatex+="}",this.checkCursorContextClose(f)},v.prototype.mathspeak=function(){return"Start "+this.ariaLabel+" from "+this.getEnd(r).mathspeak()+" to "+this.getEnd(e).mathspeak()+", end "+this.ariaLabel+", "},v.prototype.parser=function(){for(var f=ge.string,y=ge.optWhitespace,C=ge.succeed,R=te.block,z=this,W=z.blocks=[new ft,new ft],ee=0;ee<W.length;ee+=1)W[ee].adopt(z,z.getEnd(e),0);return y.then(f("_").or(f("^"))).then(function(ye){var ze=W[ye==="_"?0:1];return R.then(function(De){return De.children().adopt(ze,ze.getEnd(e),0),C(z)})}).many().result(z)},v.prototype.finalizeTree=function(){var f=this.getEnd(r),y=this.getEnd(e);f.ariaLabel="lower bound",y.ariaLabel="upper bound",this.downInto=f,this.upInto=y,f.upOutOf=y,y.downOutOf=f},v}(be);L["\u2211"]=L.sum=L.summation=function(){return new Vp("\\sum ",b,"sum")},L["\u220F"]=L.prod=L.product=function(){return new Vp("\\prod ",x,"product")},L.coprod=L.coproduct=function(){return new Vp("\\coprod ",E,"co product")},L["\u222B"]=L.int=L.integral=function(M){dt(v,M);function v(){var f=M.call(this,"\\int ","","integral")||this;return f.ariaLabel="integral",f.domView=new at(2,function(y){return c("span",{class:"dcg-mq-int dcg-mq-non-leaf"},[c("big",{},[c.text(S)]),c("span",{class:"dcg-mq-supsub dcg-mq-non-leaf"},[c("span",{class:"dcg-mq-sup"},[c.block("span",{class:"dcg-mq-sup-inner"},y[1])]),c.block("span",{class:"dcg-mq-sub"},y[0]),c("span",{style:"display:inline-block;width:0"},[c.text(g)])])])}),f}return v.prototype.createLeftOf=function(f){be.prototype.createLeftOf.call(this,f)},v}(Vp);var cN=L.frac=L.dfrac=L.cfrac=L.fraction=function(M){dt(v,M);function v(){var f=M!==null&&M.apply(this,arguments)||this;return f.ctrlSeq="\\frac",f.domView=new at(2,function(y){return c("span",{class:"dcg-mq-fraction dcg-mq-non-leaf"},[c.block("span",{class:"dcg-mq-numerator"},y[0]),c.block("span",{class:"dcg-mq-denominator"},y[1]),c("span",{style:"display:inline-block;width:0"},[c.text(g)])])}),f.textTemplate=["(",")/(",")"],f}return v.prototype.finalizeTree=function(){var f=this.getEnd(r),y=this.getEnd(e);this.upInto=y.upOutOf=f,this.downInto=f.downOutOf=y,f.ariaLabel="numerator",y.ariaLabel="denominator",this.getFracDepth()>1?this.mathspeakTemplate=["StartNestedFraction,","NestedOver",", EndNestedFraction"]:this.mathspeakTemplate=["StartFraction,","Over",", EndFraction"]},v.prototype.mathspeak=function(f){if(f&&f.createdLeftOf){var y=f.createdLeftOf;return y.parent.mathspeak()}var C=s2(this.getEnd(r)),R=s2(this.getEnd(e));if((!f||!f.ignoreShorthand)&&m1.test(C)&&m1.test(R)){var z=C==="1"||C==="-1",W="";if(R==="2"?W=z?"half":"halves":R==="3"?W=z?"third":"thirds":R==="4"?W=z?"fourth":"fourths":R==="5"?W=z?"fifth":"fifths":R==="6"?W=z?"sixth":"sixths":R==="7"?W=z?"seventh":"sevenths":R==="8"?W=z?"eighth":"eighths":R==="9"?W=z?"ninth":"ninths":R==="10"?W=z?"tenth":"tenths":R==="11"?W=z?"eleventh":"elevenths":R==="12"?W=z?"twelfth":"twelfths":R==="100"&&(W=z?"hundredth":"hundredths"),W!==""){for(var ee="",ye=!1,ze=this[r];ze&&ze[r]!==void 0;ze=ze[r])if(ze.ctrlSeq!=="\\ ")if(m1.test(ze.ctrlSeq||""))ye=!0;else{ye=!1;break}return ye&&(ee+="and "),ee+=this.getEnd(r).mathspeak()+" "+W,ee}}return M.prototype.mathspeak.call(this)},v.prototype.getFracDepth=function(){var f=0,y=function(C,R){return C instanceof xt&&C.ctrlSeq&&C.ctrlSeq.toLowerCase().search("frac")>=0&&(R+=1),C&&C.parent?y(C.parent,R):R};return y(this,f)},v}(be),HJ=L.over=q["/"]=function(M){dt(v,M);function v(){return M!==null&&M.apply(this,arguments)||this}return v.prototype.createLeftOf=function(f){if(!this.replacedFragment){var y=f[r],C=f.options.typingSlashCreatesNewFraction&&this instanceof cN;if(!C)for(;y&&!(Eb(y)||y instanceof wt&&y._groupingClass==="dcg-mq-ellipsis-end"||y instanceof(L.text||i)||y instanceof Vp||y.ctrlSeq==="\\ "||/^[,;:]$/.test(y.ctrlSeq));)y=y[r];if(y instanceof Vp&&y[e]instanceof Na){y=y[e];var R=y[e];R instanceof Na&&R.ctrlSeq!=y.ctrlSeq&&(y=y[e])}if(y!==f[r]&&!f.isTooDeep(1)){var R=y[e],z=f[r];this.replaces(new B(R||f.parent.getEnd(r),z)),f[r]=y}}M.prototype.createLeftOf.call(this,f)},v}(cN),dN=function(){return new Lt("\\operatorname{ans}",c("span",{class:"dcg-mq-ans"},[c.text("ans")]),"ans")};L.ans=dN;var pN=function(){return new Lt("\\%\\operatorname{of}",c("span",{class:"dcg-mq-nonSymbola dcg-mq-operator-name"},[c.text("% of ")]),"percent of")};L.percent=L.percentof=pN;var KJ=function(M){dt(v,M);function v(){var f=M!==null&&M.apply(this,arguments)||this;return f.tokenId="",f.ctrlSeq="\\token",f.textTemplate=["token(",")"],f.mathspeakTemplate=["StartToken,",", EndToken"],f.ariaLabel="token",f}return v.prototype.html=function(){var f=c("span",{class:"dcg-mq-token dcg-mq-ignore-mousedown","data-dcg-mq-token":this.tokenId});return this.setDOM(f),F.linkElementByCmdNode(f,this),f},v.prototype.latexRecursive=function(f){this.checkCursorContextOpen(f),f.uncleanedLatex+="\\token{"+this.tokenId+"}",this.checkCursorContextClose(f)},v.prototype.mathspeak=function(){var f=[];return this.domFrag().children().eachElement(function(y){var C=y.getAttribute("aria-label");typeof C=="string"&&C!==""&&f.push(C)}),f.length>0?f.join(" ").trim():"token "+this.tokenId},v.prototype.parser=function(){var f=this;return te.block.map(function(y){var C=y.getEnd(r);if(C)for(f.tokenId+=C.ctrlSeq;C=C[e];)f.tokenId+=C.ctrlSeq;return f})},v}(Lt);L.token=KJ;var uN=function(M){dt(v,M);function v(){var f=M!==null&&M.apply(this,arguments)||this;return f.ctrlSeq="\\sqrt",f.domView=new at(1,function(y){return c("span",{class:"dcg-mq-non-leaf dcg-mq-sqrt-container"},[c("span",{class:"dcg-mq-scaled dcg-mq-sqrt-prefix"},[Cb.sqrt.html()]),c.block("span",{class:"dcg-mq-non-leaf dcg-mq-sqrt-stem"},y[0])])}),f.textTemplate=["sqrt(",")"],f.mathspeakTemplate=["StartRoot,",", EndRoot"],f.ariaLabel="root",f}return v.prototype.parser=function(){return te.optBlock.then(function(f){return te.block.map(function(y){var C=new d2;return C.blocks=[f,y],f.adopt(C,0,0),y.adopt(C,f,0),C})}).or(M.prototype.parser.call(this))},v.prototype.deleteTowards=function(f,y){if(!this.isEmpty()&&f===1){this.moveTowards(e,y),y.parent.deleteOutOf(r,y);return}M.prototype.deleteTowards.call(this,f,y)},v}(be);L.sqrt=uN,L.hat=function(M){dt(v,M);function v(){var f=M!==null&&M.apply(this,arguments)||this;return f.ctrlSeq="\\hat",f.domView=new at(1,function(y){return c("span",{class:"dcg-mq-non-leaf"},[c("span",{class:"dcg-mq-hat-prefix"},[c.text("^")]),c.block("span",{class:"dcg-mq-hat-stem"},y[0])])}),f.textTemplate=["hat(",")"],f}return v}(be);var d2=function(M){dt(v,M);function v(){var f=M!==null&&M.apply(this,arguments)||this;return f.domView=new at(2,function(y){return c("span",{class:"dcg-mq-nthroot-container dcg-mq-non-leaf"},[c.block("sup",{class:"dcg-mq-nthroot dcg-mq-non-leaf"},y[0]),c("span",{class:"dcg-mq-scaled dcg-mq-sqrt-container"},[c("span",{class:"dcg-mq-sqrt-prefix dcg-mq-scaled"},[Cb.sqrt.html()]),c.block("span",{class:"dcg-mq-sqrt-stem dcg-mq-non-leaf"},y[1])])])}),f.textTemplate=["sqrt[","](",")"],f}return v.prototype.latexRecursive=function(f){this.checkCursorContextOpen(f),f.uncleanedLatex+="\\sqrt[",this.getEnd(r).latexRecursive(f),f.uncleanedLatex+="]{",this.getEnd(e).latexRecursive(f),f.uncleanedLatex+="}",this.checkCursorContextClose(f)},v.prototype.mathspeak=function(){var f=this.getEnd(r).mathspeak(),y=this.getEnd(e).mathspeak();return this.getEnd(r).ariaLabel="Index",this.getEnd(e).ariaLabel="Radicand",f==="3"?"Start Cube Root, "+y+", End Cube Root":"Root Index "+f+", Start Root, "+y+", End Root"},v.prototype.deleteTowards=function(f,y){be.prototype.deleteTowards.call(this,f,y)},v}(uN);L.nthroot=d2,L.cbrt=function(M){dt(v,M);function v(){return M!==null&&M.apply(this,arguments)||this}return v.prototype.createLeftOf=function(f){M.prototype.createLeftOf.call(this,f),new Ct("3").createLeftOf(f),f.controller.moveRight()},v}(d2);var hN=function(M){dt(v,M);function v(f,y,C){var R=new at(1,function(z){return c("span",{class:"dcg-mq-non-leaf"},[c("span",{class:"dcg-mq-diacritic-above"},[y]),c.block("span",{class:"dcg-mq-diacritic-stem"},z[0])])});return M.call(this,f,R,C)||this}return v}(be);L.vec=function(){return new hN("\\vec",c.entityText("&rarr;"),["vec(",")"])},L.tilde=function(){return new hN("\\tilde",c.text("~"),["tilde(",")"])};var gN=function(M){dt(v,M);function v(){return M!==null&&M.apply(this,arguments)||this}return v.prototype.setDOM=function(f){var y;M.prototype.setDOM.call(this,f);var C=this.domFrag().children();return C.isEmpty()||(this.delimFrags=(y={},y[r]=C.first(),y[e]=C.last(),y)),this},v}(be),Va=function(M){dt(v,M);function v(f,y,C,R,z){var W,ee=M.call(this,"\\left"+R,void 0,[y,C])||this;return ee.side=f,ee.sides=(W={},W[r]={ch:y,ctrlSeq:R},W[e]={ch:C,ctrlSeq:z},W),ee}return v.prototype.numBlocks=function(){return 1},v.prototype.html=function(){var f=this,y=this.getSymbol(r),C=this.getSymbol(e);return this.domView=new at(1,function(R){return c("span",{class:"dcg-mq-non-leaf dcg-mq-bracket-container"},[c("span",{style:"width:"+y.width,class:"dcg-mq-scaled dcg-mq-bracket-l dcg-mq-paren"+(f.side===e?" dcg-mq-ghost":"")},[y.html()]),c.block("span",{style:"margin-left:"+y.width+";margin-right:"+C.width,class:"dcg-mq-bracket-middle dcg-mq-non-leaf"},R[0]),c("span",{style:"width:"+C.width,class:"dcg-mq-scaled dcg-mq-bracket-r dcg-mq-paren"+(f.side===r?" dcg-mq-ghost":"")},[C.html()])])}),M.prototype.html.call(this)},v.prototype.getSymbol=function(f){var y=this.sides[f||e].ch;return Cb[y]||{width:"0",html:""}},v.prototype.latexRecursive=function(f){this.checkCursorContextOpen(f),f.uncleanedLatex+="\\left"+this.sides[r].ctrlSeq,this.getEnd(r).latexRecursive(f),f.uncleanedLatex+="\\right"+this.sides[e].ctrlSeq,this.checkCursorContextClose(f)},v.prototype.mathspeak=function(f){var y=this.sides[r].ch,C=this.sides[e].ch;if(y==="|"&&C==="|")this.mathspeakTemplate=["StartAbsoluteValue,",", EndAbsoluteValue"],this.ariaLabel="absolute value";else if(f&&f.createdLeftOf&&this.side){var R="";return this.side===r?R=this.textTemplate[0]:this.side===e&&(R=this.textTemplate[1]),(this.side===r?"left ":"right ")+Rh[R]}else this.mathspeakTemplate=["left "+Rh[y]+",",", right "+Rh[C]],this.ariaLabel=Rh[y]+" block";return M.prototype.mathspeak.call(this)},v.prototype.matchBrack=function(f,y,C){return C instanceof v&&C.side&&C.side!==-y&&(!f.restrictMismatchedBrackets||_b[this.sides[this.side].ch]===C.sides[C.side].ch||f.restrictMismatchedBrackets!=="none"&&{"(":"]","[":")"}[this.sides[r].ch]===C.sides[e].ch)&&C},v.prototype.closeOpposing=function(f){f.side=0,f.sides[this.side]=this.sides[this.side];var y=f.delimFrags[this.side===r?r:e].removeClass("dcg-mq-ghost");this.replaceBracket(y,this.side)},v.prototype.createLeftOf=function(f){var y;if(!this.replacedFragment){var C=f.options;this.sides[r].ch==="|"?y=this.matchBrack(C,e,f[e])||this.matchBrack(C,r,f[r])||this.matchBrack(C,0,f.parent.parent):y=this.matchBrack(C,-this.side,f[-this.side])||this.matchBrack(C,-this.side,f.parent.parent)}if(y){var R=this.side=-y.side;this.closeOpposing(y),y===f.parent.parent&&f[R]&&new B(f[R],f.parent.getEnd(R),-R).disown().withDirAdopt(-R,y.parent,y,y[R]).domFrag().insDirOf(R,y.domFrag()),y.bubble(function(z){z.reflow()})}else y=this,R=y.side,y.replacedFragment?y.side=0:f[-R]&&(y.replaces(new B(f[-R],f.parent.getEnd(-R),R)),f[-R]=0),M.prototype.createLeftOf.call(this,f);R===r?f.insAtLeftEnd(y.getEnd(r)):f.insRightOf(y)},v.prototype.placeCursor=function(){},v.prototype.unwrap=function(){this.getEnd(r).children().disown().adopt(this.parent,this,this[e]).domFrag().insertAfter(this.domFrag()),this.remove()},v.prototype.deleteSide=function(f,y,C){var R=this.parent,z=this[f],W=R.getEnd(f);if(f===this.side){this.unwrap(),z?C.insDirOf(-f,z):C.insAtDirEnd(f,R);return}var ee=C.options,ye=!this.side;if(this.side=-f,this.matchBrack(ee,f,this.getEnd(r).getEnd(this.side))){this.closeOpposing(this.getEnd(r).getEnd(this.side));var ze=this.getEnd(r).getEnd(f);this.unwrap(),ze&&ze.siblingCreated(C.options,f),z?C.insDirOf(-f,z):C.insAtDirEnd(f,R)}else{if(this.matchBrack(ee,f,this.parent.parent))this.parent.parent.closeOpposing(this),this.parent.parent.unwrap();else if(y&&ye){this.unwrap(),z?C.insDirOf(-f,z):C.insAtDirEnd(f,R);return}else{this.sides[f]=WJ(this),this.delimFrags[r].removeClass("dcg-mq-ghost"),this.delimFrags[e].removeClass("dcg-mq-ghost");var De=this.delimFrags[f].addClass("dcg-mq-ghost");this.replaceBracket(De,f)}if(z){var Ce=this.getEnd(r),ze=Ce.getEnd(f);Ce.domFrag().removeClass("dcg-mq-empty"),new B(z,W,-f).disown().withDirAdopt(-f,Ce,ze,0).domFrag().insAtDirEnd(f,Ce.domFrag().oneElement()),ze&&ze.siblingCreated(C.options,f),C.insDirOf(-f,z)}else y?C.insDirOf(f,this):C.insAtDirEnd(f,this.getEnd(r))}},v.prototype.replaceBracket=function(f,y){var C=this.getSymbol(y);if(f.children().replaceWith(G(C.html())),f.oneElement().style.width=C.width,y===r){var R=f.next();R.isEmpty()||(R.oneElement().style.marginLeft=C.width)}else{var z=f.prev();z.isEmpty()||(z.oneElement().style.marginRight=C.width)}},v.prototype.deleteTowards=function(f,y){this.deleteSide(-f,!1,y)},v.prototype.finalizeTree=function(){this.getEnd(r).deleteOutOf=function(f,y){this.parent.deleteSide(f,!0,y)},this.finalizeTree=this.intentionalBlur=function(){this.delimFrags[this.side===r?e:r].removeClass("dcg-mq-ghost"),this.side=0}},v.prototype.siblingCreated=function(f,y){y===-this.side&&this.finalizeTree()},v}(gN);function WJ(M){var v=M.side,f=M.sides[v];return{ch:_b[f.ch],ctrlSeq:_b[f.ctrlSeq]}}var _b={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{","\\{":"\\}","\\}":"\\{","&lang;":"&rang;","&rang;":"&lang;","\\langle ":"\\rangle ","\\rangle ":"\\langle ","|":"|","\\lVert ":"\\rVert ","\\rVert ":"\\lVert "},Rh={"&lang;":"angle-bracket","&rang;":"angle-bracket","|":"pipe"};function p2(M,y,f){var y=y||M,C=_b[M],R=_b[y];q[M]=function(){return new Va(r,M,C,y,R)},q[C]=function(){return new Va(e,M,C,y,R)},Rh[M]=Rh[C]=f}p2("(","","parenthesis"),p2("[","","bracket"),p2("{","\\{","brace"),L.langle=function(){return new Va(r,"&lang;","&rang;","\\langle ","\\rangle ")},L.rangle=function(){return new Va(e,"&lang;","&rang;","\\langle ","\\rangle ")},q["|"]=function(){return new Va(r,"|","|","|","|")},L.lVert=function(){return new Va(r,"&#8741;","&#8741;","\\lVert ","\\rVert ")},L.rVert=function(){return new Va(e,"&#8741;","&#8741;","\\lVert ","\\rVert ")},L.left=function(M){dt(v,M);function v(){return M!==null&&M.apply(this,arguments)||this}return v.prototype.parser=function(){var f=ge.regex,y=ge.string,C=ge.optWhitespace;return C.then(f(/^(?:[([|]|\\\{|\\langle(?![a-zA-Z])|\\lVert(?![a-zA-Z]))/)).then(function(R){var z=R.replace(/^\\/,"");return R=="\\langle"&&(z="&lang;",R=R+" "),R=="\\lVert"&&(z="&#8741;",R=R+" "),te.then(function(W){return y("\\right").skip(C).then(f(/^(?:[\])|]|\\\}|\\rangle(?![a-zA-Z])|\\rVert(?![a-zA-Z]))/)).map(function(ee){var ye=ee.replace(/^\\/,"");ee=="\\rangle"&&(ye="&rang;",ee=ee+" "),ee=="\\rVert"&&(ye="&#8741;",ee=ee+" ");var ze=new Va(0,z,ye,R,ee);return ze.blocks=[W],W.adopt(ze,0,0),ze})})})},v}(be),L.right=function(M){dt(v,M);function v(){return M!==null&&M.apply(this,arguments)||this}return v.prototype.parser=function(){return ge.fail("unmatched \\right")},v}(be);var u2=Cb["("],h2=Cb[")"],mN=function(M){dt(v,M);function v(){var f=M!==null&&M.apply(this,arguments)||this;return f.ctrlSeq="\\binom",f.domView=new at(2,function(y){return c("span",{class:"dcg-mq-non-leaf dcg-mq-bracket-container"},[c("span",{style:"width:"+u2.width,class:"dcg-mq-paren dcg-mq-bracket-l dcg-mq-scaled"},[u2.html()]),c("span",{style:"margin-left:"+u2.width+"; margin-right:"+h2.width,class:"dcg-mq-non-leaf dcg-mq-bracket-middle"},[c("span",{class:"dcg-mq-array dcg-mq-non-leaf"},[c.block("span",{},y[0]),c.block("span",{},y[1])])]),c("span",{style:"width:"+h2.width,class:"dcg-mq-paren dcg-mq-bracket-r dcg-mq-scaled"},[h2.html()])])}),f.textTemplate=["choose(",",",")"],f.mathspeakTemplate=["StartBinomial,","Choose",", EndBinomial"],f.ariaLabel="binomial",f}return v.prototype.finalizeTree=function(){var f=this.getEnd(r),y=this.getEnd(e);this.upInto=y.upOutOf=f,this.downInto=f.downOutOf=y,f.ariaLabel="upper index",y.ariaLabel="lower index"},v}(gN);L.binom=L.binomial=mN,L.choose=function(M){dt(v,M);function v(){return M!==null&&M.apply(this,arguments)||this}return v.prototype.createLeftOf=function(f){HJ.prototype.createLeftOf.call(this,f)},v}(mN);var $J=function(M){dt(v,M);function v(){var f=M!==null&&M.apply(this,arguments)||this;return f.ctrlSeq="\\MathQuillMathField",f.domView=new at(1,function(y){return c("span",{class:"dcg-mq-editable-field"},[c.block("span",{class:"dcg-mq-root-block","aria-hidden":"true"},y[0])])}),f}return v.prototype.parser=function(){var f=this,y=ge.string,C=ge.regex,R=ge.succeed;return y("[").then(C(/^[a-z][a-z0-9]*/i)).skip(y("]")).map(function(z){f.name=z}).or(R(void 0)).then(M.prototype.parser.call(this))},v.prototype.finalizeTree=function(f){var y=new it(this.getEnd(r),this.domFrag().oneElement(),f);y.KIND_OF_MQ="MathField",y.editable=!0,y.createTextarea(),y.editablesTextareaEvents(),y.cursor.insAtRightEnd(y.root),Ie(y.root);function C(R){if(R.parentNode&&!G(R).hasClass("dcg-mq-root-block")&&C(R.parentNode),R.nodeType===Node.ELEMENT_NODE){var z=R;z.getAttribute("aria-hidden")==="true"&&(z.removeAttribute("aria-hidden"),G(R).children().eachElement(function(W){W.setAttribute("aria-hidden","true")}))}}C(this.domFrag().parent().oneElement()),this.domFrag().oneElement().removeAttribute("aria-hidden")},v.prototype.registerInnerField=function(f,y){var C=this.getEnd(r).controller,R=new y(C);f[this.name]=R,f.push(R)},v.prototype.latexRecursive=function(f){this.checkCursorContextOpen(f),this.getEnd(r).latexRecursive(f),this.checkCursorContextClose(f)},v.prototype.text=function(){return this.getEnd(r).text()},v}(be);L.editable=L.MathQuillMathField=$J;var fN=function(M){dt(v,M);function v(){return M!==null&&M.apply(this,arguments)||this}return v.prototype.setOptions=function(f){function y(){return""}return this.text=f.text||y,this.domView=new at(0,function(){return c("span",{},[l(f.htmlString||"")])}),this.latex=f.latex||y,this},v.prototype.latexRecursive=function(f){this.checkCursorContextOpen(f),f.uncleanedLatex+=this.latex(),this.checkCursorContextClose(f)},v.prototype.parser=function(){var f=this,y=ge.string,C=ge.regex,R=ge.succeed;return y("{").then(C(/^[a-z][a-z0-9]*/i)).skip(y("}")).then(function(z){return y("[").then(C(/^[-\w\s]*/)).skip(y("]")).or(R(void 0)).map(function(W){return f.setOptions(Y[z](W))})})},v}(Lt);if(L.embed=fN,window.jQuery){ke=J(1);for(var bN in ke)(function(M,v){typeof v=="function"?(Le[M]=function(){return Se(),v.apply(this,arguments)},Le[M].prototype=v.prototype):Le[M]=v})(bN,ke[bN])}})()});var h6=__dcg_shared_module_exports__['c']((qFe,u6)=>{u6.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}});var m6=__dcg_shared_module_exports__['c']((HFe,g6)=>{var kle=/([\w-]+)|=|(['"])([.\s\S]*?)\2/g,Ele=h6();g6.exports=function(r){var e=0,t,o=!0,i={type:"tag",name:"",voidElement:!1,attrs:{},children:[]};return r.replace(kle,function(n){if(n==="="){o=!0,e++;return}o?e===0?((Ele[n]||r.charAt(r.length-2)==="/")&&(i.voidElement=!0),i.name=n):(i.attrs[t]=n.replace(/^['"]|['"]$/g,""),t=void 0):(t&&(i.attrs[t]=t),t=n),e++,o=!1}),i}});var b6=__dcg_shared_module_exports__['c']((KFe,f6)=>{var Ile=/(?:<!--[\S\s]*?-->|<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>)/g,Cle=m6(),_le=Object.create?Object.create(null):{};function VO(r,e,t,o,i){var n=e.indexOf("<",o),a=e.slice(o,n===-1?void 0:n);/^\s*$/.test(a)&&(a=" "),(!i&&n>-1&&t+r.length>=0||a!==" ")&&r.push({type:"text",content:a})}f6.exports=function(e,t){t||(t={}),t.components||(t.components=_le);var o=[],i,n=-1,a=[],s={},l=!1;return e.replace(Ile,function(c,p){if(l){if(c!=="</"+i.name+">")return;l=!1}var h=c.charAt(1)!=="/",g=c.indexOf("<!--")===0,m=p+c.length,b=e.charAt(m),x;h&&!g&&(n++,i=Cle(c),i.type==="tag"&&t.components[i.name]&&(i.type="component",l=!0),!i.voidElement&&!l&&b&&b!=="<"&&VO(i.children,e,n,m,t.ignoreWhitespace),s[i.tagName]=i,n===0&&o.push(i),x=a[n-1],x&&x.children.push(i),a[n]=i),(g||!h||i.voidElement)&&(g||n--,!l&&b!=="<"&&b&&(x=n===-1?o:a[n].children,VO(x,e,n,m,t.ignoreWhitespace)))}),!o.length&&e.length&&VO(o,e,0,0,t.ignoreWhitespace),o}});var v6=__dcg_shared_module_exports__['c']((WFe,x6)=>{function Mle(r){var e=[];for(var t in r)e.push(t+'="'+r[t]+'"');return e.length?" "+e.join(" "):""}function y6(r,e){switch(e.type){case"text":return r+e.content;case"tag":return r+="<"+e.name+(e.attrs?Mle(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?r:r+e.children.reduce(y6,"")+"</"+e.name+">"}}x6.exports=function(r){return r.reduce(function(e,t){return e+y6("",t)},"")}});var S6=__dcg_shared_module_exports__['c'](($Fe,w6)=>{w6.exports={parse:b6(),stringify:v6()}});var rl={};__dcg_shared_module_exports__['d'](rl,{UnicodeBraille:()=>Ri,latexToNemeth:()=>lc,latexToUeb:()=>cc,nemethToLatex:()=>sL,uebToLatex:()=>lL,version:()=>GQ});var jV=Object.defineProperty,YJ=Object.getOwnPropertyNames,OV=Object.getOwnPropertySymbols,XJ=Object.prototype.hasOwnProperty,JJ=Object.prototype.propertyIsEnumerable,RV=(r,e,t)=>e in r?jV(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Zh=(r,e)=>{for(var t in e||(e={}))XJ.call(e,t)&&RV(r,t,e[t]);if(OV)for(var t of OV(e))JJ.call(e,t)&&RV(r,t,e[t]);return r},Qh=(r=>typeof __dcg_shared_module_exports__['a']!="undefined"?__dcg_shared_module_exports__['a']:typeof Proxy!="undefined"?new Proxy(r,{get:(e,t)=>(typeof __dcg_shared_module_exports__['a']!="undefined"?__dcg_shared_module_exports__['a']:e)[t]}):r)(function(r){if(typeof __dcg_shared_module_exports__['a']!="undefined")return __dcg_shared_module_exports__['a'].apply(this,arguments);throw new Error('Dynamic require of "'+r+'" is not supported')}),X2=(r,e)=>function(){return e||(0,r[YJ(r)[0]])((e={exports:{}}).exports,e),e.exports},J2=(r,e)=>{for(var t in e)jV(r,t,{get:e[t],enumerable:!0})},ZJ=X2({"generated/latex.jison.js"(r,e){"use strict";var t=function(){var o=function(H,w,F,V){for(F=F||{},V=H.length;V--;F[H[V]]=w);return F},i=[1,13],n=[1,14],a=[1,15],s=[1,16],l=[1,17],c=[1,21],p=[1,18],h=[1,19],g=[1,20],m=[1,22],b=[1,23],x=[1,28],E=[1,30],S=[1,31],k=[1,32],T=[1,33],I=[1,29],P=[5,21,27,38],A=[5,19,21,22,23,24,25,26,27,28,32,33,34,35,36,37,38],D=[5,10,12,13,14,19,21,22,23,24,25,26,27,28,32,33,34,35,36,37,38],G=[5,10,19,21,22,23,24,25,26,27,28,32,33,34,35,36,37,38],N={trace:function(){},yy:{},symbols_:{error:2,sentence:3,group:4,EOF:5,level:6,expression:7,subscript:8,superscript:9,_:10,atom:11,"^":12,"PRIMES^":13,PRIMES:14,delimited_group:15,typeform:16,frac:17,radical:18,LEFT:19,delimiter:20,RIGHT:21,FRAC:22,OPERATOR_NAME:23,MATHRM:24,TEXT:25,RADICAL_OPTARG:26,CLOSE_OPTARG:27,RADICAL:28,curly_group:29,greek:30,command:31,SYMBOL:32,DELIMITER:33,DELIMITER_COMMAND:34,GREEK:35,COMMAND:36,"{":37,"}":38,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",10:"_",12:"^",13:"PRIMES^",14:"PRIMES",19:"LEFT",21:"RIGHT",22:"FRAC",23:"OPERATOR_NAME",24:"MATHRM",25:"TEXT",26:"RADICAL_OPTARG",27:"CLOSE_OPTARG",28:"RADICAL",32:"SYMBOL",33:"DELIMITER",34:"DELIMITER_COMMAND",35:"GREEK",36:"COMMAND",37:"{",38:"}"},productions_:[0,[3,2],[3,1],[4,3],[4,2],[4,1],[4,2],[4,1],[6,2],[6,2],[6,1],[6,1],[8,2],[9,2],[9,2],[9,1],[7,1],[7,1],[7,1],[7,1],[7,1],[15,5],[15,4],[17,3],[16,2],[16,2],[16,2],[18,4],[18,3],[18,2],[18,2],[11,1],[11,1],[11,1],[11,1],[11,1],[20,1],[20,1],[30,1],[31,1],[29,3],[29,2]],performAction:function(w,F,V,B,L,q,le){var $=q.length-1;switch(L){case 1:return q[$-1];case 2:return B.group();case 3:this.$=B.group(q[$-2],q[$-1],q[$]);break;case 4:case 6:this.$=B.group(q[$-1],q[$]);break;case 5:case 7:this.$=B.group(q[$]);break;case 8:this.$=B.level({_:B.group(q[$-1]),"^":B.group(q[$])});break;case 9:this.$=B.level({_:B.group(q[$]),"^":B.group(q[$-1])});break;case 10:this.$=B.level({"^":B.group(q[$])});break;case 11:this.$=B.level({_:B.group(q[$])});break;case 12:case 13:this.$=q[$];break;case 14:this.$=B.processPrimes(q[$-1],q[$]);break;case 15:this.$=B.processPrimes(q[$],B.group());break;case 21:this.$=B.group(q[$-3],q[$-2],q[$]);break;case 22:this.$=B.group(q[$-2],q[$]);break;case 23:this.$=B.fraction(B.group(q[$-1]),B.group(q[$]));break;case 24:this.$=B.typeform("operator_name",B.group(q[$]));break;case 25:this.$=B.typeform("mathrm",B.group(q[$]));break;case 26:this.$=B.typeform("text",B.group(q[$]));break;case 27:this.$=B.radical(q[$],B.group(q[$-2]));break;case 28:this.$=B.radical(B.group(q[$]),B.group());break;case 29:case 30:this.$=B.radical(B.group(q[$]));break;case 35:case 36:this.$=B.terminal(q[$]);break;case 37:case 39:this.$=B.command(q[$]);break;case 38:this.$=B.greek(q[$]);break;case 40:this.$=q[$-1];break;case 41:this.$=B.group();break}},table:[{3:1,4:2,5:[1,3],6:4,7:5,8:6,9:7,10:i,11:12,12:n,13:a,14:s,15:8,16:9,17:10,18:11,19:l,20:25,22:c,23:p,24:h,25:g,26:m,28:b,29:24,30:26,31:27,32:x,33:E,34:S,35:k,36:T,37:I},{1:[3]},{5:[1,34]},{1:[2,2]},o(P,[2,5],{15:8,16:9,17:10,18:11,11:12,29:24,20:25,30:26,31:27,7:35,19:l,22:c,23:p,24:h,25:g,26:m,28:b,32:x,33:E,34:S,35:k,36:T,37:I}),o(P,[2,7],{6:4,7:5,8:6,9:7,15:8,16:9,17:10,18:11,11:12,29:24,20:25,30:26,31:27,4:36,10:i,12:n,13:a,14:s,19:l,22:c,23:p,24:h,25:g,26:m,28:b,32:x,33:E,34:S,35:k,36:T,37:I}),o(A,[2,11],{9:37,12:n,13:a,14:s}),o(A,[2,10],{8:38,10:i}),o(D,[2,16]),o(D,[2,17]),o(D,[2,18]),o(D,[2,19]),o(D,[2,20]),{11:39,20:25,29:24,30:26,31:27,32:x,33:E,34:S,35:k,36:T,37:I},{11:40,20:25,29:24,30:26,31:27,32:x,33:E,34:S,35:k,36:T,37:I},{11:41,20:25,29:24,30:26,31:27,32:x,33:E,34:S,35:k,36:T,37:I},o(G,[2,15]),{20:42,33:E,34:S},{11:43,20:25,29:24,30:26,31:27,32:x,33:E,34:S,35:k,36:T,37:I},{11:44,20:25,29:24,30:26,31:27,32:x,33:E,34:S,35:k,36:T,37:I},{11:45,20:25,29:24,30:26,31:27,32:x,33:E,34:S,35:k,36:T,37:I},{11:46,20:25,29:24,30:26,31:27,32:x,33:E,34:S,35:k,36:T,37:I},{4:47,6:4,7:5,8:6,9:7,10:i,11:12,12:n,13:a,14:s,15:8,16:9,17:10,18:11,19:l,20:25,22:c,23:p,24:h,25:g,26:m,27:[1,48],28:b,29:24,30:26,31:27,32:x,33:E,34:S,35:k,36:T,37:I},{11:49,17:50,20:25,22:c,29:24,30:26,31:27,32:x,33:E,34:S,35:k,36:T,37:I},o(D,[2,31]),o(D,[2,32]),o(D,[2,33]),o(D,[2,34]),o(D,[2,35]),{4:51,6:4,7:5,8:6,9:7,10:i,11:12,12:n,13:a,14:s,15:8,16:9,17:10,18:11,19:l,20:25,22:c,23:p,24:h,25:g,26:m,28:b,29:24,30:26,31:27,32:x,33:E,34:S,35:k,36:T,37:I,38:[1,52]},o(D,[2,36]),o(D,[2,37]),o(D,[2,38]),o(D,[2,39]),{1:[2,1]},o(P,[2,4],{6:4,7:5,8:6,9:7,15:8,16:9,17:10,18:11,11:12,29:24,20:25,30:26,31:27,4:53,10:i,12:n,13:a,14:s,19:l,22:c,23:p,24:h,25:g,26:m,28:b,32:x,33:E,34:S,35:k,36:T,37:I}),o(P,[2,6]),o(A,[2,8]),o(A,[2,9]),o([5,12,13,14,19,21,22,23,24,25,26,27,28,32,33,34,35,36,37,38],[2,12]),o(G,[2,13]),o(G,[2,14]),{4:54,6:4,7:5,8:6,9:7,10:i,11:12,12:n,13:a,14:s,15:8,16:9,17:10,18:11,19:l,20:25,21:[1,55],22:c,23:p,24:h,25:g,26:m,28:b,29:24,30:26,31:27,32:x,33:E,34:S,35:k,36:T,37:I},o(D,[2,24]),o(D,[2,25]),o(D,[2,26]),{11:56,20:25,29:24,30:26,31:27,32:x,33:E,34:S,35:k,36:T,37:I},{27:[1,57]},{11:58,20:25,29:24,30:26,31:27,32:x,33:E,34:S,35:k,36:T,37:I},o(D,[2,29]),o(D,[2,30]),{38:[1,59]},o(D,[2,41]),o(P,[2,3]),{21:[1,60]},{20:61,33:E,34:S},o(D,[2,23]),{11:62,20:25,29:24,30:26,31:27,32:x,33:E,34:S,35:k,36:T,37:I},o(D,[2,28]),o(D,[2,40]),{20:63,33:E,34:S},o(D,[2,22]),o(D,[2,27]),o(D,[2,21])],defaultActions:{3:[2,2],34:[2,1]},parseError:function(w,F){if(F.recoverable)this.trace(w);else{var V=new Error(w);throw V.hash=F,V}},parse:function(w){var F=this,V=[0],B=[],L=[null],q=[],le=this.table,$="",ne=0,ue=0,de=0,pe=2,Y=1,j=q.slice.call(arguments,1),X=Object.create(this.lexer),xe={yy:{}};for(var fe in this.yy)Object.prototype.hasOwnProperty.call(this.yy,fe)&&(xe.yy[fe]=this.yy[fe]);X.setInput(w,xe.yy),xe.yy.lexer=X,xe.yy.parser=this,typeof X.yylloc=="undefined"&&(X.yylloc={});var Se=X.yylloc;q.push(Se);var ke=X.options&&X.options.ranges;typeof xe.yy.parseError=="function"?this.parseError=xe.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Le(sr){V.length=V.length-2*sr,L.length=L.length-sr,q.length=q.length-sr}for(var $e=function(){var sr;return sr=X.lex()||Y,typeof sr!="number"&&(sr=F.symbols_[sr]||sr),sr},Q,J,ve,Ie,He,ge,Ze={},rt,Ee,At,Tt;;){if(ve=V[V.length-1],this.defaultActions[ve]?Ie=this.defaultActions[ve]:((Q===null||typeof Q=="undefined")&&(Q=$e()),Ie=le[ve]&&le[ve][Q]),typeof Ie=="undefined"||!Ie.length||!Ie[0]){var xt="";Tt=[];for(rt in le[ve])this.terminals_[rt]&&rt>pe&&Tt.push("'"+this.terminals_[rt]+"'");X.showPosition?xt="Parse error on line "+(ne+1)+`:
`+X.showPosition()+`
Expecting `+Tt.join(", ")+", got '"+(this.terminals_[Q]||Q)+"'":xt="Parse error on line "+(ne+1)+": Unexpected "+(Q==Y?"end of input":"'"+(this.terminals_[Q]||Q)+"'"),this.parseError(xt,{text:X.match,token:this.terminals_[Q]||Q,line:X.yylineno,loc:Se,expected:Tt})}if(Ie[0]instanceof Array&&Ie.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ve+", token: "+Q);switch(Ie[0]){case 1:V.push(Q),L.push(X.yytext),q.push(X.yylloc),V.push(Ie[1]),Q=null,J?(Q=J,J=null):(ue=X.yyleng,$=X.yytext,ne=X.yylineno,Se=X.yylloc,de>0&&de--);break;case 2:if(Ee=this.productions_[Ie[1]][1],Ze.$=L[L.length-Ee],Ze._$={first_line:q[q.length-(Ee||1)].first_line,last_line:q[q.length-1].last_line,first_column:q[q.length-(Ee||1)].first_column,last_column:q[q.length-1].last_column},ke&&(Ze._$.range=[q[q.length-(Ee||1)].range[0],q[q.length-1].range[1]]),ge=this.performAction.apply(Ze,[$,ue,ne,xe.yy,Ie[1],L,q].concat(j)),typeof ge!="undefined")return ge;Ee&&(V=V.slice(0,-1*Ee*2),L=L.slice(0,-1*Ee),q=q.slice(0,-1*Ee)),V.push(this.productions_[Ie[1]][0]),L.push(Ze.$),q.push(Ze._$),At=le[V[V.length-2]][V[V.length-1]],V.push(At);break;case 3:return!0}}return!0}},U=function(){var H={EOF:1,parseError:function(F,V){if(this.yy.parser)this.yy.parser.parseError(F,V);else throw new Error(F)},setInput:function(w,F){return this.yy=F||this.yy||{},this._input=w,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var w=this._input[0];this.yytext+=w,this.yyleng++,this.offset++,this.match+=w,this.matched+=w;var F=w.match(/(?:\r\n?|\n).*/g);return F?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),w},unput:function(w){var F=w.length,V=w.split(/(?:\r\n?|\n)/g);this._input=w+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-F),this.offset-=F;var B=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),V.length-1&&(this.yylineno-=V.length-1);var L=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:V?(V.length===B.length?this.yylloc.first_column:0)+B[B.length-V.length].length-V[0].length:this.yylloc.first_column-F},this.options.ranges&&(this.yylloc.range=[L[0],L[0]+this.yyleng-F]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(w){this.unput(this.match.slice(w))},pastInput:function(){var w=this.matched.substr(0,this.matched.length-this.match.length);return(w.length>20?"...":"")+w.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var w=this.match;return w.length<20&&(w+=this._input.substr(0,20-w.length)),(w.substr(0,20)+(w.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var w=this.pastInput(),F=new Array(w.length+1).join("-");return w+this.upcomingInput()+`
`+F+"^"},test_match:function(w,F){var V,B,L;if(this.options.backtrack_lexer&&(L={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(L.yylloc.range=this.yylloc.range.slice(0))),B=w[0].match(/(?:\r\n?|\n).*/g),B&&(this.yylineno+=B.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:B?B[B.length-1].length-B[B.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+w[0].length},this.yytext+=w[0],this.match+=w[0],this.matches=w,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(w[0].length),this.matched+=w[0],V=this.performAction.call(this,this.yy,this,F,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),V)return V;if(this._backtrack){for(var q in L)this[q]=L[q];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var w,F,V,B;this._more||(this.yytext="",this.match="");for(var L=this._currentRules(),q=0;q<L.length;q++)if(V=this._input.match(this.rules[L[q]]),V&&(!F||V[0].length>F[0].length)){if(F=V,B=q,this.options.backtrack_lexer){if(w=this.test_match(V,L[q]),w!==!1)return w;if(this._backtrack){F=!1;continue}else return!1}else if(!this.options.flex)break}return F?(w=this.test_match(F,L[B]),w!==!1?w:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var F=this.next();return F||this.lex()},begin:function(F){this.conditionStack.push(F)},popState:function(){var F=this.conditionStack.length-1;return F>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(F){return F=this.conditionStack.length-1-Math.abs(F||0),F>=0?this.conditionStack[F]:"INITIAL"},pushState:function(F){this.begin(F)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(F,V,B,L){var q=L;switch(B){case 0:break;case 1:return this.begin("optarg"),26;break;case 2:return this.popState(),27;break;case 3:return 23;case 4:return 24;case 5:return 25;case 6:return 28;case 7:return 22;case 8:return 13;case 9:return 14;case 10:return 12;case 11:return 10;case 12:return 19;case 13:return 21;case 14:return 34;case 15:return 33;case 16:return 37;case 17:return 38;case 18:return 32;case 19:return 32;case 20:return 32;case 21:return 35;case 22:return 35;case 23:return 36;case 24:return 32;case 25:return 5}},rules:[/^(?:\s+)/,/^(?:(\\sqrt)\s*\[)/,/^(?:\])/,/^(?:(\\operatorname))/,/^(?:(\\mathrm))/,/^(?:(\\text))/,/^(?:(\\sqrt))/,/^(?:(\\frac))/,/^(?:'+\^)/,/^(?:'+)/,/^(?:\^)/,/^(?:[_])/,/^(?:(\\left))/,/^(?:(\\right))/,/^(?:(\\langle|\\rangle|\\vert|\\Vert))/,/^(?:\[|\]|\\\{|\\\}|\(|\)|\||\\\|)/,/^(?:\{)/,/^(?:\})/,/^(?:\\(infty))/,/^(?:\\(int))/,/^(?:!)/,/^(?:\\(alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|omicron|pi|rho|sigma|tau|xi|upsilon|phi|chi|psi|omega))/,/^(?:\\(Alpha|Beta|Gamma|Delta|Epsilon|Zeta|Eta|Theta|Iota|Kappa|Lambda|Mu|Nu|Omicron|Pi|Rho|Sigma|Tau|Xi|Upsilon|Phi|Chi|Psi|Omega))/,/^(?:\\[A-Za-z]+)/,/^(?:\\.|.)/,/^(?:$)/],conditions:{optarg:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],inclusive:!0},INITIAL:{rules:[0,1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],inclusive:!0}}};return H}();N.lexer=U;function K(){this.yy={}}return K.prototype=N,N.Parser=K,new K}();typeof Qh!="undefined"&&typeof r!="undefined"&&(r.parser=t,r.Parser=t.Parser,r.parse=function(){return t.parse.apply(t,arguments)},r.main=function(){},typeof e!="undefined"&&Qh.main===e&&r.main(process.argv.slice(1)))}}),YV=X2({"generated/nemeth-to-latex.jison.js"(r,e){"use strict";var t=function(){var o=function(sr,oe,te,Fe){for(te=te||{},Fe=sr.length;Fe--;te[sr[Fe]]=oe);return te},i=[1,11],n=[1,12],a=[1,13],s=[1,79],l=[1,80],c=[1,77],p=[1,78],h=[1,39],g=[1,40],m=[1,67],b=[1,68],x=[1,69],E=[1,70],S=[1,71],k=[1,72],T=[1,73],I=[1,74],P=[1,75],A=[1,76],D=[1,41],G=[1,35],N=[1,36],U=[1,37],K=[1,38],H=[1,42],w=[1,43],F=[1,44],V=[1,45],B=[1,46],L=[1,47],q=[1,48],le=[1,49],$=[1,50],ne=[1,51],ue=[1,52],de=[1,53],pe=[1,54],Y=[1,55],j=[1,56],X=[1,57],xe=[1,58],fe=[1,59],Se=[1,60],ke=[1,61],Le=[1,17],$e=[1,62],Q=[1,63],J=[1,64],ve=[1,65],Ie=[1,66],He=[5,12,13,14,18,24,25],ge=[5,11,12,13,14,15,17,18,20,21,23,24,25,27,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91],Ze=[1,84],rt=[5,11,12,13,14,15,17,18,20,21,23,24,25,27,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,86,87,88,89,91],Ee=[5,11,12,13,14,15,17,18,20,21,23,24,25,27,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91],At={trace:function(){},yy:{},symbols_:{error:2,sentence:3,group:4,EOF:5,element:6,index_element:7,modified_expression:8,radical:9,primes:10,OPEN_MODEXP:11,MODEXP_UNDER:12,MODEXP_OVER:13,CLOSE_MODEXP:14,RADICAL_INDEX:15,index_group:16,OPEN_RADICAL:17,CLOSE_RADICAL:18,level:19,LEVEL:20,BASELINE:21,frac:22,OPEN_FRAC:23,SLASH:24,CLOSE_FRAC:25,geo_token:26,GEO_TOKEN:27,number:28,subscript_head:29,atom:30,command:31,greek:32,letter:33,comma:34,period:35,space:36,operation:37,comparison:38,level_with_comparison:39,ellipsis:40,colon:41,infinity:42,integral:43,factorial:44,ampersand:45,question_mark:46,bracket:47,",":48,".":49,"[":50,"{":51,"(":52,"]":53,"}":54,")":55,LANGLE:56,RANGLE:57,PIPE:58,DOUBLE_PIPE:59,SPACE:60,COMMAND:61,GREEK:62,LETTER:63,CAPITAL_LETTER:64,"+":65,"-":66,CDOT:67,TIMES:68,"*":69,"/":70,DIV:71,PERCENT_OF:72,PERCENT:73,MEASURED_ANGLE:74,ANGLE:75,CIRCLE:76,PARALLELOGRAM:77,TO:78,TRIANGLE:79,DEGREE:80,COMPARISON:81,LEVEL_WITH_COMPARISON:82,ELLIPSIS:83,COLON:84,NUMBER:85,INFINITY:86,INTEGRAL:87,FACTORIAL:88,"&":89,PRIMES:90,"?":91,unknown:92,UNKNOWN:93,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",11:"OPEN_MODEXP",12:"MODEXP_UNDER",13:"MODEXP_OVER",14:"CLOSE_MODEXP",15:"RADICAL_INDEX",17:"OPEN_RADICAL",18:"CLOSE_RADICAL",20:"LEVEL",21:"BASELINE",23:"OPEN_FRAC",24:"SLASH",25:"CLOSE_FRAC",27:"GEO_TOKEN",48:",",49:".",50:"[",51:"{",52:"(",53:"]",54:"}",55:")",56:"LANGLE",57:"RANGLE",58:"PIPE",59:"DOUBLE_PIPE",60:"SPACE",61:"COMMAND",62:"GREEK",63:"LETTER",64:"CAPITAL_LETTER",65:"+",66:"-",67:"CDOT",68:"TIMES",69:"*",70:"/",71:"DIV",72:"PERCENT_OF",73:"PERCENT",74:"MEASURED_ANGLE",75:"ANGLE",76:"CIRCLE",77:"PARALLELOGRAM",78:"TO",79:"TRIANGLE",80:"DEGREE",81:"COMPARISON",82:"LEVEL_WITH_COMPARISON",83:"ELLIPSIS",84:"COLON",85:"NUMBER",86:"INFINITY",87:"INTEGRAL",88:"FACTORIAL",89:"&",90:"PRIMES",91:"?",93:"UNKNOWN"},productions_:[0,[3,2],[3,1],[4,2],[4,1],[6,1],[6,1],[6,2],[6,1],[8,7],[8,6],[8,5],[8,6],[8,5],[8,5],[8,4],[8,4],[8,3],[8,4],[8,4],[8,4],[8,4],[8,3],[8,3],[8,2],[9,5],[9,4],[9,4],[9,3],[9,3],[9,2],[19,1],[19,1],[22,5],[22,4],[22,4],[22,3],[26,2],[16,2],[16,1],[7,3],[7,2],[7,2],[7,3],[7,2],[7,2],[7,1],[7,1],[7,1],[29,1],[29,1],[29,1],[30,1],[30,1],[30,1],[30,1],[30,1],[30,1],[30,1],[30,1],[30,1],[30,1],[30,1],[30,1],[30,1],[30,1],[30,1],[30,1],[30,1],[34,1],[35,1],[47,1],[47,1],[47,1],[47,1],[47,1],[47,1],[47,1],[47,1],[47,1],[47,1],[36,1],[31,1],[32,1],[33,1],[33,1],[37,1],[37,1],[37,1],[37,1],[37,1],[37,1],[37,1],[37,1],[37,1],[37,1],[37,1],[37,1],[37,1],[37,1],[37,1],[37,1],[38,1],[39,1],[40,1],[41,1],[28,1],[42,1],[43,1],[44,1],[45,1],[10,1],[46,1],[92,1]],performAction:function(oe,te,Fe,me,Qe,Ne,lr){var nt=Ne.length-1;switch(Qe){case 1:return Ne[nt-1];case 2:return me.group();case 3:case 38:case 42:case 44:case 45:this.$=me.group(Ne[nt-1],Ne[nt]);break;case 4:case 39:this.$=me.group(Ne[nt]);break;case 7:this.$=me.group(Ne[nt-1],Ne[nt]);break;case 9:this.$=me.modified_expression(Ne[nt-5],Ne[nt-3],Ne[nt-1]);break;case 10:this.$=me.modified_expression(Ne[nt-4],Ne[nt-2]);break;case 11:this.$=me.modified_expression(Ne[nt-3],Ne[nt-1]);break;case 12:this.$=me.modified_expression(Ne[nt-4],me.group(),Ne[nt-1]);break;case 13:this.$=me.modified_expression(Ne[nt-3],me.group(),Ne[nt-1]);break;case 14:this.$=me.modified_expression(Ne[nt-3],me.group(),me.group());break;case 15:case 16:this.$=me.modified_expression(Ne[nt-2],me.group());break;case 17:this.$=me.modified_expression(Ne[nt-1]);break;case 18:case 19:case 22:case 23:case 24:this.$=me.modified_expression(me.group());break;case 20:case 21:me.warnOrError("Multi-level modified expressions are not supported."),this.$=me.modified_expression(me.group());break;case 25:this.$=me.radical(Ne[nt-1],Ne[nt-3]);break;case 26:this.$=me.radical(Ne[nt-1],me.group());break;case 27:this.$=me.radical(me.group(),Ne[nt-2]);break;case 28:this.$=me.radical(me.group(),me.group());break;case 29:this.$=me.radical(Ne[nt-1]);break;case 30:this.$=me.radical(me.group());break;case 31:this.$=me.level(Ne[nt]);break;case 32:this.$=me.baseline();break;case 33:this.$=me.fraction(Ne[nt-3],Ne[nt-1]);break;case 34:this.$=me.fraction(Ne[nt-2],me.group());break;case 35:this.$=me.fraction(me.group(),Ne[nt-1]);break;case 36:this.$=me.fraction(me.group(),me.group());break;case 37:this.$=me.geo_token(Ne[nt]);break;case 40:this.$=me.group(me.simple_subscript(Ne[nt-2],Ne[nt]),Ne[nt-1]);break;case 41:this.$=me.simple_subscript(Ne[nt-1],Ne[nt]);break;case 43:me.warnOrError("Illegal use of Nemeth primes"),this.$=me.group(me.simple_subscript(Ne[nt-2],Ne[nt-1]),Ne[nt]);break;case 69:this.$=me.terminal(",");break;case 70:this.$=me.terminal(".");break;case 71:this.$=me.terminal("[");break;case 72:this.$=me.terminal("\\{");break;case 73:this.$=me.terminal("(");break;case 74:this.$=me.terminal("]");break;case 75:this.$=me.terminal("\\}");break;case 76:this.$=me.terminal(")");break;case 77:this.$=me.terminal("\\langle ");break;case 78:this.$=me.terminal("\\rangle ");break;case 79:this.$=me.terminal("|");break;case 80:this.$=me.terminal("\\|");break;case 81:this.$=me.terminal(" ");break;case 82:this.$=me.command(Ne[nt].toLowerCase());break;case 83:this.$=me.terminal(me.greek(Ne[nt]));break;case 84:this.$=me.terminal(Ne[nt].toLowerCase());break;case 85:this.$=me.terminal(Ne[nt].toUpperCase());break;case 86:this.$=me.terminal("+");break;case 87:this.$=me.terminal("-");break;case 88:this.$=me.terminal("\\cdot ");break;case 89:this.$=me.terminal("\\times ");break;case 90:this.$=me.terminal("*");break;case 91:this.$=me.terminal("/");break;case 92:this.$=me.terminal("\\div ");break;case 93:this.$=me.terminal("\\%\\operatorname{of}");break;case 94:this.$=me.terminal("\\%");break;case 95:this.$=me.terminal("\\measuredangle ");break;case 96:this.$=me.terminal("\\angle ");break;case 97:this.$=me.terminal("\\bigcirc ");break;case 98:this.$=me.terminal("\\parallelogram ");break;case 99:this.$=me.terminal("\\to ");break;case 100:this.$=me.terminal("\\triangle ");break;case 101:this.$=me.terminal("\\degree ");break;case 102:this.$=me.comparison(Ne[nt].trim());break;case 103:this.$=me.level_with_comparison(Ne[nt].trim());break;case 104:this.$=me.terminal("\\ldots ");break;case 105:this.$=me.terminal(":");break;case 106:this.$=me.terminal(Ne[nt]);break;case 107:this.$=me.terminal("\\infty ");break;case 108:this.$=me.terminal("\\int ");break;case 109:this.$=me.terminal("!");break;case 110:this.$=me.terminal("\\&");break;case 111:this.$=me.primes(Ne[nt]);break;case 112:this.$=me.terminal("?");break}},table:[{3:1,4:2,5:[1,3],6:4,7:5,8:6,9:7,11:i,15:n,17:a,19:34,20:s,21:l,22:32,23:c,26:33,27:p,28:9,29:8,30:10,31:14,32:15,33:16,34:18,35:19,36:20,37:21,38:22,39:23,40:24,41:25,42:26,43:27,44:28,45:29,46:30,47:31,48:h,49:g,50:m,51:b,52:x,53:E,54:S,55:k,56:T,57:I,58:P,59:A,60:D,61:G,62:N,63:U,64:K,65:H,66:w,67:F,68:V,69:B,70:L,71:q,72:le,73:$,74:ne,75:ue,76:de,77:pe,78:Y,79:j,80:X,81:xe,82:fe,83:Se,84:ke,85:Le,86:$e,87:Q,88:J,89:ve,91:Ie},{1:[3]},{5:[1,81]},{1:[2,2]},o(He,[2,4],{6:4,7:5,8:6,9:7,29:8,28:9,30:10,31:14,32:15,33:16,34:18,35:19,36:20,37:21,38:22,39:23,40:24,41:25,42:26,43:27,44:28,45:29,46:30,47:31,22:32,26:33,19:34,4:82,11:i,15:n,17:a,20:s,21:l,23:c,27:p,48:h,49:g,50:m,51:b,52:x,53:E,54:S,55:k,56:T,57:I,58:P,59:A,60:D,61:G,62:N,63:U,64:K,65:H,66:w,67:F,68:V,69:B,70:L,71:q,72:le,73:$,74:ne,75:ue,76:de,77:pe,78:Y,79:j,80:X,81:xe,82:fe,83:Se,84:ke,85:Le,86:$e,87:Q,88:J,89:ve,91:Ie}),o(ge,[2,5]),o(ge,[2,6]),o(ge,[2,8],{10:83,90:Ze}),o(rt,[2,46],{10:85,28:86,85:Le,90:Ze}),o(ge,[2,47],{10:87,90:Ze}),o(ge,[2,48],{10:88,90:Ze}),{4:89,6:4,7:5,8:6,9:7,11:i,12:[1,91],13:[1,90],14:[1,92],15:n,17:a,19:34,20:s,21:l,22:32,23:c,26:33,27:p,28:9,29:8,30:10,31:14,32:15,33:16,34:18,35:19,36:20,37:21,38:22,39:23,40:24,41:25,42:26,43:27,44:28,45:29,46:30,47:31,48:h,49:g,50:m,51:b,52:x,53:E,54:S,55:k,56:T,57:I,58:P,59:A,60:D,61:G,62:N,63:U,64:K,65:H,66:w,67:F,68:V,69:B,70:L,71:q,72:le,73:$,74:ne,75:ue,76:de,77:pe,78:Y,79:j,80:X,81:xe,82:fe,83:Se,84:ke,85:Le,86:$e,87:Q,88:J,89:ve,91:Ie},{7:95,16:93,17:[1,94],19:34,20:s,21:l,22:32,23:c,26:33,27:p,28:9,29:8,30:10,31:14,32:15,33:16,34:18,35:19,36:20,37:21,38:22,39:23,40:24,41:25,42:26,43:27,44:28,45:29,46:30,47:31,48:h,49:g,50:m,51:b,52:x,53:E,54:S,55:k,56:T,57:I,58:P,59:A,60:D,61:G,62:N,63:U,64:K,65:H,66:w,67:F,68:V,69:B,70:L,71:q,72:le,73:$,74:ne,75:ue,76:de,77:pe,78:Y,79:j,80:X,81:xe,82:fe,83:Se,84:ke,85:Le,86:$e,87:Q,88:J,89:ve,91:Ie},{4:96,6:4,7:5,8:6,9:7,11:i,15:n,17:a,18:[1,97],19:34,20:s,21:l,22:32,23:c,26:33,27:p,28:9,29:8,30:10,31:14,32:15,33:16,34:18,35:19,36:20,37:21,38:22,39:23,40:24,41:25,42:26,43:27,44:28,45:29,46:30,47:31,48:h,49:g,50:m,51:b,52:x,53:E,54:S,55:k,56:T,57:I,58:P,59:A,60:D,61:G,62:N,63:U,64:K,65:H,66:w,67:F,68:V,69:B,70:L,71:q,72:le,73:$,74:ne,75:ue,76:de,77:pe,78:Y,79:j,80:X,81:xe,82:fe,83:Se,84:ke,85:Le,86:$e,87:Q,88:J,89:ve,91:Ie},o(Ee,[2,49]),o(Ee,[2,50]),o(Ee,[2,51]),o(Ee,[2,106]),o(Ee,[2,52]),o(Ee,[2,53]),o(Ee,[2,54]),o(Ee,[2,55]),o(Ee,[2,56]),o(Ee,[2,57]),o(Ee,[2,58]),o(Ee,[2,59]),o(Ee,[2,60]),o(Ee,[2,61]),o(Ee,[2,62]),o(Ee,[2,63]),o(Ee,[2,64]),o(Ee,[2,65]),o(Ee,[2,66]),o(Ee,[2,67]),o(Ee,[2,68]),o(Ee,[2,82]),o(Ee,[2,83]),o(Ee,[2,84]),o(Ee,[2,85]),o(Ee,[2,69]),o(Ee,[2,70]),o(Ee,[2,81]),o(Ee,[2,86]),o(Ee,[2,87]),o(Ee,[2,88]),o(Ee,[2,89]),o(Ee,[2,90]),o(Ee,[2,91]),o(Ee,[2,92]),o(Ee,[2,93]),o(Ee,[2,94]),o(Ee,[2,95]),o(Ee,[2,96]),o(Ee,[2,97]),o(Ee,[2,98]),o(Ee,[2,99]),o(Ee,[2,100]),o(Ee,[2,101]),o(Ee,[2,102]),o(Ee,[2,103]),o(Ee,[2,104]),o(Ee,[2,105]),o(Ee,[2,107]),o(Ee,[2,108]),o(Ee,[2,109]),o(Ee,[2,110]),o(Ee,[2,112]),o(Ee,[2,71]),o(Ee,[2,72]),o(Ee,[2,73]),o(Ee,[2,74]),o(Ee,[2,75]),o(Ee,[2,76]),o(Ee,[2,77]),o(Ee,[2,78]),o(Ee,[2,79]),o(Ee,[2,80]),{4:98,6:4,7:5,8:6,9:7,11:i,15:n,17:a,19:34,20:s,21:l,22:32,23:c,24:[1,99],26:33,27:p,28:9,29:8,30:10,31:14,32:15,33:16,34:18,35:19,36:20,37:21,38:22,39:23,40:24,41:25,42:26,43:27,44:28,45:29,46:30,47:31,48:h,49:g,50:m,51:b,52:x,53:E,54:S,55:k,56:T,57:I,58:P,59:A,60:D,61:G,62:N,63:U,64:K,65:H,66:w,67:F,68:V,69:B,70:L,71:q,72:le,73:$,74:ne,75:ue,76:de,77:pe,78:Y,79:j,80:X,81:xe,82:fe,83:Se,84:ke,85:Le,86:$e,87:Q,88:J,89:ve,91:Ie},{28:100,85:Le},o(Ee,[2,31]),o(Ee,[2,32]),{1:[2,1]},o(He,[2,3]),o(ge,[2,7]),o(ge,[2,111]),o(rt,[2,42],{28:101,85:Le}),o(ge,[2,41],{10:102,90:Ze}),o(ge,[2,44]),o(ge,[2,45]),{12:[1,103],13:[1,104],14:[1,105]},{12:[1,106],13:[1,107],14:[1,108]},{12:[1,110],13:[1,109],14:[1,111]},o(ge,[2,24]),{17:[1,112]},{4:113,6:4,7:5,8:6,9:7,11:i,15:n,17:a,18:[1,114],19:34,20:s,21:l,22:32,23:c,26:33,27:p,28:9,29:8,30:10,31:14,32:15,33:16,34:18,35:19,36:20,37:21,38:22,39:23,40:24,41:25,42:26,43:27,44:28,45:29,46:30,47:31,48:h,49:g,50:m,51:b,52:x,53:E,54:S,55:k,56:T,57:I,58:P,59:A,60:D,61:G,62:N,63:U,64:K,65:H,66:w,67:F,68:V,69:B,70:L,71:q,72:le,73:$,74:ne,75:ue,76:de,77:pe,78:Y,79:j,80:X,81:xe,82:fe,83:Se,84:ke,85:Le,86:$e,87:Q,88:J,89:ve,91:Ie},{7:95,16:115,17:[2,39],19:34,20:s,21:l,22:32,23:c,26:33,27:p,28:9,29:8,30:10,31:14,32:15,33:16,34:18,35:19,36:20,37:21,38:22,39:23,40:24,41:25,42:26,43:27,44:28,45:29,46:30,47:31,48:h,49:g,50:m,51:b,52:x,53:E,54:S,55:k,56:T,57:I,58:P,59:A,60:D,61:G,62:N,63:U,64:K,65:H,66:w,67:F,68:V,69:B,70:L,71:q,72:le,73:$,74:ne,75:ue,76:de,77:pe,78:Y,79:j,80:X,81:xe,82:fe,83:Se,84:ke,85:Le,86:$e,87:Q,88:J,89:ve,91:Ie},{18:[1,116]},o(Ee,[2,30]),{24:[1,117]},{4:118,6:4,7:5,8:6,9:7,11:i,15:n,17:a,19:34,20:s,21:l,22:32,23:c,25:[1,119],26:33,27:p,28:9,29:8,30:10,31:14,32:15,33:16,34:18,35:19,36:20,37:21,38:22,39:23,40:24,41:25,42:26,43:27,44:28,45:29,46:30,47:31,48:h,49:g,50:m,51:b,52:x,53:E,54:S,55:k,56:T,57:I,58:P,59:A,60:D,61:G,62:N,63:U,64:K,65:H,66:w,67:F,68:V,69:B,70:L,71:q,72:le,73:$,74:ne,75:ue,76:de,77:pe,78:Y,79:j,80:X,81:xe,82:fe,83:Se,84:ke,85:Le,86:$e,87:Q,88:J,89:ve,91:Ie},o(Ee,[2,37]),o(ge,[2,40]),o(ge,[2,43]),{4:120,6:4,7:5,8:6,9:7,11:i,13:[1,121],14:[1,122],15:n,17:a,19:34,20:s,21:l,22:32,23:c,26:33,27:p,28:9,29:8,30:10,31:14,32:15,33:16,34:18,35:19,36:20,37:21,38:22,39:23,40:24,41:25,42:26,43:27,44:28,45:29,46:30,47:31,48:h,49:g,50:m,51:b,52:x,53:E,54:S,55:k,56:T,57:I,58:P,59:A,60:D,61:G,62:N,63:U,64:K,65:H,66:w,67:F,68:V,69:B,70:L,71:q,72:le,73:$,74:ne,75:ue,76:de,77:pe,78:Y,79:j,80:X,81:xe,82:fe,83:Se,84:ke,85:Le,86:$e,87:Q,88:J,89:ve,91:Ie},{4:123,6:4,7:5,8:6,9:7,11:i,14:[1,124],15:n,17:a,19:34,20:s,21:l,22:32,23:c,26:33,27:p,28:9,29:8,30:10,31:14,32:15,33:16,34:18,35:19,36:20,37:21,38:22,39:23,40:24,41:25,42:26,43:27,44:28,45:29,46:30,47:31,48:h,49:g,50:m,51:b,52:x,53:E,54:S,55:k,56:T,57:I,58:P,59:A,60:D,61:G,62:N,63:U,64:K,65:H,66:w,67:F,68:V,69:B,70:L,71:q,72:le,73:$,74:ne,75:ue,76:de,77:pe,78:Y,79:j,80:X,81:xe,82:fe,83:Se,84:ke,85:Le,86:$e,87:Q,88:J,89:ve,91:Ie},o(ge,[2,17]),{14:[1,125]},{14:[1,126]},o(ge,[2,22]),{14:[1,127]},{14:[1,128]},o(ge,[2,23]),{4:129,6:4,7:5,8:6,9:7,11:i,15:n,17:a,18:[1,130],19:34,20:s,21:l,22:32,23:c,26:33,27:p,28:9,29:8,30:10,31:14,32:15,33:16,34:18,35:19,36:20,37:21,38:22,39:23,40:24,41:25,42:26,43:27,44:28,45:29,46:30,47:31,48:h,49:g,50:m,51:b,52:x,53:E,54:S,55:k,56:T,57:I,58:P,59:A,60:D,61:G,62:N,63:U,64:K,65:H,66:w,67:F,68:V,69:B,70:L,71:q,72:le,73:$,74:ne,75:ue,76:de,77:pe,78:Y,79:j,80:X,81:xe,82:fe,83:Se,84:ke,85:Le,86:$e,87:Q,88:J,89:ve,91:Ie},{18:[1,131]},o(Ee,[2,28]),{17:[2,38]},o(Ee,[2,29]),{4:132,6:4,7:5,8:6,9:7,11:i,15:n,17:a,19:34,20:s,21:l,22:32,23:c,25:[1,133],26:33,27:p,28:9,29:8,30:10,31:14,32:15,33:16,34:18,35:19,36:20,37:21,38:22,39:23,40:24,41:25,42:26,43:27,44:28,45:29,46:30,47:31,48:h,49:g,50:m,51:b,52:x,53:E,54:S,55:k,56:T,57:I,58:P,59:A,60:D,61:G,62:N,63:U,64:K,65:H,66:w,67:F,68:V,69:B,70:L,71:q,72:le,73:$,74:ne,75:ue,76:de,77:pe,78:Y,79:j,80:X,81:xe,82:fe,83:Se,84:ke,85:Le,86:$e,87:Q,88:J,89:ve,91:Ie},{25:[1,134]},o(Ee,[2,36]),{13:[1,135],14:[1,136]},{4:137,6:4,7:5,8:6,9:7,11:i,14:[1,138],15:n,17:a,19:34,20:s,21:l,22:32,23:c,26:33,27:p,28:9,29:8,30:10,31:14,32:15,33:16,34:18,35:19,36:20,37:21,38:22,39:23,40:24,41:25,42:26,43:27,44:28,45:29,46:30,47:31,48:h,49:g,50:m,51:b,52:x,53:E,54:S,55:k,56:T,57:I,58:P,59:A,60:D,61:G,62:N,63:U,64:K,65:H,66:w,67:F,68:V,69:B,70:L,71:q,72:le,73:$,74:ne,75:ue,76:de,77:pe,78:Y,79:j,80:X,81:xe,82:fe,83:Se,84:ke,85:Le,86:$e,87:Q,88:J,89:ve,91:Ie},o(ge,[2,16]),{14:[1,139]},o(ge,[2,15]),o(ge,[2,18]),o(ge,[2,20]),o(ge,[2,19]),o(ge,[2,21]),{18:[1,140]},o(Ee,[2,27]),o(Ee,[2,26]),{25:[1,141]},o(Ee,[2,34]),o(Ee,[2,35]),{4:142,6:4,7:5,8:6,9:7,11:i,14:[1,143],15:n,17:a,19:34,20:s,21:l,22:32,23:c,26:33,27:p,28:9,29:8,30:10,31:14,32:15,33:16,34:18,35:19,36:20,37:21,38:22,39:23,40:24,41:25,42:26,43:27,44:28,45:29,46:30,47:31,48:h,49:g,50:m,51:b,52:x,53:E,54:S,55:k,56:T,57:I,58:P,59:A,60:D,61:G,62:N,63:U,64:K,65:H,66:w,67:F,68:V,69:B,70:L,71:q,72:le,73:$,74:ne,75:ue,76:de,77:pe,78:Y,79:j,80:X,81:xe,82:fe,83:Se,84:ke,85:Le,86:$e,87:Q,88:J,89:ve,91:Ie},o(ge,[2,11]),{14:[1,144]},o(ge,[2,14]),o(ge,[2,13]),o(Ee,[2,25]),o(Ee,[2,33]),{14:[1,145]},o(ge,[2,10]),o(ge,[2,12]),o(ge,[2,9])],defaultActions:{3:[2,2],81:[2,1],115:[2,38]},parseError:function(oe,te){if(te.recoverable)this.trace(oe);else{var Fe=new Error(oe);throw Fe.hash=te,Fe}},parse:function(oe){var te=this,Fe=[0],me=[],Qe=[null],Ne=[],lr=this.table,nt="",Di=0,zr=0,xo=0,it=2,vt=1,at=Ne.slice.call(arguments,1),be=Object.create(this.lexer),Lt={yy:{}};for(var Z in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Z)&&(Lt.yy[Z]=this.yy[Z]);be.setInput(oe,Lt.yy),Lt.yy.lexer=be,Lt.yy.parser=this,typeof be.yylloc=="undefined"&&(be.yylloc={});var Ve=be.yylloc;Ne.push(Ve);var Ae=be.options&&be.options.ranges;typeof Lt.yy.parseError=="function"?this.parseError=Lt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function st(Ro){Fe.length=Fe.length-2*Ro,Qe.length=Qe.length-Ro,Ne.length=Ne.length-Ro}for(var ft=function(){var Ro;return Ro=be.lex()||vt,typeof Ro!="number"&&(Ro=te.symbols_[Ro]||Ro),Ro},lt,zt,Ot,wt,Ct,Kt,Gt={},Nr,fr,Rn,Zo;;){if(Ot=Fe[Fe.length-1],this.defaultActions[Ot]?wt=this.defaultActions[Ot]:((lt===null||typeof lt=="undefined")&&(lt=ft()),wt=lr[Ot]&&lr[Ot][lt]),typeof wt=="undefined"||!wt.length||!wt[0]){var br="";Zo=[];for(Nr in lr[Ot])this.terminals_[Nr]&&Nr>it&&Zo.push("'"+this.terminals_[Nr]+"'");be.showPosition?br="Parse error on line "+(Di+1)+`:
`+be.showPosition()+`
Expecting `+Zo.join(", ")+", got '"+(this.terminals_[lt]||lt)+"'":br="Parse error on line "+(Di+1)+": Unexpected "+(lt==vt?"end of input":"'"+(this.terminals_[lt]||lt)+"'"),this.parseError(br,{text:be.match,token:this.terminals_[lt]||lt,line:be.yylineno,loc:Ve,expected:Zo})}if(wt[0]instanceof Array&&wt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ot+", token: "+lt);switch(wt[0]){case 1:Fe.push(lt),Qe.push(be.yytext),Ne.push(be.yylloc),Fe.push(wt[1]),lt=null,zt?(lt=zt,zt=null):(zr=be.yyleng,nt=be.yytext,Di=be.yylineno,Ve=be.yylloc,xo>0&&xo--);break;case 2:if(fr=this.productions_[wt[1]][1],Gt.$=Qe[Qe.length-fr],Gt._$={first_line:Ne[Ne.length-(fr||1)].first_line,last_line:Ne[Ne.length-1].last_line,first_column:Ne[Ne.length-(fr||1)].first_column,last_column:Ne[Ne.length-1].last_column},Ae&&(Gt._$.range=[Ne[Ne.length-(fr||1)].range[0],Ne[Ne.length-1].range[1]]),Kt=this.performAction.apply(Gt,[nt,zr,Di,Lt.yy,wt[1],Qe,Ne].concat(at)),typeof Kt!="undefined")return Kt;fr&&(Fe=Fe.slice(0,-1*fr*2),Qe=Qe.slice(0,-1*fr),Ne=Ne.slice(0,-1*fr)),Fe.push(this.productions_[wt[1]][0]),Qe.push(Gt.$),Ne.push(Gt._$),Rn=lr[Fe[Fe.length-2]][Fe[Fe.length-1]],Fe.push(Rn);break;case 3:return!0}}return!0}},Tt=function(){var sr={EOF:1,parseError:function(te,Fe){if(this.yy.parser)this.yy.parser.parseError(te,Fe);else throw new Error(te)},setInput:function(oe,te){return this.yy=te||this.yy||{},this._input=oe,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var oe=this._input[0];this.yytext+=oe,this.yyleng++,this.offset++,this.match+=oe,this.matched+=oe;var te=oe.match(/(?:\r\n?|\n).*/g);return te?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),oe},unput:function(oe){var te=oe.length,Fe=oe.split(/(?:\r\n?|\n)/g);this._input=oe+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-te),this.offset-=te;var me=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Fe.length-1&&(this.yylineno-=Fe.length-1);var Qe=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Fe?(Fe.length===me.length?this.yylloc.first_column:0)+me[me.length-Fe.length].length-Fe[0].length:this.yylloc.first_column-te},this.options.ranges&&(this.yylloc.range=[Qe[0],Qe[0]+this.yyleng-te]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(oe){this.unput(this.match.slice(oe))},pastInput:function(){var oe=this.matched.substr(0,this.matched.length-this.match.length);return(oe.length>20?"...":"")+oe.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var oe=this.match;return oe.length<20&&(oe+=this._input.substr(0,20-oe.length)),(oe.substr(0,20)+(oe.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var oe=this.pastInput(),te=new Array(oe.length+1).join("-");return oe+this.upcomingInput()+`
`+te+"^"},test_match:function(oe,te){var Fe,me,Qe;if(this.options.backtrack_lexer&&(Qe={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Qe.yylloc.range=this.yylloc.range.slice(0))),me=oe[0].match(/(?:\r\n?|\n).*/g),me&&(this.yylineno+=me.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:me?me[me.length-1].length-me[me.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+oe[0].length},this.yytext+=oe[0],this.match+=oe[0],this.matches=oe,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(oe[0].length),this.matched+=oe[0],Fe=this.performAction.call(this,this.yy,this,te,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Fe)return Fe;if(this._backtrack){for(var Ne in Qe)this[Ne]=Qe[Ne];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var oe,te,Fe,me;this._more||(this.yytext="",this.match="");for(var Qe=this._currentRules(),Ne=0;Ne<Qe.length;Ne++)if(Fe=this._input.match(this.rules[Qe[Ne]]),Fe&&(!te||Fe[0].length>te[0].length)){if(te=Fe,me=Ne,this.options.backtrack_lexer){if(oe=this.test_match(Fe,Qe[Ne]),oe!==!1)return oe;if(this._backtrack){te=!1;continue}else return!1}else if(!this.options.flex)break}return te?(oe=this.test_match(te,Qe[me]),oe!==!1?oe:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var te=this.next();return te||this.lex()},begin:function(te){this.conditionStack.push(te)},popState:function(){var te=this.conditionStack.length-1;return te>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(te){return te=this.conditionStack.length-1-Math.abs(te||0),te>=0?this.conditionStack[te]:"INITIAL"},pushState:function(te){this.begin(te)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(te,Fe,me,Qe){var Ne=Qe;switch(me){case 0:return this.begin("modexp"),11;break;case 1:return 21;case 2:return this.begin("modexp"),11;break;case 3:return 12;case 4:return 13;case 5:return this.popState(),14;break;case 6:return 65;case 7:return 66;case 8:return 67;case 9:return 68;case 10:return 69;case 11:return 70;case 12:return 71;case 13:return 56;case 14:return 50;case 15:return 51;case 16:return 52;case 17:return 57;case 18:return 53;case 19:return 54;case 20:return 55;case 21:return 59;case 22:return 58;case 23:return 84;case 24:return 72;case 25:return 73;case 26:return 74;case 27:return 75;case 28:return 76;case 29:return 77;case 30:return 78;case 31:return 79;case 32:return 80;case 33:return 82;case 34:return 82;case 35:return 82;case 36:return 82;case 37:return 82;case 38:return 82;case 39:return 82;case 40:return 82;case 41:return 82;case 42:return 81;case 43:return 82;case 44:return 82;case 45:return 81;case 46:return 81;case 47:return 81;case 48:return 81;case 49:return 81;case 50:return 81;case 51:return 81;case 52:return 81;case 53:return 81;case 54:return 81;case 55:return 81;case 56:return 83;case 57:return 20;case 58:return 49;case 59:return 21;case 60:return 90;case 61:return 62;case 62:return 15;case 63:return this.begin("radical"),17;break;case 64:return this.popState(),18;break;case 65:return 18;case 66:return 87;case 67:return 89;case 68:return 88;case 69:return 61;case 70:return 61;case 71:return 27;case 72:return Fe.yytext=this.matches[1],85;break;case 73:return 23;case 74:return 24;case 75:return 25;case 76:return Fe.yytext=this.matches[1],64;break;case 77:return 63;case 78:return 86;case 79:return 91;case 80:return 48;case 81:return 49;case 82:return 60;case 83:return 5;case 84:return 93}},rules:[/^(?:"(?=[^>\]]+%))/,/^(?:")/,/^(?:"(?=[^>\]]+\]|[^>\]]+%))/,/^(?:%)/,/^(?:<)/,/^(?:\])/,/^(?:[+])/,/^(?:[-])/,/^(?:[*])/,/^(?:[@][*])/,/^(?:[@][\#])/,/^(?:[_][/])/,/^(?:[.][/])/,/^(?:[.][.][(])/,/^(?:[@][(])/,/^(?:[.][(])/,/^(?:[(])/,/^(?:[.][.][)])/,/^(?:[@][)])/,/^(?:[.][)])/,/^(?:[)])/,/^(?:[\\][\\])/,/^(?:[\\])/,/^(?:[_][3])/,/^(?:[@][0][O][F][ ]?)/,/^(?:[@][0])/,/^(?:[M][$][\[][ ])/,/^(?:[$][\[][ ])/,/^(?:[$]C[ ])/,/^(?:[$]G[ ])/,/^(?:[ ][$]O[ ])/,/^(?:[$]T[ ])/,/^(?:[^][.][*])/,/^(?:[ ][\^;]+[.]K[ ])/,/^(?:[\^;]+[=])/,/^(?:[ ][\^;]+[/][.]K[ ])/,/^(?:[ ][\^;]+[@][:][@][:][ ])/,/^(?:[ ][\^;]+["]K[:][ ])/,/^(?:[ ][\^;]+[.]1[:][ ])/,/^(?:[ ][\^;]+["]K[ ])/,/^(?:[ ][\^;]+[.]1[ ])/,/^(?:[ ][\^;]+[/][$][L][ ])/,/^(?:[ ][.]K[ ])/,/^(?:[ ][\^;]+[/]?[$][L][ ])/,/^(?:[ ][\^;]+[$]P[ ])/,/^(?:[=])/,/^(?:[ ][/][.]K[ ])/,/^(?:[ ][@][:][@][:][ ])/,/^(?:[ ][/]?[@][:][.][K][ ])/,/^(?:[ ]["]K[:][ ])/,/^(?:[ ][.]1[:][ ])/,/^(?:[ ]["]K[ ])/,/^(?:[ ][.]1[ ])/,/^(?:[/]?[@][:])/,/^(?:[ ][/]?[$][L][ ])/,/^(?:[ ][$]P[ ])/,/^(?:[ ]['][']['][ ])/,/^(?:[\^;]+)/,/^(?:[.]["])/,/^(?:["])/,/^(?:[']+)/,/^(?:[.][,]?[ABGDEZ\?\:IKLMNXOPRSTUYF\&W])/,/^(?:[.]*[<])/,/^(?:[.]*[>])/,/^(?:[.]*\])/,/^(?:[.]*\])/,/^(?:!)/,/^(?:[_]&)/,/^(?:&)/,/^(?:(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?)/,/^(?:(ARG|DET|EXP|INF|LIM|LN|LOG|MAX|MIN|MOD|SUP))/,/^(?:(TOKEN)[ ]?)/,/^(?:#?(\d*\.?\d+))/,/^(?:[,]*[?])/,/^(?:[,]*[/])/,/^(?:[,]*#)/,/^(?:[,]([A-Z]))/,/^(?:[A-Z])/,/^(?:[,][=])/,/^(?:[_][8])/,/^(?:[,][ ]?)/,/^(?:[.])/,/^(?:[ ])/,/^(?:$)/,/^(?:.)/],conditions:{radical:{rules:[0,1,2,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],inclusive:!0},modexp:{rules:[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],inclusive:!0},INITIAL:{rules:[2,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],inclusive:!0}}};return sr}();At.lexer=Tt;function xt(){this.yy={}}return xt.prototype=At,At.Parser=xt,new xt}();typeof Qh!="undefined"&&typeof r!="undefined"&&(r.parser=t,r.Parser=t.Parser,r.parse=function(){return t.parse.apply(t,arguments)},r.main=function(){},typeof e!="undefined"&&Qh.main===e&&r.main(process.argv.slice(1)))}}),XV=X2({"generated/ueb-to-latex.jison.js"(r,e){"use strict";var t=function(){var o=function(xo,it,vt,at){for(vt=vt||{},at=xo.length;at--;vt[xo[at]]=it);return vt},i=[1,15],n=[1,16],a=[1,17],s=[1,37],l=[1,38],c=[1,39],p=[1,40],h=[1,45],g=[1,14],m=[1,49],b=[1,50],x=[1,41],E=[1,42],S=[1,43],k=[1,59],T=[1,44],I=[1,46],P=[1,47],A=[1,48],D=[1,57],G=[1,58],N=[1,60],U=[1,61],K=[1,62],H=[1,63],w=[1,64],F=[1,65],V=[1,66],B=[1,67],L=[1,68],q=[1,69],le=[1,70],$=[1,71],ne=[1,72],ue=[1,73],de=[1,74],pe=[1,75],Y=[1,76],j=[1,77],X=[1,78],xe=[1,79],fe=[1,80],Se=[1,81],ke=[1,82],Le=[1,83],$e=[1,84],Q=[1,85],J=[1,86],ve=[1,87],Ie=[1,88],He=[1,89],ge=[1,51],Ze=[1,52],rt=[1,53],Ee=[1,54],At=[1,55],Tt=[1,90],xt=[1,56],sr=[5,14,18,19,32,55,56,57],oe=[5,10,13,14,15,18,19,32,55,56,57],te=[5,10,13,14,15,17,18,19,21,23,24,26,31,32,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101],Fe=[1,98],me=[1,99],Qe=[1,100],Ne=[2,40],lr=[10,13,15,17,21,23,24,26,31,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101],nt={trace:function(){},yy:{},symbols_:{error:2,sentence:3,group:4,EOF:5,expression_group:6,delimited_expression:7,level:8,radical:9,LEVEL:10,basic_token:11,bracketed_expression:12,RADICAL_WITH_INDEX:13,CLOSE_RADICAL:14,RADICAL:15,frac:16,OPEN_FRAC:17,OVER:18,CLOSE_FRAC:19,simple_frac:20,NUMBER:21,NUMBER_FRAC_DENOMINATOR:22,NUMBER_FRAC_NUMERATOR_BAD:23,NUMBER_FRAC_DENOMINATOR_BAD:24,geo_token:25,GEO_TOKEN:26,number:27,atom:28,lbracket:29,rbracket:30,OPEN_GROUP:31,CLOSE_GROUP:32,command:33,greek:34,letter:35,comma:36,period:37,colon:38,infinity:39,integral:40,factorial:41,ampersand:42,question_mark:43,bracket:44,space:45,operation:46,comparison:47,ellipsis:48,primes:49,",":50,".":51,"[":52,"{":53,"(":54,"]":55,"}":56,")":57,SPACE:58,COMMAND:59,GREEK:60,CAPITAL_LETTER:61,LETTER:62,PIPE:63,DOUBLE_PIPE:64,"+":65,"-":66,CDOT:67,TIMES:68,"*":69,DIV:70,SLASH:71,PERCENT_OF:72,PERCENT:73,TO:74,ANGLE:75,MEASURED_ANGLE:76,DEGREE:77,CIRCLE:78,PARALLELOGRAM:79,TRIANGLE:80,"=":81,NEQ:82,"<":83,">":84,LEQ:85,APPROX:86,GEQ:87,SIM:88,NSIM:89,PARALLEL:90,PERPENDICULAR:91,CONG:92,NCONG:93,ELLIPSIS:94,COLON:95,INFINITY:96,INTEGRAL:97,FACTORIAL:98,"&":99,PRIMES:100,"?":101,unknown:102,UNKNOWN:103,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",10:"LEVEL",13:"RADICAL_WITH_INDEX",14:"CLOSE_RADICAL",15:"RADICAL",17:"OPEN_FRAC",18:"OVER",19:"CLOSE_FRAC",21:"NUMBER",22:"NUMBER_FRAC_DENOMINATOR",23:"NUMBER_FRAC_NUMERATOR_BAD",24:"NUMBER_FRAC_DENOMINATOR_BAD",26:"GEO_TOKEN",31:"OPEN_GROUP",32:"CLOSE_GROUP",50:",",51:".",52:"[",53:"{",54:"(",55:"]",56:"}",57:")",58:"SPACE",59:"COMMAND",60:"GREEK",61:"CAPITAL_LETTER",62:"LETTER",63:"PIPE",64:"DOUBLE_PIPE",65:"+",66:"-",67:"CDOT",68:"TIMES",69:"*",70:"DIV",71:"SLASH",72:"PERCENT_OF",73:"PERCENT",74:"TO",75:"ANGLE",76:"MEASURED_ANGLE",77:"DEGREE",78:"CIRCLE",79:"PARALLELOGRAM",80:"TRIANGLE",81:"=",82:"NEQ",83:"<",84:">",85:"LEQ",86:"APPROX",87:"GEQ",88:"SIM",89:"NSIM",90:"PARALLEL",91:"PERPENDICULAR",92:"CONG",93:"NCONG",94:"ELLIPSIS",95:"COLON",96:"INFINITY",97:"INTEGRAL",98:"FACTORIAL",99:"&",100:"PRIMES",101:"?",103:"UNKNOWN"},productions_:[0,[3,2],[3,1],[4,3],[4,2],[4,1],[4,2],[4,1],[7,1],[7,1],[8,2],[8,2],[8,2],[9,4],[9,3],[9,3],[9,2],[9,4],[9,3],[9,2],[16,5],[16,4],[16,4],[16,3],[16,2],[20,2],[20,1],[20,1],[25,2],[11,1],[11,1],[11,1],[6,2],[6,2],[6,1],[6,1],[12,3],[12,2],[12,3],[12,2],[27,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[36,1],[37,1],[29,1],[29,1],[29,1],[30,1],[30,1],[30,1],[45,1],[33,1],[34,1],[35,1],[35,1],[44,1],[44,1],[46,1],[46,1],[46,1],[46,1],[46,1],[46,1],[46,1],[46,1],[46,1],[46,1],[46,1],[46,1],[46,1],[46,1],[46,1],[46,1],[47,1],[47,1],[47,1],[47,1],[47,1],[47,1],[47,1],[47,1],[47,1],[47,1],[47,1],[47,1],[47,1],[48,1],[38,1],[39,1],[40,1],[41,1],[42,1],[49,1],[43,1],[102,1]],performAction:function(it,vt,at,be,Lt,Z,Ve){var Ae=Z.length-1;switch(Lt){case 1:return Z[Ae-1];case 2:return be.group();case 3:case 36:this.$=be.group(Z[Ae-2],Z[Ae-1],Z[Ae]);break;case 4:case 6:case 32:case 33:case 37:this.$=be.group(Z[Ae-1],Z[Ae]);break;case 5:case 7:case 34:case 35:this.$=be.group(Z[Ae]);break;case 10:case 11:case 12:this.$=be.basic_level(Z[Ae-1],be.group(Z[Ae]));break;case 13:case 17:this.$=be.radical(Z[Ae-1],be.group(Z[Ae-2]));break;case 14:case 15:this.$=be.radical(be.group(),be.group(Z[Ae-1]));break;case 16:this.$=be.radical(be.group(),be.group());break;case 18:this.$=be.radical(Z[Ae-1]);break;case 19:this.$=be.radical(be.group());break;case 20:this.$=be.fraction(Z[Ae-3],Z[Ae-1]);break;case 21:this.$=be.fraction(Z[Ae-2],be.group());break;case 22:this.$=be.fraction(be.group(),Z[Ae-1]);break;case 23:case 24:this.$=be.fraction(be.group(),be.group());break;case 25:this.$=be.fraction(be.group(be.terminal(be.to_number(Z[Ae-1]))),be.group(be.terminal(be.to_number(Z[Ae]))));break;case 26:this.$=be.fraction(be.group(be.terminal(be.to_number(Z[Ae]))),be.group());break;case 27:this.$=be.fraction(be.group(),be.group(be.terminal(be.to_number(Z[$01]))));break;case 28:this.$=be.geo_token(Z[Ae]);break;case 38:this.$=be.group(Z[Ae-1]);break;case 39:this.$=be.group();break;case 40:this.$=be.terminal(be.to_number(Z[Ae]));break;case 60:this.$=be.terminal(",");break;case 61:this.$=be.terminal(".");break;case 62:this.$=be.terminal("[");break;case 63:this.$=be.terminal("\\{");break;case 64:this.$=be.terminal("(");break;case 65:this.$=be.terminal("]");break;case 66:this.$=be.terminal("\\}");break;case 67:this.$=be.terminal(")");break;case 68:this.$=be.terminal(" ");break;case 69:this.$=be.command("\\"+Z[Ae].trim().toLowerCase());break;case 70:this.$=be.terminal(be.greek(Z[Ae]));break;case 71:this.$=be.terminal(Z[Ae].toUpperCase());break;case 72:this.$=be.terminal(Z[Ae].toLowerCase());break;case 73:this.$=be.terminal("|");break;case 74:this.$=be.terminal("\\|");break;case 75:this.$=be.terminal("+");break;case 76:this.$=be.terminal("-");break;case 77:this.$=be.terminal("\\cdot ");break;case 78:this.$=be.terminal("\\times ");break;case 79:this.$=be.terminal("*");break;case 80:this.$=be.terminal("\\div ");break;case 81:this.$=be.terminal("/");break;case 82:this.$=be.terminal("\\%\\operatorname{of}");break;case 83:this.$=be.terminal("\\%");break;case 84:this.$=be.terminal("\\to ");break;case 85:this.$=be.terminal("\\angle ");break;case 86:this.$=be.terminal("\\measuredangle ");break;case 87:this.$=be.terminal("\\degree ");break;case 88:this.$=be.terminal("\\bigcirc ");break;case 89:this.$=be.terminal("\\parallelogram ");break;case 90:this.$=be.terminal("\\triangle ");break;case 91:this.$=be.terminal("=");break;case 92:this.$=be.terminal("\\neq ");break;case 93:this.$=be.terminal("<");break;case 94:this.$=be.terminal(">");break;case 95:this.$=be.terminal("\\leq ");break;case 96:this.$=be.terminal("\\approx ");break;case 97:this.$=be.terminal("\\geq ");break;case 98:this.$=be.terminal("\\sim ");break;case 99:this.$=be.terminal("\\nsim ");break;case 100:this.$=be.terminal("\\parallel ");break;case 101:this.$=be.terminal("\\perp ");break;case 102:this.$=be.terminal("\\cong ");break;case 103:this.$=be.terminal("\\ncong ");break;case 104:this.$=be.terminal("\\ldots ");break;case 105:this.$=be.terminal(":");break;case 106:this.$=be.terminal("\\infty ");break;case 107:this.$=be.terminal("\\int ");break;case 108:this.$=be.terminal("!");break;case 109:this.$=be.terminal("\\&");break;case 110:this.$=be.primes(Z[Ae]);break;case 111:this.$=be.terminal("?");break}},table:[{3:1,4:2,5:[1,3],6:4,7:5,8:8,9:9,10:i,11:6,12:7,13:n,15:a,16:11,17:s,20:12,21:l,23:c,24:p,25:20,26:h,27:18,28:10,29:13,31:g,33:19,34:21,35:22,36:23,37:24,38:25,39:26,40:27,41:28,42:29,43:30,44:31,45:32,46:33,47:34,48:35,49:36,50:m,51:b,52:x,53:E,54:S,58:k,59:T,60:I,61:P,62:A,63:D,64:G,65:N,66:U,67:K,68:H,69:w,70:F,71:V,72:B,73:L,74:q,75:le,76:$,77:ne,78:ue,79:de,80:pe,81:Y,82:j,83:X,84:xe,85:fe,86:Se,87:ke,88:Le,89:$e,90:Q,91:J,92:ve,93:Ie,94:He,95:ge,96:Ze,97:rt,98:Ee,99:At,100:Tt,101:xt},{1:[3]},{5:[1,91]},{1:[2,2]},o(sr,[2,5],{8:8,9:9,7:92,10:i,13:n,15:a}),o(sr,[2,7],{6:4,7:5,11:6,12:7,8:8,9:9,28:10,16:11,20:12,29:13,27:18,33:19,25:20,34:21,35:22,36:23,37:24,38:25,39:26,40:27,41:28,42:29,43:30,44:31,45:32,46:33,47:34,48:35,49:36,4:93,10:i,13:n,15:a,17:s,21:l,23:c,24:p,26:h,31:g,50:m,51:b,52:x,53:E,54:S,58:k,59:T,60:I,61:P,62:A,63:D,64:G,65:N,66:U,67:K,68:H,69:w,70:F,71:V,72:B,73:L,74:q,75:le,76:$,77:ne,78:ue,79:de,80:pe,81:Y,82:j,83:X,84:xe,85:fe,86:Se,87:ke,88:Le,89:$e,90:Q,91:J,92:ve,93:Ie,94:He,95:ge,96:Ze,97:rt,98:Ee,99:At,100:Tt,101:xt}),o(oe,[2,34],{11:6,12:7,28:10,16:11,20:12,29:13,27:18,33:19,25:20,34:21,35:22,36:23,37:24,38:25,39:26,40:27,41:28,42:29,43:30,44:31,45:32,46:33,47:34,48:35,49:36,6:94,17:s,21:l,23:c,24:p,26:h,31:g,50:m,51:b,52:x,53:E,54:S,58:k,59:T,60:I,61:P,62:A,63:D,64:G,65:N,66:U,67:K,68:H,69:w,70:F,71:V,72:B,73:L,74:q,75:le,76:$,77:ne,78:ue,79:de,80:pe,81:Y,82:j,83:X,84:xe,85:fe,86:Se,87:ke,88:Le,89:$e,90:Q,91:J,92:ve,93:Ie,94:He,95:ge,96:Ze,97:rt,98:Ee,99:At,100:Tt,101:xt}),o(oe,[2,35],{11:6,12:7,28:10,16:11,20:12,29:13,27:18,33:19,25:20,34:21,35:22,36:23,37:24,38:25,39:26,40:27,41:28,42:29,43:30,44:31,45:32,46:33,47:34,48:35,49:36,6:95,17:s,21:l,23:c,24:p,26:h,31:g,50:m,51:b,52:x,53:E,54:S,58:k,59:T,60:I,61:P,62:A,63:D,64:G,65:N,66:U,67:K,68:H,69:w,70:F,71:V,72:B,73:L,74:q,75:le,76:$,77:ne,78:ue,79:de,80:pe,81:Y,82:j,83:X,84:xe,85:fe,86:Se,87:ke,88:Le,89:$e,90:Q,91:J,92:ve,93:Ie,94:He,95:ge,96:Ze,97:rt,98:Ee,99:At,100:Tt,101:xt}),o(te,[2,8]),o(te,[2,9]),o(te,[2,29]),o(te,[2,30]),o(te,[2,31]),{4:96,6:4,7:5,8:8,9:9,10:i,11:6,12:7,13:n,15:a,16:11,17:s,20:12,21:l,23:c,24:p,25:20,26:h,27:18,28:10,29:13,30:97,31:g,33:19,34:21,35:22,36:23,37:24,38:25,39:26,40:27,41:28,42:29,43:30,44:31,45:32,46:33,47:34,48:35,49:36,50:m,51:b,52:x,53:E,54:S,55:Fe,56:me,57:Qe,58:k,59:T,60:I,61:P,62:A,63:D,64:G,65:N,66:U,67:K,68:H,69:w,70:F,71:V,72:B,73:L,74:q,75:le,76:$,77:ne,78:ue,79:de,80:pe,81:Y,82:j,83:X,84:xe,85:fe,86:Se,87:ke,88:Le,89:$e,90:Q,91:J,92:ve,93:Ie,94:He,95:ge,96:Ze,97:rt,98:Ee,99:At,100:Tt,101:xt},{4:101,6:4,7:5,8:8,9:9,10:i,11:6,12:7,13:n,15:a,16:11,17:s,20:12,21:l,23:c,24:p,25:20,26:h,27:18,28:10,29:13,31:g,32:[1,102],33:19,34:21,35:22,36:23,37:24,38:25,39:26,40:27,41:28,42:29,43:30,44:31,45:32,46:33,47:34,48:35,49:36,50:m,51:b,52:x,53:E,54:S,58:k,59:T,60:I,61:P,62:A,63:D,64:G,65:N,66:U,67:K,68:H,69:w,70:F,71:V,72:B,73:L,74:q,75:le,76:$,77:ne,78:ue,79:de,80:pe,81:Y,82:j,83:X,84:xe,85:fe,86:Se,87:ke,88:Le,89:$e,90:Q,91:J,92:ve,93:Ie,94:He,95:ge,96:Ze,97:rt,98:Ee,99:At,100:Tt,101:xt},{9:105,11:103,12:104,13:n,15:a,16:11,17:s,20:12,21:l,23:c,24:p,25:20,26:h,27:18,28:10,29:13,31:g,33:19,34:21,35:22,36:23,37:24,38:25,39:26,40:27,41:28,42:29,43:30,44:31,45:32,46:33,47:34,48:35,49:36,50:m,51:b,52:x,53:E,54:S,58:k,59:T,60:I,61:P,62:A,63:D,64:G,65:N,66:U,67:K,68:H,69:w,70:F,71:V,72:B,73:L,74:q,75:le,76:$,77:ne,78:ue,79:de,80:pe,81:Y,82:j,83:X,84:xe,85:fe,86:Se,87:ke,88:Le,89:$e,90:Q,91:J,92:ve,93:Ie,94:He,95:ge,96:Ze,97:rt,98:Ee,99:At,100:Tt,101:xt},{11:106,12:107,14:[1,108],16:11,17:s,20:12,21:l,23:c,24:p,25:20,26:h,27:18,28:10,29:13,31:g,33:19,34:21,35:22,36:23,37:24,38:25,39:26,40:27,41:28,42:29,43:30,44:31,45:32,46:33,47:34,48:35,49:36,50:m,51:b,52:x,53:E,54:S,58:k,59:T,60:I,61:P,62:A,63:D,64:G,65:N,66:U,67:K,68:H,69:w,70:F,71:V,72:B,73:L,74:q,75:le,76:$,77:ne,78:ue,79:de,80:pe,81:Y,82:j,83:X,84:xe,85:fe,86:Se,87:ke,88:Le,89:$e,90:Q,91:J,92:ve,93:Ie,94:He,95:ge,96:Ze,97:rt,98:Ee,99:At,100:Tt,101:xt},{4:109,6:4,7:5,8:8,9:9,10:i,11:6,12:7,13:n,14:[1,110],15:a,16:11,17:s,20:12,21:l,23:c,24:p,25:20,26:h,27:18,28:10,29:13,31:g,33:19,34:21,35:22,36:23,37:24,38:25,39:26,40:27,41:28,42:29,43:30,44:31,45:32,46:33,47:34,48:35,49:36,50:m,51:b,52:x,53:E,54:S,58:k,59:T,60:I,61:P,62:A,63:D,64:G,65:N,66:U,67:K,68:H,69:w,70:F,71:V,72:B,73:L,74:q,75:le,76:$,77:ne,78:ue,79:de,80:pe,81:Y,82:j,83:X,84:xe,85:fe,86:Se,87:ke,88:Le,89:$e,90:Q,91:J,92:ve,93:Ie,94:He,95:ge,96:Ze,97:rt,98:Ee,99:At,100:Tt,101:xt},o(te,[2,41]),o(te,[2,42]),o(te,[2,43]),o(te,[2,44]),o(te,[2,45]),o(te,[2,46]),o(te,[2,47]),o(te,[2,48]),o(te,[2,49]),o(te,[2,50]),o(te,[2,51]),o(te,[2,52]),o(te,[2,53]),o(te,[2,54]),o(te,[2,55]),o(te,[2,56]),o(te,[2,57]),o(te,[2,58]),o(te,[2,59]),{4:111,6:4,7:5,8:8,9:9,10:i,11:6,12:7,13:n,15:a,16:11,17:s,18:[1,112],19:[1,113],20:12,21:l,23:c,24:p,25:20,26:h,27:18,28:10,29:13,31:g,33:19,34:21,35:22,36:23,37:24,38:25,39:26,40:27,41:28,42:29,43:30,44:31,45:32,46:33,47:34,48:35,49:36,50:m,51:b,52:x,53:E,54:S,58:k,59:T,60:I,61:P,62:A,63:D,64:G,65:N,66:U,67:K,68:H,69:w,70:F,71:V,72:B,73:L,74:q,75:le,76:$,77:ne,78:ue,79:de,80:pe,81:Y,82:j,83:X,84:xe,85:fe,86:Se,87:ke,88:Le,89:$e,90:Q,91:J,92:ve,93:Ie,94:He,95:ge,96:Ze,97:rt,98:Ee,99:At,100:Tt,101:xt},o(te,Ne,{22:[1,114]}),o(te,[2,26]),o(te,[2,27]),o(lr,[2,62]),o(lr,[2,63]),o(lr,[2,64]),o(te,[2,69]),{21:[1,116],27:115},o(te,[2,70]),o(te,[2,71]),o(te,[2,72]),o(te,[2,60]),o(te,[2,61]),o(te,[2,105]),o(te,[2,106]),o(te,[2,107]),o(te,[2,108]),o(te,[2,109]),o(te,[2,111]),o(te,[2,73]),o(te,[2,74]),o(te,[2,68]),o(te,[2,75]),o(te,[2,76]),o(te,[2,77]),o(te,[2,78]),o(te,[2,79]),o(te,[2,80]),o(te,[2,81]),o(te,[2,82]),o(te,[2,83]),o(te,[2,84]),o(te,[2,85]),o(te,[2,86]),o(te,[2,87]),o(te,[2,88]),o(te,[2,89]),o(te,[2,90]),o(te,[2,91]),o(te,[2,92]),o(te,[2,93]),o(te,[2,94]),o(te,[2,95]),o(te,[2,96]),o(te,[2,97]),o(te,[2,98]),o(te,[2,99]),o(te,[2,100]),o(te,[2,101]),o(te,[2,102]),o(te,[2,103]),o(te,[2,104]),o(te,[2,110]),{1:[2,1]},o(sr,[2,4],{6:4,7:5,11:6,12:7,8:8,9:9,28:10,16:11,20:12,29:13,27:18,33:19,25:20,34:21,35:22,36:23,37:24,38:25,39:26,40:27,41:28,42:29,43:30,44:31,45:32,46:33,47:34,48:35,49:36,4:117,10:i,13:n,15:a,17:s,21:l,23:c,24:p,26:h,31:g,50:m,51:b,52:x,53:E,54:S,58:k,59:T,60:I,61:P,62:A,63:D,64:G,65:N,66:U,67:K,68:H,69:w,70:F,71:V,72:B,73:L,74:q,75:le,76:$,77:ne,78:ue,79:de,80:pe,81:Y,82:j,83:X,84:xe,85:fe,86:Se,87:ke,88:Le,89:$e,90:Q,91:J,92:ve,93:Ie,94:He,95:ge,96:Ze,97:rt,98:Ee,99:At,100:Tt,101:xt}),o(sr,[2,6]),o(oe,[2,32]),o(oe,[2,33]),{30:118,55:Fe,56:me,57:Qe},o(te,[2,37]),o(te,[2,65]),o(te,[2,66]),o(te,[2,67]),{32:[1,119]},o(te,[2,39]),o(te,[2,10]),o(te,[2,11]),o(te,[2,12]),{4:120,6:4,7:5,8:8,9:9,10:i,11:6,12:7,13:n,14:[1,121],15:a,16:11,17:s,20:12,21:l,23:c,24:p,25:20,26:h,27:18,28:10,29:13,31:g,33:19,34:21,35:22,36:23,37:24,38:25,39:26,40:27,41:28,42:29,43:30,44:31,45:32,46:33,47:34,48:35,49:36,50:m,51:b,52:x,53:E,54:S,58:k,59:T,60:I,61:P,62:A,63:D,64:G,65:N,66:U,67:K,68:H,69:w,70:F,71:V,72:B,73:L,74:q,75:le,76:$,77:ne,78:ue,79:de,80:pe,81:Y,82:j,83:X,84:xe,85:fe,86:Se,87:ke,88:Le,89:$e,90:Q,91:J,92:ve,93:Ie,94:He,95:ge,96:Ze,97:rt,98:Ee,99:At,100:Tt,101:xt},{4:123,6:4,7:5,8:8,9:9,10:i,11:6,12:7,13:n,14:[1,122],15:a,16:11,17:s,20:12,21:l,23:c,24:p,25:20,26:h,27:18,28:10,29:13,31:g,33:19,34:21,35:22,36:23,37:24,38:25,39:26,40:27,41:28,42:29,43:30,44:31,45:32,46:33,47:34,48:35,49:36,50:m,51:b,52:x,53:E,54:S,58:k,59:T,60:I,61:P,62:A,63:D,64:G,65:N,66:U,67:K,68:H,69:w,70:F,71:V,72:B,73:L,74:q,75:le,76:$,77:ne,78:ue,79:de,80:pe,81:Y,82:j,83:X,84:xe,85:fe,86:Se,87:ke,88:Le,89:$e,90:Q,91:J,92:ve,93:Ie,94:He,95:ge,96:Ze,97:rt,98:Ee,99:At,100:Tt,101:xt},o(te,[2,16]),{14:[1,124]},o(te,[2,19]),{18:[1,125]},{4:126,6:4,7:5,8:8,9:9,10:i,11:6,12:7,13:n,15:a,16:11,17:s,19:[1,127],20:12,21:l,23:c,24:p,25:20,26:h,27:18,28:10,29:13,31:g,33:19,34:21,35:22,36:23,37:24,38:25,39:26,40:27,41:28,42:29,43:30,44:31,45:32,46:33,47:34,48:35,49:36,50:m,51:b,52:x,53:E,54:S,58:k,59:T,60:I,61:P,62:A,63:D,64:G,65:N,66:U,67:K,68:H,69:w,70:F,71:V,72:B,73:L,74:q,75:le,76:$,77:ne,78:ue,79:de,80:pe,81:Y,82:j,83:X,84:xe,85:fe,86:Se,87:ke,88:Le,89:$e,90:Q,91:J,92:ve,93:Ie,94:He,95:ge,96:Ze,97:rt,98:Ee,99:At,100:Tt,101:xt},o(te,[2,24]),o(te,[2,25]),o(te,[2,28]),o(te,Ne),o(sr,[2,3]),o(te,[2,36]),o(te,[2,38]),{14:[1,128]},o(te,[2,15]),o(te,[2,14]),{14:[1,129]},o(te,[2,18]),{4:130,6:4,7:5,8:8,9:9,10:i,11:6,12:7,13:n,15:a,16:11,17:s,19:[1,131],20:12,21:l,23:c,24:p,25:20,26:h,27:18,28:10,29:13,31:g,33:19,34:21,35:22,36:23,37:24,38:25,39:26,40:27,41:28,42:29,43:30,44:31,45:32,46:33,47:34,48:35,49:36,50:m,51:b,52:x,53:E,54:S,58:k,59:T,60:I,61:P,62:A,63:D,64:G,65:N,66:U,67:K,68:H,69:w,70:F,71:V,72:B,73:L,74:q,75:le,76:$,77:ne,78:ue,79:de,80:pe,81:Y,82:j,83:X,84:xe,85:fe,86:Se,87:ke,88:Le,89:$e,90:Q,91:J,92:ve,93:Ie,94:He,95:ge,96:Ze,97:rt,98:Ee,99:At,100:Tt,101:xt},{19:[1,132]},o(te,[2,23]),o(te,[2,13]),o(te,[2,17]),{19:[1,133]},o(te,[2,21]),o(te,[2,22]),o(te,[2,20])],defaultActions:{3:[2,2],91:[2,1]},parseError:function(it,vt){if(vt.recoverable)this.trace(it);else{var at=new Error(it);throw at.hash=vt,at}},parse:function(it){var vt=this,at=[0],be=[],Lt=[null],Z=[],Ve=this.table,Ae="",st=0,ft=0,lt=0,zt=2,Ot=1,wt=Z.slice.call(arguments,1),Ct=Object.create(this.lexer),Kt={yy:{}};for(var Gt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Gt)&&(Kt.yy[Gt]=this.yy[Gt]);Ct.setInput(it,Kt.yy),Kt.yy.lexer=Ct,Kt.yy.parser=this,typeof Ct.yylloc=="undefined"&&(Ct.yylloc={});var Nr=Ct.yylloc;Z.push(Nr);var fr=Ct.options&&Ct.options.ranges;typeof Kt.yy.parseError=="function"?this.parseError=Kt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Rn(da){at.length=at.length-2*da,Lt.length=Lt.length-da,Z.length=Z.length-da}for(var Zo=function(){var da;return da=Ct.lex()||Ot,typeof da!="number"&&(da=vt.symbols_[da]||da),da},br,Ro,ca,gn,rN,Ql,go={},$i,vo,Eb,$s;;){if(ca=at[at.length-1],this.defaultActions[ca]?gn=this.defaultActions[ca]:((br===null||typeof br=="undefined")&&(br=Zo()),gn=Ve[ca]&&Ve[ca][br]),typeof gn=="undefined"||!gn.length||!gn[0]){var ec="";$s=[];for($i in Ve[ca])this.terminals_[$i]&&$i>zt&&$s.push("'"+this.terminals_[$i]+"'");Ct.showPosition?ec="Parse error on line "+(st+1)+`:
`+Ct.showPosition()+`
Expecting `+$s.join(", ")+", got '"+(this.terminals_[br]||br)+"'":ec="Parse error on line "+(st+1)+": Unexpected "+(br==Ot?"end of input":"'"+(this.terminals_[br]||br)+"'"),this.parseError(ec,{text:Ct.match,token:this.terminals_[br]||br,line:Ct.yylineno,loc:Nr,expected:$s})}if(gn[0]instanceof Array&&gn.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ca+", token: "+br);switch(gn[0]){case 1:at.push(br),Lt.push(Ct.yytext),Z.push(Ct.yylloc),at.push(gn[1]),br=null,Ro?(br=Ro,Ro=null):(ft=Ct.yyleng,Ae=Ct.yytext,st=Ct.yylineno,Nr=Ct.yylloc,lt>0&&lt--);break;case 2:if(vo=this.productions_[gn[1]][1],go.$=Lt[Lt.length-vo],go._$={first_line:Z[Z.length-(vo||1)].first_line,last_line:Z[Z.length-1].last_line,first_column:Z[Z.length-(vo||1)].first_column,last_column:Z[Z.length-1].last_column},fr&&(go._$.range=[Z[Z.length-(vo||1)].range[0],Z[Z.length-1].range[1]]),Ql=this.performAction.apply(go,[Ae,ft,st,Kt.yy,gn[1],Lt,Z].concat(wt)),typeof Ql!="undefined")return Ql;vo&&(at=at.slice(0,-1*vo*2),Lt=Lt.slice(0,-1*vo),Z=Z.slice(0,-1*vo)),at.push(this.productions_[gn[1]][0]),Lt.push(go.$),Z.push(go._$),Eb=Ve[at[at.length-2]][at[at.length-1]],at.push(Eb);break;case 3:return!0}}return!0}},Di=function(){var xo={EOF:1,parseError:function(vt,at){if(this.yy.parser)this.yy.parser.parseError(vt,at);else throw new Error(vt)},setInput:function(it,vt){return this.yy=vt||this.yy||{},this._input=it,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var it=this._input[0];this.yytext+=it,this.yyleng++,this.offset++,this.match+=it,this.matched+=it;var vt=it.match(/(?:\r\n?|\n).*/g);return vt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),it},unput:function(it){var vt=it.length,at=it.split(/(?:\r\n?|\n)/g);this._input=it+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-vt),this.offset-=vt;var be=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),at.length-1&&(this.yylineno-=at.length-1);var Lt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:at?(at.length===be.length?this.yylloc.first_column:0)+be[be.length-at.length].length-at[0].length:this.yylloc.first_column-vt},this.options.ranges&&(this.yylloc.range=[Lt[0],Lt[0]+this.yyleng-vt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(it){this.unput(this.match.slice(it))},pastInput:function(){var it=this.matched.substr(0,this.matched.length-this.match.length);return(it.length>20?"...":"")+it.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var it=this.match;return it.length<20&&(it+=this._input.substr(0,20-it.length)),(it.substr(0,20)+(it.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var it=this.pastInput(),vt=new Array(it.length+1).join("-");return it+this.upcomingInput()+`
`+vt+"^"},test_match:function(it,vt){var at,be,Lt;if(this.options.backtrack_lexer&&(Lt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Lt.yylloc.range=this.yylloc.range.slice(0))),be=it[0].match(/(?:\r\n?|\n).*/g),be&&(this.yylineno+=be.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:be?be[be.length-1].length-be[be.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+it[0].length},this.yytext+=it[0],this.match+=it[0],this.matches=it,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(it[0].length),this.matched+=it[0],at=this.performAction.call(this,this.yy,this,vt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),at)return at;if(this._backtrack){for(var Z in Lt)this[Z]=Lt[Z];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var it,vt,at,be;this._more||(this.yytext="",this.match="");for(var Lt=this._currentRules(),Z=0;Z<Lt.length;Z++)if(at=this._input.match(this.rules[Lt[Z]]),at&&(!vt||at[0].length>vt[0].length)){if(vt=at,be=Z,this.options.backtrack_lexer){if(it=this.test_match(at,Lt[Z]),it!==!1)return it;if(this._backtrack){vt=!1;continue}else return!1}else if(!this.options.flex)break}return vt?(it=this.test_match(vt,Lt[be]),it!==!1?it:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var vt=this.next();return vt||this.lex()},begin:function(vt){this.conditionStack.push(vt)},popState:function(){var vt=this.conditionStack.length-1;return vt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(vt){return vt=this.conditionStack.length-1-Math.abs(vt||0),vt>=0?this.conditionStack[vt]:"INITIAL"},pushState:function(vt){this.begin(vt)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(vt,at,be,Lt){var Z=Lt;switch(be){case 0:this.begin("captext");return;case 1:return 61;case 2:return this.popState(),61;break;case 3:return 65;case 4:return 66;case 5:return 67;case 6:return 68;case 7:return 69;case 8:return 70;case 9:return 52;case 10:return 53;case 11:return 54;case 12:return 55;case 13:return 56;case 14:return 57;case 15:return 82;case 16:return 85;case 17:return 86;case 18:return 87;case 19:return 81;case 20:return 83;case 21:return 84;case 22:return 89;case 23:return 88;case 24:return 72;case 25:return 73;case 26:return 74;case 27:return 76;case 28:return 75;case 29:return 78;case 30:return 79;case 31:return 80;case 32:return 93;case 33:return 92;case 34:return 94;case 35:return 13;case 36:return 15;case 37:return 14;case 38:return 10;case 39:return 31;case 40:return 32;case 41:return 97;case 42:return 98;case 43:return 99;case 44:return 17;case 45:return 18;case 46:return 19;case 47:return 90;case 48:return 91;case 49:return 96;case 50:return at.yytext=this.matches[1],21;break;case 51:return at.yytext=this.matches[1],22;break;case 52:return at.yytext=this.matches[1],24;break;case 53:return 71;case 54:return 50;case 55:return 51;case 56:return 100;case 57:return 64;case 58:return 63;case 59:return 95;case 60:return 59;case 61:return 59;case 62:return 26;case 63:return 60;case 64:return 77;case 65:return at.yytext=this.matches[1],61;break;case 66:return 62;case 67:return;case 68:return 101;case 69:return;case 70:return 58;case 71:return 5;case 72:return 103}},rules:[/^(?:([,][,])(?=[A-Z]))/,/^(?:[A-Z](?=[A-Z]))/,/^(?:[A-Z])/,/^(?:["][6])/,/^(?:["][-])/,/^(?:["][4])/,/^(?:["][8])/,/^(?:["][9])/,/^(?:["][/])/,/^(?:[.][<])/,/^(?:[_][<])/,/^(?:["][<])/,/^(?:[.][>])/,/^(?:[_][>])/,/^(?:["][>])/,/^(?:["][7][@][:])/,/^(?:[_][@][<])/,/^(?:[\^][9])/,/^(?:[_][@][>])/,/^(?:["][7])/,/^(?:[@][<])/,/^(?:[@][>])/,/^(?:[@][9][@][:])/,/^(?:[@][9])/,/^(?:[.][0][O][F][ ]?)/,/^(?:[.][0])/,/^(?:[:][O])/,/^(?:[.][_][\[])/,/^(?:[_][\[])/,/^(?:[$][=])/,/^(?:[$][@][#][D])/,/^(?:[$][#][C])/,/^(?:["][_][9][@][:])/,/^(?:["][_][9])/,/^(?:[4][4][4])/,/^(?:[%][9])/,/^(?:[%])/,/^(?:[\+])/,/^(?:[95]+(?=.))/,/^(?:[<])/,/^(?:[>])/,/^(?:!)/,/^(?:[6])/,/^(?:[@]&)/,/^(?:[(])/,/^(?:[.][/])/,/^(?:[)])/,/^(?:#[L])/,/^(?:#-)/,/^(?:#=)/,/^(?:#([A-J4]+))/,/^(?:[/]([A-J4]+))/,/^(?:[#][/]([A-J4]+))/,/^(?:[_]?[/])/,/^(?:[1])/,/^(?:[4])/,/^(?:[7]+)/,/^(?:[_][\\][_][\\])/,/^(?:[_][\\])/,/^(?:[3])/,/^(?:(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?)/,/^(?:(ARG|DET|EXP|INF|LIM|LN|LOG|MAX|MIN|MOD|SUP))/,/^(?:(TOKEN)[ ]?)/,/^(?:[,]?[.][ABGDEZ\?\:IKLMNXOPRSTUYF\&W])/,/^(?:[^][J])/,/^(?:[,]([A-Z]))/,/^(?:[A-Z])/,/^(?:[,]['])/,/^(?:[8])/,/^(?:[;])/,/^(?:[ ])/,/^(?:$)/,/^(?:.)/],conditions:{captext:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72],inclusive:!0},INITIAL:{rules:[0,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72],inclusive:!0}}};return xo}();nt.lexer=Di;function zr(){this.yy={}}return zr.prototype=nt,nt.Parser=zr,new zr}();typeof Qh!="undefined"&&typeof r!="undefined"&&(r.parser=t,r.Parser=t.Parser,r.parse=function(){return t.parse.apply(t,arguments)},r.main=function(){},typeof e!="undefined"&&Qh.main===e&&r.main(process.argv.slice(1)))}}),Z2=["abs","ans","arccosh","arccot","arccoth","arccsc","arccsch","arcsec","arcsech","arcsinh","arctanh","binomialdist","boxplot","cdf","ceil","corr","cov","csch","distance","dotplot","erf","floor","gcf","histogram","IndependentTTest","iTTest","ittest","lcm","length","mad","mcd","mcm","mean","median","midpoint","mod","nCr","normaldist","nPr","pdf","poissondist","polygon","quantile","quartile","random","round","sech","sign","signum","sgn","stdDev","stddev","stdDevP","stddevp","stdev","stdevp","tdist","total","TScore","TScore","Tscore","tscore","tscore","TTest","ttest","var","variance","varp"],sS=Z2,QJ=ZV(Z2),Q2;function JV(r){let e=!1,t=0,o="",i="";for(let n of r)if(n.type==="terminal"&&/[A-Za-z]/.test(n.value))o+=n.value,t++;else break;return i=o.replace(Q2,"\\operatorname{$1}"),e=t>0&&i!==o,{modified:e,terminalCount:t,value:i}}function eL(r){return sS.indexOf(r.toLowerCase())!==-1}function lS(r){if(!Array.isArray(r))throw new Error("Operator names must be an array, got "+typeof r);for(let e of r)if(typeof e!="string")throw new Error("Operator names must be strings, found "+typeof e);sS=r,eZ()}function cS(){sS=Z2,Q2=QJ}function eZ(){Q2=ZV(sS)}function ZV(r){let e=r.sort((t,o)=>o.length-t.length||o.localeCompare(t)).join("|");return new RegExp("("+e+")","g")}var QV={};J2(QV,{command:()=>tL,fraction:()=>oZ,greek:()=>tZ,group:()=>rL,level:()=>tB,processPrimes:()=>rZ,radical:()=>iZ,terminal:()=>eB,typeform:()=>rB});function eB(r){return{type:"terminal",value:r}}function tL(r){return{type:"command",value:r}}function tZ(r){return{type:"greek",value:r}}function tB(r){return{subscript:r._,superscript:r["^"],type:"level"}}function rZ(r,e){let t=[],o=r.match(/'+/);if(o!==null){let i=o[0].length;for(let n=0;n<i;n++)t.push(tL("\\prime"))}return rL(t,e)}function oZ(r,e){return{type:"fraction",numerator:r,denominator:e}}function rB(r,e){return{name:r,type:"typeform",value:e}}function iZ(r,e){return{type:"radical",index:e,radicand:r}}function rL(...r){return Array.prototype.concat.apply([],r)}var Q1={"~":"\\ ","\\,":"\\ ","\\:":"\\ ","\\;":"\\ ","\\!":"\\ "},FV={"\\Vert":"\\|","\\ge":"\\geq","\\le":"\\leq","\\vert":"|"},nZ={"\\space":!0};function bd(r){let e=[];for(let t=0;t<r.length;t++){let o=r[t];switch(o.type){case"command":let i=o.value.slice(1).trim();FV.hasOwnProperty(o.value)?e.push(tL(FV[o.value])):eL(i)?e.push(rB("operator_name",aZ(i))):nZ[o.value]||e.push(o);break;case"level":let n={subscript:o.subscript&&o.subscript.length>0?bd(o.subscript):void 0,superscript:o.superscript&&o.superscript.length>0?bd(o.superscript):void 0,type:o.type};(n.subscript||n.superscript)&&e.push(n);break;case"fraction":e.push({denominator:bd(o.denominator),numerator:bd(o.numerator),type:o.type});break;case"radical":e.push({index:o.index?bd(o.index):void 0,radicand:bd(o.radicand),type:o.type});break;case"terminal":sZ(r.slice(t))?(e.push({type:"command",value:"\\ldots"}),t+=2):e.push({type:o.type,value:Q1.hasOwnProperty(o.value)?Q1[o.value]:o.value});break;case"typeform":e.push(o);break;case"greek":e.push({type:o.type,value:Q1.hasOwnProperty(o.value)?Q1[o.value]:o.value});break;default:throw new Error(`Unexpected item:
`+JSON.stringify({group:r,item:o}))}}return e}function aZ(r){let e=[];for(let t of r)e.push(eB(t));return e}function sZ(r){let e=0;for(let t=0;t<Math.min(3,r.length);t++){let o=r[t];o.type==="terminal"&&o.value==="."&&e++}return e===3}function oL(r){if(!r.hash)throw r;return{_diagnostic:{expected:r.hash.expected,message:r.message,text:r.hash.text,token:r.hash.token},location:r.hash.loc}}var oB=ZJ();oB.parser.yy=QV;function iB(r){try{return{isError:!1,value:oB.parser.parse(r)}}catch(e){return{isError:!0,error:oL(e)}}}function lZ(r){return r.isError}function cZ(r,e){return lZ(r)?r:{isError:!1,value:e(r.value)}}function eg(r,e){let t=cZ(r,e);return r.warnings&&(t.warnings=r.warnings),t}function dZ(r){return eg(iB(r),e=>wZ(bd(e)))}var GV={"!":"&","*":"@#",",":", ","/":"_/",":":"_3","<":' "K ',"=":" .K ",">":" .1 ","?":"_8","[":"@(","\\ ":" ","\\%":"@0","\\&":"_&","\\,":" ","\\infty":",=","\\int":"!","\\{":".(","\\|":"\\\\","\\}":".)","]":"@)","|":"\\"};function U2(r){return/^[a-z]$/.test(r.value)?r.value.toUpperCase():/^[A-Z]$/.test(r.value)?","+r.value:/^[0-9.]$/.test(r.value)||/^[+\-()]$/.test(r.value)?r.value:GV.hasOwnProperty(r.value)?GV[r.value]:"[terminal: "+r.value+"]"}var NV={"\\Vert":"\\\\","\\angle":"$[ ","\\approx":" @:@: ","\\bigcirc":"$C ","\\cong":" @:.K ","\\cdot":"*","\\degree":"~.*","\\div":"./","\\ge":" .1: ","\\geq":" .1: ","\\langle":"..(","\\ldots":" ''' ","\\le":' "K: ',"\\leq":' "K: ',"\\measuredangle":"M$[ ","\\ncong":" /@:.K ","\\ne":" /.K ","\\neq":" /.K ","\\nparallel":" /$L ","\\nsim":"/@:","\\parallel":" $L ","\\parallelogram":"$G ","\\perp":" $P ","\\prime":"'","\\prod":".,P","\\rangle":"..)","\\sim":"@:","\\sum":".,S","\\times":"@*","\\to":" $O ","\\triangle":"$T ","\\vert":"\\"},VV={"\\Alpha":".,A","\\Beta":".,B","\\Chi":".,&","\\Delta":".,D","\\Epsilon":".,E","\\Eta":".,:","\\Gamma":".,G","\\Iota":".,I","\\Kappa":".,K","\\Lambda":".,L","\\Mu":".,M","\\Nu":".,N","\\Omega":".,W","\\Omicron":".,O","\\Phi":".,F","\\Pi":".,P","\\Psi":".,Y","\\Rho":".,R","\\Sigma":".,S","\\Tau":".,T","\\Theta":".,?","\\Upsilon":".,U","\\Xi":".,X","\\Zeta":".,Z","\\alpha":".A","\\beta":".B","\\chi":".&","\\delta":".D","\\epsilon":".E","\\eta":".:","\\gamma":".G","\\iota":".I","\\kappa":".K","\\lambda":".L","\\mu":".M","\\nu":".N","\\omega":".W","\\omicron":".O","\\phi":".F","\\pi":".P","\\psi":".Y","\\rho":".R","\\sigma":".S","\\tau":".T","\\theta":".?","\\upsilon":".U","\\xi":".X","\\zeta":".Z"};function BV(r){return NV.hasOwnProperty(r.value)?NV[r.value]:r.value.slice(1).toUpperCase()+" "}function pZ(r){return VV.hasOwnProperty(r.value)?VV[r.value]:r.value.slice(1).toUpperCase()+" "}function uZ(r){return r.value==="\\space"}function hZ(r,e){return r.isStartOfLine&&/^-?$/.test(e)||/\s-?$/.test(e)||r.wasFraction}function gZ(r){return r.value==="\\sum"||r.value==="\\prod"}function mZ(r,e){if(e>=r.length)return!1;let t=r[e];if(t.type==="terminal"){if(/^[0-9]$/.test(t.value))return!0;if(t.value!=="."||e+1>=r.length)return!1;if(t=r[e+1],t.type==="terminal")return/^[0-9]$/.test(t.value)}return!1}function xd(r,e){let t="",o=r.levelIndicator,i=0,n=!1;for(let a=0;a<e.length;a++){mZ(e,a)&&(o===""&&/[A-Z]$/.test(t)?t+=el(o):hZ(r,t)&&(t+="#"));let s=e[a],l=a<e.length-1?e[a+1]:null;switch(s.type!=="level"&&o!==r.levelIndicator&&(z2(s)?o="":(r.wasModifiedExpression&&r.levelIndicator===""?r=ma(r,{wasModifiedExpression:!1}):t+=el(r.levelIndicator),o=r.levelIndicator)),s.type){case"terminal":!r.wasModifiedExpression&&o!==""&&z2(s)?t+=" "+el(o)+U2(s).trim()+" ":t+=U2(s),s.value==="."&&l&&(l.type==="terminal"&&/^[^_\d,]/.test(U2(l))||l.type==="greek")&&(t+='"'),r=ma(r,{wasFraction:!1,wasRomanCommand:!1});break;case"command":if(!uZ(s)){let m=gZ(s);m&&(t+='"'),!m&&o!==""&&z2(s)?t+=" "+el(o)+BV(s).trim()+" ":t+=BV(s),r=ma(r,{wasFraction:!1,wasModifiedExpression:m,wasRomanCommand:!0})}break;case"greek":t+=pZ(s),r=ma(r,{wasFraction:!1});break;case"fraction":let c=fZ(r,s);t+=c.value,i=Math.max(i,c.fractionLevel),r=ma(r,{wasFraction:!0,wasRomanCommand:!1});break;case"radical":let p=bZ(r,s);t+=p.value,i=Math.max(i,p.fractionLevel),r=ma(r,{wasFraction:!1,wasRomanCommand:!1});break;case"level":!r.wasModifiedExpression&&r.wasRomanCommand?(n=/\s$/.test(t),n&&(t=t.replace(/\s$/,""))):n=!1;let h=t.length>0&&/[A-Za-z]/.test(t[t.length-1])===!0,g=yZ(r,h,n,s);t+=g.value,o=g.levelIndicator,r=ma(r,{wasFraction:!1,wasRomanCommand:!1});break;case"typeform":t+=xd(r,s.value).value,s.name==="operator_name"&&(t+=" "),r=ma(r,{wasFraction:!1,wasModifiedExpression:!1,wasRomanCommand:!1});break}}return{fractionLevel:i,levelIndicator:o,value:t}}function fZ(r,e){r=ma(r,{isStartOfLine:!1});let t=xd(r,e.numerator),o=xd(r,e.denominator),i=Math.max(t.fractionLevel,o.fractionLevel),n="";for(let s=0;s<i;s++)n+=",";let a=n+"?"+t.value;return t.levelIndicator!==r.levelIndicator&&(a+=el(r.levelIndicator)),/\.$/.test(t.value)&&(a+='"'),a+=n+"/"+o.value,o.levelIndicator!==r.levelIndicator&&(a+=el(r.levelIndicator)),/\.$/.test(o.value)&&(a+='"'),a+=n+"#",{fractionLevel:i+1,value:a}}function bZ(r,e){let t=r.radicalLevel,o="",i="";for(let a=0;a<t;a++)i+=".";if(e.index){o+=i+"<";let a=xd(ma(r,{isStartOfLine:!1}),e.index);o+=a.value,/\.$/.test(a.value)&&(o+='"'),a.levelIndicator!==r.levelIndicator&&(o+=el(r.levelIndicator)),o+=">"}else o+=i+">";let n=xd(ma(r,{isStartOfLine:!1,radicalLevel:t+1}),e.radicand);return o+=n.value,/\.$/.test(n.value)&&(o+='"'),n.levelIndicator!==r.levelIndicator&&(o+=el(r.levelIndicator)),o+=i+"]",{fractionLevel:n.fractionLevel,value:o}}function yZ(r,e,t,o){let i=r.levelIndicator,n="",a=xZ(o.superscript);if(n+=a,o.subscript){r.wasModifiedExpression&&(n+="%"),i=r.levelIndicator+";";let s=xd(ma(r,{isStartOfLine:!1,levelIndicator:i}),o.subscript);e&&/^[0-9]*(\.|\,)?[0-9]+$/.test(s.value)&&i.length<=1?i=r.levelIndicator:!r.wasModifiedExpression&&o.subscript[0]&&o.subscript[0].type!=="level"&&(n+=el(i)),n+=s.value,/\.$/.test(s.value)&&(n+='"')}if(o.superscript){r.wasModifiedExpression&&(n+="<"),i=r.levelIndicator+"^";let s=xd(ma(r,{isStartOfLine:!1,levelIndicator:i}),o.superscript.slice(a.length));!r.wasModifiedExpression&&o.superscript[0]&&o.superscript[0].type!=="level"&&s.value!==""&&(n+=el(i)),n+=s.value,/\.$/.test(s.value)&&(n+='"')}return r.wasModifiedExpression?n+="]":r.wasRomanCommand&&t&&(n+=" ",i=i.slice(0,i.length-1)),{levelIndicator:i,value:n}}function xZ(r){let e="";if(r)for(let t of r)if(t.type==="command"&&t.value==="\\prime")e+="'";else break;return e}function el(r){return r||'"'}function vZ(){return{isStartOfLine:!0,levelIndicator:"",radicalLevel:0,wasFraction:!1,wasModifiedExpression:!1,wasRomanCommand:!1}}function ma(r,e){return Zh(Zh({},r),e)}function z2(r){return r.type==="terminal"||r.type==="command"?/^<|>|\=|\\leq?|\\geq?|\\neq?$/.test(r.value):!1}function wZ(r){let e=vZ();return xd(e,r).value}function SZ(r){return eg(iB(r),e=>OZ(bd(e)))}var UV={"!":"6","(":'"<',")":'">',"*":'"9',"+":'"6',",":"1","-":'"-',".":"4","/":"_/",":":"3","<":"@<","=":'"7',">":"@>","?":"8","[":".<","\\ ":" ","\\%":".0","\\&":"@&","\\,":" ","\\infty":"#=","\\int":"!","\\{":"_<","\\|":"_\\_\\","\\}":"_>","]":".>","|":"_\\"};function TZ(r,e,t){let o="",i=e.value,n=t&&t.type==="terminal"?t.value:"";return nB(i,r)&&(o+=";"),/^[\D]/.test(i)&&(r=tl(r,{wasNumber:!1})),/^[a-z]$/.test(i)?r.capsLock?(r=tl(r,{capsLock:!1}),o+=",'"+i.toUpperCase()):o+=i.toUpperCase():/^[A-Z]$/.test(i)?r.capsLock?o+=i:/[A-Z]/.test(n)?(r=tl(r,{capsLock:!0}),o+=",,"+i):o+=","+i:(r=tl(r,{capsLock:!1}),/^[0-9.]$/.test(i)?o+=_Z(i):UV.hasOwnProperty(i)?o+=UV[i]:o+="[terminal: "+i+"]"),{value:o,ctx:r}}var zV={"\\Vert":"_\\_\\","\\angle":"_{","\\approx":"^9","\\bigcirc":"$=","\\cdot":'"4',"\\cong":'"_9',"\\degree":"~J","\\div":'"/',"\\ge":"_@>","\\geq":"_@>","\\langle":"@<","\\ldots":"444","\\le":"_@<","\\leq":"_@<","\\measuredangle":"._{","\\ncong":'"_9@:',"\\ne":'"7@:',"\\neq":'"7@:',"\\nsim":"@9@:","\\parallel":"#L","\\parallelogram":"$@#D","\\perp":"#-","\\prime":"7","\\prod":",.P","\\rangle":"@>","\\sim":"@9","\\sum":",.S","\\times":'"8',"\\to":":O","\\triangle":"$#C","\\vert":"_\\"},qV={"\\Alpha":",.A","\\Beta":",.B","\\Chi":",.&","\\Delta":",.D","\\Epsilon":",.E","\\Eta":",.:","\\Gamma":",.G","\\Iota":",.I","\\Kappa":",.K","\\Lambda":",.L","\\Mu":",.M","\\Nu":",.N","\\Omega":",.W","\\Omicron":",.O","\\Phi":",.F","\\Pi":",.P","\\Psi":",.Y","\\Rho":",.R","\\Sigma":",.S","\\Tau":",.T","\\Theta":",.?","\\Upsilon":",.U","\\Xi":",.X","\\Zeta":",.Z","\\alpha":".A","\\beta":".B","\\chi":".&","\\delta":".D","\\epsilon":".E","\\eta":".:","\\gamma":".G","\\iota":".I","\\kappa":".K","\\lambda":".L","\\mu":".M","\\nu":".N","\\omega":".W","\\omicron":".O","\\phi":".F","\\pi":".P","\\psi":".Y","\\rho":".R","\\sigma":".S","\\tau":".T","\\theta":".?","\\upsilon":".U","\\xi":".X","\\zeta":".Z"};function kZ(r,e){let t;return zV.hasOwnProperty(r.value)?t=zV[r.value]:t=r.value.slice(1).toUpperCase()+" ",nB(t,e)&&(t=";"+t),/^[\D]/.test(t)&&(e=tl(e,{wasNumber:!1})),{value:t,ctx:e}}function EZ(r){return qV.hasOwnProperty(r.value)?qV[r.value]:r.value.slice(1).toUpperCase()+" "}function IZ(r){return r.value==="\\space"}function CZ(r,e){if(e<r.length){let t=r[e];if(t.type==="terminal"){if(/^\d$/.test(t.value))return!0;if(t.value!=="."||e+1>=r.length)return!1;if(t=r[e+1],t.type==="terminal")return/^\d$/.test(t.value)}}return!1}function _Z(r){let e="";for(let o of r)o===","?e+="1":o==="."?e+="4":o==="0"?e+="J":e+=String.fromCharCode(64+Number(o));return e}function vd(r,e){let t,o,i="",n=!0;for(let a=0;a<e.length;a++){CZ(e,a)?(r=tl(r,{wasNumber:!0}),n&&(i+="#",n=!1)):n=!0;let s=e[a];switch(s.type){case"terminal":let l=a<e.length-1?e[a+1]:void 0;t=TZ(r,s,l),r=t.ctx,i+=t.value,i[i.length-1]===" "&&(n=!0);break;case"command":IZ(s)||(o=kZ(s,r),r=o.ctx,i+=o.value,i[i.length-1]===" "&&(n=!0));break;case"greek":i+=EZ(s),i[i.length-1]===" "&&(n=!0);break;case"fraction":let c=MZ(r,s);i+=c.value,r=c.ctx,n=!1;break;case"radical":let p=AZ(r,s);i+=p.value,n=!0;break;case"level":let h=LZ(r,s);i+=h.value,r=h.ctx,n=!0;break;case"typeform":let g=vd(r,s.value).value;i+=g,/(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?/.test(g)&&(i+=" ");break}}return{ctx:r,value:i}}function nB(r,e){return e.wasNumber&&/^[A-Ja-j]/.test(r)}function MZ(r,e){let t=vd(r,e.numerator),o=vd(r,e.denominator),i;return K2(t.value)&&K2(o.value)?(r=tl(r,{wasNumber:!0}),i=t.value+"/"+o.value.slice(1)):(r=tl(r,{wasNumber:!1}),i="("+t.value+"./"+o.value+")"),{ctx:r,value:i}}function K2(r){return/^\#[A-J41]+$/.test(r)}function AZ(r,e){let t="%",o=vd(r,e.radicand);if(e.index){let i=vd(r,rL(tB({"^":e.index})));t+=i.value,/\#[A-J]$/.test(i.value)&&/^[A-J]/.test(o.value)&&(t+=";")}return t+=o.value+"+",{ctx:r,value:t}}function LZ(r,e){let t="",o=PZ(e.superscript);t+=o;let i;if(e.subscript){let n=vd(r,e.subscript);KV(e.subscript,n.value,0)?i="<"+HV(n.value)+">":i=n.value,r=tl(r,{wasNumber:n.ctx.wasNumber}),i!==""&&(t+="5"+i)}if(e.superscript){let n=vd(r,e.superscript.slice(o.length));KV(e.superscript,n.value,o.length)?i="<"+HV(n.value)+">":i=n.value,r=tl(r,{wasNumber:n.ctx.wasNumber}),(o===""||i!=="")&&(t+="9"+i)}return{ctx:r,value:t}}function HV(r){return/^;/.test(r)?r.slice(1):r}function PZ(r){let e="";if(r)for(let t of r)if(t.type==="command"&&t.value==="\\prime")e+="7";else break;return e}function KV(r,e,t){let o=r[0],i=(e.match(/\</g)||[]).length,n=/^["|\.|_]?\</.test(e),a=(e.match(/\>/g)||[]).length,s=/["|\.|_]?\>$/.test(e);return!K2(e)&&r.length-t>1&&i===0&&a===0||i>0&&a>0&&(!n||!s)||i>1||a>1||o&&o.type==="typeform"}function DZ(){return{capsLock:!1,wasNumber:!1}}function tl(r,e){return Zh(Zh({},r),e)}function OZ(r){let e=DZ();return vd(e,r).value}var W2={};J2(W2,{baseline:()=>BZ,command:()=>FZ,comparison:()=>VZ,expression:()=>KZ,fraction:()=>zZ,geo_token:()=>GZ,greek:()=>$Z,group:()=>jZ,level:()=>iL,level_with_comparison:()=>NZ,modified_expression:()=>qZ,primes:()=>UZ,radical:()=>HZ,simple_subscript:()=>WZ,terminal:()=>RZ});function RZ(r){return{type:"terminal",value:r}}function FZ(r){return{type:"command",value:"\\"+r.trim()+" "}}function GZ(r){return{type:"geo_token",index:r}}var aB={'"K':"<",'"K:':"\\leq ",$L:"\\parallel ",$O:"\\to ",$P:"\\perp ",".1":">",".1:":"\\geq ",".K":"=","@:.K":"\\cong ","/@:.K":"\\ncong ","@:@:":"\\approx","/$L":"\\nparallel ","/.K":"\\neq ","=":"=","@:":"\\sim ","/@:":"\\nsim "};function NZ(r){let e=/[\^;]+/.exec(r),t=e?e.toString():"",o=r.slice(iL.length);return{type:"level_with_comparison",level:t,value:aB[o]}}function VZ(r){return{type:"comparison",value:aB[r]}}function iL(r){return{type:"level",value:r}}function BZ(){return iL("")}function UZ(r){return{type:"primes",value:r}}function zZ(r,e){return{type:"fraction",numerator:r,denominator:e}}function qZ(r,e,t){return{type:"modified_expression",expression:r,under:e,over:t}}function HZ(r,e){return{type:"radical",value:r,index:e}}function KZ(r){return{type:"expression",value:r}}function WZ(r,e){return{type:"simple_subscript",base:r,subscript:e}}var WV={".&":"\\chi",".,&":"\\Chi",".,:":"\\Eta",".,?":"\\Theta",".,A":"\\Alpha",".,B":"\\Beta",".,D":"\\Delta",".,E":"\\Epsilon",".,F":"\\Phi",".,G":"\\Gamma",".,I":"\\Iota",".,K":"\\Kappa",".,L":"\\Lambda",".,M":"\\Mu",".,N":"\\Nu",".,O":"\\Omicron",".,P":"\\prod",".,R":"\\Rho",".,S":"\\sum",".,T":"\\Tau",".,U":"\\Upsilon",".,W":"\\Omega",".,X":"\\Xi",".,Y":"\\Psi",".,Z":"\\Zeta",".:":"\\eta",".?":"\\theta",".A":"\\alpha",".B":"\\beta",".D":"\\delta",".E":"\\epsilon",".F":"\\phi",".G":"\\gamma",".I":"\\iota",".K":"\\kappa",".L":"\\lambda",".M":"\\mu",".N":"\\nu",".O":"\\omicron",".P":"\\pi",".R":"\\rho",".S":"\\sigma",".T":"\\tau",".U":"\\upsilon",".W":"\\omega",".X":"\\xi",".Y":"\\psi",".Z":"\\zeta"};function $Z(r){if(WV.hasOwnProperty(r))return WV[r]+" ";throw new Error("Unknown Greek letter")}function jZ(...r){return Array.prototype.concat.apply([],r)}var nL=YV(),iS=nL.parser.lexer,ou=Object.create(iS),YZ=ou,Xb=nL.parser.terminals_,Vo=nL.parser.symbols_;ou.setInput=function(r,e){this.delimiterStack=[],this.outputQueue=[],this.canAcceptPrimes=!1,iS.setInput.call(this,r,e)};ou.lex=function(){let r=-1;if(!this)return r;if(this.outputQueue.length)return this.outputQueue.shift();let e=iS.lex.call(this);for(;Xb[e]==="UNKNOWN"||!this.canAcceptPrimes&&Xb[e]==="PRIMES";)this.warn(),e=iS.lex.call(this);this.canAcceptPrimes=!0;let t,o,i=this.delimiterStack?this.delimiterStack[this.delimiterStack.length-1]:-1;switch(Xb[e]){case"OPEN_FRAC":case"OPEN_MODEXP":this.delimiterStack.push(e),this.canAcceptPrimes=!1;break;case"RADICAL_INDEX":i===Vo.RADICAL_INDEX&&(this.delimiterStack.pop(),this.pushCloseTokens(i)),this.delimiterStack.push(e),this.canAcceptPrimes=!1;break;case"OPEN_RADICAL":i===Vo.RADICAL_INDEX&&this.delimiterStack.pop(),this.delimiterStack.push(e),this.canAcceptPrimes=!1;break;case"SLASH":for(t=!1;this.delimiterStack.length;)if(o=this.delimiterStack.pop()||-1,o===Vo.OPEN_FRAC){t=!0;break}else this.pushCloseTokens(o);t||this.pushOpenTokens(e),this.delimiterStack.push(e),this.canAcceptPrimes=!1;break;case"CLOSE_FRAC":for(t=!1;this.delimiterStack.length;)if(o=this.delimiterStack.pop()||-1,o===Vo.SLASH){t=!0;break}else if(o===Vo.OPEN_FRAC){this.addMissingToken(Vo.SLASH),t=!0;break}else this.pushCloseTokens(o);if(!t)return this.warn(),this.canAcceptPrimes=!1,this.lex();break;case"CLOSE_RADICAL":for(t=!1;this.delimiterStack.length;)if(o=this.delimiterStack.pop()||-1,o===Vo.OPEN_RADICAL){t=!0;break}else if(o===Vo.RADICAL_INDEX){t=!0,this.addMissingToken(Vo.OPEN_RADICAL);break}else this.pushCloseTokens(o);t||this.pushOpenTokens(e);break;case"CLOSE_MODEXP":for(t=!1;this.delimiterStack.length;)if(o=this.delimiterStack.pop()||-1,o===Vo.OPEN_MODEXP){t=!0;break}else this.pushCloseTokens(o);t||this.pushOpenTokens(e);break;case"EOF":for(;this.delimiterStack.length;)o=this.delimiterStack.pop()||-1,this.pushCloseTokens(o);break}return this.outputQueue.push(e),r=this.outputQueue.shift()||-1,r};ou.warn=function(){this.yylloc&&this.yy.warnings.push({location:this.yylloc})};ou.addMissingToken=function(r){this.outputQueue.push(r),this.warn()};ou.pushCloseTokens=function(r){switch(Xb[r]){case"OPEN_FRAC":this.addMissingToken(Vo.SLASH),this.addMissingToken(Vo.CLOSE_FRAC);break;case"SLASH":this.addMissingToken(Vo.CLOSE_FRAC);break;case"RADICAL_INDEX":this.addMissingToken(Vo.OPEN_RADICAL),this.addMissingToken(Vo.CLOSE_RADICAL);break;case"OPEN_RADICAL":this.addMissingToken(Vo.CLOSE_RADICAL);break;case"OPEN_MODEXP":this.addMissingToken(Vo.CLOSE_MODEXP);break}};ou.pushOpenTokens=function(r){switch(Xb[r]){case"SLASH":this.addMissingToken(Vo.OPEN_FRAC);break;case"CLOSE_FRAC":this.addMissingToken(Vo.OPEN_FRAC),this.addMissingToken(Vo.SLASH);break;case"CLOSE_RADICAL":this.addMissingToken(Vo.OPEN_RADICAL);break;case"CLOSE_MODEXP":this.addMissingToken(Vo.OPEN_MODEXP);break}};var XZ=YV();function JZ(r,e){e||(e={});let t=XZ.parser,o=Object.create(t);o.yy=W2,o.yy.warnOrError=n=>{o.parseError(n,{recoverable:!1})};let i=Object.create(t);i.yy=Zh({warnings:[]},W2),i.yy.warnOrError=n=>{i.yy.warnings.push(n)},i.lexer=YZ,e.strict?t=o:t=i;try{return{isError:!1,value:t.parse(r),warnings:t.yy.warnings||[]}}catch(n){return{error:oL(n),isError:!0}}}function yd(r,e){let t="",o=e,i="",n=!1,a="",s="",l=ZZ(r);for(let c=0;c<r.length;c++){let p=r[c],h=c+1<r.length?r[c+1]:null;switch(p.type){case"terminal":let g=JV(r.slice(c));g.value!==""?(t+=g.value,c+=g.terminalCount-1,n=n||g.modified):p.value===" "?(n?(i=a,t+=Yb(o,i),o=i):t+="\\ ",n=!1):(l[c]===rS?t+="\\left":l[c]===$2&&(t+="\\right"),t+=p.value);break;case"comparison":i="",t+=Yb(o,i),o=i,n=!1,t+=p.value;break;case"level_with_comparison":t+=Yb(o,p.level),o=p.level,n=!1,t+=p.value;break;case"command":let m=p.value.slice(1).trim();h&&h.type==="terminal"&&/[a-z]/.test(h.value)?(t+=m,n=!1):eL(m)?(t+="\\operatorname{"+m+"}",n=!0):(t+=p.value,n=!0),a=o;break;case"expression":t+=p.value;break;case"fraction":t+=rQ(p.numerator,p.denominator,o);break;case"geo_token":t+="\\token{"+p.index.value+"}";break;case"modified_expression":t+=yd(p.expression,o)+" ",p.under&&(t+="_{"+yd(p.under,o)+"}"),p.over&&(t+="^{"+yd(p.over,o)+"}");break;case"radical":t+="\\sqrt",p.index&&(t+="["+yd(p.index,o)+"]"),t+="{"+yd(p.value,o)+"}";break;case"simple_subscript":o===""?(t+=p.base.value+"_{"+p.subscript.value+"}",p.base.type==="command"&&(n=!0,a=o)):t+=p.base.value+p.subscript.value;break;case"level":t+=Yb(o,p.value,s),o=p.value,p.value==="^"&&s!==""&&(s="");break;case"primes":h&&h.type==="level"&&h.value===";"?s=p.value:o!==""?(t+=Array(p.value.length+1).join("\\prime "),s=""):(t+=p.value,s="");break}}return t+=Yb(o,e)+s,t.replace(/([^\\])( )$/,"$1")}var rS=1,$2=-1,eS=0,q2=2;function ZZ(r){let e=[],t=[];for(let o=0;o<r.length;o++){let i=r[o];if(QZ(i))e.push({direction:rS,index:o}),t.push(eS);else if(eQ(i)){for(;e.length&&e[e.length-1].direction===q2;)e.pop();if(e.length){let n=e.pop();if(n){let a=n.index;t[a]=rS,t.push($2)}}else t.push(eS)}else if(tQ(i))if(e.length&&e[e.length-1].direction===q2){let n=e.pop();if(n){let a=n.index;t[a]=rS,t.push($2)}}else e.push({direction:q2,index:o}),t.push(eS);else t.push(eS)}return t}function QZ(r){return r.type==="terminal"?/^(\\langle |\[|\(|\\{)$/.test(r.value):!1}function eQ(r){return r.type==="terminal"?/^(\\rangle |\]|\)|\\})$/.test(r.value):!1}function tQ(r){return r.type==="terminal"?/^(\\\||\|)$/.test(r.value):!1}function rQ(r,e,t){return"\\frac{"+yd(r,t)+"}{"+yd(e,t)+"}"}function Yb(r,e,t){let o="",i,n,a,s=Math.max(r.length,e.length);for(i=0;i<s&&r[i]===e[i];i++);for(n=r.length-1;n>=i;n--)o+="}";for(a=i;a<e.length;a++)e[a]==="^"&&(t&&(o+=t),o+="^{"),e[a]===";"&&(o+="_{");return o}function oQ(r){return yd(r,"")}function iQ(r,e){return e&&e.operatorNames?lS(e.operatorNames):cS(),eg(JZ(r,e),oQ)}var aL=XV(),nS=aL.parser.lexer,iu=Object.create(nS),nQ=iu,aS=aL.parser.terminals_,li=aL.parser.symbols_;iu.setInput=function(r,e){this.delimiterStack=[],this.outputQueue=[],nS.setInput.call(this,r,e)};iu.lex=function(){let r=-1;if(this.outputQueue.length)return this.outputQueue.shift();let e=nS.lex.call(this);for(;aS[e]==="UNKNOWN";)this.warn(),e=nS.lex.call(this);let t,o,i=this.delimiterStack?this.delimiterStack[this.delimiterStack.length-1]:-1;switch(aS[e]){case"OPEN_FRAC":this.delimiterStack.push(e);break;case"OPEN_GROUP":this.delimiterStack.push(e);break;case"RADICAL_WITH_INDEX":i===li.RADICAL_WITH_INDEX&&(this.delimiterStack.pop(),this.pushCloseTokens(i)),this.delimiterStack.push(e);break;case"RADICAL":i===li.RADICAL_WITH_INDEX&&this.delimiterStack.pop(),this.delimiterStack.push(e);break;case"OVER":for(t=!1;this.delimiterStack.length;)if(o=this.delimiterStack.pop()||-1,o===li.OPEN_FRAC){t=!0;break}else this.pushCloseTokens(o);t||this.pushOpenTokens(e),this.delimiterStack.push(e);break;case"CLOSE_FRAC":for(t=!1;this.delimiterStack.length;)if(o=this.delimiterStack.pop()||-1,o===li.OVER){t=!0;break}else if(o===li.OPEN_FRAC){this.outputQueue.push(li.OVER),t=!0;break}else this.pushCloseTokens(o);t||this.pushOpenTokens(e);break;case"CLOSE_GROUP":for(t=!1;this.delimiterStack.length;)if(o=this.delimiterStack.pop()||-1,o===li.OPEN_GROUP){t=!0;break}else this.pushCloseTokens(o);t||this.pushOpenTokens(e);break;case"CLOSE_RADICAL":for(t=!1;this.delimiterStack.length;)if(o=this.delimiterStack.pop()||-1,o===li.RADICAL||o===li.RADICAL_WITH_INDEX){t=!0;break}else this.pushCloseTokens(o);t||this.pushOpenTokens(e);break;case"EOF":for(;this.delimiterStack.length;)o=this.delimiterStack.pop()||-1,this.pushCloseTokens(o);break}return this.outputQueue.push(e),r=this.outputQueue.shift()||-1,r};iu.warn=function(){this.yylloc&&this.yy.warnings.push({location:this.yylloc})};iu.addMissingToken=function(r){this.outputQueue.push(r),this.warn()};iu.pushCloseTokens=function(r){switch(aS[r]){case"OPEN_FRAC":this.addMissingToken(li.OVER),this.addMissingToken(li.CLOSE_FRAC);break;case"OVER":this.addMissingToken(li.CLOSE_FRAC);break;case"OPEN_GROUP":this.addMissingToken(li.CLOSE_GROUP);break;case"RADICAL_WITH_INDEX":case"RADICAL":this.addMissingToken(li.CLOSE_RADICAL);break}};iu.pushOpenTokens=function(r){switch(aS[r]){case"OVER":this.addMissingToken(li.OPEN_FRAC);break;case"CLOSE_FRAC":this.addMissingToken(li.OPEN_FRAC),this.addMissingToken(li.OVER);break;case"CLOSE_GROUP":this.addMissingToken(li.OPEN_GROUP);break;case"CLOSE_RADICAL":this.addMissingToken(li.RADICAL);break}};var j2={};J2(j2,{basic_level:()=>lQ,bracketed_level:()=>cQ,command:()=>sQ,expression:()=>gQ,fraction:()=>pQ,geo_token:()=>hQ,greek:()=>fQ,group:()=>mQ,primes:()=>dQ,radical:()=>uQ,terminal:()=>aQ,to_number:()=>bQ});function aQ(r){return{type:"terminal",value:r}}function sQ(r){return{type:"command",value:r}}function lQ(r,e){return{type:"basic_level",level:r,value:e}}function cQ(r,e,t,o){return{type:"bracketed_level",level:r,lbrack:e,value:t,rbrack:o}}function dQ(r){return{type:"primes",value:r.length>0?Array(r.length+1).join("'"):""}}function pQ(r,e){return{type:"fraction",numerator:r,denominator:e}}function uQ(r,e){return{type:"radical",value:r,index:e}}function hQ(r){return{type:"geo_token",index:r}}function gQ(r){return{type:"expression",value:r}}function mQ(...r){return Array.prototype.concat.apply([],r)}var $V={",.&":"\\Chi",",.:":"\\Eta",",.?":"\\Theta",",.A":"\\Alpha",",.B":"\\Beta",",.D":"\\Delta",",.E":"\\Epsilon",",.F":"\\Phi",",.G":"\\Gamma",",.I":"\\Iota",",.K":"\\Kappa",",.L":"\\Lambda",",.M":"\\Mu",",.N":"\\Nu",",.O":"\\Omicron",",.P":"\\prod",",.R":"\\Rho",",.S":"\\sum",",.T":"\\Tau",",.U":"\\Upsilon",",.W":"\\Omega",",.X":"\\Xi",",.Y":"\\Psi",",.Z":"\\Zeta",".&":"\\chi",".:":"\\eta",".?":"\\theta",".A":"\\alpha",".B":"\\beta",".D":"\\delta",".E":"\\epsilon",".F":"\\phi",".G":"\\gamma",".I":"\\iota",".K":"\\kappa",".L":"\\lambda",".M":"\\mu",".N":"\\nu",".O":"\\omicron",".P":"\\pi",".R":"\\rho",".S":"\\sigma",".T":"\\tau",".U":"\\upsilon",".W":"\\omega",".X":"\\xi",".Y":"\\psi",".Z":"\\zeta"};function fQ(r){if($V.hasOwnProperty(r))return $V[r]+" ";throw new Error("Unknown Greek letter")}function bQ(r){let e="";for(let o of r)o==="4"?e+=".":o==="J"?e+="0":e+=o.charCodeAt(0)-64;return e}var yQ=XV();function xQ(r,e){e||(e={});let t=yQ.parser,o=Object.create(t);o.yy=j2;let i=Object.create(t);i.yy=Zh({warnings:[]},j2),i.lexer=nQ,e.strict?t=o:t=i;try{return{isError:!1,value:t.parse(r),warnings:t.yy.warnings||[]}}catch(n){return{error:oL(n),isError:!0}}}function ru(r,e){let t="",o=!1,i="",n=vQ(r);for(let a=0;a<r.length;a++){let s=r[a],l=a+1<r.length?r[a+1]:null;switch(s.type){case"terminal":let c=JV(r.slice(a));c.value!==""?(t+=c.value,a+=c.terminalCount-1):s.value===" "&&!o?t+="\\ ":(n[a]===oS?t+="\\left":n[a]===Y2&&(t+="\\right"),t+=s.value),o=!1;break;case"command":let p=s.value.slice(1).trim();l&&l.type==="terminal"&&/[a-z]/.test(l.value)?(t+=p,o=!1):eL(p)?(t+="\\operatorname{"+p+"}",o=!0):(t+=s.value,o=!0);break;case"expression":t+=s.value;break;case"fraction":t+=kQ(s.numerator,s.denominator);break;case"radical":t+="\\sqrt",s.index&&(t+="["+ru(s.index)+"]"),t+="{"+ru(s.value)+"}";break;case"geo_token":t+="\\token{"+s.index.value+"}";break;case"basic_level":t+=EQ(s.level,s.value,i),s.level==="9"&&(i="");break;case"bracketed_level":t+=IQ(s.level,s.lbrack,s.value,s.rbrack,i),s.level==="9"&&(i="");break;case"primes":l&&(l.type==="basic_level"||l.type==="bracketed_level")&&l.level==="5"?i=s.value:e&&e!==""?(t+=Array(s.value.length+1).join("\\prime "),i=""):(t+=s.value,i="");break}}return t+=i,t.replace(/([^\\])( )$/,"$1")}var oS=1,Y2=-1,tS=0,H2=2;function vQ(r){let e=[],t=[];for(let o=0;o<r.length;o++){let i=r[o];if(wQ(i))e.push({direction:oS,index:o}),t.push(tS);else if(SQ(i)){for(;e.length&&e[e.length-1].direction===H2;)e.pop();if(e.length){let n=e.pop();if(n){let a=n.index;t[a]=oS,t.push(Y2)}}else t.push(tS)}else if(TQ(i))if(e.length&&e[e.length-1].direction===H2){let n=e.pop();if(n){let a=n.index;t[a]=oS,t.push(Y2)}}else e.push({direction:H2,index:o}),t.push(tS);else t.push(tS)}return t}function wQ(r){return r.type==="terminal"?/^(\\langle |\[|\(|\\{)$/.test(r.value):!1}function SQ(r){return r.type==="terminal"?/^(\\rangle |\]|\)|\\})$/.test(r.value):!1}function TQ(r){return r.type==="terminal"?/^(\\\||\|)$/.test(r.value):!1}function kQ(r,e){return"\\frac{"+ru(r)+"}{"+ru(e)+"}"}function EQ(r,e,t){let o="",i="{"+ru(e,r)+"}";return r==="9"?o+=t+"^"+i:r==="5"&&(o+="_"+i),o}function IQ(r,e,t,o,i){let n="",a="{"+e+ru(t,r)+o+"}";return r==="9"?n+=i+"^"+a:r==="5"&&(n+="_"+a),n}var CQ=ru;function _Q(r,e){return e&&e.operatorNames?lS(e.operatorNames):cS(),eg(xQ(r,e),t=>CQ(t,""))}var sB=` A1B'K2L@CIF/MSP"E3H9O6R^DJG>NTQ,*5<-U8V.%[$+X!&;:4\\0Z7(_?W]#Y)=`,lB=10240;function MQ(r){return String.fromCharCode(lB+r)}function AQ(r){return r.charCodeAt(0)-lB}function LQ(r){return sB[r]}function PQ(r){return sB.indexOf(r)}function DQ(r){let e="";for(let t of r)e+=MQ(PQ(t));return e}function cB(r){let e="";for(let t of r)e+=LQ(AQ(t));return e}function OQ(r){return cB(r).replace(/[@-^]/g,e=>String.fromCharCode(e.charCodeAt(0)+32))}function RQ(r){let e="";if(r)for(let t of r){let o=t.charCodeAt(0);96<=o&&o<=127&&(o-=32,t=String.fromCharCode(o)),32<=o&&o<=95&&(t=DQ(t),o=t.charCodeAt(0)),10305<=o&&o<=10495&&(o=10240+(o-1024)%64,t=String.fromCharCode(o)),10240<=o&&o<=10304?e+=t:e+="\u2800"}return e}function FQ(r){for(let e=0;e<r.length;e++){let t=r.charCodeAt(e);if(t<10240||t>10304)return!1}return!0}function dB(r){if(!FQ(r))throw new Error("EncodingError: Expected input to be six-dot unicode braille characters.")}function sL(r,e){return dB(r),iQ(Ri.toBrailleAscii(r),e)}function lc(r,e){return e&&e.operatorNames?lS(e.operatorNames):cS(),eg(dZ(r),Ri.coerceToSixDotCells)}function lL(r,e){return dB(r),_Q(Ri.toBrailleAscii(r),e)}function cc(r,e){return e&&e.operatorNames?lS(e.operatorNames):cS(),eg(SZ(r),Ri.coerceToSixDotCells)}var Ri={coerceToSixDotCells:RQ,toBrailleAscii:cB,toExpandedBrailleAscii:OQ},GQ="1.0.3";var pB=1,uB=2,hB=4,gB=8,uS=15,mB=12,fB=3,bB=1,yB=2,xB=3,vB=4,dc=5,wd=6;function ol(r,e,t){let o=[],i=r.length;if(t===dc)for(let n=0;n<i;n+=2){let a=e.mapX(r[n]),s=e.mapY(r[n+1]);o.push(a,s)}else if(t===wd)for(let n=0;n<i;n+=2){let a=e.mapX(r[n+1]),s=e.mapY(r[n]);o.push(a,s)}else if(t===bB)for(let n=0;n<r.length;n+=2){let a=r[n],s=r[n+1],l=e.mapX(s*Math.cos(a)),c=e.mapY(s*Math.sin(a));o.push(l,c)}else if(t===yB)for(let n=0;n<r.length;n+=2){let a=r[n],s=r[n+1];s<0&&(s=0);let l=e.mapX(s*Math.cos(a)),c=e.mapY(s*Math.sin(a));o.push(l,c)}else if(t===xB)for(let n=0;n<r.length;n+=2){let a=r[n]*Math.PI/180,s=r[n+1],l=e.mapX(s*Math.cos(a)),c=e.mapY(s*Math.sin(a));o.push(l,c)}else if(t===vB)for(let n=0;n<r.length;n+=2){let a=r[n]*Math.PI/180,s=r[n+1];s<0&&(s=0);let l=e.mapX(s*Math.cos(a)),c=e.mapY(s*Math.sin(a));o.push(l,c)}return o}function wB(r,e){return cL(r,e,uS,!0)}function hS(r,e){return NQ(r,e,uS,!0)}function dS(r,e,t,o){let i=[],n,a,s,l;o?(a=r[0],s=r[1],n=2,l=e(a,s),l&&i.push(a,s)):(a=r[r.length-2],s=r[r.length-1],n=0,l=e(a,s));for(let c=n;c<r.length;c+=2){let p=a,h=s,g=l;a=r[c],s=r[c+1],l=e(a,s),!(!l&&!g)&&(l&&g&&i.push(a,s),l&&!g&&(i.push(...t(a,s,p,h)),i.push(a,s)),!l&&g&&i.push(...t(p,h,a,s)))}return i}function pS(r,e,t,o){let i=[[]],n=0,a,s,l,c;o?(s=r[0],l=r[1],a=2,c=e(s,l),c&&i[n].push(s,l)):(s=r[r.length-2],l=r[r.length-1],a=0,c=e(s,l));for(let p=a;p<r.length;p+=2){let h=s,g=l,m=c;s=r[p],l=r[p+1],c=e(s,l),!(!c&&!m)&&(c&&m&&i[n].push(s,l),c&&!m&&(i[n].push(...t(s,l,h,g)),i[n].push(s,l)),!c&&m&&(i[n].push(...t(h,g,s,l)),n++,i[n]=[]))}return i.filter(p=>p.length>0)}var SB=r=>function(e,t){return e>=r},TB=r=>function(e,t){return e<=r},kB=r=>function(e,t){return t>=r},EB=r=>function(e,t){return t<=r},IB=r=>function(e,t,o,i){let n=i-t;return[r,t+n*(r-e)/(o-e)]},CB=r=>function(e,t,o,i){let n=i-t;return[r,t+n*(r-e)/(o-e)]},_B=r=>function(e,t,o,i){let n=o-e;return[e+n*(r-t)/(i-t),r]},MB=r=>function(e,t,o,i){let n=o-e;return[e+n*(r-t)/(i-t),r]};function cL(r,e,t,o){let i=r;return t&hB&&(i=dS(r,SB(e.xmin),IB(e.xmin),o)),t&uB&&(i=dS(i,kB(e.ymin),_B(e.ymin),o)),t&gB&&(i=dS(i,TB(e.xmax),CB(e.xmax),o)),t&pB&&(i=dS(i,EB(e.ymax),MB(e.ymax),o)),i}function NQ(r,e,t,o){let i=[r];return t&hB&&(i=__dcg_shared_module_exports__['k'](i.map(n=>pS(n,SB(e.xmin),IB(e.xmin),o)),!0)),t&uB&&(i=__dcg_shared_module_exports__['k'](i.map(n=>pS(n,kB(e.ymin),_B(e.ymin),o)),!0)),t&gB&&(i=__dcg_shared_module_exports__['k'](i.map(n=>pS(n,TB(e.xmax),CB(e.xmax),o)),!0)),t&pB&&(i=__dcg_shared_module_exports__['k'](i.map(n=>pS(n,EB(e.ymax),MB(e.ymax),o)),!0)),i}function AB(r,e,t){let o=[],i=r[0],n=i+t,a=[];o.push(a);for(let s=0;s<r.length;s+=2){let l=r[s],c=r[s+1];if(c<0&&(c=0),l>=n){for(a=[],o.push(a),i=r[s-2],n=i;l>=n;)n+=t;s-=4}else a.push(l,c)}if(e===0)for(let s=0;s<o.length;s++)o[s].push(0,0);else{let s=t/16,l=e;for(let c=0;c<o.length;c++){let p=o[c];i=p[0],n=p[p.length-2];for(let h=n;h>i;h-=s)p.push(h,l);p.push(i,l)}}return o}function dL(r,e){return r=r.slice(),r.push(r[r.length-2],e),r.push(r[0],e),[r]}function Jb(r,e,t){switch(r){case 1:return wd;case 8:case 5:case 2:return dc;case 6:return t.degreeMode?e?vB:xB:e?yB:bB}}var pL={enabled:!1,latex:"",hoveredImage:"",depressedImage:""},gS={center:"\\left(0,0\\right)",angle:"0",width:"10",height:"10",opacity:"1",clickableInfo:pL,description:"",draggable:!1},LB={folderId:"",hidden:!1,secret:!1,readonly:!1,disableGraphInteractions:!1,foreground:!1,name:"",...gS};function tg(r){return{...LB,...r,clickableInfo:{...pL,...r.clickableInfo}}}function PB(r){let e=__dcg_shared_module_exports__['Td'](LB,r),t=__dcg_shared_module_exports__['Ud'](pL,r.clickableInfo);return t===void 0?delete e.clickableInfo:e.clickableInfo=t,e}function uL(r){return __dcg_shared_module_exports__['be'](r,gS)}function mS(r){return{type:"image",id:r.id,...uL(r),rootModuleId:void 0,moduleID:void 0,guid:"",index:0,color:"",shouldGraph:r.hidden,showPoints:!1}}var OB={folderId:"",secret:!1,readonly:!1},pc={latex:"",color:"",hidden:!1,values:[],points:!0,lines:!1,dragMode:__dcg_shared_module_exports__['hd'].NONE,pointStyle:__dcg_shared_module_exports__['Pd'].POINT,pointOutline:!1,lineStyle:__dcg_shared_module_exports__['Qd'].SOLID,colorLatex:"",lineOpacity:"",lineWidth:"",pointOpacity:"",pointSize:"",disableGraphInteractions:!1};function rg(r){let e=(r.columns||[]).map(t=>({...pc,...t}));return{...OB,...r,columns:e}}function RB(r){return r={...r,columns:r.columns.map(e=>__dcg_shared_module_exports__['Td'](pc,e))},__dcg_shared_module_exports__['Td'](OB,r)}function fS(r){return{type:"table",id:r.id,columns:r.columns.map(t=>({...t,tableId:r.id})),regression:r.regression}}var og={handlerLatex:"",minStepLatex:"",open:!1,playing:!1};function bS(r){return{type:"ticker",id:r.id,handlerLatex:r.handlerLatex,minStepLatex:r.minStepLatex,shouldGraph:!1}}function GB(r){return __dcg_shared_module_exports__['Ud'](og,r)}function yS(r){return{...og,...r}}function UQ(r){typeof r.min=="number"&&(r.min=""+r.min),typeof r.max=="number"&&(r.max=""+r.max),typeof r.step=="number"&&(r.step=""+r.step)}function zQ(r){r.slider&&UQ(r.slider),typeof r.id!="string"&&(r.id=""+r.id)}function qQ(r,e){let t=HQ(r)+1,o={},i,n;for(let a of r)if(zQ(a),a.type==="folder")i=a.id,o[a.id]&&(a.id=""+t,t+=1),n=a.id,o[a.id]=!0,a.hasOwnProperty("folderId")&&delete a.folderId;else{if(i!==void 0&&a.folderId===i?a.folderId=n:(a.folderId&&(a.folderId=""),i=void 0,n=void 0),a.type==="table"&&Array.isArray(a.columns))for(let s of a.columns)o[s.id]&&(s.id=""+t,t+=1),o[s.id]=!0;o[a.id]&&(a.id=""+t,t+=1),o[a.id]=!0}e==="geometry-calculator"&&!o[__dcg_shared_module_exports__['je']]&&r.push(__dcg_shared_module_exports__['le']())}function NB(r,e){let t=parseFloat(e);return t!==Math.floor(t)?r:Math.max(r,t)}function HQ(r){let e=0;for(let t of r)if(e=NB(e,t.id),t.type==="table"&&Array.isArray(t.column))for(let o of t.columns)NB(e,o.id);return e}function xS(r){var i,n;let e=__dcg_shared_module_exports__['Uc'](r),t=e.graph&&e.graph.product,o=e.expressions.list;return Array.isArray(o)&&qQ(o,t),(i=e.graph)!=null&&i.complex&&((n=e.graph)!=null&&n.degreeMode)&&(e.graph.degreeMode=!1),e}var hL={NONE:"NONE",POSITIVE:"POSITIVE",BOTH:"BOTH"},KQ={expression:!0,table:!0,image:!0,folder:!0,text:!0};function WQ(r){if(r.type){if(KQ.hasOwnProperty(r.type))return r.type;throw new Error("Invalid item type: '"+r.type+"'.")}return r.text!==void 0?"text":r.columns!==void 0||r.headings!==void 0?"table":"expression"}function vS(r){return r.replace(/\\(total|length|mean|median|quantile|stdev|stddev|stdDev|stdevp|stddevp|stdDevP|var|variance|cov|corr|ceil|floor|round|abs|mod|lcm|mcm|mcd|nCr|nPr|signum|sign|arcsinh|arccosh|arctanh|arccsch|arcsech|arccoth|arccsc|arcsec|arccot)/g,"\\operatorname{$1}")}function $Q(r){let e={};for(let t in r)r.hasOwnProperty(t)&&(t==="latex"?e[t]=vS(r[t]):t==="values"?e[t]=r[t].map(vS):e[t]=r[t]);return e}function jQ(r){let e=WQ(r),t={},o;switch(e){case"expression":for(o in r)r.hasOwnProperty(o)&&(o==="latex"?t[o]=vS(r[o]):t[o]=r[o]);return t.type=e,t;case"table":for(o in r)r.hasOwnProperty(o)&&(o==="columns"?t[o]=r[o].map($Q):t[o]=r[o]);return t.type=e,t;case"image":for(o in r)r.hasOwnProperty(o)&&(o==="width"||o==="height"||o==="x"||o==="y"?t[o]=vS(r[o]):t[o]=r[o]);return t.type=e,t;case"text":case"folder":for(o in r)r.hasOwnProperty(o)&&(t[o]=r[o]);return t.type=e,t}}var VB={none:hL.NONE,both:hL.BOTH,positive:hL.POSITIVE};function YQ(r){let e={};for(let t in r)r.hasOwnProperty(t)&&(t==="xAxisArrows"||t==="yAxisArrows"||(e[t]=r[t]));return e.xAxisArrowMode=VB[r.xAxisArrows||"none"],e.yAxisArrowMode=VB[r.yAxisArrows||"none"],e}function BB(r){if(r.version)throw new Error("Unexpected version: "+r.version);let e={};return e.graph=YQ(r.graph),e.expressions={list:r.expressions.list.map(jQ)},e.version=0,e}function wS(r){return r.replace(/\\(sech|csch)/g,"\\operatorname{$1}")}function XQ(r){let e={};for(let t in r)r.hasOwnProperty(t)&&(t==="latex"?e[t]=wS(r[t]):t==="values"?e[t]=r[t].map(wS):e[t]=r[t]);return e}function JQ(r){let e=r.type,t={},o;switch(e){case"expression":for(o in r)r.hasOwnProperty(o)&&(o==="latex"?t[o]=wS(r[o]):t[o]=r[o]);return t;case"table":for(o in r)r.hasOwnProperty(o)&&(o==="columns"?t[o]=r[o].map(XQ):t[o]=r[o]);return t;case"image":for(o in r)r.hasOwnProperty(o)&&(o==="width"||o==="height"||o==="x"||o==="y"?t[o]=wS(r[o]):t[o]=r[o]);return t;case"text":case"folder":for(o in r)r.hasOwnProperty(o)&&(t[o]=r[o]);return t;default:throw new Error("Unexpected expression type: "+e)}}function UB(r){if(r.version)throw new Error("Unexpected version: "+r.version);let e={};return e.graph=r.graph,e.expressions={list:r.expressions.list.map(JQ)},e.version=1,e}var ZQ=2,QQ="#C0504D",eee="#4F81BD",tee="#9BBB59",ree="#8064A2",oee="#F79646",iee="#000000";function zB(r){switch(r){case QQ:return __dcg_shared_module_exports__['Md'].RED;case eee:return __dcg_shared_module_exports__['Md'].BLUE;case tee:return __dcg_shared_module_exports__['Md'].GREEN;case ree:return __dcg_shared_module_exports__['Md'].PURPLE;case oee:return __dcg_shared_module_exports__['Md'].ORANGE;case iee:return __dcg_shared_module_exports__['Md'].BLACK;default:return r}}function nee(r){let e={};for(let t in r)r.hasOwnProperty(t)&&(t==="color"?e[t]=zB(r[t]):e[t]=r[t]);return e}function aee(r){let e=r.type,t={},o;switch(e){case"expression":for(o in r)r.hasOwnProperty(o)&&(o==="color"?t[o]=zB(r[o]):t[o]=r[o]);return t;case"table":for(o in r)r.hasOwnProperty(o)&&(o==="columns"?t[o]=r[o].map(nee):t[o]=r[o]);return t;case"image":case"text":case"folder":for(o in r)r.hasOwnProperty(o)&&(t[o]=r[o]);return t;default:throw new Error("Unexpected expression type: "+e)}}function qB(r){if(r.version>1)throw new Error("Unexpected version: "+r.version);let e={};return e.graph=r.graph,e.expressions={list:r.expressions.list.map(aee)},e.version=ZQ,e}function gL(r){if(typeof r=="string")return r;if(r===void 0)return"";let e=r+"";return e=e.replace(/1e\+?([-\d]+)/,"10^{$1}"),e=e.replace(/([-\d\.]+)e\+?([-\d]+)/,"$1\\cdot 10^{$2}"),e}function see(r){let e=r.type,t={},o;switch(e){case"expression":for(o in r)r.hasOwnProperty(o)&&(o==="sliderMax"||o==="sliderMin"||o==="sliderInterval"?t[o]=gL(r[o]):o==="domain"?t[o]={max:gL(r[o].max),min:gL(r[o].min)}:t[o]=r[o]);return t.hasOwnProperty("sliderMin")&&t.sliderInterval===void 0&&(t.sliderInterval=""),t;case"image":case"table":case"text":case"folder":for(o in r)r.hasOwnProperty(o)&&(t[o]=r[o]);return t;default:throw new Error("Unexpected expression type: "+e)}}function HB(r){if(r.version>2)throw new Error("Unexpected version: "+r.version);let e={};return e.graph=r.graph,e.expressions={list:r.expressions.list.map(see)},e.version=3,e}function KB(r){switch(r){case"point":return"POINT";case"cross":return"CROSS";case"open":return"OPEN";case"normal":return"SOLID";case"dashed":return"DASHED";case"dotted":return"DOTTED";default:return r}}function lee(r){let e={};for(let t in r)r.hasOwnProperty(t)&&(t==="style"?e[t]=KB(r[t]):e[t]=r[t]);return e}function cee(r){let e=r.type,t={},o;switch(e){case"expression":for(o in r)r.hasOwnProperty(o)&&(o==="style"?t[o]=KB(r[o]):t[o]=r[o]);return t;case"table":for(o in r)r.hasOwnProperty(o)&&(o==="columns"?t[o]=r[o].map(lee):t[o]=r[o]);return t;case"image":case"text":case"folder":for(o in r)r.hasOwnProperty(o)&&(t[o]=r[o]);return t;default:throw new Error("Unexpected expression type: "+e)}}function WB(r){if(r.version!==3)throw new Error("Unexpected version: "+r.version);let e={};return e.graph=r.graph,e.expressions={list:r.expressions.list.map(cee)},e.version=4,e}function dee(r){let e={},t;for(let o in r)if(r.hasOwnProperty(o))switch(t=r[o],o){case"showAxes":e.showXAxis=t,e.showYAxis=t;break;case"showLabels":e.xAxisNumbers=t,e.yAxisNumbers=t,e.polarNumbers=t;break;case"labelXMode":e.xAxisStep=t==="pi"?Math.PI:0;break;case"labelYMode":e.yAxisStep=t==="pi"?Math.PI:0;break;default:e[o]=t}return e}function pee(r){let e={};for(let t in r)r.hasOwnProperty(t)&&(t==="showPoints"||t==="showLine"||(e[t]=r[t]));return(r.showPoints!==void 0||r.showLine!==void 0)&&(r.showPoints&&r.showLine?e.columnMode="POINTS_AND_LINES":r.showPoints?e.columnMode="POINTS":r.showLine?e.columnMode="LINES":(e.hidden=!0,e.columnMode="POINTS")),e}function uee(r){let e=r.type,t={},o;switch(e){case"expression":r.hidden===void 0?r.hasOwnProperty("graphed")?t.hidden=!r.graphed:r.hasOwnProperty("userRequestedGraphing")?t.hidden=r.userRequestedGraphing==="never":t.hidden=!1:t.hidden=r.hidden;for(o in r)if(r.hasOwnProperty(o)&&!(o==="graphed"||o==="userRequestedGraphing"||o==="hidden")&&o!=="slider"){if(o==="color"){typeof r.color=="object"?t.color=r.color.value:t.color=r.color;continue}if(o==="style"){t.style=r.style==="normal"?"SOLID":r.style;continue}if(o==="sliderInterval"){t.sliderInterval=r.sliderInterval==="undefined"?"":r.sliderInterval;continue}t[o]=r[o]}return t;case"table":if(r.headings||r.columns){let i=r.headings?r.headings:r.columns;if(t.columns=i.map(pee),r.rows)for(let n=0;n<t.columns.length;n++){let a=t.columns[n];a.values=[];for(let s=0;s<r.rows.length;s++)a.values.push(r.rows[s][n])}}for(o in r)r.hasOwnProperty(o)&&(o==="rows"||o==="headings"||o==="columns"||(t[o]=r[o]));return t;case"image":case"text":case"folder":for(o in r)r.hasOwnProperty(o)&&(t[o]=r[o]);return t;default:throw new Error("Unexpected expression type: "+e)}}function $B(r){if(r.version!==4)throw new Error("Unexpected version: "+r.version);return{version:5,graph:dee(r.graph),expressions:{list:r.expressions.list.map(uee)}}}var hee=6;function gee(r){return r.length<2?!1:r[0]==="`"&&r[r.length-1]==="`"}function mee(r){if(gee(r))return{raw:r,parts:[r]};let t="({"+["[a-zA-Z][0-9]*","[a-zA-Z]_[a-zA-Z0-9]+","[a-zA-Z]_\\{[a-zA-Z0-9]+\\}"].join("})|({")+"})",o=new RegExp(t,"g"),i=[],n=0,a=0,s;for(;s=o.exec(r);){a=s.index,a>n&&i.push(r.substr(n,a-n));let l=s[0],c=l.replace(/[{}\$]/g,"").replace(/^([a-zA-Z])([0-9]+)$/,"$1_$2");i.push({symbol:c,str:l}),n=s.index+l.length}return n<r.length&&i.push(r.substr(n)),{raw:r,parts:i}}function fee(r){let e={};for(let t in r)if(r.hasOwnProperty(t)&&t!=="style")if(t==="values"&&(e[t]=r[t].map(o=>o?""+o:"")),t==="columnMode"&&!r.hasOwnProperty("points")&&!r.hasOwnProperty("lines"))switch(r[t]){case"LINES":e.points=!1,e.lines=!0;break;case"POINTS_AND_LINES":e.points=!0,e.lines=!0;break;default:e.points=!0,e.lines=!1}else e[t]=r[t];return e.hasOwnProperty("pointStyle")||(e.pointStyle="POINT"),e.hasOwnProperty("lineStyle")||(e.lineStyle="SOLID"),e.id=""+e.id,e}var jB={sliderMin:"min",sliderMax:"max",sliderInterval:"step",sliderHardMin:"hardMin",sliderHardMax:"hardMax",sliderAnimationPeriod:"animationPeriod",sliderLoopMode:"loopMode",sliderPlayDirection:"playDirection",sliderIsPlaying:"isPlaying"};function bee(r){let e=mee(r),t="";return e.parts.forEach(o=>{t+=typeof o=="object"&&o.str?"$"+o.str:o}),t}function yee(r,e){let t=r.latex.split("=");if(t.length!==2)return;let o=__dcg_shared_module_exports__['Ie'](t[1],e);if(!isFinite(o))return;let i=r.slider.hardMin?__dcg_shared_module_exports__['Ie'](r.slider.min||"-10",e):void 0,n=r.slider.hardMax?__dcg_shared_module_exports__['Ie'](r.slider.max||"10",e):void 0,a=r.slider.step?__dcg_shared_module_exports__['Ie'](r.slider.step,e):void 0,s=__dcg_shared_module_exports__['Gc']({target:o,step:a,hardMin:i,hardMax:n});s.min||(delete r.slider.hardMin,delete r.slider.min),s.max||(delete r.slider.hardMax,delete r.slider.max),s.step||delete r.slider.step}function xee(r,e,t,o){let i=r.type,n={},a;switch(i){case"folder":for(a in r)r.hasOwnProperty(a)&&(a==="memberIds"||(n[a]=r[a]));break;case"expression":for(a in r)if(r.hasOwnProperty(a)){if(a==="style"&&!r.hasOwnProperty("pointStyle")&&!r.hasOwnProperty("lineStyle")){let s=r[a];["POINT","OPEN","CROSS"].includes(s)?(n.pointStyle=s,n.lineStyle="SOLID"):["SOLID","DASHED","DOTTED"].includes(s)?(n.pointStyle="POINT",n.lineStyle=s):(n.pointStyle="POINT",n.lineStyle="SOLID");continue}jB.hasOwnProperty(a)?(n.slider=n.slider||{},n.slider[jB[a]]=r[a]):n[a]=r[a],r.label&&(n.label=bee(r.label))}n.latex&&n.slider&&!n.slider.isPlaying&&yee(n,o),n.hasOwnProperty("fillOpacity")||(n.fillOpacity=.4),n.label===!1&&(n.label=""),n.labelSize||(n.labelSize="medium"),n.labelOrientation||(n.labelOrientation="default"),n.verticalLabel||(n.verticalLabel=!1),n.interactiveLabel||(n.interactiveLabel=!1);break;case"image":for(a in r)!r.hasOwnProperty(a)||a==="x"||a==="y"||(n[a]=r[a]);n.center="\\left("+(r.x||"0")+","+(r.y||"0")+"\\right)",n.angle=r.angle||"0",n.foreground=!!n.foreground;break;case"text":for(a in r)r.hasOwnProperty(a)&&(n[a]=r[a]);break;case"table":for(a in r)r.hasOwnProperty(a)&&(a==="columns"?n[a]=r[a].map(fee):n[a]=r[a]);break;default:throw new Error("Unexpected expression type: "+i)}if(n.id=""+n.id,r.type==="folder")e.folderId=n.id,e.memberIds=r.memberIds,n.folderId="";else{let s=t[n.id];e.memberIds&&e.memberIds[s]?n.folderId=e.folderId:(n.folderId="",e.folderId=void 0,e.memberIds=void 0)}return n}function vee(r){let e=0,t=/^[0-9]+$/;for(let o=r.length-1;o>=0;o--){let i=r[o],n=i.id,a;if(t.test(n)&&(a=parseInt(n,10),a>e&&(e=a)),i.type==="table"&&i.columns)for(let s=i.columns.length-1;s>=0;s--)n=i.columns[s].id,t.test(n)&&(a=parseInt(n,10),a>e&&(e=a))}return e+1}function XB(r){if(r.version!==5)throw new Error("Unexpected version: "+r.version);let e=!!(r.graph&&r.graph.degreeMode),t=r.expressions.list,o=-1,i={},n={},a={};return{version:hee,graph:r.graph,expressions:{list:t.map(l=>(i[l.id]?(o===-1&&(o=vee(t)),n[o]=l.id,l=__dcg_shared_module_exports__['Uc'](l),l.id=o+"",o+=1):n[l.id]=l.id,i[l.id]=!0,xee(l,a,n,e)))}}}function mL(r){if(r.version!==6)throw new Error(`Unexpected version: ${r.version}`);let e=r.expressions.list.map(t=>{if(t.type==="expression"&&t.domain){let o={...t,parametricDomain:{min:t.domain.min,max:t.domain.max}};return delete o.domain,o}return t});return{version:7,randomSeed:r.randomSeed,graph:r.graph,expressions:{list:e}}}function wee(r){return r.length===1?`0${r}`:r}function il(){let r=new Uint8Array(16);if(typeof crypto!="undefined")crypto.getRandomValues(r);else if(typeof msCrypto!="undefined")msCrypto.getRandomValues(r);else return __dcg_shared_module_exports__['I'](Date.now().toString()+Math.random().toString());return Array.prototype.slice.call(r).map(t=>wee(t.toString(16))).join("")}function fL(r){let e=r.split("_");return e.length===2&&e[1]&&e[1].length===1?e[0]+"_{"+e[1]+"}":r}function JB(r){return r=__dcg_shared_module_exports__['Uc'](r),!r.rules&&(r.assignment||r.expression)&&(r.rules=[{id:"1",assignment:r.assignment||"",expression:r.expression||""}]),delete r.assignment,delete r.expression,r}function Zb(r){let e=/\\operatorname(?:\{stdev\}p|\{stddev\}p|\{stdDev\}P|\{var\}iance)/g;return r.replace(e,t=>{switch(t){case"\\operatorname{stdev}p":return"\\operatorname{stdevp}";case"\\operatorname{stddev}p":return"\\operatorname{stddevp}";case"\\operatorname{stdDev}P":return"\\operatorname{stdDevP}";case"\\operatorname{var}iance":return"\\operatorname{variance}";default:return""}})}function See(r){return r.columns?{...r,columns:r.columns.map(Tee)}:r}function Tee(r){let{latex:e,values:t}=r,o={...r};return e&&(o.latex=Zb(e),o.latex=fL(o.latex)),t&&(o.values=t.map(i=>i?Zb(i):"")),o}function bL(r){if(r.version!==7)throw new Error(`Unexpected version: ${r.version}`);let e=r.expressions.list.map(t=>{if(t.type==="image"){let o={...t,opacity:""};t.hasOwnProperty("stringOpacity")?o.opacity=t.stringOpacity:t.hasOwnProperty("opacity")?o.opacity=t.opacity+"":delete o.opacity,t.clickableInfo&&(o.clickableInfo=JB(t.clickableInfo)),delete o.stringOpacity;for(let i in t)if(i==="x"||i==="y"||i==="width"||i==="height"){let n=t[i];n&&(o[i]=Zb(n))}return o}else if(t.type==="expression"){let o={...t,fillOpacity:"",lineStyle:"SOLID"};if(t.lineStyle==="SINGLE_PIXEL"?o.lineWidth="1":t.hasOwnProperty("lineStyle")?o.lineStyle=t.lineStyle:delete o.lineStyle,o.hasOwnProperty("lineWidth")||(o.lineWidth=""),o.hasOwnProperty("lineOpacity")||(o.lineOpacity=""),o.hasOwnProperty("pointOpacity")||(o.pointOpacity=""),o.hasOwnProperty("pointSize")||(o.pointSize=""),o.hasOwnProperty("colorLatex")||(o.colorLatex=""),typeof t.latex=="string"&&(o.latex=Zb(t.latex)),t.latex&&(o.latex=Zb(t.latex)),t.hasOwnProperty("stringFillOpacity")?o.fillOpacity=t.stringFillOpacity:t.hasOwnProperty("fillOpacity")?o.fillOpacity=t.fillOpacity+"":delete o.fillOpacity,o.slider&&t.slider&&t.slider.newLoopMode&&(o.slider=__dcg_shared_module_exports__['Uc'](o.slider),o.slider.loopMode=t.slider.newLoopMode,delete o.slider.newLoopMode),o.residualVariable&&(o.residualVariable=fL(o.residualVariable)),o.regressionParameters){o.regressionParameters={};for(let i in t.regressionParameters){let n=fL(i),a=t.regressionParameters[i];o.regressionParameters[n]=a}}return t.clickableInfo&&(o.clickableInfo=JB(t.clickableInfo)),o}else if(t.type==="table")return See(t);return t});return{version:8,randomSeed:r.randomSeed||il(),graph:r.graph,expressions:{list:e}}}function kee(r,e,t){if(r.verticalLabel)switch(delete e.verticalLabel,t?e.labelAngle="90":e.labelAngle="\\frac{\\pi}{2}",r.labelOrientation){case"above":e.labelOrientation="right";break;case"below":e.labelOrientation="left";break;case"left":e.labelOrientation="above";break;case"right":e.labelOrientation="below";break}r.extendedLabelOrientation&&(e.labelOrientation=r.extendedLabelOrientation,delete e.extendedLabelOrientation)}function Eee(r,e){if(r.vizProps)switch(r.vizProps.dotplotSize){case"small":e.pointSize="9";break;case"large":e.pointSize="20";break}if(r.vizProps){let t={...r.vizProps};delete t.dotplotSize,Object.keys(t).length?e.vizProps=t:delete e.vizProps}}function yL(r){return r.filter(({assignment:e,expression:t})=>!!e&&!!t)}function xL(r){return r.map(({assignment:e,expression:t})=>`${e}\\to ${t}`).join(",")||""}function vL(r){let e=JSON.stringify(r),t=/_(\d)|_\{(\d+)\}/g,o,i={};for(;(o=t.exec(e))!==null;){let n=o[1]!==void 0?o[1]:o[2];i[n]=!0}return i}function wL(r,e){for(let t=e+1;;t++)if(!r[t])return t}function ZB(r){let e=JSON.stringify(r),t=/"(\d+)"/g,o,i={};for(;(o=t.exec(e))!==null;){let n=o[1]!==void 0?o[1]:o[2];i[n]=!0}return i}function QB(r,e){for(let t=e+1;;t++)if(!r[t])return t}function Iee(r){if(/^\d+$/.test(r)){let e=parseInt(r,10);return e===0?"\\infty":""+Math.round(1e3/e)}else return`\\frac{1000}{${r}}`}function Cee(r,e){let t={handlerLatex:r,playing:!0,open:!0};return e!==void 0&&(t.minStepLatex=Iee(e)),t}function SL(r){if(r.version!==8)throw new Error(`Unexpected version: ${r.version}`);let e=!1;r.graph&&r.graph.degreeMode&&(e=!0);let t=r.expressions.ticker||og,o=0,i,n=0,a,s=[];for(let l of r.expressions.list)switch(l.type){case"expression":{let c={...l};kee(l,c,e),Eee(l,c);let p;if(l.clickableInfo&&l.clickableInfo.rules){let{rules:h,...g}=l.clickableInfo,m=g,b=yL(h),x=xL(b);if(b.length>1){i||(i=vL(r)),o=wL(i,o),a||(a=ZB(r)),n=QB(a,n);let E=`A_{${o}}`;m.latex=E,p={type:"expression",id:""+n,latex:`${E}=${x}`},l.folderId!==void 0&&(p.folderId=l.folderId)}else m.latex=x;c.clickableInfo=m}c.clickableInfo&&c.clickableInfo.enabled&&c.hidden&&(c.clickableInfo.enabled=!1),s.push(c),p&&s.push(p);break}case"image":{if(l.clickableInfo&&l.clickableInfo.rules){let c={...l},{rules:p,...h}=l.clickableInfo,g=h,m=yL(p),b=xL(m),x;if(m.length>1){i||(i=vL(r)),o=wL(i,o),a||(a=ZB(r)),n=QB(a,n);let E=`A_{${o}}`;g.latex=E,x={type:"expression",id:""+n,latex:`${E}=${b}`},l.folderId!==void 0&&(x.folderId=l.folderId)}else g.latex=b;c.clickableInfo=g,s.push(c),x&&s.push(x)}else s.push(l);break}case"simulation":{let c;if(l.clickableInfo&&l.clickableInfo.rules){let h=yL(l.clickableInfo.rules);c=xL(h)}else c="";if(l.isPlaying&&c!==""){i||(i=vL(r)),o=wL(i,o);let h=`A_{${o}}`;c=`${h}=${c}`,t=Cee(h,l.fps)}let p={type:"expression",id:l.id,latex:c};l.folderId!==void 0&&(p.folderId=l.folderId),s.push(p);break}default:s.push(l);break}return{version:9,randomSeed:r.randomSeed||il(),graph:r.graph,expressions:{list:s,ticker:t}}}function _ee(r){switch(r.type){case"TokenNode":case"Letter":return!0;case"OperatorName":{for(let e of r.arg.args)if(e.type!=="Letter")return!1;return!0}case"Cmd":return __dcg_shared_module_exports__['Vc'](r.val);default:return!1}}function TL(r){let e;try{e=__dcg_shared_module_exports__['ed'](r)}catch(i){return}if(e.args.length===0||e.args.length>2)return;let t=e.args[0];if(!_ee(t))return;let o;if(e.args.length>1){let i=e.args[1];if(i.type!=="SupSub")return;let{sup:n,sub:a}=i;if(n!==void 0||a===void 0)return;for(let s of a.args)if(s.type!=="Letter"&&s.type!=="Digit")return;o=a}return{base:t,subscript:o}}function Ji(r){return TL(r)!==void 0}function o5(r){let e=__dcg_shared_module_exports__['ed'](r),t=__dcg_shared_module_exports__['ad'](e);switch(t.type){case"Letter":return t.val;case"Cmd":return t.val;default:return}}function e5(r){return r.replace(/^(\\? )+|(\\? )+$/g,"")}function Qb(r){let e=r.indexOf("=");if(e===-1)return;let t=__dcg_shared_module_exports__['Je'](e5(r.slice(0,e)));if(Ji(t))return t;try{let o=__dcg_shared_module_exports__['ed'](`${t}=0`),i=__dcg_shared_module_exports__['ad'](o);if(i.type==="Comparator"&&i.symbol==="="&&__dcg_shared_module_exports__['$c'](i.args[0])){let n=r.indexOf("\\left(");if(n===-1&&(n=r.indexOf("(")),n===-1)return;let a=e5(r.slice(0,n));if(Ji(a))return a}}catch(o){}}function SS(r,e){let t=TL(e);if(t===void 0)return[];let o=[],i;try{i=__dcg_shared_module_exports__['ed'](r)}catch(n){return o}return ig(i,t,o,{wrapInBraces:!1}),o}function za(r,e){return SS(r,e).length!==0}function TS(r,e,t){return TL(t)===void 0?r:kL(r,e,t)}function kL(r,e,t){let o=SS(r,e);if(o.length===0)return r;let i="",n=0;for(let a of o){if(i+=r.slice(n,a.base.start),/[a-z]$/i.test(i)&&e[0]=="\\"&&t[0]!=="\\"&&(i+=" "),a.wrapInBraces&&(i+="{"),i+=t,n=a.base.end,a.subscript){let s=0,l=0;for(let c=a.subscript.start;c>=0;c--)if(r[c]==="{"&&(s+=1),r[c]==="_"){l=c;break}i+=r.slice(n,l),n=a.subscript.end;for(let c=a.subscript.end;c<r.length&&!(s<=0);c++)r[c]==="}"&&(s-=1,n=c+1)}a.wrapInBraces&&(i+="}")}return i+=r.slice(n,r.length),i}function t5(r,e){if(r.args.length!==e.args.length)return!1;for(let t=0;t<r.args.length;t++){let o=r.args[t],i=e.args[t];if(!(o.type==="Letter"&&i.type==="Letter"&&o.val===i.val)&&!(o.type==="Digit"&&i.type==="Digit"&&o.val===i.val))return!1}return!0}function Mee(r,e,t){let o=r.arg.args,i=e.arg.args;if(o.length===i.length){for(let n=0;n<o.length;n++){let a=o[n],s=i[n];if(a.type!=="Digit"||a.type!==s.type||a.val!==s.val)return}t.push({base:e.span,wrapInBraces:!1})}}function ig(r,e,t,{wrapInBraces:o}){let{base:i,subscript:n}=e;for(let a=0;a<r.args.length;a++){let s=a-1>=0?r.args[a-1]:void 0,l=r.args[a],c;if(a+1<r.args.length){let p=r.args[a+1];p.type==="SupSub"&&p.sub!==void 0&&(c=p.sub)}switch(l.type){case"Letter":case"Cmd":if(i.type!==l.type||i.val!==l.val)break;if(n&&c&&t5(n,c))t.push({base:l.span,subscript:c.span,wrapInBraces:o});else if(!n&&!c){if((s==null?void 0:s.type)==="Symbol"&&s.val==="."&&l.type==="Letter"&&(i.val==="x"||i.val==="y"||i.val==="z"))break;t.push({base:l.span,wrapInBraces:o})}break;case"OperatorName":{if(i.type!==l.type||i.arg.args.length!==l.arg.args.length)break;let p=!0;for(let h=0;h<i.arg.args.length;h++){let g=i.arg.args[h],m=l.arg.args[h];if(g.type!=="Letter"||m.type!=="Letter"||g.val!==m.val){p=!1;break}}if(!p)break;n&&c&&t5(n,c)?t.push({base:l.span,subscript:c.span,wrapInBraces:o}):!n&&!c&&t.push({base:l.span,wrapInBraces:o});break}case"Digit":case"Symbol":case"EscapedSymbol":break;case"LeftRight":case"Sqrt":ig(l.arg,e,t,{wrapInBraces:!1});break;case"Frac":ig(l.num,e,t,{wrapInBraces:!1}),ig(l.den,e,t,{wrapInBraces:!1});break;case"SupSub":(s==null?void 0:s.type)==="Cmd"&&__dcg_shared_module_exports__['Xc'](s.val)&&l.sub&&ig(l.sub,e,t,{wrapInBraces:!r5(l.sub,"_")}),l.sup&&ig(l.sup,e,t,{wrapInBraces:!r5(l.sup,"^")});break;case"TokenNode":{if(i.type!==l.type)break;Mee(i,l,t)}break;default:{let p=l;throw new Error("Unexpected token type: "+p.type)}}}}function r5(r,e){for(let t=r.span.start;t>=0;t--){let o=r.span.input[t];if(o===e)break;if(o==="{")return!0}return!1}function i5(r){r.clickableInfo&&(r.description===void 0&&r.clickableInfo.description!==void 0&&(r.description=r.clickableInfo.description),delete r.clickableInfo.description,Object.keys(r.clickableInfo).length===0&&delete r.clickableInfo)}function Aee(r){switch(r.labelSize){case"small":r.labelSize="0.85";break;case"medium":r.labelSize="1";break;case"large":r.labelSize="1.35";break;default:break}}function Lee(r){let e=0,t=/^[0-9]+$/;for(let o=r.length-1;o>=0;o--){let i=r[o],n=i.id;if(t.test(n)){let a=parseInt(n,10);a>e&&(e=a)}if(i.type==="table"&&i.columns){for(let a=i.columns.length-1;a>=0;a--)if(n=i.columns[a].id,!!n&&t.test(n)){let s=parseInt(n,10);s>e&&(e=s)}}}return e}function EL(r){if(r.version!==9)throw new Error(`Unexpected version: ${r.version}`);let e=[],t={},o=Lee(r.expressions.list);for(let n of r.expressions.list)switch(n.type){case"expression":{let l={...n};i5(l),Aee(l),e.push(l);break}case"image":{let l={...n};i5(l);let c=l.description;(c===void 0||c==="")&&l.draggable&&l.center!==void 0&&l.center!==""&&(t[l.center]===void 0?t[l.center]=[l]:t[l.center].push(l)),e.push(l);break}case"table":let a={...n};if(!a.columns||!Ji(a.columns[0].latex)){e.push(a);break}let s=a.columns[0].latex;for(let l=1;l<a.columns.length;l++){let c=a.columns[l];if(!c.lines||!za(c.latex,s))continue;delete c.lines,o++;let p={type:"expression",latex:"y="+TS(c.latex,s,"x"),id:`${o}`};c.color&&(p.color=c.color),c.lineStyle&&(p.lineStyle=c.lineStyle),c.lineWidth&&(p.lineWidth=c.lineWidth),c.lineOpacity&&(p.lineOpacity=c.lineOpacity),e.push(p)}e.push(a);break;default:e.push(n);break}for(let n of e){if(n.type!=="expression"||n.latex===void 0||n.latex===""||n.latex.indexOf("=")===-1||n.dragMode===void 0||n.dragMode==="NONE"||n.label===void 0||n.label==="")continue;let a=n.latex.slice(0,n.latex.indexOf("=")),s=t[a];if(s!==void 0)for(let l of s)l.description=n.label}return{...r,version:10,expressions:{...r.expressions,list:e}}}function Pee(r){let e=/[ \\]*=[ \\]*\\operatorname\{(dilation|reflection|rotation|translation)\}\\left\(/g;return r.type!=="expression"||!r.latex||(r.latex=r.latex.replace(e,(t,o)=>{switch(o){case"dilation":return"\\left(x\\right)=\\operatorname{dilate}\\left(x,";case"rotation":return"\\left(x\\right)=\\operatorname{rotate}\\left(x,";case"reflection":return"\\left(x\\right)=\\operatorname{reflect}\\left(x,";case"translation":return"\\left(x\\right)=\\operatorname{translate}\\left(x,";default:return""}})),r}function Dee(r,e){var t;if(r.type==="image"&&r.folderId&&!r.draggable&&!((t=r.clickableInfo)!=null&&t.enabled)&&e.has(r.folderId)&&r.disableGraphInteractions!==!1){let o={...r};return o.disableGraphInteractions=!0,o}else return r}function Oee(r){var a;if(r.type!=="expression")return r;let e={...r},t=(a=(r.latex||"").split("=")[0])==null?void 0:a.trim(),o=r.parametricDomain3Du,i=r.parametricDomain3Dv,n=r.parametricDomain;return t==="r"||(t==="z"?(o&&(e.parametricDomain3Dr={...o}),i&&(e.polarDomain={...i})):t==="\\rho"?(o&&(e.polarDomain={...o}),i&&(e.parametricDomain3Dphi={...i})):r.polarDomain||n&&(e.parametricDomain3Du={...n},e.parametricDomain3Dv={...n})),e}function IL(r){if(r.version!==10)throw new Error(`Unexpected version: ${r.version}`);let e={...r.graph};delete e.projectorMode;let t=r.expressions.list,o=[],i=new Set;for(let a of t)a.type==="folder"&&a.collapsed&&i.add(a.id);for(let a of t)switch(a.type){case"expression":{if((e==null?void 0:e.product)==="geometry-calculator"){let s={...a};Pee(s),o.push(s)}else if((e==null?void 0:e.product)==="graphing-3d"){let s=Oee(a);o.push(s)}else o.push(a);break}case"image":{o.push(Dee(a,i));break}default:o.push(a)}let n={...r.expressions,list:o};return{...r,version:11,graph:e,expressions:n}}function Ree(r){let e=r.split("\xD7");return(e.length>1&&e[0]==="1"?e.slice(1):e).join("\\cdot")}function au(r,e){let t=__dcg_shared_module_exports__['aa'](r,e),o="";if(t.mantissa)o=Ree(t.mantissa)+"^{"+t.superscript+"}";else{let i=t.string.split("/");i.length===2?i[0][0]==="-"?o="-\\frac{"+i[0].slice(1)+"}{"+i[1]+"}":o="\\frac{"+i[0]+"}{"+i[1]+"}":o=t.string}return o=o.replace(/π/,"\\pi"),o}function Vn(r){return r.zmin!==void 0&&r.zmax!==void 0?{xmin:__dcg_shared_module_exports__['$'](r.xmin),xmax:__dcg_shared_module_exports__['$'](r.xmax),ymin:__dcg_shared_module_exports__['$'](r.ymin),ymax:__dcg_shared_module_exports__['$'](r.ymax),zmin:__dcg_shared_module_exports__['$'](r.zmin),zmax:__dcg_shared_module_exports__['$'](r.zmax)}:{xmin:__dcg_shared_module_exports__['$'](r.xmin),xmax:__dcg_shared_module_exports__['$'](r.xmax),ymin:__dcg_shared_module_exports__['$'](r.ymin),ymax:__dcg_shared_module_exports__['$'](r.ymax)}}function n5(r,e){let t=e.xAxisScale==="linear"?r.xmax-r.xmin:void 0,o=e.yAxisScale==="linear"?r.ymax-r.ymin:void 0,i={xmin:au(r.xmin,t),xmax:au(r.xmax,t),ymin:au(r.ymin,o),ymax:au(r.ymax,o)};return r.zmin!==void 0&&r.zmax!==void 0&&(i.zmin=au(r.zmin,r.zmax-r.zmin),i.zmax=au(r.zmax,r.zmax-r.zmin)),i}function CL(r,e){return r===0?"":au(r,e)}var ey=class{constructor(e){this.parsedRewriteRules=e.map(Fee)}replace(e){let t;try{let o=__dcg_shared_module_exports__['ed'](e);if(t=__dcg_shared_module_exports__['ad'](o),t.type==="Err")return e}catch(o){return e}for(let o of this.parsedRewriteRules){let{captures:i,patternNode:n}=o,a=ML(i,n,t);if(a)return this.replaceMatch(o,a,e,t)}return e}replaceMatch(e,t,o,i){let{replacement:n,replacementMatch:a}=e,s=[],l={};for(let{identifier:g,node:m}of t)l[g]=m;for(let{identifier:g,node:m}of a){let b=l[g],{start:x,end:E}=m.span;s.push({start:x,end:E,value:__dcg_shared_module_exports__['ra'](b.span)})}let{start:c,end:p}=i.span,h={start:c,end:p,value:a5(s,n)};return a5([h],o)}};function Fee({captures:r,pattern:e,replacement:t}){let o=__dcg_shared_module_exports__['ad'](__dcg_shared_module_exports__['ed'](e));if(o.type==="Err")throw new Error(`Error parsing pattern '${e}' as an expression: ${JSON.stringify(o.error)}.`);let i=ML(r,o,o);if(!i)throw new Error("Failed to match pattern to itself.");let n={};for(let l in r)n[l]=0;for(let{identifier:l}of i){if(n[l]===void 0)throw new Error(`Programming Error: captured unconfigured identifier '${l}'.`);n[l]+=1}for(let l in n){if(n[l]===0)throw new Error(`Unused capture '${l}'. Every capture must be used in pattern '${e}'.`);if(n[l]>1)throw new Error(`Capture '${l}' used more than once in pattern '${e}'.`)}let a=__dcg_shared_module_exports__['ad'](__dcg_shared_module_exports__['ed'](t));if(a.type==="Err")throw new Error(`Error parsing replacement '${t}' as an expression: ${JSON.stringify(a.error)}.`);let s=ML(r,a,a);if(!s)throw new Error("Failed to match replacement to itself.");return{captures:r,patternNode:o,replacement:t,replacementMatch:s}}function AL(r,e,t,o){if(__dcg_shared_module_exports__['_c'](e)){let n=__dcg_shared_module_exports__['ra'](e.span);if(r[n]!==void 0)return t.type==="Seq"&&!r[n].allowSequence?!1:(o.push({identifier:n,node:t}),!0)}let i=e.type;if(t.type!==i)return!1;switch(i){case"Mul":case"DotMul":case"CrossMul":case"Div":case"Call":case"ImplicitCall":case"Dot":case"Pipes":case"Sqrt":case"Nthroot":case"Frac":case"Derivative":case"Integral":case"EmptyIntegral":case"Sum":case"Product":case"Piecewise":case"Paren":case"Juxt":case"Superscript":case"Bang":case"Index":case"Tilde":case"Pos":case"Neg":case"Add":case"Sub":case"List":case"Seq":case"Colon":case"Ellipsis":case"PercentOf":case"RightArrow":case"For":case"With":return t.type!==i?!1:kS(r,e.args,t.args,o);case"Subscript":return t.type!==i||e.args[1].val!==t.args[1].val?!1:AL(__dcg_shared_module_exports__['_c'](t)?{}:r,e.args[0],t.args[0],o);case"Comparator":return t.type!==i||e.symbol!==t.symbol?!1:kS(r,e.args,t.args,o);case"Prime":return t.type!==i||e.nprimes!==t.nprimes?!1:kS(r,e.args,t.args,o);case"ComparatorChain":if(t.type!==i||e.symbols.length!==t.symbols.length)return!1;for(let n=0;n<e.symbols.length;n++)if(e.symbols[n]!==t.symbols[n])return!1;return kS(r,e.args,t.args,o);case"MixedNumber":return t.type!==i?!1:e.whole===t.whole&&e.num===t.num&&e.den===t.den;case"Cmd":case"Decimal":case"Letter":return t.type!==i?!1:e.val===t.val;case"EmptyRangeEnd":case"EmptyPiecewise":return t.type===i;default:throw`Unexpected SurfaceNode type ${i}.`}}function kS(r,e,t,o){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!AL(r,e[i],t[i],o))return!1;return!0}function ML(r,e,t){let o=[];if(AL(r,e,t,o))return o}function a5(r,e){let t="",o=0;for(let{start:i,end:n,value:a}of r.sort((s,l)=>s.start-l.start))t=_L(t,e.slice(o,i)),t=_L(t,a),o=n;return t=_L(t,e.slice(o)),t}function _L(r,e){return Nee(r)&&Vee(e)?r+" "+e:r+e}function Gee(r,e){if(r.length===0||e<0||e>r.length-1)return!1;let t=!1;for(;e>=0&&__dcg_shared_module_exports__['Zc'](r.charCodeAt(e));e--)t=!t;return t}function Nee(r){let e=r.length-1;if(e<0||!__dcg_shared_module_exports__['Yc'](r.charCodeAt(e)))return!1;for(e=e-1;e>=0;e--){if(Gee(r,e))return!0;if(!__dcg_shared_module_exports__['Yc'](r.charCodeAt(e)))return!1}return!1}function Vee(r){return r.length===0?!1:__dcg_shared_module_exports__['Yc'](r.charCodeAt(0))}var fa=String.raw;var ng="#388c46",ag="#348543",s5=[{captures:{a:{},b:{}},pattern:fa`\operatorname{ttest}\left(a,b\right)`,replacement:fa`\operatorname{ttest}\left(a\right).\operatorname{null}\left(b\right)`},{captures:{a:{},b:{}},pattern:fa`\operatorname{ittest}\left(a,b\right)`,replacement:fa`\operatorname{ttest}\left(a,b\right)`}],Bee=[{captures:{a:{}},pattern:fa`\operatorname{TTest}\left(a\right)`,replacement:fa`\operatorname{ttest}\left(a\right)`},{captures:{a:{},b:{}},pattern:fa`\operatorname{TTest}\left(a,b\right)`,replacement:fa`\operatorname{ttest}\left(a\right).\operatorname{null}\left(b\right)`},{captures:{a:{},b:{}},pattern:fa`\operatorname{iTTest}\left(a,b\right)`,replacement:fa`\operatorname{ttest}\left(a,b\right)`},{captures:{a:{},b:{}},pattern:fa`\operatorname{IndependentTTest}\left(a,b\right)`,replacement:fa`\operatorname{ttest}\left(a,b\right)`}],Uee=s5.concat(Bee),zee=s5.map(({captures:r,pattern:e,replacement:t})=>({captures:r,pattern:t,replacement:e})),qee=new ey(Uee),Hee=new ey(zee);function Kee(r){r.latexV12?(r.latex=r.latexV12,delete r.latexV12):r.latex&&/ttest/i.test(r.latex)&&(r.latex=qee.replace(r.latex))}function Wee(r){if(r.latex===void 0||!/ttest/i.test(r.latex))return;let e=Hee.replace(r.latex);r.latex!==e&&(r.latexV12=r.latex),r.latex=e}function LL(r){var n,a,s;if(r.version!==11)throw new Error(`Unexpected version: ${r.version}`);let e=(n=r.includeFunctionParametersInRandomSeed)!=null?n:!1,t=$ee(r.graph),o={...r.expressions},i=[];for(let l of o.list)switch(l.type){case"expression":{let{__stashed_V12PointStyle:c,...p}=l,h=p;c&&(h.pointStyle=c),((a=r.graph)==null?void 0:a.product)==="graphing-3d"&&!r.doNotMigrate3dLineWidthZero&&(h=jee(h)),r.doNotMigrateMovablePointStyle||(h=Xee(h)),l.color===ng&&(h.color=ag),h=Jee(h),Kee(h),i.push(h)}break;case"table":{let c={...l,columns:(s=l.columns)==null?void 0:s.map(p=>{let{__stashed_V12PointStyle:h,...g}=p,m=g;return h&&(m.pointStyle=h),p.color===ng&&(m.color=ag),m})};c.regression&&c.regression.color===ng&&(c.regression={...c.regression,color:ag}),r.doNotMigrateMovablePointStyle||(c=Yee(c)),i.push(c)}break;default:i.push(l)}return{...r,graph:t,expressions:{...o,list:i},includeFunctionParametersInRandomSeed:e,version:12}}function $ee(r){var t;if(r.viewport){let o=(t=r.__v12ViewportLatexStash)!=null?t:Vn(r.viewport),i={...r};return delete i.__v12ViewportLatexStash,{...i,viewport:o,__viewportEvaluatedForBackMigration:r.viewport}}return{...r}}function jee(r){return r.type!=="expression"||r.lineWidth!=="0"?r:{...r,lineWidth:"0.1"}}function l5(r){return r==="X"||r==="Y"||r==="XY"}function c5(r){return r!=="POINT"&&r!==void 0}function d5(r){switch(r){case"POINT":case"CROSS":case"OPEN":case void 0:return!0;default:return!1}}function Yee(r){var e;return{...r,columns:(e=r.columns)==null?void 0:e.map(t=>(t={...t},l5(t.dragMode)&&c5(t.pointStyle)&&(t.pointStyle="POINT"),t))}}function Xee(r){return r.type!=="expression"?r:l5(r.dragMode)&&c5(r.pointStyle)?{...r,pointStyle:"POINT"}:r}function Jee(r){let e=r.cdf;if(r.type!=="expression"||!e||!p5(e))return r;let t={};return e.show!==void 0&&(t.show=e.show),e.min!==void 0&&(t.bound1=e.min),e.max!==void 0&&(t.bound2=e.max),e.p!==void 0&&(t.p=e.p),e.tails!==void 0&&(t.tails=e.tails),e.compute!==void 0&&(t.compute=e.compute),{...r,cdf:t}}function p5(r){return r!==void 0&&("min"in r||"max"in r)}function Zee(r){if(r===void 0)return;let e={...r};return"bound1"in e&&delete e.bound1,"bound2"in e&&delete e.bound2,r.bound1!==void 0&&(e.min=r.bound1),r.bound2!==void 0&&(e.max=r.bound2),e}function Qee(r){let e={...r,...d5(r.pointStyle)?{pointStyle:r.pointStyle}:{pointStyle:void 0,__stashed_V12PointStyle:r.pointStyle},...p5(r.cdf)?{cdf:r.cdf}:{cdf:Zee(r.cdf)}};return e.pointStyle===void 0&&delete e.pointStyle,e.cdf===void 0&&delete e.cdf,e.color===ag&&(e.color=ng),Wee(e),e}function ete(r){var t,o;let e={...r,columns:(t=r.columns)==null?void 0:t.map(i=>{let n=tte({...i});return n.color===ag&&(n.color=ng),n})};return((o=e.regression)==null?void 0:o.color)===ag&&(e.regression.color=ng),e}function tte(r){let e;return d5(r.pointStyle)?e={...r,pointStyle:r.pointStyle}:e={...r,pointStyle:void 0,__stashed_V12PointStyle:r.pointStyle},e.pointStyle===void 0&&delete e.pointStyle,e}function rte(r){switch(r.type){case"expression":return Qee(r);case"table":return ete(r);default:return r}}function ote(r){if(r.viewport){let t=r.__viewportEvaluatedForBackMigration,o={...r};return delete o.__viewportEvaluatedForBackMigration,{...o,viewport:t,__v12ViewportLatexStash:r.viewport}}return{...r}}function ba(r){var o,i;let e=(o=r.includeFunctionParametersInRandomSeed)!=null?o:!0,t={...r,version:11,includeFunctionParametersInRandomSeed:e,graph:ote(r.graph),expressions:{...r.expressions,list:r.expressions.list.map(n=>rte(n))}};return((i=r.graph)==null?void 0:i.product)==="graphing-3d"&&(t.doNotMigrate3dLineWidthZero=!0),t.includeFunctionParametersInRandomSeed===!1&&delete t.includeFunctionParametersInRandomSeed,t.doNotMigrateMovablePointStyle=!0,t}var PL=[BB,UB,qB,HB,WB,$B,XB,mL,bL,SL,EL,IL,LL];var qa=12;function so(r){if(r.version>qa)return typeof console!="undefined"&&console.warn&&console.warn("Loading saved state with version "+r.version+" but last known version is "+qa+". States saved in a newer version of the calculator may not load correctly in an older version of the calculator."),xS(r);if(r.hasOwnProperty("version")&&!PL[r.version])return typeof console!="undefined"&&console.warn&&console.warn("State has invalid version "+r.version+". If a version is present, it should be a non-negative integer less than or equal to "+qa+"."),xS(r);for(r.hasOwnProperty("version")||(r=PL[0](r));r.version<qa;){let e=r.version+1;r=PL[e](r)}return xS(r)}function ite(r){return ba(r)}function su(r){return ite(so(r))}function u5(r){let e=so(r),t={},o=e.graph.degreeMode,i=e.graph.complex,n=e.randomSeed,a=e.graph.product==="geometry-calculator"?"geometry":e.graph.product==="graphing-3d"?"graphing_3d":"graphing";function s(l){switch(l.type){case void 0:case"expression":{let p=__dcg_shared_module_exports__['ze'](__dcg_shared_module_exports__['ve'](l,{is3d:!1,defaultLogModeRegressions:!1}));t[p.id]=p}break;case"table":{let p=fS(rg(l));t[p.id]=p}break;case"image":{let p=mS(tg(l));t[p.id]=p;break}case"folder":case"text":break;default:return l}}for(let l of e.expressions.list)s(l);if(e.version>=10&&e.expressions.ticker){let l="dcg_ticker_guid_internal",c={...yS(e.expressions.ticker),id:l};t[l]=bS(c)}return{setExpression(l){s(l)},getChangeSet(){return{statements:t,isCompleteState:!0,degreeMode:o,complex:i,globalRandomSeed:n,evaluationMode:a}}}}function g5(r,e){let t=__dcg_shared_module_exports__['Uc'](r);return ES(t,e)}function ES(r,e){for(let t of Object.keys(e)){let o=e[t];ste(o)?r[t]=o.s:lte(o)?delete r[t]:cte(o)?r[t]=ate(r[t],o.l):dte(o)&&(r[t]=ES(r[t],o.e))}return r}function ate(r,e){let t=[];for(let i=0;i<r.length;i++){let n=e[i];n&&n.a&&t.push(...h5(r,n.a)),n&&n.e?t.push(ES(r[i],n.e)):(!n||!n.d)&&t.push(r[i])}let o=e[r.length];return o&&o.a&&t.push(...h5(r,o.a)),t}function h5(r,e){let t=[];for(let o of e)if(pte(o))t.push(o.s);else if(ute(o)){let i=r[o.m.f];o.m.e?t.push(ES(i,o.m.e)):t.push(i)}return t}function ste(r){return r.hasOwnProperty("s")}function lte(r){return r.hasOwnProperty("d")}function cte(r){return r.hasOwnProperty("l")}function dte(r){return r.hasOwnProperty("e")}function pte(r){return r.hasOwnProperty("s")}function ute(r){return r.hasOwnProperty("m")}__dcg_shared_module_exports__['H']();function m5(r){let e=r.length,t=new Array(e),o=new Array(e+1),i=0;for(let s=0;s<e;s++){let l;if(r[o[i]]<r[s])l=i+1;else{let c=1,p=i-1;for(;c<=p;){let h=Math.ceil((c+p)/2);r[o[h]]<r[s]?c=h+1:p=h-1}l=c}t[s]=o[l-1],o[l]=s,l>i&&(i=l)}let n=new Array(i),a=o[i];for(let s=i-1;s>=0;s--)n[s]=r[a],a=t[a];return n}function b5(r,e){return IS(r,e,0)}function IS(r,e,t){let o={};for(let i in r){if(!r.hasOwnProperty(i))continue;if(!e.hasOwnProperty(i)){o[i]={d:1};continue}let n=r[i],a=e[i],s=hte(n,a,t,i);s&&(o[i]=s)}for(let i in e)e.hasOwnProperty(i)&&!r.hasOwnProperty(i)&&(o[i]={s:e[i]});return o}function hte(r,e,t,o){if(Array.isArray(r)&&Array.isArray(e)){if(t===1&&o==="list"||t===2&&o==="columns")return mte(r,e);if(!__dcg_shared_module_exports__['s'](r,e))return{s:e}}else if(__dcg_shared_module_exports__['z'](r)&&__dcg_shared_module_exports__['z'](e)){let i=IS(r,e,gte(t,o));if(!__dcg_shared_module_exports__['t'](i))return{e:i}}else if(!__dcg_shared_module_exports__['s'](r,e))return{s:e}}function gte(r,e){return r===0&&e==="expressions"?1:3}function mte(r,e){let t={},o={};for(let s=0;s<r.length;s++){if(o[r[s].id]!==void 0)return{s:e};o[r[s].id]=s}let i={};for(let s=0;s<e.length;s++){if(i[e[s].id]!==void 0)return{s:e};i[e[s].id]=s}let n=fte(r,e,o),a=0;for(let s=0;s<r.length;s++){let l=r[s];if(!n[l.id])t[s]={d:1};else{let c=i[l.id],p=e[c],h={};if(a!==c&&(h.a=e.slice(a,c).map(g=>f5(r,o,g))),!__dcg_shared_module_exports__['s'](l,p)){let g=l.type==="table"&&p.type==="table";h.e=IS(l,p,g?2:3)}__dcg_shared_module_exports__['t'](h)||(t[s]=h),a=c+1}}if(a<e.length&&(t[r.length]={a:e.slice(a,e.length).map(s=>f5(r,o,s))}),!__dcg_shared_module_exports__['t'](t))return{l:t}}function f5(r,e,t){if(e[t.id]){let o=r[e[t.id]],i={f:e[t.id]};return __dcg_shared_module_exports__['s'](o,t)||(i.e=IS(o,t,3)),{m:i}}return{s:t}}function fte(r,e,t){let o={},i=e.filter(a=>t[a.id]!==void 0).map(a=>t[a.id]),n=m5(i);for(let a of n)o[r[a].id]=!0;return o}function y5(r){return r.location==="expression"||r.location==="object"?`${r.location}:${r.id}:${r.path}`:`${r.location}:${r.path}`}function DL(r){let e=()=>new Error(`Invalid key: ${r}`),t=r.split(":"),o=t[0];if(!o||o!="expression"&&o!="settings"&&o!="object")throw e();if(o=="settings"){if(t.length!=2)throw e();return{location:o,path:t[1]}}if(t.length!=3)throw e();return{location:o,id:t[1],path:t[2]}}function CS(r,e,t){if(!r)return;let o=e.split("."),i=r;for(let n=0;n<o.length;n++){let a=o[n];if(!i[a])break;n==o.length-1&&typeof i[a]=="string"?i[a]=t:i=i[a]}}function OL(r,e){return(t,o,i,n)=>{if(t){let a=y5({...e,path:o});r[a]={value:t,type:i,context:n}}}}function bte(r){var o,i;let e={},t=OL(e,{location:"expression",id:r.id});switch(r.type){case"expression":t(r.label,"label","interpolated-string","expression-list-expression-label"),t(r.description,"description","string","expression-list-expression-clickable-description");break;case"image":t(r.image_url,"image_url","image","expression-list-image-url"),t(r.description,"description","string","expression-list-image-clickable-description"),t((o=r.clickableInfo)==null?void 0:o.hoveredImage,"clickableInfo.hoveredImage","image","expression-list-image-clickable-hovered"),t((i=r.clickableInfo)==null?void 0:i.depressedImage,"clickableInfo.depressedImage","image","expression-list-image-clickable-depressed");break;case"text":t(r.text,"text","string","expression-list-note-text");break;case"folder":t(r.title,"title","string","expression-list-folder-title");break}return e}function yte(r){let e={},t=OL(e,{location:"settings"});return t(r.graph.xAxisLabel,"xAxisLabel","string","settings-xaxis-label"),t(r.graph.yAxisLabel,"yAxisLabel","string","settings-yaxis-label"),e}function xte(r){let e={},t=OL(e,{location:"object",id:r.id});return t(r.label,"label","string","geometry-object-label"),r.type==="image"&&t(r.url,"url","image","geometry-object-image-url"),e}function RL(r){let e={};if(r.type=="graph"){let t=r.graphState.expressions.list;for(let i of t){let n=bte(i);for(let a in n)e[a]=n[a]}let o=yte(r.graphState);for(let i in o)e[i]=o[i]}else{let t=r.geometryState.objects;for(let o in t){let i=xte(t[o]);for(let n in i)e[n]=i[n]}}return e}function x5(r,e,t){var i;let o=__dcg_shared_module_exports__['Uc'](r);if(t==="graph"){let n={},a=(i=o.expressions)==null?void 0:i.list,s=Array.isArray(a)?a:[];for(let l of s)n[l.id]=l;for(let l in e){let c=DL(l);c.location=="expression"?CS(n[c.id],c.path,e[l].value):CS(o.graph,c.path,e[l].value)}}else if(o.objects)for(let n in e){let a=DL(n);a.location=="object"&&CS(o.objects[a.id],a.path,e[n].value)}return o}function vte(r){return{...r,version:"0"}}var v5=vte;var wte={centerX:0,centerY:0,size:15},Ste={scale:1,unit:"",visible:!1,showLegend:!1};function Tte(r){let e=r.objects||{},t=__dcg_shared_module_exports__['Uc'](e);for(let o in t){let i=t[o];i.label&&(i.showLabel=!0)}return{version:"1",objects:t,viewport:r.viewport||wte,customTools:r.customTools||{},grid:r.grid||Ste}}var w5=Tte;function kte(r){return(r.type==="point"||r.type==="glider")&&!r.draggable}function Ete(r){let e=r.objects||{},t=__dcg_shared_module_exports__['Uc'](e),o=__dcg_shared_module_exports__['Uc'](r.grid);for(let i in t){let n=t[i];kte(n)&&(n.draggable=!0),n.type==="angle"&&n.showLabel&&!n.label&&(n.label="{angle}"),n.type==="segment"&&n.showLabel&&!n.label&&(n.label="{length}")}return o.unit="",o.scale=1,{version:"2",objects:t,viewport:r.viewport,customTools:r.customTools||{},grid:o}}var S5=Ete;function FL(r){return r&&(r.type==="circle"||r.type==="compass")}function Ite(r){let e=__dcg_shared_module_exports__['Uc'](r.objects||{});for(let t in e){let o=e[t];if(o.type==="point")o.y=-o.y;else if(o.type==="glider"){let i=e[o.parents.host];FL(i)&&(o.t=-o.t)}else if(o.type==="intersection"){let i=e[o.parents.host1],n=e[o.parents.host2];FL(i)&&FL(n)&&(o.negRoot=!o.negRoot)}}return{version:"3",objects:e,viewport:r.viewport,customTools:r.customTools||{},graphSettings:{showGrid:!!(r.grid||{}).visible,showAxes:!1,showAxisNumbers:!1}}}var T5=Ite;function Cte(r){let e=__dcg_shared_module_exports__['Uc'](r.objects||{});for(let t in e){let o=e[t];o.draggable===!1&&(o.locked=!0),delete o.draggable}return{...r,version:"4",objects:e}}var k5=Cte;var _S=[v5,w5,S5,T5,k5],_te="4";function GL(r){let e=parseInt(_te,10),t=parseInt(r.version||"0",10);for(t>e&&typeof console!="undefined"&&console.warn&&console.warn(`Loading saved state with version ${t}, but last known version is ${e}. States saved in a newer version of the geometry tool may not load correctly in older versions of the tool.`),_S[t]||typeof console!="undefined"&&console.warn&&console.warn(`State has invalid version: ${t}. If a version is present, it should be a non-negative integer less than or equal to ${e}.`),t===0&&(r=_S[0](r));t<e;)t+=1,_S[t]&&(r=_S[t](r));return r}var Mte=!1;function lu(r,e){let t=e[r];return t.type==="transformed-object"?lu(t.parents.object,e):t.type}function E5(r){switch(r){case"circle":case"compass":case"arc":return!0}return!1}function Ate(r,e,t){let o=lu(e,t);if(o==="circle"||o==="compass"){let i=r/(2*Math.PI);return i<0?i+1:i}return r}function I5(r){switch(r){case"scaled-rotation":case"vector":return!0}return!1}function Lte(r){switch(r){case"point":case"midpoint":case"glider":case"intersection":case"polygon":return"P";case"line":case"segment":case"ray":case"vector":case"parallel":case"perpendicular":return"L";case"circle":case"compass":return"C";case"arc":case"angle":return"A";case"image":return"I";case"dilation":case"rotation":case"translation":case"reflection":case"scaled-rotation":return"T";case"transformed-object":return"T";default:return r}}function C5(r){return r.hasOwnProperty("objects")&&!r.hasOwnProperty("expressions")}function uc(r){let e=!Mte,t=GL(r),o={},i={},n=T=>{if(i.hasOwnProperty(T))return i[T];let I=lu(T,t.objects);if(e&&!I5(I)){let G=o.token||1;o.token=G+1;let N="\\token{"+G+"}";return i[T]=N,N}let P=Lte(I),A=o[P]||1;o[P]=A+1;let D=P+"_{"+A+"}";return i[T]=D,D};function a(T){let I=o[T]||1;return o[T]=I+1,T+"_{"+I+"}"}let s=(T,I,P)=>n(T)+"=\\operatorname{"+I+"}\\left("+P.map(n).join(",")+"\\right)",l=T=>`\\operatorname{segment}\\left(${T}.\\operatorname{start},${T}.\\operatorname{end}\\right)`,{centerX:c,centerY:p,size:h}=t.viewport;h*=1.25;let g=1,m=h/(1+g),b=m*g,x={version:11,randomSeed:"",expressions:{list:[]},graph:{product:"geometry-calculator",viewport:{xmin:c-m,xmax:c+m,ymin:p-b,ymax:p+b},showGrid:!1,showXAxis:!1,showYAxis:!1,squareAxes:!0,degreeMode:!0}};t.graphSettings.showGrid&&(x.graph.showGrid=!0,x.graph.xAxisMinorSubdivisions=1,x.graph.yAxisMinorSubdivisions=1,x.graph.xAxisStep=1,x.graph.yAxisStep=1);let E=x.expressions.list,S=[],k=[];for(let T in t.objects){let I=t.objects[T],P=lu(I.id,t.objects),A={id:I.id,type:"expression",color:I.color,hidden:!!I.hidden};if(e&&!I5(P)&&(A.folderId=__dcg_shared_module_exports__['je']),I.locked&&(A.dragMode="NONE"),!I.hidden&&I.label&&I.showLabel){if(A.label=I.label,A.showLabel=!0,P==="segment"&&I.label.indexOf("{length}")!==-1)if(I.label==="{length}")A.label="";else{let D=a("l"),G=D+"=\\operatorname{round}\\left(\\operatorname{length}\\left("+n(I.id)+"\\right),2\\right)";k.push({id:"len-"+A.id,type:"expression",latex:G}),A.label=A.label.replace(/\{length\}/g,"${"+D+"}")}if(P==="angle"&&I.label.indexOf("{angle}")!==-1)if(I.label==="{angle}")A.label="";else{let D=a("a"),G=D+"=\\operatorname{round}\\left("+n(I.id)+"\\right)";k.push({id:"angle-"+A.id,type:"expression",latex:G}),A.label=A.label.replace(/\{angle}/g,"${"+D+"}\xB0")}if(P==="polygon"&&I.label.indexOf("{area}")!==-1)if(I.label==="{area}")A.label="";else{let D=a("a"),G=D+"=\\operatorname{round}\\left(\\operatorname{area}\\left("+n(I.id)+"\\right),2\\right)";k.push({id:"area-"+A.id,type:"expression",latex:G}),A.label=A.label.replace(/\{area\}/g,"${"+D+"}")}if(P==="polygon"&&I.label.indexOf("{perimeter}")!==-1){let D=a("p"),G=D+"=\\operatorname{round}\\left(\\operatorname{perimeter}\\left("+n(I.id)+"\\right),2\\right)";k.push({id:"perim-"+A.id,type:"expression",latex:G}),A.label=A.label.replace(/\{perimeter\}/g,"${"+D+"}")}}switch(I.type){case"point":{let L=I.x===null?0:I.x,q=I.y===null?0:I.y;A.latex=n(I.id)+"=\\left("+__dcg_shared_module_exports__['$'](L)+","+__dcg_shared_module_exports__['$'](q)+"\\right)";break}case"glider":{let L=lu(I.parents.host,t.objects),q=n(I.parents.host);L==="vector"&&(q=l(q)),A.latex=n(I.id)+"=\\operatorname{glider}\\left("+q+","+__dcg_shared_module_exports__['$'](Ate(I.t,I.parents.host,t.objects))+"\\right)";break}case"intersection":let D=lu(I.parents.host1,t.objects),G=lu(I.parents.host2,t.objects),N=n(I.parents.host1),U=n(I.parents.host2);D==="vector"&&(N=l(N)),G==="vector"&&(U=l(U));let K=I.negRoot;(E5(D)&&!E5(G)||G==="arc")&&(K=!K);let H=K?[N,U]:[U,N];A.latex=n(T)+"=\\operatorname{intersection}\\left("+H.join(",")+"\\right)";break;case"midpoint":A.latex=s(I.id,I.type,[I.parents.straight]);break;case"circle":A.latex=s(I.id,I.type,[I.parents.point1,I.parents.point2]);break;case"arc":A.latex=s(I.id,I.type,[I.parents.point1,I.parents.point2,I.parents.point3]);break;case"compass":A.latex=s(I.id,"circle",[I.parents.center,I.parents.straight]);break;case"line":case"segment":case"ray":case"vector":A.latex=s(I.id,I.type,[I.parents.point1,I.parents.point2]);break;case"parallel":case"perpendicular":A.latex=s(I.id,I.type,[I.parents.straight,I.parents.point]);break;case"polygon":A.latex=s(I.id,I.type,I.parents.points);break;case"angle":A.latex=s(I.id,I.type,[I.parents.point1,I.parents.point2,I.parents.point3]);break;case"transformed-object":A.latex=n(I.id)+"="+n(I.parents.transformation)+"\\left("+n(I.parents.object)+"\\right)";break;case"dilation":A.latex=n(I.id)+"\\left(x\\right)=\\operatorname{dilate}\\left(x,"+n(I.parents.center)+","+(I.scaleFactor||"0/0")+"\\right)";break;case"reflection":A.latex=n(I.id)+"\\left(x\\right)=\\operatorname{reflect}\\left(x,"+n(I.parents.straight)+"\\right)";break;case"translation":A.latex=n(I.id)+"\\left(x\\right)=\\operatorname{translate}\\left(x,"+n(I.parents.from)+","+n(I.parents.to)+"\\right)";break;case"rotation":A.latex=n(I.id)+"\\left(x\\right)=\\operatorname{rotate}\\left(x,"+n(I.parents.center)+","+(I.angle||"0/0")+"\\right)";break;case"scaled-rotation":let w=n(I.parents.center),F=n(I.parents.from),V=n(I.parents.to);A.latex=n(I.id)+`\\left(x\\right)=\\operatorname{rotate}\\left(\\operatorname{dilate}\\left(x,${w},\\frac{\\left|${V}-${w}\\right|}{\\left|${F}-${w}\\right|}\\right),${w},\\operatorname{directedangle}\\left(${F},${w},${V}\\right)\\right)`;break;case"image":break;default:return I}A.latex&&(A.folderId===__dcg_shared_module_exports__['je']?S.push(A):k.push(A))}return E.push({type:"folder",id:__dcg_shared_module_exports__['je'],title:"geometry",secret:!0}),E.push.apply(E,S),E.push.apply(E,k),x}var MS=class r{constructor(e){this.node=e;this.internal=e}isError(){return this.internal.type==="Error"}isList(){return __dcg_shared_module_exports__['Dc'](this.internal)}isTicker(){return this.internal.type==="Ticker"}getValueType(){return this.internal.valueType}getConstantValue(){return __dcg_shared_module_exports__['Ec'](this.internal)}getDependencies(){return this.internal.getDependencies()}getExports(e){return this.internal.getExports(e)}getLegalExports(e){return this.internal.getLegalExports(e)}tryGetConcreteTree(e,t){let o=__dcg_shared_module_exports__['Jc'](this.internal,e,t);return new r(o)}getConcreteTree(e,t){return new r(__dcg_shared_module_exports__['Jc'](this.internal,e,t))}printLatex(){if(this.internal.printLatex)return this.internal.printLatex()}substitute(e){if(!this.internal.substitute)return;let t={};for(let i in e)t[i]=e[i].internal;let o=this.internal.substitute(t);return new r(o)}simpleFunctionExpression(){var t,o;let e=(o=(t=this.internal).simpleFunctionExpression)==null?void 0:o.call(t);if(e)return new r(e)}getDefinitionInfo(){if(this.internal.type==="FunctionDefinition"){let e=this.internal;return{type:"FunctionDefinition",symbol:e._symbol,parameters:e._argSymbols}}else if(this.internal.type==="Assignment")return{type:"Assignment",symbol:this.internal._symbol}}convertXYRelationToExpression(e,t="y"){let o=this.internal;if(o.type==="Error")return;let i;switch(o.type){case"Assignment":i=new __dcg_shared_module_exports__['yc']([new __dcg_shared_module_exports__['vc'](o._symbol),o._expression]);break;case"CallAssignment":{let n=o;i=new __dcg_shared_module_exports__['yc']([n._lhs,n._rhs]);break}case"Equation":i=o._difference;break;case"FunctionDefinition":{let n=o;if(n._argSymbols.length!==1)return;i=new __dcg_shared_module_exports__['yc']([new __dcg_shared_module_exports__['vc'](t),n._expression]);break}default:{let n=this.tryGetConcreteTree(e,fs.builtInFrame);if(n.internal.valueType!==__dcg_shared_module_exports__['ua']||n.getDependencies().some(s=>s.toLowerCase()===t.toLowerCase())||!(o instanceof __dcg_shared_module_exports__['uc']))return;i=new __dcg_shared_module_exports__['yc']([new __dcg_shared_module_exports__['vc'](t),o])}}return new r(i)}getConicCoefficientsForExpression(e,t,o){var p;let n=this.getConcreteTree(e,fs.builtInFrame).internal;if(n.type==="Error"||n.valueType!==__dcg_shared_module_exports__['ua'])return;let a=n.getDependencies();if(a.length>2)return;for(let h of a)if(h.toLowerCase()===t.toLowerCase())t=h;else if(h.toLowerCase()===o.toLowerCase())o=h;else return;function s(h){if(h==null||h==null)return 0;if(h.getDependencies().length!==0)throw new Error("Did not expect coefficient to have dependencies");return+h.asValue()}let l=n.type==="IRExpression"?n.getPolynomialCoefficients(t):[],c=[[0,0,0],[0,0,0],[0,0,0]];for(let h of[0,1,2]){let g=(p=l[h])==null?void 0:p.getPolynomialCoefficients(o);for(let m of[0,1,2])c[h][m]=s(g==null?void 0:g[m])}return c}repr(e,t){return this.internal.repr(e,t)}getCompiledFunction(e){if(this.internal instanceof __dcg_shared_module_exports__['Cc'])return this.internal.getCompiledFunction(e)}getAllUpdateSymbols(){var t;let e=[];return e.push(...this.internal.getUpdateSymbols()),this.internal.type==="Ticker"&&e.push(...this.internal.handler.getUpdateSymbols()),(t=this.internal.metaData)!=null&&t.clickHandler&&e.push(...this.internal.metaData.clickHandler.getUpdateSymbols()),e}static parseFunctionSignature(e){let t=fs.parser.parse(e);if(t.type!=="FunctionCall")return;let o=t;if(o.args.every(i=>i.type==="Identifier"))return{functionName:o._identifier._symbol,parameters:o.args.map(i=>i._symbol)}}};var NL={showGrid:!0,showXAxis:!0,showYAxis:!0,xAxisStep:0,yAxisStep:0,xAxisScale:"linear",yAxisScale:"linear",xAxisMinorSubdivisions:0,yAxisMinorSubdivisions:0,xAxisArrowMode:__dcg_shared_module_exports__['Xd'].NONE,yAxisArrowMode:__dcg_shared_module_exports__['Xd'].NONE,xAxisLabel:"",yAxisLabel:"",xAxisNumbers:!0,yAxisNumbers:!0,polarMode:!1,polarNumbers:!0,degreeMode:!1,randomSeed:"",restrictGridToFirstQuadrant:!1,userLockedViewport:!1,complex:!1},_5={threeDMode:!1,worldRotation3D:[],axis3D:[0,0,1],speed3D:0,userLockedRotation:!1,showPlane3D:!0,showNumbers3D:!0,plane3dOpacity:"",showAxis3D:!0,showAxisLabels3D:!0,showBox3D:!0},Pte={squareAxes:!0},Dte={..._5,...Pte,product:"graphing",includeFunctionParametersInRandomSeed:!0,hideCustomColors:!1};function M5(r){return r in _5}var Bo={...NL,...Dte},A5=Object.keys(NL);function L5(r){return r in NL}var lg=r=>isFinite(r)&&(r>0||r===0);var P5={folderId:"",text:"",secret:!1,readonly:!1};function AS(r){return{...P5,...r}}function D5(r){return __dcg_shared_module_exports__['Td'](P5,r)}function nl(r,e){return typeof r!="string"?!1:r in e}var VL={OPEN:!0,CROSS:!0,POINT:!0,SQUARE:!0,PLUS:!0,TRIANGLE:!0,DIAMOND:!0,STAR:!0},BL={SOLID:!0,DASHED:!0,DOTTED:!0},R5={NONE:!0,AUTO:!0,X:!0,Y:!0,XY:!0},Rte={POINTS:!0,LINES:!0,POINTS_AND_LINES:!0},LS={POINTS:"POINTS",LINES:"LINES",POINTS_AND_LINES:"POINTS_AND_LINES"},Fte={default:!0,center:!0,center_auto:!0,auto_center:!0,above:!0,above_left:!0,above_right:!0,above_auto:!0,below:!0,below_left:!0,below_right:!0,below_auto:!0,left:!0,auto_left:!0,right:!0,auto_right:!0};function Gte(r){return{id:r.id,type:r.type,columns:r.columns.map(Nte)}}function Nte(r){return{id:r.id,latex:r.latex,color:r.color,hidden:r.hidden,pointStyle:r.pointStyle,pointOutline:r.pointOutline,pointSize:r.pointSize,pointOpacity:r.pointOpacity,lineStyle:r.lineStyle,lineWidth:r.lineWidth,lineOpacity:r.lineOpacity,points:r.points,lines:r.lines,dragMode:r.dragMode,values:r.values.slice()}}function Vte(r){let e=["latex","color","lineStyle","lineWidth","lineOpacity","pointStyle","pointSize","movablePointSize","pointOpacity","points","lines","fill","fillOpacity","hidden","secret","dragMode","label","showLabel","labelSize","labelOrientation","interactiveLabel","readonly"],t={id:r.id,type:r.type};return e.forEach(o=>{r.hasOwnProperty(o)&&(t[o]=r[o])}),r.hasOwnProperty("parametricDomain")&&(t.parametricDomain={min:r.parametricDomain.min,max:r.parametricDomain.max}),r.hasOwnProperty("parametricDomain3Du")&&(t.parametricDomain3Du={min:r.parametricDomain3Du.min,max:r.parametricDomain3Du.max}),r.hasOwnProperty("parametricDomain3Dv")&&(t.parametricDomain3Dv={min:r.parametricDomain3Dv.min,max:r.parametricDomain3Dv.max}),r.hasOwnProperty("parametricDomain3Dr")&&(t.parametricDomain3Dr={min:r.parametricDomain3Dr.min,max:r.parametricDomain3Dr.max}),r.hasOwnProperty("parametricDomain3Dphi")&&(t.parametricDomain3Dphi={min:r.parametricDomain3Dphi.min,max:r.parametricDomain3Dphi.max}),r.hasOwnProperty("polarDomain")&&(t.polarDomain={min:r.polarDomain.min,max:r.polarDomain.max}),r.hasOwnProperty("domain")&&(t.domain={min:r.domain.min,max:r.domain.max}),r.slider&&(r.slider.hardMin&&(t.sliderBounds=t.sliderBounds||{},t.sliderBounds.min=r.slider.min),r.slider.hardMax&&(t.sliderBounds=t.sliderBounds||{},t.sliderBounds.max=r.slider.max),r.slider.step&&(t.sliderBounds=t.sliderBounds||{},t.sliderBounds.step=r.slider.step),t.playing=!!r.slider.isPlaying),t}function Bte(r){return{id:r.id,type:r.type,hidden:r.hidden,secret:r.secret}}function Ute(r){return{id:r.id,type:r.type,hidden:r.hidden,secret:r.secret,title:r.title}}function zte(r){return{id:r.id,type:r.type,secret:r.secret,text:r.text}}function cu(r){switch(r.type){case"expression":return Vte(r);case"table":return Gte(r);case"folder":return Ute(r);case"image":return Bte(r);case"text":return zte(r);default:return r}}function cg(r,e){return r.hasOwnProperty("id")?r.id+"":e.generateId()}function qte(r,e){var o,i,n,a,s,l,c,p,h,g;let t={type:"expression",id:cg(r,e)};if(r.hasOwnProperty("latex")&&(t.latex=r.latex+""),r.hasOwnProperty("color")&&(t.color=r.color+""),r.hasOwnProperty("points")&&(t.points=!!r.points),r.hasOwnProperty("lines")&&(t.lines=!!r.lines),r.hasOwnProperty("style")){(o=console==null?void 0:console.warn)==null||o.call(console,"As of API v1.1 the 'style' property is deprecated and has been split into 'pointStyle' and 'lineStyle'.");let m=r.style;nl(m,VL)?t.pointStyle=m:nl(m,BL)?t.lineStyle=m:(i=console==null?void 0:console.warn)==null||i.call(console,"Invalid style: '"+m+"'.")}if(r.hasOwnProperty("pointStyle")&&(nl(r.pointStyle,VL)?t.pointStyle=r.pointStyle:(n=console==null?void 0:console.warn)==null||n.call(console,"Invalid pointStyle: '"+r.pointStyle+"'.")),r.hasOwnProperty("pointSize")&&(t.pointSize=""+r.pointSize),r.hasOwnProperty("movablePointSize")&&(t.movablePointSize=""+r.movablePointSize),r.hasOwnProperty("pointOpacity")&&(t.pointOpacity=""+r.pointOpacity),r.hasOwnProperty("lineStyle")&&(nl(r.lineStyle,BL)?t.lineStyle=r.lineStyle:(a=console==null?void 0:console.warn)==null||a.call(console,"Invalid lineStyle: '"+r.lineStyle+"'.")),r.hasOwnProperty("lineWidth")&&(t.lineWidth=""+r.lineWidth),r.hasOwnProperty("lineOpacity")&&(t.lineOpacity=""+r.lineOpacity),r.hasOwnProperty("hidden")&&(t.hidden=!!r.hidden),r.hasOwnProperty("readonly")&&(t.readonly=!!r.readonly),r.hasOwnProperty("secret")&&(t.secret=!!r.secret),r.hasOwnProperty("sliderBounds")&&r.sliderBounds&&(t.slider={min:__dcg_shared_module_exports__['_'](r.sliderBounds.min),max:__dcg_shared_module_exports__['_'](r.sliderBounds.max),step:__dcg_shared_module_exports__['_'](r.sliderBounds.step)},t.slider.min&&(t.slider.hardMin=!0),t.slider.max&&(t.slider.hardMax=!0)),r.hasOwnProperty("playing")){let{playing:m}=r;typeof m!="boolean"?(s=console==null?void 0:console.warn)==null||s.call(console,`Invalid value for 'playing'. Expected a boolean but got '${m}'.`):(t.slider||(t.slider={}),t.slider.isPlaying=m)}return r.hasOwnProperty("parametricDomain3Du")&&r.parametricDomain3Du&&(t.parametricDomain3Du={min:__dcg_shared_module_exports__['_'](r.parametricDomain3Du.min),max:__dcg_shared_module_exports__['_'](r.parametricDomain3Du.max)}),r.hasOwnProperty("parametricDomain3Dv")&&r.parametricDomain3Dv&&(t.parametricDomain3Dv={min:__dcg_shared_module_exports__['_'](r.parametricDomain3Dv.min),max:__dcg_shared_module_exports__['_'](r.parametricDomain3Dv.max)}),r.hasOwnProperty("parametricDomain3Dr")&&r.parametricDomain3Dr&&(t.parametricDomain3Dr={min:__dcg_shared_module_exports__['_'](r.parametricDomain3Dr.min),max:__dcg_shared_module_exports__['_'](r.parametricDomain3Dr.max)}),r.hasOwnProperty("parametricDomain3Dphi")&&r.parametricDomain3Dphi&&(t.parametricDomain3Dphi={min:__dcg_shared_module_exports__['_'](r.parametricDomain3Dphi.min),max:__dcg_shared_module_exports__['_'](r.parametricDomain3Dphi.max)}),r.hasOwnProperty("parametricDomain")&&r.parametricDomain?(t.parametricDomain={min:__dcg_shared_module_exports__['_'](r.parametricDomain.min),max:__dcg_shared_module_exports__['_'](r.parametricDomain.max)},r.hasOwnProperty("domain")&&((l=console==null?void 0:console.warn)==null||l.call(console,"Both 'parametricDomain' and the deprecated 'domain' property were specified. Using 'parametricDomain'."))):r.hasOwnProperty("domain")&&((c=console==null?void 0:console.warn)==null||c.call(console,"The 'domain' property is deprecated.Use 'parametricDomain' to specify the domain for parametric functions"),t.parametricDomain={min:__dcg_shared_module_exports__['_'](r.domain.min),max:__dcg_shared_module_exports__['_'](r.domain.max)}),r.hasOwnProperty("polarDomain")&&r.polarDomain&&(t.polarDomain={min:__dcg_shared_module_exports__['_'](r.polarDomain.min),max:__dcg_shared_module_exports__['_'](r.polarDomain.max)}),r.hasOwnProperty("dragMode")&&(nl(r.dragMode,R5)?t.dragMode=r.dragMode:(p=console==null?void 0:console.warn)==null||p.call(console,"Invalid dragMode: '"+r.dragMode+"'.")),r.hasOwnProperty("label")&&(t.label=r.label+""),r.hasOwnProperty("showLabel")&&(t.showLabel=!!r.showLabel),r.hasOwnProperty("showAngleLabel")&&(t.showAngleLabel=!!r.showAngleLabel),r.hasOwnProperty("labelSize")&&(typeof r.labelSize=="string"?t.labelSize=r.labelSize:(h=console==null?void 0:console.warn)==null||h.call(console,"Invalid labelSize: "+r.labelSize)),r.hasOwnProperty("labelOrientation")&&(nl(r.labelOrientation,Fte)?t.labelOrientation=r.labelOrientation:(g=console==null?void 0:console.warn)==null||g.call(console,"Invalid labelOrientation: "+r.labelOrientation)),r.hasOwnProperty("fill")&&(t.fill=!!r.fill),r.hasOwnProperty("fillOpacity")&&(t.fillOpacity=""+r.fillOpacity),t}function Hte(r,e){var o,i,n,a,s,l;let t={id:cg(r,e)};return r.hasOwnProperty("latex")&&(t.latex=r.latex+""),r.hasOwnProperty("color")&&(t.color=r.color+""),r.hasOwnProperty("hidden")&&(t.hidden=!!r.hidden),r.hasOwnProperty("points")&&(t.points=!!r.points),r.hasOwnProperty("lines")&&(t.lines=!!r.lines),r.hasOwnProperty("values")&&r.values&&(t.values=r.values.map(c=>c+"")),r.hasOwnProperty("pointStyle")&&(nl(r.pointStyle,VL)?t.pointStyle=r.pointStyle:(o=console==null?void 0:console.warn)==null||o.call(console,"Invalid pointStyle: '"+r.pointStyle+"'.")),r.hasOwnProperty("pointSize")&&(t.pointSize=""+r.pointSize),r.hasOwnProperty("pointOpacity")&&(t.pointOpacity=""+r.pointOpacity),r.hasOwnProperty("lineStyle")&&(nl(r.lineStyle,BL)?t.lineStyle=r.lineStyle:(i=console==null?void 0:console.warn)==null||i.call(console,"Invalid lineStyle: '"+r.lineStyle+"'.")),r.hasOwnProperty("lineWidth")&&(t.lineWidth=""+r.lineWidth),r.hasOwnProperty("lineOpacity")&&(t.lineOpacity=""+r.lineOpacity),r.hasOwnProperty("columnMode")&&((n=console==null?void 0:console.warn)==null||n.call(console,"As of API v1.1 the 'columnMode' property is deprecated and has been split into individual 'points' and 'lines' properties."),r.columnMode===LS.POINTS_AND_LINES?(t.points=!0,t.lines=!0):r.columnMode===LS.LINES?(t.points=!1,t.lines=!0):(t.points=!0,t.lines=!1),t.lines&&!t.points&&r.hasOwnProperty("dragMode")&&r.dragMode!==__dcg_shared_module_exports__['hd'].NONE&&((a=console==null?void 0:console.warn)==null||a.call(console,"A 'lines' value of true and 'points' value of false is only compatible with a dragMode of 'NONE'. Proceeding by setting 'points' to true."),t.points=!0),nl(r.columnMode,Rte)||(s=console==null?void 0:console.warn)==null||s.call(console,"Invalid columnMode: '"+r.columnMode+"'.")),r.hasOwnProperty("dragMode")&&(nl(r.dragMode,R5)?t.dragMode=r.dragMode===__dcg_shared_module_exports__['hd'].AUTO?__dcg_shared_module_exports__['hd'].NONE:r.dragMode:(l=console==null?void 0:console.warn)==null||l.call(console,"Invalid dragMode: '"+r.dragMode+"'.")),t}function Kte(r,e){let t={type:"table",id:cg(r,e)};return r.hasOwnProperty("columns")&&r.columns&&(t.columns=r.columns.map(o=>Hte(o,e))),t}function Wte(r,e){let t={type:"folder",id:cg(r,e)};return r.hasOwnProperty("hidden")&&(t.hidden=!!r.hidden),r.hasOwnProperty("title")&&(t.title=r.title),t}function O5(r,e){let t={type:"text",id:cg(r,e)};return r.hasOwnProperty("text")&&(t.text=r.text),r.hasOwnProperty("secret")&&(t.secret=!!r.secret),r.hasOwnProperty("readonly")&&(t.readonly=!!r.readonly),t}function $te(r,e){let t={type:"image",id:cg(r,e)};return r.hasOwnProperty("hidden")&&(t.hidden=!!r.hidden),t}function PS(r,e,t){var i,n,a;let o=r.type;if(e&&o&&o!==e){(i=console==null?void 0:console.warn)==null||i.call(console,"Cannot change type of expression from '"+e+"' to '"+o+"'.");return}if(e==="text"&&o===void 0)return O5(r,t);switch(o){case void 0:case"expression":return qte(r,t);case"image":return $te(r,t);case"table":return Kte(r,t);case"folder":return Wte(r,t);case"text":return O5(r,t);default:if(e){(n=console==null?void 0:console.warn)==null||n.call(console,"Cannot modify expressions of type: '"+e+"' through the API.");return}else{(a=console==null?void 0:console.warn)==null||a.call(console,"Invalid expression type: '"+o+"'.");return}}}var ty=class{constructor(e){this.usedIds=new Set;this.nextId=0;var t;if(e){for(let o of e.expressions.list)if(this.usedIds.add(o.id),o.type==="table")for(let i of(t=o.columns)!=null?t:[])i.id&&this.usedIds.add(i.id)}}generateId(){let e;do e=(this.nextId++).toString();while(this.usedIds.has(e));return this.usedIds.add(e),e}};function DS(r,e){var t,o,i,n,a,s;switch(r.type){case"expression":return{...r,id:(t=r.id)!=null?t:e.generateId()};case"folder":return{...r,id:(o=r.id)!=null?o:e.generateId()};case"text":return{...r,id:(i=r.id)!=null?i:e.generateId()};case"image":return{...r,id:(n=r.id)!=null?n:e.generateId()};case"table":return{...r,id:(a=r.id)!=null?a:e.generateId(),columns:(s=r.columns)==null?void 0:s.map(l=>{var c;return{...pc,...l,id:(c=l.id)!=null?c:e.generateId()}})};default:throw new Error("Unknown item type")}}function jte(r=[],e){var s,l,c,p,h,g,m,b,x,E;let t=[],o=new ty;if((e==null?void 0:e.product)==="geometry-calculator"){t.push({type:"folder",id:__dcg_shared_module_exports__['je'],title:"geometry",secret:!0});for(let S of(s=e==null?void 0:e.constructions)!=null?s:[]){let k=DS(S,o);k.type!=="folder"&&(k={...k,folderId:__dcg_shared_module_exports__['je']}),t.push(k)}}for(let S of r)t.push(DS(S,o));let i=(l=e==null?void 0:e.viewport)!=null?l:{xmax:10,xmin:-10,ymax:10,ymin:-10},n=Vn(i),a={version:12,randomSeed:(c=e==null?void 0:e.randomSeed)!=null?c:"",expressions:{list:t},graph:{viewport:n,__viewportEvaluatedForBackMigration:i,degreeMode:(p=e==null?void 0:e.degreeMode)!=null?p:!0,squareAxes:(h=e==null?void 0:e.squareAxes)!=null?h:!0,showGrid:(g=e==null?void 0:e.showGrid)!=null?g:!0,showXAxis:(m=e==null?void 0:e.showXAxis)!=null?m:!0,showYAxis:(b=e==null?void 0:e.showYAxis)!=null?b:!0,product:(x=e==null?void 0:e.product)!=null?x:"graphing",complex:(E=e==null?void 0:e.complex)!=null?E:!1,threeDMode:(e==null?void 0:e.product)==="graphing-3d"}};return e!=null&&e.xAxisLabel&&(a.graph.xAxisLabel=e.xAxisLabel),e!=null&&e.yAxisLabel&&(a.graph.yAxisLabel=e.yAxisLabel),e!=null&&e.ticker&&(a.expressions.ticker=e.ticker),e!=null&&e.geometryToolbar&&(a.geometryToolbar=e.geometryToolbar),ba(a)}function Yte(r,e){let t=so(r),o=new ty(t),i=e.map(a=>DS(a,o)),n=__dcg_shared_module_exports__['Uc'](t);return ba({...n,expressions:{...n.expressions,list:i}})}function Xte(r,e,t){let o=i=>{switch(t.strategy){case"exact":return i;case"expressions-only":return i.expressions.list;case"expressions-only-omit-empty":return i.expressions.list.filter(n=>n.type!=="expression"||!!n.latex);case"normalize-viewport-and-expressions":{let n=su(i),a=Jte(n.graph),s={...i.expressions,list:Zte(i.expressions.list)};return{...i,graph:a,expressions:s}}default:return t.strategy,i}};return __dcg_shared_module_exports__['s'](o(r),o(e))}function Jte(r){if(r.squareAxes!==!1){let{viewport:e}=r,t={...r,squareAxes:!0,viewport:{...e,ymin:void 0,ymax:void 0,yCenter:(e.ymax+e.ymin)/2}};return delete t.__v12ViewportLatexStash,t}return r}function Zte(r){let e=1,t={},o=i=>(t[i]||(e++,t[i]=e),t[i].toString());return r.map(i=>{let n={...i,id:o(i.id)};if(n.type==="expression"&&n.latex){let a=fs.parser.parse(n.latex),s=new fs.ParseNodeQuery(a).printLatex();s&&(n.latex=s)}return"folderId"in n&&n.folderId&&(n.folderId=o(n.folderId)),n})}function Qte(r){var o,i;let e=so(r),t=new Map;for(let n of e.expressions.list)n.type==="image"&&t.set(n.id,{image:n.image_url,depressedImage:(o=n.clickableInfo)==null?void 0:o.depressedImage,hoveredImage:(i=n.clickableInfo)==null?void 0:i.hoveredImage});return t}function ere(r,e){var o,i;let t=__dcg_shared_module_exports__['Uc'](ba(so(r)));for(let n of t.expressions.list)n.type==="image"&&(n.image_url=e(n.image_url),(o=n.clickableInfo)!=null&&o.depressedImage&&(n.clickableInfo.depressedImage=e(n.clickableInfo.depressedImage)),(i=n.clickableInfo)!=null&&i.hoveredImage&&(n.clickableInfo.hoveredImage=e(n.clickableInfo.hoveredImage)));return t}function tre(r){let e=so(r),t=__dcg_shared_module_exports__['Uc'](e);return{...ba(t),graph:{product:"product"in r.graph?r.graph.product:"graphing"}}}function G5(r,e){switch(r.type){case"expression":{let t=UL(e)==="graphing-3d";return __dcg_shared_module_exports__['ve'](r,{is3d:t,defaultLogModeRegressions:!1})}case"folder":return __dcg_shared_module_exports__['he'](r);case"text":return AS(r);case"image":return tg(r);case"table":return rg(r);default:throw new Error("Unknown item type")}}function rre(r,e){let t=so(r),o=__dcg_shared_module_exports__['Uc'](t);return ba({...o,expressions:{...o.expressions,list:o.expressions.list.filter(i=>e(cu(G5(i,r))))}})}function ore(r,e){let t=so(r),o=new ty(t),i=__dcg_shared_module_exports__['Uc'](t);return ba({...i,expressions:{...i.expressions,list:[...i.expressions.list,...e.map(n=>DS(n,o))]}})}function ire(r,e){let t=so(r),o=__dcg_shared_module_exports__['Uc'](t);return ba({...o,graph:{...o.graph,degreeMode:e}})}function nre(r,e){let t=so(r),o=__dcg_shared_module_exports__['Uc'](t);return ba({...o,graph:{...o.graph,complex:e}})}function F5(r,e){r=r.replace(/#/,"");let t=0,o=0,i=0;return r.length==3?(t=parseInt(r.slice(0,1)+r.slice(0,1),16),o=parseInt(r.slice(1,2)+r.slice(1,2),16),i=parseInt(r.slice(2,3)+r.slice(2,3),16)):r.length==6&&(t=parseInt(r.slice(0,2),16),o=parseInt(r.slice(2,4),16),i=parseInt(r.slice(4,6),16)),`rgba(${t},${o},${i},${e})`}function are(r,e){let t=__dcg_shared_module_exports__['Uc'](so(r));for(let o of t.expressions.list)if(o.type=="expression")o.showLabel=!1,o.color!=null&&(o.color=F5(o.color,e));else if(o.type=="table"&&o.columns)for(let i of o.columns)i.color!==void 0&&(i.color=F5(i.color,e));for(let o of t.expressions.list)o.type=="image"&&(o.opacity!==void 0?o.opacity=`(${o.opacity}) * ${e}`:o.opacity=e+"");return ba(t)}function UL(r){var e;switch(r.version){case 9:case 10:case 11:case 12:return(e=r.graph.product)!=null?e:"graphing";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case void 0:return"graphing";default:return"graphing"}}function sre(r){switch(r.version){case 11:case 12:return!!r.graph.complex;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case void 0:return!1;default:return!1}}function lre(r){var t,o,i,n,a,s,l;let e=su(r);return{degreeMode:(t=e.graph.degreeMode)!=null?t:Bo.degreeMode,complex:sre(e),geometryToolbar:pre(e),product:UL(e),showGrid:(o=e.graph.showGrid)!=null?o:Bo.showGrid,showXAxis:(i=e.graph.showXAxis)!=null?i:Bo.showXAxis,showYAxis:(n=e.graph.showYAxis)!=null?n:Bo.showYAxis,xAxisLabel:(a=e.graph.xAxisLabel)!=null?a:Bo.xAxisLabel,yAxisLabel:(s=e.graph.yAxisLabel)!=null?s:Bo.yAxisLabel,squareAxes:(l=e.graph.squareAxes)!=null?l:Bo.squareAxes,viewport:e.graph.viewport}}function cre(r,e){let t=so(r);for(let o of t.expressions.list)if(o.type==="expression"&&o.latex&&fs.parser.parse(o.latex).getExports(__dcg_shared_module_exports__['gd'])[0]===e)return cu(G5(o,r))}function dre(r,e){if(UL(r)!=="geometry-calculator")return r;let t=so(r);return ba({...t,geometryToolbar:e})}function pre(r){if(r)switch(r.version){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case void 0:return;default:return r.graph.product!=="geometry-calculator"?void 0:r.geometryToolbar}}function ure(r){let e=new Map,t=1;for(let o=0;o<r.expressions.list.length;o++){let i=r.expressions.list[o];i.id===__dcg_shared_module_exports__['je']||"folderId"in i&&i.folderId===__dcg_shared_module_exports__['je']?e.set(i.id,{location:"constructions"}):(e.set(i.id,{location:"expression-list",displayIndex:t}),t+=1)}return e}function hre(r){switch(r.version){case void 0:case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:return;case 8:case 9:case 10:case 11:case 12:return r.expressions.ticker;default:return}}var N5={makeCalculatorState:jte,replaceExpressionList:Yte,replaceImageUrls:ere,resetGraphSettingsAndUnsetViewport:tre,filterExpressions:rre,appendExpressions:ore,setDegreeMode:ire,setComplexMode:nre,scaleAllOpacities:are,setGeometryToolbar:dre,findExpressionExportingIdentifier:cre,getAllImageUrls:Qte,getGraphSettings:lre,getItemIdToLocationMap:ure,getTicker:hre,calcStatesEqual:Xte};function gre(r,e){return r==null&&(r=""),__dcg_shared_module_exports__['fd'](r,e)}var mre={parse:gre};function V5(r){let e=__dcg_shared_module_exports__['qc'](r[0],r[1]);return{real:__dcg_shared_module_exports__['rc'](e),imag:__dcg_shared_module_exports__['sc'](e)}}var fre={types:__dcg_shared_module_exports__['Db'],getValueType:r=>r.valueType,isTypeOrListOfType:__dcg_shared_module_exports__['wb'],isType:(r,e)=>r===e,isList:__dcg_shared_module_exports__['qb'],getNumber:function(r){return r.valueType===__dcg_shared_module_exports__['ua']?r.value:r.valueType===__dcg_shared_module_exports__['Va']?__dcg_shared_module_exports__['tc'](__dcg_shared_module_exports__['qc'](r.value[0],r.value[1])):void 0},getNumberList:function(r){return r.valueType===__dcg_shared_module_exports__['ya']?r.value:r.valueType===__dcg_shared_module_exports__['Wa']?r.value.map(e=>__dcg_shared_module_exports__['tc'](__dcg_shared_module_exports__['qc'](e[0],e[1]))):void 0},getComplex:function(r){return r.valueType===__dcg_shared_module_exports__['Va']?V5(r.value):r.valueType===__dcg_shared_module_exports__['ua']?{real:r.value,imag:0}:void 0},getComplexList:function(r){return r.valueType===__dcg_shared_module_exports__['Wa']?r.value.map(V5):r.valueType===__dcg_shared_module_exports__['ya']?r.value.map(e=>({real:e,imag:0})):void 0},getPoint:function(r){if(r.valueType===__dcg_shared_module_exports__['va'])return r.value},getPointList:function(r){if(r.valueType===__dcg_shared_module_exports__['za'])return r.value}};function bre(r){return{viewState:r.viewState,degreeMode:r.degreeMode,complex:r.complex}}function yre(r){return{addedGraphs:r.graphData.addedGraphs,removedGraphs:r.graphData.removedGraphs}}function xre(r){let e=r;return e.branchMode==4?{...e,branchMode:3,showPoint:!0}:r}var vre={Label:__dcg_shared_module_exports__['oa'],parser:mre,ParseNodeQuery:MS,context:__dcg_shared_module_exports__['Ze'],builtInFrame:__dcg_shared_module_exports__['wc'],TypedValue:fre,stateHelpers:N5,CLCalculator:u5,colorHelpers:__dcg_shared_module_exports__['Od'],calculateDiff:b5,applyDiff:g5,migrateToStable:su,extractLocalizationMap:r=>r.type==="graph"?RL({type:"graph",graphState:so(r.graphState)}):RL(r),applyLocalizationMap:x5,numberToDecimalString:__dcg_shared_module_exports__['$'],numberToLatex:__dcg_shared_module_exports__['_'],replaceIdentifierWithLatex:kL,migrateGeoStateToCalcState:uc,makeEvaluatorConfig:bre,getGraphData:yre,replaceMovablePointWithStaticPoint:xre},fs=vre;var On=__dcg_shared_module_exports__['e'](se());ce();ie();var i0=__dcg_shared_module_exports__['e'](se()),{Checkbox:jre}=i0.Components,tt=class extends i0.View{onTap(e){var o,i,n,a;let t=e.target;t&&t.tagName.toLowerCase()==="a"||(i=(o=this.props).disabled)!=null&&i.call(o)||((a=(n=this.props).stopPropagationOnTap)!=null&&a.call(n)&&e.stopPropagation(),this.props.onChange(!this.props.checked(),e))}onInputMount(e){this.inputElement=e,this.inputElement.addEventListener("invalid",()=>{this.update()})}template(){return _("label",{class:()=>{var e,t,o,i,n,a,s;return{"dcg-checkbox":!0,"dcg-checkbox--small":!!((t=(e=this.props).small)!=null&&t.call(e)),"dcg-checked":this.props.checked(),"dcg-disabled":!!((i=(o=this.props).disabled)!=null&&i.call(o)),[(s=(a=(n=this.props).class)==null?void 0:a.call(n))!=null?s:""]:!!this.props.class}},style:()=>{var e,t,o;return(o=(t=(e=this.props).style)==null?void 0:t.call(e))!=null?o:{}},onTap:this.bindFn(this.onTap),children:[d(jre,{"aria-label":()=>{var e,t;return(t=(e=this.props).ariaLabel)==null?void 0:t.call(e)},class:()=>{var e,t;return{"dcg-checkbox__box":!0,"dcg-icon-check":!0,"dcg-checked":this.props.checked(),"dcg-disabled":!!((t=(e=this.props).disabled)!=null&&t.call(e))}},checked:this.props.checked,onChange:()=>{},onMount:this.bindFn(this.onInputMount),disabled:()=>{var e,t;return((t=(e=this.props).disabled)==null?void 0:t.call(e))||void 0},required:()=>{var e,t;return((t=(e=this.props).required)==null?void 0:t.call(e))||void 0},tabIndex:()=>{var e,t,o,i,n;return((n=(t=(e=this.props).tabIndex)==null?void 0:t.call(e))!=null?n:(i=(o=this.props).disabled)!=null&&i.call(o))?-1:0},manageFocus:()=>{var e,t;return(t=(e=this.props).manageFocus)==null?void 0:t.call(e)}}),d("span",{class:u("dcg-checkbox__content"),children:this.props.children})]})}};ce();ie();var Pk=__dcg_shared_module_exports__['e'](se());Vt();__dcg_shared_module_exports__['H']();var Yre=["3d","actions","advancedStyling","audioTraceKeypad","audioTraceSimult","authorFeatures","autoplay","beta3d","clearIntoDegreeMode","clickableObjects","complex","crossOriginSaveTest","debugProgressUpdates","decimalToFraction","defaultLogModeRegressions","degreeMode","folderModules","reflectionArc","disableLighting","disableMouseInteractions","disableScrollFix","disableWebGL2Support","disableWorkerOnZoom","editOnWeb","expressionsCollapsed","fastAutoSave","forceEnableGeometryFunctions","forceLogModeRegressions","forceMobile","forceTouchDevice","hidden","invertedColors","lockViewport","logAria","logInternalErrors","showIDs","maintenance","nativeOnscreenKeypad","outofdom","pauseWhenOffscreen","peelFloatTexture","plaidMode","projectorMode","reflectionArc","reloadcss","replaceCommaWith10Exp","replaceRoundWithReciprocal","restrictedEditing","restrictedFunctions","showIDs","showNavigationWarning","showPerformanceMeter","showQuestsList","showResetButtonOnGraphpaper","simulationFPS","singleExpression","testing","timeInWorker","translucentSurfaces","transparentBackground","typingAsteriskWritesTimesSymbol","ueb","upcomingMaintenance","wireframe","raycastHeatmap","raycastDisableIntervals","ignoreCostEstimate","showEvaluationCopyButtons","reportPositionNone"],Xre=["adaptivePeeling","actions","allowComplex","audio","brailleControls","branding","concat","customRegressions","decimalToFraction","distributions","expressions","expressionsTopbar","folders","functionDefinition","graphpaper","images","intervalComprehensions","keypad","links","logScales","notes","plotImplicits","plotInequalities","plotSingleVariableImplicitEquations","pointsOfInterest","qwertyKeyboard","recursion","settingsMenu","sliders","substitutions","regressionTemplates","trace","zoomButtons","zoomFit"],Jre=["debugScale","debugPeelLayers","nworkers","peelUpsample","recursionDepth","workerThrottle"],Zre=["debugPixelRatio","timeoutLoop","translucentOpacity"];var Qre=r=>__dcg_shared_module_exports__['C'](r)||r==="localhost",HU=r=>{let{search:e,hostname:t}=typeof location!="undefined"?location:typeof window!="undefined"?window.location:new Location;return Qre(t)?new URLSearchParams(r!=null?r:e):new URLSearchParams};function $a(r,e=HU()){let t=e.get(r);if(Yre.includes(r)||r.startsWith("no")&&Xre.includes(r.slice(2)))return e.has(r)&&t!=="false";if(t!=null)return Jre.includes(r)?parseInt(t,10)||void 0:Zre.includes(r)?parseFloat(t)||void 0:t}var n0=(r,e=HU())=>e.has(r);var Ewe=navigator.userAgent.match(/MSIE 8.0/i)!==null,Iwe=navigator.userAgent.match(/MSIE 9.0/i)!==null,$U=navigator.userAgent.match(/MSIE/i)!==null||navigator.userAgent.match(/Trident/i)!==null&&navigator.userAgent.match(/rv:11/i)!==null,Cwe=navigator.userAgent.match(/Edge/i)!==null,ys=navigator.userAgent.match(/iPad/i)!==null,ja=navigator.userAgent.match(/Mobile|Android/i)!==null||$a("forceMobile"),dy=navigator.userAgent.match(/Android/i)!==null,Ya=navigator.userAgent.match(/(iPad|iPhone|iPod)/i)!==null||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,_we=navigator.userAgent.match(/Chrome/i)!==null,a0=navigator.userAgent.match(/Firefox/i)!==null,s0=navigator.userAgent.match(/^((?!chrome|android).)*safari/i)!==null,lo=navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)!==null,jU=navigator.platform.match(/(Win32)/i)!==null,YU=navigator.userAgent.match(/Touch/i)!==null,Mwe=navigator.userAgent.match(/Kindle/i)!==null||navigator.userAgent.match(/Silk/i)!==null,Awe=navigator.userAgent.match(/KeyWeb/i)!==null,bc=window.parent!==window;var XU=Ya||dy||!!navigator.userAgent.match(/webOS/i)||!!navigator.userAgent.match(/BlackBerry/i)||!!navigator.userAgent.match(/Windows Phone/i)||$a("forceTouchDevice");var KU=(()=>{let r=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return r?[parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3]||"0",10)]:null})(),Lwe=(()=>{let r=navigator.appVersion.match(/OS X (\d+)_(\d+)_?(\d+)?/);return r?[parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3]||"0",10)]:null})(),Pwe=(()=>{let r=navigator.appVersion.match(/Chrom(e|ium)\/([0-9]+)\.([0-9]+)\.?([0-9]+)?/);return r?[parseInt(r[2],10),parseInt(r[3],10),parseInt(r[4]||"0",10)]:null})(),l0=!(!("inputMode"in document.createElement("textarea"))||Ya&&KU&&KU[0]<15),Dwe=(()=>{let r=document.createElement("canvas");return!!(r.getContext&&r.getContext("2d"))})(),py=window.matchMedia("(prefers-reduced-motion: reduce)").matches||document.location.search.indexOf("prefersReducedMotion")>=0,JU=()=>document.createElement("video"),Owe=(()=>{let r=JU();return r.canPlayType&&!!r.canPlayType('video/webm; codecs="vp8, vorbis"')})(),Rwe=(async()=>{if(n0("autoplay"))return $a("autoplay");let r=JU();r.src="data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAAu1tZGF0AAACrQYF//+p3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE1NSByMjkwMSA3ZDBmZjIyIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxOCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTMgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MzoweDExMyBtZT1oZXggc3VibWU9NyBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0xIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MSA4eDhkY3Q9MSBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0tMiB0aHJlYWRzPTMgbG9va2FoZWFkX3RocmVhZHM9MSBzbGljZWRfdGhyZWFkcz0wIG5yPTAgZGVjaW1hdGU9MSBpbnRlcmxhY2VkPTAgYmx1cmF5X2NvbXBhdD0wIGNvbnN0cmFpbmVkX2ludHJhPTAgYmZyYW1lcz0zIGJfcHlyYW1pZD0yIGJfYWRhcHQ9MSBiX2JpYXM9MCBkaXJlY3Q9MSB3ZWlnaHRiPTEgb3Blbl9nb3A9MCB3ZWlnaHRwPTIga2V5aW50PTI1MCBrZXlpbnRfbWluPTEgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD00MCByYz1jcmYgbWJ0cmVlPTEgY3JmPTI4LjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IGlwX3JhdGlvPTEuNDAgYXE9MToxLjAwAIAAAAAwZYiEAD//8m+P5OXfBeLGOfKE3xkODvFZuBflHv/+VwJIta6cbpIo4ABLoKBaYTkTAAAC7m1vb3YAAABsbXZoZAAAAAAAAAAAAAAAAAAAA+gAAAPoAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAIYdHJhawAAAFx0a2hkAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAPoAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAACgAAAAWgAAAAAAJGVkdHMAAAAcZWxzdAAAAAAAAAABAAAD6AAAAAAAAQAAAAABkG1kaWEAAAAgbWRoZAAAAAAAAAAAAAAAAAAAQAAAAEAAVcQAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAAATttaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAD7c3RibAAAAJdzdHNkAAAAAAAAAAEAAACHYXZjMQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAACgAFoASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAADFhdmNDAWQACv/hABhnZAAKrNlCjfkhAAADAAEAAAMAAg8SJZYBAAZo6+JLIsAAAAAYc3R0cwAAAAAAAAABAAAAAQAAQAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAEAAAABAAAAFHN0c3oAAAAAAAAC5QAAAAEAAAAUc3RjbwAAAAAAAAABAAAAMAAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTguMTIuMTAw",r.muted=!0,r.playsInline=!0,r.style.display="none";let e=await new Promise(t=>{document.readyState!=="loading"?t(document.body):document.addEventListener("DOMContentLoaded",()=>t(document.body))});e.appendChild(r);try{await r.play()}catch(t){return!1}finally{e.removeChild(r)}return!0})(),WU,c0=(WU=window.matchMedia("(forced-colors: active)"))==null?void 0:WU.matches;var Bt={};__dcg_shared_module_exports__['d'](Bt,{ALT:()=>mP,BACKSPACE:()=>_g,CAPSLOCK:()=>bP,CONTROL:()=>gP,DELETE:()=>d0,DOWN:()=>wi,END:()=>cl,ENTER:()=>ll,ESCAPE:()=>ri,HOME:()=>Td,LEFT:()=>va,META:()=>fP,PAGEDOWN:()=>xc,PAGEUP:()=>yc,RIGHT:()=>wa,SHIFT:()=>gy,SPACEBAR:()=>yP,TAB:()=>xa,UP:()=>en,isBacktick:()=>toe,isEnterOrSpace:()=>Mg,isHelp:()=>roe,isModKeyDown:()=>ioe,isModifierKey:()=>my,isNavigation:()=>zn,isRedo:()=>hy,isSelectAll:()=>eoe,isSwitchPanes:()=>hP,isUndo:()=>uy,lookup:()=>Pe,lookupChar:()=>co});var uy=r=>!r.altKey&&!r.shiftKey&&(r.ctrlKey||r.metaKey)&&(r.key=="z"||r.which==90),hy=r=>!r.altKey&&(r.ctrlKey||r.metaKey)&&(r.key==="y"||r.which==89||r.shiftKey&&(r.key==="Z"||r.key==="z"||r.which===90)),eoe=r=>!r.altKey&&(r.ctrlKey||r.metaKey)&&(r.key==="a"||r.key==="A"||r.which==65),toe=r=>!r.altKey&&!r.ctrlKey&&!r.metaKey&&!r.shiftKey&&(r.key==="`"||r.which==192),roe=r=>!r.altKey&&(r.ctrlKey||r.metaKey)&&(r.key==="/"||r.which==191),hP=r=>r.key==="F6"||r.key==="f6"||r.which===117||r.keyCode===117,_g="Backspace",xa="Tab",ll="Enter",gy="Shift",gP="Control",mP="Alt",fP="Meta",bP="CapsLock",ri="Esc",yP="Space",yc="PageUp",xc="PageDown",cl="End",Td="Home",va="Left",en="Up",wa="Right",wi="Down",d0="Del",ooe={direction:[en,wi,va,wa],line:[Td,cl],page:[yc,xc]},zn=(r,e)=>!!r&&ooe[e].includes(r),ZU={8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",46:"Del",91:"Meta",93:"Meta"},QU={Backspace:_g,Tab:xa,Enter:ll,Shift:gy,Control:gP,Alt:mP,Meta:fP,CapsLock:bP,Escape:ri," ":yP,PageUp:yc,PageDown:xc,End:cl,Home:Td,ArrowLeft:va,ArrowUp:en,ArrowRight:wa,ArrowDown:wi,Delete:d0};function ioe(r){return lo?r.metaKey:r.ctrlKey}var my=r=>{let e=[gy,mP,gP,bP,fP];return!!r.key&&e.includes(r.key)},Mg=r=>Pe(r)===ll||Pe(r)===yP,ez={UIKeyInputUpArrow:en,UIKeyInputDownArrow:wi,UIKeyInputLeftArrow:va,UIKeyInputRightArrow:wa,UIKeyInputEscape:ri,UIKeyInputPageUp:yc,UIKeyInputPageDown:xc},xP=["0123456789abcdefghijklmnopqrstuvwxyz","\xBA\xA1\u2122\xA3\xA2\u221E\xA7\xB6\u2022\xAA\xE5\u222B\xE7\u2202 \u0192\xA9\u02D9 \u2206\u02DA\xAC\xB5 \xF8\u03C0\u0153\xAE\xDF\u2020 \u221A\u2211\u2248\xA5\u03A9","\u201A\u2044\u20AC\u2039\u203A\uFB01\uFB02\u2021\xB0\xB7\xC5\u0131\xC7\xCE\xB4\xCF\u02DD\xD3\u02C6\xD4\uF8FF\xD2\xC2\u02DC\xD8\u220F\u0152\u2030\xCD\u02C7\xA8\u25CA\u201E\u02DB\xC1\xB8"].map(r=>r.split("")),tz=xP[0],rz=xP[1],oz=xP[2],iz={},nz={};for(let r=0;r<tz.length;r++){let e=tz[r];rz[r]!==" "&&(iz[rz[r]]=e.toUpperCase()),oz[r]!==" "&&(nz[oz[r]]=e.toUpperCase())}var Pe=r=>{if(r.key&&QU[r.key])return QU[r.key];if(r.which&&ZU[r.which])return ZU[r.which];if(r.key&&ez[r.key])return ez[r.key]},co=r=>{if(!r.key)return String.fromCharCode(r.which||-1);if(lo&&r.altKey){let e=r.shiftKey?nz:iz;if(e[r.key])return e[r.key]}if(r.key.length===1)return r.key.toUpperCase();if(r.key==="Enter")return"\r";if(r.key==="Tab")return"	"};Vt();var qn=function(r){if(!r)return;let e=r.getBoundingClientRect();return{top:e.top+window.scrollY,left:e.left+window.scrollX}},Si=function(r,e){Object.assign(r.style,e)};function kd(r){return!!(r&&(r.getClientRects().length||"offsetWidth"in r&&r.offsetWidth||"offsetHeight"in r&&r.offsetHeight))}function az(r){if(document.readyState!=="loading")r();else{let e=function(){document.removeEventListener("DOMContentLoaded",e),r()};document.addEventListener("DOMContentLoaded",e)}}function p0(){var r;try{let e=document.activeElement;return e&&e.value?e.selectionStart===e.selectionEnd:!((r=window.getSelection())!=null&&r.toString())}catch(e){return!1}}var noe=500,aoe=document.location.href.indexOf("dcgDebugTouchTracking=dcgYES")!==-1,Ed,Ag;window._touchtracking_id_counter==null&&(window._touchtracking_id_counter=0);window._touchtracking_id_counter+=1;var by="touchtracking_id_"+window._touchtracking_id_counter,To=function(r){Ag&&(Ag.value="("+Date.now()+") "+r+`
`+Ag.value)};function yy(r){if(r.classList.add("dcg-tap-container",by),Ya&&r.style.setProperty("--dcg-minimum-input-font-size","16px"),aoe){Ed&&Ed.remove(),Ed=document.createElement("div"),Si(Ed,{position:"absolute",bottom:"10px",right:"10px"});let e=document.createElement("textarea");e.setAttribute("rows","30"),e.setAttribute("cols","40"),Ed.append(e);let t=document.createElement("div");t.id="dcg-touchtracking-debug-copy",t.classList.add("dcg-btn-blue"),t.innerText="COPY LOGS",Ed.append(t),Ag=Ed.querySelector("textarea"),r.append(Ed),t.addEventListener("mousedown",()=>{Ag&&(Ag.select(),document.execCommand("copy"))},!0),To("monitor touches")}}var Dg=0,Xa=1,Og=2,Lg=3,wc=4,rr=Dg,vP={},xs={},vc=[],wP=0,fy=null,h0=null,Id=!1,u0=null,sz=Id,Cd=function(r){let e=document.activeElement;r.type.startsWith("key")?my(r)||(Id=!0):r.type.startsWith("pointer")&&(Id=!1);let t=!!(e&&Sc(e));e&&!e.closest(".dcg-tap-container."+by)&&(e=null),e!==u0?(u0&&u0.classList.remove("dcg-focus-visible"),e&&(Id||t||e.classList.contains("dcg-always-show-focus-visible"))&&e.classList.add("dcg-focus-visible")):sz!==Id&&e&&!t&&(Id||e.classList.contains("dcg-always-show-focus-visible")?e.classList.add("dcg-focus-visible"):e.classList.remove("dcg-focus-visible")),sz=Id,u0=e};document.addEventListener("keydown",Cd,{capture:!0});document.addEventListener("keydown",Cd);document.addEventListener("pointerdown",Cd);document.addEventListener("pointerdown",Cd,{capture:!0});document.addEventListener("focusin",Cd,{capture:!0});document.addEventListener("focusin",Cd);document.addEventListener("focusout",Cd,{capture:!0});document.addEventListener("focusout",Cd);var lz,Hn=[],uz=function(r){let e=[],t=!1;for(let o=r.length-1;o>=0;o--){let i=r[o];i.classList.contains("dcg-touchtracking-prevent-dom-mutations")?t=!0:i.classList.contains("dcg-touchtracking-allow-dom-mutations")&&(t=!1),t||e.push(i)}return e.reverse(),e},SP=function(r){if(!(r instanceof Element))return[];let e=r.closest(".dcg-tap-container."+by);if(!e)return[];let t=r,o=[];for(;t;){if(o.push(t),t===e)return o;t=t.parentNode}return[]},g0=function(r,e){h0=null,rr=r,To("beginMode:"+rr),rr===Xa?vc=SP(e.originalEvent.touches[0].target):vc=SP(e.target),uz(vc).forEach(o=>{o.classList.add("dcg-depressed")}),vc.forEach(o=>{let i=re(o);i.data({originalScrollTop:i.scrollTop(),originalScrollLeft:i.scrollLeft()})}),xs={}};function Sc(r){let e=["text","password","email","number","url","search"];return r.matches("input")&&e.indexOf(r.type)>=0||r.matches('textarea, [role="textbox"], [contenteditable=true]')||r.classList.contains("dcg-mathquill-input-span")}var Rg=function(r){if(!(r instanceof Element))return!1;let e=r.closest(".dcg-tap-container");return e?e.matches(".dcg-tap-container."+by):!1},soe=function(r){return rr!==Lg&&!Sc(r)&&Rg(r)},Fg=function(r,e){h0=null;let t=!1;To("endMode:"+rr),document.querySelectorAll(".dcg-depressed").forEach(i=>{i.classList.remove("dcg-depressed")});let o=document.activeElement;if(!fz(r.target)&&o&&soe(o))try{o.blur()}catch(i){}if(vc.forEach(i=>{let n=re(i),a=n.data("originalScrollTop")-n.scrollTop(),s=n.data("originalScrollLeft")-n.scrollLeft();(a||s)&&(xs.scroll=!0)}),xs["dcg-tapstart"]===1&&xs["dcg-tapend"]===1&&!xs["dcg-tapcancel"]&&!xs.scroll){To("potential dcg-tap");let i=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY;if(r&&!r.device&&i===0&&n===0){To("event appears to be simulated"),t=!0,rr=Lg;let l=r.target.getBoundingClientRect();i=(l.left+l.right)/2,n=(l.top+l.bottom)/2}To("potential dcg-tap coords:"+i+":"+n);let a=!1,s=!1;for(let l of vc){if(a)break;let c;if(typeof l.getBoundingClientRect=="function"&&(c=l.getBoundingClientRect()),typeof l.getAttribute=="function"&&l.getAttribute("tapboundary")==="true"&&(a=!0),!(c&&(i<c.left||n<c.top||i>c.right||n>c.bottom))){h0=l,s=!0,yn("dcg-tap",r,{target:h0,touches:e.touches,changedTouches:e.changedTouches});break}}To("result of dcg-tap:  did_dispatch="+s+"  did_escape="+a)}rr===Xa||rr===wc?fy=setTimeout(()=>{fy=null,wP=new Date().getTime()},1e3):t&&(fy=setTimeout(()=>{fy=null,wP=new Date().getTime()},100)),vc=[],rr=Dg},Pg=function(){return fy||new Date().getTime()-wP<500},hz=function(r){return r.identifier!==void 0?r.identifier:r.pointerId},cz=function(r){let e=[];for(let t of r)e.push({identifier:hz(t),x:t.pageX,y:t.pageY,screenX:t.screenX,screenY:t.screenY,pageX:t.pageX,pageY:t.pageY,clientX:t.clientX,clientY:t.clientY});return e},yn=function(r,e,t){let o=hz(e),i=cz(t.touches),n=cz(t.changedTouches);if(To("dispatchEvent:"+r),r==="dcg-tapstart")vP[o]={type:r,pageX:n[0].pageX,pageY:n[0].pageY};else if(r==="dcg-tapmove"){let c=n[0],p=vP[o];if(p&&c.pageX===p.pageX&&c.pageY===p.pageY||(rr===Xa||rr===wc)&&p&&p.type==="dcg-tapstart"&&Math.abs(p.pageX-c.pageX)+Math.abs(p.pageY-c.pageY)<2)return;vP[o]={type:r,pageX:n[0].pageX,pageY:n[0].pageY}}let a=r.toLowerCase();xs[a]===void 0?xs[a]=1:xs[a]+=1;let s=re.event.fix(e.originalEvent);s.type=r,s.device=rr===Xa||rr===wc?"touch":rr===Lg?"keyboard":"mouse",$a("forceTouchDevice")&&rr===Og&&(s.device="touch"),s.touches=i,s.changedTouches=n,s.target=t.target?t.target:e.target;let l=s.device!=="keyboard"&&xs["dcg-longhold"]>0;s.wasLongheld=function(){return l},clearTimeout(lz),s.type==="dcg-tapstart"&&s.device!=="keyboard"&&s.touches.length===1&&(lz=setTimeout(()=>{yn("dcg-longhold",e,t)},noe)),s.target&&s.target.nodeName&&s.target.nodeName.toLowerCase()==="a"&&s.type==="dcg-tap"&&s.device==="keyboard"&&s.target.click&&s.target.click(),To("trigger event:"+s.type),re(s.target).trigger(s)},m0=function(r){let e=vc,t=!!vc.length,o=document.querySelectorAll(".dcg-tap-container."+by+" .dcg-hovered"),i=Array.from(o).filter(Rg),n=[],a=[],s=[];if(r){let l=SP(r);uz(l).forEach(p=>{(!t||e.indexOf(p)!==-1)&&(i.indexOf(p)===-1&&s.push(p),n.push(p))})}for(let l of i)n.indexOf(l)===-1&&a.push(l);a.forEach(l=>{l&&l.classList.remove("dcg-hovered"),re(l).trigger("tipsyhide")}),s.forEach(l=>{l&&l.classList.add("dcg-hovered"),re(l).trigger("tipsyshow")})},f0=function(r){for(let e of Hn)if(e.pointerId===r)return!0;return!1},TP=function(r){for(let e=0;e<Hn.length;e++)Hn[e].pointerId===r&&Hn.splice(e,1)},gz=function(r){rr===Dg&&g0(wc,r),kP(),m0(null),Hn.push(r.originalEvent),yn("dcg-tapstart",r,{touches:Hn,changedTouches:[r.originalEvent]})},dz=function(r){TP(r.originalEvent.pointerId);let e={touches:Hn,changedTouches:[r.originalEvent]};yn("dcg-tapcancel",r,e),Hn.length===0&&Fg(r,e)},pz=function(r){TP(r.originalEvent.pointerId);let e={touches:Hn,changedTouches:[r.originalEvent]};yn("dcg-tapend",r,e),Hn.length===0&&Fg(r,e)},b0=function(r){return r.originalEvent.pointerType==="touch"},Gg=function(r,e){r.trim().split(/\s+/).forEach(t=>{let o=loe?{passive:!1}:void 0;document.addEventListener(t,i=>{To("document.on:"+i.type),e(re.event.fix(i))},o)})};Gg("pointerdown MSPointerDown",r=>{if(!(rr===Og||rr===Xa||!b0(r))){if(f0(r.originalEvent.pointerId)){To("exit. pointer id already exists: "+r.originalEvent.pointerId);return}gz(r)}});Gg("pointermove MSPointerMove",r=>{rr===Og||rr===Xa||!b0(r)||(f0(r.originalEvent.pointerId)||(To("pointer id already exists: "+r.originalEvent.pointerId),gz(r)),TP(r.originalEvent.pointerId),Hn.push(r.originalEvent),yn("dcg-tapmove",r,{touches:Hn,changedTouches:[r.originalEvent]}))});re(document).on("pointercancel MSPointerCancel",r=>{if(To("document.on:"+r.type),rr!==wc||!b0(r)||!f0(r.originalEvent.pointerId))return;dz(r);let e;for(;e=Hn.pop();){let t=re.Event(e,{originalEvent:e});dz(t)}});re(document).on("pointerup MSPointerUp",r=>{if(To("document.on:"+r.type),rr!==wc||!b0(r)||!f0(r.originalEvent.pointerId))return;pz(r);let e;for(;e=Hn.pop();){let t=re.Event(e,{originalEvent:e});pz(t)}});var loe=function(){let r=!1;try{let e=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("test",()=>{},e),window.removeEventListener("test",()=>{},e)}catch(e){}return r}();Gg("touchstart",r=>{rr===Og||rr===wc||(kP(),rr===Dg&&g0(Xa,r),m0(null),yn("dcg-tapstart",r,{touches:r.originalEvent.touches,changedTouches:r.originalEvent.changedTouches}))});Gg("touchmove",r=>{rr===Xa&&yn("dcg-tapmove",r,{touches:r.originalEvent.touches,changedTouches:r.originalEvent.changedTouches})});Gg("touchcancel",r=>{if(rr!==Xa)return;let e={touches:r.originalEvent.touches,changedTouches:r.originalEvent.changedTouches};yn("dcg-tapcancel",r,e),r.originalEvent.touches.length===0&&Fg(r,e)});Gg("touchend",r=>{if(rr!==Xa)return;let e={touches:r.originalEvent.touches,changedTouches:r.originalEvent.changedTouches};yn("dcg-tapend",r,e),r.originalEvent.touches.length===0&&Fg(r,e)});function mz(){return!!(rr===Xa||rr===wc||Pg())}re(document).on("mousedown",r=>{if(To("document.on:"+r.type),!(r.button===1||r.button===2)){if(mz()){!r.target.matches("input, textarea, select")&&Rg(r.target)&&r.preventDefault(),To("abort mousedown: "+rr+":"+Pg());return}g0(Og,r),yn("dcg-tapstart",r,{touches:[r],changedTouches:[r]})}});var fz=function(r){return!(r instanceof Element)||!Rg(r)||r.closest(".dcg-do-blur")||r.closest(".dcg-text-selectable")?!1:!!r.closest(".dcg-do-not-blur")},kP=function(){try{let r=window.getSelection();if((r==null?void 0:r.rangeCount)===1){let e=r.getRangeAt(0).commonAncestorContainer;e.nodeType===Node.TEXT_NODE&&(e=e.parentNode),e&&e.closest(".dcg-text-selectable")&&r.removeAllRanges()}}catch(r){}};re(document).on("mousedown",r=>{To("document.on:"+r.type),fz(r.target)&&r.preventDefault(),kP()});re(document).on("mouseleave",r=>{if(To("document.on:"+r.type),rr===Dg){if(Pg()){To("abort mouseleave: "+rr+":"+Pg());return}m0(null)}});re(document).on("mousemove",r=>{if(To("document.on:"+r.type),!(r.button===1||r.button===2)&&!(rr===Xa||rr===wc)){if(Pg()){To("abort mousemove: "+rr+":"+Pg());return}m0(r.target),yn("dcg-tapmove",r,{touches:[r],changedTouches:[r]})}});re(document).on("mouseup",r=>{if(To("document.on:"+r.type),r.button===1||r.button===2||rr!==Og)return;let e={touches:[],changedTouches:[r]};yn("dcg-tapend",r,e),Fg(r,e)});re(document).on("keydown",r=>{if(To("document.on:"+r.type),!(!Mg(r)||!Rg(r.target))&&rr!==Lg){if(r.target.matches('a:not([ontap]), button:not([ontap]), input:not([type="checkbox"]), textarea, select, [role="textbox"], [contenteditable="true"], summary'))return;r.preventDefault(),g0(Lg,r),yn("dcg-tapstart",r,{touches:[r],changedTouches:[r]})}});re(document).on("keyup",r=>{if(To("document.on:"+r.type),!Mg(r)||!Rg(r.target)||rr!==Lg)return;let e={touches:[],changedTouches:[r]};yn("dcg-tapend",r,e),Fg(r,e)});function EP(){return rr!==Dg}function bz(){return Id}function coe(){xs["dcg-tapcancel"]=1}var y0={monitor:yy,isTapActive:EP,elIsTypeable:Sc,shouldIgnoreMouseDown:mz,preventTapEvent:coe};var e1e=__dcg_shared_module_exports__['e'](yz());Vt();var xz=["exp|exponent ln|natural-log log","total length count mean median quantile quartile nCr nPr stats","stdev|standard-deviation stddev|standard-deviation","stdDev|standard-deviation stdevp|standard-deviation-population","stddevp|standard-deviation-population stdDevP|standard-deviation-population mad var|variance","varp|variance-population variance cov|co-variance covp|co-variance-population corr|correlation spearman","lcm mcm gcd mcd gcf mod ceil|ceiling floor round abs|absolute-value min max sign|signum signum sgn","sin|sine cos|cosine tan|tangent csc|co-secant sec|secant cot|co-tangent","sinh|hyperbolic-sine cosh|hyperbolic-cosine tanh|hyperbolic-tangent csch|hyperbolic-co-secant","sech|hyperbolic-secant coth|hyperbolic-co-tangent","arcsin|arc-sine arccos|arc-cosine arctan|arc-tangent arccsc|arc-co-secant arcsec|arc-secant","arccot|arc-co-tangent","arcsinh|hyperbolic-arc-sine arccosh|hyperbolic-arc-cosine arctanh|hyperbolic-arc-co-tangent","arccsch|hyperbolic-arc-co-secant arcsech|hyperbolic-arc-secant","arccoth|hyperbolic-arc-co-tangent","arsinh|hyperbolic-ar-sine arcosh|hyperbolic-ar-cosine artanh|hyperbolic-ar-co-tangent","arcsch|hyperbolic-ar-co-secant arsech|hyperbolic-ar-secant","arcoth|hyperbolic-ar-co-tangent","polygon","distance midpoint","sort shuffle join unique","erf|error-function","ttest|t-test TScore|t-score tscore|t-score","normaldist|normal-distribution tdist|t-distribution poissondist|poisson-distribution","binomialdist|binomial-distribution","uniformdist|uniform-distribution","chisqdist|chi-square-distribution","geodist|geometric-distribution","pdf cdf random inverseCdf inversecdf","histogram dotplot boxplot","pdf cdf","rgb hsv","for","width height","with",...__dcg_shared_module_exports__['Eb']].join(" "),doe=["det|determinant","inv|inverse","transpose","rref|reduced-row-echelon-form","trace"].join(" ");xz+=" "+doe;var poe="alpha beta sqrt theta phi rho pi tau nthroot cbrt sum prod integral percent infinity infty cross";function dl(r){r||(r={});let e=[poe];return r.disallowAns||e.push("ans"),r.disallowFrac||e.push("frac"),r.additionalCommands&&(e=e.concat(r.additionalCommands)),e.join(" ")}function IP(r){r||(r={});let e=xz;return r.additionalOperators&&r.additionalOperators.length&&(e=`${e} ${r.additionalOperators.join(" ")}`),r.includeGeometryFunctions&&(e+=" "+Object.keys(__dcg_shared_module_exports__['Le']).join(" ")),r.include3DFunctions&&(e+=" "+Object.keys(__dcg_shared_module_exports__['Me']).join(" ")),e+=" "+__dcg_shared_module_exports__['Ne'].join(" "),r.includeNotebookFunctions&&(e+=" export default"),e}function uoe(){return"for with"}function hoe(){let r="ln log";for(let[e,t]of Object.entries(__dcg_shared_module_exports__['Wc']))t=="Trig"&&(r+=" "+e.replace(/^\\/,""));return r}function _d(r){return{autoOperatorNames:IP(r),infixOperatorNames:uoe(),prefixOperatorNames:hoe()}}var vz=window.MathQuill.noConflict().getInterface(3);vz.config({leftRightIntoCmdGoes:"up",sumStartsWithNEquals:!0,supSubsRequireOperand:!0,charsThatBreakOutOfSupSub:"+-=<>*",autoCommands:dl(),autoSubscriptNumerals:!0,restrictMismatchedBrackets:!0,typingPercentWritesPercentOf:!0,substituteTextarea:function(){if(!l0&&(Ya||dy)){let e=document.createElement("span");return e.classList.add("dcg-mathquill-input-span"),e.setAttribute("role","textbox"),Si(e,{display:"inline-block",height:"1px",width:"1px"}),e}if(jU&&YU){let e=document.createElement("textarea");return e.setAttribute("readonly",""),e.setAttribute("inputmode","none"),e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","none"),e.setAttribute("spellcheck","false"),e.setAttribute("autocomplete","off"),re(e).on("keydown",function(){this.readOnly=!1,this.select()}).on("blur",function(){this.readOnly=!0}),e}let r=document.createElement("textarea");return r.setAttribute("inputmode","none"),r.setAttribute("autocorrect","off"),r.setAttribute("autocapitalize","none"),r.setAttribute("spellcheck","false"),r.setAttribute("autocomplete","off"),r},..._d(),quietEmptyDelimiters:"( [",resetCursorOnBlur:!0,enableDigitGrouping:!0,tripleDotsAreEllipsis:!0,disableAutoSubstitutionInSubscripts:{except:"log"},interpretTildeAsSim:!0});var vs=vz;function Ng(r){let e=__dcg_shared_module_exports__['bd'](r),t=0;for(;!__dcg_shared_module_exports__['dd'](e);)t+=1,e=__dcg_shared_module_exports__['cd'](e);return t}var Vg=class{constructor(e,t,o){this.mathField=e;this.$mathField=t;this.props=o;this.wasFocusedLastUpdate=!1;this.$mathField.on("focusin.view focusout.view",i=>this.onFocusEvent(i))}willUnmount(){this.$mathField.off(".view")}updateMathquillFocused(){var o,i,n,a,s,l;if(!this.mathField)return;let e=this.isFocused(),t=this.shouldBeFocused();if(t&&t!==this.wasFocusedLastUpdate&&(i=(o=this.props).selectOnFocus)!=null&&i.call(o)&&((a=(n=this.mathField).select)==null||a.call(n)),this.wasFocusedLastUpdate=t,e!==t&&(t?this.mathField.focus():this.mathField.blur()),t){let c=this.mathField,p=(l=(s=this.props).selection)==null?void 0:l.call(s);if(!p||c.isUserSelecting())return;let h=c.selection();if(__dcg_shared_module_exports__['s'](p,h))return;c.selection(p)}}isFocused(){var e;return!!(document.activeElement&&((e=this.mathField)!=null&&e.el().contains(document.activeElement)))}shouldBeFocused(){return this.props.isFocused()}onFocusEvent(e){let t=this.isFocused();t!==this.shouldBeFocused()&&this.props.onFocusedChanged(t,e)}};var nW=__dcg_shared_module_exports__['e'](se());ce();ie();var Lk=__dcg_shared_module_exports__['e'](se());var w0={IS_HOVERED:1.25,IS_PRESSED:1.125,IS_GHOSTED:.4},vy={IS_HOVERED:.5,IS_DEPRESSED:.3},CP={IS_GHOSTED:.4},_P={IS_HOVERED:.3,IS_DEPRESSED:.5},S0={IS_GHOSTED:.4},wy=1;__dcg_shared_module_exports__['H']();bn();function Bg(r){r=__dcg_shared_module_exports__['Je'](r);let e=__dcg_shared_module_exports__['fd'](r);if(e.type!=="Assignment")return NaN;if(e._expression.type!=="Constant")return NaN;if(!new __dcg_shared_module_exports__['Ee']({enableGeometry:!1,enable3d:!1,scales:void 0,includeFunctionParametersInRandomSeed:!0,isComplexEnabled:!1,customRegressions:!0}).validLHS(e._symbol))return NaN;if(__dcg_shared_module_exports__['wc'][e._symbol])return NaN;let o=e._expression.asValue();return typeof o=="number"?o:NaN}function moe(r){return __dcg_shared_module_exports__['Y'](r)!==null}var Ug=moe;var AP=1e6;function T0(r){let e=pu(r);if(!e)return!1;switch(e){case"anonymous-function":case"function-reference":case"point-list-reference":case"recursive-function":return!0;case"point-list":return!1}}function pu(r){if(!r||r.type!=="expression")return;let e=r.formula,t=r.formula.recursion,o=r.formula.function_definition,i=Ez(r,o);if(t&&t.type==="iterative"&&t.signature.argTypes.length===1&&t.returnType===__dcg_shared_module_exports__['ua']&&r.formula.function_definition&&i!==void 0&&isFinite(i)&&Math.abs(i)<AP)return"recursive-function";if(e.is_tableable&&e.table_info)return ws(r)?e.table_info.by_reference?"point-list-reference":"point-list":e.table_info.by_reference?"function-reference":"anonymous-function"}function Sz(r){let e=r.formula.table_info;if(!e)return;let t=[],o=[];if(e.values)for(let i=0;i<e.values.length;i++){let n=e.values[i][0];t.push(isNaN(n)?"":__dcg_shared_module_exports__['_'](n));let a=e.values[i][1];o.push(isNaN(a)?"":__dcg_shared_module_exports__['_'](a))}return{headers:[e.independent_variable,e.dependent_column],values:[t,o]}}function Tz(r){let e=r.formula.table_info;if(e)return{headers:[e.dependent_column+".x",e.dependent_column+".y"],values:[[],[]]}}var MP=["-2","-1","0","1","2"];function kz(r){let e=r.formula.table_info;if(e)return e.dependent_column===e.independent_variable?{headers:["x","1x"],values:[MP,[]]}:{headers:[e.independent_variable,e.dependent_column],values:[MP,[]]}}function Ez(r,e){var t,o,i;if(e)return(i=(o=(t=r.formula.recursion)==null?void 0:t.recursiveStructure)==null?void 0:o.baseCaseInfo[e])==null?void 0:i.min}function Iz(r){let e=r.formula.function_definition,t=r.formula.recursion;if(!e||!t)return;let o=Ez(r,e);if(o===void 0)return;let i=[];for(let n=o;n<=o+4;n++)i.push(`${n}`);return{headers:["x",`${__dcg_shared_module_exports__['ia'](e)}\\left(x\\right)`],values:[i,[]]}}function Cz(r){let e=r.formula.function_definition;return e?{headers:["x",`${__dcg_shared_module_exports__['ia'](e)}\\left(x\\right)`],values:[MP,[]]}:void 0}var k0=class{constructor(e,t){this.cb=e;this.document=t;this.observedAriaLiveElements=new WeakMap;this.destroyed=!1;this.onAriaLabelFocus=e=>{let t=e.target;if(this.isElement(t)){let o=t.getAttribute("aria-label");o&&this.cb(o,"label")}};this.document.documentElement.addEventListener("focus",this.onAriaLabelFocus,!0),this.ariaLiveContentObserver=new MutationObserver(o=>this.handleAriaLiveContentMutations(o)),t.documentElement.querySelectorAll('[aria-live="assertive"]').forEach(o=>this.startObservingAriaLiveElement(o)),this.treeObserver=new MutationObserver(o=>this.handleDocumentTreeMutations(o)),this.treeObserver.observe(t.documentElement,{childList:!0,subtree:!0,attributeFilter:["aria-live"]})}destroy(){this.destroyed=!0,this.document.documentElement.removeEventListener("focus",this.onAriaLabelFocus,!0),this.ariaLiveContentObserver.disconnect()}isObservingElement(e){return!!this.observedAriaLiveElements.get(e)}handleAriaLiveContentMutations(e){var o;let t=new Map;for(let i of e){if(!this.observedAriaLiveElements.get(i.target))continue;let n=t.get(i.target);n||(n=[],t.set(i.target,n)),n.push(i)}for(let[i,n]of t){let a=i.cloneNode(!0),s=[a.textContent||""];for(let l=n.length-1;l>=0;l--){let c=n[l];switch(c.type){case"attributes":{c.attributeName!==null&&a.setAttribute(c.attributeName,c.oldValue||""),s.push(a.textContent||"");break}case"characterData":{c.oldValue!==null&&(a.textContent=c.oldValue),a.textContent&&a.textContent!==s[s.length-1]&&s.push(a.textContent);break}case"childList":{if(c.addedNodes.length>1||c.removedNodes.length>1)throw new Error(`Expected at most one removed node and one added node, but got ${c.removedNodes.length} removed nodes and ${c.addedNodes.length} added nodes`);c.addedNodes.length===1&&((o=a.firstChild)==null||o.remove()),c.removedNodes.length===1&&c.removedNodes.forEach(p=>a.appendChild(p.cloneNode(!0))),a.textContent&&a.textContent!==s[s.length-1]&&s.push(a.textContent);break}}}for(let l of s.reverse())this.cb(l,"alert")}}startObservingAriaLiveElement(e){this.destroyed||e.getAttribute("aria-live")==="assertive"&&(this.observedAriaLiveElements.get(e)||(this.observedAriaLiveElements.set(e,!0),e.textContent&&this.cb(e.textContent,"alert"),this.ariaLiveContentObserver.observe(e,{attributes:!0,characterData:!0,childList:!0,attributeOldValue:!0,characterDataOldValue:!0})))}stopObservingAriaLiveElement(e){this.observedAriaLiveElements.set(e,!1)}handleDocumentTreeMutations(e){for(let t of e)t.addedNodes.forEach(o=>{this.isElement(o)&&o.getAttribute("aria-live")==="assertive"&&this.startObservingAriaLiveElement(o)}),this.isElement(t.target)&&t.attributeName==="aria-live"&&(t.target.getAttribute("aria-live")==="assertive"?this.startObservingAriaLiveElement(t.target):this.stopObservingAriaLiveElement(t.target)),t.removedNodes.forEach(o=>{this.isElement(o)&&(this.stopObservingAriaLiveElement(o),o.querySelectorAll('[aria-live="assertive"]').forEach(i=>this.stopObservingAriaLiveElement(i)))})}isElement(e){var o;let t=(o=this.document.defaultView)==null?void 0:o.Element;return t?e instanceof t:!1}};var pl,E0=[],_z="",foe;function Lo(){pl&&(pl.textContent="")}function gt(r){E0.push(r)}function Te(r){if(r!==void 0&&gt(r),pl&&E0.length>0){let e=E0.join(" ").replace(/ +(?= )/g,"");pl.setAttribute("aria-relevant",_z===e&&lo?"all":"additions text"),pl.textContent=e,_z=e}E0.length=0}function boe(){pl=document.createElement("p"),pl.setAttribute("aria-live","assertive"),pl.setAttribute("aria-atomic","true"),pl.classList.add("dcg-aria-alert"),document.body.appendChild(pl),$a("logAria")&&(foe=new k0((r,e)=>console.log(`[aria ${e}] ${r}`),document))}az(boe);function yoe(r){return r.replace(new RegExp("(?<!\\\\left|\\\\sqrt)(\\[|\\(|\\\\\\{)","g"),"\\left$1").replace(new RegExp("(?<!\\\\right)(\\]|\\)|\\\\\\})(?!{)","g"),"\\right$1")}function xoe(r){return r.replace(/\\ |\\space(?![a-zA-Z])/g," ")}function I0(r){if(!r||r.args.length===0)return;let e=r.args[r.args.length-1];switch(e.isTrailing=!0,e.type){case"Sqrt":case"LeftRight":I0(e.arg);break;case"Frac":I0(e.num),I0(e.den);break;case"TokenNode":case"SupSub":case"Other":break;default:}}function LP(r){return{type:"Other",originalType:r.type,val:r.val}}function voe(r){switch(r.type){case"Cmd":{if(!__dcg_shared_module_exports__['Vc'](r.val))return LP(r);let e=r.val.match(/^\\([a-zA-Z]+)/);if(!e)return LP(r);let t=e[1],o=[];for(let i of t)o.push({type:"Other",originalType:"Letter",val:i});return o}case"OperatorName":return ul(r.arg).args;case"EscapedSymbol":case"Letter":case"Digit":case"Symbol":return LP(r);case"Sqrt":return{type:"Sqrt",optArg:r.optArg&&ul(r.optArg),arg:ul(r.arg)};case"Frac":return{type:"Frac",num:ul(r.num),den:ul(r.den)};case"TokenNode":return{type:"TokenNode",arg:ul(r.arg)};case"SupSub":return{type:"SupSub",sup:r.sup&&ul(r.sup),sub:r.sub&&ul(r.sub),nprimes:r.nprimes};case"LeftRight":return{type:"LeftRight",left:r.left,right:r.right,arg:ul(r.arg)};default:throw new Error(`Programming Error: Invalid atom type ${r.type}`)}}function ul(r){let e=[];for(let t of r.args){let o=voe(t);Array.isArray(o)?e.push(...o):e.push(o)}return{type:"Group",args:e}}function Mz(r){try{let e=yoe(xoe(r)),t=__dcg_shared_module_exports__['ed'](e);return ul(t)}catch(e){return}}function Lz(r){let e=Mz(r);if(e===void 0)return()=>!1;let t=e;I0(t);function o(i){let n=Mz(i);return n===void 0?!1:Ad(t,n)}return o}function Ad(r,e){if(!e)return!1;for(let t=0;t<e.args.length;t++)if(Pz(r,e,t)||woe(r,e.args[t]))return!0;return!1}function woe(r,e){switch(e.type){case"Sqrt":return Ad(r,e.arg)||Ad(r,e.optArg);case"Frac":return Ad(r,e.num)||Ad(r,e.den);case"SupSub":return Ad(r,e.sup)||Ad(r,e.sub);case"LeftRight":return Ad(r,e.arg);case"TokenNode":return!1;case"Other":return!1;default:throw new Error(`Programming Error: Invalid atom type ${e.type}`)}}function Pz(r,e,t){if(r.args.length>e.args.length-t)return!1;for(let o=0;o<r.args.length;o++)if(!Soe(r.args[o],e.args[o+t]))return!1;return!0}function Md(r,e,t){return!r&&!e?!0:!r||!e?!1:r.args.length===0?!0:r.args.length>e.args.length||!(t!=null&&t.allowPrefix)&&r.args.length<e.args.length?!1:Pz(r,e,0)}function Soe(r,e){let t=!!r.isTrailing;switch(r.type){case"Sqrt":return e.type==="Sqrt"&&Md(r.optArg,e.optArg)&&Md(r.arg,e.arg);case"Frac":return e.type==="Frac"&&Md(r.num,e.num)&&Md(r.den,e.den);case"SupSub":return e.type==="SupSub"&&r.nprimes<=e.nprimes&&(!r.sup||Md(r.sup,e.sup))&&Md(r.sub,e.sub,{allowPrefix:t});case"LeftRight":return e.type==="LeftRight"&&Az(r.left,e.left)&&Az(r.right,e.right)&&Md(r.arg,e.arg,{allowPrefix:t});case"TokenNode":return e.type==="TokenNode"&&Md(r.arg,e.arg);case"Other":return r.type===e.type&&r.val===e.val}}function Az(r,e){return r.type===e.type&&r.val===e.val}function Toe(r){return r.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&")}function Dz(r){let e=Toe(r);return e=e.replace(/\\\\ /g,"\\\\? "),e=e.replace(/\\\\([A-Za-z]+) ?/g,"\\\\?$1 ?"),new RegExp(e)}var Oz={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function DP(r){let e=[],t=r.toLowerCase();if(t.slice(0,3)==="rgb")try{e=t.replace(/[^\d,]/g,"").split(",").slice(0,3).map(o=>parseInt(o,10))}catch(o){PP(r)}else if(t[0]==="#"){let o=/^#?([a-f\d])([a-f\d])([a-f\d])$/;t=t.replace(o,(i,n,a,s)=>n+n+a+a+s+s);try{e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/.exec(t).slice(1).map(i=>parseInt(i,16))}catch(i){PP(r)}}else e=Oz[t];return koe(e)||PP(r),{R:e[0],G:e[1],B:e[2]}}function koe(r){return!Array.isArray(r)||r.length!==3?!1:r.every(e=>Number.isInteger(e)&&e>=0&&e<=255)}function PP(r){throw new Error("Invalid color string: "+r)}function Rz(r){let e=r.R/255,t=r.G/255,o=r.B/255,i=[];return i[0]=.49*e+.31*t+.2*o,i[1]=.17697*e+.8124*t+.01063*o,i[2]=.01*t+.99*o,i=i.map(n=>n/.17697),{X:i[0],Y:i[1],Z:i[2]}}function Fz(r){let i=r.X,n=r.Y,a=r.Z,s=[];return s[0]=116*Sy(n/100)-16,s[1]=500*(Sy(i/95.047)-Sy(n/100)),s[2]=200*(Sy(n/100)-Sy(a/108.883)),{L:s[0],a:s[1],b:s[2]}}function Sy(r){let e=.20689655172413793;return r>Math.pow(e,3)?Math.pow(r,1/3):r/(3*e*e)+4/29}function Eoe(r,e){let l=r.L,c=r.a,p=r.b,h=e.L,g=e.a,m=e.b,b=l-h,x=Math.sqrt(c*c+p*p),E=Math.sqrt(g*g+m*m),S=x-E,k=c-g,T=p-m,I=Math.sqrt(k*k+T*T-S*S),P=1+.045*x,A=1+.015*x,D=b/(1*1),G=S/(1*P),N=I/(1*A);return Math.sqrt(D*D+G*G+N*N)}function Ioe(r,e){let t=Fz(Rz(DP(r))),o=Fz(Rz(DP(e)));return Eoe(t,o)}function Gz(r,e){let t=e.map(i=>Ioe(r,i)),o=__dcg_shared_module_exports__['g'](t);return e[t.indexOf(o)]}function Coe({R:r,G:e,B:t}){return .2126729*(r/255)**2.4+.7151522*(e/255)**2.4+.072175*(t/255)**2.4}var OP=.342;function RP(r,e=!1,t=OP){if(typeof r!="string"||!r)return!1;try{let o=DP(r);return Coe(o)>t?!e:e}catch(o){return!1}}var Ty="dcg_viewport_statement_id_internal";function Vz(r,e){let t=__dcg_shared_module_exports__['Nb'](r),o=__dcg_shared_module_exports__['Nb'](e);if(!__dcg_shared_module_exports__['S'](t.n/t.d,r)||!__dcg_shared_module_exports__['S'](o.n/o.d,e))return;let i=__dcg_shared_module_exports__['Pb'](t.d,o.d),n=t.n*(i/t.d),s=o.n*(i/o.d)-n;return{nstart:n,nstep:s,lcm:i}}function Moe(r){return isFinite(r)?__dcg_shared_module_exports__['ha'](r,{digits:8,bigCutoff:1e6,smallCutoff:.001}):"\\mathrm{undefined}"}function Aoe(r){return!isFinite(r[0])||!isFinite(r[1])?"\\mathrm{undefined}":__dcg_shared_module_exports__['la'](r,{digits:5,bigCutoff:1e6,smallCutoff:.001})}function Loe(r){return Array.isArray(r)?r[1]!==0:!1}function Uz(r){return r.length>=1&&r.every(Loe)}function Poe(r,e,t,o){let i=r.columnModels[e];i.error=t.error,i.computed=t.computed&&!!i.latex,i.draggable=!t.error&&!t.computed,i.dependsOnRegression=!!t.depends_on_regression,i.dependsOnRecursion=!!t.depends_on_recursive_function,i.packedErrors=[],i.computedValues=[],i.hasNanOrErrorValue=!1,i.hasComplexValue=!1;for(let n=t.values.length-1;n>=0;n--){let a=t.values[n];typeof a=="number"?(i.computedValues[n]=Moe(a),isNaN(a)&&(i.hasNanOrErrorValue=!0)):Array.isArray(a)?(i.computedValues[n]=Aoe(a),(isNaN(a[0])||isNaN(a[1]))&&(i.hasNanOrErrorValue=!0),a[1]!==0&&(i.hasComplexValue=!0)):(i.computedValues[n]="",i.packedErrors[n]=a,i.hasNanOrErrorValue=!0)}if(i.suppressIcon=o||e>0&&Uz(t.values),t.plotted&&!i.suppressIcon)for(let n=0;n<t.values.length;n++){if(i.packedErrors[n])continue;let a=t.values[n];Array.isArray(a)&&a[1]!==0&&!isNaN(a[1])&&(i.packedErrors[n]=__dcg_shared_module_exports__['Hb']().getError())}}function zz(r){let e=Ss(r);if(!e)return;let t=hu(r);if(!t){r.isExpanded||zg(r,!0);return}e.row>=t.min&&e.row<t.max&&zg(r,!0)}function hu(r){if(r.isExpanded)return;let e=Kn(r);if(!(e<30))return{min:8,max:e-4}}function qz(r,e){let t=r.columnModels[e];return{values:t.values.slice(),dragMode:t.dragMode,hidden:t.hidden,id:t.id,color:t.color,points:t.points,lines:t.lines,pointStyle:t.pointStyle,lineStyle:t.lineStyle,latex:t.latex,colorLatex:t.colorLatex,lineOpacity:t.lineOpacity,lineWidth:t.lineWidth,pointSize:t.pointSize,pointOutline:t.pointOutline,pointOpacity:t.pointOpacity,disableGraphInteractions:t.disableGraphInteractions}}var Doe=0;function Ooe(){return"table_guid_"+Doe++}function Roe(r,e,t){r.columnModels[e].values.splice(t,0,"")}function Foe(r,e,t){r.columnModels[e].values.splice(t,1)}function Hz(r,e,t){let{color:o}=t;(!o||!Ug(o))&&(o=r.controller.getNextColor());let i={...t,type:"table-column",guid:Ooe(),index:e,error:void 0,table:r,color:o,packedErrors:[],computedValues:[],shouldGraph:void 0,computed:void 0,draggable:void 0,hasNanOrErrorValue:!1,dependsOnRegression:!1,dependsOnRecursion:!1,hasComplexValue:!1,suppressIcon:!1};return e===0&&(i.hidden=!0),i}function ky(r,e){let t=r.table.formula;if(!t)return!1;let o=t.column_data[r.index];return o?!!o[e]:!1}function Kz(r){return ky(r,"color_latex_valid")}function Wz(r){return ky(r,"line_opacity_valid")}function $z(r){return ky(r,"line_width_valid")}function jz(r){return ky(r,"point_size_valid")}function Yz(r){return ky(r,"point_opacity_valid")}function Xz(r){let e=r.table.formula;if(!e)return;let t=e.column_data[r.index];if(t)return t.color_latex_value}function Jz(r){r.draggingOnGraphpaper?r.preTransientState||(r.preTransientState={columns:qg(r,{stripDefaults:!1}).columns}):delete r.preTransientState,gl(r);let e=tn(r),t=e&&e.hidden;r.columnModels.forEach(o=>{o.shouldGraph=!t&&!o.hidden&&!r.controller.is3dProduct()}),Noe(r),Voe(r),Goe(r)}function Kn(r){let e=2,t,o=Ss(r);return o&&o.row>e&&(e=o.row),r.columnModels.forEach(i=>{t=i.computed?i.computedValues.length:i.values.length+1,t>e&&(e=t)}),e}function Ey(r){return r.columnModels.length}function Zz(r,e){var o;r.formula=e;let t=r.controller.is3dProduct()||Uz(e.column_data[0].values);for(let i=0;i<e.column_data.length&&i<Ey(r);i++){let n=e.column_data[i];Poe(r,i,n,t)}((o=e.table_regression)==null?void 0:o.status)==="success"&&r.regression&&(r.regression.residualVariable=e.table_regression.result.residualVariable)}function FP(r,e){for(let t=0;t<r.columnModels.length;t++)Roe(r,t,e)}function Qz(r,e){let t=hu(r);t&&e===t.max-1&&zg(r,!0);for(let o=0;o<r.columnModels.length;o++)Foe(r,o,e),o>0&&xq(r.columnModels[o])}function C0(r,e){let t={id:r.controller.generateId(),latex:e?e.latex:"",color:r.controller.getNextColor()},o=e?e.columnIndex:r.columnModels.length,i={...pc,...t,values:[]},n=Hz(r,o,i);r.columnModels.splice(o,0,n);for(let a=o+1;a<r.columnModels.length;a++)r.columnModels[a].index=a}function Iy(r,e){var o;let[t]=r.columnModels.splice(e,1);for(let i=e;i<r.columnModels.length;i++)r.columnModels[i].index=i;t&&((o=r.regression)==null?void 0:o.columnIds.y)===t.id&&_y(r,void 0)}function eq(r,e){let t,o=r.columnModels.length,i=[];for(t=0;t<o;t++)i.push("");let n=r.columnModels[0].values;if(e>1){let a=r.controller.getDegreeMode(),s=__dcg_shared_module_exports__['Ie'](n[0],a),l=__dcg_shared_module_exports__['Ie'](n[1],a);if(isFinite(s)&&isFinite(l)){let c=Vz(s,l);if(c){let p=c.nstart,h=p/c.lcm;for(t=0;t<e;t++){let g=__dcg_shared_module_exports__['Ie'](n[t],a);if(!__dcg_shared_module_exports__['S'](g,h))return i;p+=c.nstep,h=p/c.lcm}(""+s).length<8&&(""+l).length<8?i[0]=""+h:i[0]="\\frac{"+p+"}{"+c.lcm+"}"}}}return i}function Cy(r,e,t){for(let o=0;o<r.columnModels.length;o++){let i=r.columnModels[o],n={cellLocation:{column:o,row:0}};if(e(i.latex,"tableHeader",n),t!=null&&t.headersOnly)continue;e(i.colorLatex,"tableColumnColorLatex",n),e(i.pointSize,"tableColumnPointSize",n),e(i.pointOpacity,"tableColumnPointOpacity",n),e(i.lineWidth,"tableColumnLineWidth",n),e(i.lineOpacity,"tableColumnLineOpacity",n);let a=r.columnModels[o];for(let s=0;s<a.values.length;s++)a.values[s]&&e(a.values[s],"tableCellValue",{cellLocation:{column:o,row:s+1}})}}function Goe(r){let e=fS({type:"table",id:r.id,secret:r.secret,readonly:r.readonly,folderId:r.folderId,columns:r.columnModels.map(o=>qz(r,o.index)),regression:__dcg_shared_module_exports__['Uc'](r.regression)});for(let o=0;o<e.columns.length;o++)e.columns[o].hidden=!r.columnModels[o].shouldGraph;e.moduleID=Kg(r),r.cachedParsableState=e;let t=r.regression;if(e.regression&&t){let o=tn(r);o&&o.hidden&&(e.regression={...e.regression,hidden:!0})}}function tq(r){return r.slice(0,r.length-1)}function qg(r,e){let t={...r.cachedViewState,columns:tq(r.cachedViewState.columns)};return e.stripDefaults?RB(t):(t.regression===void 0&&delete t.regression,t)}function Noe(r){let e=r.columnModels.map((t,o)=>qz(r,o));r.cachedViewState={id:r.id,type:r.type,folderId:r.folderId,columns:e,secret:r.secret,readonly:r.readonly,regression:__dcg_shared_module_exports__['Uc'](r.regression)}}function rq(r,e){r.draggingOnGraphpaper=e}function Voe(r){let e={...r.cachedViewState,columns:tq(r.cachedViewState.columns),regression:__dcg_shared_module_exports__['Uc'](r.regression)};r.cachedUndoRedoFullState=e,r.preTransientState&&(e={...e,...r.preTransientState}),r.cachedUndoRedoDiffState=e}var Boe={id:!1,type:!1,columns:!1,regression:!0,folderId:!0,secret:!0,readonly:!0,disableGraphInteractions:!0};function oq(r,e){__dcg_shared_module_exports__['$d']({from:e,to:r,props:Boe}),nq(r,e.columns)}function iq(r,e){let t=__dcg_shared_module_exports__['Uc'](rg(r)),o={...t,...hl(e),columnModels:void 0,formula:void 0,draggingOnGraphpaper:!1,cachedViewState:{},cachedParsableState:{},cachedUndoRedoDiffState:{},cachedUndoRedoFullState:{},isExpanded:!1};return nq(o,t.columns),o}function nq(r,e){r.columnModels=e.map((t,o)=>Hz(r,o,t)),C0(r)}var Bz=["x","y","z","u","v","w"];function GP(r,e,t){let o=[],i=Math.min(e.length,Bz.length);for(let n=0;n<i;n++)o.push({id:t.generateId(),latex:__dcg_shared_module_exports__['ia'](Bz[n]+"_"+r),values:e[n],color:t.getNextColor(),hidden:!1,points:!0,lines:!1,dragMode:__dcg_shared_module_exports__['hd'].NONE,pointStyle:__dcg_shared_module_exports__['Pd'].POINT,pointOutline:!1,lineStyle:__dcg_shared_module_exports__['Qd'].SOLID,colorLatex:"",lineWidth:"",lineOpacity:"",pointOpacity:"",pointSize:"",disableGraphInteractions:!1});return{id:t.generateId(),type:"table",folderId:"",secret:!1,readonly:!1,columns:o}}function aq(r,e){let t=qg(r,{stripDefaults:!1});if(!t.columns||!e.columns)return e;for(let o=0;o<e.columns.length;o++){let i=t.columns[o],n=e.columns[o];if(i)for(let a in i)i.hasOwnProperty(a)&&(n.hasOwnProperty(a)||(n[a]=i[a]))}return e}function Ss(r){if(!r)return;let e=r.controller.getFocusLocation();if(e&&e.type==="table"&&e.id===r.id)return e.location}function Kr(r,e){for(let t=0;t<r.columnModels.length;t++){let o=r.columnModels[t];if(o.id===e)return o}}function NP(r,e,t){let o=Kr(r,e);o&&(o.points=t,t||(o.dragMode=__dcg_shared_module_exports__['hd'].NONE))}function sq(r,e,t){let o=Kr(r,e);o&&(o.pointStyle=t)}function lq(r,e,t){let o=Kr(r,e);o&&(o.lines=t)}function cq(r,e,t){let o=Kr(r,e);o&&(o.lineStyle=t)}function _0(r,e,t){let o=Kr(r,e);o&&(o.lineWidth=t)}function M0(r,e,t){let o=Kr(r,e);o&&(o.lineOpacity=t)}function A0(r,e,t){let o=Kr(r,e);o&&(o.pointSize=t)}function dq(r,e,t){let o=Kr(r,e);o&&(o.pointOutline=t)}function L0(r,e,t){let o=Kr(r,e);o&&(o.pointOpacity=t)}function pq(r,e,t){let o=Kr(r,e);if(o)if(t.type==="inert")o.disableGraphInteractions=t.disableGraphInteractions,t.disableGraphInteractions&&(o.dragMode=__dcg_shared_module_exports__['hd'].NONE);else{let i=t.dragMode;o.dragMode=i,i!==__dcg_shared_module_exports__['hd'].NONE&&!o.points&&(o.points=!0),i!==__dcg_shared_module_exports__['hd'].NONE&&(o.disableGraphInteractions=!1)}}function uq(r,e,t){pq(r,e,{type:"draggable",dragMode:t})}function hq(r,e,t){let o=Kr(r,e);!o||!Ug(t)||(o.color=t,o.colorLatex="")}function gq(r,e){r.regression&&(r.regression.color=e)}function mq(r,e){r.regression&&(r.regression.isLogMode=e)}function P0(r,e,t){let o=Kr(r,e);o&&(o.colorLatex=t)}function zg(r,e){r.isExpanded=e}function fq(r,e,t){let o=Kr(r,e);o&&(o.hidden=t,t&&yq(r))}function bq(r,e,t){let o=Kr(r,e);o&&(o.boundingBoxes=t,yq(r))}function yq(r){let e=[];r.columnModels.forEach(t=>{t.boundingBoxes&&!t.hidden&&(e=e.concat(t.boundingBoxes))}),r.boundingBoxes=e}function D0(r,e){let t=Kr(r,e);return t?!t.points&&!t.lines:!0}function Ld(r,e,t){if(e.row===0){let i=r.columnModels[e.column].id,n=Kr(r,i);if(!n)return;n.latex=t,e.column>=r.columnModels.length-1&&C0(r);return}let o=r.columnModels[e.column];for(let i=o.values.length;i<e.row-1;i++)o.values[i]="";r.columnModels[o.index].values[e.row-1]=t,e.column>0&&xq(r.columnModels[o.index])}function xq(r){for(;r.values.length>0&&!r.values[r.values.length-1];)r.values.pop()}function vq(r,e){return!!r.columnModels[e.column]&&e.row>=0}function wq(r){let e;if(r.values){for(e of r.values)if(e!=="")return!1}if(r.computedValues){for(e of r.computedValues)if(e!=="")return!1}return!0}function Sq(r){return r.computed}function Hg(r){return r.computed||r.index===r.table.columnModels.length-1}function Tq(r,e){pq(r.table,r.id,{type:"inert",disableGraphInteractions:e})}function O0(r,e,t){let o=r.columnModels[t];return o.computed?o.computedValues[e]||"":o.values[e]||""}function kq(r){let e=Kn(r),t=Ey(r);for(let o=0;o<t;o++)if(O0(r,e-1,o)!=="")return!1;return!0}function _y(r,e){var o,i;let t=!__dcg_shared_module_exports__['s']((o=r.regression)==null?void 0:o.columnIds,e==null?void 0:e.columnIds)||((i=r.regression)==null?void 0:i.type)!==(e==null?void 0:e.type);r.regression=e,r.regression&&t&&(r.regression.residualVariable=void 0)}function Tc(r){return!!r.latex&&!r.error&&!r.dependsOnRegression&&!r.dependsOnRecursion}function Pd(r){return r.computedValues.length>=2&&!r.hasNanOrErrorValue&&!r.hasComplexValue}function Eq(r){var i,n;let e=r.regression;if(!e)return;let t=(i=r.columnModels.find(a=>a.id===e.columnIds.x))==null?void 0:i.latex,o=(n=r.columnModels.find(a=>a.id===e.columnIds.y))==null?void 0:n.latex;return t&&o?[t,o]:void 0}var Uoe=30,zoe=10,R0=__dcg_shared_module_exports__['Md'].RED,F0=__dcg_shared_module_exports__['Md'].BLUE,G0=__dcg_shared_module_exports__['Md'].GREEN,N0=__dcg_shared_module_exports__['Md'].PURPLE,V0=__dcg_shared_module_exports__['Md'].ORANGE,Wg=__dcg_shared_module_exports__['Md'].BLACK;function fl(r,e){switch(e){case __dcg_shared_module_exports__['Md'].RED:return r.s("graphing-calculator-text-color-red");case __dcg_shared_module_exports__['Md'].BLUE:return r.s("graphing-calculator-text-color-blue");case __dcg_shared_module_exports__['Md'].GREEN:return r.s("graphing-calculator-text-color-green");case __dcg_shared_module_exports__['Md'].PURPLE:return r.s("graphing-calculator-text-color-purple");case __dcg_shared_module_exports__['Md'].ORANGE:return r.s("graphing-calculator-text-color-orange");case __dcg_shared_module_exports__['Md'].BLACK:return r.s("graphing-calculator-text-color-black");case __dcg_shared_module_exports__['Md'].GRAY:return r.s("graphing-calculator-text-color-gray");default:let{r:t,g:o,b:i}=__dcg_shared_module_exports__['Id'](e),n=Math.max(t,o,i),a=Math.min(t,o,i),s=n/255,l=n===0?0:(n-a)/n,c=0;n!==a&&(n===t?c=(o-i)/(n-a)+(o<i?6:0):n===o?c=(i-t)/(n-a)+2:c=(t-o)/(n-a)+4,c/=6),c*=360,l*=100;let p=s*100;return p<10?r.s("graphing-calculator-text-color-black"):l<10?p>90?r.s("graphing-calculator-text-color-white"):p>75?r.s("graphing-calculator-text-color-light-gray"):p>50?r.s("graphing-calculator-text-color-gray"):r.s("graphing-calculator-text-color-dark-gray"):c>=0&&c<15?p<50?r.s("graphing-calculator-text-color-dark-red"):p<75?r.s("graphing-calculator-text-color-red"):r.s("graphing-calculator-text-color-light-red"):c>=15&&c<45?p<50?r.s("graphing-calculator-text-color-dark-orange"):p<75?r.s("graphing-calculator-text-color-orange"):r.s("graphing-calculator-text-color-light-orange"):c>=45&&c<75?p<50?r.s("graphing-calculator-text-color-dark-yellow"):p<75?r.s("graphing-calculator-text-color-yellow"):r.s("graphing-calculator-text-color-light-yellow"):c>=75&&c<105?p<50?r.s("graphing-calculator-text-color-dark-lime"):p<75?r.s("graphing-calculator-text-color-lime"):r.s("graphing-calculator-text-color-light-lime"):c>=105&&c<135?p<50?r.s("graphing-calculator-text-color-dark-green"):p<75?r.s("graphing-calculator-text-color-green"):r.s("graphing-calculator-text-color-light-green"):c>=135&&c<165?p<50?r.s("graphing-calculator-text-color-dark-cyan"):p<75?r.s("graphing-calculator-text-color-cyan"):r.s("graphing-calculator-text-color-light-cyan"):c>=165&&c<195?p<50?r.s("graphing-calculator-text-color-dark-teal"):p<75?r.s("graphing-calculator-text-color-teal"):r.s("graphing-calculator-text-color-light-teal"):c>=195&&c<225?p<50?r.s("graphing-calculator-text-color-dark-blue"):p<75?r.s("graphing-calculator-text-color-blue"):r.s("graphing-calculator-text-color-light-blue"):c>=225&&c<255?p<50?r.s("graphing-calculator-text-color-dark-indigo"):p<75?r.s("graphing-calculator-text-color-indigo"):r.s("graphing-calculator-text-color-light-indigo"):c>=255&&c<285?p<50?r.s("graphing-calculator-text-color-dark-violet"):p<75?r.s("graphing-calculator-text-color-violet"):r.s("graphing-calculator-text-color-light-violet"):c>=285&&c<315?p<50?r.s("graphing-calculator-text-color-dark-magenta"):p<75?r.s("graphing-calculator-text-color-magenta"):r.s("graphing-calculator-text-color-light-magenta"):c>=315&&c<345?p<50?r.s("graphing-calculator-text-color-dark-pink"):p<75?r.s("graphing-calculator-text-color-pink"):r.s("graphing-calculator-text-color-light-pink"):c>=345&&c<=360?p<50?r.s("graphing-calculator-text-color-dark-red"):p<75?r.s("graphing-calculator-text-color-red"):r.s("graphing-calculator-text-color-light-red"):r.s("graphing-calculator-text-color-unknown")}}var VP=r=>{if(!Array.isArray(r))return[r];let e=Array(Math.min(r.length,zoe));for(let t=0;t<e.length;t++)e[t]=r[Math.round(t*r.length/e.length)];return e};function Iq(r,e){switch(r.type){case"single-color":case"color-array":return VP(r.value).every(o=>RP(o,e));case"shader":case"image":return!1;default:let t=r;throw new Error("Unexpected ColorSwatchSpec type: "+t.type)}}function $g(r,e,t=OP){switch(r.type){case"single-color":case"color-array":return VP(r.value).some(i=>RP(i,e,t));case"shader":case"image":return!0;default:let o=r;throw new Error("Unexpected ColorSwatchSpec type: "+o.type)}}var jg=r=>{switch(r.type){case"single-color":return r.value;case"color-array":let e=VP(r.value);if(e.length===0)return __dcg_shared_module_exports__['Md'].BLACK;if(e.length===1)return r.value[0];let t=Uoe/e.length;return`linear-gradient(to right${e.reduce((i,n,a)=>`${i}, ${n} ${a*t}px, ${n} ${(a+1)*t}px`,"")})`;case"shader":return"#808080";case"image":return'url("'+r.value+'")';default:let o=r;throw new Error("Unexpected ColorSwatchSpec type: "+o.type)}};var qoe=0;function Hoe(){return"abstract_item_"+qoe++}function hl(r){return{guid:Hoe(),controller:r,index:-1,displayIndex:"-1",secretIndex:"-1",isHiddenFromUI:!0,renderShell:!0}}function B0(r,e){r.secret=e}function My(r,e){r.readonly=e}function ui(r,e){r.type!=="folder"&&(r.folderId=e)}function gl(r){r.isHiddenFromUI=Yg(r)}function _q(r){return r.isHiddenFromUI||r.filteredBySearch?"none":r.renderShell?"shell":"render"}function Dd(r){let e=Ay(r),t=e.type==="color-array"?{type:"single-color",value:e.value[0]}:e;return jg(t)}function Ay(r){if(!r.colorLatex)return{type:"single-color",value:r.color};if(/^data:image/.test(r.colorLatex))return{type:"image",value:r.colorLatex};let e,t,o=!1;return r.type==="expression"?(e=z0(r),t=U0(r),o=r.formula.color_latex_valid===void 0):r.type==="table-column"&&(e=Xz(r),t=Kz(r)),t&&e?Array.isArray(e)?{type:"color-array",value:e}:{type:"single-color",value:e}:o?{type:"single-color",value:"#999"}:{type:"single-color",value:r.color}}function Ti(r){return r.type==="expression"||r.type==="image"||r.type==="table-column"?!!r.disableGraphInteractions:!1}function Koe(r){var e;return!!((e=r.title)!=null&&e.includes("@"))}function Kg(r){if(!r.controller.getGraphSettings().config.folderModules)return;let e=r.controller.getItemModel(r.folderId);if((e==null?void 0:e.type)==="folder"&&Koe(e))return r.folderId}var Ly=class{constructor(e,t){this.exports=new Map;if(!t)return;let o=Woe(e);for(let i of t.allDefinedQualifiedNames)i.frameID===__dcg_shared_module_exports__['Ib']&&this.exports.set(i.symbol,{name:i.symbol,isRegressionExport:o.has(i.symbol),isMultiplyDefined:!!t.multiplyDefined.has(i)})}optimisticallyRegisterColumnName(e){this.cachedLastSubscripts=void 0,!this.exports.get(e)&&this.exports.set(e,{name:e,isMultiplyDefined:!1,isRegressionExport:!1})}isDefined(e,t){let o=this.exports.get(e);return t.includeRegressionExports?!!o:o&&!o.isRegressionExport}isMultiplyDefined(e,t){var o;return this.isDefined(e,t)&&!!((o=this.exports.get(e))!=null&&o.isMultiplyDefined)}getLastSubscriptForName(e,t){var o,i;if(e.includes("_"))throw new Error(`Programming error: ${e} already has a subscript`);this.cachedLastSubscripts===void 0&&(this.cachedLastSubscripts={});for(let n of this.exports.values()){if(!t.includeRegressionExports&&n.isRegressionExport)continue;let[a,s]=n.name.split("_"),l=parseInt(s,10);isNaN(l)||a===e&&(this.cachedLastSubscripts[e]=Math.max((o=this.cachedLastSubscripts[e])!=null?o:0,l))}return(i=this.cachedLastSubscripts[e])!=null?i:-1}};function Woe(r){var t,o,i,n,a;let e=new Set;for(let s of r)if(s.type==="table"&&((o=(t=s.formula)==null?void 0:t.table_regression)==null?void 0:o.status)==="success"){let l=s.formula.table_regression.result.residualVariable,c=__dcg_shared_module_exports__['ja'](l);e.add(c)}else if(s.type==="expression"&&s.formula.is_regression){let l=(i=s.formula.regression)==null?void 0:i.residualVariable,c=l?__dcg_shared_module_exports__['ja'](l):void 0;c&&e.add(c);for(let p of(a=(n=s.formula)==null?void 0:n.exported_variables)!=null?a:[])p!==c&&e.add(p)}return e}function q0(r,e){let t=r.cachedViewState;return e.stripDefaults?__dcg_shared_module_exports__['ie'](t):t}function $oe(r){r.cachedViewState={type:r.type,id:r.id,title:r.title,hidden:r.hidden,inFrontOfEverything:r.inFrontOfEverything,readonly:r.readonly,collapsed:r.collapsed,secret:r.secret}}function joe(r){r.cachedUndoRedoDiffState=r.cachedViewState,r.cachedUndoRedoFullState=r.cachedViewState}function Mq(r,e){return{...__dcg_shared_module_exports__['Uc'](__dcg_shared_module_exports__['he'](r)),...hl(e),cachedParsableState:{},cachedUndoRedoDiffState:{},cachedUndoRedoFullState:{},cachedViewState:{}}}function Yoe(r){if(!r.controller.getGraphSettings().config.folderModules)return;let e=__dcg_shared_module_exports__['ke'](r);r.cachedParsableState=e}function Aq(r){Xoe(r),gl(r),$oe(r),joe(r),Yoe(r)}function Xoe(r){let t=r.controller.getAllSelectedItems();r.collapsedChildIsSelected=r.collapsed&&t.some(o=>o.type!=="folder"&&o.folderId===r.id)}var Joe={id:!1,type:!1,hidden:!0,secret:!0,inFrontOfEverything:!0,collapsed:!0,title:!0,readonly:!0,disableGraphInteractions:!0};function Lq(r,e){__dcg_shared_module_exports__['$d']({from:e,to:r,props:Joe})}function Xg(r,e){r.collapsed=e}function BP(r,e){r.title=e}function Pq(r,e){r.hidden=e}function Dq(r){return r.hidden}function Oq(r,e){r.inFrontOfEverything=e}__dcg_shared_module_exports__['H']();var H0={cb20221031:"1"};var UP="";function Zoe(){return UP}function Qoe(r){UP=r}var eie=[];function tie(r){if(r.status===401)for(let e of eie)e()}function Gq(r){let e=new URLSearchParams;return Object.entries(r).forEach(([t,o])=>{Array.isArray(o)?o.forEach(i=>e.append(t,String(i))):e.set(t,String(o))}),e}var Fq=async r=>{try{return await r.json()}catch(e){return null}},Py=class extends Error{constructor(){super(...arguments);this.name="NetworkError"}},K0=class extends Py{constructor(){super(...arguments);this.name="AbortError"}},W0=class extends Error{constructor(t,o,i=[]){super([...new Set(i.map(({message:n})=>n.trim()))].join(`
`));this.status=t;this.statusText=o;this.messageObjects=i;this.name="ResponseError"}},Nq=(r,e,t=e("account-shell-error-unexpected-server",{email:"support@desmos.com"}))=>{if(r instanceof $0.NetworkError)return[{key:"connection_failed",message:e("account-shell-error-connection-failed")}];let o=[{key:"unknown_error",message:t}];return r instanceof $0.ResponseError?r.messageObjects.length===0?o:r.messageObjects:o},Vq=(r,e,t)=>[...new Set(Nq(r,e,t).map(({message:o})=>o.trim()))],rie=(r,e,t)=>Vq(r,e,t).join(`
`);async function oie(r){var t,o;let e;try{e=await r}catch(i){throw i instanceof DOMException&&i.name==="AbortError"?new K0:new Py}if(tie(e),!e.ok){let i=await Fq(e);throw new W0(e.status,e.statusText,(o=(t=i==null?void 0:i.errors)==null?void 0:t.map(n=>{var a;return{key:(a=n.key)!=null?a:"unknown_error",message:"msg"in n?n.msg:n.message}}))!=null?o:[])}return await Fq(e)}var Jg=(r,{method:e="get",query:t,body:o,withCacheBusting:i=e==="get",signal:n}={})=>{let a={method:e.toUpperCase(),credentials:"include",headers:{Accept:"application/json"},signal:n};o!==void 0&&(a.headers["Content-Type"]="application/json",a.body=JSON.stringify(o));let s=r.includes("?")?"&":"?",l=i?{...t,...H0}:t,c=l?`${s}${Gq(l).toString()}`:"";return oie(fetch(`${UP}${r}${c}`,a))},iie=(r,e)=>Jg(r,{query:e}),nie=(r,e={})=>Jg(r,{method:"post",...e}),aie=(r,e={})=>Jg(r,{method:"put",...e}),sie=async(r,e={})=>Jg(r,{method:"patch",...e}),lie=(r,e={})=>Jg(r,{method:"delete",...e}),$0={getBaseURL:Zoe,setBaseURL:Qoe,safelyMakeURLSearchParamsFromObject:Gq,NetworkError:Py,AbortError:K0,ResponseError:W0,parseErrors:Nq,parseErrorMessages:Vq,parseErrorMessage:rie,request:Jg,get:iie,post:nie,put:aie,patch:sie,delete:lie};function Dy(r){let e=[];for(let t of r){if(!t||typeof t!="string")continue;let o=t.split("-")[0];e.push(t),e.push(o);for(let i in gu){let n=gu[i];i.split("-")[0]===o&&n.useAsRoot&&e.push(i)}}return e}var gu={en:{displayName:"English (US)",userGuideURL:"https://docs.google.com/document/d/1gV-WgDjgR9hKKb32ffeUpjwggNAgfqxl0Gsg6xocbok/preview",useAsRoot:!1},es:{displayName:"Espa\xF1ol (LATAM)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ES-ES.pdf",useAsRoot:!0},et:{displayName:"Eesti",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ru:{displayName:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_RU.pdf",useAsRoot:!1},da:{displayName:"Dansk",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},de:{displayName:"Deutsch",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_DE.pdf",useAsRoot:!1},"pt-BR":{displayName:"Portugu\xEAs (Brasil)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!0},"pt-PT":{displayName:"Portugu\xEAs (Portugal)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ca:{displayName:"Catal\xE0",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},fr:{displayName:"Fran\xE7ais",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_FR.pdf",useAsRoot:!0},"fr-CA":{displayName:"Fran\xE7ais (Canada)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_FR.pdf",useAsRoot:!0},it:{displayName:"Italiano",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_IT.pdf",useAsRoot:!1},is:{displayName:"\xCDslenska",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},nl:{displayName:"Nederlands",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},no:{displayName:"Norsk",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},"sv-SE":{displayName:"Svenska",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!0},hu:{displayName:"Magyar",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},cs:{displayName:"\u010Ce\u0161tina",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},pl:{displayName:"Polski",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_PL.pdf",useAsRoot:!1},id:{displayName:"Bahasa Indonesia",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},vi:{displayName:"Ti\u1EBFng Vi\u1EC7t",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_VI.pdf",useAsRoot:!1},el:{displayName:"\u0395\u03BB\u03BB\u03B7\u03BD\u03B9\u03BA\u03AC",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_EL.pdf",useAsRoot:!1},uk:{displayName:"\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ka:{displayName:"\u10E5\u10D0\u10E0\u10D7\u10E3\u10DA\u10D8",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},th:{displayName:"\u0E20\u0E32\u0E29\u0E32\u0E44\u0E17\u0E22",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},tr:{displayName:"T\xFCrk\xE7e",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_TR.pdf",useAsRoot:!1},"zh-CN":{displayName:"\u7B80\u4F53\u4E2D\u6587",useAsRoot:!0,userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ZH-CN.pdf"},"zh-TW":{displayName:"\u7E41\u9AD4\u4E2D\u6587",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ZH-TW.pdf",useAsRoot:!1},ko:{displayName:"\uD55C\uAD6D\uC5B4",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ja:{displayName:"\u65E5\u672C\u8A9E",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_JA.pdf",useAsRoot:!1}};var Bq=`account-shell-button-cancel = Cancel
account-shell-button-mygraphs-cancel = Cancel
account-shell-error-connection-failed = Connection failed. Try checking your internet connection.
account-shell-error-mygraphs-error-loading = Error loading graph
account-shell-error-unexpected-server = Unexpected server error. Try again, or e-mail { $email }.
account-shell-link-help = Help
account-shell-text-error-loading-geometry-state = Error loading construction
account-shell-text-mygraphs-count-more = { $count } more...
account-shell-text-or = or
shared-button-back = Back
shared-button-close-dialog = Close Dialog
shared-button-copy-evaluation-value = Copy Value
shared-button-learn-more-capitalized = Learn More
shared-calculator-button-braille-mode-nemeth = Nemeth
shared-calculator-button-braille-mode-ueb = UEB
shared-calculator-button-go = Go
shared-calculator-button-hide-options = Hide Options
shared-calculator-button-settings-toolbar-show-all = All
shared-calculator-button-settings-toolbar-show-custom = Custom
shared-calculator-button-settings-toolbar-show-none = None
shared-calculator-button-show-options = Show Options
shared-calculator-error-3d-bad-equality-slice = We don't support this type of equality restriction.
shared-calculator-error-3d-length-type-error = Function '{ $fn }' cannot be applied to { $arg } in the 3d calculator. Use '{ $alternativeFn }' to find the number of elements in a list.
shared-calculator-error-3d-mixed-restriction-equation = Cannot apply both an inequality restriction and an equality restriction to this expression.
shared-calculator-error-3d-multiple-equality-restrictions = Cannot apply more than one equality restriction.
shared-calculator-error-3d-object-in-2d = This calculator cannot plot { $type }.
shared-calculator-error-action-merge-free-variable = Cannot combine an action that depends on free variable '{ $symbol }'.
shared-calculator-error-add-arguments-to-definition-many = Try including '{ $symbols }' and '{ $lastSymbol }' as arguments by defining the function as '{ $newSignature }'.
shared-calculator-error-add-arguments-to-definition-one = Try including '{ $lastSymbol }' as an argument by defining the function as '{ $newSignature }'.
shared-calculator-error-add-type-error = Cannot add { $symbol1 } and { $symbol2 }.
shared-calculator-error-adjacent-mixed-number = Sorry, I don't know what to do with mixed number '{ $mixedNumber }'. Try using a '*' symbol around it.
shared-calculator-error-adjacent-numbers = Sorry, I don't know what to do with adjacent numbers '{ $left }' and '{ $right }'. Try using parentheses or a '*' symbol.
shared-calculator-error-ans-undefined = The previous expression didn't define any value for ans.
shared-calculator-error-assignments-unsupported = This calculator does not support defining variables.
shared-calculator-error-bad-default = Cannot use 'default' here.
shared-calculator-error-bad-export = Cannot export this type of expression.
shared-calculator-error-bad-for-input-list-dependency = A definition on the right-hand side of 'for' can't depend on input variable '{ $symbol }'.
shared-calculator-error-bad-for-interval-dependency = Parameter bounds on the right-hand side of 'for' can't depend on input variable '{ $symbol }'.
shared-calculator-error-bad-implicit-call = Use parentheses around the argument of '{ $symbol }'.
shared-calculator-error-bad-integral-bound-dependency = Integration bounds can't depend on integration variable '{ $symbol }'.
shared-calculator-error-bad-interval-comprehension-arity =
    { $count ->
        [one] You can't use 'for' to parameterize { $type } using 1 parameter.
       *[other] You can't use 'for' to parameterize { $type } using { $count } parameters.
    }
shared-calculator-error-bad-log-exponent = Only { $form } is supported. Otherwise, use parens.
shared-calculator-error-bad-product-bound-dependency = Product bounds can't depend on product index '{ $symbol }'.
shared-calculator-error-bad-sample-size = Sample size must be a finite, non-negative number.
shared-calculator-error-bad-sum-bound-dependency = Summation bounds can't depend on summation index '{ $symbol }'.
shared-calculator-error-bad-symbol-context = You can't use '{ $symbol }' in this context.
shared-calculator-error-bad-trig-exponent = Only { $form1 } and { $form2 } are supported. Otherwise, use parens.
shared-calculator-error-bad-tuple-dimensions = Points may only have { $symbol } coordinates.
shared-calculator-error-binary-operator-missing-operand = You need something on both sides of the '{ $symbol }' symbol.
shared-calculator-error-blank-expression = You haven't written anything yet.
shared-calculator-error-boxplot-breadth-invalid = Invalid height. Try using any number.
shared-calculator-error-boxplot-offset-invalid = Invalid offset. Try using any number.
shared-calculator-error-cannot-assign-color = Cannot assign a color to '{ $variable }'.
shared-calculator-error-cannot-redefine = You can't redefine '{ $symbol }' because it's already defined.
shared-calculator-error-cannot-redefine-root = You can't define '{ $symbol }' because '{ $symbolRoot }' is already defined.
shared-calculator-error-cannot-restrict = Cannot create a restriction based on '{ $variable }' in this type of expression.
shared-calculator-error-cannot-restrict-triangles-with-list = Cannot use a list of restrictions on 3d triangles.
shared-calculator-error-cannot-restrict-with-equality = Cannot create an equality restriction based on '{ $variable }' in this type of expression.
shared-calculator-error-cannot-subscript = '{ $symbol }' cannot have a subscript.
shared-calculator-error-cant-combine-spherical-and-cylindrical = Can't combine spherical and cylindrical coordinates.
shared-calculator-error-cdf-bound-invalid = Invalid cdf bound. Try using any number.
shared-calculator-error-cdf-too-many-arguments = 'cdf' should be called on a distribution with at most two numbers. { $recommendation }
shared-calculator-error-cdf-too-many-arguments-recommendation = For example, try typing: D.cdf(-1,1) where D=normaldist().
shared-calculator-error-cdf-wrong-arity = 'cdf' should be called on a distribution with at least one number. { $recommendation }
shared-calculator-error-cdf-wrong-arity-recommendation = For example, try typing: D.cdf(x) where D=normaldist().
shared-calculator-error-chisq-list-length-mismatch = Arguments of '{ $symbol }' must be lists with the same length.
shared-calculator-error-chisq-list-too-short = Each argument of '{ $symbol }' must be a list with at least 2 elements.
shared-calculator-error-chisq-variable-list-length = Arguments of '{ $symbol }' must be lists with constant length.
shared-calculator-error-clickable-object-assignment-not-defined = "{ $symbol }" is not defined. Try using a different variable or adding a slider.
shared-calculator-error-clickable-object-assignment-not-identifier = Invalid symbol. Try using a single letter.
shared-calculator-error-clickable-object-invalid-expression = Can't evaluate this. Try a number or simple expression.
shared-calculator-error-colon-missing-condition = The left side of a ':' must be a condition, like 'x>1'.
shared-calculator-error-color-arity = '{ $symbol }' should be called with 3 arguments. { $recommendation }
shared-calculator-error-color-arity-recommendation = For example, try typing: { $recommendation }.
shared-calculator-error-color-not-assigned = To use a color, you must assign it to a variable.
shared-calculator-error-combine-type-error = Cannot combine { $symbol1 } and { $symbol2 }.
shared-calculator-error-comparator-type-error = Cannot compare { $symbol1 } to { $symbol2 }.
shared-calculator-error-complex-list-access = Indexing a list with a complex number is not well-defined.
shared-calculator-error-complex-operation-undefined = Note: '{ $symbol }' isn't well-defined for complex numbers.
shared-calculator-error-complex-operation-unimplemented = Note: '{ $symbol }' is not yet implemented for complex numbers.
shared-calculator-error-complex-point-coordinate = Points with complex coordinates are not supported.
shared-calculator-error-complex-round = Note: '{ $symbol }' with complex precision is not well-defined.
shared-calculator-error-complex-sort = Note: '{ $symbol }' uses lexicographic ordering for complex numbers.
shared-calculator-error-complex-table-point-coordinate = Only real-valued coordinate pairs can be plotted.
shared-calculator-error-complex-wirtinger-differs = The derivative of a non-holomorphic function is treated as the Wirtinger derivative.
shared-calculator-error-complicated-double-inequality = We only support solved double inequalities. Try deleting one side of the inequality.
shared-calculator-error-complicated-polar-implicit = Polar equations must be linear in r.
shared-calculator-error-constant-unsupported = This calculator does not support the constant '{ $symbol }'.
shared-calculator-error-coordinate-access-type-error = Cannot access coordinate '{ $coordinate }' of { $symbol }.
shared-calculator-error-custom-regressions-unsupported = This calculator does not support custom regressions.
shared-calculator-error-custom-toolbar-not-condition = Please write a valid condition and make sure every referenced variable is defined.
shared-calculator-error-deeply-nested = Definitions are nested too deeply.
shared-calculator-error-dependency-cycle = '{ $symbols }' and '{ $lastSymbol }' can't be defined in terms of each other.
shared-calculator-error-depends-on-deleted-geo-object = This depends on a geometric object that's no longer defined.
shared-calculator-error-derivative-missing-body = What do you want to take the derivative of?
shared-calculator-error-derivative-recursive-cycle = Cannot take the derivative of { $symbol1 } inside its own definition.
shared-calculator-error-derivative-type-error = Cannot take the derivative of { $symbol }.
shared-calculator-error-derivative-type-error-respect = Cannot take the derivative of { $symbol1 } with respect to { $symbol2 }.
shared-calculator-error-derivative-variable-type-error = Cannot take derivative with respect to '{ $symbol1 }' because it is { $symbol2 }.
shared-calculator-error-differential-with-superscript = Integration variable cannot have a superscript.
shared-calculator-error-distribution-as-function = Cannot call distribution '{ $symbol }' as a function. Try '{ $symbol }.pdf(x)'.
shared-calculator-error-divide-type-error = Cannot divide { $symbol1 } by { $symbol2 }.
shared-calculator-error-domain-max-invalid = Invalid domain max. Try using any number.
shared-calculator-error-domain-max-less-than-min = Invalid domain limits. Min should be less than max.
shared-calculator-error-domain-min-invalid = Invalid domain min. Try using any number.
shared-calculator-error-dot-lhs-constant-number = Sorry, I don't understand this use of '.' after a constant number.
shared-calculator-error-dot-lhs-type-error = Cannot call '.{ $symbol }' on { $type }.
shared-calculator-error-dot-rhs-property-error = '.{ $symbol }' cannot be followed by parentheses.
shared-calculator-error-duplicate-function-parameter = Cannot use '{ $dependency }' for multiple parameters of this function.
shared-calculator-error-duplicate-update-rules = An action cannot specify multiple update rules for '{ $symbol }'.
shared-calculator-error-empty-paren = Parentheses cannot be empty.
shared-calculator-error-empty-pipe = Absolute value symbol cannot be empty.
shared-calculator-error-empty-radical = Radical cannot be empty.
shared-calculator-error-empty-radical-index = Radical index cannot be empty.
shared-calculator-error-empty-square-bracket = Square brackets cannot be empty.
shared-calculator-error-empty-subscript = Subscripts cannot be empty.
shared-calculator-error-empty-superscript = Superscripts cannot be empty.
shared-calculator-error-equation-required = Try adding an equals sign to turn this into an equation.
shared-calculator-error-equation-required-symbol = Try adding '{ $lhs }' to the beginning of this equation.
shared-calculator-error-equations-unsupported = This calculator does not support this type of equation.
shared-calculator-error-event-handler-type-error = This should be an action. Try '{ $example }'.
shared-calculator-error-exponent-type-error = Cannot raise { $symbol1 } to { $symbol2 }.
shared-calculator-error-feature-unavailable = This feature is not available in the current calculator.
shared-calculator-error-fraction-empty = You need a numerator and denominator for your fraction.
shared-calculator-error-fraction-missing-denominator = You need a denominator for the bottom of your fraction.
shared-calculator-error-fraction-missing-numerator = You need a numerator for the top of your fraction.
shared-calculator-error-function-definition-unsupported = This calculator does not support function definitions.
shared-calculator-error-function-name-as-parameter = Cannot use function name '{ $dependency }' as a function parameter.
shared-calculator-error-function-not-defined = Function '{ $dependency }' is not defined.
shared-calculator-error-function-only-works-in-complex = The '{ $symbol }' function is only available in complex mode.
shared-calculator-error-function-type-error-1 = Function '{ $fn }' cannot be applied to { $arg }.
shared-calculator-error-function-type-error-2 = Function '{ $fn }' cannot be applied to { $arg1 } and { $arg2 }.
shared-calculator-error-function-type-error-many = Function '{ $fn }' cannot be applied to these arguments.
shared-calculator-error-function-unsupported = This calculator does not support the '{ $symbol }' function.
shared-calculator-error-geometry-length-type-error = Function '{ $fn }' cannot be applied to { $arg } in the geometry calculator. Use '{ $alternativeFn }' to find the number of elements in a list.
shared-calculator-error-gpu-expression-too-complex = We encountered a GPU error while plotting this expression.
shared-calculator-error-gpu-function-unsupported = Cannot use the '{ $symbol }' function here.
shared-calculator-error-gpu-integral-unsupported = Cannot use integrals here.
shared-calculator-error-gpu-long-product = Products may not have more than { $maxTermCount } terms here.
shared-calculator-error-gpu-long-sum = Sums may not have more than { $maxTermCount } terms here.
shared-calculator-error-gpu-max-list-size = Lists may not have more than { $maxListSize } elements here.
shared-calculator-error-gpu-recursion-unsupported = Cannot use recursive functions here.
shared-calculator-error-gpu-variable-list-length = List length cannot depend on variable '{ $symbol }' here.
shared-calculator-error-gpu-variable-product = Product bound cannot depend on variable '{ $symbol }' here.
shared-calculator-error-gpu-variable-sum = Sum bound cannot depend on variable '{ $symbol }' here.
shared-calculator-error-heterogeneous-list = All elements of a list must have the same type.
shared-calculator-error-identifier-as-function = '{ $symbol }' is a function. Try using parentheses.
shared-calculator-error-identifier-is-not-function = '{ $symbol }' is not a function. Try defining it as '{ $symbol }(x) = x^2' instead.
shared-calculator-error-illegal-bin-width = The second argument to '{ $symbol }' must be a positive number.
shared-calculator-error-illegal-dot-call = Function '{ $symbol }' cannot be called with dot notation.
shared-calculator-error-implicits-disabled = Plotting implicit equations and inequalities is disabled.
shared-calculator-error-incorrect-list-comprehension-input = Definitions on the right-hand side of 'for' must set a variable equal to a list. Try i=[1...10].
shared-calculator-error-incorrect-product-lower-bound = Lower bound of a product must set a variable equal to a number. Try n=1.
shared-calculator-error-incorrect-sum-lower-bound = Lower bound of a sum must set a variable equal to a number. Try n=1.
shared-calculator-error-index-type-error = Cannot index { $symbol1 } with { $symbol2 }.
shared-calculator-error-inequalities-disabled = Plotting inequalities is disabled.
shared-calculator-error-inequalities-unsupported = This calculator does not support inequalities.
shared-calculator-error-inference-nonlinear-regression = Regression parameter inference is only supported for linear regressions.
shared-calculator-error-integral-argument-type-error = Cannot take the integral of { $symbol }.
shared-calculator-error-integral-lower-bound-type-error = Lower bound of an integral cannot be { $symbol }.
shared-calculator-error-integral-missing-body = What do you want to take the integral of?
shared-calculator-error-integral-missing-bound = Integrals must have upper and lower bounds.
shared-calculator-error-integral-missing-differential = Integrand must end with an integration variable, like dx.
shared-calculator-error-integral-upper-bound-type-error = Upper bound of an integral cannot be { $symbol }.
shared-calculator-error-internal-error = [internal] { $msg }
shared-calculator-error-invalid-dependent-first-table-column = This column header can't be defined elsewhere in the calculator.
shared-calculator-error-invalid-double-equality-3d = Sorry, we only plot double equalities that contain z. Try adding 0*z to one side.
shared-calculator-error-invalid-double-inequality-3d = We only plot double inequalities of x, y, and z.
shared-calculator-error-invalid-double-inequality-variables = We only plot double inequalities of x and y.
shared-calculator-error-invalid-first-table-column = First column may not be { $most } or { $last }.
shared-calculator-error-invalid-half-empty-range = Range must have an upper and lower bound.
shared-calculator-error-invalid-implicit-variables = We only support implicit equations of x and y.
shared-calculator-error-invalid-implicit-variables-3d = We only support implicit equations of x, y, and z.
shared-calculator-error-invalid-inequality-variables = We only plot inequalities of x and y, or r and \u03B8.
shared-calculator-error-invalid-interval-comprehension-invalid-bound = Parameter bounds on the right-hand side of 'for' must be of the form '0<{ $identifier }<1'.
shared-calculator-error-invalid-interval-comprehension-return-type = You can't use 'for' to parameterize { $type }.
shared-calculator-error-invalid-lhs = Sorry, you can't graph { $symbol } as a function of anything yet.
shared-calculator-error-invalid-operator-name = Operator names may only contain letters.
shared-calculator-error-invalid-regression-parameter = '{ $symbol }' may not be used as a regression parameter. Try using a different variable name.
shared-calculator-error-invalid-subscript = Subscripts may only contain letters and digits. '{ $symbol }' is not allowed.
shared-calculator-error-invalid-table-entry = Table entries must be simple expressions. { $supplement }
shared-calculator-error-invalid-table-header = Table headers must be simple expressions. { $supplement }
shared-calculator-error-list-comprehension-input-type-error = A definition on the right-hand side of 'for' must be a list, but { $identifier } is { $actual }. Try { $identifier }={ $example }.
shared-calculator-error-list-type-error = Cannot store { $symbol1 } in a list.
shared-calculator-error-log-scale-box-plot = Cannot plot a box plot on a log scale.
shared-calculator-error-log-scale-dot-plot = Cannot plot a dot plot on a log scale.
shared-calculator-error-log-scale-histogram = Cannot plot a histogram on a log scale.
shared-calculator-error-log-scale-type-error = Cannot plot { $symbol } on a log scale.
shared-calculator-error-logbase-unsupported = This calculator does not support specifying the base of a logarithm. Try 'log' or 'ln'.
shared-calculator-error-malformed-list = Lists are written like this: [1, 2, 3].
shared-calculator-error-malformed-point = Points are written like this: (1, 2).
shared-calculator-error-matrix-add-dimensions = Cannot add matrices with different dimensions.
shared-calculator-error-matrix-assignment = This calculator does not support this type of variable definition. Try using 'New Matrix'.
shared-calculator-error-matrix-element-type-error = Cannot use { $arg } as an element of a matrix.
shared-calculator-error-matrix-fractional-power = A matrix can only be raised to integer powers.
shared-calculator-error-matrix-invalid-variable = Cannot use '{ $symbol }' as a variable.
shared-calculator-error-matrix-multiply-dimensions = Cannot multiply matrices with incompatible dimensions.
shared-calculator-error-matrix-power-dimensions = Only square matrices can be raised to a power.
shared-calculator-error-matrix-subtract-dimensions = Cannot subtract matrices with different dimensions.
shared-calculator-error-max-list-size = Lists may not have more than { $maxListSize } elements.
shared-calculator-error-method-requires-list = '{ $symbol }' requires a list. For example, try typing: { $recommendation }.
shared-calculator-error-mismatched-braces = Expected '{ $symbol1 }' to match '{ $symbol2 }'.
shared-calculator-error-mismatched-double-inequality = Double inequalities must both go the same way, e.g. { $example }.
shared-calculator-error-mixed-comparator-chain = Cannot mix inequalities and equations in a chain of comparisons.
shared-calculator-error-multiply-defined = You've defined '{ $dependency }' in more than one place. Try deleting some of the definitions of '{ $dependency }'.
shared-calculator-error-multiply-type-error = Cannot multiply { $symbol1 } by { $symbol2 }.
shared-calculator-error-multiply-type-error-2d = Ambiguous multiplication of { $symbol1 } by { $symbol2 }. Try typing: (1, 2) * (2, 1).
shared-calculator-error-multiply-type-error-3d = Ambiguous multiplication of { $symbol1 } by { $symbol2 }. Try typing: (1, 2, 3) cross (2, 1, 0).
shared-calculator-error-multiply-type-error-cross = Cannot take the cross product of { $symbol1 } and { $symbol2 }.
shared-calculator-error-negative-type-error = Cannot negate { $symbol }.
shared-calculator-error-nested-interval-comprehension = You can't yet use 'for' to introduce a new parameter to an already parameterized point.
shared-calculator-error-non-arithmetic-range = Ranges must be arithmetic sequences.
shared-calculator-error-non-list-double-reducer = Both arguments of '{ $symbol }' must be lists. For example, try typing: { $recommendation }.
shared-calculator-error-non-list-parameterized-reducer = The first argument of '{ $symbol }' must be a list. For example, try typing: { $recommendation }.
shared-calculator-error-non-singular-inverse = Singular matrices do not have an inverse.
shared-calculator-error-non-square-determinant = Only square matrices have a determinant.
shared-calculator-error-non-square-inverse = Only square matrices have an inverse.
shared-calculator-error-non-square-trace = Only square matrices have a trace.
shared-calculator-error-operator-type-error = Cannot apply { $symbol } to { $symbol1 } and { $symbol2 }.
shared-calculator-error-optimization-error = We couldn't find any region where this model is defined.
shared-calculator-error-parameter-already-defined = You can't use '{ $dependency }' as a parameter of this function because '{ $dependency }' is already defined.
shared-calculator-error-parse-error = Sorry, I don't understand this.
shared-calculator-error-pdf-wrong-arity = 'pdf' should be called on a distribution with a number. { $recommendation }
shared-calculator-error-pdf-wrong-arity-recommendation = For example, try typing: D.pdf(x) where D=normaldist().
shared-calculator-error-percent-missing-of = '%' must be used with 'of'. Try '25% of 12'.
shared-calculator-error-piecewise-branch-type-error = Cannot use { $symbol1 } and { $symbol2 } as the branches in a piecewise. Every branch must have the same type.
shared-calculator-error-piecewise-condition-type-error = The condition in a piecewise expression must be { $symbol1 } but was { $symbol2 }.
shared-calculator-error-piecewise-missing-condition = A piecewise expression must have at least one condition.
shared-calculator-error-piecewise-part-missing-condition = Every part of a piecewise expression must have a condition except the last.
shared-calculator-error-point-type-error = Cannot use { $symbol1 } as a coordinate of { $symbol2 }.
shared-calculator-error-points-unsupported = This calculator does not support points.
shared-calculator-error-polygon-unsupported-in-3d = This calculator does not support the 'polygon' function. Try 'triangle' instead.
shared-calculator-error-prime-variable-type-error = Cannot take derivative of '{ $symbol1 }' with respect to { $symbol2 }.
shared-calculator-error-prime-without-paren = Primed function calls must use parentheses.
shared-calculator-error-primed-function-arity = Prime notation can only be used for functions of a single argument.
shared-calculator-error-product-argument-type-error = Cannot take the product of { $symbol }.
shared-calculator-error-product-infinite-bound-type-error = Product bounds must be finite numbers.
shared-calculator-error-product-lower-bound-type-error = Lower bound of a product cannot be { $symbol }.
shared-calculator-error-product-missing-body = What do you want to take the product of?
shared-calculator-error-product-missing-bound = Products must have upper and lower bounds.
shared-calculator-error-product-upper-bound-type-error = Upper bound of a product cannot be { $symbol }.
shared-calculator-error-random-arity = 'random' should be called with no arguments, or an optional number of samples. For example, try random() or random(10).
shared-calculator-error-random-from-broadcast-distribution = Cannot sample from a list of distributions
shared-calculator-error-recursion-argument-type = Expected argument { $index } to be { $expectedType } but found { $foundType }.
shared-calculator-error-recursion-base-case-argument-non-number = Base case arguments must be simple numbers. Try using piecewise syntax.
shared-calculator-error-recursion-base-case-free-variable = This recursion's base case can't depend on variable '{ $freeVariable }'.
shared-calculator-error-recursion-base-case-same-type = Base cases must all have the same return type.
shared-calculator-error-recursion-base-case-too-complicated = For a recursion with multiple parameters, try using piecewise syntax.
shared-calculator-error-recursion-depth-limit-exceeded = Recursive depth limit exceeded without reaching a base case.
shared-calculator-error-recursion-does-not-terminate = This recursion doesn't reach a base case.
shared-calculator-error-recursion-missing-base-case =
    { $count ->
        [one] The definition of function '{ $lastSymbol }' depends on itself. If '{ $lastSymbol }' is meant to be a recursive function, try adding a valid base case.
       *[other] The definitions of functions '{ $symbols }' and '{ $lastSymbol }' depend on each other. If they are meant to be mutually recursive functions, try adding a valid base case.
    }
shared-calculator-error-recursion-wrong-arity =
    { $count ->
        [one] Function '{ $fnSymbol }' requires 1 argument.
       *[other] Function '{ $fnSymbol }' requires { $count } arguments.
    }
shared-calculator-error-regression-recursion = Recursive functions may not be used inside regressions.
shared-calculator-error-regression-type-error = Cannot regress { $symbol1 } against { $symbol2 }.
shared-calculator-error-regressions-unsupported = This calculator does not support regressions.
shared-calculator-error-required-arguments-area = Function '{ $symbol }' requires a polygon.
shared-calculator-error-required-arguments-circle = Function 'circle' requires a center point and another point, segment, or radius value.
shared-calculator-error-required-arguments-coterminal = Function '{ $symbol }' requires an angle.
shared-calculator-error-required-arguments-dilate = Function '{ $symbol }' requires an object, then a point and a number.
shared-calculator-error-required-arguments-glider = Function 'glider' requires an object, then a number.
shared-calculator-error-required-arguments-intersection = Function 'intersection' requires 2 objects (lines, circles, or arcs).
shared-calculator-error-required-arguments-length = Function 'length' requires a segment.
shared-calculator-error-required-arguments-midpoint = Function 'midpoint' requires a segment or 2 points.
shared-calculator-error-required-arguments-perpendicular = Function '{ $symbol }' requires a line and a point.
shared-calculator-error-required-arguments-points = Function '{ $symbol }' requires { $count } points.
shared-calculator-error-required-arguments-polygon = Function 'polygon' requires several points.
shared-calculator-error-required-arguments-radius = Function '{ $symbol }' requires a circle or arc.
shared-calculator-error-required-arguments-reflect = Function 'reflect' requires an object, then a line, segment, ray, or vector.
shared-calculator-error-required-arguments-sphere = Function 'sphere' requires a center point and a radius value.
shared-calculator-error-required-arguments-start = Function '{ $symbol }' requires a vector.
shared-calculator-error-required-arguments-supplement = Function 'supplement' requires a directed angle.
shared-calculator-error-required-arguments-translate = Function 'translate' requires an object, then 2 points or a vector.
shared-calculator-error-required-arguments-triangle = Function 'triangle' requires three 3d points.
shared-calculator-error-required-arguments-vector = Function 'vector' requires a start point and end point.
shared-calculator-error-rescaled-observed = Expected and observed totals don't match.
shared-calculator-error-self-referential-base-case = A base case for recursive function '{ $symbol }' cannot depend on '{ $symbol }'.
shared-calculator-error-self-referential-functions =
    { $count ->
        [one] The definition of function '{ $lastSymbol }' depends on itself.
       *[other] The definitions of functions '{ $symbols }' and '{ $lastSymbol }' depend on each other.
    }
shared-calculator-error-self-referential-suggest-alternative = '{ $symbol }' cannot be defined recursively. Try renaming this function.
shared-calculator-error-shadowed-index = You can't use '{ $symbol }' as an index because it's already defined.
shared-calculator-error-shadowed-integration-variable = You can't use '{ $symbol }' as an integration variable because it's already defined.
shared-calculator-error-shadowed-list-comprehension-input = You can't define '{ $symbol }' more than once on the right-hand side of 'for'.
shared-calculator-error-single-variable-implicit-equations-disabled = Plotting single-variable implicit equations is disabled.
shared-calculator-error-slider-limit-references-export = Slider limits cannot depend on the slider variable '{ $symbol }'.
shared-calculator-error-slider-max-invalid = Invalid slider max. Try using any number.
shared-calculator-error-slider-max-less-than-min = Invalid slider limits. Min should be less than max.
shared-calculator-error-slider-min-invalid = Invalid slider min. Try using any number.
shared-calculator-error-slider-step-invalid = Invalid slider step. Try using any number.
shared-calculator-error-slow-evaluation = This is taking a long time to evaluate. Try editing or deleting this expression.
shared-calculator-error-substitution-ambiguous-comma = Ambiguous use of ',' and '{ $operation }'. Add parentheses around the '{ $operation }' expression.
shared-calculator-error-substitution-body-action = The left hand side of a 'with' substitution cannot be an action.
shared-calculator-error-substitution-body-regression-parameter-dependency = Can't use '{ $operator }' to substitute for the existing variable '{ $globalVariable }' because the expression on the left-hand side depends on '{ $regressionParameter }', which is a regression parameter.
shared-calculator-error-substitution-duplicate-assignment = A 'with' expression cannot make multiple substitutions for '{ $symbol }'.
shared-calculator-error-substitution-function-lhs = Substituting for '{ $symbol }' is not allowed because it is a function.
shared-calculator-error-substitution-illegal-lhs = Substituting for '{ $symbol }' is not allowed.
shared-calculator-error-substitution-invalid-assignments = 'with' must be followed by one or more variable definitions.
shared-calculator-error-substitution-local-lhs = Substituting for variable '{ $symbol }' is not allowed because it is locally defined.
shared-calculator-error-substitution-nested = Using one 'with' expression inside another 'with' expression is not allowed.
shared-calculator-error-substitution-recursive-call-lhs = Can't use '{ $operator }' to substitute for the existing variable '{ $globalVariable }' because the expression on the left-hand side depends on a recursive function call to '{ $fnSymbol }'.
shared-calculator-error-substitution-type-error = Cannot substitute { $actual } for { $expected }.
shared-calculator-error-substitution-unsupported-interval = Intervals are not allowed on the right-hand side of 'with'. You might want to try using 'for' instead.
shared-calculator-error-subtract-type-error = Cannot subtract { $symbol2 } from { $symbol1 }.
shared-calculator-error-sum-argument-type-error = Cannot take the sum of { $symbol }.
shared-calculator-error-sum-infinite-bound-type-error = Summation bounds must be finite numbers.
shared-calculator-error-sum-lower-bound-type-error = Lower bound of a sum cannot be { $symbol }.
shared-calculator-error-sum-missing-body = What do you want to take the sum of?
shared-calculator-error-sum-missing-bound = Sums must have upper and lower bounds.
shared-calculator-error-sum-upper-bound-type-error = Upper bound of a sum cannot be { $symbol }.
shared-calculator-error-superscript-with-prime = Superscripts and primes cannot be combined.
shared-calculator-error-table-entry-type-error = Table entry cannot be { $symbol }.
shared-calculator-error-table-equation-supplement = Equations are not allowed.
shared-calculator-error-table-function-definition-supplement = Function definitions are not allowed.
shared-calculator-error-table-generic-supplement = This type of expression is not allowed.
shared-calculator-error-table-header-type-error = Table header cannot be { $symbol }.
shared-calculator-error-table-inequality-supplement = Inequalities are not allowed.
shared-calculator-error-table-list-supplement = Lists are not allowed.
shared-calculator-error-table-regression-invalid-data = There's an error in the provided data.
shared-calculator-error-table-regression-invalid-export-identifier = The headers need to be simple identifiers to export as a custom regression. Try assigning { $latex } to a variable and then referencing it in the table header.
shared-calculator-error-table-regression-log-with-negative = Logarithmic regressions only work if the first column is all positive numbers.
shared-calculator-error-table-regression-supplement = Regressions are not allowed.
shared-calculator-error-table-regression-type-error = The data contains { $symbol }.
shared-calculator-error-tdist-wrong-arity = 'tdist' requires 1 argument. For example, try typing: tdist(1).
shared-calculator-error-ticker-min-step-nonnegative = Min step must evaluate to a non-negative number.
shared-calculator-error-token-with-subscript = Tokens may not have subscripts.
shared-calculator-error-too-many-arguments = '{ $symbol }' accepts at most { $max } arguments.
shared-calculator-error-too-many-variables-many-symbols = Too many variables. Try defining '{ $variables }' or '{ $lastVariable }'.
shared-calculator-error-too-many-variables-no-symbols = Too many variables, I don't know what to do with this.
shared-calculator-error-too-many-variables-one-symbol = Too many variables. Try defining '{ $variable }'.
shared-calculator-error-transformation-definition-expected-types-1 = Try using { $arg }.
shared-calculator-error-transformation-definition-expected-types-2 = Try using { $arg1 } and { $arg2 }.
shared-calculator-error-transformation-definition-expected-types-use-fewer-1 = Try using just { $arg }.
shared-calculator-error-transformation-definition-expected-types-use-fewer-2 = Try using just { $arg1 } and { $arg2 }.
shared-calculator-error-transformation-definition-type-error-1 = A { $fn } cannot be defined using { $arg }. { $expectedTypeMessage }
shared-calculator-error-transformation-definition-type-error-2 = A { $fn } cannot be defined using { $arg1 } and { $arg2 }. { $expectedTypeMessage }
shared-calculator-error-transformation-definition-type-error-many = A '{ $fn }' cannot be defined with these arguments.
shared-calculator-error-transformation-definition-type-error-use-more-1 = A { $fn } cannot be defined using just { $arg }. { $expectedTypeMessage }
shared-calculator-error-transformation-definition-type-error-use-more-2 = A { $fn } cannot be defined using just { $arg1 } and { $arg2 }. { $expectedTypeMessage }
shared-calculator-error-transformation-type-error-1 = Transformation '{ $fn }' cannot be applied to { $arg }.
shared-calculator-error-transformation-type-error-2 = Transformation '{ $fn }' cannot be applied to { $arg1 } and { $arg2 }.
shared-calculator-error-transformation-type-error-many = Transformation '{ $fn }' cannot be applied to these arguments.
shared-calculator-error-ttest-list-too-short = Sample for '{ $symbol }' must have at least 2 observations.
shared-calculator-error-two-numbers-error = Cannot make a polygon from two numbers.
shared-calculator-error-unary-operator-missing-left = You need something before the '{ $symbol }' symbol.
shared-calculator-error-unary-operator-missing-right = You need something after the '{ $symbol }' symbol.
shared-calculator-error-unexpected-equality = Cannot use an equality here.
shared-calculator-error-unexpected-inequality = Cannot use an inequality here.
shared-calculator-error-unexpected-prime = Sorry, I don't understand this use of prime notation.
shared-calculator-error-unexpected-subscript = Only functions and variables may have subscripts.
shared-calculator-error-unexpected-symbol = Sorry, I don't understand the way that '{ $symbol }' is used here.
shared-calculator-error-unplottable-chained-equality = This calculator cannot plot chained equations.
shared-calculator-error-unplottable-long-inequality-chain = This calculator cannot plot chains of more than 2 inequalities.
shared-calculator-error-unplottable-polar-function = We can't plot \u03B8 as a function of r. Try plotting r(\u03B8) instead.
shared-calculator-error-unrecognized-symbol = Sorry, I don't understand the '{ $symbol }' symbol.
shared-calculator-error-update-rule-function-lhs = '{ $symbol }' cannot be updated because it is a function.
shared-calculator-error-update-rule-illegal-lhs = Variable '{ $symbol }' cannot be updated.
shared-calculator-error-update-rule-local-lhs = Variable '{ $symbol }' cannot be updated because it is locally defined.
shared-calculator-error-update-rule-non-identifier-lhs = The left hand side of '{ $arrow }' should be a variable name like '{ $example }'.
shared-calculator-error-update-rule-type-error = Cannot update a variable to { $symbol }.
shared-calculator-error-update-rule-undefined-lhs = Variable '{ $symbol }' must be defined to be updated.
shared-calculator-error-use-r-for-cylindrical-coordinates = Can't combine '\u03C1' and 'z'. Try 'r' for cylindrical coordinates.
shared-calculator-error-use-rho-for-spherical-coordinates = Can't combine 'r' and '\u03C6'. Try '\u03C1' (rho) for spherical coordinates.
shared-calculator-error-variable-as-function = Variable '{ $dependency }' can't be used as a function.
shared-calculator-error-variable-invalid-function-name = This calculator can not use '{ $symbol }' as a function name.
shared-calculator-error-variable-length-distribution-list = The length of a list of distributions can't depend on free variable '{ $symbol }'.
shared-calculator-error-variable-length-integral-depends-on-integration-var = Can't integrate a list whose length depends on integration variable '{ $symbol }'.
shared-calculator-error-variable-length-product-body-depends-on-index = Can't take the product of a list whose length depends on product index '{ $symbol }'.
shared-calculator-error-variable-length-sum-body-depends-on-index = Can't sum a list whose length depends on summation index '{ $symbol }'.
shared-calculator-error-variable-length-top-level-list = Can't plot a list whose length depends on free variable '{ $symbol }'.
shared-calculator-error-variable-seed = Random seed cannot depend on free variable '{ $symbol }'.
shared-calculator-error-variable-unsupported = This calculator does not support the '{ $symbol }' variable.
shared-calculator-error-variables-unsupported = This calculator does not support variables like '{ $variable }'.
shared-calculator-error-viewport-bound-type-error = Cannot use { $type } as a viewport bound.
shared-calculator-error-write-integral = Type '{ $command }' for { $symbol }.
shared-calculator-error-wrong-arity-many-arg = Function '{ $dependency }' requires { $assignment_arity } arguments. { $supplement }
shared-calculator-error-wrong-arity-single-arg-too-few = Function '{ $dependency }' requires an argument. { $supplement }
shared-calculator-error-wrong-arity-single-arg-too-many = Function '{ $dependency }' requires only 1 argument. { $supplement }
shared-calculator-error-wrong-arity-supplement = For example, try typing: { $recommendation }.
shared-calculator-error-wrong-two-arg-arity = Function '{ $symbol }' requires 2 arguments. For example, try typing: { $recommendation }.
shared-calculator-error-zero-arg-reducer = Function '{ $symbol }' requires at least one argument. For example, try typing: { $symbol }(1, 2).
shared-calculator-label-empty-list = empty list
shared-calculator-label-for = for
shared-calculator-label-hide-custom-colors = Hide custom colors from geo toolbar
shared-calculator-label-list-of-count-items-suffix =
    { $count ->
        [0] empty
        [one] 1 item
       *[other] { $count } items
    }
shared-calculator-label-slow-plotting = This expression is currently being plotted and may take a long time
shared-calculator-label-toast-learn-more = Learn more
shared-calculator-label-toast-undo = Undo
shared-calculator-label-undefined = undefined
shared-calculator-label-value-type-action = an action
shared-calculator-label-value-type-angle = an angle
shared-calculator-label-value-type-any = an unknown object
shared-calculator-label-value-type-arc = an arc
shared-calculator-label-value-type-bool = a true/false value
shared-calculator-label-value-type-chi-square-goodness-of-fit = a chi-square goodness of fit test
shared-calculator-label-value-type-chi-square-test-of-independence = a chi-square test for independence
shared-calculator-label-value-type-circle = a circle
shared-calculator-label-value-type-color = a color
shared-calculator-label-value-type-complex = a complex number
shared-calculator-label-value-type-confidence-interval = a confidence interval
shared-calculator-label-value-type-directed-angle = a directed angle
shared-calculator-label-value-type-distribution = a distribution
shared-calculator-label-value-type-empty-list = an empty list
shared-calculator-label-value-type-error = an error object
shared-calculator-label-value-type-lambda-complex = a parameterized complex number
shared-calculator-label-value-type-lambda-point = a parameterized point
shared-calculator-label-value-type-lambda-point3d = a parameterized 3d point
shared-calculator-label-value-type-line = a line
shared-calculator-label-value-type-list-of-2d-points = a list of 2d points
shared-calculator-label-value-type-list-of-3d-points = a list of 3d points
shared-calculator-label-value-type-list-of-angles = a list of angles
shared-calculator-label-value-type-list-of-any = a list of unknown objects
shared-calculator-label-value-type-list-of-arcs = a list of arcs
shared-calculator-label-value-type-list-of-bool = a list of true/false values
shared-calculator-label-value-type-list-of-chi-square-goodness-of-fit = a list of chi-square tests of goodness of fit
shared-calculator-label-value-type-list-of-chi-square-test-of-independence = a list of chi-square tests of independence
shared-calculator-label-value-type-list-of-circles = a list of circles
shared-calculator-label-value-type-list-of-colors = a list of colors
shared-calculator-label-value-type-list-of-complex = a list of complex numbers
shared-calculator-label-value-type-list-of-confidence-interval = a list of confidence intervals
shared-calculator-label-value-type-list-of-directed-angles = a list of directed angles
shared-calculator-label-value-type-list-of-distributions = a list of distributions
shared-calculator-label-value-type-list-of-lambda-complex = a list of parameterized complex numbers
shared-calculator-label-value-type-list-of-lambda-point = a list of parameterized points
shared-calculator-label-value-type-list-of-lambda-point3d = a list of parameterized 3d points
shared-calculator-label-value-type-list-of-lines = a list of lines
shared-calculator-label-value-type-list-of-numbers = a list of numbers
shared-calculator-label-value-type-list-of-one-proportion-z-inference = a list of one-proportion z-inference objects
shared-calculator-label-value-type-list-of-one-sample-t-inference = a list of one-sample t-inference objects
shared-calculator-label-value-type-list-of-one-sample-z-inference = a list of one-sample z-inference objects
shared-calculator-label-value-type-list-of-points = a list of points
shared-calculator-label-value-type-list-of-polygons = a list of polygons
shared-calculator-label-value-type-list-of-rays = a list of rays
shared-calculator-label-value-type-list-of-regression-t-inference = a list of regression t-inference objects
shared-calculator-label-value-type-list-of-restrictions = a list of restrictions
shared-calculator-label-value-type-list-of-segment3d = a list of 3d segments
shared-calculator-label-value-type-list-of-segments = a list of segments
shared-calculator-label-value-type-list-of-sphere3d = a list of 3d sphere
shared-calculator-label-value-type-list-of-t-significance-test = a list of t significance tests
shared-calculator-label-value-type-list-of-tone = a list of tones
shared-calculator-label-value-type-list-of-transformations = a list of transformations
shared-calculator-label-value-type-list-of-triangle3d = a list of 3d triangles
shared-calculator-label-value-type-list-of-two-proportion-z-inference = a list of two-proportion z-inference objects
shared-calculator-label-value-type-list-of-two-sample-t-inference = a list of two-sample t-inference objects
shared-calculator-label-value-type-list-of-two-sample-z-inference = a list of two-sample z-inference objects
shared-calculator-label-value-type-list-of-vector3d = a list of 3d vectors
shared-calculator-label-value-type-list-of-vectors = a list of vectors
shared-calculator-label-value-type-list-of-z-significance-test = a list of z significance tests
shared-calculator-label-value-type-number = a number
shared-calculator-label-value-type-one-proportion-z-inference = a one-proportion z-inference object
shared-calculator-label-value-type-one-sample-t-inference = a one-sample t-inference object
shared-calculator-label-value-type-one-sample-z-inference = a one-sample z-inference object
shared-calculator-label-value-type-point = a point
shared-calculator-label-value-type-point2d = a 2d point
shared-calculator-label-value-type-point3d = a 3d point
shared-calculator-label-value-type-polygon = a polygon
shared-calculator-label-value-type-ray = a ray
shared-calculator-label-value-type-regression-t-inference = a regression t-inference object
shared-calculator-label-value-type-restriction = a restriction
shared-calculator-label-value-type-seed = a string
shared-calculator-label-value-type-segment = a segment
shared-calculator-label-value-type-segment3d = a 3d segment
shared-calculator-label-value-type-sphere3d = a 3d sphere
shared-calculator-label-value-type-t-significance-test = a t significance test
shared-calculator-label-value-type-tone = a tone
shared-calculator-label-value-type-transformation = a transformation
shared-calculator-label-value-type-triangle3d = a 3d triangle
shared-calculator-label-value-type-two-proportion-z-inference = a two-proportion z-inference object
shared-calculator-label-value-type-two-sample-t-inference = a two-sample t-inference object
shared-calculator-label-value-type-two-sample-z-inference = a two-sample z-inference object
shared-calculator-label-value-type-vector = a vector
shared-calculator-label-value-type-vector3d = a 3d vector
shared-calculator-label-value-type-z-significance-test = a z significance test
shared-calculator-label-viewport-locked-from-dynamic-bounds = Zoom is disabled when the graph bounds are computed.
shared-calculator-narration-author-mode = Author Mode
shared-calculator-narration-author-mode-off = Author mode off
shared-calculator-narration-author-mode-on = Author mode on
shared-calculator-narration-braille-mode = Braille Mode
shared-calculator-narration-disable-tool = Disable { $tool } when this condition is true
shared-calculator-narration-display-as-decimal = Displaying as fraction. Press Enter to display as Decimal
shared-calculator-narration-display-as-fraction = Displaying as decimal. Press Enter to display as Fraction
shared-calculator-narration-expression-index = Expression { $index }
shared-calculator-narration-expression-list = Expression List
shared-calculator-narration-hotkey-braille-mode-nemeth = Braille mode Nemeth
shared-calculator-narration-hotkey-braille-mode-off = Braille mode off
shared-calculator-narration-hotkey-braille-mode-ueb = Braille mode UEB
shared-calculator-narration-input-error = input has an error
shared-calculator-narration-item-clickable = clickable { $item }
shared-calculator-narration-item-selected = { $item } selected
shared-calculator-narration-item-unknown = Unknown
shared-calculator-narration-item-unselected = { $item } unselected
shared-calculator-narration-keypad = keypad
shared-calculator-narration-keypad-controlbar = Control Bar
shared-calculator-narration-keypad-key-10-n = Times ten to the power of
shared-calculator-narration-keypad-key-abs = Absolute Value
shared-calculator-narration-keypad-key-action-to = Set Value To
shared-calculator-narration-keypad-key-action-with = Substitute With
shared-calculator-narration-keypad-key-alpha = Alpha
shared-calculator-narration-keypad-key-angle = Angle
shared-calculator-narration-keypad-key-angles = Angles
shared-calculator-narration-keypad-key-ans = Answer
shared-calculator-narration-keypad-key-arc = Arc
shared-calculator-narration-keypad-key-arccos = Inverse Cosine
shared-calculator-narration-keypad-key-arccot = Inverse Cotangent
shared-calculator-narration-keypad-key-arccsc = Inverse Cosecant
shared-calculator-narration-keypad-key-arcsec = Inverse Secant
shared-calculator-narration-keypad-key-arcsin = Inverse Sine
shared-calculator-narration-keypad-key-arctan = Inverse Tangent
shared-calculator-narration-keypad-key-area = Area
shared-calculator-narration-keypad-key-arg = Argument
shared-calculator-narration-keypad-key-backspace = Backspace
shared-calculator-narration-keypad-key-beta = Beta
shared-calculator-narration-keypad-key-binomialdist = Binomial Distribution
shared-calculator-narration-keypad-key-boxplot = Box Plot
shared-calculator-narration-keypad-key-ceil = Ceiling
shared-calculator-narration-keypad-key-center = Center
shared-calculator-narration-keypad-key-chisqdist = Chi-Square Distribution
shared-calculator-narration-keypad-key-chisqgof = Chi-Square Goodness of Fit Test
shared-calculator-narration-keypad-key-chisqtest = Chi-Square Test
shared-calculator-narration-keypad-key-circle = Circle
shared-calculator-narration-keypad-key-conf = Confidence Level
shared-calculator-narration-keypad-key-conj = Complex conjugate
shared-calculator-narration-keypad-key-corr = Correlation
shared-calculator-narration-keypad-key-cos = Cosine
shared-calculator-narration-keypad-key-cosh = Hyperbolic Cosine
shared-calculator-narration-keypad-key-cot = Cotangent
shared-calculator-narration-keypad-key-coterminal = Coterminal
shared-calculator-narration-keypad-key-coth = Hyperbolic Cotangent
shared-calculator-narration-keypad-key-cov = Co Variance
shared-calculator-narration-keypad-key-covp = Population Co Variance
shared-calculator-narration-keypad-key-csc = Cosecant
shared-calculator-narration-keypad-key-csch = Hyperbolic Cosecant
shared-calculator-narration-keypad-key-cubed = Cubed
shared-calculator-narration-keypad-key-decimal = Decimal
shared-calculator-narration-keypad-key-dilate = Dilate
shared-calculator-narration-keypad-key-directed-angle = Directed Angle
shared-calculator-narration-keypad-key-directed-angles = Directed Angles
shared-calculator-narration-keypad-key-distance = Distance
shared-calculator-narration-keypad-key-divide = Divide
shared-calculator-narration-keypad-key-dof = Degrees of Freedom
shared-calculator-narration-keypad-key-dotplot = Dot Plot
shared-calculator-narration-keypad-key-enter = Enter
shared-calculator-narration-keypad-key-erf = Error Function
shared-calculator-narration-keypad-key-exp = Exponent
shared-calculator-narration-keypad-key-factorial = Factorial
shared-calculator-narration-keypad-key-floor = Floor
shared-calculator-narration-keypad-key-fraction = A over B
shared-calculator-narration-keypad-key-geodist = Geometric Distribution
shared-calculator-narration-keypad-key-glider = Glider
shared-calculator-narration-keypad-key-histogram = Histogram
shared-calculator-narration-keypad-key-imag = Imaginary
shared-calculator-narration-keypad-key-int = Integral
shared-calculator-narration-keypad-key-intersection = Intersection
shared-calculator-narration-keypad-key-inversecdf = Inverse CDF function
shared-calculator-narration-keypad-key-left-arrow = Left Arrow
shared-calculator-narration-keypad-key-left-bracket = Left Bracket
shared-calculator-narration-keypad-key-left-paren = Left Parenthesis
shared-calculator-narration-keypad-key-line = Line
shared-calculator-narration-keypad-key-ln = Natural Log
shared-calculator-narration-keypad-key-log = Log
shared-calculator-narration-keypad-key-loga = Log A
shared-calculator-narration-keypad-key-mean = Mean
shared-calculator-narration-keypad-key-median = Median
shared-calculator-narration-keypad-key-midpoint = Midpoint
shared-calculator-narration-keypad-key-minus = Minus
shared-calculator-narration-keypad-key-normaldist = Normal Distribution
shared-calculator-narration-keypad-key-nthroot = Nth Root
shared-calculator-narration-keypad-key-parallel = Parallel
shared-calculator-narration-keypad-key-pdf = Probability Density Function
shared-calculator-narration-keypad-key-percent-of = Percent Of
shared-calculator-narration-keypad-key-perimeter = Perimeter
shared-calculator-narration-keypad-key-perpendicular = Perpendicular
shared-calculator-narration-keypad-key-phi = Phi
shared-calculator-narration-keypad-key-pi = Pi
shared-calculator-narration-keypad-key-pleft = P Left
shared-calculator-narration-keypad-key-plus = Plus
shared-calculator-narration-keypad-key-poissondist = Poisson Distribution
shared-calculator-narration-keypad-key-polygon = Polygon
shared-calculator-narration-keypad-key-pright = P Right
shared-calculator-narration-keypad-key-prime = Function derivative
shared-calculator-narration-keypad-key-product = Product
shared-calculator-narration-keypad-key-quantile = Quantile
shared-calculator-narration-keypad-key-quartile = Quartile
shared-calculator-narration-keypad-key-radius = Radius
shared-calculator-narration-keypad-key-random = Random Number
shared-calculator-narration-keypad-key-ray = Ray
shared-calculator-narration-keypad-key-real = Real
shared-calculator-narration-keypad-key-reciprocal = Reciprocal
shared-calculator-narration-keypad-key-reflect = Reflect
shared-calculator-narration-keypad-key-rho = Rho
shared-calculator-narration-keypad-key-right-arrow = Right Arrow
shared-calculator-narration-keypad-key-right-bracket = Right Bracket
shared-calculator-narration-keypad-key-right-paren = Right Parenthesis
shared-calculator-narration-keypad-key-rotate = Rotate
shared-calculator-narration-keypad-key-round = Round
shared-calculator-narration-keypad-key-sec = Secant
shared-calculator-narration-keypad-key-segment = Segment
shared-calculator-narration-keypad-key-segments = Segments
shared-calculator-narration-keypad-key-shift = Shift
shared-calculator-narration-keypad-key-sin = Sine
shared-calculator-narration-keypad-key-sinh = Hyperbolic Sine
shared-calculator-narration-keypad-key-spearman = Spearman Rank Correlation
shared-calculator-narration-keypad-key-sphere = Sphere
shared-calculator-narration-keypad-key-sqrt = Square Root
shared-calculator-narration-keypad-key-squared = Squared
shared-calculator-narration-keypad-key-stats = Summary statistics
shared-calculator-narration-keypad-key-stderr = Standard Error
shared-calculator-narration-keypad-key-stdev = Standard Deviation
shared-calculator-narration-keypad-key-stdevp = Standard Deviation of Population
shared-calculator-narration-keypad-key-subscript = Subscript
shared-calculator-narration-keypad-key-sum = Sum
shared-calculator-narration-keypad-key-superscript = Superscript
shared-calculator-narration-keypad-key-supplement = Supplement
shared-calculator-narration-keypad-key-tan = Tangent
shared-calculator-narration-keypad-key-tanh = Hyperbolic Tangent
shared-calculator-narration-keypad-key-tau = Tau
shared-calculator-narration-keypad-key-tdist = Student-t Distribution
shared-calculator-narration-keypad-key-theta = Theta
shared-calculator-narration-keypad-key-times = Times
shared-calculator-narration-keypad-key-toggle-audio-trace = Toggle Audio Trace
shared-calculator-narration-keypad-key-toggle-letters = Toggle Letters
shared-calculator-narration-keypad-key-toggle-numbers = Toggle Numbers
shared-calculator-narration-keypad-key-tone = Tone
shared-calculator-narration-keypad-key-translate = Translate
shared-calculator-narration-keypad-key-triangle = Triangle
shared-calculator-narration-keypad-key-tscore = T Score
shared-calculator-narration-keypad-key-ttest = T Test
shared-calculator-narration-keypad-key-uniformdist = Uniform Distribution
shared-calculator-narration-keypad-key-vector = Vector
shared-calculator-narration-keypad-key-vertices = Vertices
shared-calculator-narration-keypad-key-ythroot = Yth Root
shared-calculator-narration-keypad-key-zproptest = Z Test of Proportions
shared-calculator-narration-keypad-key-ztest = Z Test
shared-calculator-narration-keypad-plus-minus = Plus-Minus
shared-calculator-narration-math-input-error-message = expression has error
shared-calculator-narration-settings-display-size = Display Size
shared-calculator-narration-settings-display-size-default = Display size: default
shared-calculator-narration-settings-display-size-large = Display size: large
shared-calculator-narration-show-as-decimal = Show as Decimal
shared-calculator-narration-show-as-fraction = Show as Fraction
shared-calculator-narration-six-key-mode-off = Six Key Braille Input off
shared-calculator-narration-six-key-mode-on = Six Key Braille Input on
shared-calculator-text-complex-enabled-note = Hint: try writing { $eq1 } or { $eq2 }.
shared-calculator-text-complex-radian-mode = Complex mode uses radians
shared-calculator-text-customize-toolbar = Customize the Toolbar
shared-calculator-text-graph-bounds-error = Error in the provided viewport.
shared-calculator-text-keyboard-shortcut-geometry-deselect-all-objects = Deselect All Objects
shared-calculator-text-search-results =
    { $count ->
        [0] No results.
        [one] 1 result.
       *[other] { $count } results.
    }
shared-label-to = to
basic-calculator-button-controlbar-abc = abc
basic-calculator-button-controlbar-clear = clear
basic-calculator-button-controlbar-clear-all = clear all
basic-calculator-button-controlbar-func = func
basic-calculator-button-controlbar-main = main
basic-calculator-button-turn-braille-mode-off = Turn { $mode } off
basic-calculator-error-fractions-unavailable = Fractions are not available in the current calculator.
basic-calculator-error-parentheses-unavailable = Parentheses are not available in this calculator.
basic-calculator-heading-braille-table-type-this = Type this
basic-calculator-heading-braille-table-typeset = Typeset
basic-calculator-label-answer-hint = Your answers show up on this side.
basic-calculator-label-controlbar-deg = deg
basic-calculator-label-controlbar-rad = rad
basic-calculator-label-convert-to-decimal = Convert to decimal.
basic-calculator-label-convert-to-fraction = Convert to fraction.
basic-calculator-label-reverse-contrast = Reverse Contrast
basic-calculator-link-download-braille-equations = Download Braille Equations
basic-calculator-link-view-braille-examples = View more examples
basic-calculator-narration-calc-description-fourfunction = Desmos Four-Function Calculator
basic-calculator-narration-calc-description-scientific = Desmos Scientific Calculator
basic-calculator-narration-controlbar-abc = A B C
basic-calculator-narration-controlbar-backspace = backspace
basic-calculator-narration-controlbar-clear = clear
basic-calculator-narration-controlbar-clear-all = clear all
basic-calculator-narration-controlbar-degrees = Degrees
basic-calculator-narration-controlbar-functions = Functions
basic-calculator-narration-controlbar-main = main
basic-calculator-narration-controlbar-radians = Radians
basic-calculator-narration-controlbar-redo = Redo
basic-calculator-narration-controlbar-settings = settings
basic-calculator-narration-controlbar-undo = Undo
basic-calculator-narration-convert-to-decimal = Displaying as fraction. Press Enter to display as Decimal
basic-calculator-narration-convert-to-fraction = Displaying as decimal. Press Enter to display as Fraction
basic-calculator-narration-hotkey-six-key-input-off = Six Key Braille Input off
basic-calculator-narration-hotkey-six-key-input-on = Six Key Braille Input on
basic-calculator-text-braille-mode-is-on = { $mode } is on!
basic-calculator-text-how-to-type-braille = Use a Refreshable Braille display, or just type Braille with a keyboard.
geometry-label-construct-instruction = Click down here to construct
geometry-label-pick-tool-instruction = Pick a tool to get started
graphing-calculator-button-add-table-regression = Add Regression
graphing-calculator-button-allow-animations = Allow Animation
graphing-calculator-button-audio-trace-hear-graph = Hear Graph
graphing-calculator-button-audio-trace-stop-graph = Stop Graph
graphing-calculator-button-cdf-footer-title = Cumulative Probability
graphing-calculator-button-change-image = Change Image
graphing-calculator-button-clear-graph = Delete All
graphing-calculator-button-copy-poi-coordinates = Export point to expression list
graphing-calculator-button-copy-table-regression-model-to-expression-list = Export as custom regression
graphing-calculator-button-delete-table-regression = Delete regression
graphing-calculator-button-done = Done
graphing-calculator-button-draggable = Draggable
graphing-calculator-button-draggable-points = Draggable Points
graphing-calculator-button-edit-graph-on-desmos-logo = edit graph on
graphing-calculator-button-editable-math = Editable Math
graphing-calculator-button-editable-text = Editable Text
graphing-calculator-button-funcs = funcs
graphing-calculator-button-functions = functions
graphing-calculator-button-functions-menu-custom-colors = Custom Colors
graphing-calculator-button-functions-menu-number-theory = Number Theory
graphing-calculator-button-geometry-label-points = Label Points
graphing-calculator-button-hide-folder-from-students-2 = Hide this folder from students.
graphing-calculator-button-in-front-of-everything = In front of everything
graphing-calculator-button-inference-export-significance-diagram = Export Significance Diagram
graphing-calculator-button-inference-view-numerical-outputs = View Numerical Outputs
graphing-calculator-button-keypad-audio-trace-off = Audio Trace Off
graphing-calculator-button-keypad-describe-axes = Describe Axes
graphing-calculator-button-keypad-describe-curve = Describe Curve
graphing-calculator-button-keypad-describe-curve-short = Curve
graphing-calculator-button-keypad-describe-point = Describe Point
graphing-calculator-button-keypad-describe-point-short = Point
graphing-calculator-button-label = Label
graphing-calculator-button-label-editable = Editable
graphing-calculator-button-label-point-outline = Point outline
graphing-calculator-button-label-show-on-hover = Show on hover
graphing-calculator-button-label-text-outline = Text outline
graphing-calculator-button-load-image-retry = Retry.
graphing-calculator-button-move-to-expression-list-action = Move
graphing-calculator-button-place-image-behind-graphs = Place behind graphs
graphing-calculator-button-regression-log-mode = Log Mode
graphing-calculator-button-regression-plot-residuals = plot
graphing-calculator-button-replace = Replace
graphing-calculator-button-reset-graph = Reset
graphing-calculator-button-settings-degrees = Degrees
graphing-calculator-button-settings-radians = Radians
graphing-calculator-button-settings-zoom-square = Zoom Square
graphing-calculator-button-show-all-table-rows = Show all
graphing-calculator-button-slider-add-all-variables = all
graphing-calculator-button-stop-animations = Stop Animation
graphing-calculator-button-visual-parameters-binned = Binned
graphing-calculator-button-visual-parameters-center = Center
graphing-calculator-button-visual-parameters-count = Count
graphing-calculator-button-visual-parameters-density = Density
graphing-calculator-button-visual-parameters-exact = Exact
graphing-calculator-button-visual-parameters-exclude-outliers = Exclude Outliers
graphing-calculator-button-visual-parameters-left = Left
graphing-calculator-button-visual-parameters-relative = Relative
graphing-calculator-error-equation-chi-square-expected = Error computing expected values.
graphing-calculator-error-equation-contains-unresolved-details = This plot contains fine detail that has not been fully resolved.
graphing-calculator-error-expression-replacement = Replacement must be a valid function or variable name.
graphing-calculator-error-expression-search = Can only rename a valid function or variable name.
graphing-calculator-error-failed-to-load-image = Failed to load image.
graphing-calculator-error-image-invalid-angle = Invalid angle. Try using any number.
graphing-calculator-error-image-invalid-center = Invalid center. Try, for example, (0,0).
graphing-calculator-error-image-invalid-file = The file "{ $file }" is not an image
graphing-calculator-error-image-invalid-height = Invalid height. Try using any number.
graphing-calculator-error-image-invalid-opacity = Invalid opacity. Try using any number.
graphing-calculator-error-image-invalid-width = Invalid width. Try using any number.
graphing-calculator-error-inference-invalid-cdf-p-value = Target area needs to be between 0 and 1.
graphing-calculator-error-inference-invalid-confidence = Confidence level must be a number between 0 and 1.
graphing-calculator-error-inference-invalid-hypothesis = There is an error in the hypothesis value.
graphing-calculator-error-invalid-exportable-evaluation = Error computing this value.
graphing-calculator-error-invalid-value = Invalid value
graphing-calculator-error-legacy-random-seed-behavior = This graph uses legacy randomization behavior.
graphing-calculator-error-log-axes-image = Cannot plot images on a log scale.
graphing-calculator-error-nan-blame-complex-coercion = Plotted values are non-real at all input values. Try using absolute value to convert complex numbers to real.
graphing-calculator-error-reached-maximum-recursion-depth = Reached maximum recursion depth while plotting this expression.
graphing-calculator-error-table-regression-unexportable-reserved-variable-single = Column { $variable } can't be referenced outside of the table. To create a standalone regression, first try renaming that column.
graphing-calculator-error-table-regression-unexportable-reserved-variables-many = These columns can't be referenced outside of the table. To export the regression model, first try renaming the columns.
graphing-calculator-error-tone-frequency-out-of-range = Tones can only play for frequencies between { $min }Hz and { $max }Hz.
graphing-calculator-heading-advanced = Advanced
graphing-calculator-heading-audio-trace-describe = Describe
graphing-calculator-heading-audio-trace-navigation = Navigation
graphing-calculator-heading-audio-trace-screen-reader = Screen Reader
graphing-calculator-heading-calculus = Calculus
graphing-calculator-heading-clickable = Clickable
graphing-calculator-heading-dist-tab-distributions = Probability Distributions
graphing-calculator-heading-dist-tab-visualizations = Visualizations
graphing-calculator-heading-drag = Drag
graphing-calculator-heading-fill = Fill
graphing-calculator-heading-for-categorical-data = Inference for Categorical Data:
graphing-calculator-heading-for-quantitative-data = Inference for Quantitative Data:
graphing-calculator-heading-functions-menu-advanced = Advanced
graphing-calculator-heading-functions-menu-complex = Complex
graphing-calculator-heading-functions-menu-polar = Polar Coordinates
graphing-calculator-heading-functions-menu-sound = Sound
graphing-calculator-heading-geometry = Geometry
graphing-calculator-heading-geometry-measurements = Properties & Measurements
graphing-calculator-heading-geometry-tools = Geometry Tools
graphing-calculator-heading-geometry-transformations = Transformations
graphing-calculator-heading-hyperbolic-trig = Hyperbolic Trig Functions
graphing-calculator-heading-image-opacity = Opacity
graphing-calculator-heading-inference = Inference
graphing-calculator-heading-inference-add-distribution = Probability Distribution
graphing-calculator-heading-inference-chi-square-gof = { $chiSquare } goodness of fit test
graphing-calculator-heading-inference-chi-square-test-of-independence = { $chiSquare } test for independence
graphing-calculator-heading-inference-t-test = \`t\`-test
graphing-calculator-heading-inference-z-prop-test = \`z\`-test for proportions
graphing-calculator-heading-inference-z-test = \`z\`-test
graphing-calculator-heading-inverse-trig = Inverse Trig Functions
graphing-calculator-heading-keypad-audio-trace-point-of-interest = <1>Point</1><2>of Interest</2>
graphing-calculator-heading-label = Label
graphing-calculator-heading-label-orientation = Orientation
graphing-calculator-heading-lines = Lines
graphing-calculator-heading-lists = List Operations
graphing-calculator-heading-points = Points
graphing-calculator-heading-regression-equation = Equation
graphing-calculator-heading-regression-parameters = Regression Parameters
graphing-calculator-heading-regression-residuals = Residuals
graphing-calculator-heading-regression-statistics = Statistics
graphing-calculator-heading-slider-animation-mode = Animation Mode
graphing-calculator-heading-slider-speed = Speed
graphing-calculator-heading-stats = Statistics
graphing-calculator-heading-style = Style
graphing-calculator-heading-surfaces = Surfaces
graphing-calculator-heading-table-regression-model-structure = Regression model structure
graphing-calculator-heading-trig = Trig Functions
graphing-calculator-heading-visual-parameters-bar-heights = Bar Heights
graphing-calculator-heading-visual-parameters-bin-alignment = Bin Alignment
graphing-calculator-heading-visual-parameters-display-properties = Display Properties
graphing-calculator-heading-visual-parameters-x-values = X Values
graphing-calculator-label-adaptive-peel-warning = This graph has many transparent layers, which may result in degraded performance or visual innacuracies.
graphing-calculator-label-add-base-case = add base case:
graphing-calculator-label-add-depressed-image-tooltip = Add Depressed Image
graphing-calculator-label-add-hovered-image-tooltip = Add Hovered Image
graphing-calculator-label-add-item-tooltip = Add Item
graphing-calculator-label-add-slider = add slider:
graphing-calculator-label-allow-rotation = Allow rotation
graphing-calculator-label-alt-text = Alt:
graphing-calculator-label-angle-tooltip = Angle
graphing-calculator-label-animation-properties-tooltip = Animation Properties
graphing-calculator-label-audio-trace-curve = Curve
graphing-calculator-label-audio-trace-need-screen-reader = Your Screen Reader needs to be on to hear these.
graphing-calculator-label-audio-trace-point = Point
graphing-calculator-label-audio-trace-speed = Speed
graphing-calculator-label-audio-trace-volume = Volume
graphing-calculator-label-axes = Axes
graphing-calculator-label-binomial-distribution = Binomial distribution
graphing-calculator-label-change-depressed-image-tooltip = Change Depressed Image
graphing-calculator-label-change-hovered-image-tooltip = Change Hovered Image
graphing-calculator-label-chi-square-distribution = { $chiSquare } distribution
graphing-calculator-label-convert-to-table-tooltip = Convert to Table
graphing-calculator-label-create-table = Create Table
graphing-calculator-label-depressed = Depressed
graphing-calculator-label-disable-graph-interactions = Disable Graph Interactions
graphing-calculator-label-disable-rotation = Disable rotation
graphing-calculator-label-display-properties = Local Display Preferences
graphing-calculator-label-distributions-ui-area = Area
graphing-calculator-label-distributions-ui-bounds = Bounds
graphing-calculator-label-distributions-ui-compute = Compute
graphing-calculator-label-distributions-ui-region = Region
graphing-calculator-label-drop-image-here = Drop Image Here
graphing-calculator-label-duplicate-expression-tooltip = Duplicate
graphing-calculator-label-edit-graph-bounds = Graph Bounds
graphing-calculator-label-edit-list-tooltip = Edit List
graphing-calculator-label-evaluation-list = { $count } element list
graphing-calculator-label-expression-delete-tooltip = Delete
graphing-calculator-label-expression-lowercase = expression
graphing-calculator-label-extend-to-3d = Extend to 3D
graphing-calculator-label-folder-lowercase = folder
graphing-calculator-label-geometric-distribution = Geometric distribution
graphing-calculator-label-geometry-dilation-by-point = Dilate using <parent1/>
graphing-calculator-label-geometry-dilation-by-point-and-scale-factor = Dilate using <parent1/> and scale factor <parent2/>
graphing-calculator-label-geometry-measurement-control-angle = Allow angle measurements in labels
graphing-calculator-label-geometry-measurement-control-segment = Allow length measurements in labels
graphing-calculator-label-geometry-move-to-folder-placeholder = Folder name
graphing-calculator-label-geometry-numeric-dilation-factor = Allow numeric scale factor
graphing-calculator-label-geometry-numeric-rotation-angle = Allow numeric angle
graphing-calculator-label-geometry-reflection-over-point = Reflect over <parent1/>
graphing-calculator-label-geometry-rotation-around-point-by-angle = Rotate around <parent1/> by <parent2/>
graphing-calculator-label-geometry-tool-disabled-when = Disabled when:
graphing-calculator-label-geometry-tools = Geometry Tools
graphing-calculator-label-geometry-tools-dropdown-menu-angle = Angle tools
graphing-calculator-label-geometry-tools-dropdown-menu-circle = Circle tools
graphing-calculator-label-geometry-tools-dropdown-menu-line = Line tools
graphing-calculator-label-geometry-tools-dropdown-menu-point = Point tools
graphing-calculator-label-geometry-tools-dropdown-menu-polygon = Polygon tools
graphing-calculator-label-geometry-tools-dropdown-menu-selection = Selection tools
graphing-calculator-label-geometry-tools-dropdown-menu-transformation = Transformation tools
graphing-calculator-label-geometry-translation-by-two-points = Translate from <parent1/> to <parent2/>
graphing-calculator-label-geometry-translation-by-vector = Translate by <parent1/>
graphing-calculator-label-hide-expression-list-tooltip = Hide Expression List
graphing-calculator-label-hide-keypad = Hide Keypad
graphing-calculator-label-hovered = Hovered
graphing-calculator-label-image-angle = Angle:
graphing-calculator-label-image-center = Center:
graphing-calculator-label-image-height = Height:
graphing-calculator-label-image-lowercase = image
graphing-calculator-label-image-opacity = Opacity:
graphing-calculator-label-image-width = Width:
graphing-calculator-label-inference-chi-square-contribution = { $chiSquare } contribution
graphing-calculator-label-inference-contributions = Contributions
graphing-calculator-label-inference-count = Count
graphing-calculator-label-inference-expected = Expected
graphing-calculator-label-inference-expected-optional = Expected (optional)
graphing-calculator-label-inference-group = Group { $index }
graphing-calculator-label-inference-group-total = Group { $index } total:
graphing-calculator-label-inference-list = list of data
graphing-calculator-label-inference-lowercase = inference
graphing-calculator-label-inference-mean = mean
graphing-calculator-label-inference-null-hypothesis = Null hypothesis:
graphing-calculator-label-inference-observed = Observed
graphing-calculator-label-inference-output-confidence-lower = Lower bound
graphing-calculator-label-inference-output-confidence-upper = Upper bound
graphing-calculator-label-inference-output-degrees-of-freedom = Degrees of freedom
graphing-calculator-label-inference-output-p = \`p\`-value
graphing-calculator-label-inference-output-point-estimate = Point estimate
graphing-calculator-label-inference-output-point-estimate-tooltip = Point estimate: { $value }
graphing-calculator-label-inference-output-standard-error = Standard error
graphing-calculator-label-inference-output-t = \`t\`-score
graphing-calculator-label-inference-output-z = \`z\`-score
graphing-calculator-label-inference-pop-stdev = pop stdev
graphing-calculator-label-inference-popover-contribution = Contribution:
graphing-calculator-label-inference-popover-expected = Expected:
graphing-calculator-label-inference-popover-observed = Observed:
graphing-calculator-label-inference-regression-parameter = regression parameter
graphing-calculator-label-inference-sample-size = sample size
graphing-calculator-label-inference-stdev = stdev
graphing-calculator-label-inference-successes = successes
graphing-calculator-label-inference-tails = Tails:
graphing-calculator-label-inference-total = Total:
graphing-calculator-label-inference-total-header = Total
graphing-calculator-label-inference-totals = Totals
graphing-calculator-label-inference-ui-confidence-interval = Confidence Interval
graphing-calculator-label-inference-ui-confidence-level = Confidence level:
graphing-calculator-label-inference-ui-hypothesis = Hypothesis:
graphing-calculator-label-inference-ui-significance-test = Significance Test
graphing-calculator-label-inference-ui-tails = Tails
graphing-calculator-label-inference-wizard-data = Data
graphing-calculator-label-inference-wizard-sample-label = Sample { $index }
graphing-calculator-label-inference-wizard-stats = Stats
graphing-calculator-label-label-size-tooltip = Label Scale Factor
graphing-calculator-label-line-thickness-3d-tooltip = Line Thickness
graphing-calculator-label-line-thickness-tooltip = Line Thickness (px)
graphing-calculator-label-list-index = Use <1>index</1> to reference the clicked index in the list.
graphing-calculator-label-lock-expression-tooltip = Prevent Editing
graphing-calculator-label-more-viewport-options = More Options
graphing-calculator-label-normal-distribution = Normal distribution
graphing-calculator-label-note-lowercase = note
graphing-calculator-label-opacity-tooltip = Opacity (0 to 1)
graphing-calculator-label-optional = (optional)
graphing-calculator-label-poi-unknown-coordinates = unknown coordinates
graphing-calculator-label-point-size-3d-tooltip = Point Size
graphing-calculator-label-point-size-tooltip = Point Size (px)
graphing-calculator-label-poisson-distribution = Poisson distribution
graphing-calculator-label-powered-by = powered by
graphing-calculator-label-randomize-tooltip = Randomize
graphing-calculator-label-recent-transformations = Recent Transformations
graphing-calculator-label-recenter = Center Origin
graphing-calculator-label-redo-tooltip = Redo
graphing-calculator-label-redo-with-shortcut-tooltip = Redo (CTRL+Y)
graphing-calculator-label-reference-count =
    { $count ->
        [one] (1 reference)
       *[other] ({ $count } references)
    }
graphing-calculator-label-reference-count-in-folder =
    { $count ->
        [one] (1 reference in folder)
       *[other] ({ $count } references in folder)
    }
graphing-calculator-label-regression-log-mode-help-tooltip = Log mode help
graphing-calculator-label-regression-parameters-not-exact = Parameters might not be exact. Click to learn more.
graphing-calculator-label-regression-what-is-rmse-tooltip = What is RMSE? Click to learn more.
graphing-calculator-label-regression-why-is-negative-tooltip = Why is this negative? Click to learn more.
graphing-calculator-label-remove-depressed-image = Remove depressed image
graphing-calculator-label-remove-hovered-image = Remove hovered image
graphing-calculator-label-rename = rename
graphing-calculator-label-resolution-tooltip = 3D Grid Sample Resolution
graphing-calculator-label-search-expressions = Search this graph
graphing-calculator-label-settings-3d-perspective-distortion-ratio = Perspective Distortion Ratio
graphing-calculator-label-settings-3d-perspective-max = Most distortion (Perspective view)
graphing-calculator-label-settings-3d-perspective-min = No distortion (Orthographic view)
graphing-calculator-label-settings-all-axes = All axes:
graphing-calculator-label-settings-arrows = Arrows
graphing-calculator-label-settings-axis-labels-3d = Labels
graphing-calculator-label-settings-axis-numbers = Axis Numbers
graphing-calculator-label-settings-complex-mode = Complex Mode
graphing-calculator-label-settings-domain-plane = XY plane
graphing-calculator-label-settings-grid = Grid
graphing-calculator-label-settings-hidden-objects = Reveal { $count } hidden objects
graphing-calculator-label-settings-lock-viewport = Lock Viewport
graphing-calculator-label-settings-minor-gridlines = Minor Gridlines
graphing-calculator-label-settings-numbers-3d = Numbers
graphing-calculator-label-settings-one-quadrant = One Quadrant
graphing-calculator-label-settings-reverse-contrast = Reverse contrast
graphing-calculator-label-settings-six-key-braille = Six Key Braille Input
graphing-calculator-label-settings-step = Step:
graphing-calculator-label-settings-translucent-surfaces = Translucent surfaces
graphing-calculator-label-settings-x-axis = X-Axis
graphing-calculator-label-settings-y-axis = Y-Axis
graphing-calculator-label-show-keypad = Show Keypad
graphing-calculator-label-slider-disabled-while-ticker-playing = Sliders are disabled while the ticker is running.
graphing-calculator-label-slider-step = Step:
graphing-calculator-label-stats-first-quartile = Q1
graphing-calculator-label-stats-maximum = Max
graphing-calculator-label-stats-median = Median
graphing-calculator-label-stats-minimum = Min
graphing-calculator-label-stats-third-quartile = Q3
graphing-calculator-label-t-distribution = \`t\`-distribution
graphing-calculator-label-table-lowercase = table
graphing-calculator-label-table-regression-type-cubic = Cubic Regression
graphing-calculator-label-table-regression-type-exponential = Exponential Regression
graphing-calculator-label-table-regression-type-linear = Linear Regression
graphing-calculator-label-table-regression-type-logarithmic = Logarithmic Regression
graphing-calculator-label-table-regression-type-logistic = Logistic Regression
graphing-calculator-label-table-regression-type-power = Power Regression
graphing-calculator-label-table-regression-type-quadratic = Quadratic Regression
graphing-calculator-label-table-regression-type-quartic = Quartic Regression
graphing-calculator-label-table-regression-type-sinusoidal = Sinusoidal Regression
graphing-calculator-label-ticker-close = cancel
graphing-calculator-label-ticker-help-tooltip = On slow computers, this might run slower. Use local variable "dt" to capture the actual update speed.
graphing-calculator-label-ticker-lowercase = ticker
graphing-calculator-label-ticker-min-step = Min Step Time
graphing-calculator-label-ticker-pause = pause
graphing-calculator-label-ticker-play = play
graphing-calculator-label-tooltip-geometry-settings = Geometry Settings
graphing-calculator-label-tooltip-graph-settings = Graph Settings
graphing-calculator-label-tooltip-reset = Reset
graphing-calculator-label-tooltip-show-list = Show List
graphing-calculator-label-tooltip-viewport-default = Default Viewport
graphing-calculator-label-tooltip-viewport-error = Error in viewport bounds
graphing-calculator-label-tooltip-zoom-default-orientation = Default Orientation
graphing-calculator-label-tooltip-zoom-in = Zoom In
graphing-calculator-label-tooltip-zoom-out = Zoom Out
graphing-calculator-label-tooltip-zoom-xy-orientation = XY Orientation
graphing-calculator-label-undo-tooltip = Undo
graphing-calculator-label-undo-with-shortcut-tooltip = Undo (CTRL+Z)
graphing-calculator-label-uniform-distribution = Uniform distribution
graphing-calculator-label-unlock-expression-tooltip = Allow Editing
graphing-calculator-label-update-on-click = On click:
graphing-calculator-label-update-to-new-behavior = Update to new behavior
graphing-calculator-link-edit-on-desmos = edit graph on
graphing-calculator-link-learn-more = Learn more.
graphing-calculator-link-view-braille-examples = View examples
graphing-calculator-narration-3d-curve-description = curve
graphing-calculator-narration-3d-graphpaper-label = three-dimensional graph paper
graphing-calculator-narration-3d-object-description = 3d object
graphing-calculator-narration-3d-object-with-index = { $item } { $index }
graphing-calculator-narration-3d-orientation-options-label = Orientation
graphing-calculator-narration-3d-point-description = point
graphing-calculator-narration-3d-rotate-down = Tilt forward.
graphing-calculator-narration-3d-rotate-left = Rotate left.
graphing-calculator-narration-3d-rotate-right = Rotate right.
graphing-calculator-narration-3d-rotate-up = Tilt backward.
graphing-calculator-narration-3d-rotation-speed = Speed { $speed } \xB0 per second
graphing-calculator-narration-3d-rotation-stopped = Stopped.
graphing-calculator-narration-3d-segment-description = segment
graphing-calculator-narration-3d-sphere-description = sphere
graphing-calculator-narration-3d-surface-description = surface
graphing-calculator-narration-3d-triangle-description = triangle
graphing-calculator-narration-3d-vector-description = vector
graphing-calculator-narration-add-base-case-prompt =
    { $count ->
        [one] Add 1 base case
       *[other] Add { $count } base cases
    }
graphing-calculator-narration-add-expression = Add expression
graphing-calculator-narration-add-folder = Add folder
graphing-calculator-narration-add-image = Add image
graphing-calculator-narration-add-inference = Add inference object
graphing-calculator-narration-add-item-menu = Add Item Menu
graphing-calculator-narration-add-note = Add note
graphing-calculator-narration-add-slider-prompt = Add slider for { $vars }
graphing-calculator-narration-add-table = Add table
graphing-calculator-narration-add-ticker = Add Ticker
graphing-calculator-narration-all-folders-collapsed = all folders collapsed
graphing-calculator-narration-all-folders-expanded = all folders expanded
graphing-calculator-narration-audio-instructions-enter-audio-trace-mac = Press OPTION+T for audio trace.
graphing-calculator-narration-audio-instructions-enter-audio-trace-windows = Press ALT+T for audio trace.
graphing-calculator-narration-audio-trace-branch-not-found = Branch { $branch } does not exist.
graphing-calculator-narration-audio-trace-cannot-change-slider-value = Unable to adjust slider
graphing-calculator-narration-audio-trace-description-branch-count = Branches: { $branches }.
graphing-calculator-narration-audio-trace-description-color = Color: { $color }.
graphing-calculator-narration-audio-trace-description-multiple-extrema = { $count } extrema.
graphing-calculator-narration-audio-trace-description-multiple-intercepts = { $count } intercepts.
graphing-calculator-narration-audio-trace-description-multiple-intersections = { $count } intersections.
graphing-calculator-narration-audio-trace-description-multiple-labels = { $count } point labels.
graphing-calculator-narration-audio-trace-description-multiple-roots = { $count } zero crossings.
graphing-calculator-narration-audio-trace-description-no-curve-selected = No curve selected.
graphing-calculator-narration-audio-trace-description-one-extremum = 1 extremum.
graphing-calculator-narration-audio-trace-description-one-intercept = 1 intercept.
graphing-calculator-narration-audio-trace-description-one-intersection = 1 intersection.
graphing-calculator-narration-audio-trace-description-one-label = 1 point label.
graphing-calculator-narration-audio-trace-description-one-root = 1 zero crossing.
graphing-calculator-narration-audio-trace-description-shading-above = Shading above.
graphing-calculator-narration-audio-trace-description-shading-below = Shading below.
graphing-calculator-narration-audio-trace-description-shading-in-regions = Shading in regions.
graphing-calculator-narration-audio-trace-description-shading-left = Shading on the left.
graphing-calculator-narration-audio-trace-description-shading-right = Shading on the right.
graphing-calculator-narration-audio-trace-description-visible-grid = Grid lines are visible.
graphing-calculator-narration-audio-trace-description-visible-x-axis = X axis visible.
graphing-calculator-narration-audio-trace-description-visible-x-axis-and-label = X axis visible and is labeled { $label }.
graphing-calculator-narration-audio-trace-description-visible-x-axis-range = X axis visible from { $xmin } to { $xmax }.
graphing-calculator-narration-audio-trace-description-visible-x-axis-range-and-label = X axis visible from { $xmin } to { $xmax } and is labeled { $label }.
graphing-calculator-narration-audio-trace-description-visible-xyz-axis-range = X Y and Z axes visible from { $xmin } to { $xmax }.
graphing-calculator-narration-audio-trace-description-visible-y-axis = Y axis visible.
graphing-calculator-narration-audio-trace-description-visible-y-axis-and-label = Y axis visible and is labeled { $label }.
graphing-calculator-narration-audio-trace-description-visible-y-axis-range = Y axis visible from { $ymin } to { $ymax }.
graphing-calculator-narration-audio-trace-description-visible-y-axis-range-and-label = Y axis visible from { $ymin } to { $ymax } and is labeled { $label }.
graphing-calculator-narration-audio-trace-description-visible-z-axis = Z axis visible.
graphing-calculator-narration-audio-trace-description-visible-z-axis-and-label = Z axis visible and is labeled { $label }.
graphing-calculator-narration-audio-trace-description-visible-z-axis-range = Z axis visible from { $zmin } to { $zmax }.
graphing-calculator-narration-audio-trace-description-visible-z-axis-range-and-label = Z axis visible from { $zmin } to { $zmax } and is labeled { $label }.
graphing-calculator-narration-audio-trace-expression-with-column = Expression { $index } column { $column }
graphing-calculator-narration-audio-trace-first-point = First point
graphing-calculator-narration-audio-trace-first-slider = First slider.
graphing-calculator-narration-audio-trace-instructions-disable-mac = To disable audio trace, press OPTION+T.
graphing-calculator-narration-audio-trace-instructions-disable-windows = To disable audio trace, press ALT+T.
graphing-calculator-narration-audio-trace-instructions-expression-navigation-mac = To move between expressions, press COMMAND+Up-Arrow or COMMAND+Down-Arrow.
graphing-calculator-narration-audio-trace-instructions-expression-navigation-windows = To move between expressions, press ALT+Up-Arrow or ALT+Down-Arrow.
graphing-calculator-narration-audio-trace-instructions-hear-graph = To hear the graph, press H.
graphing-calculator-narration-audio-trace-instructions-use-arrow-keys = Use Arrow keys to navigate.
graphing-calculator-narration-audio-trace-last-point = Last point
graphing-calculator-narration-audio-trace-last-slider = Last slider.
graphing-calculator-narration-audio-trace-multiple-sliders-paused = { $sliders } animating sliders were paused.
graphing-calculator-narration-audio-trace-no-more-pois = No more points of interest
graphing-calculator-narration-audio-trace-no-sliders-paused = No animating sliders were paused.
graphing-calculator-narration-audio-trace-one-slider-paused = One animating slider was paused.
graphing-calculator-narration-audio-trace-playback-speed = Graph playback speed { $speed }
graphing-calculator-narration-audio-trace-poi-count = Points of interest, { $x }.
graphing-calculator-narration-audio-trace-point-type-definition = Definition
graphing-calculator-narration-audio-trace-point-type-extremum = Extremum
graphing-calculator-narration-audio-trace-point-type-intercept = Intercept
graphing-calculator-narration-audio-trace-point-type-intersection = Intersection
graphing-calculator-narration-audio-trace-point-type-intersection-with-curves = Intersection with { $curves }
graphing-calculator-narration-audio-trace-point-type-label = Label
graphing-calculator-narration-audio-trace-point-type-not-a-poi = Not a P O I
graphing-calculator-narration-audio-trace-point-type-root = Zero
graphing-calculator-narration-audio-trace-point-type-synthetic-intersection = Approximate Intersection
graphing-calculator-narration-audio-trace-point-type-synthetic-intersection-with-curves = Approximate intersection with { $curves }
graphing-calculator-narration-audio-trace-point-type-trace = Trace
graphing-calculator-narration-audio-trace-property-branch-number = Branch { $branch }.
graphing-calculator-narration-audio-trace-property-type-before-coordinates = { $type } at
graphing-calculator-narration-audio-trace-property-x = X: { $x }.
graphing-calculator-narration-audio-trace-property-y = Y: { $y }.
graphing-calculator-narration-audio-trace-slider-value-unknown = Unable to determine slider value
graphing-calculator-narration-audio-trace-sound-effects-disabled = Sound effects have been disabled.
graphing-calculator-narration-audio-trace-traceable-curves =
    { $sketchCount ->
        [one] 1 audio traceable curve.
       *[other] { $sketchCount } audio traceable curves.
    }
graphing-calculator-narration-audio-trace-tracing-different-expression = Tracing { $expression }.
graphing-calculator-narration-audio-trace-unable-to-play = Unable to play audio.
graphing-calculator-narration-audio-trace-unable-to-trace-this-expression = Unable to audio trace this expression.
graphing-calculator-narration-audio-trace-unsupported-expression = { $expression } cannot be audio traced.
graphing-calculator-narration-audio-trace-volume = Volume { $volume } percent
graphing-calculator-narration-cdf-maximum = Upper Bound:
graphing-calculator-narration-cdf-minimum = Lower Bound:
graphing-calculator-narration-click-action = Click Action
graphing-calculator-narration-clickable-image-options = Clickable Image Options
graphing-calculator-narration-close-add-inference = Close inference wizard
graphing-calculator-narration-collapse = Collapse
graphing-calculator-narration-collapse-folder-index = Collapse Folder { $index }
graphing-calculator-narration-collapse-folder-title = Collapse { $folder } folder
graphing-calculator-narration-color-picker-custom-colors-label = Custom
graphing-calculator-narration-color-picker-label = Color Picker
graphing-calculator-narration-color-picker-standard-colors-label = Standard
graphing-calculator-narration-color-unknown = unknown
graphing-calculator-narration-computed-cell-role-description = computed cell
graphing-calculator-narration-configure-toolbar = Geometry Toolbar Configuration
graphing-calculator-narration-create-table = Create Table
graphing-calculator-narration-create-table-expression = Create Table from Expression { $index }
graphing-calculator-narration-create-table-secret-expression = Create Table from Secret Expression { $index }
graphing-calculator-narration-delete = Delete
graphing-calculator-narration-delete-expression = Delete Expression { $index }
graphing-calculator-narration-delete-folder-index = Delete Folder { $index }
graphing-calculator-narration-delete-folder-title = Delete { $folder } folder
graphing-calculator-narration-delete-image = Delete Image { $index }
graphing-calculator-narration-delete-secret-expression = Delete Secret Expression { $index }
graphing-calculator-narration-delete-table = Delete Table { $index }
graphing-calculator-narration-delete-text = Delete Note { $index }
graphing-calculator-narration-describe = Unknown object
graphing-calculator-narration-describe-expression = Expression { $index }
graphing-calculator-narration-describe-folder-index = Folder { $index }
graphing-calculator-narration-describe-folder-title = { $folder } folder
graphing-calculator-narration-describe-image = Image { $index }
graphing-calculator-narration-describe-secret-expression = Secret expression { $index }
graphing-calculator-narration-describe-table = Table { $index }
graphing-calculator-narration-describe-text = Note { $index }
graphing-calculator-narration-description-collapsed-folder = Collapsed Folder
graphing-calculator-narration-description-collapsed-readonly-folder = Collapsed Locked Folder
graphing-calculator-narration-description-collapsed-secret-folder = Collapsed Secret Folder
graphing-calculator-narration-description-collapsed-secret-readonly-folder = Collapsed Secret Locked Folder
graphing-calculator-narration-description-folder = Folder
graphing-calculator-narration-description-hidden-collapsed-folder = Hidden Collapsed Folder
graphing-calculator-narration-description-hidden-collapsed-readonly-folder = Hidden Collapsed Locked Folder
graphing-calculator-narration-description-hidden-collapsed-secret-folder = Hidden Collapsed Secret Folder
graphing-calculator-narration-description-hidden-collapsed-secret-readonly-folder = Hidden Collapsed Secret Locked Folder
graphing-calculator-narration-description-hidden-folder = Hidden Folder
graphing-calculator-narration-description-hidden-readonly-folder = Hidden Locked Folder
graphing-calculator-narration-description-hidden-secret-folder = Hidden Secret Folder
graphing-calculator-narration-description-hidden-secret-readonly-folder = Hidden Secret Locked Folder
graphing-calculator-narration-description-readonly-folder = Locked Folder
graphing-calculator-narration-description-secret-folder = Secret Folder
graphing-calculator-narration-description-secret-readonly-folder = Secret Locked Folder
graphing-calculator-narration-dist-tab-distributions = Distributions
graphing-calculator-narration-dist-tab-visualizations = Visualizations
graphing-calculator-narration-distributions-ui-p-value = Cumulative Probability:
graphing-calculator-narration-domain3d-maximum = domain { $term } Maximum:
graphing-calculator-narration-domain3d-minimum = domain { $term } Minimum:
graphing-calculator-narration-drag-mode-x = X
graphing-calculator-narration-drag-mode-xy = X and Y
graphing-calculator-narration-drag-mode-y = Y
graphing-calculator-narration-draggable-image-off-screen-prompt = { " " }not completely visible on screen
graphing-calculator-narration-duplicate = Duplicate
graphing-calculator-narration-duplicate-expression = Duplicate Expression { $index }
graphing-calculator-narration-duplicate-folder-index = Duplicate Folder { $index }
graphing-calculator-narration-duplicate-folder-title = Duplicate { $folder } folder
graphing-calculator-narration-duplicate-image = Duplicate Image { $index }
graphing-calculator-narration-duplicate-secret-expression = Duplicate Secret Expression { $index }
graphing-calculator-narration-duplicate-table = Duplicate Table { $index }
graphing-calculator-narration-duplicate-text = Duplicate Note { $index }
graphing-calculator-narration-edit-action = Edit Action
graphing-calculator-narration-edit-expression-list = Edit Expression List
graphing-calculator-narration-edit-folder-title = Edit Folder { $index } Title
graphing-calculator-narration-edit-graph-on-desmos = Edit graph on Desmos
graphing-calculator-narration-edit-image-title = Edit Image { $index } Title
graphing-calculator-narration-edit-list-mode-off = Edit list mode off.
graphing-calculator-narration-edit-list-mode-on = Edit list mode on.
graphing-calculator-narration-edit-on-desmos = Edit graph on Desmos
graphing-calculator-narration-edit-slider-variable-limits = Edit { $variable } Limits
graphing-calculator-narration-edit-text-title = Note { $index }
graphing-calculator-narration-edit-title = Edit Title
graphing-calculator-narration-editable-label-mode = Editable label mode
graphing-calculator-narration-editable-point-label = Editable point label
graphing-calculator-narration-expand = Expand
graphing-calculator-narration-expand-folder-index = Expand Folder { $index }
graphing-calculator-narration-expand-folder-title = Expand { $folder } folder
graphing-calculator-narration-expression-audio-trace-mac = To audio trace, press OPTION+T.
graphing-calculator-narration-expression-audio-trace-windows = To audio trace, press ALT+T.
graphing-calculator-narration-expression-bar = Expression Bar
graphing-calculator-narration-expression-evaluation-has-graph = Has graph.
graphing-calculator-narration-expression-evaluation-has-graph-and-regression = Has graph and regression. To access statistics, press Tab.
graphing-calculator-narration-expression-evaluation-has-regression = Has regression. To access statistics, press Tab.
graphing-calculator-narration-expression-evaluation-is-confidence = is confidence interval. To access statistics, press Tab.
graphing-calculator-narration-expression-evaluation-is-distribution = is distribution.
graphing-calculator-narration-expression-evaluation-is-significance-test = is significance test. To access statistics, press Tab.
graphing-calculator-narration-expression-hidden-label = Hidden { $label }
graphing-calculator-narration-expression-index-table = Expression { $index } table
graphing-calculator-narration-expression-label = Label
graphing-calculator-narration-expression-tone-muted = Muted tone.
graphing-calculator-narration-expression-tone-unmuted = Unmuted tone.
graphing-calculator-narration-fill-opacity = Fill Opacity:
graphing-calculator-narration-fill-visible = Fill visible
graphing-calculator-narration-folder-collapsed = folder collapsed
graphing-calculator-narration-folder-expanded = folder expanded
graphing-calculator-narration-folder-has-items = { $folder } has { $count } items
graphing-calculator-narration-functions = Functions
graphing-calculator-narration-geometry-added-object-type = Added { $type }.
graphing-calculator-narration-geometry-added-object-type-and-point = Added { $type } and 1 point.
graphing-calculator-narration-geometry-added-object-type-and-points = Added { $type } and { $points } points.
graphing-calculator-narration-geometry-added-points = Added { $points } points.
graphing-calculator-narration-geometry-angle-of-polygon = { $itemDescription } of { $parent }
graphing-calculator-narration-geometry-angle-through-points = { $itemDescription } through { $parent1 }, { $parent2 }, and { $parent3 }
graphing-calculator-narration-geometry-anglebisector-of-item = { $bisectorDescription }, bisector of { $item }
graphing-calculator-narration-geometry-arc-through-points = { $arcDescription } starting at { $start }. Middle at { $middle }. End at { $end }.
graphing-calculator-narration-geometry-arc-with-assignment = Arc { $label }
graphing-calculator-narration-geometry-circle-with-assignment = Circle { $label }
graphing-calculator-narration-geometry-circle-with-center-and-radius = { $circleDescription } with center at { $center } and radius { $radius }.
graphing-calculator-narration-geometry-construct-menu = Construct
graphing-calculator-narration-geometry-construction-icon-label = Token Count
graphing-calculator-narration-geometry-construction-role-description = construction
graphing-calculator-narration-geometry-decagon-with-assignment = Decagon { $label }
graphing-calculator-narration-geometry-dilated-item = dilated { $item }
graphing-calculator-narration-geometry-edge-of-polygon = Edge { $polygonEdge } of { $item }
graphing-calculator-narration-geometry-glider-on-item = { $gliderDescription } on { $item }
graphing-calculator-narration-geometry-glider-with-assignment = Glider { $assignment }
graphing-calculator-narration-geometry-heptagon-with-assignment = Heptagon { $label }
graphing-calculator-narration-geometry-hexagon-with-assignment = Hexagon { $label }
graphing-calculator-narration-geometry-hidden-construction-description = Hidden { $description }
graphing-calculator-narration-geometry-hidden-line = Hidden line
graphing-calculator-narration-geometry-hidden-parallel = Hidden parrallel
graphing-calculator-narration-geometry-hidden-perpendicular = Hidden perpendicular
graphing-calculator-narration-geometry-hidden-ray = Hidden ray
graphing-calculator-narration-geometry-hidden-segment = Hidden segment
graphing-calculator-narration-geometry-hidden-vector = Hidden vector
graphing-calculator-narration-geometry-intersection-of-items = { $intersectionDescription } of { $item1 } and { $item2 }
graphing-calculator-narration-geometry-intersection-with-assignment = Intersection { $assignment }
graphing-calculator-narration-geometry-item-at-coordinates-to-coordinates = { $itemDescription } from { $x1 } { $y1 } to { $x2 } { $y2 }
graphing-calculator-narration-geometry-label-options = Label Options
graphing-calculator-narration-geometry-labeled-angle = Angle { $label }
graphing-calculator-narration-geometry-labeled-directed-angle = Directed Angle { $label }
graphing-calculator-narration-geometry-line-with-assignment = Line { $label }
graphing-calculator-narration-geometry-list-of-angles = List of { $count } angles
graphing-calculator-narration-geometry-list-of-any = List of { $count } unknown objects
graphing-calculator-narration-geometry-list-of-arcs = List of { $count } arcs
graphing-calculator-narration-geometry-list-of-circles = List of { $count } circles
graphing-calculator-narration-geometry-list-of-directed-angles = List of { $count } directed angles
graphing-calculator-narration-geometry-list-of-lines = List of { $count } lines
graphing-calculator-narration-geometry-list-of-points = List of { $count } points
graphing-calculator-narration-geometry-list-of-polygons = List of { $count } polygons
graphing-calculator-narration-geometry-list-of-rays = List of { $count } rays
graphing-calculator-narration-geometry-list-of-segments = List of { $count } segments
graphing-calculator-narration-geometry-midpoint-of-item = { $midpointDescription } of { $item }
graphing-calculator-narration-geometry-midpoint-with-assignment = Midpoint { $assignment }
graphing-calculator-narration-geometry-near-item = Near { $item }.
graphing-calculator-narration-geometry-no-tool-inputs = No inputs exist
graphing-calculator-narration-geometry-nonagon-with-assignment = Nonagon { $label }
graphing-calculator-narration-geometry-nothing-selected = Nothing selected.
graphing-calculator-narration-geometry-octagon-with-assignment = Octagon { $label }
graphing-calculator-narration-geometry-parallel-to-line-through-point = { $parallelDescription } to { $line }, passing through { $point }
graphing-calculator-narration-geometry-parallel-with-assignment = Parallel line { $label }
graphing-calculator-narration-geometry-pentagon-with-assignment = Pentagon { $label }
graphing-calculator-narration-geometry-perpendicular-to-line-through-point = { $perpendicularDescription } to { $line }, passing through { $point }
graphing-calculator-narration-geometry-perpendicular-with-assignment = Perpendicular line { $label }
graphing-calculator-narration-geometry-point-with-assignment = Point { $assignment }
graphing-calculator-narration-geometry-polygon-through-vertices = { $itemDescription } through vertices { $vertices }
graphing-calculator-narration-geometry-polygon-with-sides = { $polygonDescription } with { $sideCount } sides
graphing-calculator-narration-geometry-quadrilateral-with-assignment = Quadrilateral { $label }
graphing-calculator-narration-geometry-ray-with-assignment = Ray { $label }
graphing-calculator-narration-geometry-reflected-item = reflected { $item }
graphing-calculator-narration-geometry-rotated-item = rotated { $item }
graphing-calculator-narration-geometry-segment-length = { $segmentDescription } with length { $length }
graphing-calculator-narration-geometry-segment-with-assignment = Segment { $assignment }
graphing-calculator-narration-geometry-straight-from-item-through-item = { $straightType } from { $start } through { $end }
graphing-calculator-narration-geometry-straight-from-item-to-item = { $straightType } from { $start } to { $end }
graphing-calculator-narration-geometry-straight-index-of-item = { $straightType } { $index } of { $item }
graphing-calculator-narration-geometry-straight-through-item-and-item = { $straightType } through { $start } and { $end }
graphing-calculator-narration-geometry-style-menu = Style
graphing-calculator-narration-geometry-token-navigator-depth = Depth: { $depth }
graphing-calculator-narration-geometry-token-navigator-label = Token Navigator
graphing-calculator-narration-geometry-tool-cancelled = Cancelled.
graphing-calculator-narration-geometry-tool-disabled = The { $tool } tool is disabled.
graphing-calculator-narration-geometry-transformed-item = transformed { $item }
graphing-calculator-narration-geometry-translated-item = translated { $item }
graphing-calculator-narration-geometry-triangle-with-assignment = Triangle { $label }
graphing-calculator-narration-geometry-unable-to-move = Unable to move.
graphing-calculator-narration-geometry-unlabeled-angle = Angle { $index }
graphing-calculator-narration-geometry-unlabeled-angle-with-measurement = { $measurementText } Angle { $index }
graphing-calculator-narration-geometry-unlabeled-arc = Arc { $index }
graphing-calculator-narration-geometry-unlabeled-circle = Circle { $index }
graphing-calculator-narration-geometry-unlabeled-decagon = Decagon { $index }
graphing-calculator-narration-geometry-unlabeled-directed-angle = Directed Angle { $index }
graphing-calculator-narration-geometry-unlabeled-directed-angle-with-measurement = { $measurementText } Directed Angle { $index }
graphing-calculator-narration-geometry-unlabeled-glider = Glider { $index }
graphing-calculator-narration-geometry-unlabeled-heptagon = Heptagon { $index }
graphing-calculator-narration-geometry-unlabeled-hexagon = Hexagon { $index }
graphing-calculator-narration-geometry-unlabeled-intersection = Intersection { $index }
graphing-calculator-narration-geometry-unlabeled-line = Line
graphing-calculator-narration-geometry-unlabeled-line-with-index = Line { $index }
graphing-calculator-narration-geometry-unlabeled-midpoint = Midpoint { $index }
graphing-calculator-narration-geometry-unlabeled-nonagon = Nonagon { $index }
graphing-calculator-narration-geometry-unlabeled-octagon = Octagon { $index }
graphing-calculator-narration-geometry-unlabeled-parallel = Parallel line
graphing-calculator-narration-geometry-unlabeled-parallel-with-index = Parallel line { $index }
graphing-calculator-narration-geometry-unlabeled-pentagon = Pentagon { $index }
graphing-calculator-narration-geometry-unlabeled-perpendicular = Perpendicular line
graphing-calculator-narration-geometry-unlabeled-perpendicular-with-index = Perpendicular line { $index }
graphing-calculator-narration-geometry-unlabeled-point = Point { $index }
graphing-calculator-narration-geometry-unlabeled-polygon = Polygon { $index }
graphing-calculator-narration-geometry-unlabeled-quadrilateral = Quadrilateral { $index }
graphing-calculator-narration-geometry-unlabeled-ray = Ray
graphing-calculator-narration-geometry-unlabeled-ray-with-index = Ray { $index }
graphing-calculator-narration-geometry-unlabeled-segment = Segment
graphing-calculator-narration-geometry-unlabeled-segment-with-index = Segment { $index }
graphing-calculator-narration-geometry-unlabeled-triangle = Triangle { $index }
graphing-calculator-narration-geometry-unlabeled-vector = Vector
graphing-calculator-narration-geometry-unlabeled-vector-with-index = Vector { $index }
graphing-calculator-narration-geometry-vector-with-assignment = Vector { $label }
graphing-calculator-narration-graph-settings-controls = Graph Settings Controls
graphing-calculator-narration-graphpaper-label = graph paper
graphing-calculator-narration-hide = Hide
graphing-calculator-narration-hide-animation-properties = Hide Animation Properties
graphing-calculator-narration-hide-expression = Hide Expression { $index }
graphing-calculator-narration-hide-expression-list = Hide expression list
graphing-calculator-narration-hide-folder-index = Hide Folder { $index }
graphing-calculator-narration-hide-folder-title = Hide { $folder } folder
graphing-calculator-narration-hide-image = Hide Image { $index }
graphing-calculator-narration-hide-options = Hide Options
graphing-calculator-narration-hide-options-expression = Hide Options for Expression { $index }
graphing-calculator-narration-hide-options-image = Hide Options for Image { $index }
graphing-calculator-narration-hide-options-secret-expression = Hide Options for Secret Expression { $index }
graphing-calculator-narration-hide-secret-expression = Hide Secret Expression { $index }
graphing-calculator-narration-hide-table = Hide Table { $index }
graphing-calculator-narration-hide-table-column = Hide Column
graphing-calculator-narration-hide-table-regression = Hide Regression
graphing-calculator-narration-hide-text = Hide Note { $index }
graphing-calculator-narration-image-styles = Styles
graphing-calculator-narration-inference-chi-square-contribution-percent = Contribution: { $percent }%
graphing-calculator-narration-inference-wizard = Inference Wizard
graphing-calculator-narration-inference-wizard-activate = Inference Wizard. Activate to open.
graphing-calculator-narration-inference-wizard-create-distribution = Create Distribution
graphing-calculator-narration-inference-wizard-create-inference = Create Test
graphing-calculator-narration-item-at-coordinates = { $itemDescription } at { $coordinates }
graphing-calculator-narration-item-hidden = Item hidden.
graphing-calculator-narration-item-visible = Item visible.
graphing-calculator-narration-item-with-list-index = index { $listIndex } of { $item }
graphing-calculator-narration-items-deleted =
    { $count ->
        [one] { $count } item deleted.
       *[other] { $count } items deleted.
    }
graphing-calculator-narration-keypad-hidden = Keypad hidden
graphing-calculator-narration-keypad-key-next-curve = Next Curve
graphing-calculator-narration-keypad-key-next-poi = Next Point of Interest
graphing-calculator-narration-keypad-key-next-point = Next Point
graphing-calculator-narration-keypad-key-previous-curve = Previous Curve
graphing-calculator-narration-keypad-key-previous-poi = Previous Point of Interest
graphing-calculator-narration-keypad-key-previous-point = Previous Point
graphing-calculator-narration-keypad-key-speed-down = Speed Down
graphing-calculator-narration-keypad-key-speed-up = Speed Up
graphing-calculator-narration-keypad-key-volume-down = Volume Down
graphing-calculator-narration-keypad-key-volume-up = Volume Up
graphing-calculator-narration-keypad-visible = Keypad visible
graphing-calculator-narration-label-angle = Label Angle:
graphing-calculator-narration-label-menu = Label
graphing-calculator-narration-label-size = Label Size:
graphing-calculator-narration-label-text = Label Text
graphing-calculator-narration-label-visible = Label visible
graphing-calculator-narration-line-opacity = Line Opacity:
graphing-calculator-narration-line-style-dashed = Dashed
graphing-calculator-narration-line-style-dotted = Dotted
graphing-calculator-narration-line-style-solid = Solid
graphing-calculator-narration-lines-visible = Lines visible
graphing-calculator-narration-locked-items-not-deleted =
    { $count ->
        [one] { $count } locked item could not be deleted.
       *[other] { $count } locked items could not be deleted.
    }
graphing-calculator-narration-main-desmos-geometry = Desmos Geometry
graphing-calculator-narration-main-desmos-graphing-calculator = Desmos Graphing Calculator
graphing-calculator-narration-make-clickable = make clickable
graphing-calculator-narration-menu-drag-enabled = Drag Enabled
graphing-calculator-narration-movable-point-off-screen-prompt = { " " }not visible on screen
graphing-calculator-narration-movable-point-prefix = Point
graphing-calculator-narration-movable-point-suffix-usage-instructions = { " " }is movable. Press Arrows or Shift+Arrows to adjust.
graphing-calculator-narration-mute = Mute
graphing-calculator-narration-mute-all = Mute all
graphing-calculator-narration-mute-expression = Mute Expression { $index }
graphing-calculator-narration-mute-secret-expression = Mute Secret Expression { $index }
graphing-calculator-narration-muted = Muted
graphing-calculator-narration-no-geometry-tools-available = No geometry tools available.
graphing-calculator-narration-no-playing-tones = No currently playing tones
graphing-calculator-narration-no-tone-expressions = No tones in this graph
graphing-calculator-narration-options-menu = Options Menu
graphing-calculator-narration-options-menu-closed = Options menu closed.
graphing-calculator-narration-options-menu-open = Options menu open.
graphing-calculator-narration-pause-variable-animation = Pause { $variable } Animation
graphing-calculator-narration-play-variable-animation = Play { $variable } Animation
graphing-calculator-narration-poi-graph-point = Point
graphing-calculator-narration-point-size = Point Size:
graphing-calculator-narration-point-style-cross = Cross
graphing-calculator-narration-point-style-diamond = Diamond
graphing-calculator-narration-point-style-open = Open
graphing-calculator-narration-point-style-plus = Plus
graphing-calculator-narration-point-style-point = Point
graphing-calculator-narration-point-style-square = Square
graphing-calculator-narration-point-style-star = Star
graphing-calculator-narration-point-style-triangle = Triangle
graphing-calculator-narration-points-visible = Points visible
graphing-calculator-narration-powered-by-desmos = Powered by Desmos
graphing-calculator-narration-redo = Redo
graphing-calculator-narration-rename = Rename
graphing-calculator-narration-rename-expression = Rename in Expression { $index }
graphing-calculator-narration-rename-secret-expression = Rename in Secret Expression { $index }
graphing-calculator-narration-rename-table = Rename in Table { $index }
graphing-calculator-narration-run-action-icon = Run Action
graphing-calculator-narration-settings-all-axes-max = Max for x, y, and z
graphing-calculator-narration-settings-all-axes-min = Min for x, y, and z
graphing-calculator-narration-settings-angle = Angle Settings
graphing-calculator-narration-settings-cartesian-grid = Cartesian Grid
graphing-calculator-narration-settings-polar-grid = Polar Grid
graphing-calculator-narration-settings-show-both = Show Both
graphing-calculator-narration-settings-show-positive = Show Positive
graphing-calculator-narration-settings-x-axis-label-placeholder = e.g. \u201Cx\u201D
graphing-calculator-narration-settings-x-axis-max = X Axis Maximum:{ " " }
graphing-calculator-narration-settings-x-axis-min = X Axis Minimum:{ " " }
graphing-calculator-narration-settings-x-axis-step = X Axis Step Size:{ " " }
graphing-calculator-narration-settings-y-axis-label-placeholder = e.g. \u201Cy\u201D
graphing-calculator-narration-settings-y-axis-max = Y Axis Maximum:{ " " }
graphing-calculator-narration-settings-y-axis-min = Y Axis Minimum:{ " " }
graphing-calculator-narration-settings-y-axis-step = Y Axis Step Size:{ " " }
graphing-calculator-narration-settings-z-axis-max = Z Axis Maximum:{ " " }
graphing-calculator-narration-settings-z-axis-min = Z Axis Minimum:{ " " }
graphing-calculator-narration-show = Show
graphing-calculator-narration-show-animation-properties = Show Animation Properties
graphing-calculator-narration-show-expression = Show Expression { $index }
graphing-calculator-narration-show-folder-index = Show Folder { $index }
graphing-calculator-narration-show-folder-title = Show { $folder } folder
graphing-calculator-narration-show-image = Show Image { $index }
graphing-calculator-narration-show-options = Show Options
graphing-calculator-narration-show-options-expression = Show Options for Expression { $index }
graphing-calculator-narration-show-options-image = Show Options for Image { $index }
graphing-calculator-narration-show-options-secret-expression = Show Options for Secret Expression { $index }
graphing-calculator-narration-show-secret-expression = Show Secret Expression { $index }
graphing-calculator-narration-show-table = Show Table { $index }
graphing-calculator-narration-show-table-column = Show Column
graphing-calculator-narration-show-table-regression = Show Regression
graphing-calculator-narration-show-text = Show Note { $index }
graphing-calculator-narration-slider-animate-faster = Animate Faster
graphing-calculator-narration-slider-animate-slower = Animate Slower
graphing-calculator-narration-slider-animating-at-speed = Animating at { $speed }x
graphing-calculator-narration-slider-loop-forwards-and-backwards = Loop forwards and backwards
graphing-calculator-narration-slider-maximum = Slider Maximum:
graphing-calculator-narration-slider-minimum = Slider Minimum:
graphing-calculator-narration-slider-play-indefinitely = Play indefinitely
graphing-calculator-narration-slider-play-once = Play once
graphing-calculator-narration-slider-repeat-one-direction = Repeat in one direction
graphing-calculator-narration-slider-step = Slider Step Size:
graphing-calculator-narration-slider-trace-no-sliders = No sliders to trace.
graphing-calculator-narration-slider-trace-off = Slider trace off.
graphing-calculator-narration-slider-trace-on = Slider trace on.
graphing-calculator-narration-slider-variable-paused = { $variable } paused
graphing-calculator-narration-slider-variable-playing = { $variable } playing
graphing-calculator-narration-slider-variable-restarted = { $variable } restarted
graphing-calculator-narration-slow-compute = Is taking a long time to compute.
graphing-calculator-narration-slow-evaluation = Is taking a long time to evaluate.
graphing-calculator-narration-style-menu = Style Menu
graphing-calculator-narration-surface-opacity = Surface Opacity:
graphing-calculator-narration-surfaces-visible = Surfaces visible
graphing-calculator-narration-table-no-column-header = No column header
graphing-calculator-narration-table-regression-equation = Regression Equation
graphing-calculator-narration-tick-action = Tick Action
graphing-calculator-narration-toggle-audio-trace = Toggle Audio Trace
graphing-calculator-narration-toggle-letters = Toggle Letters
graphing-calculator-narration-unable-to-add-expression = Unable to add expression
graphing-calculator-narration-unable-to-add-note = Unable to add note
graphing-calculator-narration-unable-to-add-table = Unable to add table
graphing-calculator-narration-unable-to-add-table-regression = Unable to add regression
graphing-calculator-narration-undo = Undo
graphing-calculator-narration-unmute = Unmute
graphing-calculator-narration-unmute-all = Unmute all
graphing-calculator-narration-unmute-expression = Unmute Expression { $index }
graphing-calculator-narration-unmute-secret-expression = Unmute Secret Expression { $index }
graphing-calculator-narration-unmuted = Unmuted
graphing-calculator-narration-viewport-default = Graph viewport default
graphing-calculator-narration-viewport-pan-down = Graph pan down
graphing-calculator-narration-viewport-pan-left = Graph pan left
graphing-calculator-narration-viewport-pan-right = Graph pan right
graphing-calculator-narration-viewport-pan-up = Graph pan up
graphing-calculator-narration-viewport-updated = Graph viewport updated.
graphing-calculator-narration-viewport-zoom-3d-default = Graph set to default orientation
graphing-calculator-narration-viewport-zoom-3d-xy = Graph set to X Y orientation
graphing-calculator-narration-viewport-zoom-in = Graph zoom in
graphing-calculator-narration-viewport-zoom-out = Graph zoom out
graphing-calculator-narration-viewport-zoom-recenter = Graph recenter
graphing-calculator-narration-viewport-zoom-square = Graph zoom square
graphing-calculator-narration-visual-parameters-height = Height
graphing-calculator-narration-visual-parameters-offset = Offset
graphing-calculator-narration-visual-parameters-width = Width
graphing-calculator-narration-x-percentage-coordinate = { $x } percent from left.
graphing-calculator-narration-y-percentage-coordinate = { $y } percent from top.
graphing-calculator-narration-zoom-options-label = Zoom
graphing-calculator-text-add-screen-reader-label-placeholder = Add screen reader label
graphing-calculator-text-animating-slider-message = This graph may contain moving elements. Would you like to view the animation?
graphing-calculator-text-arrow-mode-both = Both
graphing-calculator-text-arrow-mode-default = Default
graphing-calculator-text-arrow-mode-none = None
graphing-calculator-text-arrow-mode-positive = Positive
graphing-calculator-text-audio-trace-no-implicit-support = Sorry, but I can't trace implicit curves yet.
graphing-calculator-text-audio-trace-no-parametric-support = Sorry, but I can't trace parametric curves yet.
graphing-calculator-text-audio-trace-no-polar-support = Sorry, but I can't trace polar curves yet.
graphing-calculator-text-audio-trace-off = Audio trace off.
graphing-calculator-text-audio-trace-on = Audio trace on.
graphing-calculator-text-color-black = black
graphing-calculator-text-color-blue = blue
graphing-calculator-text-color-cyan = cyan
graphing-calculator-text-color-dark-blue = dark blue
graphing-calculator-text-color-dark-cyan = dark cyan
graphing-calculator-text-color-dark-gray = dark gray
graphing-calculator-text-color-dark-green = dark green
graphing-calculator-text-color-dark-indigo = dark indigo
graphing-calculator-text-color-dark-lime = dark lime
graphing-calculator-text-color-dark-magenta = dark magenta
graphing-calculator-text-color-dark-orange = dark orange
graphing-calculator-text-color-dark-pink = dark pink
graphing-calculator-text-color-dark-red = dark red
graphing-calculator-text-color-dark-teal = dark teal
graphing-calculator-text-color-dark-violet = dark violet
graphing-calculator-text-color-dark-yellow = dark yellow
graphing-calculator-text-color-gray = gray
graphing-calculator-text-color-green = green
graphing-calculator-text-color-indigo = indigo
graphing-calculator-text-color-light-blue = light blue
graphing-calculator-text-color-light-cyan = light cyan
graphing-calculator-text-color-light-gray = light gray
graphing-calculator-text-color-light-green = light green
graphing-calculator-text-color-light-indigo = light indigo
graphing-calculator-text-color-light-lime = light lime
graphing-calculator-text-color-light-magenta = light magenta
graphing-calculator-text-color-light-orange = light orange
graphing-calculator-text-color-light-pink = light pink
graphing-calculator-text-color-light-red = light red
graphing-calculator-text-color-light-teal = light teal
graphing-calculator-text-color-light-violet = light violet
graphing-calculator-text-color-light-yellow = light yellow
graphing-calculator-text-color-lime = lime
graphing-calculator-text-color-magenta = magenta
graphing-calculator-text-color-orange = orange
graphing-calculator-text-color-pink = pink
graphing-calculator-text-color-purple = purple
graphing-calculator-text-color-red = red
graphing-calculator-text-color-teal = teal
graphing-calculator-text-color-unknown = color unknown
graphing-calculator-text-color-violet = violet
graphing-calculator-text-color-white = white
graphing-calculator-text-color-yellow = yellow
graphing-calculator-text-comma-separated-link = Convert to commas
graphing-calculator-text-comma-separated-note = Please use commas to separate list elements.
graphing-calculator-text-complex-plotting-note = Note: complex values will be plotted as (real, imag)
graphing-calculator-text-distribution-tails-both = Both
graphing-calculator-text-distribution-tails-left = Left
graphing-calculator-text-distribution-tails-right = Right
graphing-calculator-text-enter-parameter = Enter the { $param }.
graphing-calculator-text-export-snapshot = Export a snapshot to the expression list
graphing-calculator-text-folder-placeholder = Untitled folder
graphing-calculator-text-geometry-arrow-mode = Arrow Mode: { $mode }
graphing-calculator-text-geometry-delete-selected-objects =
    { $count ->
        [one] Delete 1 object
       *[other] Delete { $count } objects
    }
graphing-calculator-text-geometry-delete-selected-unlocked-objects =
    { $count ->
        [one] Delete 1 unlocked object
       *[other] Delete { $count } unlocked objects
    }
graphing-calculator-text-geometry-glider = glider
graphing-calculator-text-geometry-hide-objects = Hide
graphing-calculator-text-geometry-intersection = intersection
graphing-calculator-text-geometry-move-to-expression-list-message = Move to expression list
graphing-calculator-text-geometry-multi-select-more-dropdown = More
graphing-calculator-text-geometry-no-constructed-objects = No constructed objects yet.
graphing-calculator-text-geometry-select-hint = Select a { $type }
graphing-calculator-text-geometry-selected-objects =
    { $count ->
        [one] 1 object selected
       *[other] { $count } objects selected
    }
graphing-calculator-text-geometry-show-objects = Show
graphing-calculator-text-geometry-tool-angle-bisector-display-name = Angle bisector
graphing-calculator-text-geometry-tool-angle-bisector-hint-angle = Choose an angle to bisect
graphing-calculator-text-geometry-tool-angle-display-name = Angle
graphing-calculator-text-geometry-tool-angle-hint-1 = Choose a starting point
graphing-calculator-text-geometry-tool-angle-hint-2 = Choose a vertex point
graphing-calculator-text-geometry-tool-angle-hint-3 = Choose an endpoint
graphing-calculator-text-geometry-tool-angles-hint-1 = Choose a starting point or a polygon
graphing-calculator-text-geometry-tool-arc-display-name = Arc
graphing-calculator-text-geometry-tool-arc-hint-1 = Choose a point (start)
graphing-calculator-text-geometry-tool-arc-hint-2 = Choose a point (middle)
graphing-calculator-text-geometry-tool-arc-hint-3 = Choose a point (end)
graphing-calculator-text-geometry-tool-box-selection-display-name = Box Select
graphing-calculator-text-geometry-tool-circle-by-length-display-name = Circle by length
graphing-calculator-text-geometry-tool-circle-display-name = Circle
graphing-calculator-text-geometry-tool-circle-hint-center = Choose a point (center)
graphing-calculator-text-geometry-tool-circle-hint-radius = Choose a point (radius)
graphing-calculator-text-geometry-tool-compass-hint-center = Choose a center point
graphing-calculator-text-geometry-tool-compass-hint-segment = Choose a segment to set the radius
graphing-calculator-text-geometry-tool-dilate-display-name = Dilate
graphing-calculator-text-geometry-tool-dilation-hint-center = Choose point (center)
graphing-calculator-text-geometry-tool-dilation-hint-construct-scale-factor = Construct scale factor: choose a segment
graphing-calculator-text-geometry-tool-dilation-hint-scale-factor = Construct or choose scale factor
graphing-calculator-text-geometry-tool-dilation-hint-scale-second-segment = Choose corresponding segment
graphing-calculator-text-geometry-tool-directed-angle-display-name = Directed Angle
graphing-calculator-text-geometry-tool-directedangle-display-name = Directed angle
graphing-calculator-text-geometry-tool-expression-edit-display-name = Insert into current expression.
graphing-calculator-text-geometry-tool-expression-edit-generic-hint-0 = No valid inputs
graphing-calculator-text-geometry-tool-expression-edit-generic-hint-1 = Choose { $type }
graphing-calculator-text-geometry-tool-expression-edit-generic-hint-2 = Choose { $type1 } or { $type2 }
graphing-calculator-text-geometry-tool-expression-edit-generic-hint-any-object = Choose any object
graphing-calculator-text-geometry-tool-expression-edit-generic-hint-many = Choose one of the following: { $types }
graphing-calculator-text-geometry-tool-expression-edit-starting-transformation-hint = Choose an object to transform
graphing-calculator-text-geometry-tool-line-display-name = Line
graphing-calculator-text-geometry-tool-line-hint-end = Choose a 2nd point
graphing-calculator-text-geometry-tool-line-hint-start = Choose a 1st point
graphing-calculator-text-geometry-tool-midpoint-display-name = Midpoint
graphing-calculator-text-geometry-tool-midpoint-hint = Choose a segment
graphing-calculator-text-geometry-tool-parallel-display-name = Parallel
graphing-calculator-text-geometry-tool-parallel-hint-point = Choose a point to pass through
graphing-calculator-text-geometry-tool-parallel-hint-straight-line = Choose a line to be parallel to
graphing-calculator-text-geometry-tool-perpendicular-display-name = Perpendicular
graphing-calculator-text-geometry-tool-perpendicular-hint-point = Choose a point to pass through
graphing-calculator-text-geometry-tool-perpendicular-hint-straight-line = Choose a line to be perpendicular to
graphing-calculator-text-geometry-tool-point-display-name = Point
graphing-calculator-text-geometry-tool-point-hint = Select or create a point
graphing-calculator-text-geometry-tool-polygon-display-name = Polygon
graphing-calculator-text-geometry-tool-polygon-hint-finish-point = Choose another point, or click an existing point to finish
graphing-calculator-text-geometry-tool-polygon-hint-first-point = Choose a point
graphing-calculator-text-geometry-tool-polygon-hint-next-point = Choose another point
graphing-calculator-text-geometry-tool-ray-display-name = Ray
graphing-calculator-text-geometry-tool-ray-hint-end = Choose a point (direction)
graphing-calculator-text-geometry-tool-ray-hint-start = Choose a point (vertex)
graphing-calculator-text-geometry-tool-reflect-display-name = Reflect
graphing-calculator-text-geometry-tool-reflection-hint-choose-line = Choose line of reflection
graphing-calculator-text-geometry-tool-rotate-display-name = Rotate
graphing-calculator-text-geometry-tool-rotation-hint-angle = Choose angle
graphing-calculator-text-geometry-tool-rotation-hint-angle-end = Choose angle end point
graphing-calculator-text-geometry-tool-rotation-hint-angle-start = Construct or choose angle
graphing-calculator-text-geometry-tool-rotation-hint-center = Choose point (center)
graphing-calculator-text-geometry-tool-segment-display-name = Segment
graphing-calculator-text-geometry-tool-segment-hint-end = Choose another point
graphing-calculator-text-geometry-tool-segment-hint-start = Choose a point
graphing-calculator-text-geometry-tool-selection-display-name = Select
graphing-calculator-text-geometry-tool-translate-display-name = Translate
graphing-calculator-text-geometry-tool-translation-hint-from-with-vector = Choose start point or a vector
graphing-calculator-text-geometry-tool-translation-hint-to = Choose end point
graphing-calculator-text-geometry-tool-vector-copy-display-name = Copy of Vector
graphing-calculator-text-geometry-tool-vector-copy-hint-end = Choose new start point for copy
graphing-calculator-text-geometry-tool-vector-display-name = Vector
graphing-calculator-text-geometry-tool-vector-end-point-display-name = Vector End Point
graphing-calculator-text-geometry-tool-vector-hint-end = Choose end point
graphing-calculator-text-geometry-tool-vector-hint-start = Choose start point or a vector to copy
graphing-calculator-text-geometry-tool-vector-start-point-display-name = Vector Start Point
graphing-calculator-text-image-placeholder = Unnamed image
graphing-calculator-text-label-orientation-above = Above
graphing-calculator-text-label-orientation-above-left = Above Left
graphing-calculator-text-label-orientation-above-right = Above Right
graphing-calculator-text-label-orientation-below = Below
graphing-calculator-text-label-orientation-below-left = Below Left
graphing-calculator-text-label-orientation-below-right = Below Right
graphing-calculator-text-label-orientation-default = Default
graphing-calculator-text-label-orientation-left = Left
graphing-calculator-text-label-orientation-right = Right
graphing-calculator-text-loading-image = Loading image...
graphing-calculator-text-make-custom-regression = Make a custom regression model in a new line using <1>~</1>. <2>Learn how</2>.
graphing-calculator-text-note-placeholder = Empty note
graphing-calculator-text-parameter-name-binwidth = bin width
graphing-calculator-text-parameter-name-data = data set
graphing-calculator-text-parameter-name-dof = degrees of freedom
graphing-calculator-text-parameter-name-height = height
graphing-calculator-text-parameter-name-max = maximum
graphing-calculator-text-parameter-name-mean = mean
graphing-calculator-text-parameter-name-min = minimum
graphing-calculator-text-parameter-name-offset = offset
graphing-calculator-text-parameter-name-probsuccess = success probability
graphing-calculator-text-parameter-name-scale = scale
graphing-calculator-text-parameter-name-shift = shift
graphing-calculator-text-parameter-name-stdev = stdev
graphing-calculator-text-parameter-name-trials = trials
graphing-calculator-text-refreshable-braille-display-note = Use a refreshable Braille display, or just type Braille with a keyboard.
graphing-calculator-text-regression-potentially-inaccurate-parameters = Some parameters may be too large or small to represent accurately.
graphing-calculator-text-table-created = Table created.
graphing-calculator-text-table-creation-error = Error creating table.
graphing-calculator-text-table-more-columns = { $columnCount } more columns
graphing-calculator-text-table-more-rows = { $rowCount } more rows
graphing-calculator-text-toast-choose-one-file = You can only choose one file as a replacement
graphing-calculator-text-toast-error-importing-graph = Error importing graph. Check the URL?
graphing-calculator-text-toast-error-no-folders = Only graphs without folders can be inserted into a folder.
graphing-calculator-text-toast-expression-size-limit = Maximum expression size reached.
graphing-calculator-text-toast-graph-cleared = Graph cleared.
graphing-calculator-text-toast-graph-reset = Graph reset.
graphing-calculator-text-toast-image-upload-failed = Image upload failed.
graphing-calculator-text-toast-imported-graph = Graph imported!
graphing-calculator-text-toast-importing-graph = Importing graph...
graphing-calculator-text-toast-no-file-selected = You did not select a file
graphing-calculator-text-toast-uploading-images = Uploading images...
graphing-calculator-text-toast-zoom-to-fit = We zoomed to fit your data.
graphing-calculator-text-undefined-parameter = { $parameter } is undefined
graphing-calculator-text-view-regression-options = Regression options
graphing-calculator-text-zoom-fit = Zoom Fit
matrix-calculator-narration-keypad-key-det = Determinant
matrix-calculator-narration-keypad-key-inverse = Inverse
matrix-calculator-narration-keypad-key-rref = Reduced row echelon form
matrix-calculator-narration-keypad-key-trace = Trace
matrix-calculator-narration-keypad-key-transpose = Transpose











































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































`;var bl=class{constructor(e){this.value=e}valueOf(){return this.value}},po=class extends bl{constructor(e="???"){super(e)}toString(e){return`{${this.value}}`}},$n=class extends bl{constructor(e,t={}){super(e),this.opts=t}toString(e){if(e)try{return e.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(t){e.reportError(t)}return this.value.toString(10)}},yl=class r extends bl{static supportsValue(e){if(typeof e=="number"||e instanceof Date)return!0;if(e instanceof bl)return r.supportsValue(e.valueOf());if("Temporal"in globalThis){let t=globalThis.Temporal;if(e instanceof t.Instant||e instanceof t.PlainDateTime||e instanceof t.PlainDate||e instanceof t.PlainMonthDay||e instanceof t.PlainTime||e instanceof t.PlainYearMonth)return!0}return!1}constructor(e,t={}){e instanceof r?(t={...e.opts,...t},e=e.value):e instanceof bl&&(e=e.valueOf()),typeof e=="object"&&"calendarId"in e&&t.calendar===void 0&&(t={...t,calendar:e.calendarId}),super(e),this.opts=t}[Symbol.toPrimitive](e){return e==="string"?this.toString():this.toNumber()}toNumber(){let e=this.value;if(typeof e=="number")return e;if(e instanceof Date)return e.getTime();if("epochMilliseconds"in e)return e.epochMilliseconds;if("toZonedDateTime"in e)return e.toZonedDateTime("UTC").epochMilliseconds;throw new TypeError("Unwrapping a non-number value as a number")}toString(e){if(e)try{return e.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(t){e.reportError(t)}return typeof this.value=="number"||this.value instanceof Date?new Date(this.value).toISOString():this.value.toString()}};var Uq=100,die="\u2068",pie="\u2069";function uie(r,e,t){if(t===e||t instanceof $n&&e instanceof $n&&t.value===e.value)return!0;if(e instanceof $n&&typeof t=="string"){let o=r.memoizeIntlObject(Intl.PluralRules,e.opts).select(e.value);if(t===o)return!0}return!1}function zq(r,e,t){return e[t]?Zg(r,e[t].value):(r.reportError(new RangeError("No default")),new po)}function zP(r,e){let t=[],o=Object.create(null);for(let i of e)i.type==="narg"?o[i.name]=Oy(r,i.value):t.push(Oy(r,i));return{positional:t,named:o}}function Oy(r,e){switch(e.type){case"str":return e.value;case"num":return new $n(e.value,{minimumFractionDigits:e.precision});case"var":return hie(r,e);case"mesg":return gie(r,e);case"term":return mie(r,e);case"func":return fie(r,e);case"select":return bie(r,e);default:return new po}}function hie(r,{name:e}){let t;if(r.params)if(Object.prototype.hasOwnProperty.call(r.params,e))t=r.params[e];else return new po(`$${e}`);else if(r.args&&Object.prototype.hasOwnProperty.call(r.args,e))t=r.args[e];else return r.reportError(new ReferenceError(`Unknown variable: $${e}`)),new po(`$${e}`);if(t instanceof bl)return t;switch(typeof t){case"string":return t;case"number":return new $n(t);case"object":if(yl.supportsValue(t))return new yl(t);default:return r.reportError(new TypeError(`Variable type not supported: $${e}, ${typeof t}`)),new po(`$${e}`)}}function gie(r,{name:e,attr:t}){let o=r.bundle._messages.get(e);if(!o)return r.reportError(new ReferenceError(`Unknown message: ${e}`)),new po(e);if(t){let i=o.attributes[t];return i?Zg(r,i):(r.reportError(new ReferenceError(`Unknown attribute: ${t}`)),new po(`${e}.${t}`))}return o.value?Zg(r,o.value):(r.reportError(new ReferenceError(`No value: ${e}`)),new po(e))}function mie(r,{name:e,attr:t,args:o}){let i=`-${e}`,n=r.bundle._terms.get(i);if(!n)return r.reportError(new ReferenceError(`Unknown term: ${i}`)),new po(i);if(t){let s=n.attributes[t];if(s){r.params=zP(r,o).named;let l=Zg(r,s);return r.params=null,l}return r.reportError(new ReferenceError(`Unknown attribute: ${t}`)),new po(`${i}.${t}`)}r.params=zP(r,o).named;let a=Zg(r,n.value);return r.params=null,a}function fie(r,{name:e,args:t}){let o=r.bundle._functions[e];if(!o)return r.reportError(new ReferenceError(`Unknown function: ${e}()`)),new po(`${e}()`);if(typeof o!="function")return r.reportError(new TypeError(`Function ${e}() is not callable`)),new po(`${e}()`);try{let i=zP(r,t);return o(i.positional,i.named)}catch(i){return r.reportError(i),new po(`${e}()`)}}function bie(r,{selector:e,variants:t,star:o}){let i=Oy(r,e);if(i instanceof po)return zq(r,t,o);for(let n of t){let a=Oy(r,n.key);if(uie(r,i,a))return Zg(r,n.value)}return zq(r,t,o)}function qP(r,e){if(r.dirty.has(e))return r.reportError(new RangeError("Cyclic reference")),new po;r.dirty.add(e);let t=[],o=r.bundle._useIsolating&&e.length>1;for(let i of e){if(typeof i=="string"){t.push(r.bundle._transform(i));continue}if(r.placeables++,r.placeables>Uq)throw r.dirty.delete(e),new RangeError(`Too many placeables expanded: ${r.placeables}, max allowed is ${Uq}`);o&&t.push(die),t.push(Oy(r,i).toString(r)),o&&t.push(pie)}return r.dirty.delete(e),t.join("")}function Zg(r,e){return typeof e=="string"?r.bundle._transform(e):qP(r,e)}var j0=class{constructor(e,t,o){this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=e,this.errors=t,this.args=o}reportError(e){if(!this.errors||!(e instanceof Error))throw e;this.errors.push(e)}memoizeIntlObject(e,t){let o=this.bundle._intls.get(e);o||(o={},this.bundle._intls.set(e,o));let i=JSON.stringify(t);return o[i]||(o[i]=new e(this.bundle.locales,t)),o[i]}};function HP(r,e){let t=Object.create(null);for(let[o,i]of Object.entries(r))e.includes(o)&&(t[o]=i.valueOf());return t}var qq=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function Hq(r,e){let t=r[0];if(t instanceof po)return new po(`NUMBER(${t.valueOf()})`);if(t instanceof $n)return new $n(t.valueOf(),{...t.opts,...HP(e,qq)});if(t instanceof yl)return new $n(t.toNumber(),{...HP(e,qq)});throw new TypeError("Invalid argument to NUMBER")}var yie=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function Kq(r,e){let t=r[0];if(t instanceof po)return new po(`DATETIME(${t.valueOf()})`);if(t instanceof yl||t instanceof $n)return new yl(t,HP(e,yie));throw new TypeError("Invalid argument to DATETIME")}var Wq=new Map;function $q(r){let e=Array.isArray(r)?r.join(" "):r,t=Wq.get(e);return t===void 0&&(t=new Map,Wq.set(e,t)),t}var Ry=class{constructor(e,{functions:t,useIsolating:o=!0,transform:i=n=>n}={}){this._terms=new Map,this._messages=new Map,this.locales=Array.isArray(e)?e:[e],this._functions={NUMBER:Hq,DATETIME:Kq,...t},this._useIsolating=o,this._transform=i,this._intls=$q(e)}hasMessage(e){return this._messages.has(e)}getMessage(e){return this._messages.get(e)}addResource(e,{allowOverrides:t=!1}={}){let o=[];for(let i=0;i<e.body.length;i++){let n=e.body[i];if(n.id.startsWith("-")){if(t===!1&&this._terms.has(n.id)){o.push(new Error(`Attempt to override an existing term: "${n.id}"`));continue}this._terms.set(n.id,n)}else{if(t===!1&&this._messages.has(n.id)){o.push(new Error(`Attempt to override an existing message: "${n.id}"`));continue}this._messages.set(n.id,n)}}return o}formatPattern(e,t=null,o=null){if(typeof e=="string")return this._transform(e);let i=new j0(this,o,t);try{return qP(i,e).toString(i)}catch(n){if(i.errors&&n instanceof Error)return i.errors.push(n),new po().toString(i);throw n}}};var KP=/^(-?[a-zA-Z][\w-]*) *= */gm,jq=/\.([a-zA-Z][\w-]*) *= */y,xie=/\*?\[/y,WP=/(-?[0-9]+(?:\.([0-9]+))?)/y,vie=/([a-zA-Z][\w-]*)/y,Yq=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,wie=/^[A-Z][A-Z0-9_-]*$/,Y0=/([^{}\n\r]+)/y,Sie=/([^\\"\n\r]*)/y,Xq=/\\([\\"])/y,Jq=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,Tie=/^\n+/,Zq=/ +$/,kie=/ *\r?\n/g,Eie=/( *)$/,Iie=/{\s*/y,Qq=/\s*}/y,Cie=/\[\s*/y,_ie=/\s*] */y,Mie=/\s*\(\s*/y,Aie=/\s*->\s*/y,Lie=/\s*:\s*/y,Pie=/\s*,?\s*/y,Die=/\s+/y,Qg=class{constructor(e){this.body=[],KP.lastIndex=0;let t=0;for(;;){let N=KP.exec(e);if(N===null)break;t=KP.lastIndex;try{this.body.push(l(N[1]))}catch(U){if(U instanceof SyntaxError)continue;throw U}}function o(N){return N.lastIndex=t,N.test(e)}function i(N,U){if(e[t]===N)return t++,!0;if(U)throw new U(`Expected ${N}`);return!1}function n(N,U){if(o(N))return t=N.lastIndex,!0;if(U)throw new U(`Expected ${N.toString()}`);return!1}function a(N){N.lastIndex=t;let U=N.exec(e);if(U===null)throw new SyntaxError(`Expected ${N.toString()}`);return t=N.lastIndex,U}function s(N){return a(N)[1]}function l(N){let U=p(),K=c();if(U===null&&Object.keys(K).length===0)throw new SyntaxError("Expected message value or attributes");return{id:N,value:U,attributes:K}}function c(){let N=Object.create(null);for(;o(jq);){let U=s(jq),K=p();if(K===null)throw new SyntaxError("Expected attribute value");N[U]=K}return N}function p(){let N;if(o(Y0)&&(N=s(Y0)),e[t]==="{"||e[t]==="}")return h(N?[N]:[],1/0);let U=A();return U?N?h([N,U],U.length):(U.value=D(U.value,Tie),h([U],U.length)):N?D(N,Zq):null}function h(N=[],U){for(;;){if(o(Y0)){N.push(s(Y0));continue}if(e[t]==="{"){N.push(g());continue}if(e[t]==="}")throw new SyntaxError("Unbalanced closing brace");let F=A();if(F){N.push(F),U=Math.min(U,F.length);continue}break}let K=N.length-1,H=N[K];typeof H=="string"&&(N[K]=D(H,Zq));let w=[];for(let F of N)F instanceof X0&&(F=F.value.slice(0,F.value.length-U)),F&&w.push(F);return w}function g(){n(Iie,SyntaxError);let N=m();if(n(Qq))return N;if(n(Aie)){let U=E();return n(Qq,SyntaxError),{type:"select",selector:N,...U}}throw new SyntaxError("Unclosed placeable")}function m(){if(e[t]==="{")return g();if(o(Yq)){let[,N,U,K=null]=a(Yq);if(N==="$")return{type:"var",name:U};if(n(Mie)){let H=b();if(N==="-")return{type:"term",name:U,attr:K,args:H};if(wie.test(U))return{type:"func",name:U,args:H};throw new SyntaxError("Function names must be all upper-case")}return N==="-"?{type:"term",name:U,attr:K,args:[]}:{type:"mesg",name:U,attr:K}}return k()}function b(){let N=[];for(;;){switch(e[t]){case")":return t++,N;case void 0:throw new SyntaxError("Unclosed argument list")}N.push(x()),n(Pie)}}function x(){let N=m();return N.type!=="mesg"?N:n(Lie)?{type:"narg",name:N.name,value:k()}:N}function E(){let N=[],U=0,K;for(;o(xie);){i("*")&&(K=U);let H=S(),w=p();if(w===null)throw new SyntaxError("Expected variant value");N[U++]={key:H,value:w}}if(U===0)return null;if(K===void 0)throw new SyntaxError("Expected default variant");return{variants:N,star:K}}function S(){n(Cie,SyntaxError);let N;return o(WP)?N=T():N={type:"str",value:s(vie)},n(_ie,SyntaxError),N}function k(){if(o(WP))return T();if(e[t]==='"')return I();throw new SyntaxError("Invalid expression")}function T(){let[,N,U=""]=a(WP),K=U.length;return{type:"num",value:parseFloat(N),precision:K}}function I(){i('"',SyntaxError);let N="";for(;;){if(N+=s(Sie),e[t]==="\\"){N+=P();continue}if(i('"'))return{type:"str",value:N};throw new SyntaxError("Unclosed string literal")}}function P(){if(o(Xq))return s(Xq);if(o(Jq)){let[,N,U]=a(Jq),K=parseInt(N||U,16);return K<=55295||57344<=K?String.fromCodePoint(K):"\uFFFD"}throw new SyntaxError("Unknown escape sequence")}function A(){let N=t;switch(n(Die),e[t]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return G(e.slice(N,t))}return e[t-1]===" "?G(e.slice(N,t)):!1}function D(N,U){return N.replace(U,"")}function G(N){let U=N.replace(kie,`
`),K=Eie.exec(N)[1].length;return new X0(U,K)}}},X0=class{constructor(e,t){this.value=e,this.length=t}};var Rie=["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"],J0=class r{constructor(e,t){this.bundles=e;this.onError=t}static fromSources(e,t,o){let i=[];for(let{lang:n,source:a}of e){let s=n.split("-")[0],l=new Ry(n,{...o,useIsolating:Rie.indexOf(s)>=0});l.addResource(new Qg(a),{allowOverrides:!1}),l.addResource(new Qg(`
l10n-internal-date-day-month-year = {DATETIME($d, month: "short", day: "numeric", year: "numeric")}
l10n-internal-date-day-month = {DATETIME($d, month: "short", day: "numeric")}
l10n-internal-time = {DATETIME($d, minute: "numeric", hour: "numeric")}
      `),{allowOverrides:!1}),i.push(l)}return new r(i,t)}format(e,t){for(let o of this.bundles){if(!o.hasMessage(e))continue;let i=o.getMessage(e);if(!(i!=null&&i.value))return;let n=[],a=o.formatPattern(i.value,this.coerceNumericVariables(t),n);for(let s of n)this.onError(`Error formatting ${e} for locale ${o.locales.join(",")}: ${s}`);return a}this.onError(`Couldn't find message for key ${e} for locales ${this.getLocales().join(",")}`)}formatDate(e,t){return t.showYear?this.format("l10n-internal-date-day-month-year",{d:e}):this.format("l10n-internal-date-day-month",{d:e})}formatTime(e){let t=this.format("l10n-internal-time",{d:e});return this.getLocales()[0]==="en"?t==null?void 0:t.toLowerCase():t}hasTranslation(e,t){for(let o of this.bundles)if(o.locales.indexOf(t)>=0)return o.hasMessage(e);return!1}coerceNumericVariables(e){let t={};for(let o in e){let i=e[o];__dcg_shared_module_exports__['qa'](i)?t[o]=i.value:typeof i=="number"?t[o]=`${i}`:t[o]=i}return t}getLocales(){return this.bundles.reduce((e,t)=>e.concat(t.locales),[])}};var Z0="",$P={},e4={},jP={},Fie=["ar","hy-AM","hi","tr","xx-XX"];function Q0(r){Z0=r||""}function YP(r){for(let e in r)delete jP[e],e4[e]=r[e]}function XP(r,e){let t=e!=null?e:Z0;return r4(t).hasTranslation(r,t)}function Sa(r,e){if(e)for(let t in e)e.hasOwnProperty(t)&&(r=r.split("__"+t+"__").join(e[t]));return r}function ko(r,e,t){return t4(r,e!=null?e:{},t!=null?t:Z0)}function kc(r){return function(t,o){return t4(t,o!=null?o:{},r())}}function Gie(r){let e={};for(let t in r){let o=r[t];o!==void 0&&(e[t]=o)}return e}function t4(r,e,t){let i=r4(t).format(r,Gie(e));return i==null?(console.warn(`Could not format string ${r}`),""):i}function r4(r){let e=jP[r];if(!e){$P[r]||($P[r]=Dy([r]));let t=[];for(let i of $P[r]){let n=e4[i];n&&t.push({lang:i,source:n})}let o={};r==="xx-XX"&&(o.transform=i=>i.replace(/[a-z]/gi,"\u2666")),e=jP[r]=J0.fromSources([...t,{lang:"en",source:Bq}],i=>{console.warn(i)},o)}return e}function Fy(){return Z0}function JP(r){return gu.hasOwnProperty(r)||Fie.includes(r)}function xl(r,e){if(r==null)return"";if(typeof r=="string")return r;if(typeof r=="number")return""+r;let t=r.vars,o;if(t){o={};for(let i in t){if(!t.hasOwnProperty(i))continue;let n=t[i];__dcg_shared_module_exports__['qa'](n)?o[i]=n:o[i]=xl(n,e)}}return ko(r.key,o,e)}var em=typeof desmosLocaleData=="object"?desmosLocaleData:{};function ZP(){let r=Dy([$a("lang"),navigator.userLanguage,navigator.language]);for(let e=0;e<r.length;e++){let t=r[e];if(JP(t))return t}return"en"}async function o4(r){if(em[r]||r==="en"||r==="xx-XX")return Q0(r),!0;if(!JP(r)){let e=r.indexOf("-")!==-1?r.split("-")[0]:r;for(let t in gu)if(e===t.split("-")[0]&&gu[t].useAsRoot){r=t;break}}try{let e=await $0.get(`/api/v1/calculator/language/${r}.ftl`);return em[r]=e[r],YP(em),Q0(r),!0}catch(e){throw e.status===404&&console.warn(r+" is not an available language."),e}}function eT(r){if(em[r])return!0;let e=Dy([r]);for(let t of e)if(em[t])return!0;return!1}YP(em);Q0(ZP());var tm="dcg_geometry_toolbar_",i4={selection:{visible:!0},"box-selection":{visible:!0},"expression-edit":{visible:!0},point:{visible:!1},line:{visible:!1},segment:{visible:!1},ray:{visible:!1},vector:{visible:!1},circle:{visible:!1},arc:{visible:!1},parallel:{visible:!1},perpendicular:{visible:!1},anglebisector:{visible:!1},midpoint:{visible:!1},polygon:{visible:!1},compass:{visible:!1},angle:{visible:!1},directedangle:{visible:!1},reflect:{visible:!1},translate:{visible:!1},rotate:{visible:!1},dilate:{visible:!1}};function n4(r){if(r.toolbar!=="all"){if(r.toolbar==="custom"){let e=__dcg_shared_module_exports__['Ud'](i4,r.toolbarState),t=__dcg_shared_module_exports__['Ud'](a4,r.measurementOptions),o={toolbar:"custom"};return e!==void 0&&(o.toolbarState=e),t!==void 0&&(o.measurementOptions=t),o}return r}}var a4={rotationToolInput:!0,dilationToolInput:!0,angleLabelControl:!0,segmentLabelControl:!0};function s4(r){return r===void 0?{toolbar:"all"}:r.toolbar==="custom"?{toolbar:"custom",toolbarState:__dcg_shared_module_exports__['Vd'](i4,r.toolbarState),measurementOptions:__dcg_shared_module_exports__['Vd'](a4,r.measurementOptions)}:r}function l4(r,e){return e.stripDefaults?n4(r.cachedViewState):r.cachedViewState}function QP(r){return r.cachedUndoRedoDiffState}function Nie(r){r.toolbar==="custom"?r.cachedViewState={toolbar:"custom",toolbarState:__dcg_shared_module_exports__['Uc'](r.toolbarState),measurementOptions:__dcg_shared_module_exports__['Uc'](r.measurementOptions)}:r.cachedViewState={toolbar:r.toolbar}}function c4(r){Nie(r),Vie(r),r.__cachedToolbarState=void 0}function d4(r){let e=[];for(let t in r.toolbarState){let o=t,i=r.toolbarState[o];i.visible&&i.disabledLatex&&e.push({type:"geometry-toolbar-predicate",id:`${tm}${o}`,latex:i.disabledLatex})}return e}function p4(r,e){if(!r.toolbarState[e].disabledLatex)return;let t=r.formulas[e];if(t!=null&&t.error)return{key:"shared-calculator-error-custom-toolbar-not-condition",vars:{}}}function u4(r,e,t){let o=e.replace(tm,"");o in r.toolbarState&&(r.formulas[o]=t)}function Vie(r){let e=r.cachedViewState;r.cachedUndoRedoDiffState=e,r.cachedUndoRedoFullState=e}function tT(r){let e=s4(r);return{toolbar:e.toolbar,toolbarState:e.toolbar==="custom"?e.toolbarState:Bie(),measurementOptions:e.toolbar==="custom"?e.measurementOptions:g4(),formulas:{},selectedToolForGroup:{},__cachedToolbarState:void 0,cachedViewState:e,cachedUndoRedoDiffState:e,cachedUndoRedoFullState:e}}function h4(){return tT(void 0)}function Bie(){return{selection:{visible:!0},"box-selection":{visible:!0},"expression-edit":{visible:!0},point:{visible:!0},line:{visible:!0},segment:{visible:!0},ray:{visible:!0},vector:{visible:!1},circle:{visible:!0},arc:{visible:!1},parallel:{visible:!1},perpendicular:{visible:!1},anglebisector:{visible:!1},midpoint:{visible:!1},polygon:{visible:!1},compass:{visible:!1},angle:{visible:!1},directedangle:{visible:!1},reflect:{visible:!1},translate:{visible:!1},rotate:{visible:!1},dilate:{visible:!1}}}function g4(){return{rotationToolInput:!0,dilationToolInput:!0,angleLabelControl:!0,segmentLabelControl:!0}}function m4(r,e){r.toolbar=e,r.__cachedToolbarState=void 0}function f4(r,e,t){let{groups:o,items:i}=Gy(r,t);for(let n of o){let a=i[n];a!=null&&a.dropdown&&a.dropdown.indexOf(e)!==-1&&(r.selectedToolForGroup[a.group]=e),e!=="box-selection"&&(a==null?void 0:a.group)==="selection"&&(a!=null&&a.dropdown)&&(r.selectedToolForGroup.selection=a.dropdown[0])}r.__cachedToolbarState=void 0}function rT(r,e,t){r.toolbarState[e]={visible:t.visible,disabledLatex:t.disabledLatex},r.__cachedToolbarState=void 0}function b4(r,e,t){r.measurementOptions[e]=t,r.__cachedToolbarState=void 0}function mu(r,e){return r.toolbar==="all"?!0:r.toolbar==="none"?!1:r.toolbarState[e].visible}function rm(r,e){var o;if(r.toolbar==="all")return!0;let t=mu(r,e);if(t&&r.formulas[e]){let i=r.formulas[e],n=(o=i==null?void 0:i.typed_constant_value)==null?void 0:o.value;return typeof n=="number"?!n:!0}return t||e==="selection"}function Ec(r){return r.toolbar==="custom"?r.measurementOptions:g4()}function Gy(r,e){var i;if(((i=r.__cachedToolbarState)==null?void 0:i.authorMode)===e)return r.__cachedToolbarState.state;let t={};for(let n of eD())if(n.dropdown){let a=n.dropdown.filter(s=>e||mu(r,s));if(a.sort((s,l)=>{let c=rm(r,s),p=rm(r,l),h=mu(r,s),g=mu(r,l);return(c?0:h?1:2)-(p?0:g?1:2)}),a.length>0){let s=r.selectedToolForGroup[n.group];(!s||a.indexOf(s)===-1)&&(s=a[0]),!e&&!rm(r,s)&&(s=a.find(l=>rm(r,l))||a[0]),t[n.group]={group:n.group,current:s,dropdown:a.length>1?a:void 0}}}else(e||mu(r,n.current))&&(t[n.group]=n);let o=__dcg_shared_module_exports__['A'](t);r.__cachedToolbarState={authorMode:e,state:{groups:o,items:t}};for(let n of o){let a=t[n];r.selectedToolForGroup[n]=a==null?void 0:a.current}return{groups:o,items:t}}function eD(){return[{group:"selection",current:"selection",dropdown:["selection","box-selection"]},{group:"point",current:"point",dropdown:["point","midpoint"]},{group:"line",current:"segment",dropdown:["segment","line","ray","vector","parallel","perpendicular","anglebisector"]},{group:"circle",current:"circle",dropdown:["circle","compass","arc"]},{group:"angle",current:"angle",dropdown:["angle","directedangle"]},{group:"polygon",current:"polygon"}]}function Ny(r){switch(r){case"selection":return ko("graphing-calculator-label-geometry-tools-dropdown-menu-selection");case"point":return ko("graphing-calculator-label-geometry-tools-dropdown-menu-point");case"line":return ko("graphing-calculator-label-geometry-tools-dropdown-menu-line");case"circle":return ko("graphing-calculator-label-geometry-tools-dropdown-menu-circle");case"angle":return ko("graphing-calculator-label-geometry-tools-dropdown-menu-angle");case"polygon":return ko("graphing-calculator-label-geometry-tools-dropdown-menu-polygon");case"transformation":return ko("graphing-calculator-label-geometry-tools-dropdown-menu-transformation")}}var Uie=0;function zie(){return"helper_item_"+Uie++}function y4(r){return{...r,formula:__dcg_shared_module_exports__['Se'](),guid:zie(),cachedParsableState:{type:"statement",id:r.id,latex:r.latex,shouldGraph:!1}}}function x4(r,e,t){var c;e.formula=t;let{proxy:o}=e,i=(c=t.typed_constant_value)==null?void 0:c.value,n=__dcg_shared_module_exports__['u'](i)?i:NaN,a=Array.isArray(i)&&i.every(__dcg_shared_module_exports__['u'])?i.slice(0):void 0,s=o.listValue,l=o.numericValue;o.setPropertyWithoutNotifying("numericValue",n),o.setPropertyWithoutNotifying("listValue",a),__dcg_shared_module_exports__['s'](n,l)||r.runAfterDispatch(()=>{o.notifyPropertyChange("numericValue")}),__dcg_shared_module_exports__['s'](a,s)||r.runAfterDispatch(()=>{o.notifyPropertyChange("listValue")})}Vt();function v4(r,e){r.hidden=e}function Ts(r,e,t){r[e]=t}function Vy(r,e){return r[e]}function w4(r,e){r.description=e}function S4(r,e){r.name=e}function nT(r,e){e.type==="inert"?(r.disableGraphInteractions=e.disableGraphInteractions,e.disableGraphInteractions&&(r.draggable=!1,r.clickableInfo={...r.clickableInfo,enabled:!1})):e.type==="draggable"?(r.draggable=e.draggable,e.draggable&&(r.disableGraphInteractions=!1)):e.type==="clickable"&&(r.clickableInfo=e.clickableInfo,e.clickableInfo.enabled&&(r.disableGraphInteractions=!1))}function tD(r,e){nT(r,{type:"draggable",draggable:e})}function om(r){if(!r.formula)return;let e=r.formula.center_reference_id,t=r.formula.center_reference_symbol;if(!e||!t)return;let o=r.controller.getItemModel(e);if(!(!o||o.type!=="expression")&&o.formula.assignment===t&&hi(o))return o}function Hie(r){let e=om(r);if(!e)return!1;let t=eo(e);return!(!t||t===__dcg_shared_module_exports__['hd'].NONE)}function ks(r){return!r.draggable||Ti(r)?!1:Hie(r)}function T4(r){if(!r.formula||!r.formula.center_is_point_literal)return!1;let e=r.formula.move_strategy;if(!e)return!1;let t=e[2],o=e[3],i=t&&t.type!=="none",n=o&&o.type!=="none";return!!(i||n)}function k4(r,e){r.opacity=e}function rD(r,e){r.foreground=e}function E4(r,e){r.image_url=e}function aT(r,e){e(r.opacity,"imageOpacity"),e(r.center,"imageCenter"),e(r.height,"imageHeight"),e(r.width,"imageWidth"),e(r.angle,"imageAngle")}function Kie(r){let e=mS(r);e.moduleID=Kg(r),e.color=r.color,e.index=r.index,e.guid=r.guid,e.shouldGraph=r.shouldGraph,e.showPoints=r.showPoints,r.cachedParsableState=e}function I4(r){r.draggingOnGraphpaper?r.preTransientState||(r.preTransientState={center:r.center,width:r.width,height:r.height}):delete r.preTransientState,gl(r);let e=tn(r);r.shouldGraph=e&&e.hidden?!1:!r.hidden,r.showPoints=r.shouldGraph&&rn(r)&&r.loadStatus==="loaded"&&!ks(r)&&r.controller.isTraceEnabled(),$ie(r),jie(r),Kie(r)}function C4(r,e){r.formula=e,r.error=Wie(r)}function sT(r){return r.formula?r.formula.variables.map(t=>__dcg_shared_module_exports__['ia'](t))||[]:[]}function Wie(r){let e={scale:r.controller.s("graphing-calculator-error-log-axes-image"),center:r.controller.s("graphing-calculator-error-image-invalid-center"),angle:r.controller.s("graphing-calculator-error-image-invalid-angle"),width:r.controller.s("graphing-calculator-error-image-invalid-width"),height:r.controller.s("graphing-calculator-error-image-invalid-height"),opacity:r.controller.s("graphing-calculator-error-image-invalid-opacity")};for(let t in r.formula.errorMap)if(r.formula.errorMap[t])return e[t]}function _4(r,e){return!r.formula||!r.formula.errorMap?!1:!!r.formula.errorMap[e]}function lT(r,e){let t=r.cachedViewState;return e.stripDefaults?PB(t):t}function $ie(r){let e=r.cachedViewState.clickableInfo,t=!0,o=!0;if(e&&(e.depressedImage===r.clickableInfo.depressedImage&&(o=!1),e.hoveredImage===r.clickableInfo.hoveredImage&&(t=!1)),t&&(r.hoveredImageObj&&(re(r.hoveredImageObj).off("load"),delete r.hoveredImageObj),r.clickableInfo.hoveredImage)){r.hoveredImageObj=new Image;let i=function(){r.controller.requestRedrawGraph()},n=function(){};iT(r.hoveredImageObj,r.clickableInfo.hoveredImage,i,n)}if(o&&(r.depressedImageObj&&(re(r.depressedImageObj).off("load"),delete r.depressedImageObj),r.clickableInfo.depressedImage)){r.depressedImageObj=new Image;let i=function(){r.controller.requestRedrawGraph()},n=function(){};iT(r.depressedImageObj,r.clickableInfo.depressedImage,i,n)}if(r.cachedViewState.image_url!==r.image_url){re(r.imageObj).off("load"),r.imageObj=new Image;let i=function(){r.controller.dispatch({type:"image-load-success",id:r.id})},n=function(){r.controller.dispatch({type:"image-load-error",id:r.id})},s=r.controller.getGraphSettings().config.cacheRenderedSvgs?{fetchMimeType:{imageModel:r}}:void 0;iT(r.imageObj,r.image_url,i,n,s)}r.cachedViewState={type:r.type,id:r.id,folderId:r.folderId,image_url:r.image_url,name:r.name,hidden:r.hidden,foreground:r.foreground,secret:r.secret,readonly:r.readonly,disableGraphInteractions:r.disableGraphInteractions,...uL(r)}}function M4(r,e){r.draggingOnGraphpaper=e}function jie(r){let e=r.cachedViewState;r.cachedUndoRedoFullState=r.cachedViewState,r.preTransientState&&(e={...e,...r.preTransientState}),r.cachedUndoRedoDiffState=e}function Yie(r){let e=document.createElement("canvas");return e.width=2,e.height=2,e.getContext("2d").drawImage(r,0,0,2,2),e.toDataURL()}function iT(r,e,t,o,i={}){re(r).on("load.initial-image-load",()=>{let s=r.width,l=r.height;s===1&&l===1?(re(r).off(".initial-image-load"),re(r).on("load",t),r.src=Yie(r)):t()}).on("error",o);let n=/^data:/.test(e);n||(r.crossOrigin="anonymous");let{fetchMimeType:a}=i;a?n?(r.src=e,a.imageModel.mimeType=e.substring(5,e.indexOf(";"))):fetch(e).then(s=>{let l=s.headers.get("Content-type");return l&&(a.imageModel.mimeType=l),s.blob()}).then(s=>{let l=URL.createObjectURL(s);r.src=l}):r.src=e}function A4(r,e){return{...__dcg_shared_module_exports__['Uc'](tg(r)),...hl(e),color:__dcg_shared_module_exports__['Md'].BLUE,loadStatus:"loading",failures:0,imageObj:new Image,hoveredImageObj:void 0,depressedImageObj:void 0,mimeType:void 0,shouldGraph:void 0,showPoints:void 0,error:void 0,formula:void 0,draggingOnGraphpaper:!1,cachedViewState:{},cachedParsableState:{},cachedUndoRedoDiffState:{},cachedUndoRedoFullState:{}}}var Xie={id:!1,type:!1,image_url:!0,name:!0,folderId:!0,hidden:!0,secret:!0,readonly:!0,disableGraphInteractions:!0,foreground:!0,...__dcg_shared_module_exports__['ce'](gS)};function L4(r,e){__dcg_shared_module_exports__['$d']({from:e,to:r,props:Xie})}function P4(r){let{controller:e,files:t,id:o}=r,i={errors:[],tokens:[]};for(let n=0;n<t.length;n++){let a=t[n];if(!a.type.match("image/*")){i.errors.push(e.s("graphing-calculator-error-image-invalid-file",{file:a.name}));continue}i.tokens.push(Zie({controller:e,file:a,id:o}))}return i}var Jie=0;function Zie(r){let{controller:e,file:t,id:o}=r,i=""+Jie++;return e.getGraphSettings().config.imageUploadCallback(t,(n,a)=>{setTimeout(()=>{if(n)e.dispatch({type:"image-upload-error",token:i,error:n});else{let s=new Image;iT(s,a,function(){let p=s.width,h=s.height,g=Math.max(p,h)/Math.min(p,h);p<h?(h=10,p=Math.round(10*h/g)/10):(p=10,h=Math.round(10*p/g)/10),e.dispatch({type:"image-upload-success",token:i,url:a,width:p+"",height:h+"",name:t.name,id:o})},function(){e.dispatch({type:"image-upload-error",token:i,error:!0})})}})}),i}function cT(r,e){r.loadStatus=e,e==="loaded"&&(r.failures=0),e==="failed"&&(r.failures+=1)}function oD(r){r.imageObj.src=r.imageObj.src,cT(r,"loading")}function dT(r,e,t){nT(r,{type:"clickable",clickableInfo:{...r.clickableInfo,[e]:t}})}function D4(r,e){nT(r,{type:"clickable",clickableInfo:{...r.clickableInfo,latex:e}})}function fu(r){var e;return!!(r.clickableInfo.enabled&&r.formula&&((e=r.formula.click_handler)==null?void 0:e.status)==="maybe-valid")}function iD(r,e){nT(r,{type:"inert",disableGraphInteractions:e})}var pT=class{invalidate(){this.suggestedIdentifierRename=void 0}suggestionForId(e){if(this.suggestedIdentifierRename&&this.suggestedIdentifierRename.id===e)return this.suggestedIdentifierRename}updateForSelectedItem(e,t){function o(c){return Od(e,c).length}function i(c,p){return Od(e,c).filter(h=>h.folderId===p).length}if(!t||t.type!=="expression"){this.invalidate();return}this.suggestedIdentifierRename&&this.suggestedIdentifierRename.id!==t.id&&(this.suggestedIdentifierRename=void 0),this.suggestedIdentifierRename&&By(e,this.suggestedIdentifierRename.from)===0&&(this.suggestedIdentifierRename=void 0);let n=t.formula.defined_name||"",a=n?__dcg_shared_module_exports__['ia'](n):"";if(!this.suggestedIdentifierRename){a&&(this.suggestedIdentifierRename={id:t.id,from:a,to:a,countOfChanges:0,folderId:void 0});return}if(a===this.suggestedIdentifierRename.to)return;if(this.suggestedIdentifierRename.to=a,this.suggestedIdentifierRename.from===this.suggestedIdentifierRename.to||!this.suggestedIdentifierRename.from||!this.suggestedIdentifierRename.to){this.suggestedIdentifierRename.countOfChanges=0;return}if(o(n)>1){this.suggestedIdentifierRename.countOfChanges=0;return}let s=__dcg_shared_module_exports__['ja'](this.suggestedIdentifierRename.from);if(this.suggestedIdentifierRename.folderId=void 0,o(s)>0){let c;if(t.folderId&&(c=i(s,t.folderId))===0)this.suggestedIdentifierRename.folderId=t.folderId,this.suggestedIdentifierRename.countOfChanges=c;else{this.suggestedIdentifierRename.countOfChanges=0;return}}let l=By(e,this.suggestedIdentifierRename.from,this.suggestedIdentifierRename.folderId);this.suggestedIdentifierRename.countOfChanges=l}};function Br(r,e){if(!isFinite(r))return r;if(!isFinite(e))return e;let t=__dcg_shared_module_exports__['N'](r,e);if(r>0!=e>0||r===0||e===0)return 0;let o=r>0?1:-1,i=Math.abs(r).toExponential().split("e"),n=Math.abs(e).toExponential().split("e"),a=i[0],s=n[0],l=i[1],c=n[1];if(c!==l)return o*Math.pow(10,Math.max(parseFloat(l),parseFloat(c)));if(a[0]!==s[0])return parseFloat(t.toPrecision(1));let p=1;for(let h=2;h<Math.min(a.length,s.length)&&(p++,a[h]===s[h]);h++);return parseFloat(t.toPrecision(p))}function O4(r){return __dcg_shared_module_exports__['aa'](r).latex}function uT(r){return r.slider.hardMin?r.slider.min:O4(Yn(r))}function hT(r){return r.slider.hardMax?r.slider.max:O4(Ja(r))}function Yn(r){if(r.slider.hardMin){let e=r.formula.slider_min_number;return isFinite(e)?e:NaN}else{let e=r.controller.getDegreeMode(),t=__dcg_shared_module_exports__['Ie'](r.slider.min,e),o=Za(r),i=Is(r),n=r.slider.hardMax?r.formula.slider_max_number:void 0,s=r.controller.is3dProduct()?__dcg_shared_module_exports__['Fc'].xmin:-10;if(t<s&&(s=t),o<s&&(s=o),n<s&&(s=n),i){let l=__dcg_shared_module_exports__['Hc']({target:s,hardMin:void 0,hardMax:n,step:i});l<=s?s=l:s=l-i}return s}}function Ja(r){if(r.slider.hardMax){let e=r.formula.slider_max_number;return isFinite(e)?e:NaN}else{let e=r.controller.getDegreeMode(),t=__dcg_shared_module_exports__['Ie'](r.slider.max,e),o=Za(r),i=Is(r),n=r.slider.hardMin?r.formula.slider_min_number:void 0;return __dcg_shared_module_exports__['Ic']({storedMax:t,sliderValue:o,step:i,hardMin:n,is3d:r.controller.is3dProduct()})}}function Is(r){return r.formula.slider_step_number}function nD(r){var t;if(!r.formula||!r.formula.is_slider)return;let e=(t=r.formula.typed_constant_value)==null?void 0:t.value;if(e!==void 0)return+e}function Za(r){let e=r.formula&&r.formula.raw_slider_latex;if(r.latex!==e)return Bg(r.latex);let t=nD(r);return isFinite(t)?t:NaN}function gT(r){return r.slider.loopMode!==__dcg_shared_module_exports__['Zd'].PLAY_ONCE?!1:Za(r)>=Ja(r)}function Ic(r,e){if(!isFinite(e))return r;let t=r.indexOf("=")+1;return __dcg_shared_module_exports__['Ie'](r.slice(t),!1)===e?r:r.slice(0,t)+__dcg_shared_module_exports__['$'](e)}function Es(r,e,t){if(!r.sliderExists)return NaN;let o=Yn(r),i=Ja(r),n=Is(r);if(t&&t.overwriteStep!==void 0&&(n=t.overwriteStep),e=__dcg_shared_module_exports__['Hc']({target:e,hardMin:r.slider.hardMin?o:void 0,hardMax:r.slider.hardMax?i:void 0,step:n}),!t||!t.ignoreSoftLimits){if(!r.slider.hardMin&&e<o)return o;if(!r.slider.hardMax&&e>i)return i}return e}function mT(r,e,t={}){if(!r.sliderExists)return NaN;let o=Za(r),i=Yn(r),n=Ja(r),a=Is(r);t.overwriteStep===void 0&&(t.overwriteStep=a||(n-i)/20);let s=0;switch(e){case"min":return Es(r,i);case"max":return Es(r,n);case"up":s=1;break;case"down":s=-1;break;case"bigup":s=5;break;case"bigdown":s=-5;break;default:return e}let l=o;for(let c=0;c<20;c++){let p=c/3*t.overwriteStep,h=o;if(s>0)o=Es(r,l+p,t),o>h&&(s-=1);else if(s<0)o=Es(r,l-p,t),o<h&&(s+=1);else break}return o}function aD(r,e){if(!r.sliderExists)return;r.slider.isPlaying&&vn(r,!1);let t=Es(r,e,{ignoreSoftLimits:!0});r.latex=Ic(r.latex,t)}function sD(r,e,t){if(!r.sliderExists)return;r.slider.isPlaying&&vn(r,!1),vu(r);let o=mT(r,e,t);r.latex=Ic(r.latex,o)}function lD(r,e){if(!r.sliderExists)return;r.slider.isPlaying&&vn(r,!1);let t=Es(r,e);r.latex=Ic(r.latex,t)}function cD(r,e){if(!r.sliderExists||r.resetSliderAnimationTargetValue)return;let t=r.sliderLastTickTime;if(r.sliderLastTickTime=e,t===void 0)return;let o=e-t,i=Yn(r),n=Ja(r),a=Is(r),s=r.slider.animationPeriod,l=r.slider.loopMode;if(isNaN(r.sliderAnimationTargetValue)){let g=Za(r);isNaN(g)||(r.sliderAnimationTargetValue=g)}let c=a?a/2:0;if(l===__dcg_shared_module_exports__['Zd'].LOOP_FORWARD_REVERSE)r.sliderAnimationTargetValue>=n?jn(r,{playDirection:-1}):r.sliderAnimationTargetValue<=i&&jn(r,{playDirection:1});else if(l===__dcg_shared_module_exports__['Zd'].LOOP_FORWARD)jn(r,{playDirection:1}),r.sliderAnimationTargetValue>=n+c&&(r.sliderAnimationTargetValue=i-c);else if(l===__dcg_shared_module_exports__['Zd'].PLAY_ONCE)jn(r,{playDirection:1});else if(l===__dcg_shared_module_exports__['Zd'].PLAY_INDEFINITELY)jn(r,{playDirection:1});else throw new Error("Unexpected slider loop mode: "+l);isFinite(o)||(o=0);let p,h;if(l===__dcg_shared_module_exports__['Zd'].PLAY_INDEFINITELY)p=o/(s/4),a&&(p*=a),r.sliderAnimationTargetValue+=p,h=r.sliderAnimationTargetValue,a||(h=Br(h-p*.1,h+p*.1)),h=Es(r,h,{ignoreSoftLimits:!0}),r.latex=Ic(r.latex,h);else{if(o=Math.min(o,s/10),p=(n-i)*o/s,r.sliderAnimationTargetValue+=p*r.slider.playDirection,r.sliderAnimationTargetValue=Math.max(i-c,Math.min(n+c,r.sliderAnimationTargetValue)),h=r.sliderAnimationTargetValue,!a&&h<n){let g=p/o*16.666666666666668;h=Br(h-g*.1,h+g*.1)}h=Es(r,h),r.latex=Ic(r.latex,h)}}function yu(r,e){e?jn(r,{hardMin:!0,min:e}):jn(r,{hardMin:!1,min:r.controller.is3dProduct()?`${__dcg_shared_module_exports__['Fc'].xmin}`:"-10"})}function xu(r,e){e?jn(r,{hardMax:!0,max:e}):jn(r,{hardMax:!1,max:r.controller.is3dProduct()?`${__dcg_shared_module_exports__['Fc'].xmax}`:"10"})}function Uy(r,e){jn(r,{step:e})}function jn(r,e){r.slider={...r.slider,...e}}function vn(r,e){!r||r.slider.isPlaying===e||(jn(r,{isPlaying:e}),e&&(vu(r),r.sliderAnimationTargetValue=Za(r)))}function vu(r){if(!r.slider.hardMin){let e=__dcg_shared_module_exports__['_'](Yn(r));e!==r.slider.min&&jn(r,{min:e})}if(!r.slider.hardMax){let e=__dcg_shared_module_exports__['_'](Ja(r));e!==r.slider.max&&jn(r,{max:e})}}function wu(r){return r.formula&&r.formula.assignment}function fT(r){return!!(r.formula&&r.formula.slider_min_valid)}function bT(r){return!!(r.formula&&r.formula.slider_max_valid)}function yT(r){return!!(r.formula&&r.formula.slider_step_valid)}function xT(r,e){e&&vu(r),r.sliderDragging=e}function R4(r,e){jn(r,{animationPeriod:e})}function dD(r,e){r.text=e}function F4(r,e){return{...__dcg_shared_module_exports__['Uc'](AS(r)),...hl(e),cachedUndoRedoDiffState:{},cachedUndoRedoFullState:{},cachedViewState:{}}}function G4(r){gl(r),ene(r),tne(r)}var Qie={id:!1,type:!1,folderId:!0,text:!0,secret:!0,readonly:!0};function N4(r,e){__dcg_shared_module_exports__['$d']({from:e,to:r,props:Qie})}function vT(r,e){let t=r.cachedViewState;return e.stripDefaults?D5(t):t}function ene(r){r.cachedViewState={type:r.type,id:r.id,folderId:r.folderId,text:r.text,secret:r.secret,readonly:r.readonly}}function tne(r){r.cachedUndoRedoDiffState=r.cachedViewState,r.cachedUndoRedoFullState=r.cachedViewState}var B4="dcg_ticker_guid_internal",rne=B4;function U4(){return pD(og)}function one(r){r.cachedParsableState=bS(r)}function z4(r,e){return e.stripDefaults?GB(r.cachedViewState):r.cachedViewState}function q4(r){return r.cachedUndoRedoDiffState}function H4(r){return r.cachedUndoRedoFullState}function ine(r){r.cachedViewState={handlerLatex:r.handlerLatex,minStepLatex:r.minStepLatex,playing:r.playing,open:r.open}}function nne(r){let e=r.cachedViewState;r.cachedUndoRedoDiffState=e,r.cachedUndoRedoFullState=e}function pD(r){return{...yS(r),type:"ticker",guid:B4,id:rne,avgDelta:0,lastTickTime:void 0,cachedViewState:{},cachedParsableState:{},cachedUndoRedoDiffState:{},cachedUndoRedoFullState:{},filteredBySearch:!1}}function K4(r,e){__dcg_shared_module_exports__['ae'](e,r)}function W4(r,e){r.formula=e}function $4(r){ine(r),nne(r),one(r)}function j4(r,{currentFrameTime:e,previousFrameTime:t}){var a,s;if(!r.playing||((a=r.formula)==null?void 0:a.handler.status)!=="maybe-valid")return!1;if(r.lastTickTime==null||t==null)return!0;if(((s=r.formula)==null?void 0:s.minStep.status)!=="valid")return!1;let o=r.formula.minStep.value,i=r.lastTickTime+o;if(e>=i)return!0;let n=e-t;return i-e<n/2}function Y4(r,e){r.lastTickTime=e}function X4(r){if(r.formula)return r.formula.handler.status==="error"?r.formula.handler.error:void 0}function J4(r){if(r.formula)return r.formula.minStep.status==="error"?r.formula.minStep.error:void 0}function zy(r){var e;return(((e=r.formula)==null?void 0:e.variables)||[]).map(t=>__dcg_shared_module_exports__['ia'](t))}function wT(r,e){e(r.handlerLatex,"tickerHandler"),e(r.minStepLatex,"tickerMinStep")}var cm="**dcg_geo_expression_edit_tool_preview**";function Z4(r){return{controller:r,__itemModelArray:[],__itemIdToModel:{},__helperIdToModel:{},__toolPreviewIdToModel:{},__anyDependsOnRandomSeed:!1,__anyFunctionDefinitionsDependOnRandomSeed:!1,__anyUnmutedTones:!1,__anyTones:!1,__anyIsAction:!1,selectedItemMap:{},tabOrder:[],drawLayers:[],colorIdx:0,expressionAnalysis:{},nextDisplayIndex:"1",ticker:U4(),renamePrompt:new pT,__exportedVariables:new Ly([],void 0)}}function Q4(r){for(let e=0;e<r.__itemModelArray.length;e++){let t=r.__itemModelArray[e];if(t.type==="image"&&t.loadStatus==="loading")return!0}return!1}function eH(r){let e=Object.values(r.controller.getColors()).filter(o=>o!=__dcg_shared_module_exports__['Md'].ORANGE),t=e[r.colorIdx];return r.colorIdx=(r.colorIdx+1)%e.length,t}function Cc(r,e){return r.__itemModelArray[e]}function dm(r){for(let e=0;e<r.__itemModelArray.length;e++){let t=r.__itemModelArray[e];if(pm(t))return t}}function kT(r){for(let e=r.__itemModelArray.length-1;e>=0;e--){let t=r.__itemModelArray[e];if(pm(t))return t}}function qy(r,e){let t;do{if(e--,e===-1)return;t=Cc(r,e)}while(t&&!pm(t));return t}function Su(r,e){if(e===void 0)return;let t,o=Wy(r);do{if(e++,e===o)return;t=Cc(r,e)}while(t&&!pm(t));return t}function tn(r){if(r.type!=="folder"&&r.folderId){let e=r.controller.getListModel(),t=Sl(e,r.folderId);if(t&&t.type==="folder")return t}}function tH(r,e){let t=Sl(r,e);if(!t||t.type!=="folder")return 0;let o=0,i=r.__itemModelArray.length;for(let n=t.index+1;n<i;n++){let a=r.__itemModelArray[n];if(a.type==="folder"||a.folderId!==e)break;o+=1}return o}function rH(r,e){let t=Sl(r,e);if(!t||t.type!=="folder")return[];let o=[],i=r.__itemModelArray.length;for(let n=t.index+1;n<i;n++){let a=r.__itemModelArray[n];if(a.type==="folder"||a.folderId!==e)break;o.push(a.id)}return o}function ET(r,e){let t=[],o=Sl(r,e);if(!o||o.type!=="folder")return t;let i=r.__itemModelArray.length;for(let n=o.index+1;n<i;n++){let a=r.__itemModelArray[n];if(a.type==="folder"||a.folderId!==e)break;t.push(a)}return t}function oH(r){return!!(r&&r.readonly)}function am(r){if(!r)return!1;if(r.secret)return!0;let e=tn(r);return!!(e&&e.secret&&e.id!==__dcg_shared_module_exports__['je'])}function pm(r){return!Yg(r)}function iH(r){return r.id===__dcg_shared_module_exports__['je']||r.type!=="folder"&&r.folderId===__dcg_shared_module_exports__['je']}function Yg(r){if(!r||r.filteredBySearch||iH(r))return!0;if(r.controller.isItemBeingDragged(r.id))return!!r.controller.shouldRenderDraggedItemAsToken();if(!r.controller.shouldShowAuthorFeatures()&&am(r))return!0;let t=tn(r);return!!(t&&t.collapsed&&!r.controller.getExpressionSearchStr())}function IT(r){return r.__itemModelArray}function nH(r){return Object.values(r.__helperIdToModel)}function Hy(r){return Object.values(r.__toolPreviewIdToModel)}function um(r,e){for(let t=0;t<r.__itemModelArray.length;t++){let o=r.__itemModelArray[t];sm(o,e)}for(let t in r.__toolPreviewIdToModel)sm(r.__toolPreviewIdToModel[t],e);if(r.ticker.open&&(e(r.ticker.handlerLatex,{type:"item",location:"tickerHandler",item:r.ticker}),e(r.ticker.minStepLatex,{type:"item",location:"tickerMinStep",item:r.ticker})),r.controller.isGeometry()){let o=r.controller.getGeometryToolbarModel().toolbarState;for(let i in o){let n=i,a=o[n];a.visible&&a.disabledLatex&&e(a.disabledLatex,{type:"geometry-toolbar",tool:n})}}}function sm(r,e){switch(r.type){case"expression":FT(r,(o,i)=>e(o,{type:"item",location:i,item:r}));break;case"table":Cy(r,(o,i,n)=>e(o,{type:"item",location:i,item:r,...n}));break;case"image":aT(r,(o,i)=>e(o,{type:"item",location:i,item:r}));break;case"ticker":wT(r,(o,i)=>e(o,{type:"item",location:i,item:r}));break;case"folder":case"text":break;default:return r}}function aH(r,e){if(!Ji(e))return!1;let o=!1;return um(r,i=>{za(i,e)&&(o=!0)}),o}function sH(r,e){let t=!1;for(let o of r.__itemModelArray)if(o.type==="table"&&(Cy(o,i=>{za(i,e)&&(t=!0)},{headersOnly:!0}),t))return!0;return!1}function lH(r,e){let t=0,o=Ji(e);r.ticker.filteredBySearch=r.ticker.open&&!za(r.ticker.handlerLatex,e)&&!za(r.ticker.minStepLatex,e);for(let i of r.__itemModelArray){if(!o){i.filteredBySearch=!1,t++;continue}switch(i.filteredBySearch=!0,i.type){case"expression":FT(i,s=>{za(s,e)&&(i.filteredBySearch=!1,t++)});let n=Tn(i);i.label&&n&&i.label.match(TT(e))&&(i.filteredBySearch=!1,t++);break;case"table":Cy(i,s=>{za(s,e)&&(i.filteredBySearch=!1,t++)});break;case"image":aT(i,s=>{za(s,e)&&(i.filteredBySearch=!1,t++)});break;case"folder":case"text":break;default:return i}!i.filteredBySearch&&i.type!=="folder"&&i.folderId&&(r.__itemIdToModel[i.folderId].filteredBySearch=!1,t++)}return t}function cH(r){var e,t;return Ti(r)?!1:r.controller.isGeometry()&&Gi(r)?!0:r.type==="expression"?ix(r)&&((e=r.clickableInfo)==null?void 0:e.enabled)||eo(r)!==__dcg_shared_module_exports__['hd'].NONE:r.type==="image"?((t=r.clickableInfo)==null?void 0:t.enabled)||ks(r):!1}function uD(r){return r.description?cH(r):!1}function CT(r){return cH(r)}function dH(r,e){let t=0,o=Lz(e),i=Dz(e),n=a=>uD(a)?e==="\\operatorname{alt}"&&a.description?!0:i.test(a.description):!1;r.ticker.filteredBySearch=!!e&&r.ticker.open&&!o(r.ticker.handlerLatex)&&!o(r.ticker.minStepLatex);for(let a=0;a<r.__itemModelArray.length;a++){if(!e){r.__itemModelArray[a].filteredBySearch=!1;continue}let s=r.__itemModelArray[a];switch(s.filteredBySearch=!0,s.type){case"expression":FT(s,p=>{o(p)&&(s.filteredBySearch=!1,t++)});let l=Tn(s);ym(s)&&(s.label||l)&&(e==="\\operatorname{label}"||e.length>1&&"label".indexOf(e)===0||o(s.label))&&(s.filteredBySearch=!1,t++),n(s)&&(s.filteredBySearch=!1,t++);break;case"table":Cy(s,p=>{o(p)&&(s.filteredBySearch=!1,t++)});break;case"image":e==="\\operatorname{image}"||e.length>1&&"image".indexOf(e)===0?(s.filteredBySearch=!1,t++):aT(s,p=>{o(p)&&(s.filteredBySearch=!1,t++)}),n(s)&&(s.filteredBySearch=!1,t++);break;case"folder":i.test(s.title)&&(s.filteredBySearch=!1,t++);break;case"text":(i.test(s.text)||e==="\\operatorname{note}"||e.length>1&&"note".indexOf(e)===0)&&(s.filteredBySearch=!1,t++);break;default:return s}!s.filteredBySearch&&s.type!=="folder"&&s.folderId&&(r.__itemIdToModel[s.folderId].filteredBySearch=!1,t++)}return t}function TT(r,e){return new RegExp("\\$\\{"+r.replace("{","\\{?").replace("}","\\}?").replace("_","\\_?")+"\\}",e)}function By(r,e,t){let o=0;for(let i=0;i<r.__itemModelArray.length;i++){let n=r.__itemModelArray[i];if(n.type!=="expression"||t&&n.folderId!==t)continue;if(Tn(n)&&n.label){let s=n.label.match(TT(e,"g"));s&&(o+=s.length)}}return um(r,(i,n)=>{t&&(n.type!=="item"||n.item.type==="ticker"||n.item.type==="folder"||n.item.folderId!==t)||(o+=SS(i,e).length)}),o}function wl(r,e,t,o){r.renamePrompt.invalidate(),t=t.trim().replace(/_\{([a-zA-Z0-9])\}/g,"_$1");for(let i=0;i<r.__itemModelArray.length;i++){let n=r.__itemModelArray[i];if(n.type==="expression"){if((o==null?void 0:o.limitToFolder)!==void 0&&o.limitToFolder!==n.folderId)continue;let a=Tn(n);n.label&&a&&n.label.match(TT(e))&&Tl(n,n.label.replace(TT(e,"g"),"${"+t.trim()+"}"))}}um(r,(i,n)=>{if(o&&o.limitToItem!==void 0&&(n.type!=="item"||o.limitToItem!==n.item.id)||o&&o.limitToFolder!==void 0&&(n.type!=="item"||n.item.type==="ticker"||n.item.type==="folder"||o.limitToFolder!==n.item.folderId))return;let a=TS(i,e,t);if(n.type==="geometry-toolbar"){let l=r.controller.getGeometryToolbarModel();rT(l,n.tool,{visible:!0,disabledLatex:a});return}let s=n.item;if(a!==i){let l;switch(n.cellLocation!==void 0&&s.columnModels&&(l=s.columnModels[n.cellLocation.column].id),n.location){case"latex":{Ii(s,a);break}case"cdfBound1":{HH(s,a);break}case"cdfBound2":{KH(s,a);break}case"cdfP":{WH(s,a);break}case"colorLatex":{rx(s,a);break}case"lineWidth":{fm(s,a);break}case"resolution":{GT(s,a);break}case"clickableInfoLatex":{OT(s,a);break}case"fillOpacity":{Zy(s,a);break}case"surfaceOpacity":{Qy(s,a);break}case"lineOpacity":{mm(s,a);break}case"pointOpacity":{ex(s,a);break}case"pointSize":case"movablePointSize":tx(s,a);break;case"labelAngle":{NT(s,a);break}case"labelSize":{ox(s,a);break}case"polarDomainMin":{wn(s,a,"theta");break}case"polarDomainMax":{Sn(s,a,"theta");break}case"parametricDomainMin":{wn(s,a,"t");break}case"parametricDomainMax":{Sn(s,a,"t");break}case"parametricDomain3DuMin":{wn(s,a,"u");break}case"parametricDomain3DuMax":{Sn(s,a,"u");break}case"parametricDomain3DvMin":{wn(s,a,"v");break}case"parametricDomain3DvMax":{Sn(s,a,"v");break}case"parametricDomain3DrMin":{wn(s,a,"r");break}case"parametricDomain3DrMax":{Sn(s,a,"r");break}case"parametricDomain3DphiMin":{wn(s,a,"phi");break}case"parametricDomain3DphiMax":{Sn(s,a,"phi");break}case"sliderMin":{yu(s,a);break}case"sliderMax":{xu(s,a);break}case"sliderStep":{Uy(s,a);break}case"imageOpacity":{Ts(s,"opacity",a);break}case"imageCenter":{Ts(s,"center",a);break}case"imageHeight":{Ts(s,"height",a);break}case"imageWidth":{Ts(s,"width",a);break}case"imageAngle":{Ts(s,"angle",a);break}case"tickerHandler":{s.handlerLatex=a;break}case"tickerMinStep":{s.minStepLatex=a;break}case"tableHeader":case"tableCellValue":if(!n.cellLocation||s.type!=="table")break;Ld(s,n.cellLocation,a);break;case"tableColumnColorLatex":{l&&P0(s,l,a);break}case"tableColumnPointSize":{l&&A0(s,l,a);break}case"tableColumnPointOpacity":{l&&L0(s,l,a);break}case"tableColumnLineWidth":{l&&_0(s,l,a);break}case"tableColumnLineOpacity":{l&&M0(s,l,a);break}case"residualVariable":break;case"inferenceConfidenceLevel":{s.inference.confidence={...s.inference.confidence,confidenceLevel:a};break}case"inferenceHypothesis":{s.inference.significance={tails:"outer",...s.inference.significance,hypothesis:a};break}default:{let c=n.location;throw new Error(`Unexpected latex location ${c}`)}}}})}function _T(r){let e=[];um(r,o=>{if(o.indexOf("~")!==-1||o.indexOf("\\sim")!==-1)return;let i=/_(\d)|_\{(?:\s|\\space)*(\d+)(?:\s|\\space)*\}/g;for(;;){let n=i.exec(o);if(!n)break;e.push(parseInt(n[1]||n[2],10))}}),e.sort((o,i)=>o-i);let t=1;for(let o=0;o<e.length;o++)e[o]===t&&t++;return t}function pH(r){let e=0;return um(r,t=>{let o=/\\token\{(\d+)\}/g;for(;;){let i=o.exec(t);if(!i)break;let n=parseInt(i[1],10);n>e&&(e=n)}}),e}function uH(r){let e={};return um(r,t=>{if(t.indexOf("~")!==-1||t.indexOf("\\sim")!==-1)return;let o=/(\\?[a-zA-Z]+)_(\d)|(\\?[a-zA-Z]+)_\{(?:\s|\\space)*(\d+)(?:\s|\\space)*\}/g;for(;;){let i=o.exec(t);if(!i)break;let n=i[1]||i[3],a=i[2]||i[4];n[0]!=="\\"&&(n=n[n.length-1]);let s=parseInt(a,10);e[n]||(e[n]=0),s>e[n]&&(e[n]=s)}}),e}function hH(r,e){let t=[],o=[],i=[],n=[],a={points:[],angles:[],polygons:[],other:[]};function s(c){if(pne(r,c.id)&&e!=="actual")return;if(c.id===cm&&e!=="preview")return;if(c.type==="expression"&&c.folderId===__dcg_shared_module_exports__['je']){ws(c)?a.points.push(c.id):Fd(c)?a.angles.push(c.id):bm(c)?a.polygons.push(c.id):a.other.push(c.id);return}let p=!1;if(c.type!=="folder"&&c.folderId){let g=r.__itemIdToModel[c.folderId];g&&g.type==="folder"&&g.inFrontOfEverything&&(p=!0)}let h=i;p?h=n:c.type==="image"&&!c.foreground&&(h=o),c.type==="table"?(c.regression&&(t.push(c.regression.id),h.push(c.regression.id)),c.columnModels.forEach(g=>{t.push(g.id),h.push(g.id)})):(t.push(c.id),h.push(c.id))}r.__itemModelArray.forEach(s),Hy(r).forEach(s);let l=[...a.polygons,...a.other,...a.angles,...a.points];t.push(...l),i.push(...l),r.tabOrder=t,r.drawLayers=[],o.length&&r.drawLayers.push({layer:-1,drawOrder:o,drawSet:new Set(o)}),r.drawLayers.push({layer:0,drawOrder:i,drawSet:new Set(i)}),n.length&&r.drawLayers.push({layer:1,drawOrder:n,drawSet:new Set(n)})}function gH(r,e){return r.__itemModelArray.findIndex(t=>t.id===e)}function Sl(r,e,t){let o=r.__itemIdToModel[e];if(o)return o;if(t&&t.includePreviewItems)return r.__toolPreviewIdToModel[e]}function mH(r,e){return!!r.__toolPreviewIdToModel[e]}function ane(r,e){return r.__toolPreviewIdToModel[e]}function Od(r,e){var o;let t=[];for(let i=0;i<r.__itemModelArray.length;i++){let n=r.__itemModelArray[i];n.type==="expression"&&((o=uo(n))==null?void 0:o.identifier)===e&&t.push(n)}return t}function sne(r,e){return r.__helperIdToModel[e]}function fH(r){return Object.values(r.__helperIdToModel)}function bH(r,e){let t=y4(e);r.__helperIdToModel[t.id]=t,Object.defineProperty(e.proxy,"isActive",{get:()=>{var o;return((o=r.__helperIdToModel[t.id])==null?void 0:o.proxy)===t.proxy}})}function Ky(r){r.__anyUnmutedTones=r.__itemModelArray.some(e=>Xy(e)),r.__anyTones=r.__anyUnmutedTones||r.__itemModelArray.some(e=>Xn(e))}function yH(r,e){r.__exportedVariables=new Ly(IT(r),e)}function hD(r){r.__anyDependsOnRandomSeed=!1,r.__anyFunctionDefinitionsDependOnRandomSeed=!1;for(let e=0;e<r.__itemModelArray.length;e++){let t=r.__itemModelArray[e];t&&"formula"in t&&t.formula&&t.formula.depends_on_random_seed&&(r.__anyDependsOnRandomSeed=!0,t.type==="expression"&&t.formula.function_definition&&(r.__anyFunctionDefinitionsDependOnRandomSeed=!0))}}function xH(r){r.__anyIsAction=!1}function MT(r){if(!r.__anyIsAction){if(r.ticker.open){r.__anyIsAction=!0;return}for(let e=0;e<r.__itemModelArray.length;e++){let t=r.__itemModelArray[e];if(t&&"formula"in t&&t.formula){if(t.type!=="expression"&&t.type!=="image")continue;let{formula:o}=t;if(t.type==="expression"&&_c(t)||o.click_handler!==void 0){r.__anyIsAction=!0;return}}}}}function Tu(r){r.controller.getGraphSettings().config.showIDs?cne(r):lne(r);for(let e in r.selectedItemMap)r.__itemIdToModel[e]||delete r.selectedItemMap[e]}function lne(r){let e=!r.controller.shouldShowAuthorFeatures(),t=1,o=1;for(let i=0;i<r.__itemModelArray.length;i++){let n=r.__itemModelArray[i];n.index=i,n.displayIndex=""+t,am(n)&&(n.secretIndex=""+o,o+=1),!iH(n)&&(!e||!am(n))&&(t+=1)}r.nextDisplayIndex=""+t}function cne(r){for(let e=0;e<r.__itemModelArray.length;e++){let t=r.__itemModelArray[e];t.index=e;let o=t.id.length<=6?t.id:t.id.substring(0,4)+"\u2026";t.displayIndex=o,am(t)&&(t.secretIndex=o)}r.nextDisplayIndex=""}function dne(r){r.renamePrompt.invalidate(),r.__itemModelArray=[],r.__itemIdToModel={},r.__helperIdToModel={},r.__toolPreviewIdToModel={},r.__anyDependsOnRandomSeed=!1,r.__anyFunctionDefinitionsDependOnRandomSeed=!1,r.__anyUnmutedTones=!1,r.__anyTones=!1}function Wy(r){return r.__itemModelArray.length}function vH(r){return r.__itemModelArray.filter(e=>e.type==="expression"&&e.folderId===__dcg_shared_module_exports__['je']&&!!$o(e)).length}function wH(r){return r.nextDisplayIndex==="1"}function SH(r){let e=[];for(let t=0;t<r.__itemModelArray.length;t++){let o=r.__itemModelArray[t];o.type==="expression"&&o.sliderExists&&e.push(o)}return e}function ku(r){let e;for(let t in r.selectedItemMap){if(e!==void 0)return;e=t}if(e!==void 0)return r.__itemIdToModel[e]}function pne(r,e){return!!r.selectedItemMap[e]}function TH(r){return Object.keys(r.selectedItemMap)}function AT(r){let e=[];for(let t in r.selectedItemMap)e.push(r.__itemIdToModel[t]);return e}function kH(r){return{list:r.__itemModelArray.map(e=>e.cachedUndoRedoDiffState),ticker:q4(r.ticker)}}function gD(r){return{list:r.__itemModelArray.map(e=>e.cachedUndoRedoFullState),ticker:H4(r.ticker)}}function LT(r,e){switch(r.type){case"expression":return Jy(r,e);case"image":return lT(r,e);case"table":return qg(r,e);case"folder":return q0(r,e);case"text":return vT(r,e);default:return r}}function EH(r,e){let t={list:r.__itemModelArray.map(i=>LT(i,e))},o=z4(r.ticker,e);return o&&(t.ticker=o),t}function*une(r){for(let e=r.list.length-1;e>=0;e--){let t=r.list[e];if(yield t.id,t.type==="table"&&t.columns)for(let o=t.columns.length-1;o>=0;o--)yield t.columns[o].id;t.type==="table"&&t.regression&&(yield t.regression.id)}}function mD(r){if(/^[0-9]+$/.test(r))return parseInt(r,10)}function IH(r){let e=0;for(let t of une(r)){let o=mD(t);o!==void 0&&o>e&&(e=o)}return e}function CH(r,e,t){t||(t={});let o,i;for(r.colorIdx=0,dne(r),r.expressionAnalysis={},o=0;o<e.list.length;o++){if(i=lm(r,e.list[o]),t.remapColors&&"color"in i&&i.color){let n=Object.values(r.controller.getColors());n.includes(i.color)||(i.color=Gz(i.color,n))}r.__itemModelArray.push(i),r.__itemIdToModel[i.id]=i}if(r.ticker=pD(e.ticker),Tu(r),r.nextDisplayIndex==="1"){let n=lm(r,{type:"expression",id:r.controller.generateId(),color:r.controller.getNextColor()});ki(r,n,r.__itemModelArray.length)}}function lm(r,e){switch(e.type){case"expression":return RT(e,r.controller);case"table":return iq(e,r.controller);case"image":return A4(e,r.controller);case"folder":return Mq(e,r.controller);case"text":return F4(e,r.controller);default:return e}}function _H(r,e){let t,o,i=r.__itemIdToModel;for(r.__itemModelArray=[],r.__itemIdToModel={},r.renamePrompt.invalidate(),t=0;t<e.list.length;t++){let n=e.list[t];if(o=i[n.id],o&&o.type===n.type)switch(o.type){case"expression":if(n.type!==o.type)throw new Error("invalid restoration");qH(o,n);break;case"table":if(n.type!==o.type)throw new Error("invalid restoration");oq(o,n);break;case"image":if(n.type!==o.type)throw new Error("invalid restoration");L4(o,n);break;case"folder":{if(n.type!==o.type)throw new Error("invalid restoration");Lq(o,n)}break;case"text":if(n.type!==o.type)throw new Error("invalid restoration");N4(o,n);break;default:return o}else o=lm(r,n);r.__itemModelArray.push(o),r.__itemIdToModel[o.id]=o}e.ticker&&K4(r.ticker,e.ticker),hD(r),MT(r),Ky(r),yH(r,void 0),Tu(r)}function MH(r,e,t){let o=t[0]&&"tableId"in t[0]&&t[0].tableId,i=Sl(r,o||e);if(!i)return;let n;switch(i.type){case"expression":let a=!1,s=!1,l;i.__workerNeedsDotplotXMode=!1;for(let h=0;h<t.length;h++){let g=t[h];if("recursionTerminationStatus"in g&&g.recursionTerminationStatus===1&&(s=!0),"nanBlame"in g&&g.nanBlame!==void 0&&(l=g.nanBlame),g.branchMode===15){i.error=g.error;continue}"resolved"in g&&!g.resolved&&(a=!0),"boundingBox"in g&&g.boundingBox&&(n||(n=[]),n.push(g.boundingBox)),g.needsDotplotXMode&&(i.__workerNeedsDotplotXMode=!0)}i.unresolved=a,i.boundingBoxes=n,i.recursiveDepthPlottingError=s,i.nanBlame=l;let c=1/0,p=-1/0;for(let h of t){if(h.branchMode!==6)continue;let g=h.sampledDomain;g&&(c=Math.min(c,g.min),p=Math.max(p,g.max))}isFinite(c)&&(i.__workerSampledDomainMin=c),isFinite(p)&&(i.__workerSampledDomainMax=p);return;case"table":for(let h=0;h<t.length;h++){let g=t[h];"boundingBox"in g&&g.boundingBox&&(n||(n=[]),n.push(g.boundingBox))}n&&bq(i,e,n);return;default:return}}function AH(r,e,t){var a,s,l;let o,i,n=__dcg_shared_module_exports__['Uc'](r.expressionAnalysis);for(o in e){if(!e.hasOwnProperty(o))continue;i=e[o];let c={isGraphable:!!i.is_graphable,isError:!!i.error,errorMessage:i.error?r.controller.unpack(i.error):void 0},p=(s=(a=Sl(r,o))!=null?a:sne(r,o))!=null?s:ane(r,o);if((p==null?void 0:p.type)==="helper-expression")x4(r.controller,p,i);else if(p)switch(p.type){case"expression":zH(p,i);let{value:h,valueType:g}=(l=i.typed_constant_value)!=null?l:{};h!==void 0&&(g===__dcg_shared_module_exports__['ya']?c.evaluation={type:"ListOfNumber",value:h.slice()}:__dcg_shared_module_exports__['sa'](g,__dcg_shared_module_exports__['ua'])&&(c.evaluation={type:"Number",value:h}),c.evaluationDisplayed=!!i.is_evaluable);break;case"image":C4(p,i);break;case"table":Zz(p,i);break;case"folder":case"text":break;default:return p}else o===r.ticker.id&&W4(r.ticker,i);o.startsWith(tm)&&u4(r.controller.getGeometryToolbarModel(),o,i),o!==r.ticker.id&&o!==Ty&&!o.startsWith(tm)&&(n[o]=c)}hD(r),Ky(r),MT(r),yH(r,__dcg_shared_module_exports__['ge'](t)),r.expressionAnalysis=n}function ar(r,e){r.selectedItemMap={},e&&(r.selectedItemMap[e.id]="selected")}function LH(r){return Object.values(r.selectedItemMap).some(e=>e==="tentatively-selected")}function PH(r,e){r.selectedItemMap={},e&&(r.selectedItemMap[e.id]="tentatively-selected")}function DH(r){for(let e in r.selectedItemMap)r.selectedItemMap[e]==="tentatively-selected"&&(r.selectedItemMap[e]="selected")}function OH(r){for(let e in r.selectedItemMap)r.selectedItemMap[e]==="tentatively-selected"&&delete r.selectedItemMap[e]}function fD(r,e,t){r.selectedItemMap[e]?delete r.selectedItemMap[e]:r.selectedItemMap[e]=t}function bD(r,e){r.selectedItemMap={};for(let t in e)r.selectedItemMap[t]="selected"}function Rd(r,e,t,o){if(e===t)return;let i=r.__itemModelArray.splice(e,o);e<t&&(t=t-o+1),r.__itemModelArray.splice.apply(r.__itemModelArray,[t,0,...i]),Tu(r)}function ki(r,e,t){let o=String(e.id);if(r.__itemIdToModel.hasOwnProperty(o))throw Error("Item with id '"+o+"' is already in list");r.__itemIdToModel[o]=e,r.__itemModelArray.splice(t,0,e),Tu(r)}function ka(r,e){ki(r,e,Wy(r))}function hm(r,e){let t=[],o=r.__itemModelArray[e];if(o.type==="folder"){let i=0,n=e+1;for(let a=n;a<r.__itemModelArray.length;a++){let s=r.__itemModelArray[a];if(s.type==="folder"||s.folderId!==o.id)break;rn(s)&&ar(r,void 0),s.readonly?(a>n&&(r.__itemModelArray[a]=r.__itemModelArray[n],r.__itemModelArray[n]=s),ui(s,""),n+=1):(delete r.__itemIdToModel[s.id],delete r.expressionAnalysis[o.id],i+=1)}i>0&&t.push(...r.__itemModelArray.splice(n,i))}return rn(o)&&ar(r,void 0),t.push(...r.__itemModelArray.splice(e,1)),delete r.__itemIdToModel[o.id],delete r.expressionAnalysis[o.id],hD(r),t.some(i=>Xn(i))&&Ky(r),Tu(r),t}function RH(r){return r.__anyDependsOnRandomSeed}function FH(r){return r.__anyFunctionDefinitionsDependOnRandomSeed}function GH(r){return r.__anyIsAction}function NH(r){return r.__anyUnmutedTones}function Eu(r,e){let t=Sl(r,e);return t?hm(r,t.index):[]}function PT(r){let e=ku(r);if(!e)return!1;let t=qy(r,e.index);return t?(ar(r,t),t.index===Wy(r)-1&&e.type==="expression"&&Qa(e)&&hm(r,t.index),!0):!1}function DT(r){let e=ku(r);if(!e)return!1;let t=Su(r,e.index);return t?(ar(r,t),!0):!1}function VH(r,e){let t=r.selectedItemMap;return e in t?t[e]:void 0}function rn(r){return!!r.controller.getListModel().selectedItemMap[r.id]}function BH(r){if(!r.controller.shouldShowAuthorFeatures()){r.renamePrompt.invalidate();return}let e=ku(r);r.renamePrompt.updateForSelectedItem(r,e)}function $y(r,e){r.dragState=e}function jy(r){switch(r.type){case"expression":return gm(r);case"image":return sT(r);case"table":return[];case"text":return[];case"folder":return[];default:return r}}function UH(r,e){for(let t of IT(r))t.type==="folder"&&Xg(t,e)}function Yy(r){return r?r.type==="image"&&fu(r)||r.type==="expression"&&Ei(r):!1}function yD(r){return r.__exportedVariables}bn();var xm=class{suspend(){return new Promise((e,t)=>{if(this.audioContext)this.audioContext.suspend().then(()=>{e()}).catch(o=>{Lr(o),t(o)});else{e();return}})}getResumedAudioContext(){return new Promise((e,t)=>{if(!this.audioContext){let o=window.AudioContext||window.webkitAudioContext;if(!o){t();return}try{this.audioContext=new o({latencyHint:"interactive",sampleRate:44100})}catch(i){t(i)}}this.audioContext&&(this.audioContext.state!=="running"?this.audioContext.resume().then(()=>{e({audioContext:this.audioContext,poiBuffer:this.poiBuffer})}).catch(o=>{Lr(o),t(o)}):this.audioContext.resume().then(()=>{e({audioContext:this.audioContext,poiBuffer:this.poiBuffer})}).catch(o=>{Lr(o),t(o)}))})}};var hne=.25;function $H(r,e){return hne*__dcg_shared_module_exports__['V'](r,0,gne(e))}function gne(r){return r<=0||!isFinite(r)?0:__dcg_shared_module_exports__['V'](660/r,0,10)}var Ci,mne="data:audio/mpeg;base64,//uQx"+"A".repeat(23)+"WGluZwAAAA8AAAACAAACcQCA"+"gICA".repeat(16)+"/".repeat(66)+"8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkI"+"A".repeat(320)+"//sQxAADgnABGiAAQBCqgCRMAAgEAH"+"/".repeat(15)+"7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq"+"/".repeat(18)+"9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAw"+"V".repeat(97)+"Q==";function fne(){Ci&&(Ci.src="about:blank",Ci.load(),Ci=void 0)}function VT(){if(!(!ys&&!Ya)){if(!Ci){let r=document.createElement("div");Ci=document.createElement("audio"),r.appendChild(Ci),Ci.setAttribute("x-webkit-airplay","deny"),Ci.controls=!1,Ci.disableRemotePlayback=!0,Ci.preload="auto",Ci.loop=!0,Ci.src=mne,Ci.load()}Ci.paused&&Ci.play().catch(fne)}}function BT(){Ci&&Ci.pause()}var jH=44100,kl=a0?.02:0,nx=class{constructor(e){this.expressionSynthMap=new Map;this.useOfflineContext=!1;this.globalUnmuteState=!1;this.hasEverInteractedWithMute=!1;this.eventListenerCleanupCbs=[];this.maxGain=.5;this.handleVisibilityChange=()=>{!this.audioContext||this.isGlobalMuted()||document.visibilityState==="hidden"&&this.controller.dispatch({type:"mute-global"})};this.handleDestroyOrUnload=()=>{if(this.eventListenerCleanupCbs.forEach(t=>{t()}),this.eventListenerCleanupCbs=[],!this.audioContext||this.isGlobalMuted())return;let e=this.audioContext;e instanceof AudioContext&&setTimeout(()=>{if(e.state!=="closed")try{e.close()}catch(t){}},100),this.handleAction({type:"mute-global"}),this.clearAudioContext()};this.audioContextManager=new xm,this.controller=e,document.addEventListener("visibilitychange",this.handleVisibilityChange),this.eventListenerCleanupCbs.push(()=>{document.removeEventListener("visibilitychange",this.handleVisibilityChange)}),window.addEventListener("beforeunload",this.handleDestroyOrUnload),this.eventListenerCleanupCbs.push(()=>{window.removeEventListener("beforeunload",this.handleDestroyOrUnload)})}destroy(){this.handleDestroyOrUnload()}setOfflineAudio(){this.useOfflineContext=!0}prepareToRenderAudio(e){this.useOfflineContext&&(this.offlineBuffer=void 0,this.audioContext=new OfflineAudioContext(1,e*jH,jH),this.audioContext.addEventListener("complete",async t=>{this.offlineBuffer=t.renderedBuffer,this.clearAudioContext()}),this.createMainNodes(),this.recomputeAudio())}getHasEverInteractedWithMute(){return this.hasEverInteractedWithMute}registerMuteInteraction(){this.hasEverInteractedWithMute=!0}async startRendering(){return this.audioContext.startRendering()}getRenderedBuffer(){return this.offlineBuffer}clearAudioContext(){for(let e of this.expressionSynthMap.values())e.tearDown();this.audioContext=void 0,this.expressionSynthMap=new Map}async spinUpAudioContext(){if(!this.useOfflineContext){if(this.audioContext)this.audioContext.state==="suspended"&&!this.useOfflineContext&&await this.audioContext.resume();else{let e=await this.audioContextManager.getResumedAudioContext();this.audioContext=e.audioContext}this.gainNode||this.createMainNodes()}}createMainNodes(){this.audioContext&&(this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=0,this.compressor=this.audioContext.createDynamicsCompressor(),this.compressor.threshold.value=-10,this.compressor.knee.value=4,this.compressor.ratio.value=20,this.compressor.attack.value=.01,this.compressor.release.value=.01,this.gainNode.connect(this.compressor),this.compressor.connect(this.audioContext.destination))}async _recomputeAudio(e){var t,o,i,n,a,s,l;if(e.length!==0&&!(this.nothingShouldSound()&&((t=this.audioContext)==null?void 0:t.state)!=="running")){if(this.useOfflineContext){if(!this.audioContext)return}else await this.spinUpAudioContext();if(this.nothingShouldSound()){if(this.expressionSynthMap.size>0){for(let c of this.expressionSynthMap.values())c.tearDown();this.expressionSynthMap.clear()}}else for(let c of e){let p=c.type==="expression"?c.formula.typed_constant_value:void 0,h=c.id;p&&!this.expressionSynthMap.has(h)&&this.expressionSynthMap.set(h,new UT(this,this.gainNode)),(o=this.expressionSynthMap.get(h))==null||o.updateFromValues(p),c.type==="remove"&&this.expressionSynthMap.has(h)?((i=this.expressionSynthMap.get(h))==null||i.tearDown(),this.expressionSynthMap.delete(h)):c.type==="expression"&&(ax(c)?(a=this.expressionSynthMap.get(h))==null||a.setGain(0):(n=this.expressionSynthMap.get(h))==null||n.setGain(this.maxGain))}this.audioContext&&(this.expressionSynthMap.size>0&&!this.isGlobalMuted()?(s=this.gainNode)==null||s.gain.setTargetAtTime(1,this.audioContext.currentTime+kl,Mc):(l=this.gainNode)==null||l.gain.setTargetAtTime(0,this.audioContext.currentTime+kl,Mc))}}nothingShouldSound(){return!this.globalUnmuteState||!this.hasAnyUnmutedTones()}recomputeAudio(){Ky(this.controller.getListModel());let t=this.controller.getAllItemModels().filter(n=>Xy(n)),o=[],i=new Set(t.map(n=>n.id));for(let n of this.expressionSynthMap.keys())i.has(n)||o.push({id:n,type:"remove"});this._recomputeAudio([...t,...o])}isGlobalMuted(){return!this.globalUnmuteState}someExpressionsShouldPlayTones(){var e,t;return(t=(e=this.controller)==null?void 0:e.getAllItemModels())==null?void 0:t.some(o=>Xy(o))}hasAnyUnmutedTones(){return NH(this.controller.getListModel())}handleAction(e){var t,o,i,n;switch(e.type){case"mute-global":{BT(),this.globalUnmuteState=!1,(o=(t=this.controller).logEvent)==null||o.call(t,{category:"tone",action:"mute-global"});break}case"unmute-global":{VT(),this.globalUnmuteState=!0,this.hasEverInteractedWithMute=!0,(n=(i=this.controller).logEvent)==null||n.call(i,{category:"tone",action:"unmute-global"});break}default:return e}this.recomputeAudio()}handleMuteKeyShortcut(){this.controller.toneItemsExist()?this.isGlobalMuted()?(this.controller.dispatch({type:"unmute-global"}),gt(this.controller.s("graphing-calculator-narration-unmuted")),this.someExpressionsShouldPlayTones()||gt(this.controller.s("graphing-calculator-narration-no-playing-tones"))):(this.controller.dispatch({type:"mute-global"}),gt(this.controller.s("graphing-calculator-narration-muted"))):gt(this.controller.s("graphing-calculator-narration-no-tone-expressions")),Te()}};var Mc=.005,bne=15e-5,vm=20,wm=2e4,xD=class{constructor(e,t){e.audioContext&&(this.audioContext=e.audioContext,this.oscillator=this.audioContext.createOscillator(),this.oscillator.type="sine",this.gain=this.audioContext.createGain(),this.gain.gain.value=0,this.oscillator.connect(this.gain),this.gain.connect(t),this.oscillator.start())}stop(e=0){this.gain.gain.setTargetAtTime(0,this.audioContext.currentTime+e+kl,Mc),setTimeout(()=>{this.oscillator.stop()},1e3*(2*Mc+e+kl)+1)}setFrequencyAndGain(e,t){(!isFinite(e)||!isFinite(t)||e>wm||e<vm)&&(t=0);let o=$H(t,e);o>0&&this.oscillator.frequency.setTargetAtTime(__dcg_shared_module_exports__['V'](e,vm,wm),this.audioContext.currentTime+kl,bne),this.gain.gain.setTargetAtTime(o,this.audioContext.currentTime+kl,Mc)}},UT=class{constructor(e,t){e.audioContext&&(this.audioContext=e.audioContext,this.gain=this.audioContext.createGain(),this.gain.gain.value=0,this.gain.connect(t),this.synthesizers=[])}updateFromValues(e){var t,o,i;if(e&&e.valueType===__dcg_shared_module_exports__['Xa'])this.synthesizers.length>1?(this.tearDownSynthesizers(this.synthesizers.slice(1)),this.synthesizers.length=1):this.synthesizers.length===0&&(this.synthesizers=[this.makeSynth()]),(t=this.synthesizers[0])==null||t.setFrequencyAndGain(e.value[0],e.value[1]);else if(e&&e.valueType===__dcg_shared_module_exports__['Ya']){if(this.synthesizers.length>e.value.length&&(this.tearDownSynthesizers(this.synthesizers.slice(e.value.length)),this.synthesizers.length=e.value.length),e.value.length>this.synthesizers.length)for(let n=this.synthesizers.length;n<e.value.length;n++)this.synthesizers.push(this.makeSynth());for(let n=0;n<e.value.length;n++)this.synthesizers[n].setFrequencyAndGain(e.value[n][0],e.value[n][1])}else this.tearDownSynthesizers(this.synthesizers),this.synthesizers=[];this.synthesizers.length>0?(o=this.gain)==null||o.gain.setTargetAtTime(1,this.audioContext.currentTime+kl,Mc):(i=this.gain)==null||i.gain.setTargetAtTime(0,this.audioContext.currentTime+kl,Mc)}makeSynth(){return new xD(this,this.gain)}tearDownSynthesizers(e){if(e)for(let t of e)t.stop()}setGain(e){this.gain.gain.setTargetAtTime(e,this.audioContext.currentTime+kl,Mc)}tearDown(){this.tearDownSynthesizers(this.synthesizers),this.synthesizers=[]}};var El=4;function xne(r){return r===void 0?NaN:+r}function Gi(r){return!!r&&r.type==="expression"&&!!r.formula&&!!r.formula.typed_constant_value&&!!r.formula.geometry}function vne(r){var t,o;let e=r.formula;return e?r.controller.isDecimalToFractionEnabled()&&((t=e.typed_constant_value)==null?void 0:t.valueType)===__dcg_shared_module_exports__['ua']&&__dcg_shared_module_exports__['ea'](xne((o=e.typed_constant_value)==null?void 0:o.value)):!1}function lx(r){return!!(r.formula&&r.formula.is_graphable)}function YH(r){return!(!Am(r)||!Gne(r)||!Fne(r))}function XH(r){var a,s,l;let e=r.formula;if(!e)return!1;if(e.warning){let c=(a=r.formula.typed_constant_value)==null?void 0:a.value;if(c===void 0||Number.isNaN(c))return!1}let o=!(e.operator==="="&&r.controller.isThreeDMode()&&(e.assignment==="x"||e.assignment==="y"||e.assignment==="z"||e.assignment==="r"))&&e.is_evaluable&&((s=e.typed_constant_value)==null?void 0:s.value)!==void 0,i=__dcg_shared_module_exports__['qb']((l=e.typed_constant_value)==null?void 0:l.valueType),n=vne(r)&&Nd(r);return o||n||i}function Ac(r){var a,s,l;let e=(a=r.formula)==null?void 0:a.recursion;if(!e||e.type==="iterative"||!e.recursiveStructure)return[];if(e.recursionGroup.length>1)return[];let{maxRecursiveCallOffsets:t,parameterSymbols:o,baseCaseInfo:i}=e.recursiveStructure,n=[];for(let c in t){if(((s=o[c])==null?void 0:s.length)!==1)continue;let p=i[c];if(p&&Math.abs(p.min)>AP)continue;let h=t[c],g,m;p?(g=p.min+h-1,m=p.min+p.consecutiveCount):(g=h,m=1);for(let b=m;b<=g;b++)if(!((l=p==null?void 0:p.additional)!=null&&l.includes(b))&&(n.push(`${__dcg_shared_module_exports__['ia'](c)}\\left(${b}\\right)`),n.length>El))return[]}return n}function JH(r){let e=r.formula.stats_results;if(!(!e||!isFinite(e.min)))return{min:e.min,q1:e.q1,median:e.median,q3:e.q3,max:e.max}}function Qa(r){let e=r.latex||"",t=r.label||"";return(e+t).split(" ").join("")===""}function eo(r,e={isReverseDrag:!1}){let t=r.dragMode===__dcg_shared_module_exports__['hd'].AUTO&&r.formula.default_drag_mode!==void 0?r.formula.default_drag_mode:r.dragMode;return r.controller.isThreeDMode()&&(t=__dcg_shared_module_exports__['hd'].NONE),r.dragMode===__dcg_shared_module_exports__['hd'].AUTO&&!e.isReverseDrag&&$o(r)&&(t=__dcg_shared_module_exports__['hd'].NONE),__dcg_shared_module_exports__['id'](t,r.formula.move_strategy)}function wne(r){let e=eo(r);r.interactiveLabel&&e!==__dcg_shared_module_exports__['hd'].NONE&&cx(r,!1)}function gm(r){let e=r.formula;return e?e.is_single_identifier?[]:e.variables.map(t=>__dcg_shared_module_exports__['ia'](t)):[]}function zH(r,e){r.formula=e,r.error=e.error,r.unresolved=!1,r.expressionTooComplex=!1,r.recursiveDepthPlottingError=!1,r.nanBlame=__dcg_shared_module_exports__['ud'].None,e.is_slider?(!r.sliderExists||r.resetSliderAnimationTargetValue)&&(r.sliderAnimationTargetValue=Za(r),r.sliderDragging=!1,r.sliderExists=!0):r.sliderExists=!1,r.resetSliderAnimationTargetValue=!1;let t={};e.is_regression&&(t=e.regression.parameters,r.residualVariable=e.regression.residualVariable,r.controller.areLogModeRegressionsForced()&&(r.isLogModeRegression=!0)),__dcg_shared_module_exports__['s'](r.regressionParameters,t)||(r.regressionParameters=t)}function Xn(r){var e,t;return r.type==="expression"&&(((e=r.formula.typed_constant_value)==null?void 0:e.valueType)===__dcg_shared_module_exports__['Xa']||((t=r.formula.typed_constant_value)==null?void 0:t.valueType)===__dcg_shared_module_exports__['Ya'])}function ZH(r){var t,o,i,n;if(!Xn(r)||((t=r.formula.typed_constant_value)==null?void 0:t.valueType)===__dcg_shared_module_exports__['Ya']||((o=r.formula.typed_constant_value)==null?void 0:o.valueType)===__dcg_shared_module_exports__['Xa']&&((i=r.formula.typed_constant_value)==null?void 0:i.value[0])>=vm&&((n=r.formula.typed_constant_value)==null?void 0:n.value[0])<=wm)return!1;let e=__dcg_shared_module_exports__['fd'](__dcg_shared_module_exports__['Je'](r.latex));return!!(e&&e._dependencies&&e._dependencies.length===1)}function ax(r){var e;return!!r.hidden||!!((e=tn(r))!=null&&e.hidden)}function Xy(r){return!Xn(r)||ax(r)?!1:r.formula.typed_constant_value.valueType===__dcg_shared_module_exports__['Xa']?r.formula.typed_constant_value.value[1]>0:r.formula.typed_constant_value.valueType===__dcg_shared_module_exports__['Ya']?r.formula.typed_constant_value.value.some(e=>e[1]>0):!1}function Sne(r){if(r.shouldGraph=!$o(r),r.folderId===__dcg_shared_module_exports__['je']){let e=r.controller.getExpressionIdForIdentifier(r.controller.getHoveredOrFocusedTokenIdentifier())===r.id,t=r.controller.isItemSelected(r.id);(e||t||r.controller.getGhostMode())&&(r.shouldGraph=!0)}}function $o(r){var t;if(!r)return!1;if(r.hidden)return!0;if((t=r==null?void 0:r.formula)!=null&&t.expression_type&&Cm(r))return!0;let e=tn(r);return!!(e&&e.hidden)}function Tne(r){let e=r.formula&&r.formula.raw_slider_latex;if(!r.sliderExists||r.latex!==e){r.cachedDisplayLatex={storedLatex:r.latex,valueLatex:r.latex};return}let{latex:t}=r;if(r.cachedDisplayLatex.storedLatex!==t){r.cachedDisplayLatex={storedLatex:r.latex,valueLatex:r.latex};return}let o=nD(r);if(isFinite(o)){let i=r.controller.getFocusLocation();i&&i.type==="expression"&&i.id===r.id||(r.cachedDisplayLatex.valueLatex=Ic(r.latex,o))}}function vD(r){return r.cachedDisplayLatex.valueLatex}function QH(r,e){return r.formula.viz_valids?!!r.formula.viz_valids[e]:!1}function Lc(r,e){return r.vizProps[e]}function e8(r,e,t){r.vizProps={...r.vizProps,[e]:t}}function Sm(r,e){if(e.type==="inert")r.disableGraphInteractions=e.disableGraphInteractions,e.disableGraphInteractions&&(r.dragMode=__dcg_shared_module_exports__['hd'].NONE,r.clickableInfo={...r.clickableInfo,enabled:!1},r.editableLabelMode=__dcg_shared_module_exports__['me'].None,r.interactiveLabel=!1);else if(e.type==="drag-mode"){let t=e.dragMode;r.dragMode=t,t!==__dcg_shared_module_exports__['hd'].NONE&&(r.disableGraphInteractions=!1),r.movablePointSize!==r.pointSize&&(t===__dcg_shared_module_exports__['hd'].NONE?r.pointSize=r.movablePointSize:r.movablePointSize=r.pointSize)}else e.type==="clickable"?(r.clickableInfo=e.clickableInfo,e.clickableInfo.enabled&&(r.disableGraphInteractions=!1)):e.type==="editable-label"?(r.editableLabelMode=e.editable,e.editable!==__dcg_shared_module_exports__['me'].None&&(r.disableGraphInteractions=!1)):e.type==="interactive-label"&&(r.interactiveLabel=e.interactive,e.interactive&&(r.disableGraphInteractions=!1))}function t8(r,e,t){Sm(r,{type:"clickable",clickableInfo:{...r.clickableInfo,[e]:t}})}function OT(r,e){Sm(r,{type:"clickable",clickableInfo:{...r.clickableInfo,latex:e}})}function Ei(r){var e;return!!(r.clickableInfo.enabled&&ix(r)&&((e=r.formula.click_handler)==null?void 0:e.status)==="maybe-valid")}function Tm(r){return!!(r&&r.type==="expression"&&Ei(r))}function r8(r){return!!r.__workerNeedsDotplotXMode}function zT(r,e){var t;if(!e)throw new Error("Programming Error in test. Pass domain variable");return(t=r.formula.domains)==null?void 0:t.find(o=>o.variable===e)}function o8(r,e){if(!r.formula)return NaN;if(Mm(r)&&isFinite(r.__workerSampledDomainMin))return r.__workerSampledDomainMin;let t=zT(r,e),o=t==null?void 0:t.minNumber;return o!==void 0&&isFinite(o)?o:NaN}function i8(r,e){if(!r.formula)return NaN;if(Mm(r)&&isFinite(r.__workerSampledDomainMax))return r.__workerSampledDomainMax;let t=zT(r,e),o=t==null?void 0:t.maxNumber;return o!==void 0&&isFinite(o)?o:NaN}function n8(r,e){let t=zT(r,e);return t?t.minValid:!1}function a8(r,e){let t=zT(r,e);return t?t.maxValid:!1}function Jy(r,e){let t=r.cachedViewState;if((!e.stripDefaults||r.parametricDomain.min!==""||r.parametricDomain.max!=="")&&(t={...t,domain:{min:r.parametricDomain.min===""?"0":r.parametricDomain.min,max:r.parametricDomain.max===""?"1":r.parametricDomain.max}}),e.stripDefaults)return __dcg_shared_module_exports__['we'](t,{is3d:r.controller.is3dProduct()});if(t.points===void 0||t.lines===void 0||t.fill===void 0){let o=__dcg_shared_module_exports__['Uc'](t);return o.points===void 0&&delete o.points,o.lines===void 0&&delete o.lines,o.fill===void 0&&delete o.fill,o}return t}function kne(r){let e=r.cachedViewState;e&&__dcg_shared_module_exports__['ye'](e,r)&&__dcg_shared_module_exports__['oe'].every(t=>e[t]===r[t])||(r.cachedViewState={...__dcg_shared_module_exports__['B'](r,__dcg_shared_module_exports__['oe']),...__dcg_shared_module_exports__['xe'](r)})}function s8(r,e){e&&vu(r),r.draggingOnGraphpaper=e}function Ene(r){let e=r.memoizedUndoRedoStateParams,t=r.cachedViewState,o=r.preTransientState;if(r.cachedUndoRedoFullState=t,e&&e.viewState===t&&e.preTransientState===o)return;r.memoizedUndoRedoStateParams={viewState:t,preTransientState:o};let i;o?i={...t,latex:o.latex,slider:{...t.slider,...o.slider}}:i={...t},delete i.regressionParameters,delete i.residualVariable,r.cachedUndoRedoDiffState=i}function RT(r,e){let t=__dcg_shared_module_exports__['Uc'](__dcg_shared_module_exports__['ve'](r,{is3d:e.is3dProduct(),defaultLogModeRegressions:e.areLogModeRegressionsDefault()})),{color:o}=t;return(!o||!Ug(o))&&(o=e.getNextColor()),{...t,...hl(e),labelDropdownOpen:!1,formula:{error:void 0,operator:"=",variables:[]},error:void 0,unresolved:!1,expressionTooComplex:!1,color:o,pointStyle:t.pointStyle,lineStyle:t.lineStyle,arrowMode:t.arrowMode,displayEvaluationAsFraction:t.displayEvaluationAsFraction,shouldGraph:void 0,sliderDragging:void 0,sliderAnimationTargetValue:void 0,resetSliderAnimationTargetValue:!1,sliderLastTickTime:void 0,draggingOnGraphpaper:!1,cachedUndoRedoDiffState:void 0,cachedUndoRedoFullState:void 0,cachedParsableState:void 0,cachedViewState:void 0,cachedDisplayLatex:{storedLatex:"",valueLatex:""}}}function Ine(r){let e=tn(r),t=!!(e&&e.hidden),o=r.cachedViewState,i=r.index,n=r.showLabel&&!t,a=r.showAngleLabel,s=r.shouldGraph,l=r.memoizedParsableStateParams;if(l&&l.viewState===o&&l.index===i&&l.showLabel===n&&l.showAngleLabel===a&&l.shouldGraph===s)return;r.memoizedParsableStateParams={viewState:o,index:i,showLabel:n,showAngleLabel:a,shouldGraph:s};let c=__dcg_shared_module_exports__['ze'](o);c.moduleID=Kg(r),c.index=i,c.showLabel=n,c.showAngleLabel=a,c.shouldGraph=s,c.isInConstructionsFolder=r.folderId===__dcg_shared_module_exports__['je'],r.cachedParsableState=c}function FT(r,e){e(r.latex,"latex"),e(r.clickableInfo.latex,"clickableInfoLatex"),e(r.lineWidth,"lineWidth"),e(r.fillOpacity,"fillOpacity"),e(r.surfaceOpacity,"surfaceOpacity"),e(r.lineOpacity,"lineOpacity"),e(r.pointOpacity,"pointOpacity"),e(r.pointSize,"pointSize"),e(r.movablePointSize,"movablePointSize"),e(r.labelSize,"labelSize"),e(r.labelAngle,"labelAngle"),e(r.colorLatex,"colorLatex"),_m(r)&&(e(r.parametricDomain.min,"parametricDomainMin"),e(r.parametricDomain.max,"parametricDomainMax")),(P8(r)||L8(r))&&(e(r.parametricDomain3Du.min,"parametricDomain3DuMin"),e(r.parametricDomain3Du.max,"parametricDomain3DuMax"),e(r.parametricDomain3Dv.min,"parametricDomain3DvMin"),e(r.parametricDomain3Dv.max,"parametricDomain3DvMax")),(Mm(r)||YT(r))&&(e(r.polarDomain.min,"polarDomainMin"),e(r.polarDomain.max,"polarDomainMax")),(AD(r)||Lne(r))&&e(r.resolution,"resolution"),Am(r)&&(r.cdf.bound1&&e(r.cdf.bound1,"cdfBound1"),r.cdf.bound2&&e(r.cdf.bound2,"cdfBound2"),r.cdf.p&&e(r.cdf.p,"cdfP")),r.sliderExists&&(e(r.slider.min,"sliderMin"),e(r.slider.max,"sliderMax"),e(r.slider.step,"sliderStep")),r.residualVariable&&e(r.residualVariable,"residualVariable"),on(r)&&(r.inference.significance.hypothesis&&e(r.inference.significance.hypothesis,"inferenceHypothesis"),r.inference.confidence.confidenceLevel&&e(r.inference.confidence.confidenceLevel,"inferenceConfidenceLevel"))}function Gd(r){return r.formula&&r.formula.assignment}function wD(r){return r.formula&&r.formula.shader}function uo(r){let e=r.cachedAssignmentOrFunctionName;if(e&&e.latex===r.latex)return e.result;let t=Qb(r.latex),o=t?{latex:t,identifier:__dcg_shared_module_exports__['ja'](t)}:void 0;return r.cachedAssignmentOrFunctionName={latex:r.latex,result:o},o}function km(r){var t,o;let e=(o=(t=r.formula)==null?void 0:t.typed_constant_value)==null?void 0:o.valueType;return e==null?!1:__dcg_shared_module_exports__['qb'](e)}function qT(r){var o;let e=(o=uo(r))==null?void 0:o.latex,t=e==null?void 0:e.match(/^(\\token\{\d+\})$/);if(t)return t[1]}function l8(r){var o,i;let e=(i=(o=r.formula)==null?void 0:o.typed_constant_value)==null?void 0:i.valueType,t=!1;if(e&&__dcg_shared_module_exports__['qb'](e)&&(t=!0,e=__dcg_shared_module_exports__['rb'](e)),e==null||!__dcg_shared_module_exports__['tb'](e))return"U";switch(e){case __dcg_shared_module_exports__['va']:return t?"P":"p";case __dcg_shared_module_exports__['Ea']:case __dcg_shared_module_exports__['Ka']:case __dcg_shared_module_exports__['Ia']:return t?"L":"l";case __dcg_shared_module_exports__['Sa']:return t?"V":"v";case __dcg_shared_module_exports__['Ha']:case __dcg_shared_module_exports__['Ga']:return t?"C":"c";case __dcg_shared_module_exports__['Ma']:case __dcg_shared_module_exports__['Oa']:return t?"A":"a";case __dcg_shared_module_exports__['Da']:return"P";case __dcg_shared_module_exports__['Qa']:return"T";default:return e}}function Cne(r){var t,o;let e=(o=(t=r.formula)==null?void 0:t.typed_constant_value)==null?void 0:o.valueType;if(e==null||(__dcg_shared_module_exports__['qb'](e)&&(e=__dcg_shared_module_exports__['rb'](e)),!__dcg_shared_module_exports__['tb'](e)))return"unknown";switch(e){case __dcg_shared_module_exports__['va']:return"point";case __dcg_shared_module_exports__['Ea']:return"segment";case __dcg_shared_module_exports__['Ka']:return"ray";case __dcg_shared_module_exports__['Ia']:return"line";case __dcg_shared_module_exports__['Sa']:return"vector";case __dcg_shared_module_exports__['Ha']:return"arc";case __dcg_shared_module_exports__['Ga']:return"circle";case __dcg_shared_module_exports__['Ma']:return"angle";case __dcg_shared_module_exports__['Oa']:return"directedangle";case __dcg_shared_module_exports__['Da']:return"polygon";case __dcg_shared_module_exports__['Qa']:return"transformation";default:return e}}function SD(r){var t,o;let e=(o=(t=r.formula)==null?void 0:t.typed_constant_value)==null?void 0:o.valueType;if(e==null||(__dcg_shared_module_exports__['qb'](e)&&(e=__dcg_shared_module_exports__['rb'](e)),!__dcg_shared_module_exports__['tb'](e)))return"unknown";switch(e){case __dcg_shared_module_exports__['va']:return"point";case __dcg_shared_module_exports__['Ea']:case __dcg_shared_module_exports__['Ka']:case __dcg_shared_module_exports__['Ia']:case __dcg_shared_module_exports__['Sa']:return"line";case __dcg_shared_module_exports__['Ha']:return"arc";case __dcg_shared_module_exports__['Ga']:return"circle";case __dcg_shared_module_exports__['Ma']:return"angle";case __dcg_shared_module_exports__['Oa']:return"directedangle";case __dcg_shared_module_exports__['Da']:return"polygon";case __dcg_shared_module_exports__['Qa']:return"transformation";default:return e}}function c8(r){return r.indexOf("\\token{")!==-1}function d8(r){var o,i,n,a;let e=(i=(o=r.formula.geometry)==null?void 0:o.call)==null?void 0:i.symbol,t=(a=(n=r.formula)==null?void 0:n.typed_constant_value)==null?void 0:a.valueType;return!e||e==="apply"||__dcg_shared_module_exports__['Mc'](e)&&t!==void 0&&!__dcg_shared_module_exports__['wb'](t,__dcg_shared_module_exports__['Qa'])?Cne(r):e==="segments"?"segment":e}function _ne(r){return!!(r.sliderExists&&(r.slider.isPlaying||r.sliderDragging)||r.draggingOnGraphpaper)}function p8(r){return!!(r.sliderExists&&r.sliderDragging||r.draggingOnGraphpaper)}function TD(r){_ne(r)?r.preTransientState||(r.preTransientState={latex:r.latex,slider:{min:r.slider.min,max:r.slider.max,playDirection:r.slider.playDirection}}):delete r.preTransientState,(!r.sliderExists||!r.slider.isPlaying)&&(r.sliderLastTickTime=void 0),gl(r),Sne(r),wne(r),kne(r),Ene(r),Ine(r),Tne(r)}var Mne={...__dcg_shared_module_exports__['ne'],extendTo3D:!1,id:!1,type:!1,...__dcg_shared_module_exports__['ce'](__dcg_shared_module_exports__['qe'])};function qH(r,e){__dcg_shared_module_exports__['$d']({from:e,to:r,props:Mne}),r.resetSliderAnimationTargetValue=!0,r.sliderAnimationTargetValue=void 0}function sx(r,e){r.slider={...r.slider,...e}}function Ii(r,e){let t=Bg(e);if(isFinite(t)){let o=__dcg_shared_module_exports__['Gc']({target:t,step:Is(r),hardMin:r.slider.hardMin?Yn(r):void 0,hardMax:r.slider.hardMax?Ja(r):void 0});o.min||sx(r,{hardMin:!1,min:"-10"}),o.max||sx(r,{hardMax:!1,max:"10"}),o.step||sx(r,{step:""})}r.latex=e}function u8(r,e){sx(r,{loopMode:e,playDirection:1}),e===__dcg_shared_module_exports__['Zd'].PLAY_INDEFINITELY&&sx(r,{hardMin:!1,hardMax:!1,min:"",max:""}),r.sliderAnimationTargetValue=Yn(r)}function Nd(r){var e;return((e=r.formula.typed_constant_value)==null?void 0:e.valueType)===__dcg_shared_module_exports__['Va']?!1:r.displayEvaluationAsFraction}function h8(r,e){r.displayEvaluationAsFraction=e}function Tl(r,e){r.label=e}function Vd(r,e){Fd(r)?r.showAngleLabel=e:r.showLabel=e}function g8(r,e){r.description=e}function wn(r,e,t){switch(t){case"theta":r.polarDomain={...r.polarDomain,min:e};break;case"t":r.parametricDomain={...r.parametricDomain,min:e};break;case"u":r.parametricDomain3Du={...r.parametricDomain3Du,min:e};break;case"v":r.parametricDomain3Dv={...r.parametricDomain3Dv,min:e};break;case"r":r.parametricDomain3Dr={...r.parametricDomain3Dr,min:e};break;case"phi":r.parametricDomain3Dphi={...r.parametricDomain3Dphi,min:e};break;default:return t}}function Sn(r,e,t){switch(t){case"theta":r.polarDomain={...r.polarDomain,max:e};break;case"t":r.parametricDomain={...r.parametricDomain,max:e};break;case"u":r.parametricDomain3Du={...r.parametricDomain3Du,max:e};break;case"v":r.parametricDomain3Dv={...r.parametricDomain3Dv,max:e};break;case"r":r.parametricDomain3Dr={...r.parametricDomain3Dr,max:e};break;case"phi":r.parametricDomain3Dphi={...r.parametricDomain3Dphi,max:e};break;default:return t}}function kD(r,e){r.isLogModeRegression=e}function HT(r,e){Ug(e)&&(r.color=e,r.colorLatex="")}function ED(r,e){r.fill=e}function Zy(r,e){r.fillOpacity!==e&&(r.fillOpacity=e)}function Qy(r,e){r.surfaceOpacity!==e&&(r.surfaceOpacity=e)}function mm(r,e){r.lineOpacity!==e&&(r.lineOpacity=e)}function ex(r,e){r.pointOpacity!==e&&(r.pointOpacity=e)}function tx(r,e){r.pointSize===e&&r.movablePointSize===e||(r.pointSize=e,r.movablePointSize=e)}function fm(r,e){r.lineWidth!==e&&(r.lineWidth=e)}function GT(r,e){r.resolution!==e&&(r.resolution=e)}function rx(r,e){r.colorLatex!==e&&(r.colorLatex=e)}function m8(r,e){r.labelDropdownOpen=e}function Em(r,e){Sm(r,{type:"drag-mode",dragMode:e})}function ID(r,e){r.points=e}function CD(r,e){r.pointStyle!==e&&(r.pointStyle=e)}function _D(r,e){r.lines=e}function f8(r,e){r.extendTo3D=e}function KT(r,e){r.lineStyle!==e&&(r.lineStyle=e)}function b8(r,e){r.arrowMode=e===Ane(r)?__dcg_shared_module_exports__['Wd'].DEFAULT:e}function Ane(r){return __dcg_shared_module_exports__['Wd'].NONE}function ox(r,e){r.labelSize=e}function NT(r,e){r.labelAngle=e}function MD(r,e){r.labelOrientation=e}function y8(r,e){r.suppressTextOutline=e}function x8(r,e){r.pointOutline=e}function cx(r,e){Sm(r,{type:"interactive-label",interactive:e})}function WT(r,e){Sm(r,{type:"editable-label",editable:e})}function v8(r){return r.editableLabelMode}function Im(r){let{editableLabelMode:e}=r;return e===__dcg_shared_module_exports__['me'].Math||e===__dcg_shared_module_exports__['me'].Text}function w8(r,e){r.strictIntersection=e}function S8(r){return!!(eo(r)!==__dcg_shared_module_exports__['hd'].NONE&&$o(r))}function T8(r,e){r.hidden=e,!e&&Cm(r)&&(r.lines=r.points=r.fill=void 0)}function Cm(r){if(Il(r)&&!r.controller.isThreeDMode())return!1;let{points:e,lines:t,fill:o}=r,i=__dcg_shared_module_exports__['yd'](r.formula.expression_type,{points:e,lines:t,fill:o},n=>{Lr("getReconciledExpressionProps [Chrome Switch Bug]",{metaData:{method:"areAllVisibilityPropsOff",type:n}})});return!i.points&&!i.lines&&!i.fill}function Bd(r){return r.formula.map_type!==void 0?!1:_m(r)||Mm(r)||YT(r)}function Pc(r){return r.formula.map_type!==void 0?!1:P8(r)||L8(r)||LD(r)}function k8(r,e){switch(e){case"theta":return r.polarDomain.min;case"t":return r.parametricDomain.min;case"u":return r.parametricDomain3Du.min;case"v":return r.parametricDomain3Dv.min;case"r":return r.parametricDomain3Dr.min;case"phi":return r.parametricDomain3Dphi.min;default:return e}}function E8(r,e){switch(e){case"theta":return r.polarDomain.max;case"t":return r.parametricDomain.max;case"u":return r.parametricDomain3Du.max;case"v":return r.parametricDomain3Dv.max;case"r":return r.parametricDomain3Dr.max;case"phi":return r.parametricDomain3Dphi.max;default:return e}}function _c(r){let e=r.formula.typed_constant_value;return(e==null?void 0:e.valueType)===__dcg_shared_module_exports__['wa']&&Object.keys(e.value.updateRules).length>0}function I8(r){return!!r.sliderExists}function bm(r){return r.formula.expression_type===__dcg_shared_module_exports__['xd'].POLYGON}function Il(r){return!!r.formula.is_inequality}function $T(r){return!!r.formula.is_regression}function _m(r){return r.formula.expression_type===__dcg_shared_module_exports__['xd'].PARAMETRIC||r.formula.expression_type===__dcg_shared_module_exports__['xd'].CURVE3D_xyz_t&&!One(r)&&!Rne(r)}function Iu(r){return r.formula.expression_type===__dcg_shared_module_exports__['xd'].POINT3D}function Lne(r){return r.formula.expression_type===__dcg_shared_module_exports__['xd'].CURVE3D_xyz_t||r.formula.expression_type===__dcg_shared_module_exports__['xd'].SLICE||r.formula.expression_type===__dcg_shared_module_exports__['xd'].SLICE_r\u03B8z_at_z||r.formula.expression_type===__dcg_shared_module_exports__['xd'].SLICE_zr\u03B8_at_r||r.formula.expression_type===__dcg_shared_module_exports__['xd'].SLICE_zr\u03B8_at_\u03B8||r.formula.expression_type===__dcg_shared_module_exports__['xd'].SLICE_zr\u03B8_at_xyz||r.formula.expression_type===__dcg_shared_module_exports__['xd'].SLICE_r\u03B8\u03C6_at_\u03B8||r.formula.expression_type===__dcg_shared_module_exports__['xd'].SLICE_r\u03B8\u03C6_at_\u03C6||r.formula.expression_type===__dcg_shared_module_exports__['xd'].SLICE_r\u03B8\u03C6_at_xyz||r.formula.expression_type===__dcg_shared_module_exports__['xd'].SLICE_xyz_uv}function C8(r){return r.formula.expression_type===__dcg_shared_module_exports__['xd'].SLICE_zr\u03B8_at_r||r.formula.expression_type===__dcg_shared_module_exports__['xd'].SLICE_r\u03B8\u03C6_at_\u03B8}function _8(r){return r.formula.expression_type===__dcg_shared_module_exports__['xd'].SLICE_zr\u03B8_at_\u03B8||r.formula.expression_type===__dcg_shared_module_exports__['xd'].SLICE_r\u03B8\u03C6_at_\u03C6}function AD(r){switch(r.formula.expression_type){case __dcg_shared_module_exports__['xd'].SURFACE_xyz_uv:case __dcg_shared_module_exports__['xd'].SURFACE_z_r\u03B8:case __dcg_shared_module_exports__['xd'].SURFACE_r_\u03B8z:case __dcg_shared_module_exports__['xd'].SURFACE_r_\u03B8z_AMBIGUOUS:case __dcg_shared_module_exports__['xd'].SURFACE_r_\u03B8\u03C6:case __dcg_shared_module_exports__['xd'].SURFACE:case __dcg_shared_module_exports__['xd'].SURFACE_AMBIGUOUS:case __dcg_shared_module_exports__['xd'].SURFACE_CONSTANT_AMBIGUOUS:case __dcg_shared_module_exports__['xd'].IMPLICIT_SURFACE:case __dcg_shared_module_exports__['xd'].IMPLICIT_SURFACE_AMBIGUOUS:case __dcg_shared_module_exports__['xd'].TRIANGLE3D:case __dcg_shared_module_exports__['xd'].SPHERE3D:return!0;default:return!1}}function jT(r){return r.formula.expression_type===__dcg_shared_module_exports__['xd'].TRIANGLE3D}function M8(r){return r.formula.expression_type===__dcg_shared_module_exports__['xd'].SPHERE3D}function A8(r){return r.formula.expression_type===__dcg_shared_module_exports__['xd'].IMPLICIT_SURFACE||r.formula.expression_type===__dcg_shared_module_exports__['xd'].IMPLICIT_SURFACE_AMBIGUOUS}function dx(r){return Pne(r)||Dne(r)}function Pne(r){return r.formula.expression_type===__dcg_shared_module_exports__['xd'].X_OR_Y||r.formula.expression_type===__dcg_shared_module_exports__['xd'].IMPLICIT||r.formula.expression_type===__dcg_shared_module_exports__['xd'].SURFACE_AMBIGUOUS||r.formula.expression_type===__dcg_shared_module_exports__['xd'].SURFACE_CONSTANT_AMBIGUOUS||r.formula.expression_type===__dcg_shared_module_exports__['xd'].IMPLICIT_SURFACE_AMBIGUOUS}function Dne(r){return!r.formula.is_inequality&&(r.formula.expression_type===__dcg_shared_module_exports__['xd'].POLAR||r.formula.expression_type===__dcg_shared_module_exports__['xd'].SURFACE_r_\u03B8z_AMBIGUOUS)}function Mm(r){return r.formula.expression_type===__dcg_shared_module_exports__['xd'].POLAR}function YT(r){return __dcg_shared_module_exports__['Cd'](r.formula.expression_type)}function LD(r){return __dcg_shared_module_exports__['Bd'](r.formula.expression_type)}function L8(r){return __dcg_shared_module_exports__['Ad'](r.formula.expression_type)}function P8(r){return r.formula.expression_type===__dcg_shared_module_exports__['xd'].SURFACE_xyz_uv||r.formula.expression_type===__dcg_shared_module_exports__['xd'].SLICE_xyz_uv}function Fd(r){let e=r.formula.typed_constant_value;if(!e)return!1;let t=e.valueType;return t===__dcg_shared_module_exports__['Ma']||t===__dcg_shared_module_exports__['Na']||t===__dcg_shared_module_exports__['Oa']||t===__dcg_shared_module_exports__['Pa']}function Tn(r){let e=Fd(r);return e&&r.showAngleLabel||!e&&r.showLabel}function ym(r){if(ws(r))return!0;let e=r.formula.typed_constant_value;if(!e)return!1;let t=e.valueType;return t===__dcg_shared_module_exports__['Ea']||t===__dcg_shared_module_exports__['Fa']||t===__dcg_shared_module_exports__['Ma']||t===__dcg_shared_module_exports__['Na']||t===__dcg_shared_module_exports__['Oa']||t===__dcg_shared_module_exports__['Pa']}function One(r){return r.formula.expression_type===__dcg_shared_module_exports__['xd'].SEGMENT3D}function Rne(r){return r.formula.expression_type===__dcg_shared_module_exports__['xd'].VECTOR3D}function hi(r){return r.formula.expression_type===__dcg_shared_module_exports__['xd'].SINGLE_POINT}function Ud(r){return r.formula.expression_type===__dcg_shared_module_exports__['xd'].POINT_LIST}function ws(r){return r.formula.expression_type===__dcg_shared_module_exports__['xd'].POINT_LIST||r.formula.expression_type===__dcg_shared_module_exports__['xd'].SINGLE_POINT}function zd(r){return r.formula.expression_type===__dcg_shared_module_exports__['xd'].POINT3D_LIST}function qd(r){let e=Wd(r);return!!(e&&e.type==="visualization"&&e.symbol==="boxplot")}function Dc(r){let e=Wd(r);return!!(e&&e.type==="visualization"&&e.symbol==="dotplot")}function Cu(r){let e=Wd(r);return!!(e&&e.type==="visualization"&&e.symbol==="histogram")}function XT(r){return qd(r)||Dc(r)||Cu(r)}function JT(r){return r.formula.expression_type===__dcg_shared_module_exports__['xd'].STATS}function _u(r){let e=Wd(r);return!!(e&&e.type==="distribution")}function px(r){var t;let{formula:e}=r;return((t=e==null?void 0:e.top_level_function_spec)==null?void 0:t.type)!=="distribution"?!1:e.top_level_function_spec.discrete}function PD(r){var e;if(((e=r.formula.top_level_function_spec)==null?void 0:e.type)==="inference")return r.formula.top_level_function_spec.symbol}function on(r){return!!PD(r)&&!Jn(r)}function Jn(r){var t;let e=(t=r.formula.typed_constant_value)==null?void 0:t.valueType;return e===void 0?!1:[__dcg_shared_module_exports__['hb'],__dcg_shared_module_exports__['ib']].includes(e)}function Cl(r){var e;return((e=r.formula.typed_constant_value)==null?void 0:e.valueType)===__dcg_shared_module_exports__['Za']}function Hd(r){var e;return((e=r.formula.typed_constant_value)==null?void 0:e.valueType)===__dcg_shared_module_exports__['fb']}function Kd(r){var e;return((e=r.formula.typed_constant_value)==null?void 0:e.valueType)===__dcg_shared_module_exports__['gb']}function Cs(r){var e,t;return((e=r.formula.typed_constant_value)==null?void 0:e.valueType)===__dcg_shared_module_exports__['gb']||((t=r.formula.typed_constant_value)==null?void 0:t.valueType)===__dcg_shared_module_exports__['fb']}function D8(r){var t,o;switch((o=(t=r.formula)==null?void 0:t.typed_constant_value)==null?void 0:o.valueType){case __dcg_shared_module_exports__['hb']:return"z";case __dcg_shared_module_exports__['ib']:return"t";default:return}}function Wd(r){if(r.controller.areDistributionsEnabled()&&r.latex)return r.formula.top_level_function_spec}function DD(r){return Mu(r)&&_u(r)}function Mu(r){return!!r.formula.expression_type}function ux(r){return!!r.formula.is_concrete_list}function Am(r){return!DD(r)||ux(r)?!1:r.cdf.show}function O8(r){return r.cdf.bound1}function R8(r){return r.cdf.bound2}function ZT(r){return r.cdf.tails}function F8(r,e){r.cdf={...r.cdf,...e}}function HH(r,e){r.cdf={...r.cdf,bound1:e}}function KH(r,e){r.cdf={...r.cdf,bound2:e}}function WH(r,e){r.cdf={...r.cdf,p:e}}function Fne(r){return!!r.formula&&r.formula.cdf_bound1_valid!==!1}function Gne(r){return!!r.formula&&r.formula.cdf_bound2_valid!==!1}function OD(r){return!!r.formula&&r.formula.fill_opacity_valid!==!1}function RD(r){return!!r.formula&&r.formula.surface_opacity_valid!==!1}function G8(r){return!!r.formula&&r.formula.line_opacity_valid!==!1}function N8(r){return!!r.formula&&r.formula.point_opacity_valid!==!1}function FD(r){return!!r.formula&&r.formula.label_size_valid!==!1}function GD(r){return!!r.formula&&r.formula.label_angle_valid!==!1}function V8(r){return!!r.formula&&r.formula.movable_point_size_valid!==!1}function QT(r){return!!r.formula&&r.formula.point_size_valid!==!1}function ek(r){return!!r.formula&&r.formula.line_width_valid!==!1}function B8(r){return!!r.formula&&r.formula.resolution_valid!==!1}function U0(r){return!!r.formula&&r.formula.color_latex_valid!==!1}function z0(r){return r.formula&&r.formula.color_latex_value}function U8(r){return r.formula&&r.formula.label_angle_value}function ix(r){if(!r||!__dcg_shared_module_exports__['zd'](r.formula.expression_type))return!1;let e=eo(r);return!(e&&e!==__dcg_shared_module_exports__['hd'].NONE)}function ND(r){r.showLabel=__dcg_shared_module_exports__['se'].showLabel,r.showAngleLabel=__dcg_shared_module_exports__['se'].showAngleLabel,r.label=__dcg_shared_module_exports__['se'].label,r.hidden=__dcg_shared_module_exports__['se'].hidden,r.dragMode=__dcg_shared_module_exports__['se'].dragMode,r.fill=__dcg_shared_module_exports__['se'].fill,r.points=__dcg_shared_module_exports__['se'].points,r.pointStyle=__dcg_shared_module_exports__['se'].pointStyle,r.lines=__dcg_shared_module_exports__['se'].lines,r.lineStyle=__dcg_shared_module_exports__['se'].lineStyle,r.slider=r.controller.is3dProduct()?__dcg_shared_module_exports__['ue']:__dcg_shared_module_exports__['te'],r.latex="",r.labelSize="",r.labelOrientation=__dcg_shared_module_exports__['Yd'].DEFAULT,r.displayEvaluationAsFraction=__dcg_shared_module_exports__['se'].displayEvaluationAsFraction,r.strictIntersection=__dcg_shared_module_exports__['se'].strictIntersection,r.suppressTextOutline=__dcg_shared_module_exports__['se'].suppressTextOutline,r.pointOutline=__dcg_shared_module_exports__['se'].pointOutline,r.interactiveLabel=__dcg_shared_module_exports__['se'].interactiveLabel,r.editableLabelMode=__dcg_shared_module_exports__['se'].editableLabelMode,__dcg_shared_module_exports__['ae'](__dcg_shared_module_exports__['qe'],r)}function tk(r){return!!r.formula.move_strategy}function VD(r,e){Sm(r,{type:"inert",disableGraphInteractions:e})}function z8(r){if((r==null?void 0:r.type)!=="expression")return;let e=r.formula.typed_constant_value;if(e)switch(e.valueType){case __dcg_shared_module_exports__['va']:return{x:__dcg_shared_module_exports__['zb'](e,"x"),y:__dcg_shared_module_exports__['zb'](e,"y")};case __dcg_shared_module_exports__['Va']:return{x:__dcg_shared_module_exports__['zb'](e,"real"),y:__dcg_shared_module_exports__['zb'](e,"imag")}}}function _i(r,e){var t;return r.type!=="expression"&&r.type!=="image"?"":((t=r.formula.computed_description)==null?void 0:t[e||0])||""}function q8(r,e){"significance"in e&&e.significance!==void 0?r.inference={...r.inference,...e,significance:{tails:"outer",hypothesis:"",show:!0,...r.inference.significance,...e.significance}}:"confidence"in e&&e.confidence!==void 0?r.inference={...r.inference,...e,confidence:{confidenceLevel:"",show:!0,...r.inference.confidence,...e.confidence}}:"chiSquare"in e&&e.chiSquare!==void 0?r.inference={...r.inference,...e,chiSquare:{showTable:!1,...r.inference.chiSquare,...e.chiSquare}}:r.inference={...r.inference,...e}}function hx(r){var e;if((e=r.formula)!=null&&e.is_evaluable)return r.formula.rgb_value}function Zn(r,e,t){let o=Intl.ListFormat;if(typeof o=="function")try{return new o(r,t).format(e)}catch(i){}return e.join(", ")}var Nne=/`[^`]*`/g,Vne=/^[\+\-]?[\d]*(\.\d+)?$/,Bne=r=>{if(r!=null){let e=r.match(/`/g);return(e!=null&&e.length||0)%2==0}return!0},Une=r=>{let e=[];if(r==null||r.length==0)return e;let t=0,o;for(;o=Nne.exec(r);){let n=r.slice(t,o.index);n.length>0&&e.push({from:t,to:o.index,type:"text",text:n}),t=o.index+o[0].length,e.push({from:o.index,to:t,type:"math",text:o[0].slice(1,-1)})}let i=r.slice(t);return i.length>0&&e.push({from:t,to:r.length,type:"text",text:i}),e},H8=vs.StaticMath(document.createElement("span"));function vr(r){let e="",t=[];Bne(r)?t=Une(r):t=[{from:0,to:r.length,type:"text",text:r}];for(let o of t)e+=o.type==="text"?o.text:ur(o.text);return e}function ur(r){let e="";return Vne.test(r)?(/^\+/.test(r)?(e="positive ",r=r.slice(1)):/^\-/.test(r)&&(e="negative ",r=r.slice(1)),e+=r.replace(/(\.)([0-9]+)/g,(t,o,i)=>o+i.split("").join(" ").trim())):(H8.latex(r),e=H8.mathspeak().trim()),e}function rk(r,e,t){let o=r.formula.typed_constant_value;if(__dcg_shared_module_exports__['ub'](o==null?void 0:o.valueType,__dcg_shared_module_exports__['Re'])){if(__dcg_shared_module_exports__['Jb'](o))return`${xl(__dcg_shared_module_exports__['pb'](o.valueType),e.getLanguage())}. ${e.s("shared-calculator-label-list-of-count-items-suffix",{count:o.value.length})}`;switch(o.valueType){case __dcg_shared_module_exports__['ua']:return ur(__dcg_shared_module_exports__['ha'](+o.value,t));case __dcg_shared_module_exports__['Va']:return ur(__dcg_shared_module_exports__['la'](o.value,t));case __dcg_shared_module_exports__['va']:return ur(__dcg_shared_module_exports__['ma'](o.value,t));case __dcg_shared_module_exports__['jb']:return ur(__dcg_shared_module_exports__['na'](o.value,t));case __dcg_shared_module_exports__['Ba']:return fl(e,r.formula.rgb_value);default:throw new Error(`Unexpected valueType ${o}`)}}}var ii=1;function Lm(r,e){let t=[],o=r.formula.geometry&&r.formula.geometry.call;if(!o||!o.parents)return[];for(let i of o.parents)if(i.type==="arbitrary-expression")t.push(void 0);else{let n=__dcg_shared_module_exports__['Lc'](i),a=e.getGeoTokenInfoFromIdentifier(n);t.push(a?e.getItemModel(a.calcId):void 0)}return t}function kn(r,e,t,o){return Object.values(t).some(i=>!i)?o:r.s(e,t)}function Oc(r,e={}){let t=r.formula.typed_constant_value.value,o=r.formula.typed_constant_value.valueType;return e.listIndex!==void 0&&__dcg_shared_module_exports__['qb'](o)&&(o=__dcg_shared_module_exports__['rb'](o),t=t[e.listIndex]),{value:t,valueType:o}}function ok(r,e,t){var E,S,k;let o=t.depth?t.depth:0,i=t.listIndex||0,n,a=[],s=(E=r.formula.geometry.call)==null?void 0:E.symbol,l=Lm(r,e),[c,p]=l,{value:h}=Oc(r,t),[g,m]=h,b=_i(r,i)||((S=t.poi)==null?void 0:S.ariaLabel),x=b!==void 0&&b!==""?b:r.label;if(r.hidden&&o>=ii&&typeof g=="number"&&typeof m=="number"){let T=Ea(e,g,m);return T?[T]:[]}switch(s){case"intersection":x?n=e.s("graphing-calculator-narration-geometry-intersection-with-assignment",{assignment:vr(x)}):n=e.s("graphing-calculator-narration-geometry-unlabeled-intersection",{index:r.id}),o<ii&&c!==void 0&&p!==void 0?a.push(kn(e,"graphing-calculator-narration-geometry-intersection-of-items",{intersectionDescription:n,item1:Yr(c,e,{includeDetails:!1,depth:o+1}),item2:Yr(p,e,{includeDetails:!1,depth:o+1})},n)):a.push(n);break;case"midpoint":x?n=e.s("graphing-calculator-narration-geometry-midpoint-with-assignment",{assignment:vr(x)}):n=e.s("graphing-calculator-narration-geometry-unlabeled-midpoint",{index:r.id}),o<ii&&c!==void 0?a.push(kn(e,"graphing-calculator-narration-geometry-midpoint-of-item",{midpointDescription:n,item:Yr(c,e,{includeDetails:!1,depth:o+1})},n)):a.push(n);break;case"glider":x?n=e.s("graphing-calculator-narration-geometry-glider-with-assignment",{assignment:vr(x)}):n=e.s("graphing-calculator-narration-geometry-unlabeled-glider",{index:r.id}),o<ii&&c!==void 0?a.push(kn(e,"graphing-calculator-narration-geometry-glider-on-item",{gliderDescription:n,item:Yr(c,e,{includeDetails:!1,depth:o+1})},n)):a.push(n);break;default:x?n=e.s("graphing-calculator-narration-geometry-point-with-assignment",{assignment:vr(x)}):n=e.s("graphing-calculator-narration-geometry-unlabeled-point",{index:r.id}),t.includeDetails&&typeof g=="number"&&typeof m=="number"?a.push(kn(e,"graphing-calculator-narration-item-at-coordinates",{itemDescription:n,coordinates:(k=Ea(e,g,m))!=null?k:""},n)):a.push(n)}return a}function K8(r,e,t){var b,x;let o=t.listIndex?t.listIndex:0,i=t.depth?t.depth:0,n=_i(r,o),a=n?e.s("graphing-calculator-narration-geometry-circle-with-assignment",{label:vr(n)}):e.s("graphing-calculator-narration-geometry-unlabeled-circle",{index:r.id}),s=[],l=Lm(r,e),[c]=l,{value:p}=Oc(r,t),h=p[1],g=e.get2dProjection(),m=g&&g.viewport;return i<ii&&c!==void 0&&Gi(c)&&!__dcg_shared_module_exports__['Mc']((x=(b=c.formula.geometry)==null?void 0:b.call)==null?void 0:x.symbol)&&typeof h=="number"&&m!==void 0?s.push(kn(e,"graphing-calculator-narration-geometry-circle-with-center-and-radius",{circleDescription:a,center:Yr(c,e,{includeDetails:!1,depth:i+1}),radius:ur(__dcg_shared_module_exports__['aa'](h,m.xmax-m.xmin).latex)},a)):s.push(a),s}function W8(r,e,t){let o=t.depth?t.depth:0,i=t.listIndex?t.listIndex:0,n=_i(r,i),a=n?e.s("graphing-calculator-narration-geometry-arc-with-assignment",{label:vr(n)}):e.s("graphing-calculator-narration-geometry-unlabeled-arc",{index:r.id}),s=[],l=Lm(r,e),[c,p,h]=l;return o<ii&&c!==void 0&&p!==void 0&&h!==void 0?s.push(kn(e,"graphing-calculator-narration-geometry-arc-through-points",{arcDescription:a,start:Yr(c,e,{includeDetails:!1,depth:o+1}),middle:Yr(p,e,{includeDetails:!1,depth:o+1}),end:Yr(h,e,{includeDetails:!1,depth:o+1})},a)):s.push(a),s}function $8(r,e,t){let o=t.depth?t.depth:0,i=t.listIndex?t.listIndex:0,n=_i(r,i),a=n?vr(n):void 0,{value:s}=Oc(r,t),l=s.length;if(t.polygonEdge!==void 0)if(t.polygonEdge>=0&&t.polygonEdge<s.length){let h=s[t.polygonEdge],g=s[(t.polygonEdge+1)%s.length];s=[h,g]}else return[e.s("shared-calculator-narration-item-unknown")];let c,p=[];if(l===3)c=a?e.s("graphing-calculator-narration-geometry-triangle-with-assignment",{label:a}):e.s("graphing-calculator-narration-geometry-unlabeled-triangle",{index:r.id});else if(l===4)c=a?e.s("graphing-calculator-narration-geometry-quadrilateral-with-assignment",{label:a}):e.s("graphing-calculator-narration-geometry-unlabeled-quadrilateral",{index:r.id});else if(l===5)c=a?e.s("graphing-calculator-narration-geometry-pentagon-with-assignment",{label:a}):e.s("graphing-calculator-narration-geometry-unlabeled-pentagon",{index:r.id});else if(l===6)c=a?e.s("graphing-calculator-narration-geometry-hexagon-with-assignment",{label:a}):e.s("graphing-calculator-narration-geometry-unlabeled-hexagon",{index:r.id});else if(l===7)c=a?e.s("graphing-calculator-narration-geometry-heptagon-with-assignment",{label:a}):e.s("graphing-calculator-narration-geometry-unlabeled-heptagon",{index:r.id});else if(l===8)c=a?e.s("graphing-calculator-narration-geometry-octagon-with-assignment",{label:a}):e.s("graphing-calculator-narration-geometry-unlabeled-octagon",{index:r.id});else if(l===9)c=a?e.s("graphing-calculator-narration-geometry-nonagon-with-assignment",{label:a}):e.s("graphing-calculator-narration-geometry-unlabeled-nonagon",{index:r.id});else if(l===10)c=a?e.s("graphing-calculator-narration-geometry-decagon-with-assignment",{label:a}):e.s("graphing-calculator-narration-geometry-unlabeled-decagon",{index:r.id});else{let h=a||e.s("graphing-calculator-narration-geometry-unlabeled-polygon",{index:r.id});c=e.s("graphing-calculator-narration-geometry-polygon-with-sides",{polygonDescription:h,sideCount:l})}if(t.polygonEdge!==void 0){let h=s.length>0?s[0][0]:void 0,g=s.length>0?s[0][1]:void 0,m=s.length>1?s[1][0]:void 0,b=s.length>1?s[1][1]:void 0;t.includeDetails&&e.shouldNarrateCoordinates()&&o<ii&&typeof h=="number"&&typeof g=="number"&&typeof m=="number"&&typeof b=="number"?p.push(e.s("graphing-calculator-narration-geometry-item-at-coordinates-to-coordinates",{itemDescription:c,x1:_s(e,h),y1:Ms(e,g),x2:_s(e,m),y2:Ms(e,b)})):p.push(c)}else if(t.includeDetails&&o<ii){let h=[];if(l<=10){let g=Lm(r,e).filter(m=>Gi(m)&&m.type==="expression"&&!m.hidden&&Oc(m,t).valueType===__dcg_shared_module_exports__['va']);g.length===l&&g.forEach(m=>{h.push(Yr(m,e,{includeDetails:!1,depth:o+1}))})}h.length?p.push(e.s("graphing-calculator-narration-geometry-polygon-through-vertices",{itemDescription:c,vertices:Zn(e.getLanguage(),h)})):p.push(c)}else p.push(c);return p}function j8(r,e,t){var D,G,N;let o=t.depth?t.depth:0,i="",n=[],a=(D=r.formula.geometry.call)==null?void 0:D.symbol,s=r.formula.geometry.listAccess,{value:l,valueType:c}=Oc(r,t),[p,h]=l[0],[g,m]=l[1],b=Lm(r,e),x=t.listIndex||0,E=_i(r,x)||r.label,S=E?vr(E):void 0,[k,T]=b,I=e.get2dProjection(),P=I&&I.viewport,A=k!==void 0&&T===void 0&&s!==void 0;if(a==="parallel"){let U=S?e.s("graphing-calculator-narration-geometry-parallel-with-assignment",{label:S}):e.s("graphing-calculator-narration-geometry-unlabeled-parallel-with-index",{index:r.id});o<ii&&k!==void 0&&T!==void 0?n.push(kn(e,"graphing-calculator-narration-geometry-parallel-to-line-through-point",{parallelDescription:U,line:Yr(k,e,{includeDetails:!1,depth:o+1}),point:Yr(T,e,{includeDetails:!1,depth:o+1})},U)):r.hidden&&o>=ii?n.push(e.s("graphing-calculator-narration-geometry-hidden-parallel")):A?i=e.s("graphing-calculator-narration-geometry-unlabeled-parallel"):n.push(U)}else if(a==="perpendicular"){let U=S?e.s("graphing-calculator-narration-geometry-perpendicular-with-assignment",{label:S}):e.s("graphing-calculator-narration-geometry-unlabeled-perpendicular-with-index",{index:r.id});o<ii&&k!==void 0&&T!==void 0?n.push(kn(e,"graphing-calculator-narration-geometry-perpendicular-to-line-through-point",{perpendicularDescription:U,line:Yr(k,e,{includeDetails:!1,depth:o+1}),point:Yr(T,e,{includeDetails:!1,depth:o+1})},U)):r.hidden&&o>=ii?n.push(e.s("graphing-calculator-narration-geometry-hidden-perpendicular")):A?i=e.s("graphing-calculator-narration-geometry-unlabeled-perpendicular"):n.push(U)}else if(c===__dcg_shared_module_exports__['Ia']){let U=S?e.s("graphing-calculator-narration-geometry-line-with-assignment",{label:S}):e.s("graphing-calculator-narration-geometry-unlabeled-line-with-index",{index:r.id});r.hidden&&o>=ii?i=e.s("graphing-calculator-narration-geometry-hidden-line"):A?i=e.s("graphing-calculator-narration-geometry-unlabeled-line"):i=U}else if(c===__dcg_shared_module_exports__['Ka']){let U=S?e.s("graphing-calculator-narration-geometry-ray-with-assignment",{label:S}):e.s("graphing-calculator-narration-geometry-unlabeled-ray-with-index",{index:r.id});r.hidden&&o>=ii?n.push(e.s("graphing-calculator-narration-geometry-hidden-ray")):A?i=e.s("graphing-calculator-narration-geometry-unlabeled-ray"):i=U,b.length===1&&(k==null?void 0:k.type)==="expression"&&(((G=k==null?void 0:k.formula.geometry)==null?void 0:G.valueType)===__dcg_shared_module_exports__['Ma']||((N=k==null?void 0:k.formula.geometry)==null?void 0:N.valueType)===__dcg_shared_module_exports__['Oa'])&&(i=kn(e,"graphing-calculator-narration-geometry-anglebisector-of-item",{bisectorDescription:i,item:Yr(k,e,{includeDetails:!1,depth:o+1})},i))}else if(c===__dcg_shared_module_exports__['Ea']){if(r.hidden&&o>=ii?n.push(e.s("graphing-calculator-narration-geometry-hidden-segment")):S?i=e.s("graphing-calculator-narration-geometry-segment-with-assignment",{assignment:S}):A?i=e.s("graphing-calculator-narration-geometry-unlabeled-segment"):i=e.s("graphing-calculator-narration-geometry-unlabeled-segment-with-index",{index:r.id}),t.includeDetails&&o<ii&&!S&&s===void 0&&e.shouldNarrateCoordinates()&&P!==void 0&&typeof p=="number"&&typeof h=="number"&&typeof g=="number"&&typeof m=="number"){let U=g-p,K=m-h,H=Math.sqrt(U*U+K*K);isNaN(H)||(i=e.s("graphing-calculator-narration-geometry-segment-length",{segmentDescription:i,length:ur(__dcg_shared_module_exports__['aa'](H,P.xmax-P.xmin).latex)}))}}else if(c===__dcg_shared_module_exports__['Sa']){let U=S?e.s("graphing-calculator-narration-geometry-vector-with-assignment",{label:S}):e.s("graphing-calculator-narration-geometry-unlabeled-vector-with-index",{index:r.id});r.hidden&&o>=ii?n.push(e.s("graphing-calculator-narration-geometry-hidden-vector")):A?i=e.s("graphing-calculator-narration-geometry-unlabeled-vector"):i=U}if(i!==""&&o<ii)if(k!==void 0&&T!==void 0){let U=Yr(k,e,{includeDetails:!1,depth:o+1}),K=Yr(T,e,{includeDetails:!1,depth:o+1});c===__dcg_shared_module_exports__['Ia']?n.push(kn(e,"graphing-calculator-narration-geometry-straight-through-item-and-item",{straightType:i,start:U,end:K},i)):c===__dcg_shared_module_exports__['Ka']?n.push(kn(e,"graphing-calculator-narration-geometry-straight-from-item-through-item",{straightType:i,start:U,end:K},i)):n.push(kn(e,"graphing-calculator-narration-geometry-straight-from-item-to-item",{straightType:i,start:U,end:K},i))}else A&&n.push(kn(e,"graphing-calculator-narration-geometry-straight-index-of-item",{straightType:i,index:s,item:Yr(k,e,{includeDetails:!1,depth:o+1})},i));return!n.length&&i&&n.push(i),n}function Y8(r,e,t){var x;let o=t.depth?t.depth:0,i=t.listIndex?t.listIndex:0,n="",a=[],{valueType:s}=Oc(r,t),l=_i(r,i)||r.label,c="",p=(x=e.getGrapher())==null?void 0:x.getGraphSketch(r.id);if(p&&"labels"in p){let S=p.labels[i];S&&"text"in S&&(c=vr(S.text))}s===__dcg_shared_module_exports__['Ma']?l?n=e.s("graphing-calculator-narration-geometry-labeled-angle",{label:vr(l)}):c?n=e.s("graphing-calculator-narration-geometry-unlabeled-angle-with-measurement",{index:r.id,measurementText:c}):n=e.s("graphing-calculator-narration-geometry-unlabeled-angle",{index:r.id}):s===__dcg_shared_module_exports__['Oa']&&(l?n=e.s("graphing-calculator-narration-geometry-labeled-directed-angle",{label:vr(l)}):c?n=e.s("graphing-calculator-narration-geometry-unlabeled-directed-angle-with-measurement",{index:r.id,measurementText:c}):n=e.s("graphing-calculator-narration-geometry-unlabeled-directed-angle",{index:r.id}));let h=Lm(r,e),[g,m,b]=h;return o<ii&&g!==void 0&&"hidden"in g&&!g.hidden&&m!==void 0&&"hidden"in m&&!m.hidden&&b!==void 0&&"hidden"in b&&!b.hidden?a.push(kn(e,"graphing-calculator-narration-geometry-angle-through-points",{itemDescription:n,parent1:Yr(g,e,{includeDetails:!1,depth:o+1}),parent2:Yr(m,e,{includeDetails:!1,depth:o+1}),parent3:Yr(b,e,{includeDetails:!1,depth:o+1})},n)):o<ii&&g!==void 0&&"hidden"in g&&!g.hidden&&m===void 0&&b===void 0?a.push(kn(e,"graphing-calculator-narration-geometry-angle-of-polygon",{itemDescription:n,parent:Yr(g,e,{includeDetails:!1,depth:o+1})},n)):a.push(n),a}function X8(r,e,t){if(r.description)return[r.description];let{value:o,valueType:i}=Oc(r,t),n=[],a=o.length;switch(__dcg_shared_module_exports__['rb'](i)){case __dcg_shared_module_exports__['va']:n.push(e.s("graphing-calculator-narration-geometry-list-of-points",{count:a}));break;case __dcg_shared_module_exports__['Ga']:n.push(e.s("graphing-calculator-narration-geometry-list-of-circles",{count:a}));break;case __dcg_shared_module_exports__['Ha']:n.push(e.s("graphing-calculator-narration-geometry-list-of-arcs",{count:a}));break;case __dcg_shared_module_exports__['Da']:n.push(e.s("graphing-calculator-narration-geometry-list-of-polygons",{count:a}));break;case __dcg_shared_module_exports__['Ia']:n.push(e.s("graphing-calculator-narration-geometry-list-of-lines",{count:a}));break;case __dcg_shared_module_exports__['Ka']:n.push(e.s("graphing-calculator-narration-geometry-list-of-rays",{count:a}));break;case __dcg_shared_module_exports__['Ea']:n.push(e.s("graphing-calculator-narration-geometry-list-of-segments",{count:a}));break;case __dcg_shared_module_exports__['Ma']:n.push(e.s("graphing-calculator-narration-geometry-list-of-angles",{count:a}));break;case __dcg_shared_module_exports__['Oa']:n.push(e.s("graphing-calculator-narration-geometry-list-of-directed-angles",{count:a}));break;default:n.push(e.s("graphing-calculator-narration-geometry-list-of-any",{count:a}));break}return n[0]=`${n[0]}.`,n}var J8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALoAAACTAgMAAABEw+ucAAAACVBMVEUAAAAtODpkbnWiWbTMAAAArklEQVR42u3WsQ3DIBCF4YeUIqVZIEJM4sJDUVLeWBSZwwUTUFIgSJco5RVWiP2o0afTj4TO4H1cdrvLj9x9z93vFkAZgFkGCmBRBgDzuX+vEqLEECVIlfoEkBpwWxsSsCG17/v06dOnT58+ffrX8EXlV+NVfj98/k3lN2NV/pjufbXzsw/7sA/7sA/7zNBHuz8cvZ/M5nP/PPf7zrY/0/+t/+//P/9P9mGfy/R5AdLZ2czSSya+AAAAAElFTkSuQmCC";var Z8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAlAgMAAAC48MiQAAAACVBMVEUCY5UIJWeTzOrVR0erAAAAQklEQVR42mNkEGRgFHjP8P/TP0YGFgcGlz0MDHsaGAmKCsJE8xldYKK/aCaqBBONY+yAiX4jLEoHlyGJkhmSWH0BAFAKfSYGmkpiAAAAAElFTkSuQmCC";var Q8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABGBAMAAACDAP+3AAAAD1BMVEUEQCIBbTlAqGCDcFC1on/agwH+AAAARklEQVR4AWNkQAWMSCxGqAC6GgFklgCEHkHmjJozas6oOQJEmMM4RMwZNWfUHAUizGEaZOYwE2GOAcXmjJrDQoQ5DoPLHADOPwwsWQikQQAAAABJRU5ErkJggg==";var eK="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAABgCAIAAABZgyFzAAANMklEQVR4Ae1dd1AjV/LulX8BXT7JGy46/+vszckRVmRnewTruIBzzgnjfy/DXp1zRuAchITSG+0uwaANdTnnO9jLOYBL774e9lWNPGOsGS0cuN5Um3rTr7v1zeeZUb+dbg1JbH/9sxwalGOmfEv4kyL+jomv50U8J7JCZIRI50QmJ5I5MWRi9l29MJu0LNlewBcREAfRHF6AN5KRXx+TM9sPviV3uWMenonJGFg4uAXpX6PuMKBnY2FzEYiAOJitWEazcurfwEuAzvv3nSO7ovJBQ4kal6/pMsZujiauNTLXG+nrIDxIXR8VNxhTne5e0GMWNnYXREAc2eX4rIda5d318uFO+Z298tt75PZ75D1NsqtFPnixPTIc99xsDFxrZBHz+mj6eo45eJ2x4wbjbcBQx6iENdBjFjYMw/KCLyIgjoLh9CpPA3j3NsudCfnDb5McycrXn5bnkWwl2eJf4F44nRKrKLOO0mtZMmsptYbyG2jacHWBHrOwgaVyWYcIiOMGZivJs0ne3SCHUiz3NGIXynmF4Z0TJvbNZwGY5FheJvvlpSQ7Vsj2sENC5Wo6woVzwolIOFMXTteF0nU8SNWG8w3h6W3uXtBjFjbsYnlhgAiIg2gqshpc9RmmtavVuiRNnODYhdIeWcEIKRhhBSOkYLgchYIRsrtYMEKI5pMNlkNBKYhlesfzxLe5RIxBt1XJbUvkNvIpbVRookQ1ZbZQmoUHqRrK19L0Fe4u0GMWNjYXREAcRHPY4wBaiG8Ub+XANV/OLaycbxgeZAkoZWITfSCZieYREx2U2wILmOiwRbQBoiE8aGHlAiY6AEo10fNJdOwdRFfNP9GmZ6KjuG/YiA4tPqL1Ge2EoYkWi5To2GIgOlRKdHThE62zDp116KxDZx0669BE66xDZx0669BZhyZaZx36y1Cf0XNEtM46dNZheriDLeCso6iOcMB2hJBB2xEWS+3VEbKNsmffAXWERY+3jrmH4T/rKB4gOtknLwHooGzDHPmUdtrbfODcERFLaikboV31VLzS3QV6zMJGKBfrzEIcRHPYd4T5oXKXIhqDVlbOGwzvEgClTGzSunUM5809L/cVzqJCc1WhKYD/jf4EsO4/jho/Sa2Hk3EYS/RwuvCz1HYMjTTQ7uZ32kMDPWZhE1Uu8EWE+45DNMdHnBPG8//CzdGCKQpmrnCzwbvnhJww4N4AGEfMhOW/53+G2i0YexxhoYEes7BR9gyjwQHDs4DM5iCIHXsp9vUdJiWFOdDfl0AlQ00wUR3AvcmH4EJL1TBHzu0jAXrtDErWwKbEHhroMevccJCpUnuWSBi1FiivSWRzEB6sYmWZMD46A6PaAaMaep51bo0OGB4lAEqZ2BdicWFSRpjZF/oyGylTG8xsCeD25E/MWj6JsH3m/yh0CMvy/+HdVR/jT81F3mkPDfSYxQZLy4V9iRAH0RwfgXKLdYRiokwul8kJDLALpQuMw98DRrZMGIeXwFBeZWsigUwkyMS+EMuaJqWFmX4hlt5I6UgwvSWArwJ/IiJ80WED0Jmtagn/PekjfFJkHfbQDJzFs8pS+RLiIJrjI1CUs5a4ciyX4wq566O8Wxd2wjAOc4Fxwof547KOsNBAj1kHDMRRMPwJyIxUMbE4j4VFNEb+iXYcYbj0CE/8yGxHeGIp0eFZjhCcKqJZrjcU0fMLwxvRwRmiQTJlTb51ZDdRtjaYjQRwonmW0lvHYf9HSw9h+aR1za62X7NK1DXLs9hgOeNyWOmtI2uXunB2HaH8MJvLQTDALpROGFvnBIZ3AZmgdCNlcesA0bhPx/v74usoXl0VPysQP4t8yJtn8ZfbluXkur1yOg4GNiX20EDvuiEOoil7JVvC8ZUUvzYaz4p4Nhe/xoivgjJUCoPT4ciKd4FxhjsM6F03xBlUMPwIyKwOxtdSvD8Wz5n0+xHz16/3TZ5Lky3ByWhgMkqQCfxV4qrBLott9zct9MJp9IWV9NU1tF3JV1bTY+vpFxfTftiUCjTQYxY2yh6+iIA4iAab0o9rDU820+TdxuRQDjJxtzGBXShLIcHxRQWjR0XuLoWhXEpgdCtjeM3AeFHBcLJRniYASifOpf1vxH4+pBYsVjVpULYjxyaf0kFfP5tveTvraEct7ahjMWs5S5Xb3F2gx6wJY3aBwBcREAfRHMZXha1qUrUEx2ArK2eDwWE9wmBxwPApAab0UmvBMm4SVofFRKzYirVmsLgtgBUny5X4W7bA2Fp0jTfxJZPmf1uYEc5SRS1NYe2rYqq/0EDPs0lYKoEvIiCOtWCzuUDaQsUoFTuN4miuOCqKD0Z5ty1cYmOFHW90wKghEbHDgJTCiLjBaCyB4V1AZlVxKxWxBNf/TKqfsOgnLPoJi37CoonWT1h0XYeu63jfZR3jVvvbZUjOPynbl8n2pT6lY2nhnKWJyNJM/dJ0HUumbmmqbmm+Yel0G2Zd7KHHbIotlUs9IiCOm/1VhzHoh1oBGqLa3w4rF0bjrDAaYQMXVxi+ZRlTeplqf+PmyNefks0kLyZ5kX+Be2EDJY6nzMmUPoklcxKlTqT8Spq+wN0FenMlbGCpXE5GBMRxA2OQbCB5Z0TuSsqdSXnHFt413GBsdIOxajYYmHWFUTknEpfFa09ZDZ1/+ZP80Xfkc1+UsR5Luu3iSVN4rDvxte7MI93pR3rSD3dnHu5OPdydf6R7utfdC3rMpixL2MMLA0RAHJfP6tsun/m8HOyXv9vPkuzHLpTOyIXHexIqpoLRo2C4RFYweuwuiIA4FbChxs9+Qf70B3LyVySxTU/Jwk65d7hCKYwMJ3YNZ4aG0yw8SO0azg8NT+9xt4ces6lSF0RAHBf7fSNyfAeaqqW1YcC7e0fmF4Z3AbGgV0rinzbY/2tuBx/orVAKL/Um+noz/b1pFh6k+nvzL/ROx13toccsbOwuiIA4bvaJGN/ihgbl3//GYt3xoHSB8aIDRl8ZMPocMF7EbMXyxjNy4hdy6t/EiOPPywuJ/53pEv8C90INJTZQZjOlN0F4kNpE+dNoutXdBXrMwsbuggiI4wIG3yrnk7z3HDmcZrnvHOxCORsMyAyMjQrGpU57BWOjgrFZwag+CJwwsWi6f0sQ/sPo4BBdXXqEmxi9IrrCI1RE3+cken7/f/sgGucxvgxxVuPcxhnu/+qo4Jo1y75m1a0j5bh1zOUdLFEpJ7gn486M+/Mi/zKEcrF8GSLzQP7BWUisx1MeM9951Ux6l1Tp3eALKr1zyzIfds0ynflrjyPL7IEXfBFBZZl2L28aCPJmZM/IofnLkDPqpjlbsFS0UnAsWO6owWoFgpWLWrBUvm7C7JwtWJrVguXAEvzSOViC13tY+87hErx+gSzB9T8q6Scs+gmLPqPfT0TrJyz6CYt+wqLrOvQ92ioJ6+PKpW1VlZWElVeLdaWXWiwVn6U9XIwSV4KNCq4K6zR4ty2kAnqsTIN4rUzzLAGusmslrriznhnOQZEjxEeRY125RY6QcoscIQuhyBFEo6J0/xt9E1bZLipNvdanThzEelmrbPeL71Yva5XtThwo2xWTGDSzkm28VQ+ro/BVPeyFHy7bRT30r1+PoTaaUCPNldJrCVXTHgvRPVSADzgqwAe8VoCj5nwVof6cq9CzgivSV0IZnrt6+BrUw1daiF6FCn+u8+fWCmG1Vmw8CK0VWxdGa0Xrgmqt2ERMr7l4m4Wu894sVP3fahaKpUUJ0VWeiJ7fvjNFNLrecsJGdKjyLjzoPXTh+SYaZ3XGaujk7sNIZQ2dhx+khs7D36uhE6IaOn30lWb995V6EZCpurIywvoyTLxQeYuy997gGo+9wfYW5ZxwtCjPV6e09xblgf5YEkSjHxxd4VbTffCgNN3bu90vKKPbHTbKHr6zNN2HrKZ7gzvuTYHue949Jzx3vf+IU3HTfRWIxW8aDOfn8mckIPpnJJhY0MtLcP3DKJ5gLNgnLKZ+wqKfsGii9RMW/YRFP2HRT1g00bquQ38Z6qxDZx0669BZh846NNHv86xDZx36jNZE66xDZx0669BZh846lizgrEPdOlTWsVheV62IHre/gP1QD28an9c3n6sXsD+kXsDe5XgB+5y9B947G0rUC9jlmPULNNx0f16Fr89X7/Jf7e1d/qbzXf6r3d/lz7SeTfKeRgYMubsBu1C6w1jlDUbeCWMVx6mcEyYW7eCjWeKmajSi3tssu1pkVxSXpF08aLqMPTcbA9caqCHiwq3reTB4nbHjBuPtTncv6DELG8uFvTBABMSRXY7Pwil8T5Pcfo/89h75nb3y4U55dz2f4KWR4Th2czQxE/M6CA9S10fFDcZUp/tRQI9Z2LALxHJBBMRBND9s2Mf3ncOX4NfHSGKb+jcox36FMmyKZE5kciINUYOMEP8adbeHHrNpYXMRiIA4bvb4Ltk1KH/wLWltgC5HMlDabYpsJr6eF/GcyAorOMPgmEOmNesm0A8xcgVGwBcREAfRlJc/AbyhQf7pGSn/AzoQ/xNTjDBeAAAAAElFTkSuQmCC";var tK="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAABSBAMAAAA1Ap6oAAAAElBMVEUyEnpmAJmZZsyOq8F1Y6huSCYwljaMAAAAhElEQVR42u3WuQ3DMAwAwJMc9xpBI3iEjOBRPUJGUu8ASpeajRDEck8cQIJfgpRInextPWW6TsZysnRIUAqlUXntjkqjqdgctvaNnNUsYTOFzRo28+XMLWwudz0D5jNsPn5q/su872FzvVzuM8/RiD0/wpz5Fs/cnyPMmXfdCPP+baY0P8DuSBJDqlYMAAAAAElFTkSuQmCC";var rK="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHAAAABwAgMAAAC7jhzYAAAADFBMVEV3DwX////AKxgzKS8WNqZYAAAAYklEQVR42mNkYGAQYBBigABBhvcQxr+HDP8ZGBgZGBgcGE40QMRcGPZAldUw/IFIjurEq9MFn07B4WNnBz6dSqM6R3WO6hxInWfw6TQePjpHU8KozlGdg1fnaEtqtGVMoU4ATFfbEBSwOLUAAAAASUVORK5CYII=";function Au(r,e,t,o=3){let[i,n,a,s]=r,{x:l,y:c}=e.mathToPixels.mapPoint({x:i,y:n}),{x:p,y:h}=e.mathToPixels.mapPoint({x:a,y:s}),g=Math.min(o,Math.max(e.screen.width,e.screen.height)),m={xmin:-g,ymin:-g,xmax:e.screen.width+g,ymax:e.screen.height+g},b=l-p,x=c-h,E=-b,S=-x,k=l-m.xmin,T=m.xmax-l,I=c-m.ymin,P=m.ymax-c,A=[],D=[];if(b!==0){let F=k/b,V=T/E;b<0?(A.push(F),D.push(V)):(A.push(V),D.push(F))}if(x!==0){let F=I/x,V=P/S;x<0?(A.push(F),D.push(V)):(A.push(V),D.push(F))}(t===17||t===24)&&(A.push(0),D.push(1)),t===19&&A.push(0);let G=Math.max(...A),N=Math.min(...D);if(G>N)return{mapped:[l,c,p,h],clipped:[]};let U=l+E*G,K=c+S*G,H=l+E*N,w=c+S*N;return U<m.xmin&&H<m.xmin||U>m.xmax&&H>m.xmax||K<m.ymin&&w<m.ymin||K>m.ymax&&w>m.ymax?{mapped:[l,c,p,h],clipped:[]}:{mapped:[l,c,p,h],clipped:[U,K,H,w]}}var Vi=class{constructor(e,t,o){this.pattern=o,this.replen=this.pattern[0]+this.pattern[1],t/this.replen>1e3&&(this.pattern[0]=t*this.pattern[0]/this.replen/1e3,this.pattern[1]=t*this.pattern[1]/this.replen/1e3),this.pstate=0,this.dstaccum=0,this.px=null,this.py=null,this.ctx=e}static getDashedPattern(e,t){let o=e*11/(t?3.5:2.5),i=o*7/11;return[o,i]}static getDottedPattern(e,t,o){let i=.5*e*.1/(o?3.5:2.5),n=i*8/.1;return t&&(n*=2),[i,n]}static getTotalSegmentLength(e){if(e.length<4)return 0;let t=0,o=0,i=e[0],n=e[1];for(;isNaN(i)||isNaN(n);){if(o+=2,o>=e.length)return 0;i=e[o],n=e[o+1]}let a,s;for(o+=2;o<e.length;o+=2)a=e[o],s=e[o+1],!(isNaN(a)||isNaN(s))&&(t+=__dcg_shared_module_exports__['M'](a-i,s-n),i=a,n=s);return t}start(e,t){this.px=e,this.py=t}next(e,t){if(this.px===null||this.py===null)throw new Error("Must call start before calling next");let o=this.pattern[this.pstate],i=Math.sqrt(Math.pow(e-this.px,2)+Math.pow(t-this.py,2));if(i>1e-5){for(;i+this.dstaccum>=o;){let n=e-this.px,a=t-this.py,s=o-this.dstaccum;n*=s/i,a*=s/i,this.pstate===0&&(this.ctx.moveTo(this.px,this.py),this.ctx.lineTo(this.px+n,this.py+a)),this.dstaccum=0,this.px+=n,this.py+=a,this.pstate=this.pstate===0?1:0,o=this.pattern[this.pstate],i-=s}this.pstate===0&&(this.ctx.moveTo(this.px,this.py),this.ctx.lineTo(e,t))}this.px=e,this.py=t,this.dstaccum+=i}close(){this.pstate=0,this.dstaccum=0,this.px=null,this.py=null}drawSegment(e){let t=0,o=e[0],i=e[1];for(;isNaN(o)||isNaN(i);){if(t+=2,t>=e.length)return;o=e[t],i=e[t+1]}this.start(o,i);let n,a;for(t+=2;t<e.length;t+=2)n=e[t],a=e[t+1],!(isNaN(n)||isNaN(a))&&this.next(n,a);this.close()}};function Pm(r){let e=[[r.x0,r.y0],[r.x1,r.y1],[r.x2,r.y2]],[t,o]=__dcg_shared_module_exports__['Wb'](e),i=__dcg_shared_module_exports__['Mb'](r.x0-t,r.y0-o);return{x:t,y:o,radius:i}}function nk(r){let e=[[r.x0,r.y0],[r.x1,r.y1],[r.x2,r.y2]],[t,o]=__dcg_shared_module_exports__['Wb'](e);return{startAngle:Math.atan2(r.y0-o,r.x0-t),deltaAngle:__dcg_shared_module_exports__['Xb'](e)}}var jne=Math.hypot&&Math.hypot(1/0,NaN)===1/0;function oK(r){return r===1/0||r===-1/0}var $d=jne?Math.hypot:function(r,e){if(oK(r)||oK(e))return 1/0;if(isNaN(r)||isNaN(e))return NaN;if(r===0&&e===0)return 0;if(Math.abs(r)>Math.abs(e)){let t=e/r;return Math.abs(r)*Math.sqrt(t*t+1)}else{let t=r/e;return Math.abs(e)*Math.sqrt(t*t+1)}};var iK=(r,e)=>({x:r.x-e.x,y:r.y-e.y}),Yne=(r,e)=>r.x*e.x+r.y*e.y;function sk(r,e){return $d(r.x-e.x,r.y-e.y)}function nK(r,e){let t={x:r.x1,y:r.y1},o={x:r.x2,y:r.y2},i=iK(e,t),n=iK(o,t),a=sk(t,o),s=a*a;return Yne(i,n)/s}function zD(r){return[{x1:r.left,y1:r.top,x2:r.left,y2:r.bottom,extendStart:!1,extendEnd:!1},{x1:r.left,y1:r.top,x2:r.right,y2:r.top,extendStart:!1,extendEnd:!1},{x1:r.right,y1:r.top,x2:r.right,y2:r.bottom,extendStart:!1,extendEnd:!1},{x1:r.left,y1:r.bottom,x2:r.right,y2:r.bottom,extendStart:!1,extendEnd:!1}]}function Xne(r){let{angle:e,width:t,height:o,center:i}=r,n=i.x,a=i.y,s=Math.cos(-e),l=Math.sin(-e),c=t/2,p=o/2,h={x:n+s*-c-l*-p,y:a+l*-c+s*-p},g={x:n+s*c-l*-p,y:a+l*c+s*-p},m={x:n+s*c-l*p,y:a+l*c+s*p},b={x:n+s*-c-l*p,y:a+l*-c+s*p};return[{x1:h.x,y1:h.y,x2:g.x,y2:g.y,extendStart:!1,extendEnd:!1},{x1:g.x,y1:g.y,x2:m.x,y2:m.y,extendStart:!1,extendEnd:!1},{x1:m.x,y1:m.y,x2:b.x,y2:b.y,extendStart:!1,extendEnd:!1},{x1:b.x,y1:b.y,x2:h.x,y2:h.y,extendStart:!1,extendEnd:!1}]}function Jne(r,e){let t=zD(r);return!!(lk(e,t[0])||lk(e,t[1])||lk(e,t[2])||lk(e,t[3]))}function Zne(r,e){let t=zD(r);return!!(Ml(e,t[0],!1)||Ml(e,t[1],!1)||Ml(e,t[2],!1)||Ml(e,t[3],!1)||Ml(e,t[0],!0)||Ml(e,t[1],!0)||Ml(e,t[2],!0)||Ml(e,t[3],!0))}function Qne(r,e){let t=zD(r);return!!(jd(e,t[0],!1)||jd(e,t[1],!1)||jd(e,t[2],!1)||jd(e,t[3],!1)||jd(e,t[0],!0)||jd(e,t[1],!0)||jd(e,t[2],!0)||jd(e,t[3],!0))}function eae(r,e){return r.left<=e.left&&r.right>=e.right&&r.top<=e.top&&r.bottom>=e.bottom}function tae(r,e){return r.left<=e.x&&e.x<=r.right&&r.top<=e.y&&e.y<=r.bottom}function ck(r,e){if(!e.extendStart){let t=r.left<=e.x1&&e.x1<=r.right,o=r.top<=e.y1&&e.y1<=r.bottom;if(t&&o)return!0}return Jne(r,e)}function pK(r,e){let t={x:e.x0,y:e.y0};return!!(tae(r,t)||Qne(r,e))}function uK(r,e){let t={left:e.x-e.radius,right:e.x+e.radius,top:e.y-e.radius,bottom:e.y+e.radius};return!!(eae(r,t)||Zne(r,e))}function rae(r,e){let t=r.x-e.center.x,o=r.y-e.center.y,i=Math.atan2(o,t),n=$d(t,o),a={x:n*Math.cos(i+e.angle),y:n*Math.sin(i+e.angle)};return Math.abs(a.x)<=e.width/2&&Math.abs(a.y)<=e.height/2}function hK(r,e){if(e.length<4)return!1;let t={x1:NaN,y1:NaN,x2:e[0],y2:e[1],extendStart:!1,extendEnd:!1};for(let o=2;o<e.length;o+=2)if(t.x1=t.x2,t.y1=t.y2,t.x2=e[o],t.y2=e[o+1],ck(r,t))return!0;return!1}function dk(r,e){let t=Xne(e);for(let o of t)if(ck(r,o))return!0;return!!rae({x:r.left,y:r.top},e)}function oae(r,e,t){let o=e.x1-r.x,i=e.x2-r.x,n=e.y1-r.y,a=e.y2-r.y,s=r.radius,l=i-o,c=a-n,p=l*l+c*c,h=o*a-i*n,g=Math.sqrt(s*s*p-h*h);if(g<0)return;let m=c>=0?1:-1,b=t?-1*m:1*m;return{x:r.x+(h*c+b*m*l*g)/p,y:r.y+(-h*l+b*Math.abs(c)*g)/p}}function iae(r,e){let t=r.y2-r.y1,o=r.x1-r.x2,i=e.y2-e.y1,n=e.x1-e.x2,a=t*r.x1+o*r.y1,s=i*e.x1+n*e.y1,l=t*n-i*o;if(l!==0)return{x:(n*a-o*s)/l,y:(t*s-i*a)/l}}function UD(r,e){let t=nK(e,r);return!(isNaN(t)||t<0&&!e.extendStart||t>1&&!e.extendEnd)}function nae(r,e){let{x:t,y:o}=Pm(e),{startAngle:i,deltaAngle:n}=nk(e),a=Math.atan2(r.y-o,r.x-t);return __dcg_shared_module_exports__['K'](a,i,n)}function Ml(r,e,t){let o=oae(r,e,t);if(o!=null&&UD(o,e))return o}function jd(r,e,t){let o=Ml(Pm(r),e,!1)||sK,i=lK(t,cK(r,o),dK(e));if(i||(o=Ml(Pm(r),e,!0)||sK,i=lK(t,cK(r,o),dK(e))),i&&nae(o,r))return o}var sK={x:NaN,y:NaN};function lk(r,e){let t=iae(r,e);if(t!=null&&UD(t,r)&&UD(t,e))return t}function lK(r,e,t){let o=e.x*t.y-e.y*t.x;return o>0&&r||o<0&&!r}function cK(r,e){let{x:t,y:o}=Pm(r),{deltaAngle:i}=nk(r);return i>0?{x:o-e.y,y:e.x-t}:{x:e.y-o,y:t-e.x}}function dK(r){return{x:r.x2-r.x1,y:r.y2-r.y1}}function oo(r,e){let t=r;t._dcgSaveClassName&&t._dcgSaveClassName(e)}function Xr(r){let e=r;e._dcgRestoreClassName&&e._dcgRestoreClassName()}var Rc,Lu=new Map,pk=0;function gK(r,e,t){let o=r.imageObj;if(Rc&&Rc.color===e&&Rc.img===o)return Rc.canvas;Rc?(Rc.color=e,Rc.img=o):Rc={color:e,img:o,canvas:document.createElement("canvas")};let i=Rc.canvas,n=r.mimeType==="image/svg+xml";i.width=0,i.width=n?t.width:o.width,i.height=n?t.height:o.height;let a=i.getContext("2d");return a.drawImage(o,0,0,i.width,i.height),a.fillStyle=e,a.globalCompositeOperation="source-atop",a.fillRect(0,0,i.width,i.height),i}function sae(r,e){if(e.width*e.height>1e3*1e3*window.devicePixelRatio*window.devicePixelRatio)return r.imageObj;let t=r.image_url,o=Lu.get(t),i;if(!o||e.width!==o.size.width||e.height!==o.size.height){o&&(Lu.delete(t),pk-=o.canvas.width*o.canvas.height);let n=r.imageObj,a=document.createElement("canvas");a.width=e.width,a.height=e.height,a.getContext("2d").drawImage(n,0,0,a.width,a.height);let l=20*1e3*1e3;if(a.width*a.height>l)return r.imageObj;for(pk+=a.width*a.height;pk>l;){let[c,p]=Array.from(Lu)[0];Lu.delete(c),pk-=p.canvas.width*p.canvas.height}Lu.set(t,{canvas:a,size:e}),i=a}else Lu.delete(t),Lu.set(t,o),i=o.canvas;return i}function mK(r,e,t,o={cacheRenderedSvgs:!1}){let{ctx:i,projection:n}=r,a=e.formula;if(!a||!a.dimensions.x)return;let s=a.dimensions;for(let l=0;l<s.x.length;l++){let c=s.x[l],p=s.y[l],h=s.width[l],g=s.height[l],m=s.radianAngle[l];if(!isFinite(c)||!isFinite(p)||!isFinite(h)||!isFinite(g)||!isFinite(m))continue;oo(i,"dcg-svg-image"),i.save(),Xr(i),i.globalAlpha=s.opacity[l];let b=n.mapy(g)-n.mapy(0),x=n.mapx(h)-n.mapx(0),E=m===0?1:Math.abs(x/h*(g/b)),S=n.mapx(c),k=n.mapy(p),T=S-x/2,I=k+b*E/2,P=g<0?-1:1,A=h<0?-1:1,D=T*A,G=I*P,N=Math.abs(x),U=Math.abs(b);m!==0&&(i.translate(S,k),i.scale(1,1/E),i.rotate(m),i.translate(-S,-k)),i.scale(A,P);let K=t.shouldDrawHovered(r,e.id,l),H=t.shouldDrawPressed(e.id,l),w=o.currentKeyboardAttention&&o.currentKeyboardAttention.calcId===e.id&&(o.currentKeyboardAttention.listIndex===void 0||o.currentKeyboardAttention.listIndex===l),V=e.imageObj,B=window.devicePixelRatio*(n.screen.width/n.screen.height),L={width:Math.floor(N*B),height:Math.floor(U*B)};H?e.depressedImageObj?V=e.depressedImageObj:V=gK(e,"rgba(50,50,50,0.2)",L):K?e.hoveredImageObj?V=e.hoveredImageObj:V=gK(e,"rgba(200,200,200,0.2)",L):o.cacheRenderedSvgs&&e.mimeType==="image/svg+xml"&&L.width>0&&L.height>0&&(V=sae(e,L)),i.drawImage(V,D,G,N,U*E);let q=0,le=3;if(rn(e)&&e.controller.isTraceEnabled()&&(i.beginPath(),i.rect(D-q,G-q,N+2*q,U*E+2*q),i.restore(),i.save(),i.strokeStyle="#6993C7",i.lineWidth=le,i.stroke()),w){let $=i.globalAlpha;q=5,i.beginPath(),i.roundRect?i.roundRect(D-q,G-q,N+2*q,U*E+2*q,q):i.rect(D-q,G-q,N+2*q,U*E+2*q),i.restore(),i.save(),i.strokeStyle=__dcg_shared_module_exports__['Md'].FOCUS_OUTLINE,i.globalAlpha=1,i.lineWidth=le,i.stroke(),i.globalAlpha=$}i.restore()}}function uk(r,e,t=0){let o=e.formula;if(!o||!o.dimensions.x)return!1;let i=o.dimensions,n=i.x[t],a=i.y[t],s=i.width[t],l=i.height[t],c=i.radianAngle[t];if(!isFinite(n)||!isFinite(a)||!isFinite(s)||!isFinite(l)||!isFinite(c))return!1;let p=r.mapx(n),h=r.mapy(a),g=Math.abs(r.mapx(s)-r.mapx(0)),m=Math.abs(r.mapy(l)-r.mapy(0)),b={center:{x:p,y:h},width:g,height:m,angle:c},x={left:0,top:0,right:r.screen.width,bottom:r.screen.height};return dk(x,b)}function fK(r){return r.uncommitted?"#ccc":!r.selected&&!r.hovered&&bK(r)===1?__dcg_shared_module_exports__['Fd'](r.color,.2):r.color}function bK(r){let e=.6;return r.hidden?r.selected?e=.4:e=.25:r.selected||r.isPoint?e=1:r.hovered&&(e=.8),r.isTransparentObject&&(e*=.3),e}function lae(r){return r.hidden?r.isPoint?0:r.selected?.3:.2:r.selected||r.isPoint||r.hovered?1:.7}function yK(r,e){r=r.replace(/#/,"");let t,o,i;return r.length===3?(t=parseInt(r.slice(0,1)+r.slice(0,1),16),o=parseInt(r.slice(1,2)+r.slice(1,2),16),i=parseInt(r.slice(2,3)+r.slice(2,3),16)):r.length===6?(t=parseInt(r.slice(0,2),16),o=parseInt(r.slice(2,4),16),i=parseInt(r.slice(4,6),16)):(t=0,o=0,i=0),`rgba(${t}, ${o}, ${i}, ${e})`}function gx(r){return yK(fK(r),lae(r))}function hk(r){return yK(fK(r),bK(r))}function gk(r){return Math.abs(Math.abs(r)-Math.PI/2)<1e-6}function En(r,e){let t=r;t._dcgStartNamedGroup&&t._dcgStartNamedGroup(e)}function mx(r,e){let t=r;t._dcgSetTitle&&t._dcgSetTitle(e)}function In(r){let e=r;e._dcgEndNamedGroup&&e._dcgEndNamedGroup()}var HD=1.4,vK=1.5,fk={};function uae(){return!!Object.keys(fk).length}var kK=function(r,e){let t=3;return e&&(t+=e),new __dcg_shared_module_exports__['Qe'](-t,r.width+t,-t,r.height+t)};function wK(r,e){let{displayAsRightAngle:t,rx:o,ry:i,startAngle:n,deltaAngle:a,yscreen:s,xscreen:l}=r;if(t){let c=o*Math.cos(-n),p=o*Math.cos(-n-a),h=i*Math.sin(-n),g=i*Math.sin(-n-a);e.moveTo(l+c,s+h),e.lineTo(l+c+p,s+h+g),e.lineTo(l+p,s+g)}else e.ellipse(l,s,o,i,0,-n,-n-a,a>0)}var Ls=class r{constructor(e,t,o){if(this.controller=e,this.getExpressionAriaLabel=o,t.config.plaidMode){let i=["RED","BLUE","GREEN","PURPLE","ORANGE","BLACK"],n={RED:rK,BLUE:Z8,GREEN:Q8,PURPLE:tK,ORANGE:eK,BLACK:J8};for(let a of i)fk[__dcg_shared_module_exports__['Md'][a]]=document.createElement("img"),fk[__dcg_shared_module_exports__['Md'][a]].setAttribute("src",n[a])}}redrawToCtx(e,t,o,i,n,a){let{ctx:s,projection:l}=e;En(s,"expressions");let c=l.settings.highlight,p=this.controller.isGeometry();i.forEach(h=>{let g=t[h],m=o[h];g!==void 0&&(p&&l.settings.setProperty("highlight",g.showHighlight),En(s,"sketch"),l.settings.takingScreenshot&&mx(s,this.getExpressionAriaLabel(h)),r.drawSketchToCtx({sketch:t[h],drawContext:e,poiLabelsLayer:n,clickableObjectsLayer:a,geometryContext:this.controller.getGeoModel()}),In(s)),m&&m.shouldGraph&&mK(e,m,a,{currentKeyboardAttention:this.controller.get2dPOIController().keyboardAttentionManager.getKeyboardAttention(),cacheRenderedSvgs:this.controller.getGraphSettings().config.cacheRenderedSvgs})}),In(s),l.settings.setProperty("highlight",c)}static eachSegment(e,t){for(let o of e.branches)if(o.branchMode!==15)for(let i of o.segments)t(o,i)}static drawSketchToCtx({sketch:e,drawContext:t,poiLabelsLayer:o,clickableObjectsLayer:i,geometryContext:n}){var m,b,x,E,S;if(!e.branches||!e.branches.length)return;let{ctx:a,projection:s}=t,l=a.lineWidth,c=a.globalAlpha,p=s.settings.globalCurveColor?s.settings.globalCurveColor:e.color,h=fk[p],g;h&&h.complete&&h.naturalWidth>0?g=a.createPattern(h,"repeat"):g=p,a.lineJoin="round",a.lineCap="round";for(let k of e.branches){if(__dcg_shared_module_exports__['vd'](k)||k.branchMode===15||k.branchMode===22)continue;let T=1;i.shouldDrawHovered(t,e.id,k.listIndex)&&(T=w0.IS_HOVERED),i.shouldDrawPressed(e.id,k.listIndex)&&(T=w0.IS_PRESSED),i.shouldDrawGhosted(e.id)&&(T=w0.IS_GHOSTED),T*=(m=n==null?void 0:n.getToolFadeOpacity(e.id))!=null?m:1,T*=s.settings.getFillOpacityMultiplier(),a.strokeStyle=p,a.fillStyle=k.color&&!s.settings.globalCurveColor&&!uae()?k.color:g,k.branchMode!==6&&(a.desmos_batching=!0,a.beginPath());let I=k.branchMode===6?.2:(b=k.fillOpacity)!=null?b:NaN;a.globalAlpha=r._clampedOpacity(I*T,.4);let P=KD(s,k);for(let A of P)r.fillPolygonFillToCtx(a,A);k.branchMode!==6&&(a.fill(),a.desmos_batching=!1),a.globalAlpha=1;for(let A of k.segments){let D=2;k.branchMode&&(D=k.branchMode);let G=A,N=k.lineWidth!==void 0,U=k.lineWidth,K=2.5,H=(x=k.arrowMode)!=null?x:__dcg_shared_module_exports__['Wd'].DEFAULT;if(a.strokeStyle=k.color,a.fillStyle=k.color,N&&(U<=0||!isFinite(U)))continue;a.lineWidth=N?U:K;let w=s.settings.graphLineWidth/K,F=1.3;s.settings.highlight&&(F*=5/7),e.tokenSelected?(w*=vK,F/=vK):e.tokenHovered&&(w*=HD,F/=HD),a.lineWidth*=w,a.globalAlpha*=s.settings.curveOpacity,a.globalAlpha=r._clampedOpacity(s.settings.curveOpacity===1?1:k.lineOpacity,1);let V=k.operator,B="default";V==="<"||V===">"||V==="!="?B=__dcg_shared_module_exports__['Qd'].DASHED:V==="<="||V===">="?B=__dcg_shared_module_exports__['Qd'].SOLID:e.style===__dcg_shared_module_exports__['Qd'].DASHED||k.style===__dcg_shared_module_exports__['Qd'].DASHED?B=__dcg_shared_module_exports__['Qd'].DASHED:(e.style===__dcg_shared_module_exports__['Qd'].DOTTED||k.style===__dcg_shared_module_exports__['Qd'].DOTTED)&&(B=__dcg_shared_module_exports__['Qd'].DOTTED,N&&(a.lineWidth*=2)),a.globalAlpha*=(E=n==null?void 0:n.getToolFadeOpacity(e.id))!=null?E:1;let L=!k.isIntersectionExtension&&i.shouldDrawHovered(t,e.id,k.listIndex),q=!k.isIntersectionExtension&&i.shouldDrawPressed(e.id,k.listIndex),le=i.shouldDrawGhosted(e.id);if(le)a.globalAlpha*=CP.IS_GHOSTED;else if(q||L){a.save();let $=a.lineWidth;a.lineWidth+=4.5,a.globalAlpha*=q?vy.IS_DEPRESSED:vy.IS_HOVERED,r.drawGraphStrokeToCtx(a,s,G,{type:B,graphMode:D,op:V,arrowMode:H,baseLineWidth:$,arrowHeadScaleFactor:F,opacityMultiplier:q?vy.IS_DEPRESSED:vy.IS_HOVERED}),a.restore()}r.drawGraphStrokeToCtx(a,s,G,{type:B,graphMode:D,op:V,arrowMode:H,baseLineWidth:a.lineWidth,arrowHeadScaleFactor:F,opacityMultiplier:((S=n==null?void 0:n.getToolFadeOpacity(e.id))!=null?S:1)*(le?CP.IS_GHOSTED:wy)})}}a.lineWidth=l,a.globalAlpha=c,a.strokeStyle=p,a.fillStyle=p,r.eachSegment(e,(k,T)=>{var I,P;if((k.branchMode===3||k.branchMode===25)&&k.showPoint){let A=T,D=[],G;if(k.interactiveLabel&&e.labels)for(let $=0,ne=e.labels.length;$<ne;$++){let ue=e.labels[$];if(ue.type==="poi"){let de=o.isOpenPOI(ue.poi),pe=o.getHoveredPOI()===ue.poi;D.push(de||pe),!de&&pe&&(G=$)}}let N=1;typeof k.pointSize=="number"?N=k.pointSize/8:Array.isArray(k.pointSize)&&(N=k.pointSize.map($=>$/8));let U;Array.isArray(k.color)&&(U=k.color);let K=Array.isArray(k.pointOutline)?!!k.pointOutline[0]:!!k.pointOutline,H=i.shouldDrawGhosted(e.id),w=!H&&i.shouldDrawHovered(t,e.id,void 0),F=i.getHoveredObjectById(e.id),V=i.getPressedObject(),B=V==null?void 0:V.listIndex,L=!H&&i.shouldDrawPressed(e.id,B);L||(B=void 0);let q=k.droppedIndices,le=w?F==null?void 0:F.listIndexes:void 0;r.drawPointsToCtx({ctx:a,projection:s,segment:A,style:(I=k.style)!=null?I:__dcg_shared_module_exports__['Pd'].POINT,sizeOverrideIdxs:D,opacityOverrideIdx:G,sizeFactor:N,opacityFactor:((P=n==null?void 0:n.getToolFadeOpacity(e.id))!=null?P:1)*(H?S0.IS_GHOSTED:wy),colorOverrides:U,baseOpacity:k.pointOpacity,droppedIndices:q,sketch:e,enableWhiteOutlines:K,showHovered:w,showDepressed:L,hoveredIndexes:le,pressedIndex:B})}})}static drawGraphStrokeToCtx(e,t,o,i){let{type:n,graphMode:a,op:s,arrowMode:l,arrowHeadScaleFactor:c,baseLineWidth:p}=i,h=p*c;if(a===20||a===21){let[E,S,k]=o,T=t.mathToPixels.mapX(E),I=t.mathToPixels.mapY(S),P=t.mathToPixels.dangerouslyGetXScaleFactor(),A=t.mathToPixels.dangerouslyGetYScaleFactor(),D=Math.abs(k*P),G=Math.abs(k*A),N,U;if(a===21?(N=-o[3],U=-o[4]):(N=0,U=2*Math.PI),e.save(),oo(e,"dcg-svg-curve"),e.desmos_batching||e.beginPath(),n===__dcg_shared_module_exports__['Qd'].DASHED){let K=Vi.getDashedPattern(p,!!t.settings.highlight);e.setLineDash(K)}else if(n===__dcg_shared_module_exports__['Qd'].DOTTED){let K=Vi.getDottedPattern(p,!!t.settings.config.projectorMode,!!t.settings.highlight);e.setLineDash(K)}e.ellipse(T,I,D,G,0,N,U,N>U),e.desmos_batching||e.stroke(),Xr(e),e.restore();return}else if(a===23){let[E,S,k,T,I]=o,P=!I&&gk(T),A=Jd(T,t),D=t.mathToPixels.mapX(E),G=t.mathToPixels.mapY(S),N=t.mathToPixels.dangerouslyGetXScaleFactor(),U=t.mathToPixels.dangerouslyGetYScaleFactor(),K=N>U?N/U:1,H=N>U?1:U/N,w=Math.abs(K*A),F=Math.abs(H*A);if(e.save(),oo(e,"dcg-svg-curve"),e.globalAlpha=.4*i.opacityMultiplier,e.desmos_batching||e.beginPath(),e.moveTo(D,G),e.lineTo(D+w*Math.cos(-k),G+F*Math.sin(-k)),wK({displayAsRightAngle:P,rx:w,ry:F,startAngle:k,deltaAngle:T,yscreen:G,xscreen:D},e),e.lineTo(D,G),!e.desmos_batching&&!I&&e.fill(),e.globalAlpha=i.opacityMultiplier,e.desmos_batching||e.beginPath(),wK({displayAsRightAngle:P,rx:w,ry:F,startAngle:k,deltaAngle:T,yscreen:G,xscreen:D},e),I){let V=-k-T,B=D+w*Math.cos(V),L=G+F*Math.sin(V);WD(e,B,L,-k,-T,10,w)}e.globalAlpha=i.opacityMultiplier,e.desmos_batching||e.stroke(),e.lineWidth=1.5,e.globalAlpha=.2*i.opacityMultiplier,e.moveTo(D+1.5*w*Math.cos(-k),G+1.5*F*Math.sin(-k)),e.lineTo(D,G),e.lineTo(D+1.5*w*Math.cos(-k-T),G+1.5*F*Math.sin(-k-T)),e.stroke(),Xr(e),e.restore()}else if(a===17||a===18||a===19||a===24){let{clipped:E,mapped:S}=Au(o,t,a,e.lineWidth);if(E.length===0)return;let[k,T,I,P]=E,[A,D,G,N]=S;e.save(),oo(e,"dcg-svg-curve");let U;if(e.desmos_batching||e.beginPath(),n==__dcg_shared_module_exports__['Qd'].DASHED?(U=new Vi(e,Vi.getTotalSegmentLength(E),Vi.getDashedPattern(p,!!t.settings.highlight)),U.drawSegment(E)):n==__dcg_shared_module_exports__['Qd'].DOTTED?(U=new Vi(e,Vi.getTotalSegmentLength(E),Vi.getDottedPattern(p,!!t.settings.config.projectorMode,!!t.settings.highlight)),U.drawSegment(E)):(e.moveTo(k,T),e.lineTo(I,P)),a===17){let K=SK(n)*h,{startArrow:H,endArrow:w}=fae(mae(a,l));H&&As(e,G,N,A,D,K),w&&As(e,A,D,G,N,K)}else if(a===24&&(A!==G||D!==N)){let K=SK(n)*h;As(e,A,D,G,N,K)}e.desmos_batching||e.stroke(),Xr(e),e.restore();return}let g=Jb(a,s!=="=",t.settings),m=ol(o,t.mathToPixels,g),b=wB(m,kK(t.screen,e.lineWidth));if(b.length===0)return;e.save(),oo(e,"dcg-svg-curve");let x;if(e.desmos_batching||e.beginPath(),n==__dcg_shared_module_exports__['Qd'].DASHED)x=new Vi(e,Vi.getTotalSegmentLength(b),Vi.getDashedPattern(p,!!t.settings.highlight)),x.drawSegment(b);else if(n==__dcg_shared_module_exports__['Qd'].DOTTED)x=new Vi(e,Vi.getTotalSegmentLength(b),Vi.getDottedPattern(p,!!t.settings.config.projectorMode,!!t.settings.highlight)),x.drawSegment(b);else if((n===__dcg_shared_module_exports__['Qd'].SOLID||n==="default")&&e.lineWidth===1)if(b.length>4||b[0]!==b[2]&&b[1]!==b[3]){e.moveTo(b[0],b[1]);for(let S=0;S<b.length;S+=2)e.lineTo(b[S],b[S+1])}else{e.moveTo(__dcg_shared_module_exports__['T'](b[0]),__dcg_shared_module_exports__['T'](b[1]));for(let S=0;S<b.length;S+=2)e.lineTo(__dcg_shared_module_exports__['T'](b[S]),__dcg_shared_module_exports__['T'](b[S+1]))}else{e.moveTo(b[0],b[1]);for(let E=0;E<b.length;E+=2)e.lineTo(b[E],b[E+1])}e.desmos_batching||e.stroke(),Xr(e),e.restore()}static mapPointToScreen(e,t,o){let n=e.mapx(t);if(n<-20||n>e.screen.width+20)return null;let a=e.mapy(o);return a<-20||a>e.screen.height+20?null:{x:n,y:a}}static drawPoint(e,t,o,i,n,a,s){let l={type:"animation",percent:0};if(a||s){let c=e.globalAlpha;s?e.globalAlpha*=_P.IS_DEPRESSED:a&&(e.globalAlpha*=_P.IS_HOVERED);let p=this.hoveredRadius(i,t);n&&(p+=1.5),this.drawPointShape(e,t,o,p,i,l),e.globalAlpha=c}if(n){let c=e.fillStyle;e.fillStyle="white";let p={type:"outline"};this.drawPointShape(e,t,o,i,i,p),e.fillStyle=c}this.drawPointShape(e,t,o,i,i,l)}static drawMoveablePoint(e,t,o,i,n,a,s){if(n){let p=e.fillStyle;e.fillStyle="white",this.drawPointShape(e,t,o,i,i,{type:"outline"}),e.fillStyle=p}let l=e.globalAlpha;e.globalAlpha*=.35,this.drawPointShape(e,t,o,i,i,{type:"halo"}),e.globalAlpha=l;let c=a?.7*i+.3*__dcg_shared_module_exports__['Be'](i):i;this.drawPointShape(e,t,o,c,i,{type:"animation",percent:s})}static hoveredRadius(e,t){switch(t){case __dcg_shared_module_exports__['Pd'].CROSS:case __dcg_shared_module_exports__['Pd'].PLUS:case __dcg_shared_module_exports__['Pd'].TRIANGLE:case __dcg_shared_module_exports__['Pd'].DIAMOND:case __dcg_shared_module_exports__['Pd'].STAR:return 1.5*1.1*e;default:return 1.5*e}}static moveablePointHalo(e,t){let o=__dcg_shared_module_exports__['Be'](e);return t===__dcg_shared_module_exports__['Pd'].CROSS?o*=1.1:t===__dcg_shared_module_exports__['Pd'].SQUARE?o*=.93:t===__dcg_shared_module_exports__['Pd'].STAR&&(o*=1.05),o}static outlineWidth(e){return e===__dcg_shared_module_exports__['Pd'].CROSS?2:e===__dcg_shared_module_exports__['Pd'].SQUARE?1.4:e===__dcg_shared_module_exports__['Pd'].PLUS?2.25:e===__dcg_shared_module_exports__['Pd'].STAR?3.5:e===__dcg_shared_module_exports__['Pd'].DIAMOND?2:e===__dcg_shared_module_exports__['Pd'].TRIANGLE?2.25:1.5}static drawPointShape(e,t,o,i,n,a){if(i<=0)return;let s=this.moveablePointHalo(i,t),l=i>n,c=i;a.type==="animation"?c=i+(s-i)*a.percent:a.type=="halo"?c=s:a.type==="outline"&&(c=i+this.outlineWidth(t));let p=a.type==="halo"||a.type==="animation"&&a.percent>0,h=a.type==="outline"?i:void 0,g=l||p;if(t===__dcg_shared_module_exports__['Pd'].STAR){let m=0;l&&(m=.4,c*=1.1),p&&(m=.5),this.drawStar(e,o,m,c,h)}else if(t===__dcg_shared_module_exports__['Pd'].SQUARE){let m=[[-1,-1],[-1,1],[1,1],[1,-1]];this.drawFilledPoint(e,m,o,c,g?.2:0,h)}else if(t===__dcg_shared_module_exports__['Pd'].TRIANGLE){let m=[[0,-1.4],[-1.212442,.7],[1.212442,.7]];this.drawFilledPoint(e,m,o,c,g?.2:0,h)}else if(t===__dcg_shared_module_exports__['Pd'].DIAMOND){let m=[[-1.2,0],[0,1.2],[1.2,0],[0,-1.2]];this.drawFilledPoint(e,m,o,c,g?.2:0,h)}else if(t===__dcg_shared_module_exports__['Pd'].PLUS){let m=n,b=(c*1.2-n*.5)/2;p&&(m=Math.max(m,b)),e.beginPath(),this.drawPlus(e,o,m,b);let x=(i*1.2-n*.5)/2;a.type==="outline"&&this.drawPlus(e,o,m,x),e.closePath(),e.fill("evenodd")}else if(t===__dcg_shared_module_exports__['Pd'].CROSS){let m=n*Math.SQRT1_2,b=(c*1.2-n*.5)/2;p&&(m=Math.max(m,b/1.5)),e.beginPath(),this.drawCross(e,o,m,b);let x=(i*1.2-n*.5)/2;a.type==="outline"&&this.drawCross(e,o,m,x),e.closePath(),e.fill("evenodd")}else if(t===__dcg_shared_module_exports__['Pd'].OPEN){let m=a.type==="outline"?i:i/2;if(this.drawCircle(e,o,c,m),a.type==="animation"){let b=i+(s-i)*a.percent*.5,x=e.fillStyle;e.fillStyle="white",this.drawCircle(e,o,b/2),e.fillStyle=x}}else this.drawCircle(e,o,c,h)}static drawFilledPoint(e,t,o,i,n,a){let s=t.length;if(e.beginPath(),n>0){let l=1-n,c=t[0][0]+n*(t[1][0]-t[0][0]),p=t[0][1]+n*(t[1][1]-t[0][1]);e.moveTo(o.x+c*i,o.y+p*i);for(let h=1;h<=s;h++){let g=i*t[h-1][0],m=i*t[h-1][1],b=i*t[(h+1)%s][0],x=i*t[(h+1)%s][1],E=i*t[h%s][0],S=i*t[h%s][1];this.drawRoundedCorner(e,o,l,g,m,b,x,E,S)}}else{e.moveTo(o.x+t[0][0]*i,o.y+t[0][1]*i);for(let l=1;l<s;l++)e.lineTo(o.x+t[l][0]*i,o.y+t[l][1]*i)}if(a){e.moveTo(o.x+t[s-1][0]*a,o.y+t[s-1][1]*a);for(let l=s-2;l>=0;l--)e.lineTo(o.x+t[l][0]*a,o.y+t[l][1]*a)}e.closePath(),e.fill()}static drawStar(e,t,o,i,n){let a=o>0,s=[[0,.5],[.76942,1.059015],[.47553,.15451],[1.24495,-.40451],[.293895,-.40451],[0,-1.309015],[-.293895,-.40451],[-1.24495,-.40451],[-.47553,.15451],[-.76942,1.059015]];if(a){e.beginPath(),e.moveTo(t.x+s[0][0]*i,t.y+s[0][1]*i);let l=s.length;for(let c=1;c<l;c++)if(c%2===0)e.lineTo(t.x+s[c][0]*i,t.y+s[c][1]*i);else{let p=1-o,h=i*s[c-1][0],g=i*s[c-1][1],m=i*s[(c+1)%l][0],b=i*s[(c+1)%l][1],x=i*s[c][0],E=i*s[c][1];this.drawRoundedCorner(e,t,p,h,g,m,b,x,E)}e.closePath(),e.fill()}else this.drawFilledPoint(e,s,t,i,0,n)}static drawRoundedCorner(e,t,o,i,n,a,s,l,c){let p=i+o*(l-i),h=n+o*(c-n),g=l+(1-o)*(a-l),m=c+(1-o)*(s-c),b=(p+g)/2,x=(h+m)/2,E=Math.hypot(p-b,h-x),S=Math.hypot(l-b,c-x),k=E*E/S,T=b+k*(b-l)/S,I=x+k*(x-c)/S,P=Math.atan2(h-I,p-T),A=Math.atan2(m-I,g-T),D=Math.hypot(T-p,I-h);e.lineTo(t.x+p,t.y+h),e.arc(t.x+T,t.y+I,D,P,A,!0)}static drawPlus(e,t,o,i){let n=Math.PI;e.moveTo(t.x+i,t.y-i),e.arc(t.x+o,t.y,i,-n/2,n/2),e.lineTo(t.x+i,t.y+i),e.arc(t.x,t.y+o,i,0,n),e.lineTo(t.x-i,t.y+i),e.arc(t.x-o,t.y,i,n/2,-n/2),e.lineTo(t.x-i,t.y-i),e.arc(t.x,t.y-o,i,n,0)}static drawCross(e,t,o,i){let n=Math.PI;e.moveTo(t.x+i*Math.SQRT2,t.y),e.arc(t.x+o,t.y+o,i,-n/4,-5*n/4),e.lineTo(t.x,t.y+i*Math.SQRT2),e.arc(t.x-o,t.y+o,i,-7*n/4,-3*n/4),e.lineTo(t.x-i*Math.SQRT2,t.y),e.arc(t.x-o,t.y-o,i,3*n/4,-n/4),e.lineTo(t.x,t.y-i*Math.SQRT2),e.arc(t.x+o,t.y-o,i,-3*n/4,n/4)}static drawCircle(e,t,o,i){e.beginPath(),e.arc(t.x,t.y,o,0,2*Math.PI),i&&e.arc(t.x,t.y,i,0,2*Math.PI,!0),e.closePath(),e.fill()}static drawPointToCtx(e){let{ctx:t,projection:o,sketch:i,x:n,y:a}=e,{sizeFactor:s,hovered:l,pressed:c}=e,p=t.globalAlpha,h=r.mapPointToScreen(o,n,a);if(!h||e.sizeFactor!==void 0&&(e.sizeFactor<=0||!isFinite(e.sizeFactor)))return!1;oo(t,"dcg-svg-point"),e.alpha!==void 0?t.globalAlpha=e.alpha:t.globalAlpha=.9,e.opacityFactor!==void 0&&(t.globalAlpha*=e.opacityFactor);let g=o.settings.pointLineWidth;e.overrideSize&&(g=o.settings.config.projectorMode?17:11),s!=null||(s=1),i.tokenSelected?s*=1.5:i.tokenHovered&&(s*=HD),g*=s,e.colorOverride&&(t.fillStyle=e.colorOverride,t.strokeStyle=e.colorOverride);let m=g*.5,b=e.style,x=e.enableWhiteOutline;return this.drawPoint(t,b,h,m,x,l,c),Xr(t),t.globalAlpha=p,!0}static drawPointsToCtx(e){let{ctx:t,projection:o,segment:i,style:n,droppedIndices:a}=e,{sizeOverrideIdxs:s,opacityOverrideIdx:l,baseOpacity:c}=e,{showHovered:p,showDepressed:h,hoveredIndexes:g}=e,{colorOverrides:m,sizeFactor:b,opacityFactor:x,pressedIndex:E}=e,S=n!=null?n:__dcg_shared_module_exports__['Pd'].POINT,k=t.lineWidth;t.lineWidth=o.settings.pointLineWidth;let T;Array.isArray(c)?T=c.map(P=>r._clampedOpacity(P,.9)):T=r._clampedOpacity(c,.9);let I=[];if(a){let P=i.length+Object.keys(a).length;for(let A=0;A<P;A++)a[A]||I.push(A)}for(let P=0;P<i.length;P++){let A=a?I[P]:P,D=h&&(E===void 0||E===A),G=p&&(g===void 0||g[A]);r.drawPointToCtx({ctx:t,projection:o,sketch:e.sketch,x:i[P][0],y:i[P][1],alpha:l===A?.6:Array.isArray(T)?T[A]:T,style:S,overrideSize:s[A],sizeFactor:Array.isArray(b)?b[A]:b,opacityFactor:Array.isArray(x)?x[A]:x,colorOverride:m&&m[A],enableWhiteOutline:e.enableWhiteOutlines,hovered:G,pressed:D})}t.lineWidth=k}static fillPolygonFillToCtx(e,t){if(t.length>=6){oo(e,"dcg-svg-region"),e.desmos_batching||e.beginPath(),e.moveTo(t[0],t[1]);for(let o=2;o<t.length;o+=2)e.lineTo(t[o],t[o+1]);e.lineTo(t[0],t[1]),e.desmos_batching||e.fill(),Xr(e)}}static _clampedOpacity(e,t){return typeof e!="number"?t:e<0?0:e>1?1:isFinite(e)?e:t}};function*hae(r,e){let t=e.branchMode,o=e.operator,i=o=="<"||o==">"||o=="<="||o==">=",n=!r.settings.disableFill&&(t===7||i),a=o=="<="||o=="<";if(n)for(let s of e.segments)switch(t){case 6:{let l=a?0:r.viewport.polarDiameter(),c=r.settings.degreeMode?180:2*Math.PI;yield*AB(s,l,c);break}case 2:{let l=a?r.viewport.ymin:r.viewport.ymax;yield*dL(s,l);break}case 1:{let l=a?r.viewport.xmin:r.viewport.xmax;yield*dL(s,l);break}case 7:yield s}}function gae(r){switch(r){case 2:return fB;case 1:return mB;case 6:case 7:default:return uS}}function*KD(r,e){let t=e.branchMode;if(t!==1&&t!==2&&t!==6&&t!==7)return;let o=kK(r.screen);for(let i of hae(r,e)){let n=t===7?dc:Jb(t,!0,r.settings),a=ol(i,r.mathToPixels,n);yield cL(a,o,gae(e.branchMode),!1)}}function mae(r,e){return r===17?e===__dcg_shared_module_exports__['Wd'].DEFAULT?__dcg_shared_module_exports__['Wd'].NONE:e:__dcg_shared_module_exports__['Wd'].NONE}function fae(r){switch(r){case __dcg_shared_module_exports__['Wd'].NONE:return{startArrow:!1,endArrow:!1};case __dcg_shared_module_exports__['Wd'].POSITIVE:return{startArrow:!1,endArrow:!0};case __dcg_shared_module_exports__['Wd'].BOTH:return{startArrow:!0,endArrow:!0};default:let e=r;throw new Error("Unexpected arrowMode: "+e)}}function SK(r){switch(r){case"default":case __dcg_shared_module_exports__['Qd'].SOLID:case __dcg_shared_module_exports__['Qd'].DASHED:return 4;case __dcg_shared_module_exports__['Qd'].DOTTED:return 2;default:let e=r;throw new Error("Unexpected line style "+e)}}function As(r,e,t,o,i,n){let a=Math.atan2(i-t,o-e),s=o-n*Math.cos(a-Math.PI/9),l=i-n*Math.sin(a-Math.PI/9),c=o-n*Math.cos(a+Math.PI/9),p=i-n*Math.sin(a+Math.PI/9),h=o-(n-2)*Math.cos(a-Math.PI/18),g=i-(n-2)*Math.sin(a-Math.PI/18),m=o-(n-2)*Math.cos(a+Math.PI/18),b=i-(n-2)*Math.sin(a+Math.PI/18);r.moveTo(o,i),r.lineTo(s,l),r.lineTo(c,p),r.lineTo(o,i),r.lineTo(h,g),r.lineTo(m,b),r.lineTo(o,i)}function WD(r,e,t,o,i,n,a){let s=o+i,l=n*Math.min(1,Math.max(.5,Math.abs(i)/.8)),c=i<=0,p=Math.PI/2;a<25?p+=.25:p+=.1,c||(p*=-1);let h=e+Math.cos(s+p),g=t+Math.sin(s+p);As(r,h,g,e,t,l)}function Jd(r,e){let t=20;return e.settings.config.projectorMode&&(t*=1.4),t}ce();ie();var Ru=__dcg_shared_module_exports__['e'](se());function bae(r,e){let t=document.createRange();t.selectNode(r);let o=t.getBoundingClientRect();if(!(o.width>0&&o.height>0))return;let n=r.nodeValue||"";if(!n)return;let a=window.getComputedStyle(r.parentElement),l=-.228*parseFloat(a.fontSize),c=a.fontStyle+" "+a.fontWeight+" "+a.fontSize+" "+a.fontFamily,p=o.left-e.originX,h=o.top-e.originY,g;if(a.transform!=="none"){let m=a.transform.match(/^matrix\(([\d.-]+), *([\d.-]+), *([\d.-]+), *([\d.-]+), *([\d.-]+), *([\d.-]+)\)$/);if(m){let b=a.transformOrigin.match(/^([\d.-]+)px ([\d.-]+)px$/);b&&(g={matrix:[parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3]),parseFloat(m[4]),parseFloat(m[5]),parseFloat(m[6])],origin:{x:parseFloat(b[1]),y:parseFloat(b[2])}})}}return{type:"text",text:n,color:a.color||"#000",font:c,x:p,y:h+o.height+l,hasOutline:e.hasOutline,transform:g}}function IK(r,e){r.beginPath();for(let t of e.instructions)switch(t.type){case"moveTo":r.moveTo(t.x,t.y);break;case"lineTo":r.lineTo(t.x,t.y);break;case"arcTo":r.arcTo(t.cx,t.cy,t.x,t.y,t.radius);break;case"ellipse":r.ellipse(t.centerX,t.centerY,t.radiusX,t.radiusY,t.rotation,t.startAngle,t.endAngle,t.anticlockwise);break}r.closePath()}function yae(r,e){let t=r.getBoundingClientRect();if(!(t.width>0&&t.height>0))return;let i=5,n=3,a=t.left-e.originX,s=t.top-e.originY,l=-i+a,c=t.width+i+a,p=-i+s,h=t.height+i+s;return{type:"path",hasOutline:!1,instructions:[{type:"moveTo",x:l+n,y:p},{type:"lineTo",x:c-n,y:p},{type:"arcTo",cx:c,cy:p,x:c,y:p+n,radius:n},{type:"lineTo",x:c,y:h-n},{type:"arcTo",cx:c,cy:h,x:c-n,y:h,radius:n},{type:"lineTo",x:l+n,y:h},{type:"arcTo",cx:l,cy:h,x:l,y:h-n,radius:n},{type:"lineTo",x:l,y:p+n},{type:"arcTo",cx:l,cy:p,x:l+n,y:p,radius:n}],strokeColor:"#C2C2C2",fillColor:"rgba(255,255,255,.75)"}}function xae(r,e){let t=r.getBoundingClientRect();if(!(t.width>0&&t.height>0))return;let i=15,n=5,a=2,s="#5a87cd",l=3,c=t.left-e.originX-i,p=t.top-e.originY-n,h=c+t.width+2*i,g=p+t.height+2*n,m=c+l,b=h-l,x=p+l,E=g-l,S=[{type:"moveTo",x:m,y:p},{type:"lineTo",x:b,y:p},{type:"arcTo",x:h,y:x,radius:l,cx:h,cy:p},{type:"lineTo",x:h,y:E},{type:"arcTo",x:b,y:g,radius:l,cx:h,cy:g},{type:"lineTo",x:m,y:g},{type:"arcTo",x:c,y:E,radius:l,cx:c,cy:g},{type:"lineTo",x:c,y:x},{type:"arcTo",x:m,y:p,radius:l,cx:c,cy:p}];l-=a,c+=a,p+=a,h-=a,g-=a,m=c+l,b=h-l,x=p+l,E=g-l;let k=[{type:"moveTo",x:m,y:p},{type:"arcTo",x:c,y:x,radius:l,cx:c,cy:p},{type:"lineTo",x:c,y:E},{type:"arcTo",x:m,y:g,radius:l,cx:c,cy:g},{type:"lineTo",x:b,y:g},{type:"arcTo",x:h,y:E,radius:l,cx:h,cy:g},{type:"lineTo",x:h,y:x},{type:"arcTo",x:b,y:p,radius:l,cx:h,cy:p},{type:"lineTo",x:m,y:p}];return{type:"path",instructions:S.concat(k),fillColor:s,hasOutline:!1}}function CK(r,e){if(r==="0px 0px")return;let t=r.match(/^([^ ]+) +(.+)$/);if(!t)return;let o=t[1],i=t[2],n=parseFloat(o),a=parseFloat(i);if(o.endsWith("%")&&(n*=e.width/100),o.endsWith("%")&&(a*=e.height/100),!(n===0||a===0))return[n,a]}function vae(r,e,t){if(e.borderTopWidth==="0px"&&e.borderBottomWidth==="0px")return;let o=r.getBoundingClientRect();if(!(o.width>0&&o.height>0))return;let n=o.left-t.originX,a=o.top-t.originY,{width:s,height:l}=o,c=parseFloat(e.borderTopWidth||"0"),p=parseFloat(e.borderBottomWidth||"0"),h="#000",g=[];if(c>0){e.borderTopColor&&(h=e.borderTopColor);let m=CK(e.borderTopLeftRadius,o),b=CK(e.borderTopRightRadius,o);m&&b?g.push({type:"ellipse",centerX:n+m[0],centerY:a+m[1],radiusX:m[0],radiusY:m[1],rotation:0,startAngle:Math.PI,endAngle:3*Math.PI/2,anticlockwise:!1},{type:"lineTo",x:n+o.width-b[0],y:a},{type:"ellipse",centerX:n+o.width-b[0],centerY:a+b[1],radiusX:b[0],radiusY:b[1],rotation:0,startAngle:3*Math.PI/2,endAngle:0,anticlockwise:!1},{type:"lineTo",x:n+o.width,y:a+b[1]+c},{type:"ellipse",centerX:n+b[0],centerY:a+b[1]+c,radiusX:b[0],radiusY:b[1],rotation:0,startAngle:0,endAngle:3*Math.PI/2,anticlockwise:!0},{type:"lineTo",x:n+m[0],y:a+c},{type:"ellipse",centerX:n+m[0],centerY:a+m[1]+c,radiusX:m[0],radiusY:m[1],rotation:0,startAngle:3*Math.PI/2,endAngle:Math.PI,anticlockwise:!0}):g.push({type:"moveTo",x:n,y:a},{type:"lineTo",x:s+n,y:a},{type:"lineTo",x:s+n,y:c+a},{type:"lineTo",x:n,y:c+a})}return p>0&&(e.borderBottomColor&&(h=e.borderBottomColor),g.push({type:"moveTo",x:n,y:a+l},{type:"lineTo",x:s+n,y:a+l},{type:"lineTo",x:s+n,y:p+a+l},{type:"lineTo",x:n,y:p+a+l})),{type:"path",instructions:g,fillColor:h,hasOutline:t.hasOutline}}function _K(r,e){let t=Math.sqrt(r[0]*r[0]+r[1]*r[1]),o=Math.sqrt(e[0]*e[0]+e[1]*e[1]),i=r[0]*e[0]+r[1]*e[1],n=Math.acos(i/(t*o));return r[0]*e[1]-r[1]*e[0]<0&&(n*=-1),n}function wae(r,e,t,o,i,n,a,s,l){let c=Math.cos(i),p=Math.sin(i),h=(r-s)/2,g=(e-l)/2,m=c*h+p*g,b=-p*h+c*g,x=t*t,E=o*o,S=m*m,k=b*b,T=Math.sqrt((x*E-x*k-E*S)/(x*k+E*S));n===a&&(T*=-1);let I=T*t*b/o,P=-T*o*m/t,A=(r+s)/2,D=(e+l)/2,G=c*I-p*P+A,N=p*I+c*P+D,U=[1,0],K=[(m-I)/t,(b-P)/o],H=[(-m-I)/t,(-b-P)/o],w=_K(U,K),F=_K(U,H);return{centerX:G,centerY:N,radiusX:t,radiusY:o,startAngle:w,endAngle:F,rotation:i,anticlockwise:a===0}}var MK={};function Sae(r,e){let t=r+"-"+e,o=MK[t];if(o)return o;o=[],MK[t]=o;let i=e.split(" ");if(i.length!==4)return o;let n=parseFloat(i[0]),a=parseFloat(i[2]),s=parseFloat(i[1]),l=parseFloat(i[3]),c=a-n,p=l-s;function h(P){return(P-n)/c}function g(P){return(P-s)/p}let m="[0-9-.]+",b="(M"+m+" "+m+")",x="(L"+m+" "+m+")",E="(A"+m+" "+m+" "+m+" "+m+" "+m+" "+m+" "+m+")",S=new RegExp(b+"|"+x+"|"+E,"g"),k=r.match(S);if(!k||!k.length)return o;let T=NaN,I=NaN;for(let P of k){let A=P.substr(1).split(" ").map(parseFloat);switch(P[0]){case"M":T=h(A[0]),I=g(A[1]),o.push({type:"moveTo",x:T,y:I});break;case"L":T=h(A[0]),I=g(A[1]),o.push({type:"lineTo",x:T,y:I});break;case"A":let D=A[0]/c,G=A[1]/p,N=A[2],U=A[3],K=A[4],H=h(A[5]),w=g(A[6]),F=wae(T,I,D,G,N,U,K,H,w);T=H,I=w,o.push({type:"ellipse",...F});break}}return o}function Tae(r,e){let t=r.childNodes[0];if(!t||t.nodeName!=="path")return;let o=r.getBoundingClientRect();if(!(o.width>0&&o.height>0))return;let n=t.getAttribute("d")||"",a=r.getAttribute("viewBox")||"",s=Sae(n,a),l=window.getComputedStyle(r),c=o.width,p=o.height,h=o.left-e.originX,g=o.top-e.originY;s=__dcg_shared_module_exports__['Uc'](s);for(let m of s)switch(m.type){case"moveTo":case"lineTo":m.x=m.x*c+h,m.y=m.y*p+g;break;case"arcTo":m.x=m.x*c+h,m.y=m.y*p+g,m.cx=m.x*c+h,m.cy=m.y*p+g,m.radius*=c;break;case"ellipse":m.centerX=m.centerX*c+h,m.centerY=m.centerY*p+g,m.radiusX*=c,m.radiusY*=p;break;default:return m}return{type:"path",fillColor:l.color||"#000",instructions:s,hasOutline:e.hasOutline}}function LK(r,e,t){if(r.classList.contains("dcg-mq-mathspeak"))return;let o=window.getComputedStyle(r),i=vae(r,o,e);i&&t.push(i);let n=r.childNodes;for(let a=0;a<n.length;a++){let s=n[a];if(s.nodeType===3){let l=bae(s,e);l&&t.push(l)}else if(s.nodeName==="svg"){let l=Tae(s,e);l&&t.push(l)}else s.nodeType===1&&LK(s,e,t)}}function bk(r,e){let t=[];if(e.hasBorder){let o=yae(r,e);o&&t.push(o)}if(e.hasFocus){let o=xae(r,e);o&&t.push(o)}return LK(r,e,t),t}function yk(r,e){oo(e,"dcg-svg-label"),e.save(),Xr(e);for(let t of r)switch(t.type){case"path":t.hasOutline&&(e.strokeStyle="#FFF",e.lineWidth=3,e.miterLimit=10,IK(e,t),e.stroke());break;case"text":t.hasOutline&&(e.font=t.font,e.strokeStyle="#FFF",e.lineWidth=3,e.miterLimit=2,t.transform?(e.save(),AK(e,t),e.strokeText(t.text,0,0),e.restore()):e.strokeText(t.text,t.x,t.y));break;default:return t}for(let t of r)switch(t.type){case"path":IK(e,t),t.strokeColor&&(e.strokeStyle=t.strokeColor,e.lineWidth=1,e.miterLimit=10,e.stroke()),t.fillColor&&(e.fillStyle=t.fillColor,e.fill());break;case"text":e.font=t.font,e.fillStyle=t.color,t.transform?(e.save(),AK(e,t),e.fillText(t.text,0,0),e.restore()):e.fillText(t.text,t.x,t.y);break;default:return t}e.restore()}function AK(r,e){if(!e.transform)return;let t=Math.abs(e.transform.matrix[0]),o=Math.abs(e.transform.matrix[3]);r.translate(e.x+e.transform.origin.x,e.y+e.transform.origin.y),r.transform.apply(r,e.transform.matrix),r.translate(-e.transform.origin.x/t,-e.transform.origin.y/o)}ce();ie();var kk=__dcg_shared_module_exports__['e'](se());function PK(r){if(!r)return;let e=[];for(let t of r.split(" ")){let o=t.indexOf("|"),i=o!==-1?t.slice(0,o):t;e.push(i)}return e}function Gm(r,e,t){let o=PK(t);return e==="nemeth"?lc(r,{operatorNames:o}):e==="ueb"?cc(r,{operatorNames:o}):{isError:!0,error:"Braille mode should be 'nemeth' or 'ueb'"}}function xk(r,e,t){let o=PK(t);return e==="nemeth"?sL(r,{operatorNames:o}):e==="ueb"?lL(r,{operatorNames:o}):{isError:!0,error:"Braille mode should be 'nemeth' or 'ueb'"}}ie();var OK=__dcg_shared_module_exports__['e'](se());Vt();ie();var DK=__dcg_shared_module_exports__['e'](se());var St=class extends DK.View{template(){return this.props.children?this.props.children:d("div",{onMount:e=>this.onMountMathquill(e)})}onMount(){if(this.props.children){let e=this.findAllRootDOMNodes();if(e.length!==1)throw new Error(`StaticMathquillView expects exactly 1 child DOM Node. Got: ${e.length}`);let t=e[0];if(t instanceof HTMLElement)this.onMountMathquill(t);else throw new Error("StaticMathquillView expects an HTMLElement as child DOM node")}}onMountMathquill(e){var o,i,n,a,s,l,c,p;let t=(i=(o=this.props).tokenController)==null?void 0:i.call(o);t&&(this.mathquillTokenHelper=new Nm(t,e,!0)),this.staticMath=vs.StaticMath(e,{...(a=(n=this.props).config)==null?void 0:a.call(n),tabindex:(l=(s=this.props).tabbable)!=null&&l.call(s)?0:-1,overrideKeystroke:(h,g)=>{var m,b;(b=(m=this.props).onUserPressedKey)!=null&&b.call(m,h,g)&&g.stopPropagation()}}),this.updateMathquill(),e.classList.add("dcg-static-mathquill-view"),(p=(c=this.props).didMountMathquill)==null||p.call(c,this.staticMath)}didUpdate(){this.updateMathquill()}updateMathquill(){var e;this.updateTabbable(),this.updateMathquillAria(),this.updateMathquillLatex(),(e=this.mathquillTokenHelper)==null||e.updateTokens(this.props.latex())}updateTabbable(){var e;this.props.tabbable&&((e=this.staticMath)==null||e.config({tabindex:this.props.tabbable()?0:-1}))}updateMathquillLatex(){if(!this.staticMath)return;let e=this.props.latex();this.lastLatex!==e&&(this.staticMath.latex(e),this.lastLatex=e,this.props.onReflow&&this.props.onReflow())}updateMathquillAria(){this.staticMath&&this.props.getAriaLabel&&this.staticMath.setAriaLabel(this.props.getAriaLabel())}};var vk=class extends OK.View{template(){return d(St,{latex:this.props.latex,config:this.props.config,tabbable:()=>this.props.tabbable?this.props.tabbable():!0,getAriaLabel:this.props.getAriaLabel,tokenController:this.props.tokenController,onUserPressedKey:this.props.onUserPressedKey,didMountMathquill:e=>this.didMountMathquill(e)})}didMountMathquill(e){var t,o;this.mathquillFocus=new Vg(e,re(e.el()),this.props),this.didUpdate(),(o=(t=this.props).didMountMathquill)==null||o.call(t,e),this.props.isFocused()&&e.select(),re(e.el()).on("dcg-tap",()=>{if(ja)return;let i=e.selection();i.startIndex===i.endIndex&&e.select()})}willUnmount(){var e;(e=this.mathquillFocus)==null||e.willUnmount()}didUpdate(){var e;(e=this.mathquillFocus)==null||e.updateMathquillFocused()}};ie();var wk=__dcg_shared_module_exports__['e'](se());Vt();var{Input:kae}=wk.Components,Du=class extends wk.View{init(){this.ASCIICharacters=` A1B'K2L@CIF/MSP"E3H9O6R^DJG>NTQ,*5<-U8V.%[$+X!&;:4\\0Z7(_?W]#Y)=`,this.ASCIITable=[],this.HomeRowCharacters="FDSJKL",this.charCodes=[],this.sixKeyModel={keysDown:0,stickyKeysDown:0};let e;for(e=0;e<this.ASCIICharacters.length;e++)this.ASCIITable.push(this.ASCIICharacters.charCodeAt(e));for(e=0;e<this.HomeRowCharacters.length;e++)this.charCodes.push(this.HomeRowCharacters.charCodeAt(e))}template(){return d(kae,{class:this.const("dcg-braille-input dcg-do-blur"),tabIndex:()=>this.props.tabIndex?this.props.tabIndex():0,readOnly:()=>this.props.isStatic()?!0:void 0,autocomplete:this.const("off"),autocorrect:this.const("off"),autocapitalize:this.const("off"),spellcheck:this.const("false"),onKeyDown:this.bindFn(this.onKeydown),onKeyUp:this.bindFn(this.onKeyUp),onInput:this.bindFn(this.props.onInput),value:()=>this.props.value(),"aria-label":()=>this.props.ariaLabel()||Sa(""),didMount:this.bindFn(this.didInputMount),didUnmount:this.bindFn(this.props.didUnmount),placeholder:()=>this.props.placeholder?this.props.placeholder():"",size:()=>this.props.size&&this.props.size()})}didInputMount(e){this.rootNode=e,this.rootNode===document.activeElement&&!this.props.isFocused()&&this.props.onFocusedChanged(!0,new FocusEvent("focus")),re(this.rootNode).on("focus",t=>{this.props.isFocused()||this.props.onFocusedChanged(!0,t.originalEvent||t)}).on("blur",t=>{this.props.isFocused()&&this.props.onFocusedChanged(!1,t.originalEvent||t)}).on("dcg-tap",()=>{var t,o;p0()&&this.props.isStatic()&&((o=(t=this.props).selectOnFocus)==null?void 0:o.call(t))!==!1&&this.rootNode.select()}),this.props.didMount(e),this.updateFocus()}didUpdate(){this.updateFocus()}updateFocus(){var e,t;this.rootNode&&(this.props.isFocused()&&document.activeElement!==this.rootNode&&(this.rootNode.focus(),((t=(e=this.props).selectOnFocus)!=null&&t.call(e)||this.props.isStatic())&&this.rootNode.select()),!this.props.isFocused()&&document.activeElement===this.rootNode&&this.rootNode.blur())}onKeydown(e){let t=this.charCodes.indexOf(e.which);!this.props.isStatic()&&this.isSixKeyInput()&&!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&t!==-1?(this.sixKeyModel={...this.sixKeyModel,keysDown:this.addKey(this.sixKeyModel.keysDown,t),stickyKeysDown:this.addKey(this.sixKeyModel.stickyKeysDown,t)},e.preventDefault()):this.props.onKeyDown&&this.props.onKeyDown(e)}onKeyUp(e){let t=this.charCodes.indexOf(e.which),o=!1;return!this.props.isStatic()&&this.isSixKeyInput()&&!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&t!==-1?(this.sixKeyModel={...this.sixKeyModel,keysDown:this.removeKey(this.sixKeyModel.keysDown,t)},this.sixKeyModel.keysDown===0&&(this.addCharacter(this.bitsToASCII(this.sixKeyModel.stickyKeysDown)),this.sixKeyModel={...this.sixKeyModel,stickyKeysDown:0})):o=!0,o||e.preventDefault(),o}addKey(e,t){return e|1<<t}removeKey(e,t){return e&~(1<<t)}bitsToASCII(e){return String.fromCharCode(this.ASCIITable[e])}addCharacter(e){this.rootNode&&!this.props.isStatic()&&(this.rootNode.setRangeText(e,this.rootNode.selectionStart,this.rootNode.selectionEnd,"end"),this.props.onInput(this.rootNode.value))}isSixKeyInput(){return typeof this.props.sixKeyInput=="function"&&this.props.sixKeyInput()}};ie();var FK=__dcg_shared_module_exports__['e'](se());ce();ie();var Fc=__dcg_shared_module_exports__['e'](se());Vt();Vt();function Sk(r){return Array.from(r.querySelectorAll('input:enabled, button:enabled, select:enabled, textarea:enabled, [tabindex="0"], a[href], summary')).filter(e=>!e.matches('[aria-hidden="true"], [aria-hidden="true"] *, [aria-disabled="true"], [aria-disabled="true"] *, [tabindex="-1"]')&&kd(e))}function RK(r){return function(t){if(Pe(t)==xa&&r){let o=Sk(r);if(o.length===0)return;let i=o[0],n=o[o.length-1];t.shiftKey&&document.activeElement===i?(t.preventDefault(),re(n).trigger("focus")):!t.shiftKey&&document.activeElement===n?(t.preventDefault(),re(i).trigger("focus")):document.activeElement&&!r.contains(document.activeElement)&&(t.preventDefault(),re(i).trigger("focus"))}}}function Al(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{let e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}var{IfElse:Eae}=Fc.Components,Iae=500,Ll=5,fx=2,$D=class extends Fc.View{constructor(){super(...arguments),this.offsetLeft=0}init(){this.uuid=this.props.uuid()}gravity(){var e,t;return((t=(e=this.props).gravity)==null?void 0:t.call(e))||"s"}template(){return _("div",{class:()=>{var e,t,o,i;return{"dcg-tooltip-positioning-container":!0,"dcg-tooltip-gravity-n-s":this.gravity()==="n"||this.gravity()==="s","dcg-tooltip-gravity-e-w":this.gravity()==="e"||this.gravity()==="w","dcg-tooltip-theme-light":((t=(e=this.props).theme)==null?void 0:t.call(e))==="light","dcg-tooltip-theme-dark":((i=(o=this.props).theme)==null?void 0:i.call(o))!=="light"}},style:()=>{var e,t,o,i;return{top:`${this.props.hitAreaRect().top+(((t=(e=this.props).offset)==null?void 0:t.call(e).top)||0)}px`,left:`${this.props.hitAreaRect().left+(((i=(o=this.props).offset)==null?void 0:i.call(o).left)||0)}px`,width:`${this.props.hitAreaRect().width}px`,height:`${this.props.hitAreaRect().height}px`}},children:[d("div",{class:u("dcg-tooltip-message-container"),style:this.bindFn(this.getMessageStyle),children:d("div",{role:u("tooltip"),id:this.const(this.uuid),class:()=>{var e,t;return{"dcg-tooltip-message":!0,"dcg-text-selectable":(t=(e=this.props).sticky)==null?void 0:t.call(e),"dcg-sticky-not-stuck":this.props.isStickyAndNotStuck()}},onMount:e=>this.tooltipMessage=e,style:()=>({left:`${Math.round(this.offsetLeft)}px`}),children:Eae(()=>!!this.props.customTooltipView,{true:()=>this.props.customTooltipView(),false:()=>d("span",{children:this.props.tooltip})})})}),d("div",{class:()=>({"dcg-tooltip-arrow":!0,[this.getTooltipGravityClass()]:!0}),style:()=>{var e,t;return((t=(e=this.props).theme)==null?void 0:t.call(e))==="light"?this.getArrowWithBorderStyle():this.getSolidArrowStyle()}})]})}updatePositionIfNecessary(){if(this.gravity()!=="s"&&this.gravity()!=="n")return;let e=this.tooltipMessage.getBoundingClientRect(),t=this.tooltipMessage.closest(".dcg-tap-container");if(!t)return;let o=t.getBoundingClientRect();e.right+fx>o.right?this.offsetLeft=o.right-e.right-fx:e.left-fx<o.left&&(this.offsetLeft=o.left-e.left+fx),this.offsetLeft!==0&&this.update()}didMount(){this.updatePositionIfNecessary()}getTooltipGravityClass(){switch(this.gravity()){case"n":return"dcg-tooltip-gravity-n";case"s":return"dcg-tooltip-gravity-s";case"e":return"dcg-tooltip-gravity-e";case"w":return"dcg-tooltip-gravity-w"}}getArrowWithBorderStyle(){let e=this.gravity(),t=this.getBackgroundColor(),o="#bbb",i="8px",n={width:i,height:i,border:`1px solid ${o}`,background:t};switch(e){case"s":return{...n,top:"100%",left:"50%","margin-top":"1px","border-right":"0","border-bottom":"0"};case"n":return{...n,bottom:"100%",left:"50%","margin-bottom":"1px","border-left":"0","border-top":"0"};case"e":return{...n,top:"50%",left:"100%","margin-left":"1px","border-right":"0","border-top":"0"};case"w":return{...n,top:"50%",right:"100%","margin-right":"1px","border-left":"0","border-bottom":"0"};default:return e}}getSolidArrowStyle(){let e=this.gravity(),t=this.getBackgroundColor(),o=`transparent transparent ${t} transparent`,i=`${t} transparent transparent transparent`,n=`transparent ${t} transparent transparent`,a=`transparent transparent transparent ${t}`,s=`-${Ll}px`;switch(e){case"s":return{top:"100%",left:"50%",border:`${Ll}px solid transparent`,"border-color":o,"margin-top":s,"margin-left":s};case"n":return{bottom:"100%",left:"50%",border:`${Ll}px solid transparent`,"border-color":i,"margin-bottom":s,"margin-left":s};case"e":return{top:"50%",left:"100%",border:`${Ll}px solid transparent`,"border-color":n,"margin-left":`-${Ll}px`,"margin-top":s};case"w":return{top:"50%",right:"100%",border:`${Ll}px solid transparent`,"border-color":a,"margin-right":s,"margin-top":s};default:return e}}getBackgroundColor(){var e,t;return((t=(e=this.props).theme)==null?void 0:t.call(e))==="light"?"#fff":this.props.isStickyAndNotStuck()?"#666":"#000"}getMessageStyle(){let e=this.props.hitAreaRect(),t=this.gravity(),o=this.props.maxWidth();switch(t){case"s":return{top:"100%",width:`${o}px`,transform:"translate(-50%, 0)",left:`${.5*e.width}px`,"margin-top":`${Ll}px`,"text-align":"center"};case"n":return{bottom:"100%",width:`${o}px`,transform:"translate(-50%, 0)",left:`${.5*e.width}px`,"margin-bottom":`${Ll}px`,"text-align":"center"};case"e":return{transform:"translate(0, -50%)",left:"100%",width:`${o}px`,top:`${.5*e.height}px`,"margin-left":`${Ll}px`,"text-align":"left"};case"w":return{transform:"translate(0, -50%)",right:"100%",width:`${o}px`,top:`${.5*e.height}px`,"margin-right":`${Ll}px`,"text-align":"right"};default:return t}}};function Cae(){return document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}var Re=class extends Fc.View{init(){this.uuid=`dcg-tooltip-${Al()}`}template(){return d("div",{class:()=>{var e,t,o,i;return{"dcg-tooltip-hit-area-container":!0,"dcg-display-block":(t=(e=this.props).displayBlock)==null?void 0:t.call(e),"dcg-do-not-blur":!0,"dcg-sticky-tooltip":this.isSticky(),"dcg-tooltip-disabled":this.props.disabled&&this.props.disabled(),"dcg-cursor-default":!this.isSticky(),[((i=(o=this.props).additionalClass)==null?void 0:i.call(o))||""]:!!this.props.additionalClass}},handleEvent:u("true"),didMount:e=>{this.isMounted=!0,this.hitAreaNode=e,this.setupEventListeners(this.hitAreaNode)},tabIndex:()=>this.isSticky()?"0":"-1","aria-label":()=>this.isSticky()?this.props.tooltip():void 0,role:()=>this.isSticky()?"note":void 0,onFocus:()=>{this.isSticky()&&(this.showTooltip(),this.stickTooltip())},onTap:e=>{var t,o,i,n,a;if(this.isSticky())if(e.stopPropagation(),this.isStuck)this.hideTooltipImmediately();else{if((o=(t=this.props).disabled)!=null&&o.call(t))return;this.showTooltip(),this.stickTooltip(),(i=this.hitAreaNode)==null||i.focus()}else if(this.shouldShowOnTapstart()){if((a=(n=this.props).disabled)!=null&&a.call(n))return;this.showTooltip(),this.setUpHideOnExternalMousedown()}else this.hideTooltipImmediately()},children:this.props.children})}isSticky(){var e,t,o,i;return!!((t=(e=this.props).sticky)!=null&&t.call(e))&&!((i=(o=this.props).disabled)!=null&&i.call(o))}shouldShowOnTapstart(){var e,t;return!!((t=(e=this.props).showOnTapstart)!=null&&t.call(e))}didUpdate(){this.updateTooltip()}updateTooltip(){if(!this.wrapperRef)return;if(!this.props.tooltip()){this.hideTooltip();return}let e=this.hitAreaNode.getBoundingClientRect(),t=this.wrapperRef.elt.getBoundingClientRect(),{originalTop:o,originalLeft:i}=this.wrapperRef,n=e.top-t.top,a=e.left-t.left;Math.abs(n-o)>3||Math.abs(a-i)>3?this.hideTooltip():this.wrapperRef.view.update()}handleShowEvent(e){var o,i;if((i=(o=this.props).disabled)!=null&&i.call(o))return;let t=this.props.delay?this.props.delay():Iae;this.clearTimeouts(),this.showTooltipTimeout=setTimeout(e,t)}hideTooltipImmediately(){this.clearTimeouts(),this.hideTooltip()}handleHideEvent(){this.clearTimeouts(),this.hideTooltipTimeout=setTimeout(this.bindFn(this.hideTooltip),150)}setupEventListeners(e){re(e).on("tipsyshow",t=>{t.target===e&&this.handleShowEvent(()=>{this.showTooltip()})}).on("tipsyhide",t=>{t.target!==e||this.isStuck||this.handleHideEvent()}).on("keydown",t=>{!my(t)&&!Mg(t)&&this.isStuck&&this.hideTooltipImmediately()})}willUnmount(){this.clearTimeouts(),this.isMounted=!1,this.hideTooltip()}setUpHideOnExternalMousedown(){re(document).on(`mousedown.dcg-tooltip-${this.uuid} touchstart.dcg-tooltip-${this.uuid} pointerdown.dcg-tooltip-${this.uuid}`,e=>{this.wrapperRef&&(this.hitAreaNode.contains(e.target)||this.wrapperRef.elt.contains(e.target)||this.hideTooltip())})}stickTooltip(){this.isMounted&&this.wrapperRef&&(this.isStuck||(this.setUpHideOnExternalMousedown(),this.isStuck=!0,this.updateTooltip()))}clearTimeouts(){clearTimeout(this.showTooltipTimeout),clearTimeout(this.hideTooltipTimeout)}showTooltip(){var m,b,x;if(!this.isMounted||this.wrapperRef||!this.props.tooltip())return;let e=this.hitAreaNode.getBoundingClientRect(),t=document.createElement("div");t.className="dcg-tooltip-mount-pt";let o=this.hitAreaNode.closest(".dcg-tap-container"),i=Cae();(!!i&&i.contains(this.hitAreaNode)&&i.closest(".dcg-tap-container")?i:o).appendChild(t);let a=t.getBoundingClientRect(),s=e.left-a.left,l=e.top-a.top,c=200;if((b=(m=this.props).noWrap)!=null&&b.call(m)){let E=(x=t.closest(".dcg-tap-container"))==null?void 0:x.getBoundingClientRect();E&&(c=E.width-2*fx)}let p={...this.props,isStickyAndNotStuck:()=>this.isSticky()&&!this.isStuck,maxWidth:()=>c,hitAreaRect:()=>({top:l||0,left:s||0,width:e.width||0,height:e.height||0}),uuid:()=>this.uuid};this.setupEventListeners(t),re(t).on("dcg-tap",()=>{this.isSticky()&&this.stickTooltip()});let h=Fc.mountToNode($D,t,p);re(document).on(`keydown.dcg-tooltip-${this.uuid}`,E=>{Pe(E)===ri&&this.hideTooltip()});let g=()=>this.updateTooltip();window.addEventListener("scroll",g,!0),this.wrapperRef={elt:t,view:h,originalLeft:s,originalTop:l,onScroll:g},this.assignAriaDescribedBy()}hideTooltip(){this.clearTimeouts(),this.wrapperRef&&(this.isStuck=!1,re(document).off(`.dcg-tooltip-${this.uuid}`),window.removeEventListener("scroll",this.wrapperRef.onScroll,!0),this.restoreAriaDescribedBy(),Fc.unmountFromNode(this.wrapperRef.elt),this.wrapperRef.elt.parentNode&&this.wrapperRef.elt.parentNode.removeChild(this.wrapperRef.elt),this.wrapperRef=void 0)}assignAriaDescribedBy(){var t,o;if((o=(t=this.props).sticky)!=null&&o.call(t))return;let e=Sk(this.hitAreaNode)[0]||this.hitAreaNode;this.originalDescribedBy=e.getAttribute("aria-describedby"),e.setAttribute("aria-describedby",this.uuid)}restoreAriaDescribedBy(){var t,o;if((o=(t=this.props).sticky)!=null&&o.call(t))return;let e=Sk(this.hitAreaNode)[0]||this.hitAreaNode;this.originalDescribedBy?e.setAttribute("aria-describedby",this.originalDescribedBy):e.removeAttribute("aria-describedby")}};var Vm=class extends FK.View{template(){return d(Re,{...this.props,customTooltipView:()=>d(St,{latex:this.props.tooltip,config:this.const({})}),theme:this.const("light"),noWrap:this.const(!0),children:this.props.children})}};var{If:GK,IfElse:_ae}=kk.Components,Tk=class{constructor(){this.raw=Sa,this.s=ko}getBrailleMode(){return"none"}getSixKeyInput(){return!1}isKeypadEnabled(){return!1}};function Wr(r,e){var t;return{sixKeyInput:()=>r.getSixKeyInput(),mode:()=>r.getBrailleMode(),capExpressionSize:()=>{var o;return(o=r.getCapExpressionSize)!=null&&o.call(r)?{exceedsLimit:i=>i.length>Bm,onExpressionSizeExceeded:()=>{var i;return(i=r.dispatchExpressionSizeExceeded)==null?void 0:i.call(r)}}:void 0},mqConfig:()=>{var o,i;return(i=(o=r.getMathquillConfig)==null?void 0:o.call(r,{additionalOperators:(e==null?void 0:e.additionalOperators)||[]}))!=null?i:{autoCommands:dl(),..._d()}},tokenController:(t=r.getTokenController)==null?void 0:t.bind(r),needsSystemKeypad:()=>!r.isKeypadEnabled()}}var ir=class extends kk.View{constructor(){super(...arguments),this.currentBrailleValue=this.getBrailleFromLatex(this.props.latex()),this.currentBrailleMode=this.props.mode(),this.hasTranslationError=!1,this.currentLatex=this.props.latex()}brailleInputHasFocus(){return this.brailleInput!==void 0&&document.activeElement==this.brailleInput}isStatic(){var e,t;return!!((t=(e=this.props).isStatic)!=null&&t.call(e))}hasError(){var e,t;return!!((t=(e=this.props).hasError)!=null&&t.call(e))}willUpdate(){let e=this.currentLatex!==this.props.latex(),t=this.props.mode(),o=t!==this.currentBrailleMode&&t!=="none";this.brailleInputHasFocus()&&!e&&!o||(this.currentLatex=this.props.latex(),(o||!this.hasTranslationError||e||this.isStatic())&&(this.currentBrailleValue=this.getBrailleFromLatex(this.props.latex()),this.hasTranslationError=!1),this.currentBrailleMode=t)}onBrailleInput(e){var i,n;if(!this.props.onUserChangedLatex)return;let t=this.getLatexFromBraille(e);this.hasTranslationError=t.isError;let o=(n=(i=this.props).capExpressionSize)==null?void 0:n.call(i);if(!t.isError&&o&&o.exceedsLimit(t.value)){o.onExpressionSizeExceeded();return}this.currentBrailleValue=e,t.isError||(this.currentLatex=t.value,this.props.onUserChangedLatex(t.value))}getBrailleFromLatex(e,t=!1){let o=Gm(e,this.props.mode(),this.props.mqConfig().autoOperatorNames);return o.isError?"":t?o.value:Ri.toExpandedBrailleAscii(o.value)}getLatexFromBraille(e){return xk(Ri.coerceToSixDotCells(e),this.props.mode(),this.props.mqConfig().autoOperatorNames)}getBrailleLabel(e){return e?this.getBrailleFromLatex(e.replace(/\s/,"\\ ")):void 0}shouldShowBraille(){let e=this.props.mode();return e==="nemeth"||e==="ueb"}isOverflowingLeft(){return this.brailleInput?this.brailleInput.scrollLeft>0:!1}isOverflowingRight(){if(!this.brailleInput)return!1;let e=this.brailleInput.getBoundingClientRect().width,t=this.brailleInput.scrollWidth,o=this.brailleInput.scrollLeft;return t>e+o+2}didMountBrailleInput(e){this.brailleInput=e}didUnmountBrailleInput(){this.brailleInput=void 0}handleFocusChange(e,t){var o,i;(i=(o=this.props).onFocusedChanged)==null||i.call(o,e,t),this.brailleInput&&this.isStatic()&&this.props.mode()!=="none"&&this.brailleInput.scrollTo(0,0)}getTooltipText(){let e=this.props.placeholder&&!this.brailleInputHasFocus()?this.props.placeholder():"";return Sa(this.props.latex()||e)}template(){return _("div",{class:u("dcg-mathquill-wrapper"),children:[d(GK,{predicate:()=>this.shouldShowBraille(),children:()=>d("div",{class:()=>({"dcg-mathquill-braille":!0,"dcg-text-selectable":this.isStatic(),"dcg-focus":this.props.isFocused(),"dcg-invalid":this.hasError(),"dcg-mathquill-static-braille":this.isStatic(),"dcg-mathquill-braille-overflow-left":this.isOverflowingLeft(),"dcg-mathquill-braille-overflow-right":this.isOverflowingRight()}),"data-dcg-label":()=>this.props.dataLabelAttributeValue?this.props.dataLabelAttributeValue():void 0,children:d(Vm,{tooltip:()=>this.getTooltipText(),gravity:this.const("s"),delay:this.const(0),showOnTapstart:this.const(!0),children:d(Du,{ariaLabel:()=>{var e,t,o,i,n;return this.getBrailleLabel((n=(t=(e=this.props).brailleAriaLabel)==null?void 0:t.call(e))!=null?n:(i=(o=this.props).ariaLabel)==null?void 0:i.call(o))},didMount:this.bindFn(this.didMountBrailleInput),didUnmount:this.bindFn(this.didUnmountBrailleInput),onFocusedChanged:(e,t)=>this.shouldShowBraille()&&this.handleFocusChange(e,t),isFocused:this.props.isFocused,onKeyDown:this.props.onKeydown,selectOnFocus:this.props.selectOnFocus,onInput:this.bindFn(this.onBrailleInput),sixKeyInput:this.props.sixKeyInput,value:()=>this.currentBrailleValue,placeholder:()=>Sa(this.props.placeholder?this.getBrailleFromLatex(this.props.placeholder()):""),tabIndex:this.bindFn(this.getTabindex),isStatic:this.bindFn(this.isStatic),size:()=>this.currentBrailleValue&&this.currentBrailleValue.length||1})})})}),d(GK,{predicate:()=>!this.shouldShowBraille(),children:()=>d("div",{class:u("dcg-typeset-math"),children:_ae(()=>this.isStatic(),{true:()=>d(vk,{latex:this.props.latex,tabbable:()=>this.getTabindex()>=0,config:this.props.mqConfig,isFocused:this.props.isFocused,onFocusedChanged:(e,t)=>!this.shouldShowBraille()&&this.handleFocusChange(e,t),tokenController:this.props.tokenController,getAriaLabel:this.props.ariaLabel,onUserPressedKey:(e,t)=>{var o,i;t&&((i=(o=this.props).onKeydown)==null||i.call(o,t))}}),false:()=>d(qe,{latex:this.props.latex,isFocused:this.props.isFocused,selection:this.props.selection,capExpressionSize:()=>{var e,t;return!!((t=(e=this.props).capExpressionSize)!=null&&t.call(e))},tokenController:this.props.tokenController,noFadeout:this.props.noFadeout,config:this.props.mqConfig,getAriaLabel:()=>{var e,t,o;return(o=(t=(e=this.props).ariaLabel)==null?void 0:t.call(e))!=null?o:""},getAriaPostLabel:()=>{var e,t;return((t=(e=this.props).getAriaPostLabel)==null?void 0:t.call(e))||""},hasError:()=>{var e,t;return((t=(e=this.props).hasError)==null?void 0:t.call(e))||!1},onUserPressedKey:this.props.onUserPressedKey,onUserChangedLatex:e=>{var t,o;return(o=(t=this.props).onUserChangedLatex)==null?void 0:o.call(t,e)},onExpressionSizeExceeded:()=>{var e,t,o;return(o=(t=(e=this.props).capExpressionSize)==null?void 0:t.call(e))==null?void 0:o.onExpressionSizeExceeded()},onFocusedChanged:(e,t)=>!this.shouldShowBraille()&&this.handleFocusChange(e,t),selectOnFocus:this.props.selectOnFocus,onSelectionChanged:this.props.onSelectionChanged,onReflow:this.props.onReflow,disableSpace:this.props.disableSpace,needsSystemKeypad:this.props.needsSystemKeypad,placeholder:this.props.placeholder,dataLabelAttributeValue:this.props.dataLabelAttributeValue})})})})]})}getTabindex(){return this.props.tabIndex?this.props.tabIndex():0}};function Qn(){if(!(!document.activeElement||!document.activeElement.classList.contains("dcg-braille-input")))return document.activeElement}function NK(r){return!r||r.value===""}ce();ie();var Ek=__dcg_shared_module_exports__['e'](se());var{For:Mae,IfElse:Aae}=Ek.Components,Ir=class extends Ek.View{constructor(){super(...arguments),this.controller=this.props.controller()}template(){return d("span",{class:u("dcg-mixed-text-math"),children:d(Mae,{each:()=>__dcg_shared_module_exports__['Ue'](this.props.content()),children:e=>{let t=e();return Aae(()=>__dcg_shared_module_exports__['Te'](t)==="latex",{true:()=>d(ir,{latex:()=>t.substring(1,t.length-1),isFocused:this.const(!1),tabIndex:this.const(-1),isStatic:this.const(!0),selectOnFocus:this.const(!1),...Wr(this.controller)}),false:()=>d("span",{class:u("dcg-label-raw-text"),children:()=>t})})}},(e,t)=>`${e}|${t}`)})}};function Ik(r,e,t){return Math.max(e,Math.min(t,r))}var Um=class{constructor(e){let t=e.data,o=e.width,i=e.height;this.imageData=e;for(let s=1;s<o;s++)t[s]+=t[s-1];for(let s=1;s<i;s++)t[s*o]+=t[s*o-o];let n=o*i-o-i+1,a=o-1;for(let s=0;s<n;s++){let l=1+s%a,p=(1+Math.floor(s/a))*o,h=l-1+p,g=l+p-o,m=l-1+p-o;t[p+l]+=t[h]+t[g]-t[m]}}getSumForValidRect(e){let t=e.left-1,o=e.right-1,i=e.top-1,n=e.bottom-1,a=this.imageData.width,s=this.imageData.data,l=s[t+i*a],c=s[o+i*a],p=s[t+n*a],h=s[o+n*a];return t>=0&&i>=0?h-c-p+l:t>=0?h-p:i>=0?h-c:h}getSum(e){let t={left:Ik(Math.floor(e.left),0,this.imageData.width),right:Ik(Math.ceil(e.right),0,this.imageData.width),top:Ik(Math.floor(e.top),0,this.imageData.height),bottom:Ik(Math.ceil(e.bottom),0,this.imageData.height)};return t.left>=t.right||t.top>=t.bottom?0:this.getSumForValidRect(t)}};var Qd=1/2,Zd=document.createElement("canvas"),jD=[];function Lae(r,e){if(!(e.width*e.height>0))return new Um({width:0,height:0,data:[]});Zd.width=0,Zd.width=Math.round(e.width*Qd),Zd.height=Math.round(e.height*Qd);let o=Zd.getContext("2d");o.save(),o.scale(Zd.width/r.canvas.width,Zd.height/r.canvas.height),o.drawImage(r.canvas,0,0),o.restore();let i=o.getImageData(0,0,Zd.width,Zd.height),n=i.data;n.length/4,jD.length,jD=new Array(n.length/4);let a=jD;for(let l=0;l<a.length;l++)a[l]=n[l*4+3];return new Um({width:i.width,height:i.height,data:a})}function VK(r){for(let e=0;e<r.length;e++){let t=Pae(e,r);r[e]=[t]}return r.map(e=>e[0])}function Pae(r,e){let t=1/0,o=-1,i=e[r];if(i.length===1)return i[0];for(let n=0;n<i.length;n++){let a=e[r][n].staticScore,s=Dae(r,n,e),l=a+s;(o===-1||l<t)&&(t=l,o=n)}return i[o]}function Dae(r,e,t){let o=0,i=t[r][e];for(let n=0;n<t.length;n++){if(n===r)continue;let a=0,s=t[n];for(let l=s.length-1;l>=0;l--){let c=s[l],p=Math.max(0,Math.min(i.right,c.right)-Math.max(i.left,c.left)),h=Math.max(0,Math.min(i.bottom,c.bottom)-Math.max(i.top,c.top));a+=p*h}o+=a/s.length}return o}function Oae(r,e){let t=e.getSum({left:r.left*Qd,right:r.right*Qd,top:r.top*Qd,bottom:r.bottom*Qd});return t/=200,t/=Qd*Qd,t}function Rae(r,e){let t=Fae(r,e);return 10*(r.width*r.height-t)}function Fae(r,e){let t=Math.max(0,Math.min(r.right,e.right)-Math.max(r.left,e.left)),o=Math.max(0,Math.min(r.bottom,e.bottom)-Math.max(r.top,e.top));return t*o}function BK(r,e){let t;return()=>(t||(t={viewport:{left:0,right:e.width,top:0,bottom:e.height},integralImage:Lae(r(),e)}),t)}function Ck(r,e){if(e.length<=1)return;let t=r();for(let o of e)o.staticScore+=Rae(o,t.viewport),o.staticScore+=Oae(o,t.integralImage)}function UK(r,e){let t=e.nakedLabel?0:e.pt_radius,o=Math.round(t/Math.sqrt(2)),i=[],n=e.pt_x,a=e.pt_y,s=e.width,l=e.height,c=400;i.push({cx_s:0,cy_s:0,cx_a:0,cy_a:0,staticScore:c,orientation:"center",matches:{default:1,center:1,center_auto:1,auto_center:1}}),i.push({cx_s:.5,cx_a:t+3,cy_s:0,cy_a:0,staticScore:c,orientation:"right",matches:{default:1,right:1,center_auto:1,auto_right:1}}),i.push({cx_s:-.5,cx_a:-t-3,cy_s:0,cy_a:0,staticScore:c,orientation:"left",matches:{default:1,left:1,center_auto:1,auto_left:1}}),i.push({cx_s:0,cx_a:0,cy_s:-.5,cy_a:-t,staticScore:c,orientation:"above",matches:{default:1,above:1,auto_center:1,above_auto:1}}),i.push({cx_s:-.5,cx_a:-o,cy_s:-.5,cy_a:-o,staticScore:c,orientation:"tl",matches:{default:1,above_left:1,above_auto:1,auto_left:1}}),i.push({cx_s:.5,cx_a:o,cy_s:-.5,cy_a:-o,staticScore:c,orientation:"tr",matches:{default:1,above_right:1,above_auto:1,auto_right:1}}),i.push({cx_s:0,cx_a:0,cy_s:.5,cy_a:t,staticScore:c,orientation:"below",matches:{default:1,below:1,auto_center:1,below_auto:1}}),i.push({cx_s:-.5,cx_a:-o,cy_s:.5,cy_a:o,staticScore:c,orientation:"bl",matches:{default:1,below_left:1,below_auto:1,auto_left:1}}),i.push({cx_s:.5,cx_a:o,cy_s:.5,cy_a:o,staticScore:c,orientation:"br",matches:{default:1,below_right:1,below_auto:1,auto_right:1}});let p=Math.cos(e.rotation),h=Math.sin(e.rotation),g=i.map(m=>{let b=m.cx_s*s+m.cx_a,x=m.cy_s*l+m.cy_a,E=b*p-x*h,S=x*p+b*h,k={multiplyWidth:m.cx_s-.5,multiplyHeight:m.cy_s-.5,addX:m.cx_a,addY:m.cy_a},T=-s/2,I=s/2,P=-l/2,A=l/2;if(e.rotation){let D=Gae([{x:T*p-P*h,y:P*p+T*h},{x:T*p-A*h,y:A*p+T*h},{x:I*p-P*h,y:P*p+I*h},{x:I*p-A*h,y:A*p+I*h}]);T=D.left,I=D.right,P=D.top,A=D.bottom}return T=Math.round(n+E+T),I=Math.round(n+E+I),P=Math.round(a+S+P),A=Math.round(a+S+A),{pt_x:Math.round(n),pt_y:Math.round(a),left:T,right:I,top:P,bottom:A,width:I-T,height:A-P,translate:k,staticScore:e.priorOrientation===m.orientation?m.staticScore-20:m.staticScore,orientation:m.orientation,matches:m.matches}});return e.enforceOrientation&&e.enforceOrientation!=="default"?g=g.filter(m=>m.matches[e.enforceOrientation]):e.nakedLabel?g=g.filter(m=>m.orientation==="center"):e.keepOrientation&&e.priorOrientation?g=g.filter(m=>m.orientation===e.priorOrientation):g=g.filter(m=>m.orientation!=="center"),Ck(r,g),g}function zK(r,e){let t=[],o=e.width,i=e.height,n=o/2,a=i/2,s=e.pt_x1,l=e.pt_y1,c=e.pt_x2,p=e.pt_y2,h=5,g=(p-l)/(c-s),m=Math.atan2(p-l,c-s)+Math.PI/2,b=h*Math.cos(m),x=h*Math.sin(m),E=Math.min(l,p)-Math.abs(x)-i,S=Math.max(l,p)+Math.abs(x),k=[.5,.4,.6,.2,.8],T=[0,20,20,40,40],I=[];for(let A of k)I.push({x:s*(1-A)+c*A,y:l*(1-A)+p*A});for(let A=0;A<I.length;A++){let D=I[A],G,N,U,K;if(g>=2||g<=-2){U=K=D.y-a;let V=Math.abs((c-s)/(p-l)*a)+Math.abs(b);G=D.x+V,N=D.x-V-o}else if(g<=.05&&g>=-.05){G=N=D.x-n;let V=Math.abs(g*n)+Math.abs(x);U=D.y-V-i,K=D.y+V}else b>0?(G=D.x+b,N=D.x-b-o):(G=D.x+b-o,N=D.x-b),x>0?(U=D.y+x,K=D.y-x-i):(U=D.y+x-i,K=D.y-x);U<E?U=E:U>S&&(U=S),K<E?K=E:K>S&&(K=S);let H=(c-s)*(U-l)-(p-l)*(G-s)>0,w=A.toString()+(H?"-a":"-b");t.push({pt_x:D.x,pt_y:D.y,left:G,top:U,staticScore:T[A],orientation:w,matches:{[w]:1}});let F=A.toString()+(H?"-b":"-a");t.push({pt_x:D.x,pt_y:D.y,left:N,top:K,staticScore:T[A],orientation:F,matches:{[F]:1}})}let P=t.map(A=>{let D=Math.round(A.left),G=Math.round(A.left+o),N=Math.round(A.top),U=Math.round(A.top+i);return{pt_x:Math.round(A.pt_x),pt_y:Math.round(A.pt_y),translate:{multiplyWidth:0,multiplyHeight:0,addX:A.left-A.pt_x,addY:A.top-A.pt_y},left:D,right:G,top:N,bottom:U,width:G-D,height:U-N,staticScore:e.priorOrientation===A.orientation?A.staticScore-20:A.staticScore,orientation:A.orientation,matches:A.matches}});return e.keepOrientation&&e.priorOrientation&&(P=P.filter(A=>A.orientation===e.priorOrientation)),Ck(r,P),P}function qK(r,e){let t=[],o=e.pt_x,i=e.pt_y,n=e.width,a=e.height,s=-(e.startAngle+e.deltaAngle/2),l=e.isRightAngle?e.radius*Math.sqrt(2)-1:e.radius+4,c=l+Math.sqrt(e.width*e.width/4+e.height*e.height/4),p=[],h=c*Math.sin(s);h>l+1/2*a&&(h=l+1/2*a),h<-l-1/2*a&&(h=-l-1/2*a),p.push({x:o+c*Math.cos(s)-n/2,y:i+h-a/2});for(let m=0;m<p.length;m++){let b=p[m],x=m.toString()+"-a";t.push({pt_x:b.x,pt_y:b.y,left:b.x,top:b.y,staticScore:0,orientation:x,matches:{[x]:1}})}let g=t.map(m=>{let b=Math.round(m.left),x=Math.round(m.left+n),E=Math.round(m.top),S=Math.round(m.top+a);return{pt_x:Math.round(m.pt_x),pt_y:Math.round(m.pt_y),translate:{multiplyWidth:0,multiplyHeight:0,addX:m.left-m.pt_x,addY:m.top-m.pt_y},left:b,right:x,top:E,bottom:S,width:x-b,height:S-E,staticScore:e.priorOrientation===m.orientation?m.staticScore-20:m.staticScore,orientation:m.orientation,matches:m.matches}});return e.keepOrientation&&e.priorOrientation&&(g=g.filter(m=>m.orientation===e.priorOrientation)),Ck(r,g),g}function HK(r,e){let t=[],o=e.width,i=e.height,n=10,a=Math.round(n/Math.sqrt(2)),s=0,l=50,c=0,p=0,h=0;for(let x=0;x<e.path.length-2;x+=2)h+=1,c+=e.path[x],p+=e.path[x+1];let g=c/h,m=p/h;t.push({left:g-o/2,top:m-i/2,staticScore:s,orientation:"center",matches:{center:1}}),t.push({left:g+n+3,top:m-i/2,staticScore:l,orientation:"right",matches:{right:1}}),t.push({left:g-(n+o)-3,top:m-i/2,staticScore:l,orientation:"left",matches:{left:1}}),t.push({left:g-o/2,top:m-(i+n),staticScore:l,orientation:"top",matches:{top:1}}),t.push({left:g-(o+a),top:m-(i+a),staticScore:l,orientation:"tl",matches:{tl:1}}),t.push({left:g+a,top:m-(i+a),staticScore:l,orientation:"tr",matches:{tr:1}}),t.push({left:g-o/2,top:m+n,staticScore:l,orientation:"bottom",matches:{bottom:1}}),t.push({left:g-(o+a),top:m+a,staticScore:l,orientation:"bl",matches:{bl:1}}),t.push({left:g+a,top:m+a,staticScore:l,orientation:"br",matches:{br:1}});let b=t.map(x=>{let E=Math.round(x.left),S=Math.round(x.left+o),k=Math.round(x.top),T=Math.round(x.top+i);return{pt_x:Math.round(g),pt_y:Math.round(m),translate:{multiplyWidth:0,multiplyHeight:0,addX:x.left-g,addY:x.top-m},left:E,right:S,top:k,bottom:T,width:S-E,height:T-k,staticScore:e.priorOrientation===x.orientation?x.staticScore-20:x.staticScore,orientation:x.orientation,matches:x.matches}});return e.keepOrientation&&e.priorOrientation&&(b=b.filter(x=>x.orientation===e.priorOrientation)),Ck(r,b),b}function Gae(r){let e=r[0].x,t=r[0].x,o=r[0].y,i=r[0].y;for(let n=r.length-1;n>=1;n--){let{x:a,y:s}=r[n];a<e&&(e=a),a>t&&(t=a),s<o&&(o=s),s>i&&(i=s)}return{left:e,right:t,top:o,bottom:i}}var Vae=1,Nc=class{constructor(e,t,o,i,n,a,s){this.x=e,this.y=t,this.type=o,this.sketch=i,this.branch=n,this.pointIdxOnBranch=a,this.bareLabel=s===void 0?!1:s,this.id=Vae++}getLabel(){let e=this.sketch&&this.sketch.branches[this.branch];return e&&"labels"in e&&e.labels&&e.labels[this.pointIdxOnBranch]||""}getGraphMode(){return this.sketch.branches[this.branch].branchMode}getCompiledFunction(){let e=this.sketch.branches[this.branch];if(!(!("compiled"in e)||!e.compiled))return e.compiled.fn}isAttachedToPlottedPoint(){return this.type===1006||this.type===1008}isMovable(){return __dcg_shared_module_exports__['x'](this.getGraphMode())}isPersistent(){return this.type===1008}getLabelSize(){let e=this.sketch&&this.sketch.branches[this.branch];return this.type===1008&&e&&"labelSize"in e?e.labelSize===void 0?1:e.labelSize:1}getLabelRotation(){let e=this.sketch&&this.sketch.branches[this.branch];return this.type===1008&&e&&"labelAngle"in e?e.labelAngle===void 0?0:e.labelAngle:0}getPointOpacity(){let e=this.sketch&&this.sketch.branches[this.branch];if(e&&"pointOpacity"in e){let t=e.pointOpacity;if(t!==void 0){let o;return Array.isArray(t)?o=t[this.pointIdxOnBranch]:o=t,isFinite(o)?Math.max(0,Math.min(1,o)):1}}return 1}getPointSize(){let e=this.sketch&&this.sketch.branches[this.branch];if(e&&"pointSize"in e){let t=e.pointSize;if(t!==void 0){let o;Array.isArray(t)?o=t[this.pointIdxOnBranch]:o=t;let i=isFinite(o)?Math.max(0,o):8;return this.isMovable()?__dcg_shared_module_exports__['Ae'](i):i}}return this.isMovable()?__dcg_shared_module_exports__['Be'](8):8}getTextOutline(){if(this.hasEditableLabel())return!1;let e=this.sketch&&this.sketch.branches[this.branch];return this.type===1008&&e&&"suppressTextOutline"in e?!e.suppressTextOutline:!0}hasInteractiveLabel(){let e=this.sketch&&this.sketch.branches[this.branch];return e&&"interactiveLabel"in e?!!e.interactiveLabel:!1}hasEditableLabel(){let e=this.sketch&&this.sketch.branches[this.branch];return e&&"editableLabel"in e?!!e.editableLabel:!1}isBareLabel(){return this.bareLabel}getMovablePoint(){return this.sketch.getMovablePointByIndex(this.pointIdxOnBranch)}isSelected(){return this.sketch.showHighlight}};var{If:KK,Input:Uae,For:zae,Switch:qae}=Ru.Components,Hae=300,WK={id:!0,sketchId:!0,rotatedWidth:!0,rotatedHeight:!0,alignedWidth:!0,alignedHeight:!0,content:!0,focused:!0,isNakedLabel:!0,isClickable:!0,hasOutline:!0,hasBorder:!0,classes:!0,styles:!0,dotStyles:!0,poi:!1,objectSpec:!1,x:!1,y:!1,screenX:!1,screenY:!1,left:!1,top:!1,rotation:!1,opacity:!1,forcedOrientation:!1,orientation:!1,labelDOM:!1,containerDOM:!1,willCopyToCanvas:!1,layerFilter:!1,cachedDrawingCommands:!1,animation:!1,layerNumber:!1,isComplex:!1};function $K(r,e){return e?e.getPOIById(r):null}function Fu(r,e){return 1e3*(r.pixelsToMath.mapX(r.mathToPixels.mapX(e)+.5)-r.pixelsToMath.mapX(r.mathToPixels.mapX(e)-.5))}function Mk(r,e){return 1e3*(r.pixelsToMath.mapY(r.mathToPixels.mapY(e)+.5)-r.pixelsToMath.mapY(r.mathToPixels.mapY(e)-.5))}function Kae(r,{x:e,y:t}){let o=Fu(r,e),i=Mk(r,t);return{xscale:o,yscale:i}}function jK(r,e){return e?[r[1],r[0]]:r}function JD(r,e){let t,o=!1,i="",n="",{poi:a}=r,s=a.getGraphMode();if(r.type==="poi"){let{xscale:c,yscale:p}=Kae(e,a);t=a.getLabel();let h,g=a.type===1007&&a.getCompiledFunction();if(g){let m=s===1,b=m?a.y:a.x,[x,E]=jK([c,p],m);h=__dcg_shared_module_exports__['ba'](b,x,E,g),h=jK(h,m)}else h=[__dcg_shared_module_exports__['aa'](a.x,c),__dcg_shared_module_exports__['aa'](a.y,p)];o=!isFinite(h[1].value),i=h[0].latex,n=h[1].latex,i==="undefined"&&(i="\\mathrm{undefined}"),n==="undefined"&&(n="\\mathrm{undefined}")}else t=r.text;let l=t&&__dcg_shared_module_exports__['Te'](t);return t?l==="latex"?{is_hole:o,type:"latex",text:t.substring(1,t.length-1)}:l==="text"?{is_hole:o,type:"text",text:t}:{is_hole:o,type:"mixed",text:t}:r.type==="poi"?r.poi.hasEditableLabel()?{is_hole:o,type:"text",text:""}:s===25||s===26?{is_hole:o,type:"latex",text:__dcg_shared_module_exports__['la']([a.x,a.y],__dcg_shared_module_exports__['da'])}:{is_hole:o,type:"latex",text:"\\left("+i+",\\ "+n+"\\right)"}:{is_hole:o,type:"text",text:"?"}}var YK=4,XD=class extends Ru.View{getClassName(){var e;return((e=this.props.point())==null?void 0:e.y)!==void 0?"dcg-audio-trace-line dcg-audio-trace-line--horizontal":"dcg-audio-trace-line"}getTraceCoord(){var i,n;let e=(i=this.props.point())==null?void 0:i.x,t=(n=this.props.point())==null?void 0:n.y,o=this.props.projection();if(e!==void 0)return`${Math.round(10*o.mapx(e))/10-YK/2}px`;if(t!==void 0)return`${Math.round(10*o.mapy(t))/10-YK/2}px`}getStyle(){var o;let e=this.getTraceCoord(),t=(o=this.props.point())==null?void 0:o.color;return{"--dcg-trace-coord":e,"--dcg-trace-color":t}}template(){return d("div",{class:this.bindFn(this.getClassName),style:this.bindFn(this.getStyle)})}},zm=class extends Ru.View{constructor(){super(...arguments),this.labelsDirty=!1,this.traceLinePt=void 0,this.stubBrailleController=new Tk}init(){this.grapher=this.props.grapher(),this.controller=this.grapher.controller,this.cachedLabelDict={},this.cachedLabelOrder=[],this.hoveredPOI=void 0,this.openedPOI2Sketch={}}template(){return _("div",{class:u("dcg-graph-outer"),style:this.const({"z-index":"0"}),didMount:this.bindFn(this.didMountRoot),children:[d("div",{children:d(zae.Simple,{each:()=>this.cachedLabelOrder,children:e=>_("div",{class:()=>this.getLabelClasses(e),style:()=>this.getLabelStyles(e),didMount:t=>this.linkLabelContainerNode(e,t),children:[d("div",{class:u("dcg-pt"),style:()=>this.getDotStyles(e)}),_("div",{class:u("dcg-label"),didMount:t=>this.linkLabelDOMNode(e,t),children:[this.renderLabelContent(e),d(KK,{predicate:()=>this.showPOIbutton(e),children:()=>d(Re,{tooltip:()=>this.controller.s("graphing-calculator-button-copy-poi-coordinates"),offset:this.const({top:4}),children:d("button",{class:u("dcg-unstyled-button dcg-poi-copy-button"),onTap:()=>this.copyPOI(e),"aria-label":()=>this.controller.s("graphing-calculator-button-copy-poi-coordinates"),children:d("i",{class:u("dcg-icon-insert")})})})})]})]})})}),d(KK,{predicate:()=>!0,children:()=>d(XD,{point:()=>this.traceLinePt,projection:()=>this.grapher.getProjection()})})]})}copyPOI(e){delete this.openedPOI2Sketch[e],this.setHoveredPOI(void 0);let t=this.controller.getNextColor();t===Wg&&(t=this.controller.getNextColor()),this.controller.dispatch({type:"export-latex-to-explist",latex:this.getLabelContent(e).text,color:t})}showPOIbutton(e){if(!this.controller.isListEnabled()||!this.controller.isListVisible())return!1;let t=this.getHoveredPOI();(t==null?void 0:t.id)!==parseInt(e)&&(t=void 0);let o=$K(e,this.grapher.graphSketches[this.openedPOI2Sketch[e]])||t;switch(o==null?void 0:o.type){case 1001:case 1002:case 1003:case 1004:return!0;default:return!1}}setTraceLine(e){__dcg_shared_module_exports__['s'](e,this.traceLinePt)||(this.traceLinePt=e,this.update())}getAriaLabelForId(e){let t=this.cachedLabelDict[e],o;t?t.isComplex?o=ur(__dcg_shared_module_exports__['la']([t.x,t.y])):o=Ea(this.controller,t.x,t.y):o=this.controller.s("graphing-calculator-label-poi-unknown-coordinates");let i=this.controller.s("graphing-calculator-narration-editable-point-label");return o?this.controller.s("graphing-calculator-narration-item-at-coordinates",{itemDescription:i,coordinates:o}):i}renderLabelContent(e){return d(qae,{children:t=>t==="text"?d("span",{class:u("dcg-label-raw-text"),children:()=>this.getLabelContent(e).text}):t==="latex"?d(St,{latex:()=>this.getLabelContent(e).text,config:this.bindFn(this.getMQConfig)}):t==="mixed"?d(Ir,{content:()=>this.getLabelContent(e).text,mqConfig:()=>this.controller.getMathquillConfig({}),controller:this.const(this.stubBrailleController)}):t===__dcg_shared_module_exports__['me'].Math?d("div",{class:()=>({"dcg-editable-label-border":!0,"dcg-do-not-blur":!0,"dcg-focus":this.shouldEditableLabelBeFocused(e),"dcg-empty-label":this.getEditableLabelText(e).trim().length===0}),style:()=>({"border-color":__dcg_shared_module_exports__['Fd'](this.getEditableLabelTextColor(e),.3)}),children:d(qe,{latex:()=>this.getEditableLabelText(e),placeholder:()=>"",isFocused:()=>this.shouldEditableLabelBeFocused(e),capExpressionSize:()=>this.controller.getGraphSettings().config.capExpressionSize,selectOnFocus:Ru.const(!1),config:this.bindFn(this.getMQConfig),getAriaLabel:()=>this.getAriaLabelForId(e),getAriaPostLabel:this.const(""),onUserChangedLatex:o=>this.onLabelInput(o,e),onExpressionSizeExceeded:()=>this.controller.dispatch({type:"expression-size-exceeded"}),onFocusedChanged:o=>this.onEditableLabelFocusChange(o,e),hasError:this.const(!1),noFadeout:this.const(!0),needsSystemKeypad:()=>!this.controller.isKeypadEnabled()})}):_("div",{class:()=>({"dcg-resizing-text-input-container":!0,"dcg-editable-label-border":!0,"dcg-focus":this.shouldEditableLabelBeFocused(e),"dcg-empty-label":this.getEditableLabelText(e).trim().length===0}),style:()=>({"border-color":__dcg_shared_module_exports__['Fd'](this.getEditableLabelTextColor(e),.3)}),onScroll:o=>{o.target&&(o.target.scrollLeft=0)},children:[d(Uae,{"aria-label":()=>this.getAriaLabelForId(e),onInput:o=>this.onLabelInput(o,e),value:()=>this.getEditableLabelText(e),onFocus:()=>this.onEditableLabelFocusChange(!0,e),onBlur:()=>this.onEditableLabelFocusChange(!1,e)}),d("span",{class:u("dcg-text-input-content"),children:()=>this.getEditableLabelText(e)||" "})]})},()=>this.getLabelContent(e).type)}getSketchIdFromLabelId(e){let t=this.cachedLabelDict[e];if(t)return t.sketchId}getEditableLabelTextColor(e){let t=this.getSketchIdFromLabelId(e);if(!t)return"#000";let o=this.controller.getItemModel(t);return!o||o.type!=="expression"?"#000":Dd(o)}onEditableLabelFocusChange(e,t){let o=this.getSketchIdFromLabelId(t);o&&(e?this.controller.dispatch({type:"set-focus-location",location:{type:"editable-label",id:o}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"editable-label",id:o}}),this.update())}shouldEditableLabelBeFocused(e){let t=this.getSketchIdFromLabelId(e),o=this.controller.getFocusLocation();return!(!o||o.type!=="editable-label"||!t||o.id!==t)}onLabelInput(e,t){let o=this.getSketchIdFromLabelId(t);if(!o)return;let i=this.controller.getItemModel(o);if(!i||i.type!=="expression")return;let n=e;this.controller.getItemEditableLabelMode(o)===__dcg_shared_module_exports__['me'].Math&&n.length>0&&(n="`"+n+"`"),this.controller.dispatch({type:"set-item-label",id:o,label:n})}getEditableLabelText(e){let t=this.getSketchIdFromLabelId(e);if(!t)return"";let o=this.controller.getItemModel(t);return!o||o.type!=="expression"?"":this.controller.getItemEditableLabelMode(t)===__dcg_shared_module_exports__['me'].Math?o.label.substring(1,o.label.length-1):o.label}linkLabelDOMNode(e,t){let o=this.cachedLabelDict[e];o&&(o.labelDOM=t)}linkLabelContainerNode(e,t){let o=this.cachedLabelDict[e];o&&(o.containerDOM=t)}getLabelClasses(e){let t=this.cachedLabelDict[e];return t?t.classes:{}}getLabelStyles(e){let t=this.cachedLabelDict[e];return t?t.styles:{}}getDotStyles(e){let t=this.cachedLabelDict[e];return t?t.dotStyles:{}}getLabelContent(e){let t=this.cachedLabelDict[e];if(t){let o=this.getSketchIdFromLabelId(e);if(!o)return{is_hole:!1,type:"text",text:""};let i=this.controller.getItemEditableLabelMode(o);return t.classes["dcg-editable-label"]&&i!==void 0&&i!==__dcg_shared_module_exports__['me'].None?{is_hole:!1,type:i,text:""}:t.content}return{is_hole:!1,type:"text",text:""}}didMountRoot(e){this.node=e}computeHoveredLabel(e,t){let o;this.hoveredPOI?this.isOpenPOI(this.hoveredPOI)?this.grapher.setLayerClass("hoveredPOI","dcg-mouse-over-opened-poi"):(o=this.computeLabel(e,{poi:this.hoveredPOI,type:"poi"},t,"hovered",1/0),this.grapher.setLayerClass("hoveredPOI","dcg-mouse-over-closed-poi")):this.grapher.setLayerClass("hoveredPOI",void 0);let i=this.getHoveredInteractiveLabel();i&&!i.bareLabel?this.grapher.setLayerClass("interactiveLabel","dcg-mouse-over-opened-poi"):this.grapher.setLayerClass("interactiveLabel",void 0),o&&this.saveLabelToCache(o)}computeTraceLabel(e,t){if(!this.traceInfo)return;let o=this.traceInfo.pt;if(!o)return;let i=new Nc(o.x,o.y,1007,this.traceInfo.branchInfo.sketch,this.traceInfo.branchInfo.branch,0),n=this.computeLabel(e,{poi:i,type:"poi"},t,"trace",1/0);n&&this.saveLabelToCache(n)}computeLabel(e,t,o,i,n){var fe,Se;let{projection:a}=e,s=t.type==="poi"?t.poi.id+"":t.id;i==="trace"&&(s="*trace*");let l=t.poi,c=a.mapx(l.x),p=a.mapy(l.y),h=c,g=p;if(t.type!=="poi"&&(c=0,p=0),!a.coordsAreOnscreen(c,p,20)||this.isHiddenInteractiveLabel(l))return;let m=!1,b,x=l.sketch,E=x&&x.branches[0];E&&(m=!!("nakedLabel"in E&&E.nakedLabel),b="labelOrientation"in E?E.labelOrientation:void 0);let S=x.id,k=this.controller.getItemModel(S);if(l.hasEditableLabel()&&k&&k.type==="expression"&&!hi(k))return;let T=(k==null?void 0:k.type)==="expression"&&__dcg_shared_module_exports__['wb']((Se=(fe=k.formula)==null?void 0:fe.typed_constant_value)==null?void 0:Se.valueType,__dcg_shared_module_exports__['Va']),I=JD(t,a),P=l.pointIdxOnBranch,A=l.getLabelSize();this.grapher.settings.config.projectorMode&&(A*=1.2),Array.isArray(A)&&(A=A[P]);let D=l.getLabelRotation();Array.isArray(D)&&(D=D[P]);let G=l.getPointOpacity()*this.controller.getGeoModel().getToolFadeOpacity(S),N=l.getTextOutline(),U=l.isPersistent(),K=l.isAttachedToPlottedPoint(),H=l.hasInteractiveLabel(),w=l.hasEditableLabel(),F=(k==null?void 0:k.type)==="expression"&&Ei(k),V=this.grapher.clickableObjectsLayer.shouldDrawPressed(S,l.pointIdxOnBranch),B=this.grapher.clickableObjectsLayer.shouldDrawHovered(e,S,l.pointIdxOnBranch),L=this.grapher.clickableObjectsLayer.isKeyboardFocused(S,l.pointIdxOnBranch),q=x.color;if(V){let ke=__dcg_shared_module_exports__['Z'](q);ke.l>.2?ke.l-=.2:ke.l+=.1,q=ke.toString()}else if(B){let ke=__dcg_shared_module_exports__['Z'](q);ke.l>.2?ke.l-=.1:ke.l+=.2,q=ke.toString()}let le=!U,$=K;H&&($=!0,le=!0),i==="trace"&&($=!1,le=!0);let ne=o[s],ue=ne&&ne.orientation,de={"dcg-poi-label":!0,"dcg-tracept":i==="trace","dcg-opened":i==="opened","dcg-hole":I.is_hole,"dcg-show-border":le,"dcg-hide-dot":$,"dcg-naked-label":m,"dcg-editable-label":w&&!this.takingScreenshot,"dcg-has-outline":N&&!le,"dcg-focus":L};isFinite(A)||(A=1);let Y={"font-size":Math.round(A*1100)/10+"%"},j=!de["dcg-editable-label"]&&!de["dcg-tracept"]&&!de["dcg-show-border"]&&!H,X=w?"above-canvas":j?"canvas-labels":"not-drawn";j?Y.visibility="hidden":(Y.left=c+"px",Y.top=p+"px",D&&(Y.transform=`rotate(${D}rad)`),delete Y.opacity),U&&q&&(Y.color=q);let xe={};return i==="trace"&&(xe["background-color"]=q,xe["border-color"]=q),{id:s,sketchId:S,poi:l,x:l.x,y:l.y,screenX:c,screenY:p,top:g,left:h,rotatedWidth:ne==null?void 0:ne.rotatedWidth,rotatedHeight:ne==null?void 0:ne.rotatedHeight,alignedWidth:ne==null?void 0:ne.alignedWidth,alignedHeight:ne==null?void 0:ne.alignedHeight,labelDOM:ne==null?void 0:ne.labelDOM,containerDOM:ne==null?void 0:ne.containerDOM,cachedDrawingCommands:ne==null?void 0:ne.cachedDrawingCommands,animation:ne==null?void 0:ne.animation,forcedOrientation:b,focused:L,isNakedLabel:m,isClickable:F,orientation:ue,rotation:D,classes:de,styles:Y,dotStyles:xe,content:I,hasBorder:l.hasEditableLabel(),willCopyToCanvas:j,layerFilter:X,opacity:G,layerNumber:n,isComplex:T,hasOutline:N||l.hasEditableLabel(),objectSpec:t.type!=="poi"?t.type==="angle"?{type:t.type,segments:[a.mapx(t.segments[0]),a.mapy(t.segments[1]),t.segments[2],t.segments[3]]}:{type:t.type,segments:a.map_xy_pairs(t.segments)}:void 0}}computeAllLabels(e,t){let o={},i,n,a=this.grapher.graphSketches;for(let l of this.grapher.getDrawLayers())for(let c of l.drawOrder){let p=a[c];if(!p)continue;let h=p.labels;if(h.length)for(let g=0;g<h.length;g++){let m=h[g],b=this.computeLabel(e,m,t,"opened",l.layer);b&&(Array.isArray(p.color)&&(b.styles.color=p.color[g]),this.saveLabelToCache(b))}}let s={};for(i in this.openedPOI2Sketch){let l=$K(i,a[this.openedPOI2Sketch[i]]);l&&(s[i]=l.sketch.id,n=this.computeLabel(e,{poi:l,type:"poi"},t,"opened",1/0),n&&this.saveLabelToCache(n))}return this.openedPOI2Sketch=s,o}saveLabelToCache(e){let t=e.id;this.cachedLabelDict[t]||this.cachedLabelOrder.push(t),this.cachedLabelDict[t]=e}markLabelsDirty(){this.labelsDirty=!0}getInteractiveLabelUnderPoint(e){let t;for(let o=this.cachedLabelOrder.length-1;o>=0;o--){let i=this.cachedLabelOrder[o],n=this.cachedLabelDict[i];if(!n||!n.rotatedWidth||!n.rotatedHeight)continue;let a=n.screenX,s=n.screenY,{left:l,top:c,rotatedWidth:p,rotatedHeight:h}=n;if(p>0&&h>0&&e.x>a+l&&e.x<a+l+p&&e.y>s+c&&e.y<s+c+h){let g=this.getSketchIdFromLabelId(i);if(g===void 0)continue;let m=this.controller.getItemModel(g);if(!m||m.type!=="expression")continue;if(Im(m))return{type:"editable",model:m,layerNumber:n.layerNumber};!t&&S8(m)?t={type:"draggable",model:m,layerNumber:n.layerNumber,label:{x:n.x,y:n.y}}:!t&&n.isClickable&&(t={type:"clickable",model:m,layerNumber:n.layerNumber,poi:n.poi})}}return t}positionLabels(e,t,o,i){let n=!this.labelsDirty;this.labelsDirty=!1;let a=[];e.forEach(p=>{let h=t[p];if(!h||!h.labelDOM)return;let g,m,b=this.getSketchIdFromLabelId(p);if(b!==void 0){let G=this.grapher.getGraphSketch(b);G&&G.branches&&(g=G.branches[0].pointSize,m=__dcg_shared_module_exports__['x'](G.branches[0].branchMode))}(g===void 0||typeof g!="number"||g<0)&&(g=8);let x=this.grapher.settings.config.projectorMode?1.3:1;m&&(g=__dcg_shared_module_exports__['Ae'](g));let E=h.poi.sketch.style;if(m)switch(E){case __dcg_shared_module_exports__['Pd'].TRIANGLE:g*=1.1;break;case __dcg_shared_module_exports__['Pd'].DIAMOND:g*=1.05;break}else switch(E){case __dcg_shared_module_exports__['Pd'].TRIANGLE:g*=1.4;break;case __dcg_shared_module_exports__['Pd'].PLUS:g*=1.35;break;case __dcg_shared_module_exports__['Pd'].STAR:g*=1.3;break;case __dcg_shared_module_exports__['Pd'].DIAMOND:g*=1.2;break}let S=.5*g*x+3,k=h.screenX,T=h.screenY,I=h.classes["dcg-show-border"]?2:0,P=h.labelDOM.clientWidth+I,A=h.labelDOM.clientHeight+I;if(!(P>0&&A>0))return;let D=0;this.takingScreenshot&&h.hasBorder&&(D=5),a.push({renderedLabel:h,pt_x:k,pt_y:T,pt_radius:S+D,rotation:h.rotation,nakedLabel:h.isNakedLabel,width:P,height:A,keepOrientation:n,priorOrientation:h.orientation,enforceOrientation:h.forcedOrientation})});let s=BK(i,o),l=a.map(p=>{if(p.renderedLabel.objectSpec){if(p.renderedLabel.objectSpec.type==="segment")return zK(s,{pt_x1:p.renderedLabel.objectSpec.segments[0],pt_y1:p.renderedLabel.objectSpec.segments[1],pt_x2:p.renderedLabel.objectSpec.segments[2],pt_y2:p.renderedLabel.objectSpec.segments[3],pt_radius:10,width:p.width,height:p.height,keepOrientation:p.keepOrientation,priorOrientation:p.priorOrientation||""});if(p.renderedLabel.objectSpec.type==="polygon")return HK(s,{path:p.renderedLabel.objectSpec.segments,pt_radius:10,width:p.width,height:p.height,keepOrientation:p.keepOrientation,priorOrientation:p.priorOrientation||""});if(p.renderedLabel.objectSpec.type==="angle"){let h=p.renderedLabel.objectSpec.segments,g=this.grapher.settings.config.projectorMode?30:20;return qK(s,{pt_x:h[0],pt_y:h[1],startAngle:h[2],deltaAngle:h[3],isRightAngle:gk(h[3]),radius:g,pt_radius:10,width:p.width,height:p.height,keepOrientation:p.keepOrientation,priorOrientation:p.priorOrientation||""})}}else return UK(s,p);return[]});VK(l).forEach((p,h)=>{let g=a[h].renderedLabel;g.orientation=p.orientation;let m=p.left-p.pt_x,b=p.top-p.pt_y;g.left=m,g.top=b,g.rotatedWidth=p.width,g.rotatedHeight=p.height,g.alignedWidth=a[h].width,g.alignedHeight=a[h].height;let x=p.translate.multiplyWidth*g.alignedWidth+p.translate.addX,E=p.translate.multiplyHeight*g.alignedHeight+p.translate.addY;g.screenX=p.pt_x,g.screenY=p.pt_y;let S=g.animation;S||(S={from_dx:x,from_dy:E,to_dx:x,to_dy:E,now_dx:x,now_dy:E,positionChangeTime:0,orientation:p.orientation},g.animation=S),S.orientation===p.orientation&&(S.to_dx=x,S.to_dy=E);let k,T,I=(Date.now()-S.positionChangeTime)/Hae;if(I<1){let A=.3*I+2.4*I*I-1.7*I*I*I;k=S.from_dx*(1-A)+S.to_dx*A,T=S.from_dy*(1-A)+S.to_dy*A}else k=S.to_dx,T=S.to_dy;S.now_dx=k,S.now_dy=T,S.to_dx=x,S.to_dy=E,S.orientation!==p.orientation&&(S.positionChangeTime=Date.now(),S.from_dx=k,S.from_dy=T,S.orientation=p.orientation);let P=g.labelDOM;if(P&&!g.willCopyToCanvas){P.style.transform=`translate(${S.now_dx}px,${S.now_dy}px)`;let A=g.containerDOM;A&&(A.style.left=p.pt_x+"px",A.style.top=p.pt_y+"px")}})}copyToCtx(e,t){En(e,"labels");let o=this.node.getBoundingClientRect();this.cachedLabelOrder.forEach(i=>{var h,g;let n=this.cachedLabelDict[i];if(!n||!n.willCopyToCanvas)return;let a=n.labelDOM;if(!a||t.filter!==n.layerFilter||!t.allowedSketches.has(n.sketchId))return;let s=(h=n.cachedDrawingCommands)==null?void 0:h.commands,l={};for(let m in WK)if(WK[m]===!0){let b=n[m],x=(g=n.cachedDrawingCommands)==null?void 0:g.cacheKeys[m];l[m]=b,__dcg_shared_module_exports__['s'](x,b)||(s=void 0)}if(!s){let m={originX:o.x,originY:o.y,hasOutline:!!n.hasOutline,hasBorder:!!n.hasBorder,hasFocus:!!n.focused&&n.isNakedLabel};s=bk(a,m),n.cachedDrawingCommands={cacheKeys:l,commands:s}}let c=this.computeRotatedCenter(n.screenX,n.screenY,n.rotation),p={x:0,y:0};n.animation&&(p.x=n.animation.now_dx,p.y=n.animation.now_dy),e.save(),e.globalAlpha=n.opacity,e.rotate(n.rotation),e.translate(c.x+p.x,c.y+p.y),yk(s,e),e.restore()}),In(e)}areAnyLabelsAnimating(){var e;for(let t in this.cachedLabelDict){let o=(e=this.cachedLabelDict[t])==null?void 0:e.animation;if(o&&(o.now_dx!==o.to_dx||o.now_dy!==o.to_dy))return!0}return!1}computeRotatedCenter(e,t,o){let i=Math.cos(-o),n=Math.sin(-o),a=e*i-t*n,s=t*i+e*n;return{x:a,y:s}}recomputeLabels(e,t,o){let i=this.cachedLabelDict;this.cachedLabelDict={},this.cachedLabelOrder=[],this.computeAllLabels(e,i),this.computeHoveredLabel(e,i),this.computeTraceLabel(e,i),this.update(),this.positionLabels(this.cachedLabelOrder,this.cachedLabelDict,t,o)}clearOpenedPOI(){this.openedPOI2Sketch={}}closePOI(e){delete this.openedPOI2Sketch[e.id]}openPOI(e){this.openedPOI2Sketch[e.id]=e.sketch.id}isOpenPOI(e){return this.openedPOI2Sketch.hasOwnProperty(e.id)}isHiddenInteractiveLabel(e){return!e||!e.hasInteractiveLabel()?!1:!this.isOpenPOI(e)&&this.getHoveredPOI()!==e}setHoveredPOI(e){this.hoveredPOI=e}getHoveredPOI(){return this.hoveredPOI}getHoveredInteractiveLabel(){let e=this.getHoveredPOI();if(e&&e.hasInteractiveLabel())return e}setTraceInfo(e){this.traceInfo=e}isTracing(){return!!this.traceInfo}getTraceInfo(){return this.traceInfo}getMQConfig(){return this.controller.getMathquillConfig({})}};function tp(r,e){let t=r[e];return Array.isArray(t)&&r.tableInfo?t[r.tableInfo.rowIndex]:t}var bx=class{constructor(e){this.geoHoveredObjects={},this.grapher=e,this.renderedPointsIdOrder=[],this.renderedPoints={},this.speakThrottledAlert=__dcg_shared_module_exports__['p'](()=>{let t=this.getPOIUnderAttention();if(!t){this.lastAriaAlert=void 0;return}let o=this.getAriaAlert({id:t.id,lastAriaAlert:this.lastAriaAlert,includeUsageInstructions:!1});o!=null&&o.updated&&(Te(o.completeMessage),this.lastAriaAlert=o)},1e3,{leading:!1,trailing:!0})}recomputeMovablePoints(e){let{projection:t}=e,o=this.grapher.graphSketches,i=this.renderedPoints;this.renderedPoints={},this.renderedPointsIdOrder=[];let n=this.grapher.poiController.keyboardAttentionManager.getKeyboardAttention(),a=n==null?void 0:n.calcId,s=(n==null?void 0:n.listIndex)||0,l=S=>{let k=!!n&&a===S.sketch.id&&s===S.listIndex,T=this.processPOI(t,S,i[S.id],k);T&&(this.renderedPoints[S.id]=T,this.renderedPoints[S.id].poi=S,this.renderedPointsIdOrder.push(S.id))};for(let S of this.grapher.generateMergeDrawOrder()){let k=o[S];k&&(k.getMovablePoints().forEach(l),k.getStaticLabeledPoints().forEach(l))}let c=this.renderedPoints[this.hoveredPointId],p=this.renderedPoints[this.pressedPointId],h=c&&c.poi,g=p&&p.poi;h||this.setHoveredPointId(void 0),g||this.setPressedPointId(void 0);let m=g||h,b,x;if(m?(b=m.type==="movable-point"&&m.tableInfo&&m.tableInfo.dragX,x=m.type==="movable-point"&&m.tableInfo&&m.tableInfo.dragY,b&&x||!b&&!x?this.grapher.setLayerClass("movablePoints","dcg-mouse-over-movable-point"):b?this.grapher.setLayerClass("movablePoints","dcg-mouse-over-movable-point-ew"):this.grapher.setLayerClass("movablePoints","dcg-mouse-over-movable-point-ns")):this.grapher.setLayerClass("movablePoints",void 0),!this.getPOIUnderAttention()){this.lastAriaAlert=void 0;return}this.speakThrottledAlert()}_clampedOpacity(e){return e<0?0:e>1?1:Number.isFinite(e)?e:1}getAllRenderedObjects(e){return this.renderedPointsIdOrder.filter(t=>e?this.renderedPoints[t].type===e:!0).map(t=>this.renderedPoints[t])}getOrderedTabTargets(e){let t=[];return this.renderedPointsIdOrder.forEach(o=>{let i=this.renderedPoints[o];if(e&&i.type!==e||this.getTabIndex(o)===-1)return;let n=i.poi;t.push({calcId:n.sketch.id,listIndex:n.listIndex,polygonEdge:void 0,description:this.getAriaLabel(o)})}),t}redrawToCtx(e,t,o,i){let n=this.grapher.graphSketches;for(let a of o){let s=n[a];if(!s)continue;let l=s.branches[0],c,p,h,g=!1;__dcg_shared_module_exports__['wd'](l)&&(c=l.pointOpacity,p=l.pointSize!==void 0?l.pointSize:8,h=l.style!==void 0?l.style:__dcg_shared_module_exports__['Pd'].POINT,g=!!l.pointOutline),s.getMovablePoints().forEach(m=>{let b;if(i.renderForScreenshot)b={screenX:t.mapx(m.x),screenY:t.mapy(m.y),color:m.color,pointOpacity:c,pointSize:p,pointStyle:h,animationPercent:0};else if(b=this.renderedPoints[m.id],!b||b.type!=="movable")return;let x=g;i.showMovablePoints?this.drawMovablePointOnCtx(e,m.sketch,{...b,enableWhiteOutline:x}):Ls.drawPointToCtx({ctx:e,projection:t,x:m.x,y:m.y,alpha:c,sketch:m.sketch,sizeFactor:p/8,style:h,opacityFactor:1,colorOverride:m.color,enableWhiteOutline:x})})}}processPOI(e,t,o,i){let n=t.id,a=t.x,s=t.y,l=e.mapx(a),c=e.mapy(s),p=t.sketch.branches[0],h=this.grapher.settings.config.projectorMode?1.3:1,g=__dcg_shared_module_exports__['wd'](p)&&p.pointSize!==void 0?p.pointSize:8*h,m=e.coordsAreOnscreen(l,c,g);if(!m&&!i)return;let b=t.sketch?this.grapher.controller.getItemModel(t.sketch.id):void 0,x=!!(b&&rn(b));if(!(b&&this.grapher.controller.shouldIgnoreGraphInteractions(b)))return o||(t.type==="movable-point"?o={type:"movable",id:n,pointOnScreen:m,poi:t,projection:e,screenX,screenY,color:tp(t,"color"),pointOpacity:tp(t,"pointOpacity"),pointSize:tp(t,"pointSize"),pointStyle:tp(t,"pointStyle"),pointIsHovered:!1,pointIsPressed:!1,selected:x,lastHoverActionTime:0,animationPercent:0}:b&&b.type==="expression"&&b.label!==void 0&&b.showLabel&&eo(b)!==__dcg_shared_module_exports__['hd'].NONE?o={type:"draggable-label",id:n,pointOnScreen:m,selected:x,poi:t,projection:e,screenX,screenY}:o={type:"static",id:n,pointOnScreen:m,poi:t,projection:e,screenX,screenY,selected:x}),o.pointOnScreen=m,o.poi=t,o.projection=e,o.screenX=l,o.screenY=c,o.type==="movable"&&(o.color=tp(o.poi,"color"),o.pointOpacity=tp(o.poi,"pointOpacity"),o.pointSize=tp(o.poi,"pointSize"),o.pointStyle=tp(o.poi,"pointStyle"),o.selected=x,this.updateMovablePointAnimation(o,i)),o}drawMovablePointOnCtx(e,t,o){var x;let i=o.pointSize/2*(this.grapher.settings.config.projectorMode?1.3:1);i<0&&(i=0),t.showHighlight&&(i*=1.15);let n=Array.isArray(o.color)?o.color[0]:o.color,a=o.animationPercent||0,s=this.shouldDrawGhosted(t.id)?S0.IS_GHOSTED:wy,l=this._clampedOpacity(s*o.pointOpacity);l*=(x=this.grapher.controller.getGeoModel().getToolFadeOpacity(t.id))!=null?x:1;let c=t.tokenHovered||!!this.geoHoveredObjects[t.id],p=o.pointStyle,h={x:o.screenX,y:o.screenY},g=o.enableWhiteOutline,m=e.fillStyle,b=e.globalAlpha;e.fillStyle=n,e.globalAlpha=l,Ls.drawMoveablePoint(e,p,h,i,g,c,a),e.globalAlpha=b,e.fillStyle=m}updateMovablePointAnimation(e,t){let o=Date.now(),i=e.id,n=this.hoveredPointId===i||t,a=this.pressedPointId===i;e.pointIsPressed=a,n!==e.pointIsHovered&&(e.pointIsHovered=n,e.lastHoverActionTime=o);let s=e.animationPercent||0,c=.004*(o-e.lastHoverActionTime);a?s=1:n?(s+=c,s>=1?s=1:this.requestRedrawNextFrame()):(s-=c,s<=0?s=0:this.requestRedrawNextFrame()),e.animationPercent=s}shouldDrawGhosted(e){if(!e)return!1;let t=this.grapher.controller.getItemModel(e);return!t||t.type!=="expression"?!1:$o(t)}getTabIndex(e){if(this.grapher.controller.getActiveTool()!=="selection")return-1;let t=this.renderedPoints[e];if(!t)return-1;let o=t.poi,i=this.grapher.controller.getItemEditableLabelMode(o.sketch.id),n=this.grapher.controller.getItemModel(o.sketch.id),a=n&&n.type==="expression"&&!Ei(n)&&(t.type==="movable"||i===void 0||i===__dcg_shared_module_exports__['me'].None),s=this.grapher.settings,l=s.config.graphpaper&&s.config.enableTabindex;return a&&l?0:-1}getAriaHidden(){return!this.grapher.settings.config.graphpaper}getAriaLabel(e){let t=this.getAriaAlert({id:e,includeUsageInstructions:!1});return t&&t.completeMessage}speakAriaAlert(){var i;let e=(i=this.getPOIUnderAttention())==null?void 0:i.id;if(e){let n=this.renderedPoints[e];if(!n||n.type==="static")return this.lastAriaAlert=void 0,!1}let t=this.getAriaAlert({id:e,lastAriaAlert:this.lastAriaAlert,includeUsageInstructions:!0}),o=!this.lastAriaAlert||this.lastAriaAlert.id!==e||!!(t!=null&&t.updated);return this.lastAriaAlert=t,t!=null&&t.completeMessage?(o&&Te(t.completeMessage),!0):!1}getAriaAlert(e){var H,w;let{id:t,lastAriaAlert:o,includeUsageInstructions:i}=e;if(!t)return;let n=this.renderedPoints[t];if(!n)return;let{controller:a}=this.grapher,s=n.poi.sketch?a.getItemModel(n.poi.sketch.id):void 0;if(!s||s.type!=="expression")return;o&&o.id!==t&&(o=void 0);let l=n.poi,c=n.pointOnScreen,p=n.projection,h=((H=s==null?void 0:s.formula.typed_constant_value)==null?void 0:H.valueType)===__dcg_shared_module_exports__['Va']?(w=s==null?void 0:s.formula.typed_constant_value)==null?void 0:w.value:void 0;if(!l||!p||!p.viewport)return;let m=o==null?void 0:o.label,b;a.isGeometry()&&Gi(s)?b=ok(s,a,{listIndex:l.listIndex,poi:l,includeDetails:!1}).join(" "):b=s.description?vr(_i(s,l.listIndex)):l.ariaLabel;let x=m!==b,E=n.selected,S=!!(o!=null&&o.selected)!==E,k=l.x,T=l.y,I=(k!==(o==null?void 0:o.coordX)||T!==(o==null?void 0:o.coordY))&&a.shouldNarrateCoordinates(),P=!1;s.description?P=s.description.indexOf("${")!==-1:P=!!(s.label&&s.label.indexOf("${")!==-1);let A=o&&(x||S||I),D=b||a.s("graphing-calculator-narration-movable-point-prefix"),G=!a.isGeometry()&&(n.type==="movable"||n.type==="draggable-label")&&i?a.s("graphing-calculator-narration-movable-point-suffix-usage-instructions"):"",N=c?"":a.s("graphing-calculator-narration-movable-point-off-screen-prompt"),U;if(o?x||!I&&S?U=D+N:I&&a.shouldNarrateCoordinates()&&!P?h?U=`${ur(__dcg_shared_module_exports__['la'](h))}${N}`:U=`${_s(a,k)} ${Ms(a,T)}${N}`:S?U=D:U=o.completeMessage:U=`${a.shouldNarrateCoordinates()?a.s("graphing-calculator-narration-item-at-coordinates",{itemDescription:D,coordinates:h?ur(__dcg_shared_module_exports__['la'](h)):Ea(a,k,T)}):D}${G}${N}`,(!o||S)&&a.isGeometry()&&(n.type==="movable"||n.type==="draggable-label")){let F=a.getActiveTool();(F==="selection"||F==="box-selection")&&(U=ZD(U||b||"",s,a))}return{id:t,coordX:k,coordY:T,label:b,selected:E,completeMessage:U,updated:A}}setHoveredPointId(e){e!==this.hoveredPointId&&(this.hoveredPointId=e,this.requestRedrawNextFrame())}isMovingPoint(){return!!this.pressedPointId}setPressedPointId(e){e!==this.pressedPointId&&(this.pressedPointId=e,this.requestRedrawNextFrame())}getPOIUnderAttention(){let e=this.grapher.poiController.keyboardAttentionManager.getKeyboardAttention();if(!e)return;let t=e.listIndex||0;for(let o in this.renderedPoints){let n=this.renderedPoints[o].poi;if(n.sketch.id===e.calcId&&n.listIndex===t)return n}}setGeoHoveredObjects(e){__dcg_shared_module_exports__['s'](e,this.geoHoveredObjects)||(this.geoHoveredObjects=e,this.requestRedrawNextFrame())}requestRedrawNextFrame(){this.grapher.controller.requestRedrawGraph()}};function Ea(r,e,t){if(r.shouldNarrateCoordinates())return _s(r,e)+" "+Ms(r,t)}function _s(r,e){let t=r.get2dProjection();if(!t)return"";let{width:o}=t.screen;return r.getReconciledReportPosition()==="coordinates"?r.s("graphing-calculator-narration-audio-trace-property-x",{x:ur(__dcg_shared_module_exports__['aa'](e,Fu(t,e)).latex)}):r.s("graphing-calculator-narration-x-percentage-coordinate",{x:Math.round(t.mathToPixels.mapX(e)/o*1e3)/10})}function Ms(r,e){let t=r.get2dProjection();if(!t)return"";let{height:o}=t.screen;return r.getReconciledReportPosition()==="coordinates"?r.s("graphing-calculator-narration-audio-trace-property-y",{y:ur(__dcg_shared_module_exports__['aa'](e,Fu(t,e)).latex)}):r.s("graphing-calculator-narration-y-percentage-coordinate",{y:Math.round(t.mathToPixels.mapY(e)/o*1e3)/10})}function Ar(r,e,t=0){if(!r)return"";let{controller:o}=r;if(r.type==="expression"){let i=o.isItemSecret(r.id);switch(e){case"describe":return i?o.s("graphing-calculator-narration-describe-secret-expression",{index:r.secretIndex}):o.s("graphing-calculator-narration-describe-expression",{index:r.displayIndex});case"delete":return i?o.s("graphing-calculator-narration-delete-secret-expression",{index:r.secretIndex}):o.s("graphing-calculator-narration-delete-expression",{index:r.displayIndex});case"duplicate":return i?o.s("graphing-calculator-narration-duplicate-secret-expression",{index:r.secretIndex}):o.s("graphing-calculator-narration-duplicate-expression",{index:r.displayIndex});case"show":return i?o.s("graphing-calculator-narration-show-secret-expression",{index:r.secretIndex}):o.s("graphing-calculator-narration-show-expression",{index:r.displayIndex});case"hide":return i?o.s("graphing-calculator-narration-hide-secret-expression",{index:r.secretIndex}):o.s("graphing-calculator-narration-hide-expression",{index:r.displayIndex});case"show-options":return i?o.s("graphing-calculator-narration-show-options-secret-expression",{index:r.secretIndex}):o.s("graphing-calculator-narration-show-options-expression",{index:r.displayIndex});case"hide-options":return i?o.s("graphing-calculator-narration-hide-options-secret-expression",{index:r.secretIndex}):o.s("graphing-calculator-narration-hide-options-expression",{index:r.displayIndex});case"create_table":return i?o.s("graphing-calculator-narration-create-table-secret-expression",{index:r.secretIndex}):o.s("graphing-calculator-narration-create-table-expression",{index:r.displayIndex});case"rename":return i?o.s("graphing-calculator-narration-rename-secret-expression",{index:r.secretIndex}):o.s("graphing-calculator-narration-rename-expression",{index:r.displayIndex});case"mute":return i?o.s("graphing-calculator-narration-mute-secret-expression",{index:r.secretIndex}):o.s("graphing-calculator-narration-mute-expression",{index:r.displayIndex});case"unmute":return i?o.s("graphing-calculator-narration-unmute-secret-expression",{index:r.secretIndex}):o.s("graphing-calculator-narration-unmute-expression",{index:r.displayIndex})}}if(r.type==="image")switch(e){case"describe":return vr(_i(r,t))||o.s("graphing-calculator-narration-describe-image",{index:r.displayIndex});case"delete":return o.s("graphing-calculator-narration-delete-image",{index:r.displayIndex});case"duplicate":return o.s("graphing-calculator-narration-duplicate-image",{index:r.displayIndex});case"show":return o.s("graphing-calculator-narration-show-image",{index:r.displayIndex});case"hide":return o.s("graphing-calculator-narration-hide-image",{index:r.displayIndex});case"show-options":return o.s("graphing-calculator-narration-show-options-image",{index:r.displayIndex});case"hide-options":return o.s("graphing-calculator-narration-hide-options-image",{index:r.displayIndex});case"edit_title":return o.s("graphing-calculator-narration-edit-image-title",{index:r.displayIndex})}if(r.type==="text")switch(e){case"describe":return o.s("graphing-calculator-narration-describe-text",{index:r.displayIndex});case"delete":return o.s("graphing-calculator-narration-delete-text",{index:r.displayIndex});case"duplicate":return o.s("graphing-calculator-narration-duplicate-text",{index:r.displayIndex});case"show":return o.s("graphing-calculator-narration-show-text",{index:r.displayIndex});case"hide":return o.s("graphing-calculator-narration-hide-text",{index:r.displayIndex});case"edit_title":return o.s("graphing-calculator-narration-edit-text-title",{index:r.displayIndex})}if(r.type==="table")switch(e){case"describe":return o.s("graphing-calculator-narration-describe-table",{index:r.displayIndex});case"delete":return o.s("graphing-calculator-narration-delete-table",{index:r.displayIndex});case"duplicate":return o.s("graphing-calculator-narration-duplicate-table",{index:r.displayIndex});case"show":return o.s("graphing-calculator-narration-show-table",{index:r.displayIndex});case"hide":return o.s("graphing-calculator-narration-hide-table",{index:r.displayIndex});case"rename":return o.s("graphing-calculator-narration-rename-table",{index:r.displayIndex})}if(r.type==="folder"){let i=!!r.title;switch(e){case"describe":return i?o.s("graphing-calculator-narration-describe-folder-title",{folder:r.title}):o.s("graphing-calculator-narration-describe-folder-index",{index:r.displayIndex});case"collapse":return i?o.s("graphing-calculator-narration-collapse-folder-title",{folder:r.title}):o.s("graphing-calculator-narration-collapse-folder-index",{index:r.displayIndex});case"expand":return i?o.s("graphing-calculator-narration-expand-folder-title",{folder:r.title}):o.s("graphing-calculator-narration-expand-folder-index",{index:r.displayIndex});case"show":return i?o.s("graphing-calculator-narration-show-folder-title",{folder:r.title}):o.s("graphing-calculator-narration-show-folder-index",{index:r.displayIndex});case"hide":return i?o.s("graphing-calculator-narration-hide-folder-title",{folder:r.title}):o.s("graphing-calculator-narration-hide-folder-index",{index:r.displayIndex});case"duplicate":return i?o.s("graphing-calculator-narration-duplicate-folder-title",{folder:r.title}):o.s("graphing-calculator-narration-duplicate-folder-index",{index:r.displayIndex});case"delete":return i?o.s("graphing-calculator-narration-delete-folder-title",{folder:r.title}):o.s("graphing-calculator-narration-delete-folder-index",{index:r.displayIndex});case"edit_title":return o.s("graphing-calculator-narration-edit-folder-title",{index:r.displayIndex})}}switch(e){case"describe":return o.s("graphing-calculator-narration-describe");case"delete":return o.s("graphing-calculator-narration-delete");case"duplicate":return o.s("graphing-calculator-narration-duplicate");case"expand":return o.s("graphing-calculator-narration-expand");case"collapse":return o.s("graphing-calculator-narration-collapse");case"show":return o.s("graphing-calculator-narration-show");case"hide":return o.s("graphing-calculator-narration-hide");case"show-options":return o.s("graphing-calculator-narration-show-options");case"hide-options":return o.s("graphing-calculator-narration-hide-options");case"create_table":return o.s("graphing-calculator-narration-create-table");case"rename":return o.s("graphing-calculator-narration-rename");case"edit_title":return o.s("graphing-calculator-narration-edit-title");case"mute":return o.s("graphing-calculator-narration-mute");case"unmute":return o.s("graphing-calculator-narration-unmute");default:return e}}function Yr(r,e,t={includeDetails:!0}){var l,c,p;if(!r)return e.s("graphing-calculator-narration-geometry-nothing-selected");let o=t.listIndex||0,i=t.description||"";if(r.type!=="expression"){if(r.type==="image"){let h=i!==""?i:Ar(r,"describe",o),{x:g,y:m}=r.formula.dimensions;if(g&&m&&typeof g[o]=="number"&&typeof m[o]=="number"){let b=Ea(e,g[o],m[o]);i=b?e.s("graphing-calculator-narration-item-at-coordinates",{itemDescription:h,coordinates:b}):h}else i=h}}else(!r.latex||!((l=r.formula)!=null&&l.typed_constant_value))&&(i=i!==""?i:Ar(r,"describe"));let n=t.poi&&t.poi.sketch.showPOI&&t.poi.type==="static-labeled-point",a=r.type==="expression"&&((c=r.formula.typed_constant_value)==null?void 0:c.valueType)===__dcg_shared_module_exports__['Va']?(p=r.formula.typed_constant_value)==null?void 0:p.value:void 0;if(!i&&Gi(r))i=Wae(r,e,t),i=jae(i,r,e,t);else if(t.includeDetails&&t.poi&&!n){let h=Ea(e,t.poi.x,t.poi.y);i=a?i:h?e.s("graphing-calculator-narration-item-at-coordinates",{itemDescription:i,coordinates:h}):i}let s=i;return t.includeSelectionState&&!Yy(r)&&!n&&(s=ZD(s,r,e)),s}function Wae(r,e,t={includeDetails:!0}){var l;let{value:o,valueType:i}=Oc(r,t);if(!o)return e.s("shared-calculator-narration-item-unknown");let n=[];if(__dcg_shared_module_exports__['qb'](i))n=X8(r,e,t);else switch(i){case __dcg_shared_module_exports__['va']:n=ok(r,e,t);break;case __dcg_shared_module_exports__['Ga']:n=K8(r,e,t);break;case __dcg_shared_module_exports__['Ha']:n=W8(r,e,t);break;case __dcg_shared_module_exports__['Da']:n=$8(r,e,t);break;case __dcg_shared_module_exports__['Ia']:case __dcg_shared_module_exports__['Ka']:case __dcg_shared_module_exports__['Ea']:case __dcg_shared_module_exports__['Sa']:n=j8(r,e,t);break;case __dcg_shared_module_exports__['Ma']:case __dcg_shared_module_exports__['Oa']:n=Y8(r,e,t);break;default:n.push(e.s("shared-calculator-narration-item-unknown"))}let a=n.join(" "),s=(l=r.formula.geometry)==null?void 0:l.call;return s&&(a=$ae(a,s,e)),a}function $ae(r,e,t){let o,i=e.parents;if(e.symbol==="apply"){let n=i[0].type!=="arbitrary-expression"?__dcg_shared_module_exports__['Lc'](i[0]):void 0,a=n?t.getItemsByIdentifier(n):[];if(n&&a.length===0)o=n;else for(let s of a){if(s.type!=="expression")continue;let l=s.formula.geometry;if(!(!l||!l.call)){o=l.call.symbol;break}}}else if(__dcg_shared_module_exports__['Mc'](e.symbol))o=e.symbol;else return r;switch(o){case"coterminal":case"supplement":return r;case"dilate":return t.s("graphing-calculator-narration-geometry-dilated-item",{item:r});case"rotate":return t.s("graphing-calculator-narration-geometry-rotated-item",{item:r});case"translate":return t.s("graphing-calculator-narration-geometry-translated-item",{item:r});case"reflect":return t.s("graphing-calculator-narration-geometry-reflected-item",{item:r});default:return t.s("graphing-calculator-narration-geometry-transformed-item",{item:r})}}function jae(r,e,t,o){var i,n;return o.listIndex!==void 0&&((n=(i=e.formula)==null?void 0:i.geometry)!=null&&n.valueType)&&__dcg_shared_module_exports__['qb'](e.formula.geometry.valueType)?t.s("graphing-calculator-narration-item-with-list-index",{listIndex:o.listIndex+1,item:r}):o.polygonEdge!==void 0?t.s("graphing-calculator-narration-geometry-edge-of-polygon",{polygonEdge:o.polygonEdge+1,item:r}):r}function ZD(r,e,t){return(e&&rn(e)?t.s("shared-calculator-narration-item-selected",{item:r}):t.s("shared-calculator-narration-item-unselected",{item:r})).trim()}function _e(r){return{shouldBeFocused:()=>!!Wm(r),onFocusedChanged:e=>{yx(r,e)}}}function rp(r){return{isFocused:()=>{var e;return!!Wm({...r,location:r.location(),predicate:(e=r.predicate)==null?void 0:e.call(r)})},onFocusedChanged:e=>{var t;yx({...r,location:r.location(),predicate:(t=r.predicate)==null?void 0:t.call(r)},e)},handleFocusChanged:e=>{var t;yx({...r,location:r.location(),predicate:(t=r.predicate)==null?void 0:t.call(r)},e)}}}function Wm(r){let e=r.predicate;if(e&&!e())return!1;let t=r.controller.getFocusLocation();return t&&__dcg_shared_module_exports__['s'](t,r.location)}function yx(r,e){let t=r.predicate;t&&!t()||(e?r.controller.dispatchFocusAction({type:"set-focus-location",location:r.location}):r.controller.dispatchFocusAction({type:"blur-focus-location",location:r.location}))}var QD=Symbol("HANDLE_EVENT_GLOBAL_NAMESPACE"),Gu=class Gu{constructor(){this.handledBy=new Set}static getOrCreate(e){let t=Gu.metadataMap.get(e);return t||(t=new Gu,Gu.metadataMap.set(e,t)),t}static get(e){return Gu.metadataMap.get(e)}};Gu.metadataMap=new WeakMap;var Ak=Gu;function XK(r){return"originalEvent"in r?r.originalEvent:r}function Dt(r,e=QD){let t=r&&XK(r);if(!t)return;let o=Ak.getOrCreate(t);o==null||o.handledBy.add(e)}function Or(r,e=QD){let t=r&&XK(r),o=t&&Ak.get(t);if(o!=null&&o.handledBy.has(e))return!0;if(e!==QD)return!1;let i=(r==null?void 0:r.target)instanceof Element&&r.target.closest("[handleEvent]");return i&&i!==r.currentTarget?i.getAttribute("handleEvent")!=="false":!1}var{cos:gi,sin:Mi,max:op,min:$m,abs:ts,sign:JK,hypot:ZK,PI:zi}=Math,xx=22,jo=xx/2,Yo=xx/2,Je=r=>r.toFixed(1),tO={type:"arc",center:[0,0],radius:1,startAngle:zi/4,endAngle:zi/4+zi},QK=[[-1,0],[0,1],[1,-1]],rO={start:0,delta:zi/4},eO=zi/4,oO={angle:zi/8,side:1},Yae=["dcg-token-perpendicular","dcg-token-parallel","dcg-token-translate","dcg-token-vector","dcg-token-segment","dcg-token-line","dcg-token-ray","dcg-token-angle","dcg-token-angles","dcg-token-directedangle","dcg-token-directedangles","dcg-token-arc","dcg-token-polygon"];function eW(r){return Yae.includes(r)}function tW(r){switch(r.type){case"angle":case"angles":return rse(r.start,r.delta);case"directedangle":case"directedangles":return ose(r.start,r.delta);case"arc":return ise(r.arcDetails);case"polygon":return nse(r.points);case"segment":return ase(r.angle);case"line":return sse(r.angle);case"anglebisector":case"ray":return lse(r.angle);case"vector":case"translate":return cse(r.angle);case"parallel":return dse(r.angle,r.side);case"perpendicular":return pse(r.angle)}}function rW(r,e,t){var o,i,n,a,s,l,c;switch(r){case"angle":case"angles":case"directedangle":case"directedangles":{let p=(o=Xae(r,e))!=null?o:rO,{start:h,delta:g}=p;return{type:r,start:h,delta:g}}case"arc":{let p=(i=Jae(e))!=null?i:tO;return{type:r,arcDetails:p}}case"polygon":{let p=(n=Zae(e))!=null?n:QK;return{type:r,points:p}}case"perpendicular":case"anglebisector":case"ray":case"line":case"segment":{let p=(a=oW(e))!=null?a:eO;return{type:r,angle:p}}case"translate":{let p=(s=ese(e))!=null?s:eO;return{type:r,angle:p}}case"vector":{let p=(l=Qae(e))!=null?l:eO;return{type:r,angle:p}}case"parallel":{let{angle:p,side:h}=(c=tse(e,t))!=null?c:oO;return{type:r,angle:p,side:h}}}}function Xae(r,e){if((e==null?void 0:e.valueType)!==__dcg_shared_module_exports__['Ma']&&(e==null?void 0:e.valueType)!==__dcg_shared_module_exports__['Oa'])return;let[t,o,i]=e.value;return{type:r,start:o,delta:i}}function Jae(r){return(r==null?void 0:r.valueType)===__dcg_shared_module_exports__['Ha']?__dcg_shared_module_exports__['cc'](r.value):void 0}function Zae(r){return(r==null?void 0:r.valueType)===__dcg_shared_module_exports__['Da']?r.value:void 0}function oW(r){let e=r==null?void 0:r.valueType;if(e!==__dcg_shared_module_exports__['Ea']&&e!==__dcg_shared_module_exports__['Ia']&&e!==__dcg_shared_module_exports__['Ka'])return;let[[t,o],[i,n]]=r.value;return __dcg_shared_module_exports__['L'](i-t,n-o)}function Qae(r){if((r==null?void 0:r.valueType)!==__dcg_shared_module_exports__['Sa'])return;let[e,t]=r.value[0];return __dcg_shared_module_exports__['L'](e,t)}function ese(r){if((r==null?void 0:r.valueType)!==__dcg_shared_module_exports__['Qa'])return;let[e,t]=r.value[1];return __dcg_shared_module_exports__['L'](e,t)}function tse(r,e){var i;if((r==null?void 0:r.valueType)!==__dcg_shared_module_exports__['Ia'])return oO;let t=(i=oW(r))!=null?i:oO.angle,o=1;if(e.length===2){let n=e[0],a=e[1],s=n==null?void 0:n.valueType;if((s===__dcg_shared_module_exports__['Ea']||s===__dcg_shared_module_exports__['Ia']||s===__dcg_shared_module_exports__['Ka'])&&(a==null?void 0:a.valueType)===__dcg_shared_module_exports__['va']){let[l,c]=n.value[0],[p,h]=n.value[1],[g,m]=a.value,b=p-l,E=-(h-c),S=b,k=p-g,T=h-m;o=E*k+S*T>0?1:-1}}return{angle:t,side:o}}function iW(r,e){(!isFinite(r)||!isFinite(e))&&(r=rO.start,e=rO.delta);let t=gi(r),o=-Mi(r),i=gi(r+e),n=-Mi(r+e),a=op(0,t,i)-$m(0,t,i),s=op(0,o,n)-$m(0,o,n),l=ts(e)>zi,c=l?2:op(a,s),p=.73*xx/c,h=p*t,g=p*o,m=p*i,b=p*n,x=l?0:($m(0,h,m)+op(0,h,m))/2,E=l?0:($m(0,g,b)+op(0,g,b))/2,S=jo-x,k=Yo-E;return{x1:h,y1:g,x2:m,y2:b,tx:S,ty:k,r:p}}function rse(r,e){let{x1:t,y1:o,x2:i,y2:n,tx:a,ty:s,r:l}=iW(r,e),c=.6,p=c*t,h=c*o,g=c*i,m=c*n,b=ts(e)>zi?1:0,x=e>0?0:1,E=`M ${Je(p)} ${Je(h)} A ${Je(c*l)} ${Je(c*l)} 0 ${b} ${x} ${Je(g)} ${Je(m)}`;return`<g transform="translate(${a} ${s})"><polyline points="${Je(t)},${Je(o)},0,0,${Je(i)},${Je(n)}" /><path d = "${E}" class="dcg-token-angle-arc"/><path d = "${E} L 0 0" class="dcg-token-angle-fill"/></g>`}function ose(r,e){let{x1:t,y1:o,x2:i,y2:n,tx:a,ty:s,r:l}=iW(r,e),c=.8,p=c*t,h=c*o,g=__dcg_shared_module_exports__['Ob'](1/(c*l),0,2),m=(ts(e)-g)*JK(e),b=(e+m)/2,x=c*l*gi(r+m),E=-c*l*Mi(r+m),S=JK(e),k=S*3.5,T=S*(60*zi)/180,I=.7,P=r+b,A=x+k*Mi(P+T*(1-I)),D=E+k*gi(P+T*(1-I)),G=x+k*Mi(P-T*I),N=E+k*gi(P-T*I),U=ts(e)>zi?1:0,K=e>0?0:1,H=`M ${Je(p)} ${Je(h)} A ${Je(c*l)} ${Je(c*l)} 0 ${U} ${K} ${Je(x)} ${Je(E)}`,w=`M ${Je(A)} ${Je(D)} L ${Je(x)} ${Je(E)} L ${Je(G)} ${Je(N)}`;return`<g transform="translate(${a} ${s})"><polyline points="${Je(t)},${Je(o)},0,0,${Je(i)},${Je(n)}" />`+(ts(e)<.05?"":`<path d = "${H}" class="dcg-token-directedangle-arc"/>`)+(ts(e)<.29?"":`<path d = "${w}" class="dcg-token-directedangle-arrowhead"/>`)+"</g>"}function ise(r){if(r===void 0)return"";switch(r.type){case"arc":{let{startAngle:e,endAngle:t}=r;(!isFinite(e)||!isFinite(t))&&(e=tO.startAngle,t=tO.endAngle);let o=t-e,i=.386*xx;if(ts(o)>6.16)return`<circle cx="${Je(jo)}" cy="${Je(Yo)}" r="${Je(i)}">`;if(ts(o)<zi/6){let k=(e+t)/2,T=i*Mi(k),I=i*gi(k);return`<path d = "M ${Je(jo-T)} ${Je(Yo-I)} l ${Je(2*T)} ${Je(2*I)}" />`}let n=.66*zi;ts(o)<n&&(i/=ts(o)/2);let a=i*gi(e),s=-i*Mi(e),l=i*gi(t),c=-i*Mi(t),p=i*gi((e+t)/2),h=-i*Mi((e+t)/2),g=__dcg_shared_module_exports__['Ob'](2*(zi-ts(o)),0,1),m=g*($m(a,l,p)+op(a,l,p))/2,b=g*($m(s,c,h)+op(s,c,h))/2,x=jo-m,E=Yo-b;return`<path d = "${`M ${Je(a+x)} ${Je(s+E)} A ${Je(i)} ${Je(i)} 0 ${ts(o)>zi?1:0} ${o>0?0:1} ${Je(l+x)} ${Je(c+E)}`}" />`}case"rays":{let{start1:e,end1:t}=r,o=t[0]-e[0],i=t[1]-e[1];(!isFinite(o)||!isFinite(o))&&(o=1,i=1);let n=ZK(o,i),a=3,s=a*o/n,l=-a*i/n;return`<path d = "M ${Je(jo-s)} ${Je(Yo-l)} l ${Je(-5*s)} ${Je(-5*l)}" /><path d = "M ${Je(jo+s)} ${Je(Yo+l)} l ${Je(5*s)} ${Je(5*l)}" />`}case"segment":{let{start:e,end:t}=r,o=t[0]-e[0],i=t[1]-e[1];(!isFinite(o)||!isFinite(o))&&(o=1,i=1);let n=ZK(o,i),a=7,s=a*o/n,l=a*i/n;return`<path d = "M ${Je(jo-s)} ${Je(Yo-l)} l ${Je(2*s)} ${Je(2*l)}" />`}}}function nse(r){if(r.length<2)return"";r.some(S=>!isFinite(S[0])||!isFinite(S[1]))&&(r=QK);let e=r[0];r=r.slice(1);let t=e[0],o=t,i=e[1],n=i;for(let S=0;S<r.length;S++){let k=r[S][0],T=r[S][1];k<t&&(t=k),k>o&&(o=k),T<i&&(i=T),T>n&&(n=T)}let a=(t+o)/2,s=(i+n)/2,l=op(o-t,n-i),c=.8*xx,p=S=>jo+c*(S-a)/l,h=S=>Yo-c*(S-s)/l,g=S=>`${S[0].toFixed(1)} ${S[1].toFixed(1)}`,m=p(e[0]),b=h(e[1]);if(!isFinite(m)||!isFinite(b))return"";let x=[];for(let S of r){let k=p(S[0]),T=h(S[1]);if(!isFinite(k)||!isFinite(T))return"";x.push(g([k,T]))}return`<path d = ${`"M ${g([m,b])} ${x.map(S=>`L ${S} `).join(" ")} Z"`} />`}function iO(r,e,t){let i=7*gi(r),n=7*Mi(-r);return`<path d = "M ${Je(jo-e*i)} ${Je(Yo-e*n)} L ${Je(jo+t*i)} ${Je(Yo+t*n)}" />`}function ase(r){return iO(r,1,1)}function sse(r){return iO(r,2,2)}function lse(r){return iO(r,1,2)}function cse(r){let o=48*(zi/180),i=8.5-1,n=8.5-7*gi(o),a=jo-i*gi(r),s=Yo+i*Mi(r),l=jo+n*gi(r),c=Yo-n*Mi(r),p=`M ${Je(a)} ${Je(s)} L ${Je(l)} ${Je(c)}`,h=jo+8.5*gi(r),g=Yo+8.5*Mi(-r),m=h-7*gi(r+o/2),b=g+7*Mi(r+o/2),x=h-7*gi(r-o/2),E=g+7*Mi(r-o/2),S=`M ${Je(m)} ${Je(b)} L ${Je(h)} ${Je(g)} L ${Je(x)} ${Je(E)}`;return`<path d = "${p}"/><path d = "${S}" class="dcg-token-vector-arrowhead"/>`}function dse(r,e){let o=14*gi(r),i=14*-Mi(r),n=4*gi(r+e*zi/2),a=4*-Mi(r+e*zi/2);return`<path d = "M ${Je(jo-o)} ${Je(Yo-i)} L ${Je(jo+o)} ${Je(Yo+i)}" /><path d = "M ${Je(jo+n-o)} ${Je(Yo+a-i)} L ${Je(jo+n+o)} ${Je(Yo+a+i)}" class="dcg-token-parallel-parent"/>`}function pse(r){let t=14*gi(r),o=14*-Mi(r);return`<path d = "M ${Je(jo-t)} ${Je(Yo-o)} L ${Je(jo+t)} ${Je(Yo+o)}" /><path d = "M ${Je(jo+o)} ${Je(Yo-t)} L ${Je(jo-o)} ${Je(Yo+t)}" class="dcg-token-parallel-parent"/>`}var{If:vx}=Lk.Components,use=.8,Pl=class extends Lk.View{init(){this.controller=this.props.controller()}template(){return _("span",{class:()=>{var t,o;let e=this.parentOrChildHovered();return{"dcg-geo-token-view":!0,"dcg-static-token":(o=(t=this.props).isStatic)==null?void 0:o.call(t),"dcg-selected-token":this.isTokenSelected(),"dcg-hidden-token":this.isHidden(),"dcg-token-has-label":this.showLabel(),"dcg-child-of-hovered-token":e==="child","dcg-parent-of-hovered-token":e==="parent","dcg-assignment-token":!!this.getAssignment(),"dcg-graph-interactions-disabled":this.isGraphInteractionDisabled(),"dcg-light-color":this.isLightColor()}},style:()=>({color:this.getColor()}),role:this.bindFn(this.getAriaRole),"dcg-token-type":()=>this.getTokenInfo().iconType,"aria-roledescription":()=>this.props.insideGroup()?void 0:this.controller.s("graphing-calculator-narration-geometry-construction-role-description"),"aria-label":this.bindFn(this.getAriaLabel),"aria-selected":this.bindFn(this.isTokenSelected),tabIndex:()=>this.props.putInTabOrder()?0:-1,manageFocus:()=>this.props.focusLocation?_e({controller:this.controller,location:this.props.focusLocation()}):void 0,onTapStart:this.bindFn(this.onTapStart),onTap:this.bindFn(this.onTap),onPointerOver:this.bindFn(this.onPointerOver),onPointerOut:this.bindFn(this.onPointerOut),children:[d("span",{class:u("dcg-token-background")}),_("span",{class:()=>({"dcg-token-icon":!0,[this.getAdditionalTokenClass()]:!!this.getAdditionalTokenClass(),"dcg-token-is-list":this.getIsList()&&!this.getAssignment()}),children:[d(vx,{predicate:()=>!!this.getIcon(),children:()=>d("i",{class:this.bindFn(this.getIcon)})}),d(vx,{predicate:()=>eW(this.getAdditionalTokenClass()),children:()=>d("div",{willUnmount:()=>this.willUnmountSVG(),didMount:e=>this.didMountSVG(e)})})]}),d(vx,{predicate:()=>!!this.getAssignment(),children:()=>d(St,{latex:this.bindFn(this.getAssignment),config:this.const({})})}),d(vx,{predicate:()=>this.showLabel(),children:()=>d("span",{class:()=>({"dcg-token-label":!0}),children:()=>this.getLabel()})}),d(vx,{predicate:this.bindFn(this.isGraphInteractionDisabled),children:()=>d("i",{class:u("dcg-icon-lock")})})]})}isLightColor(){let e=this.getColor();return!e||this.isTransformation()||this.isHidden()?!1:$g({type:"single-color",value:e},this.controller.invertSwatches(),use)}didMountSVG(e){this.svgElement=e,this.renderSVGElement()}willUnmountSVG(){this.svgElement=void 0,this.lastSVGInputs=void 0}getTypedValue(e){var i;if(e===void 0)return;let t=this.controller.getItemsByIdentifier(e);if(!t||t.length!==1)return;let o=t[0];return(i=o==null?void 0:o.formula)==null?void 0:i.typed_constant_value}getParentValues(e){var n,a,s;let t=this.controller.getItemsByIdentifier(e);if(!t||t.length!==1)return[];let o=t[0],i=(s=(a=(n=o==null?void 0:o.formula)==null?void 0:n.geometry)==null?void 0:a.call)==null?void 0:s.parents;return i===void 0?[]:i.map(l=>{if(l.type==="arbitrary-expression")return;let c=__dcg_shared_module_exports__['Lc'](l);return this.getTypedValue(c)})}renderSVGElement(){if(!this.svgElement)return;let e=this.props.identifier(),t=this.getIconType(),o=this.getTypedValue(e),i=this.getParentValues(e),n=rW(t,o,i);n!==void 0&&(__dcg_shared_module_exports__['s'](n,this.lastSVGInputs)||(this.lastSVGInputs=n,this.svgElement.innerHTML=`<svg>${tW(n)}</svg>`))}getAdditionalTokenClass(){if(this.getAssignment()||this.hasError())return"";switch(this.getIconType()){case"glider":return"dcg-token-glider";case"line":return"dcg-token-line";case"segment":return"dcg-token-segment";case"ray":return"dcg-token-ray";case"intersection":return"dcg-token-intersection";case"midpoint":return"dcg-token-midpoint";case"parallel":return"dcg-token-parallel";case"perpendicular":return"dcg-token-perpendicular";case"anglebisector":return"dcg-token-ray";case"rotate":return"dcg-token-rotate";case"circle":return"dcg-token-circle";case"arc":return"dcg-token-arc";case"vector":return"dcg-token-vector";case"dilate":return"dcg-token-dilate";case"reflect":return"dcg-token-reflect";case"translate":return"dcg-token-translate";case"transformation":return"dcg-token-transformation";case"point":case"start":case"end":return"dcg-token-point";case"polygon":return"dcg-token-polygon";case"angle":return"dcg-token-angle";case"angles":return"dcg-token-angles";case"directedangle":case"directedangles":return"dcg-token-directedangle"}return""}getIdFromParentRef(e){if(e.type==="arbitrary-expression")return;let t=__dcg_shared_module_exports__['Lc'](e);return this.controller.getExpressionIdForIdentifier(t)}isGraphInteractionDisabled(){let e=this.props.controller().getExpressionIdForIdentifier(this.props.identifier())||"",t=this.controller.getItemModel(e);return!!t&&(t.type==="expression"||t.type==="image")&&!!t.disableGraphInteractions}parentOrChildHovered(){var c,p,h,g,m,b;if(!this.props.showParentChildrenHover||!this.props.showParentChildrenHover())return!1;let e=this.controller.getHoveredOrFocusedTokenIdentifier(),t=this.controller.getExpressionIdForIdentifier(e),o=this.props.identifier(),i=this.props.controller().getExpressionIdForIdentifier(o)||"";if(!t)return!1;let n=this.controller.getItemModel(t),a=this.controller.getItemModel(i);if(!n||n.type!=="expression"||!a||a.type!=="expression")return!1;let s=((h=(p=(c=n.formula)==null?void 0:c.geometry)==null?void 0:p.call)==null?void 0:h.parents)||[],l=((b=(m=(g=a.formula)==null?void 0:g.geometry)==null?void 0:m.call)==null?void 0:b.parents)||[];for(let x=0;x<s.length;x++)if(this.getIdFromParentRef(s[x])===i)return"parent";for(let x=0;x<l.length;x++)if(this.getIdFromParentRef(l[x])===t)return"child";return!1}willUnmount(){this.implicitMouseOut()}didUpdate(){this.renderSVGElement();let e=this.props.identifier();this.currentlyActiveIdentifier&&e!==this.currentlyActiveIdentifier&&this.implicitMouseOut()}implicitMouseOut(){this.currentlyActiveIdentifier&&this.controller.runAfterDispatch(()=>{let e=this.currentlyActiveIdentifier;e&&(this.currentlyActiveIdentifier=void 0,this.controller.dispatch({type:"unset-active-token",identifier:e,style:"hovered"}))})}isHidden(){return this.getTokenInfo().isHidden}hasError(){let e=this.getTokenInfo();return!e||e.hasError}getIcon(){if(this.getAssignment())return;let e=this.getTokenInfo();if(this.hasError())return"dcg-icon-error";switch(e.iconType){case"point":case"glider":case"intersection":case"strictintersection":case"midpoint":case"start":case"end":return"dcg-icon-point";case"dilate":return"dcg-icon-dilation";case"rotate":return"dcg-icon-rotation";case"reflect":return"dcg-icon-reflection";case"transformation":return"dcg-icon-title";case"angle":case"angles":case"directedangle":case"directedangles":case"polygon":case"vector":case"translate":case"apply":case"arc":case"circle":case"clockwise":case"counterclockwise":case"error":case"line":case"parallel":case"perpendicular":case"anglebisector":case"ray":case"reflex":case"segment":case"segments":case"unknown":case"vertices":return;default:return e.iconType}}showLabel(){return!!this.getLabel()}getLabel(){if(this.getAssignment())return"";if(this.getIconType()!=="point"&&this.getIconType()!=="midpoint")return!1;let e=this.getTokenInfo().label.trim();return e.length<=2?e:""}getAssignment(){let e=this.props.identifier();return e[0]!=="$"?__dcg_shared_module_exports__['ia'](e):""}getAriaLabel(){let e=this.getTokenInfo(),t=Yr(this.controller.getItemModel(e==null?void 0:e.calcId),this.controller,{includeDetails:!1,depth:1});return this.isHidden()?this.controller.s("graphing-calculator-narration-geometry-hidden-construction-description",{description:t}):t}isTransformation(){var e;return((e=this.getTokenInfo())==null?void 0:e.groupType)==="transformation"}getColor(){if(this.getAssignment())return;let e=this.getTokenInfo();if(this.hasError())return"#fa824c";if(!(this.getIconType()==="translate"&&!this.isHidden()))return this.isTransformation()||this.isHidden()?"#aaa":e.color}getIconType(){return this.getTokenInfo().iconType}getIsList(){return this.getTokenInfo().isList}getTokenInfo(){let e=this.props.identifier();return this.controller.getTokenRenderInfoByIdentifier(e)}onPointerOver(e){var t,o;(o=(t=this.props).isStatic)!=null&&o.call(t)||e.pointerType==="mouse"&&(this.currentlyActiveIdentifier=this.props.identifier(),this.controller.dispatch({type:"set-active-token",identifier:this.currentlyActiveIdentifier,style:"hovered"}))}onPointerOut(e){var t,o;(o=(t=this.props).isStatic)!=null&&o.call(t)||e.pointerType==="mouse"&&this.currentlyActiveIdentifier&&(this.controller.dispatch({type:"unset-active-token",identifier:this.currentlyActiveIdentifier,style:"hovered"}),this.currentlyActiveIdentifier=void 0)}onTapStart(e){var t,o;(o=(t=this.props).isStatic)!=null&&o.call(t)||Dt(e)}onTap(e){var t,o;(o=(t=this.props).isStatic)!=null&&o.call(t)||(Dt(e),this.props.focusLocation&&this.controller.dispatch({type:"set-focus-location",location:this.props.focusLocation()}),this.controller.dispatch({type:"select-expression-that-defines-token",identifier:this.props.identifier(),toggle:this.isTokenSelected(),multiSelectMode:this.controller.isMultiSelectEnabled()&&!!e.shiftKey}))}isTokenSelected(){let e=this.getTokenInfo();return!!(e&&e.isSelected)}getAriaRole(){var e,t;if(!((t=(e=this.props).isStatic)!=null&&t.call(e)))return this.props.insideGroup()?"option":"button"}};var jm=r=>{let e=function(){return r};return e.isDcgViewConst=!0,e},Nm=class{constructor(e,t,o){this.tokenController=e,this.mathNode=t,this.isStatic=o}updateTokens(e){if(!this.mathNode)return;if(!this.lastTokenInfo||this.lastTokenInfo.latex!==e)if(!this.tokenController.doesLatexContainToken(e))this.lastTokenInfo={latex:e,tokens:[]};else{let o=[];this.mathNode.querySelectorAll(".dcg-mq-token").forEach(i=>{o.push(i)}),this.lastTokenInfo={latex:e,tokens:o}}let t=this.lastTokenInfo.tokens;for(let o of t){let i=o.dcgTokenView;if(i)i.update();else{let n=o.getAttribute("data-dcg-mq-token")||"",a=nW.mountToNode(Pl,o,{controller:jm(this.tokenController),identifier:jm("$"+n),insideMQ:jm(!0),insideGroup:jm(!1),putInTabOrder:jm(!1),isStatic:jm(this.isStatic)});o.dcgTokenView=a}}}};var{If:hse}=Pk.Components,Bm=500,gse=30,mse=100,qe=class r extends Pk.View{constructor(){super(...arguments),this.lastLatexProp=""}template(){return _("div",{class:u("dcg-mq-container"),children:[d(hse,{predicate:()=>this.getPlaceholder().trim().length>0,children:()=>d("span",{class:u("dcg-mq-placeholder"),children:d(St,{config:()=>this.props.config(),latex:()=>this.getPlaceholder()})})}),d("div",{class:()=>({"dcg-math-field":!0,"dcg-no-fadeout":this.props.noFadeout&&this.props.noFadeout(),"dcg-invalid":this.props.hasError(),"dcg-focus":this.props.isFocused()}),didMount:e=>this.didMountMathquill(e),"data-dcg-label":()=>this.props.dataLabelAttributeValue?this.props.dataLabelAttributeValue():void 0})]})}willUnmount(){var e;(e=this.mathquillFocus)==null||e.willUnmount(),this.mathField=void 0}getPlaceholder(){return!this.props.placeholder||this.props.isFocused()||this.props.latex()?"":this.props.placeholder()}didMountMathquill(e){var n,a;this.cachedConfig=this.getCacheableMQConfig();let t={...this.cachedConfig,restrictMismatchedBrackets:"none",handlers:{reflow:s=>{this.props.onReflow&&this.mathField&&this.props.onReflow(s)}},onCut:()=>{this.mathField&&(this.props.onUserChangedLatex(this.mathField.latex()),this.maybeTriggerOnSelectionChange())},onPaste:()=>{this.mathField&&(this.props.onUserChangedLatex(this.mathField.latex()),this.maybeTriggerOnSelectionChange())},overrideTypedText:s=>{this.mathField&&this.viewCanAcceptText(s)&&(this.mathField.typedText(s),this.props.onUserChangedLatex(this.mathField.latex()),this.maybeTriggerOnSelectionChange())},overrideKeystroke:(s,l)=>{if(s==="Backspace"&&l.preventDefault(),!this.mathField)return;if(s==="Spacebar"&&this.props.disableSpace&&this.props.disableSpace())return l.preventDefault();let c=Pe(l);if(c==="Up"||c==="Down"||c==="Left"||c==="Right"||c==="Esc"){let p=[];l.ctrlKey&&p.push("Ctrl"),l.metaKey&&p.push("Meta"),l.altKey&&p.push("Alt"),l.shiftKey&&p.push("Shift"),p.length?(p.push(c),s=p.join("-")):s=c}this.props.onUserPressedKey?this.props.onUserPressedKey(s,l):(this.mathField.keystroke(s,l),this.props.onUserChangedLatex(this.mathField.latex())),this.maybeTriggerOnSelectionChange()}};this.props.needsSystemKeypad&&this.props.needsSystemKeypad()&&(t.substituteTextarea=()=>{let s=document.createElement("textarea");return s.setAttribute("autocorrect","off"),s.setAttribute("autocapitalize","none"),s.setAttribute("spellcheck","false"),s.setAttribute("autocomplete","off"),s});let o=(a=(n=this.props).tokenController)==null?void 0:a.call(n);o&&(this.mathquillTokenHelper=new Nm(o,e,!1)),this.$mathField=re(e);let i=vs.MathField(e,t);this.mathField=i,e._mqMathFieldInstance=this.mathField,e._mqViewInstance=this,this.mathquillFocus=new Vg(i,this.$mathField,this.props),this.$mathField.on("paste.view",s=>this.onPasteEvent(s)),!l0&&(Ya||dy)&&this.$mathField.on("keypress.view",s=>this.onKeypressEvent(s)),this.hookupMQTapTouch(i),this.updateMathquill()}getCacheableMQConfig(){let e={...this.props.config()};return e.maxDepth=this.props.capExpressionSize()?gse:mse,e}didUpdate(){this.updateMathquill()}updateMathquill(){var e,t;this.updateMathquillConfig(),this.updateMathquillAria(),this.updateMathquillLatex(),(e=this.mathquillFocus)==null||e.updateMathquillFocused(),this.updateMathquillPostLabel(),(t=this.mathquillTokenHelper)==null||t.updateTokens(this.props.latex())}onPasteEvent(e){let t="",o=window.clipboardData,i=e.originalEvent;o&&o.getData?t=o.getData("Text"):i&&i.clipboardData&&i.clipboardData.getData&&(t=i.clipboardData.getData("text/plain"));let n=this.viewCanAcceptText(t);return!n&&this.props.onExpressionSizeExceeded&&this.props.onExpressionSizeExceeded(),n}viewCanAcceptText(e){return r.canAcceptText(this.mathField,this.props.capExpressionSize(),e)}static canAcceptText(e,t,o){if(!e)return!1;if(!t)return!0;let i=e.latex();return Ng(i)+Ng(o)<=Bm}onKeypressEvent(e){if(e.stopPropagation(),e.preventDefault(),!this.mathField)return;let t=e.key&&e.key.length===1?e.key:void 0;t&&this.viewCanAcceptText(t)&&(this.mathField.typedText(t),this.props.onUserChangedLatex(this.mathField.latex()))}hookupMQTapTouch(e){this.$mathField.on("dcg-tapstart.view",()=>{let t="dcg-tapend.mathquill-selection-change";this.maybeTriggerOnSelectionChange(),re(document).on(t,()=>{this.maybeTriggerOnSelectionChange(),re(document).off(t)})}),e.ignoreNextMousedown(()=>y0.shouldIgnoreMouseDown()),this.$mathField.on("dcg-tap.view",t=>{var n;let o=t;if(o.device!=="touch"||o.target.closest(".dcg-mq-ignore-mousedown"))return;let i=o.changedTouches[0];e.clickAt(i.clientX,i.clientY,i.target),(n=this.mathquillFocus)!=null&&n.isFocused()||e.focus()})}updateMathquillConfig(e={}){if(!this.mathField)return;let t={...this.getCacheableMQConfig(),...e};__dcg_shared_module_exports__['s'](t,this.cachedConfig)||(this.cachedConfig=t,this.mathField.config(t))}updateMathquillAria(){if(!this.mathField)return;let e=this.props.getAriaLabel();e!==this.mathField.getAriaLabel()&&this.mathField.setAriaLabel(e)}updateMathquillPostLabel(){this.mathField&&this.mathField.setAriaPostLabel(this.props.getAriaPostLabel(),1e3)}updateMathquillLatex(){let e=this.props.latex();this.mathField&&this.lastLatexProp!==e&&(this.props.capExpressionSize()&&Ng(e)>Bm||(this.lastLatexProp=e,this.mathField.latex()!==e&&this.mathField.latex(e)))}maybeTriggerOnSelectionChange(){let e=this.props.onSelectionChanged;if(!e||!this.mathField)return;let t=this.mathField.selection();__dcg_shared_module_exports__['s'](t,this.lastSelection)||(this.lastSelection=t,e(t))}static getFocusedMathquill(){if(!document.activeElement)return;let e=document.activeElement.closest(".dcg-mq-editable-field");if(e)return e._mqMathFieldInstance}static getMQViewInstance(e){let t=e.el();if(t)return t._mqViewInstance}static applyArrowKeyAndReturnIfWasAtBounds(e,t,o){let i=e.selection(),n=i.startIndex===0&&i.endIndex===i.latex.length;if(/(Up|Down)$/.test(t)&&n)return e.keystroke(t,o),!0;e.keystroke(t,o);let a=e.selection();return!(a.latex!==i.latex||a.startIndex!==i.startIndex||a.endIndex!==i.endIndex)}static temporarilyOverrideLeftRightIntoCommandGoes(e,t){var n;let o=r.getMQViewInstance(e);if(!o)return()=>{};let i=(n=o.getCacheableMQConfig().leftRightIntoCmdGoes)!=null?n:"up";return o.updateMathquillConfig({leftRightIntoCmdGoes:t}),()=>o.updateMathquillConfig({leftRightIntoCmdGoes:i})}static simulateKeypressFromKeypad(e,t){var n;let o=r.getMQViewInstance(e);if(!o)return;let i=(n=o.getCacheableMQConfig().leftRightIntoCmdGoes)!=null?n:"up";if((t==="Left"||t==="Right")&&o.updateMathquillConfig({leftRightIntoCmdGoes:void 0}),o.props.onUserPressedKey)o.props.onUserPressedKey(t);else{e.keystroke(t);let a=e.latex();o.props.onUserChangedLatex(a)}o.maybeTriggerOnSelectionChange(),(t==="Left"||t==="Right")&&o.updateMathquillConfig({leftRightIntoCmdGoes:i})}static simulateUserChangedLatex(e){let t=r.getMQViewInstance(e);if(t&&t.mathField){let o=t.mathField.latex();t.props.onUserChangedLatex(o),t.maybeTriggerOnSelectionChange()}}static handleKeystrokeAndDecideIfSpecialEvent(e,t,o){return t==="Enter"||t==="Delete"&&e.latex()===""||t==="Backspace"&&e.latex()===""?!0:t==="Up"||t==="Down"||t==="Left"||t==="Right"?r.applyArrowKeyAndReturnIfWasAtBounds(e,t,o):(e.keystroke(t,o),!1)}static normalizeLatex(e,t){let o=document.createElement("div"),i=vs.MathField(o,t);return i.latex(e),i.latex()}};ce();ie();var Dk=__dcg_shared_module_exports__['e'](se());var{For:fse,If:bse,IfElse:yse}=Dk.Components,hr=class extends Dk.View{constructor(){super(...arguments),this.btnViews={}}init(){this.config=this.props.staticConfig()}template(){return d("div",{class:()=>({"dcg-segmented-control-container":!0,"dcg-theme-mini":this.getTheme()==="mini","dcg-theme-full-width-mini":this.getTheme()==="full-width-mini","dcg-theme-default":this.getTheme()==="default","dcg-theme-vertical":this.getTheme()==="vertical"}),role:()=>{var e,t;return(t=(e=this.props).treatAsMultiSelect)!=null&&t.call(e)?"listbox":"radiogroup"},"aria-multiselectable":()=>{var e,t;return(t=(e=this.props).treatAsMultiSelect)!=null&&t.call(e)?!0:void 0},onKeyDown:this.bindFn(this.handleRadioKeydown),"aria-label":this.props.ariaGroupLabel,children:d(fse,{each:()=>this.config,children:e=>{let t=e();return d("div",{class:()=>{var o;return{"dcg-segmented-control-btn":!0,"dcg-selected":t.selected(),"dcg-disabled":this.isDisabled()||((o=t.disabled)==null?void 0:o.call(t)),[t.class?t.class():""]:!!t.class}},role:()=>{var o,i;return(i=(o=this.props).treatAsMultiSelect)!=null&&i.call(o)?"option":"radio"},tabIndex:()=>this.getTabIndexForOption(t),"aria-label":()=>this.getAriaLabel(t),style:()=>({"min-width":this.props.minButtonWidth?this.props.minButtonWidth()+"px":void 0}),"aria-checked":()=>{var o,i;return(i=(o=this.props).treatAsMultiSelect)!=null&&i.call(o)?void 0:t.selected()},"aria-selected":()=>{var o,i;return(i=(o=this.props).treatAsMultiSelect)!=null&&i.call(o)?t.selected():void 0},onTap:o=>{var i,n,a,s;this.isDisabled()||(i=t.disabled)!=null&&i.call(t)||(t.onSelect(o.device),(a=(n=this.props).focusOnTap)!=null&&a.call(n)&&((s=this.btnViews[t.key])==null||s.focus()))},didMount:o=>this.btnViews[t.key]=o,manageFocus:()=>{if(t.focusHelperOptions)return _e(t.focusHelperOptions)},children:d(Re,{tooltip:()=>{var o;return((o=t.tooltip)==null?void 0:o.call(t))||""},gravity:()=>{var o;return((o=t.tooltipGravity)==null?void 0:o.call(t))||"s"},disabled:()=>!(t.tooltip&&t.tooltip()),children:yse(()=>!!t.template,{false:()=>_("div",{class:u("dcg-segmented-control-interior"),children:[()=>t.label?t.label():"",d(bse,{predicate:()=>!!t.icon,children:()=>d("i",{class:()=>t.icon?t.icon():""})})]}),true:t.template})})})}},e=>e.key)})}getAriaLabel(e){return e.ariaLabel?e.ariaLabel():e.label?e.label():e.tooltip?e.tooltip():""}isDisabled(){var e,t;return!!((t=(e=this.props).disabled)!=null&&t.call(e))}getTheme(){return this.props.theme?this.props.theme():"default"}handleRadioKeydown(e){var p,h,g;let t=Pe(e);if(!zn(t,"direction")&&!zn(t,"line")||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return;e.preventDefault(),e.stopPropagation();let o=this.config.findIndex(m=>this.btnViews[m.key]===document.activeElement),i=this.config.length,n=o;t==="Home"&&(n=0),t==="End"&&(n=this.config.length-1),t==="Left"&&(n=(o-1+i)%i),t==="Right"&&(n=(o+1)%i);let a=this.props.numRows?this.props.numRows():1,s=Math.ceil(i/a),l=a===1?1:s;t==="Up"&&(n=(o-l+i)%i),t==="Down"&&(n=(o+l)%i);let c=this.config[n];c&&((p=this.btnViews[c.key])==null||p.focus(),!((g=(h=this.props).treatAsMultiSelect)!=null&&g.call(h))&&c.onSelect("keyboard"))}getTabIndexForOption(e){if(this.isDisabled())return-1;let t=e.key===this.config[0].key,o=this.config.find(i=>i.selected());return e.key===(o==null?void 0:o.key)||t&&!o?0:-1}};ce();ie();var i6=__dcg_shared_module_exports__['e'](se());Vt();function Rr(){document.activeElement&&Sc(document.activeElement)&&re(document.activeElement).trigger("blur")}var aW=__dcg_shared_module_exports__['e'](se());function xse(r){let e=r.target;return e.classList.contains("dcg-exp-action-button")||e.classList.contains("dcg-icon-duplicate")||e.classList.contains("dcg-icon-remove")||e.classList.contains("dcg-icon-lock")||e.classList.contains("dcg-icon-pencil")}var Cn=class extends aW.View{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,this._isFirstRender=!0,this._isDragCopy=this.props.isDragCopy()}onItemViewMounted(e){this._isDragCopy||(this.model.rootViewNode=e),this._isFirstRender=!1}onItemViewUnmounted(){this._isDragCopy||(this.model.rootViewNode=void 0)}isFirstRender(){return this._isFirstRender}onMouseSelect(e){if(this.controller.isInEditListMode()&&!xse(e)){this.exitEditListMode();return}this.controller.isItemReadonly(this.id)||e.type==="dcg-tap"&&e.device==="mouse"||e.type==="dcg-tapstart"&&e.device==="touch"||Or(e)||(Dt(e),this.controller.dispatch({type:"set-selected-id",id:this.id,state:"selected"}))}onDragPending(e){this.controller.isItemDraggable(this.model.id)&&this.props.onDragPending(e)}exitEditListMode(){this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!1,focusExpressionList:!0})}};ce();ie();var Ok=__dcg_shared_module_exports__['e'](se());var{If:nO}=Ok.Components,rs=class extends Ok.View{init(){this.controller=this.props.controller()}template(){return d(nO,{predicate:this.bindFn(this.shouldShowOptions),children:()=>_("span",{class:()=>({"dcg-expression-edit-actions":!0,"dcg-limited-height":this.limitedHeight()}),didMount:()=>{this.controller.isInEditListMode()&&Te(this.controller.s("graphing-calculator-narration-edit-list-mode-on"))},didUnmount:()=>{this.controller.isInEditListMode()||Te(this.controller.s("graphing-calculator-narration-edit-list-mode-off"))},children:[d("span",{class:u("dcg-graphic"),handleEvent:u("true")}),d(nO,{predicate:()=>pu(this.model())!==void 0,children:()=>d(Re,{tooltip:this.bindFn(this.getConvertTooltip),gravity:this.const("s"),children:d("span",{class:u("dcg-action-createtable dcg-exp-action-button"),handleEvent:u("true"),role:u("button"),tabIndex:u("0"),"aria-label":()=>Ar(this.model(),"create_table"),onTap:this.bindFn(this.onCreateTable),children:d("i",{class:u("dcg-icon-new-table"),"aria-hidden":u("true")})})})}),d(nO,{predicate:()=>this.controller.shouldShowAuthorFeatures(),children:()=>d(Re,{tooltip:this.bindFn(this.getReadonlyToggleLabel),gravity:this.const("s"),children:d("span",{class:()=>({"dcg-action-lock":!0,"dcg-exp-action-button":!0,"dcg-selected":this.isReadonly()}),handleEvent:u("true"),role:u("button"),tabIndex:u("0"),"aria-label":this.bindFn(this.getReadonlyToggleLabel),onTap:this.bindFn(this.onToggleReadonly),children:d("i",{class:u("dcg-icon-lock"),"aria-hidden":u("true")})})})}),d(Re,{tooltip:()=>this.controller.s("graphing-calculator-label-duplicate-expression-tooltip"),gravity:this.const("s"),children:d("span",{class:u("dcg-duplicate-btn dcg-exp-action-button"),handleEvent:u("true"),role:u("button"),tabIndex:u("0"),"aria-label":()=>Ar(this.model(),"duplicate"),onTap:this.bindFn(this.onDuplicateWithoutFocus),children:d("i",{class:u("dcg-icon-duplicate"),"aria-hidden":u("true")})})}),d(Re,{tooltip:()=>this.controller.s("graphing-calculator-label-expression-delete-tooltip"),gravity:this.const("s"),children:d("span",{class:u("dcg-delete-btn dcg-exp-action-button"),handleEvent:u("true"),role:u("button"),tabIndex:u("0"),"aria-label":()=>Ar(this.model(),"delete"),onTap:this.bindFn(this.onDelete),children:d("i",{class:u("dcg-icon-remove"),"aria-hidden":u("true")})})})]})})}shouldShowOptions(){return this.controller.isInEditListMode()&&(this.controller.shouldShowAuthorFeatures()||!this.controller.isItemReadonly(this.props.id()))}model(){return this.controller.getItemModel(this.props.id())}getConvertTooltip(){return T0(this.model())?this.controller.s("graphing-calculator-label-create-table"):this.controller.s("graphing-calculator-label-convert-to-table-tooltip")}limitedHeight(){let e=this.model();return e&&(e.type==="image"||this.isSlider())}isSlider(){let e=this.model();return e&&e.type==="expression"&&e.sliderExists}onCreateTable(){let e=this.model();e&&this.controller.dispatch({type:"convert-or-create-table",index:e.index})}onDelete(e){this.controller.dispatch({type:"delete-item-and-animate-out",id:this.props.id(),setFocusAfterDelete:e.device==="keyboard"})}onDuplicateWithoutFocus(){let e=this.model();e&&(e.type==="folder"?this.controller.dispatch({type:"duplicate-folder",id:this.props.id()}):this.controller.dispatch({type:"duplicate-expression",id:this.props.id()}))}isReadonly(){return this.controller.isItemMarkedReadonly(this.props.id())}onToggleReadonly(){let e=this.model();e&&this.controller.dispatch({type:"set-item-readonly",id:this.props.id(),readonly:!e.readonly})}getReadonlyIcon(){return this.isReadonly()?"dcg-icon-lock":"dcg-icon-pencil"}getReadonlyToggleLabel(){return this.isReadonly()?this.controller.s("graphing-calculator-label-unlock-expression-tooltip"):this.controller.s("graphing-calculator-label-lock-expression-tooltip")}};ce();ie();var kE=__dcg_shared_module_exports__['e'](se());ie();var sO=__dcg_shared_module_exports__['e'](se()),aO=class extends sO.View{template(){return d("div",{children:this.props.children})}shouldUpdate(){return this.props.shouldUpdate()}},Rk=class extends sO.View{template(){return d("div",{inert:()=>this.props.suspended()?!0:void 0,"aria-hidden":()=>this.props.suspended()?!0:void 0,class:()=>({"dcg-suspended":this.props.suspended()}),children:d(aO,{shouldUpdate:()=>!this.props.suspended(),children:this.props.children})})}};ce();ie();var Fk=__dcg_shared_module_exports__['e'](se());ie();var sW=__dcg_shared_module_exports__['e'](se());var Xo=class extends sW.View{init(){this.controller=this.props.controller()}template(){var e,t;return d(ir,{latex:this.props.latex,isFocused:this.bindFn(this.isFocused),isStatic:this.const(!0),ariaLabel:this.props.brailleAriaLabel||this.props.ariaLabel,...Wr(this.controller,{additionalOperators:((t=(e=this.props).additionalOperators)==null?void 0:t.call(e))||[]}),onKeydown:o=>{var i,n;return(n=(i=this.props).onKeypress)==null?void 0:n.call(i,o)},tabIndex:()=>this.props.tabbable()?0:-1,selectOnFocus:()=>!ja,onFocusedChanged:this.bindFn(this.onFocusChange)})}isFocused(){return!!this.props.focusLocation()&&__dcg_shared_module_exports__['s'](this.props.focusLocation(),this.controller.getFocusLocation())}onFocusChange(e,t){var i,n;let o=this.props.focusLocation();o&&(e?this.controller.dispatch({type:"set-focus-location",location:o}):(n=(i=this.props).suppressBlurEvent)!=null&&n.call(i,t)||this.controller.dispatch({type:"blur-focus-location",location:o}))}};var{If:vse}=Fk.Components,Nu=class extends Fk.View{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return _("div",{class:u("dcg-action-info"),handleEvent:u("true"),children:[d("span",{class:u("dcg-action-label"),children:"Run "}),d(Xo,{latex:()=>this.model.clickableInfo.latex,ariaLabel:()=>this.controller.s("graphing-calculator-label-ticker-min-step"),tabbable:this.const(!0),focusLocation:this.const({type:"action-info",id:this.model.id}),controller:this.props.controller,additionalOperators:this.const(["index"])}),d("span",{class:u("dcg-action-label"),children:" on click"}),d(vse,{predicate:()=>!this.controller.isItemReadonly(this.model.id),children:()=>d("span",{class:u("dcg-click-edit"),role:u("button"),tabIndex:u("0"),"aria-label":()=>this.controller.s("graphing-calculator-narration-edit-action"),onTap:this.bindFn(this.editAction),children:d("i",{class:u("dcg-icon-pencil"),"aria-hidden":u("true")})})})]})}editAction(){this.model.type==="expression"?this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"expression",model:this.model,guid:this.getMenuGUID(),focusFirstOption:!1}}):this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"image",model:this.model,guid:this.getMenuGUID(),focusFirstOption:!1}}),this.controller.dispatch({type:"set-focus-location",location:{type:"expression-menu",id:this.model.id,location:"updaterule"}})}getMenuGUID(){return this.model.guid}};ce();ie();var Sx=__dcg_shared_module_exports__['e'](se());ce();ie();var lW=__dcg_shared_module_exports__['e'](se());var Dl=class extends lW.View{template(){return d(Re,{tooltip:()=>this.props.controller().s("shared-calculator-label-toast-learn-more"),children:d("a",{"aria-label":()=>this.props.controller().s("shared-calculator-label-toast-learn-more"),class:u("dcg-learn-more-link"),href:this.props.href,target:u("_blank"),children:d("i",{class:u("dcg-icon-question-sign"),"aria-hidden":u("true")})})})}};ie();var Gk=__dcg_shared_module_exports__['e'](se());var{IfElse:wse}=Gk.Components,Ut=class extends Gk.View{init(){this.controller=this.props.controller()}template(){return d("div",{class:this.bindFn(this.getContainerClass),children:wse(this.props.readonly,{true:()=>d(ir,{latex:this.bindFn(this.getStaticLatex),isFocused:this.props.isFocused,isStatic:this.const(!0),onFocusedChanged:this.props.handleFocusChanged,brailleAriaLabel:this.props.brailleLabel,ariaLabel:this.props.ariaLabel,dataLabelAttributeValue:this.props.dataLabelAttributeValue,...Wr(this.props.controller())}),false:()=>d(ir,{latex:this.props.latex,isFocused:this.props.isFocused,selectOnFocus:this.const(!0),onKeydown:this.bindFn(this.onKeydown),hasError:this.props.hasError,placeholder:this.props.placeholder,brailleAriaLabel:this.props.brailleLabel,ariaLabel:this.props.ariaLabel,dataLabelAttributeValue:this.props.dataLabelAttributeValue,...Wr(this.props.controller()),getAriaPostLabel:()=>{var t,o;let e=((o=(t=this.props).ariaPostLabel)==null?void 0:o.call(t))||"";return this.props.hasError()&&e===""&&(e=this.controller.s("shared-calculator-narration-math-input-error-message")),e},onUserPressedKey:this.props.handlePressedKey,onUserChangedLatex:this.props.handleLatexChanged,onSelectionChanged:this.props.handleSelectionChanged,onFocusedChanged:this.props.handleFocusChanged})})})}getStaticLatex(){return this.props.latex()?this.props.latex():this.props.placeholder?this.props.placeholder():""}getContainerClass(){let e=this.props.containerClass?this.props.containerClass():{};return e["dcg-inline-math-input-view"]=!0,this.props.fullWidth&&this.props.fullWidth()&&(e["dcg-full-width-inline-math-input"]=!0),this.props.fontSize&&this.props.fontSize()==="large"&&(e["dcg-large-font-inline-math-input"]=!0),this.props.noBorder&&this.props.noBorder()&&(e["dcg-no-border-inline-math-input"]=!0),e}onKeydown(e){if(!this.props.handlePressedKey)return;let t=Pe(e);t&&this.props.handlePressedKey(t,e)}};var{If:lO}=Sx.Components,Nk=class extends Sx.View{constructor(){super(...arguments),this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id}handlePressedKey(e,t,o){if(!this.controller.isInEditListMode()){if(t==="Esc"){this.controller.dispatch({type:"set-focus-location",location:void 0});return}if(t==="Enter")return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"})}let i=qe.getFocusedMathquill(),n=Qn();if(t==="Left"||t==="Right"||t==="Down"||t==="Up"){let a;i?a=qe.applyArrowKeyAndReturnIfWasAtBounds(i,t,o):n&&(n.selectionStart===0&&t==="Left"||n.selectionStart===n.value.length&&t==="Right"||t==="Up"||t==="Down")?a=!0:a=!1,a&&(o&&o.preventDefault(),t==="Left"?e==="max"+this.getDomainVariableString()&&this.controller.dispatch({type:"set-focus-location",location:{type:"domain-limit",id:this.model.id,location:"min"+this.getDomainVariableString()}}):t==="Right"?e==="min"+this.getDomainVariableString()&&this.controller.dispatch({type:"set-focus-location",location:{type:"domain-limit",id:this.model.id,location:"max"+this.getDomainVariableString()}}):t==="Down"?this.controller.dispatch({type:"on-special-key-pressed",key:"Down"}):t==="Up"&&this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.model.id}}));return}i&&(i.keystroke(t,o),e==="min"+this.getDomainVariableString()?this.dispatchMinLatexIfChanged(i.latex()):e==="max"+this.getDomainVariableString()&&this.dispatchMaxLatexIfChanged(i.latex()))}getDomainVariable(){var o,i;let e=this.props.domainIndex(),t=(i=(o=this.model.formula.domains)==null?void 0:o[e])==null?void 0:i.variable;if(!t)throw new Error("Programming Error: could not find domain variable in index "+e);return t}handleFocusedChanged(e,t){t?this.controller.dispatch({type:"set-focus-location",location:{type:"domain-limit",id:this.id,location:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"domain-limit",id:this.id,location:e}})}dispatchMinLatexIfChanged(e){this.getMinLatex()!==e&&this.controller.dispatch({type:"set-domain-minlatex",variable:this.getDomainVariable(),id:this.id,latex:e})}dispatchMaxLatexIfChanged(e){this.getMaxLatex()!==e&&this.controller.dispatch({type:"set-domain-maxlatex",variable:this.getDomainVariable(),id:this.id,latex:e})}getFocusedInput(){let e=this.controller.getFocusLocation();if(!(!e||e.type!=="domain-limit"||e.id!==this.id))return e.location}getMinLatex(){return k8(this.model,this.getDomainVariable())}getMaxLatex(){return E8(this.model,this.getDomainVariable())}getDomainVariableString(){let e=this.getDomainVariable();return e==="theta"?e="\\theta":e==="phi"&&(e="\\phi"),e}getDomainVariableDisplayLatex(){return"\\le "+this.getDomainVariableString()+" \\le"}getPlaceholder(e){return __dcg_shared_module_exports__['aa'](e).string.replace("\u03C0","\\pi")}template(){return d("div",{class:u("dcg-domain dcg-do-blur"),handleEvent:u("true"),children:_("div",{class:u("dcg-display-domain dcg-do-blur"),handleEvent:u("true"),children:[d(Ut,{readonly:()=>this.controller.isItemReadonly(this.id),latex:()=>this.getMinLatex(),isFocused:()=>this.getFocusedInput()==="min"+this.getDomainVariableString(),placeholder:()=>this.getPlaceholder(o8(this.model,this.getDomainVariable())),ariaLabel:()=>this.controller.s("graphing-calculator-narration-domain3d-minimum",{term:this.getDomainVariableString()}),brailleLabel:()=>this.controller.raw("dmin"),handleFocusChanged:e=>this.handleFocusedChanged("min"+this.getDomainVariableString(),e),hasError:()=>!n8(this.model,this.getDomainVariable()),controller:this.props.controller,handlePressedKey:(e,t)=>this.handlePressedKey("min"+this.getDomainVariableString(),e,t),handleLatexChanged:e=>this.dispatchMinLatexIfChanged(e),dataLabelAttributeValue:this.const("domain-min")}),d("span",{class:u("dcg-interval-interior"),children:d(St,{latex:()=>this.getDomainVariableDisplayLatex(),config:this.const({})})}),d(Ut,{readonly:()=>this.controller.isItemReadonly(this.id),latex:()=>this.getMaxLatex(),isFocused:()=>this.getFocusedInput()==="max"+this.getDomainVariableString(),placeholder:()=>this.getPlaceholder(i8(this.model,this.getDomainVariable())),ariaLabel:()=>this.controller.s("graphing-calculator-narration-domain3d-maximum",{term:this.getDomainVariableString()}),brailleLabel:()=>this.controller.raw("dmax"),handleFocusChanged:e=>this.handleFocusedChanged("max"+this.getDomainVariableString(),e),hasError:()=>!a8(this.model,this.getDomainVariable()),controller:this.props.controller,handlePressedKey:(e,t)=>this.handlePressedKey("max"+this.getDomainVariableString(),e,t),handleLatexChanged:e=>this.dispatchMaxLatexIfChanged(e),dataLabelAttributeValue:this.const("domain-max")}),d(lO,{predicate:()=>this.getDomainVariableString()==="\\phi",children:()=>d(Dl,{href:this.const("https://help.desmos.com/hc/en-us/articles/15824510769805"),controller:this.props.controller})})]})})}},wx=class extends Sx.View{constructor(){super(...arguments),this.model=this.props.model()}hasFirstDomainIndex(){return Bd(this.model)||Pc(this.model)&&!C8(this.model)}hasSecondDomainIndex(){return Pc(this.model)?!_8(this.model):!1}template(){return _("div",{children:[d(lO,{predicate:this.bindFn(this.hasFirstDomainIndex),children:()=>d(Nk,{controller:this.props.controller,model:this.props.model,domainIndex:this.const(0)})}),d(lO,{predicate:this.bindFn(this.hasSecondDomainIndex),children:()=>d(Nk,{controller:this.props.controller,model:this.props.model,domainIndex:this.const(1)})})]})}};ce();ie();var Vu=__dcg_shared_module_exports__['e'](se());ce();ie();var cW=__dcg_shared_module_exports__['e'](se());var Ym=class extends cW.View{constructor(){super(...arguments),this.controller=this.props.controller(),this.showSuccessTimeout=void 0}template(){return d("div",{class:u("dcg-copy-evaluation-view"),children:d(Re,{tooltip:()=>this.controller.s("shared-button-copy-evaluation-value"),disabled:()=>!!this.showSuccessTimeout,children:d("button",{class:u("dcg-unstyled-button dcg-copy-evaluation-button"),"aria-disabled":()=>this.showSuccessTimeout?!0:void 0,onTap:this.bindFn(this.invokeCopyCallback),"aria-label":()=>this.controller.s("shared-button-copy-evaluation-value"),children:d("i",{class:()=>({"dcg-icon-duplicate":!this.showSuccessTimeout,"dcg-icon-check":!!this.showSuccessTimeout}),"aria-hidden":u("true")})})})})}invokeCopyCallback(){this.controller.onEvaluationCopyClick(this.props.latex()),clearTimeout(this.showSuccessTimeout),this.showSuccessTimeout=setTimeout(()=>{this.showSuccessTimeout=void 0,this._isMounted&&this.update()},1e3),this._isMounted&&this.update()}willUnmount(){clearTimeout(this.showSuccessTimeout)}};ie();var dW=__dcg_shared_module_exports__['e'](se());var Sse=.9,Vc=class extends dW.View{template(){return d("div",{class:()=>{var e,t;return{"dcg-color-swatch":!0,"dcg-forced-color-none":!0,"dcg-color-evaluation":(t=(e=this.props).isEvaluation)==null?void 0:t.call(e),"dcg-light-color":$g(this.props.color(),this.props.invertSwatches(),Sse)}},style:()=>({background:jg(this.props.color())})})}};var pW=15,cO=100,{If:dO,SwitchUnion:Tse,For:kse,Switch:uW,IfElse:Ese}=Vu.Components,Vk=class extends Vu.View{template(){return d("div",{class:u("dcg-evaluation-view__wrapped-value"),children:d(uW,{children:()=>d(Xo,{latex:this.props.latex,controller:this.props.controller,focusLocation:this.bindFn(this.getFocusLocation),tabbable:this.bindFn(this.isTabbable),ariaLabel:this.const("")})},this.bindFn(this.isTabbable))})}isTabbable(){return!this.props.listIndex||this.props.listIndex()===0}getFocusLocation(){return this.props.listIndex?{type:"expression-evaluation",id:this.props.id(),listIndex:this.props.listIndex()}:{type:"expression-evaluation",id:this.props.id()}}},Xm=class extends Vu.View{template(){return d("div",{tabIndex:()=>this.props.listIndex&&this.props.listIndex()>0?-1:0,class:u("dcg-evaluation-view__plaintext"),onTap:e=>e.target.focus(),manageFocus:this.const(_e({controller:this.props.controller(),location:this.getFocusLocation()})),children:this.props.content})}getFocusLocation(){return this.props.listIndex?{type:"expression-evaluation",id:this.props.id(),listIndex:this.props.listIndex()}:{type:"expression-evaluation",id:this.props.id()}}},Bk=class extends Vu.View{constructor(){super(...arguments),this.controller=this.props.controller()}template(){return d("div",{class:u("dcg-equals-or-slow"),children:Ese(()=>this.displaySlowEvaluation(),{true:()=>d(Re,{tooltip:()=>this.controller.s("shared-calculator-error-slow-evaluation"),sticky:this.const(!0),gravity:this.const("n"),children:d("span",{class:u("dcg-spinner"),"aria-hidden":u("true")})}),false:()=>d("span",{class:u("dcg-evaluation-view__equals-sign"),onTap:this.bindFn(this.selectEvaluation),children:d(St,{latex:this.const("="),config:this.const({})})})})})}displaySlowEvaluation(){return this.controller.shouldShowProgressUpdateIcons()&&this.controller.isItemSlowInEvaluator(this.props.id())}selectEvaluation(){let e=this.props.isList()?{type:"expression-evaluation",id:this.props.id(),listIndex:0}:{type:"expression-evaluation",id:this.props.id()};this.controller.dispatch({type:"set-focus-location",location:e})}},Tx=class extends Vu.View{constructor(){super(...arguments),this.controller=this.props.controller(),this.shouldShowShowMoreLink=!1,this.countToShow=cO,this.cachedEvaluationRHS=this.getEvaluationRHS()}template(){return d("div",{class:()=>({"dcg-evaluation-container":!0,"dcg-hidden":this.props.controller().isInEditListMode()}),handleEvent:u("true"),tabIndex:this.const("-1"),didMount:this.bindFn(this.remeasureDOMAndUpdateCache),onKeyDown:this.bindFn(this.handlePressedKey),children:Tse(()=>this.cachedEvaluationRHS,"type",{"list-count":e=>d(Xm,{...this.props,content:()=>this.controller.s("graphing-calculator-label-evaluation-list",{count:e().count})}),list:e=>_("div",{class:()=>({"dcg-evaluation-list":!0,"dcg-do-not-blur":!0}),handleEvent:u("true"),children:[_("div",{class:()=>({"dcg-evaluation-view__collapsed-list-values":this.listCollapsed(),"dcg-evaluation-view__list-values":!0,"dcg-evaluation-view__point-values":!!e().isPoint}),onMount:t=>this.listValuesEl=t,children:[d(Bk,{...this.props,isList:this.const(!0)}),d(kse.Count,{count:()=>e().displayedValues.length,children:t=>d(uW,{children:o=>o?d(Xm,{...this.props,content:()=>this.controller.s("shared-calculator-label-undefined"),listIndex:()=>t}):d(Vk,{controller:this.props.controller,id:this.props.id,latex:()=>this.getListValue(t),listIndex:()=>t})},()=>this.getListValue(t)==="undefined")}),d(dO,{predicate:()=>e().count>this.countToShow&&!this.listCollapsed(),children:()=>d("div",{class:u("dcg-blue-link dcg-do-not-blur dcg-show-even-more-link"),role:u("link"),tabIndex:u("0"),onTap:t=>this.expandFurther({focus:t.device==="keyboard"}),handleEvent:u("true"),children:()=>this.controller.s("account-shell-text-mygraphs-count-more",{count:e().count-this.countToShow})})})]}),d(dO,{predicate:()=>this.shouldShowShowMoreLink,children:()=>d("div",{class:u("dcg-show-more-link"),children:d("div",{class:u("dcg-blue-link dcg-do-not-blur"),role:u("link"),handleEvent:u("true"),tabIndex:u("0"),onTap:t=>this.expandList({focus:t.device==="keyboard"}),manageFocus:this.const(_e({controller:this.props.controller(),location:{type:"expression-evaluation",listIndex:"show-more",id:this.props.id()}})),children:()=>this.controller.s("graphing-calculator-label-evaluation-list",{count:e().count})})})})]}),number:e=>_("div",{class:()=>({"dcg-evaluation-number":!0,"dcg-evaluation-view__point-values":!!e().isPoint}),children:[d(Bk,{...this.props,isList:this.const(!1)}),d(Vk,{controller:this.props.controller,latex:()=>e().valueLatex,id:this.props.id}),d(dO,{predicate:this.bindFn(this.shouldShowCopyButton),children:()=>d(Ym,{controller:this.props.controller,latex:()=>e().valueLatex})})]}),undefined:()=>d(Xm,{...this.props,content:()=>this.controller.s("shared-calculator-label-undefined")}),emptyList:()=>d(Xm,{...this.props,content:()=>this.controller.s("shared-calculator-label-empty-list")}),rgbcolor:e=>d("div",{class:u("dcg-evaluation-view__color-swatch"),role:u("img"),"aria-label":()=>e().ariaLabel,tabIndex:u("0"),children:d(Vc,{color:()=>e().colorValue,isEvaluation:this.const(!0),invertSwatches:()=>this.controller.invertSwatches()})})})})}getListValue(e){let t=this.cachedEvaluationRHS;return(t==null?void 0:t.type)!=="list"?"":t.displayedValues[e]}listCollapsed(){return!this.controller.isEvaluationExpanded(this.props.id())}numValuesVisible(){return this.listCollapsed()?pW:this.countToShow}tryNavigatingUpOrDown(e){var m;let t=this.getCurrentListIndex();if(t===void 0)return!1;let o=t;if(this.cachedEvaluationRHS.type!=="list"||this.listCollapsed()||o===void 0)return!1;let i=(m=document.activeElement)==null?void 0:m.closest(".dcg-evaluation-view__wrapped-value");if(!i)return!1;if(e==="down"&&this.cachedEvaluationRHS.count===o+1||e==="up"&&o===0)return!0;let n=i.getBoundingClientRect(),a=n.top,s=n.left+n.width/2,l,c,p,h=a,g=s;for(;i!=null&&i.getBoundingClientRect;){l=i,c=h,p=g;let b=e==="up"?-1:1;if(i=e==="up"?l.previousElementSibling:l.nextElementSibling,!(i!=null&&i.getBoundingClientRect)||!i.classList.contains("dcg-evaluation-view__wrapped-value")||(n=i.getBoundingClientRect(),o+=b,h=n.top,g=n.left+n.width/2,h===a))continue;if(c!==a&&h!==c)return this.moveFocusToIndex(o-b),!0;if((e==="up"?g<s:g>s)&&h!==a)return c===a?this.moveFocusToIndex(o):Math.abs(g-s)>Math.abs(s-p)?this.moveFocusToIndex(o-b):this.moveFocusToIndex(o),!0}if(e==="up"&&this.moveFocusToIndex(0),e==="down"){if(this.cachedEvaluationRHS.count>this.countToShow)return this.expandFurther({focus:!1}),this.tryNavigateDownThroughList();this.moveFocusToIndex(this.cachedEvaluationRHS.count-1)}return!0}tryNavigateDownThroughList(){if(this.listCollapsed())return this.expandList({focus:"no-change"}),this.tryNavigateDownThroughList();if(this.tryNavigatingUpOrDown("down"))return!0;let e=this.getCurrentListIndex();return e===void 0||this.cachedEvaluationRHS.type!=="list"?!1:e<this.cachedEvaluationRHS.count-1?(this.moveFocusToIndex(this.cachedEvaluationRHS.count-1),!0):!1}handlePressedKey(e){let t=Pe(e),o=!1;switch(t){case"Up":this.tryNavigatingUpOrDown("up")||this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.props.id()}}),o=!0;break;case"Right":this.incrementThroughList(1)&&(o=!0);break;case"Left":this.incrementThroughList(-1)&&(o=!0);break;case"Down":this.tryNavigateDownThroughList()||this.controller.dispatch({type:"on-special-key-pressed",key:t}),o=!0;break;case"PageUp":case"PageDown":this.controller.dispatch({type:"on-special-key-pressed",key:t}),o=!0;break;case"Esc":this.listCollapsed()?Rr():(this.collapseList(),this.controller.dispatch({type:"set-focus-location",location:{type:"expression-evaluation",id:this.props.id(),listIndex:"show-more"}})),o=!0;break}o&&(e.preventDefault(),e.stopPropagation())}getCurrentListIndex(){let e=this.controller.focusLocation;if(!((e==null?void 0:e.type)!=="expression-evaluation"||e.id!==this.props.id()||e.listIndex===void 0||e.listIndex==="show-more"))return e.listIndex}moveFocusToIndex(e){this.controller.dispatch({type:"set-focus-location",location:{type:"expression-evaluation",id:this.props.id(),listIndex:e}})}incrementThroughList(e){if(this.cachedEvaluationRHS.type!=="list")return!1;let t=this.getCurrentListIndex();if(t===void 0)return!1;let o=t+e;return o<0||o>=this.cachedEvaluationRHS.count?!1:(o>this.maxVisibleIdx&&this.listCollapsed()?this.expandList({focus:!0}):o>=this.countToShow?this.expandFurther({focus:!0}):this.moveFocusToIndex(o),!0)}remeasureDOMAndUpdateCache(){var l,c;let e=this.cachedDisplay;if(this.cachedDisplay={expressionListWidth:this.controller.computeMajorLayout().list.width,evaluationRHS:this.cachedEvaluationRHS,listCollapsed:this.listCollapsed(),brailleMode:this.controller.getBrailleMode(),projectorMode:this.controller.getGraphSettings().config.projectorMode},!this.listValuesEl||((l=this.cachedEvaluationRHS)==null?void 0:l.type)!=="list"||!this.listCollapsed()||!this._isMounted||__dcg_shared_module_exports__['s'](e,this.cachedDisplay))return;let t=(c=this.listValuesEl.parentElement)==null?void 0:c.querySelector(".dcg-show-more-link"),o=(t==null?void 0:t.clientWidth)||0,i=this.listValuesEl.scrollWidth>this.listValuesEl.clientWidth+o||this.cachedEvaluationRHS.count>pW;if(i!==this.shouldShowShowMoreLink&&(this.shouldShowShowMoreLink=i,this.update()),!this.shouldShowShowMoreLink)return;let n=0,a=this.listValuesEl.getBoundingClientRect().right;this.listValuesEl.querySelectorAll(".dcg-evaluation-view__wrapped-value").forEach((p,h)=>{let g=p.getBoundingClientRect();g.left+g.width<=a&&(n=h)}),n!==this.maxVisibleIdx&&(this.maxVisibleIdx=n)}expandFurther(e){this.countToShow+=cO,e.focus?(this.update(),this.controller.dispatch({type:"set-focus-location",location:{type:"expression-evaluation",id:this.props.id(),listIndex:this.countToShow-cO}})):this.controller.dispatch({type:"set-selected-id",id:this.props.id(),state:"selected"})}expandList(e){this.shouldShowShowMoreLink=!1,this.controller.dispatch({type:"expand-evaluation",id:this.props.id()}),e.focus===!0?this.controller.dispatch({type:"set-focus-location",location:{type:"expression-evaluation",id:this.props.id(),listIndex:this.maxVisibleIdx+1}}):e.focus===!1&&Rr()}collapseList(){this.listCollapsed()||this.controller.dispatch({type:"collapse-evaluation",id:this.props.id()})}willUpdate(){this.cachedEvaluationRHS=this.getEvaluationRHS()}didUpdate(){this.remeasureDOMAndUpdateCache()}getColorLabel(){let e=this.controller.getItemModel(this.props.id());if(!(!e||e.type!=="expression"))return rk(e,this.controller)}getEvaluationRHS(){var i,n,a;let e=this.controller.getItemModel(this.props.id());if((e==null?void 0:e.type)!=="expression")return{type:"undefined"};let t=(i=e==null?void 0:e.formula)==null?void 0:i.is_evaluable,o=(n=e.formula)==null?void 0:n.typed_constant_value;if(!o||!__dcg_shared_module_exports__['ub'](o==null?void 0:o.valueType,__dcg_shared_module_exports__['Re']))return __dcg_shared_module_exports__['qb'](o==null?void 0:o.valueType)?{type:"list-count",count:o.value.length}:{type:"undefined"};switch(o.valueType){case __dcg_shared_module_exports__['ua']:return __dcg_shared_module_exports__['fa'](o.value,{...__dcg_shared_module_exports__['ca'],displayAsFraction:this.shouldDisplayAsFraction()}).type==="undefined"?{type:"undefined"}:{type:"number",valueLatex:(a=__dcg_shared_module_exports__['ha'](o.value,{...__dcg_shared_module_exports__['ca'],displayAsFraction:this.shouldDisplayAsFraction()}))!=null?a:""};case __dcg_shared_module_exports__['ya']:{if(o.value.length===0)return{type:"emptyList"};if(!t)return{type:"list-count",count:o.value.length};let l=o.value.slice(0,this.numValuesVisible()).map(c=>__dcg_shared_module_exports__['ha'](c,this.getLabelOptions()));return{type:"list",count:o.value.length,displayedValues:l}}case __dcg_shared_module_exports__['Va']:let s=__dcg_shared_module_exports__['la'](o.value,{...__dcg_shared_module_exports__['da'],displayAsFraction:this.shouldDisplayAsFraction()});return s==="undefined"?{type:"undefined"}:{type:"number",valueLatex:s};case __dcg_shared_module_exports__['Wa']:{if(o.value.length===0)return{type:"emptyList"};if(!t)return{type:"list-count",count:o.value.length};let l=o.value.slice(0,this.numValuesVisible()).map(c=>__dcg_shared_module_exports__['la'](c,{...this.getLabelOptions(),digits:4}));return{type:"list",count:o.value.length,displayedValues:l}}case __dcg_shared_module_exports__['va']:{let l=__dcg_shared_module_exports__['ma'](o.value,{...__dcg_shared_module_exports__['da'],displayAsFraction:this.shouldDisplayAsFraction()});return l==="undefined"?{type:"undefined"}:{type:"number",isPoint:!0,valueLatex:l}}case __dcg_shared_module_exports__['za']:{if(o.value.length===0)return{type:"emptyList"};let l=o.value.slice(0,this.numValuesVisible()).map(c=>__dcg_shared_module_exports__['ma'](c,{...this.getLabelOptions(),digits:4}));return{type:"list",isPoint:!0,count:o.value.length,displayedValues:l}}case __dcg_shared_module_exports__['jb']:{let l=__dcg_shared_module_exports__['na'](o.value,{...__dcg_shared_module_exports__['da'],displayAsFraction:this.shouldDisplayAsFraction()});return l==="undefined"?{type:"undefined"}:{type:"number",valueLatex:l,isPoint:!0}}case __dcg_shared_module_exports__['kb']:{if(o.value.length===0)return{type:"emptyList"};let l=o.value.slice(0,this.numValuesVisible()).map(c=>__dcg_shared_module_exports__['na'](c,{...this.getLabelOptions(),digits:4}));return{type:"list",count:o.value.length,displayedValues:l,isPoint:!0}}case __dcg_shared_module_exports__['Ba']:case __dcg_shared_module_exports__['Ca']:{let l=hx(e);return l?{type:"rgbcolor",colorValue:Array.isArray(l)?{type:"color-array",value:l}:{type:"single-color",value:l},val:l,ariaLabel:this.getColorLabel()}:{type:"undefined"}}case __dcg_shared_module_exports__['Aa']:return{type:"emptyList"};default:throw new Error(`Unexpected evaluation type ${o}`)}}getLabelOptions(){return this.props.controller().getEvaluationLabelOptionsForItem(this.props.id())}shouldDisplayAsFraction(){return this.props.controller().shouldEvaluationForItemDisplayAsFraction(this.props.id())}shouldShowCopyButton(){return this.controller.areEvaluationCopyButtonsEnabled()&&this.getEvaluationRHS().type==="number"}};ce();ie();var hW=__dcg_shared_module_exports__['e'](se()),Jm=class extends hW.View{constructor(){super(...arguments),this.controller=this.props.controller(),this.model=this.props.model()}template(){return _("div",{class:u("dcg-expression-footer__alt-text dcg-do-blur"),handleEvent:u("true"),onTap:this.bindFn(this.focusAlt),tapboundary:u("true"),children:[d("b",{children:()=>this.controller.s("graphing-calculator-label-alt-text")}),()=>this.model.description]})}focusAlt(){this.controller.dispatch({type:"toggle-item-settings-menu",menu:this.model.type==="expression"?{type:"expression",model:this.model,guid:this.model.guid}:{type:"image",model:this.model,guid:this.model.guid}}),this.controller.dispatch({type:"set-focus-location",location:{type:"expression-menu",id:this.model.id,location:"alt-text"}})}};ce();ie();var _x=__dcg_shared_module_exports__['e'](se());ce();ie();var Cx=__dcg_shared_module_exports__['e'](se());Vt();var qi=[];for(let r=0;r<256;++r)qi.push((r+256).toString(16).slice(1));function gW(r,e=0){return(qi[r[e+0]]+qi[r[e+1]]+qi[r[e+2]]+qi[r[e+3]]+"-"+qi[r[e+4]]+qi[r[e+5]]+"-"+qi[r[e+6]]+qi[r[e+7]]+"-"+qi[r[e+8]]+qi[r[e+9]]+"-"+qi[r[e+10]]+qi[r[e+11]]+qi[r[e+12]]+qi[r[e+13]]+qi[r[e+14]]+qi[r[e+15]]).toLowerCase()}var pO,Ise=new Uint8Array(16);function Uk(){if(!pO){if(typeof crypto=="undefined"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");pO=crypto.getRandomValues.bind(crypto)}return pO(Ise)}var kx={};function Cse(r,e,t){var n,a,s,l;let o,i=(n=r==null?void 0:r._v6)!=null?n:!1;if(r){let c=Object.keys(r);c.length===1&&c[0]==="_v6"&&(r=void 0)}if(r)o=mW((l=(s=r.random)!=null?s:(a=r.rng)==null?void 0:a.call(r))!=null?l:Uk(),r.msecs,r.nsecs,r.clockseq,r.node,e,t);else{let c=Date.now(),p=Uk();_se(kx,c,p),o=mW(p,kx.msecs,kx.nsecs,i?void 0:kx.clockseq,i?void 0:kx.node,e,t)}return e!=null?e:gW(o)}function _se(r,e,t){var o,i;return(o=r.msecs)!=null||(r.msecs=-1/0),(i=r.nsecs)!=null||(r.nsecs=0),e===r.msecs?(r.nsecs++,r.nsecs>=1e4&&(r.node=void 0,r.nsecs=0)):e>r.msecs?r.nsecs=0:e<r.msecs&&(r.node=void 0),r.node||(r.node=t.slice(10,16),r.node[0]|=1,r.clockseq=(t[8]<<8|t[9])&16383),r.msecs=e,r}function mW(r,e,t,o,i,n,a=0){if(r.length<16)throw new Error("Random bytes length must be >= 16");if(!n)n=new Uint8Array(16),a=0;else if(a<0||a+16>n.length)throw new RangeError(`UUID byte range ${a}:${a+15} is out of buffer bounds`);e!=null||(e=Date.now()),t!=null||(t=0),o!=null||(o=(r[8]<<8|r[9])&16383),i!=null||(i=r.slice(10,16)),e+=122192928e5;let s=((e&268435455)*1e4+t)%4294967296;n[a++]=s>>>24&255,n[a++]=s>>>16&255,n[a++]=s>>>8&255,n[a++]=s&255;let l=e/4294967296*1e4&268435455;n[a++]=l>>>8&255,n[a++]=l&255,n[a++]=l>>>24&15|16,n[a++]=l>>>16&255,n[a++]=o>>>8|128,n[a++]=o&255;for(let c=0;c<6;++c)n[a++]=i[c];return n}var uO=Cse;var fW='a[href], a[tabindex], input:not([disabled]), button:not([disabled]), textarea:not([disabled]), select:not([disabled]), [tabindex], summary, [contenteditable]:not([contenteditable="false"])';function Ex(r){return r.matches(fW)&&r.getAttribute("tabindex")!=="-1"&&Mse(r)}function Mse(r){if(!kd(r))return!1;let e=r;for(;e;){if(getComputedStyle(e).visibility==="hidden")return!1;e=e.parentElement}return!0}function hO(r,e=kd){return Array.from(r.querySelectorAll(fW)).filter(t=>!t.closest("[inert]")&&e(t))}function bW(r,e){if(!r)return!1;let t=hO(r),o=t.findIndex(n=>n.matches(":focus")),i;if(o!==-1&&(i=(e===1?t.slice(o+1):t.slice(0,o).reverse()).filter(Ex)[0]),!i)if(e===1)i=t.find(Ex);else{let n=__dcg_shared_module_exports__['m'](t,Ex);i=n>-1?t[n]:void 0}return i?(i.focus(),!0):!1}function yW(r){return bW(r,1)}function xW(r){return bW(r,-1)}var Ol=class{constructor({isOpen:e,closeMenu:t,anchorSelector:o,focusTrappingBodySelector:i,itemNavigationKey:n}){this.handleKeydown=e=>{switch(this.itemNavigationKey){case"arrow":return this.onKeydownWithArrowTrapping(e);case"tab":return this.onKeydownWithTabTrapping(e)}};this.handleTap=e=>{let t=document.querySelector(this.focusTrappingBodySelector);if(!t)return;let{target:o}=e,i=this.anchorSelector;i&&o.closest(i)||t.contains(o)||Array.from(document.querySelectorAll(".dcg-keypad,.dcg-show-keypad-container")).some(a=>a.contains(o))||this.closeMenu()};this.isOpen=e,this.closeMenu=t,this.anchorSelector=o,this.focusTrappingBodySelector=i,this.itemNavigationKey=n}getPopoverView(){var e;return(e=document.querySelector(this.focusTrappingBodySelector))!=null?e:void 0}getFocusableItems(){let e=this.getPopoverView();return e?hO(e,Ex):[]}focusAnchor(){var e;this.anchorSelector&&((e=document.querySelector(this.anchorSelector))==null||e.focus())}focusItemAtIdx(e){let t=this.getFocusableItems();return t.length&&t.length>e?(t[e].focus(),!0):!1}focusFirstItem(){this.focusItemAtIdx(0)}focusLastItem(){this.focusItemAtIdx(this.getFocusableItems().length-1)}getFocusedElement(){return this.getFocusableItems().find(e=>e.matches(":focus"))}isAnchorFocused(){var e;return this.anchorSelector?(e=document.querySelector(this.anchorSelector))==null?void 0:e.matches(":focus"):!1}isFirstItemFocused(){var t;let e=this.getFocusableItems();return e.length>0&&((t=e[0])==null?void 0:t.matches(":focus"))}isLastItemFocused(){var t;let e=this.getFocusableItems();return e.length>0&&((t=e[e.length-1])==null?void 0:t.matches(":focus"))}onKeydownWithArrowTrapping(e){if(this.isOpen())switch(Pe(e)){case en:xW(this.getPopoverView())&&e.preventDefault();break;case wi:yW(this.getPopoverView())&&e.preventDefault();break;case cl:e.preventDefault(),this.focusLastItem();break;case xa:e.preventDefault(),this.closeMenu();break;case ri:e.preventDefault(),e.stopPropagation(),this.closeMenu(),this.focusAnchor();break}}onKeydownWithTabTrapping(e){if(!this.isOpen())return;let t=Pe(e);if(t===ri){e.preventDefault(),e.stopPropagation(),this.focusAnchor(),this.closeMenu();return}if(t==="Tab"&&!e.altKey&&!e.ctrlKey&&!e.metaKey){if(this.isAnchorFocused()){e.shiftKey?this.focusLastItem():this.focusFirstItem(),e.preventDefault(),e.stopPropagation();return}if(this.isLastItemFocused()&&!e.shiftKey){this.anchorSelector?this.focusAnchor():this.focusFirstItem(),e.preventDefault(),e.stopPropagation();return}if(this.isFirstItemFocused()&&e.shiftKey){this.anchorSelector?this.focusAnchor():this.focusLastItem(),e.preventDefault(),e.stopPropagation();return}}}};var{IfDefined:Ase,If:vW}=Cx.Components,gO=-7,zk=9,Ix=class extends Cx.View{getRootNode(){var e,t,o;return(o=(t=(e=this.props).rootNode)==null?void 0:t.call(e))!=null?o:document}didMountPopover(e){var o,i,n,a,s,l;(i=(o=this.props).didMount)==null||i.call(o,e);let t=(a=(n=this.props).focusHelper)==null?void 0:a.call(n);t&&(this.getRootNode().addEventListener("keydown",t.handleKeydown),(l=(s=this.props).focusAnchorOnTap)!=null&&l.call(s)||t==null||t.focusFirstItem())}didUnmountPopover(){var t,o,i,n;(o=(t=this.props).didUnmount)==null||o.call(t);let e=(n=(i=this.props).focusHelper)==null?void 0:n.call(i);e&&this.getRootNode().removeEventListener("keydown",e.handleKeydown)}getPositionClasses(){let e=this.props.position();return{"dcg-left":e==="left","dcg-right":e==="right","dcg-bottom":e==="bottom-left"||e==="bottom-right","dcg-top":e==="top-left"||e==="top-right"}}template(){return _("div",{class:()=>{var e,t,o,i,n,a;return{"dcg-dropdown-popover":!0,"dcg-dropdown-popover--with-arrow":!((t=(e=this.props).hideArrow)!=null&&t.call(e)),"dcg-dropdown-popover--constrain-height":(i=(o=this.props).constrainHeight)==null?void 0:i.call(o),...this.getPositionClasses(),[((a=(n=this.props).className)==null?void 0:a.call(n))||""]:!!this.props.className}},role:u("region"),style:()=>{var e,t;return{...((t=(e=this.props).style)==null?void 0:t.call(e))||{}}},didMount:this.bindFn(this.didMountPopover),didUnmount:this.bindFn(this.didUnmountPopover),children:[_("div",{class:u("dcg-dropdown-popover__interior"),children:[Ase(()=>{var e,t;return(t=(e=this.props).title)==null?void 0:t.call(e)},e=>d("h2",{class:u("dcg-unstyled-heading dcg-dropdown-popover__title"),children:()=>e()})),this.props.popoverBody()]}),d(vW,{predicate:()=>{var e,t;return!((t=(e=this.props).hideArrow)!=null&&t.call(e))},children:()=>d("div",{class:u("dcg-arrow"),style:()=>{var e,t;return((t=(e=this.props).arrowStyle)==null?void 0:t.call(e))||{}}})})]})}},Ps=class extends Cx.View{constructor(){var e,t,o;super(...arguments),this.showDropdown=!1,this.guid=(o=(t=(e=this.props).guid)==null?void 0:t.call(e))!=null?o:uO(),this.dropdownStyle={},this.arrowStyle=void 0,this.debouncedPositionDynamically=__dcg_shared_module_exports__['q'](this.bindFn(this.positionDynamically),200),this.resizeObserver=new ResizeObserver(i=>{i.forEach(n=>{var s,l;let a=n.target;a===((l=(s=this.props).boundingParentElement)==null?void 0:l.call(s))?this.debouncedPositionDynamically():a===this.dropdownNode&&(this.resetPosition(),this.positionDynamically())})})}init(){var t,o;let e=(o=(t=this.props).focusTrapping)==null?void 0:o.call(t);e&&(this.focusHelper=new Ol({anchorSelector:`.dcg-popover-with-anchor__anchor--${this.guid}`,focusTrappingBodySelector:`.dcg-popover-with-anchor__popover--${this.guid}`,isOpen:()=>this.isDropdownOpen(),closeMenu:()=>this.setDropdownOpen(!1),itemNavigationKey:e.itemNavigationKey}))}isDropdownOpen(){return this.props.controlled?this.props.controlled().isOpen:this.showDropdown}setDropdownOpen(e){var t,o;(o=(t=this.props).disabled)!=null&&o.call(t)||(!e&&this.props.onDropdownClose&&this.props.onDropdownClose(),this.props.controlled?this.props.controlled().setDropdownOpen(e):(this.showDropdown=e,this.update()),e&&(this.resetPosition(),this.positionDynamically()))}didMountWrapper(e){this.rootNode=e,window.addEventListener("resize",this.debouncedPositionDynamically),re(document.body).on(`dcg-tapstart.${this.guid}`,t=>{if(!(t.target===e||re.contains(e,t.target))&&this.isDropdownOpen()){let o=e.querySelector(".dcg-popover-with-anchor__popover");if(re.contains(o,t.target))return;let i=o.getBoundingClientRect();if(t.clientX!==void 0&&t.clientY!==void 0&&t.clientX>i.left&&t.clientX<i.right&&t.clientY>i.top&&t.clientY<i.bottom)return;this.setDropdownOpen(!1);return}})}didUnmountWrapper(){this.showDropdown=!1,re(document.body).off(`.${this.guid}`),re(document).off(`.${this.guid}`),window.removeEventListener("resize",this.debouncedPositionDynamically)}didMountDropdown(e){var i,n,a,s,l,c,p;this.dropdownNode=e,(n=(i=this.props).repositionOnDropdownResize)!=null&&n.call(i)&&this.resizeObserver.observe(e);let t=(s=(a=this.props).boundingParentElement)==null?void 0:s.call(a);t&&this.resizeObserver.observe(t),((l=this.rootNode)==null?void 0:l.querySelector(".dcg-arrow"))&&(this.arrowStyle={}),this.resetPosition(),this.positionDynamically(),(p=(c=this.props.dropdownProps()).didMount)==null||p.call(c,e)}didUnmountDropdown(){this.resizeObserver.disconnect()}getDropdownOffset(){return this.props.dropdownOffset!==void 0?this.props.dropdownOffset():gO}resetPosition(){var i;let e=this.props.dropdownProps().position();this.dropdownStyle={},((i=this.rootNode)==null?void 0:i.querySelector(".dcg-arrow"))?this.arrowStyle={}:this.arrowStyle=void 0;let o=this.getDropdownOffset();switch(e){case"left":case"right":this.dropdownStyle.top=`${o}px`,this.arrowStyle&&(this.arrowStyle.top=`${zk}px`);break;case"top-right":case"bottom-right":this.dropdownStyle.left=`${o}px`,this.arrowStyle&&(this.arrowStyle.left=`${zk}px`);break;case"top-left":case"bottom-left":this.dropdownStyle.right=`${o}px`,this.arrowStyle&&(this.arrowStyle.right=`${zk}px`);break}this.update()}positionDynamically(){var x,E,S,k;let e=this.dropdownNode,t=this.rootNode;if(!t||!e||!this.isDropdownOpen())return;let o=e.getBoundingClientRect(),i=(S=(E=(x=this.props).boundingParentElement)==null?void 0:E.call(x))==null?void 0:S.getBoundingClientRect(),n=i?i.x+i.width:window.innerWidth,a=i?i.y+i.height:window.innerHeight,s=(k=i==null?void 0:i.left)!=null?k:0,l=o.bottom>a,c=o.right>n,p=o.left<s,h=this.props.dropdownProps().position(),g=t.getBoundingClientRect(),m=15,b=zk+this.getDropdownOffset();if((h==="left"||h==="right")&&l){let T=a-g.y-m,I=o.height-T;this.dropdownStyle.top=`${-1*I}px`,this.arrowStyle&&(this.arrowStyle.top=`${I+b}px`)}else if((h==="bottom-right"||h==="top-right")&&c){let T=n-g.x-m,I=o.width-T;this.dropdownStyle.left=`${-1*I}px`,this.arrowStyle&&(this.arrowStyle.left=`${I+b}px`)}else if((h==="bottom-left"||h==="top-left")&&p){let T=g.x+g.width-m-s,I=o.width-T;this.dropdownStyle.right=`${-1*I}px`,this.arrowStyle&&(this.arrowStyle.right=`${I+b}px`)}this.update()}getDropdownClassNames(){var t,o;let e=((o=(t=this.props.dropdownProps()).className)==null?void 0:o.call(t))||"";return`dcg-popover-with-anchor__popover dcg-popover-with-anchor__popover--${this.guid} ${e}`}getContainerClasses(){var e,t,o,i,n,a,s;return{"dcg-popover-with-anchor":!0,"dcg-disabled":((t=(e=this.props).disabled)==null?void 0:t.call(e))||!1,[((i=(o=this.props).containerClassName)==null?void 0:i.call(o))||""]:!!this.props.containerClassName,...(s=(a=(n=this.props).containerClassMap)==null?void 0:a.call(n))!=null?s:{}}}getTabIndex(){var e,t;return this.props.tabIndex?this.props.tabIndex():(t=(e=this.props).disabled)!=null&&t.call(e)?-1:0}template(){var e,t;return _("div",{class:this.bindFn(this.getContainerClasses),didMount:this.bindFn(this.didMountWrapper),didUnmount:this.bindFn(this.didUnmountWrapper),onTap:o=>{var i,n;(n=(i=this.props).stopPropagationOnTap)!=null&&n.call(i)&&o.stopPropagation()},...(t=(e=this.props).additionalContainerAttributes)==null?void 0:t.call(e),children:[d("div",{role:u("link"),tabIndex:()=>this.getTabIndex(),"aria-label":()=>{var o,i;return(i=(o=this.props).anchorAriaLabel)==null?void 0:i.call(o)},"aria-disabled":()=>{var o,i;return((i=(o=this.props).disabled)==null?void 0:i.call(o))||void 0},"aria-expanded":this.bindFn(this.isDropdownOpen),"aria-haspopup":u("true"),class:()=>{var o,i;return{"dcg-popover-with-anchor__anchor":!0,"dcg-disabled":((i=(o=this.props).disabled)==null?void 0:i.call(o))||!1,[`dcg-popover-with-anchor__anchor--${this.guid}`]:!0,"dcg-popover-with-anchor__open":this.isDropdownOpen()}},onTap:()=>{var o,i,n;this.setDropdownOpen(!this.isDropdownOpen()),(i=(o=this.props).focusAnchorOnTap)!=null&&i.call(o)&&((n=this.focusHelper)==null||n.focusAnchor())},manageFocus:()=>{var o,i;return(i=(o=this.props).manageFocus)==null?void 0:i.call(o)},children:this.props.anchor()}),d(vW,{predicate:()=>this.isDropdownOpen(),children:()=>d(Ix,{...this.props.dropdownProps(),className:this.bindFn(this.getDropdownClassNames),focusHelper:()=>this.focusHelper,didMount:o=>this.didMountDropdown(o),didUnmount:()=>this.didUnmountDropdown(),arrowStyle:()=>this.arrowStyle,style:()=>this.dropdownStyle,popoverBody:this.props.popoverBody,focusAnchorOnTap:this.props.focusAnchorOnTap,rootNode:()=>this.rootNode})})]})}};sl();ce();ie();var wW=__dcg_shared_module_exports__['e'](se());var io=class extends wW.View{template(){return d(Re,{tooltip:this.props.error,sticky:()=>{var e,t,o;return(o=(t=(e=this.props).sticky)==null?void 0:t.call(e))!=null?o:!0},gravity:this.props.gravity,additionalClass:this.const("dcg-tooltipped-error-container"),children:d("div",{class:()=>{var e,t,o,i,n,a;return{"dcg-tooltipped-error":!0,"dcg-small":((t=(e=this.props).size)==null?void 0:t.call(e))==="small","dcg-medium-small":((i=(o=this.props).size)==null?void 0:i.call(o))==="medium-small","dcg-white":this.props.isWhite&&this.props.isWhite(),"dcg-tooltipped-error__instant":(a=(n=this.props).instant)==null?void 0:a.call(n)}},children:d("i",{class:u("dcg-icon-error"),"aria-hidden":u("true")})})})}};var Bu=r=>{if((r==null?void 0:r.type)!=="expression")return;let e=r==null?void 0:r.formula.typed_constant_value;if(!e)return;let t=D8(r);if(t)return t;if(Kd(r))return"chisqtest";if(Hd(r))return"chisqgof";if(__dcg_shared_module_exports__['yb'](e.valueType))return __dcg_shared_module_exports__['ub'](e.valueType,[__dcg_shared_module_exports__['_a'],__dcg_shared_module_exports__['$a'],__dcg_shared_module_exports__['eb']])?"t":"z"};var mO=r=>{var t;if((r==null?void 0:r.type)!=="expression"||!__dcg_shared_module_exports__['yb']((t=r.formula.typed_constant_value)==null?void 0:t.valueType))return;let{valueType:e}=r.formula.typed_constant_value;switch(e){case __dcg_shared_module_exports__['ab']:case __dcg_shared_module_exports__['_a']:return"\\mu";case __dcg_shared_module_exports__['bb']:case __dcg_shared_module_exports__['$a']:return"\\mu_{1}-\\mu_{2}";case __dcg_shared_module_exports__['cb']:return"p";case __dcg_shared_module_exports__['db']:return"p_{1}-p_{2}";case __dcg_shared_module_exports__['eb']:return;default:throw new Error(`Unexpected type ${e}`)}},SW=r=>{var t,o;let{inferenceType:e}=r;switch(e){case"t":return`\\operatorname{tdist}\\left(${(t=r.dof)!=null?t:2}\\right)`;case"z":case"zprop":return"\\operatorname{normaldist}\\left(0,1\\right)";case"chisqgof":case"chisqtest":return`\\operatorname{chisqdist}\\left(${(o=r.dof)!=null?o:2}\\right)`;default:throw new Error(`Unexpected inference type ${e}`)}},fO=r=>{var t;return typeof r=="string"?r:`${r!==void 0&&(t=__dcg_shared_module_exports__['ha'](r,{...__dcg_shared_module_exports__['ca']}))!=null?t:""}`},ip=(r,e,t,o=0)=>{var s;let i=(s=r==null?void 0:r.formula)==null?void 0:s.typed_constant_value;if((i==null?void 0:i.valueType)!==__dcg_shared_module_exports__['fb']&&(i==null?void 0:i.valueType)!==__dcg_shared_module_exports__['gb'])return;let n=i.valueType===__dcg_shared_module_exports__['fb']?0:__dcg_shared_module_exports__['zb'](i,"rows");return n===void 0?void 0:__dcg_shared_module_exports__['zb'](i,e==="contribution"?"contributions":e)[t+n*o]};var{If:Lse,IfElse:Pse}=_x.Components,Jo=(r,e=4)=>r===1/0?"\\infty":r===-1/0?"-\\infty":r===void 0||Number.isNaN(r)?"undefined":__dcg_shared_module_exports__['ha'](r,{...__dcg_shared_module_exports__['da'],digits:e,displayAsFraction:!1,scientificNotationDigits:1}),Uu=class extends _x.View{constructor(){super(...arguments),this.controller=this.props.controller()}template(){return _(tr,{children:[d(Lse,{predicate:()=>{var e,t;return!!((t=(e=this.props).label)!=null&&t.call(e))},children:()=>d("label",{class:u("dcg-exportable-evaluation--label"),children:d(Ir,{content:()=>{var e,t;return((t=(e=this.props).label)==null?void 0:t.call(e))||""},controller:this.props.controller})})}),_("div",{class:u("dcg-exportable-evaluation__copy-wrapper"),children:[d(Xt,{when:()=>this.props.outputLatex()==="undefined",children:d("span",{class:u("dcg-exportable-evaluation__undefined"),children:()=>this.controller.s("shared-calculator-label-undefined")})}),d(Xt,{when:()=>this.props.outputLatex()!=="undefined",children:_(tr,{children:[d(Xo,{latex:this.props.outputLatex,controller:this.props.controller,ariaLabel:()=>{var e,t,o;return(o=(t=(e=this.props).label)==null?void 0:t.call(e))!=null?o:""},focusLocation:this.props.evaluationFocusLocation,tabbable:this.const(!0),suppressBlurEvent:this.const(!0)}),d(Re,{tooltip:()=>this.controller.s("graphing-calculator-text-export-snapshot"),offset:this.const({top:4}),children:d("button",{class:u("dcg-unstyled-button dcg-exportable-evaluation__export-btn"),"aria-label":()=>this.controller.s("graphing-calculator-text-export-snapshot"),manageFocus:()=>_e({controller:this.controller,location:this.props.exportFocusLocation()}),onTap:()=>this.props.doExportOrCopy(),children:d("i",{class:u("dcg-icon-insert"),"aria-hidden":u("true")})})})]})})]})]})}},qk=class extends _x.View{constructor(){super(...arguments),this.controller=this.props.controller()}getPopoverGuid(){return`exportable-evaluation-${this.props.outputItem()}-${this.props.id()}`}template(){return Pse(()=>{var e,t;return!!((t=(e=this.props).error)!=null&&t.call(e))||this.getFormattedNumber()==="undefined"},{false:()=>d(Ps,{focusAnchorOnTap:this.const(!0),anchor:()=>_("div",{class:u("dcg-exportable-evaluation--value"),children:[d(ir,{latex:this.bindFn(this.getFormattedNumber),isStatic:this.const(!0),...Wr(this.controller),isFocused:this.const(!1),tabIndex:this.const(-1)}),d("i",{class:u("dcg-icon-caret-down")})]}),guid:this.bindFn(this.getPopoverGuid),controlled:()=>({isOpen:this.controller.isPopoverOpen(this.getPopoverGuid()),setDropdownOpen:e=>this.controller.dispatch({type:"set-popover-open",guid:this.getPopoverGuid(),open:e})}),dropdownProps:this.const({position:this.const("bottom-left")}),dropdownOffset:()=>-15,manageFocus:this.const(_e({controller:this.controller,location:{type:this.props.type(),id:this.props.id(),subtype:"exportable-evaluation-dot-dot",item:this.props.outputItem()}})),anchorAriaLabel:()=>{var e,t;return this.props.label?`${(t=(e=this.props).label)==null?void 0:t.call(e)} ${ur(this.getFormattedNumber())}`:ur(this.getFormattedNumber())},focusTrapping:this.const({itemNavigationKey:"tab"}),popoverBody:()=>d("div",{class:u("dcg-exportable-evaluation--popover"),children:d(Uu,{...this.props,evaluationFocusLocation:()=>({type:this.props.type(),id:this.props.id(),subtype:"exportable-evaluation",item:this.props.outputItem()}),exportFocusLocation:()=>({type:this.props.type(),id:this.props.id(),subtype:"exportable-evaluation-export-button",item:this.props.outputItem()}),doExportOrCopy:this.bindFn(this.copyValueToList),outputLatex:()=>fO(this.props.outputValue())})})}),true:()=>d("div",{class:u("dcg-exportable-evaluation--wrapper"),children:d("div",{class:u("dcg-exportable-evaluation--value dcg-exportable-evaluation--errored"),children:d(io,{instant:this.const(!0),size:this.const("medium-small"),error:()=>{var e,t,o;return this.controller.unpack((o=(t=(e=this.props).error)==null?void 0:t.call(e))!=null?o:{key:"graphing-calculator-error-invalid-exportable-evaluation"})}})})})})}copyValueToList(){let e=this.controller.getItemModel(this.props.id());if(!e)return;let t=e.index;t!==void 0&&this.controller.dispatch({type:"export-latex-to-explist",latex:fO(this.props.outputValue()),indexToInsert:t+1,folderId:e.type!=="folder"?e.folderId:void 0})}getFormattedNumber(){var t;let e=this.props.outputValue();return typeof e=="string"?e:(t=Jo(e))!=null?t:""}};ie();var TW=__dcg_shared_module_exports__['e'](se());var kW=(r,e)=>{switch(e){case"pleft":case"pright":case"p":return r.s("graphing-calculator-label-inference-output-p");case"z":return r.s("graphing-calculator-label-inference-output-z");case"t":return r.s("graphing-calculator-label-inference-output-t");case"chisquare":return"`\\chi^{ 2 }`";case"dof":return r.s("graphing-calculator-label-inference-output-degrees-of-freedom");case"confidenceUpper":return r.s("graphing-calculator-label-inference-output-confidence-upper");case"confidenceLower":return r.s("graphing-calculator-label-inference-output-confidence-lower");case"pointEstimate":return r.s("graphing-calculator-label-inference-output-point-estimate");case"standardError":return r.s("graphing-calculator-label-inference-output-standard-error");default:throw new Error(`Unexpected item ${e}`)}},Ds=class extends TW.View{constructor(){super(...arguments),this.controller=this.props.controller()}getOutputLabel(){var e,t;return(t=(e=this.props).hideLabel)!=null&&t.call(e)?"":kW(this.controller,this.props.outputItem())}template(){return d("li",{"dcg-evaluation-item":this.props.outputItem,children:d(Uu,{controller:this.props.controller,label:this.bindFn(this.getOutputLabel),doExportOrCopy:this.bindFn(this.doExport),outputLatex:this.bindFn(this.getOutputValue),error:this.bindFn(this.getOutputError),evaluationFocusLocation:()=>({type:"inference-footer",id:this.props.id(),subtype:"exportable-evaluation",item:this.props.outputItem()}),exportFocusLocation:()=>({type:"inference-footer",id:this.props.id(),subtype:"exportable-evaluation-export-button",item:this.props.outputItem()})})})}getOutputError(){return this.controller.getInferenceOutputErrorById(this.props.id(),this.props.outputItem())}doExport(){this.controller.dispatch({type:"export-inference-item-to-expression-list",item:this.props.outputItem(),id:this.props.id()})}getOutputValue(){let e=this.controller.getInferenceOutputValueById(this.props.id(),this.props.outputItem());return Jo(e,6)}};var Zm=class{constructor(e,t){this.model=t}getSpec(){var e;return(e=this.model.formula)==null?void 0:e.top_level_function_spec}isMissingDefault(){if(!Mu(this.model))return!1;let e=this.getSpec();if(!e)return!1;for(let t=0;t<e.params.length;t++)if(this.shouldShowDefaultValue(e.params[t]))return!0;return!1}getSuggestionType(){let e=this.getSpec();return!e||e.type==="inference"&&e.params[0]==="list"?"none":this.missingSingleRequiredParam()?"individual":e.params.length>1||e.params.some(t=>!this.getParameterExtractedValue(t))?this.isMissingDefault()?"listWithDefault":"list":"none"}missingSingleRequiredParam(){let e=this.getSpec();if(!e||e.params.length!==1)return;let t=e.params[0];if(!this.getDefaultValue(t)&&!this.getParameterExtractedValue(t))return t}getDefaultValue(e){var o;let t=this.getSpec();if(!t||t.type==="inference")return"";for(let i=0;i<t.params.length;i++)if(t.params[i]===e)return`${(o=t.defaults[i])!=null?o:""}`;return""}getListOfParameters(){let e=this.getSpec();return e?e.params:[]}getParameterExtractedValue(e){let t=this.getSpec();return t&&t.values[e]||""}shouldShowDefaultValue(e){return!this.getParameterExtractedValue(e)&&!!this.getDefaultValue(e)}getExtractedAndDefaultArgString(e){let{params:t,values:o}=e,i=e.type==="inference"?[]:e.defaults;return t.map((a,s)=>{let l=o[a],c=i[s];return l||`${c!=null?c:""}`}).join(",")}};var EW=1e-6,IW=1e9;function bO(r,e){let t=Math.max(yO(r.parameters[e]),r.displayPrecision);return __dcg_shared_module_exports__['ha'](r.parameters[e],{digits:t,scientificNotationDigits:t-1,smallCutoff:EW,bigCutoff:IW})}function yO(r){let e=Math.abs(r);if(e>=IW||e<EW||e<=1)return 6;let t=Math.floor(Math.log10(e))+1;return Math.min(9,t+5)}function xO(r){return __dcg_shared_module_exports__['ha'](r,{zeroCutoff:1e-15,digits:4,smallCutoff:1e-6,bigCutoff:1e9})}var vO=["parameter-suggestions","warning","regression","slider","domain","stats","inference","significance","confidence","action-info","label","distribution","visualization","rename-prompt","extend-to-3d","slider-prompt","evaluation","braille-error","alt-text","default-statement-import"],CW={inference:!0,significance:!0,confidence:!0,distribution:!0},wO=(r,e)=>{let{formula:t}=e;if(t.warning!==void 0){let o=t.warning.key==="shared-calculator-error-complex-wirtinger-differs";return{type:"evaluation",message:r.unpack(t.warning),learnMoreWirtinger:o}}if(!r.getIncludeFunctionParametersInRandomSeed()&&t.depends_on_random_seed&&t.function_definition)return{type:"legacy-random-seed-behavior"};if(e.expressionTooComplex)return{type:"expressionTooComplex"};if(e.unresolved)return{type:"unresolved"};if(ZH(e))return{type:"tone-out-of-range"};if(e.nanBlame===__dcg_shared_module_exports__['ud'].ComplexCoercion)return{type:"nan-blame-complex-coercion"};if(e.recursiveDepthPlottingError)return{type:"recursive-depth-plotting-error"}},SO={warning:(r,e)=>!!wO(r,e),"action-info":(r,e)=>r.shouldShowActionInfo(e.id),"braille-error":(r,e)=>r.getBrailleMode()!=="none"&&!!e.error&&!Qa(e),distribution:(r,e)=>{let t=Wd(e);return(t==null?void 0:t.type)!=="distribution"||ux(e)?!1:Mu(e)},domain:(r,e)=>!e.sliderExists&&(Bd(e)||Pc(e)),evaluation:(r,e)=>r.shouldShowEvaluationForItem(e.id),"extend-to-3d":(r,e)=>r.isThreeDMode()&&!e.expressionTooComplex&&e.shouldGraph&&dx(e),label:(r,e)=>ym(e)&&!r.isThreeDMode(),regression:(r,e)=>!!e.formula.regression,"rename-prompt":(r,e)=>{let t=r.getSuggestedIdentifierRenameInfo(e.id);return!!(t&&t.countOfChanges)},slider:(r,e)=>!!e.sliderExists,"slider-prompt":(r,e)=>r.shouldShowSliderPrompt(e),stats:(r,e)=>JT(e),inference:(r,e)=>{var t;return on(e)&&(__dcg_shared_module_exports__['yb']((t=e.formula.typed_constant_value)==null?void 0:t.valueType)||Cs(e))},significance:(r,e)=>Jn(e),visualization:(r,e)=>XT(e),"alt-text":(r,e)=>r.shouldShowAltTextInFooter(e),confidence:(r,e)=>Cl(e),"parameter-suggestions":(r,e)=>{var t;return!!((t=e.formula)!=null&&t.top_level_function_spec)&&new Zm(r,e).getSuggestionType()!=="none"},"default-statement-import":(r,e)=>{var t;return!!((t=e.formula.import)!=null&&t.wasDefaultOverridden)}};ce();ie();var Hk=__dcg_shared_module_exports__['e'](se());var{If:Dse,Switch:Ose}=Hk.Components,zu=class extends Hk.View{init(){this.controller=this.props.controller()}template(){return _("div",{class:u("dcg-expression-warning dcg-text-selectable"),handleEvent:u("true"),role:u("note"),children:[d("i",{class:u("dcg-icon-error"),"aria-hidden":u("true")}),d(Ose,{children:e=>{switch(e==null?void 0:e.type){case"unresolved":return _("span",{children:[()=>this.controller.s("graphing-calculator-error-equation-contains-unresolved-details"),d("a",{href:u("https://help.desmos.com/hc/en-us/articles/202529079-Unresolved-Detail-In-Plotted-Functions"),target:u("_blank"),children:()=>this.controller.s("graphing-calculator-link-learn-more")})]});case"expressionTooComplex":return _("span",{children:[()=>this.controller.s("shared-calculator-error-gpu-expression-too-complex"),d("a",{href:u("https://help.desmos.com/hc/en-us/articles/26801641850893-GPU-Error-while-Plotting-an-Expression"),target:u("_blank"),children:()=>this.controller.s("graphing-calculator-link-learn-more")})]});case"tone-out-of-range":return d("span",{children:()=>this.controller.s("graphing-calculator-error-tone-frequency-out-of-range",{min:vm,max:wm})});case"recursive-depth-plotting-error":return d("span",{children:()=>this.controller.s("graphing-calculator-error-reached-maximum-recursion-depth")});case"nan-blame-complex-coercion":return d("span",{children:()=>this.controller.s("graphing-calculator-error-nan-blame-complex-coercion")});case"legacy-random-seed-behavior":return _("span",{children:[()=>this.controller.s("graphing-calculator-error-legacy-random-seed-behavior"),d("a",{href:u("https://help.desmos.com/hc/en-us/articles/25261997911181-Change-to-Random-Seeds-in-Function-Definitions"),target:u("_blank"),class:u("dcg-warning-footer-learn-more"),children:()=>this.controller.s("graphing-calculator-link-learn-more")}),d("button",{onTap:()=>{this.controller.dispatch({type:"update-legacy-random-seed-behavior"})},class:u("dcg-btn-light-gray dcg-update-behavior-btn dcg-unstyled-button"),children:()=>this.controller.s("graphing-calculator-label-update-to-new-behavior")})]});case"evaluation":return _("span",{children:[()=>e.message,d(Dse,{predicate:()=>e.learnMoreWirtinger,children:()=>d("a",{href:u("https://en.wikipedia.org/wiki/Wirtinger_derivatives#Formal_definition"),target:u("_blank"),children:()=>this.controller.s("graphing-calculator-link-learn-more")})})]});case void 0:return}}},()=>this.props.warning())]})}};ce();ie();var jk=__dcg_shared_module_exports__['e'](se());ce();ie();var Kk=__dcg_shared_module_exports__['e'](se());var{For:Rse,If:Fse}=Kk.Components,_n=class extends Kk.View{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.promptGroupId=`prompt-slider-${Al()}`}template(){return _("div",{class:u("dcg-create-sliders"),handleEvent:u("true"),role:u("group"),"aria-labelledby":this.const(this.promptGroupId),children:[d("span",{class:u("dcg-msg"),id:this.const(this.promptGroupId),children:this.bindFn(this.getPromptMsg)}),_("span",{class:u("btns"),children:[d("span",{children:d(Rse.Simple,{each:this.bindFn(this.getMissingVariables),children:e=>d("div",{class:u("dcg-slider-btn-container"),children:d("button",{class:()=>({"dcg-btn-slider":!0,"dcg-btn-blue":this.getMissingVariables().length===1,"dcg-base-case-btn":this.getMissingBaseCases().length>0,"dcg-btn-light-gray":this.getMissingVariables().length!==1}),onTap:t=>this.onCreateSlider(t,[e]),children:d(St,{config:this.const({}),latex:()=>e})})})})}),d(Fse,{predicate:()=>this.getMissingVariables().length>1,children:()=>d("div",{class:u("dcg-slider-btn-container dcg-all"),children:d("button",{class:u("dcg-btn-slider dcg-btn-blue"),onTap:e=>this.onCreateSlider(e,this.getMissingVariables()),children:()=>this.controller.s("graphing-calculator-button-slider-add-all-variables")})})})]})]})}getPromptMsg(){return this.getMissingBaseCases().length>0?this.controller.s("graphing-calculator-label-add-base-case"):this.controller.s("graphing-calculator-label-add-slider")}onCreateSlider(e,t){var o,i,n;this.model.type==="ticker"?this.controller.dispatch({type:"create-sliders-for-ticker",variables:t}):this.controller.dispatch({type:"create-sliders-for-item",id:this.model.id,variables:t}),e.device==="keyboard"&&this.controller.dispatch({type:"set-focus-location",location:(n=(i=(o=this.props).restoreFocusLocation)==null?void 0:i.call(o))!=null?n:{type:"expression",id:this.model.id}})}getMissingBaseCases(){return this.model.type!=="expression"?[]:Ac(this.model)}getMissingVariables(){if(this.props.missingVariables)return this.props.missingVariables().slice(0,El);let e=this.getMissingBaseCases();return e.length>0?e:(this.model.type==="ticker"?zy(this.model):jy(this.model)).slice(0,El)}};ce();ie();__dcg_shared_module_exports__['H']();var $k=__dcg_shared_module_exports__['e'](se());sl();ce();ie();var _W=__dcg_shared_module_exports__['e'](se()),Rl=class extends _W.View{template(){return d("div",{class:u("dcg-dot-dot-dropdown"),children:d("i",{class:u("dcg-icon-ellipsis-vertical"),"aria-hidden":u("true")})})}};var{If:Gse}=$k.Components,TO=.8,Wk=class extends $k.View{constructor(){super(...arguments),this.controller=this.props.controller(),this.popoverGuid=__dcg_shared_module_exports__['E'](`confidence-diagram-popover-${this.id()}`)}id(){return this.props.model().id}isInference(){return on(this.props.model())}getStdErrorCountFor95Percent(){let e=this.controller.getInferenceOutputValueById(this.id(),"dof");return e===void 0||Number.isNaN(e)?4:__dcg_shared_module_exports__['Ub'](.975,e)-__dcg_shared_module_exports__['Ub'](.025,e)}getUpper(){let e=this.controller.getInferenceOutputValueById(this.id(),"confidenceUpper");return e===void 0||Number.isNaN(e)?this.controller.s("shared-calculator-label-undefined"):"`"+Jo(e)+"`"}showPointEstimate(){let e=this.controller.getInferenceOutputValueById(this.id(),"pointEstimate");return!(e===void 0||!isFinite(e)||this.getIntervalWidth()<.01)}getPointEstimate(){let e=this.controller.getInferenceOutputValueById(this.id(),"pointEstimate"),t=e===void 0||Number.isNaN(e)?this.controller.s("shared-calculator-label-undefined"):"`"+Jo(e)+"`";return this.controller.s("graphing-calculator-label-inference-output-point-estimate-tooltip",{value:t})}getLower(){let e=this.controller.getInferenceOutputValueById(this.id(),"confidenceLower");return e===void 0||Number.isNaN(e)?this.controller.s("shared-calculator-label-undefined"):"`"+Jo(e)+"`"}getIntervalWidth(){let e=this.controller.getInferenceOutputValueById(this.id(),"confidenceLower"),t=this.controller.getInferenceOutputValueById(this.id(),"confidenceUpper"),o=this.controller.getInferenceOutputValueById(this.id(),"standardError");return e===void 0||Number.isNaN(e)||t===void 0||Number.isNaN(t)||o===void 0||Number.isNaN(o)?.5:o===0?0:.5*((t-e)/o)/this.getStdErrorCountFor95Percent()}getLowerPosition(){return 100*(1-Math.min(this.getIntervalWidth(),TO))/2+"%"}getUpperPosition(){return 100-100*(1-Math.min(this.getIntervalWidth(),TO))/2+"%"}showArrowheads(){return this.getIntervalWidth()>TO}showLabelsBelow(){return this.getIntervalWidth()>.33}template(){return _("div",{class:u("dcg-inference--confidence--diagram"),style:()=>({"--dcg-lower-percent":this.getLowerPosition(),"--dcg-upper-percent":this.getUpperPosition()}),children:[d("span",{class:()=>({"dcg-inference-confidence-level-bar":!0,"dcg-inference-confidence-level-bar__arrows":this.showArrowheads(),"dcg-inference--confidence--diagram-labels-below":this.showLabelsBelow()}),children:d(Xt,{when:this.bindFn(this.showPointEstimate),children:d(Re,{tooltip:()=>vr(this.getPointEstimate()),customTooltipView:()=>d("div",{class:u("dcg-inference-confidence-point-estimate-tooltip"),children:d(Ir,{content:this.bindFn(this.getPointEstimate),controller:this.props.controller})}),sticky:this.const(!0),children:d("span",{class:u("dcg-inference-footer--point-estimate")})})})}),d("span",{class:()=>({"dcg-inference--confidence--diagram-label":!0,"dcg-inference--confidence--diagram-lower":!0,"dcg-inference--confidence--diagram-labels-below":this.showLabelsBelow()}),children:d(Ir,{content:this.bindFn(this.getLower),controller:this.props.controller})}),d("span",{class:()=>({"dcg-inference--confidence--diagram-label":!0,"dcg-inference--confidence--diagram-upper":!0,"dcg-inference--confidence--diagram-labels-below":this.showLabelsBelow()}),children:d(Ir,{content:this.bindFn(this.getUpper),controller:this.props.controller})}),d(Ps,{anchor:()=>d(Rl,{}),anchorAriaLabel:()=>this.controller.s("graphing-calculator-button-inference-view-numerical-outputs"),focusAnchorOnTap:this.const(!0),focusTrapping:this.const({itemNavigationKey:"tab"}),guid:()=>`exportable-confidence-diagram-${this.id()}`,controlled:()=>({isOpen:this.props.controller().isPopoverOpen(this.popoverGuid),setDropdownOpen:e=>this.props.controller().dispatch({type:"set-popover-open",guid:this.popoverGuid,open:e})}),dropdownProps:this.const({position:this.const("bottom-left")}),dropdownOffset:()=>-15,manageFocus:this.const(_e({controller:this.props.controller(),location:{type:"inference-footer",id:this.id(),subtype:"view-numerical-evaluation-button",item:"confidenceDiagram"}})),popoverBody:()=>d("div",{class:u("dcg-exportable-evaluation--popover"),children:_("ul",{class:u("dcg-unstyled-list dcg-inference-footer--values-table"),children:[d(Ds,{outputItem:this.const("confidenceLower"),id:this.bindFn(this.id),controller:this.props.controller}),d(Ds,{outputItem:this.const("confidenceUpper"),id:this.bindFn(this.id),controller:this.props.controller}),d(Gse,{predicate:this.bindFn(this.isInference),children:()=>_(tr,{children:[d(Ds,{outputItem:this.const("pointEstimate"),id:this.bindFn(this.id),controller:this.props.controller}),d(Ds,{outputItem:this.const("standardError"),id:this.bindFn(this.id),controller:this.props.controller})]})})]})})})]})}};var{If:kO}=jk.Components,Qm=class extends jk.View{constructor(){super(...arguments),this.controller=this.props.controller(),this.model=this.props.model()}getConfidenceLevel(){var e,t;return(t=(e=this.model.inference.confidence)==null?void 0:e.confidenceLevel)!=null?t:""}setConfidenceLevel(e){return this.controller.dispatch({type:"set-inference-object-data",id:this.model.id,update:{confidence:{confidenceLevel:e}}})}confidenceLevelHasError(){return this.controller.inferenceInputValueHasError(this.model.id,"confidenceLevel")}isInference(){return on(this.model)}missingConfidenceLevelVariables(){var e,t;return((t=(e=this.model)==null?void 0:e.formula.confidence_level_variables)!=null?t:[]).map(__dcg_shared_module_exports__['ia'])}shouldShowSliderPromptForConfidenceLevel(){return this.missingConfidenceLevelVariables().length>0}template(){return _("div",{class:()=>({"dcg-inference-footer__expanded-section":!0,"dcg-inference-footer__confidence-interval":!0,"dcg-inference-footer__expanded-section-border":this.props.showIndented()}),children:[_("div",{class:u("dcg-inference-footer--confidence-values"),children:[d(kO,{predicate:this.bindFn(this.isInference),children:()=>_("div",{class:u("dcg-inference-footer__input-section dcg-inference--confidence-input"),children:[d("label",{children:()=>this.controller.s("graphing-calculator-label-inference-ui-confidence-level")}),d(Ut,{latex:this.bindFn(this.getConfidenceLevel),ariaLabel:()=>this.controller.s("graphing-calculator-label-inference-ui-confidence-level"),placeholder:()=>`${__dcg_shared_module_exports__['re']}`,hasError:this.bindFn(this.confidenceLevelHasError),handleLatexChanged:e=>this.setConfidenceLevel(e),handlePressedKey:(e,t)=>this.handlePressedKey(e,t),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),...rp({controller:this.props.controller(),location:()=>({type:"inference-footer",id:this.model.id,subtype:"mathquill-input",item:"confidenceLevel"})}),ariaPostLabel:()=>this.shouldShowSliderPromptForConfidenceLevel()?this.controller.s("graphing-calculator-narration-add-slider-prompt",{vars:Zn(this.controller.getLanguage(),this.missingConfidenceLevelVariables().map(ur))}):""})]})}),d(kO,{predicate:()=>this.shouldShowSliderPromptForConfidenceLevel(),children:()=>d(_n,{model:()=>this.model,controller:this.props.controller,missingVariables:()=>this.missingConfidenceLevelVariables(),restoreFocusLocation:this.const({type:"inference-footer",id:this.model.id,subtype:"mathquill-input",item:"confidenceLevel"})})})]}),d(kO,{predicate:()=>!this.shouldShowSliderPromptForConfidenceLevel(),children:()=>d(Wk,{...this.props})})]})}handlePressedKey(e,t){let o=qe.getFocusedMathquill();if(o){if(e==="Esc"){this.controller.dispatch({type:"set-focus-location",location:void 0});return}if(e==="Enter"&&this.missingConfidenceLevelVariables().length>0&&this.controller.areSlidersEnabled())return this.controller.dispatch({type:"create-sliders-for-item",id:this.model.id,variables:this.missingConfidenceLevelVariables().slice(0,El),doNotChangeFocus:!0});o.keystroke(e,t),this.setConfidenceLevel(o.latex())}}};ce();ie();__dcg_shared_module_exports__['H']();var Mx=__dcg_shared_module_exports__['e'](se());var{If:EO,Switch:Nse,IfElse:IO}=Mx.Components,CO=r=>{var e;return px(r)?"p":(e=r.cdf.compute)!=null?e:"p"},Bc=class extends Mx.View{constructor(){super(...arguments),this.model=this.props.model(),this.controller=this.props.controller()}template(){return d("span",{"dcg-evaluation-item":this.props.item,children:IO(()=>this.getType()==="input",{true:()=>d(Ut,{controller:this.props.controller,ariaLabel:this.bindFn(this.getAriaLabel),handleLatexChanged:this.bindFn(this.handleLatexChanged),handlePressedKey:this.bindFn(this.handlePressedKey),latex:this.bindFn(this.getLatex),hasError:this.bindFn(this.inputHasError),readonly:()=>this.controller.isItemReadonly(this.model.id),placeholder:this.bindFn(this.getPlaceholder),...rp({controller:this.props.controller(),location:()=>({type:"distribution-footer",id:this.model.id,subtype:"mathquill-input",item:this.props.item()})})}),false:()=>d(qk,{outputValue:this.bindFn(this.getProvidedOrComputedValue),controller:this.props.controller,type:this.const("distribution-footer"),label:this.bindFn(this.getAriaLabel),id:()=>this.model.id,outputItem:this.props.item,error:this.bindFn(this.getOutputError)})})})}getType(){let e=CO(this.model);switch(this.props.item()){case"cdfBound2":case"cdfBound1":return e==="p"?"input":"output";case"pValue":return e==="p"?"output":"input"}}inputHasError(){switch(this.props.item()){case"cdfBound1":return this.model.formula.cdf_bound1_valid===!1;case"cdfBound2":return this.model.formula.cdf_bound2_valid===!1;case"pValue":return this.model.formula.cdf_p_valid===!1}}getOutputError(){return this.model.formula.cdf_error}getProvidedOrComputedValue(){switch(this.props.item()){case"cdfBound1":return this.model.formula.cdf_bound1;case"cdfBound2":return this.model.formula.cdf_bound2;case"pValue":return this.model.formula.cdf_p}}getLatex(){switch(this.props.item()){case"cdfBound1":return O8(this.model);case"cdfBound2":return R8(this.model);case"pValue":return this.model.cdf.p||""}}getAriaLabel(){switch(this.props.labelKey()){case"lower":return this.controller.s("graphing-calculator-narration-cdf-minimum");case"upper":return this.controller.s("graphing-calculator-narration-cdf-maximum");case"p":return this.controller.s("graphing-calculator-narration-distributions-ui-p-value")}}getPlaceholder(){switch(this.props.item()){case"cdfBound1":return Jo(this.model.formula.cdf_bound1_default,3);case"cdfBound2":return Jo(this.model.formula.cdf_bound2_default,3);case"pValue":return Jo(this.model.formula.cdf_p_default,3)}}handleLatexChanged(e){switch(this.props.item()){case"cdfBound1":return this.controller.dispatch({type:"set-cdf-props",id:this.model.id,props:{bound1:e,p:""}});case"cdfBound2":return this.controller.dispatch({type:"set-cdf-props",id:this.model.id,props:{bound2:e,p:""}});case"pValue":return this.controller.dispatch({type:"set-cdf-props",id:this.model.id,props:{p:e,bound1:"",bound2:""}})}}handlePressedKey(e,t){if(e==="Esc"){this.controller.dispatch({type:"set-focus-location",location:void 0});return}if(e==="Enter"){this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});return}let o=qe.getFocusedMathquill();if(!o)return;o.keystroke(e,t);let i=o.latex();i!==this.model.latex&&this.handleLatexChanged(i)}},Yk=class extends Mx.View{constructor(){super(...arguments),this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.props.model().id,this.toggleGuid=__dcg_shared_module_exports__['E']("dcg-difference--cdf-toggle")}showCDF(){return Am(this.model)}template(){return _("div",{class:u("dcg-distribution-footer-view"),tapboundary:u("true"),handleEvent:u("true"),children:[d(EO,{predicate:()=>DD(this.model),children:()=>d("div",{class:u("dcg-inference-footer__section-container"),role:u("group"),"aria-labelled-by":this.const(this.toggleGuid),children:_("button",{"aria-expanded":this.bindFn(this.showCDF),class:()=>({"dcg-inference-footer_section-title":!0,"dcg-unstyled-button":!0,"dcg-inference-footer_section-open":this.showCDF()}),onTap:()=>this.controller.dispatch({type:"set-cdf-props",id:this.model.id,props:{show:!this.showCDF()}}),id:this.const(this.toggleGuid),children:[d("i",{class:u("dcg-icon-caret-down"),"aria-hidden":u("true")}),()=>this.controller.s("graphing-calculator-button-cdf-footer-title")]})})}),d(EO,{predicate:this.bindFn(this.showCDF),children:()=>_("div",{class:u("dcg-distribution-footer-view--cdf dcg-smaller-font"),children:[_("div",{class:u("dcg-distribution-footer__toggles"),children:[_("div",{class:u("dcg-distribution-footer__region-toggle"),children:[d("div",{class:u("dcg-expression-footer-title"),children:()=>this.controller.s("graphing-calculator-label-distributions-ui-region")}),d(hr,{ariaGroupLabel:()=>this.controller.s("graphing-calculator-label-distributions-ui-region"),staticConfig:this.bindFn(this.getTailsOptions),theme:this.const("mini"),focusOnTap:this.const(!0)})]}),d(EO,{predicate:this.bindFn(this.isContinuousDistribution),children:()=>_("div",{class:u("dcg-distribution-footer__direction-toggle"),children:[d("div",{class:u("dcg-expression-footer-title"),children:()=>this.controller.s("graphing-calculator-label-distributions-ui-compute")}),d(hr,{ariaGroupLabel:()=>this.controller.s("graphing-calculator-label-distributions-ui-compute"),staticConfig:this.bindFn(this.getDirectionOptions),theme:this.const("mini"),focusOnTap:this.const(!0)})]})})]}),_("div",{class:u("dcg-distribution-footer-view--cdf-params"),children:[d("div",{class:u("dcg-mq-math-mode dcg-distribution-footer__lhs"),children:_("div",{class:u("dcg-mq-root-block"),children:[d("var",{children:"P"}),_("span",{class:u("dcg-mq-non-leaf dcg-mq-bracket-container"),children:[IO(()=>this.controller.getBrailleMode()==="none",{true:()=>_(tr,{children:[d("span",{class:u("dcg-sr-only"),children:()=>this.controller.s("shared-calculator-narration-keypad-key-left-paren")}),d("span",{class:u("dcg-mq-scaled dcg-mq-bracket-l dcg-mq-paren"),didMount:e=>{e.innerHTML=`<svg preserveAspectRatio="none" viewBox="3 0 106 186" class="">
                          <path d="M85 0 A61 101 0 0 0 85 186 L75 186 A75 101 0 0 1 75 0" class="">
                          </path>
                        </svg>`}})]}),false:()=>d(ir,{latex:this.const("("),...this.getMathquillBrailleWrapperProps()})}),d("span",{class:u("dcg-mq-bracket-middle dcg-mq-non-leaf"),children:d(Nse,{children:e=>{switch(e){case"inner":return _("div",{class:u("dcg-distribution-view--bounds"),children:[d(Bc,{...this.props,item:this.const("cdfBound1"),labelKey:()=>this.isBound1GreaterThanBound2()?"upper":"lower"}),d(ir,{latex:()=>this.isBound1GreaterThanBound2()?"\\ge x\\ge":"\\le x\\le",...this.getMathquillBrailleWrapperProps()}),d(Bc,{...this.props,item:this.const("cdfBound2"),labelKey:()=>this.isBound1GreaterThanBound2()?"lower":"upper"})]});case"outer":return _("div",{class:u("dcg-distribution-view--bounds"),children:[d(ir,{latex:()=>this.isBound1GreaterThanBound2()?"x\\ge":"x\\le",...this.getMathquillBrailleWrapperProps()}),d(Bc,{...this.props,item:this.const("cdfBound1"),labelKey:()=>this.isBound1GreaterThanBound2()?"upper":"lower"}),d("span",{class:u("dcg-distribution-view__or"),children:()=>this.controller.raw("or")}),d(ir,{latex:()=>this.isBound1GreaterThanBound2()?"x\\le":"x\\ge",...this.getMathquillBrailleWrapperProps()}),d(Bc,{...this.props,item:this.const("cdfBound2"),labelKey:()=>this.isBound1GreaterThanBound2()?"lower":"upper"})]});case"left":return _("div",{class:u("dcg-distribution-view--bounds"),children:[d(ir,{latex:this.const("x\\le"),...this.getMathquillBrailleWrapperProps()}),d(Bc,{...this.props,item:this.const("cdfBound1"),labelKey:this.const("upper")})]});case"right":return _("div",{class:u("dcg-distribution-view--bounds"),children:[d(ir,{latex:this.const("x \\ge"),...this.getMathquillBrailleWrapperProps()}),d(Bc,{...this.props,labelKey:this.const("lower"),item:this.const("cdfBound1")})]});default:return d("div",{})}}},()=>ZT(this.model))}),IO(()=>this.controller.getBrailleMode()==="none",{true:()=>_(tr,{children:[d("span",{class:u("dcg-sr-only"),children:()=>this.controller.s("shared-calculator-narration-keypad-key-right-paren")}),d("span",{class:u("dcg-mq-scaled dcg-mq-bracket-r dcg-mq-paren"),didMount:e=>{e.innerHTML=`<svg preserveAspectRatio="none" viewBox="3 0 106 186" class="">
                          <path d="M24 0 A61 101 0 0 1 24 186 L34 186 A75 101 0 0 0 34 0" class=""></path>
                        </svg>`}})]}),false:()=>d(ir,{latex:this.const(")"),...this.getMathquillBrailleWrapperProps()})})]})]})}),_("div",{class:u("dcg-distribution-footer__rhs"),children:[d("span",{class:u("dcg-distribution-footer__equals"),children:d(ir,{latex:this.const("="),...this.getMathquillBrailleWrapperProps()})}),d(Bc,{...this.props,item:this.const("pValue"),labelKey:this.const("p")})]})]})]})})]})}isBound1GreaterThanBound2(){return this.model.formula.cdf_bound2!==void 0&&this.model.formula.cdf_bound1!==void 0&&this.model.formula.cdf_bound2<this.model.formula.cdf_bound1}setEditDirection(e){if(e==="p"){let t=!!this.model.cdf.p&&!this.model.cdf.bound1&&!this.model.cdf.bound2;this.controller.dispatch({type:"set-cdf-props",id:this.model.id,props:t?{bound1:this.model.formula.cdf_bound1!==void 0?Jo(this.model.formula.cdf_bound1,6):"",bound2:this.model.formula.cdf_bound2!==void 0?Jo(this.model.formula.cdf_bound2,6):"",compute:"p"}:{compute:"p"}})}else{let t=!this.model.cdf.p&&(!!this.model.cdf.bound1||!!this.model.cdf.bound2);this.controller.dispatch({type:"set-cdf-props",id:this.model.id,props:t?{p:this.model.formula.cdf_p!==void 0?Jo(this.model.formula.cdf_p,6):"",compute:"bounds"}:{compute:"bounds"}})}}getTailsSelection(){return ZT(this.model)}setTails(e){let t=this.model.cdf.bound1,o=this.model.cdf.bound2,i=this.model.cdf.p;CO(this.model)==="bounds"?(t="",o=""):i="",this.controller.dispatch({type:"set-cdf-props",id:this.id,props:{tails:e,bound1:t,bound2:o,p:i}})}isContinuousDistribution(){var e;return!px(this.model)&&((e=this.model.formula.top_level_function_spec)==null?void 0:e.type)==="distribution"}getDirectionOptions(){return[{key:"p",label:()=>this.controller.s("graphing-calculator-label-distributions-ui-area")},{key:"bounds",label:()=>this.controller.s("graphing-calculator-label-distributions-ui-bounds")}].map(e=>({...e,selected:()=>CO(this.model)===e.key,onSelect:()=>this.setEditDirection(e.key)}))}getTailsOptions(){return[{key:"inner",label:()=>"Inner"},{key:"outer",label:()=>"Outer"},{key:"left",label:()=>"Left"},{key:"right",label:()=>"Right"}].map(e=>({...e,selected:()=>this.getTailsSelection()===e.key,onSelect:()=>this.setTails(e.key)}))}getMathquillBrailleWrapperProps(){return{isFocused:this.const(!1),tabIndex:this.const(-1),isStatic:this.const(!0),selectOnFocus:this.const(!1),...Wr(this.controller)}}};ce();ie();__dcg_shared_module_exports__['H']();var lE=__dcg_shared_module_exports__['e'](se());ce();ie();var Qk=__dcg_shared_module_exports__['e'](se());du();var Fl=class{constructor(e){this.opts=e}getFirstRowIndex(){var e,t,o;return(o=(t=(e=this.opts).getFirstRowIndex)==null?void 0:t.call(e))!=null?o:0}getFirstColumnIndex(){var e,t,o;return(o=(t=(e=this.opts).getFirstColumnIndex)==null?void 0:t.call(e))!=null?o:0}handleHotKey(e){if(!e||this.opts.controller.isInEditListMode())return!1;let t=this.opts.getCellPosition();if(!e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)return!1;let o=Pe(e);return o==="Up"?(e.preventDefault(),e.stopPropagation(),this.opts.setFocusLocation({row:this.getFirstRowIndex(),column:t.column}),!0):o==="Down"?(e.preventDefault(),e.stopPropagation(),this.opts.setFocusLocation({row:this.opts.getLastRowIndex(),column:t.column}),!0):o==="Left"?(e.preventDefault(),e.stopPropagation(),this.opts.setFocusLocation({row:t.row,column:this.getFirstColumnIndex()}),!0):o==="Right"?(e.preventDefault(),e.stopPropagation(),this.opts.setFocusLocation({row:t.row,column:this.opts.isEditable?this.opts.getLastColumnIndex()-1:this.opts.getLastColumnIndex()}),!0):co(e)==="H"?(e.preventDefault(),e.stopPropagation(),Te(this.opts.getColumnHeader(t.column)),!0):!1}handleKeyPress(e,t){if(this.handleHotKey(t))return!0;if(!e)return!1;let{row:i,column:n}=this.opts.getCellPosition(),a=!1;switch(e){case"Up":this.safeSetFocusLocation({row:i-1,column:n}),a=!0;break;case"Down":this.safeSetFocusLocation({row:i+1,column:n}),a=!0;break;case"Left":this.safeSetFocusLocation({row:i,column:n-1}),a=!0;break;case"Right":this.safeSetFocusLocation({row:i,column:n+1}),a=!0;break;case"Esc":Rr(),a=!0}return!a&&this.opts.isEditable&&(a=this.handleKeyPressForEditableTable(e,t)),a&&(t==null||t.stopPropagation(),t==null||t.preventDefault()),a}handleKeyPressForEditableTable(e,t){if(!this.opts.isEditable)return!1;let{row:o,column:i}=this.opts.getCellPosition(),n=this.opts.getLastRowIndex(),a=this.opts.getLastColumnIndex(),s=this.opts.isColumnDisabled(this.getFirstColumnIndex());switch(e){case"Enter":return o>this.opts.getLastRowIndex()?(this.opts.wrapAtEdges&&this.opts.controller.dispatch({type:"on-special-key-pressed",key:"Enter"}),!0):this.handleKeyPress("Down",t);case"Backspace":return o===this.getFirstRowIndex()?i===this.getFirstColumnIndex()?this.opts.controller.dispatch({type:"on-special-key-pressed",key:e}):i===a||i===1&&a===2?this.safeSetFocusLocation({row:this.getFirstColumnIndex(),column:i-1}):(this.opts.removeColumn(i),this.safeSetFocusLocation({row:o,column:i-1})):i!==this.getFirstColumnIndex()?this.safeSetFocusLocation({row:o,column:i-1}):(n===1||n===2)&&o===1||s?this.safeSetFocusLocation({row:o-1,column:i}):(this.opts.removeRow(o),this.safeSetFocusLocation({row:o-1,column:i})),!0;case"Del":if(o===this.getFirstRowIndex())i===this.getFirstColumnIndex()?this.opts.controller.dispatch({type:"on-special-key-pressed",key:e==="Del"?"Delete":e}):i<a&&(this.opts.removeColumn(i),this.safeSetFocusLocation({row:o,column:i}));else{if(o>=n||s)return!0;this.opts.removeRow(o),this.safeSetFocusLocation({row:o-1,column:i})}return!0}return!1}safeSetFocusLocation(e){let{row:t,column:o}=e;if(t<this.getFirstRowIndex())this.opts.wrapAtEdges&&this.opts.controller.dispatch({type:"on-special-key-pressed",key:"Up"});else if(t>this.opts.getLastRowIndex())this.opts.wrapAtEdges&&this.opts.controller.dispatch({type:"on-special-key-pressed",key:"Down"});else if(o<this.getFirstColumnIndex())if(this.opts.wrapAtEdges)this.safeSetFocusLocation({row:t-1,column:this.opts.getLastColumnIndex()});else return;else if(o>this.opts.getLastColumnIndex())if(this.opts.wrapAtEdges)this.safeSetFocusLocation({row:t+1,column:this.getFirstColumnIndex()});else return;else this.opts.setFocusLocation(e)}};ie();var MW=__dcg_shared_module_exports__['e'](se());du();var Xk="dcg-inference-footer--chi-square-test-of-independence-table",Jk=(r,e)=>r===1/0?"\\infty":r===-1/0?"-\\infty":r!==void 0?__dcg_shared_module_exports__['ha'](r,{digits:e}):"",Uc=r=>{switch(r){case"observed":return"graphing-calculator-label-inference-popover-observed";case"expected":return"graphing-calculator-label-inference-popover-expected";case"contribution":return"graphing-calculator-label-inference-popover-contribution"}},os=class extends MW.View{template(){return Sg(()=>!this.props.error(),{true:()=>d(Xo,{latex:this.bindFn(this.getLatex),controller:this.props.controller,ariaLabel:this.const(""),tabbable:this.const(!1),focusLocation:this.const(void 0)}),false:()=>_(tr,{children:[d(Xt,{when:()=>{var e,t;return(t=(e=this.props).parenthesize)==null?void 0:t.call(e)},children:d("span",{children:"("})}),d(io,{instant:this.const(!0),size:this.const("medium-small"),error:()=>this.props.error()}),d(Xt,{when:()=>{var e,t;return(t=(e=this.props).parenthesize)==null?void 0:t.call(e)},children:d("span",{children:")"})})]})})}getLatex(){var t,o;let e=Jk(this.props.value(),4);return(o=(t=this.props).parenthesize)!=null&&o.call(t)?e?`\\left(${e}\\right)`:"":e||""}};var{For:Vse}=Qk.Components,Ax=25,Zk=class extends Qk.View{constructor(){super(...arguments),this.model=this.props.model(),this.controller=this.props.controller(),this.keyboardNavigationHelper=new Fl({controller:this.controller,getCellPosition:()=>this.getCellPosition(),getLastRowIndex:()=>this.getTruncatedRowCount()-1+(this.showTotals()?1:0),getLastColumnIndex:()=>this.getColumnCount()-1,getColumnHeader:e=>e===0?this.controller.s("graphing-calculator-label-inference-count"):vr(this.controller.s("graphing-calculator-label-inference-chi-square-contribution",{chiSquare:"`\\chi^2`"})),setFocusLocation:({row:e,column:t})=>this.controller.dispatch({type:"set-focus-location",location:{type:"chi-square-table",row:e,column:t,id:this.model.id}}),wrapAtEdges:!1,isEditable:!1})}handleKeyDown(e){let t=Pe(e);return this.keyboardNavigationHelper.handleKeyPress(t,e)}getCellTabIndex(e,t){let o=this.controller.getFocusLocation();return((o==null?void 0:o.type)!=="chi-square-table"||(o==null?void 0:o.id)!==this.model.id)&&e===0&&t===0?0:-1}getCellPosition(){let e=this.controller.getFocusLocation();return(e==null?void 0:e.type)!=="chi-square-table"||e.id!==this.model.id?{row:0,column:0}:e}getRowCount(){var o;let e=(o=this.model.formula)==null?void 0:o.typed_constant_value;return(e==null?void 0:e.valueType)!==__dcg_shared_module_exports__['fb']?0:__dcg_shared_module_exports__['zb'](e,"observed").length}getValue(e,t){return ip(this.model,t,e)}getTotal(){var t;let e=(t=this.model.formula)==null?void 0:t.typed_constant_value;return(e==null?void 0:e.valueType)!==__dcg_shared_module_exports__['fb']?0:__dcg_shared_module_exports__['zb'](e,"total")}getContributionsTotal(){return this.controller.getInferenceOutputValueById(this.model.id,"chisquare")}getContributionsError(){let e=this.controller.getInferenceOutputErrorById(this.model.id,"chisquare");if(e)return this.controller.unpack(e);let t=this.getContributionsTotal();if(!(t!==void 0&&!isNaN(t)))return this.props.controller().s("graphing-calculator-error-invalid-value")}getError(e,t){let o=this.getValue(e,t);if(!(o!==void 0&&!isNaN(o)))return t==="expected"?this.controller.s("graphing-calculator-error-equation-chi-square-expected"):this.props.controller().s("graphing-calculator-error-invalid-value")}getGridTemplates(){let e=this.getRowCount();return e===void 0?"":`--dcg-column-count: ${this.getColumnCount()}; --dcg-row-count: ${e+(this.showTotals()?1:0)}`}getColumnCount(){return this.showContributions()?2:1}getTruncatedRowCount(){return this.getRowCount()===Ax+1?Ax+1:Math.min(Ax,this.getRowCount())}didTruncateRows(){return this.getRowCount()>Ax+1}setShowContributions(e){return this.controller.dispatch({type:"set-inference-object-data",id:this.model.id,update:{chiSquare:{showContributions:e}}})}showContributions(){return!!this.model.inference.chiSquare.showContributions}setShowExpected(e){return this.controller.dispatch({type:"set-inference-object-data",id:this.model.id,update:{chiSquare:{showExpected:e}}})}showExpected(){return!!this.model.inference.chiSquare.showExpected}setShowTotals(e){return this.controller.dispatch({type:"set-inference-object-data",id:this.model.id,update:{chiSquare:{showTotals:e}}})}showTotals(){return!!this.model.inference.chiSquare.showTotals}template(){return _("div",{class:u("dcg-inference-footer--chi-square-goodness-of-fit-table"),children:[_("div",{class:u("dcg-inference-footer--checkboxes"),children:[d(tt,{onChange:e=>this.setShowExpected(e),checked:this.bindFn(this.showExpected),children:()=>this.controller.s("graphing-calculator-label-inference-expected")}),d(tt,{onChange:e=>this.setShowContributions(e),checked:this.bindFn(this.showContributions),children:()=>this.controller.s("graphing-calculator-label-inference-contributions")}),d(tt,{onChange:e=>this.setShowTotals(e),checked:this.bindFn(this.showTotals),children:()=>this.controller.s("graphing-calculator-label-inference-totals")})]}),_("div",{class:()=>({"dcg-table":!0,"dcg-chi-square--show-contributions":this.showContributions()}),style:this.bindFn(this.getGridTemplates),role:u("grid"),onKeyDown:e=>this.handleKeyDown(e),children:[d("div",{class:u("dcg-display--contents"),role:u("rowgroup"),children:_("div",{class:u("dcg-display--contents"),role:u("row"),children:[d("div",{class:u("dcg-table--cell dcg-table--col-header"),role:u("columnheader"),children:d("div",{class:u("dcg-table--cell-interior"),children:()=>this.controller.s("graphing-calculator-label-inference-count")})}),d(Xt,{when:this.bindFn(this.showContributions),children:d("div",{class:u("dcg-table--cell dcg-table--col-header dcg-table--last-col"),role:u("columnheader"),children:d("div",{class:u("dcg-table--cell-interior"),children:d(Ir,{content:()=>this.controller.s("graphing-calculator-label-inference-chi-square-contribution",{chiSquare:"`\\chi^2`"}),controller:this.props.controller})})})})]})}),_("div",{class:u("dcg-display--contents"),role:u("rowgroup"),children:[d(Vse.Count,{count:this.bindFn(this.getTruncatedRowCount),children:e=>_("div",{class:u("dcg-display--contents"),role:u("row"),children:[d("div",{class:u("dcg-table--cell"),role:u("gridcell"),manageFocus:this.const(_e({controller:this.controller,location:{type:"chi-square-table",id:this.model.id,row:e,column:0}})),tabIndex:()=>this.getCellTabIndex(e,0),children:_("div",{class:u("dcg-table--cell-interior"),children:[d("label",{class:u("dcg-sr-only"),children:()=>this.controller.s(Uc("observed"))}),d(os,{value:()=>this.getValue(e,"observed"),error:()=>this.getError(e,"observed"),controller:this.props.controller}),d(Xt,{when:()=>this.showExpected(),children:_(tr,{children:[d("label",{class:u("dcg-sr-only"),children:()=>this.controller.s(Uc("expected"))}),d("div",{class:u("dcg-chi-square--expected"),children:d(os,{value:()=>this.getValue(e,"expected"),error:()=>this.getError(e,"expected"),parenthesize:this.const(!0),controller:this.props.controller})})]})})]})}),d(Xt,{when:this.bindFn(this.showContributions),children:d("div",{class:u("dcg-table--cell dcg-chi-square--contributions-cell"),role:u("gridcell"),manageFocus:this.const(_e({controller:this.controller,location:{type:"chi-square-table",id:this.model.id,row:e,column:1}})),tabIndex:()=>this.getCellTabIndex(e,1),children:_("div",{class:u("dcg-table--cell-interior"),children:[d("label",{class:u("dcg-sr-only"),children:()=>this.controller.s(Uc("contribution"))}),d(os,{value:()=>this.getValue(e,"contribution"),error:()=>this.getError(e,"contribution"),controller:this.props.controller})]})})})]})}),d(Xt,{when:this.bindFn(this.didTruncateRows),children:d("div",{class:u("dcg-display--contents"),role:u("rowgroup"),children:d("div",{class:u("dcg-table--cell dcg-table--overflow-cell"),style:()=>({"--dcg-col-span":this.showContributions()?"2":"1"}),children:d("div",{class:u("dcg-table--overflow-cell-contents"),children:()=>this.controller.s("graphing-calculator-text-table-more-rows",{rowCount:__dcg_shared_module_exports__['pa'](this.getRowCount()-Ax)})})})})})]}),d(Xt,{when:this.bindFn(this.showTotals),children:d("div",{class:u("dcg-display--contents"),role:u("rowgroup"),children:_("div",{class:u("dcg-display--contents"),role:u("row"),children:[d("div",{class:u("dcg-table--cell dcg-table--totals-cell"),role:u("gridcell"),manageFocus:this.const(_e({controller:this.controller,location:{type:"chi-square-table",id:this.model.id,row:this.getTruncatedRowCount(),column:0}})),tabIndex:()=>this.getCellTabIndex(this.getRowCount(),0),children:_("div",{class:u("dcg-table--cell-interior"),children:[d("label",{children:()=>this.controller.s("graphing-calculator-label-inference-total")}),d(os,{value:()=>this.getTotal(),error:()=>this.getError(0,"observed"),controller:this.props.controller})]})}),d(Xt,{when:this.bindFn(this.showContributions),children:d("div",{class:u("dcg-table--cell dcg-table--totals-cell"),role:u("gridcell"),manageFocus:this.const(_e({controller:this.controller,location:{type:"chi-square-table",id:this.model.id,row:this.getTruncatedRowCount(),column:1}})),tabIndex:()=>this.getCellTabIndex(this.getRowCount(),0),children:_("div",{class:u("dcg-table--cell-interior"),children:[d("label",{children:()=>this.controller.s("graphing-calculator-label-inference-total")}),d(os,{value:this.bindFn(this.getContributionsTotal),error:this.bindFn(this.getContributionsError),controller:this.props.controller})]})})})]})})})]})]})}};ce();ie();var rE=__dcg_shared_module_exports__['e'](se());var ta=function(r,e,t){if(r===void 0||e===void 0)return!1;let o,i=e.getBoundingClientRect().height,n=r.getBoundingClientRect().height,a=qn(r),s=qn(e);if(!a||!s)return!1;let l=e.scrollTop,c=a.top+l-s.top,p=c-t,h=n+c+t-i;if(p>=h)o=Math.min(Math.max(l,h),p);else{let g=.5*(p+h),m=p+t;o=Math.min(g,m)}return o!==l?(e.scrollTop=o,e.scrollTop!=l):!1},eE=function(r,e,t){if(r===void 0||e===void 0)return!1;let o,i=e.getBoundingClientRect().width,n=r.getBoundingClientRect().width,a=qn(r),s=qn(e);if(!a||!s)return!1;let l=e.scrollLeft,c=a.left+l-s.left,p=c-t,h=n+c+t-i;if(p>=h)o=Math.min(Math.max(l,h),p);else{let g=.5*(p+h),m=p+t;o=Math.min(g,m)}return o!==l?(e.scrollLeft=o,e.scrollLeft!=l):!1};var Lx=8,Px=8,{For:AW,If:LW,SwitchUnion:Bse}=rE.Components,tE=class extends rE.View{constructor(){super(...arguments),this.model=this.props.model(),this.controller=this.props.controller(),this.keyboardNavigationHelper=new Fl({controller:this.controller,getCellPosition:()=>this.getCellPosition(),getFirstRowIndex:()=>-1,getFirstColumnIndex:()=>-1,getLastRowIndex:()=>this.getLastRowIndex(),getLastColumnIndex:()=>this.getLastColumnIndex(),getColumnHeader:e=>this.getHeaderContent({row:-1,column:e}),setFocusLocation:({row:e,column:t})=>{let o=this.controller.getOpenPopoverGuid();o!=null&&o.startsWith("chi-square-table")&&this.controller.setPopoverOpen(o,!1),this.controller.dispatch({type:"set-focus-location",location:{type:"chi-square-table",row:e,column:t,id:this.model.id}})},wrapAtEdges:!1,isEditable:!1})}template(){return _("div",{class:this.const(Xk),didMount:e=>this.scrollContainerNode=e,didUnmount:()=>this.scrollContainerNode=void 0,children:[_("div",{class:u("dcg-inference-footer--checkboxes"),children:[d(tt,{onChange:e=>this.setShowExpected(e),checked:this.bindFn(this.showExpected),children:()=>this.controller.s("graphing-calculator-label-inference-expected")}),d(tt,{onChange:e=>this.setShowContributions(e),checked:this.bindFn(this.showContributions),children:()=>this.controller.s("graphing-calculator-label-inference-contributions")}),d(tt,{onChange:e=>this.setShowTotals(e),checked:this.bindFn(this.showTotals),children:()=>this.controller.s("graphing-calculator-label-inference-totals")})]}),d("div",{class:()=>({"dcg-table":!0,"dcg-chi-square--show-contributions":this.showContributions()}),style:()=>({"--dcg-column-count":this.getAllDisplayedColumnsCount()+"","--dcg-row-count":this.getAllDisplayedRowsCount()+""}),onKeyDown:e=>this.handleKeyDown(e),role:u("grid"),children:d(AW.Count,{from:this.const(-1),count:()=>this.getAllDisplayedRowsCount(),children:e=>d("div",{class:u("dcg-display--contents"),role:u("row"),"dcg-row":()=>e,children:d(AW.Count,{from:this.const(-1),count:()=>this.getAllDisplayedColumnsCount(),children:t=>d("div",{class:()=>({"dcg-table--cell":!0,"dcg-table--col-header":e===-1,"dcg-table--row-header":t===-1,"dcg-table--totals-cell":this.isTotalCell({row:e,column:t})}),"dcg-col":()=>t,role:()=>this.getCellRole({row:e,column:t}),style:()=>({"--dcg-contribution-shade":this.getContributionShade({row:e,column:t})}),children:d("div",{role:()=>this.getCellType({row:e,column:t})==="value"?"link":void 0,manageFocus:this.const(_e({controller:this.controller,location:{type:"chi-square-table",id:this.model.id,row:e,column:t}})),tabIndex:()=>this.getPopoverButtonTabIndex({row:e,column:t}),"aria-haspopup":()=>this.getCellType({row:e,column:t})==="value"?"true":void 0,class:()=>({"dcg-table--cell-interior":!0,"dcg-cursor-default":this.getCellType({row:e,column:t})!=="value","dcg-popover-with-anchor__anchor":this.getCellType({row:e,column:t})==="value",[`dcg-popover-with-anchor__anchor--${this.getPopoverGuid({row:e,column:t})}`]:this.getCellType({row:e,column:t})==="value","dcg-popover-with-anchor__open":this.controller.isPopoverOpen(this.getPopoverGuid({row:e,column:t}))}),"aria-expanded":()=>this.controller.isPopoverOpen(this.getPopoverGuid({row:e,column:t})),onTap:()=>this.getCellType({row:e,column:t})==="value"&&this.togglePopover({row:e,column:t}),children:Bse(()=>this.getCellType({row:e,column:t}),{total:()=>_(tr,{children:[d("label",{class:u("dcg-sr-only"),children:()=>this.getTotalLabel({row:e,column:t})}),d(os,{value:()=>this.getTotalValue({row:e,column:t}),error:()=>this.getTotalError({row:e,column:t}),controller:this.props.controller})]}),header:()=>d(tr,{children:()=>this.getHeaderContent({row:e,column:t})}),ellipsis:()=>_("div",{children:[d("span",{class:u("dcg-sr-only"),children:()=>this.getEllipsisSkippedLabel({row:e,column:t})}),d("span",{"aria-hidden":u("true"),children:"..."})]}),value:()=>_(tr,{children:[d("label",{class:u("dcg-sr-only"),children:()=>this.controller.s(Uc("observed"))}),d(os,{value:()=>this.getValue({row:e,column:t},"observed"),error:()=>this.getError({row:e,column:t},"observed"),controller:this.props.controller}),d(LW,{predicate:()=>this.showExpected(),children:()=>_("div",{class:u("dcg-chi-square--expected"),children:[d("label",{class:u("dcg-sr-only"),children:()=>this.controller.s(Uc("expected"))}),d(os,{value:()=>this.getValue({row:e,column:t},"expected"),error:()=>this.getError({row:e,column:t},"expected"),parenthesize:this.const(!0),controller:this.props.controller})]})}),d(LW,{predicate:()=>this.showContributions(),children:()=>d("div",{class:u("dcg-sr-only"),children:()=>this.getContributionPercentString({row:e,column:t})})}),d("i",{class:u("dcg-icon-caret-down")})]})})})})})})})})]})}getTotalLabel(e){let t=this.getTotalType(e);if(!t)return"";switch(t){case"columnTotal":return this.controller.s("graphing-calculator-label-inference-group-total",{index:e.column+1});case"rowTotal":return this.controller.s("graphing-calculator-label-inference-group-total",{index:this.getRowCharacter(e.row+1)});case"total":return this.controller.s("graphing-calculator-label-inference-total")}}getTotalType(e){if(!this.showTotals())return;let t=e.row===this.getLastRowIndex(),o=e.column===this.getLastColumnIndex();if(o&&t)return"total";if(o)return"rowTotal";if(t)return"columnTotal"}getTotalValue(e){let t=this.getTotalType(e);if(t)return this.getValue(e,t)}getTotalError(e){let t=this.getTotalType(e);if(t)return this.getError(e,t)}getCellType(e){return this.isEllipsisCell(e)?"ellipsis":e.row===-1||e.column===-1?"header":this.isTotalCell(e)?"total":"value"}getCellRole(e){return e.row===-1?"columnheader":e.column===-1?"rowheader":"gridcell"}getLastRowIndex(){return this.getAllDisplayedRowsCount()-2}getLastColumnIndex(){return this.getAllDisplayedColumnsCount()-2}getAllDisplayedRowsCount(){return 1+this.getTruncatedRowCount()+(this.didTruncateRows()?1:0)+(this.showTotals()?1:0)}getAllDisplayedColumnsCount(){return 1+this.getTruncatedColumnCount()+(this.didTruncateColumns()?1:0)+(this.showTotals()?1:0)}getTruncatedColumnCount(){return this.getColumnCount()===Lx+1?Lx+1:Math.min(Lx,this.getColumnCount())}didTruncateColumns(){return this.getColumnCount()>Lx+1}getTruncatedRowCount(){return this.getRowCount()===Px+1?Px+1:Math.min(Px,this.getRowCount())}didTruncateRows(){return this.getRowCount()>Px+1}getColumnCount(){var t;let e=(t=this.model.formula)==null?void 0:t.typed_constant_value;return(e==null?void 0:e.valueType)!==__dcg_shared_module_exports__['gb']?0:__dcg_shared_module_exports__['zb'](e,"columns")}getRowCount(){var t;let e=(t=this.model.formula)==null?void 0:t.typed_constant_value;return(e==null?void 0:e.valueType)!==__dcg_shared_module_exports__['gb']?0:__dcg_shared_module_exports__['zb'](e,"rows")}getValue({row:e,column:t},o){var i;return o==="rowTotal"?this.getRowTotal(e):o==="columnTotal"?this.getColumnTotal(t):o==="total"?this.getTotal():(i=ip(this.model,o,e,t))!=null?i:NaN}getTotal(){let e=this.model.formula.typed_constant_value;if((e==null?void 0:e.valueType)===__dcg_shared_module_exports__['gb'])return __dcg_shared_module_exports__['zb'](e,"total")}getRowTotal(e){let t=this.model.formula.typed_constant_value;if((t==null?void 0:t.valueType)===__dcg_shared_module_exports__['gb'])return __dcg_shared_module_exports__['zb'](t,"rowTotals")[e]}getColumnTotal(e){let t=this.model.formula.typed_constant_value;if((t==null?void 0:t.valueType)===__dcg_shared_module_exports__['gb'])return __dcg_shared_module_exports__['zb'](t,"columnTotals")[e]}getError(e,t){let o=this.getValue(e,t);if(!(o!==void 0&&!isNaN(o)))return t==="expected"?this.controller.s("graphing-calculator-error-equation-chi-square-expected"):this.controller.raw("Invalid value")}getContributionShade(e){var a;let t=(a=this.model.formula)==null?void 0:a.typed_constant_value;if((t==null?void 0:t.valueType)!==__dcg_shared_module_exports__['gb'])return;let o=__dcg_shared_module_exports__['zb'](t,"contributions"),i=Math.max(...o),n=this.getValue(e,"contribution");return n?n/i+"":void 0}getContributionPercentString(e){var a;let t=(a=this.model.formula)==null?void 0:a.typed_constant_value;if((t==null?void 0:t.valueType)!==__dcg_shared_module_exports__['gb'])return;let o=__dcg_shared_module_exports__['zb'](t,"score"),i=this.getValue(e,"contribution"),n=o===0?0:Math.round(100*(i!=null?i:0)/o);return this.controller.s("graphing-calculator-narration-inference-chi-square-contribution-percent",{percent:n})}getRowCharacter(e){return e<=26?String.fromCharCode(64+e):""}getHeaderContent(e){return e.row===-1&&e.column===-1?"":this.isTotalCell(e)?this.controller.s("graphing-calculator-label-inference-total-header"):this.isEllipsisCell(e)?this.getEllipsisSkippedLabel(e):e.row===-1?this.getColumnName(e.column):this.getRowName(e.row)}getEllipsisRow(){return this.getLastRowIndex()-(this.showTotals()?1:0)}getEllipsisColumn(){return this.getLastColumnIndex()-(this.showTotals()?1:0)}isEllipsisCell(e){return this.didTruncateRows()&&e.row===this.getEllipsisRow()||this.didTruncateColumns()&&e.column===this.getEllipsisColumn()}getEllipsisSkippedLabel(e){return e.row===this.getEllipsisRow()&&this.didTruncateRows()?this.controller.s("graphing-calculator-text-table-more-rows",{rowCount:__dcg_shared_module_exports__['pa'](this.getRowCount()-Px)}):e.column===this.getEllipsisColumn()&&this.didTruncateColumns()?this.controller.s("graphing-calculator-text-table-more-columns",{columnCount:__dcg_shared_module_exports__['pa'](this.getColumnCount()-Lx)}):""}isTotalCell(e){return this.showTotals()?e.row===this.getLastRowIndex()||e.column===this.getLastColumnIndex():!1}getRowName(e){return this.controller.s("graphing-calculator-label-inference-group",{index:this.getRowCharacter(e+1)})}getColumnName(e){return this.controller.s("graphing-calculator-label-inference-group",{index:e+1})}setShowExpected(e){return this.controller.dispatch({type:"set-inference-object-data",id:this.model.id,update:{chiSquare:{showExpected:e}}})}setShowContributions(e){return this.controller.dispatch({type:"set-inference-object-data",id:this.model.id,update:{chiSquare:{showContributions:e}}})}showExpected(){return!!this.model.inference.chiSquare.showExpected}showContributions(){return!!this.model.inference.chiSquare.showContributions}getPopoverGuid(e){return`chi-square-table-${this.model.id}-${e.row}-${e.column}`}setShowTotals(e){return this.controller.dispatch({type:"set-inference-object-data",id:this.model.id,update:{chiSquare:{showTotals:e}}})}showTotals(){return!!this.model.inference.chiSquare.showTotals}getCellPosition(){let e=this.controller.getFocusLocation();return(e==null?void 0:e.type)!=="chi-square-table"||e.id!==this.model.id?{row:0,column:0}:e}handleKeyDown(e){var o;let t=Pe(e);if((o=this.controller.getOpenPopoverGuid())!=null&&o.startsWith("chi-square-table")){let i=this.controller.getFocusLocation();if((i==null?void 0:i.type)!=="chi-square-table"||(i==null?void 0:i.id)!==this.model.id)return}return this.keyboardNavigationHelper.handleKeyPress(t,e)}getPopoverButtonTabIndex(e){let t=this.controller.getFocusLocation();return(t==null?void 0:t.type)==="chi-square-table"?-1:e.row===0&&e.column===0?0:-1}maybeScrollFocusedCellIntoView(){var t;let e=this.controller.getFocusLocation();if((e==null?void 0:e.type)!=="chi-square-table"||(e==null?void 0:e.id)!==this.model.id){this.focusInfoLastFrame=void 0;return}if(!__dcg_shared_module_exports__['s'](e,this.focusInfoLastFrame)){if(this.focusInfoLastFrame=e,e.column===-1){this.scrollContainerNode&&(this.scrollContainerNode.scrollLeft=0);return}let o=(t=document.activeElement)==null?void 0:t.closest(".dcg-table--cell");o&&this.scrollContainerNode&&eE(o,this.scrollContainerNode,40)}}didUpdate(){this.maybeScrollFocusedCellIntoView()}togglePopover(e){let t=this.getPopoverGuid(e),o=this.controller.getOpenPopoverGuid()===t;this.controller.dispatch({type:"set-focus-location",location:{type:"chi-square-table",id:this.model.id,row:e.row,column:e.column}}),this.controller.runAfterDispatch(()=>this.controller.dispatch({type:"set-popover-open",guid:t,open:!o}))}};ce();ie();var aE=__dcg_shared_module_exports__['e'](se());ce();ie();var GW=__dcg_shared_module_exports__['e'](se());sl();function oE({symbol:r,evaluatedParams:e}){var t;switch(r){case"tdist":return{xmin:-6,xmax:6,ymin:-.15,ymax:.5};case"normaldist":return{xmin:-6,xmax:6,ymin:-.15,ymax:.5};case"chisqdist":{let o=(t=e[0])!=null?t:1;return{xmin:0,xmax:__dcg_shared_module_exports__['Tb'](1-.001,o),ymin:-.15,ymax:.5}}}}function ef(r,e){let t=[];for(let o=0;o<e.length;o+=2){let i=e[o],n=e[o+1];isFinite(i)&&isFinite(n)&&t.push(i,n)}return`<polyline points="${t.map(o=>o.toFixed(2)).join(",")}" class="${r}"/>
`}function Use(r,e){let{width:t,height:o}=e,{xmin:i,xmax:n,ymin:a,ymax:s}=oE(r),l=t/(n-i),c=-o/(s-a),p=-i*l,h=o-a*c;return{Tx:p,Sx:l,Ty:h,Sy:c}}function DW(r){var B;let{width:e,height:t,min:o,max:i,tails:n,distributionSpec:a,mathquillScoreLabelWidth:s}=r;if(a===void 0)return"";let l=a.symbol;if(l!=="normaldist"&&l!=="tdist"&&l!=="chisqdist")return"";let{xmin:c,xmax:p}=oE(a),{Tx:h,Sx:g,Ty:m,Sy:b}=Use(a,{width:e,height:t}),x=-h/g,E=(e-h)/g,S=1/g,k=a.evaluatedParams;l==="chisqdist"&&(((B=k[0])!=null?B:0)<2?x=Math.max(x,S):x=Math.max(x,0));let T=L=>L*g+h,I=L=>L*b+m;function P(L,q,le){le===void 0?L.push(T(q),I(0)+.5):L.push(T(q),I(le))}let A="";function D(L){switch(l){case"tdist":return __dcg_shared_module_exports__['Qb'](L,k[0]);case"normaldist":return __dcg_shared_module_exports__['Rb'](L,0,1);case"chisqdist":{let q=k[0];return __dcg_shared_module_exports__['Sb'](L,q)/(4*__dcg_shared_module_exports__['Sb'](Math.max(q-2,.5),q))}}}if(l!=="chisqdist"){for(let L=-5;L<=5;L++)A+=ef("dcg-significance-diagram-minor-tick",[T(L),I(-.015),T(L),I(.015)]);A+=ef("dcg-significance-diagram-major-tick",[T(0),I(-.03),T(0),I(.03)])}A+=ef("dcg-significance-diagram-x-axis",[T(c),I(0),T(p),I(0)]);let G="dcg-significance-diagram-tails";function N(){let L=[0,m+1];for(let q=x;q<E;q+=S)q<o&&P(L,q,D(q));P(L,o,D(o)),P(L,o),A+=ef(G,L)}function U(L){let q=[];P(q,L),P(q,L,D(L));for(let le=x;le<E;le+=S)le>L&&P(q,le,D(le));P(q,E),A+=ef(G,q)}let K="dcg-significance-diagram-curve",H=[];for(let L=x;L<E;L+=S)P(H,L,D(L));A+=ef(K,H),n==="left"?N():n==="right"?U(o):n==="outer"&&(N(),U(i));let w=r,{score:F,scoreLabel:V}=w;if(F!==void 0&&!isNaN(F)){let q=[{score:F,scoreLabel:"",dotClass:"dcg-significance-diagram-dot",labelClass:""}];if(n==="outer"){let le=`\u2013 ${V}`;(F<-F&&Math.abs(T(F)-T(-F))<=s-5||Math.abs(T(F)-T(-F))<=2*2.5+10)&&(le=""),q.push({score:-F,scoreLabel:le,dotClass:"dcg-significance-diagram-outer-dot",labelClass:"dcg-significance-diagram-outer-label"})}for(let{score:le,scoreLabel:$,dotClass:ne,labelClass:ue}of q){let de="",pe;if($){if(le<c)continue;if(le>p)continue;de=`${$}`,pe="middle"}let Y=T(le),j=I(0);isFinite(Y)&&isFinite(j)&&(A+=`<circle cx="${Y}" cy="${j}" r="${2.5}" class="${ne}" />`);let X=T(__dcg_shared_module_exports__['Ob'](le,c,p)),xe=I(0)+8;de!==""&&isFinite(X)&&isFinite(xe)&&(A+=`<text
        x="${X}"
        y="${xe}"
        text-anchor="${pe}"
        dominant-baseline="hanging"
        class="${ue}">${de}
        </text>`)}}return A}function PW(r){return r.x+.5*r.width}function OW(r){let e=r.clientWidth,t=Array.from(r.querySelectorAll(".dcg-significance-diagram-label, .dcg-significance-diagram-outer-label")).map(o=>({elt:o,bbox:o.getBBox()}));if(t.forEach(({elt:o,bbox:i})=>{i.x<4&&(o.style.transform=`translate(${4-i.x}px)`),i.x+i.width>e-4&&(o.style.transform=`translate(${e-4-(i.x+i.width)}px)`)}),t.length===2){let[o,i]=t.slice().sort((a,s)=>PW(a.bbox)-PW(s.bbox)),n=o.bbox.x+o.bbox.width-(i.bbox.x-6);n>0&&(o.elt.style.transform=`translate(${-n/2}px)`,i.elt.style.transform=`translate(${n/2}px)`)}}function RW(r,e){let t=Bu(e.getItemModel(r));switch(t){case"t":{let o=e.getInferenceOutputValueById(r,"dof");return{symbol:"tdist",evaluatedParams:[o!=null?o:1,0,1]}}case"z":return{symbol:"normaldist",evaluatedParams:[0,1]};case"chisqgof":case"chisqtest":{let o=e.getInferenceOutputValueById(r,"dof");return{symbol:"chisqdist",evaluatedParams:[o!=null?o:1]}}case void 0:return;default:throw new Error(`Unexpected inferenceType ${t}`)}}var FW="dcg-inference-footer__significance-test__score-label__label",iE=class extends GW.View{constructor(){super(...arguments),this.controller=this.props.controller(),this.model=this.props.model()}template(){return _("div",{class:u("dcg-inference--significance--diagram"),children:[d("div",{class:u("dcg-inference--significance--diagram--large"),inert:u(!0),willUnmount:()=>this.willUnmountSVG(),didMount:e=>this.didMountSVG(e),"aria-hidden":u("true")}),_("div",{class:()=>({"dcg-inference-footer__significance-test__overlay-values":!0,"dcg-inference-footer__overlay-values-bump-right":this.shouldBumpValuesRight()}),children:[d(Ir,{content:this.bindFn(this.getPValue),controller:this.props.controller}),d(Xt,{when:this.bindFn(this.showDoF),children:d(Ir,{content:this.bindFn(this.getDoFValue),controller:this.props.controller})})]}),_("div",{class:u("dcg-inference-footer__significance-test__score-label"),style:this.bindFn(this.getScoreLabelStyles),children:[d("div",{class:u("dcg-inference-footer__significance-test__score-label__spacer")}),d("div",{class:this.const(FW),children:d(Ir,{content:this.bindFn(this.getTestStatistic),controller:this.props.controller})})]}),d(Ps,{anchor:()=>d(Rl,{}),focusAnchorOnTap:this.const(!0),anchorAriaLabel:()=>this.controller.s("graphing-calculator-button-inference-view-numerical-outputs"),focusTrapping:this.const({itemNavigationKey:"tab"}),guid:()=>`exportable-significance-diagram-${this.model.id}`,controlled:()=>({isOpen:this.props.controller().isPopoverOpen(`exportable-significance-diagram-${this.model.id}`),setDropdownOpen:e=>this.props.controller().dispatch({type:"set-popover-open",guid:`exportable-significance-diagram-${this.model.id}`,open:e})}),dropdownProps:this.const({position:this.const("bottom-left")}),dropdownOffset:()=>-15,manageFocus:this.const(_e({controller:this.props.controller(),location:{type:"inference-footer",id:this.model.id,subtype:"view-numerical-evaluation-button",item:"significanceDiagram"}})),popoverBody:()=>_("div",{class:u("dcg-exportable-evaluation--popover"),children:[_("ul",{class:u("dcg-unstyled-list dcg-inference-footer--values-table"),children:[d(Xt,{when:()=>this.showDoF(),children:d(Ds,{controller:this.props.controller,outputItem:this.const("dof"),id:()=>this.model.id})}),d(Ds,{controller:this.props.controller,outputItem:this.bindFn(this.getScoreType),id:this.bindFn(this.id)}),d(Ds,{controller:this.props.controller,outputItem:this.bindFn(this.getPValueType),id:this.bindFn(this.id)})]}),d("button",{class:()=>({"dcg-btn-light-gray":!0,"dcg-significance-diagram--export-button":!0,"dcg-disabled":this.diagramIsInvalid()}),onTap:()=>{this.diagramIsInvalid()||this.controller.dispatch({type:"export-inference-item-to-expression-list",item:"significanceDiagram",id:this.model.id})},manageFocus:this.const(_e({controller:this.props.controller(),location:{type:"inference-footer",id:this.model.id,subtype:"exportable-evaluation-export-button",item:"significanceDiagram"}})),disabled:()=>this.diagramIsInvalid()?"true":void 0,children:()=>this.controller.s("graphing-calculator-button-inference-export-significance-diagram")})]})})]})}id(){return this.model.id}getDistributionData(){var p,h;let e=this.model.id,t=this.controller.getItemModel(e),o=(p=Bu(t))!=null?p:"z",i;switch(o){case"z":i="z";break;case"t":i="t";break;case"chisqgof":case"chisqtest":i="";break}let n=this.controller.getInferenceObjectData(e),a=this.controller.getInferenceOutputValueById(e,"score"),s=(h=n==null?void 0:n.significance)==null?void 0:h.tails;(n==null?void 0:n.significance)===void 0&&(t==null?void 0:t.type)==="expression"&&Jn(t)&&(s="outer"),(a===void 0||(o==="t"||o==="chisqgof"||o==="chisqtest")&&this.controller.getInferenceOutputValueById(e,"dof")===void 0)&&(s=void 0),(o==="chisqtest"||o==="chisqgof")&&(s="right");let l=a,c=a;return a!==void 0&&s==="outer"&&(l=-Math.abs(a),c=Math.abs(a)),l!=null||(l=-1),c!=null||(c=1),{min:l,max:c,tails:s,score:a,scoreLabel:i}}didMountSVG(e){this.svgElement=e,this.renderSVGElement()}willUnmountSVG(){this.svgElement=void 0,this.lastSVGInputs=void 0}renderSVGElement(){var a,s,l,c;if(!this.svgElement)return;let e=RW(this.model.id,this.controller),t="clientWidth"in this.svgElement?this.svgElement.clientWidth:0,o="clientHeight"in this.svgElement?this.svgElement.clientHeight:0,i=(c=(l=(s=(a=this.svgElement)==null?void 0:a.parentElement)==null?void 0:s.querySelector(`.${FW}`))==null?void 0:l.getBoundingClientRect().width)!=null?c:0,n=e&&t&&o?{...this.getDistributionData(),distributionSpec:e,width:t,height:o,mathquillScoreLabelWidth:i}:void 0;__dcg_shared_module_exports__['s'](n,this.lastSVGInputs)||(this.lastSVGInputs=n,this.svgElement.innerHTML=`<svg>${n?DW(n):""}</svg>`,OW(this.svgElement))}didUpdate(){this.renderSVGElement()}getPValueType(){var e,t;switch((t=(e=this.controller.getInferenceObjectData(this.id()))==null?void 0:e.significance)==null?void 0:t.tails){case"left":return"pleft";case"right":return"pright";case"outer":default:return"p"}}getInferenceType(){return Bu(this.controller.getItemModel(this.id()))}showDoF(){let e=this.getInferenceType();switch(e){case"t":case"chisqgof":case"chisqtest":return!0;case"z":case void 0:return!1;default:throw new Error(`Unexpected inference type: ${e}`)}}getScoreType(){let e=this.getInferenceType();switch(e){case"z":return"z";case"t":case void 0:return"t";case"chisqgof":case"chisqtest":return"chisquare";default:throw new Error(`Unexpected inference type: ${e}`)}}isChiSq(){let e=this.getInferenceType();switch(e){case"chisqgof":case"chisqtest":return!0;case"z":case"t":case void 0:return!1;default:throw new Error(`Unexpected inference type: ${e}`)}}shouldBumpValuesRight(){if(!this.isChiSq())return!1;let e=this.controller.getInferenceOutputValueById(this.id(),"dof");return e===1||e===2}getScoreLabelStyles(){let e=RW(this.model.id,this.controller);if(!e)return;let t=oE(e),o=this.controller.getInferenceOutputValueById(this.id(),"score");if(o===void 0)return"";let i=Math.min(100,100*(o-t.xmin)/(t.xmax-t.xmin));return{"--score-label-x-pct":isFinite(i)?`${i.toFixed(1)}%`:void 0}}getTestStatistic(){let e=this.getInferenceType(),t;switch(e){case"z":t="z";break;case"t":t="t";break;case"chisqgof":case"chisqtest":t="\\chi^2";break;case void 0:t="";break;default:throw new Error(`Unexpected inference type: ${e}`)}let o=this.props.controller().getInferenceOutputValueById(this.id(),"score");return o===void 0||Number.isNaN(o)?"`"+t+"=`"+this.controller.s("shared-calculator-label-undefined"):"`"+t+"="+Jo(o)+"`"}getDoFValue(){let e=this.controller.getInferenceOutputValueById(this.id(),"dof");return e===void 0||Number.isNaN(e)?"df`=`"+this.controller.s("shared-calculator-label-undefined"):"df`="+Jo(e)+"`"}getPValue(){let e=this.controller.getInferenceOutputValueById(this.id(),this.getPValueType());return e===void 0||Number.isNaN(e)?this.controller.s("graphing-calculator-label-inference-output-p")+"`=`"+this.controller.s("shared-calculator-label-undefined"):e<1e-4?this.controller.s("graphing-calculator-label-inference-output-p")+"`<0.0001`":this.controller.s("graphing-calculator-label-inference-output-p")+"`="+Jo(e)+"`"}diagramIsInvalid(){let e=this.controller.getInferenceOutputValueById(this.id(),"score");return e===void 0||Number.isNaN(e)}};var{If:nE,Show:zse}=aE.Components,tf=class extends aE.View{constructor(){super(...arguments),this.controller=this.props.controller(),this.model=this.props.model()}init(){this.controller=this.props.controller(),this.model=this.props.model()}getSignificanceTest(){return this.model.inference.significance}setHypothesisLatex(e){this.controller.dispatch({type:"set-inference-object-data",id:this.model.id,update:{significance:{hypothesis:e}}})}hypothesisHasError(){return this.controller.inferenceInputValueHasError(this.model.id,"hypothesis")}getHypothesisLabel(){let e=mO(this.model);if(e)return e+"="}showHypothesis(){return!Jn(this.model)&&!Cs(this.model)}showTails(){return!Cs(this.model)&&!this.shouldShowSliderPromptForHypothesis()}missingHypothesisVariables(){var e,t;return((t=(e=this.model)==null?void 0:e.formula.hypothesis_variables)!=null?t:[]).map(__dcg_shared_module_exports__['ia'])}shouldShowSliderPromptForHypothesis(){return this.missingHypothesisVariables().length>0}getHypothesisPlaceholder(){var e,t,o;return`${(o=(t=(e=this.model)==null?void 0:e.formula)==null?void 0:t.hypothesis_placeholder)!=null?o:""}`}template(){return _("div",{class:()=>({"dcg-inference-footer__significance-test":!0,"dcg-inference-footer__expanded-section":!0,"dcg-inference-footer__expanded-section-border":this.props.showIndented()}),children:[d(nE,{predicate:()=>this.showHypothesis(),children:()=>_("div",{class:u("dcg-inference-footer__input-section dcg-inference--hypothesis-input"),children:[d("label",{children:()=>this.controller.s("graphing-calculator-label-inference-null-hypothesis")}),_("div",{children:[d(zse,{when:()=>!!this.getHypothesisLabel(),children:d("span",{class:u("dcg-inference-footer__null-hypothesis-label"),children:d(ir,{latex:()=>this.getHypothesisLabel(),isFocused:this.const(!1),tabIndex:this.const(-1),isStatic:this.const(!0),selectOnFocus:this.const(!1),...Wr(this.controller)})})}),d(Ut,{latex:()=>{var e,t;return(t=(e=this.getSignificanceTest())==null?void 0:e.hypothesis)!=null?t:""},ariaLabel:()=>this.controller.s("graphing-calculator-label-inference-ui-hypothesis"),hasError:this.bindFn(this.hypothesisHasError),handlePressedKey:(e,t)=>this.handlePressedKey(e,t),placeholder:this.bindFn(this.getHypothesisPlaceholder),handleLatexChanged:e=>this.setHypothesisLatex(e),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),...rp({controller:this.props.controller(),location:()=>({type:"inference-footer",id:this.model.id,subtype:"mathquill-input",item:"hypothesis"})}),ariaPostLabel:()=>this.shouldShowSliderPromptForHypothesis()?this.controller.s("graphing-calculator-narration-add-slider-prompt",{vars:Zn(this.controller.getLanguage(),this.missingHypothesisVariables().map(ur))}):""})]})]})}),d(nE,{predicate:()=>this.showTails(),children:()=>_("div",{class:u("dcg-inference-footer__input-section"),children:[d("label",{children:()=>this.controller.s("graphing-calculator-label-inference-tails")}),d(hr,{ariaGroupLabel:()=>this.controller.s("graphing-calculator-label-inference-ui-tails"),staticConfig:this.bindFn(this.getTailsOptions),theme:this.const("mini")})]})}),d(nE,{predicate:()=>this.shouldShowSliderPromptForHypothesis(),children:()=>d(_n,{model:()=>this.model,controller:this.props.controller,missingVariables:()=>this.missingHypothesisVariables(),restoreFocusLocation:this.const({type:"inference-footer",id:this.model.id,subtype:"mathquill-input",item:"hypothesis"})})}),d(nE,{predicate:()=>!this.shouldShowSliderPromptForHypothesis(),children:()=>d(iE,{controller:this.props.controller,model:this.props.model})})]})}getTailsOptions(){let e=this.props.model().id;return[{key:"left",label:()=>this.controller.s("graphing-calculator-text-distribution-tails-left")},{key:"outer",label:()=>this.controller.s("graphing-calculator-text-distribution-tails-both")},{key:"right",label:()=>this.controller.s("graphing-calculator-text-distribution-tails-right")}].map(t=>({...t,selected:()=>{var o,i,n;return((n=(i=(o=this.controller.getInferenceObjectData(e))==null?void 0:o.significance)==null?void 0:i.tails)!=null?n:"outer")===t.key},onSelect:()=>{this.controller.dispatch({type:"set-inference-object-data",id:e,update:{significance:{tails:t.key}}})}}))}handlePressedKey(e,t){let o=qe.getFocusedMathquill();if(o){if(e==="Esc"){this.controller.dispatch({type:"set-focus-location",location:void 0});return}if(e==="Enter"&&this.missingHypothesisVariables().length>0&&this.controller.areSlidersEnabled())return this.controller.dispatch({type:"create-sliders-for-item",id:this.model.id,variables:this.missingHypothesisVariables().slice(0,El),doNotChangeFocus:!0});o.keystroke(e,t),this.setHypothesisLatex(o.latex())}}};var{If:_O,IfElse:qse,Switch:Hse}=lE.Components,sE=class extends lE.View{constructor(){super(...arguments),this.controller=this.props.controller(),this.model=this.props.model(),this.confidenceToggleGuid=__dcg_shared_module_exports__['E']("dcg-inference--confidence-toggle"),this.significanceToggleGuid=__dcg_shared_module_exports__['E']("dcg-inference--significance-toggle"),this.tableToggleGuid=__dcg_shared_module_exports__['E']("dcg-inference--chi-square-table-toggle")}hasConfidenceInterval(){return!!this.model.inference.confidence.show}setHasConfidenceInterval(e){return e?this.controller.dispatch({type:"set-inference-object-data",id:this.model.id,update:{confidence:{show:!0}}}):this.controller.dispatch({type:"set-inference-object-data",id:this.model.id,update:{confidence:{show:!1}}})}setHasSignificanceTest(e){return e?this.controller.dispatch({type:"set-inference-object-data",id:this.model.id,update:{significance:{show:!0}}}):this.controller.dispatch({type:"set-inference-object-data",id:this.model.id,update:{significance:{show:!1}}})}hasSignificanceTest(){var e;return!!((e=this.model.inference.significance)!=null&&e.show)}shouldShowTable(){return Cs(this.model)&&this.model.inference.chiSquare.showTable}setShowTable(e){return this.controller.dispatch({type:"set-inference-object-data",id:this.model.id,update:{chiSquare:{showTable:e}}})}template(){return _("div",{class:u("dcg-inference-ui dcg-inference-footer"),tapboundary:u("true"),handleEvent:u("true"),children:[qse(()=>Cs(this.model),{false:()=>_("div",{class:u("dcg-inference-footer__section-container"),role:u("group"),"aria-labelled-by":this.const(this.confidenceToggleGuid),children:[_("button",{class:()=>({"dcg-inference-footer_section-title":!0,"dcg-inference-footer_section-open":this.hasConfidenceInterval(),"dcg-unstyled-button":!0}),onTap:()=>this.setHasConfidenceInterval(!this.hasConfidenceInterval()),"aria-expanded":this.bindFn(this.hasConfidenceInterval),id:this.const(this.confidenceToggleGuid),children:[d("i",{class:u("dcg-icon-caret-down"),"aria-hidden":u("true")}),()=>this.controller.s("graphing-calculator-label-inference-ui-confidence-interval")]}),d(_O,{predicate:this.bindFn(this.hasConfidenceInterval),children:()=>d(Qm,{...this.props,showIndented:this.const(!0)})})]}),true:()=>_("div",{class:u("dcg-inference-footer__section-container"),role:u("group"),"aria-labelled-by":this.const(this.tableToggleGuid),children:[_("button",{class:()=>({"dcg-inference-footer_section-title":!0,"dcg-inference-footer_section-open":this.shouldShowTable(),"dcg-unstyled-button":!0}),onTap:()=>this.setShowTable(!this.shouldShowTable()),"aria-expanded":this.bindFn(this.shouldShowTable),id:this.const(this.tableToggleGuid),children:[d("i",{class:u("dcg-icon-caret-down"),"aria-hidden":u("true")}),()=>`${this.controller.s("graphing-calculator-label-inference-observed")} (${this.controller.s("graphing-calculator-label-inference-expected")})`]}),d(_O,{predicate:this.bindFn(this.shouldShowTable),children:()=>d("div",{class:()=>({"dcg-inference-footer__expanded-section":!0,"dcg-inference-footer__expanded-section-border":!0,"dcg-inference-footer__chi-sq-table":!0}),children:d(Hse,{children:e=>{if(e==="chisqtest")return d(tE,{model:this.props.model,controller:this.props.controller});if(e==="chisqgof")return d(Zk,{model:this.props.model,controller:this.props.controller})}},()=>PD(this.model))})})]})}),_("div",{class:u("dcg-inference-footer__section-container"),role:u("group"),"aria-labelled-by":this.const(this.significanceToggleGuid),children:[_("button",{class:()=>({"dcg-inference-footer_section-title":!0,"dcg-inference-footer_section-open":this.hasSignificanceTest(),"dcg-unstyled-button":!0}),onTap:()=>this.setHasSignificanceTest(!this.hasSignificanceTest()),"aria-expanded":this.bindFn(this.hasSignificanceTest),id:this.const(this.significanceToggleGuid),children:[d("i",{class:u("dcg-icon-caret-down"),"aria-hidden":u("true")}),()=>this.controller.s("graphing-calculator-label-inference-ui-significance-test")]}),d(_O,{predicate:this.bindFn(this.hasSignificanceTest),children:()=>d(tf,{...this.props,showIndented:this.const(!0)})})]})]})}};ce();ie();var cE=__dcg_shared_module_exports__['e'](se());var{Input:Kse,IfElse:MO,IfDefined:Wse,If:NW}=cE.Components,qu=class extends cE.View{template(){return this.controller=this.props.controller(),_("div",{class:()=>({"dcg-label-visible":this.getShowLabel(),"dcg-label-input-visible":!this.getIsDisabled(),"dcg-label-container":!0,"dcg-do-blur":!0}),tapboundary:u("true"),handleEvent:u("true"),children:[MO(()=>{var e,t;return!!((t=(e=this.props).forceEnabled)!=null&&t.call(e))},{true:()=>d("span",{children:()=>this.controller.s("graphing-calculator-button-label")+":"}),false:()=>d(tt,{onChange:this.bindFn(this.onCheckboxInput),checked:this.bindFn(this.getShowLabel),children:()=>this.controller.s("graphing-calculator-button-label")+(this.getIsDisabled()?"":":")})}),MO(this.bindFn(this.hasEditableLabel),{true:()=>d("div",{class:u("dcg-editable-mode-toggle"),children:d(hr,{theme:this.const("mini"),staticConfig:this.bindFn(this.getEditableLabelOptions),ariaGroupLabel:()=>this.controller.s("graphing-calculator-narration-editable-label-mode")})}),false:()=>MO(()=>{var e,t;return!!((t=(e=this.props).displayComputedValue)!=null&&t.call(e))},{false:()=>d(NW,{predicate:()=>{var e,t;return!((t=(e=this.props).suppressInput)!=null&&t.call(e))},children:()=>d(NW,{predicate:()=>!this.getIsDisabled(),children:()=>{var e;return d(Kse,{class:()=>({"dcg-label-input":!0,"dcg-readonly":this.getIsReadonly(),"dcg-disabled-editable-input":this.hasEditableLabel()}),disabled:this.bindFn(this.getIsReadonly),"aria-label":()=>this.controller.s("graphing-calculator-narration-label-text"),manageFocus:(e=this.props.manageInputFocus)!=null?e:()=>{},didMount:t=>{var o,i;this.inputNode=t,(i=(o=this.props).selectInputOnMount)!=null&&i.call(o)&&t.select()},"aria-disabled":()=>this.getIsDisabled()||this.hasEditableLabel()||this.getIsReadonly(),value:this.bindFn(this.getLabel),onInput:this.bindFn(this.onLabelInput)})}})}),true:()=>Wse(()=>{var e,t;return(t=(e=this.props).displayComputedValue)==null?void 0:t.call(e)},e=>d("div",{class:u("dcg-computed-label-value"),children:d(St,{latex:e,config:()=>this.controller.getMathquillConfig({})})}))})})]})}getEditableLabelOptions(){return[{key:"math",label:()=>this.controller.s("graphing-calculator-button-editable-math"),selected:()=>this.model().editableLabelMode===__dcg_shared_module_exports__['me'].Math,onSelect:()=>this.setEditableLabelMode(__dcg_shared_module_exports__['me'].Math)},{key:"text",label:()=>this.controller.s("graphing-calculator-button-editable-text"),selected:()=>this.model().editableLabelMode===__dcg_shared_module_exports__['me'].Text,onSelect:()=>this.setEditableLabelMode(__dcg_shared_module_exports__['me'].Text)}]}setEditableLabelMode(e){this.controller.dispatch({type:"set-item-editable-label-mode",id:this.id(),editableLabelMode:e})}getIsReadonly(){return this.controller.isItemReadonly(this.model().id)}model(){return this.props.model()}id(){return this.model().id}getLabel(){return this.model().label||""}hasEditableLabel(){return Im(this.model())}getShowLabel(){var e,t;return Tn(this.model())&&!((t=(e=this.props).displayComputedValue)!=null&&t.call(e))}getIsDisabled(){var e,t;return(t=(e=this.props).forceEnabled)!=null&&t.call(e)||document.activeElement===this.inputNode?!1:this.getLabel().length===0&&!this.getShowLabel()}onLabelInput(e){let t=e;this.controller.dispatch({type:"set-item-label",id:this.id(),label:t}),this.controller.dispatch({type:"set-item-showlabel",id:this.id(),showLabel:!!t})}onCheckboxInput(){this.controller.dispatch({type:"set-item-showlabel",id:this.id(),showLabel:!this.getShowLabel()})}};ce();ie();var gE=__dcg_shared_module_exports__['e'](se());ce();ie();var qW=__dcg_shared_module_exports__['e'](se());sl();ce();ie();var VW=__dcg_shared_module_exports__['e'](se());var np=class extends VW.View{constructor(){super(...arguments),this.controller=this.props.controller()}init(){this.controller=this.props.controller()}template(){return d("div",{class:u("dcg-add-inference-wizard--create-button-wrapper"),children:d("button",{onTap:this.props.onCreate,class:()=>({"dcg-disabled":this.props.disabled(),"dcg-btn-blue":!0}),disabled:()=>this.props.disabled()?!0:void 0,manageFocus:this.const(_e({controller:this.controller,location:{type:"add-inference-wizard",subtype:"create-button"}})),children:this.props.buttonLabel})})}};ce();ie();var BW=__dcg_shared_module_exports__['e'](se());sl();var ap=class extends BW.View{constructor(){super(...arguments),this.controller=this.props.controller()}template(){return _("header",{class:u("dcg-add-inference-wizard__header"),children:[d("button",{"aria-label":()=>this.controller.s("shared-button-back"),onTap:()=>this.goBackToChooseScreen(),manageFocus:this.const(_e({controller:this.controller,location:{type:"add-inference-wizard",subtype:"back-button"}})),class:u("dcg-unstyled-button dcg-add-inference-wizard__back-link"),children:d("i",{class:u("dcg-icon dcg-icon-chevron-left"),"aria-hidden":u("true")})}),d("h2",{children:d(Ir,{content:this.bindFn(this.getTitle),controller:this.props.controller})}),d(Xt,{when:this.bindFn(this.showDataStatsToggle),children:_(tr,{children:[d("button",{class:()=>({"dcg-unstyled-button":!0,"dcg-add-inference-wizard__sample-type-selector":!0,"dcg-selected":this.getSampleType()==="data"}),onTap:e=>this.setSampleType("data",e.device),children:()=>this.controller.s("graphing-calculator-label-inference-wizard-data")}),d("button",{class:()=>({"dcg-unstyled-button":!0,"dcg-add-inference-wizard__sample-type-selector":!0,"dcg-selected":this.getSampleType()==="stats"}),onTap:e=>this.setSampleType("stats",e.device),children:()=>this.controller.s("graphing-calculator-label-inference-wizard-stats")})]})})]})}showDataStatsToggle(){let e=this.controller.wizardModel.getScreen();return e==="t-test"||e==="z-test"}getSampleType(){return this.controller.wizardModel.getSampleType()}setSampleType(e,t){this.controller.dispatch({type:"set-inference-wizard-sample-type",sampleType:e,focusFirstInput:t!=="keyboard"})}getTitle(){switch(this.controller.wizardModel.getScreen()){case"start-screen":return"";case"distribution":return this.controller.s("graphing-calculator-heading-inference-add-distribution");case"chi-square-gof":return this.controller.s("graphing-calculator-heading-inference-chi-square-gof",{chiSquare:"`\\chi^2`"});case"chi-square-test-of-independence":return this.controller.s("graphing-calculator-heading-inference-chi-square-test-of-independence",{chiSquare:"`\\chi^2`"});case"t-test":return this.controller.s("graphing-calculator-heading-inference-t-test");case"z-test":return this.controller.s("graphing-calculator-heading-inference-z-test");case"z-prop-test":return this.controller.s("graphing-calculator-heading-inference-z-prop-test")}}goBackToChooseScreen(){this.controller.dispatch({type:"set-inference-wizard-screen",screen:"start-screen",focusFirstInput:!0})}};ce();ie();var dE=__dcg_shared_module_exports__['e'](se());sl();var{For:UW}=dE.Components,zW=r=>r?r.indexOf(",")>=0?[r]:r.split("\\ ").filter(e=>!!e):[],Hu=class extends dE.View{init(){this.controller=this.props.controller()}template(){return _(tr,{children:[_("table",{class:u("dcg-add-inference-wizard__table"),children:[d("tr",{children:d(UW.Count,{count:()=>this.props.columns().length,children:e=>d("th",{style:()=>({width:this.getColumnWidth(e)}),class:()=>({"dcg-left-align-contents":this.getColumnLeftAligned(e)}),children:()=>this.getColumnHeader(e)})})}),d("tr",{children:d(UW.Count,{count:()=>this.props.columns().length,children:e=>d("td",{class:()=>({"dcg-invalid":this.getColumnError(e),"dcg-left-align-contents":this.getColumnLeftAligned(e)}),children:d(ir,{latex:()=>this.getColumnLatex(e),placeholder:()=>this.getColumnPlaceholder(e),ariaLabel:()=>this.getColumnHeader(e),selectOnFocus:()=>!this.props.columns()[e].isListInput,...Wr(this.controller),noFadeout:this.const(!0),hasError:()=>this.getColumnError(e),getAriaPostLabel:()=>this.getColumnError(e)?this.controller.s("shared-calculator-narration-math-input-error-message"):"",onUserChangedLatex:t=>this.props.onLatexUpdate(e,t),...rp({controller:this.controller,location:()=>this.getColumnFocusLocation(e)}),onUserPressedKey:(t,o)=>{if(t==="Enter")this.onEnter();else{let i=qe.getFocusedMathquill();if(!i)return;i.keystroke(t,o),this.props.onLatexUpdate(e,i.latex())}}})})})})]}),d(Xt,{when:this.bindFn(this.shouldShowCommaWarning),children:_("div",{class:u("dcg-add-inference-wizard__comma-warning"),children:[()=>this.controller.s("graphing-calculator-text-comma-separated-note"),d("button",{class:u("dcg-btn-light-gray"),onTap:this.bindFn(this.convertToCommaSeparatedList),children:()=>this.controller.s("graphing-calculator-text-comma-separated-link")})]})})]})}onEnter(){this.shouldShowCommaWarning()?this.convertToCommaSeparatedList():this.props.onEnter()}convertToCommaSeparatedList(){let e=this.props.columns()[0];if(!(e!=null&&e.isListInput))return;let t=zW(e.latex).join(",");this.props.onLatexUpdate(0,t),this.controller.dispatch({type:"set-focus-location",location:e.focusLocation})}shouldShowCommaWarning(){let e=this.props.columns()[0];return(e==null?void 0:e.isListInput)&&zW(e.latex).length>1}getColumnWidth(e){var o;let t=this.props.columns()[e];return(o=t==null?void 0:t.cssWidth)!=null?o:"auto"}getColumnLeftAligned(e){let t=this.props.columns()[e];return!!(t!=null&&t.isListInput)}getColumnHeader(e){var o;let t=this.props.columns()[e];return(o=t==null?void 0:t.header)!=null?o:""}getColumnError(e){let t=this.props.columns()[e];return!!(t!=null&&t.error)}getColumnLatex(e){var o;let t=this.props.columns()[e];return(o=t==null?void 0:t.latex)!=null?o:""}getColumnPlaceholder(e){var o;let t=this.props.columns()[e];return(o=t==null?void 0:t.placeholder)!=null?o:""}getColumnFocusLocation(e){var t;return(t=this.props.columns()[e])==null?void 0:t.focusLocation}};var AO={list:"graphing-calculator-label-inference-list","sample-size":"graphing-calculator-label-inference-sample-size",mean:"graphing-calculator-label-inference-mean",stdev:"graphing-calculator-label-inference-stdev",successes:"graphing-calculator-label-inference-successes",stdevp:"graphing-calculator-label-inference-pop-stdev","regression-parameter":"graphing-calculator-label-inference-regression-parameter"},pE=class extends qW.View{constructor(){super(...arguments),this.controller=this.props.controller()}init(){this.controller=this.props.controller()}getSampleCount(){return this.showTwoSamples()?2:1}hasInvalidProp(){let e=this.controller.wizardModel.getRequiredSampleProps(),t=this.controller.wizardModel.hasNonEmptyPropInSecondList();return!!(e.find(o=>!this.propIsValid(o,0))||this.getSampleCount()===2&&t&&e.find(o=>!this.propIsValid(o,1)))}propIsValid(e,t){return e==="list"?this.controller.wizardModel.validateSampleProp(t,e)==="valid"||this.controller.wizardModel.validateSampleProp(t,"listWrapped")==="valid":this.controller.wizardModel.validateSampleProp(t,e)==="valid"}propHasHardError(e,t){return e==="list"?this.controller.wizardModel.validateSampleProp(t,e)==="hard-error"&&this.controller.wizardModel.validateSampleProp(t,"listWrapped")==="hard-error":this.controller.wizardModel.validateSampleProp(t,e)==="hard-error"}template(){return _(tr,{children:[d(ap,{controller:this.props.controller}),_("div",{class:u("dcg-add-inference-wizard--body"),children:[_("div",{class:u("dcg-add-inference-wizard--sample-description"),children:[d("h3",{children:()=>this.controller.s("graphing-calculator-label-inference-wizard-sample-label",{index:1})}),d(Hu,{controller:this.props.controller,columns:()=>this.generateWizardTableInputColumns(0),onEnter:this.bindFn(this.doAddInference),onLatexUpdate:(e,t)=>this.onLatexUpdate({columnIndex:e,latex:t,sampleIndex:0})})]}),d(Xt,{when:this.bindFn(this.canHaveTwoSamples),children:_("div",{class:u("dcg-add-inference-wizard--sample-description"),children:[_("h3",{tabIndex:u("0"),role:u("button"),onTap:this.bindFn(this.toggleSecondSample),class:u("dcg-add-inference-wizard--expandable-title"),manageFocus:this.const(_e({controller:this.props.controller(),location:{type:"add-inference-wizard",subtype:"second-sample-toggle"}})),children:[d("i",{class:()=>({"dcg-icon-plus":this.getSampleCount()===1,"dcg-icon-minus":this.getSampleCount()===2})}),()=>this.controller.s("graphing-calculator-label-inference-wizard-sample-label",{index:2}),d("span",{class:u("dcg-add-inference-wizard--optional-text"),children:()=>this.controller.s("graphing-calculator-label-optional")})]}),d(Xt,{when:()=>this.getSampleCount()===2,children:d(Hu,{controller:this.props.controller,columns:()=>this.generateWizardTableInputColumns(1),onEnter:this.bindFn(this.doAddInference),onLatexUpdate:(e,t)=>this.onLatexUpdate({columnIndex:e,latex:t,sampleIndex:1})})})]})})]}),d(np,{controller:this.props.controller,disabled:()=>this.hasInvalidProp(),onCreate:()=>this.doAddInference(),buttonLabel:()=>this.controller.s("graphing-calculator-narration-inference-wizard-create-inference")})]})}getSamplePropForColumnIndex(e){return this.controller.wizardModel.getRequiredSampleProps()[e]}onLatexUpdate(e){let{columnIndex:t,latex:o,sampleIndex:i}=e,n=this.getSamplePropForColumnIndex(t);return this.controller.dispatch({type:"set-inference-wizard-sample-data",sampleIndex:i,sampleProp:n,latex:o})}showTwoSamples(){return!!this.controller.wizardModel.shouldShowTwoSamples()}canHaveTwoSamples(){switch(this.controller.wizardModel.getScreen()){case"distribution":case"chi-square-gof":case"chi-square-test-of-independence":case"start-screen":return!1;case"t-test":case"z-test":case"z-prop-test":return!0}}toggleSecondSample(e){let t=!this.showTwoSamples(),o=e.device!=="keyboard"&&t;this.controller.dispatch({type:"set-inference-wizard-two-sample",twoSample:t,focusFirstInput:o})}doAddInference(){if(!this.hasInvalidProp())return this.controller.dispatch({type:"new-inference"})}generateWizardTableInputColumns(e){let t=this.controller.wizardModel.getSampleValues(e),o=this.controller.wizardModel.getRequiredSampleProps();return o.map(i=>{var s;let n=(s=t[i])!=null?s:"";return{header:this.controller.s(AO[i]),isListInput:i==="list",latex:n,focusLocation:{type:"add-inference-wizard",subtype:"sample-prop-input",sampleIndex:e,sampleProp:i},error:this.propHasHardError(i,e),cssWidth:i==="list"&&o.length===2?"66.7%":`${100/o.length}%`}})}};var{If:$se,SwitchUnion:jse,For:HW}=gE.Components,uE=class extends gE.View{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.parameterSuggestions=new Zm(this.controller,this.model),this.id=this.model.id}template(){return jse(()=>this.parameterSuggestions.getSuggestionType(),{list:()=>d("div",{class:()=>({"dcg-parameter-suggestion-container":!0,"dcg-parameter-suggestion-braille":this.controller.getBrailleMode()!=="none"}),children:d(HW.Count,{count:()=>this.getListOfParameters().length,children:e=>d("span",{class:u("dcg-parameter-name"),children:()=>this.getParamName(e)})})}),listWithDefault:()=>d("div",{class:()=>({"dcg-parameter-suggestion-container":!0,"dcg-parameter-suggestion-braille":this.controller.getBrailleMode()!=="none"}),onTap:this.bindFn(this.fillInDefaults),children:d(HW.Count,{count:()=>this.getListOfParameters().length,children:e=>_("span",{class:u("dcg-parameter-name"),children:[()=>this.getParamName(e),d($se,{predicate:()=>this.parameterSuggestions.shouldShowDefaultValue(this.getListOfParameters()[e]),children:()=>_("span",{class:u("dcg-default-marker"),children:["="," ",()=>this.parameterSuggestions.getDefaultValue(this.getListOfParameters()[e])]})})]})})}),individual:()=>d("div",{class:()=>({"dcg-parameter-suggestion-container":!0,"dcg-parameter-suggestion-braille":this.controller.getBrailleMode()!=="none"}),children:this.bindFn(this.getMissingRequiredParamText)}),none:()=>{}})}fillInDefaults(){let e=this.parameterSuggestions.getSpec();if(!e)return;let{symbol:t,span:o}=e,{input:i,start:n,end:a}=o,s=this.parameterSuggestions.getExtractedAndDefaultArgString(e),l=`\\operatorname{${t}}\\left(${s}\\right)`,c=`${i.slice(0,n)}${l}${i.slice(a)}`;this.controller.dispatch({type:"set-item-latex",id:this.id,latex:c}),this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.id}}),this.controller.dispatch({type:"keypad/press-key",key:"Left"})}getMissingRequiredParamText(){let e=this.parameterSuggestions.missingSingleRequiredParam();return e?this.controller.s("graphing-calculator-text-enter-parameter",{param:this.controller.s(hE(e))}):""}getParamName(e){return this.controller.s(hE(this.getListOfParameters()[e]))}getListOfParameters(){return this.parameterSuggestions.getListOfParameters()}},hE=r=>{switch(r){case"mean":return"graphing-calculator-text-parameter-name-mean";case"stdev":return"graphing-calculator-text-parameter-name-stdev";case"dof":return"graphing-calculator-text-parameter-name-dof";case"probsuccess":return"graphing-calculator-text-parameter-name-probsuccess";case"trials":return"graphing-calculator-text-parameter-name-trials";case"data":return"graphing-calculator-text-parameter-name-data";case"binwidth":return"graphing-calculator-text-parameter-name-binwidth";case"min":return"graphing-calculator-text-parameter-name-min";case"max":return"graphing-calculator-text-parameter-name-max";case"height":return"graphing-calculator-text-parameter-name-height";case"offset":return"graphing-calculator-text-parameter-name-offset";case"shift":return"graphing-calculator-text-parameter-name-shift";case"scale":return"graphing-calculator-text-parameter-name-scale";case"sample-size":case"list":case"stdevp":case"successes":case"regression-parameter":return AO[r];default:return r}};ce();ie();var KW=__dcg_shared_module_exports__['e'](se());var Dx=class extends KW.View{constructor(){super(...arguments),this.controller=this.props.controller(),this.id=this.props.id()}template(){return _("div",{class:u("dcg-prompt-rename"),handleEvent:u("true"),children:[()=>ko("graphing-calculator-label-rename"),d("span",{class:u("dcg-btn-light-gray"),onTap:this.bindFn(this.handleRename),tabIndex:u(0),role:u("button"),children:d(St,{latex:()=>`${this.getRenameIdentifierFrom()} \\to ${this.getRenameIdentifierTo()}`,config:this.const({}),children:d("span",{style:u("pointer-events:none")})})}),d("span",{class:u("dcg-reference-count"),children:()=>ko(this.getRenameIdentifierFolderId()!==void 0?"graphing-calculator-label-reference-count-in-folder":"graphing-calculator-label-reference-count",{count:__dcg_shared_module_exports__['pa'](this.getRenameCountOfChanges())})})]})}getRenameIdentifierFrom(){let e=this.controller.getSuggestedIdentifierRenameInfo(this.id);return e&&e.from||""}getRenameIdentifierTo(){let e=this.controller.getSuggestedIdentifierRenameInfo(this.id);return e&&e.to||""}getRenameCountOfChanges(){let e=this.controller.getSuggestedIdentifierRenameInfo(this.id);return e&&e.countOfChanges||0}getRenameIdentifierFolderId(){let e=this.controller.getSuggestedIdentifierRenameInfo(this.id);return e==null?void 0:e.folderId}handleRename(){let e={search:this.getRenameIdentifierFrom(),replace:this.getRenameIdentifierTo()},t=this.getRenameIdentifierFolderId();t===void 0?this.controller.dispatch({type:"rename-identifier-global",...e}):this.controller.dispatch({type:"rename-identifier-in-item",id:t,...e})}};ce();ie();var Ku=__dcg_shared_module_exports__['e'](se());ce();ie();var fE=__dcg_shared_module_exports__['e'](se());var{If:Yse}=fE.Components,mE=class extends fE.View{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return d(Yse,{predicate:()=>this.controller.showResidualsZoomFitButton(this.model),children:()=>d("div",{class:u("dcg-residuals-zoom-view dcg-do-blur"),handleEvent:u(!0),children:d(Re,{tooltip:this.bindFn(this.getZoomText),gravity:()=>"e",children:d("i",{onTap:this.bindFn(this.onZoom),role:u("button"),tabIndex:u("0"),"aria-label":this.bindFn(this.getZoomText),class:u("dcg-icon-zoom-fit"),manageFocus:this.const(_e({controller:this.controller,location:{type:"regression-output",id:this.props.model().id,parameter:"residual-zoom"}}))})})})})}getZoomText(){return this.controller.s("graphing-calculator-text-zoom-fit")}onZoom(e){this.controller.dispatch({type:"expression-zoom-fit-residuals",id:this.model.id,focusAfterTap:e.device==="keyboard"})}};var{If:sp,For:WW,IfElse:Xse}=Ku.Components,bE=class extends Ku.View{template(){return _("div",{class:u("dcg-parameter-warning dcg-text-selectable"),role:u("note"),children:[d("i",{class:u("dcg-icon-error"),"aria-hidden":u("true")}),"\xA0",()=>this.props.controller().s("graphing-calculator-text-regression-potentially-inaccurate-parameters"),"\xA0",d("a",{href:u("https://help.desmos.com/hc/en-us/articles/360042942771"),target:u("_blank"),children:()=>this.props.controller().s("graphing-calculator-link-learn-more")})]})}},rf=class extends Ku.View{template(){return d(Re,{tooltip:this.props.tooltip,gravity:this.const("s"),children:d("a",{class:u("dcg-expression-footer-title-help"),target:u("_blank"),href:this.props.helpURL,"aria-label":this.props.tooltip,children:d("i",{class:u("dcg-icon-question-sign"),"aria-hidden":u("true")})})})}},of=class extends Ku.View{template(){return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,d("div",{class:u("dcg-regression-footer-view"),children:_("div",{class:u("dcg-handle-event"),handleEvent:u("true"),children:[d(sp,{predicate:()=>{var e,t;return this.hasParameterWarning()&&!!((t=(e=this.props).hideParameters)!=null&&t.call(e))},children:()=>d(bE,{...this.props})}),d(sp,{predicate:this.bindFn(this.getShouldSuggestLogMode),children:()=>d("div",{class:u("dcg-log-mode-toggle"),children:Xse(()=>this.areLogModeRegressionsForced(),{true:()=>d("div",{class:u("dcg-action-log-mode-toggle dcg-no-hover-styling dcg-action-log-mode--forced"),children:()=>this.controller.s("graphing-calculator-button-regression-log-mode")}),false:()=>_(tr,{children:[d(tt,{class:this.const("dcg-action-log-mode-toggle dcg-log-mode-checkbox"),onChange:this.bindFn(this.onTapLogMode),checked:()=>this.getIsLogModeRegression(),children:()=>this.controller.s("graphing-calculator-button-regression-log-mode")}),d(rf,{helpURL:this.const("https://help.desmos.com/hc/en-us/articles/204349605"),tooltip:()=>this.controller.s("graphing-calculator-label-regression-log-mode-help-tooltip")})]})})})}),d(sp,{predicate:()=>this.shouldShowParameters()&&Object.keys(this.getRegression().parameters).length>0,children:()=>d(LO,{controller:this.props.controller,id:this.const(this.id),regression:()=>this.getRegression()})}),_("div",{class:u("dcg-statistics"),role:u("region"),"aria-label":()=>this.controller.s("graphing-calculator-heading-regression-statistics"),children:[_("div",{class:u("dcg-expression-footer-title"),children:[()=>this.controller.s("graphing-calculator-heading-regression-statistics"),d(sp,{predicate:this.bindFn(this.showRMSENotice),children:()=>d(rf,{helpURL:this.const("https://help.desmos.com/hc/en-us/articles/202529129-What-is-RMSE-"),tooltip:()=>this.controller.s("graphing-calculator-label-regression-what-is-rmse-tooltip")})}),d(sp,{predicate:this.bindFn(this.showNegativeRSquaredWarning),children:()=>d(rf,{helpURL:this.const("https://help.desmos.com/hc/en-us/articles/202529139-Why-am-I-seeing-a-negative-R-2-value-"),tooltip:()=>this.controller.s("graphing-calculator-label-regression-why-is-negative-tooltip")})})]}),d("div",{class:u("dcg-statistics-values"),children:d(WW,{each:this.bindFn(this.getStatisticsSections),children:e=>{let t=e(),o=t.value;return o===void 0?d("div",{children:d(Ir,{controller:this.props.controller,content:()=>this.controller.s("graphing-calculator-text-undefined-parameter",{parameter:"`"+t.type+"`"})})}):d("div",{class:()=>({"dcg-indented-r-value":t.type==="r"}),children:d(Xo,{latex:()=>`\\operatorname{${t.type}}=`+xO(o),ariaLabel:this.const(""),tabbable:this.const(!0),focusLocation:this.const({type:"regression-output",id:this.id,parameter:t.type}),controller:this.props.controller})})}},e=>e.type+":"+e.value)})]}),_("div",{role:u("region"),"aria-label":()=>this.controller.s("graphing-calculator-heading-regression-residuals"),class:u("dcg-residuals"),children:[d("div",{class:u("dcg-expression-footer-title"),children:()=>this.controller.s("graphing-calculator-heading-regression-residuals")}),d(Xo,{latex:this.bindFn(this.getResidualVariable),ariaLabel:this.const(""),tabbable:this.const(!0),focusLocation:this.const({type:"regression-output",id:this.id,parameter:this.getResidualVariable()}),controller:this.props.controller}),d(sp,{predicate:this.bindFn(this.getResidualSuggestionVisible),children:()=>d("button",{class:u("dcg-residual-suggestion dcg-action-plot-residual dcg-btn dcg-btn-light-gray"),role:u("button"),onTap:this.bindFn(this.onTapResidualsSuggestion),manageFocus:this.const(_e({controller:this.controller,location:{type:"regression-plot-residuals-button",id:this.model.id}})),children:()=>this.controller.s("graphing-calculator-button-regression-plot-residuals")})}),d(mE,{model:this.props.model,controller:this.props.controller})]}),d("div",{class:u("dcg-clear")}),d(sp,{predicate:()=>{var e,t;return this.hasParameterWarning()&&!((t=(e=this.props).hideParameters)!=null&&t.call(e))},children:()=>d(bE,{...this.props})})]})})}showNegativeRSquaredWarning(){return this.getStatisticsSections().some(t=>t.type==="R^2"&&t.value!==void 0&&t.value<0)}showRMSENotice(){return this.getStatisticsSections().some(t=>t.type==="RMSE")}getStatisticsSections(){var o,i,n,a,s,l;let e=[],t=this.getRegression().statistics;return t.RMSE!==void 0&&((i=(o=this.props).suppressRMSE)!=null&&i.call(o)?e.push({type:"R^2",value:void 0}):e.push({type:"RMSE",value:t.RMSE})),t.Rsquared!==void 0&&e.push({type:"R^2",value:t.Rsquared}),t.rsquared!==void 0&&e.push({type:"R^2",value:t.rsquared}),t.r!==void 0&&((a=(n=this.props).showRValue)==null?void 0:a.call(n))!=="never"?e.push({type:"r",value:t.r}):((l=(s=this.props).showRValue)==null?void 0:l.call(s))==="always"&&e.push({type:"r",value:void 0}),e}shouldShowParameters(){return!this.props.hideParameters||!this.props.hideParameters()}onTapResidualsSuggestion(){this.controller.dispatch({type:"plot-residuals",id:this.id})}onTapLogMode(){this.controller.dispatch({type:"toggle-logmode",id:this.id})}getRegression(){return this.props.regression()}getResidualVariable(){return this.getRegression().residualVariable||""}getResidualSuggestionVisible(){return this.getRegression().residualSuggestionId!==void 0}areLogModeRegressionsForced(){return this.controller.areLogModeRegressionsForced()}getShouldSuggestLogMode(){var e,t;return(t=(e=this.props).suppressLogModeCheckbox)!=null&&t.call(e)?!1:!!this.getRegression().shouldSuggestLogMode}hasParameterWarning(){return!!this.getRegression().parameterWarning}getIsLogModeRegression(){var e;return this.model.type==="expression"?!!this.model.isLogModeRegression:!!((e=this.model.regression)!=null&&e.isLogMode)}},LO=class extends Ku.View{init(){this.controller=this.props.controller(),this.id=this.props.id()}template(){return _("div",{class:u("dcg-parameters-container"),children:[_("div",{class:u("dcg-expression-footer-title"),children:[()=>this.controller.s("graphing-calculator-heading-regression-parameters"),d(sp,{predicate:()=>!this.props.regression().isLinear,children:()=>d(rf,{helpURL:this.const("https://help.desmos.com/hc/en-us/articles/360042428612"),tooltip:()=>this.controller.s("graphing-calculator-label-regression-parameters-not-exact")})})]}),d("div",{role:u("region"),"aria-label":()=>this.controller.s("graphing-calculator-heading-regression-parameters"),class:u("dcg-parameters"),children:d(WW.Simple,{each:()=>Object.keys(this.props.regression().parameters),children:e=>d(Xo,{latex:()=>this.getParameterEquationLatex(e),ariaLabel:this.const(""),tabbable:this.const(!0),focusLocation:this.const({type:"regression-output",id:this.id,parameter:e}),controller:this.props.controller})})})]})}getParameterEquationLatex(e){return e+"="+bO(this.props.regression(),e)}};ce();ie();var Fx=__dcg_shared_module_exports__['e'](se());ce();ie();var xE=__dcg_shared_module_exports__['e'](se());du();Vt();__dcg_shared_module_exports__['H']();Vt();var Jse=0,Zse=`guid_${Math.round(Math.random()*1e6)}_${new Date().getTime()}_`;function PO(r,e,t){var o;(o=r[e])==null||o.forEach(i=>i.callback(e,t))}function DO(r,e){e.split(" ").forEach(t=>{var n,a;let[o,i]=t.split(".");if(o&&i)r[o]=(n=r[o])==null?void 0:n.filter(s=>s.namespace!==i);else if(o)delete r[o];else if(i)for(let s in r)r[s]=(a=r[s])==null?void 0:a.filter(l=>l.namespace!==i)})}function OO(r,e,t){e.split(" ").forEach(o=>{var s;let[i,n]=o.split("."),a={namespace:n,callback:t};r[i]||(r[i]=[]),(s=r[i])==null||s.push(a)})}var is=class{constructor(){this.__eventObservers={},this.guid=Zse+ ++Jse}triggerEvent(e,t){PO(this.__eventObservers,e,t)}observeEvent(e,t){OO(this.__eventObservers,e,t)}unobserveEvent(e){DO(this.__eventObservers,e)}};var yE=class{constructor(){this._eventBus=new is;this.dragging=!1;this.guid=__dcg_shared_module_exports__['E']("dragdrop-class")}_evt2pt(e){return{x:e.changedTouches[0].pageX-this._offsetPt.x,y:e.changedTouches[0].pageY-this._offsetPt.y}}_dispatch(e,t){if(this._destroyed)return;let o=this._evt2pt(t);this._eventBus.triggerEvent(e,{x:o.x,y:o.y,dx:o.x-this._startPt.x,dy:o.y-this._startPt.y,evt:t})}destroy(){re(document).off(`.${this.guid}`),this._destroyed=!0}startDrag(e,t={}){if(!this.dragging)return re(document).on(`dcg-tapmove.${this.guid}`,o=>{(o.originalEvent||o).preventDefault(),cancelAnimationFrame(this.frameThrottle),this.frameThrottle=requestAnimationFrame(()=>this.doDrag(o))}),re(document).on(`dcg-tapend.${this.guid} dcg-tapcancel.${this.guid}`,o=>this.endDrag(o)),this._offsetPt={x:0,y:0},t.origin&&(this._offsetPt={x:this._evt2pt(e).x-t.origin.x,y:this._evt2pt(e).y-t.origin.y}),this._startPt=this._evt2pt(e),this.dragging=!0,this._dispatch("onGrab",e)}doDrag(e){this.dragging&&this._dispatch("onDrag",e)}endDrag(e){this.dragging&&(re(document).off(`.${this.guid}`),this.doDrag(e),this.dragging=!1,this._dispatch("onDrop",e))}observeEvent(e,t){return this._eventBus.observeEvent(e,t)}};var{If:Qse}=xE.Components,Wu=class extends xE.View{template(){return _("div",{class:()=>({"dcg-slider-interior":!0,"dcg-disable-slider":this.shouldDisableSlider()}),didMount:this.bindFn(this.didMountRoot),onTapStart:this.bindFn(this.onStartDrag),children:[_("div",{class:u("dcg-track"),children:[d("div",{class:u("dcg-ticks"),onMount:this.bindFn(this.didMountTickMarks)}),d("div",{class:u("dcg-graphic")})]}),d(Qse,{predicate:this.bindFn(this.shouldShowZeroMarker),children:()=>d("div",{class:u("dcg-zeroMarker"),style:()=>({left:this.getZeroMarkerPercent()+"%"})})}),_("div",{class:()=>({"dcg-thumb":!0,"dcg-down":this.isDragging}),role:u("slider"),tabIndex:u("0"),disablescroll:u("true"),style:()=>({left:this.getThumbPercent()+"%"}),onKeyDown:this.bindFn(this.onKeyDown),"aria-label":this.props.ariaLabel,"aria-valuemin":()=>{var e,t;return(t=(e=this.props).ariaPercent)!=null&&t.call(e)?0:this.props.min()},"aria-valuemax":()=>{var e,t;return(t=(e=this.props).ariaPercent)!=null&&t.call(e)?100:this.props.max()},"aria-valuenow":()=>{var e,t;return(t=(e=this.props).ariaPercent)!=null&&t.call(e)?void 0:this.props.value()},"aria-valuetext":()=>{var e,t;return(t=(e=this.props).ariaPercent)!=null&&t.call(e)?`${Math.floor(this.getThumbPercent())}%`:void 0},manageFocus:this.buildFocusManager(),children:[d("div",{class:u("dcg-graphic")}),d("div",{class:u("dcg-center")}),d(Xt,{when:()=>{var e,t;return!!((t=(e=this.props).showValue)!=null&&t.call(e))},children:_("div",{class:u("dcg-thumb--value"),children:[" ",d(St,{latex:()=>Jo(this.props.value()),config:this.const({})})]})})]})]})}willUnmount(){this.dragDrop.destroy()}didMountRoot(e){this.rootNode=e,this.dragDrop=new yE,this.isMounted=!0,this.dragDrop.observeEvent("onDrop",()=>{this.isDragging=!1,this.update(),this.props.onDrop&&this.props.onDrop()}),this.dragDrop.observeEvent("onGrab",()=>{this.isDragging=!0,this.update(),this.props.onGrab&&this.props.onGrab()}),this.dragDrop.observeEvent("onDrag",(t,o)=>{this.props.onDragUpdate(this.valueFromPixels(o.x))})}didMountTickMarks(e){this.tickMarksNode=e,this.renderTickMarks()}didUpdate(){this.renderTickMarks()}shouldDisableSlider(){return this.props.min()===this.props.max()}renderTickMarks(){if(!this.tickMarksNode)return;let e=this.props.step(),t=this.props.min(),o=this.props.max(),i;if(e===void 0?i=0:i=100*e/(o-t),i<3&&(i=0),i>100&&(i=0),isNaN(i)&&(i=0),this.lastTickMarksPercent===i)return;this.lastTickMarksPercent=i;let n="";if(i>0&&i<100)for(let a=i;a<100;a+=i)n+='<div class="dcg-tick" style="left:'+a+'%"></div>';this.tickMarksNode.innerHTML=n}shouldShowZeroMarker(){return this.props.min()<=0&&this.props.max()>=0}getZeroMarkerPercent(){let e=this.props.min(),t=this.props.max();return 100*(0-e)/(t-e)}getThumbPercent(){return Math.round(1e4*this.percentFromValue(this.props.value()))/100}valueFromPixels(e){if(!this.isMounted)return 0;let t=this.props.min(),o=this.props.max(),i=this.rootNode.getBoundingClientRect().width,n=__dcg_shared_module_exports__['Ob'](e/i,0,1),a=t+(o-t)*n,s=(o-t)/i;return Br(a-s,a+s)}percentFromValue(e){let t=this.props.min(),o=this.props.max();return __dcg_shared_module_exports__['Ob']((e-t)/(o-t),0,1)}pixelsFromValue(e){if(!this.isMounted)return 0;let t=this.percentFromValue(e);return this.rootNode.getBoundingClientRect().width*t}onKeyDown(e){switch(Pe(e)){case en:this.props.onUpPress&&(this.props.onUpPress(),e.preventDefault(),e.stopPropagation());break;case wi:this.props.onDownPress&&(this.props.onDownPress(),e.preventDefault(),e.stopPropagation());break;case ll:this.props.onEnterPress&&(this.props.onEnterPress(),e.preventDefault(),e.stopPropagation());break;case ri:document.activeElement&&re(document.activeElement).trigger("blur");break;case va:this.props.onKeyboardUpdate("down"),e.preventDefault(),e.stopPropagation();break;case wa:this.props.onKeyboardUpdate("up"),e.preventDefault(),e.stopPropagation();break;case xc:this.props.onKeyboardUpdate("bigdown"),e.preventDefault(),e.stopPropagation();break;case yc:this.props.onKeyboardUpdate("bigup"),e.preventDefault(),e.stopPropagation();break;case Td:this.props.onKeyboardUpdate("min"),e.preventDefault(),e.stopPropagation();break;case cl:this.props.onKeyboardUpdate("max"),e.preventDefault(),e.stopPropagation();break}}onStartDrag(e){if(e.device==="keyboard"||!e.target)return;e.preventDefault(),Rr();let t={x:0,y:0};e.target.closest(".dcg-thumb")?t.x=this.pixelsFromValue(this.props.value()):t.x=e.changedTouches[0].clientX-this.rootNode.getBoundingClientRect().left,this.dragDrop.startDrag(e,{origin:t})}buildFocusManager(){return!this.props.onFocusedChanged||!this.props.isFocused?this.const(void 0):this.const({shouldBeFocused:this.props.isFocused,onFocusedChanged:this.props.onFocusedChanged})}};ce();ie();var vE=__dcg_shared_module_exports__['e'](se());var{If:ele}=vE.Components,Ox=class extends vE.View{init(){this.controller=this.props.controller(),this.model=this.controller.getModel()}template(){return d("div",{class:u("dcg-slider_menu dcg-do-blur"),handleEvent:u("true"),didMount:e=>this.node=e,children:_("div",{class:u("dcg-editable-mathquill-container"),children:[d(ele,{predicate:()=>!this.shouldOnlyShowStep(),children:()=>_("span",{children:[d(Ut,{readonly:()=>this.controller.isItemReadonly(),latex:()=>this.model.slider.hardMin?this.model.slider.min:"",isFocused:()=>this.getFocusedInput()==="min",ariaLabel:()=>this.controller.s("graphing-calculator-narration-slider-minimum"),brailleLabel:()=>this.controller.raw("sldrmin"),handleFocusChanged:(e,t)=>this.handleFocusedChanged("min",e,t),hasError:()=>!fT(this.model),controller:this.props.controller,handlePressedKey:(e,t)=>this.handlePressedKey("min",e,t),handleLatexChanged:e=>this.handleLatexChanged("min",e),dataLabelAttributeValue:this.const("slidermin")}),d("span",{class:u("dcg-interval-interior"),children:d(St,{latex:this.bindFn(this.getDependentLatex),config:this.const({}),children:d("span",{})})}),d(Ut,{readonly:()=>this.controller.isItemReadonly(),latex:()=>this.model.slider.hardMax?this.model.slider.max:"",isFocused:()=>this.getFocusedInput()==="max",ariaLabel:()=>this.controller.s("graphing-calculator-narration-slider-maximum"),brailleLabel:()=>this.controller.raw("sldrmax"),handleFocusChanged:(e,t)=>this.handleFocusedChanged("max",e,t),hasError:()=>!bT(this.model),controller:this.props.controller,handlePressedKey:(e,t)=>this.handlePressedKey("max",e,t),handleLatexChanged:e=>this.handleLatexChanged("max",e),dataLabelAttributeValue:this.const("slidermax")})]})}),_("span",{class:()=>({"dcg-slider-step-container":!this.shouldOnlyShowStep()}),children:[d("span",{class:u("dcg-slider-step-label"),"aria-hidden":u("true"),children:()=>this.controller.s("graphing-calculator-label-slider-step")}),d(Ut,{readonly:()=>this.controller.isItemReadonly(),latex:()=>this.model.slider.step,isFocused:()=>this.getFocusedInput()==="step",ariaLabel:()=>this.controller.s("graphing-calculator-narration-slider-step"),brailleLabel:()=>this.controller.raw("sldrstep"),handleFocusChanged:(e,t)=>this.handleFocusedChanged("step",e,t),hasError:()=>!yT(this.model),controller:this.props.controller,handlePressedKey:(e,t)=>this.handlePressedKey("step",e,t),handleLatexChanged:e=>this.handleLatexChanged("step",e),dataLabelAttributeValue:this.const("sliderstep")})]})]})})}handlePressedKey(e,t,o){if(this.controller.canShowSliderThumb()&&!this.shouldOnlyShowStep()&&(t==="Esc"||t==="Enter")){this.controller.dispatchSetFocusLocation({type:"slider-thumb"});return}let i=qe.getFocusedMathquill(),n=Qn();if(t==="Left"||t==="Right"||t==="Down"||t==="Up"){let a;i?a=qe.applyArrowKeyAndReturnIfWasAtBounds(i,t,o):n&&(n.selectionStart===0&&t==="Left"||n.selectionStart===n.value.length&&t==="Right"||t==="Up"||t==="Down")?a=!0:a=!1,a&&(o&&o.preventDefault(),t==="Left"&&!this.shouldOnlyShowStep()?e==="max"?this.controller.dispatchSetFocusLocation({type:"slider-limit",location:"min"}):e==="step"&&this.controller.dispatchSetFocusLocation({type:"slider-limit",location:"max"}):t==="Right"&&!this.shouldOnlyShowStep()?e==="min"?this.controller.dispatchSetFocusLocation({type:"slider-limit",location:"max"}):e==="max"&&this.controller.dispatchSetFocusLocation({type:"slider-limit",location:"step"}):t==="Down"?this.controller.dispatchSpecialKeyPressed("Down"):t==="Up"&&this.controller.dispatchSpecialKeyPressed("Up"));return}i&&(i.keystroke(t,o),this.handleLatexChanged(e,i.latex()))}shouldOnlyShowStep(){return this.model.slider.loopMode===__dcg_shared_module_exports__['Zd'].PLAY_INDEFINITELY}handleLatexChanged(e,t){e==="min"?this.dispatchMinLatexIfChanged(t):e==="max"?this.dispatchMaxLatexIfChanged(t):e==="step"&&this.dispatchStepLatexIfChanged(t)}handleFocusedChanged(e,t,o){t&&this.getFocusedInput()!==e?this.controller.dispatchSetFocusLocation({type:"slider-limit",location:e}):this.getFocusedInput()===e&&this.controller.getBrailleMode()==="none"&&(!o.relatedTarget||!this.node.contains(o.relatedTarget))&&this.controller.dispatchBlurFocusLocation({type:"slider-limit",location:e})}dispatchMinLatexIfChanged(e){this.controller.dispatchSetMinLatexIfChanged(e)}dispatchMaxLatexIfChanged(e){this.controller.dispatchSetMaxLatexIfChanged(e)}dispatchStepLatexIfChanged(e){this.controller.dispatchSetStepLatexIfChanged(e)}getDependentLatex(){let e=wu(this.model)||"";return" \\le "+__dcg_shared_module_exports__['ia'](e)+" \\le "}getFocusedInput(){let e=this.controller.getFocusLocation();if(!(!e||e.type!=="slider-limit"))return e.location}};function Jr(r,e,t){let o=tle(r,e,t);Jt(r,o)}function Jt(r,e){if(r.focusLocation=e,!e||(e.type==="ticker"&&(r.getListModel().ticker.playing=!1,ar(r.getListModel(),void 0)),e.type==="settings"||e.type==="generic-menu"||e.type==="editable-label"||e.type==="add-item-btn"||e.type==="add-expression-btn"||e.type==="add-note-btn"||e.type==="add-table-btn"||e.type==="add-folder-btn"||e.type==="add-ticker-btn"||e.type==="add-inference-btn"||e.type==="add-inference-wizard"||e.type==="add-image-btn"||e.type==="edit-list-toggle"||e.type==="hide-expression-list-btn"||e.type==="show-expression-list-btn"||e.type==="zoom-in-btn"||e.type==="zoom-restore-btn"||e.type==="search-expressions"||e.type==="replace-expressions"||e.type==="ticker"||e.type==="geo-token"||e.type==="geo-show-constructions-icon"||e.type==="geo-basic-tool"||e.type==="geo-basic-tool-menu-item"||e.type==="geo-construct-menu-existing-transformations"||e.type==="multi-select-more-icon"||e.type==="multi-select-construct-icon"||e.type==="multi-select-style-icon"||e.type==="multi-select-label-icon"||e.type==="geo-header-back-link"||e.type==="multi-select-show-hide-icon"||e.type==="new-transformation-number"||e.type==="label-points-icon"||e.type==="graph-paper"||e.type==="quest"||e.type==="global-mute-button"||e.type==="color-picker-option"||e.type==="multi-select-label-menu-label-input"||e.type==="multi-select-options-menu-item"||e.type==="invalid-graph-bounds-cover"||e.type==="reduced-motion-cover"))return;let t=r.getItemModel(e.id);if(e.type==="expression-menu"){ar(r.getListModel(),void 0);return}else ar(r.getListModel(),t);t&&t.type==="expression"&&vn(t,!1)}function tle(r,e,t){let o=r.getItemModel(e);if(!o)return;let i=r.isInEditListMode()||r.isItemReadonly(o.id);switch(o.type){case"expression":return{type:i?"readonly-expression":o.type,id:e};case"folder":case"text":return{type:o.type,id:e};case"table":{let a={row:1,column:0},s=!1;return t&&(typeof t=="object"&&"location"in t&&t.location==="cell"?a={row:t.row,column:t.column}:t==="end"?a={row:Kn(o),column:0}:t==="start"?a={row:0,column:0}:t==="container"&&(s=!0)),s?{type:"table-container",id:e}:{type:o.type,id:e,location:a}}case"image":return{type:o.type,id:e,location:"name"};default:return o}}function $W(r){let e=r.getSelectedItem();if(e&&e.type==="expression"&&!e.readonly){Jr(r,e.id);return}if(e&&e.type==="table"&&r.focusLocation&&!e.readonly)return;let t=r.getFirstFullyVisibleItem(),o=r.getListModel();for(;t&&(t.type!=="expression"||t.readonly);)t=Su(o,t.index);if(t){Jr(r,t.id);return}let i=r.createItemModel({type:"expression",id:r.generateId(),color:r.getNextColor()});ka(r.getListModel(),i),Jr(r,i.id)}function Rx(r){let e=r.focusLocation;if(e&&!(e.type==="settings"||e.type==="generic-menu"||e.type==="editable-label"||e.type==="add-item-btn"||e.type==="add-expression-btn"||e.type==="add-note-btn"||e.type==="add-table-btn"||e.type==="add-ticker-btn"||e.type==="add-folder-btn"||e.type==="add-inference-btn"||e.type==="add-inference-wizard"||e.type==="add-image-btn"||e.type==="edit-list-toggle"||e.type==="hide-expression-list-btn"||e.type==="show-expression-list-btn"||e.type==="zoom-in-btn"||e.type==="zoom-restore-btn"||e.type==="search-expressions"||e.type==="replace-expressions"||e.type==="ticker"||e.type==="geo-token"||e.type==="geo-show-constructions-icon"||e.type==="geo-basic-tool"||e.type==="geo-basic-tool-menu-item"||e.type==="geo-construct-menu-existing-transformations"||e.type==="multi-select-more-icon"||e.type==="multi-select-construct-icon"||e.type==="multi-select-style-icon"||e.type==="multi-select-label-icon"||e.type==="geo-header-back-link"||e.type==="multi-select-show-hide-icon"||e.type==="new-transformation-number"||e.type==="label-points-icon"||e.type==="graph-paper"||e.type==="quest"||e.type==="global-mute-button"||e.type==="color-picker-option"||e.type==="multi-select-label-menu-label-input"||e.type==="multi-select-options-menu-item"||e.type==="invalid-graph-bounds-cover"||e.type==="reduced-motion-cover"))return r.getItemModel(e.id)}var RO=class{canShowSliderThumb(){return this.getViewDeterminedBySliderState()!=="limits"}getViewDeterminedBySliderState(){if(this.isItemReadonly())return"thumb";let e=this.getModel();if(!fT(e)||!bT(e)||!yT(e)||e.slider.loopMode===__dcg_shared_module_exports__['Zd'].PLAY_INDEFINITELY)return"limits"}},wE=class extends RO{constructor(t,o){super();this.model=t;this.controller=o;this.getBrailleMode=this.controller.getBrailleMode.bind(this.controller);this.getSixKeyInput=this.controller.getSixKeyInput.bind(this.controller);this.getCapExpressionSize=this.controller.getCapExpressionSize.bind(this.controller);this.s=this.controller.s.bind(this.controller);this.raw=this.controller.raw.bind(this.controller);this.getTokenController=this.controller.getTokenController.bind(this.controller);this.isKeypadEnabled=this.controller.isKeypadEnabled.bind(this.controller);this.getMathquillConfig=this.controller.getMathquillConfig.bind(this.controller)}getModel(){return this.model}getView(){var i,n;if(this.controller.isInEditListMode())return"limits";let t=this.getViewDeterminedBySliderState();if(t)return t;if(((i=this.getFocusLocation())==null?void 0:i.type)==="slider-limit")return"limits";let o=this.controller.getFocusLocation();return((n=Rx(this.controller))==null?void 0:n.id)===this.model.id&&((o==null?void 0:o.type)==="expression"||(o==null?void 0:o.type)==="top-level-icon"||(o==null?void 0:o.type)==="readonly-expression")?"limits":"thumb"}isItemReadonly(){return this.controller.isItemReadonly(this.model.id)}getFocusLocation(){var o;let t=this.controller.getFocusLocation();if(t&&((o=Rx(this.controller))==null?void 0:o.id)===this.model.id)switch(t.type){case"slider-limit":case"slider-icon":case"slider-thumb":return t;default:t.type;return}}dispatchAdjustSliderByKeyboard(t){this.controller.dispatch({type:"adjust-slider-by-keyboard",id:this.model.id,adjustment:t})}dispatchAdjustSliderByDraggingThumb(t){this.controller.dispatch({type:"adjust-slider-by-dragging-thumb",id:this.model.id,target:t})}dispatchSetIsPlayingIfChanged(t){this.model.slider.isPlaying!==t&&this.controller.dispatch({type:"set-slider-isplaying",id:this.model.id,isPlaying:t})}dispatchSetIsDraggingIfChanged(t){this.model.sliderDragging!==t&&this.controller.dispatch({type:"set-slider-dragging",id:this.model.id,dragging:t})}dispatchSetMinLatexIfChanged(t){this.model.slider.min!==t&&this.controller.dispatch({type:"set-slider-minlatex",id:this.model.id,latex:t})}dispatchSetMaxLatexIfChanged(t){this.model.slider.max!==t&&this.controller.dispatch({type:"set-slider-maxlatex",id:this.model.id,latex:t})}dispatchSetStepLatexIfChanged(t){this.model.slider.step!==t&&this.controller.dispatch({type:"set-slider-steplatex",id:this.model.id,latex:t})}dispatchSetFocusLocation(t){this.controller.dispatch({type:"set-focus-location",location:{...t,id:this.model.id}})}dispatchBlurFocusLocation(t){this.controller.dispatch({type:"blur-focus-location",location:{...t,id:this.model.id}})}dispatchSpecialKeyPressed(t){let o=this.getFocusLocation();t==="Up"&&(o==null?void 0:o.type)==="slider-limit"?this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.model.id}}):this.controller.dispatch({type:"on-special-key-pressed",key:t})}dispatchClearSelection(){this.controller.dispatch({type:"set-none-selected"})}dispatchExpressionSizeExceeded(){this.controller.dispatch({type:"expression-size-exceeded"})}};var{If:YW}=Fx.Components,SE=class extends Fx.View{init(){this.sliderController=new wE(this.props.model(),this.props.controller())}template(){return d(FO,{sliderController:this.const(this.sliderController)})}},FO=class extends Fx.View{init(){this.controller=this.props.sliderController(),this.model=this.controller.getModel();let e=this.controller.getTokenController();e&&(this.tokenControllerGetter=this.const(e))}template(){return _("div",{class:u("dcg-slider-container"),tapboundary:u("true"),onKeyDown:e=>{Pe(e)==="Tab"&&!e.altKey&&!e.metaKey&&!e.ctrlKey&&(e.shiftKey?this.isSliderThumbFocused()&&(this.controller.isItemReadonly()||(this.controller.dispatchSetFocusLocation({type:"slider-limit",location:"step"}),e.preventDefault(),e.stopPropagation())):!e.shiftKey&&this.isSliderStepFocused()&&(this.controller.canShowSliderThumb()?this.controller.dispatchSetFocusLocation({type:"slider-thumb"}):this.controller.dispatchSetFocusLocation({type:"slider-icon"}),e.preventDefault(),e.stopPropagation()))},children:[d(YW,{predicate:this.bindFn(this.shouldShowSlider),children:()=>_("div",{class:u("dcg-do-blur dcg-slider"),handleEvent:u("true"),children:[d("div",{class:u("dcg-minLabel dcg-template-minlabelhtml"),role:u("button"),"aria-label":this.bindFn(this.getMinAriaLabel),onTap:()=>this.onEditLimit("min"),children:d(St,{latex:()=>uT(this.model),config:this.const({}),tokenController:this.tokenControllerGetter})}),d(Wu,{min:()=>Yn(this.model),max:()=>Ja(this.model),step:()=>Is(this.model),value:()=>Za(this.model),ariaLabel:()=>this.controller.getBrailleMode()==="none"?'"'+wu(this.model)+'"':""+wu(this.model),onGrab:this.bindFn(this.onGrab),onDrop:this.bindFn(this.onDrop),onDragUpdate:this.bindFn(this.onDragUpdate),onKeyboardUpdate:this.bindFn(this.onKeyboardUpdate),onUpPress:()=>this.controller.dispatchSpecialKeyPressed("Up"),onDownPress:()=>this.controller.dispatchSpecialKeyPressed("Down"),onEnterPress:()=>this.controller.dispatchSpecialKeyPressed("Enter"),isFocused:this.bindFn(this.isSliderThumbFocused),onFocusedChanged:e=>{e?this.controller.dispatchSetFocusLocation({type:"slider-thumb"}):this.controller.dispatchBlurFocusLocation({type:"slider-thumb"})}}),d("div",{class:u("dcg-maxLabel dcg-template-maxlabelhtml"),onTap:()=>this.onEditLimit("max"),role:u("button"),"aria-label":()=>this.controller.s("graphing-calculator-narration-slider-maximum")+" "+vr(hT(this.model)),children:d(St,{latex:()=>hT(this.model),config:this.const({}),tokenController:this.tokenControllerGetter})})]})}),d(YW,{predicate:this.bindFn(this.shouldShowLimitInputs),children:()=>d(Ox,{controller:this.props.sliderController})})]})}getMinAriaLabel(){return this.controller.isItemReadonly()?this.controller.s("graphing-calculator-narration-slider-minimum")+" "+vr(uT(this.model)):this.controller.s("graphing-calculator-narration-edit-slider-variable-limits",{variable:this.controller.getBrailleMode()==="none"?'"'+wu(this.model)+'"':""+wu(this.model)})}onGrab(){this.dispatchIsDraggingIfChanged(!0)}onDrop(){this.controller.dispatchClearSelection(),this.dispatchIsPlayingIfChanged(!1),this.dispatchIsDraggingIfChanged(!1)}onKeyboardUpdate(e){this.controller.dispatchAdjustSliderByKeyboard(e)}onDragUpdate(e){this.controller.dispatchAdjustSliderByDraggingThumb(e)}onEditLimit(e){this.controller.dispatchSetFocusLocation({type:"slider-limit",location:e})}dispatchIsPlayingIfChanged(e){this.controller.dispatchSetIsPlayingIfChanged(e)}dispatchIsDraggingIfChanged(e){this.controller.dispatchSetIsDraggingIfChanged(e)}shouldShowLimitInputs(){return this.controller.getView()==="limits"}shouldShowSlider(){return!this.shouldShowLimitInputs()}isSliderThumbFocused(){var e;return((e=this.controller.getFocusLocation())==null?void 0:e.type)==="slider-thumb"}isSliderMinFocused(){let e=this.controller.getFocusLocation();return!!(e&&e.type==="slider-limit"&&e.location==="min")}isSliderStepFocused(){let e=this.controller.getFocusLocation();return!!(e&&e.type==="slider-limit"&&e.location==="step")}};ce();ie();var TE=__dcg_shared_module_exports__['e'](se());var{For:rle}=TE.Components,Gx=class extends TE.View{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id}template(){return d("div",{class:u("dcg-stats-footer-container dcg-do-blur"),handleEvent:u("true"),children:d("ul",{class:u("dcg-unstyled-list"),children:d(rle,{each:this.bindFn(this.getValues),children:e=>{let t=e(),o=this.controller.s(t.label);return _("li",{class:u("dcg-value"),children:[d("div",{class:u("dcg-row-header dcg-text-selectable"),children:()=>o}),d("div",{class:u("dcg-evaluation"),children:d(Xo,{latex:()=>t.value,ariaLabel:()=>o,tabbable:this.const(!0),focusLocation:this.const({type:"stats-output",id:this.id,parameter:t.parameter}),controller:this.props.controller,onKeypress:this.bindFn(this.handlePressedKey)})})]})}},e=>e.parameter+":"+e.label+":"+e.value)})})}getValues(){let e=JH(this.model);return e?[{parameter:"min",label:"graphing-calculator-label-stats-minimum",value:this.getStatValue(e.min)},{parameter:"q1",label:"graphing-calculator-label-stats-first-quartile",value:this.getStatValue(e.q1)},{parameter:"median",label:"graphing-calculator-label-stats-median",value:this.getStatValue(e.median)},{parameter:"q3",label:"graphing-calculator-label-stats-third-quartile",value:this.getStatValue(e.q3)},{parameter:"max",label:"graphing-calculator-label-stats-maximum",value:this.getStatValue(e.max)}]:[]}handlePressedKey(e){let t=Pe(e);if(t)switch(t){case"Up":this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.id}}),e.preventDefault();break;case"PageUp":case"PageDown":case"Down":case"Enter":this.controller.dispatch({type:"on-special-key-pressed",key:t}),e.preventDefault();break;case"Esc":Rr(),e.preventDefault();break}}getStatValue(e){var t;return(t=__dcg_shared_module_exports__['ha'](e,{...__dcg_shared_module_exports__['ca']}))!=null?t:""}};ce();ie();var Vx=__dcg_shared_module_exports__['e'](se());var{SwitchUnion:ole,If:XW}=Vx.Components,nf=class extends Vx.View{template(){return _("div",{class:u("dcg-toggle-container"),children:[_("div",{class:u("dcg-expression-footer-title"),children:[this.props.title,d(XW,{predicate:()=>!!this.props.helpLink,children:()=>d("a",{"aria-label":()=>this.props.controller().s("account-shell-link-help"),class:u("dcg-expression-footer-title-help"),target:u("_blank"),href:this.props.helpLink,children:d("i",{class:u("dcg-icon-question-sign"),"aria-hidden":u("true")})})})]}),d(hr,{staticConfig:this.bindFn(this.getSegmentedControlOptions),ariaGroupLabel:this.props.title,disabled:this.bindFn(this.isReadonly),theme:this.const("mini"),minButtonWidth:this.const(65)})]})}isReadonly(){return this.props.controller().isItemReadonly(this.props.model().id)}getSegmentedControlOptions(){return this.props.options().map(e=>({key:e.name,label:()=>e.displayName,selected:()=>this.isSelected(e.name),onSelect:()=>{this.props.controller().dispatch({type:"set-visualization-prop",id:this.props.model().id,prop:this.props.vizProp(),value:e.name})}}))}isSelected(e){return Lc(this.props.model(),this.props.vizProp())===e}},Nx=class extends Vx.View{template(){return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,d("div",{class:u("dcg-visualization-parameters-container dcg-do-blur"),tapboundary:u("true"),handleEvent:u("true"),children:d("div",{class:u("dcg-smaller-font"),children:ole(()=>this.getVisualizationType(),{boxplot:()=>_("div",{children:[d("div",{class:u("dcg-expression-footer-title"),children:()=>this.controller.s("graphing-calculator-heading-visual-parameters-display-properties")}),this.makeMQInput({prop:"axisOffset",siblingProps:["breadth"],default:"1",name:()=>this.controller.s("graphing-calculator-narration-visual-parameters-offset")}),this.makeMQInput({prop:"breadth",siblingProps:["axisOffset"],default:"1",name:()=>Lc(this.model,"alignedAxis")==="y"?this.controller.s("graphing-calculator-narration-visual-parameters-width"):this.controller.s("graphing-calculator-narration-visual-parameters-height")}),d(tt,{checked:()=>!!Lc(this.model,"showBoxplotOutliers"),disabled:()=>this.controller.isItemReadonly(this.model.id),onChange:this.bindFn(this.onToggleOutliers),children:d("span",{class:u("dcg-parameter-name"),children:()=>this.controller.s("graphing-calculator-button-visual-parameters-exclude-outliers")})})]}),dotplot:()=>d(XW,{predicate:()=>r8(this.model),children:()=>_("div",{class:u("dcg-toggles-container"),children:[d(nf,{...this.props,vizProp:()=>"dotplotXMode",options:()=>[{name:"exact",displayName:this.controller.s("graphing-calculator-button-visual-parameters-exact")},{name:"bin",displayName:this.controller.s("graphing-calculator-button-visual-parameters-binned")}],title:()=>this.controller.s("graphing-calculator-heading-visual-parameters-x-values")}),d(nf,{...this.props,vizProp:()=>"binAlignment",options:()=>[{name:"center",displayName:this.controller.s("graphing-calculator-button-visual-parameters-center")},{name:"left",displayName:this.controller.s("graphing-calculator-button-visual-parameters-left")}],title:()=>this.controller.s("graphing-calculator-heading-visual-parameters-bin-alignment")})]})}),histogram:()=>_("div",{class:u("dcg-toggles-container"),children:[d(nf,{...this.props,vizProp:()=>"histogramMode",options:()=>[{name:"",displayName:this.controller.s("graphing-calculator-button-visual-parameters-count")},{name:"relative",displayName:this.controller.s("graphing-calculator-button-visual-parameters-relative")},{name:"density",displayName:this.controller.s("graphing-calculator-button-visual-parameters-density")}],title:()=>this.controller.s("graphing-calculator-heading-visual-parameters-bar-heights"),helpLink:this.const("https://help.desmos.com/hc/en-us/articles/360022405991")}),d(nf,{...this.props,vizProp:()=>"binAlignment",options:()=>[{name:"center",displayName:this.controller.s("graphing-calculator-button-visual-parameters-center")},{name:"left",displayName:this.controller.s("graphing-calculator-button-visual-parameters-left")}],title:()=>this.controller.s("graphing-calculator-heading-visual-parameters-bin-alignment")})]}),none:()=>d("span",{})})})})}makeMQInput(e){return _("span",{children:[_("span",{class:u("dcg-parameter-name"),children:[e.name,":"]}),d(Ut,{latex:()=>this.getPropLatex(e),ariaLabel:e.name,placeholder:()=>e.default,isFocused:()=>this.isInputFocused(e.prop),hasError:()=>!QH(this.model,e.prop),handleFocusChanged:t=>this.handleFocusedChanged(e.prop,t),handlePressedKey:(t,o)=>this.handlePressedKey(t,o,e.prop),handleLatexChanged:t=>this.handleLatexChanged(e.prop,t),readonly:()=>this.controller.isItemReadonly(this.model.id),controller:this.props.controller})]})}handlePressedKey(e,t,o){if(e==="Esc"){this.controller.dispatch({type:"set-focus-location",location:void 0});return}if(e==="Enter")return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});let i=qe.getFocusedMathquill();i&&(i.keystroke(e,t),this.handleLatexChanged(o,i.latex()))}isInputFocused(e){let t=this.controller.getFocusLocation();return!t||t.type!=="visualization-prop"||t.id!==this.id?!1:t.location===e}handleFocusedChanged(e,t){t?this.controller.dispatch({type:"set-focus-location",location:{type:"visualization-prop",id:this.id,location:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"visualization-prop",id:this.id,location:e}})}getPropLatex({prop:e}){let t=Lc(this.model,e);return typeof t=="string"?t:""}handleLatexChanged(e,t){Lc(this.model,e)!==t&&this.controller.dispatch({type:"set-visualization-prop",id:this.id,prop:e,value:t})}onToggleOutliers(){let e=Lc(this.model,"showBoxplotOutliers");this.controller.dispatch({type:"set-visualization-prop",id:this.id,prop:"showBoxplotOutliers",value:!e})}getVisualizationType(){return Mu(this.model)?qd(this.model)?"boxplot":Dc(this.model)?"dotplot":Cu(this.model)?"histogram":"none":"none"}};var{If:ile,SwitchUnion:nle,For:ale}=kE.Components,af=class extends kE.View{constructor(){super(...arguments),this.model=this.props.model(),this.controller=this.props.controller(),this.footers=[],this.suspendedFooters={}}init(){this.updateFootersCache()}id(){return this.model.id}getFooterComponents(){return this.footers}updateFootersCache(){let e=[];this.suspendedFooters={};for(let t of vO)this.hasFooterComponent(t)?e.push(t):(this.model.error||this.model.latex!==this.model.formula.evaluated_latex)&&!Qa(this.model)&&CW[t]&&this.footers.includes(t)&&(e.push(t),this.suspendedFooters[t]=!0);this.footers=e}isFooterSuspended(e){return!!this.suspendedFooters[e]}hasFooterComponent(e){return SO[e](this.controller,this.model)}willUpdate(){this.updateFootersCache()}template(){return d(ile,{predicate:()=>this.getFooterComponents().length>0,children:()=>d("div",{class:this.getFooterClass(),children:d(ale.Simple,{each:()=>this.getFooterComponents(),children:e=>d(Rk,{suspended:()=>this.isFooterSuspended(e),children:nle(()=>e,{regression:()=>d(of,{model:this.props.model,controller:this.props.controller,regression:()=>this.props.model().formula.regression}),label:()=>d(qu,{model:this.props.model,controller:this.props.controller}),slider:()=>d(SE,{model:this.props.model,controller:this.props.controller}),"alt-text":()=>d(Jm,{model:this.props.model,controller:this.props.controller}),"slider-prompt":()=>d(_n,{model:this.props.model,controller:this.props.controller}),"braille-error":()=>_("div",{tabIndex:u(0),class:u("dcg-expression-braille-error"),role:u("button"),"aria-roledescription":u("error"),"aria-label":()=>this.controller.unpack(this.model.error),children:[d("i",{class:u("dcg-icon-error"),"aria-hidden":u("true")}),()=>this.controller.unpack(this.model.error)]}),domain:()=>d(wx,{model:this.props.model,controller:this.props.controller}),evaluation:()=>d(Tx,{id:()=>this.props.model().id,controller:this.props.controller}),visualization:()=>d(Nx,{model:this.props.model,controller:this.props.controller}),"rename-prompt":()=>d(Dx,{controller:this.props.controller,id:this.bindFn(this.id)}),stats:()=>d(Gx,{model:this.props.model,controller:this.props.controller}),inference:()=>d(sE,{model:this.props.model,controller:this.props.controller}),significance:()=>d(tf,{model:this.props.model,showIndented:this.const(!1),controller:this.props.controller}),confidence:()=>d(Qm,{model:this.props.model,showIndented:this.const(!1),controller:this.props.controller}),distribution:()=>d(Yk,{model:this.props.model,controller:this.props.controller}),"action-info":()=>d(Nu,{model:this.props.model,controller:this.props.controller}),"extend-to-3d":()=>d("div",{handleEvent:u("true"),children:d(tt,{onChange:t=>{this.controller.dispatch({type:"set-item-extend-to-3D",id:this.model.id,extendTo3D:t})},checked:()=>this.model.extendTo3D,class:this.const("dcg-extend-to-3d-checkbox"),children:()=>this.controller.s("graphing-calculator-label-extend-to-3d")})}),warning:()=>d(zu,{controller:this.props.controller,warning:()=>wO(this.controller,this.model)}),"parameter-suggestions":()=>d(uE,{controller:this.props.controller,model:this.props.model}),"default-statement-import":()=>d("div",{class:u("dcg-default-import-footer"),children:"DEFAULT STATEMENT OVERRIDDEN"})})})})})})}getFooterClass(){let e=!this.props.isFirstRender()&&!this.model.expressionTooComplex;return this.const({"dcg-expression-bottom":!0,"dcg-indent-in-folder":!0,"dcg-fadein-bottom":e})}};ce();ie();bn();var AE=__dcg_shared_module_exports__['e'](se());ce();ie();var ZW=__dcg_shared_module_exports__['e'](se());ce();ie();var IE=__dcg_shared_module_exports__['e'](se());ce();ie();var JW=__dcg_shared_module_exports__['e'](se()),EE=class extends JW.View{template(){return _("div",{class:u("dcg-slow-plotting-icon"),children:[d("div",{class:u("dcg-slow-plotting-icon__dot")}),d("div",{class:u("dcg-slow-plotting-icon__dot")}),d("div",{class:u("dcg-slow-plotting-icon__dot")}),d("div",{class:u("dcg-slow-plotting-icon__dot")}),d("div",{class:u("dcg-slow-plotting-icon__dot")}),d("div",{class:u("dcg-slow-plotting-icon__dot")}),d("div",{class:u("dcg-slow-plotting-icon__dot")}),d("div",{class:u("dcg-slow-plotting-icon__dot")}),d("div",{class:u("dcg-slow-plotting-icon__dot")}),d("div",{class:u("dcg-slow-plotting-icon__dot")}),d("div",{class:u("dcg-slow-plotting-icon__dot")})]})}};var{If:Bx}=IE.Components,ho=class extends IE.View{template(){return _("span",{class:()=>({"dcg-do-not-blur":!0,"dcg-forced-color-none":!0,"dcg-circular-icon":!0,"dcg-thick-outline":this.isThickOutline(),"dcg-white-icon":!!this.props.whiteIcon&&this.props.whiteIcon(),"dcg-hidden":this.isHidden(),"dcg-semi-transparent":this.props.semiTransparent&&this.props.semiTransparent(),"dcg-colored-icon":this.isColoredIcon(),"dcg-has-background-image":this.hasBackgroundImage(),[this.iconModifier()]:this.iconModifier().length>0}),style:this.bindFn(this.getIconStyle),children:[d(Bx,{predicate:this.bindFn(this.hasBackgroundImage),children:()=>d("span",{class:u("dcg-background-image"),style:()=>({"background-image":this.props.backgroundImage&&this.props.backgroundImage(),opacity:this.props.backgroundOpacity&&this.props.backgroundOpacity().toString()})})}),d(Bx,{predicate:()=>!!this.backgroundIcon(),children:()=>d("i",{class:()=>({[this.backgroundIcon()]:!0,"dcg-layered-icon":!0}),style:()=>({opacity:this.backgroundOpacity().toString()})})}),d(Bx,{predicate:()=>!!this.primaryIcon(),children:()=>d("i",{class:()=>({[this.primaryIcon()]:!0,"dcg-layered-icon":!0}),style:()=>({color:this.props.foregroundColor&&this.props.foregroundColor()})})}),d(Bx,{predicate:()=>this.props.iconType()==="loading",children:()=>d("span",{class:u("dcg-spinner")})}),d(Bx,{predicate:()=>this.props.iconType()==="slow-plotting",children:()=>d(EE,{})})]})}isColoredIcon(){return!this.isThickOutline()&&!this.isHidden()&&!this.hasBackgroundImage()&&this.props.iconType()!=="loading"}iconModifier(){if(!this.props.iconModifier)return"";switch(this.props.iconModifier()){case"medium":return"dcg-modifier-size-medium";case"large":return"dcg-modifier-size-large";case"small":return"dcg-modifier-size-small";case"rotated":return"dcg-modifier-rotated";case"fade-in":return"dcg-modifier-fade-in";case"none":return""}}getIconStyle(){let e=!this.isHidden()&&this.props.backgroundColor?jg(this.props.backgroundColor()):void 0;return e?{background:e}:{}}isHidden(){return this.props.iconType()==="hidden"}isThickOutline(){let e=this.props.iconType();return e==="folder"||e==="pause"||e==="play"||e==="fraction"||e==="action"||e==="metronome"||e==="sound"}hasBackgroundImage(){return!!this.props.backgroundImage&&!this.isHidden()&&!!this.props.backgroundImage()}primaryIcon(){let e=this.props.iconType();switch(e){case"sound":return"dcg-icon-sound-wave";case"folder":return"dcg-icon-folder";case"pause":return"dcg-icon-pause";case"play":return"dcg-icon-play";case"polygon-dashed":case"polygon-dashed-filled":return"dcg-icon-polygon-dashed";case"polygon-dotted":case"polygon-dotted-filled":return"dcg-icon-polygon-dotted";case"polygon-default":case"polygon-default-filled":return"dcg-icon-polygon-solid";case"graph-dashed":case"parametric-dashed-filled":return"dcg-icon-parametric-dashed";case"graph-dotted":case"parametric-dotted-filled":return"dcg-icon-parametric-dotted";case"graph-default":case"parametric-default-filled":return"dcg-icon-parametric-solid";case"movable-vertical":return"dcg-icon-move-vertical";case"movable-both":return"dcg-icon-move";case"movable-horizontal":return"dcg-icon-move-horizontal";case"point-open":return"dcg-icon-point-open";case"point-cross":return"dcg-icon-point-cross";case"point-diamond":return"dcg-icon-point-diamond";case"point-plus":return"dcg-icon-point-plus";case"point-square":return"dcg-icon-point-square";case"point-star":return"dcg-icon-point-star";case"point-triangle":return"dcg-icon-point-triangle";case"point-default":return"dcg-icon-point-closed";case"table-points":case"table-points-and-lines":return"dcg-icon-points";case"table-lines":return"dcg-icon-lines-solid";case"shaded-inequality":case"inequality":return"dcg-icon-shaded-inequality-dash";case"check":return"dcg-icon-check";case"none":case"background":case"hidden":case"polygon-none-filled":case"parametric-none-filled":case"loading":case"slow-plotting":return"";case"fraction":return"dcg-icon-fraction";case"boxplot":return"dcg-icon-boxplot";case"dotplot-cross":return"dcg-icon-dotplot-cross";case"dotplot-default":return"dcg-icon-dotplot-default";case"dotplot-open":return"dcg-icon-dotplot-open";case"histogram":return"dcg-icon-histogram";case"unfilled-distribution":case"filled-distribution":return"dcg-icon-distribution";case"action":return"dcg-icon-chevron-right";case"metronome":return"dcg-icon-metronome";case"arrow-right":return"dcg-icon-arrow-right";default:return e}}backgroundOpacity(){let e=this.backgroundIcon();return e==="dcg-icon-polygon-filled"||e==="dcg-icon-parametric-filled"||e==="dcg-icon-shaded-inequality-shade2"||e==="dcg-icon-distribution-fill"||e==="dcg-icon-histogram-fill"?.5:1}backgroundIcon(){let e=this.props.iconType();return e==="filled-distribution"?"dcg-icon-distribution-fill":e==="histogram"?"dcg-icon-histogram-fill":e==="polygon-dashed-filled"||e==="polygon-dotted-filled"||e==="polygon-default-filled"||e==="polygon-none-filled"?"dcg-icon-polygon-filled":e==="parametric-dashed-filled"||e==="parametric-dotted-filled"||e==="parametric-default-filled"||e==="parametric-none-filled"?"dcg-icon-parametric-filled":e==="table-points-and-lines"?"dcg-icon-lines-solid":e==="shaded-inequality"?"dcg-icon-shaded-inequality-shade2":e==="action"?"dcg-icon-minus":""}};var CE=class extends ZW.View{constructor(){super(...arguments),this.isAnimating=!1}init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return d("div",{class:()=>({"dcg-action-icon-view":!0,"dcg-action-icon-view-animating":this.isAnimating}),children:d("div",{class:u("dcg-circular-icon-container"),"aria-label":()=>this.controller.s("graphing-calculator-narration-run-action-icon"),role:u("button"),tabIndex:u("0"),onTap:e=>{Or(e,"dragdrop")||this.runActionOnce()},manageFocus:this.const(_e({controller:this.props.controller(),location:{type:"action-icon",id:this.model.id}})),children:d(ho,{iconType:this.const("action"),whiteIcon:()=>!this.controller.isInEditListMode()&&this.controller.isItemSelected(this.model.id)||this.controller.isItemBeingDragged(this.model.id)})})})}runActionOnce(){this.isAnimating=!0,this.controller.dispatch({type:"action-single-step",id:this.model.id}),setTimeout(this.bindIfMounted(()=>{this.isAnimating=!1,this.update()}),150)}};ce();ie();var QW=__dcg_shared_module_exports__['e'](se());var _E=class extends QW.View{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return _("div",{class:u("dcg-play-pause-icon-view"),children:[d(Re,{gravity:this.const("s"),tooltip:()=>this.controller.s("graphing-calculator-label-slider-disabled-while-ticker-playing"),disabled:()=>!this.controller.getTickerPlaying(),sticky:this.const(!0),children:d("div",{class:()=>({"dcg-circular-icon-container":!0,"dcg-disabled":this.controller.getTickerPlaying()}),"aria-label":this.bindFn(this.getAriaLabel),"aria-disabled":()=>this.controller.getTickerPlaying(),role:u("button"),tabIndex:()=>this.controller.getTickerPlaying()?"-1":"0",onTap:e=>{this.controller.getTickerPlaying()||Or(e,"dragdrop")||this.toggleSliderIsPlaying()},"dcg-open-menu-guid":()=>this.model.guid,manageFocus:this.const(_e({controller:this.controller,location:{type:"slider-icon",id:this.model.id}})),children:d(ho,{iconType:()=>this.getIconType(),whiteIcon:()=>!this.controller.isInEditListMode()&&this.controller.isItemSelected(this.model.id)||this.controller.isItemBeingDragged(this.model.id)})})}),d("div",{class:u("dcg-slider-menu-container"),children:d(Re,{tooltip:()=>this.controller.s("graphing-calculator-label-animation-properties-tooltip"),gravity:this.const("e"),children:d("div",{class:()=>({"dcg-slider-menu-opener":!0,"dcg-menu-open":this.myOptionsOpen()}),tabIndex:u(0),"dcg-open-menu-guid":()=>this.getMenuGUID(),role:u("button"),"aria-label":()=>this.myOptionsOpen()?this.controller.s("graphing-calculator-narration-hide-animation-properties"):this.controller.s("graphing-calculator-narration-show-animation-properties"),onTap:e=>{Or(e,"dragdrop")||e.wasLongheld()||this.toggleOptions(e)},manageFocus:this.const(_e({controller:this.controller,location:{type:"slider-animation-properties-icon",id:this.model.id}})),children:d("i",{class:this.bindFn(this.getIcon),"aria-hidden":u("true")})})})})]})}getIcon(){return __dcg_shared_module_exports__['_d'](this.model.slider.loopMode)}getIconType(){return!this.model.slider.isPlaying||gT(this.model)?"play":"pause"}getMenuGUID(){return"slider-"+this.model.guid}myOptionsOpen(){return this.controller.isItemSettingsMenuOpen(this.getMenuGUID())}toggleOptions(e){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"slider",model:this.model,guid:this.getMenuGUID(),focusFirstOption:e.device==="keyboard"}})}getAriaLabel(){if(!this.model.sliderExists)return"";let e=Gd(this.model);return e?this.model.slider.isPlaying?this.controller.s("graphing-calculator-narration-pause-variable-animation",{variable:e}):this.controller.s("graphing-calculator-narration-play-variable-animation",{variable:e}):""}toggleSliderIsPlaying(){if(this.model.sliderExists){let e="",t=Gd(this.model);gT(this.model)?(typeof t=="string"&&(e=this.controller.s("graphing-calculator-narration-slider-variable-restarted",{variable:t})),this.controller.dispatch({type:"play-slider-from-min",id:this.model.id})):this.model.slider.isPlaying?(typeof t=="string"&&(e=this.controller.s("graphing-calculator-narration-slider-variable-paused",{variable:t})),this.controller.dispatch({type:"set-slider-isplaying",id:this.model.id,isPlaying:!1})):(typeof t=="string"&&(e=this.controller.s("graphing-calculator-narration-slider-variable-playing",{variable:t})),this.controller.dispatch({type:"set-slider-isplaying",id:this.model.id,isPlaying:!0})),e!==""&&Te(e)}}};ie();var e6=__dcg_shared_module_exports__['e'](se());var ME=class extends e6.View{init(){this.model=this.props.model(),this.controller=this.props.controller()}toggleMuted(){this.controller.dispatch({type:"toggle-item-hidden",id:this.model.id})}showAsTurnedOff(){return ax(this.model)}template(){return d("button",{class:()=>{var e;return{"dcg-unstyled-button":!0,"dcg-circular-icon-container":!0,"dcg-show-globally-muted":((e=this.controller.toneController)==null?void 0:e.isGlobalMuted())&&!this.showAsTurnedOff()}},onTap:e=>{Or(e,"dragdrop")||this.toggleMuted()},"aria-label":this.props.ariaLabel,children:d(ho,{iconType:()=>this.showAsTurnedOff()?"hidden":"sound",whiteIcon:()=>!this.controller.isInEditListMode()&&this.controller.isItemSelected(this.model.id)||this.controller.isItemBeingDragged(this.model.id)})})}};var{SwitchUnion:sle,If:lle}=AE.Components,cle=__dcg_shared_module_exports__['Md'].FOCUS_OUTLINE,t6="#000",r6="#fff",$u=class extends AE.View{init(){this.model=this.props.model(),this.controller=this.props.controller()}template(){return d("div",{class:u("dcg-expression-icon-container"),children:sle(this.bindFn(this.getIconMode),{error:()=>d(io,{error:this.bindFn(this.getErrorMsg),isWhite:this.bindFn(this.renderAsSelected)}),none:()=>d("span",{}),slider:()=>d(_E,{controller:this.props.controller,model:this.props.model}),action:()=>d(CE,{controller:this.props.controller,model:this.props.model}),icon:()=>_("div",{class:u("dcg-circular-icon-container"),role:u("button"),tabIndex:u("0"),"dcg-open-menu-guid":()=>this.getMenuGUID(),"aria-label":this.bindFn(this.getIconAriaLabel),onTap:e=>{if(!Or(e,"dragdrop")&&!e.wasLongheld()){if(this.myOptionsOpen())return this.toggleOptions(e);if((this.controller.isInEditListMode()||e.shiftKey)&&!this.isFraction())return this.toggleOptions(e);if(this.isFraction())return this.onToggleFractionDisplay();this.toggleGraphShown()}},onLongHold:e=>{Dt(e,"dcg-longhold"),Dt(e,"dcg-tap"),!(this.isFraction()||this.displaySlowPlotting()&&!lx(this.model))&&this.toggleOptions(e)},manageFocus:this.const(_e({controller:this.controller,location:{type:"expression-icon",id:this.model.id}})),children:[d(ho,{iconType:this.bindFn(this.getIconType),backgroundColor:this.bindFn(this.getBackgroundColor),whiteIcon:this.bindFn(this.renderAsSelected),foregroundColor:this.bindFn(this.getForegroundColor),iconModifier:this.bindFn(this.getIconModifier),backgroundImage:this.bindFn(this.backgroundImage),backgroundOpacity:this.const(1)}),d(lle,{predicate:()=>this.model.disableGraphInteractions,children:()=>d("i",{class:u("dcg-graph-interaction-disabled dcg-icon-lock")})})]}),tone:()=>d(ME,{controller:this.props.controller,model:this.props.model,ariaLabel:this.bindFn(this.getIconAriaLabel)})})})}backgroundImage(){let e=this.getBackgroundColor();return e.type==="image"?`url("${e.value}")`:""}getErrorMsg(){return this.colorError()?this.controller.s("shared-calculator-error-color-not-assigned"):this.controller.unpack(this.model.error)}getMenuGUID(){return this.model.guid}myOptionsOpen(){return this.controller.isItemSettingsMenuOpen(this.getMenuGUID())}toggleOptions(e){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"expression",model:this.model,guid:this.getMenuGUID(),focusFirstOption:e.device==="keyboard"}})}renderAsSelected(){return this.controller.isItemBeingDragged(this.model.id)?!0:this.controller.isItemSelected(this.model.id)&&!this.controller.isInEditListMode()}displaySlowPlotting(){return this.controller.shouldShowProgressUpdateIcons()&&this.controller.isItemGraphing(this.model.id)&&this.controller.isItemSlowInEvaluator(this.model.id)&&!$o(this.model)}isFraction(){return this.controller.canDisplayEvaluationForItemAsFraction(this.model.id)}getIconMode(){return this.displaySlowPlotting()?"icon":this.hasError()?"error":this.controller.getGraphSettings().config.graphpaper?lx(this.model)?"icon":this.hasSlider()?"slider":this.isFraction()?"icon":this.isNonemptyAction()?"action":this.isToneExpression()&&this.controller.toneEnabled()?"tone":"none":"none"}isToneExpression(){return Xn(this.model)}toggleGraphShown(){this.controller.dispatch({type:"toggle-item-hidden",id:this.model.id})}colorError(){return!!this.model.formula.rgb_value&&!this.model.formula.assignment}hasError(){return this.colorError()?!0:!!this.model.error&&!Qa(this.model)&&this.controller.getBrailleMode()==="none"}hasSlider(){return!!this.model.sliderExists}isNonemptyAction(){return _c(this.model)}getDisplayProps(){let{points:e,lines:t,fill:o}=this.model;return __dcg_shared_module_exports__['yd'](this.model.formula.expression_type,{points:e,lines:t,fill:o},i=>{Lr("getReconciledExpressionProps [Chrome Switch Bug]",{metaData:{method:"getDisplayProps",type:i}})})}getBackgroundColor(){if(!this.isFraction())return Ay(this.model);let e=this.renderAsSelected();return this.controller.shouldEvaluationForItemDisplayAsFraction(this.model.id)?{type:"single-color",value:e?r6:t6}:{type:"single-color",value:""}}getForegroundColor(){if(!this.isFraction())return"";let e=this.renderAsSelected(),t=this.controller.shouldEvaluationForItemDisplayAsFraction(this.model.id);return e!==t?r6:e?cle:t6}onToggleFractionDisplay(){this.controller.dispatch({type:"toggle-fraction-evaluation",id:this.model.id})}getIconModifier(){return qd(this.model)&&Lc(this.model,"alignedAxis")==="y"?"rotated":this.displaySlowPlotting()&&this.model.formula.is_graphable===void 0?"fade-in":"none"}getIconType(){var c;if(this.isFraction())return"fraction";if(this.displaySlowPlotting())return"slow-plotting";if(!this.model.shouldGraph)return"hidden";if(this.controller.isInEditListMode())return"none";let e=this.model.pointStyle,t=this.model.lineStyle,o=this.getDisplayProps(),i=this.model.formula;if(qd(this.model))return"boxplot";if(Dc(this.model)){if(this.model.pointStyle==="POINT")return"dotplot-default";if(this.model.pointStyle==="CROSS")return"dotplot-cross";if(this.model.pointStyle==="OPEN")return"dotplot-open"}if(Cu(this.model))return"histogram";if(_u(this.model))return Am(this.model)&&!((c=this.model.formula)!=null&&c.cdf_error)?"filled-distribution":"unfilled-distribution";if(eo(this.model)===__dcg_shared_module_exports__['hd'].X)return"movable-horizontal";if(eo(this.model)===__dcg_shared_module_exports__['hd'].Y)return"movable-vertical";if(eo(this.model)===__dcg_shared_module_exports__['hd'].XY)return"movable-both";if(hi(this.model))return e===__dcg_shared_module_exports__['Pd'].OPEN?"point-open":e===__dcg_shared_module_exports__['Pd'].CROSS?"point-cross":e===__dcg_shared_module_exports__['Pd'].SQUARE?"point-square":e===__dcg_shared_module_exports__['Pd'].PLUS?"point-plus":e===__dcg_shared_module_exports__['Pd'].TRIANGLE?"point-triangle":e===__dcg_shared_module_exports__['Pd'].DIAMOND?"point-diamond":e===__dcg_shared_module_exports__['Pd'].STAR?"point-star":"point-default";if(Iu(this.model))return"point-default";if(Ud(this.model)||zd(this.model))return o.lines&&o.points?"table-points-and-lines":o.lines?"table-lines":"table-points";if(jT(this.model))return"polygon-default-filled";let n=this.getDisplayProps().fill;if(bm(this.model))return n?o.lines?t===__dcg_shared_module_exports__['Qd'].DASHED?"polygon-dashed-filled":t===__dcg_shared_module_exports__['Qd'].DOTTED?"polygon-dotted-filled":"polygon-default-filled":"polygon-none-filled":o.lines?t===__dcg_shared_module_exports__['Qd'].DASHED?"polygon-dashed":t===__dcg_shared_module_exports__['Qd'].DOTTED?"polygon-dotted":"polygon-default":"none";if(_m(this.model))return n?o.lines?t===__dcg_shared_module_exports__['Qd'].DASHED?"parametric-dashed-filled":t===__dcg_shared_module_exports__['Qd'].DOTTED?"parametric-dotted-filled":"parametric-default-filled":"parametric-none-filled":o.lines?t===__dcg_shared_module_exports__['Qd'].DASHED?"graph-dashed":t===__dcg_shared_module_exports__['Qd'].DOTTED?"graph-dotted":"graph-default":"none";let a=i.operator,s=__dcg_shared_module_exports__['xc'][a].direction!==0,l=__dcg_shared_module_exports__['xc'][a].inclusive===!1;return i.is_shade_between||!l&&s?"shaded-inequality":l&&!s?"inequality":l&&s?"shaded-inequality":t===__dcg_shared_module_exports__['Qd'].DASHED?"graph-dashed":t===__dcg_shared_module_exports__['Qd'].DOTTED?"graph-dotted":"graph-default"}getIconAriaLabel(){return this.displaySlowPlotting()?this.controller.s("shared-calculator-label-slow-plotting"):this.isFraction()?Nd(this.model)?this.controller.s("shared-calculator-narration-display-as-decimal"):this.controller.s("shared-calculator-narration-display-as-fraction"):this.myOptionsOpen()?Ar(this.model,"hide-options"):this.controller.isInEditListMode()?Ar(this.model,"show-options"):Xn(this.model)?this.model.hidden?Ar(this.model,"unmute"):Ar(this.model,"mute"):this.model.hidden?Ar(this.model,"show"):Ar(this.model,"hide")}};ce();ie();var PE=__dcg_shared_module_exports__['e'](se());var{If:dle}=PE.Components,LE=class extends PE.View{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return d(dle,{predicate:this.bindFn(this.shouldShow),children:()=>d("div",{class:u("dcg-generate-table-view dcg-do-blur"),handleEvent:u(!0),children:d(Re,{tooltip:this.bindFn(this.getTooltip),gravity:()=>"s",children:d("i",{onTap:()=>this.controller.dispatch({type:"convert-or-create-table",index:this.model.index}),role:u("button"),tabIndex:u("0"),"aria-label":()=>Ar(this.model,"create_table"),class:u("dcg-icon-create-table")})})})})}shouldShow(){return pu(this.model)!=="recursive-function"||!this.model||this.model.type!=="expression"?!1:!this.controller.hasTableHeaderWithIdentifier(this.model.formula.function_definition)}getTooltip(){return this.controller.s("graphing-calculator-label-create-table")}};ce();ie();var DE=__dcg_shared_module_exports__['e'](se());var{If:ple}=DE.Components,sf=class extends DE.View{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return d(ple,{predicate:()=>this.controller.showExpressionZoomFitButton(this.model),children:()=>d("div",{class:u("dcg-suggested-zoom-view dcg-do-not-blur"),onTapStart:e=>Dt(e,"dcg-expression-drag"),children:d(Re,{tooltip:this.bindFn(this.getZoomText),gravity:()=>"e",children:d("i",{onTap:this.bindFn(this.onZoom),role:u("button"),tabIndex:u("0"),"aria-label":this.bindFn(this.getZoomText),class:u("dcg-icon-zoom-fit")})})})})}getZoomText(){return this.controller.s("graphing-calculator-text-zoom-fit")}onZoom(e){this.controller.dispatch({type:"expression-zoom-fit",id:this.model.id,focusAfterTap:e.device==="keyboard"})}};ce();ie();var OE=__dcg_shared_module_exports__['e'](se());var{If:ule,Switch:hle}=OE.Components,ns=class extends OE.View{init(){this.controller=this.props.controller(),this.model=this.props.model()}iconType(){return this.controller.isExpressionHighlighted(this.model.id)&&py?"copy":this.controller.shouldShowReplaceIcon()?"rename":this.controller.isItemMarkedReadonly(this.model.id)?"lock":"delete"}getAriaLabel(){switch(this.iconType()){case"none":case"lock":case"copy":return;case"rename":return Ar(this.model,"rename");case"delete":return this.model.id===this.controller.wizardModel.getInsertItemId()?this.controller.s("graphing-calculator-narration-close-add-inference"):Ar(this.model,"delete")}}onIconTap(){this.iconType()==="delete"?this.controller.dispatch({type:"delete-item-and-animate-out",id:this.model.id,setFocusAfterDelete:!this.controller.isInEditListMode()}):this.iconType()==="rename"&&this.controller.dispatch({type:"rename-identifier-in-item",search:this.controller.getExpressionSearchStr(),replace:this.controller.getExpressionReplaceStr(),id:this.model.id})}isIconTappable(){let e=this.iconType();return e!=="none"&&e!=="lock"&&e!=="copy"}template(){return d(ule,{predicate:()=>!this.controller.isInEditListMode(),children:()=>d("div",{class:()=>({"dcg-top-level-icon":!0,"dcg-tappable":this.isIconTappable()}),tabIndex:()=>this.isIconTappable()?0:-1,"aria-label":this.bindFn(this.getAriaLabel),handleEvent:this.bindFn(this.isIconTappable),onTap:this.bindFn(this.onIconTap),role:u("button"),manageFocus:this.const({shouldBeFocused:()=>Wm({controller:this.controller,location:{type:"top-level-icon",id:this.model.id}}),onFocusedChanged:(e,t)=>{var o;e?this.controller.dispatch({type:"set-focus-location",location:{type:"top-level-icon",id:this.model.id}}):t.relatedTarget&&!((o=t.relatedTarget)!=null&&o.closest("[data-dcg-label]"))&&this.controller.dispatch({type:"blur-focus-location",location:{type:"top-level-icon",id:this.model.id}})}}),children:d(hle,{children:e=>{switch(e){case"delete":return d("i",{class:u("dcg-icon-remove dcg-top-level-delete"),"aria-hidden":u("true")});case"lock":return d("i",{class:u("dcg-icon-lock dcg-lock-indicator"),"aria-hidden":u("true")});case"copy":return d("i",{class:u("dcg-icon-duplicate"),"aria-hidden":u("true")});case"rename":return d("i",{class:u("dcg-icon-replace"),"aria-hidden":u("true")});case"none":return d("span",{})}}},()=>this.iconType())})})}};var{If:o6}=i6.Components,ju=class extends Cn{didMountRootNode(e){this.rootNode=e,this.onItemViewMounted(e),this.lastBrailleMode=this.controller.getBrailleMode()}willUnmount(){this.onItemViewUnmounted()}template(){return _("div",{class:()=>({"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-highlighted-expressionitem":this.controller.shouldAddExpressionHighlightedClass(this.id),"dcg-mathitem":!0,"dcg-inFolder":!!this.model.folderId,"dcg-readonly":this.controller.isItemReadonly(this.id),"dcg-selected":this.controller.isItemSelected(this.id)&&!this.controller.isInEditListMode(),"dcg-inference-wizard-insert-target":this.controller.isInferenceWizardInsertTarget(this.id),"dcg-dragging":this.controller.isItemBeingDragged(this.id),"dcg-hasSlider":this.hasSlider(),"dcg-hasEvaluation":!!this.controller.shouldShowEvaluationForItem(this.id),"dcg-hasRegression":this.hasRegression(),"dcg-hasDomain":this.hasDomain()||this.hasDomain3d()}),"expr-id":()=>this.model.id,didMount:this.bindFn(this.didMountRootNode),children:[_("div",{class:u("dcg-fade-container"),onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect),children:[_("div",{class:u("dcg-main"),children:[d(o6,{predicate:()=>!this.controller.isInEditListMode()&&!this.isReadonly(),children:()=>d(ir,{latex:()=>vD(this.model),ariaLabel:()=>this.getAriaLabel("speech"),brailleAriaLabel:()=>this.getAriaLabel("braille"),onKeydown:this.bindFn(this.handlePressedKey),...Wr(this.controller),getAriaPostLabel:this.bindFn(this.getFormulaAria),isFocused:()=>this.isFocused(),noFadeout:()=>this.controller.isItemMarkedReadonly(this.model.id),hasError:this.const(!1),onUserPressedKey:this.bindFn(this.handleEditableMathquillPressedKey),onUserChangedLatex:e=>this.handleLatexChanged(e),onFocusedChanged:this.bindFn(this.handleMQFocusedChanged),onSelectionChanged:()=>{this.controller.runAfterDispatch(()=>{this.controller.dispatch({type:"render"})})}})}),d(o6,{predicate:()=>this.controller.isInEditListMode()||this.isReadonly(),children:()=>d("div",{class:u("dcg-edit-list-mathquill"),onTap:()=>this.controller.isInEditListMode()?this.exitEditListMode():{},children:d(ir,{latex:()=>vD(this.model),ariaLabel:()=>this.getAriaLabel("speech"),brailleAriaLabel:()=>this.getAriaLabel("braille"),isStatic:this.const(!0),isFocused:()=>{let e=this.controller.getFocusLocation();return!e||e.type!=="readonly-expression"?!1:e.id===this.id},onKeydown:this.bindFn(this.handlePressedKey),onUserPressedKey:(e,t)=>t&&this.handlePressedKey(t),onFocusedChanged:(e,t)=>{e?this.controller.dispatch({type:"set-focus-location",location:{type:"readonly-expression",id:this.model.id}}):this.doesNodeBelongToSliderLimit(t.relatedTarget)||this.controller.dispatch({type:"blur-focus-location",location:{type:"readonly-expression",id:this.model.id}})},...Wr(this.controller)})})})]}),d(ns,{controller:this.props.controller,model:this.props.model}),d(af,{controller:this.props.controller,model:this.props.model,isFirstRender:this.bindFn(this.isFirstRender)})]}),_("span",{class:()=>({"dcg-tab":!0,"dcg-action-drag":!0,"dcg-action-icon-touch":!0,...this.debugProgressClassMap()}),handleEvent:u("true"),tapboundary:u("true"),disablescroll:u("true"),onTapStart:this.bindFn(this.onDragPending),children:[d("span",{class:u("dcg-num"),children:()=>this.model.displayIndex}),d("div",{class:u("dcg-tab-interior dcg-action-icon-mouse"),children:d($u,{model:this.props.model,controller:this.props.controller})}),d(sf,{model:this.props.model,controller:this.props.controller}),d(LE,{model:this.props.model,controller:this.props.controller})]}),d(rs,{controller:this.props.controller,id:()=>this.model.id})]})}debugProgressClassMap(){if(!this.controller.shouldShowProgressUpdateColors())return{};let e=this.controller.getEvaluatorStateForItem(this.model.id);switch(e){case void 0:case"IDLE":case"RESOLVED":return{};case"UNPUBLISHED":return{"dcg-progress-unpublished":!0};case"ANALYZING":return{"dcg-progress-analyzing":!0};case"GRAPHING":return{"dcg-progress-graphing":!0};default:throw new Error(`Unexpected analysis state: ${e}`)}}didUpdate(){this.lastBrailleMode=this.controller.getBrailleMode()}shouldShowLabelView(){return ym(this.model)&&!this.controller.isThreeDMode()}hasRegression(){return!!this.model.formula.is_regression}hasDomain(){return Bd(this.model)}hasDomain3d(){return Pc(this.model)}hasSlider(){return!!this.model.sliderExists}getLabelOptions(){return this.controller.getEvaluationLabelOptionsForItem(this.model.id)}getAriaLabel(e){if(this.shouldShowLabelView()){let t;this.model.label&&this.model.label!==""?t=this.model.label:e==="speech"?t=this.controller.s("graphing-calculator-narration-expression-label"):t=this.controller.raw("lbl");let o;return Tn(this.model)?o=t:e==="speech"?o=this.controller.s("graphing-calculator-narration-expression-hidden-label",{label:t}):o=this.controller.raw("h __label__",{label:t}),o}if(e==="speech"){let t=this.controller.s("shared-calculator-narration-expression-index",{index:this.model.displayIndex});if(this.controller.shouldShowProgressUpdateIcons()){let o=this.controller.getEvaluatorStateForItem(this.model.id);if(o)return`${t} - ${o}`}return t}else return this.controller.raw("eq__index__",{index:this.model.displayIndex})}getFormulaAria(){let e=this.model.formula,t="";if(this.controller.isItemSlowInEvaluator(this.model.id))return this.controller.shouldShowEvaluationForItem(this.id)?this.controller.s("graphing-calculator-narration-slow-evaluation"):this.controller.s("graphing-calculator-narration-slow-compute");if(!e||Qa(this.model))return t;if(this.controller.shouldShowEvaluationForItem(this.model.id))t=`equals ${rk(this.model,this.controller,this.getLabelOptions())}`;else if(e.error&&!this.controller.shouldShowSliderPrompt(this.model))t=this.controller.unpack(e.error);else if(this.controller.shouldShowSliderPrompt(this.model)){let o=Ac(this.model).length;if(o>0)t=this.controller.s("graphing-calculator-narration-add-base-case-prompt",{count:__dcg_shared_module_exports__['pa'](o)});else{let i=[],n=gm(this.model);for(let a=0;a<n.length;a++)i.push(ur(n[a]));t=this.controller.s("graphing-calculator-narration-add-slider-prompt",{vars:Zn(this.controller.getLanguage(),i)})}}else _u(this.model)?t=this.controller.s("graphing-calculator-narration-expression-evaluation-is-distribution"):on(this.model)||Jn(this.model)||Kd(this.model)||Hd(this.model)?t=this.controller.s("graphing-calculator-narration-expression-evaluation-is-significance-test"):Cl(this.model)&&(t=this.controller.s("graphing-calculator-narration-expression-evaluation-is-confidence"));if(this.model.shouldGraph&&(e.is_graphable||e.is_regression)){e.is_graphable&&e.is_regression?t+=" "+this.controller.s("graphing-calculator-narration-expression-evaluation-has-graph-and-regression"):e.is_regression?t+=" "+this.controller.s("graphing-calculator-narration-expression-evaluation-has-regression"):t+=" "+this.controller.s("graphing-calculator-narration-expression-evaluation-has-graph");let o=this.controller.getAudioGraph();o&&o.agNavigator.canTrace(this.model)&&(lo?t+=" "+this.controller.s("graphing-calculator-narration-expression-audio-trace-mac"):t+=" "+this.controller.s("graphing-calculator-narration-expression-audio-trace-windows"))}return this.controller.toneEnabled()&&Xn(this.model)&&(this.model.hidden?t+=" "+this.controller.s("graphing-calculator-narration-expression-tone-muted"):t+=" "+this.controller.s("graphing-calculator-narration-expression-tone-unmuted")),t}handlePressedKey(e){let t=Pe(e);if(!(!t||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)&&(t==="Esc"?(this.controller.isInEditListMode()?this.exitEditListMode():Rr(),this.hasSlider()&&this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:this.model.id}}),e.preventDefault(),e.stopPropagation()):(t==="Up"||t==="Down"||t==="Enter")&&(this.controller.dispatch({type:"on-special-key-pressed",key:t}),e.preventDefault(),e.stopPropagation()),!this.isReadonly()&&(t==="Del"||t==="Backspace"))){let o=Qn();Qa(this.model)&&(!o||NK(o))&&(this.controller.dispatch({type:"on-special-key-pressed",key:t==="Del"?"Delete":t}),e.preventDefault(),e.stopPropagation())}}handleEditableMathquillPressedKey(e,t){var i;let o=qe.getFocusedMathquill();if(o){if(t&&this.controller.isGraphPaperFocused()){let n=(i=this.controller.getGrapher2d())==null?void 0:i.poiController;if(!n)return;let a=n.keyboardAttentionManager;if(e==="Tab"||e==="Shift-Tab"){t.stopPropagation(),t.preventDefault(),a.focusNextObjFromKeyboard({direction:t.shiftKey?"prev":"next"});return}else if(e==="Left"||e==="Right"||e==="Up"||e==="Down"||e==="Shift-Left"||e==="Shift-Right"||e==="Shift-Up"||e==="Shift-Down"){t.stopPropagation(),t.preventDefault(),t&&n.moveGeoPointFromKeyboard(t);return}else if(e==="Enter"){t.stopPropagation(),t.preventDefault();let s=a.getKeyboardAttention();n.activateGeoObjectFromKeyboard(s,t),this.controller.getEvaluator().notifyWhenSynced(()=>{let l=this.controller.getValidCursorContext(),c=this.model.formula.cursor_context;if(l&&__dcg_shared_module_exports__['s'](l,c)){let p=this.controller.getFocusLocation();if(p&&p.type==="expression"&&p.id===this.model.id&&!p.isFakeGraphFocus&&this.controller.dispatch({type:"set-focus-location",location:{...p,isFakeGraphFocus:!0}}),s){let h=a.findTabbableObjectsForCurrentTool(s);h.currentIsTabbable&&a.updateKeyboardAttention(h.targets[h.currentTabIndex],{describe:!1})}}});return}else if(e==="Esc"){t.stopPropagation(),t.preventDefault(),this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.model.id}});return}}if(e==="Esc"){Rr(),this.hasSlider()&&this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:this.model.id}});return}else{if(e==="Up"||e==="Down")return qe.applyArrowKeyAndReturnIfWasAtBounds(o,e,t)?this.controller.dispatch({type:"on-special-key-pressed",key:e}):void 0;if(e==="Delete"||e==="Backspace"){if(Qa(this.model))return this.controller.dispatch({type:"on-special-key-pressed",key:e})}else if(e==="Enter")return t&&(t.preventDefault(),t.stopPropagation()),this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"})}o.keystroke(e,t),this.handleLatexChanged(o.latex())}}handleLatexChanged(e){e!==this.model.latex&&this.controller.dispatch({type:"set-item-latex",id:this.id,latex:e,source:"user-edit"})}doesNodeBelongToSliderLimit(e){return!e||!this.rootNode.contains(e)?!1:!!e.closest("[data-dcg-label]")}handleMQFocusedChanged(e,t){e?this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.id}}):!this.doesNodeBelongToSliderLimit(t.relatedTarget)&&this.lastBrailleMode===this.controller.getBrailleMode()&&this.controller.dispatch({type:"blur-focus-location",location:{type:"expression",id:this.id}})}onMouseSelect(e){this.isReadonly()||e.device!=="keyboard"&&(e.type==="dcg-tap"&&e.device==="mouse"||e.type==="dcg-tapstart"&&e.device==="touch"||Or(e)||(Dt(e),this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.id}})))}isReadonly(){return this.controller.isItemReadonly(this.id)}isFocused(){let e=this.controller.getFocusLocation();return!e||e.type!=="expression"?!1:e.id===this.id}};var ut=function(r,e,t){var o=document.createElement("img"),i,n;if(o.onerror=e,o.onload=function(){n&&!(t&&t.noRevoke)&&ut.revokeObjectURL(n),e&&e(ut.scale(o,t))},ut.isInstanceOf("Blob",r)||ut.isInstanceOf("File",r))i=n=ut.createObjectURL(r),o._type=r.type;else if(typeof r=="string")i=r,t&&t.crossOrigin&&(o.crossOrigin=t.crossOrigin);else return!1;return i?(o.src=i,o):ut.readFile(r,function(a){var s=a.target;s&&s.result?o.src=s.result:e&&e(a)})},RE=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;ut.isInstanceOf=function(r,e){return Object.prototype.toString.call(e)==="[object "+r+"]"};ut.transformCoordinates=function(){};ut.getTransformedOptions=function(r){return r};ut.renderImageToCanvas=function(r,e,t,o,i,n,a,s,l,c){return r.getContext("2d").drawImage(e,t,o,i,n,a,s,l,c),r};ut.hasCanvasOption=function(r){return r.canvas||r.crop};ut.scale=function(r,e){e=e||{};var t=document.createElement("canvas"),o=r.getContext||ut.hasCanvasOption(e)&&t.getContext,i=r.naturalWidth||r.width,n=r.naturalHeight||r.height,a=i,s=n,l,c,p,h,g,m,b,x,E,S=function(){var T=Math.max((p||a)/a,(h||s)/s);T>1&&(a=Math.ceil(a*T),s=Math.ceil(s*T))},k=function(){var T=Math.min((l||a)/a,(c||s)/s);T<1&&(a=Math.ceil(a*T),s=Math.ceil(s*T))};return o&&(e=ut.getTransformedOptions(e),b=e.left||0,x=e.top||0,e.sourceWidth?(g=e.sourceWidth,e.right!==void 0&&e.left===void 0&&(b=i-g-e.right)):g=i-b-(e.right||0),e.sourceHeight?(m=e.sourceHeight,e.bottom!==void 0&&e.top===void 0&&(x=n-m-e.bottom)):m=n-x-(e.bottom||0),a=g,s=m),l=e.maxWidth,c=e.maxHeight,p=e.minWidth,h=e.minHeight,o&&l&&c&&e.crop?(a=l,s=c,E=g/m-l/c,E<0?(m=c*g/l,e.top===void 0&&e.bottom===void 0&&(x=(n-m)/2)):E>0&&(g=l*m/c,e.left===void 0&&e.right===void 0&&(b=(i-g)/2))):((e.contain||e.cover)&&(p=l=l||p,h=c=c||h),e.cover?(k(),S()):(S(),k())),o?(t.width=a,t.height=s,ut.transformCoordinates(t,e),ut.renderImageToCanvas(t,r,b,x,g,m,0,0,a,s)):(r.width=a,r.height=s,r)};ut.createObjectURL=function(r){return RE?RE.createObjectURL(r):!1};ut.revokeObjectURL=function(r){return RE?RE.revokeObjectURL(r):!1};ut.readFile=function(r,e,t){if(window.FileReader){var o=new FileReader;if(o.onload=o.onerror=e,t=t||"readAsDataURL",o[t])return o[t](r),o}return!1};(!window.navigator||!window.navigator.platform||!/iP(hone|od|ad)/.test(window.navigator.platform))&&(n6=ut.renderImageToCanvas,ut.detectSubsampling=function(r){var e,t;return r.width*r.height>1024*1024?(e=document.createElement("canvas"),e.width=e.height=1,t=e.getContext("2d"),t.drawImage(r,-r.width+1,0),t.getImageData(0,0,1,1).data[3]===0):!1},ut.detectVerticalSquash=function(r,e){var t=r.naturalHeight||r.height,o=document.createElement("canvas"),i=o.getContext("2d"),n,a,s,l,c;for(e&&(t/=2),o.width=1,o.height=t,i.drawImage(r,0,0),n=i.getImageData(0,0,1,t).data,a=0,s=t,l=t;l>a;)c=n[(l-1)*4+3],c===0?s=l:a=l,l=s+a>>1;return l/t||1},ut.renderImageToCanvas=function(r,e,t,o,i,n,a,s,l,c){if(e._type==="image/jpeg"){var p=r.getContext("2d"),h=document.createElement("canvas"),g=1024,m=h.getContext("2d"),b,x,E,S;if(h.width=g,h.height=g,p.save(),b=ut.detectSubsampling(e),b&&(t/=2,o/=2,i/=2,n/=2),x=ut.detectVerticalSquash(e,b),b||x!==1){for(o*=x,l=Math.ceil(g*l/i),c=Math.ceil(g*c/n/x),s=0,S=0;S<n;){for(a=0,E=0;E<i;)m.clearRect(0,0,g,g),m.drawImage(e,t,o,i,n,-E,-S,i,n),p.drawImage(h,0,0,g,g,a,s,l,c),E+=g,a+=l;S+=g,s+=c}return p.restore(),r}}return n6(r,e,t,o,i,n,a,s,l,c)});var n6,gle=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);ut.blobSlice=gle&&function(){var r=this.slice||this.webkitSlice||this.mozSlice;return r.apply(this,arguments)};ut.metaDataParsers={jpeg:{65505:[]}};ut.parseMetaData=function(r,e,t){t=t||{};var o=this,i=t.maxMetaDataSize||262144,n={},a=!(window.DataView&&r&&r.size>=12&&r.type==="image/jpeg"&&ut.blobSlice);(a||!ut.readFile(ut.blobSlice.call(r,0,i),function(s){var l=s.target.result,c=new DataView(l),p=2,h=c.byteLength-4,g=p,m,b,x,E;if(c.getUint16(0)===65496){for(;p<h&&(m=c.getUint16(p),m>=65504&&m<=65519||m===65534);){if(b=c.getUint16(p+2)+2,p+b>c.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(x=ut.metaDataParsers.jpeg[m],x)for(E=0;E<x.length;E+=1)x[E].call(o,c,p,b,n,t);p+=b,g=p}!t.disableImageHead&&g>6&&(l.slice?n.imageHead=l.slice(0,g):n.imageHead=new Uint8Array(l).subarray(0,g))}else console.log("Invalid JPEG file: Missing JPEG marker.");e(n)},"readAsArrayBuffer"))&&e(n)};var mle=ut.hasCanvasOption;ut.hasCanvasOption=function(r){return mle(r)||r.orientation};ut.transformCoordinates=function(r,e){var t=r.getContext("2d"),o=r.width,i=r.height,n=e.orientation;if(n)switch(n>4&&(r.width=i,r.height=o),n){case 2:t.translate(o,0),t.scale(-1,1);break;case 3:t.translate(o,i),t.rotate(Math.PI);break;case 4:t.translate(0,i),t.scale(1,-1);break;case 5:t.rotate(.5*Math.PI),t.scale(1,-1);break;case 6:t.rotate(.5*Math.PI),t.translate(0,-i);break;case 7:t.rotate(.5*Math.PI),t.translate(o,-i),t.scale(-1,1);break;case 8:t.rotate(-.5*Math.PI),t.translate(-o,0);break}};ut.getTransformedOptions=function(r){if(!r.orientation||r.orientation===1)return r;var e={},t;for(t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);switch(r.orientation){case 2:e.left=r.right,e.right=r.left;break;case 3:e.left=r.right,e.top=r.bottom,e.right=r.left,e.bottom=r.top;break;case 4:e.top=r.bottom,e.bottom=r.top;break;case 5:e.left=r.top,e.top=r.left,e.right=r.bottom,e.bottom=r.right;break;case 6:e.left=r.top,e.top=r.right,e.right=r.bottom,e.bottom=r.left;break;case 7:e.left=r.bottom,e.top=r.right,e.right=r.top,e.bottom=r.left;break;case 8:e.left=r.bottom,e.top=r.left,e.right=r.top,e.bottom=r.right;break}return r.orientation>4&&(e.maxWidth=r.maxHeight,e.maxHeight=r.maxWidth,e.minWidth=r.minHeight,e.minHeight=r.minWidth,e.sourceWidth=r.sourceHeight,e.sourceHeight=r.sourceWidth),e};ut.ExifMap=function(){return this};ut.ExifMap.prototype.map={Orientation:274};ut.ExifMap.prototype.get=function(r){return this[r]||this[this.map[r]]};ut.getExifThumbnail=function(r,e,t){var o,i,n;if(!t||e+t>r.byteLength){console.log("Invalid Exif data: Invalid thumbnail data.");return}for(o=[],i=0;i<t;i+=1)n=r.getUint8(e+i),o.push((n<16?"0":"")+n.toString(16));return"data:image/jpeg,%"+o.join("%")};ut.exifTagTypes={1:{getValue:function(r,e){return r.getUint8(e)},size:1},2:{getValue:function(r,e){return String.fromCharCode(r.getUint8(e))},size:1,ascii:!0},3:{getValue:function(r,e,t){return r.getUint16(e,t)},size:2},4:{getValue:function(r,e,t){return r.getUint32(e,t)},size:4},5:{getValue:function(r,e,t){return r.getUint32(e,t)/r.getUint32(e+4,t)},size:8},9:{getValue:function(r,e,t){return r.getInt32(e,t)},size:4},10:{getValue:function(r,e,t){return r.getInt32(e,t)/r.getInt32(e+4,t)},size:8}};ut.exifTagTypes[7]=ut.exifTagTypes[1];ut.getExifValue=function(r,e,t,o,i,n){var a=ut.exifTagTypes[o],s,l,c,p,h,g;if(!a){console.log("Invalid Exif data: Invalid tag type.");return}if(s=a.size*i,l=s>4?e+r.getUint32(t+8,n):t+8,l+s>r.byteLength){console.log("Invalid Exif data: Invalid data offset.");return}if(i===1)return a.getValue(r,l,n);for(c=[],p=0;p<i;p+=1)c[p]=a.getValue(r,l+p*a.size,n);if(a.ascii){for(h="",p=0;p<c.length&&(g=c[p],g!=="\0");p+=1)h+=g;return h}return c};ut.parseExifTag=function(r,e,t,o,i){var n=r.getUint16(t,o);i.exif[n]=ut.getExifValue(r,e,t,r.getUint16(t+2,o),r.getUint32(t+4,o),o)};ut.parseExifTags=function(r,e,t,o,i){var n,a,s;if(t+6>r.byteLength){console.log("Invalid Exif data: Invalid directory offset.");return}if(n=r.getUint16(t,o),a=t+2+12*n,a+4>r.byteLength){console.log("Invalid Exif data: Invalid directory size.");return}for(s=0;s<n;s+=1)this.parseExifTag(r,e,t+2+12*s,o,i);return r.getUint32(a,o)};ut.parseExifData=function(r,e,t,o,i){if(!i.disableExif){var n=e+10,a,s,l;if(r.getUint32(e+4)===1165519206){if(n+8>r.byteLength){console.log("Invalid Exif data: Invalid segment size.");return}if(r.getUint16(e+8)!==0){console.log("Invalid Exif data: Missing byte alignment offset.");return}switch(r.getUint16(n)){case 18761:a=!0;break;case 19789:a=!1;break;default:console.log("Invalid Exif data: Invalid byte alignment marker.");return}if(r.getUint16(n+2,a)!==42){console.log("Invalid Exif data: Missing TIFF marker.");return}s=r.getUint32(n+4,a),o.exif=new ut.ExifMap,s=ut.parseExifTags(r,n,n+s,a,o),s&&!i.disableExifThumbnail&&(l={exif:{}},s=ut.parseExifTags(r,n,n+s,a,l),l.exif[513]&&(o.exif.Thumbnail=ut.getExifThumbnail(r,n+l.exif[513],l.exif[514]))),o.exif[34665]&&!i.disableExifSub&&ut.parseExifTags(r,n,n+o.exif[34665],a,o),o.exif[34853]&&!i.disableExifGps&&ut.parseExifTags(r,n,n+o.exif[34853],a,o)}}};ut.metaDataParsers.jpeg[65505].push(ut.parseExifData);ut.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"};ut.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}};ut.ExifMap.prototype.getText=function(r){var e=this.get(r);switch(r){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[r][e];case"ExifVersion":case"FlashpixVersion":return String.fromCharCode(e[0],e[1],e[2],e[3]);case"ComponentsConfiguration":return this.stringValues[r][e[0]]+this.stringValues[r][e[1]]+this.stringValues[r][e[2]]+this.stringValues[r][e[3]];case"GPSVersionID":return e[0]+"."+e[1]+"."+e[2]+"."+e[3]}return String(e)};(function(r){var e=r.tags,t=r.map,o;for(o in e)e.hasOwnProperty(o)&&(t[e[o]]=o)})(ut.ExifMap.prototype);ut.ExifMap.prototype.getAll=function(){var r={},e,t;for(e in this)this.hasOwnProperty(e)&&(t=this.tags[e],t&&(r[t]=this.getText(t)));return r};function a6(r,e){let t=[.92,.86,.8,.7,.6,.5,.4,.3,.2,.1],o;for(let i=0;i<t.length;i++)if(o=r.toDataURL("image/jpeg",t[i]),o.length<e)return o;return o}function fle(r,e){let t=r.toDataURL().length,o=r.width,i=r.height,n=document.createElement("canvas"),a;for(let s=0;s<2;s++){let l=Math.sqrt(e/t);if(o=Math.round(l*o),i=Math.round(l*i),n.height=i,n.width=o,n.getContext("2d").drawImage(r,0,0,o,i),a=n.toDataURL(),t=a.length,t<e)return a}return a}function ble(r){let t=r.getContext("2d").getImageData(0,0,r.width,r.height).data;for(let o=3;o<t.length;o+=4)if(t[o]!==255)return!0;return!1}function FE(r,e){ut(r,o=>{if(!o.toDataURL){e(!0);return}let i=2e5,n;r.type==="image/jpeg"?n=a6(o,i):(n=o.toDataURL(),n.length>i&&(n=n.length>.75*o.width*o.height&&!ble(o)?a6(o,i):fle(o,i))),e(null,n)},{orientation:!0,canvas:!0,maxWidth:1600,maxHeight:1600})}ce();ie();var NE=__dcg_shared_module_exports__['e'](se());function GE(r){let e=document.createElement("a");return e.href=r,e.href}var{SwitchUnion:yle,If:xle}=NE.Components,Yu=class extends NE.View{init(){this.model=this.props.model(),this.controller=this.props.controller()}template(){return d("div",{class:u("dcg-expression-icon-container dcg-image-icon-container"),children:yle(this.bindFn(this.typeOfIcon),{error:()=>d(io,{error:()=>this.controller.unpack(this.model.error),isWhite:this.bindFn(this.isSelected)}),failed:()=>d("span",{}),loading:()=>d(ho,{iconType:this.const("loading")}),hidden:()=>this.buildIconView(),image:()=>this.buildIconView()})})}buildIconView(){return _("div",{class:u("dcg-circular-icon-container"),role:u("button"),tabIndex:u("0"),"dcg-open-menu-guid":()=>this.getMenuGUID(),"aria-label":this.bindFn(this.getIconAriaLabel),onTap:e=>{if(!Or(e,"dragdrop")&&!e.wasLongheld()){if(this.myOptionsOpen())return this.toggleOptions(e);if(this.controller.isInEditListMode()||e.shiftKey)return this.toggleOptions(e);this.toggleImageShown()}},onLongHold:e=>{Dt(e,"dcg-longhold"),Dt(e,"dcg-tap"),this.toggleOptions(e)},manageFocus:this.const(_e({controller:this.controller,location:{type:"image-icon",id:this.model.id}})),children:[d(ho,{iconType:()=>this.typeOfIcon()==="hidden"?"hidden":"background",backgroundImage:this.bindFn(this.getBackgroundImage),backgroundOpacity:this.const(1),whiteIcon:this.bindFn(this.isSelected)}),d(xle,{predicate:()=>this.model.disableGraphInteractions,children:()=>d("i",{class:u("dcg-graph-interaction-disabled dcg-icon-lock")})})]})}isSelected(){return this.controller.isItemSelected(this.model.id)||this.controller.isItemBeingDragged(this.model.id)}typeOfIcon(){return this.model.loadStatus==="loading"?"loading":this.model.loadStatus==="failed"?"failed":this.hasError()?"error":this.model.shouldGraph?"image":"hidden"}getMenuGUID(){return this.model.guid}myOptionsOpen(){return this.controller.isItemSettingsMenuOpen(this.getMenuGUID())}toggleOptions(e){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"image",model:this.model,guid:this.getMenuGUID(),focusFirstOption:e.device==="keyboard"}})}hasError(){return!!this.model.error&&this.controller.getBrailleMode()==="none"}getBackgroundImage(){return this.model.image_url===this.lastURL?this.lastEncodedURL:(this.lastURL=this.model.image_url,this.lastEncodedURL='url("'+GE(this.model.image_url)+'")',this.lastEncodedURL)}toggleImageShown(){this.controller.dispatch({type:"toggle-item-hidden",id:this.model.id}),this.controller.dispatch({type:"set-focus-location",location:{type:"image-icon",id:this.model.id}})}getIconAriaLabel(){return this.myOptionsOpen()?Ar(this.model,"hide-options"):this.controller.isInEditListMode()?Ar(this.model,"show-options"):this.model.hidden?Ar(this.model,"show"):Ar(this.model,"hide")}};var VE={};__dcg_shared_module_exports__['d'](VE,{LARGE:()=>Sle,MEDIUM:()=>GO,SMALL:()=>wle,VERY_LARGE:()=>Tle,VERY_SMALL:()=>vle});var vle=9,wle=12,GO=16,Sle=20,Tle=24;ya();ce();ie();bn();var dI=__dcg_shared_module_exports__['e'](se());Vt();ce();ie();var qE=__dcg_shared_module_exports__['e'](se());ce();ie();var UE=__dcg_shared_module_exports__['e'](se());ce();ie();var s6=__dcg_shared_module_exports__['e'](se());Vt();var zc=class extends s6.View{init(){this.controller=this.props.controller()}template(){return _("div",{class:u("dcg-do-not-blur"),onTap:this.bindFn(this.newImage),handleEvent:u("true"),role:u("button"),tabIndex:()=>this.props.readonly()?-1:0,"aria-label":this.props.ariaLabel,"aria-disabled":()=>this.props.readonly(),manageFocus:this.const(this.props.location?_e({controller:this.controller,location:this.props.location()}):void 0),children:[this.props.children,d("input",{type:u("file"),accept:u("image/*"),style:u("display: none"),didMount:this.bindFn(this.didMountFileInput)})]})}didMountFileInput(e){this.fileInputNode=e,re(e).on("change",()=>{this.props.onFileChange(e.files),e.value=""})}newImage(){this.props.readonly()||this.fileInputNode.click()}};var{If:l6,Switch:c6}=UE.Components,BE=class extends UE.View{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id}template(){return _("div",{class:u("dcg-clickable-image-info-view"),role:u("region"),"aria-label":()=>this.controller.s("graphing-calculator-narration-clickable-image-options"),children:[_("div",{class:u("dcg-clickable-image-state-container"),children:[d(Re,{tooltip:()=>this.tooltip("hovered"),gravity:this.const("s"),children:d(zc,{controller:()=>this.controller,ariaLabel:()=>this.tooltip("hovered"),onFileChange:e=>this.updateImage("hovered",e),readonly:()=>this.controller.isItemReadonly(this.id),children:d(c6,{children:()=>d("div",{class:u("dcg-clickable-image-state"),style:()=>this.getStyleForState("hovered")})},this.bindFn(this.hoveredStatus))})}),d(l6,{predicate:()=>!!this.model.clickableInfo.hoveredImage,children:()=>d("div",{class:u("dcg-clickable-image-state-close"),onTap:()=>this.removeImageState("hovered"),ariaLabel:()=>this.controller.s("graphing-calculator-label-remove-hovered-image"),role:u("button"),tabIndex:u(0),children:d("i",{class:u("dcg-icon-remove"),"aria-hidden":u("true")})})}),d("div",{role:u("heading"),"aria-level":u("2"),class:u("dcg-clickable-image-label"),children:()=>this.controller.s("graphing-calculator-label-hovered")})]}),_("div",{class:u("dcg-clickable-image-state-container"),children:[d(Re,{tooltip:()=>this.tooltip("depressed"),gravity:this.const("s"),children:d(zc,{controller:()=>this.controller,ariaLabel:()=>this.tooltip("depressed"),onFileChange:e=>this.updateImage("depressed",e),readonly:()=>this.controller.isItemReadonly(this.id),children:d(c6,{children:()=>d("div",{class:u("dcg-clickable-image-state"),style:()=>this.getStyleForState("depressed")})},this.bindFn(this.depressedStatus))})}),d(l6,{predicate:()=>!!this.model.clickableInfo.depressedImage,children:()=>d("div",{class:u("dcg-clickable-image-state-close"),onTap:()=>this.removeImageState("depressed"),ariaLabel:()=>this.controller.s("graphing-calculator-label-remove-depressed-image"),role:u("button"),tabIndex:u(0),children:d("i",{class:u("dcg-icon-remove"),"aria-hidden":u("true")})})}),d("div",{role:u("heading"),"aria-level":u("2"),class:u("dcg-clickable-image-label"),children:()=>this.controller.s("graphing-calculator-label-depressed")})]})]})}hoveredStatus(){return this.hoveredUploading?"loading":"background"}depressedStatus(){return this.depressedUploading?"loading":"background"}tooltip(e){return(e==="hovered"?this.model.clickableInfo.hoveredImage:this.model.clickableInfo.depressedImage)?e==="depressed"?this.controller.s("graphing-calculator-label-change-depressed-image-tooltip"):this.controller.s("graphing-calculator-label-change-hovered-image-tooltip"):e==="depressed"?this.controller.s("graphing-calculator-label-add-depressed-image-tooltip"):this.controller.s("graphing-calculator-label-add-hovered-image-tooltip")}getImageURLForState(e){let t;if(e==="hovered"){if(this.hoveredStatus()!=="background")return"";t="hoveredImage"}else{if(this.depressedStatus()!=="background")return"";t="depressedImage"}let o=this.model.clickableInfo[t];return o?`url(${o})`:`url(${this.model.image_url})`}getStyleForState(e){let t={"background-image":this.getImageURLForState(e),opacity:"1"};return e==="hovered"&&!this.model.clickableInfo.hoveredImage&&(t.opacity="0.5"),t}removeImageState(e){e==="hovered"?this.controller.dispatch({type:"set-hovered-image",id:this.model.id,url:""}):this.controller.dispatch({type:"set-depressed-image",id:this.model.id,url:""})}updateImage(e,t){if(!t||!t[0])return;let o=t[0];e==="hovered"&&(this.hoveredUploading=!0),e==="depressed"&&(this.depressedUploading=!0),this.controller.getGraphSettings().config.imageUploadCallback(o,(i,n)=>{e==="hovered"&&(this.hoveredUploading=!1),e==="depressed"&&(this.depressedUploading=!1),!i&&n&&(e==="hovered"?this.controller.dispatch({type:"set-hovered-image",id:this.model.id,url:n}):this.controller.dispatch({type:"set-depressed-image",id:this.model.id,url:n}))})}};ce();ie();var d6=__dcg_shared_module_exports__['e'](se()),Fr=class extends d6.View{template(){return d("div",{class:()=>({"dcg-toggle-view":!0,"dcg-toggled":this.props.toggled()}),"aria-label":()=>this.props.ariaLabel(),role:u("checkbox"),tabIndex:u("0"),"aria-checked":()=>this.props.toggled(),toggled:()=>this.props.toggled(),onTap:this.bindFn(this.props.onChange),children:d("div",{class:u("dcg-toggle-track"),children:d("div",{class:u("dcg-toggle-switch")})})})}};ce();ie();var NO=/\{\$([a-zA-Z0-9\-]+([a-zA-Z0-9\-]+_)*[a-zA-Z0-9\-]+)\}/;function p6(r,e){let t=0,o=0,i={},n={},a=s(r);if(!/^<0>/.test(a)||!/<\/0>$/.test(a))throw new Error("Expected template string to start and end with <0> and </0>, but found "+JSON.stringify(a));return a.slice(3,-4).trim();function s(c){if(e.isConst(c))return e.getConstValue(c);if(e.isNamedBinding(c)){let p=l(i,e.getBindingName(c)),h=`{$${p}}`;if(!NO.test(h))throw new Error(`Invalid <Localize> variable: ${h}.`);return e.addBinding&&e.addBinding(p,c),i[p]=!0,h}else if(c!==r&&e.isView(c)){let p=l(n,e.getViewName(c));if(!/[a-zA-Z0-9\-_]/.test(p))throw new Error(`Invalid <Localize> subview identifier: ${p}.`);return e.addView&&e.addView(p,c),n[p]=!0,`<${p}/>`}else if(e.isBinding(c)){let p=l(i,`v${t++}`),h=`{$${p}}`;return e.addBinding&&e.addBinding(p,c),i[p]=!0,h}else{let p=`${o++}`;e.addElement&&e.addElement(p,c);let h=[];return e.forEachChild(c,g=>{h.push(s(g))}),n[p]=!0,h.length>0?`<${p}>${h.join("")}</${p}>`:`<${p}/>`}}function l(c,p){let h=0,g=p;for(;c[g];)g=`${p}-${++h}`;return g}}var Aa=__dcg_shared_module_exports__['e'](se()),zE=__dcg_shared_module_exports__['e'](S6());function Ale(r){return r.__DCGViewLocalizeBindingName}function T6(r){return Aa.isSpec(r)&&"__DCGViewLocalizeViewName"in r}var Eo=class extends Aa.View{init(){this.viewMap={},this.elementMap={},this.bindingMap={},this.i18n=this.props.i18n();let e=d("div",{style:u("display: contents;"),children:this.props.children});if(Aa.isSpec(e)&&e.type==="element")this.templateString=this.serializeToTemplateString(e);else throw new Error("programming error: expected root localize to be DCGElementSpec")}template(){return d(Aa.Components.If,{predicate:()=>this.shouldShow(),children:()=>d(Aa.Components.Switch,{children:e=>this.renderDeserializedTemplateNode(this.parseAndValidate(e))},()=>BO(this.translatedString()))})}shouldShow(){let e=this.props.options&&this.props.options();return e&&e.hideUntranslatedView&&this.i18n.hasTranslation?this.i18n.hasTranslation(this.props.key()):!0}translatedString(){let e={};for(let t in this.bindingMap)e[t]=Sa(`{$${t}}`);return this.i18n.s(this.props.key(),e)}static variable(e,t){let o=()=>t();return o.__DCGViewLocalizeBindingName=e,o}static subview(e,t){let o=t();if(Aa.isSpec(o)||(o=d("span",{})),Aa.isSpec(o))return{...o,__DCGViewLocalizeViewName:e};throw new Error("expected a DCGElementSpec")}parseAndValidate(e){let t=(0,zE.parse)(e),o={},i={};n(t);for(let a in this.elementMap)if(!i[a])return(0,zE.parse)(BO(this.templateString));for(let a in this.bindingMap)if(!o[a])return(0,zE.parse)(BO(this.templateString));return t;function n(a){if(Array.isArray(a)){for(let s of a)n(s);return}a.name==="token"?o[a.attrs.id]=!0:a.type!=="text"&&(i[a.name]=!0,n(a.children))}}renderDeserializedTemplateNode(e){if(Array.isArray(e))return e.map(t=>this.renderDeserializedTemplateNode(t));if(e.type==="text")return Aa.const(e.content||"");if(e.name==="token"){let t=this.bindingMap[e.attrs.id];return t||(()=>"")}else if(this.elementMap[e.name]){let t=this.elementMap[e.name],o=e.children.map(i=>this.renderDeserializedTemplateNode(i));return{...t,props:{...t.props,children:o}}}else return this.viewMap[e.name]?this.viewMap[e.name]:{isDCGElementSpec:!0,type:"element",tagName:"span",props:{children:[]}}}serializeToTemplateString(e){return p6(e,{isView:T6,isConst:Lle,isBinding:t=>typeof t=="function",isNamedBinding:Ale,getConstValue:t=>t(),getBindingName:t=>t.__DCGViewLocalizeBindingName,getViewName:t=>t.__DCGViewLocalizeViewName,addBinding:(t,o)=>{this.bindingMap[t]=o},addElement:(t,o)=>{this.elementMap[t]=o},addView:(t,o)=>{if(this.viewMap[t])throw new Error(`Unexpected duplicate view ${t}.`);this.viewMap[t]=o},forEachChild:(t,o)=>{for(let i of t.props.children){if(typeof i=="string"&&(i=this.const(i)),Aa.isSpec(i)){if(i.type==="view"&&!T6(i))throw new Error("Bare DCGViews are not allowed inside <Localize>. Use Localize.subview().");if(i.type==="fragment")throw new Error("<Localize> does not support fragments yet")}if(typeof i=="boolean")throw new Error("<Localize> does not expect boolean as children. Must be wrapped in getter");if(typeof i=="number")throw new Error("<Localize> does not expect number as children. Must be wrapped in getter");if(i===null)throw new Error("<Localize> does not expect null as children. Must be wrapped in getter");if(i===void 0)throw new Error("<Localize> does not expect undefined as children. Must be wrapped in getter");o(i)}}})}};function Lle(r){return typeof r=="function"&&r.isDCGViewConst}function BO(r){return`<0>${r}</0>`.replace(new RegExp(NO.source,"g"),(t,o)=>`<token id="${o}"/>`)}function Uo(r,e,t){return Ple(r,e)===t}function Ple(r,e){let t=r.getFocusLocation();if(!(!t||t.type!=="expression-menu"||t.id!==e))return t.location}function zo(r,e,t,o){let i=e;t?r.dispatch({type:"set-focus-location",location:{type:"expression-menu",id:i,location:o}}):r.dispatch({type:"blur-focus-location",location:{type:"expression-menu",id:i,location:o}})}var{If:UO,IfDefined:Dle}=qE.Components,lf=class extends qE.View{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return _("div",{class:u("dcg-options-menu-section dcg-clickable-section"),children:[_("div",{class:u("dcg-options-menu-section-title"),children:[()=>this.controller.s("graphing-calculator-heading-clickable"),d(Fr,{ariaLabel:()=>this.controller.s("graphing-calculator-narration-make-clickable"),toggled:this.props.isOpen,onChange:this.bindFn(this.toggleClickable)})]}),d(UO,{predicate:this.props.isOpen,children:()=>_("div",{class:u("dcg-options-menu-content"),children:[_("div",{class:u("dcg-clickable-menu-row"),children:[d("span",{class:u("dcg-input-label"),children:()=>this.controller.s("graphing-calculator-label-update-on-click")}),d(ir,{latex:()=>this.model.clickableInfo.latex,ariaLabel:()=>this.controller.s("graphing-calculator-narration-click-action"),...Wr(this.controller,{additionalOperators:["index"]}),placeholder:this.const(""),isFocused:()=>Uo(this.controller,this.model.id,"updaterule"),selectOnFocus:this.const(!0),getAriaPostLabel:this.const(""),hasError:()=>this.hasError(),onUserChangedLatex:this.bindFn(this.dispatchUpdateRuleLatexIfChanged),onFocusedChanged:e=>zo(this.controller,this.model.id,e,"updaterule"),dataLabelAttributeValue:this.const("click-handler")}),Dle(()=>this.packedError(),e=>d("span",{class:u("dcg-clickable-info-error-container"),children:d(io,{error:()=>this.controller.unpack(e()),size:this.const("small")})}))]}),d(UO,{predicate:this.bindFn(this.isList),children:()=>d("div",{class:u("dcg-clickable-list-index-notice"),children:_(Eo,{i18n:this.const(this.controller),children:["Use"," ",d("span",{class:()=>({"dcg-index-variable-marker":!0,"dcg-btn":!0,"dcg-btn-light-gray":!0,"dcg-mathquill-has-focus":Uo(this.controller,this.model.id,"updaterule"),"dcg-do-not-blur":!0}),onTap:this.bindFn(this.insertIndex),children:"index"})," ","to reference the clicked index in the list."]},this.const("graphing-calculator-label-list-index"))})}),d(UO,{predicate:()=>this.model.type==="image",children:()=>d("div",{class:u("dcg-clickable-menu-row"),children:d(BE,{controller:()=>this.controller,model:()=>this.model})})})]})})]})}insertIndex(){this.controller.dispatch({type:"keypad/type-text",text:"index"})}isList(){return this.model.formula?!!this.model.formula.is_concrete_list:!1}hasError(){return this.packedError()!==void 0}packedError(){if(this.model.formula.click_handler&&this.model.formula.click_handler.status==="error")return this.model.formula.click_handler.error}toggleClickable(){this.controller.dispatch({type:"set-clickableinfo-prop",id:this.model.id,prop:"enabled",value:!this.model.clickableInfo.enabled}),this.model.clickableInfo.enabled&&zo(this.controller,this.model.id,!0,"updaterule")}dispatchUpdateRuleLatexIfChanged(e){this.model.clickableInfo.latex!==e&&this.controller.dispatch({type:"set-clickableinfo-rule-latex",id:this.model.id,latex:e})}};ce();ie();var E6=__dcg_shared_module_exports__['e'](se());ce();ie();var KE=__dcg_shared_module_exports__['e'](se());var{For:k6,If:HE}=KE.Components,cf=class extends KE.View{init(){this.controller=this.props.controller()}template(){return _("div",{class:u("dcg-color-picker-container"),role:u("group"),"aria-label":()=>this.controller.s("graphing-calculator-narration-color-picker-label"),onKeyDown:this.bindFn(this.handleKeydown),children:[d("div",{class:u("dcg-color-picker-menu dcg-do-not-blur"),role:u("listbox"),"aria-label":()=>this.controller.s("graphing-calculator-narration-color-picker-standard-colors-label"),children:d(k6.Simple,{each:()=>this.getColorValues(),children:e=>_("div",{class:u("dcg-color-tile"),handleEvent:u("true"),role:u("option"),"aria-label":()=>fl(this.controller,e),tabIndex:()=>this.isSelected(e)||this.isFirstAndNoneSelected(e)?0:-1,"aria-selected":()=>this.isSelected(e),manageFocus:()=>_e({controller:this.controller,location:{type:"color-picker-option",category:"standard",color:e}}),onTap:()=>this.props.onColorSelected(e),children:[d(Vc,{color:()=>({type:"single-color",value:e}),invertSwatches:()=>this.controller.invertSwatches()}),d(HE,{predicate:()=>this.isSelected(e),children:()=>d("i",{class:u("dcg-icon-check"),"aria-hidden":u("true")})})]})})}),d(HE,{predicate:()=>this.getUniqueCustomColors().length>0,children:()=>d("div",{class:u("dcg-color-picker-menu dcg-do-not-blur"),role:u("listbox"),"aria-label":()=>this.controller.s("graphing-calculator-narration-color-picker-custom-colors-label"),children:d(k6,{each:this.bindFn(this.getUniqueCustomColors),children:e=>d(Vm,{tooltip:()=>e().assignmentLatex,children:_("div",{class:u("dcg-color-tile"),handleEvent:u("true"),role:u("option"),"aria-label":()=>{let t=this.getColorValue(e());return t.type==="single-color"?fl(this.controller,t.value):ur(e().assignmentLatex)},tabIndex:()=>this.props.colorLatex()===e().assignmentLatex?0:-1,"aria-selected":()=>this.props.colorLatex()===e().assignmentLatex,manageFocus:()=>_e({controller:this.controller,location:{type:"color-picker-option",category:"custom",color:e().assignmentLatex}}),onTap:()=>this.props.onCustomColorSelected(e().assignmentLatex),children:[d(Vc,{color:()=>this.getColorValue(e()),invertSwatches:()=>this.controller.invertSwatches()}),d(HE,{predicate:()=>this.props.colorLatex()===e().assignmentLatex,children:()=>d("i",{class:()=>this.getCheckmarkClass(e()),"aria-hidden":u("true")})}),d(HE,{predicate:()=>{var t,o;return((o=(t=this.props).customColorVisibility)==null?void 0:o.call(t))==="suppressed"},children:()=>d("i",{class:u("dcg-icon-lock")})})]})})},e=>e.assignmentLatex)})})]})}hideColorFunctions(){var e,t,o;return(o=(t=(e=this.props).hideColorFunctions)==null?void 0:t.call(e))!=null?o:!1}isFirstAndNoneSelected(e){return e===this.getColorValues()[0]&&!this.props.selectedColor()}isSelected(e){let t=this.props.colorLatex();return t&&this.getUniqueCustomColors().map(i=>i.assignmentLatex).indexOf(t)>=0?!1:this.props.selectedColor()===e}getColorValues(){return Object.values(this.controller.getColors())}getUniqueCustomColors(){if(this.props.customColorVisibility&&this.props.customColorVisibility()==="hidden")return[];let e=[];e.push(...this.controller.getAllColorAssignments()),this.hideColorFunctions()||e.push(...this.controller.getAllColorFunctionAssignments());let t=__dcg_shared_module_exports__['j'](e,o=>o.assignmentLatex);return e.filter(o=>t[o.assignmentLatex]===1)}getColorValue(e){switch(e.id){case"shader":return{type:e.id};default:let t=this.controller.getColorById(e.id);return Array.isArray(t)?{type:"color-array",value:t}:/^data:image/.test(t)?{type:"image",value:t}:{type:"single-color",value:t}}}getCheckmarkClass(e){return $g(this.getColorValue(e),!1)?`dcg-icon-check ${Iq(this.getColorValue(e),!1)?"dcg-light-color":"dcg-mixed-color"}`:"dcg-icon-check"}handleKeydown(e){let t=this.controller.getFocusLocation();if((t==null?void 0:t.type)!=="color-picker-option"||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return;let o=Pe(e);if(!zn(o,"direction")&&!zn(o,"line"))return;e.preventDefault(),e.stopPropagation();let i=this.getColorValues(),n=this.getUniqueCustomColors().map(p=>p.assignmentLatex),a=i.length,s=t.category==="standard"?i.indexOf(t.color):a+n.indexOf(t.color),l=s,c=i.length+n.length-1;o==="Left"&&(l=s-1),o==="Right"&&(l=s+1),o==="Home"&&(l=0),o==="End"&&(l=1/0),o==="Up"&&s-a>=0&&(l=s-a),o==="Down"&&s+a<=c&&(l=s+a),l=__dcg_shared_module_exports__['Ob'](l,0,c),l!==s&&(l<a?(this.props.onColorSelected(i[l]),this.controller.dispatch({type:"set-focus-location",location:{type:"color-picker-option",category:"standard",color:i[l]}})):(this.props.onCustomColorSelected(n[l-a]),this.controller.dispatch({type:"set-focus-location",location:{type:"color-picker-option",category:"custom",color:n[l-a]}})))}};var lp=class extends E6.View{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return d("div",{class:u("dcg-options-menu-section dcg-section-without-title"),children:d("div",{class:u("dcg-options-menu-content"),children:d(cf,{controller:this.props.controller,colorLatex:this.bindFn(this.getColorLatex),selectedColor:this.bindFn(this.getModelColor),onColorSelected:this.bindFn(this.onColorSelected),onCustomColorSelected:this.bindFn(this.onCustomColorSelected),hideColorFunctions:this.bindFn(this.hideColorFunctions),customColorVisibility:this.bindFn(this.customColorVisibility)})})})}hideColorFunctions(){return this.model.type!=="expression"?!1:Iu(this.model)||zd(this.model)}customColorVisibility(){return this.model.type==="expression"&&$T(this.model)||this.model.type==="table"?"hidden":"visible"}onColorSelected(e){this.model.type!=="image"&&(this.model.type==="expression"?this.controller.dispatch({type:"set-item-color",id:this.model.id,color:e}):this.model.type==="table"?this.controller.dispatch({type:"set-tableregression-color",color:e,tableId:this.model.id}):this.controller.dispatch({type:"set-tablecolumn-color",color:e,tableId:this.model.table.id,columnId:this.model.id}))}onCustomColorSelected(e){this.model.type!=="image"&&(this.model.type==="expression"?this.controller.dispatch({type:"set-item-colorlatex",id:this.model.id,colorLatex:e}):this.model.type==="table-column"&&this.controller.dispatch({type:"set-tablecolumn-colorlatex",tableId:this.model.table.id,columnId:this.model.id,colorLatex:e}))}getColorLatex(){var e,t;return this.model.type==="image"?"":this.model.type==="table"?(t=(e=this.model.regression)==null?void 0:e.color)!=null?t:"":this.model.colorLatex}getModelColor(){var e,t;return this.model.type==="image"?"":this.model.type==="table"?(t=(e=this.model.regression)==null?void 0:e.color)!=null?t:"":Dd(this.model)}};ce();ie();var WE=__dcg_shared_module_exports__['e'](se());var{If:Ole,For:Rle}=WE.Components,df=class extends WE.View{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return _("div",{class:u("dcg-options-menu-section"),children:[_("div",{class:u("dcg-options-menu-section-title"),children:[()=>this.controller.s("graphing-calculator-heading-drag"),d(Fr,{ariaLabel:()=>this.controller.s("graphing-calculator-narration-menu-drag-enabled"),toggled:this.props.isOpen,onChange:this.bindFn(this.toggleDragEnabled)})]}),d(Ole,{predicate:this.props.isOpen,children:()=>d("div",{class:u("dcg-options-menu-content"),children:d("div",{class:u("dcg-style-icons"),role:u("radiogroup"),children:d(Rle.Simple,{each:()=>[__dcg_shared_module_exports__['hd'].X,__dcg_shared_module_exports__['hd'].Y,__dcg_shared_module_exports__['hd'].XY],children:e=>d("div",{class:()=>({"dcg-style-icon-container":!0,"dcg-disabled":this.isDisabled(e)}),onTap:()=>this.onDragModeSelected(e),role:u("radio"),tabIndex:()=>this.isDisabled(e)?-1:0,"aria-label":()=>e==="X"?this.controller.s("graphing-calculator-narration-drag-mode-x"):e==="Y"?this.controller.s("graphing-calculator-narration-drag-mode-y"):e==="XY"?this.controller.s("graphing-calculator-narration-drag-mode-xy"):this.controller.raw(""),"aria-checked":()=>this.getDragMode()===e,children:d(ho,{backgroundColor:()=>({type:"single-color",value:"#000"}),semiTransparent:()=>this.getDragMode()!==e,iconType:()=>e==="X"?"movable-horizontal":e==="Y"?"movable-vertical":"movable-both"})})})})})})]})}isDisabled(e){return!this.controller.getEnabledDragModesForItem(this.model.id).includes(e)}onDragModeSelected(e){if(this.model.type==="expression"){if(this.isDisabled(e))return;this.controller.dispatch({type:"set-item-dragmode",id:this.model.id,dragMode:e})}else{let t=this.model.id,o=this.model.table.id;this.controller.dispatch({type:"set-tablecolumn-dragmode",tableId:o,columnId:t,dragMode:e})}}getDragMode(){return this.model.type==="expression"?eo(this.model)||this.model.dragMode:this.model.dragMode}toggleDragEnabled(){let e=this.getDragMode()!==__dcg_shared_module_exports__['hd'].NONE?__dcg_shared_module_exports__['hd'].NONE:__dcg_shared_module_exports__['hd'].XY;this.model.type==="expression"?this.controller.dispatch({type:"set-item-dragmode",id:this.model.id,dragMode:e}):this.onDragModeSelected(e)}};ce();ie();var jE=__dcg_shared_module_exports__['e'](se());var{If:I6}=jE.Components,$E=class extends jE.View{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return _("div",{class:u("dcg-options-menu-section"),children:[_("div",{class:u("dcg-options-menu-section-title"),children:[()=>this.controller.s("graphing-calculator-heading-fill"),d(I6,{predicate:()=>!this.isInequality(),children:()=>d(Fr,{ariaLabel:()=>this.controller.s("graphing-calculator-narration-fill-visible"),toggled:this.props.isOpen,onChange:this.bindFn(this.toggleFillVisible)})})]}),d(I6,{predicate:this.props.isOpen,children:()=>d("div",{class:u("dcg-options-menu-content"),children:_("div",{class:u("dcg-iconed-mathquill-row dcg-fill-opacity-row"),children:[d(Re,{tooltip:()=>this.controller.s("graphing-calculator-label-opacity-tooltip"),children:d("i",{class:u("dcg-icon-opacity"),"aria-hidden":u("true")})}),d(Ut,{latex:()=>this.model.fillOpacity,placeholder:this.bindFn(this.getFillOpacity),isFocused:()=>Uo(this.controller,this.model.id,"opacity"),ariaPostLabel:()=>OD(this.model)?this.controller.raw(""):this.controller.s("shared-calculator-narration-input-error"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-fill-opacity"),hasError:()=>!OD(this.model),handleLatexChanged:this.bindFn(this.dispatchOpacityLatexIfChanged),dataLabelAttributeValue:this.const("fill-opacity"),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),handleFocusChanged:e=>zo(this.controller,this.model.id,e,"opacity")})]})})})]})}getFillOpacity(){return""+.4}isInequality(){return Il(this.model)}toggleFillVisible(){this.controller.dispatch({type:"set-item-fill",id:this.model.id,fill:!this.props.isOpen()})}dispatchOpacityLatexIfChanged(e){this.model.fillOpacity!==e&&this.controller.dispatch({type:"set-item-fillopacity",id:this.model.id,fillOpacity:e})}};ce();ie();var YE=__dcg_shared_module_exports__['e'](se());var{If:Gle}=YE.Components,cp=class extends YE.View{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return d(Gle,{predicate:()=>this.isVisible(),children:()=>d("div",{class:u("dcg-options-menu-section dcg-interactivity-section dcg-section-without-title"),children:d("div",{class:u("dcg-options-menu-content"),children:d(tt,{checked:()=>Ti(this.model),onChange:()=>this.toggleGraphInteractionsDisabled(),ariaLabel:()=>this.controller.s("graphing-calculator-label-disable-graph-interactions"),children:()=>this.controller.s("graphing-calculator-label-disable-graph-interactions")})})})})}isVisible(){return this.controller.shouldShowAuthorFeatures()}toggleGraphInteractionsDisabled(){this.model.type==="table-column"?this.controller.dispatch({type:"set-tablecolumn-disable-graph-interactions",tableId:this.model.table.id,columnId:this.model.id,disableGraphInteractions:!Ti(this.model)}):this.controller.dispatch({type:"set-item-disable-graph-interactions",id:this.model.id,disableGraphInteractions:!Ti(this.model)})}};ce();ie();var QE=__dcg_shared_module_exports__['e'](se());ce();ie();var JE=__dcg_shared_module_exports__['e'](se());var{For:Nle}=JE.Components,Vle=[{orientation:__dcg_shared_module_exports__['Yd'].DEFAULT,cssClass:"dcg-label-orientation-center",description:"graphing-calculator-text-label-orientation-default"},{orientation:__dcg_shared_module_exports__['Yd'].ABOVE,cssClass:"dcg-label-orientation-above",description:"graphing-calculator-text-label-orientation-above"},{orientation:__dcg_shared_module_exports__['Yd'].ABOVE_RIGHT,cssClass:"dcg-label-orientation-above-right",description:"graphing-calculator-text-label-orientation-above-right"},{orientation:__dcg_shared_module_exports__['Yd'].RIGHT,cssClass:"dcg-label-orientation-right",description:"graphing-calculator-text-label-orientation-right"},{orientation:__dcg_shared_module_exports__['Yd'].BELOW_RIGHT,cssClass:"dcg-label-orientation-below-right",description:"graphing-calculator-text-label-orientation-below-right"},{orientation:__dcg_shared_module_exports__['Yd'].BELOW,cssClass:"dcg-label-orientation-below",description:"graphing-calculator-text-label-orientation-below"},{orientation:__dcg_shared_module_exports__['Yd'].BELOW_LEFT,cssClass:"dcg-label-orientation-below-left",description:"graphing-calculator-text-label-orientation-below-left"},{orientation:__dcg_shared_module_exports__['Yd'].LEFT,cssClass:"dcg-label-orientation-left",description:"graphing-calculator-text-label-orientation-left"},{orientation:__dcg_shared_module_exports__['Yd'].ABOVE_LEFT,cssClass:"dcg-label-orientation-above-left",description:"graphing-calculator-text-label-orientation-above-left"}],XE=class extends JE.View{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id}template(){return _("div",{class:u("dcg-label-orientation-view"),style:()=>`transform: rotate(${this.getCSSRotationValue()});`,children:[d("span",{class:u("dcg-vertical-orientation-indicator")}),d("div",{class:u("dcg-label-orientations"),role:u("radiogroup"),"aria-label":()=>this.controller.s("graphing-calculator-heading-label-orientation"),children:d(Nle,{each:()=>Vle,children:e=>d("div",{class:()=>({[e().cssClass]:!0,"dcg-orientation-option":!0,"dcg-selected":this.isSelected(e().orientation),"dcg-orientation-disabled":this.isDisabled(e().orientation)}),role:u("radio"),tabIndex:u("0"),"aria-label":()=>this.controller.s(e().description),"aria-checked":()=>this.getOrientation()===e().orientation,onTap:()=>this.onTapOrientation(e().orientation),children:d("i",{class:()=>({"dcg-icon-chevron-left":e().orientation!==__dcg_shared_module_exports__['Yd'].DEFAULT})})})},e=>e.orientation)})]})}isDisabled(e){return e!==__dcg_shared_module_exports__['Yd'].DEFAULT?!1:this.isPointVisible()?!0:this.model.labelOrientation===__dcg_shared_module_exports__['Yd'].DEFAULT}isSelected(e){return e===__dcg_shared_module_exports__['Yd'].DEFAULT&&e===this.model.labelOrientation?!this.isPointVisible():e===this.model.labelOrientation}isPointVisible(){return this.model.hidden?!1:hi(this.model)?!this.model.hidden:this.model.points}getCSSRotationValue(){let e=U8(this.model);return`${Array.isArray(e)?0:e}rad`}getOrientation(){return this.props.model().labelOrientation}onTapOrientation(e){e===this.getOrientation()&&(e=__dcg_shared_module_exports__['Yd'].DEFAULT),this.controller.dispatch({type:"set-item-label-orientation",id:this.id,labelOrientation:e})}};ce();ie();var C6=__dcg_shared_module_exports__['e'](se());var pf=class extends C6.View{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return _("div",{class:u("dcg-iconed-mathquill-row dcg-point-opacity-row"),children:[d(Re,{tooltip:()=>this.controller.s("graphing-calculator-label-opacity-tooltip"),children:d("i",{class:u("dcg-icon-opacity"),"aria-hidden":u("true")})}),d(Ut,{latex:()=>this.model.pointOpacity,placeholder:this.bindFn(this.getPointOpacityPlaceholder),isFocused:()=>Uo(this.controller,this.model.id,"pointopacity"),ariaPostLabel:()=>this.isPointOpacityValid()?this.controller.raw(""):this.controller.s("shared-calculator-narration-input-error"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-line-opacity"),hasError:()=>!this.isPointOpacityValid(),handleLatexChanged:this.bindFn(this.dispatchPointOpacityLatexIfChanged),dataLabelAttributeValue:this.const("point-opacity"),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),handleFocusChanged:e=>zo(this.controller,this.model.id,e,"pointopacity")})]})}isPointOpacityValid(){return this.model.type==="expression"?N8(this.model):this.model.type==="table-column"?Yz(this.model):!1}dispatchPointOpacityLatexIfChanged(e){this.model.pointOpacity!==e&&(this.model.type==="expression"?this.controller.dispatch({type:"set-item-pointopacity",id:this.model.id,pointOpacity:e}):this.controller.dispatch({type:"set-tablecolumn-pointopacity",columnId:this.model.id,tableId:this.model.table.id,pointOpacity:e}))}getPointOpacityPlaceholder(){return`${1}`}};var{If:Ux}=QE.Components,ZE=class extends QE.View{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return _("div",{class:u("dcg-options-menu-section"),children:[_("div",{class:u("dcg-options-menu-section-title"),children:[()=>this.controller.s("graphing-calculator-heading-label"),d(Fr,{ariaLabel:()=>this.controller.s("graphing-calculator-narration-label-visible"),toggled:this.props.isOpen,onChange:this.bindFn(this.toggleLabelVisible)})]}),d(Ux,{predicate:this.props.isOpen,children:()=>_("div",{class:u("dcg-options-menu-content"),children:[_("div",{class:u("dcg-options-flex-container"),children:[_("div",{class:u("dcg-options-left-side"),children:[d(Ux,{predicate:this.props.showPointOpacity,children:()=>d(pf,{...this.props})}),_("div",{class:u("dcg-iconed-mathquill-row dcg-label-size-row"),children:[d(Re,{tooltip:()=>this.controller.s("graphing-calculator-label-label-size-tooltip"),children:d("span",{class:u("dcg-font-size"),children:"A"})}),d(Ut,{latex:()=>this.model.labelSize,placeholder:()=>"1",isFocused:()=>Uo(this.controller,this.model.id,"labelsize"),ariaPostLabel:()=>FD(this.model)?this.controller.raw(""):this.controller.s("shared-calculator-narration-input-error"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-label-size"),hasError:()=>!FD(this.model),handleLatexChanged:this.bindFn(this.dispatchLabelSizeIfChanged),dataLabelAttributeValue:this.const("label-size"),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),handleFocusChanged:e=>zo(this.controller,this.model.id,e,"labelsize")})]}),_("div",{class:()=>({"dcg-iconed-mathquill-row":!0,"dcg-label-angle-row":!0,"dcg-suffix-degree":this.props.controller().getGraphSettings().degreeMode,"dcg-suffix-radian":!this.props.controller().getGraphSettings().degreeMode}),children:[d(Re,{tooltip:()=>this.controller.s("graphing-calculator-label-angle-tooltip"),children:d("i",{class:u("dcg-icon-angle"),"aria-hidden":u("true")})}),d(Ut,{latex:()=>this.model.labelAngle,placeholder:()=>"0",isFocused:()=>Uo(this.controller,this.model.id,"labelangle"),ariaPostLabel:()=>GD(this.model)?this.controller.raw(""):this.controller.s("shared-calculator-narration-input-error"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-label-angle"),hasError:()=>!GD(this.model),handleLatexChanged:this.bindFn(this.dispatchLabelAngleIfChanged),dataLabelAttributeValue:this.const("label-angle"),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),handleFocusChanged:e=>zo(this.controller,this.model.id,e,"labelangle")})]})]}),d("div",{class:u("dcg-options-right-side"),children:d(XE,{controller:()=>this.controller,model:()=>this.model})})]}),_("div",{class:u("dcg-label-advanced"),children:[d(tt,{checked:this.bindFn(this.getWhiteTextOutline),onChange:this.bindFn(this.setWhiteTextOutline),disabled:()=>this.getEditable(),children:()=>this.controller.s("graphing-calculator-button-label-text-outline")}),d(Ux,{predicate:()=>this.controller.canUseAdvancedStyling(),children:()=>_("div",{role:u("region"),"aria-label":()=>this.controller.s("graphing-calculator-heading-advanced"),children:[d(Ux,{predicate:()=>this.shouldShowHoverLabelCheckbox(),children:()=>d(tt,{checked:this.bindFn(this.getInteractiveLabel),onChange:this.bindFn(this.setInteractiveLabel),children:()=>this.controller.s("graphing-calculator-button-label-show-on-hover")})}),d(Ux,{predicate:this.bindFn(this.shouldShowEditableLabelToggle),children:()=>d(tt,{checked:this.bindFn(this.getEditable),onChange:this.bindFn(this.setEditable),children:()=>this.controller.s("graphing-calculator-button-label-editable")})})]})})]})]})})]})}getWhiteTextOutline(){return this.getEditable()?!1:!this.model.suppressTextOutline}setWhiteTextOutline(e){this.controller.dispatch({type:"set-suppress-text-outline",id:this.model.id,suppressTextOutline:!e})}setInteractiveLabel(e){this.controller.dispatch({type:"set-item-interactive-label",id:this.model.id,interactiveLabel:e})}getInteractiveLabel(){return!!this.model.interactiveLabel}setEditable(e){if(e){let t=__dcg_shared_module_exports__['Te'](this.model.label)==="latex"?__dcg_shared_module_exports__['me'].Math:__dcg_shared_module_exports__['me'].Text;this.controller.dispatch({type:"set-item-editable-label-mode",id:this.model.id,editableLabelMode:t})}else this.controller.dispatch({type:"set-item-editable-label-mode",id:this.model.id,editableLabelMode:__dcg_shared_module_exports__['me'].None})}getEditable(){return this.model.editableLabelMode!==__dcg_shared_module_exports__['me'].None}shouldShowEditableLabelToggle(){return hi(this.model)}shouldShowHoverLabelCheckbox(){return eo(this.model)===__dcg_shared_module_exports__['hd'].NONE}dispatchLabelAngleIfChanged(e){this.model.labelAngle!==e&&this.controller.dispatch({type:"set-item-labelangle",id:this.model.id,labelAngle:e})}dispatchLabelSizeIfChanged(e){this.model.labelSize!==e&&this.controller.dispatch({type:"set-item-labelSize",id:this.model.id,labelSize:e})}toggleLabelVisible(){this.controller.dispatch({type:"set-item-showlabel",id:this.model.id,showLabel:!this.props.isOpen()})}};ce();ie();var tI=__dcg_shared_module_exports__['e'](se());var{If:_6}=tI.Components,uf=class extends tI.View{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return _("div",{class:u("dcg-options-menu-section"),children:[_("div",{class:u("dcg-options-menu-section-title"),children:[()=>this.controller.s("graphing-calculator-heading-lines"),d(Fr,{ariaLabel:()=>this.controller.s("graphing-calculator-narration-lines-visible"),toggled:this.props.isOpen,onChange:this.bindFn(this.toggleLinesVisible)})]}),d(_6,{predicate:()=>this.props.isOpen(),children:()=>d("div",{class:u("dcg-options-menu-content"),children:_("div",{class:u("dcg-options-flex-container"),children:[_("div",{class:u("dcg-options-left-side"),children:[_("div",{class:u("dcg-iconed-mathquill-row dcg-line-opacity-row"),children:[d(Re,{tooltip:()=>this.controller.s("graphing-calculator-label-opacity-tooltip"),children:d("i",{class:u("dcg-icon-opacity"),"aria-hidden":u("true")})}),d(Ut,{latex:()=>this.model.lineOpacity,placeholder:this.bindFn(this.getLineOpacity),isFocused:()=>Uo(this.controller,this.model.id,"lineopacity"),ariaPostLabel:()=>this.isLineOpacityValid()?this.controller.raw(""):this.controller.s("shared-calculator-narration-input-error"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-line-opacity"),hasError:()=>!this.isLineOpacityValid(),handleLatexChanged:this.bindFn(this.dispatchLineOpacityLatexIfChanged),dataLabelAttributeValue:this.const("line-opacity"),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),handleFocusChanged:e=>zo(this.controller,this.model.id,e,"lineopacity")})]}),_("div",{class:u("dcg-iconed-mathquill-row dcg-line-thickness-row"),children:[d(Re,{tooltip:()=>this.controller.s("graphing-calculator-label-line-thickness-tooltip"),children:d("i",{class:u("dcg-icon-line-thickness"),"aria-hidden":u("true")})}),d(Ut,{latex:()=>this.model.lineWidth,placeholder:this.bindFn(this.getLineWidth),isFocused:()=>Uo(this.controller,this.model.id,"linewidth"),ariaPostLabel:()=>this.isLineWidthValid()?this.controller.raw(""):this.controller.s("shared-calculator-narration-input-error"),ariaLabel:()=>this.controller.s("graphing-calculator-label-line-thickness-tooltip"),hasError:()=>!this.isLineWidthValid(),handleLatexChanged:this.bindFn(this.dispatchLineWidthLatexIfChanged),dataLabelAttributeValue:this.const("line-width"),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),handleFocusChanged:e=>zo(this.controller,this.model.id,e,"linewidth")})]})]}),d("div",{class:u("dcg-options-right-side"),children:d(_6,{predicate:this.bindFn(this.shouldShowLineStyles),children:()=>d(hr,{staticConfig:this.bindFn(this.getPointStyleOptions),ariaGroupLabel:()=>this.controller.s("graphing-calculator-heading-style"),theme:this.const("mini")})})})]})})})]})}getLineWidth(){return""+2.5}getLineOpacity(){return""+1}getPointStyleOptions(){return[__dcg_shared_module_exports__['Qd'].SOLID,__dcg_shared_module_exports__['Qd'].DASHED,__dcg_shared_module_exports__['Qd'].DOTTED].map(t=>({key:t,icon:()=>this.getStyleIcon(t),ariaLabel:()=>this.getStyleAria(t),selected:()=>this.model.lineStyle===t,class:()=>"dcg-line-segmented-option",onSelect:()=>{this.onLineStyleSelected(t)}}))}getStyleIcon(e){switch(e){case __dcg_shared_module_exports__['Qd'].SOLID:return"dcg-icon-line-solid";case __dcg_shared_module_exports__['Qd'].DASHED:return"dcg-icon-line-dashed";case __dcg_shared_module_exports__['Qd'].DOTTED:return"dcg-icon-line-dotted"}}getStyleAria(e){let t=this.controller.s;switch(e){case __dcg_shared_module_exports__['Qd'].SOLID:return t("graphing-calculator-narration-line-style-solid");case __dcg_shared_module_exports__['Qd'].DASHED:return t("graphing-calculator-narration-line-style-dashed");case __dcg_shared_module_exports__['Qd'].DOTTED:return t("graphing-calculator-narration-line-style-dotted")}}isLineOpacityValid(){return this.model.type==="expression"?G8(this.model):this.model.type==="table-column"?Wz(this.model):!1}isLineWidthValid(){return this.model.type==="expression"?ek(this.model):this.model.type==="table-column"?$z(this.model):!1}dispatchLineOpacityLatexIfChanged(e){this.model.lineOpacity!==e&&(this.model.type==="expression"?this.controller.dispatch({type:"set-item-lineopacity",id:this.model.id,lineOpacity:e}):this.controller.dispatch({type:"set-tablecolumn-lineopacity",tableId:this.model.table.id,columnId:this.model.id,lineOpacity:e}))}shouldShowLineStyles(){return!(this.model.type==="expression"&&Il(this.model))}onLineStyleSelected(e){this.model.lineStyle!==e&&(this.model.type==="expression"?this.controller.dispatch({type:"set-item-linestyle",id:this.model.id,lineStyle:e}):this.controller.dispatch({type:"set-tablecolumn-linestyle",tableId:this.model.table.id,columnId:this.model.id,lineStyle:e}))}dispatchLineWidthLatexIfChanged(e){this.model.lineWidth!==e&&(this.model.type==="expression"?this.controller.dispatch({type:"set-item-linewidth",id:this.model.id,lineWidth:e}):this.controller.dispatch({type:"set-tablecolumn-linewidth",tableId:this.model.table.id,columnId:this.model.id,lineWidth:e}))}toggleLinesVisible(){this.model.type==="expression"?this.controller.dispatch({type:"set-item-lines",id:this.model.id,lines:!this.props.isOpen()}):this.controller.dispatch({type:"set-tablecolumn-lines",tableId:this.model.table.id,columnId:this.model.id,bool:!this.props.isOpen()})}};ce();ie();var oI=__dcg_shared_module_exports__['e'](se());var{If:Ule}=oI.Components,rI=class extends oI.View{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return _("div",{class:u("dcg-options-menu-section"),children:[_("div",{class:u("dcg-options-menu-section-title"),children:[()=>this.controller.s("graphing-calculator-heading-lines"),d(Fr,{ariaLabel:()=>this.controller.s("graphing-calculator-narration-lines-visible"),toggled:this.props.isOpen,onChange:this.bindFn(this.toggleLinesVisible)})]}),d(Ule,{predicate:()=>this.props.isOpen(),children:()=>d("div",{class:u("dcg-options-menu-content"),children:_("div",{class:u("dcg-iconed-mathquill-row dcg-line-thickness-row-3d"),children:[d(Re,{tooltip:()=>this.controller.s("graphing-calculator-label-line-thickness-3d-tooltip"),children:d("i",{class:u("dcg-icon-line-thickness"),"aria-hidden":u("true")})}),d(Ut,{latex:()=>this.model.lineWidth,placeholder:()=>`${1}`,isFocused:()=>Uo(this.controller,this.model.id,"linewidth"),ariaPostLabel:()=>this.isLineWidthValid()?this.controller.raw(""):this.controller.s("shared-calculator-narration-input-error"),ariaLabel:()=>this.controller.s("graphing-calculator-label-line-thickness-3d-tooltip"),hasError:()=>!this.isLineWidthValid(),handleLatexChanged:this.bindFn(this.dispatchLineWidthLatexIfChanged),dataLabelAttributeValue:this.const("line-width"),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),handleFocusChanged:e=>zo(this.controller,this.model.id,e,"linewidth")})]})})})]})}toggleLinesVisible(){this.controller.dispatch({type:"set-item-lines",id:this.model.id,lines:!this.props.isOpen()})}isLineWidthValid(){return this.model.type==="expression"?ek(this.model):!1}dispatchLineWidthLatexIfChanged(e){this.model.lineWidth!==e&&this.model.type==="expression"&&this.controller.dispatch({type:"set-item-linewidth",id:this.model.id,lineWidth:e})}};ce();ie();var iI=__dcg_shared_module_exports__['e'](se());var{If:A6}=iI.Components,hf=class extends iI.View{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return _("div",{class:u("dcg-options-menu-section"),children:[_("div",{class:u("dcg-options-menu-section-title"),children:[()=>this.controller.s("graphing-calculator-heading-points"),d(Fr,{ariaLabel:()=>this.controller.s("graphing-calculator-narration-points-visible"),toggled:this.props.isOpen,onChange:this.bindFn(this.togglePointsVisible)})]}),d(A6,{predicate:this.props.isOpen,children:()=>_("div",{class:u("dcg-options-menu-content"),children:[_("div",{class:u("dcg-options-flex-container dcg-options--point-styles"),children:[_("div",{class:u("dcg-options-left-side"),children:[d(pf,{...this.props}),d(A6,{predicate:()=>this.model.type==="expression"||!this.isDraggable(),children:()=>_("div",{class:u("dcg-iconed-mathquill-row dcg-point-size-row"),children:[d(Re,{tooltip:()=>this.controller.s("graphing-calculator-label-point-size-tooltip"),children:d("i",{class:u("dcg-icon-line-thickness"),"aria-hidden":u("true")})}),d(Ut,{latex:this.bindFn(this.getPointSize),placeholder:this.bindFn(this.getDefaultPointSize),isFocused:()=>Uo(this.controller,this.model.id,"pointsize"),ariaPostLabel:()=>this.isPointSizeValid()?this.controller.raw(""):this.controller.s("shared-calculator-narration-input-error"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-point-size"),hasError:()=>!this.isPointSizeValid(),handleLatexChanged:e=>this.dispatchPointSizeLatexIfChanged(e),dataLabelAttributeValue:this.const("point-size"),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),handleFocusChanged:e=>zo(this.controller,this.model.id,e,"pointsize")})]})})]}),d("div",{class:u("dcg-options-right-side"),children:d(hr,{staticConfig:this.bindFn(this.getPointStyleOptions),ariaGroupLabel:()=>this.controller.s("graphing-calculator-heading-style"),theme:this.const("mini"),numRows:this.const(2)})})]}),d(tt,{checked:this.bindFn(this.getWhiteOutline),onChange:this.bindFn(this.setWhiteOutline),children:()=>this.controller.s("graphing-calculator-button-label-point-outline")})]})})]})}getPointSize(){return this.isDraggable()&&this.model.type==="expression"?this.model.movablePointSize:this.model.pointSize}getPointStyleOptions(){return[__dcg_shared_module_exports__['Pd'].POINT,__dcg_shared_module_exports__['Pd'].OPEN,__dcg_shared_module_exports__['Pd'].CROSS,__dcg_shared_module_exports__['Pd'].SQUARE,__dcg_shared_module_exports__['Pd'].PLUS,__dcg_shared_module_exports__['Pd'].TRIANGLE,__dcg_shared_module_exports__['Pd'].DIAMOND,__dcg_shared_module_exports__['Pd'].STAR].map(t=>({key:t,icon:()=>this.getStyleIcon(t),ariaLabel:()=>this.getStyleAria(t),selected:()=>this.model.pointStyle===t,class:()=>"dcg-point-segmented-option",onSelect:()=>{this.onPointStyleSelected(t)}}))}getStyleIcon(e){switch(e){case __dcg_shared_module_exports__['Pd'].POINT:return"dcg-icon-point-closed";case __dcg_shared_module_exports__['Pd'].OPEN:return"dcg-icon-point-open";case __dcg_shared_module_exports__['Pd'].CROSS:return"dcg-icon-point-cross";case __dcg_shared_module_exports__['Pd'].SQUARE:return"dcg-icon-point-square";case __dcg_shared_module_exports__['Pd'].PLUS:return"dcg-icon-point-plus";case __dcg_shared_module_exports__['Pd'].TRIANGLE:return"dcg-icon-point-triangle";case __dcg_shared_module_exports__['Pd'].DIAMOND:return"dcg-icon-point-diamond";case __dcg_shared_module_exports__['Pd'].STAR:return"dcg-icon-point-star"}}getStyleAria(e){let t=this.controller.s;switch(e){case __dcg_shared_module_exports__['Pd'].POINT:return t("graphing-calculator-narration-point-style-point");case __dcg_shared_module_exports__['Pd'].OPEN:return t("graphing-calculator-narration-point-style-open");case __dcg_shared_module_exports__['Pd'].CROSS:return t("graphing-calculator-narration-point-style-cross");case __dcg_shared_module_exports__['Pd'].SQUARE:return t("graphing-calculator-narration-point-style-square");case __dcg_shared_module_exports__['Pd'].PLUS:return t("graphing-calculator-narration-point-style-plus");case __dcg_shared_module_exports__['Pd'].TRIANGLE:return t("graphing-calculator-narration-point-style-triangle");case __dcg_shared_module_exports__['Pd'].DIAMOND:return t("graphing-calculator-narration-point-style-diamond");case __dcg_shared_module_exports__['Pd'].STAR:return t("graphing-calculator-narration-point-style-star")}}isPointSizeValid(){return this.model.type==="expression"?this.isDraggable()?V8(this.model):QT(this.model):this.model.type==="table-column"?jz(this.model):!1}onPointStyleSelected(e){this.model.pointStyle!==e&&(this.model.type==="expression"?this.controller.dispatch({type:"set-item-pointstyle",id:this.model.id,pointStyle:e}):this.controller.dispatch({type:"set-tablecolumn-pointstyle",columnId:this.model.id,tableId:this.model.table.id,pointStyle:e}))}dispatchPointSizeLatexIfChanged(e){this.getPointSize()!==e&&(this.model.type==="expression"?this.controller.dispatch({type:"set-item-pointsize",id:this.model.id,pointSize:e}):this.controller.dispatch({type:"set-tablecolumn-pointsize",columnId:this.model.id,tableId:this.model.table.id,pointSize:e}))}getWhiteOutline(){return this.model.pointOutline}setWhiteOutline(e){this.model.type==="expression"?this.controller.dispatch({type:"set-item-pointoutline",id:this.model.id,pointOutline:e}):this.controller.dispatch({type:"set-tablecolumn-pointoutline",columnId:this.model.id,tableId:this.model.table.id,pointOutline:e})}isDraggable(){return this.getDragMode()!==__dcg_shared_module_exports__['hd'].NONE}togglePointsVisible(){this.model.type==="expression"&&hi(this.model)?this.controller.dispatch({type:"toggle-item-hidden",id:this.model.id}):this.model.type==="expression"?this.controller.dispatch({type:"set-item-points",id:this.model.id,points:!this.props.isOpen()}):this.controller.dispatch({type:"set-tablecolumn-points",columnId:this.model.id,tableId:this.model.table.id,bool:!this.props.isOpen()})}getDragMode(){return this.model.type==="expression"?eo(this.model)||this.model.dragMode:this.model.dragMode}getDefaultPointSize(){return this.model.type==="expression"&&Dc(this.model)?`${14}`:`${8}`}};ce();ie();var aI=__dcg_shared_module_exports__['e'](se());var{If:Hle}=aI.Components,nI=class extends aI.View{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return _("div",{class:u("dcg-options-menu-section"),children:[_("div",{class:u("dcg-options-menu-section-title"),children:[()=>this.controller.s("graphing-calculator-heading-points"),d(Fr,{ariaLabel:()=>this.controller.s("graphing-calculator-narration-points-visible"),toggled:this.props.isOpen,onChange:this.bindFn(this.togglePointsVisible)})]}),d(Hle,{predicate:()=>this.props.isOpen(),children:()=>d("div",{class:u("dcg-options-menu-content"),children:_("div",{class:u("dcg-iconed-mathquill-row dcg-line-thickness-row-3d"),children:[d(Re,{tooltip:()=>this.controller.s("graphing-calculator-label-point-size-3d-tooltip"),children:d("i",{class:u("dcg-icon-line-thickness"),"aria-hidden":u("true")})}),d(Ut,{latex:()=>this.model.pointSize,placeholder:this.bindFn(this.getDefaultPointSize),isFocused:()=>Uo(this.controller,this.model.id,"pointsize"),ariaPostLabel:()=>this.isPointSizeValid()?this.controller.raw(""):this.controller.s("shared-calculator-narration-input-error"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-point-size"),hasError:()=>!this.isPointSizeValid(),handleLatexChanged:e=>this.dispatchPointSizeLatexIfChanged(e),dataLabelAttributeValue:this.const("point-size"),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),handleFocusChanged:e=>zo(this.controller,this.model.id,e,"pointsize")})]})})})]})}togglePointsVisible(){this.controller.dispatch({type:"set-item-points",id:this.model.id,points:!this.props.isOpen()})}isPointSizeValid(){return this.model.type==="expression"?QT(this.model):!1}dispatchPointSizeLatexIfChanged(e){this.model.pointSize!==e&&this.model.type==="expression"&&this.controller.dispatch({type:"set-item-pointsize",id:this.model.id,pointSize:e})}getDefaultPointSize(){return`${3}`}};ie();var sI=__dcg_shared_module_exports__['e'](se());var{Textarea:Kle}=sI.Components,dp=class extends sI.View{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){var e,t,o;return d("div",{class:()=>{var i,n,a;return{"dcg-screen-reader-description--wrapper":!0,[(a=(n=(i=this.props).class)==null?void 0:n.call(i))!=null?a:""]:!!this.props.class}},children:d(Kle,{placeholder:()=>this.controller.s("graphing-calculator-text-add-screen-reader-label-placeholder"),class:this.const("dcg-screen-reader-description--input dcg-input-blue-outline"),manageFocus:this.const(_e({controller:this.controller,location:(o=(t=(e=this.props).focusLocation)==null?void 0:t.call(e))!=null?o:{type:"expression-menu",id:this.model.id,location:"alt-text"}})),value:()=>this.model.description,onInput:i=>this.controller.dispatch({type:"set-item-description",id:this.model.id,description:i})})})}};ce();ie();var cI=__dcg_shared_module_exports__['e'](se());var{If:qO}=cI.Components,lI=class extends cI.View{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return _("div",{class:u("dcg-options-menu-section"),children:[_("div",{class:u("dcg-options-menu-section-title"),children:[()=>this.controller.s("graphing-calculator-heading-surfaces"),d(Fr,{ariaLabel:()=>this.controller.s("graphing-calculator-narration-surfaces-visible"),toggled:this.props.isOpen,onChange:this.bindFn(this.toggleSurfacesVisible)})]}),d(qO,{predicate:()=>this.props.isOpen(),children:()=>_("div",{style:u("font-size:85%; margin-top:8px"),children:[d(qO,{predicate:()=>this.usesResolution()&&this.controller.getGraphSettings().config.beta3d,children:()=>_("div",{children:["Resolution:",d(Ut,{latex:()=>this.model.resolution,placeholder:()=>this.getDefaultResolution(),isFocused:()=>Uo(this.controller,this.model.id,"resolution"),ariaPostLabel:()=>this.isResolutionValid()?this.controller.raw(""):this.controller.s("shared-calculator-narration-input-error"),ariaLabel:()=>this.controller.s("graphing-calculator-label-resolution-tooltip"),hasError:()=>!this.isResolutionValid(),handleLatexChanged:this.bindFn(this.dispatchResolutionLatexIfChanged),dataLabelAttributeValue:this.const("resolution"),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),handleFocusChanged:e=>zo(this.controller,this.model.id,e,"resolution")})]})}),d(qO,{predicate:this.bindFn(this.shouldShowOpacity),children:()=>_("div",{class:u("dcg-iconed-mathquill-row dcg-surface-opacity-row"),children:[d(Re,{tooltip:()=>this.controller.s("graphing-calculator-label-opacity-tooltip"),sticky:this.const(!0),gravity:this.const("s"),children:d("i",{class:u("dcg-icon-opacity"),"aria-hidden":u("true")})}),d(Ut,{latex:()=>this.model.surfaceOpacity,isFocused:()=>Uo(this.controller,this.model.id,"opacity"),placeholder:this.const("1"),ariaPostLabel:()=>RD(this.model)?this.controller.raw(""):this.controller.s("shared-calculator-narration-input-error"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-surface-opacity"),hasError:()=>!RD(this.model),handleLatexChanged:this.bindFn(this.dispatchOpacityLatexIfChanged),dataLabelAttributeValue:this.const("surface-opacity"),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),handleFocusChanged:e=>zo(this.controller,this.model.id,e,"opacity")})]})})]})})]})}shouldShowOpacity(){return this.controller.getGraphSettings().config.beta3d?this.model.formula.is_inequality!==!0:!1}toggleSurfacesVisible(){this.controller.dispatch({type:"set-item-lines",id:this.model.id,lines:!this.props.isOpen()})}usesResolution(){return!jT(this.model)&&!M8(this.model)}dispatchResolutionLatexIfChanged(e){this.model.resolution!==e&&this.model.type==="expression"&&this.controller.dispatch({type:"set-item-resolution",id:this.model.id,resolution:e})}isResolutionValid(){return this.model.type==="expression"?B8(this.model):!1}getDefaultResolution(){return this.model.type==="expression"&&A8(this.model)?`${__dcg_shared_module_exports__['rd']}`:`${__dcg_shared_module_exports__['sd']}`}dispatchOpacityLatexIfChanged(e){this.model.surfaceOpacity!==e&&this.controller.dispatch({type:"set-item-surfaceopacity",id:this.model.id,surfaceOpacity:e})}};var{For:Wle}=dI.Components,$le=["surfaces","points3d","lines3d","colors","clickable","description","disableGraphInteractions"],jle=["points","label","drag","lines","colors","fill","clickable","description","disableGraphInteractions"],L6=["fill","label","lines","lines3d","points","points3d","surfaces"];function ra(r,e){e.runAfterDispatch(()=>{if(!r)return;let t=r.closest(".dcg-options-menu-container"),o=e.findEl(".dcg-container"),i=e.getOpenMenuIcon(),n=!!r.closest(".dcg-table-column-menu");if(!t||!o||!i)return;let a=e.computeMajorLayout(),s=a.list.top+a.list.height,l=a.keypad.top,c=Math.min(s,l),p=o.getBoundingClientRect(),h=i.getBoundingClientRect(),g=c+p.top-h.top,m=t.offsetHeight,b=0;m>g&&(b=+g-m);let x=n?!b:-b<m-38;t.style.marginTop=`${n&&b<0?b-34:b}px`,r.style.marginTop=`${-b}px`,r.style.display=x?"":"none"})}function qc(r,e){requestAnimationFrame(()=>{let t=e.getExppanelElt(),o=e.getOpenMenuIcon();r&&t&&o&&t.contains(o)&&re(t).on(`scroll.${r}`,()=>{re(t).off(`scroll.${r}`);let i=e.getFocusLocation(),n=e.getOpenItemMenu();i&&n&&i.type==="expression-menu"&&"model"in n&&i.id===n.model.id&&e.dispatch({type:"blur-focus-location",location:i}),e.dispatch({type:"close-item-settings-menu"})})})}function Hc(r,e){let t=e.getExppanelElt();t&&r&&re(t).off(`scroll.${r}`)}var gf=class extends dI.View{init(){var e;this.controller=this.props.controller(),this.guid=(e=this.controller.getOpenItemMenu())==null?void 0:e.guid}didMount(){qc(this.guid,this.controller)}willUnmount(){Hc(this.guid,this.controller)}didUpdate(){ra(this.arrowElt,this.controller)}getSections(){let e=(this.controller.isThreeDMode()?$le:jle).filter(i=>this.shouldShowSection(i)),t=e.find(i=>L6.includes(i)&&this.isSectionOpen(i));if(!t)return e;e=e.filter(i=>i!=="colors");let o=e.findIndex(i=>i===t);return e.splice(o+1,0,"colors"),e}template(){let e=this.props.model();return _("div",{class:()=>({"dcg-expressions-options-menu":!0,"dcg-options-menu":!0}),role:u("region"),"aria-label":()=>this.controller.s("graphing-calculator-narration-options-menu"),children:[d("div",{children:d(Wle.Simple,{each:this.bindFn(this.getSections),children:t=>{switch(t){case"points":return d(hf,{model:()=>e,controller:this.bindFn(this.props.controller),isOpen:()=>this.isSectionOpen("points")});case"label":return d(ZE,{model:()=>e,controller:this.bindFn(this.props.controller),isOpen:()=>this.isSectionOpen("label"),showPointOpacity:()=>this.isFirstOpenSection("label")});case"drag":return d(df,{model:()=>e,controller:this.bindFn(this.props.controller),isOpen:()=>this.isSectionOpen("drag")});case"lines":return d(uf,{model:()=>e,controller:this.bindFn(this.props.controller),isOpen:()=>this.isSectionOpen("lines")});case"fill":return d($E,{model:()=>e,controller:this.bindFn(this.props.controller),isOpen:()=>this.isSectionOpen("fill")});case"colors":return d(lp,{model:()=>e,controller:this.bindFn(this.props.controller)});case"description":return d(dp,{class:this.const("dcg-options-menu-section"),model:()=>e,controller:this.bindFn(this.props.controller)});case"points3d":return d(nI,{model:()=>e,controller:this.bindFn(this.props.controller),isOpen:()=>this.isSectionOpen("points3d")});case"lines3d":return d(rI,{model:()=>e,controller:this.bindFn(this.props.controller),isOpen:()=>this.isSectionOpen("lines3d")});case"surfaces":return d(lI,{model:()=>e,controller:this.bindFn(this.props.controller),isOpen:()=>this.isSectionOpen("surfaces")});case"clickable":return d(lf,{model:()=>e,controller:this.bindFn(this.props.controller),isOpen:()=>!!e.clickableInfo.enabled});case"disableGraphInteractions":return d(cp,{model:()=>e,controller:()=>this.props.controller()})}}})}),d("div",{class:u("dcg-triangle"),didMount:this.bindFn(this.didMountArrow),didUnmount:()=>this.arrowElt=void 0})]})}didMountArrow(e){this.arrowElt=e,ra(this.arrowElt,this.controller)}shouldShowClickableSection(){let e=this.props.model();return this.controller.areActionsEnabled()&&ix(e)&&!this.controller.isItemReadonly(e.id)&&(this.controller.shouldShowAuthorFeatures()||!Ti(e))}shouldShowDragSection(){let e=this.props.model();return this.controller.shouldShowAuthorFeatures()||!Ti(e)}shouldShowSection(e){let t=this.props.model(),o=hi(t)||Dc(t),i=dx(t)&&(t.extendTo3D||t.formula.expression_type===__dcg_shared_module_exports__['xd'].IMPLICIT_SURFACE_AMBIGUOUS)||!dx(t)&&AD(t),n=Cu(t)||qd(t)||$T(t)||px(t)||Fd(t);switch(e){case"points":return!n&&(o||Ud(t));case"lines":return!o&&!n;case"colors":return n||L6.some(a=>this.isSectionOpen(a));case"fill":return bm(t)||_m(t)||Il(t)&&!(Mm(t)||YT(t)||LD(t));case"label":return Ud(t)||hi(t);case"drag":return hi(t)&&!!t.formula.move_strategy&&this.shouldShowDragSection();case"clickable":return this.shouldShowClickableSection();case"description":return CT(t);case"disableGraphInteractions":return this.controller.shouldShowAuthorFeatures();case"surfaces":return i;case"lines3d":return!i&&!(hi(t)||Iu(t));case"points3d":return Ud(t)||zd(t)||hi(t)||Iu(t);default:return e}}isFirstOpenSection(e){return this.getSections().find(t=>this.isSectionOpen(t))===e}isSectionOpen(e){let t=this.props.model(),{points:o,lines:i,fill:n}=t,a=__dcg_shared_module_exports__['yd'](t.formula.expression_type,{points:o,lines:i,fill:n},s=>{Lr("getReconciledExpressionProps [Chrome Switch Bug]",{metaData:{method:"isSectionOpen",type:s}})});switch(e){case"lines":return t.hidden?!1:a.lines;case"label":return Tn(t);case"fill":return t.hidden?!1:Il(t)?!0:a.fill;case"points":return t.hidden?!1:hi(t)?!t.hidden:a.points;case"drag":return eo(t)!==__dcg_shared_module_exports__['hd'].NONE;case"colors":case"disableGraphInteractions":case"clickable":case"description":return!0;case"points3d":return t.hidden?!1:a.points;case"lines3d":case"surfaces":return t.hidden?!1:a.lines}}};var HO={version:qa,randomSeed:"",graph:{product:"graphing-3d",threeDMode:!0,viewport:Vn(__dcg_shared_module_exports__['Fc']),__viewportEvaluatedForBackMigration:__dcg_shared_module_exports__['Fc']},expressions:{list:[{id:"1",type:"expression"}]}},P6=HO;var pI=class{constructor(e){this.mq=e,this.id=e.id,this.data=e.data}simulateUserChangedLatex(){qe.simulateUserChangedLatex(this.mq)}simulateKeypress(e){qe.simulateKeypressFromKeypad(this.mq,e)}config(e){return this.mq.config(e),this}latex(e){return e===void 0?this.mq.latex():(this.mq.latex(e),this.simulateUserChangedLatex(),this)}reflow(){this.mq.reflow()}el(){return this.mq.el()}getAriaLabel(){return this.mq.getAriaLabel()}setAriaLabel(e){return this.mq.setAriaLabel(e)}html(){return this.mq.html()}mathspeak(){return this.mq.mathspeak()}text(){return this.mq.text()}selection(e){return e?this.mq.selection(e):this.mq.selection()}select(){return this.mq.select(),this}moveToRightEnd(){return this.mq.moveToRightEnd(),this}moveToLeftEnd(){return this.mq.moveToLeftEnd(),this}cmd(e){return this.mq.cmd(e),this.simulateUserChangedLatex(),this}write(e){return this.mq.write(e),this.simulateUserChangedLatex(),this}keystroke(e){return this.simulateKeypress(e),this}typedText(e){return this.mq.typedText(e),this.simulateUserChangedLatex(),this}clearSelection(){return this.mq.clearSelection(),this}isUserSelecting(){return this.mq.isUserSelecting()}getAriaPostLabel(){return this.mq.getAriaPostLabel()}setAriaPostLabel(e,t){return this.mq.setAriaPostLabel(e,t),this}blur(){return this.mq.blur(),this}focus(){return this.mq.focus(),this}revert(){return this.mq.revert()}ignoreNextMousedown(e){return this.mq.ignoreNextMousedown(e),this}clickAt(e,t,o){return this.mq.clickAt(e,t,o),this}};function D6(r){let e=r.mode,t=r.width,o=r.height,i=r.currentBounds,n=r.graphpaperAspectRatio,a=r.mathAspectRatio,s=r.mathBounds,l=t/o,c={x:i.left+i.width/2,y:i.bottom+i.height/2};if(s.left===void 0!=(s.right===void 0)||s.bottom===void 0!=(s.top===void 0))return console.warn('asyncScreenshot: cannot specify "left" bound without "right" or "bottom" bound without "top". Got: '+s),i;let p=s.left!==void 0&&s.right!==void 0,h=s.bottom!==void 0&&s.top!==void 0,g=p&&h,m,b,x,E,S,k,T,I,P,A;switch(e){case"stretch":return g?s:p?{left:s.left,right:s.right,bottom:i.bottom,top:i.top}:h?{left:i.left,right:i.right,bottom:s.bottom,top:s.top}:i;case"contain":return g?(E=s.right-s.left,S=s.top-s.bottom,k={x:s.left+E/2,y:s.bottom+S/2},x=E/S,l>x?(b=S/o,m=b*a,{left:k.x-m*t/2,right:k.x+m*t/2,bottom:s.bottom,top:s.top}):(m=E/t,b=m/a,{left:s.left,right:s.right,bottom:k.y-b*o/2,top:k.y+b*o/2})):p?(T=s.right-s.left,I=s.left+T/2,x=T/i.height,l>x?(b=i.height/o,m=b*a,{left:I-m*t/2,right:I+m*t/2,bottom:i.bottom,top:i.top}):(m=T/t,b=m/a,{left:s.left,right:s.right,bottom:c.y-b*o/2,top:c.y+b*o/2})):h?(P=s.top-s.bottom,A=s.bottom+P/2,x=i.width/P,l>x?(b=P/o,m=b*a,{left:c.x-m*t/2,right:c.x+m*t/2,bottom:s.bottom,top:s.top}):(m=i.width/t,b=m/a,{left:i.left,right:i.right,bottom:A-b*o/2,top:A+b*o/2})):l>n?(b=i.height/o,m=b*a,{left:c.x-m*t/2,right:c.x+m*t/2,bottom:i.bottom,top:i.top}):(m=i.width/t,b=m/a,{left:i.left,right:i.right,bottom:c.y-b*o/2,top:c.y+b*o/2});case"preserveX":return g?(E=s.right-s.left,S=s.top-s.bottom,k={x:s.left+E/2,y:s.bottom+S/2},x=E/S,m=E/t,b=m/a,{left:s.left,right:s.right,bottom:k.y-b*o/2,top:k.y+b*o/2}):h?(P=s.top-s.bottom,A=s.bottom+P/2,x=i.width/P,m=i.width/t,b=m/a,{left:i.left,right:i.right,bottom:A-b*o/2,top:A+b*o/2}):p?(T=s.right-s.left,m=T/t,b=m/a,{left:s.left,right:s.right,bottom:c.y-b*o/2,top:c.y+b*o/2}):(T=i.right-i.left,m=T/t,b=m/a,{left:i.left,right:i.right,bottom:c.y-b*o/2,top:c.y+b*o/2});case"preserveY":return g?(E=s.right-s.left,S=s.top-s.bottom,k={x:s.left+E/2,y:s.bottom+S/2},x=E/S,b=S/o,m=b*a,{left:k.x-m*t/2,right:k.x+m*t/2,bottom:s.bottom,top:s.top}):p?(T=s.right-s.left,I=s.left+T/2,x=T/i.height,b=i.height/o,m=b*a,{left:I-m*t/2,right:I+m*t/2,bottom:i.bottom,top:i.top}):h?(P=s.top-s.bottom,b=P/o,m=b*a,{left:c.x-m*t/2,right:c.x+m*t/2,bottom:s.bottom,top:s.top}):(P=i.top-i.bottom,b=P/o,m=b*a,{left:c.x-m*t/2,right:c.x+m*t/2,bottom:i.bottom,top:i.top});default:return i}}__dcg_shared_module_exports__['H']();function Gl(r){return r==="es-ES"?(console.warn("{language: 'es-ES'} has been deprecated. Proceeding with {language: 'es'}"),"es"):r}async function uI(r){var t;let e=document.activeElement;if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(r);else{let o=document.createElement("textarea");o.value=r,o.style.position="absolute",o.style.left="-999999px",document.body.prepend(o),o.select();try{document.execCommand("copy"),(t=e==null?void 0:e.focus)==null||t.call(e)}catch(i){console.error(i)}finally{o.remove()}}}__dcg_shared_module_exports__['F']();var KO={keypad:!0,graphpaper:!0,expressions:!0,settingsMenu:!0,zoomButtons:!0,showResetButtonOnGraphpaper:!1,expressionsTopbar:!0,capExpressionSize:!1,pointsOfInterest:!0,trace:!0,border:!0,lockViewport:!1,expressionsCollapsed:!1,authorFeatures:!1,authorMode:!0,advancedStyling:!1,images:!0,imageUploadCallback:FE,onEvaluationCopyClick:uI,showEvaluationCopyButtons:!1,folders:!0,notes:!0,sliders:!0,links:!0,qwertyKeyboard:!0,restrictedFunctions:!1,forceEnableGeometryFunctions:!1,pasteGraphLink:!1,showReducedMotionCover:!1,pasteTableData:!0,degreeMode:!1,clearIntoDegreeMode:!1,autosize:!0,plotSingleVariableImplicitEquations:!0,plotImplicits:!0,plotInequalities:!0,colors:{RED:R0,BLUE:F0,GREEN:G0,ORANGE:V0,PURPLE:N0,BLACK:Wg},invertedColors:!1,functionDefinition:!0,projectorMode:!1,decimalToFraction:!0,fontSize:16,language:"en",leftAlign3dViewportControls:!1,backgroundColor:"#fff",textColor:"#000",accentColor:__dcg_shared_module_exports__['Md'].FOCUS_OUTLINE,distributions:!0,brailleMode:"none",sixKeyInput:!1,brailleControls:!0,graphDescription:void 0,reportPosition:"default",zoomFit:!0,forceLogModeRegressions:!1,defaultLogModeRegressions:!1,actions:"auto",audio:!0,logScales:!0,translucentSurfaces:!1,perspectiveDistortion:1,showKeyboardShortcutsInTooltips:!1,tone:!0,muted:!0,showPerformanceMeter:!1,allowComplex:!0,customRegressions:!0},O6=Object.keys(KO),Yle={orientationButtons:!0,debug3dRender:void 0,debugPeelLayers:void 0,adaptivePeeling:!0,debugPixelRatio:void 0,translucentOpacity:"0.8",peelFloatTexture:!1,debugScale:1/10,peelUpsample:void 0,rayCast:!1},R6={product:"graphing",disableScrollFix:!1,branding:!0,onlyTraceSelected:!1,disableMouseInteractions:!1,nativeOnscreenKeypad:!1,plaidMode:!1,wireframe:!1,raycastHeatmap:!1,ignoreCostEstimate:!1,raycastDisableIntervals:!1,pasteGraphLinkCallback:void 0,editOnWeb:!1,crossOriginSaveTest:!1,enableTabindex:!0,audioTraceReverseExpressions:!1,audioTraceSimult:!1,transparentBackground:!1,pauseWhenOffscreen:!1,hideGeoUI:!1,substitutions:!0,intervalComprehensions:!0,recursion:!0,beta3d:!1,folderModules:!1,disableLighting:!1,disableWorkerOnZoom:!1,cacheRenderedSvgs:!1,ghostMode:!1,regressionTemplates:!0,reflectionArc:!1,logInternalErrors:!1,showIDs:!1,debugProgressUpdates:!1,recursionDepthLimit:void 0,reportPositionNone:!1,desNotebook:!1,...Yle},Xle={solutions:!0,menus:!0,singleVariableSolutions:!0,clickableObjects:!1,administerSecretFolders:!1};__dcg_shared_module_exports__['F']();var Nl={...KO,...R6};function WO(r){return!!(KO.hasOwnProperty(r)||R6.hasOwnProperty(r)||Xle.hasOwnProperty(r))}function mf(r){let e=__dcg_shared_module_exports__['Uc'](Nl);for(let t in r)e.hasOwnProperty(t)&&(e[t]=r[t]);if(__dcg_shared_module_exports__['Ed'](e.backgroundColor)||(e.backgroundColor=Nl.backgroundColor,console.warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)")),__dcg_shared_module_exports__['Ed'](e.textColor)||(e.textColor=Nl.textColor,console.warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)")),__dcg_shared_module_exports__['Ed'](e.accentColor)||(e.accentColor=Nl.accentColor,console.warn("Invalid accentColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)")),e.actions!==!0&&e.actions!==!1&&e.actions!=="auto"&&(e.actions=Nl.actions,console.warn("Invalid actions setting. Must be true, false, or 'auto'.")),r.zoomButtons===void 0&&(!e.graphpaper||e.lockViewport)&&(e.zoomButtons=!1),r.images===void 0&&(e.graphpaper||(e.images=!1)),r.hasOwnProperty("menus")&&(console.warn("As of API version 0.4, the 'menus' option is deprecated and has been split into 'settingsMenu' (boolean) and 'expressionsTopbar' (boolean)."),r.hasOwnProperty("settingsMenu")||(e.settingsMenu=!!r.menus),r.hasOwnProperty("expressionsTopbar")||(e.expressionsTopbar=!!r.menus)),r.hasOwnProperty("solutions")&&(console.warn("As of API v1.0, the 'solutions' option is deprecated and has been replaced with 'pointsOfInterest' (boolean)."),r.hasOwnProperty("pointsOfInterest")||(e.pointsOfInterest=!!r.solutions)),r.hasOwnProperty("singleVariableSolutions")&&console.warn("As of API v1.0, the 'singleVariableSolutions' has been removed. The calculator no longer displays solutions to single variable equations."),r.hasOwnProperty("clickableObjects")&&(console.warn("As of API v1.7, the 'clickableObjects' option is deprecated and has been replaced with 'actions'."),r.clickableObjects===!0&&!r.hasOwnProperty("actions")&&(e.actions=!0)),r.hasOwnProperty("administerSecretFolders")&&(console.warn("As of API v1.8, the 'administerSecretFolders' option is deprecated and has been subsumed under 'authorFeatures'."),r.administerSecretFolders===!0&&!r.hasOwnProperty("authorFeatures")&&(e.authorFeatures=!0)),e.graphpaper||(e.expressionsCollapsed&&(e.expressionsCollapsed=!1,console.warn("Desmos API initialized with bad options. graphpaper: false and expressionsCollapsed: true are incompatible. Proceeding with expressionsCollapsed: false.")),e.zoomButtons&&(e.zoomButtons=!1,console.warn("Desmos API initialized with bad options. graphpaper: false and zoomButtons: true are incompatible. Proceeding with zoomButtons: false.")),e.showResetButtonOnGraphpaper&&(e.showResetButtonOnGraphpaper=!1,console.warn("Desmos API initialized with bad options. graphpaper: false and showResetButtonOnGraphpaper: true are incompatible. Proceeding with showResetButtonOnGraphpaper: false."))),e.lockViewport&&e.zoomButtons&&(e.zoomButtons=!1,console.warn("Desmos API initialized with bad options. lockViewport: true and zoomButtons: true are incompatible. Proceeding with zoomButtons: false.")),(e.notes===!1||e.folders===!1||e.images===!1)&&e.pasteGraphLink===!0&&(e.pasteGraphLink=!1,console.warn("Desmos API initialized with bad options. pasteGraphLink: true is incompatible with disabling the creation of note, folder, or image expressions. Proceeding with pasteGraphLink: false.")),r.hasOwnProperty("onEvaluationCopyClick"))if(typeof r.onEvaluationCopyClick!="function"){e.onEvaluationCopyClick=Nl.onEvaluationCopyClick;let t=typeof r.onEvaluationCopyClick;console.warn(`Expected onEvaluationCopyClick to be a function, but got ${t}. Ignoring.`)}else r.hasOwnProperty("showEvaluationCopyButtons")||(e.showEvaluationCopyButtons=!0,console.warn("onEvaluationCopyClick was set without an explicit value for showEvaluationCopyButtons.Setting showEvaluationCopyButtons to true."));return e.language&&(e.language=Gl(e.language)),e}function Jle(r){a0?setTimeout(r,25):requestAnimationFrame(r)}function Zle(){let r=window.visualViewport;if(!r)return 1;let e=document.documentElement.clientWidth/r.width,t=document.documentElement.clientHeight/r.height,o=Math.abs(Math.log(e))<Math.abs(Math.log(t))?e:t;return isFinite(o)?o:1}var F6=1,ff={},zx=!1;function N6(){zx=!0,Jle(Qle)}var G6={};function Qle(){G6.rafSPY&&G6.rafSPY(),zx=!1;for(let r in ff)ff[r].detectAndEnqueueEvent(),zx=!0;if(zx){N6();for(let r in ff)ff[r].dispatchQueuedEvent()}}var Xu=class{constructor(e,t){this.elt=e;this.cb=t;this.destroyed=!1;this.lastOffscreen=!1;this.id=F6.toString(),this.appliedScale={x:1,y:1},F6++}stopWatching(){delete ff[this.id]}startWatching(){this.checkForChanges(),ff[this.id]=this,zx||N6()}resetAppliedScalingAndGetBoundingClientRect(){let e=this.elt.getBoundingClientRect(),t={x:e.width/this.elt.offsetWidth,y:e.height/this.elt.offsetHeight};if(t.x===this.appliedScale.x&&t.y===this.appliedScale.y)return e;let o=this.elt.querySelector(".dcg-dom-change-wrapper");return o&&(this.appliedScale=t,Si(o,{transform:"scale("+1/this.appliedScale.x+","+1/this.appliedScale.y+")",width:100*this.appliedScale.x+"%",height:100*this.appliedScale.y+"%",transformOrigin:"0 0"})),e}detectAndEnqueueEvent(){if(this.destroyed)return;let e=!0;if(!(document.body&&document.body.contains(this.elt)))this.lastSize&&(this.lastSize=void 0,this.queuedEvent={type:"removed",target:this.elt,isOffscreen:!0});else{let o=this.resetAppliedScalingAndGetBoundingClientRect(),i=Zle();e=o.top>window.innerHeight||o.bottom<0||o.left>window.innerWidth||o.right<0,this.lastSize?(o.width!==this.lastSize.width||o.height!==this.lastSize.height||i!==this.lastSize.pinchZoom||window.devicePixelRatio!==this.lastSize.pixelRatio)&&(this.lastSize.width=o.width,this.lastSize.height=o.height,this.lastSize.pinchZoom=i,this.lastSize.pixelRatio=window.devicePixelRatio,this.queuedEvent={type:"resized",target:this.elt,size:{...this.lastSize},isOffscreen:e}):(this.lastSize={width:o.width,height:o.height,pinchZoom:i,pixelRatio:window.devicePixelRatio},this.queuedEvent={type:"added",target:this.elt,size:{...this.lastSize},isOffscreen:e})}e!==this.lastOffscreen&&(this.lastOffscreen=e,this.queuedEvent||(this.queuedEvent={type:"offscreen-noop",target:this.elt,isOffscreen:e}))}dispatchQueuedEvent(){let e=this.queuedEvent;e&&(this.queuedEvent=void 0,this.cb(e))}checkForChanges(){this.detectAndEnqueueEvent(),this.dispatchQueuedEvent()}destroy(){this.stopWatching();for(let e in this)this.hasOwnProperty(e)&&delete this[e];this.destroyed=!0}};__dcg_shared_module_exports__['H']();var ece=0,tce="guid_"+Math.round(Math.random()*1e6)+"_"+new Date().getTime()+"_",$O=class{constructor(e){this.__observers={},this.guid=tce+ ++ece,e&&this.setProperties(e)}unobserveAll(){this.__observers={}}getProperty(e){return this[e]}setProperty(e,t){let o=this[e];this.setPropertyWithoutNotifying(e,t),!__dcg_shared_module_exports__['s'](o,t)&&this.notifyPropertyChange(e)}setPropertyWithoutNotifying(e,t){this[e]=t}setProperties(e){let t=[];for(let o of __dcg_shared_module_exports__['A'](e)){let i=this[o];this.setPropertyWithoutNotifying(o,e[o]),__dcg_shared_module_exports__['s'](i,e[o])||t.push(o)}t.forEach(o=>this.notifyPropertyChange(o))}notifyPropertyChange(e){PO(this.__observers,e,this)}observe(e,t){OO(this.__observers,e,t)}unobserve(e){DO(this.__observers,e)}observeAndSync(e,t){this.observe(e,t);let o=e.split(" ");for(let i=0;i<o.length;i++){let a=o[i].split(".")[0];this.hasOwnProperty(a)&&t(a,this)}}},Mn=$O;var hb=__dcg_shared_module_exports__['e'](se());var lv=__dcg_shared_module_exports__['e'](se());Vt();var bf,mt,qx,XO,YO;function nn(r,e){var t=Object.keys(e),o;for(o=0;o<t.length;o++)r=r.replace(new RegExp("\\{"+t[o]+"\\}","gi"),e[t[o]]);return r}function hI(r){var e,t,o;if(!r)throw new Error("cannot create a random attribute name for an undefined object");e="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",t="";do for(t="",o=0;o<12;o++)t+=e[Math.floor(Math.random()*e.length)];while(r[t]);return t}function rce(r,e){var t,o,i={},n,a;for(r=r.split(","),e=e||10,t=0;t<r.length;t+=2)o="&"+r[t+1]+";",n=parseInt(r[t],e),i[o]="&#"+n+";";return i["\\xa0"]="&#160;",i}function oce(r){var e={left:"start",right:"end",center:"middle",start:"start",end:"end"};return e[r]||e.start}YO=rce("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);bf={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}};qx=function(r,e){this.__root=r,this.__ctx=e};qx.prototype.addColorStop=function(r,e){var t=this.__ctx.__createElement("stop"),o,i;t.setAttribute("offset",r),e.indexOf("rgba")!==-1?(o=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,i=o.exec(e),t.setAttribute("stop-color",nn("rgb({r},{g},{b})",{r:i[1],g:i[2],b:i[3]})),t.setAttribute("stop-opacity",i[4])):t.setAttribute("stop-color",e),this.__root.appendChild(t)};XO=function(r,e){this.__root=r,this.__ctx=e};mt=function(r){var e={width:500,height:500,enableMirroring:!1},t;if(arguments.length>1?(t=e,t.width=arguments[0],t.height=arguments[1]):r?t=r:t=e,!(this instanceof mt))return new mt(t);this._randomPostfix="-"+function(){return"xxxxxxxx".replace(/x/g,function(i){return(Math.random()*16|0).toString(16)})}(),this._svgClassNames=[],this.width=t.width||e.width,this.height=t.height||e.height,this.enableMirroring=t.enableMirroring!==void 0?t.enableMirroring:e.enableMirroring,this.canvas=this,this.__document=t.document||document,t.ctx?this.__ctx=t.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)};mt.prototype.__createElement=function(r,e,t){typeof e=="undefined"&&(e={});var o=this.__document.createElementNS("http://www.w3.org/2000/svg",r),i=Object.keys(e),n,a;for(t&&(o.setAttribute("fill","none"),o.setAttribute("stroke","none")),n=0;n<i.length;n++)a=i[n],o.setAttribute(a,e[a]);var s=this._svgClassNames&&this._svgClassNames[this._svgClassNames.length-1];return s&&o.setAttribute("class",s),o};mt.prototype.__setDefaultStyles=function(){var r=Object.keys(bf),e,t;for(e=0;e<r.length;e++)t=r[e],this[t]=bf[t].canvas};mt.prototype.__applyStyleState=function(r){var e=Object.keys(r),t,o;for(t=0;t<e.length;t++)o=e[t],this[o]=r[o]};mt.prototype.__getStyleState=function(){var r,e={},t=Object.keys(bf),o;for(r=0;r<t.length;r++)o=t[r],e[o]=this[o];return e};mt.prototype.__applyStyleToCurrentElement=function(r){var e=this.__currentElement,t=this.__currentElementsToStyle;t&&(e.setAttribute(r,""),e=t.element,t.children.forEach(function(m){m.setAttribute(r,"")}));var o=Object.keys(bf),i,n,a,s,l,c;for(i=0;i<o.length;i++)if(n=bf[o[i]],a=this[o[i]],n.apply){if(a instanceof XO){if(a.__ctx)for(;a.__ctx.__defs.childNodes.length;)s=a.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[s]=s,this.__defs.appendChild(a.__ctx.__defs.childNodes[0]);e.setAttribute(n.apply,nn("url(#{id})",{id:a.__root.getAttribute("id")}))}else if(a instanceof qx)e.setAttribute(n.apply,nn("url(#{id})",{id:a.__root.getAttribute("id")}));else if(n.apply.indexOf(r)!==-1&&n.svg!==a)if((n.svgAttr==="stroke"||n.svgAttr==="fill")&&a.indexOf("rgba")!==-1){l=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,c=l.exec(a),e.setAttribute(n.svgAttr,nn("rgb({r},{g},{b})",{r:c[1],g:c[2],b:c[3]}));var p=c[4],h=this.globalAlpha;h!=null&&(p*=h),e.setAttribute(n.svgAttr+"-opacity",p)}else{var g=n.svgAttr;if(o[i]==="globalAlpha"&&(g=r+"-"+n.svgAttr,e.getAttribute(g)))continue;e.setAttribute(g,a)}}};mt.prototype.__closestGroupOrSvg=function(r){return r=r||this.__currentElement,r.nodeName==="g"||r.nodeName==="svg"?r:this.__closestGroupOrSvg(r.parentNode)};mt.prototype.getSerializedSvg=function(r){var e=new XMLSerializer().serializeToString(this.__root),t,o,i,n,a,s;if(s=/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi,s.test(e)&&(e=e.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),r)for(t=Object.keys(YO),o=0;o<t.length;o++)i=t[o],n=YO[i],a=new RegExp(i,"gi"),a.test(e)&&(e=e.replace(a,n));return e};mt.prototype.getSvg=function(){return this.__root};mt.prototype._dcgStartNamedGroup=function(r){var e=this.__createElement("g");e.setAttribute("id",r+this._randomPostfix);var t=this.__closestGroupOrSvg();this.__groupStack.push(t),t.appendChild(e),this.__currentElement=e};mt.prototype._dcgEndNamedGroup=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElement||(this.__currentElement=this.__root.childNodes[1])};mt.prototype._dcgSaveClassName=function(r){this._svgClassNames.push(r),this.__currentElement&&this.__currentElement.tagName==="path"&&!this.__currentDefaultPath&&(this.__currentElement.getAttribute("class")||this.__currentElement.setAttribute("class",r))};mt.prototype._dcgRestoreClassName=function(){this._svgClassNames.pop()};mt.prototype.save=function(){var r=this.__createElement("g"),e=this.__closestGroupOrSvg();this.__groupStack.push(e),e.appendChild(r),this.__currentElement=r,this.__stack.push(this.__getStyleState())};mt.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var r=this.__stack.pop();this.__applyStyleState(r)};mt.prototype.__addTransform=function(r){var e=this.__closestGroupOrSvg();if(e.childNodes.length>0){this.__currentElement.nodeName==="path"&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:e,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var t=this.__createElement("g");e.appendChild(t),this.__currentElement=t}var o=this.__currentElement.getAttribute("transform");o?o+=" ":o="",o+=r,this.__currentElement.setAttribute("transform",o)};mt.prototype.scale=function(r,e){e===void 0&&(e=r),this.__addTransform(nn("scale({x},{y})",{x:r,y:e}))};mt.prototype.rotate=function(r){var e=r*180/Math.PI;this.__addTransform(nn("rotate({angle},{cx},{cy})",{angle:e,cx:0,cy:0}))};mt.prototype.translate=function(r,e){this.__addTransform(nn("translate({x},{y})",{x:r,y:e}))};mt.prototype.transform=function(r,e,t,o,i,n){this.__addTransform(nn("matrix({a},{b},{c},{d},{e},{f})",{a:r,b:e,c:t,d:o,e:i,f:n}))};mt.prototype.beginPath=function(){var r,e;this.__currentDefaultPath="",this.__currentPosition={},r=this.__createElement("path",{},!0),e=this.__closestGroupOrSvg(),e.appendChild(r),this.__currentElement=r};mt.prototype.__applyCurrentDefaultPath=function(){var r=this.__currentElement;r.nodeName==="path"?r.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",r.nodeName)};mt.prototype.__addPathCommand=function(r){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=r};mt.prototype.moveTo=function(r,e){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.__currentPosition={x:r,y:e},this.__addPathCommand(nn("M {x} {y}",{x:r,y:e}))};mt.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")};mt.prototype.lineTo=function(r,e){this.__currentPosition={x:r,y:e},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(nn("L {x} {y}",{x:r,y:e})):this.__addPathCommand(nn("M {x} {y}",{x:r,y:e}))};mt.prototype.bezierCurveTo=function(r,e,t,o,i,n){this.__currentPosition={x:i,y:n},this.__addPathCommand(nn("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:r,cp1y:e,cp2x:t,cp2y:o,x:i,y:n}))};mt.prototype.quadraticCurveTo=function(r,e,t,o){this.__currentPosition={x:t,y:o},this.__addPathCommand(nn("Q {cpx} {cpy} {x} {y}",{cpx:r,cpy:e,x:t,y:o}))};var jO=function(r){var e=Math.sqrt(r[0]*r[0]+r[1]*r[1]);return[r[0]/e,r[1]/e]};mt.prototype.arcTo=function(r,e,t,o,i){var n=this.__currentPosition&&this.__currentPosition.x,a=this.__currentPosition&&this.__currentPosition.y;if(!(typeof n=="undefined"||typeof a=="undefined")){if(i<0)throw new Error("IndexSizeError: The radius provided ("+i+") is negative.");if(n===r&&a===e||r===t&&e===o||i===0){this.lineTo(r,e);return}var s=jO([n-r,a-e]),l=jO([t-r,o-e]);if(s[0]*l[1]===s[1]*l[0]){this.lineTo(r,e);return}var c=s[0]*l[0]+s[1]*l[1],p=Math.acos(Math.abs(c)),h=jO([s[0]+l[0],s[1]+l[1]]),g=i/Math.sin(p/2),m=r+g*h[0],b=e+g*h[1],x=[-s[1],s[0]],E=[l[1],-l[0]],S=function(I){var P=I[0],A=I[1];return A>=0?Math.acos(P):-Math.acos(P)},k=S(x),T=S(E);this.lineTo(m+x[0]*i,b+x[1]*i),this.arc(m,b,i,k,T)}};mt.prototype.stroke=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")};mt.prototype.fill=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")};mt.prototype.rect=function(r,e,t,o){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.moveTo(r,e),this.lineTo(r+t,e),this.lineTo(r+t,e+o),this.lineTo(r,e+o),this.lineTo(r,e),this.closePath()};mt.prototype.fillRect=function(r,e,t,o){var i,n;i=this.__createElement("rect",{x:r,y:e,width:t,height:o},!0),n=this.__closestGroupOrSvg(),n.appendChild(i),this.__currentElement=i,this.__applyStyleToCurrentElement("fill")};mt.prototype.strokeRect=function(r,e,t,o){var i,n;i=this.__createElement("rect",{x:r,y:e,width:t,height:o},!0),n=this.__closestGroupOrSvg(),n.appendChild(i),this.__currentElement=i,this.__applyStyleToCurrentElement("stroke")};mt.prototype.__clearCanvas=function(){for(var r=this.__closestGroupOrSvg(),e=r.getAttribute("transform"),t=this.__root.childNodes[1],o=t.childNodes,i=o.length-1;i>=0;i--)o[i]&&t.removeChild(o[i]);this.__currentElement=t,this.__groupStack=[],e&&this.__addTransform(e)};mt.prototype.clearRect=function(r,e,t,o){if(r===0&&e===0&&t===this.width&&o===this.height){this.__clearCanvas();return}var i,n=this.__closestGroupOrSvg();i=this.__createElement("rect",{x:r,y:e,width:t,height:o,fill:"#FFFFFF"},!0),n.appendChild(i)};mt.prototype.createLinearGradient=function(r,e,t,o){var i=this.__createElement("linearGradient",{id:hI(this.__ids),x1:r+"px",x2:t+"px",y1:e+"px",y2:o+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(i),new qx(i,this)};mt.prototype.createRadialGradient=function(r,e,t,o,i,n){var a=this.__createElement("radialGradient",{id:hI(this.__ids),cx:o+"px",cy:i+"px",r:n+"px",fx:r+"px",fy:e+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(a),new qx(a,this)};mt.prototype.__parseFont=function(){var r=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i,e=r.exec(this.font),t={style:e[1]||"normal",size:e[4]||"10px",family:e[6]||"sans-serif",weight:e[3]||"normal",decoration:e[2]||"normal",href:null};return this.__fontUnderline==="underline"&&(t.decoration="underline"),this.__fontHref&&(t.href=this.__fontHref),t};mt.prototype.__wrapTextLink=function(r,e){if(r.href){var t=this.__createElement("a");return t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r.href),t.appendChild(e),t}return e};mt.prototype.__applyText=function(r,e,t,o){var i=this.__parseFont(),n=this.__closestGroupOrSvg(),a=this.__createElement("text",{"font-family":i.family,"font-size":i.size,"font-style":i.style,"font-weight":i.weight,"text-decoration":i.decoration,x:e,y:t,"text-anchor":oce(this.textAlign)},!0);a.appendChild(this.__document.createTextNode(r)),this.__currentElement=a,this.__applyStyleToCurrentElement(o),n.appendChild(this.__wrapTextLink(i,a))};mt.prototype.fillText=function(r,e,t){this.__applyText(r,e,t,"fill")};mt.prototype.strokeText=function(r,e,t){this.__applyText(r,e,t,"stroke")};mt.prototype.measureText=function(r){return this.__ctx.font=this.font,this.__ctx.measureText(r)};mt.prototype.arc=function(r,e,t,o,i,n){if(o!==i){o=o%(2*Math.PI),i=i%(2*Math.PI),o===i&&(i=(i+2*Math.PI-.001*(n?-1:1))%(2*Math.PI));var a=r+t*Math.cos(i),s=e+t*Math.sin(i),l=r+t*Math.cos(o),c=e+t*Math.sin(o),p=n?0:1,h=0,g=i-o;g<0&&(g+=2*Math.PI),n?h=g>Math.PI?0:1:h=g>Math.PI?1:0,this.lineTo(l,c),this.__addPathCommand(nn("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:t,ry:t,xAxisRotation:0,largeArcFlag:h,sweepFlag:p,endX:a,endY:s})),this.__currentPosition={x:a,y:s}}};mt.prototype.clip=function(){var r=this.__closestGroupOrSvg(),e=this.__createElement("clipPath"),t=hI(this.__ids),o=this.__createElement("g");this.__applyCurrentDefaultPath(),r.removeChild(this.__currentElement),e.setAttribute("id",t),e.appendChild(this.__currentElement),this.__defs.appendChild(e),r.setAttribute("clip-path",nn("url(#{id})",{id:t})),r.appendChild(o),this.__currentElement=o};mt.prototype.drawImage=function(){var r=Array.prototype.slice.call(arguments),e=r[0],t,o,i,n,a=0,s=0,l,c,p,h,g,m,b,x,E,S,k;if(r.length===3)t=r[1],o=r[2],l=e.width,c=e.height,i=l,n=c;else if(r.length===5)t=r[1],o=r[2],i=r[3],n=r[4],l=e.width,c=e.height;else if(r.length===9)a=r[1],s=r[2],l=r[3],c=r[4],t=r[5],o=r[6],i=r[7],n=r[8];else throw new Error("Invalid number of arguments passed to drawImage: "+arguments.length);p=this.__closestGroupOrSvg(),b=this.__currentElement;var T="translate("+t+", "+o+")";if(e instanceof mt){if(h=e.getSvg().cloneNode(!0),h.childNodes&&h.childNodes.length>1){for(g=h.childNodes[0];g.childNodes.length;)k=g.childNodes[0].getAttribute("id"),this.__ids[k]=k,this.__defs.appendChild(g.childNodes[0]);if(m=h.childNodes[1],m){var I=m.getAttribute("transform"),P;I?P=I+" "+T:P=T,m.setAttribute("transform",P),p.appendChild(m)}}}else(e.nodeName==="CANVAS"||e.nodeName==="IMG")&&(x=this.__createElement("image"),x.setAttribute("width",i),x.setAttribute("height",n),x.setAttribute("opacity",this.globalAlpha),x.setAttribute("preserveAspectRatio","none"),(a||s||l!==e.width||c!==e.height)&&(E=this.__document.createElement("canvas"),E.width=i,E.height=n,S=E.getContext("2d"),S.drawImage(e,a,s,l,c,0,0,i,n),e=E),x.setAttribute("transform",T),x.setAttribute("xlink:href",e.nodeName==="CANVAS"?e.toDataURL():e.getAttribute("src")),p.appendChild(x))};mt.prototype.createPattern=function(r,e){var t=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),o=hI(this.__ids),i;return t.setAttribute("id",o),t.setAttribute("width",r.width),t.setAttribute("height",r.height),r.nodeName==="CANVAS"||r.nodeName==="IMG"?(i=this.__document.createElementNS("http://www.w3.org/2000/svg","image"),i.setAttribute("width",r.width),i.setAttribute("height",r.height),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r.nodeName==="CANVAS"?r.toDataURL():r.getAttribute("src")),t.appendChild(i),this.__defs.appendChild(t)):r instanceof mt&&(t.appendChild(r.__root.childNodes[1]),this.__defs.appendChild(t)),new XO(t,this)};mt.prototype.setLineDash=function(r){r&&r.length>0?this.lineDash=r.join(","):this.lineDash=null};mt.prototype.ellipse=function(r,e,t,o,i,n,a,s){if(n!==a){n=n%(2*Math.PI),a=a%(2*Math.PI),n===a&&(a=(a+2*Math.PI-.001*(s?-1:1))%(2*Math.PI));var l=r+Math.cos(-i)*t*Math.cos(a)+Math.sin(-i)*o*Math.sin(a),c=e-Math.sin(-i)*t*Math.cos(a)+Math.cos(-i)*o*Math.sin(a),p=r+Math.cos(-i)*t*Math.cos(n)+Math.sin(-i)*o*Math.sin(n),h=e-Math.sin(-i)*t*Math.cos(n)+Math.cos(-i)*o*Math.sin(n),g=s?0:1,m=0,b=a-n;b<0&&(b+=2*Math.PI),s?m=b>Math.PI?0:1:m=b>Math.PI?1:0,this.lineTo(p,h),this.__addPathCommand(nn("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:t,ry:o,xAxisRotation:i*(180/Math.PI),largeArcFlag:m,sweepFlag:g,endX:l,endY:c})),this.__currentPosition={x:l,y:c}}};mt.prototype._dcgSetTitle=function(r){var e=this.__currentElement,t=!1,o,i=e.getElementsByTagName("title");i.length>0?o=i[0]:(o=this.__document.createElementNS("http://www.w3.org/2000/svg","title"),t=!0),o.textContent=r,t&&e.appendChild(o)};mt.prototype.drawFocusRing=function(){};mt.prototype.createImageData=function(){};mt.prototype.getImageData=function(){};mt.prototype.putImageData=function(){};mt.prototype.globalCompositeOperation=function(){};mt.prototype.setTransform=function(){};var V6=mt;var La=class{constructor(e,t){this.width=e,this.height=t}};var Kc=class r extends Mn{constructor(){super();this.highlightPropertyMultipliers={};this.stateProperties=[],this.cloneProperties=[],this.highlightPropertyMultipliers={},this.config=new Mn;for(let t in Bo)Bo.hasOwnProperty(t)&&this.addStateProperty(t,Bo[t]);this.setProperty("labelHangingColor","rgba(150,150,150,1)"),this.setProperty("lastChangedAxis","x"),this.addDynamicProperties()}addDynamicProperties(){let t=this;function o(n,a,s){t.cloneProperties.push(n);function l(){t.setProperty(n,t.config.projectorMode?s:a)}t.config.observe("projectorMode",l),l()}function i(n,a,s,l,c){t.cloneProperties.push(n);function p(){let g;t.config.projectorMode?g=t.highlight?c:l:g=t.highlight?s:a,t.setProperty(n,g)}let h=[a,s,l,c];t.highlightPropertyMultipliers[n]=h.map(g=>g/h[0]),t.observe("highlight",p),t.config.observe("projectorMode",p),p()}o("labelSize",14,19),o("majorAxisOpacity",.4,1),o("minorAxisOpacity",.12,.25),o("axisOpacity",.9,.9),o("axisLineWidth",1.5,2),o("axisLineOffset",.25,0),o("pixelsPerLabel",80,120),i("curveOpacity",.7,1,.7,1),o("globalCurveColor",void 0,void 0),o("disableFill",!1,!1),i("graphLineWidth",2.5,3.5,5,7),i("pointLineWidth",8,8*1.2,8*1.3,8*1.2*1.3)}setController(t){this.controller=t,this.registerCallbacks()}getHighlightPropertyMultiplier(t,o){let i=o?1:0;return this.config.projectorMode?this.highlightPropertyMultipliers[t][2+i]:this.highlightPropertyMultipliers[t][i]}getFillOpacityMultiplier(){return this.highlight&&this.controller&&this.controller.isGeometry()?1.3:1}addStateProperty(t,o){this[t]=o,this.stateProperties.push(t),this.cloneProperties.push(t)}static fromConfig(t){let o=new r;for(let i in t)o.config.setProperty(i,t[i]);return o}static fromEmptyConfig(){return r.fromConfig(mf({}))}static fromObject(t){let o=new r;return o.cloneProperties.forEach(i=>{t.hasOwnProperty(i)&&o.setProperty(i,t[i])}),o}registerCallbacks(){let t=()=>{var o;(o=this.controller)==null||o.requestRedrawGraph()};this.stateProperties.forEach(o=>{this.observe(o,t)}),this.config.observe("backgroundColor",t),this.config.observe("textColor",t),this.config.observe("accentColor",t),this.config.observe("invertedColors",t),this.observe("backgroundColor",t),this.observe("textColor",t),this.observe("accentColor",t),this.config.observe("enableTabindex",t),this.config.observeAndSync("projectorMode",t)}_validateSetting(t,o){let i;switch(t){case"xAxisMinorSubdivisions":case"yAxisMinorSubdivisions":i=Math.round(Math.min(Math.max(0,o),5)),o!==i&&console.warn("minorSubdivisions must be an integer between 0 and 5. You provided "+o+", which we changed to "+i+".");break;case"degreeMode":case"projectorMode":case"showGrid":case"showXAxis":case"showYAxis":case"xAxisNumbers":case"yAxisNumbers":case"polarNumbers":case"enableTabindex":case"invertedColors":case"complex":i=o==="false"?!1:!!o,o!==i&&console.warn(t+" must be a Boolean. You provided "+o+" ("+typeof o+"), which we changed to "+i+" ("+typeof i+").");break;case"xAxisStep":case"yAxisStep":i=parseFloat(o),isFinite(o)||(i=0,console.warn(t+" must be a number. You provided "+o+", which we changed to "+i+"."));break;case"xAxisScale":case"yAxisScale":i=o,!this.config.logScales&&o==="logarithmic"?(i="linear",console.warn("Must set logScales: true to set "+t+" to 'logarithmic'.")):o!=="linear"&&o!=="logarithmic"&&(i="linear",console.warn(t+' must be "linear" or "logarithmic". You provided '+o+", which we changed to "+i+"."));break;case"xAxisArrowMode":case"yAxisArrowMode":i=__dcg_shared_module_exports__['Xd'][o],i!==o&&(i=__dcg_shared_module_exports__['Xd'].NONE,console.warn(`unknown AxisArrowMode. Allowed values are: 
`+Object.keys(__dcg_shared_module_exports__['Xd']).join(`
`)));break;case"xAxisLabel":case"yAxisLabel":i=o,typeof o!="string"&&(i="",console.warn(t+" must be a string. you provided a "+typeof o+"."));break;case"randomSeed":i=o,typeof o!="string"&&(i=""+o,console.warn("randomSeed must be a string. you provided a "+typeof o+"."));break;case"backgroundColor":i=o,typeof o!="string"&&(i="",console.warn(t+" must be a string. you provided a "+typeof o+".")),i||(i="#fff"),i[0]!=="#"&&(i="#"+i);break;case"textColor":i=o,typeof o!="string"&&(i="",console.warn(t+" must be a string. you provided a "+typeof o+".")),i||(i="#000"),i[0]!=="#"&&(i="#"+i);break;case"accentColor":i=o,typeof o!="string"&&(i="",console.warn(t+" must be a string. you provided a "+typeof o+".")),i||(i=__dcg_shared_module_exports__['Md'].FOCUS_OUTLINE),i[0]!=="#"&&(i="#"+i);break;case"fontSize":i=o,typeof o!="number"&&(i=parseInt(i,10),console.warn("fontSize must be a number. Attempted to convert "+o+" to "+i+"."));break;case"language":i=o,typeof o!="string"?(i="",console.warn(t+" must be a string. you provided a "+typeof o+".")):o!=="en"&&!eT(o)&&(i="en",console.warn(o+" is not currently an available language."));break;default:i=o;break}return i}validateSettings(t){let o={},i=!1;for(let n in t)this.stateProperties.indexOf(n)>=0?o[n]=this._validateSetting(n,t[n]):(console.warn('Invalid graph setting "'+n+'".'),i=!0);return i&&console.warn(`Available graph settings are: 
`+this.stateProperties.join(`
`)),this.config.allowComplex||o.complex&&(console.warn("complex: true is not compatible with allowComplex: false. Forcing complex: false"),o.complex=!1),o.complex&&(o.degreeMode&&console.warn("degreeMode: true is not compatible with complex: true. Forcing degreeMode: false"),o.degreeMode=!1),o}getConfiguredBackgroundColor(){return __dcg_shared_module_exports__['Dd'](this.config.backgroundColor||"#fff")}getBackgroundColor({invertWhite:t}={invertWhite:!1}){let o=this.getConfiguredBackgroundColor();return this.config.invertedColors&&t?__dcg_shared_module_exports__['Hd'](o):o}getConfiguredTextColor(){return __dcg_shared_module_exports__['Dd'](this.config.textColor||"#000")}getConfiguredAccentColor(){return __dcg_shared_module_exports__['Dd'](this.config.accentColor||__dcg_shared_module_exports__['Md'].FOCUS_OUTLINE)}getTextColor({invertBlack:t}={invertBlack:!1}){let o=this.getConfiguredTextColor();return this.config.invertedColors&&t?__dcg_shared_module_exports__['Hd'](o):o}getAccentColor({invertBlack:t}={invertBlack:!1}){let o=this.getConfiguredAccentColor();return this.config.invertedColors&&t?__dcg_shared_module_exports__['Hd'](o):o}cloneConfig(){let t={};for(let o of Object.keys(Nl))t[o]=__dcg_shared_module_exports__['Uc'](this.config[o]);return t}};Vt();var gI=class{constructor(e,t){this.is3d=!0;this.color="#000000",this.showHighlight=!1,this.selected=!1,this.hoistToTop=!1,this.id=e,this.branches=t!==void 0?t:[]}updateFrom(e){e&&(this.showHighlight=e.showHighlight,this.hoistToTop=e.hoistToTop,this.selected=e.selected)}};function U6(r){return r.is3d}function Pa(r,e){if(U6(e)||r.isGeoUIActive()&&r.getAllToolPreviewItems().filter(o=>o.id===e.id).length>0)return!1;for(let t of e.branches)if(Os(t,r.getGraphSettings().config.audioTraceSimult))return!0;return!1}function Os(r,e){if(r)switch(r.branchMode){case 8:case 5:case 6:return e&&r.segments.length>0;case 1:case 2:case 3:case 4:case 25:case 26:return r.segments.length>0;default:return!1}}function z6(r,e){for(let t=0;t<r.branches.length;t++)if(Os(r.branches[t],e))return t;return 0}function Hx(r,e,t){let o=0;for(let i=0;i<=e;i++)Os(r.branches[i],t)&&(o+=1);return o}function q6(r){switch(r.graphMode){case 1:case 2:case 3:case 4:case 25:case 26:return!0;default:return!1}}function H6(r,e){switch(e){case 2:case 8:case 5:case 6:case 3:case 4:case 25:case 26:return{independentMin:r.xmin,independentMax:r.xmax,dependentMin:r.ymin,dependentMax:r.ymax};case 1:return{independentMin:r.ymin,independentMax:r.ymax,dependentMin:r.xmin,dependentMax:r.xmax};default:throw JO(e)}}function JO(r){return`Unexpected graph mode. Received ${r}`}function ZO(r){let e=Math.random()*2-1;return(r+.2*e)/1.02}function QO(r,e){if(r===1)return e.y;if(r===2||r===8||r===5||r===6)return e.x;throw JO(r)}function K6(r,e){let t=([o,i])=>{let n=e!=null&&e.degreeMode?o*Math.PI/180:o;return[i*Math.cos(n),i*Math.sin(n)]};return __dcg_shared_module_exports__['k'](__dcg_shared_module_exports__['o'](r,2).map(o=>t(o)),!0)}function eR(r,e,t){let o=ol(r,e.mathToPixels,t),i=hS(o,{xmin:0,xmax:e.screen.width,ymin:0,ymax:e.screen.height}),n=e.pixelsToMath;return t===wd&&(n=new __dcg_shared_module_exports__['qd'](n.yScale,n.xScale)),i.map(s=>ol(s,n,t))}function W6(r,e){return r[0]-e[0]}function $6(r){switch(r.graphMode){case 2:case 3:case 4:case 25:case 26:return{independent:r.x,dependent:r.y};case 1:return{independent:r.y,dependent:r.x};default:throw JO(r.graphMode)}}var ice=.1;function tR(r){return r<0?ice:0}function Kx(r){var P;let e=r.getGrapher();if(!e)return"";let t=e.viewportController.getViewport(),o=e.getProjection(),{showGrid:i,showXAxis:n,xAxisNumbers:a,showYAxis:s,yAxisNumbers:l,xAxisLabel:c,yAxisLabel:p}=e.settings,h=!1,g="",m=!1,b=[],x=ur(__dcg_shared_module_exports__['aa'](t.xmin,Fu(o,t.xmin)).latex),E=ur(__dcg_shared_module_exports__['aa'](t.xmax,Fu(o,t.xmax)).latex),S=ur(__dcg_shared_module_exports__['aa'](t.ymin,Mk(o,t.ymin)).latex),k=ur(__dcg_shared_module_exports__['aa'](t.ymax,Mk(o,t.ymax)).latex),T=t.zmin?ur(__dcg_shared_module_exports__['aa'](t.zmin).latex):"",I=t.zmax?ur(__dcg_shared_module_exports__['aa'](t.zmax).latex):"";if(r.is3dProduct()){let{xmin:A,xmax:D,ymin:G,ymax:N,zmin:U,zmax:K}=t,{showAxis3D:H,showNumbers3D:w,showPlane3D:F}=e.settings;A===G&&A===U&&D===N&&D===K&&H?(n=s=h=!1,b.push(r.s("graphing-calculator-narration-audio-trace-description-visible-xyz-axis-range",{xmin:x,xmax:E}))):(n=s=h=H,c=p=g="",a=l=m=w,i=n&&F)}if(n&&(a&&c!==""?b.push(r.s("graphing-calculator-narration-audio-trace-description-visible-x-axis-range-and-label",{xmin:x,xmax:E,label:c})):a&&c===""?b.push(r.s("graphing-calculator-narration-audio-trace-description-visible-x-axis-range",{xmin:x,xmax:E})):!a&&c!==""?b.push(r.s("graphing-calculator-narration-audio-trace-description-visible-x-axis-and-label",{label:c})):!a&&c===""&&b.push(r.s("graphing-calculator-narration-audio-trace-description-visible-x-axis"))),s&&(l&&p!==""?b.push(r.s("graphing-calculator-narration-audio-trace-description-visible-y-axis-range-and-label",{ymin:S,ymax:k,label:p})):l&&p===""?b.push(r.s("graphing-calculator-narration-audio-trace-description-visible-y-axis-range",{ymin:S,ymax:k})):!l&&p!==""?b.push(r.s("graphing-calculator-narration-audio-trace-description-visible-y-axis-and-label",{label:p})):!l&&p===""&&b.push(r.s("graphing-calculator-narration-audio-trace-description-visible-y-axis"))),h&&(m&&g!==""?b.push(r.s("graphing-calculator-narration-audio-trace-description-visible-z-axis-range-and-label",{zmin:T,zmax:I,label:g})):m&&g===""?b.push(r.s("graphing-calculator-narration-audio-trace-description-visible-z-axis-range",{zmin:T,zmax:I})):!m&&g!==""?b.push(r.s("graphing-calculator-narration-audio-trace-description-visible-z-axis-and-label",{label:g})):!m&&g===""&&b.push(r.s("graphing-calculator-narration-audio-trace-description-visible-z-axis"))),i&&b.push(r.s("graphing-calculator-narration-audio-trace-description-visible-grid")),r.is3dProduct()&&b.push(nce(r)),!r.isGeometry()&&!r.is3dProduct()){let A=(P=r.getGrapher())==null?void 0:P.graphSketches,D=0;for(let G in A)Pa(r,A[G])&&(D+=1);b.push(r.s("graphing-calculator-narration-audio-trace-traceable-curves",{sketchCount:__dcg_shared_module_exports__['pa'](D)}))}return b.join(" ").trim()}function nce(r){return""}var Vl=-1;function j6(r,e,t){return{x:r.x,y:r.y,branch:r.branch,reportedBranch:t,type:r.type,graphMode:e,intersects:r.intersects}}var yf=101,mI=class{constructor(e,t,o){this.grapher=o,this.controller=e,this.audiograph=t,this.reset()}reset(){this.currentPoint=void 0,this.resetToFirstBranch(),this.sampledPoints=[],this.pois=[],this.independent=0}resetToFirstBranch(){let e=this.getCurrentSketch();this.branch=e?z6(e,this.grapher.settings.config.audioTraceSimult):0}resetTracePoint(){this.grapher.traceLayer.setTraceInfo(void 0),this.grapher.traceLayer.setTraceLine(void 0),this.drawTracePoint(this.getCurrentPoint())}drawTracePoint(e){let t=this.getCurrentSketch();if(!e||!t)return;let o=t.branches[this.branch];if(!o)return;let i=o.branchMode;if(__dcg_shared_module_exports__['y'](i))return;let n={x:e.x,y:e.y},a={branchInfo:{branch:e.branch,id:t.id,sketch:t},pt:n};__dcg_shared_module_exports__['s'](a,this.grapher.traceLayer.getTraceInfo())||(this.grapher.traceLayer.setTraceInfo(a),this.controller.requestRedrawGraph())}drawTraceLine(e,t){if(e===void 0||!t)return;let o=this.getCurrentSketch();t===1?this.grapher.traceLayer.setTraceLine({x:void 0,y:e,color:o==null?void 0:o.color}):this.grapher.traceLayer.setTraceLine({x:e,y:void 0,color:o==null?void 0:o.color})}moveToOrigin(){let e=this.getCurrentSketch();if(!e||!Pa(this.controller,e))return;let t=e.branches[this.branch];if(!Os(t,this.grapher.settings.config.audioTraceSimult))return;let o=t.branchMode;if(o===2)this.setIndependent("x",0);else if(o===1)this.setIndependent("y",0);else if(__dcg_shared_module_exports__['y'](o)){let i=this.getSortedPOI()[0];this.setIndependent("x",i?i.x:0)}}getCurrentSketch(){let e,t=this.controller.getSelectedItem();if(t)if(t.type==="table"){let o=this.audiograph.getFocusedTableLocation();if(o&&(e=this.getGraphSketchForTableLocation(t,o)),!e){for(let i of t.columnModels)if(e=this.grapher.getGraphSketch(i.id),e!==void 0)break}}else e=this.grapher.getGraphSketch(t.id);return e}getFirstTraceableSketch(e){let[t]=this.getTraceableCurves(void 0,this.controller.shouldAudioTraceReverseExpressions()?"up":"down");if(t){let o=this.controller.getItemModelByIndex(t.expressionIndex);if(!o)return;let i;switch(t.type){case"expression":i=this.grapher.getGraphSketch(o.id);break;case"table":e!=null&&e.selectAssociatedExpression&&this.audiograph.setFocusedTableLocation(t.location),i=this.getGraphSketchForTableLocation(o,t.location);break;default:let n=t;throw new Error(`Unexpected curve type ${n}`)}if(i)return e!=null&&e.selectAssociatedExpression&&this.controller.dispatch({type:"set-selected-index",index:t.expressionIndex}),i}}canTrace(e){if(!e||e.type==="image"||e.type==="text")return!1;let t;if(e.type==="expression"&&e.shouldGraph)t=this.grapher.getGraphSketch(e.id);else if(e.type==="table"){for(let o of e.columnModels)if(o.shouldGraph){t=this.grapher.getGraphSketch(o.id);break}}return t?Pa(this.controller,t):!1}getTraceableExpressionCount(){let e=0,t=this.controller.getItemCount();for(let o=0;o<t;o++){let i=this.controller.getItemModelByIndex(o);i&&this.canTrace(i)&&e++}return e}computeStepSizes(){let e=this.grapher.getProjection().viewport;if(!e)return;let t=e.xmin,o=e.xmax,i=e.ymin,n=e.ymax,a=this.getCurrentSketch();if(!a||!Pa(this.controller,a))return;let s=a.branches[this.branch];if(!Os(s,this.grapher.settings.config.audioTraceSimult))return;let l=s.branchMode;if(l===2)this.independent<t?this.independent=t:this.independent>o&&(this.independent=o);else if(l===1)this.independent<i?this.independent=i:this.independent>n&&(this.independent=n);else if(__dcg_shared_module_exports__['y'](l)){let c,p;this.independent<t?(p=this.getSortedPOI()[0],this.independent=p&&p.x!==void 0?p.x:0):this.independent>o&&(c=this.getSortedPOI(),p=c[c.length-1],this.independent=p&&p.x!==void 0?p.x:0)}}getPoint(e,t){let o,i=this.getCurrentSketch();if(!i||!Pa(this.controller,i))return o;let n,a,s=0,l=i.branches[e];if(!l)return;let c=Hx(i,e,this.grapher.settings.config.audioTraceSimult);"compiled"in l&&l.compiled&&(a=l.compiled.fn);let p=l.branchMode,h=this.grapher.getProjection(),{mathToPixels:g,pixelsToMath:m,screen:b}=h;if(p===2||p===8){let x=m.mapX(g.mapX(t)+b.width/(yf-1));n=this.getInterveningPOIs(t,x,e,p)[0],(!n||n.x!==t||n.branch!==e)&&(n=void 0,s=a?a(t):0),n?o={x:n.x,y:n.y,type:n.type,typeChain:n.typeChain,branch:n.branch,reportedBranch:c,graphMode:p,intersects:n.intersects}:a&&(o={x:t,y:s,branch:e,reportedBranch:c,graphMode:p})}else if(p===1){let x=m.mapY(g.mapY(t)-b.height/(yf-1));n=this.getInterveningPOIs(t,x,e,p)[0],(!n||n.y!==t||n.branch!==e)&&(n=void 0,s=a?a(t):0),n?o={x:n.x,y:n.y,type:n.type,typeChain:n.typeChain,branch:n.branch,reportedBranch:c,graphMode:p,intersects:n.intersects}:a&&(o={y:t,x:s,branch:e,reportedBranch:c,graphMode:p})}else if(__dcg_shared_module_exports__['y'](p)){let x=m.mapX(g.mapX(t)+b.width/(yf-1));n=this.getInterveningPOIs(t,x,e,p)[0],n&&n.x===t&&n.branch===e?o={x:n.x,y:n.y,type:n.type,typeChain:n.typeChain,branch:n.branch,reportedBranch:c,graphMode:p,intersects:n.intersects}:o={x:t,y:NaN,branch:e,reportedBranch:c,graphMode:p}}return o}getSampledPoints(){return this.sampledPoints.length===0&&this.updateSampledPoints(),this.sampledPoints}updateSampledPoints(){let e=this.getCurrentSketch();if(!e||!Pa(this.controller,e))return;let t=[],o=this.grapher.getProjection(),i=o.viewport;for(let n=0;n<e.branches.length;n++){let a=e.branches[n];if(!Os(a,this.grapher.settings.config.audioTraceSimult))continue;let s=a.branchMode,l=0,c=0,p=[],h;if(s===2||__dcg_shared_module_exports__['y'](s))l=i.xmin,c=i.xmax,h=(g,m,b)=>o.mathToPixels.interpolateX(g,m,b);else if(s===1)l=i.ymin,c=i.ymax,h=(g,m,b)=>o.mathToPixels.interpolateY(g,m,b);else continue;for(let g=0;g<yf;g++){let m=h(l,c,g/(yf-1)),b=__dcg_shared_module_exports__['aa'](m).value,x=h(l,c,(g+1)/(yf-1)),E=__dcg_shared_module_exports__['aa'](x).value,S=this.getInterveningPOIs(b,E,n,s);if(S.length>0)p.push(...S);else{let k=this.getPoint(n,b);k&&p.push(k)}}t.push(...this.removeDuplicates(p,s))}this.sampledPoints=t}getCurrentPoint(){return this.currentPoint||this.updateCurrentPoint(),this.currentPoint}updateCurrentPoint(e){if(e){this.currentPoint=e;let t=e.graphMode;t===2||__dcg_shared_module_exports__['y'](t)?this.independent=e.x!==void 0?e.x:0:t===1&&(this.independent=e.y!==void 0?e.y:0),this.branch=e.branch}else this.currentPoint=this.getPoint(this.branch,this.independent)}prevPoint(){this.moveToPoint(-1)}nextPoint(){this.moveToPoint(1)}firstPoint(){let e=this.getSampledPoints();e.length>0&&this.updateCurrentPoint(e[0])}lastPoint(){let e=this.getSampledPoints();e.length>0&&this.updateCurrentPoint(e[e.length-1])}moveToPoint(e){let t=this.getCurrentPoint();if(!t)return;if(__dcg_shared_module_exports__['y'](t.graphMode)){this.moveToPOI(e);return}let o=this.getSampledPoints(),i=this.getClosestPointIndexOnSameBranch(o,t);if(i!==-1){let n=i+e;n<=0?(n=0,gt(this.controller.s("graphing-calculator-narration-audio-trace-first-point"))):n>=o.length-1&&(n=o.length-1,gt(this.controller.s("graphing-calculator-narration-audio-trace-last-point")));let a=o[n];this.updateCurrentPoint(a)}}canMoveToPrevPoint(){let e=this.getCurrentPoint();if(!e)return!1;if(__dcg_shared_module_exports__['y'](e.graphMode))return this.canMoveToPrevPOI();let t=this.getSampledPoints(),o=this.getClosestPointIndexOnSameBranch(t,e);return o!==-1&&o>0}canMoveToNextPoint(){let e=this.getCurrentPoint();if(!e)return!1;if(__dcg_shared_module_exports__['y'](e.graphMode))return this.canMoveToNextPOI();let t=this.getSampledPoints(),o=this.getClosestPointIndexOnSameBranch(t,e);return o!==-1&&o<t.length-1}prevPOI(){this.moveToPOI(-1)}nextPOI(){this.moveToPOI(1)}getSortedPOI(){return(!this.pois||this.pois.length===0)&&this.updatePOI(),this.pois}updatePOI(){let e=[],t=[],o=this.getCurrentSketch();if(!(!o||!Pa(this.controller,o))){for(let i=0;i<o.branches.length;i++){let n=o.branches[i];if(!n)continue;let a=Hx(o,i,this.grapher.settings.config.audioTraceSimult),s=n.branchMode;t=[];let l=[...o.getBranchPOI(i).map(c=>j6(c,s,a)),...this.getSyntheticIntersectionPoints(i)];l.length>0&&(s===2||__dcg_shared_module_exports__['y'](s)?t=__dcg_shared_module_exports__['i'](l,"x"):s===1&&(t=__dcg_shared_module_exports__['i'](l,"y")),e.push(...this.removeDuplicates(t,s)))}this.pois=e}}removeDuplicates(e,t){if(e.length===0)return[];let o=[];for(let i of e){if(i={...i},i.graphMode=t,o.length===0){o.push(i);continue}let n=o[o.length-1],a=__dcg_shared_module_exports__['aa'](n.x).value===__dcg_shared_module_exports__['aa'](i.x).value,s=__dcg_shared_module_exports__['aa'](n.y).value===__dcg_shared_module_exports__['aa'](i.y).value;(a&&s||t===1&&s&&i.type===Vl||t!==1&&a&&i.type===Vl)&&n.branch===i.branch?(n.typeChain||(n.typeChain=n.type!==void 0?[n.type]:[]),i.type!==void 0&&n.typeChain.indexOf(i.type)===-1&&n.typeChain.push(i.type),(i.type===1001||i.type===Vl&&i.intersects&&(n.intersects===void 0||n.type===Vl))&&(n.intersects=i.intersects)):o.push(i)}return o}getSyntheticIntersectionPoints(e){var l;let t=(l=this.getCurrentSketch())==null?void 0:l.branches[e],o=[];if(!t||__dcg_shared_module_exports__['vd'](t))return[];let i=t.branchMode===1?wd:dc,n=this.controller.getGrapher2d().poiDotsLayer.getDrawnPOI().filter(c=>c.type===1006||c.type===1008&&!c.bareLabel),a=this.controller.getGrapher2d().getProjection(),s=t.segments.map(c=>ol(c,a.mathToPixels,i));for(let c of n){let p=a.map_pt({x:c.x,y:c.y}),h={xmin:p.x-1,xmax:p.x+1,ymin:p.y-1,ymax:p.y+1};for(let g of s)if(hS(g,h).length!==0){let b=j6(c,t.branchMode,e);"tableId"in c.sketch.branches[0]&&c.sketch.branches[0].tableId?b.intersects=c.sketch.branches[0].tableId:b.intersects=c.sketch.id,b.type=Vl,o.push(b)}}return o}getInterveningPOIs(e,t,o,i){let n=[],a=this.getSortedPOI(),s=NaN;for(let l of a)l&&((i===2||__dcg_shared_module_exports__['y'](i))&&!isNaN(l.x)?s=l.x:i===1&&!isNaN(l.y)&&(s=l.y),l.branch===o&&!isNaN(s)&&(e<=s&&s<t||t<=s&&s<e)&&n.push(l));return n}setIndependent(e,t){let o=this.getSampledPoints();for(let n of o)if(n&&n.hasOwnProperty(e)&&n[e]===t){if(e==="x"){this.independent=n.x!==void 0?n.x:0,this.updateCurrentPoint();return}else if(e==="y"){this.independent=n.y!==void 0?n.y:0,this.updateCurrentPoint();return}}let i=!0;if(o.length>0){let n=Math.floor((o.length-1)/2),a=o[n];a&&(e==="x"?(this.independent=a.x!==void 0?a.x:0,i=!1):e==="y"&&(this.independent=a.y!==void 0?a.y:0,i=!1))}i&&(this.independent=0),this.resetToFirstBranch(),this.updateCurrentPoint()}moveToPOI(e){if(!this.getCurrentPoint())return;let o=this.getSampledPoints(),i=this.getPOIIndexByDirection(e);i===-1?gt(this.controller.s("graphing-calculator-narration-audio-trace-no-more-pois")):this.updateCurrentPoint(o[i])}getPOIIndexByDirection(e){let t=this.getCurrentPoint();if(!t)return-1;let o=this.getSampledPoints(),i=this.getClosestPointIndexOnSameBranch(o,t),n=-1;if(i!==-1){let a=t.graphMode,s=e===1?o.length-1:0;for(let l=i;l!==s+e;l+=e){let c=o[l];if(((a===2||__dcg_shared_module_exports__['y'](a))&&t.x!==c.x||a===1&&t.y!==c.y)&&c.type!==void 0){n=l;break}}}return n}canMoveToPrevPOI(){return this.getPOIIndexByDirection(-1)!==-1}canMoveToNextPOI(){return this.getPOIIndexByDirection(1)!==-1}getClosestPointIndexOnSameBranch(e,t){let o=-1,i=1/0;if(e.length>0&&t){let n=t.graphMode;for(let a=0;a<e.length;a++){let s=e[a];if(t.branch!==s.branch)continue;let l;n===2||__dcg_shared_module_exports__['y'](n)?l=Math.abs(s.x-t.x):l=Math.abs(s.y-t.y),l<i&&(o=a,i=l)}}return o}prevCurve(){this.controller.shouldAudioTraceReverseExpressions()?this.switchCurves("down"):this.switchCurves("up")}nextCurve(){this.controller.shouldAudioTraceReverseExpressions()?this.switchCurves("up"):this.switchCurves("down")}switchCurves(e){let t=this.controller.getSelectedItem();if(!t)return;let o=e==="down"?this.findNextTraceableIndex(t.index):this.findPrevTraceableIndex(t.index);if(o){let i=this.controller.getItemModelByIndex(o.expressionIndex);if(!i)return;o.type==="table"&&this.audiograph.setFocusedTableLocation(o.location),this.controller.dispatch({type:"set-selected-id",id:i.id,state:"selected"}),this.controller.runAfterDispatch(()=>this.audiograph.enterAudioTrace())}}canMoveToPrevCurve(){let e=this.controller.getSelectedItem();return e?this.controller.shouldAudioTraceReverseExpressions()?!!this.findNextTraceableIndex(e.index):!!this.findPrevTraceableIndex(e.index):!1}canMoveToNextCurve(){let e=this.controller.getSelectedItem();return e?this.controller.shouldAudioTraceReverseExpressions()?!!this.findPrevTraceableIndex(e.index):!!this.findNextTraceableIndex(e.index):!1}*getTraceableCurves(e,t="down"){let o=t==="down"?1:-1;for(let i=e!=null?e:t==="down"?0:this.controller.getItemCount()-1;t==="down"?i<=this.controller.getItemCount()-1:i>=0;i+=o){let n=this.controller.getItemModelByIndex(i);if(this.canTrace(n))if((n==null?void 0:n.type)==="table"){let a=[];for(let l=1;l<n.columnModels.length;l+=1){let c=n.columnModels[l];c!=null&&c.shouldGraph&&this.grapher.getGraphSketch(c.id)&&a.push({type:"table",expressionIndex:i,location:{tableId:n.id,type:"cell",location:{column:l,row:0}}})}this.controller.areTableRegressionsEnabled()&&n.regression&&!n.regression.hidden&&a.push({type:"table",expressionIndex:i,location:{type:"table-regression",location:void 0,tableId:n.id}}),t==="up"&&a.reverse();let s=this.audiograph.getFocusedTableLocation();if(s){let l=a.findIndex(({location:c})=>__dcg_shared_module_exports__['s'](c,s));yield*a.slice(l!==-1?l:0)}else yield*a}else yield{type:"expression",expressionIndex:i}}}findNextTraceableIndex(e){let[t,o]=this.getTraceableCurves(e,"down");return o}findPrevTraceableIndex(e){let[t,o]=this.getTraceableCurves(e,"up");return o}getGraphSketchForTableLocation(e,t){if(!(!e||e.type!=="table")){if(t.type==="cell"){let o=e.columnModels[t.location.column];if(o)return this.grapher.getGraphSketch(o.id)}else if(t.type==="table-regression"){let o=e.regression;if(o)return this.grapher.getGraphSketch(o.id)}}}};bn();var Y6="data:application/octet-stream;base64,//tQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAIAAAHVwAgICAgICAgICAgICBAQEBAQEBAQEBAQEBgYGBgYGBgYGBgYGBggICAgICAgICAgICAoKCgoKCgoKCgoKCgoMDAwMDAwMDAwMDAwODg4ODg4ODg4ODg4OD///////////////8AAAA5TEFNRTMuOThyAaUAAAAALmcAABRAJAiwQgAAQAAAB1cctrbdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7UMQAAAjsKyK0YYABp52xtx8wAgAgBd34IAhAgnsECEe7QIAAgsPxACDgcBAEHQfD/g+D4PggCAIf///ghLny4Pg+D5+sHz/wf+XPwfB8H3iMHwfwffUCYPvz/Y7Hg/H4/H4/H4HAwADcoDwAP7XfuAFtXrhzjsjOXP8iCYM4IBVoH2DGAhQR2hm5vikA2IVEPX9nQaITi6IiLCKX/fxcg/DdGmS5BP7fIGQ0hw7DQi5Q//8midImXygdJ0tlz/1NAgXIANV6MA2Vy2y27jv/+1LEBIALOHOTvGGAMXWhbnTxGZ+LOa2FNMsDtj9/jUmPqqqARrNvlVjDDoGZqq0T11A0DVqeEnlQk8q4sVEp0FcqdxLoEJ0RPYWvIlQkbGA0Anw6VJJgqRKw1NJaAXkR4ag0/FwCCABbbdbJA0fzVgdvgvu5Px6Rwiv3VllZVDREqmWntLyBDka3sz951iTve+ddHP0/M3P/+ydU4zbqOZOeop5jfu1kwk8VezPeGc1hRMbWrJNv6SO/fH0Mc15KYvKqAAAAdrdsrbBDuBpp4v/7UsQGgguVE2ekjNP5aSBo6YSNgKAQUoCZEBJK8q73G/nhJFFmLY5dNc4b7gjBRyEs5yjJokY9TBoU/pXQBglyNjeiA87V8vkzaw019YTu2fxY0t6gteLMI37f9fYw7UVnWoE4NJOSpQBu3GfVAIVACgw+IikZZAnB7UKlLGnha4PDbIhsBhk4RYmlE2hYZ8NrQ5HnyEUvZxDyVG1hM33ZZH0OlrJV5///3/51qTGtJgxhREVLEfoO1w6686eRAAAAUicksbA1qegZCe2AuEgJ//tSxAkCDF0XSaw8ailyn+l1h4w1BvVY04S56fYY5nGkBZHMGLBjHDUMlORG4wcCT9R6RB+3vM8jVMU1hmlOoXIOMKqotE2HxWYNJq/7EZ2l63NJ+Z2aTA4Yq+7t0PhOxCz9WP1mA3DJZZGDkRfq+qFAGwhwHUAVqBfDiMUlypaMWApR1VoWLChfUpJzkBDMCTf85UZr6jyHa1psZnTS5iKatTVKcX/Ker9zMvM1T0okGyiQcreJbU1tc+Yj/ms3395FBIADkjlkjbAZNdiwgRD/+1LEBwAL8Tdbp6Rh+XmT6XWHjCx5U4sTCtlUidNtS9I7oUx7oxdIZlOghkIQYzB0vxtMs6QgCg4WMVakQMM5HRfrsdIEftM0yfOHnNGkiPRMoWCKSsxsChat8/vYw4c4t+CMMB5AAAAXZrftWiEVdbSgnURZoWvK2KhK9GfCkIGnQKxIqbYJ0JCNFJ3St1wuUNRLW4Kw5VhLVGrmgYKhhRe1qzzC7SqFFyjJlIqXcPD6gw//epZ9bwQFw+s+rdVAFtzl0AAAA3I3JK0QJxtCHv/7UsQGAApAM0WssGFpSCKqNYMMvgZph6CwIhKEt0yEiMwFKpnDBBajVc5jbTM7KayRt3I43h8Ag05kd9AtqO0bItmf/+Aevzf7dx28sK0hvP//3/izNwf1pfEAgANutuOJACSqWvuW+SKNLQSpOQKsrX3XxnZxy2Rus0Q1irPy9Mkg4kZGJFRQUax4R+jsACwavqYd2bmRX/6VnKrLk2Z2VGYwQNCIEasJh7/oBScAAMtBNgBWssKw0uCAgKkVpJirpZyBklUCwqaSIkW6BgIY//tSxBIDSYw3Km0kSoEzi9KAliSw9QNAydBqoFQVEQNBwiJYiBWdDqxiwVBUGqg6JgaBoGj3//////huVcFQsIRoPjBXLBGA8AkCwOhcD4KAmFAtEYcR6E8gD2OAXJ2N//uSJVZVJNRdh0gkLCwuKioqz4sLC3//////4sLC31ioqKpAoqKirOgFqkxBTUUzLjk4LjKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+1LEIwPAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==";var X6="data:application/octet-stream;base64,//uQxAAADXmFO1QxgDvHsqwzN4AAFQK0gkEhRCrvEJwAQTu4uIBgbufu6J7xEoAnXd33OJQ4GBm7v/7gAhP4iO//XNEAABC/ru7u5uW76AAigAgq7voBgZ+7u6IiInEd3d3d930T3ct3c8v64cW77u7uBgYGLEJ+gRKACKBgZ5ggkAnNEoAgEACUSr8wYCFAECiBrjqIxs5c+BwWmoZSJISSY6HAZijEDMCJMdb+TL6y0mbQiDOM4dxybC5cq0WvNchyWJi2m4MEhuPPE+8TVvZPG3bLoxkKQUYT1fqlbWMwW/dSMWJfmw5U0JhuDKdgruyuGLdi277/z8vqcaVDTqP89UoivIYb+3Gp2Q4UnMqSxb/3esyV0oXIWHS2RXeVNS+VVq1PL+///T/yx7QpRblVLB7bSx/5uclV7LuFvOtfzw+k5/Ke3hvOxz/wm5uZ1KZNIo/S0khu5xqza/K3//+F2tuqGv/8XcaWpD0Cr/JlbVoRAAAOYAAOYZBGYdEuZ1U6ZrjUBQAC4BJcN+KgMECcWmZu4TEoPlCpkweRNnkq//uSxBcAGW2LSN3XgAILsi29h6B+GqwyjdVZKlpEkpazqZ6rEVWoUhR7mQdZUrxei4mSrGokQHIYYBsI9CcT1U5ICNE6ULhGQpSl9NhCl2To5mLbe4H82vbvoghxTSmkc0arCfqhe1puVrce3OWEU5saufRpLqVtzHRTG9cYW31LeFaz7eIVrb+/C29r85+M/4zBrrFvnXzq0bfzV7Ftv1tv1rWuv7WrnW4L2JbWCpU9/WoAjGirCNBJpzEIBBCVImBbtBZpoNUTE/SCkkGOWwcConu9O1oZ0gvHzqShxZgkHnt/wddXH+wdcAAR19JTR3JDjOYiLGzzRMCGIAOwoc6arH9fNVMMXL9eHSMOFhwuJr+F+qGmWhNf+20tdVx//H/+tfSX+6MTIx7v471K3HMUNNjrKgAAQKAAAADKYSIKY8AeIA4DKdcmMTkTwwTgZTAxAcMD8CEwAgClRDwDSCJ2B0AVA0u0YDQGYYA8UAZtnQClACESgKPVZlp6mLfLYXYhA4ytzrvIztpEaekuuweSphLtXiZc6+HCCCCz5vLn2v/7ksQ2AJ5BkS+vZTHLbyQkwd1sqAesptKJdqhQvEYJkhRBhSWy5nbV/ALstMdiZZPhTQfNVW0naScjbXS8kilsKgb7m5XL5XI/tG200LBNQwGgKWTdcizYuCwjCIBQ258z9bC0EEbhsbhslrUi1Zs4Yai3EySPZcpUYttOjuLKTLNExBFSVpAcNQQychz7UvqZsyKTrCNJO7MGMmC8MNwgMfiDOf6DP0jIMZQlFppm0JyDZgBJhxaaKELX2AwzVMtVAYtvZXXnnzkcD1VzrCu8oMNAoJCV6xVk6n5TXdJDMswRCShpECgkKLcmIAZMSl+DHR5uoMlTWjUZETDhlAoZBlVUt2UDQItKJOYo4IgwICmbtBZzLHbeyke11Y0vqFwK1eXOCjMWAtTJoS4cdSp24fuQ1Znb0al8zEo7LH1bpLJyWRm9ZfZctDYjVDD3wzfiVLl967qvEI1Kqe7eu71Uns7o0FCIVMJVB1CxEtAbUWLAqzXupgBMgAxMQgIMNxTNsLlNLijDgrMJgzDAZZoX/MBQGJgDfecUk+rWRQFQwIr/+5LEFYCYeSkoLuWRyu4wZeXGD5m9arAEgf5l1lu1+RrFaGyhaSkXUlL5v85kMNSZ3F22BIj/GCZAQwIZAQyaL8GD8xN9uM7fswAnWT/fdksNuWzxm0ldis6TLo9A7+Sy9TQAxWHKSPEozOGrfA09dmqTs5KrWaqi6hg3BVYfRHsdMfH6MCsZgfu3UHcVY3kVZn3m6X7O3ptDjNtFbTWNiS/Vdg0xiz/0vjrp0uwAdkC8xiGR0DGDwYYwuxhUKKtMBA5NFFBc6bzOWPLgbyfeEt650Ew9C5HWi0epKGmtStHlFZrK03tm5p6lrx5AiwJCB4Upy6zvP1CnDMRA8xWNguCQUGxwFtMhxrRaIYAasG2sxCldISVpagEUSSQjajZOHyqZLUAlCGEPpkbzCeLJp92PSIefyPvmj3T+aVyaTZGfIqfRdf5L6g6jlttqPIL0CdHZJcOpmSBitpknWUHdYnsQb+lzPGhDKmS5NbXCE5LsAnQfTB0ysDroGTyE1pKn3oRtUEcmNw6yuWQ5FYYComLDd63FUETIkbQt1/7Qx9e///uSxBwAEUlnT6wk0doHral1hI4+HJGVbHD3tXEqnX+PauHVy695s+HjgPJ3iKOa/JVbHYc8HfJP7O/+EY0adcC+r1mtzzFm/YP3UUR5ehrfS1stmZqcz39VbrrNPrOXwVrzN3vppaAyS2xoklAqEhWrTKKKFk6NFfZhy9mZyaOslxiUKbDEmFxN+xkgQihIzcixccFJMa3a26nklUjjSzLhGRRFJmdF4eEJfK9JPav3XlmNLShE43GOR8bp9WnnCX/8rvt0Q5TrEfg4SbKrTmBMJMox0OX+xQlzR6kq2M+a4aUJPLGbhnRVoTe/rKILlv5wFAph8zTUVOLAJIpLrVflKovE1FtUgzcKIr0Ocj1RaviLNJJ3d5WNwb4blBh6+LSUUrasrzT48U/Ec1lJVveRpntM+lT0lqe5pht/ZZxSKoiQPczTCu7sMLLSD7dm0pTvxam9Ve7RooTNKXCKi0kBvtKL5Gm0shGNVGaeL89LeVndduM4/16lUEsb4CPSUd/ZS/faqUm2taYSRSh2goNPNnBg1ZjAzBBE6kgZYwB5G//7ksRcABOBXzWsvS3KUq8otaSh/wJgIDnDR4mUlywJnQIZE7JztY6kpH+JmCUcRQR6tXr3JMiXB2MWhpRmk4/mmMoqfPwX9zYqBSRUNCHWNn6s3V3vLrHykm1F1MmanDmQWEcHwlTMotiBwUtrJ1llcRGMP6Gff1bd2OfP+YmLWELGTG78GpfboWe/ntICAAgwvDg8EgBlMucMGmKhQ0koKq8htXVM/0QUwlEE0s7gwlwUhoqdyVMdbQ9kLcJivL70/XaukY1KyqhiPo8xSTjanYpoOk8hNAnYjelEILufzAxdiMFUx79nVEqZix5XqpekJMEIESjiZpZqBb5jrMiiOstYk49Lw4yzl9W45G4OcSNvoeK8sjr6xaNOe0QvA62i4mJbW1lSRZTKtNKAbMsTLKkWklKJcRtUgzRcwboZM5B0unTuShWGUmVAmTGyqkamkTpbSpa65uWEztkc7fs3kigkkMrxCZGaprn/32rGfxvfjqmcyr7b/HxPVUksklyqcO8ZZUY+rpm3M85ceEMSHDj0cictQgxVBAABKOYS6PL/+5LEigAT3S0crbzPwbEmZvzzDjxtEgvtX7ME3HKY2prMNBs4y2VyaZh2HYi1x86O3QSmPfH403eTSqs6L8St+qR0p2Hqj0ZRmfhDY0JCCMuwrAxi3GeSKAIlXlVqTykcbTJUUSriyAqZIEN20oI1JuVaIZpNsIiMjrEh1hQ0iYWEqG2kukkNQY9SqJtE1ROIVbVai6k2rbUtym9/fjyb/51/9KEdlT/an7Y5Hzf1ABpSVqRurLXNjhgRwDpQ0nU/1JNUs4/kDzjwONRy9psZgQ3PC02Pq3rr1qalSSfWarHR5qznNR2qyPR+VQ9pscLffT62jjlLEmQ2d25y7R1bn1ifLl3MQ8/YIy1jhYCFGBsJV6Swm2QVipka5AcyIiPAUZ1gbE/3Ks4lXUaImYZVWJdM5BcoddapZUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUBFFJyNyIgKNJnMUQju4HCZdblUxLqyuXycnSnUNZoT5XR4D9DYC6OqMfo//uSxMqAFEVZFKyk3EIpo6Nxhg45tompkq0vppKI/i5P4rayCTF53AfmjAwK8LFFZQgJA2Jw4mgJE1aSQaiCDUm8dGJyIINSaeuwDkerVpie2hYEKJddatWu1yvTU5PYHyS2epj6ExMXWVxkfe0u9a7ZcuXLiUjW5AZHQlHy4yjZMjIyPl2wHyU++flpcuPu2ufWh0ZGNLu2ZSCUuHEKT1at5c8dHJie0a9kxWzOnJJEkSTGrQXd/dqDVR7LB0ziUADL0RdMkVJwxcEwTBbTGMPtK0yKERjOjL7NS4L41vD+zT1WwM4RlsyGWmDCIajMVhoQym2PzOMWqM/VNM7duU4YYIyxPELm0CDbMJjOMtRtN0EZM0UoQ0Y0wDPwW9Mxdiwx9mXzCDZmMVFkkypl7kxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7ksTcAFqJoQesPYvhxwiAAe75yFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=";var pp=.075,Ur=.0015,J6=.02,Z6=125,Q6=330,e7=2e3,lce=27.5,cce=4186,rR=.04,oR=.2,t7=25;function r7(r){return r<2e3?.002:.005}function dce(r){return{segments:r.clippedSegments.length,totalPoints:r.clippedSegments.map(e=>e.length).reduce((e,t)=>e+t,0),graphMode:r.graphMode,duration:r.duration,discrete:r.discrete}}var Wx=class{constructor(e,t){this.audioContext=e.audioContext,this.audioContext&&(this.oscillator=this.audioContext.createOscillator(),this.oscillator.setPeriodicWave(e.getBaseWaveform()),this.firstHarmonic=this.audioContext.createOscillator(),this.firstHarmonic.setPeriodicWave(e.getFirstHarmonicWaveform()),this.firstHarmonicGain=this.audioContext.createGain(),this.firstHarmonicGain.gain.value=0,this.pan=this.audioContext.createStereoPanner(),this.pan.pan.value=0,this.gain=this.audioContext.createGain(),this.gain.gain.value=0,this.oscillatorGain=this.audioContext.createGain(),this.oscillatorGain.gain.value=.5,this.oscillatorGain.connect(this.gain),this.oscillator.connect(this.oscillatorGain),this.firstHarmonic.connect(this.firstHarmonicGain),this.firstHarmonicGain.connect(this.gain),this.gain.connect(this.pan),this.pan.connect(t),this.oscillator.start(),this.firstHarmonic.start(),this.brownNoiseGain=this.audioContext.createGain(),this.brownNoiseGain.gain.value=0,this.brownNoiseSource=this.audioContext.createBufferSource(),this.brownNoiseSource.buffer=e.brownNoiseSample,this.brownNoiseSource.loop=!0,this.brownNoiseSource.start(),this.brownNoiseSource.connect(this.brownNoiseGain),this.brownNoiseGain.connect(this.pan))}stop(e){let t=Math.max(this.audioContext.currentTime,e);this.gain.gain.setTargetAtTime(0,t,Ur),this.brownNoiseGain.gain.setTargetAtTime(0,t,Ur),setTimeout(()=>{this.oscillator.stop(),this.firstHarmonic.stop(),this.brownNoiseSource.stop(),this.pan.disconnect()},1e3*(2*Ur+Math.max(0,e-this.audioContext.currentTime))+1)}};function pce(r){if(r.length<=2)return[r];let e=__dcg_shared_module_exports__['o'](r,2),t=0,o=[[e[0]]],i=e[0][0]<e[1][0];for(let n=1;n<e.length;n++)o[t].push(e[n]),n<e.length-1&&i!==e[n][0]<e[n+1][0]&&(i=!i,t++,o[t]=[e[n]]);return o.map(n=>__dcg_shared_module_exports__['k'](n))}function uce(r){let e=__dcg_shared_module_exports__['o'](r,2);return e.sort((t,o)=>t[0]-o[0]),__dcg_shared_module_exports__['k'](e)}var fI=class{constructor({controller:e,agNavigator:t,audioEnabled:o}){this.isPlayingOneBranch=!1;this.FREQ_MIN=Z6;this.FREQ_MAX=e7;this.FREQ_BASE=Q6;e&&(this.controller=e),this.audioContextManager=new xm,this.audioGraphNavigator=t,this.audioEnabled=o,this.screenDuration=5,this.audioVolume=.5}getBaseWaveform(){var o;let e=new Float32Array([0,1,0,.25]),t=new Float32Array([1,0,.25,0]);return(o=this.audioContext)==null?void 0:o.createPeriodicWave(e,t)}getFirstHarmonicWaveform(){var o;let e=new Float32Array([0,0,0,.25,0,0,0,0]),t=new Float32Array([1,0,1,0,.25,0,.3,0]);return(o=this.audioContext)==null?void 0:o.createPeriodicWave(e,t)}async prepareSynthesizer(){if(!this.audioEnabled()||!this.audioContextManager||!this.audioGraphNavigator)return;try{this.audioContext=(await this.audioContextManager.getResumedAudioContext()).audioContext,this.playbackSupported=!0}catch(i){this.playbackSupported=!1;return}this.audioContext.destination.disconnect(),this.mainGainNode=this.audioContext.createGain(),this.mainGainNode.gain.value=this.audioVolume,this.mainGainNode.connect(this.audioContext.destination);let e=this.audioContext.sampleRate*this.screenDuration;this.brownNoiseSample=this.audioContext.createBuffer(1,e,this.audioContext.sampleRate);let t=ZO(0),o=this.brownNoiseSample.getChannelData(0);for(let i=0;i<e;i++)t=ZO(t),o[i]=t;if(!this.poiBufferSample)try{let i=await fetch(Y6);this.poiBufferSample=await this.audioContext.decodeAudioData(await i.arrayBuffer())}catch(i){Lr(i)}if(!this.syntheticIntersectionPointBufferSample)try{let i=await fetch(X6);this.syntheticIntersectionPointBufferSample=await this.audioContext.decodeAudioData(await i.arrayBuffer())}catch(i){Lr(i)}VT()}releaseAudio(){var e;this.stop(),(e=this.audioContextManager)==null||e.suspend()}synthesizePoint(e,t,o,i){let{gain:n,brownNoiseGain:a,oscillator:s,firstHarmonic:l,firstHarmonicGain:c,pan:p}=i;o=Math.max(o,this.audioContext.currentTime);let h=this.mapDependentToFrequency(t);if(!(!this.viewportBounds||!h)){if(t<this.viewportBounds.dependentMin||t>this.viewportBounds.dependentMax){a.gain.setTargetAtTime(rR,o,Ur),a.gain.setTargetAtTime(0,o+pp,Ur);return}s.frequency.setValueAtTime(h,o),l.frequency.setValueAtTime(h,o),n.gain.setTargetAtTime(1,o,Ur),e>0&&c.gain.setTargetAtTime(.15,o,Ur),a.gain.setTargetAtTime(tR(t),o,Ur),p.pan.setTargetAtTime(this.getPanValueFromIndependent(e),o,Ur),n.gain.setTargetAtTime(0,o+pp,Ur),c.gain.setTargetAtTime(0,o+pp,Ur),a.gain.setTargetAtTime(0,o+pp,Ur)}}playPoint(e){!q6(e)||!this.audioContextManager||(this.setupScales(e.graphMode),this.prepareSynthesizer().then(()=>{var l,c;let t=new Wx(this,this.mainGainNode);this.turnMainGainOn();let o=this.audioContext.currentTime,{independent:i,dependent:n}=$6(e);if(!this.mapDependentToFrequency(n)||!this.viewportBounds){t.stop(o);return}this.synthesizePoint(i,n,o,t);let a=e.type===Vl||((l=e.typeChain)==null?void 0:l.includes(Vl)),s=e.type===1001||((c=e.typeChain)==null?void 0:c.includes(1001));if(a&&this.syntheticIntersectionPointBufferSample){let p=this.audioContext.createBufferSource();p.connect(t.gain),p.buffer=this.syntheticIntersectionPointBufferSample;try{p==null||p.start(this.audioContext.currentTime)}catch(h){}}if(s&&this.poiBufferSample){let p=this.audioContext.createBufferSource();p.connect(t.gain),p.buffer=this.poiBufferSample;try{p==null||p.start(this.audioContext.currentTime)}catch(h){}}t.stop(o+pp+Ur)}))}playCurrentSketch(e="sequential"){this.audioContextManager&&this.prepareSynthesizer().then(()=>{this.isPlaying=!0,this.isPlayingOneBranch=!1,this.controller.runAfterDispatch(()=>this.controller.dispatch({type:"render"})),this.prepareToPlay(e),this.startPlayingTime=this.audioContext.currentTime+Ur,this.currentPlayLoopStartTime=this.startPlayingTime,this.lagLoggingData||(this.lagLoggingData={startPlayingTime:this.startPlayingTime,branchCount:this.branches.length,branchInfo:this.branches.map(t=>dce(t)),branchIteratorStartTimes:[],branchIteratorRunTimes:[],branchIteratorCallCount:0,branchLags:[],screenDuration:this.screenDuration}),e==="sequential"?(this.currentPlayLoopBranchIndex=0,this.playBranchIterators=[this.playBranch(this.currentPlayLoopBranchIndex,this.currentPlayLoopStartTime)],this.lagLoggingData&&(this.lagLoggingData.proposedDuration=this.branches.reduce((t,o)=>{var i;return t+((i=o.duration)!=null?i:0)},0)),this.sequentialPlayLoop()):e==="simultaneous"&&(this.playBranchIterators=this.branches.map((t,o)=>this.playBranch(o,this.currentPlayLoopStartTime)),this.playBranchIterators.push(this.playBlankSpace(this.currentPlayLoopStartTime)),this.simultaneousPlayLoop())})}stop(){var i,n,a,s,l,c;BT(),clearTimeout(this.timeoutId),this.isPlaying=!1,this.startPlayingTime=void 0;let e=(i=this.audioContext)==null?void 0:i.currentTime;if(!e)return;this.lagLoggingData&&(this.lagLoggingData.actualDuration=e-this.lagLoggingData.startPlayingTime,this.lagLoggingData.stopPlayingTime=e,(a=(n=this.controller).logEvent)==null||a.call(n,{category:"audio-trace",action:"stop-graph"}),this.lagLoggingData=void 0);let t=(s=this.playBranchIterators)==null?void 0:s.map(p=>p.next()).filter(p=>!p.done);t==null||t.forEach(p=>{var h,g;return(g=(h=p.value).synthStopCallback)==null?void 0:g.call(h,e)}),this.playBranchIterators=[],(l=this.mainGainNode)==null||l.gain.cancelScheduledValues(e),(c=this.mainGainNode)==null||c.gain.setTargetAtTime(0,e,Ur);let o=this.mainGainNode;setTimeout(()=>o.disconnect(),1e3*2*Ur+1),this.controller.runAfterDispatch(()=>this.controller.dispatch({type:"render"}))}getGraphMode(){if(this.branches)return this.currentPlayLoopBranchIndex!==void 0?this.branches[this.currentPlayLoopBranchIndex].graphMode:this.branches[0].graphMode}playBranchByIndex(e){this.audioContext&&this.prepareSynthesizer().then(()=>{this.prepareToPlay("simultaneous"),this.isPlayingOneBranch=!0,this.isPlaying=!0,this.startPlayingTime=this.audioContext.currentTime+Ur,this.currentPlayLoopStartTime=this.startPlayingTime,this.currentPlayLoopBranchIndex=e,this.branches[0].graphMode===8||this.branches[0].graphMode==5||this.branches[0].graphMode==6?(this.playBranchIterators=this.branches.map((t,o)=>this.playBranch(o,this.currentPlayLoopStartTime)),this.playBranchIterators.push(this.playBlankSpace(this.currentPlayLoopStartTime))):this.playBranchIterators=[this.playBranch(e,this.startPlayingTime)],this.simultaneousPlayLoop()})}getPlaybackSupported(){return this.playbackSupported}getIsPlaying(){return this.isPlaying}getAudioSpeed(){return this.screenDuration*10}setAudioSpeed(e){this.screenDuration=e/10}getAudioVolume(){return this.audioVolume}setAudioVolume(e){var t;this.audioVolume=e,(t=this.mainGainNode)==null||t.gain.setTargetAtTime(this.audioVolume,0,Ur)}getCurrentIndependentValue(){var o,i;if(!this.getIsPlaying()||this.startPlayingTime===void 0)return;if(this.isPlayingOneBranch)return(i=(o=this.branches[this.currentPlayLoopBranchIndex]).mapTimeToIndependent)==null?void 0:i.call(o,this.audioContext.currentTime-this.startPlayingTime);let e=this.audioContext.currentTime-this.startPlayingTime,t=0;for(let n of this.branches)if(!(!n.duration||!n.mapIndependentToTime||!n.mapTimeToIndependent)){if(e-t>=n.duration){t+=n.duration;continue}return n.mapTimeToIndependent(e-t)}}getCurrentBranchIndex(){if(!this.getIsPlaying()||this.startPlayingTime===void 0)return;if(this.isPlayingOneBranch)return this.currentPlayLoopBranchIndex;let e=this.audioContext.currentTime-this.startPlayingTime,t=0;for(let o=0;o<this.branches.length;o++){let i=this.branches[o];if(i.duration){if(e-t>=i.duration){t+=i.duration;continue}return o}}}preprocessBranch(e,t){switch(e.branchMode){case 8:case 5:case 6:let o=[],i=e.segments;if(e.branchMode===6){let n=this.controller.getViewState();i=i.map(a=>K6(a,n))}for(let n of i){let s=eR(n,t,dc);o.push(...s.filter(l=>l.length>2))}return o=__dcg_shared_module_exports__['k'](o.map(n=>pce(n).map(a=>uce(a))),!0),o.sort((n,a)=>n[0]-a[0]),o.map(n=>({graphMode:e.branchMode,discrete:!1,poi:e.poi,clippedSegments:[n]})).filter(n=>n.clippedSegments.length>0);case 2:case 1:{let n=[];for(let a of e.segments){let s=e.branchMode===2?dc:wd,l=eR(a,t,s);n.push(...l.filter(c=>c.length>2))}return n.sort((a,s)=>a[0]-s[0]),{graphMode:e.branchMode,discrete:!1,clippedSegments:n,poi:e.poi}}case 3:case 25:case 26:case 4:{let{viewport:n}=t,a=e.segments[0].slice();a.sort(W6);let s=[],l=[];for(let c of a)s.push(c[0],c[1]),c[0]>=n.xmin&&c[0]<=n.xmax&&c[1]>=n.ymin&&c[1]<=n.ymax&&l.push(c[0],c[1]);return{graphMode:2,discrete:!0,clippedSegments:[l],poi:void 0}}default:throw new Error(`Unimplemented graph mode: ${e.branchMode}`)}}turnMainGainOn(){var e,t;(e=this.mainGainNode)==null||e.gain.cancelScheduledValues(0),(t=this.mainGainNode)==null||t.gain.setTargetAtTime(this.audioVolume,0,Ur)}getPanValueFromIndependent(e){if(!this.independentScale)return 0;let t=__dcg_shared_module_exports__['md'](this.independentScale,e)/this.screenDuration;return __dcg_shared_module_exports__['Ob'](2*t-1,-1,1)}setupScales(e){this.projection=this.controller.get2dProjection(),this.viewportBounds=H6(this.projection.viewport,e);let t=e===1?this.projection.settings.yAxisScale:this.projection.settings.xAxisScale,o=e===1?this.projection.settings.xAxisScale:this.projection.settings.yAxisScale;this.independentScale=__dcg_shared_module_exports__['ld'](t,[this.viewportBounds.independentMin,this.viewportBounds.independentMax],[0,this.screenDuration]),this.dependentScale=__dcg_shared_module_exports__['ld'](o,[this.viewportBounds.dependentMin,this.viewportBounds.dependentMax],[0,1]),this.viewportBounds.dependentMax<=cce&&this.viewportBounds.dependentMin>=lce&&this.viewportBounds.dependentMax-this.viewportBounds.dependentMin>=1e3?(this.FREQ_MIN=this.viewportBounds.dependentMin,this.FREQ_MAX=this.viewportBounds.dependentMax,this.FREQ_BASE=void 0):(this.FREQ_MIN=Z6,this.FREQ_MAX=e7,this.FREQ_BASE=Q6)}densifyBranches(){this.branches.map(e=>{if(e.discrete)return e;let t=this.independentScale,o=this.dependentScale;return!t||!o||!e.clippedSegments||(e.clippedSegments=e.clippedSegments.map(i=>{let n=[];for(let a=0;a<i.length;a+=2){let s=this.mapDependentToFrequency(i[a+1]),l=this.mapDependentToFrequency(i[a+3]);if(n.push(i[a]),n.push(i[a+1]),s&&l&&isFinite(s)&&isFinite(l)){let c=!1,p=0,h=Math.abs((l-s)/s);if(h>=r7(Math.min(l,s)))c=!0,p=Math.ceil(h/r7(Math.min(l,s)));else if(this.viewportBounds&&i[a+2]!==void 0){let m=Math.abs(i[a+2]-i[a]),b=this.viewportBounds.independentMax-this.viewportBounds.independentMin;m>b/200&&(c=!0,p=Math.max(20,Math.min(100,Math.ceil(m/(b/200)))))}if(c)for(let m=1;m<p;m++)n.push(__dcg_shared_module_exports__['nd'](t.type,i[a],i[a+2],m/p)),n.push(__dcg_shared_module_exports__['nd'](o.type,i[a+1],i[a+3],m/p))}}return n})),e})}setupToPlayBranches(e){if(!this.audioGraphNavigator||!this.audioContext||!this.mainGainNode)return;let t=this.audioGraphNavigator.getCurrentSketch();if(!t)return;let o=this.controller.get2dProjection();if(this.branches=__dcg_shared_module_exports__['k'](t.branches.filter(i=>Os(i,this.controller.getGraphSettings().config.audioTraceSimult)).map(i=>this.preprocessBranch(i,o))).filter(i=>i.clippedSegments.length>0),!!this.branches.length)if(this.setupScales(this.branches[0].graphMode),this.FREQ_BASE&&this.densifyBranches(),e==="simultaneous"){let i=Math.min(...this.branches.map(c=>c.clippedSegments[0][0])),n=Math.max(...this.branches.map(c=>c.clippedSegments.slice(-1)[0].slice(-2)[0])),a=this.mapIndependentToTime(n)-this.mapIndependentToTime(i),s=__dcg_shared_module_exports__['ld'](this.branches[0].graphMode===1?this.projection.settings.yAxisScale:this.projection.settings.xAxisScale,[i,n],[0,a]),l=__dcg_shared_module_exports__['ld'](this.branches[0].graphMode===1?this.projection.settings.yAxisScale:this.projection.settings.xAxisScale,[0,a],[i,n]);this.branches.forEach(c=>{c.duration=c.discrete?a+pp:a,c.mapIndependentToTime=p=>__dcg_shared_module_exports__['md'](s,p),c.mapTimeToIndependent=p=>__dcg_shared_module_exports__['md'](l,p)})}else this.branches.forEach(i=>{let n=i.clippedSegments[0][0],a=i.clippedSegments.slice(-1)[0].slice(-2)[0];i.discrete?i.duration=i.clippedSegments.reduce((c,p)=>c+p.length/2,0)*(pp+J6):i.duration=this.mapIndependentToTime(a)-this.mapIndependentToTime(n);let s=__dcg_shared_module_exports__['ld'](this.branches[0].graphMode===1?this.projection.settings.yAxisScale:this.projection.settings.xAxisScale,[n,a],[0,i.duration]),l=__dcg_shared_module_exports__['ld'](this.branches[0].graphMode===1?this.projection.settings.yAxisScale:this.projection.settings.xAxisScale,[0,i.duration],[n,a]);i.mapIndependentToTime=c=>__dcg_shared_module_exports__['md'](s,c),i.mapTimeToIndependent=c=>__dcg_shared_module_exports__['md'](l,c)})}prepareToPlay(e){this.setupToPlayBranches(e),this.turnMainGainOn(),clearInterval(this.timeoutId)}sequentialPlayLoop(){var o,i,n,a,s;let e=this.audioContext.currentTime,t=(o=this.playBranchIterators[0])==null?void 0:o.next();if(this.lagLoggingData&&(this.lagLoggingData.branchIteratorCallCount++,this.audioContext.currentTime-e>0&&(this.lagLoggingData.branchIteratorStartTimes.push(e),this.lagLoggingData.branchIteratorRunTimes.push(this.audioContext.currentTime-e))),!!t){if(t.done)if(((i=t.value)==null?void 0:i.duration)!==void 0&&(this.currentPlayLoopStartTime=((n=t.value.startTime)!=null?n:this.currentPlayLoopStartTime)+t.value.duration),this.currentPlayLoopBranchIndex<this.branches.length-1)this.currentPlayLoopBranchIndex++,this.playBranchIterators[0]=this.playBranch(this.currentPlayLoopBranchIndex,this.currentPlayLoopStartTime),this.sequentialPlayLoop();else{(a=this.mainGainNode)==null||a.gain.cancelScheduledValues(this.currentPlayLoopStartTime),(s=this.mainGainNode)==null||s.gain.setTargetAtTime(0,this.currentPlayLoopStartTime,Ur),clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>this.stop(),1e3*(Math.max(this.currentPlayLoopStartTime-this.audioContext.currentTime,0)+Ur));return}this.timeoutId=setTimeout(()=>this.sequentialPlayLoop(),t7)}}simultaneousPlayLoop(){var t,o;let e=this.playBranchIterators.map(i=>i.next());if(e.every(i=>i.done)){let i=this.currentPlayLoopStartTime+Math.max(...e.map(n=>{var a;return(a=n.value)!=null&&a.duration&&isFinite(n.value.duration)?n.value.duration:0}));(t=this.mainGainNode)==null||t.gain.cancelScheduledValues(i),(o=this.mainGainNode)==null||o.gain.setTargetAtTime(0,i,Ur),this.timeoutId=setTimeout(()=>this.stop(),1e3*(Math.max(i-this.audioContext.currentTime,0)+Ur))}else this.timeoutId=setTimeout(()=>this.simultaneousPlayLoop(),t7)}*playBlankSpace(e){let t=Math.max(this.audioContext.currentTime,e),o=new Wx(this,this.mainGainNode),{oscillator:i,pan:n,brownNoiseGain:a,gain:s}=o;i.stop(),s.gain.setTargetAtTime(1,t,Ur);let l=this.branches.map(h=>{if(h.mapIndependentToTime)return[h.clippedSegments[0][0],h.clippedSegments.slice(-1)[0].slice(-2)[0]]}).filter(h=>!!h),c=[];for(l.sort((h,g)=>h[0]-g[0]);l.length>0;){let h=l[0];l=l.filter(g=>g[1]>h[1]),l.filter(g=>g[0]<=h[1]).length===0&&c.push([h[1],Math.min(...l.map(g=>g[0]))])}c=c.filter(h=>isFinite(h[0])&&isFinite(h[1]));let p=h=>{o.stop(h)};for(let h of c){let g=t+this.mapIndependentToTime(h[0]),m=t+this.mapIndependentToTime(h[1]);for(;g>this.audioContext.currentTime+oR;)yield{synthStopCallback:p};a.gain.setTargetAtTime(rR,g,Ur),a.gain.setTargetAtTime(0,m,Ur),n.pan.setValueAtTime(this.getPanValueFromIndependent(h[0]),g),n.pan.linearRampToValueAtTime(this.getPanValueFromIndependent(h[1]),m)}return{duration:0}}mapDiscreteSegmentIndexToTime(e){return e/2*(pp+J6)}getSyntheticIntersectionPoints(e){var i,n;let t={x:[],y:[]},o=(n=(i=this.audioGraphNavigator)==null?void 0:i.getSyntheticIntersectionPoints(e))!=null?n:[];for(let a of o)t.x.push(a.x),t.y.push(a.y);return t}*playBranch(e,t){var x,E,S,k,T,I;let o=this.branches[e];if(!(o!=null&&o.duration)||!(o!=null&&o.mapIndependentToTime))return{duration:0};let i=new Wx(this,this.mainGainNode),n=o.clippedSegments,a=P=>{i.stop(P)},{oscillator:s,gain:l,firstHarmonic:c,firstHarmonicGain:p,pan:h,brownNoiseGain:g}=i,m=Math.max(this.audioContext.currentTime,t);if(this.poiBufferSample&&this.syntheticIntersectionPointBufferSample){let P=(E=(x=o.poi)==null?void 0:x.intersections)!=null?E:{x:[],y:[],intersects:[]},A=this.getSyntheticIntersectionPoints(e),D=QO(o.graphMode,P);for(let N of D){let U=this.audioContext.createBufferSource();U.connect(l),U.buffer=this.poiBufferSample;try{U==null||U.start(m+o.mapIndependentToTime(N))}catch(K){}}let G=QO(o.graphMode,A);for(let N of G){let U=this.audioContext.createBufferSource();U.connect(l),U.buffer=this.syntheticIntersectionPointBufferSample;try{U==null||U.start(m+o.mapIndependentToTime(N))}catch(K){}}}let b=m;for(let P=0;P<n.length;P++){let A=n[P];for(let D=0;D<A.length;D+=2){let G=D===0,N=D+2>=A.length,U=o.discrete?b+this.mapDiscreteSegmentIndexToTime(D):m+o.mapIndependentToTime(A[D]),K=this.mapDependentToFrequency(A[D+1]);for(;U>this.audioContext.currentTime+oR;)yield{synthStopCallback:a,duration:void 0};if(o.discrete){this.synthesizePoint(A[D],A[D+1],b+this.mapDiscreteSegmentIndexToTime(D),i);continue}if(U<this.audioContext.currentTime-oR&&this.lagLoggingData&&this.lagLoggingData.branchLags.push({branchIndex:e,segmentIndex:P,pos:D,nextTime:U,proposedStartTime:t,lagAmount:this.audioContext.currentTime-U,currentTime:this.audioContext.currentTime}),G&&(p.gain.cancelScheduledValues(U),g.gain.cancelScheduledValues(U),l.gain.setTargetAtTime(1,U,Ur)),K!==void 0&&isFinite(K)){s.frequency.linearRampToValueAtTime(K,U),c.frequency.linearRampToValueAtTime(K,U);let H=U;if(D>=2&&A[D-2]<=0!=A[D]<=0){let B=A[D-2],L=A[D];H=m+o.mapIndependentToTime(__dcg_shared_module_exports__['nd']((k=(S=this.independentScale)==null?void 0:S.type)!=null?k:"linear",B,L,Math.abs(L)/(Math.abs(L)+Math.abs(B))))}p.gain.setTargetAtTime(A[D]>0?.15:0,H,Ur);let F=U;if(D>=2&&A[D+1]<=0!=A[D-1]<=0){let B=A[D-2],L=A[D],q=A[D-1],le=A[D+1];F=m+o.mapIndependentToTime(__dcg_shared_module_exports__['nd']((I=(T=this.independentScale)==null?void 0:T.type)!=null?I:"linear",B,L,Math.abs(q)/(Math.abs(q)+Math.abs(le))))}g.gain.setTargetAtTime(tR(A[D+1]),F,Ur)}N&&(l.gain.setTargetAtTime(0,U,Ur),P<o.clippedSegments.length-1&&g.gain.setTargetAtTime(rR,U,Ur)),D===0?h.pan.setValueAtTime(this.getPanValueFromIndependent(A[D]),U):h.pan.linearRampToValueAtTime(this.getPanValueFromIndependent(A[D]),U)}b+=this.mapDiscreteSegmentIndexToTime(A.length)}return o.duration=Math.max(0,o.duration,this.audioContext.currentTime-t),i.stop(m+o.duration),{duration:o.duration,startTime:m}}mapIndependentToTime(e){return this.independentScale?__dcg_shared_module_exports__['md'](this.independentScale,e):0}mapDependentToFrequency(e){if(!this.dependentScale)return;let t=__dcg_shared_module_exports__['md'](this.dependentScale,e);if(this.FREQ_BASE)return Math.min(Math.max(this.FREQ_BASE*Math.pow(2,t),this.FREQ_MIN),this.FREQ_MAX);{let o=this.FREQ_MAX-this.FREQ_MIN;return Math.min(Math.max(this.FREQ_MIN+o*t,this.FREQ_MIN),this.FREQ_MAX)}}};var $x=[{speed:1600,displayedSpeed:"1/32 x"},{speed:1200,displayedSpeed:"1/24 x"},{speed:800,displayedSpeed:"1/16 x"},{speed:400,displayedSpeed:"1/8 x"},{speed:200,displayedSpeed:"1/4 x"},{speed:100,displayedSpeed:"1/2 x"},{speed:50,displayedSpeed:"1 x"},{speed:25,displayedSpeed:"2 x"},{speed:12.5,displayedSpeed:"4 x"},{speed:6.25,displayedSpeed:"8 x"}],bI=class{constructor(e,t){this.focusedTableLocation=void 0;this.grapher=t,this.controller=e,this.audioTraceActive=!1,this.wasFocusInExpressionsView=!1,this.sliderTraceActive=!1,this.sliderIndex=0,this.sliderArray=[],this.lastSpokenBranch=1,this.agNavigator=new mI(e,this,this.grapher),this.agSynthesizer=new fI({controller:e,agNavigator:this.agNavigator,audioEnabled:()=>this.controller.getAudio()}),this.audioSpeedIndex=6,this.agSynthesizer.releaseAudio()}remove(){}handleKeydown(e){let t=e.altKey&&!e.metaKey&&!e.ctrlKey&&!e.shiftKey;t&&co(e)==="S"?this.controller.getSelectedItem()&&(this.audioTraceActive||this.isFocusInExpressionsView())&&(e.preventDefault(),e.stopPropagation(),this.describeCurve()):t&&co(e)==="G"?(this.audioTraceActive||this.isFocusInExpressionsView())&&(e.preventDefault(),e.stopPropagation(),this.describeAxes()):t&&co(e)==="T"?(e.preventDefault(),e.stopPropagation(),this.toggleAudioTrace()):this.audioTraceActive&&(this.sliderTraceActive?this.sliderTraceKeydown(e):(this.stopAnimations(),this.audioTraceKeydown(e)))}sliderTraceKeydown(e){let t=e.altKey||e.metaKey,o=!t&&!e.ctrlKey&&!e.shiftKey;o&&Pe(e)===va||co(e)==="J"?(e.preventDefault(),e.stopPropagation(),this.decrementSliderValue()):o&&Pe(e)===wa||co(e)==="L"?(e.preventDefault(),e.stopPropagation(),this.incrementSliderValue()):o&&Pe(e)===xc?(e.preventDefault(),e.stopPropagation(),this.decrementBigSliderValue()):o&&Pe(e)===yc?(e.preventDefault(),e.stopPropagation(),this.incrementBigSliderValue()):!t&&(Pe(e)===wi||!e.shiftKey&&Pe(e)===xa||co(e)==="K")?(e.preventDefault(),e.stopPropagation(),this.nextSlider()):!t&&(Pe(e)===en||e.shiftKey&&Pe(e)===xa||co(e)==="I")?(e.preventDefault(),e.stopPropagation(),this.prevSlider()):o&&Pe(e)===Td||co(e)==="U"?(e.preventDefault(),e.stopPropagation(),this.sliderMin()):o&&Pe(e)===cl||co(e)==="N"?(e.preventDefault(),e.stopPropagation(),this.sliderMax()):this.audioTraceKeydown(e)}audioTraceKeydown(e){let t=e.altKey||e.metaKey,o=t&&!e.ctrlKey&&!e.shiftKey,i=!t&&!e.ctrlKey&&!e.shiftKey,n=co(e);if(Pe(e)===en&&o)e.preventDefault(),e.stopPropagation(),Lo(),this.agNavigator.prevCurve();else if(Pe(e)===wi&&o)e.preventDefault(),e.stopPropagation(),Lo(),this.agNavigator.nextCurve();else if(i&&Pe(e)===va||Pe(e)===en||n==="J")e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"keypad/audio-trace",command:"previous-point"});else if(i&&Pe(e)===wa||Pe(e)===wi||n==="L")e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"keypad/audio-trace",command:"next-point"});else if(!t&&(Pe(e)===xc||!e.shiftKey&&Pe(e)===xa||n==="I"))e.preventDefault(),e.stopPropagation(),this.reportAndMoveToNextPOI();else if(!t&&(Pe(e)===yc||e.shiftKey&&Pe(e)===xa||n==="K"))e.preventDefault(),e.stopPropagation(),this.reportAndMoveToPrevPOI();else if(i&&Pe(e)===Td||n==="U")e.preventDefault(),e.stopPropagation(),this.reportAndMoveToFirstPoint();else if(i&&Pe(e)===cl||n==="N")e.preventDefault(),e.stopPropagation(),this.reportAndMoveToLastPoint();else if(i&&n==="X")e.preventDefault(),e.stopPropagation(),this.reportX();else if(i&&n==="P")e.preventDefault(),e.stopPropagation(),this.reportPOICount();else if(i&&n==="Y")e.preventDefault(),e.stopPropagation(),this.reportY();else if(i&&n==="T")e.preventDefault(),e.stopPropagation(),this.reportType();else if(i&&n==="B")e.preventDefault(),e.stopPropagation(),this.reportBranch();else if(i&&n==="O")e.preventDefault(),e.stopPropagation(),this.reportAndMoveToOrigin();else if(i&&n==="H")e.preventDefault(),e.stopPropagation(),this.hearGraph();else if(i&&typeof n=="string"&&n>="0"&&n<="9"){if(e.preventDefault(),e.stopPropagation(),Lo(),!this.controller.getAudio()){Te(this.controller.s("graphing-calculator-narration-audio-trace-sound-effects-disabled"));return}this.agSynthesizer.stop();let a=this.agNavigator.getCurrentSketch();if(a){let s;e.which===48?s=9:s=e.which-49;let l=s,c=-1;for(let p=0;p<a.branches.length;p++)if(Os(a.branches[p],this.grapher.settings.config.audioTraceSimult)&&(l-=1),l<0){c=p;break}c>=0?this.agSynthesizer.getPlaybackSupported()?(this.agSynthesizer.playBranchByIndex(c),this.grapher.traceLayer.setTraceInfo(void 0),this.graphAnimationTimeoutId=requestAnimationFrame(()=>this.animateCurrentSketchLine())):Te(this.controller.s("graphing-calculator-narration-audio-trace-unable-to-play")):Te(this.controller.s("graphing-calculator-narration-audio-trace-branch-not-found",{branch:s+1}))}else Te(this.controller.s("graphing-calculator-narration-audio-trace-description-no-curve-selected"))}else if(t&&typeof n=="string"&&n>="0"&&n<="9"){let a=(n==="0"?10:parseInt(n,10))-1;e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-audio-trace-speed",speed:a})}else!e.altKey&&!e.ctrlKey&&!e.metaKey&&n==="V"?(e.preventDefault(),e.stopPropagation(),this.controller.getAudio()?e.shiftKey?this.controller.dispatch({type:"keypad/audio-trace",command:"volume-down"}):this.controller.dispatch({type:"keypad/audio-trace",command:"volume-up"}):Te(this.controller.s("graphing-calculator-narration-audio-trace-unable-to-play"))):i&&n==="A"?(e.preventDefault(),e.stopPropagation(),Lo(),this.queueAnimatingPoints(!0),Te()):i&&n==="S"&&this.controller.isListEnabled()?(e.preventDefault(),e.stopPropagation(),this.toggleSliderTrace()):i&&n==="C"?(e.preventDefault(),e.stopPropagation(),this.reportColor()):i&&this.exitAudioTrace();this.controller.dispatch({type:"render"})}describeCurve(){Lo();let e=this.agNavigator.getCurrentSketch();if(!e){Te(this.controller.s("graphing-calculator-narration-audio-trace-description-no-curve-selected"));return}gt(this.controller.s("graphing-calculator-narration-audio-trace-description-color",{color:fl(this.controller,e.color)}));let t=Hx(e,e.branches.length-1,this.grapher.settings.config.audioTraceSimult);t>1&&gt(this.controller.s("graphing-calculator-narration-audio-trace-description-branch-count",{branches:t}));let o=!1,i=!1;for(let a of e.branches)if(t===1&&a.segments.length>0&&a.hasOwnProperty("operator")){if(a.branchMode===2){if(a.operator===">"||a.operator===">="){gt(this.controller.s("graphing-calculator-narration-audio-trace-description-shading-above"));break}else if(a.operator==="<"||a.operator==="<="){gt(this.controller.s("graphing-calculator-narration-audio-trace-description-shading-below"));break}}else if(a.branchMode===1){if(a.operator===">"||a.operator===">="){gt(this.controller.s("graphing-calculator-narration-audio-trace-description-shading-right"));break}else if(a.operator==="<"||a.operator==="<="){gt(this.controller.s("graphing-calculator-narration-audio-trace-description-shading-left"));break}}}else t>1&&(a.branchMode===2||a.branchMode===1?(a.operator==="<"||a.operator==="<="||a.operator===">"||a.operator===">=")&&(o=!0):a.branchMode===7&&(i=!0));o&&i&&gt(this.controller.s("graphing-calculator-narration-audio-trace-description-shading-in-regions"));let n=e.getPOI();if(n.length>0){let a=[];for(let s of n)a[s.type]===void 0?a[s.type]=1:a[s.type]+=1;a.forEach((s,l)=>{l===1001?gt(s===1?this.controller.s("graphing-calculator-narration-audio-trace-description-one-intersection"):this.controller.s("graphing-calculator-narration-audio-trace-description-multiple-intersections",{count:s})):l===1002?gt(s===1?this.controller.s("graphing-calculator-narration-audio-trace-description-one-root"):this.controller.s("graphing-calculator-narration-audio-trace-description-multiple-roots",{count:s})):l===1003?gt(s===1?this.controller.s("graphing-calculator-narration-audio-trace-description-one-intercept"):this.controller.s("graphing-calculator-narration-audio-trace-description-multiple-intercepts",{count:s})):l===1004?gt(s===1?this.controller.s("graphing-calculator-narration-audio-trace-description-one-extremum"):this.controller.s("graphing-calculator-narration-audio-trace-description-multiple-extrema",{count:s})):l===1008&&gt(s===1?this.controller.s("graphing-calculator-narration-audio-trace-description-one-label"):this.controller.s("graphing-calculator-narration-audio-trace-description-multiple-labels",{count:s}))})}Te()}describeAxes(){Lo(),Te(Kx(this.controller))}queueCoordinates(e){if(!this.controller.shouldNarrateCoordinates()||!this.grapher.getProjection().viewport||!e)return;let o=this.agNavigator.getCurrentSketch();e.hasOwnProperty("branch")&&o&&o.branches.length>1&&this.lastSpokenBranch!==e.reportedBranch&&this.queueCoordinateProp(e,"branch"),e.hasOwnProperty("type")&&gt(this.controller.s("graphing-calculator-narration-audio-trace-property-type-before-coordinates",{type:this.describePOI(e)})),e.graphMode===25||e.graphMode===26?gt(ur(__dcg_shared_module_exports__['la']([e.x,e.y]))):(this.queueCoordinateProp(e,"x"),this.queueCoordinateProp(e,"y"))}queueCoordinateProp(e,t){if(!(!this.controller.shouldNarrateCoordinates()||!this.grapher.getProjection().viewport)&&e)switch(t){case"branch":typeof e.reportedBranch=="number"&&gt(this.controller.s("graphing-calculator-narration-audio-trace-property-branch-number",{branch:e.reportedBranch}));break;case"type":gt(this.describePOI(e));break;case"x":gt(_s(this.controller,e.x));break;case"y":gt(Ms(this.controller,e.y));break;default:let i=t;throw new Error(`Unexpected prop ${i}`)}}describePOI(e){if(e!=null&&e.typeChain){let t=[];for(let o=0;o<e.typeChain.length;o++)t.push(this.poiTypeToText(e,o));return Zn(this.controller.getLanguage(),t)}else return this.poiTypeToText(e)}poiTypeToText(e,t){var i;let o=t&&e.typeChain?e.typeChain[t]:e.type;switch(o){case 1001:{let n=this.getIntersectingCurves(e);return n!==""?this.controller.s("graphing-calculator-narration-audio-trace-point-type-intersection-with-curves",{curves:n}):this.controller.s("graphing-calculator-narration-audio-trace-point-type-intersection")}case 1002:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-root");case 1003:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-intercept");case 1004:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-extremum");case 1006:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-definition");case 1007:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-trace");case 1008:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-label");case Vl:{let n=this.getIntersectingCurves(e);return n!==""&&!((i=e.typeChain)!=null&&i.includes(1001))?this.controller.s("graphing-calculator-narration-audio-trace-point-type-synthetic-intersection-with-curves",{curves:n}):this.controller.s("graphing-calculator-narration-audio-trace-point-type-synthetic-intersection")}case void 0:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-not-a-poi");default:throw new Error(`Unhandled type ${o}`)}}getIntersectingCurves(e){return!e||!e.intersects?"":this.getExpressionAriaLabel(e.intersects)}getExpressionAriaLabel(e){var o;let t=this.controller.getItemModel(e);return t?t.type==="expression"&&t.label?vr(t.label):t.type==="table"&&((o=this.focusedTableLocation)==null?void 0:o.type)==="cell"?this.controller.s("graphing-calculator-narration-audio-trace-expression-with-column",{index:t.displayIndex,column:this.focusedTableLocation.location.column+1}):Ar(t,"describe"):""}exitAudioTrace(e){var t;if(this.audioTraceActive){if(this.audioTraceActive=!1,this.controller.isKeypadEnabled()&&this.controller.dispatch({type:"keypad/123"}),e||(e=this.controller.s("graphing-calculator-text-audio-trace-off")),this.controller.dispatch({type:"toast/close"}),this.wasFocusInExpressionsView){let o=this.controller.getSelectedItem();if((!o||!this.controller.isItemSelectable(o.id))&&(o=this.controller.getFirstFullyVisibleItem()),o&&this.controller.isItemSelectable(o.id)){let i={type:"move-focus-to-item",id:o.id,where:"end"};if(o.type==="table")switch((t=this.focusedTableLocation)==null?void 0:t.type){case"cell":i.where={location:"cell",...this.focusedTableLocation.location},this.focusedTableLocation.location.column===1&&this.enteredAudioTraceWithFirstTableColumnFocused&&(i.where.column=0);break;case"table-regression":i={type:"set-focus-location",location:{type:"table-regression-type-dropdown",id:o.id}}}this.controller.dispatch(i)}}this.wasFocusInExpressionsView=!1,this.focusedTableLocation=void 0,this.stopAnimations(),this.sliderTraceActive=!1,this.sliderIndex=0,this.agSynthesizer.stop(),this.agSynthesizer.releaseAudio(),this.agNavigator.reset(),this.lastSpokenBranch=1,this.grapher.traceLayer.setTraceInfo(void 0),this.grapher.traceLayer.setTraceLine(void 0),this.controller.requestRedrawGraph(),this.enteredAudioTraceWithFirstTableColumnFocused=!1,Te(e),this.resumeAnimations()}}isFocusInExpressionsView(){return!!this.controller.getFocusedItem()}canAudioTraceCurrentExp(){let e=this.controller.getSelectedItem();return e?e.type==="table"?!!this.agNavigator.getCurrentSketch():this.agNavigator.canTrace(e):!1}enterAudioTrace(e){var a,s;let t=this.controller.getSelectedItem(),o=t&&t.type!=="table"&&!this.agNavigator.canTrace(t)?this.getExpressionAriaLabel(t.id):void 0,i=!1;this.audioTraceActive||(this.wasFocusInExpressionsView=this.isFocusInExpressionsView(),t&&o&&gt(this.controller.s("graphing-calculator-narration-audio-trace-unsupported-expression",{expression:o})),i=!!o||!this.wasFocusInExpressionsView);let n;if(i)n=this.agNavigator.getFirstTraceableSketch({selectAssociatedExpression:!0});else if(!o){if(t&&t.type==="expression"&&t.formula&&t.formula.error)return this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-narration-audio-trace-description-no-curve-selected")}});if(t&&t.type==="table"){if(!this.focusedTableLocation){let l=Ss(t),c=this.controller.getFocusLocation();c!=null&&c.type.startsWith("table-regression")||(a=document.activeElement)!=null&&a.closest(".dcg-table-regression")?this.setFocusedTableLocation({tableId:t.id,type:"table-regression",location:void 0}):(this.enteredAudioTraceWithFirstTableColumnFocused=(l==null?void 0:l.column)===0,this.setFocusedTableLocation(l?{tableId:t.id,type:"cell",location:{column:l.column||1,row:l.row}}:void 0))}}else this.enteredAudioTraceWithFirstTableColumnFocused=!1,this.setFocusedTableLocation(void 0);n=this.agNavigator.getCurrentSketch()}if(!n){this.agNavigator.reset(),this.lastSpokenBranch=1,this.exitAudioTrace(),n=this.agNavigator.getCurrentSketch();let l=n==null?void 0:n.branches[0].branchMode;return l===8&&!this.grapher.settings.config.audioTraceSimult?(this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-text-audio-trace-no-implicit-support")}})):l===5&&!this.grapher.settings.config.audioTraceSimult?(this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-text-audio-trace-no-parametric-support")}})):l===6&&!this.grapher.settings.config.audioTraceSimult?(this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-text-audio-trace-no-polar-support")}})):this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-narration-audio-trace-description-no-curve-selected")}})}if((s=this.controller.toneController)==null||s.handleAction({type:"mute-global"}),this.agNavigator.reset(),this.agNavigator.computeStepSizes(),this.lastSpokenBranch=1,this.grapher.traceLayer.clearOpenedPOI(),this.controller.requestRedrawGraph(),!this.audioTraceActive&&(this.controller.isKeypadEnabled()||this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-text-audio-trace-on"),noAria:!0,onHide:()=>this.exitAudioTrace(),hideAfter:0}}),o&&n&&gt(this.controller.s("graphing-calculator-narration-audio-trace-tracing-different-expression",{expression:this.getExpressionAriaLabel(this.focusedTableLocation?this.focusedTableLocation.tableId:n.id)})),gt(this.controller.s("graphing-calculator-text-audio-trace-on")),this.controller.getAudio()||gt(this.controller.s("graphing-calculator-narration-audio-trace-sound-effects-disabled")),this.pauseAnimations(),this.queueAnimatingPoints(!1),this.agSynthesizer.prepareSynthesizer(),(!e||!e.fromKeypad)&&(gt(this.controller.s("graphing-calculator-narration-audio-trace-instructions-use-arrow-keys")),this.controller.getAudio()&&gt(this.controller.s("graphing-calculator-narration-audio-trace-instructions-hear-graph")),this.agNavigator.getTraceableExpressionCount()>1&&(lo?gt(this.controller.s("graphing-calculator-narration-audio-trace-instructions-expression-navigation-mac")):gt(this.controller.s("graphing-calculator-narration-audio-trace-instructions-expression-navigation-windows"))),lo?gt(this.controller.s("graphing-calculator-narration-audio-trace-instructions-disable-mac")):gt(this.controller.s("graphing-calculator-narration-audio-trace-instructions-disable-windows"))),this.wasFocusInExpressionsView)){let l=this.controller.findEl(".dcg-graph-outer");l&&(re(l).one("focusin",()=>{setTimeout(()=>{Te()},0)}),this.controller.dispatch({type:"set-focus-location",location:{type:"graph-paper"}}))}this.agNavigator.moveToOrigin(),gt(this.getExpressionAriaLabel(n.id)),this.reportAudioTrace({playSound:!1}),this.wasFocusInExpressionsView||Te(),this.audioTraceActive=!0,this.controller.isKeypadEnabled()&&this.controller.dispatch({type:"keypad/audio"})}checkIfSelectedItemChanged(e){this.lastSelectedId!==e&&(this.lastSelectedId=e,this.audioTraceActive&&(e?(gt(this.getExpressionAriaLabel(e)),this.exitSliderTrace(),this.agNavigator.updatePOI(),this.agNavigator.moveToOrigin(),this.reportAudioTrace(),Te()):this.exitAudioTrace()))}pauseAnimations(){this.sliderArray.length=0,this.controller.getAllModelsWithSliders().forEach(t=>{t.slider.isPlaying&&(this.controller.dispatch({type:"set-slider-isplaying",id:t.id,isPlaying:!1}),this.sliderArray.push(t))})}resumeAnimations(){if(this.sliderArray.length!==0){for(let e=0;e<this.sliderArray.length;e++){let t=this.sliderArray[e];t.slider.isPlaying!==!0&&this.controller.dispatch({type:"set-slider-isplaying",id:t.id,isPlaying:!0})}this.sliderArray.length=0}}stopAnimations(){this.controller.getAllModelsWithSliders().forEach(t=>{t.slider.isPlaying&&this.controller.dispatch({type:"set-slider-isplaying",id:t.id,isPlaying:!1})})}hasActiveSliders(){let e=this.controller.getAllModelsWithSliders();for(let t=0;t<e.length;t++)if(e[t].slider.isPlaying)return!0;return!1}queueAnimatingPoints(e){this.sliderArray.length===1?gt(this.controller.s("graphing-calculator-narration-audio-trace-one-slider-paused")):this.sliderArray.length>1?gt(this.controller.s("graphing-calculator-narration-audio-trace-multiple-sliders-paused",{sliders:this.sliderArray.length})):e&&gt(this.controller.s("graphing-calculator-narration-audio-trace-no-sliders-paused"))}queueSliderLatex(){this.hasActiveSliders()||this.agSynthesizer.stop();let e=this.getSelectedSlider();e?gt(e.latex):gt(this.controller.s("graphing-calculator-narration-audio-trace-slider-value-unknown"))}getSelectedSlider(){let e=this.controller.getAllModelsWithSliders();return this.sliderIndex<=e.length-1?e[this.sliderIndex]:null}incrementSliderValue(){this.adjustSlider("up")}decrementSliderValue(){this.adjustSlider("down")}incrementBigSliderValue(){this.adjustSlider("bigup")}decrementBigSliderValue(){this.adjustSlider("bigdown")}nextSlider(){this.adjustSlider("next")}prevSlider(){this.adjustSlider("prev")}sliderMin(){this.adjustSlider("min")}sliderMax(){this.adjustSlider("max")}adjustSlider(e){let t=this.getSelectedSlider();if(!t){gt(this.controller.s("graphing-calculator-narration-audio-trace-cannot-change-slider-value"));return}let o=t.latex,i=this.controller.getAllModelsWithSliders().length;switch(e){case"up":case"down":case"bigup":case"bigdown":case"min":case"max":this.controller.dispatch({type:"adjust-slider-by-keyboard",id:t.id,adjustment:e}),this.queueSliderLatex(),Te();break;case"next":this.sliderIndex++,this.sliderIndex>=i&&(gt(this.controller.s("graphing-calculator-narration-audio-trace-last-slider")),this.sliderIndex=i-1),this.queueSliderLatex(),Te();return;case"prev":this.sliderIndex--,this.sliderIndex<0&&(gt(this.controller.s("graphing-calculator-narration-audio-trace-first-slider")),this.sliderIndex=0),this.queueSliderLatex(),Te();return}!t.slider.isPlaying&&o!==t.latex&&(this.queueSliderLatex(),Te())}toggleAudioTrace(){this.audioTraceActive?this.exitAudioTrace():this.enterAudioTrace()}toggleSliderTrace(){this.sliderTraceActive?this.exitSliderTrace():this.enterSliderTrace()}enterSliderTrace(){if(this.sliderTraceActive)return;this.sliderIndex=0,this.controller.getAllModelsWithSliders().length!==0?(gt(this.controller.s("graphing-calculator-narration-slider-trace-on")),this.queueSliderLatex(),this.sliderTraceActive=!0):(gt(this.controller.s("graphing-calculator-narration-slider-trace-no-sliders")),this.sliderTraceActive=!1),Te()}exitSliderTrace(){this.sliderTraceActive&&(gt(this.controller.s("graphing-calculator-narration-slider-trace-off")),this.sliderTraceActive=!1,this.sliderIndex=0,Te())}recomputePoints(){!this.audioTraceActive||this.agSynthesizer.getIsPlaying()||(this.agNavigator.updatePOI(),this.agNavigator.updateSampledPoints(),this.agNavigator.updateCurrentPoint(),this.agNavigator.resetTracePoint(),this.agNavigator.computeStepSizes())}reportAndMoveToPrevPoint(){Lo(),this.agNavigator.prevPoint(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})}reportAndMoveToNextPoint(){Lo(),this.agNavigator.nextPoint(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})}reportAndMoveToOrigin(){Lo(),this.agNavigator.moveToOrigin(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})}reportAndMoveToPrevPOI(){Lo(),this.agNavigator.prevPOI(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})}reportAndMoveToNextPOI(){Lo(),this.agNavigator.nextPOI(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})}reportAndMoveToFirstPoint(){Lo(),this.agNavigator.firstPoint(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})}reportAndMoveToLastPoint(){Lo(),this.agNavigator.lastPoint(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})}reportX(){Lo(),this.reportAudioTrace({propToSpeak:"x",playSound:!1})}reportY(){Lo(),this.reportAudioTrace({propToSpeak:"y",playSound:!1})}reportColor(){Lo();let e=this.agNavigator.getCurrentSketch();e?gt(fl(this.controller,e.color)):gt(this.controller.s("graphing-calculator-narration-color-unknown")),Te()}reportPOICount(){Lo();let e=this.agNavigator.getCurrentSketch(),t=e?e.getPOI().length:0;Te(this.controller.s("graphing-calculator-narration-audio-trace-poi-count",{x:t}))}reportType(){Lo(),this.reportAudioTrace({propToSpeak:"type",playSound:!1})}reportBranch(){Lo(),this.reportAudioTrace({propToSpeak:"branch",playSound:!1})}describePoint(){Lo(),this.reportAudioTrace({playSound:!1}),Te()}playCurrentPoint(){let e=this.agNavigator.getCurrentPoint();e&&this.agSynthesizer.playPoint(e)}reportAudioTrace(e){var a,s;let t=this.agNavigator.getCurrentPoint();if(!t)return;let o=e==null?void 0:e.propToSpeak,i=this.controller.getAudio()&&this.agSynthesizer.getPlaybackSupported()&&((a=e==null?void 0:e.playSound)!=null?a:!0),n=(s=e==null?void 0:e.speakCoordinates)!=null?s:!0;this.agSynthesizer.stop(),i&&this.playCurrentPoint(),n&&(o?this.queueCoordinateProp(t,o):this.queueCoordinates(t),this.lastSpokenBranch=t.reportedBranch?t.reportedBranch:t.branch+1,setTimeout(()=>{Te()},o?0:100))}adjustPlaybackSpeed(e){if(!this.controller.getAudio()){Te(this.controller.s("graphing-calculator-narration-audio-trace-sound-effects-disabled"));return}if(e<0||e>=$x.length)return;this.audioSpeedIndex=e;let t=$x[e];return this.agSynthesizer.setAudioSpeed(t.speed),Te(this.controller.s("graphing-calculator-narration-audio-trace-playback-speed",{speed:t.displayedSpeed}))}speedUp(){this.adjustPlaybackSpeed(this.audioSpeedIndex+1)}speedDown(){this.adjustPlaybackSpeed(this.audioSpeedIndex-1)}adjustVolume(e){if(Lo(),!this.controller.getAudio()){Te(this.controller.s("graphing-calculator-narration-audio-trace-sound-effects-disabled"));return}let t=this.agSynthesizer.getAudioVolume(),o=e==="up"?Math.min(100,Math.round((t+.1)*100)):Math.max(0,Math.round((t-.1)*100));this.agSynthesizer.setAudioVolume(o/100),this.playCurrentPoint(),Te(this.controller.s("graphing-calculator-narration-audio-trace-volume",{volume:o}))}getFocusedTableLocation(){return this.focusedTableLocation}setFocusedTableLocation(e){this.focusedTableLocation=e}getAudioTraceActive(){return this.audioTraceActive}isAudioTracing(){return!!this.agSynthesizer&&this.agSynthesizer.getIsPlaying()}handleEvaluatorChange(e){}hearGraph(){var e,t;if(Lo(),!this.controller.getAudio()){Te(this.controller.s("graphing-calculator-narration-audio-trace-sound-effects-disabled"));return}if(this.agSynthesizer.getPlaybackSupported()){this.agSynthesizer.stop();let o=this.agNavigator.getCurrentSketch();if((t=(e=this.controller).logEvent)==null||t.call(e,{category:"audio-trace",action:"hear-graph"}),o&&Pa(this.controller,o)){let i=this.grapher.settings.config.audioTraceSimult?"simultaneous":"sequential";this.agSynthesizer.playCurrentSketch(i),i==="simultaneous"?(this.grapher.traceLayer.setTraceInfo(void 0),requestAnimationFrame(()=>this.animateCurrentSketchLine())):(this.grapher.traceLayer.setTraceLine(void 0),requestAnimationFrame(()=>this.animateCurrentSketchPoint()))}else Te(this.controller.s("graphing-calculator-narration-audio-trace-unable-to-trace-this-expression"))}else Te(this.controller.s("graphing-calculator-narration-audio-trace-unable-to-play"))}animateCurrentSketchPoint(){if(this.graphAnimationTimeoutId&&cancelAnimationFrame(this.graphAnimationTimeoutId),this.graphAnimationTimeoutId=requestAnimationFrame(()=>this.animateCurrentSketchPoint()),!this.agSynthesizer.getIsPlaying())return;let e=this.agSynthesizer.getCurrentIndependentValue(),t=this.agSynthesizer.getCurrentBranchIndex();e!==void 0&&t!==void 0&&this.agNavigator.drawTracePoint(this.agNavigator.getPoint(t,e))}animateCurrentSketchLine(){if(this.graphAnimationTimeoutId&&cancelAnimationFrame(this.graphAnimationTimeoutId),this.graphAnimationTimeoutId=requestAnimationFrame(()=>this.animateCurrentSketchLine()),!this.agSynthesizer.getIsPlaying())return;let e=this.agSynthesizer.getCurrentIndependentValue();e!==void 0&&this.agNavigator.drawTraceLine(e,this.agSynthesizer.getGraphMode())}stopGraph(){this.agSynthesizer.stop(),this.graphAnimationTimeoutId&&cancelAnimationFrame(this.graphAnimationTimeoutId)}getAudioSpeedIndex(){return this.audioSpeedIndex}getAudioVolume(){var e;return(e=this.agSynthesizer.getAudioVolume())!=null?e:.5}};var yI=class{redrawToCtx(e,t){let{ctx:o,projection:i}=e;if(!t)return;o.save(),o.lineWidth=2,o.fillStyle="rgba(0,0,0,.15)",o.strokeStyle="rgba(0,0,0,.4)";let n=i.mapx(t.left),a=i.mapy(t.top),s=i.mapx(t.right),l=i.mapy(t.bottom),c=s-n,p=l-a;o.fillRect(n,a,c,p),o.strokeRect(n,a,c,p),o.restore()}};var xf={};xf.vpmax8={width:170,height:220,margins:{left:5,top:15,right:5,bottom:50}};xf.vpmax11={width:230,height:220,margins:{left:15,top:15,right:5,bottom:5}};xf.etc8={width:96,height:96,margins:{left:5,top:15,right:0,bottom:0}};xf.etc11={width:132,height:134,margins:{left:10,top:15,right:5,bottom:5}};var oa=class{constructor(e,t,o){this.screen=e,this.viewport=t,this.settings=o,this.mathCoordinates=__dcg_shared_module_exports__['pd'](t),this.pixelCoordinates=__dcg_shared_module_exports__['od'](e),this.updateScalePairs()}updateScalePairs(){let{xAxisScale:e,yAxisScale:t}=this.settings;this.mathToPixels=__dcg_shared_module_exports__['qd'].fromRects(this.mathCoordinates,this.pixelCoordinates,{xAxisScale:e,yAxisScale:t}),this.pixelsToMath=this.mathToPixels.inverse()}mapx(e){return this.mathToPixels.mapX(e)}mapy(e){return this.mathToPixels.mapY(e)}reverse_mapx(e){return this.pixelsToMath.mapX(e)}reverse_mapy(e){return this.pixelsToMath.mapY(e)}mapAlongAxis(e,t){switch(t){case"x":return this.mapx(e);case"y":return this.mapy(e);default:{let o=t;throw new Error(`Unknown axis: ${o}`)}}}reverseMapAlongAxis(e,t){switch(t){case"x":return this.reverse_mapx(e);case"y":return this.reverse_mapy(e);default:{let o=t;throw new Error(`Unknown axis: ${o}`)}}}map_pt(e){return this.mathToPixels.mapPoint(e)}map_xy_pairs(e){let t=[];for(let o=0;o<e.length;o+=2)t.push(this.mapx(e[o])),t.push(this.mapy(e[o+1]));return t}reverse_map_pt(e){return this.pixelsToMath.mapPoint(e)}coordsAreOnscreen(e,t,o=0){return e>-o&&t>-o&&e<this.screen.width+o&&t<this.screen.height+o}closestPointOnScreen(e){let t=this.pixelCoordinates;return{x:Math.min(Math.max(e.x,t.left),t.right),y:Math.min(Math.max(e.y,t.top),t.bottom)}}};var hce=10240;function gce(r,e,t,o,i){let{dotSpacing:n}=r,a=1+n,s=i.charCodeAt(0)-hce;s&1&&e.fillRect(t,o,1,1),s&2&&e.fillRect(t,o+a,1,1),s&4&&e.fillRect(t,o+2*a,1,1),s&8&&e.fillRect(t+a,o,1,1),s&16&&e.fillRect(t+a,o+a,1,1),s&32&&e.fillRect(t+a,o+2*a,1,1)}function wI(r,e){let{x:t,y:o,width:i,height:n}=e,a=r.getImageData(t,o,i,n).data;for(let s=3;s<a.length;s+=4)if(a[s]!==0)return!1;return!0}function mce(r,e){let{x:t,y:o,width:i,height:n}=e,a=r.getImageData(t,o,i,n).data;for(let s=3;s<a.length;s+=4)if(a[s]===0)return!1;return!0}function iR(r,e,t,o,i){return wI(e,TI(r,t,o,i))}function fce(r,e,t,o,i){let{dotSpacing:n}=r,a=3+2*n;for(let s=0;s<i.length;s++)gce(r,e,t+a*s,o,i[s])}function $c(r,e){let{dotSpacing:t}=r;return(2+t)*e.length+(1+t)*(e.length-1)}function SI(r,e){let{dotSpacing:t}=r;return 3+2*t}function TI(r,e,t,o){let{cellPadding:i}=r;return{x:e-i,y:t-i,width:$c(r,o)+2*i,height:SI(r,o)+2*i}}function xI(r,e){if(!r)return e;let t=Math.min(r.x,e.x),o=Math.min(r.y,e.y),i=Math.max(r.x+r.width,e.x+e.width)-t,n=Math.max(r.y+r.height,e.y+e.height)-o;return{x:t,y:o,width:i,height:n}}function o7(r,e,t){return Math.min(Math.max(r,e),t)}function jx(r,e,t,o,i){return{x:o7(t,0,e.canvas.width-$c(r,i)),y:o7(o,0,e.canvas.height-SI(r,i))}}function Yx(r,e,t,o,i){let n=e.fillStyle;e.fillStyle="white";let a=TI(r,t,o,i);e.fillRect(a.x,a.y,a.width,a.height),e.fillStyle="black",fce(r,e,t,o,i),e.fillStyle=n}function nR(r,e,t,o){let{cellPadding:i}=r;return{x:Math.round(e-($c(r,o)+i)),y:t}}function bce(r){return r.replace(/\u283C(?!$)/g,"")}function Wc(r,e){let t=e==="nemeth"?lc(r):cc(r);return t.isError?"":bce(t.value)}function wf(r,e){return e>=0?r*Math.pow(10,e):r/Math.pow(10,-e)}function n7(r,e,t,o){let[i,n]=t,a=Math.ceil(Math.log(n-i)/Math.LN10)-1,s=a,l=5,c=15;e:for(let p=a;a-p<4;p--)for(let h of[5,2,1]){let g=wf(h,p),m=Math.floor(i/g)+1,b=Math.ceil(n/g)-1,x=Math.abs(o(g)-o(0)),E=Wc(String(wf(m*h,p)),e),S=Wc(String(wf(b*h,p)),e);if(x<$c(r,E)+$c(r," ")||x<$c(r,S)+$c(r," ")||b-m>=c)break e;s=p,l=h}return{int:l,exp:s}}function a7(r,e,t){return n7(r,e,[t.viewport.xmin,t.viewport.xmax],o=>t.mapx(o))}function yce(r,e,t){return t.viewport.isSquare(t.screen,{xAxisScale:t.settings.xAxisScale,yAxisScale:t.settings.yAxisScale})?a7(r,e,t):n7(r,e,[t.viewport.ymin,t.viewport.ymax],o=>t.mapy(o))}function i7(r,e){let{int:t,exp:o}=r,[i,n]=e,a=Math.ceil(i/wf(t,o)),s=Math.floor(n/wf(t,o)),l=[];for(let c=a;c<=s;c++)l.push(wf(c*t,o));return l}function xce(r,e,t){return{x:i7(a7(r,e,t),[t.viewport.xmin,t.viewport.xmax]),y:i7(yce(r,e,t),[t.viewport.ymin,t.viewport.ymax])}}function s7(r,e,t,o,i,n){if(t.margins===void 0||e===void 0)return;let a=vce(o),s=t.margins,l={...e.settings},c=l.showGrid&&wce(o),p=!!l.showXAxis,h=!!l.showYAxis,g=!!l.xAxisNumbers,m=l.xAxisArrowMode,b=!!l.yAxisNumbers,x=l.yAxisArrowMode,E=a.graphLineWidth,S={showGrid:!1,xAxisNumbers:!1,xAxisArrowMode:__dcg_shared_module_exports__['Xd'].NONE,yAxisNumbers:!1,yAxisArrowMode:__dcg_shared_module_exports__['Xd'].NONE,showXAxis:!1,showYAxis:!1,graphLineWidth:E,pointLineWidth:2.5,curveOpacity:1,globalCurveColor:"#000",disableFill:!0};for(let q in S)e.settings[q]=S[q];let k=r.width-s.right-s.left,T=r.height-s.top-s.bottom,I=new La(k,T),P=e.getProjection().viewport;e.settings.squareAxes&&(P=P.squareCrop(I,e.settings));let A=new oa(I,P,e.settings),D=r.getContext("2d"),G=document.createElement("canvas");G.width=k,G.height=T;let N=G.getContext("2d"),U=document.createElement("canvas");U.width=k,U.height=T;let K=U.getContext("2d"),H=document.createElement("canvas");H.width=k,H.height=T;let w=H.getContext("2d"),F=document.createElement("canvas");F.width=k,F.height=T;let V=F.getContext("2d"),B=document.createElement("canvas");B.width=k,B.height=T;let L=B.getContext("2d");if(D!==null&&V!==null&&N!==null&&w!==null&&L!==null&&K!==null){e.settings.disableFill=!0,e.screenshotToCanvas(F,{width:k,height:T,targetPixelRatio:1,transparentBackground:!0,showMovablePoints:n}),e.settings.disableFill=!1,e.screenshotToCanvas(G,{width:k,height:T,targetPixelRatio:1,transparentBackground:!0,showMovablePoints:n}),D.fillStyle="white",D.fillRect(0,0,r.width,r.height);let q=Math.round(A.mapx(0)),le=Math.round(A.mapy(0)),$=l.xAxisLabel!==""?l.xAxisLabel.replace(/ /g,"\\ "):"x",ne=l.yAxisLabel!==""?l.yAxisLabel.replace(/ /g,"\\ "):"y",ue=1;if(p&&A.coordsAreOnscreen(k-6,le-8,0)){let Y={...a,cellPadding:a.cellPadding+ue},j=2+2*SI(Y,$),X=k-2,xe=le-j,fe=Wc($,i);({x:X,y:xe}=nR(Y,X,xe,fe)),{x:X,y:xe}=jx(Y,N,X,xe,fe),Yx(Y,L,X,xe,fe)}if(h&&A.coordsAreOnscreen(q+4,1,0)){let Y={...a,cellPadding:a.cellPadding+ue},j=q+4,X=1,xe=Wc(ne,i);({x:j,y:X}=jx(Y,N,j,X,xe)),Yx(Y,L,j,X,xe)}let{x:de,y:pe}=xce(a,i,A);if(p){let Y;for(let j of de){if(j===0&&h)continue;let X=Math.round(A.mapx(j));if(!(X<2||X>A.screen.width-2)&&g){let xe=$c(a,Wc("-1",i))-$c(a,Wc("1",i)),fe=j<0?xe+1:1,Se=X-fe,ke=le+4,Le=Wc(""+j,i);({x:Se,y:ke}=jx(a,L,Se,ke,Le)),iR(a,V,Se,ke,Le)&&(Yx(a,L,Se,ke,Le),Y=xI(Y,TI(a,Se,ke,Le)))}}a.embossPatternInequalities&&Y&&(Y=xI(Y,{x:0,y:le,width:k,height:0}),w.fillStyle="white",w.fillRect(Y.x,Y.y,Y.width,Y.height))}if(h){let Y;for(let j of pe){if(j===0&&p)continue;let X=Math.round(A.mapy(j));if(X<2||X>A.screen.height-2)continue;let xe=-Math.ceil(SI(a," ")/2);if(b){let fe=q-4,Se=X+xe,ke=Wc(""+j,i);({x:fe,y:Se}=nR(a,fe,Se,ke)),{x:fe,y:Se}=jx(a,L,fe,Se,ke),iR(a,V,fe,Se,ke)&&(Yx(a,L,fe,Se,ke),Y=xI(Y,TI(a,fe,Se,ke)))}}a.embossPatternInequalities&&Y&&(Y=xI(Y,{x:q,y:0,width:0,height:T}),w.fillStyle="white",w.fillRect(Y.x,Y.y,Y.width,Y.height))}if(p&&h){let Y=q-2,j=le+2,X=Wc(g||b?"0":"o",i);({x:Y,y:j}=nR(a,Y,j,X)),A.coordsAreOnscreen(Y,j,0)&&({x:Y,y:j}=jx(a,L,Y,j,X),iR(a,V,Y,j,X)&&Yx(a,L,Y,j,X))}for(let Y of de){let j=Math.round(A.mapx(Y));j<2||j>A.screen.width-2||h&&Y===0||c&&Xx(w,"white",j-1,0,T,3)}for(let Y of pe){let j=Math.round(A.mapy(Y));j<2||j>A.screen.height-2||p&&Y===0||c&&Jx(w,"white",j-1,0,k,3)}p&&Jx(w,"white",le-3,0,k,7),h&&Xx(w,"white",q-3,0,T,7);for(let Y of de){let j=Math.round(A.mapx(Y));j<2||j>A.screen.width-2||h&&Y===0||(c?Xx(w,vI(o),j,0,T):p&&Xx(w,vI(o),j,le-3,le+2))}for(let Y of pe){let j=Math.round(A.mapy(Y));j<2||j>A.screen.height-2||p&&Y===0||(c?Jx(w,vI(o),j,0,k):h&&Jx(w,vI(o),j,q-3,q+2))}if(p&&Jx(w,vf(o),le,0,k),h&&Xx(w,vf(o),q,0,T),x!==__dcg_shared_module_exports__['Xd'].NONE&&(Ece(w,vf(o),q,0),x===__dcg_shared_module_exports__['Xd'].BOTH&&kce(w,vf(o),q,T-1)),m!==__dcg_shared_module_exports__['Xd'].NONE&&(Sce(w,vf(o),k-1,le),m===__dcg_shared_module_exports__['Xd'].BOTH&&Tce(w,vf(o),0,le)),a.embossPatternInequalities)for(let Y=0;Y<k;Y+=6)for(let j=0;j<T;j+=6){let X={x:Y,y:j,width:3,height:3};mce(N,X)&&wI(w,X)&&wI(V,X)&&wI(L,X)&&Ice(K,"black",Y,j)}a.embossPatternInequalities||D.drawImage(G,s.left,s.top),D.drawImage(H,s.left,s.top),D.drawImage(F,s.left,s.top),D.drawImage(B,s.left,s.top),a.embossPatternInequalities&&D.drawImage(U,s.left,s.top)}for(let q in S)e.settings[q]=l[q]}function vce(r){if(r==="etc8"||r==="etc11")return{dotSpacing:0,cellPadding:1,graphLineWidth:1.75,embossPatternInequalities:!0};if(r==="vpmax8"||r==="vpmax11")return{dotSpacing:1,cellPadding:2,graphLineWidth:1,embossPatternInequalities:!1};{let e=r;throw new Error(`Unexpected embosser model ${e}`)}}function wce(r){if(r==="etc8"||r==="etc11")return!1;if(r==="vpmax8"||r==="vpmax11")return!0;{let e=r;throw new Error(`Unexpected embosser model ${e}`)}}function vf(r){switch(r){case"vpmax8":case"vpmax11":return"rgb(145, 145, 145)";case"etc8":case"etc11":return"rgb(0, 0, 0)";default:let e=r;throw new Error("Unexpected embosser model: "+e)}}function vI(r){switch(r){case"vpmax8":case"vpmax11":return"rgb(219, 219, 219)";case"etc8":case"etc11":return"rgb(0, 0, 0)";default:let e=r;throw new Error("Unexpected embosser model: "+e)}}function Xx(r,e,t,o,i,n=1){let a=r.fillStyle;r.fillStyle=e,r.fillRect(t-1,o,n,i-o),r.fillStyle=a}function Jx(r,e,t,o,i,n=1){let a=r.fillStyle;r.fillStyle=e,r.fillRect(o,t-1,i-o,n),r.fillStyle=a}function Sce(r,e,t,o){let i=r.fillStyle;r.fillStyle=e;for(let n=-2;n<=2;n++)r.fillRect(t-Math.abs(n),o-1+n,1,1);r.fillStyle=i}function Tce(r,e,t,o){let i=r.fillStyle;r.fillStyle=e;for(let n=-2;n<=2;n++)r.fillRect(t+Math.abs(n),o-1+n,1,1);r.fillStyle=i}function kce(r,e,t,o){let i=r.fillStyle;r.fillStyle=e;for(let n=-2;n<=2;n++)r.fillRect(t-1+n,o-Math.abs(n),1,1);r.fillStyle=i}function Ece(r,e,t,o){let i=r.fillStyle;r.fillStyle=e;for(let n=-2;n<=2;n++)r.fillRect(t-1+n,o+Math.abs(n),1,1);r.fillStyle=i}function Ice(r,e,t,o){let i=r.fillStyle;r.fillStyle=e,r.fillRect(t+1,o,1,1),r.fillRect(t,o+1,1,1),r.fillRect(t+1,o+1,1,1),r.fillRect(t+2,o+1,1,1),r.fillRect(t+1,o+2,1,1),r.fillStyle=i}ce();ie();var l7={translate:!0,reflect:!0,dilate:!0,rotate:!0},EBe={selection:!0,point:!0,line:!0,segment:!0,ray:!0,vector:!0,circle:!0,arc:!0,parallel:!0,perpendicular:!0,midpoint:!0,polygon:!0,compass:!0,angle:!0,directedangle:!0,anglebisector:!0,"box-selection":!0,"expression-edit":!0,...l7},Sf=Object.keys(l7);var qI=__dcg_shared_module_exports__['e'](se());function aR(r,e){if(r.indexOf("\\idref_{")===0){let t=r.indexOf("}"),o=r.slice(8,t);return e(o)+r.slice(t+1)}else return r}function sR(r,e){var i;let t={};for(let n in r){let a=r[n];if(a.type==="polygon-segment"&&!a.showAsSepratePreviewObject){let s=c7(a,e,{});if(!s)throw new Error("Expected polygon-segment object to be converted");t[n]={type:"inline",rhs:s.rhs}}}let o={...t};for(let n in r){if(t[n])continue;let a=r[n],s=c7(a,e,t);s&&(o[n]={type:"assignment",latex:`${(i=s.lhs)!=null?i:a.id}=${s.rhs}`,color:a.color,showAngleLabel:s.showAngleLabel,sliderInfo:s.sliderInfo})}return o}function c7(r,e,t){let o=n=>{let a=n;return t[n]?a=t[n].rhs:e.isBeingCommitted&&(a=aR(n,e.getVariableNameForId)),a},i=n=>n.map(o);switch(r.type){case"point-reference":return{rhs:r.parents[0]};case"point":let{x:n,y:a}=r;return{rhs:"\\left("+__dcg_shared_module_exports__['_'](n)+","+__dcg_shared_module_exports__['_'](a)+"\\right)"};case"glider":return{rhs:"\\operatorname{glider}\\left("+i(r.parents)[0]+","+__dcg_shared_module_exports__['_'](r.t)+"\\right)"};case"polygon":return{rhs:"\\operatorname{"+r.type+"}\\left("+i(r.parents).join(",")+"\\right)"};case"circle":case"arc":case"compass":case"segment":case"line":case"ray":case"parallel":case"perpendicular":case"anglebisector":case"intersection":case"midpoint":return{rhs:"\\operatorname{"+r.type+"}\\left("+i(r.parents).join(",")+"\\right)"};case"vector-copy":{let[m,b]=i(r.parents);return{rhs:`\\operatorname{translate}\\left(${m},${m}.\\operatorname{start},${b}\\right)`}}case"vector":return{rhs:"\\operatorname{"+r.type+"}\\left("+i(r.parents).join(",")+"\\right)"};case"vector-endpoint":return{rhs:`${i(r.parents)[0]}.\\operatorname{${r.location}}`};case"dilate":case"translate":case"reflect":case"rotate":{let m;if(r.type==="dilate"&&r.parents.length===3){let b=i(r.parents);m=[b[0],`\\frac{\\left|${b[2]}\\right|}{\\left|${b[1]}\\right|}`]}else m=i(r.parents);return{rhs:`\\operatorname{${r.type}}\\left(x,${m.join(",")}\\right)`,lhs:`${r.id}\\left(x\\right)`}}case"angle":case"directedangle":return{showAngleLabel:e.allowAngleToolMeasurementLabel?r.showAngleLabel:!1,rhs:"\\operatorname{"+r.type+"}\\left("+i(r.parents).join(",")+"\\right)"};case"polygon-angle":case"polygon-directedangle":let s=r.type==="polygon-angle"?"angles":"directedangles",l=i(r.parents)[0],c=r.angleIndex;return{showAngleLabel:e.allowAngleToolMeasurementLabel?e.isBeingCommitted:!1,rhs:`\\operatorname{${s}}\\left(${l}\\right)\\left[${c}\\right]`};case"polygon-segment":return{rhs:i(r.parents)[0]+(r.listAccess!==void 0?"\\left["+r.listAccess+"\\right]":"")+".\\operatorname{segments}\\left["+(r.edgeNumber+1)+"\\right]"};case"slider":return{lhs:r.lhsLatex,rhs:r.rhsLatex,sliderInfo:r.sliderInfo};case"expression-edit-preview-latex":return r.rhsLatex===""?void 0:{showAngleLabel:r.rhsLatex.trim().startsWith("\\operatorname{angle}\\left("),rhs:r.rhsLatex};default:return r}}function lR(r,e){__dcg_shared_module_exports__['Jb'](r)?r.value.forEach((t,o)=>{let i=__dcg_shared_module_exports__['rb'](r.valueType);if(__dcg_shared_module_exports__['xb'](i))throw new Error("Programming error: unexpected lambda type");e({valueType:i,value:t},o+1)}):e(r,void 0)}function Zx(r){let e=r.formula.geometry,t=e==null?void 0:e.identifier;return t?__dcg_shared_module_exports__['ia'](t):"\\idref_{"+r.id+"}"}function Ju(r,e){let{controller:t,expandLists:o=!0}=r;t.getAllItemModels().concat(t.getAllToolPreviewItems()).forEach(n=>{var p;if(!Gi(n))return;let a=n.formula.typed_constant_value,s=n.formula.geometry,l=Zx(n),c=!t.getItemModel(n.id);o&&t.canExpandListForItem(n.id)?lR(a,(h,g)=>{var x;let m=l+(g===void 0?"":"\\left["+g+"\\right]"),b={calcId:n.id,data:s,hidden:!n.shouldGraph,isGraphableAndInteractive:!!((x=n.formula)!=null&&x.is_graphable)&&!r.controller.shouldIgnoreGraphInteractions(n),assignment:l,listIndex:g!==void 0?g-1:void 0,typedRuntimeValue:h,referenceLatex:m};e(b,c)}):e({calcId:n.id,data:s,hidden:!n.shouldGraph,isGraphableAndInteractive:!!((p=n.formula)!=null&&p.is_graphable)&&!r.controller.shouldIgnoreGraphInteractions(n),assignment:l,listIndex:void 0,typedRuntimeValue:a,referenceLatex:l},c)})}function cR(r,e){return{...r,referenceLatex:r.assignment+"\\left["+e+"\\right]",typedRuntimeValue:__dcg_shared_module_exports__['Kb'](r.typedRuntimeValue,e),listIndex:e}}var Rs=class{constructor(e){this.model=e;this.s=e.s}createOutput(){return this.model.createCustomToolOutput(this.getSpec())}clearTentativeOutputs(){let e=this.getSpec(),t={},o=this.model.getNonObjectsState().ui.currentTool.idMap;for(let i in o){let n=o[i];!this.model.isObjectALockedToolInput(n)&&this.model.isObjectUncommitted(n)&&(t[i]=n)}this.model.deleteObjectsAndRememberReusableId(t),this.model.tentativelyMatchToolInput(e,""),this.createOutput()}didLockInput(e){var n;let{currentTool:t}=this.model.getNonObjectsState().ui,o=t.inputIndex,i=e.inputs[o];i&&(n=i.numberInputInfo)!=null&&n.defaultLatex&&!t.idMap[i.id]&&this.onNumberInput(i.numberInputInfo.defaultLatex)}shouldReferenceSpecificItemInList(e,t){return!t}getExpandedReferenceForDef(e,t){return this.shouldReferenceSpecificItemInList(e,t)?e.referenceLatex:e.assignment}getListIndexForHover(e,t){if(this.shouldReferenceSpecificItemInList(e,t))return e.listIndex}_getOrCreatePoint(e,t,o){let i=this.model.getOrCreatePointNearMouse(e,o);if(i.type==="def")return{createdNew:!1,def:i.def,reference:this.getExpandedReferenceForDef(i.def,t),previewOnly:!1};let n=this.createPointDefinition(i.spec,t),a=i.spec.type==="point-reference"?i.spec.targetSpec.parentDefs:i.spec.parentDefs,s=0;for(let c=0;c<a.length;c++){let p=a[c];if(p.polygonEdgeInfo){let h=this.model.createToolInputDependency({type:"polygon-segment",parents:[p.polygonEdgeInfo.polygonDef.referenceLatex],edgeNumber:p.polygonEdgeInfo.edgeNumber||0,polygonColor:this.getPolygonEdgeColor(p)},this.getSpec(),s);n.parents[c]=h,s+=1,this.model.setObjectHovered({tokenId:h,listIndex:void 0})}else this.model.setObjectHovered({calcId:p.calcId,listIndex:this.getListIndexForHover(p,t)})}return{createdNew:!0,def:void 0,reference:this.model._createInputObject(n),previewOnly:n.type==="point"&&n.previewOnly}}_isReadyToCommit(){return this.model.getNonObjectsState().ui.currentTool.inputIndex>=this.getSpec().inputs.length}_getFirstMissingInput(){let{inputIndex:e}=this.model.getNonObjectsState().ui.currentTool;return this.getSpec().inputs[e]}canNextInputBePoint(){let e=this._getFirstMissingInput();return e&&e.type==="point"?!0:!!(e&&e.type==="union"&&e.valueTypes.indexOf(__dcg_shared_module_exports__['va'])!==-1)}getNonPointInputType(){let e=this._getFirstMissingInput();if(!(!e||e.type==="point"))return e.type==="union"?e:e.type}isValidNextInputType(e){if(this.canNextInputBePoint()&&__dcg_shared_module_exports__['sa'](e,__dcg_shared_module_exports__['va']))return!0;let t=this._getFirstMissingInput();if(!t)return!1;let o=[];if(t.type==="union")o=t.valueTypes;else{let i=t.type;switch(i){case"point":o=[__dcg_shared_module_exports__['va']];break;case"straight":o=[...__dcg_shared_module_exports__['vb'].types];break;case"angle":o=[__dcg_shared_module_exports__['Ma'],__dcg_shared_module_exports__['Oa']];break;case"arc":o=[__dcg_shared_module_exports__['Ha']];break;case"circle":o=[__dcg_shared_module_exports__['Ga']];break;case"polygon":o=[__dcg_shared_module_exports__['Da']];break;case"segment":o=[__dcg_shared_module_exports__['Ea']];break;case"vector":o=[__dcg_shared_module_exports__['Sa']];break;default:return i}}return t.numberInputInfo&&o.push(__dcg_shared_module_exports__['ua']),o.some(i=>__dcg_shared_module_exports__['sa'](e,i))}getAllValidNextInputTypes(){return __dcg_shared_module_exports__['nb'].filter(e=>this.isValidNextInputType(e))}getHint(){let e=this._getFirstMissingInput();return e?e.hint!==void 0?this.s(e.hint):this.s("graphing-calculator-text-geometry-select-hint",{type:e.type}):""}getSpecIdToLockIn(e,t){let o=e.inputs[t];if(o)return o.id}tryCommitResults(){if(this.model.attemptLockToolInputIn(this.getSpec()),this._isReadyToCommit()){let e=this.model.getUncommittedObjects();for(let o in e)e[o].type==="expression-edit-preview-latex"&&delete e[o];let t={...this.model.getNonObjectsState().ui.currentTool.idMap};return this.model.commitObjects(),this.model.deselectAllObjects(),this.model.cancelToolplay(),{committed:e,toolIdToLatex:t}}return{committed:void 0}}tentativelyAddInput({target:e,pointInfo:t},o){var n,a;let i;if(e)if(e.polygonEdgeInfo){let s=this.model.createToolInputDependency({type:"polygon-segment",parents:[(n=e.polygonEdgeInfo)==null?void 0:n.polygonDef.referenceLatex],edgeNumber:((a=e.polygonEdgeInfo)==null?void 0:a.edgeNumber)||0,polygonColor:this.getPolygonEdgeColor(e)},this.getSpec(),0);this.model.setObjectHovered({tokenId:s,listIndex:void 0}),i=s}else i=this.getExpandedReferenceForDef(e,o),this.model.setObjectHovered({calcId:e.calcId,listIndex:this.getListIndexForHover(e,o)});else t&&(i=t.reference,t!=null&&t.def&&!t.createdNew&&!t.previewOnly&&this.model.setObjectHovered({calcId:t.def.calcId,listIndex:this.getListIndexForHover(t.def,o)}));i&&this.model.tentativelyMatchToolInput(this.getSpec(),i)}onFocus(e){this.clearTentativeOutputs(),e&&this.tentativelyAddInput({target:e},!1),this.createOutput()}onMove(e){this.clearTentativeOutputs();let t=this.canNextInputBePoint(),o=this.getNonPointInputType(),i=!1;if(o){let n=this.model.getObjectDefUnderMouse(e.pt,e.tolerance,this.model.getCurrentTool());n&&this.model.objectIsInstanceOf(n,o)&&(this.tentativelyAddInput({target:n},e.shift),i=!0)}if(!i&&t){let n=this._getOrCreatePoint(e.pt,e.shift,e.tolerance);i=!n.previewOnly,this.isDegenerateInput(n.reference)?n.def&&this.model.setObjectHovered({calcId:n.def.calcId,listIndex:this.getListIndexForHover(n.def,e.shift)}):this.tentativelyAddInput({pointInfo:n},e.shift)}return this.createOutput(),i}isDegenerateInput(e){return!!this.model.getNonObjectsState().ui.currentTool.lockedIds[e]}getNumberInputLatex(){let e=this.getSpec(),{inputIndex:t,idMap:o}=this.model.getNonObjectsState().ui.currentTool,i=e.inputs[t];return i!=null&&i.numberInputInfo&&o[`${i.id}-number`]||""}onNumberInput(e){this.clearTentativeOutputs();let t=this.getSpec();this.model.storeNumberInputLatex(t,e),this.createOutput()}createPointDefinition(e,t){let o=e.parentDefs,i;switch(e.type){case"point-reference":{i={type:"point-reference",parents:[this.getExpandedReferenceForDef(o[0],t)]};break}default:{let n=o.map(a=>this.getExpandedReferenceForDef(a,t));i={...e,parents:n}}}return i}shouldUseJitEdges(){return!0}shouldHighlightRelevantObjects(){return!0}getPolygonEdgeColor(e){var n;let{ui:t}=this.model.getNonObjectsState(),o=e.polygonEdgeInfo?this.model.controller.getItemModel(e.polygonEdgeInfo.polygonDef.calcId):void 0;if((o==null?void 0:o.type)!=="expression")return t.colors.line;let i=U0(o)&&z0(o);return e.listIndex!==void 0&&Array.isArray(i)?(n=i[e.listIndex])!=null?n:t.colors.line:typeof i=="string"?i:o.color}};function kI(r,e){if(typeof e=="object")return e.valueTypes.some(t=>__dcg_shared_module_exports__['sa'](r,t));switch(e){case"point":return r===__dcg_shared_module_exports__['va'];case"straight":return r===__dcg_shared_module_exports__['Ia']||r===__dcg_shared_module_exports__['Ka']||r===__dcg_shared_module_exports__['Ea']||r===__dcg_shared_module_exports__['Sa'];case"angle":return r===__dcg_shared_module_exports__['Ma']||r===__dcg_shared_module_exports__['Oa'];case"arc":return r===__dcg_shared_module_exports__['Ha'];case"circle":return r===__dcg_shared_module_exports__['Ga'];case"polygon":return r===__dcg_shared_module_exports__['Da'];case"segment":return r===__dcg_shared_module_exports__['Ea'];case"vector":return r===__dcg_shared_module_exports__['Sa'];default:return e}}var II=class r{constructor(e,t){this.value=e;this.valueType=t}static point(e){return new r(e,__dcg_shared_module_exports__['va'])}static polygonSegment(e){return new r(e,__dcg_shared_module_exports__['Ea'])}},gr=class extends Rs{constructor(t,o){super(t);this.definition=o;this.s=t.s,this.displayNameKey=o.displayNameKey,this.toolType=o.toolType,this.toolName=o.name,this.icon=o.icon,this.workflows=o.workflows.map(i=>{let n=i.input.broadcast?__dcg_shared_module_exports__['Bb'](i.input.types,{geometry:!0}):__dcg_shared_module_exports__['Ab'](i.input.types,{geometry:!0});return{...i,signature:n}})}getWorkflows(){return this.workflows}getMatchingWorkflow(t){let o=t.map(s=>s.valueType),i=this.workflows.filter(s=>s.signature.matches(o));if(i.length===0)return;let n=i.find(s=>o.length>=s.signature.minArity),a=n!=null&&n.canCommit?n.canCommit(t):!!n;return{firstMatch:n!=null?n:i[0],canCommit:a,allMatches:i,inputs:t,argTypes:o}}getInputAtIndex(t){let{idMap:o}=this.model.getNonObjectsState().ui.currentTool,i=o[`${t}`];if(i)return this.getInputById(i)}getInputById(t){let i=this.model.getUncommittedObjects()[t];if(i&&_ce(i))return II.point(i);if(i&&i.type==="polygon-segment")return II.polygonSegment(i);let n=this.model.findDefsForInputId(t)[0];return n==null?void 0:n.typedRuntimeValue}getMatchingWorkflowForCurrentInputs(t=1/0){let{inputIndex:o}=this.model.getNonObjectsState().ui.currentTool,i=[];for(let n=0;n<=Math.min(o,t);n++){let a=this.getInputAtIndex(n);if(a===void 0)break;i.push(a)}return this.getMatchingWorkflow(i)}canNextInputBePoint(){let{inputIndex:t}=this.model.getNonObjectsState().ui.currentTool,o=this.getMatchingWorkflowForCurrentInputs(t-1);return!!(o!=null&&o.allMatches.some(i=>{let n=i.signature.argTypeAtIndex(t);return n===void 0?!1:__dcg_shared_module_exports__['Cb'](__dcg_shared_module_exports__['va'],n)}))}isDegenerateInput(t){if(this.definition.isDegenerateInput){let o=this.getMatchingWorkflowForCurrentInputs(),i=this.getInputById(t);return i?this.definition.isDegenerateInput({previousInputs:(o==null?void 0:o.inputs)||[],proposedInput:i}):!1}return super.isDegenerateInput(t)}getSpec({isCommitting:t}={isCommitting:!1}){var l,c;let o=this.getMatchingWorkflowForCurrentInputs();if(!o)return{inputs:[],outputs:[]};let{inputIndex:i}=this.model.getNonObjectsState().ui.currentTool,n=o.firstMatch,a=[],s=(l=n.signature.maxArity)!=null?l:i+1;for(let p=0;p<s;p++){let h=n.signature.argTypeAtIndex(p);if(!h)throw new Error(`Expected arg type for arg ${p}`);if(d7(h)){let g=[];if(p===i){let m=this.getMatchingWorkflowForCurrentInputs(p-1);for(let b of(c=m==null?void 0:m.allMatches)!=null?c:[]){let x=b.signature.argTypeAtIndex(p);x&&!d7(x)&&g.push(...typeof x=="number"?[x]:x.getTypes())}}g.length>0?a.push({id:`${p}`,type:"union",hint:EI(n,p),valueTypes:[...g,__dcg_shared_module_exports__['va']]}):a.push({id:`${p}`,type:"point",hint:EI(n,p)})}else a.push({id:`${p}`,type:"union",hint:EI(n,p),valueTypes:typeof h=="number"?[h]:h.getTypes().slice()})}return{inputs:a,outputs:dR(n,o.inputs,t)}}tryCommitResults(){var t;if(this.model.attemptLockToolInputIn(this.getSpec()),(t=this.getMatchingWorkflowForCurrentInputs())!=null&&t.canCommit){this.clearTentativeOutputs(),this.model.createCustomToolOutput(this.getSpec({isCommitting:!0}));let o=this.model.getUncommittedObjects();for(let n in o)o[n].type==="expression-edit-preview-latex"&&delete o[n];let i={...this.model.getNonObjectsState().ui.currentTool.idMap};return this.model.commitObjects(),this.model.deselectAllObjects(),this.model.cancelToolplay(),{committed:o,toolIdToLatex:i}}return{committed:void 0}}getExpressionEditHint(t){var i;let o=(i=this.getMatchingWorkflowForCurrentInputs())==null?void 0:i.firstMatch;return o?this.s(EI(o,t)):""}shouldReferenceSpecificItemInList(t,o){var i,n;if(o){let{inputIndex:a}=this.model.getNonObjectsState().ui.currentTool;return!((n=(i=this.getMatchingWorkflowForCurrentInputs())==null?void 0:i.allMatches)!=null?n:[]).some(c=>{let p=c.signature.argTypeAtIndex(a);return p===void 0?!1:typeof p=="number"?__dcg_shared_module_exports__['qb'](p):p.getTypes().some(__dcg_shared_module_exports__['qb'])})}else return!0}};function dR(r,e,t){let o;return Array.isArray(r.output)?o=r.output:o=r.output({inputs:e,isCommitting:t}),o.map((i,n)=>({...i,id:`result-${n}`,hidden:!1,parents:i.parents.map(a=>({type:"reference-input",id:`${a}`}))}))}function d7(r){return typeof r=="number"?r===__dcg_shared_module_exports__['va']:r.getTypes().every(e=>__dcg_shared_module_exports__['wb'](e,__dcg_shared_module_exports__['va']))}function EI(r,e){return Array.isArray(r.input.hints)?r.input.hints[e]:r.input.hints(e)}function _ce(r){switch(r.type){case"point":case"intersection":case"glider":case"point-reference":case"midpoint":case"vector-endpoint":return!0;default:return r.type,!1}}ce();ie();__dcg_shared_module_exports__['H']();var p7=__dcg_shared_module_exports__['e'](se());Vt();var Mce='a, input, button:not([disabled]), textarea, select [role="textbox"], [tabIndex="0"], [role="option"], [role="button"], [role="link"], summary',CI=class{constructor({closeMenu:e,focusIcon:t,getIconSelector:o,getContainerEl:i,isIconFocused:n}){this.globalKeyDownListener=e=>{let t=Pe(e);if(t===ri){e.preventDefault(),e.stopPropagation(),this.focusIcon(),this.closeMenu();return}if(t==="Tab"&&!e.altKey&&!e.ctrlKey&&!e.metaKey){if(this.isIconFocused()){e.shiftKey?this.focusLastOption():this.focusFirstOption(),e.preventDefault(),e.stopPropagation();return}if(this.isLastOptionViewFocused()&&!e.shiftKey){this.focusIcon(),e.preventDefault(),e.stopPropagation();return}if(this.isFirstOptionViewFocused()&&e.shiftKey){this.focusIcon(),e.preventDefault(),e.stopPropagation();return}}};this.tapListener=e=>{let t=this.getContainerEl();if(!t)return;let{target:o}=e,i=this.getIconSelector();i&&o.closest(i)||t.contains(o)||Array.from(document.querySelectorAll(".dcg-keypad,.dcg-show-keypad-container")).some(a=>a.contains(o))||this.closeMenu()};this.closeMenu=e,this.getContainerEl=i,this.getIconSelector=o,this.isIconFocused=n,this.focusIcon=t}isFirstOptionViewFocused(){let{first:e}=this.getDOMTabStops();return e!==void 0&&e.matches(":focus")}focusFirstOption(){let{first:e}=this.getDOMTabStops();e!==void 0&&e.focus()}focusLastOption(){let{last:e}=this.getDOMTabStops();e!==void 0&&e.focus()}isLastOptionViewFocused(){let{last:e}=this.getDOMTabStops();return e!==void 0&&e.matches(":focus")}getDOMTabStops(){let e=this.getContainerEl();if(e===void 0)return{};let t=Array.from(e.querySelectorAll(Mce)).filter(o=>o.getAttribute("tabIndex")!=="-1");return{first:t.find(o=>kd(o)),last:[...t.reverse()].find(o=>kd(o))}}};var An=class extends p7.View{init(){this.controller=this.props.controller()}template(){return d("div",{class:u("dcg-options-menu-container"),didMount:this.bindFn(this.didMountView),didUnmount:this.bindFn(this.didUnmountView),children:this.props.children})}didMount(){this.props.openAriaAlert&&Te(this.props.openAriaAlert())}willUnmount(){this.props.closeAriaAlert&&Te(this.props.closeAriaAlert())}didMountView(e){this.focusHelper=new CI({isIconFocused:()=>this.isIconModelFocused(),focusIcon:()=>this.focusIcon(),getContainerEl:()=>this.openView,closeMenu:()=>this.hideOptions(),getIconSelector:()=>{var t;return`[dcg-open-menu-guid="${(t=this.controller.getOpenItemMenu())==null?void 0:t.guid}"]`}}),this.guid=__dcg_shared_module_exports__['E']("dcg-dropdown-menu"),this.openView=e,this.positionMenu(),this.moveFocusIfAppropriate(),this.attachKeyDownListeners(),this.attachTapListener()}isIconModelFocused(){let e=this.controller.getFocusLocation();return __dcg_shared_module_exports__['s'](e,this.props.menuButtonFocusLocation())}attachKeyDownListeners(){this.props.shouldHandleTabAndEscape()&&document.addEventListener("keydown",this.focusHelper.globalKeyDownListener)}attachTapListener(){re(document.body).on(`dcg-tapstart.${this.guid}`,this.focusHelper.tapListener)}didUnmountView(){document.removeEventListener("keydown",this.focusHelper.globalKeyDownListener),re(document.body).off(`.${this.guid}`),this.openView=void 0}moveFocusIfAppropriate(){this.shouldMoveFocusToFirstOption()?this.focusHelper.focusFirstOption():this.shouldMoveFocusToLastOption()&&this.focusHelper.focusLastOption()}hideOptions(){this.controller.dispatch({type:"close-item-settings-menu"})}getRootEl(){return this.controller.findEl(this.props.rootElSelector())}positionMenu(){var a;let e=this.controller.getOpenMenuIcon();if(!e||!this.openView)return;let t=this.getRootEl();if(!t)return;let o=t.getBoundingClientRect(),i=e.getBoundingClientRect(),n=i.width;if(this.props.menuType()==="geo-tool-dropdown"||this.props.menuType()==="multi-select-construct"||this.props.menuType()==="multi-select-style"||this.props.menuType()==="multi-select-label"||this.props.menuType()==="multi-select-more"){Si(this.openView,{display:"block"});let s=(a=this.openView.querySelector(".dcg-options-menu"))==null?void 0:a.getBoundingClientRect();if(!s)return;let l=i.left-o.left,c=o.right-(i.left+n);l+n/2>=s.width/2&&c+n/2>=s.width/2?Si(this.openView,{top:`${i.top-o.top}px`,left:`${l+n/2-s.width/2}px`}):l<c?Si(this.openView,{top:`${i.top-o.top}px`,left:"0px"}):Si(this.openView,{top:`${i.top-o.top}px`,right:`${s.width}px`})}else Si(this.openView,{top:`${i.top-o.top}px`,left:`${i.left-o.left}px`,display:"block"})}focusIcon(){this.controller.focusOpenMenuIcon()}shouldMoveFocusToFirstOption(){if(this.props.focusOnOpen)return this.props.focusOnOpen()==="first";if(this.openView&&this.openView.matches(":focus-within"))return!1;let e=this.controller.getOpenItemMenu();return(e==null?void 0:e.type)===this.props.menuType()&&!!(e!=null&&e.focusFirstOption)}shouldMoveFocusToLastOption(){return this.props.focusOnOpen?this.props.focusOnOpen()==="last":!1}};ce();ie();var u7=__dcg_shared_module_exports__['e'](se()),_I=class extends u7.View{onSpanMount(e){e.insertAdjacentHTML("beforeend",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><style>.cls-1{fill:#7c69b3}.cls-3{fill:#719972}</style></defs><g id="Layer_1"><path d="M35.3 45.6ZM7.2 97.3z" class="cls-3"/><path fill="#fff" d="M7.2 97.3"/><path d="M47.7 39.8c2.5-2.9 3.7-6.3 3.7-10.3s-1-6.6-3-9.3c-2-2.7-4.6-4.6-7.7-5.7V2.7H30v11.8c-3.1 1.1-5.7 3-7.7 5.7s-3 5.8-3 9.3 1.3 7.6 3.9 10.5L4.7 89.4l2.5 7.9 8.2-5.1 17.1-46.9c.9.2 1.9.2 2.8.2 1.1 0 2.1 0 3.1-.3l16.8 47.1 8.2 4.3 1.7-8.2-17.5-48.7Zm-16.2-6.5c-1-1-1.5-2.3-1.5-3.8s.5-2.8 1.5-3.8 2.3-1.5 3.8-1.5 2.8.5 3.8 1.5 1.5 2.3 1.5 3.8-.5 2.8-1.5 3.8-2.3 1.5-3.8 1.5-2.8-.5-3.8-1.5Z" class="cls-3"/><path d="m49.8 94.3-9.9-27.8-8.7 15.6c-.6 1.1-.2 2.5.8 3.2l17.6 10.5c.4.2.8.3 1.2.3-.4-.5-.8-1.1-1-1.8ZM94.1 16 76.5 5.5c-1.1-.6-2.5-.3-3.1.8L54.2 40.8l11.3 31.3 29.5-53c.6-1.1.2-2.5-.8-3.2Z" class="cls-1"/></g></svg>')}template(){return d("span",{"aria-hidden":u("true"),class:u("dcg-construct-button-icon"),onMount:this.bindFn(this.onSpanMount)})}};ce();ie();var Qx=__dcg_shared_module_exports__['e'](se());ie();var m7=__dcg_shared_module_exports__['e'](se());function g7(r,e,t){r.save();for(let o of t)switch(o.type){case"point":{let i;!o.color||o.color==="dark"?i=hk({isPoint:!0,color:e.point,uncommitted:!1,featured:!1,hidden:!1,hovered:!1,projectorMode:!1}):o.color==="light"?i=__dcg_shared_module_exports__['Fd'](e.point,.7):i=o.color;let n;switch(o.size){case"small":n=5;break;case"large":n=10;break;case"medium":default:n=5;break}o.hollow?(r.lineWidth=2,r.strokeStyle=i,r.beginPath(),r.arc(o.x,o.y,n-1,0,2*Math.PI),r.stroke()):(r.fillStyle=i,r.beginPath(),r.arc(o.x,o.y,n,0,2*Math.PI),r.fill())}break;case"circle":{let i;!o.color||o.color==="dark"?i=gx({isPoint:!1,color:e.circle,uncommitted:!1,featured:!1,hidden:!1,hovered:!1,projectorMode:!1}):o.color==="light"?i=__dcg_shared_module_exports__['Fd'](e.circle,.7):typeof o.color=="function"?i=o.color(e):i=o.color;let n;switch(o.lineWidth){case"small":n=2;break;case"large":n=7;break;case"medium":case void 0:n=4;break;default:n=o.lineWidth;break}r.lineWidth=n,r.strokeStyle=i,r.beginPath(),r.arc(o.x,o.y,o.radius,0,2*Math.PI),r.stroke()}break;case"arc":{let i;!o.color||o.color==="dark"?i=gx({isPoint:!1,color:e.circle,uncommitted:!1,featured:!1,hidden:!1,hovered:!1,projectorMode:!1}):o.color==="light"?i=__dcg_shared_module_exports__['Fd'](e.circle,.7):i=o.color;let n;switch(o.lineWidth){case"small":n=2;break;case"large":n=7;break;case"medium":default:n=4;break}r.lineWidth=n,r.strokeStyle=i,r.beginPath(),r.arc(o.x,o.y,o.radius,o.startAngle,o.endAngle),r.stroke()}break;case"stroked-path":{let i;!o.color||o.color==="dark"?i=gx({isPoint:!1,color:e.line,uncommitted:!1,featured:!1,hidden:!1,hovered:!1,projectorMode:!1}):o.color==="light"?i=__dcg_shared_module_exports__['Fd'](e.line,.7):typeof o.color=="function"?i=o.color(e):i=o.color;let n=o.path,a;switch(o.lineWidth){case"small":a=1;break;case"large":a=5;break;case"medium":default:a=3;break}r.lineCap="round",r.lineJoin="round",r.strokeStyle=i,r.lineWidth=a,r.beginPath(),r.moveTo(n[0],n[1]);for(let s=2;s<n.length;s+=2)r.lineTo(n[s],n[s+1]);if(o.arrow){let s=[],l=n.length-1;Lce(s,n[l-3],n[l-2],n[l-1],n[l],a/2+9.5);for(let c=0;c<s.length;c+=2)r.lineTo(s[c],s[c+1])}r.stroke()}break;case"filled-polygon":{let i;o.color?i=o.color:i=hk({isPoint:!1,color:e.polygon,uncommitted:!1,featured:!1,hidden:!1,hovered:!1,projectorMode:!1,isTransparentObject:!0});let n=o.path;r.fillStyle=i,r.beginPath(),r.moveTo(n[0],n[1]);for(let a=2;a<n.length;a+=2)r.lineTo(n[a],n[a+1]);r.fill()}break;case"angle":{let i=gx({isPoint:!1,color:e.angle,uncommitted:!1,featured:!1,hidden:!1,hovered:!1,projectorMode:!1,isTransparentObject:!0}),n=hk({isPoint:!1,color:e.angle,uncommitted:!1,featured:!1,hidden:!1,hovered:!1,projectorMode:!1,isTransparentObject:!0});Ace(r,{type:"angle-indicator",lineWidth:4,strokeStyle:i,fillStyle:n,isRightAngle:!1,x:o.x,y:o.y,isDirected:o.isDirected,radius:o.radius,startAngle:o.startAngle,deltaAngle:o.deltaAngle})}break;case"ellipse":r.lineWidth=o.lineWidth,r.strokeStyle=o.color,r.beginPath(),r.ellipse(o.x,o.y,o.rx,o.ry,0,0,2*Math.PI),r.stroke();break;default:return o}r.restore()}function Ace(r,e){r.beginPath(),h7(r,e),r.lineTo(e.x,e.y),r.lineTo(e.x+e.radius*Math.cos(e.startAngle),e.y+e.radius*Math.sin(e.startAngle)),e.isDirected||(r.fillStyle=e.fillStyle,r.fill()),r.strokeStyle=e.strokeStyle,r.lineWidth=e.lineWidth,r.beginPath(),h7(r,e),r.stroke()}function h7(r,e){let t=e.startAngle+e.deltaAngle;if(e.isRightAngle){let o=e.radius*Math.cos(e.startAngle),i=e.radius*Math.cos(t),n=e.radius*Math.sin(e.startAngle),a=e.radius*Math.sin(t);r.moveTo(e.x+o,e.y+n),r.lineTo(e.x+o+i,e.y+n+a),r.lineTo(e.x+i,e.y+a)}else r.arc(e.x,e.y,e.radius,e.startAngle,t)}function Lce(r,e,t,o,i,n=12){let a=Math.atan2(i-t,o-e),s=o-n*Math.cos(a-Math.PI/9),l=i-n*Math.sin(a-Math.PI/9),c=o-n*Math.cos(a+Math.PI/9),p=i-n*Math.sin(a+Math.PI/9),h=o-(n-2)*Math.cos(a-Math.PI/18),g=i-(n-2)*Math.sin(a-Math.PI/18),m=o-(n-2)*Math.cos(a+Math.PI/18),b=i-(n-2)*Math.sin(a+Math.PI/18);r.push(s,l,c,p,o,i,h,g,m,b,o,i)}var Zu=class extends m7.View{template(){return d("canvas",{didMount:this.bindFn(this.didMountCanvas),width:()=>this.props.width(),height:()=>this.props.height(),style:()=>({width:this.props.width()/2+"px",height:this.props.height()/2+"px"})})}didMountCanvas(e){this.canvas=e,this.redraw()}didUpdate(){this.redraw()}redraw(){let e=this.props.instructions()||[],t=this.props.model().getNonObjectsState().ui.colors;if(__dcg_shared_module_exports__['s'](e,this.lastInstructions)&&__dcg_shared_module_exports__['s'](t,this.lastColors))return;this.lastInstructions=e,this.lastColors=t;let o=this.canvas.getContext("2d");o.clearRect(0,0,o.canvas.width,o.canvas.height),g7(o,t,e)}};ce();ie();var MI=__dcg_shared_module_exports__['e'](se());var{For:f7,SwitchUnion:Pce}=MI.Components,Tf=class extends MI.View{init(){this.controller=this.props.controller(),this.geoModel=this.controller.getGeoModel()}template(){return _("div",{class:()=>({"dcg-options-menu":!0,"dcg-select-tools-dropdown":!0,"dcg-shift-menu-left":this.props.items()[0][0]==="angle"||this.props.items()[0][0]==="segment"}),"aria-label":this.props.ariaLabel,onKeyDown:this.bindFn(this.handleKeyPress),"dcg-geo-tool-group":this.bindFn(this.props.group),children:[d("div",{class:u("dcg-options-menu-section-container"),role:u("menu"),children:d(f7,{each:()=>this.props.items(),children:e=>d("div",{class:()=>({"dcg-options-menu-section":!0}),children:d(f7.Simple,{each:e,children:t=>_("button",{role:u("menuitemradio"),tabIndex:()=>t===e()[0]&&this.sectionKey(e())===this.sectionKey(this.props.items()[0])?0:-1,"aria-disabled":()=>!this.isToolEnabled(t),"aria-description":()=>this.isToolEnabled(t)?void 0:this.controller.s("graphing-calculator-narration-geometry-tool-disabled",{tool:this.geoModel.getDisplayNameForTool(t)}),"aria-checked":()=>this.controller.getActiveTool()===t,onTap:o=>{this.isToolEnabled(t)&&this.props.onChooseTool({tool:t,fromKeyboard:o.device==="keyboard"})},"dcg-geo-tool":this.const(t),class:()=>({"dcg-dropdown-tool":!0,"dcg-unstyled-button":!0,"dcg-transformation-tool":__dcg_shared_module_exports__['Mc'](t),"dcg-selected-tool":this.controller.getActiveTool()===t,"dcg-disabled":!this.isToolEnabled(t),"dcg-will-be-hidden-or-disabled":this.controller.toolWillBeHiddenOrDisabled(t)}),manageFocus:this.const(_e({controller:this.controller,location:{type:"geo-basic-tool-menu-item",tool:t}})),children:[Pce(()=>this.getIconInfo(t),"type",{css:o=>d("i",{class:()=>o().className}),canvas:o=>d(Zu,{model:()=>this.geoModel,width:this.const(100),height:this.const(100),instructions:()=>o().instructions})}),d("span",{children:()=>this.geoModel.getDisplayNameForTool(t)})]})})})},this.sectionKey)}),this.props.children]})}sectionKey(e){return e.join("-")}getIconInfo(e){switch(e){case"dilate":return{type:"css",className:"dcg-icon-dilation"};case"reflect":return{type:"css",className:"dcg-icon-reflection"};case"rotate":return{type:"css",className:"dcg-icon-rotation"};case"translate":return{type:"css",className:"dcg-icon-vector"};default:return{type:"canvas",instructions:this.geoModel.getIconInstructionsForTool(e)}}}isToolEnabled(e){return this.controller.isGeoToolEnabled(e)&&this.geoModel.isToolActuallyUsable(e)}handleKeyPress(e){let t=Pe(e);if(t!=="Up"&&t!=="Down"&&t!=="Esc")return;let o=__dcg_shared_module_exports__['k'](this.props.items()),i=this.controller.getFocusLocation();if(t==="Esc"){(i==null?void 0:i.type)==="geo-basic-tool-menu-item"&&this.focusMenuIcon(),this.controller.dispatch({type:"close-item-settings-menu"}),e.stopPropagation(),e.preventDefault();return}if((i==null?void 0:i.type)!=="geo-basic-tool-menu-item")return;let n=t==="Down"?1:-1,s=(o.indexOf(i.tool)+n)%o.length;s<0&&(s=o.length+s),s>=0&&(this.controller.dispatch({type:"set-focus-location",location:{type:"geo-basic-tool-menu-item",tool:o[s]}}),e.preventDefault(),e.stopPropagation())}focusMenuIcon(){let e=this.props.group();if(!e)return;if(e==="construct-from-selection")return this.controller.dispatch({type:"set-focus-location",location:{type:"multi-select-construct-icon"}});let t=this.controller.getGeoToolbarItemsForGroup(e),o=t==null?void 0:t.current;if(o)return this.controller.dispatch({type:"set-focus-location",location:{type:"geo-basic-tool",tool:o}})}};var{If:b7,For:Dce,Switch:Oce}=Qx.Components,Qu=class extends Qx.View{template(){return d("span",{class:u("dcg-tool-dropdown"),role:u("button"),tabIndex:u("-1"),"aria-label":this.props.menuName,"aria-expanded":this.props.ariaExpanded,onTap:this.bindFn(this.handleOnTap),children:d("span",{class:u("dcg-dropdown-icon"),children:d("i",{class:u("dcg-icon-caret-down"),"aria-hidden":u("true")})})})}handleOnTap(e){Dt(e),this.props.openDropDown()}},AI=class extends Qx.View{init(){this.controller=this.props.controller(),this.geoModel=this.controller.getGeoModel()}getGroups(){return this.controller.getGeoToolbarGroupKeys()}hasDropdown(e){return!!this.getGroup(e).dropdown}template(){return _("div",{role:u("toolbar"),"aria-label":()=>this.controller.s("graphing-calculator-label-geometry-tools"),class:u("dcg-geo-basic-tools dcg-animate-in-after-initial-load"),onKeyDown:e=>this.handleToolbarKeydown(e),children:[d("div",{class:u("dcg-geo-basic-tools-row"),children:d(Dce.Simple,{each:()=>this.getGroups(),children:e=>_("div",{class:u("dcg-tool-button-container"),children:[_("button",{class:()=>({"dcg-split-btn":this.hasDropdown(e),"dcg-selected":this.isGroupSelected(this.getGroup(e)),"dcg-disabled":!this.isGroupEnabled(this.getGroup(e)),"dcg-menu-open":this.isGroupDropdownOpen(this.getGroup(e)),"dcg-will-be-hidden-or-disabled":this.controller.toolWillBeHiddenOrDisabled(this.getGroup(e).current)}),"dcg-geo-tool":()=>this.getGroup(e).current,"dcg-geo-tool-group":()=>e,tabIndex:()=>this.isGroupSelected(this.getGroup(e))?0:-1,"aria-label":()=>this.geoModel.getDisplayNameForTool(this.getGroup(e).current),"aria-disabled":()=>!this.isGroupEnabled(this.getGroup(e)),"aria-haspopup":()=>this.hasDropdown(e),"aria-pressed":()=>this.isGroupSelected(this.getGroup(e)),onTap:t=>this.handleTap(t,this.getGroup(e)),onLongHold:()=>this.openMenuFromLongHold(this.getGroup(e)),"dcg-open-menu-guid":()=>this.getGuid(this.getGroup(e)),manageFocus:()=>_e({controller:this.controller,location:{type:"geo-basic-tool",tool:this.getGroup(e).current}}),"aria-controls":()=>this.getGuid(this.getGroup(e)),"aria-expanded":()=>this.isGroupDropdownOpen(this.getGroup(e)),children:[d("span",{class:()=>({"dcg-basic-tool-btn":!0,"dcg-icon":!0}),children:d(Zu,{model:()=>this.geoModel,width:this.const(96),height:this.const(96),instructions:()=>this.geoModel.getIconInstructionsForTool(this.getGroup(e).current)})}),d(b7,{predicate:()=>this.hasDropdown(e),children:()=>d(Qu,{menuName:()=>Ny(e),controller:this.props.controller,ariaExpanded:()=>this.isGroupDropdownOpen(this.getGroup(e)),openDropDown:()=>this.openDropdownMenu(this.getGroup(e))})})]}),d(b7,{predicate:()=>this.isGroupDropdownOpen(this.getGroup(e)),children:()=>d(An,{controller:this.props.controller,shouldHandleTabAndEscape:this.const(!1),menuType:this.const("geo-tool-dropdown"),menuButtonFocusLocation:this.const({type:"geo-basic-tool",tool:this.getGroup(e).current}),rootElSelector:this.const(".dcg-geo-basic-tools-row"),children:d(Tf,{controller:this.props.controller,group:()=>e,ariaLabel:()=>Ny(e),items:()=>this.getDropdownTools(e),onChooseTool:t=>{this.controller.dispatch({type:"select-geo-tool",tool:t.tool,focusGraphPaper:!!t.fromKeyboard})}})})})]})})}),d(Oce,{children:e=>{switch(e){case"hidden":return d("span",{});case"construct":case"pick-a-tool":return _("div",{class:()=>({"dcg-geo-getting-started-pointer":!0,"dcg-geo-getting-started-has-tool":this.controller.getGeometryGettingStartedMessageState()!=="pick-a-tool"}),children:[this.bindFn(this.getPointerMessage),d("span",{class:u("dcg-curved-icon-container"),children:d("i",{class:u("dcg-icon-curved-arrow")})})]})}}},()=>this.controller.getGeometryGettingStartedMessageState())]})}getDropdownTools(e){let t=this.controller.getOpenItemMenu();if(!t||t.type!=="geo-tool-dropdown"||t.group!==e)return[];if(t.group==="line"){let o=[],i=[];for(let n of t.tools)n==="segment"||n==="line"||n==="ray"||n==="vector"?o.push(n):i.push(n);return[o,i]}return[t.tools]}isGroupSelected(e){return this.selectedTool()===e.current}isGroupEnabled(e){return this.controller.isGeoToolEnabled(e.current)}getGroup(e){let t=this.controller.getGeoToolbarItemsForGroup(e);if(!t)throw new Error("Programing error: "+e+" not found");return t}getPointerMessage(){return this.controller.getGeometryGettingStartedMessageState()==="pick-a-tool"?this.controller.s("geometry-label-pick-tool-instruction"):this.controller.s("geometry-label-construct-instruction")}getFocusedOrActiveTool(){let e=this.controller.getAllVisibleGeoToolbarItems(),t=this.controller.getFocusLocation();if(!t)return;let o;return t.type==="geo-basic-tool"||t.type==="geo-basic-tool-menu-item"?o=t.tool:o=this.controller.getActiveTool(),e.find(i=>{var n,a;return i.current===o||i.dropdown&&((a=(n=i.dropdown)==null?void 0:n.indexOf)==null?void 0:a.call(n,o))>-1})}handleToolbarKeydown(e){var l,c,p,h;let t=Pe(e);if(!zn(t,"direction")&&!zn(t,"line")||(e.preventDefault(),e.stopPropagation(),!this.controller.getFocusLocation()))return;let i=this.controller.getAllVisibleGeoToolbarItems(),n=this.getFocusedOrActiveTool();if(!n)return;let a=i.findIndex(g=>g.group===n.group),s;if(t==="Home")s=(l=i[0])==null?void 0:l.current;else if(t==="End")s=(c=i[i.length-1])==null?void 0:c.current;else if(t==="Left"||t==="Right"){let g=t==="Left"?-1:1,m=Math.max(0,Math.min(i.length-1,a+g));s=(p=i[m])==null?void 0:p.current,((h=this.controller.getOpenItemMenu())==null?void 0:h.type)==="geo-tool-dropdown"&&this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"geo-tool-dropdown",guid:this.getGuid(n),tools:[],group:n.group}})}else(t==="Up"||t==="Down")&&this.openDropdownMenu(n);s&&this.controller.dispatch({type:"set-focus-location",location:{type:"geo-basic-tool",tool:s}})}selectedTool(){let e=this.controller.getActiveTool();return e==="expression-edit"?"selection":e}openDropdownMenu(e){e.dropdown&&(this.isGroupSelected(e)||this.controller.dispatch({type:"select-geo-tool",tool:e.current}),this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"geo-tool-dropdown",guid:this.getGuid(e),tools:e.dropdown,group:e.group,focusFirstOption:!1}}),this.controller.dispatch({type:"set-focus-location",location:{type:"geo-basic-tool-menu-item",tool:e.current}}))}getGuid(e){return e.dropdown?"geo-dropdown-"+e.dropdown[0]:""}openMenuFromLongHold(e){this.controller.dispatch({type:"select-geo-tool",tool:e.current}),this.openDropdownMenu(e)}handleTap(e,t){e.wasLongheld()||Or(e)||(e.shiftKey||this.isGroupSelected(this.getGroup(t.group))?this.openDropdownMenu(t):(this.controller.dispatch({type:"select-geo-tool",tool:t.current,focusGraphPaper:e.device==="keyboard"}),e.device!=="keyboard"&&this.controller.dispatch({type:"set-focus-location",location:{type:"geo-basic-tool",tool:t.current}})))}isGroupDropdownOpen(e){let t=this.controller.getOpenItemMenu();return(t==null?void 0:t.type)==="geo-tool-dropdown"&&t.group===e.group}};ce();ie();var DI=__dcg_shared_module_exports__['e'](se());ie();var ev=__dcg_shared_module_exports__['e'](se());rP();var{Switch:Rce,SwitchUnion:Fce}=ev.Components,Fs=class extends ev.View{template(){return Fce(()=>this.getLatexOrToken(),"type",{identifier:e=>d(Pl,{identifier:()=>e().identifier,insideMQ:()=>!1,controller:()=>this.props.controller(),insideGroup:()=>!1,putInTabOrder:()=>!1}),latex:e=>d(St,{config:()=>this.props.controller().getMathquillConfig({}),latex:()=>e().latex,tokenController:this.props.controller})})}getLatexOrToken(){let e=this.props.parent();return y7(e)}};function y7(r){switch(r.type){case"arbitrary-expression":return{type:"latex",latex:r.latex};case"list-access":case"polygon-edge":case"simple":return{type:"identifier",identifier:__dcg_shared_module_exports__['Lc'](r)};default:return{type:"latex",latex:"unknown"}}}var LI=class extends ev.View{init(){this.controller=this.props.controller()}template(){return d(Rce,{children:e=>{switch(e){case"translate":return this.getParents().length===1?d("div",{children:_(Eo,{i18n:this.const(this.controller),children:["Translate by"," ",Eo.subview("parent1",()=>d(Fs,{controller:this.props.controller,parent:()=>this.getParents()[0]}))]},this.const("graphing-calculator-label-geometry-translation-by-vector"))}):d("div",{children:_(Eo,{i18n:this.const(this.controller),children:["Translate from"," ",Eo.subview("parent1",()=>d(Fs,{controller:this.props.controller,parent:()=>this.getParents()[0]}))," ","to"," ",Eo.subview("parent2",()=>d(Fs,{controller:this.props.controller,parent:()=>this.getParents()[1]}))]},this.const("graphing-calculator-label-geometry-translation-by-two-points"))});case"reflect":return d("div",{children:_(Eo,{i18n:this.const(this.controller),children:["Reflect over"," ",Eo.subview("parent1",()=>d(Fs,{controller:this.props.controller,parent:()=>this.getParents()[0]}))]},this.const("graphing-calculator-label-geometry-reflection-over-point"))});case"dilate":return d("div",{children:Sg(()=>{let t=y7(this.getParents()[1]);return t.type==="identifier"?!0:!(t.latex.includes("\\frac")&&t.latex.includes("\\left|"))},{true:()=>_(Eo,{i18n:this.const(this.controller),children:["Dilate using"," ",Eo.subview("parent1",()=>d(Fs,{controller:this.props.controller,parent:()=>this.getParents()[0]}))," and scale factor ",Eo.subview("parent2",()=>d(Fs,{controller:this.props.controller,parent:()=>this.getParents()[1]}))]},this.const("graphing-calculator-label-geometry-dilation-by-point-and-scale-factor")),false:()=>_(Eo,{i18n:this.const(this.controller),children:["Dilate using"," ",Eo.subview("parent1",()=>d(Fs,{controller:this.props.controller,parent:()=>this.getParents()[0]}))]},this.const("graphing-calculator-label-geometry-dilation-by-point"))})});case"rotate":return d("div",{children:_(Eo,{i18n:this.const(this.controller),children:["Rotate around"," ",Eo.subview("parent1",()=>d(Fs,{controller:this.props.controller,parent:()=>this.getParents()[0]}))," by ",Eo.subview("parent2",()=>d(Fs,{controller:this.props.controller,parent:()=>Gce(this.getParents()[1],this.controller.getGraphSettings().degreeMode)}))]},this.const("graphing-calculator-label-geometry-rotation-around-point-by-angle"))});case void 0:return d("span",{})}}},this.bindFn(this.getTransformationType))}getParents(){let e=this.getGeometry();return!e||!e.call?[]:e&&e.call?e.call.parents:[]}getGeometry(){var e;return(e=this.props.model())==null?void 0:e.formula.geometry}getTransformationType(){var o;let e=this.getGeometry(),t=(o=e==null?void 0:e.call)==null?void 0:o.symbol;switch(t){case"translate":case"dilate":case"reflect":case"rotate":return t}}};function Gce(r,e){let t=e?"\xB0":"";if(r.type==="arbitrary-expression")return{...r,latex:r.latex+t};if(r.type==="simple"){let o=__dcg_shared_module_exports__['ia'](r.identifier);if(!/^\\token\{(\d+)\}$/.test(o))return{type:"arbitrary-expression",latex:o+t}}return r}var{For:Nce,If:Vce}=DI.Components,PI=class extends DI.View{init(){this.controller=this.props.controller()}template(){return d(Tf,{controller:this.props.controller,ariaLabel:()=>this.controller.s("graphing-calculator-narration-geometry-construct-menu"),group:()=>"construct-from-selection",items:()=>{var o,i;let e=[this.getTransformations()],t=(i=(o=this.props.constructFromSelectionInfo())==null?void 0:o.relevantTools)!=null?i:[];return t.length>0&&e.push(t),e},onChooseTool:e=>this.chooseTool(e),children:d(Vce,{predicate:()=>this.props.existingTransformations().length>0,children:()=>_("div",{class:u("dcg-options-menu-section dcg-existing-transformations-container"),children:[d("div",{class:u("dcg-transformation-header"),children:()=>this.controller.s("graphing-calculator-label-recent-transformations")}),d("div",{role:u("menu"),"aria-label":()=>this.controller.s("graphing-calculator-label-recent-transformations"),onKeyDown:this.bindFn(this.handleKeyPress),children:d(Nce,{each:()=>this.props.existingTransformations(),children:e=>d("div",{class:u("dcg-existing-transformation"),role:u("menuitemradio"),tabIndex:()=>e().id===this.props.existingTransformations()[0].id?0:-1,onTap:()=>this.applyTransformation(e()),onPointerOut:t=>this.onPointerOut(t,e()),onPointerOver:t=>this.onPointerOver(t,e()),willUnmount:()=>this.onImplicitMouseOut(e()),manageFocus:()=>_e({controller:this.controller,location:{type:"geo-construct-menu-existing-transformations",transformationId:e().id}}),children:d(LI,{controller:this.props.controller,model:e})})},e=>e.id)})]})})})}generateToolOutput(e){let t=this.props.constructFromSelectionInfo();if(!t)return;let{selected:o}=t;return this.controller.getGeoModel().generatePureToolOutput(e,o)}chooseTool(e){var o,i;let t=e.tool;if(!__dcg_shared_module_exports__['Mc'](t)){let n=this.generateToolOutput(t);if(n!=null&&n.canCommit)this.controller.dispatch({type:"close-item-settings-menu"}),this.controller.getGeoModel().resetToolMode(),this.controller.dispatch({type:"commit-geo-objects",shiftKey:!1,committed:n.outputs,clearToolAndSelection:!0,toolIdToLatex:{}});else{let a=this.controller.getSelectedItem();this.controller.dispatch({type:"select-geo-tool",tool:t,forceSingleUse:!0,focusGraphPaper:!!e.fromKeyboard});let s=this.controller.getGeoModel(),l=(i=(o=s.getTool(t)).getSpec)==null?void 0:i.call(o);if(!l||(a==null?void 0:a.type)!=="expression")return;s.tentativelyMatchToolInput(l,Zx(a)),s.attemptLockToolInputIn(l)}return}this.controller.dispatch({type:"select-geo-tool",tool:t,focusGraphPaper:!!e.fromKeyboard})}getTransformations(){return Sf.filter(e=>this.controller.isGeoToolVisible(e))}handleKeyPress(e){let t=Pe(e);if(t!=="Up"&&t!=="Down"&&t!=="Esc")return;let o=this.props.existingTransformations(),i=this.controller.getFocusLocation();if(t==="Esc"){if((i==null?void 0:i.type)==="geo-construct-menu-existing-transformations")return this.controller.dispatch({type:"set-focus-location",location:{type:"multi-select-construct-icon"}});this.controller.dispatch({type:"close-item-settings-menu"}),e.stopPropagation(),e.preventDefault();return}if((i==null?void 0:i.type)!=="geo-construct-menu-existing-transformations")return;let n=t==="Down"?1:-1,s=(o.findIndex(l=>l.id===i.transformationId)+n)%o.length;s<0&&(s=o.length+s),s>=0&&(this.controller.dispatch({type:"set-focus-location",location:{type:"geo-construct-menu-existing-transformations",transformationId:o[s].id}}),e.preventDefault(),e.stopPropagation())}onPointerOver(e,t){var i;if(e.pointerType!=="mouse")return;let o=(i=uo(t))==null?void 0:i.identifier;o&&(this.currentlyActiveTokenIdentifier=o,this.controller.dispatch({type:"set-active-token",identifier:this.currentlyActiveTokenIdentifier,style:"hovered"}))}onPointerOut(e,t){var i;if(e.pointerType!=="mouse")return;let o=(i=uo(t))==null?void 0:i.identifier;o&&this.currentlyActiveTokenIdentifier&&this.currentlyActiveTokenIdentifier===o&&(this.controller.dispatch({type:"unset-active-token",identifier:this.currentlyActiveTokenIdentifier,style:"hovered"}),this.currentlyActiveTokenIdentifier=void 0)}onImplicitMouseOut(e){var o;let t=(o=uo(e))==null?void 0:o.identifier;t&&this.currentlyActiveTokenIdentifier&&this.currentlyActiveTokenIdentifier===t&&this.controller.runAfterDispatch(()=>{let i=this.currentlyActiveTokenIdentifier;i&&(this.currentlyActiveTokenIdentifier=void 0,this.controller.dispatch({type:"unset-active-token",identifier:i,style:"hovered"}))})}applyTransformation(e){var o;if(!((o=e.formula.geometry)!=null&&o.identifier))return;let t=__dcg_shared_module_exports__['ia'](e.formula.geometry.identifier);this.controller.dispatch({type:"apply-transformation-to-selected",assignmentLatex:t})}};ce();ie();var RI=__dcg_shared_module_exports__['e'](se());var{If:Bce,IfElse:Uce,SwitchUnion:zce}=RI.Components,OI=class extends RI.View{init(){this.controller=this.props.controller(),this.updateSingleItemState()}willUpdate(){this.updateSingleItemState()}updateSingleItemState(){var o;let e=this.getSelectionLabelInfo();if(e.type==="multiple"){this.singleItemState=void 0;return}if(((o=this.singleItemState)==null?void 0:o.itemId)===e.model.id)return;let t;Tn(e.model)?t=e.model.label===""?"measurement":"text":t="text",this.singleItemState={itemId:e.model.id,mode:t}}sectionValues(){return this.props.sectionValues()}getSelectionLabelInfo(){var o,i;let t=this.sectionValues().singleLabelableExpressionModel;switch((i=(o=t==null?void 0:t.formula)==null?void 0:o.geometry)==null?void 0:i.valueType){case __dcg_shared_module_exports__['va']:return{type:"single",objectType:"point",model:t};case __dcg_shared_module_exports__['Ma']:case __dcg_shared_module_exports__['Oa']:return{type:"single",objectType:"angle",model:t};case __dcg_shared_module_exports__['Ea']:return{type:"single",objectType:"segment",model:t};default:return{type:"multiple",objectType:"point"}}}allowMeasurementLabels(e){let t=Ec(this.controller.getGeometryToolbarModel());switch(e){case"point":return!!this.controller.getGraphSettings().showXAxis;case"angle":return t.angleLabelControl;case"segment":return t.segmentLabelControl}}getLabelMode(){var t;return this.getSelectionLabelInfo().type==="multiple"?this.sectionValues().pointLabels:(t=this.singleItemState)==null?void 0:t.mode}getSegmentedLabels(){switch(this.getSelectionLabelInfo().objectType){case"point":return{text:"A,B,C",measurement:"(x,y)"};case"angle":return{text:"Text",measurement:"Measure"};case"segment":return{text:"Text",measurement:"Length"}}}getSegmentedControlConfig(){let e=()=>this.getSelectionLabelInfo().objectType==="point"&&this.allowMeasurementLabels("point")?"dcg-segmented-control-btn--point":"";return[{key:"text",label:()=>this.getSegmentedLabels().text,selected:()=>this.getLabelMode()==="text",onSelect:t=>{this.lastSelectionDevice=t,this.onSelectTextLabel()},class:e},{key:"measurements",label:()=>this.getSegmentedLabels().measurement,selected:()=>this.getLabelMode()==="measurement",onSelect:t=>{this.lastSelectionDevice=t,this.onSelectMeasurementLabel()},class:e}]}onSelectTextLabel(){var t;let e=this.getSelectionLabelInfo();if(e.type==="multiple"){this.controller.dispatch({type:"set-label-state-for-selected-points",state:this.getLabelMode()==="text"?"none":"auto"});return}if(!this.singleItemState)throw new Error("Expected singleItemState to be defined");this.getLabelMode()==="text"?(this.singleItemState.mode="none",this.controller.dispatch({type:"set-item-showlabel",id:e.model.id,showLabel:!1})):(this.singleItemState.mode="text",((t=e.model.formula.geometry)==null?void 0:t.valueType)===__dcg_shared_module_exports__['va']?this.controller.dispatch({type:"set-label-state-for-selected-points",state:"auto"}):this.controller.dispatch({type:"set-item-showlabel",id:e.model.id,showLabel:!1}))}onSelectMeasurementLabel(){let e=this.getSelectionLabelInfo();if(e.type==="multiple"){this.controller.dispatch({type:"set-label-state-for-selected-points",state:this.getLabelMode()==="measurement"?"none":"measurement"});return}if(!this.singleItemState)throw new Error("Expected singleItemState to be defined");this.getLabelMode()==="measurement"?(this.singleItemState.mode="none",this.controller.dispatch({type:"set-item-showlabel",id:e.model.id,showLabel:!1})):(this.singleItemState.mode="measurement",this.controller.dispatch({type:"set-item-showlabel",id:e.model.id,showLabel:!0}),this.controller.dispatch({type:"set-item-label",id:e.model.id,label:""}))}template(){return d("div",{class:()=>({"dcg-generic-options-menu":!0,"dcg-options-menu":!0,"dcg-multi-select-label-menu":!0}),role:u("region"),"aria-label":()=>this.controller.s("graphing-calculator-narration-label-menu"),children:_("div",{class:u("dcg-options-menu-section"),children:[zce(()=>this.getSelectionLabelInfo(),"type",{multiple:()=>d("div",{children:Uce(()=>this.allowMeasurementLabels("point"),{true:()=>_("div",{class:u("dcg-multi-select-menu_margin-top-section"),children:[()=>this.controller.s("graphing-calculator-button-geometry-label-points"),":"]}),false:()=>d(tt,{checked:()=>this.getLabelMode()==="text",onChange:()=>this.onSelectTextLabel(),children:()=>this.controller.s("graphing-calculator-button-geometry-label-points")})})}),single:e=>d("div",{class:u("dcg-multi-select-menu_margin-top-section"),children:d(qu,{controller:this.props.controller,model:()=>e().model,forceEnabled:this.const(!0),displayComputedValue:()=>{if(this.getLabelMode()!=="measurement")return;let t=this.controller.getGrapher2d(),o=t.getGraphSketch(e().model.id);return o&&o.labels.length===1?JD(o.labels[0],t.getProjection()).text:""},selectInputOnMount:()=>this.lastSelectionDevice!=="keyboard",suppressInput:()=>this.getLabelMode()==="none",manageInputFocus:this.const(_e({controller:this.controller,location:{type:"multi-select-label-menu-label-input"}}))})})}),d(Bce,{predicate:()=>{let e=this.getSelectionLabelInfo();return this.allowMeasurementLabels(e.objectType)},children:()=>d(hr,{ariaGroupLabel:()=>this.controller.s("graphing-calculator-narration-geometry-label-options"),staticConfig:this.bindFn(this.getSegmentedControlConfig)})})]})})}};ce();ie();var VI=__dcg_shared_module_exports__['e'](se());ce();ie();var GI=__dcg_shared_module_exports__['e'](se());var{Input:qce,If:pR}=GI.Components,FI=class extends GI.View{constructor(){super(...arguments),this.controller=this.props.controller(),this.newFolderTitle=""}init(){this.cacheFolderList()}willUpdate(){this.cacheFolderList()}template(){return d(pR,{predicate:()=>this.getMovableItems().length>0,children:()=>_("div",{class:u("dcg-move-to-expression-list"),children:[_("div",{class:u("dcg-move-to-expression-list-title"),role:()=>this.canMoveToExpressionList()?"button":void 0,tabIndex:()=>this.canMoveToExpressionList()?0:void 0,onTap:this.bindFn(this.moveToExpressionList),children:[d(pR,{predicate:()=>this.canMoveToExpressionList(),children:()=>d("i",{class:u("dcg-icon-insert"),"aria-hidden":u("true")})}),d("span",{children:this.bindFn(this.getMoveMessage)})]}),d(pR,{predicate:()=>!this.canMoveToExpressionList(),children:()=>_("div",{class:u("dcg-move-to-expression-list-flex"),children:[d(qce,{"aria-label":this.bindFn(this.getMoveMessage),value:()=>this.newFolderTitle,onInput:e=>{this.newFolderTitle=e,this.update()},placeholder:()=>this.controller.s("graphing-calculator-label-geometry-move-to-folder-placeholder"),didMount:e=>{e.onkeydown=function(t){let o=Pe(t);(o==="Backspace"||o==="Del")&&t.stopPropagation()}},onEnterPressed:this.bindFn(this.onEnterPressed)}),d("div",{class:()=>({"dcg-btn-purple":!0,"dcg-disabled":!this.newFolderTitle}),role:u("button"),tabIndex:()=>this.newFolderTitle?0:-1,onTap:this.bindFn(this.createNewFolder),children:()=>this.controller.s("graphing-calculator-button-move-to-expression-list-action")})]})})]})})}getMovableItems(){return this.controller.getAllSelectedItems().filter(t=>!this.controller.isItemReadonly(t.id))}canMoveToExpressionList(){var n,a;let e=this.getMovableItems(),[t]=e;if(!(e.length===1&&t.type!=="folder"&&t.folderId===__dcg_shared_module_exports__['je']))return!1;if(t.type!=="expression"||((a=(n=t.formula.geometry)==null?void 0:n.call)==null?void 0:a.symbol)!=="apply")return!0;let i=t.formula.geometry.call.parents[0];return i.type==="arbitrary-expression"?!0:this.controller.getItemsByIdentifier(__dcg_shared_module_exports__['Lc'](i)).every(s=>s.folderId!==__dcg_shared_module_exports__['je'])}getMoveMessage(){return`${this.controller.s("graphing-calculator-text-geometry-move-to-expression-list-message")}${this.canMoveToExpressionList()?"":":"}`}onEnterPressed(){let e=this.folderList.find(t=>t.title===this.newFolderTitle);e?this.chooseFolder(e.id):this.createNewFolder()}chooseFolder(e){this.controller.dispatch({type:"update-all-selected-items",update:{prop:"folderId",value:e}})}createNewFolder(){this.newFolderTitle&&this.controller.dispatch({type:"update-all-selected-items",update:{prop:"folderId",value:this.newFolderTitle,createFolder:!0}})}cacheFolderList(){this.folderList=this.controller.getAllItemModels().filter(e=>e.type==="folder"&&!this.controller.isGeoFolder(e))}moveToExpressionList(){this.canMoveToExpressionList()&&this.controller.dispatch({type:"move-selected-item-to-expression-list"})}};var{If:eh}=VI.Components,NI=class extends VI.View{constructor(){super(...arguments),this.controller=this.props.controller()}sectionValues(){return this.props.sectionValues()}template(){return d("div",{class:()=>({"dcg-generic-options-menu":!0,"dcg-options-menu":!0,"dcg-multi-select-options-menu":!0}),role:u("region"),"aria-label":()=>this.controller.s("graphing-calculator-narration-options-menu"),children:_("div",{class:u("dcg-options-menu-section"),children:[d(eh,{predicate:()=>this.hasSelectedAndEditableItems(),children:()=>_("button",{handleEvent:u("true"),class:u("dcg-unstyled-button dcg-delete-btn dcg-btn-purple"),onTap:this.bindFn(this.deleteSelected),children:[d("i",{class:u("dcg-icon-trashcan"),"aria-hidden":u("true")}),d("span",{children:()=>this.getDeleteItemString()})]})}),d(eh,{predicate:()=>this.sectionValues().draggableFreePoint!==void 0,children:()=>_(tr,{children:[d("div",{class:u("dcg-divider-line")}),d("div",{class:u("dcg-checkbox-section"),children:d(tt,{checked:()=>!!this.sectionValues().draggableFreePoint,onChange:this.bindFn(this.onDraggableFreePointChanged),children:()=>this.controller.s("graphing-calculator-button-draggable-points")})})]})}),d(eh,{predicate:()=>this.sectionValues().graphInteractionDisabled!==void 0&&this.props.controller().shouldShowAuthorFeatures(),children:()=>d("div",{class:u("dcg-checkbox-section dcg-disable-graph-interactions"),children:d(tt,{checked:()=>!!this.sectionValues().graphInteractionDisabled,onChange:()=>this.toggleGraphInteractionsDisabled(),children:()=>this.controller.s("graphing-calculator-label-disable-graph-interactions")})})}),d(eh,{predicate:()=>this.sectionValues().arrowMode!==void 0,children:()=>d("div",{children:()=>this.controller.s("graphing-calculator-text-geometry-arrow-mode",{mode:this.getArrowModeDisplayName()})})}),d(eh,{predicate:()=>this.controller.getGraphSettings().config.expressions,children:()=>_(tr,{children:[d("div",{class:u("dcg-divider-line")}),d(FI,{controller:this.props.controller})]})}),d(eh,{predicate:()=>this.getSelectedAndEditableItems().length===1,children:()=>{let e=this.getSelectedAndEditableItems()[0];return(e==null?void 0:e.type)!=="expression"?d("span",{}):d(eh,{predicate:()=>!Ti(e),children:()=>_(tr,{children:[d("div",{class:u("dcg-divider-line")}),d(dp,{controller:this.props.controller,model:this.const(e),focusLocation:this.const({type:"multi-select-options-menu-item",subtype:"screenreader-description"})})]})})}})]})})}getSelectedAndEditableItems(){return this.controller.getAllSelectedItems().filter(t=>!this.controller.isItemReadonly(t.id))}hasSelectedAndEditableItems(){return this.getSelectedAndEditableItems().length>0}toggleGraphInteractionsDisabled(){this.controller.dispatch({type:"update-all-selected-items",update:{prop:"disableGraphInteractions",value:!this.sectionValues().graphInteractionDisabled}})}onDraggableFreePointChanged(e){this.controller.dispatch({type:"update-all-selected-items",update:{prop:"dragMode",value:e?__dcg_shared_module_exports__['hd'].XY:__dcg_shared_module_exports__['hd'].NONE}})}getArrowModeDisplayName(){let e=this.sectionValues().arrowMode;if(!e)return"";switch(e){case __dcg_shared_module_exports__['Wd'].NONE:return this.controller.s("graphing-calculator-text-arrow-mode-none");case __dcg_shared_module_exports__['Wd'].DEFAULT:return this.controller.s("graphing-calculator-text-arrow-mode-default");case __dcg_shared_module_exports__['Wd'].POSITIVE:return this.controller.s("graphing-calculator-text-arrow-mode-positive");case __dcg_shared_module_exports__['Wd'].BOTH:return this.controller.s("graphing-calculator-text-arrow-mode-both")}}getSelectedCount(){return this.controller.getAllSelectedItems().length}getDeleteItemString(){let e=this.getSelectedCount(),t=this.getSelectedAndEditableItems().length;return e-t>0?this.controller.s("graphing-calculator-text-geometry-delete-selected-unlocked-objects",{count:__dcg_shared_module_exports__['pa'](t)}):this.controller.s("graphing-calculator-text-geometry-delete-selected-objects",{count:__dcg_shared_module_exports__['pa'](t)})}deleteSelected(){this.controller.dispatch({type:"delete-all-selected-items"})}};ce();ie();var UI=__dcg_shared_module_exports__['e'](se());var{If:Hce}=UI.Components,BI=class extends UI.View{init(){this.controller=this.props.controller()}sectionValues(){return this.props.sectionValues()}getSelectedColor(){let e=this.sectionValues().color;return!(e!=null&&e.isUnique)||!(e!=null&&e.selectedColor)?"":e.selectedColor}template(){return d("div",{class:()=>({"dcg-generic-options-menu":!0,"dcg-options-menu":!0,"dcg-multi-select-style-menu":!0}),role:u("region"),"aria-label":()=>this.controller.s("graphing-calculator-narration-style-menu"),children:_("div",{class:u("dcg-options-menu-section"),children:[d("div",{class:u("dcg-multi-select-color-picker"),children:d(cf,{controller:this.props.controller,colorLatex:()=>{var e,t;return(t=(e=this.sectionValues().color)==null?void 0:e.colorLatex)!=null?t:""},selectedColor:this.bindFn(this.getSelectedColor),onColorSelected:this.bindFn(this.onColorSelected),onCustomColorSelected:this.bindFn(this.onCustomColorSelected),customColorVisibility:this.bindFn(this.getCustomColorVisibility)})}),d(Hce,{predicate:()=>this.sectionValues().arrowMode!==void 0,children:()=>d("div",{children:()=>this.controller.s("graphing-calculator-text-geometry-arrow-mode",{mode:this.getArrowModeDisplayName()})})})]})})}getArrowModeDisplayName(){let e=this.sectionValues().arrowMode;if(!e)return"";switch(e){case __dcg_shared_module_exports__['Wd'].NONE:return this.controller.s("graphing-calculator-text-arrow-mode-none");case __dcg_shared_module_exports__['Wd'].DEFAULT:return this.controller.s("graphing-calculator-text-arrow-mode-default");case __dcg_shared_module_exports__['Wd'].POSITIVE:return this.controller.s("graphing-calculator-text-arrow-mode-positive");case __dcg_shared_module_exports__['Wd'].BOTH:return this.controller.s("graphing-calculator-text-arrow-mode-both")}}onColorSelected(e){this.controller.dispatch({type:"update-all-selected-items",update:{prop:"color",value:e}})}getCustomColorVisibility(){return this.controller.getGraphSettings().hideCustomColors?this.controller.shouldShowAuthorFeatures()?"suppressed":"hidden":"visible"}onCustomColorSelected(e){this.controller.dispatch({type:"update-all-selected-items",update:{prop:"colorLatex",value:e}})}};ce();ie();var x7=__dcg_shared_module_exports__['e'](se());var kf=class extends x7.View{template(){return d("button",{class:()=>{var e,t;return{"dcg-unstyled-button":!0,"dcg-navigate-back":!0,"dcg-navigate-back__no-right-border":(t=(e=this.props).noRightBorder)==null?void 0:t.call(e)}},onTap:this.props.onBack,"aria-label":this.props.ariaLabel,role:u("button"),tabIndex:u("0"),handleEvent:u("true"),manageFocus:this.const(_e({controller:this.props.controller(),location:{type:"geo-header-back-link"}})),children:d("i",{class:u("dcg-icon-chevron-left"),"aria-hidden":u("true")})})}};var{If:Bl,Switch:v7}=qI.Components,zI=class extends qI.View{init(){this.controller=this.props.controller(),this.cacheSectionValues(),this.cacheExistingTransformations()}willUpdate(){this.cacheSectionValues(),this.cacheExistingTransformations(),this.cachedConstructFromSelectionInfo=this.computeConstructFromSelectionInfo()}template(){return _("div",{class:u("dcg-multi-select-header dcg-animate-in-after-initial-load"),onKeyDown:this.bindFn(this.handleKeydown),role:u("toolbar"),"aria-label":this.bindFn(this.getSelectedCountString),children:[d(kf,{onBack:this.bindFn(this.deselectAll),controller:this.props.controller,noRightBorder:this.const(!0),ariaLabel:()=>this.controller.s("shared-calculator-text-keyboard-shortcut-geometry-deselect-all-objects")}),d(v7,{children:()=>d(Bl,{predicate:()=>this.isButtonVisible("multi-select-show-hide-icon"),children:()=>_("div",{class:()=>({"dcg-btn-outline":!0,"dcg-show-hide-btn":!0,"dcg-any-visible-objects":this.anyVisible()}),handleEvent:u("true"),tabIndex:u("0"),role:u("button"),onTap:this.bindFn(this.toggleItemsVisible),manageFocus:this.const(_e({controller:this.controller,location:{type:"multi-select-show-hide-icon"}})),children:[_("div",{"aria-hidden":()=>!this.anyVisible(),children:[()=>this.controller.s("graphing-calculator-text-geometry-hide-objects"),d(Bl,{predicate:()=>this.getSelectedCount()>1,children:()=>d("span",{children:()=>` (${this.getSelectedCount()})`})})]}),_("div",{"aria-hidden":this.bindFn(this.anyVisible),children:[()=>this.controller.s("graphing-calculator-text-geometry-show-objects"),d(Bl,{predicate:()=>this.getSelectedCount()>1,children:()=>d("span",{children:()=>` (${this.getSelectedCount()})`})})]})]})})},this.bindFn(this.getSelectedItemsKey)),_("div",{class:()=>({"dcg-style-button":!0,"dcg-toolbar-dropdown-button":!0,"dcg-menu-open":this.isStyleMenuOpen()}),handleEvent:u("true"),tabIndex:u("-1"),role:u("button"),"aria-label":()=>this.controller.s("graphing-calculator-narration-geometry-style-menu"),"aria-expanded":this.bindFn(this.isStyleMenuOpen),"dcg-open-menu-guid":()=>uR(),onTap:this.bindFn(this.toggleStyleMenu),manageFocus:this.const(_e({controller:this.controller,location:{type:"multi-select-style-icon"}})),children:[d(Vc,{color:()=>this.getSelectedColor(),invertSwatches:()=>this.controller.invertSwatches()}),d(Qu,{menuName:()=>this.controller.s("graphing-calculator-narration-geometry-style-menu"),ariaExpanded:this.bindFn(this.isStyleMenuOpen),controller:this.const(this.controller),openDropDown:()=>{}})]}),d(Bl,{predicate:()=>this.isButtonVisible("multi-select-label-icon"),children:()=>_("div",{class:()=>({"dcg-label-button":!0,"dcg-toolbar-dropdown-button":!0,"dcg-menu-open":this.isLabelMenuOpen()}),handleEvent:u("true"),tabIndex:u("-1"),role:u("button"),"aria-label":()=>this.controller.s("graphing-calculator-narration-label-menu"),"aria-expanded":this.bindFn(this.isLabelMenuOpen),"dcg-open-menu-guid":()=>hR(),onTap:this.bindFn(this.toggleLabelMenu),manageFocus:this.const(_e({controller:this.controller,location:{type:"multi-select-label-icon"}})),children:[d("div",{class:u("dcg-label-button-icon"),children:"A"}),d(Qu,{menuName:()=>this.controller.s("graphing-calculator-narration-label-menu"),ariaExpanded:this.bindFn(this.isLabelMenuOpen),controller:this.const(this.controller),openDropDown:()=>{}})]})}),d(Bl,{predicate:()=>this.isButtonVisible("multi-select-construct-icon"),children:()=>_("div",{class:()=>({"dcg-construct-button":!0,"dcg-toolbar-dropdown-button":!0,"dcg-menu-open":this.isConstructMenuOpen()}),handleEvent:u("true"),tabIndex:u("-1"),role:u("button"),"aria-label":()=>this.controller.s("graphing-calculator-narration-geometry-construct-menu"),"aria-expanded":this.bindFn(this.isConstructMenuOpen),"dcg-open-menu-guid":()=>tv(),onTap:this.bindFn(this.toggleConstructMenu),manageFocus:this.const(_e({controller:this.controller,location:{type:"multi-select-construct-icon"}})),children:[d(_I,{}),d(Qu,{menuName:()=>this.controller.s("graphing-calculator-narration-geometry-construct-menu"),ariaExpanded:this.bindFn(this.isConstructMenuOpen),controller:this.const(this.controller),openDropDown:()=>{}})]})}),d(Bl,{predicate:()=>this.isButtonVisible("multi-select-more-icon"),children:()=>d(Re,{tooltip:this.bindFn(this.getMoreString),children:d("div",{"aria-label":this.bindFn(this.getMoreString),role:u("button"),tabIndex:u("-1"),handleEvent:u("true"),"aria-expanded":this.bindFn(this.isMoreMenuOpen),class:()=>({"dcg-multi-select-icon-button dcg-more-options dcg-toolbar-dropdown-button":!0,"dcg-menu-open":this.isMoreMenuOpen()}),"dcg-open-menu-guid":()=>th(),manageFocus:this.const(_e({controller:this.controller,location:{type:"multi-select-more-icon"}})),onTap:this.bindFn(this.toggleMoreMenu),children:d(Rl,{})})})}),d(Bl,{predicate:this.bindFn(this.isLabelMenuOpen),children:()=>d(v7,{children:()=>d(An,{controller:this.props.controller,shouldHandleTabAndEscape:this.const(!0),menuType:this.const("multi-select-label"),menuButtonFocusLocation:this.const({type:"multi-select-label-icon"}),rootElSelector:this.const(".dcg-multi-select-header"),children:d(OI,{controller:this.props.controller,sectionValues:()=>this.sectionValues})})},()=>Object.keys(this.controller.getSelectedExpressionIds()).join(":"))}),d(Bl,{predicate:this.bindFn(this.isStyleMenuOpen),children:()=>d(An,{controller:this.props.controller,shouldHandleTabAndEscape:this.const(!0),menuType:this.const("multi-select-style"),menuButtonFocusLocation:this.const({type:"multi-select-style-icon"}),rootElSelector:this.const(".dcg-multi-select-header"),children:d(BI,{controller:this.props.controller,sectionValues:()=>this.sectionValues})})}),d(Bl,{predicate:this.bindFn(this.isConstructMenuOpen),children:()=>d(An,{controller:this.props.controller,shouldHandleTabAndEscape:this.const(!0),menuType:this.const("multi-select-construct"),menuButtonFocusLocation:this.const({type:"multi-select-construct-icon"}),rootElSelector:this.const(".dcg-multi-select-header"),children:d(PI,{controller:this.props.controller,constructFromSelectionInfo:()=>this.cachedConstructFromSelectionInfo,existingTransformations:()=>this.cachedExistingTransformations})})}),d(Bl,{predicate:this.bindFn(this.isMoreMenuOpen),children:()=>d(An,{controller:this.props.controller,shouldHandleTabAndEscape:this.const(!0),menuType:this.const("multi-select-more"),menuButtonFocusLocation:this.const({type:"multi-select-more-icon"}),rootElSelector:this.const(".dcg-multi-select-header"),children:d(NI,{controller:this.props.controller,sectionValues:()=>this.sectionValues})})})]})}getFocusOrder(){return["geo-header-back-link","multi-select-show-hide-icon","multi-select-style-icon","multi-select-label-icon","multi-select-construct-icon","multi-select-more-icon"].filter(t=>this.isButtonVisible(t)).map(t=>({type:t}))}isButtonVisible(e){switch(e){case"geo-header-back-link":return!0;case"multi-select-show-hide-icon":return this.hasSelectedAndEditableItems();case"multi-select-style-icon":return!0;case"multi-select-label-icon":return this.sectionValues.pointLabels!==void 0||this.sectionValues.singleLabelableExpressionModel!==void 0;case"multi-select-construct-icon":return this.isSomeRelevantToolEnabled();case"multi-select-more-icon":return this.controller.shouldShowAuthorFeatures()||this.hasSelectedAndEditableItems()||this.sectionValues.draggableFreePoint!==void 0;default:return!1}}cacheSectionValues(){this.sectionValues=this.computeSectionValues()}computeSectionValues(){var n;let e={pointLabels:[],singleLabelableExpressionModel:[],draggableFreePoint:[],arrowMode:[],graphInteractionDisabled:[],color:[]},t=this.controller.getAllSelectedItems();for(let a of t){if(e.graphInteractionDisabled.push(Ti(a)),a.type!=="expression")continue;e.color.push({selectedColor:Dd(a),colorLatex:a.colorLatex});let s=(n=a.formula.geometry)==null?void 0:n.valueType;switch(__dcg_shared_module_exports__['qb'](s)&&(s=__dcg_shared_module_exports__['rb'](s)),s){case __dcg_shared_module_exports__['va']:a.showLabel?e.pointLabels.push(a.label?"text":"measurement"):e.pointLabels.push("none"),e.singleLabelableExpressionModel.push(a),a.formula.move_strategy&&e.draggableFreePoint.push(a.dragMode!==__dcg_shared_module_exports__['hd'].NONE);break;case __dcg_shared_module_exports__['Da']:break;case __dcg_shared_module_exports__['Ha']:e.arrowMode.push(a.arrowMode);break;case __dcg_shared_module_exports__['Ga']:break;case __dcg_shared_module_exports__['Ia']:break;case __dcg_shared_module_exports__['Ka']:break;case __dcg_shared_module_exports__['Sa']:break;case __dcg_shared_module_exports__['Ea']:e.singleLabelableExpressionModel.push(a),e.arrowMode.push(a.arrowMode);break;case __dcg_shared_module_exports__['Ma']:case __dcg_shared_module_exports__['Oa']:e.singleLabelableExpressionModel.push(a);break;case __dcg_shared_module_exports__['Qa']:break;default:}}let o={},i=t.length;for(let a in e){let s=a;switch(s){case"singleLabelableExpressionModel":{let c=e[s];i===1&&c.length===1&&(o[s]=c[0])}break;case"pointLabels":{let c=e[s];if(c.length>0&&i>1){let p=__dcg_shared_module_exports__['l'](c);p.length===1?o[s]=p[0]:o[s]="none"}}break;case"draggableFreePoint":{let c=e[s];c.length>0&&(o[s]=c.some(p=>p))}break;case"arrowMode":break;case"graphInteractionDisabled":{o[s]=e[s].every(c=>c);break}case"color":{let c=e[s].map(h=>JSON.stringify(h)),p=new Set(c).size===1;o[s]={...e[s][0],isUnique:p};break}default:return s}}return o}cacheExistingTransformations(){this.cachedExistingTransformations=this.computeExistingTransformations()}computeConstructFromSelectionInfo(){let e=this.controller.getSelectedItem();if((e==null?void 0:e.type)==="expression"){let t=e.formula.typed_constant_value;if(!t||__dcg_shared_module_exports__['wb'](t.valueType,__dcg_shared_module_exports__['va']))return;let o=this.controller.getAllAvailableGeoTools(),i=[];for(let n of o){let a=this.controller.getGeoModel().getTool(n);a instanceof gr&&a.getMatchingWorkflow([t])&&i.push(n)}return{type:"single-selection",selected:[{referenceLatex:Zx(e),typedValue:t}],relevantTools:i}}}computeExistingTransformations(){var t,o;let e=[];for(let i of this.controller.getAllItemModels()){if(i.type!=="expression"||!this.controller.isItemInGeoFolder(i.id))continue;let n=(t=i.formula.geometry)==null?void 0:t.call;if(!n||!__dcg_shared_module_exports__['Mc'](n.symbol)||!n.parents.every((s,l)=>s.type!=="arbitrary-expression"||(n.symbol==="rotate"||n.symbol==="dilate")&&l===1))continue;let a=(o=i.formula.typed_constant_value)==null?void 0:o.valueType;a!==void 0&&__dcg_shared_module_exports__['wb'](a,__dcg_shared_module_exports__['Qa'])&&e.push(i)}return e.reverse()}handleKeydown(e){let t=Pe(e);if(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||t!=="Left"&&t!=="Right"&&t!=="Home"&&t!=="End")return;let o=this.controller.getFocusLocation();if(!o)return;let i=this.getFocusOrder().findIndex(a=>(a==null?void 0:a.type)===o.type);if(i===-1)return;e.preventDefault(),e.stopPropagation();let n=i;t==="Left"?n=Math.max(0,i-1):t==="Right"?n=Math.min(this.getFocusOrder().length-1,i+1):t==="Home"?n=0:t==="End"&&(n=this.getFocusOrder().length-1),n!==i&&(this.controller.dispatch({type:"close-item-settings-menu"}),this.controller.dispatch({type:"set-focus-location",location:this.getFocusOrder()[n]}))}getSelectedCountString(){return this.controller.getGrapherDimensions().width<450?"":this.controller.s("graphing-calculator-text-geometry-selected-objects",{count:__dcg_shared_module_exports__['pa'](this.getSelectedCount())})}getSelectedAndEditableItems(){return this.controller.getAllSelectedItems().filter(t=>!this.controller.isItemReadonly(t.id))}hasSelectedAndEditableItems(){return this.getSelectedAndEditableItems().length>0}isSomeRelevantToolEnabled(){var t,o;return[...(o=(t=this.cachedConstructFromSelectionInfo)==null?void 0:t.relevantTools)!=null?o:[],...Sf].some(i=>this.controller.isGeoToolVisible(i))}deselectAll(){this.controller.dispatch({type:"set-none-selected"})}getMoreString(){return this.controller.s("graphing-calculator-text-geometry-multi-select-more-dropdown")}getSelectedItemsKey(){return this.controller.getAllSelectedItems().map(t=>t.id).join("-")}toggleItemsVisible(){this.anyVisible()?this.hideSelected():this.showSelected()}anyVisible(){return this.controller.getAllSelectedItems().some(t=>!$o(t))}isFolderMenuOpen(){return this.controller.isItemSettingsMenuOpen(Kce())}isMoreMenuOpen(){return this.controller.isItemSettingsMenuOpen(th())}isConstructMenuOpen(){return this.controller.isItemSettingsMenuOpen(tv())}isStyleMenuOpen(){return this.controller.isItemSettingsMenuOpen(uR())}isLabelMenuOpen(){return this.controller.isItemSettingsMenuOpen(hR())}toggleMoreMenu(){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"multi-select-more",guid:th(),focusFirstOption:!0}})}toggleConstructMenu(){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"multi-select-construct",guid:tv(),focusFirstOption:!0}})}toggleStyleMenu(){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"multi-select-style",guid:uR(),focusFirstOption:!0}})}toggleLabelMenu(){var t;let e=this.sectionValues.singleLabelableExpressionModel;!this.isLabelMenuOpen()&&e&&!Tn(e)&&((t=e.formula.geometry)==null?void 0:t.valueType)===__dcg_shared_module_exports__['va']&&this.controller.dispatch({type:"set-label-state-for-selected-points",state:"auto"}),this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"multi-select-label",guid:hR(),focusFirstOption:!0}}),this.isLabelMenuOpen()&&e&&e.label!==""&&this.controller.dispatch({type:"set-focus-location",location:{type:"multi-select-label-menu-label-input"}})}getSelectedCount(){return this.controller.getAllSelectedItems().length}hideSelected(){this.controller.dispatch({type:"update-all-selected-items",update:{prop:"visible",value:!1}})}showSelected(){this.controller.dispatch({type:"update-all-selected-items",update:{prop:"visible",value:!0}})}getSelectedColor(){var o;let e=this.sectionValues.color,t=e&&((o=this.controller.getAllColorAssignments().find(i=>i.assignmentLatex===e.colorLatex))==null?void 0:o.id);if(t){let i=this.controller.getColorById(t);return Array.isArray(i)?{type:"color-array",value:i}:{type:"single-color",value:i}}else if(e!=null&&e.selectedColor)return{type:"single-color",value:e.selectedColor};return{type:"single-color",value:this.controller.getColors().GRAY}}};function Kce(){return"**multi-select-folder**"}function th(){return"**multi-select-more**"}function tv(){return"**multi-select-construct**"}function uR(){return"**multi-select-style**"}function hR(){return"**multi-select-label**"}Vt();var jc=document.createElement("canvas").getContext("2d"),an=class r{constructor(e,t){this._label=e,this._fontSize=t,this._layout=Wce(e,t)}getRect(){return this.getRectWhenCenteredAt({x:0,y:0})}getRectWhenCenteredAt(e){return{left:this._layout.left+e.x,right:this._layout.right+e.x,top:this._layout.top+e.y,bottom:this._layout.bottom+e.y}}getBoundsWhenCenteredAt(e,t){switch(t){case"x":return{lower:this._layout.left+e,upper:this._layout.right+e};case"y":return{lower:this._layout.top+e,upper:this._layout.bottom+e};default:let o=t;throw new Error(`Unknown axis: ${o}`)}}getWidth(){return this._layout.right-this._layout.left}getHeight(){return this._layout.bottom-this._layout.top}getDimensionAlongAxis(e){switch(e){case"x":return this.getWidth();case"y":return this.getHeight();default:let t=e;throw new Error(`Unknown axis: ${t}`)}}clampBoundsWithinRect(e,t){let o,i;return e.x+this._layout.left<t.left?o=t.left-this._layout.left:e.x+this._layout.right>t.right?o=t.right-this._layout.right:o=e.x,e.y+this._layout.top<t.top?i=t.top-this._layout.top:e.y+this._layout.bottom>t.bottom?i=t.bottom-this._layout.bottom:i=e.y,{x:o,y:i}}getValue(){return this._label.value}getMinusWidth(){return this.getValue()<0?(r.setCtxFontSize(jc,this._fontSize),jc.measureText("-1").width-jc.measureText("1").width):0}getString(){return this._label.superscript?this._label.mantissa+"^"+this._label.superscript:this._label.string}drawCenteredAt(e,t,o){let i=t.x,n=r.computeBaselineFromCenter(t.y,this._fontSize);o&&oo(e,o),e.save(),o&&Xr(e),r.setCtxFontSize(e,this._fontSize),this._label.superscript?(e.strokeText(this._label.mantissa,this._layout.mantissa_x+i,this._layout.mantissa_y+n),e.strokeText(this._label.superscript,this._layout.superscript_x+i,this._layout.superscript_y+n),e.fillText(this._label.mantissa,this._layout.mantissa_x+i,this._layout.mantissa_y+n),e.fillText(this._label.superscript,this._layout.superscript_x+i,this._layout.superscript_y+n)):(e.strokeText(this._label.string,this._layout.mantissa_x+i,this._layout.mantissa_y+n),e.fillText(this._label.string,this._layout.mantissa_x+i,this._layout.mantissa_y+n)),e.restore()}static computeBaselineFromCenter(e,t){return e+.272*t}static setCtxFontSize(e,t){e.font=t+"px Arial",e.textAlign="center"}};function Wce(r,e){if(r.superscript){let t=e;an.setCtxFontSize(jc,t);let o=jc.measureText(r.mantissa).width,i=Math.round(.8*e);an.setCtxFontSize(jc,i);let n=jc.measureText(r.superscript).width,a=0,s=e/5,l=o/2+n/2,c=-e/4,p=c-i/2,h=s+t/2,g=a-o/2,m=l+n/2;return{top:p,bottom:h,left:g,right:m,mantissa_height:t,mantissa_width:o,mantissa_x:a,mantissa_y:s,superscript_height:i,superscript_width:n,superscript_x:l,superscript_y:c}}else{let t=e;an.setCtxFontSize(jc,e);let o=jc.measureText(r.string).width,i=0,n=0,a=n-t/2,s=n+t/2,l=i-o/2,c=i+o/2;return{top:a,bottom:s,left:l,right:c,mantissa_height:t,mantissa_width:o,mantissa_x:i,mantissa_y:n}}}function $ce(r,e,t,o){let i=Math.ceil(r/t),n=Math.floor(e/t),a=1/t;if(!(i>n)&&!(n-i>1e4))for(let s=i;s<=n;s++)o(s/a)}var gR={base:10,major:[1,2,5],minor:[5,4,5]},jce={base:10,major:[Math.PI,2*Math.PI,5*Math.PI],minor:[4,4,5]},Yce={base:2,major:[Math.PI/3],minor:[3]};function Xce(r){return r?{base:10,major:[r,2*r,5*r],minor:[4,4,5]}:gR}function mR(r,e){let{major:t,minor:o,base:i}=e,n=1/0,a=1/0;for(let s=0;s<t.length;s++){let l=t[s],c=Math.ceil(Math.log(r/l)/Math.log(i)),p=l*Math.pow(i,c);if(p<n){n=p;let h=o[s];a=n/h}}return{major:n,minor:a}}function Jce(r,e,t){return 1+(e-r)/t}function w7(r){let e=r.screen.width,t=r.screen.height,o=r.viewport.xmax-r.viewport.xmin,i=r.viewport.ymax-r.viewport.ymin,n=r.settings.pixelsPerLabel;return{majorStepX:n/e*o,majorStepY:n/t*i}}function Da(r){let e=l=>{let[c,p,h,g,m]=l==="x"?[r.viewport.xmin,r.viewport.xmax,r.settings.xAxisStep,r.settings.xAxisNumbers,r.settings.xAxisMinorSubdivisions]:[r.viewport.ymin,r.viewport.ymax,r.settings.yAxisStep,r.settings.yAxisNumbers,r.settings.yAxisMinorSubdivisions],b=p-c,x=Math.abs(h!=null?h:NaN),E=0,S=0;if(x&&x!==Math.PI){let k=Jce(c,p,x);if(k>=3&&k<100){let T=0;if(g){let P=0;$ce(c,p,x,A=>{let D=new an(__dcg_shared_module_exports__['aa'](A,b),r.settings.labelSize);P=Math.max(D.getDimensionAlongAxis(l),P)}),T=P+10}else T=m===1?8:20;let I=l==="x"?"width":"height";k*T<=r.screen[I]&&(E=x,x===3||x===5?S=1:S=x/4)}}if(!E){let k=w7(r)[l==="x"?"majorStepX":"majorStepY"],T=mR(k,__dcg_shared_module_exports__['aa'](x,b).string.indexOf("\u03C0")>=0?k>=1?jce:Yce:Xce(x));E=T.major,S=T.minor}return{majorStep:E,minorStep:S}},t=()=>{var l,c;if(Math.abs((l=r.settings.xAxisStep)!=null?l:NaN)===Math.abs((c=r.settings.yAxisStep)!=null?c:NaN)){let{xmin:g,xmax:m,ymin:b,ymax:x}=r.viewport,E=r.screen.width/(m-g),S=r.screen.height/(x-b),k=E/S,T=.01;if(k>=1-T&&k<=2){let{majorStep:I,minorStep:P}=e("y");return{x:{majorStep:I,minorStep:P},y:{majorStep:I,minorStep:P}}}if(k<=1-T&&k>=.5){let{majorStep:I,minorStep:P}=e("x");return{x:{majorStep:I,minorStep:P},y:{majorStep:I,minorStep:P}}}}return{x:e("x"),y:e("y")}},o=()=>{let{xAxisScale:l,yAxisScale:c}=r.settings,p=l==="logarithmic",h=c==="logarithmic";return!p&&!h?t():{x:p?{majorStep:NaN,minorStep:NaN}:e("x"),y:h?{majorStep:NaN,minorStep:NaN}:e("y")}},{x:i,y:n}=o(),{xAxisMinorSubdivisions:a=0,yAxisMinorSubdivisions:s=0}=r.settings;return{majorStepX:i.majorStep,minorStepX:a>0?i.majorStep/a:i.minorStep,majorStepY:n.majorStep,minorStepY:s>0?n.majorStep/s:n.minorStep}}function S7(r){let e=w7(r),t=mR(e.majorStepX,gR),o=mR(e.majorStepY,gR),i=t.major>o.major?t:o;return{majorStepR:i.major,minorStepR:i.minor}}var rh=class{constructor(){this.displayNameKey="graphing-calculator-text-geometry-tool-box-selection-display-name";this.toolType="selection";this.icon=[{type:"stroked-path",color:"#aaa",path:[35,35,51,35,51,51,35,51,35,35]},{type:"filled-polygon",color:"#000",path:[50,50,63.5,62,58.25,62.75,62,72.5,59.75,74,55.25,64.25,50.75,68,50,50]}]}getNumberInputLatex(){return""}clearTentativeOutputs(){}canNextInputBePoint(){return!1}getAllValidNextInputTypes(){return __dcg_shared_module_exports__['nb'].filter(e=>this.isValidNextInputType(e))}isValidNextInputType(e){return e!==__dcg_shared_module_exports__['Qa']}getNonPointInputType(){}getHint(){return""}getExpressionEditHint(e){return this.getHint()}onNumberInput(e){}onMove(e){return!0}onFocus(e){}tryCommitResults(){return{committed:void 0}}shouldUseJitEdges(){return!1}shouldHighlightRelevantObjects(){return!1}};function T7(r,e){return r===void 0?e===void 0:!(e===void 0||r.calcId!==e.calcId||r.listIndex!==e.listIndex||r.polygonEdge!==e.polygonEdge)}var HI=class{constructor(e){this.poiController=e,this.controller=e.controller,this.grapher=e.manager}getKeyboardAttention(){return this.objectUnderAttention}setKeyboardAttention(e){this.objectUnderAttention=e}findNonGeometryTabTargetsInGraph(){let e=this.controller.getGrapher3d();if(e)return e.getOrderedTabTargets();let t=this.grapher.imageLayer.getOrderedTabTargets(),o=this.grapher.clickableObjectsLayer.getOrderedTabTargets(),i=this.grapher.movablePointsLayer.getOrderedTabTargets();return t.concat(o).concat(i)}findTabbableObjectsForCurrentTool(e){let t=e==null?void 0:e.calcId,o={},i=this.controller.getGeoModel().getCurrentTool();if((!this.controller.isGeometry()||i.isValidNextInputType(__dcg_shared_module_exports__['ta']))&&this.findNonGeometryTabTargetsInGraph().filter(h=>!(i instanceof rh&&this.controller.isClickableId(h.calcId))).forEach(h=>{var m;let g=(m=h.listIndex)!=null?m:0;if(!o[h.calcId])o[h.calcId]=[];else if(g&&!(!this.controller.isGeometry()||this.controller.canExpandListForItem(h.calcId)))return;o[h.calcId][g]?o[h.calcId][g].description=h.description:o[h.calcId].push(h)}),this.controller.isGeometry()){let p=this.controller.getGeoModel();p.getAllChoosableDefsUnordered({mode:"tab"},p.getCurrentTool()).filter(g=>!o[g.calcId]).forEach(g=>{var b;o[g.calcId]||(o[g.calcId]=[]);let m={calcId:g.calcId,listIndex:g.listIndex,polygonEdge:(b=g.polygonEdgeInfo)==null?void 0:b.edgeNumber,geoDef:{...g}};o[g.calcId].push(m)})}let n=[],a=-1,s=!1,l=this.controller.getGrapher3d(),c=l?l.getTabOrder():this.grapher.getTabOrder();for(let p of c){p===t&&(a=n.length);let h=o[p];if(h){h.sort((g,m)=>g.listIndex!==m.listIndex?g.listIndex===void 0?-1:m.listIndex===void 0?1:g.listIndex-m.listIndex:g.polygonEdge!==m.polygonEdge?g.polygonEdge===void 0?-1:m.polygonEdge===void 0?1:g.polygonEdge-m.polygonEdge:0);for(let g of h)p===t&&(s||(a=n.length),T7(g,e)&&(s=!0)),n.push(g)}}return{targets:n,currentTabIndex:a,currentIsTabbable:s}}findNextObjFromKeyboard(e,t){let{targets:o,currentIsTabbable:i,currentTabIndex:n}=this.findTabbableObjectsForCurrentTool(t);if(!o.length)return;if(n===-1)return e==="next"?{wrapped:!1,target:o[0]}:{wrapped:!1,target:o[o.length-1]};let a=!1,s=n;return e==="prev"?s-=1:i&&(s+=1),s===-1?(a=!0,s=o.length-1):s>=o.length&&(a=!0,s=0),{wrapped:a,target:o[s]}}focusNextObjFromKeyboard(e={}){let t={allowWrapping:!0,selectNonClickables:!1,direction:"next"},{direction:o,allowWrapping:i,selectNonClickables:n}={...t,...e},a=this.findNextObjFromKeyboard(o,this.getKeyboardAttention());return!a||!i&&a.wrapped?(n&&this.controller.dispatch({type:"set-none-selected"}),!1):(a.wrapped&&this.controller.isVirtualMouseAllowed()?this.resetBackToGeoKeyboardPt():(n&&(this.controller.isClickableId(a.target.calcId)||!this.controller.isGeoItem(a.target.calcId)?this.controller.dispatch({type:"set-none-selected"}):this.controller.dispatch({type:"set-selected-id",id:a.target.calcId,state:"selected"})),this.updateKeyboardAttention(a.target,{describe:!0})),!0)}updateKeyboardAttention(e,t){let o=this.getKeyboardAttention();T7(e,o)||(this.setKeyboardAttention(e),this.controller.isGeometry()&&this.controller.getGeoModel().onFocus(e==null?void 0:e.geoDef),this.poiController.moveGeoKeyboardPtToFocusedItem(t),t.describe&&this.poiController.describeFocusedItem({includeDetails:!0}))}clearAttentionIfNotTabbable(){let{currentIsTabbable:e}=this.findTabbableObjectsForCurrentTool(this.getKeyboardAttention());e||this.updateKeyboardAttention(void 0,{describe:!1})}handleGrapherGainedFocus(){if(this.controller.getGeoModel().speakCurrentGeoToolHint(),this.controller.isVirtualMouseAllowed())this.resetBackToGeoKeyboardPt();else{let t=this.findTabbableObjectsForCurrentTool(void 0).targets;t.length?(this.setKeyboardAttention(void 0),this.updateKeyboardAttention(t[0],{describe:!0})):Te(this.controller.s("graphing-calculator-narration-geometry-no-tool-inputs"))}}resetBackToGeoKeyboardPt(){this.updateKeyboardAttention(void 0,{describe:!0}),this.poiController.geoKeyboardPt.x=this.poiController.geoKeyboardPt.lastArrowedX,this.poiController.geoKeyboardPt.y=this.poiController.geoKeyboardPt.lastArrowedY,this.poiController.handleGeoKeyboardPtMove()}};function KI(r){if(!r)return 0;if(r.type==="image"&&r.listIndex)return r.listIndex;if("poi"in r)return r.poi.pointIdxOnBranch;if("branchInfo"in r&&r.branchInfo.sketch){let e=r.branchInfo.branch,t=r.branchInfo.sketch.branches[e];return"listIndex"in t&&t.listIndex||0}return 0}var Qce=0,Ef=class r{constructor(e,t){this.geoKeyboardPt={x:NaN,y:NaN,lastArrowedX:NaN,lastArrowedY:NaN};this.canceledGeoToolplayWhilePressed=!1;this.manager=e,this.controller=e.controller,this.keyboardAttentionManager=new HI(this),this.graphSettings=t,this.elt=this.manager.elt,this.id=Qce++,this.graphSettings.config.observe("disableMouseInteractions",()=>{this.graphSettings.config.disableMouseInteractions?this.removeHandlers():this.graphSettings.config.graphpaper&&this.addHandlers()}),this.speakThrottledDescription=__dcg_shared_module_exports__['p'](o=>{Te(vr(o))},100,{leading:!1,trailing:!0}),!(!this.graphSettings.config.graphpaper||this.graphSettings.config.disableMouseInteractions)&&this.addHandlers()}remove(){this.removeHandlers()}addHandlers(){this.addTouchEventHandlers(),this.addHoverEventHandler(),this.addKeyboardEventHandlers(),this.addManualUnhoverListener(),this.addGeoEventHandlers()}removeHandlers(){this.removeAllGlobalMouseListeners(),this.removeManualUnhoverListener(),this.removeAllGeoListeners(),this.removeHoverEventHandler(),this.removeElementListeners()}removeElementListeners(){re(this.elt).off("touchstart"),re(this.elt).off("dcg-tapstart"),re(this.elt).off("mouseleave"),re(this.elt).off("keydown")}addGlobalMouseListener(e,t){let o=e.split(" ");for(let i of o){let n=i+".dcg-poiController-"+this.id;re(document).on(n,t)}}removeAllGeoListeners(){re(document).off(".dcg-poiController-geo-"+this.id)}removeAllGlobalMouseListeners(){re(document).off(".dcg-poiController-"+this.id)}getToleranceByDevice(e){return e==="touch"?20:10}addGeoEventHandlers(){re(document).on("mouseleave.dcg-poiController-geo-"+this.id,()=>{var e;if(this.controller.isGeoToolActive()&&!((e=this.pointerState)!=null&&e.isPressed)){let t=this.controller.getGeoModel();t.onMouseAction("move",{pt:{x:NaN,y:NaN},shift:!1,tolerance:0}),t.onPreviewChange()}}),re(document).on("dcg-tapend.dcg-poiController-geo-"+this.id,e=>{var i;let t=!!((i=this.pointerState)!=null&&i.isPressed),o=this.updatePointerState(e);this.controller.isGeoToolActive()&&t&&this.handleGeoTapEnd(o,e)})}removeHoverEventHandler(){re(document).off(".dcg-poiController-global-hover-"+this.id)}addHoverEventHandler(){let e="dcg-tapmove.dcg-poiController-global-hover-"+this.id;re(document).on(e,t=>this.handleTapmove(t))}simulatedTapMove(){this.lastMoveEvtForSimulatingTapMoveWhenDynamicBoundsChangeViewport&&this.handleTapmove(this.lastMoveEvtForSimulatingTapMoveWhenDynamicBoundsChangeViewport)}handleTapmove(e){var A;this.lastMoveEvtForSimulatingTapMoveWhenDynamicBoundsChangeViewport=e;let t=this.updatePointerState(e);if(this.controller.isGeoToolActive()&&this.handleGeoTapMove(t)||e.device==="touch")return;let o=Number.isFinite(e.clientX)&&Number.isFinite(e.clientY)?document.elementFromPoint(e.clientX,e.clientY):void 0,i=!!o&&!!o.closest(".dcg-grapher"),n=!!o&&!!o.closest(".dcg-label"),a=!!o&&!!o.closest(".dcg-opened"),s=n&&!a,l=(A=this.controller.getGrapher3d())==null?void 0:A.webglLayer,c=this.manager.poiLabelsLayer,p=this.getMouseRelativeToGrapher(e),h=this.getToleranceByDevice(e.device);l&&(l==null||l.setMouse(i?p:void 0));let g;i&&!n&&(g=this.getFeatureUnderPoint(p,h)),!!((e==null?void 0:e.originalEvent)||e).buttons&&(g=void 0);let m;if(g&&g.type==="movable-point"){let D=g.poi,G=D&&D.getMovablePoint();m=G&&G.id}let b,x=0;g&&g.isClickable&&!this.isBoxSelectActive(e)&&!this.manager.movablePointsLayer.isMovingPoint()&&!this.manager.traceLayer.isTracing()&&(b=g.model,x=KI(g));let E=this.manager.clickableObjectsLayer,S={};b&&(S[b.id]={listIndexes:x===void 0?void 0:{[x]:!0}}),E.setHoveredObjects(S);let k;g&&"poi"in g&&g.poi&&(!g.poi.isAttachedToPlottedPoint()||g.poi.hasInteractiveLabel())&&(k=g.poi);let T=!k&&s;k!==c.getHoveredPOI()&&!T&&(this.controller.isTraceEnabled()?c.setHoveredPOI(k):c.setHoveredPOI(void 0),this.controller.requestRedrawGraph());let I=!1;if(g&&g.type==="image"){let D=ks(g.model),G=g.isClickable;I=D&&!G}let P=!1;g&&g.type==="draggable-label"&&(P=!0),I||P?this.manager.setLayerClass("extraMoveCursor","dcg-mouse-over-movable-point"):this.manager.setLayerClass("extraMoveCursor",""),this.manager.movablePointsLayer.setHoveredPointId(m)}addManualUnhoverListener(){let e=()=>{let t=this.manager;t.poiLabelsLayer.setHoveredPOI(void 0),t.clickableObjectsLayer.setHoveredObjects({}),this.controller.requestRedrawGraph()};re(window).on("blur.dcg-poiController-"+this.id,e),re(this.elt).on("mouseleave",e)}removeManualUnhoverListener(){re(window).off(".dcg-poiController-"+this.id)}getPickResults(e,t){let o=t.webglLayer,{x:i,y:n}=this.getMouseRelativeToGrapher(e);return o.setMouse({x:i,y:n}),o.pickAtMouseAndReadResults(),o.getPickResult()}isClickable(e){let t=this.controller.getItemModel(e);return Tm(t)}add3DTouchEventHandlers(e){let t=e.elt;if(!t)return;let o=e.webglLayer;re(t).on("dcg-tapstart",i=>{if(i.touches.length>1)return;let n=this.getPickResults(i,e);if(n!=null&&n.id){let{id:a,index:s}=n;this.isClickable(a)?(o.setPressedAction({id:a,index:s}),i.stopPropagation(),i.preventDefault()):this.controller.dispatch({type:"set-selected-id",id:a,state:"selected"})}}),re(t).on("dcg-tapend dcg-tapcancel",()=>{let i=o.getPressedAction();i&&(o.setPressedAction(void 0),this.controller.dispatch({type:"clickable-item-clicked",id:i.id,listIndex:i.index})),o.isTrackingPressedAction=!1}),re(t).on("dcg-tapmove",i=>{if(o.isTrackingPressedAction){let n=this.getPickResults(i,e);if(n!=null&&n.id){let{id:a,index:s}=n;this.isClickable(a)?o.setPressedAction({id:a,index:s}):o.setPressedAction(void 0)}else o.setPressedAction(void 0)}})}addTouchEventHandlers(){re(this.elt).on("touchstart",e=>this.handleTouchstart(e)),re(this.elt).on("dcg-tapstart",e=>this.handleTapstart(e))}handleTouchstart(e){if(!this.isViewportLocked()){e.target.matches("input, textarea")||e.preventDefault();return}let t=this.getMouseRelativeToGrapher(e),o=this.getToleranceByDevice(e.device),i=this.getFeatureUnderPoint(t,o);i&&(i.type==="image"&&!rn(i.model)&&!ks(i.model)||i.type==="sketch-branch"&&this.graphSettings.config.onlyTraceSelected&&!i.sketch.selected||e.target.matches("input, textarea")||e.preventDefault())}handleTapstart(e){this.lastMoveEvtForSimulatingTapMoveWhenDynamicBoundsChangeViewport=e;let t=this.updatePointerState(e);if(this.controller.isGeoToolActive()&&this.handleGeoTapStart(t,e)){Dt(e);return}if(e.target.closest(".dcg-label")){Dt(e,"do-not-clear-poi-labels");return}let o=this.getMouseRelativeToGrapher(e),i=this.getToleranceByDevice(e.device),n=this.getFeatureUnderPoint(o,i);if(!n){this.isBoxSelectActive(e)||this.controller.dispatch({type:"set-none-selected"}),this.isBoxSelectActive(e)?this.startBoxSelect(e):this.manager.viewportController.beginPanning(e);return}if(n.isClickable&&!this.isBoxSelectActive(e)){let p="model"in n&&n.model;p?this.manager.clickableObjectsLayer.setPressedObject({id:p.id,listIndex:KI(n)}):this.manager.clickableObjectsLayer.setPressedObject(void 0)}else this.manager.clickableObjectsLayer.setPressedObject(void 0);if(n.type==="editable-label"){Dt(e);return}else Rr();if(n.type==="draggable-label"){this.startMovingPoints({poiUnderMouse:void 0,evt:e,points:[{type:"draggable-label",label:n.label,model:n.model,startScreenPt:o}],originalTargetObjectId:n.model.id}),Dt(e);return}if(n.type==="clickable-label"&&Dt(e),n.type==="image"&&ks(n.model)&&!this.isBoxSelectActive(e)){let p=!!n.isClickable;if(this.startMovingPoints({poiUnderMouse:void 0,evt:e,points:[{type:"image",image:n.model,startScreenPt:o,shouldDelayUntilRealMove:p}],originalTargetObjectId:n.model.id}),!p){Dt(e);return}}let a=!1,s=n.model;if(this.controller.isGeometry()&&s&&s.type==="expression"&&s.formula.geometry){let p;"poi"in n&&(p=n.poi),a=this.startReverseDrag(s.id,e,p),a&&n.type!=="static-point"&&this.manager.clickableObjectsLayer.setPressedObject({id:s.id,listIndex:KI(n)}),!a&&n.isClickable&&this.controller.dispatch({type:"set-none-selected"})}if(n.type==="movable-point"&&(Dt(e),Dt(e,"do-not-clear-poi-labels"),!a)){this.startMovingPoints({poiUnderMouse:n.poi,evt:e,points:[{type:"poi",poi:n.poi,startScreenPt:o}],originalTargetObjectId:n.sketch.id});return}if(!a&&this._togglePOIUnderPoint(n)){Dt(e),Dt(e,"do-not-clear-poi-labels");return}if(!a&&n.type==="sketch-branch"&&!n.isClickable){let p=!this.controller.isTraceEnabled();if(this.graphSettings.config.onlyTraceSelected){if(Dt(e,"do-not-clear-poi-labels"),!p&&this.controller.getItemSelectedState(n.model.id)==="selected"&&!this.isBoxSelectActive(e)){this.startTracingBranch(n,o),Dt(e);return}}else{let h=!this.controller.isListEnabled();if(p&&h||(this.selectItemIfNotSecret(n.model.id,{multiSelect:this.isBoxSelectActive(e),tentative:!1}),p))return;this.startTracingBranch(n,o),Dt(e),Dt(e,"do-not-clear-poi-labels");return}}(this.controller.shouldShowMultiSelectHeader()?"multi-select":"default")==="default"&&a||this.selectFeatureUnderMouse(n,{multiSelect:this.isBoxSelectActive(e),tentative:!0});let c=!1;this.addGlobalMouseListener("dcg-tapmove",p=>{c=!0,this.manager.clickableObjectsLayer.isAnObjectPressed()?o=this.getMouseRelativeToGrapher(p):a||(this.removeAllGlobalMouseListeners(),this.controller.isGeometry()&&(this.controller.dispatch({type:"clear-tentative-selection"}),this.addGlobalMouseListener("dcg-tapend",h=>{this.removeAllGlobalMouseListeners(),this.shouldTreatSmallDragAsClick(e,h)&&this.selectFeatureUnderMouse(n,{multiSelect:this.isBoxSelectActive(h),tentative:!1})})),this.manager.viewportController.beginPanning(p))}),this.addGlobalMouseListener("dcg-tapend dcg-tapcancel",p=>{this.removeAllGlobalMouseListeners();let h=this.manager.clickableObjectsLayer.getPressedObject(),g=h&&h.id;this.manager.clickableObjectsLayer.setPressedObject(void 0);let m=this.getFeatureUnderPoint(o,i);if(m&&m.isClickable){let b="model"in m&&m.model;b&&b.id===g&&!Or(p,"dragged-clickable-object")&&!this.isBoxSelectActive(p)&&this.controller.dispatch({type:"clickable-item-clicked",id:b.id,listIndex:KI(m)});return}(!c||this.shouldTreatSmallDragAsClick(e,p))&&(this.controller.hasTentativeSelection()?this.controller.dispatch({type:"commit-tentative-selection"}):this.selectFeatureUnderMouse(m,{multiSelect:this.isBoxSelectActive(p),tentative:!1}))})}shouldTreatSmallDragAsClick(e,t){var a,s,l,c;let o=((a=t.clientX)!=null?a:NaN)-((s=e.clientX)!=null?s:NaN),i=((l=t.clientY)!=null?l:NaN)-((c=e.clientY)!=null?c:NaN),n=this.getToleranceByDevice(t.device);return Math.abs(o)<n&&Math.abs(i)<n}selectFeatureUnderMouse(e,t){var i;if(!e)return;let o=(i=e.model)==null?void 0:i.id;o&&(this.controller.isItemSelected(o)&&!t.multiSelect||this.controller.isItemSelected(o)&&t.tentative||e.type==="movable-point"&&!this.controller.isGeometry()||e.isClickable||this.selectItemIfNotSecret(o,t))}isBoxSelectActive(e){if(!this.controller.isMultiSelectEnabled())return!1;let t=this.controller.getActiveTool();return t==="selection"&&e.shiftKey||t==="box-selection"}isViewportLocked(){return this.controller.zoomAndPanDisabled()}addKeyboardEventHandlers(){let e=`dcg-poiController-${this.id}`;re(document).on(`keyup.${e} keydown.${e}`,t=>{this.handleShiftKeyChange(t.shiftKey)}),re(this.elt).on("keydown",t=>{var l,c,p;let o=t;if(this.manager.getAudioTrace().getAudioTraceActive())return;let i=this.manager.movablePointsLayer.getPOIUnderAttention(),n=this.manager.imageLayer.getFocusedImage(),a=Pe(o),s=co(o);if((a==="Up"||a==="Down"||a==="Left"||a==="Right")&&this.controller.isGraphPaperFocused()){o.stopPropagation(),o.preventDefault();let h=this.keyboardAttentionManager.getKeyboardAttention(),g=this.controller.getActiveTool();if(!h&&(g==="selection"||g==="box-selection")&&!o.altKey&&!o.ctrlKey&&!o.metaKey&&!o.shiftKey){this.manager.viewportController.panFromKeyboard(a);return}else if(h&&this.controller.shouldAllowMovingPointsWithKeyboard()){let m=n?n.centerId:h.calcId;if(!m)return;let b=this.getDraggablePointOrAncestors(m,o);this.movePointsFromKeyboard(b,o),this.controller.getEvaluator().notifyWhenSynced(()=>{this.describeFocusedItem({includeDetails:!0})})}else this.controller.isVirtualMouseAllowed()&&(this.keyboardAttentionManager.updateKeyboardAttention(void 0,{describe:!1}),this.moveGeoPointFromKeyboard(o))}else if(a==="Tab"&&this.controller.isGraphPaperFocused()){let h=o.shiftKey?"prev":"next",g=this.keyboardAttentionManager.getKeyboardAttention();if(!(this.controller.getActiveTool()!=="selection")&&!g&&h==="prev")return;this.handleTabEvent(h,o)}else if((a==="Enter"||a==="Space")&&this.controller.isGraphPaperFocused()&&this.controller.getActiveTool()==="selection"){let h=this.keyboardAttentionManager.getKeyboardAttention();if(h){let g=this.controller.getItemModel(h.calcId);if(g&&!this.isBoxSelectActive(o)){let m=g.type==="expression"&&Ei(g),b=g.type==="image"&&fu(g);m||b?(this.lastClickedKeyboardAttention=h,this.lastClickedDescription=_i(g,h.listIndex),this.controller.dispatch({type:"clickable-item-clicked",id:h.calcId,listIndex:h.listIndex})):(this.lastClickedKeyboardAttention=void 0,this.lastClickedDescription=void 0)}}o.preventDefault(),o.stopPropagation();return}else if(this.controller.isGeometry()&&this.controller.isGraphPaperFocused()){let h=!1;if(o.ctrlKey&&o.shiftKey&&!o.altKey&&!o.metaKey){let g;if(s==="O"?g={type:"multi-select-more",guid:th(),focusFirstOption:!0,previousFocusLocation:{type:"graph-paper"}}:s==="A"&&(g={type:"multi-select-construct",guid:tv(),focusFirstOption:!0,previousFocusLocation:{type:"graph-paper"}}),g){o.preventDefault(),o.stopPropagation();let m=this.keyboardAttentionManager.getKeyboardAttention();this.controller.getActiveTool()!=="box-selection"&&m&&this.controller.getItemModel(m.calcId)&&this.controller.dispatch({type:"set-selected-id",id:m.calcId,state:"selected"}),this.controller.dispatch({type:"toggle-item-settings-menu",menu:g})}}else if(!o.altKey&&!o.ctrlKey&&!o.metaKey){if(a==="Enter"||a==="Space")if(o.preventDefault(),this.controller.getActiveTool()!=="selection"&&o.stopPropagation(),this.controller.getActiveTool()==="box-selection"){let g=((l=this.keyboardAttentionManager.getKeyboardAttention())==null?void 0:l.calcId)||"";this.controller.isClickableId(g)&&(g=""),this.selectItemIfNotSecret(g,{multiSelect:!0,tentative:!1}),this.describeFocusedItem({includeDetails:!1})}else{let g=this.keyboardAttentionManager.getKeyboardAttention();this.activateGeoObjectFromKeyboard(g,o)}else if(s==="?")o.preventDefault(),o.stopPropagation(),this.controller.getGeoModel().speakCurrentGeoToolHint();else if(s==="D")o.preventDefault(),o.stopPropagation(),this.describeFocusedItem({includeDetails:!0});else if(a==="Backspace"||a==="Del"){o.preventDefault(),o.stopPropagation();let g=this.keyboardAttentionManager.getKeyboardAttention();this.controller.getActiveTool()!=="box-selection"&&g&&this.controller.getItemModel(g.calcId)&&this.controller.dispatch({type:"set-selected-id",id:g.calcId,state:"selected"}),this.controller.dispatch({type:"delete-all-selected-items"}),h=!0}else if(s==="-"||s==="="){o.preventDefault(),o.stopPropagation();let g=this.controller.getAllVisibleGeoToolbarItems(),m=g.findIndex(b=>(b==null?void 0:b.current)===this.controller.getActiveTool());for(let b=1;b<g.length;b++){let x=m+(s==="-"?-b:b);x<0&&(x=g.length+x),x>g.length-1&&(x=x-g.length);let E=(c=g[x])==null?void 0:c.current;if(this.selectGeoTool(E)){h=!0;break}}}else if(s==="["||s==="]"){o.preventDefault(),o.stopPropagation();let m=this.controller.getAllVisibleGeoToolbarItems().find(E=>(E==null?void 0:E.current)===this.controller.getActiveTool());if(!m)return;let b=m.dropdown||[m.current];if(b.length===0)return;let x=b.indexOf(m.current);for(let E=1;E<b.length;E++){let S=x+(s==="["?-E:E);S<0&&(S=b.length+S),S>b.length-1&&(S=S-b.length);let k=b[S];if(this.selectGeoTool(k)){h=!0;break}}}else if(!o.shiftKey&&s!==void 0&&s>="0"&&s<="9"){let g=(p=this.controller.getAllVisibleGeoToolbarItems()[o.which-49])==null?void 0:p.current;h=this.selectGeoTool(g)}}h&&this.handleGeoKeyboardPtMove()}else i&&(s==="X"||s==="Y"||s==="L"||s==="C")?this.speakPoint(i,s):n&&(s==="X"||s==="Y"||s==="L")&&this.manager.imageLayer.speakImageAttribute(n,s)})}selectGeoTool(e){return e?this.controller.isGeoToolEnabled(e)?(this.controller.dispatch({type:"select-geo-tool",tool:e}),!0):(Te(this.controller.s("graphing-calculator-narration-geometry-tool-disabled",{tool:this.controller.getGeoModel().getDisplayNameForTool(e)})),!1):!1}getMouseRelativeToGrapher(e){let t=this.elt.getBoundingClientRect(),o=e.touches?e.touches[0]:e,i=o.clientX-t.left,n=o.clientY-t.top;return{x:i,y:n}}_getStyledPointRadiusAdjustments(){return{radiusMultiplier:this.graphSettings.getHighlightPropertyMultiplier("pointLineWidth",!1),selectedRadiusMultiplier:this.graphSettings.getHighlightPropertyMultiplier("pointLineWidth",!0)}}_getStyledPointRadiusForPOI(e,t){let o=e.getPointSize()/2,i=e.isSelected()?t.selectedRadiusMultiplier:t.radiusMultiplier;return o*i}handleTabEvent(e,t){let o=this.controller.getActiveTool()!=="selection";if(this.keyboardAttentionManager.focusNextObjFromKeyboard({direction:e,allowWrapping:o,selectNonClickables:this.controller.getActiveTool()==="selection"})){t==null||t.preventDefault(),t==null||t.stopPropagation();return}else if(!o){this.keyboardAttentionManager.updateKeyboardAttention(void 0,{describe:!1}),e==="prev"&&(t==null||t.preventDefault(),t==null||t.stopPropagation(),this.manager.speakGrapherFocusAriaLabel());return}}_getDistanceFromStyledPOI(e,t){let o=this._getStyledPointRadiusForPOI(e,t.adjustments),i=Math.max(0,t.tolerance-o),n=t.projection.map_pt(e),a=__dcg_shared_module_exports__['M'](n.x-t.screenPt.x,n.y-t.screenPt.y),s=Math.max(0,a-o);if(s<=i)return s}_getClosestPoint(e,t,o){let i=1/0,n,a={projection:this.manager.getProjection(),adjustments:this._getStyledPointRadiusAdjustments(),screenPt:t,tolerance:o};for(let s of e){let l=this._getDistanceFromStyledPOI(s,a);l!==void 0&&l<=i&&(i=l,n=s)}return n}getViewportAsRect(){let e=this.controller.getGrapher2d().viewportController.getViewport();return{left:e.xmin,right:e.xmax,bottom:e.ymax,top:e.ymin}}findIdsThatAreOnscreen(){return this.findIdsThatIntersectBox(this.getViewportAsRect(),{ignoreClickables:!1})}findIdsThatIntersectBox(e,t){let o={};for(let i of this.manager.generateMergeDrawOrder()){let n=this.controller.getItemModel(i);if(n&&!this.controller.shouldIgnoreGraphInteractions(n)){if(n.type==="expression"){let a=this.manager.getGraphSketch(i);if(!a||Ei(n)&&t.ignoreClickables||this.controller.isItemNotSelectableBecauseItsSecret(i))continue;let s=a.branches;if(!s||!s.length)continue;for(let l=0;l<s.length;l++)if(this.doesBoxIntersectBranch(s[l],e)){o[n.id]=!0;break}}else if(n.type==="image"){let a=this.manager.getGraphImage(i);if(!a)continue;r.doesBoxIntersectAnyImage(a,e)&&(o[n.id]=!0)}}}return this.manager.poiDotsLayer.getDrawnPOI().forEach(i=>{let n=i.sketch.id,a=this.controller.getItemModel(n);a&&this.controller.shouldIgnoreGraphInteractions(a)||(a==null?void 0:a.type)==="expression"&&Ei(a)&&t.ignoreClickables||this.controller.isItemNotSelectableBecauseItsSecret(n)||i.isBareLabel()||(i.isMovable()||i.isAttachedToPlottedPoint())&&r.doesBoxContainPoint(i,e)&&(o[n]=!0)}),o}_getStyledLineAdjustments(){return{thicknessMultiplier:this.graphSettings.getHighlightPropertyMultiplier("graphLineWidth",!1),selectedThicknessMultiplier:this.graphSettings.getHighlightPropertyMultiplier("graphLineWidth",!0)}}_getStyledLineThicknessForBranch(e,t,o){let i=Math.max(0,"lineWidth"in e&&e.lineWidth||0)/2;return t?i*o.selectedThicknessMultiplier:i*o.thicknessMultiplier}_getDistanceFromStyledBranch(e,t,o,i){let n=this._getStyledLineThicknessForBranch(e,t,i.adjustments),a=this.calculateDistanceFromBranch(e,i.screenPt,i.projection,o),s=Math.max(0,a-n),l=Math.max(0,i.tolerance-n);if(s<=l)return s}getLabelUnderPoint(e){let t=this.manager.poiLabelsLayer.getInteractiveLabelUnderPoint(e);if(t&&!this.controller.shouldIgnoreGraphInteractions(t.model))switch(t.type){case"editable":return{type:"label",stackingContext:-1/0,stackingLayer:t.layerNumber,distance:0,label:{type:"editable-label",model:t.model,isClickable:void 0}};case"draggable":return{type:"label",stackingContext:-1/0,stackingLayer:t.layerNumber,distance:0,label:{type:"draggable-label",label:t.label,model:t.model,isClickable:void 0}};case"clickable":return{type:"label",stackingContext:-1/0,stackingLayer:t.layerNumber,distance:0,label:{type:"clickable-label",model:t.model,poi:t.poi,isClickable:!0}}}}getFeatureUnderPointInLayer(e,t,o,i){var h,g,m,b;let n,a=e.layer,s=e.drawOrder,l=this.manager.getProjection(),c={adjustments:this._getStyledLineAdjustments(),projection:l,screenPt:t,tolerance:o},p=1;for(let x=s.length-1;x>=0;x--){let E=s[x],S=this.controller.getItemModel(E),k=p;if(i[E]={layerNumber:a,stackingContext:k},!S){let T=this.manager.getGraphSketch(E),I=(g=(h=T==null?void 0:T.branches)==null?void 0:h[0])==null?void 0:g.tableId;if(I){let P=this.controller.getItemModel(I);(P==null?void 0:P.type)==="table"&&((m=P.regression)==null?void 0:m.id)===E&&(S=P)}}if(S&&!this.controller.shouldIgnoreGraphInteractions(S)){if(S.type==="expression"||S.type==="table"&&((b=S.regression)==null?void 0:b.id)===E){let T=this.manager.getGraphSketch(E);if(!T)continue;let I=T.branches;if(!I||!I.length)continue;if(T.hoistToTop&&!this.controller.isGeometry()&&(k=-1/0,i[E]={layerNumber:1/0,stackingContext:k}),!n||n.stackingContext>=k){let P=S.type==="table"?!1:Ei(S);for(let A=0;A<I.length;A++){let D=I[A],G=this._getDistanceFromStyledBranch(D,T.showHighlight,P,c);if(G!==void 0){let N=!1;n?(k<n.stackingContext||k===n.stackingContext&&G<n.distance-3.5)&&(N=!0):N=!0,N&&(n={type:"sketch-branch",model:S,sketch:T,distance:G,stackingContext:k,stackingLayer:a,branchInfo:{id:T.id,branch:A,sketch:T}})}}}}else if(S.type==="image"){let T=this.manager.getGraphImage(E);if(!T)continue;let I=this.getImageInfoUnderMouse(T,l.pixelsToMath.mapPoint(t),o);if(!I)continue;p+=1,k=p,i[E]={layerNumber:a,stackingContext:k},p+=1,(!n||n.stackingContext>k)&&(n={type:"image",model:T,distance:0,stackingContext:k,stackingLayer:a,listIndex:I.listIndex})}}}return n}getFeatureUnderPoint(e,t){var b;if(this.manager.scaleAxis)return;let o,i=this.getLabelUnderPoint(e);if(i){if(i.label.type==="editable-label")return i.label;o=i}let n={},a=this.manager.getDrawLayers();for(let x=a.length-1;x>=0;x--){let E=a[x],S=this.getFeatureUnderPointInLayer(E,e,t,n);S&&(o?S.stackingLayer>o.stackingLayer&&(o=S):o=S)}let s=[],l=[],c=[],p=[];this.manager.poiDotsLayer.getDrawnPOI().forEach(x=>{var k;if(x.isBareLabel())return;let E=x.sketch.id,S=this.controller.getItemModel(E);if(!(S&&this.controller.shouldIgnoreGraphInteractions(S))){if(!S&&x.sketch.branches.length>0){let T=x.sketch.branches[0].tableId,I=T!==void 0?this.controller.getItemModel(T):void 0,P=(I==null?void 0:I.type)==="table"&&Kr(I,E);if(P&&this.controller.shouldIgnoreGraphInteractions(P))return}if(x.isMovable()){let T=S&&S.type==="expression"&&((k=S.formula.geometry)==null?void 0:k.call);(!o||o.stackingLayer<=n[x.sketch.id].layerNumber)&&(T&&T.symbol==="glider"?s.push(x):l.push(x))}else x.isAttachedToPlottedPoint()?(!o||o.stackingLayer<n[x.sketch.id].layerNumber||o.stackingLayer===n[x.sketch.id].layerNumber&&o.stackingContext>=n[x.sketch.id].stackingContext)&&c.push(x):p.push(x)}});let h=this._getClosestPoint(s,e,t);if(h||(h=this._getClosestPoint(l,e,t)),h)return{type:"movable-point",poi:h,isClickable:void 0,sketch:h.sketch,model:this.controller.getItemModel(h.sketch.id)};let g=this._getClosestPoint(p,e,t+2);if(g)return{type:"poi",poi:g,isClickable:!1,model:void 0};let m=this._getClosestPoint(c,e,t);if(m){let x=this.controller.getItemModel(m.sketch.id);return x&&x.type==="expression"&&Ei(x)?{type:"static-point",poi:m,sketch:m.sketch,isClickable:!0,model:x}:{type:"static-point",poi:m,isClickable:!1,sketch:m.sketch,model:x}}if(o){if(o.type==="label")return o.label;if(o.type==="sketch-branch"){let x,E;if(o.model.type==="table")E=!0,x=!1;else{x=Ei(o.model);let S=(b=o.model.formula.typed_constant_value)==null?void 0:b.valueType;E=!(this.controller.isGeometry()&&S&&__dcg_shared_module_exports__['tb'](S))}return{type:"sketch-branch",branchInfo:o.branchInfo,sketch:o.sketch,model:o.model,isClickable:x,isTraceable:E,isSelected:this.controller.isItemSelected(o.model.id),selectionId:this.controller.isItemSelectable(o.model.id)?o.model.id:void 0}}else if(o.type==="image")return{type:"image",model:o.model,isClickable:fu(o.model),listIndex:o.listIndex,isSelected:this.controller.isItemSelected(o.model.id),selectionId:this.controller.isItemSelectable(o.model.id)?o.model.id:void 0}}}_togglePOIUnderPoint(e){if(!this.controller.isTraceEnabled())return;if(e.isClickable)return!1;let t="poi"in e&&e.poi;return!t||t.isBareLabel()||this.controller.isGeometry()&&e.type==="static-point"&&!t.hasInteractiveLabel()?!1:(this.manager.poiLabelsLayer.isOpenPOI(t)?(this.manager.poiLabelsLayer.closePOI(t),this.manager.poiLabelsLayer.setHoveredPOI(void 0)):(this.manager.poiLabelsLayer.openPOI(t),this.speakPoint(t)),this.controller.requestRedrawGraph(),!0)}getImageInfoUnderMouse(e,t,o){if(!e)return;let i=e.formula;if(!i)return;let n=i.dimensions;if(!(!n.x||!n.y||!n.width||!n.height||!n.radianAngle||!e.shouldGraph))for(let a=n.x.length-1;a>=0;a--){let s=n.x[a],l=n.y[a],c=n.radianAngle[a],p=s+Math.cos(c)*(t.x-s)-Math.sin(c)*(t.y-l),h=l+Math.sin(c)*(t.x-s)+Math.cos(c)*(t.y-l),g=.5*Math.abs(n.width[a]),m=.5*Math.abs(n.height[a]);if(p>s-g&&p<s+g&&h>l-m&&h<l+m)return{listIndex:a}}}doesBoxIntersectBranch(e,t){let o=!1,i=!1;switch(e.branchMode){case 5:case 8:case 2:case 7:break;case 6:o=!0;break;case 1:i=!0;break;case 18:case 17:case 19:case 24:return ck(t,{x1:e.segments[0][0],y1:e.segments[0][1],x2:e.segments[0][2],y2:e.segments[0][3],extendStart:e.branchMode===18,extendEnd:e.branchMode!==17&&e.branchMode!==24});case 20:return uK(t,{x:e.segments[0][0],y:e.segments[0][1],radius:e.segments[0][2]});case 21:case 23:{let[a,s]=e.segments[0],[l,c,p]=e.branchMode===21?this.getBoxIntersectArgsForArc(e):this.getBoxIntersectArgsForAngleMarker(e),h=(p-c)/2+c;return pK(t,{x0:a+l*Math.cos(c),y0:s+l*Math.sin(c),x1:a+l*Math.cos(h),y1:s+l*Math.sin(h),x2:a+l*Math.cos(p),y2:s+l*Math.sin(p)})}default:return!1}let n=e.segments;for(let a=0;a<n.length;a++){let s=n[a];if(o){let l=s;s=[];for(let c=0;c<l.length;c+=2){let p=l[c],h=l[c+1];s.push(h*Math.cos(p),h*Math.sin(p))}}else if(i){let l=s;s=[];for(let c=0;c<l.length;c+=2)s.push(l[c+1],l[c])}if(hK(t,s))return!0}return!1}getBoxIntersectArgsForArc(e){return[e.segments[0][2],e.segments[0][3],e.segments[0][4]]}getBoxIntersectArgsForAngleMarker(e){let t=e.segments[0][3],o=this.manager.getProjection(),i=Jd(t,o),n=o.pixelsToMath.dangerouslyGetXScaleFactor(),a=o.pixelsToMath.dangerouslyGetYScaleFactor();return[Math.abs(Math.min(n,a))*i,e.segments[0][2],e.segments[0][2]+t]}static doesBoxIntersectAnyImage(e,t){let o=e.formula;if(!o)return;let i=o.dimensions;if(!(!i.x||!i.y||!i.width||!i.height||!i.radianAngle||!e.shouldGraph)){for(let n=i.x.length-1;n>=0;n--)if(dk(t,{width:i.width[n],height:i.height[n],angle:i.radianAngle[n],center:{x:i.x[n],y:i.y[n]}}))return!0;return!1}}static doesBoxContainPoint(e,t){return t.left<=e.x&&e.x<=t.right&&t.top<=e.y&&e.y<=t.bottom}calculateDistanceFromBranch(e,t,o,i){let n=this.controller.isGeometry()&&e.branchMode===7;if(i||n){let l=[t.x,t.y],c=KD(o,e);for(let p of c)if(__dcg_shared_module_exports__['X'](p,l))return 0}if(e.branchMode===7)return 1/0;let s=r.getBranchesDistanceInfo(e,t,o,i,this.controller.isGeometry());return s?s.minDistance:1/0}static getBranchesDistanceInfo(e,t,o,i,n){let a=t.x,s=t.y,{mathToPixels:l,pixelsToMath:c}=o;switch(e.branchMode){case 5:if(!n&&!i)return;break;case 8:if(!i)return;break;case 6:if(!i)return;break;case 2:case 1:break;case 23:{let[S,k,T,I]=e.segments[0],P=l.dangerouslyGetXScaleFactor(),A=l.dangerouslyGetYScaleFactor(),[D,G]=c.mapCoordinatePair([a,s]),N=Jd(I,o),U=N/P,K=1/0,H=G-k,w=D-S,F=Math.atan2(H,w);if(__dcg_shared_module_exports__['K'](F,T,I))__dcg_shared_module_exports__['M'](H*A,w*P)<=N+7&&(K=0);else{let V=__dcg_shared_module_exports__['P'](D,G,S+U*Math.cos(T),k+U*Math.sin(T),S,k),B=__dcg_shared_module_exports__['P'](D,G,S+U*Math.cos(T+I),k+U*Math.sin(T+I),S,k),L=__dcg_shared_module_exports__['M'](P*(V[0]-D),A*(V[1]-G)),q=__dcg_shared_module_exports__['M'](P*(B[0]-D),A*(B[1]-G));K=Math.min(L,q)}return{closestPoint:{x:a,y:s},minDistance:K,secondDistance:K}}break;case 18:case 17:case 19:case 24:{if(!e.segments.length)return null;let S=l.mapX(e.segments[0][0]),k=l.mapY(e.segments[0][1]),T=l.mapX(e.segments[0][2]),I=l.mapY(e.segments[0][3]),P=e.branchMode===18,A=e.branchMode===18||e.branchMode===19,D=__dcg_shared_module_exports__['Q'](a,s,S,k,T,I,P,A);if(!D)return null;let G=__dcg_shared_module_exports__['M'](D[0]-a,D[1]-s);return{closestPoint:{x:D[0],y:D[1]},minDistance:G,secondDistance:G}}case 21:case 20:{let S=e.segments[0][0],k=e.segments[0][1],T=e.segments[0][2],I=e.branchMode===21?e.segments[0][3]:0,P=e.branchMode===21?e.segments[0][4]:Math.PI*2,A=__dcg_shared_module_exports__['R'](c.mapX(a),c.mapY(s),S,k,T,I,P);if(!A)return null;let D=l.mapCoordinatePair(A),G=__dcg_shared_module_exports__['M'](D[0]-a,D[1]-s);return{closestPoint:{x:D[0],y:D[1]},minDistance:G,secondDistance:G}}default:return}let p=1/0,h=1/0,g,m;for(let S=0;S<e.segments.length;S++){let k=e.segments[S];for(let T=0;T<k.length-3;T+=2){let I=k[T],P=k[T+1],A=k[T+2],D=k[T+3];if(e.branchMode===6){let V=P,B=I;I=V*Math.cos(B),P=V*Math.sin(B);let L=D,q=A;A=L*Math.cos(q),D=L*Math.sin(q)}e.branchMode===1&&([I,P]=[P,I],[A,D]=[D,A]);let[G,N]=l.mapCoordinatePair([I,P]),[U,K]=l.mapCoordinatePair([A,D]),H=__dcg_shared_module_exports__['P'](0,0,G-a,N-s,U-a,K-s),w=__dcg_shared_module_exports__['M'](H[0],H[1]);H[e.branchMode===1?1:0]<0?w<p&&(p=w,g=H):w<h&&(h=w,m=H)}}let b=p<h?g:m;if(!b)return;let x=b[0]+a,E=b[1]+s;return{closestPoint:{x,y:E},minDistance:Math.min(p,h),secondDistance:Math.max(p,h)}}static getBranchesTracePoint(e,t,o,i){let n,a=o.pixelsToMath.mapPoint(t);switch(e.branchMode){case 20:case 21:{let N=e.branchMode===21?e.segments[0][3]:0,U=e.branchMode===21?e.segments[0][4]:Math.PI*2;n=__dcg_shared_module_exports__['R'](a.x,a.y,e.segments[0][0],e.segments[0][1],e.segments[0][2],N,U);break}case 18:case 19:case 17:n=__dcg_shared_module_exports__['Q'](a.x,a.y,e.segments[0][0],e.segments[0][1],e.segments[0][2],e.segments[0][3],e.branchMode===18,e.branchMode!==17);break}if(n)return{x:n[0],y:n[1]};if(!e)return;let s="compiled"in e&&e.compiled,l=s&&s.fn;if(!l)return;let c=this.getBranchesDistanceInfo(e,t,o,!1,i);if(!c)return;let{mathToPixels:p,pixelsToMath:h}=o,g,m;e.branchMode===2?(m="x",g="y"):(m="y",g="x",p=new __dcg_shared_module_exports__['qd'](p.yScale,p.xScale),h=p.inverse());let b=Math.pow(c.minDistance/c.secondDistance,2),x=c.closestPoint[m]*(1-b)+t[m]*b,E=.5,S=.5,k=p.mapY(l(h.mapX(x-E))),T=p.mapY(l(h.mapX(x))),I=p.mapY(l(h.mapX(x+E))),P=E*Math.min(1,S/Math.abs(k-T)),A=E*Math.min(1,S/Math.abs(I-T));isFinite(P)||(P=E),isFinite(A)||(A=E);let D=Br(h.mapX(x-P),h.mapX(x+A)),G=l(D);if(!isFinite(p.mapY(G))){let N=p.mapX(D)-E,U=p.mapX(D)+E,K=h.mapX(N),H=h.mapX(U),w=l(K),F=l(H),V=p.mapY(w),B=p.mapY(F);Math.abs(V-t[g])<Math.abs(B-t[g])?G=w:G=F}return{x:e.branchMode===2?D:G,y:e.branchMode===2?G:D}}getPointInfo(e){switch(e.type){case"movable-point":case"static-labeled-point":return k7(e);case"poi":return k7(e.poi.getMovablePoint());case"movable-point-parent":return{calcId:e.id,isReverseDrag:!0};case"image":return{calcId:e.image.formula.center_reference_id,isReverseDrag:!1};case"draggable-label":return{calcId:e.model.id,isReverseDrag:!1};default:return e}}getDraggablePointOrAncestors(e,t){if(!this.controller.isGeometry()){let l=this.controller.getItemModel(e);if(l&&l.type==="expression"&&tk(l)){let c=z8(l);return c?eo(l)===__dcg_shared_module_exports__['hd'].NONE?[]:[{type:"movable-point-parent",id:e,shouldDelayUntilRealMove:!0,...c}]:[]}}let o=[e];(this.isBoxSelectActive(t)||this.controller.isItemSelected(e))&&o.push(...this.controller.getAllSelectedItems().map(l=>l.id).filter(l=>l!==e));let i=!1,n={},a=[];Ju({controller:this.controller},(l,c)=>{if(!c&&l.typedRuntimeValue.valueType===__dcg_shared_module_exports__['va']&&l.data.isMovablePoint){let[p,h]=l.typedRuntimeValue.value;n[l.calcId]={id:l.calcId,value:{x:p,y:h}}}});let s=this.controller.getGeoModel().getComputedBoard().computeReversibilityLineages(o);for(let l in s){let c=n[l];if(!c){i=!0;break}a.push({type:"movable-point-parent",id:l,x:c.value.x,y:c.value.y,shouldDelayUntilRealMove:!0,transformations:s[l]})}return i?[]:a}getFeatureCenterMathPoint(e){switch(e.type){case"poi":return e.poi;case"movable-point-parent":let t={x:e.x,y:e.y};if(e.transformations){let o=__dcg_shared_module_exports__['pc'](e.transformations.forward,[t.x,t.y]);t={x:o[0],y:o[1]}}return t;case"image":return{x:e.image.formula.dimensions.x[0],y:e.image.formula.dimensions.y[0]};case"draggable-label":return{x:e.label.x,y:e.label.y}}}startReverseDrag(e,t,o){let i=this.getMouseRelativeToGrapher(t),n=this.getDraggablePointOrAncestors(e,t).map(a=>({...a,startScreenPt:i}));return n.length>0?(this.startMovingPoints({poiUnderMouse:o,evt:t,points:n,originalTargetObjectId:e}),!0):!1}startMovingPoints(e){let t=e.points,o=!1,i=t.map(this.getPointInfo),n=this.controller;function a(){o=!0,n.dispatch({type:"start-moving-points",points:i})}let s=!1;for(let g of t)if(g.shouldDelayUntilRealMove){s=!0;break}s||a();let l;e.poiUnderMouse&&e.poiUnderMouse.isMovable()&&(l=e.poiUnderMouse.getMovablePoint().id),this.manager.movablePointsLayer.setPressedPointId(l);let c=t.map(g=>{let m=this.manager.getProjection().map_pt(this.getFeatureCenterMathPoint(g));return{x:g.startScreenPt.x-m.x,y:g.startScreenPt.y-m.y}}),p,h=()=>{if(!p&&s&&!o||(p!=null||(p=this.lastMoveEvtForSimulatingTapMoveWhenDynamicBoundsChangeViewport),!p))return;this.shouldTreatSmallDragAsClick(e.evt,p)||this.controller.dispatch({type:"clear-tentative-selection"}),o||a();let g=this.manager.getProjection(),m=this.getMouseRelativeToGrapher(p);p=void 0,this.controller.dispatch({type:"on-move-points",points:t.map(this.getPointInfo),screenPts:c.map(b=>({x:m.x-b.x,y:m.y-b.y})),transform:t.map(b=>b.type==="movable-point-parent"?b.transformations:void 0),previousScreenPts:t.map(b=>b.startScreenPt),projection:g})};this.manager.registerMovablePointListener(h),this.addGlobalMouseListener("dcg-tapmove",g=>{p=g,this.lastMoveEvtForSimulatingTapMoveWhenDynamicBoundsChangeViewport=g}),this.addGlobalMouseListener("dcg-tapend dcg-tapcancel",g=>{h(),this.manager.deregisterMovablePointListener(),this.removeAllGlobalMouseListeners(),this.manager.movablePointsLayer.setPressedPointId(void 0),o&&(Dt(g,"dragged-clickable-object"),this.controller.dispatch({type:"stop-moving-points",points:t.map(this.getPointInfo)}))})}startTracingBranch(e,t){if(!e.isTraceable)return;let o=e.branchInfo;this.manager.markLabelsDirty(),this.lastScreenPt=t;let i=this.manager.getProjection(),a=o.sketch.branches[o.branch],s=r.getBranchesTracePoint(a,t,i,this.controller.isGeometry());s&&this.speakPoint(s),this.manager.traceLayer.setTraceInfo({pt:s,branchInfo:o}),this.controller.requestRedrawGraph(),this.addGlobalMouseListener("dcg-tapmove",this.handleTraceUpdate.bind(this)),this.addGlobalMouseListener("dcg-tapend dcg-tapcancel",this.stopTracingBranch.bind(this))}stopTracingBranch(e){this.manager.markLabelsDirty();let t=this.manager.poiLabelsLayer.getHoveredPOI();t&&!this.manager.poiLabelsLayer.isOpenPOI(t)&&(this.manager.poiLabelsLayer.openPOI(t),this.speakPoint(t),this.controller.requestRedrawGraph()),this.lastScreenPt=void 0,this.manager.traceLayer.setTraceInfo(void 0),this.controller.requestRedrawGraph(),this.removeAllGlobalMouseListeners()}handleTraceUpdate(e){if(!this.manager.traceLayer.traceInfo)return;let t=this.manager.getProjection(),o;if(e)o=this.getMouseRelativeToGrapher(e),this.lastScreenPt=o,this.manager.markLabelsDirty();else if(this.lastScreenPt)o=this.lastScreenPt;else return;let i=1/0,n=-1,a=this.manager.traceLayer.traceInfo,s=this.manager.graphSketches[a.branchInfo.sketch.id];if(!s)return;a.branchInfo.sketch=s;let l=a.branchInfo.sketch.branches;for(let h=0;h<l.length;h++){let g=this.calculateDistanceFromBranch(l[h],o,t,!1);g<i&&(n=h,i=g)}let c=l[n],p=c?r.getBranchesTracePoint(c,o,t,this.controller.isGeometry()):void 0;p&&this.speakPoint(p),this.manager.traceLayer.traceInfo.branchInfo.branch=n,this.manager.traceLayer.traceInfo.pt=p,this.controller.requestRedrawGraph()}hasNonlinearMoveStrategy(e){if(!e||e.type!=="movable-point-parent")return!1;let t=this.controller.getItemModel(e.id);if(!t||t.type!=="expression"||!t.formula)return!1;let o=t.formula.move_strategy;return!o||!o[0]?!1:o[0].type==="updateSliderNonlinear"}movePointsFromKeyboard(e,t){if(!t)return;let o=this.manager.getProjection(),i=e.map(m=>{let{x:b,y:x}=o.map_pt(this.getFeatureCenterMathPoint(m));return{x:b,y:x}}),n=0,a=0,s=Pe(t),l=(o.pixelCoordinates.right-o.pixelCoordinates.left)/40,c=(o.pixelCoordinates.bottom-o.pixelCoordinates.top)/40,p=s==="Up"||s==="Down"?c:l;p=t.shiftKey?p*5:p;let h,g;if(s==="Up"?(g="y",a-=p,h=t.shiftKey?"bigup":"up"):s==="Down"?(g="y",a+=p,h=t.shiftKey?"bigdown":"down"):s==="Left"?(g="x",n-=p,h=t.shiftKey?"bigdown":"down"):s==="Right"&&(g="x",n+=p,h=t.shiftKey?"bigup":"up"),h){let m=i.map(({x,y:E})=>({x:x+n,y:E+a})),b;g==="x"||e.some(x=>this.hasNonlinearMoveStrategy(x))?b={x:h}:g==="y"&&(b={y:h}),this.controller.dispatch({type:"on-move-points",points:e.map(x=>this.getPointInfo(x)),screenPts:m,previousScreenPts:i,transform:e.map(x=>x.type==="movable-point-parent"?x.transformations:void 0),projection:o,keyboardDirection:b})}}getGeoKeyboardPt(){return this.initGeoKeyboardPt(),this.geoKeyboardPt}setGeoKeyboardPt(e){this.geoKeyboardPt={...this.geoKeyboardPt,x:e.x,y:e.y},e.fromArrowKeys&&(this.geoKeyboardPt.lastArrowedX=e.x,this.geoKeyboardPt.lastArrowedY=e.y),this.controller.requestRedrawGraph()}initGeoKeyboardPt(){if(!isNaN(this.geoKeyboardPt.x)&&!isNaN(this.geoKeyboardPt.y))return;let e=this.manager.getProjection();if(!e)return;let t=e.viewport,o=Da(e),i=o.minorStepX,n=o.minorStepY,a=Math.round((t.xmin+t.xmax)/2/i)*i,s=Math.round((t.ymin+t.ymax)/2/n)*n;this.setGeoKeyboardPt({x:a,y:s})}moveGeoPointFromKeyboard(e){if(!e)return;this.initGeoKeyboardPt();let t=this.manager.getProjection();if(!t)return;let o=t.viewport,i=Da(t),n=i.minorStepX/4,a=i.minorStepY/4,s=this.geoKeyboardPt.x,l=this.geoKeyboardPt.y,c=Pe(e);c==="Down"?e.ctrlKey?l=o.ymin:l=Math.max(Math.round((l-a)/a)*a,o.ymin):c==="Up"?e.ctrlKey?l=o.ymax:l=Math.min(Math.round((l+a)/a)*a,o.ymax):c==="Left"?e.ctrlKey?s=o.xmin:s=Math.max(Math.round((s-n)/n)*n,o.xmin):c==="Right"&&(e.ctrlKey?s=o.xmax:s=Math.min(Math.round((s+n)/n)*n,o.xmax)),!(s===this.geoKeyboardPt.x&&l===this.geoKeyboardPt.y)&&(this.setGeoKeyboardPt({x:s,y:l,fromArrowKeys:!0}),this.handleGeoKeyboardPtMove(e),this.controller.getEvaluator().notifyWhenSynced(()=>{this.controller.shouldNarrateCoordinates()&&gt(Ea(this.controller,this.geoKeyboardPt.x,this.geoKeyboardPt.y));let p=this.manager.clickableObjectsLayer.getHoveredObjects(),h=[];for(let g in p){let m=this.controller.getItemModel(g,{includePreviewItems:!0});m!==void 0&&h.push(Yr(m,this.controller,{includeDetails:!1,depth:this.controller.isToolPreviewItem(g)?0:1}))}h.length&&gt(this.controller.s("graphing-calculator-narration-geometry-near-item",{item:Zn(this.controller.getLanguage(),h)})),Te()}))}handleGeoKeyboardPtMove(e){this.initGeoKeyboardPt();let t=this.controller.getGeoModel(),o=!!(e&&e.shiftKey);t.onMouseAction("move",{pt:this.geoKeyboardPt,shift:o,tolerance:this.getToleranceByDevice("keyboard")}),t.onPreviewChange()}activateGeoObjectFromKeyboard(e,t){e!=null&&e.geoDef?this.tapGeoObjectFromKeyboard(e.geoDef,t):this.tapGeoPointFromKeyboard(t)}tapGeoObjectFromKeyboard(e,t){var a;let o=this.controller.getGeoModel(),i=o.getCurrentTool();if(!i)return;i.onFocus(e);let n=i.tryCommitResults();n.committed&&this.controller.dispatch({type:"commit-geo-objects",shiftKey:t.shiftKey,...n}),o.updateNextObjectId(o.controller.findLastTokenNumber()+1),o.clearHoveredObjects(),o.onPreviewChange(),this.speakGeoReleaseAction(this.controller.getActiveTool(),(a=i.getSpec)==null?void 0:a.call(i),n.committed),this.keyboardAttentionManager.clearAttentionIfNotTabbable()}tapGeoPointFromKeyboard(e){var l;this.initGeoKeyboardPt();let t=this.controller.getGeoModel(),o=this.controller.getActiveTool(),i=t.getCurrentTool(),n=(l=i.getSpec)==null?void 0:l.call(i),a=!!e.shiftKey,s=t.onMouseAction("release",{pt:this.geoKeyboardPt,shift:a,tolerance:this.getToleranceByDevice("keyboard")});s.committed&&this.controller.dispatch({type:"commit-geo-objects",shiftKey:e.shiftKey,...s}),t.onMouseAction("move",{pt:this.geoKeyboardPt,shift:a,tolerance:this.getToleranceByDevice("keyboard")}),t.onPreviewChange(),this.speakGeoReleaseAction(o,n,s.committed),this.keyboardAttentionManager.clearAttentionIfNotTabbable()}speakGeoReleaseAction(e,t,o){var i;if(o!==void 0){let n=Object.keys(o);if(!n.length||!t)return;let a="";if(e==="point"||e==="expression-edit"){for(let s in o){let l=o[s];if(l){if(l.type==="point-reference"){a=this.controller.s("graphing-calculator-text-geometry-tool-point-display-name");break}else if(l.type==="intersection"){a=this.controller.s("graphing-calculator-text-geometry-intersection");break}else if(l.type==="glider"){a=this.controller.s("graphing-calculator-text-geometry-glider");break}else if(l.type==="vector-endpoint"){l.location==="start"?a=this.controller.s("graphing-calculator-text-geometry-tool-vector-start-point-display-name"):a=this.controller.s("graphing-calculator-text-geometry-tool-vector-end-point-display-name");break}}}a===""&&(a=this.controller.s("graphing-calculator-text-geometry-tool-point-display-name"))}else{let s=(i=t.outputs[0])==null?void 0:i.type;switch(s){case"arc":a=this.controller.s("graphing-calculator-text-geometry-tool-arc-display-name");break;case"circle":a=this.controller.s("graphing-calculator-text-geometry-tool-circle-display-name");break;case"line":a=this.controller.s("graphing-calculator-text-geometry-tool-line-display-name");break;case"segment":a=this.controller.s("graphing-calculator-text-geometry-tool-segment-display-name");break;case"ray":a=this.controller.s("graphing-calculator-text-geometry-tool-ray-display-name");break;case"vector-copy":a=this.controller.s("graphing-calculator-text-geometry-tool-vector-copy-display-name");break;case"vector":a=this.controller.s("graphing-calculator-text-geometry-tool-vector-display-name");break;case"parallel":a=this.controller.s("graphing-calculator-text-geometry-tool-parallel-display-name");break;case"perpendicular":a=this.controller.s("graphing-calculator-text-geometry-tool-perpendicular-display-name");break;case"anglebisector":a=this.controller.s("graphing-calculator-text-geometry-tool-angle-bisector-display-name");break;case"midpoint":a=this.controller.s("graphing-calculator-text-geometry-tool-midpoint-display-name");break;case"polygon":a=this.controller.s("graphing-calculator-text-geometry-tool-polygon-display-name");break;case"angle":a=this.controller.s("graphing-calculator-text-geometry-tool-angle-display-name");break;case"directedangle":a=this.controller.s("graphing-calculator-text-geometry-tool-directed-angle-display-name");break;case"reflect":a=this.controller.s("graphing-calculator-text-geometry-tool-reflect-display-name");break;case"translate":a=this.controller.s("graphing-calculator-text-geometry-tool-translate-display-name");break;case"dilate":a=this.controller.s("graphing-calculator-text-geometry-tool-dilate-display-name");break;case"rotate":a=this.controller.s("graphing-calculator-text-geometry-tool-rotate-display-name");break;case"vector-endpoint":case"expression-edit-preview-latex":case"point":case"intersection":case"glider":case"slider":case"polygon-angle":case"polygon-directedangle":case"compass":case"polygon-segment":case"point-reference":case void 0:a=this.controller.s("shared-calculator-narration-item-unknown");break;default:let l=s;throw new Error("Exhaustive Check failed"+l)}}n.length===1?Te(this.controller.s("graphing-calculator-narration-geometry-added-object-type",{type:a})):a!=="graphing-calculator-text-geometry-point"?n.length===2?Te(this.controller.s("graphing-calculator-narration-geometry-added-object-type-and-point",{type:a})):Te(this.controller.s("graphing-calculator-narration-geometry-added-object-type-and-points",{type:a,points:n.length-1})):Te(this.controller.s("graphing-calculator-narration-geometry-added-points",{points:n.length}))}else this.controller.getGeoModel().speakCurrentGeoToolHint()}describeFocusedItem(e){let t=this.keyboardAttentionManager.getKeyboardAttention(),o=this.controller.getItemModel((t==null?void 0:t.calcId)||"");this.controller.getEvaluator().notifyWhenSynced(()=>{var i,n;if(!this.controller.isGeometry()&&o&&o.type==="image"&&((i=this.manager.imageLayer.getFocusedImage())==null?void 0:i.id)===o.id){this.manager.imageLayer.speakAriaAlert();return}o&&((n=this.manager.movablePointsLayer.getPOIUnderAttention())==null?void 0:n.sketch.id)===o.id&&this.manager.movablePointsLayer.speakAriaAlert()||Te(Yr(o,this.controller,{includeDetails:e.includeDetails,description:t==null?void 0:t.description,poi:this.manager.movablePointsLayer.getPOIUnderAttention(),listIndex:t==null?void 0:t.listIndex,polygonEdge:t==null?void 0:t.polygonEdge,includeSelectionState:this.controller.isGeometry()&&(this.controller.getActiveTool()==="box-selection"||this.controller.getActiveTool()==="selection")}))})}getPointFromFocusedItem(){var p;let e=this.keyboardAttentionManager.getKeyboardAttention(),t=this.controller.getItemModel((e==null?void 0:e.calcId)||"");if(!t||t.type!=="expression"||!t.latex)return;let o=t.formula.typed_constant_value;if(!o||!this.manager.getProjection())return;let n=o.valueType,a=o.value;if(__dcg_shared_module_exports__['qb'](o.valueType)){let h=e==null?void 0:e.listIndex;h&&(n=__dcg_shared_module_exports__['rb'](n),a=a[h])}let s=e==null?void 0:e.polygonEdge;if(n===__dcg_shared_module_exports__['Da']&&s!==void 0&&s>=0&&a.length>s){let h=a[s],g=a[(s+1)%a.length];n=__dcg_shared_module_exports__['Ea'],a=[h,g]}let l=NaN,c=NaN;return n===__dcg_shared_module_exports__['va']?(l=a[0],c=a[1]):n===__dcg_shared_module_exports__['Ia']||n===__dcg_shared_module_exports__['Ka']||n===__dcg_shared_module_exports__['Ea']?(l=(a[0][0]+a[1][0])/2,c=(a[0][1]+a[1][1])/2):n===__dcg_shared_module_exports__['Sa']?(l=a[1][0]+a[0][0]/2,c=a[1][1]+a[0][1]/2):(p=a[0])!=null&&p.length&&(l=a[0][0],c=a[0][1]),{x:l,y:c}}moveGeoKeyboardPtToFocusedItem(e){let t=this.getPointFromFocusedItem();if(!t)return;let{x:o,y:i}=t,n=this.keyboardAttentionManager.getKeyboardAttention(),a=this.controller.getFocusLocation(),s=a&&a.type==="expression"&&a.isFakeGraphFocus;this.controller.getGeoModel().setObjectHovered({calcId:(n==null?void 0:n.calcId)||"",listIndex:void 0}),!isNaN(o)&&!isNaN(i)?this.setGeoKeyboardPt({x:o,y:i}):!s&&this.controller.isVirtualMouseAllowed()&&e.describe&&Te(this.controller.s("graphing-calculator-narration-geometry-unable-to-move"))}speakPoint(e,t){if(!(!e||!this.manager.getAudioTrace()||!this.manager.getProjection()))switch(t){case"X":Te(_s(this.controller,e.x));break;case"Y":Te(Ms(this.controller,e.y));break;case"L":"ariaLabel"in e&&e.ariaLabel?Te(e.ariaLabel):Te(this.controller.s("graphing-calculator-narration-poi-graph-point"));break;case"C":"sketch"in e&&Te(fl(this.controller,e.sketch.color))}}selectItemIfNotSecret(e,t){this.controller.isItemNotSelectableBecauseItsSecret(e)||(!this.controller.isMultiSelectEnabled()||!t.multiSelect?this.controller.dispatch({type:"set-selected-id",id:e,state:t.tentative?"tentatively-selected":"selected"}):this.controller.dispatch({type:"toggle-selected-with-multi-select",id:e,state:t.tentative?"tentatively-selected":"selected"}))}convertTouchEventToMathPoint(e){let{clientX:t,clientY:o}=e.changedTouches[0],i=this.manager.elt.getBoundingClientRect();return this.controller.getGeoModel().convertCanvasPixelsToPoint({x:t-i.left,y:o-i.top})}handleGeoTapStart(e,t){let o=this.controller.getGeoModel();this.canceledGeoToolplayWhilePressed=!1;let i=e.shift;return o.onMouseAction("move",{pt:e.mathPoint,shift:i,tolerance:this.getToleranceByDevice(e.device)}).handled?(e.device==="mouse"?this.handleGeoTapMove(e):(o.onPreviewChange(),this.updateGeoHoveredObjects()),o.getToolMode()==="expression-edit"&&t.preventDefault(),!0):!1}updatePointerState(e){var n;let t=e.target&&e.target instanceof HTMLElement&&e.target.closest(".dcg-geometry-toolbar-view"),o=this.isEventWithinInstance(e),i;return e.type==="dcg-tapstart"?i=!0:e.type==="dcg-tapend"?i=!1:i=!!((n=this.pointerState)!=null&&n.isPressed),this.pointerState={mathPoint:this.convertTouchEventToMathPoint(e),device:e.device,shift:!!e.shiftKey,isPressed:i,isOnToolbar:t,isWithinInstance:o},(e.type==="dcg-tapmove"||e.type==="dcg-tapstart")&&this.updateClickToInsertMode(),this.pointerState}updateClickToInsertMode(){var o;let e=this.pointerState;if(!e||!this.controller.isGeometry()||((o=this.controller.getFocusLocation())==null?void 0:o.type)!=="expression")return;let t=this.controller.getGeoModel();t.getClickToInsertMode()!=="permissive"&&e.shift?t.getObjectDefUnderMouse(e.mathPoint,this.getToleranceByDevice(e.device),{shouldUseJitEdges:()=>!0,isValidNextInputType:()=>!0})&&this.controller.dispatch({type:"update-click-to-insert-mode",clickToInsertMode:"permissive"}):t.getClickToInsertMode()==="permissive"&&!e.shift&&this.controller.dispatch({type:"update-click-to-insert-mode",clickToInsertMode:"valid-type"})}handleShiftKeyChange(e){let t=this.pointerState;if(!(!t||t.shift===e)&&(t.shift=e,this.updateClickToInsertMode(),this.controller.isGeoToolActive())){let o=this.controller.getGeoModel();o.onMouseAction("move",{pt:t.mathPoint,shift:t.shift,tolerance:this.getToleranceByDevice("mouse")}),o.onPreviewChange()}}handleGeoTapMove(e){let t=this.controller.getGeoModel(),o;return!e.isOnToolbar&&(e.isWithinInstance||e.isPressed)?o=t.onMouseAction("move",{pt:e.mathPoint,shift:e.shift,tolerance:this.getToleranceByDevice(e.device)}).handled:(t.onMouseAction("move",{pt:{x:NaN,y:NaN},shift:!1,tolerance:0}),o=!0),t.onPreviewChange(),o}replayGeoTapMove(){let e=this.controller.getGeoModel(),t=this.pointerState;t&&(e.onMouseAction("move",{pt:{...t.mathPoint},shift:t.shift,tolerance:this.getToleranceByDevice("mouse")}),e.onPreviewChange())}handleGeoTapEnd(e,t){var l;let o=this.controller.getGeoModel(),i=this.canceledGeoToolplayWhilePressed?{committed:void 0}:o.onMouseAction("release",{pt:e.mathPoint,shift:e.shift,tolerance:this.getToleranceByDevice(e.device)});this.canceledGeoToolplayWhilePressed=!1,i.committed&&this.controller.dispatch({type:"commit-geo-objects",shiftKey:e.shift,...i}),e.isWithinInstance&&e.device==="mouse"?this.handleGeoTapMove(e):o.onPreviewChange();let n=this.controller.getActiveTool(),a=o.getCurrentTool(),s=(l=a.getSpec)==null?void 0:l.call(a);this.speakGeoReleaseAction(n,s,i.committed),o.getToolMode()==="expression-edit"&&t.preventDefault()}isEventWithinInstance(e){return e.target?this.manager.elt.contains(e.target):!1}updateGeoHoveredObjects(){let e=this.controller.getGeoModel(),t={};e.getHoveredItems().forEach(o=>{let i;if("tokenId"in o){let n=this.controller.getGeoTokenInfoFromIdentifier(__dcg_shared_module_exports__['ja'](o.tokenId));i=n&&n.calcId}else i=o.calcId;if(i!==void 0){let n=t[i];n?o.listIndex===void 0?n.listIndexes=void 0:n.listIndexes!==void 0&&(n.listIndexes[o.listIndex]=!0):t[i]={listIndexes:o.listIndex===void 0?void 0:{[o.listIndex]:!0}}}}),this.manager.clickableObjectsLayer.setHoveredObjects(t),this.manager.movablePointsLayer.setGeoHoveredObjects(this.controller.getActiveTool()==="point"?{}:t)}cancelGeoToolplay(){var e;this.canceledGeoToolplayWhilePressed=!!((e=this.pointerState)!=null&&e.isPressed),this.updateGeoHoveredObjects()}startBoxSelect(e){let t={};this.controller.getAllSelectedItems().forEach(n=>t[n.id]=!0);let o=this.manager.getProjection().reverse_map_pt(this.getMouseRelativeToGrapher(e)),i;this.addGlobalMouseListener("dcg-tapmove",n=>{i=this.manager.getProjection().reverse_map_pt(this.getMouseRelativeToGrapher(n));let a={left:Math.min(o.x,i.x),top:Math.min(o.y,i.y),right:Math.max(o.x,i.x),bottom:Math.max(o.y,i.y)};this.manager.setBoxSelectRectangle(a);let s=this.findIdsThatIntersectBox(a,{ignoreClickables:!0});this.controller.dispatch({type:"set-all-selected-ids",ids:{...t,...s}})}),this.addGlobalMouseListener("dcg-tapend dcg-tapcancel",n=>{this.removeAllGlobalMouseListeners(),this.manager.setBoxSelectRectangle(void 0),i||this.controller.dispatch({type:"set-none-selected"})})}updateAria(){let e=this.keyboardAttentionManager.getKeyboardAttention();if(!e||!this.lastClickedKeyboardAttention||e.calcId!==this.lastClickedKeyboardAttention.calcId||e.listIndex!==this.lastClickedKeyboardAttention.listIndex){this.lastClickedKeyboardAttention=void 0,this.lastClickedDescription=void 0;return}let t=this.controller.getItemModel(e.calcId);if(!t)return;let o=_i(t,e.listIndex);o&&o!==this.lastClickedDescription&&(this.lastClickedDescription=o,this.speakThrottledDescription(o))}};function k7(r){return{calcId:r.sketch.id,isReverseDrag:!1,scaleFactor:r.type==="movable-point"?r.scaleFactor:void 0,tableInfo:r.type==="movable-point"?r.tableInfo:void 0}}function fR(r,e){return`${r}_dcg_delim_${e}`}var ov=class{constructor(e){this.hoveredObjects={},this.grapher=e,this.controller=this.grapher.controller,this.renderedTabTargetOrder=[],this.renderedTabTargets={}}getOrderedTabTargets(){return this.renderedTabTargetOrder.map(e=>{let t=this.renderedTabTargets[e];return{calcId:t.id,listIndex:t.listIndex,polygonEdge:void 0,description:t.description}})}recomputeClickableObjects(){var o;this.renderedTabTargets={},this.renderedTabTargetOrder=[];let e=this.controller.get2dPOIController(),t=e.getViewportAsRect();for(let i of this.grapher.getTabOrder()){let n=this.controller.getItemModel(i);if(!n)continue;let a=this.grapher.getGraphSketch(i),s=this.grapher.getGraphImage(i),l=this.grapher.getProjection(),c;if(a&&n.type==="expression"&&Ei(n))for(let p=0;p<a.branches.length;p++){let h=a.branches[p];__dcg_shared_module_exports__['vd'](h)?a.getBranchPOI(p).forEach(g=>{c=g.pointIdxOnBranch||0,Ef.doesBoxContainPoint(g,t)&&this.addTabTarget(n,c)}):(c=(h==null?void 0:h.listIndex)||0,e.doesBoxIntersectBranch(h,t)&&this.addTabTarget(n,c))}else if(s&&s.shouldGraph&&n.type==="image"&&fu(n)){let p=n.formula&&n.formula.dimensions;if(!((o=p.x)!=null&&o.length))continue;for(let h=0;h<p.x.length;h++)uk(l,n,h)&&this.addTabTarget(n,h)}}Object.keys(this.hoveredObjects).length||this.pressedObject?this.grapher.setLayerClass("clickableObjects","dcg-mouse-over-clickable-object"):this.grapher.setLayerClass("clickableObjects",void 0),this.grapher.poiController.updateAria()}addTabTarget(e,t){let o=fR(e.id,t);this.renderedTabTargets[o]===void 0&&(this.renderedTabTargetOrder.push(o),this.renderedTabTargets[o]={type:e.type,id:e.id,listIndex:t,description:this.getComputedDescription(e,t)})}getTabIndex(e){if(this.controller.getActiveTool()!=="selection"||!this.renderedTabTargets[e])return-1;let o=this.grapher.settings;return!o.config.graphpaper||!o.config.enableTabindex?-1:0}getAriaHidden(){return!this.grapher.settings.config.graphpaper}getCachedDescription(e){return this.renderedTabTargets[e].description}getComputedDescription(e,t){let o="",i=_i(e,t);return i?o=i:this.controller.isGeometry()&&Gi(e)?o=Yr(e,this.controller,{includeDetails:!0,listIndex:t}):(o=this.grapher.getAudioTrace().getExpressionAriaLabel(e.id),e.type==="expression"&&km(e)&&(o=this.controller.s("graphing-calculator-narration-item-with-list-index",{listIndex:t+1,item:o}))),this.controller.s("shared-calculator-narration-item-clickable",{item:vr(o)})}getModelId(e){let t=this.renderedTabTargets[e];return t?t.id:""}getListIndex(e){let t=this.renderedTabTargets[e];if(t)return t.listIndex}isKeyboardFocused(e,t){if(!e)return!1;let o=this.grapher.poiController.keyboardAttentionManager.getKeyboardAttention(),i=o==null?void 0:o.calcId;return e===i&&(t===void 0||t===(o==null?void 0:o.listIndex))}shouldDrawHovered(e,t,o){if(!t)return!1;if(this.isKeyboardFocused(t,o))return!0;let{translationPreviewVectorParents:i,rotationPreviewAngleMarkerParents:n}=e.transformationPreviewParentData;if(i.has(t)||n.has(t)&&!this.controller.isToolPreviewItem(t))return!0;if(this.isAnObjectPressed()&&!this.isObjectPressed(t))return!1;let a=this.getHoveredObjectById(t);return a?a.listIndexes===void 0||o===void 0?!0:!!a.listIndexes[o]:!1}setHoveredObjects(e){__dcg_shared_module_exports__['s'](e,this.hoveredObjects)||(this.hoveredObjects=e,this.requestRedrawNextFrame())}getHoveredObjects(){let e=this.grapher.poiController.keyboardAttentionManager.getKeyboardAttention();if(e){let t=__dcg_shared_module_exports__['Uc'](this.hoveredObjects),o=t[e.calcId],i=e.listIndex||0;return o?o.listIndexes?o.listIndexes[i]=!0:o.listIndexes={[i]:!0}:(o={listIndexes:{[i]:!0}},t[e.calcId]=o),t}else return this.hoveredObjects}getHoveredObjectById(e){return this.getHoveredObjects()[e]}shouldDrawPressed(e,t){if(!e)return!1;let o=this.pressedObject;return!o||o.id!==e?!1:t===void 0?!0:o.listIndex===t}isObjectPressed(e){return e===void 0?!1:!!(this.pressedObject&&this.pressedObject.id===e)}setPressedObject(e){!e&&!this.pressedObject||e&&this.pressedObject&&e.id===this.pressedObject.id&&e.listIndex===this.pressedObject.listIndex||(this.pressedObject=e,this.requestRedrawNextFrame())}getPressedObject(){return this.pressedObject}isAnObjectPressed(){return!!this.pressedObject}requestRedrawNextFrame(){this.controller.requestRedrawGraph()}shouldDrawGhosted(e){if(!e)return!1;let t=this.controller.getItemModel(e);return!t||t.type!=="expression"?!1:$o(t)}};ce();ie();var $I=__dcg_shared_module_exports__['e'](se()),{If:ede}=$I.Components,WI=class extends $I.View{init(){this.controller=this.props.grapher().controller,this.poiController=this.props.grapher().poiController}template(){return d(ede,{predicate:this.bindFn(this.showCursor),children:()=>d("div",{class:u("dcg-geo-keyboard-cursor"),style:()=>({top:`${this.getPosition().y}px`,left:`${this.getPosition().x}px`})})})}getPosition(){let e=this.poiController.getGeoKeyboardPt(),t=this.props.grapher().getProjection();return{x:t.mapx(e.x),y:t.mapy(e.y)}}showCursor(){return this.controller.isVirtualMouseAllowed()}};var E7=__dcg_shared_module_exports__['e'](se());ce();ie();var YI=__dcg_shared_module_exports__['e'](se());var{If:tde}=YI.Components,jI=class extends YI.View{init(){this.grapher=this.props.grapher(),this.controller=this.grapher.controller,this.width=0,this.height=0,this.pixelRatio=0}getDevicePixelRatio(){return window.devicePixelRatio||1}template(){return _("div",{class:u("dcg-graph-outer"),didMount:e=>this.rootNode=e,manageFocus:this.const(_e({controller:this.controller,location:{type:"graph-paper"}})),children:[d("div",{tabIndex:()=>this.getShiftTabElementTabIndex(),onFocus:()=>{let e=this.rootNode.getAttribute("aria-label")||"";this.rootNode.setAttribute("aria-label",""),this.rootNode.focus(),this.rootNode.setAttribute("aria-label",e),this.controller.get2dPOIController().handleTabEvent("prev")}}),d(tde,{predicate:()=>this.isIOSAndIframe(),children:()=>d("div",{style:u("width:1px; height:.5px; pointer-events:none; opacity: 0;"),"aria-hidden":u("true"),children:"text"})}),d("canvas",{class:u("dcg-graph-inner"),didMount:e=>{this.canvasNode=e,this.ctx=this.canvasNode.getContext("2d"),this.resize(0,0)},style:()=>({position:"relative",display:"block",outline:"none","-webkit-transform":this.isIOSAndIframe()?"translate3d(0,-.25px,0)":void 0})})]})}getShiftTabElementTabIndex(){var t;return((t=this.rootNode)==null?void 0:t.getAttribute("tabindex"))!=="0"||this.controller.getActiveTool()!=="selection"||this.rootNode===document.activeElement?"-1":"0"}isIOSAndIframe(){return Ya&&bc}resize(e,t,o){var i;o=o||this.getDevicePixelRatio(),!(e===this.width&&t===this.height&&o===this.pixelRatio)&&(this.width=e,this.height=t,this.canvasNode.style.width=e+"px",this.canvasNode.style.height=t+"px",this.canvasNode.setAttribute("width",""+e*o),this.canvasNode.setAttribute("height",""+t*o),this.pixelRatio=o,this.ctx=this.canvasNode.getContext("2d"),(i=this.ctx)==null||i.scale(o,o),this.update())}getAriaLabel(e){let t=[],{graphDescription:o}=this.grapher.settings.config;if(this.grapher.type==="3d"&&this.controller.is3dProduct())o!==void 0?t.push(o):(t.push(`${this.controller.s("graphing-calculator-narration-3d-graphpaper-label")}.`),t.push(Kx(this.controller)));else if(this.grapher.type==="2d"&&!this.controller.is3dProduct()){let i=this.grapher.getAudioTrace();if(!i)return"";o!==void 0?t.push(o):(t.push(`${this.controller.s("graphing-calculator-narration-graphpaper-label")}.`),t.push(Kx(this.controller)),!this.controller.isGeometry()&&e>0&&(i.getAudioTraceActive()||i.agNavigator.getFirstTraceableSketch({selectAssociatedExpression:!1})!==void 0&&(lo?t.push(this.controller.s("graphing-calculator-narration-audio-instructions-enter-audio-trace-mac")):t.push(this.controller.s("graphing-calculator-narration-audio-instructions-enter-audio-trace-windows")))))}if(t.length)return t.join(" ").trim()}updateAria(e,t){let o=this.getAriaLabel(t);o!==void 0?(this.rootNode.setAttribute("role","img"),this.rootNode.setAttribute("aria-label",o),this.rootNode.setAttribute("aria-hidden",!e||!this.grapher.settings.config.graphpaper?"true":"false"),this.rootNode.setAttribute("tabindex",e&&this.grapher.settings.config.graphpaper&&this.grapher.settings.config.enableTabindex?"0":"-1")):["role","aria-roledescription","aria-label","aria-hidden","tabindex"].forEach(n=>this.rootNode.removeAttribute(n)),this.update()}speakAriaLabelAgain(){let e=this.rootNode.getAttribute("aria-label");e&&Te(e)}};var bR=class{constructor(e){this._layerClasses={};this._classLayers={};this.elt=e.elt,this.settings=e.settings,this.controller=e.controller,this.evaluator=e.evaluator,this.elt.style.overflow="hidden"}classLayers(e){var t,o;return(o=(t=this._classLayers)[e])!=null?o:t[e]=new Set}setLayerClass(e,t){let o=this._layerClasses[e];if(this._layerClasses[e]=t,o!==t){if(o){let i=this.classLayers(o);i.delete(e),i.size===0&&this.elt.classList.remove(o)}t&&(this.classLayers(t).add(e),this.elt.classList.add(t))}}},yR=class extends bR{constructor(e){super(e),this.canvasLayer=E7.mountToNode(jI,this.elt,{grapher:()=>this}),this.elt.appendChild(this.canvasLayer.rootNode)}getImageData(e,t,o,i){var n;return(n=this.canvasLayer.ctx)==null?void 0:n.getImageData(e,t,o,i)}_setIsVisible(e){e!==this.isVisible&&(this.isVisible=e,e?this.controller.requestRedrawGraph():this.canvasLayer.resize(0,0))}getIsVisible(){return this.isVisible}};function*iv(r){for(let e=0;e<r.length;e++)yield*r[e].drawOrder}var xR=class extends yR{setDrawLayers(e){__dcg_shared_module_exports__['s'](this.__drawLayers,e)||(this.__drawLayers=e,this.controller.requestRedrawGraph())}setTabOrder(e){this.__tabOrder=e}getDrawLayers(){return this.__drawLayers}getTabOrder(){return this.__tabOrder}generateMergeDrawOrder(){return iv(this.__drawLayers)}},vR=class extends xR{constructor(){super(...arguments);this.__redrawRequested=!1;this.events=new is}redrawAllLayers(){this.__redrawRequested=!0}redrawAllLayersSynchronously(){return this._redrawAllLayers()}notifyAfterRedraw(t){if(!this.__redrawRequested)t();else{this.notifyAfterRedraw_i?this.notifyAfterRedraw_i++:this.notifyAfterRedraw_i=1;let o="redraw.notifyAfterRedraw"+this.notifyAfterRedraw_i;this.events.observeEvent(o,()=>{this.events.unobserveEvent(o),t()})}}},wR=class extends vR{getCurrentViewport(){return this.viewportController.getViewport().toObject()}debounceUserRequestedViewportChange(){this.__debouncedViewportCommit||(this.__debouncedViewportCommit=__dcg_shared_module_exports__['q'](()=>{if(this.isDragging)return;let t=this.viewportController.getCurrentViewportLatex(),o=this.viewportController.getUndoViewportLatex();if(__dcg_shared_module_exports__['s'](t,o))return;let i=__dcg_shared_module_exports__['Qe'].evaluateFromLatex(t,this.settings.degreeMode,this.settings.complex);i&&this.controller.dispatch({type:"commit-user-requested-viewport",viewport:i})},1e3)),this.__debouncedViewportCommit()}setViewportState(e){let t=__dcg_shared_module_exports__['Qe'].evaluateFromLatex(e,this.settings.degreeMode,this.settings.complex);if(this.viewportController.ensureValidNumericViewport(),t&&this.settings.squareAxes){let o=this.computeConcreteViewport(t);this.viewportController.setUndoViewport(o)}else this.viewportController.setUndoViewportLatex(e)}},SR=class extends wR{getState(e){let t={...this.getCurrentViewport()},o={...this.viewportController.getCurrentViewportLatex()};this.controller.is3dProduct()||(delete t.zmin,delete t.zmax,delete o.zmin,delete o.zmax);let i={viewport:o,__viewportEvaluatedForBackMigration:t};return this.settings.stateProperties.forEach(n=>{n!=="randomSeed"&&n!=="includeFunctionParametersInRandomSeed"&&(!this.controller.is3dProduct()&&M5(n)||(i[n]=this.settings[n]))}),e.stripDefaults&&(i=__dcg_shared_module_exports__['Td'](Bo,i)),i}getUndoRedoDiffState(){let e=this.getUndoRedoFullState();return e.speed3D!==0&&delete e.worldRotation3D,e}getUndoRedoFullState(){let e={};return this.settings.stateProperties.forEach(t=>{e[t]=this.settings[t]}),e.viewport=this.viewportController.getUndoViewportLatex(),e}},If=class extends SR{};var XI=class{constructor(e,t){this.is3d=!1;this.color="#000000",this.style="normal",this.showPOI=!1,this.showHighlight=!1,this.hoistToTop=!1,this.selected=!1,this.tokenHovered=!1,this.tokenSelected=!1,this.labels=[],this.id=e,this.branches=t!==void 0?t:[],this.getPOI().forEach(o=>{o.type===1008&&this.labels.push({type:"poi",poi:o})}),t.forEach((o,i)=>{if(o.branchMode===22){if(o.objectType===17){let n=new Nc(0,0,1008,this,i,0,!1);this.labels.push({id:"label-"+e+"-"+(o.listIndex||0),type:"segment",poi:n,segments:o.segments[0],text:o.labels&&o.labels[0]||""})}else if(o.objectType===16){let n=new Nc(0,0,1008,this,i,0,!1);this.labels.push({id:"label-"+e+"-"+(o.listIndex||0),type:"polygon",poi:n,segments:o.segments[0],text:o.labels&&o.labels[0]||""})}else if(o.objectType===23){let n=new Nc(0,0,1008,this,i,0,!1);this.labels.push({id:"label-"+e+"-"+(o.listIndex||0),type:"angle",poi:n,segments:o.segments[0],text:o.labels&&o.labels[0]||""})}}})}getPOI(){if(this.__cachedPOI)return this.__cachedPOI;this.__cachedPOI=[],this.__cachedPOIIds={};for(let e=0;e<this.branches.length;e++){let t=this.branches[e];if(t.branchMode===1||t.branchMode===2){let o=t.poi;o.zeros&&this._pushPOI(o.zeros,e,1002),o.intercept&&this._pushPOI(o.intercept,e,1003),o.extrema&&this._pushPOI(o.extrema,e,1004),o.intersections&&this._pushPOI(o.intersections,e,1001)}else if(__dcg_shared_module_exports__['vd'](t)){let o=t.poi,i=(t.branchMode===3||t.branchMode===25)&&t.interactiveLabel===!0;if(t.showLabel===!0||i){let n=t.nakedLabel;o.defined&&this._pushPOI(o.defined,e,1008,n)}else o.defined&&this._pushPOI(o.defined,e,1006)}}return this.__cachedPOI}getBranchPOI(e){return this.getPOI().filter(t=>t.branch===e)}getMovablePoints(){if(this.__cachedMovablePoints)return this.__cachedMovablePoints;this.__cachedMovablePoints=[];let e=this.branches[0];if(e&&e.segments.length===1&&__dcg_shared_module_exports__['wd'](e)){let t=e.segments[0];for(let o=0;o<t.length;o++){let i;e.tableId&&(i={tableId:e.tableId,columnId:this.id,rowIndex:e.movablePointInfo[o].index,dragX:e.movablePointInfo[o].dragX,dragY:e.movablePointInfo[o].dragY});let n=e.scaleFactors?e.scaleFactors[0][o]:void 0,a=i?i.rowIndex:o,s=e.segments.length===1&&e.labels&&e.labels[o]?e.labels[o]:void 0,l=e.hasOwnProperty("pointOpacity")?e.pointOpacity:1,c=e.pointSize!==void 0?e.pointSize:8,p=e.style!==void 0?e.style:__dcg_shared_module_exports__['Pd'].POINT;this.__cachedMovablePoints.push({type:"movable-point",id:"movable:["+this.id+","+a+"]",listIndex:a,sketch:this,color:Array.isArray(this.color)?this.color[o]:this.color,pointOpacity:l,pointSize:c,pointStyle:p,tableInfo:i,scaleFactor:n,x:t[o][0],y:t[o][1],label:s,ariaLabel:s&&vr(s)})}}return this.__cachedMovablePoints}getMovablePointByIndex(e){return this.getMovablePoints()[e]}getStaticLabeledPoints(){if(this.__cachedStaticLabeledPoints)return this.__cachedStaticLabeledPoints;let e=this.branches[0];return this.__cachedStaticLabeledPoints=[],this.getPOI().forEach(t=>{if(t.type!==1006&&t.type!==1008||e.branchMode!==3&&e.branchMode!==25)return;let o=e.showLabel,i=t.getLabel();!o&&i===""||this.__cachedStaticLabeledPoints.push({type:"static-labeled-point",id:"static["+this.id+","+t.id+"]",listIndex:t.pointIdxOnBranch,x:t.x,y:t.y,sketch:t.sketch,label:i,ariaLabel:i!==""?vr(i):void 0})}),this.__cachedStaticLabeledPoints}_pushPOI(e,t,o,i=!1){for(let n=0,a=e.x.length;n<a;n++){let s=new Nc(e.x[n],e.y[n],o,this,t,n,i);e.intersects&&(s.intersects=e.intersects[n]),this.__cachedPOI.push(s),this.__cachedPOIIds[s.id]=s}}updateIntersections(e){for(let o=0,i=this.branches.length;o<i;o++){let n=this.branches[o];n.branchMode!==15&&n.branchMode!==22&&(n.poi.intersections=e[o])}let t=this.__cachedPOI;this.__cachedPOI=[],t.forEach(o=>{o.type!==1001?this.__cachedPOI.push(o):delete this.__cachedPOIIds[o.id]});for(let o=0;o<this.branches.length;o++){let i=this.branches[o];if(i.branchMode===1||i.branchMode===2){let n=i.poi;n.intersections&&this._pushPOI(n.intersections,o,1001)}}}getPOIById(e){return this.__cachedPOIIds[e]}updateFrom(e){if(e&&(this.showPOI=e.showPOI,this.showHighlight=e.showHighlight,this.hoistToTop=e.hoistToTop,this.selected=e.selected,this.tokenSelected=e.tokenSelected,this.tokenHovered=e.tokenHovered,__dcg_shared_module_exports__['vd'](this.branches[0]))){let t=!0;for(let o=0;o<this.__cachedPOI.length;o++){let i=e.__cachedPOI[o],n=this.__cachedPOI[o];if(!i||i.type!==n.type){t=!1;break}}if(t)for(let o=0;o<this.__cachedPOI.length;o++){let i=e.__cachedPOI[o],n=this.__cachedPOI[o];delete this.__cachedPOIIds[n.id],this.__cachedPOIIds[i.id]=n,n.id=i.id}}}};var{floor:oh,ceil:ih,round:ode,log10:JI,log2:I7,abs:hp}=Math,up=r=>c0?`rgba(255,255,255,${r})`:`rgba(0,0,0,${r})`,eC=class{redrawToCtx(e,t){let{ctx:o,projection:i}=e;En(o,"graphpaper");let n=i.settings.showGrid&&!i.settings.threeDMode;if(i.settings.polarMode&&n){let a=S7(i);En(o,"grid"),this.drawPolarGrid(o,i,a),In(o),En(o,"axis"),this.drawAxes(o,i,t);let s=this.drawPolarStepNumbers(o,i,a);this.drawLabels(o,i,s),In(o)}else{let a=Da(i),s=TR(i);n&&(En(o,"grid"),this.drawCartesianGrid(o,i,a,s),In(o));let l=!n&&!i.settings.threeDMode;En(o,"axis"),i.settings.threeDMode||this.drawAxes(o,i,t);let c=this.drawCartesianStepNumbers(o,i,a,l,s);this.drawLabels(o,i,c),In(o)}In(o)}addTextShadow(e,t){let{threeDMode:o,showPlane3D:i}=t.settings;e.strokeStyle=t.settings.getBackgroundColor({invertWhite:o}),e.lineWidth=3,o&&(!i||t.settings.invertedColors)&&(e.lineWidth=1.5),e.miterLimit=2}drawPolarGrid(e,t,o){e.save();let i=t.settings.minorAxisOpacity,a=1-(1-t.settings.majorAxisOpacity)/(1-i),s=__dcg_shared_module_exports__['T'](t.mapx(0)),l=__dcg_shared_module_exports__['T'](t.mapy(0)),c=t.screen.height/(t.viewport.ymax-t.viewport.ymin),p=t.screen.width/(t.viewport.xmax-t.viewport.xmin),h=c/p,g=p/c,m=l/h,b=t.viewport.smallestR(),x=t.viewport.largestR(),E=o.minorStepR*Math.max(1,Math.floor(b/o.minorStepR)),S=o.majorStepR*Math.max(1,Math.floor(b/o.majorStepR));e.lineWidth=1,e.strokeStyle=up(i);for(let T of Ln(E,x,o.minorStepR)){oo(e,"dcg-svg-minor-gridline"),e.beginPath(),Xr(e),e.scale(1,h);let I=t.mapx(T)-s;e.moveTo(s+I,m),e.arc(s,m,I,0,2*Math.PI),e.scale(1,g),e.stroke()}let k=b>0?5:15;for(let T of Ln(0,359,k)){if((T===0||T===180)&&t.settings.showXAxis||(T===90||T===270)&&t.settings.showYAxis)continue;oo(e,"dcg-svg-minor-gridline"),e.beginPath(),Xr(e),e.moveTo(s,l);let I=t.mapx(x*Math.cos(T*Math.PI/180)),P=t.mapy(x*Math.sin(T*Math.PI/180));e.lineTo(__dcg_shared_module_exports__['T'](I),__dcg_shared_module_exports__['T'](P)),e.stroke()}e.lineWidth=1,e.strokeStyle=up(a);for(let T of Ln(S,x,o.majorStepR)){oo(e,"dcg-svg-major-gridline"),e.beginPath(),Xr(e),e.scale(1,h);let I=t.mapx(T)-s;e.moveTo(s+I,m),e.arc(s,m,I,0,2*Math.PI),e.scale(1,g),e.stroke()}e.restore()}drawCartesianGrid(e,t,o,i=TR(t)){e.save();let{xmin:n,xmax:a,ymin:s,ymax:l}=t.viewport,c=t.screen.width,p=t.screen.height,h=p,g=0;t.settings.restrictGridToFirstQuadrant&&(n=0,s=0,h=t.mapy(0),g=t.mapx(0));let m=t.settings.minorAxisOpacity*i.x.unitOpacity,b=t.settings.minorAxisOpacity*i.y.unitOpacity,x=t.settings.majorAxisOpacity;e.lineWidth=1;let E=F=>{if(F===0&&t.settings.showYAxis)return;let V=__dcg_shared_module_exports__['T'](t.mapx(F));V===__dcg_shared_module_exports__['T'](0)||V===__dcg_shared_module_exports__['T'](c)||(e.beginPath(),e.moveTo(V,0),e.lineTo(V,h),e.stroke())},S=F=>{if(F===0&&t.settings.showXAxis)return;let V=__dcg_shared_module_exports__['T'](t.mapy(F));V===__dcg_shared_module_exports__['T'](0)||V===__dcg_shared_module_exports__['T'](p)||(e.beginPath(),e.moveTo(g,V),e.lineTo(c,V),e.stroke())};oo(e,"dcg-svg-minor-gridline");let{majorStepX:k,majorStepY:T,minorStepX:I,minorStepY:P}=o,A=t.settings.xAxisScale==="logarithmic",D=t.settings.yAxisScale==="logarithmic",G=A?i.x.minor:Ln(n,a,I),N=D?i.y.minor:Ln(s,l,P);e.strokeStyle=up(m);for(let F of G)E(F);e.strokeStyle=up(b);for(let F of N)S(F);Xr(e);let U=1-(1-x)/(1-m),K=1-(1-x)/(1-b);oo(e,"dcg-svg-major-gridline");let H=A?i.x.major:Ln(n,a,k),w=D?i.y.major:Ln(s,l,T);e.strokeStyle=up(U);for(let F of H)E(F);e.strokeStyle=up(K);for(let F of w)S(F);Xr(e),e.restore()}drawAxes(e,t,o){let i=t.settings.axisLineOffset,n=t.settings.axisOpacity,a=`rgba(127,205,230,${n.toString()})`,s=up(n),l=t.settings.xAxisArrowMode,c=t.settings.yAxisArrowMode,p=t.settings.showXAxis,h=t.settings.showYAxis,g=1,m=Math.round(t.mapx(0))-i,b=Math.round(t.mapy(0))-i,x=t.screen.height,E=t.screen.width;function S(I,P,A){e.save();let D=Math.PI/12,G=8*Math.max(e.lineWidth,1.5);e.lineJoin="round",e.fillStyle=s,e.strokeStyle=s,e.beginPath(),e.moveTo(I,P),e.lineTo(I+Math.cos(A-D)*G,P+Math.sin(A-D)*G),e.lineTo(I+Math.cos(A+D)*G,P+Math.sin(A+D)*G),e.lineTo(I,P),e.lineTo(I+Math.cos(A-D)*G,P+Math.sin(A-D)*G),e.stroke(),e.fill(),e.restore()}let k=x,T=0;t.settings.restrictGridToFirstQuadrant&&(k=b,T=m,l===__dcg_shared_module_exports__['Xd'].BOTH&&(l=__dcg_shared_module_exports__['Xd'].POSITIVE),c===__dcg_shared_module_exports__['Xd'].BOTH&&(c=__dcg_shared_module_exports__['Xd'].POSITIVE)),h&&(En(e,"yaxis"),t.settings.takingScreenshot&&mx(e,t.settings.yAxisLabel||"Y axis"),e.save(),oo(e,"dcg-svg-axis-line"),e.lineWidth=t.settings.axisLineWidth*(o==="y"?g:1),e.strokeStyle=o==="y"?a:s,c===__dcg_shared_module_exports__['Xd'].BOTH?(e.beginPath(),e.moveTo(m,2*t.settings.axisLineWidth),e.lineTo(m,x-2*t.settings.axisLineWidth),e.stroke(),S(m,x-t.settings.axisLineWidth,3*Math.PI/2),S(m,t.settings.axisLineWidth,Math.PI/2)):c===__dcg_shared_module_exports__['Xd'].POSITIVE?(e.beginPath(),e.moveTo(m,2*t.settings.axisLineWidth),e.lineTo(m,k),e.stroke(),S(m,t.settings.axisLineWidth,Math.PI/2)):(e.beginPath(),e.moveTo(m,0),e.lineTo(m,k),e.stroke()),Xr(e),e.restore(),In(e)),p&&(En(e,"xaxis"),t.settings.takingScreenshot&&mx(e,t.settings.xAxisLabel||"X axis"),e.save(),oo(e,"dcg-svg-axis-line"),e.lineWidth=t.settings.axisLineWidth*(o==="x"?g:1),e.strokeStyle=o==="x"?a:s,l===__dcg_shared_module_exports__['Xd'].BOTH?(e.beginPath(),e.moveTo(2*t.settings.axisLineWidth,b),e.lineTo(E-2*t.settings.axisLineWidth,b),e.stroke(),S(t.settings.axisLineWidth,b,0),S(E-t.settings.axisLineWidth,b,Math.PI)):l===__dcg_shared_module_exports__['Xd'].POSITIVE?(e.beginPath(),e.lineTo(T,b),e.lineTo(E-2*t.settings.axisLineWidth,b),e.stroke(),S(E-t.settings.axisLineWidth,b,Math.PI)):(e.beginPath(),e.lineTo(T,b),e.lineTo(E,b),e.stroke()),Xr(e),e.restore(),In(e))}drawPolarStepNumbers(e,t,o){e.save();let i=t.settings.showGrid,n=t.settings.xAxisNumbers&&t.settings.showXAxis,a=t.settings.yAxisNumbers&&t.settings.showYAxis,s=i&&t.settings.polarNumbers,l=t.viewport.largestR(),c=t.viewport.smallestR(),p=t.viewport.xmin,h=t.viewport.xmax,g=t.viewport.ymin,m=t.viewport.ymax,b=t.screen.width,x=t.screen.height,E={left:3,right:b-3,top:3,bottom:x-3},S=t.settings.labelHangingColor,k=t.settings.getTextColor(),T=t.settings.labelSize,I=T;this.addTextShadow(e,t),e.fillStyle=k;function P(B,L,q){let le=Math.sqrt(B*B-L*L);g<=le&&le<=m&&q.push({x:t.mapx(L),y:t.mapy(le)}),g<=-le&&-le<=m&&q.push({x:t.mapx(L),y:t.mapy(-le)})}function A(B,L,q){let le=Math.sqrt(B*B-L*L);p<=le&&le<=h&&q.push({x:t.mapx(le),y:t.mapy(L)}),p<=-le&&-le<=h&&q.push({x:t.mapx(-le),y:t.mapy(L)})}let D=t.mapx(0),G=t.mapy(0),N=g<=0&&0<=m,U=p<=0&&0<=h,K=N&&n,H=U&&a,w="";if(!K&&!H&&i){let B=hp(D),L=hp(D-b),q=hp(G),le=hp(G-x),$,ne,ue,de;B<=L?($="left",ue=B):($="right",ue=L),q<=le?(ne="top",de=q):(ne="bottom",de=le),n&&a?w=ue<=de?$:ne:a?w=$:n&&(w=ne)}let F={left:0,right:b,top:G-1,bottom:G+1},V={left:D-1,right:D+1,top:0,bottom:x};for(let B of Ln(0,l,o.majorStepR)){let L=[],q=[],le=[],$=new an(__dcg_shared_module_exports__['aa'](B,l),T),ne=$.getRect();switch(B>0?(H&&g<=B&&B<=m&&q.push({x:D-ne.right-5,y:t.mapy(B)}),H&&g<=-B&&-B<=m&&q.push({x:D-ne.right-5,y:t.mapy(-B)}),K&&p<=B&&B<=h&&L.push({x:t.mapx(B),y:G-ne.top+3}),K&&p<=-B&&-B<=h&&L.push({x:t.mapx(-B),y:G-ne.top+3})):H&&!n&&g<=B&&B<=m?q.push({x:D-ne.right-5,y:t.mapy(B)}):K&&!a&&p<=B&&B<=h&&L.push({x:t.mapx(B),y:G-ne.top+3}),w){case"top":A(B,m,le);break;case"bottom":A(B,g,le);break;case"left":P(B,p,le);break;case"right":P(B,h,le);break}L.forEach(ue=>{ue=$.clampBoundsWithinRect(ue,E),$.drawCenteredAt(e,ue,"dcg-svg-axis-value"),ZI(F,$.getRectWhenCenteredAt(ue))}),q.forEach(ue=>{ue=$.clampBoundsWithinRect(ue,E),$.drawCenteredAt(e,ue,"dcg-svg-axis-value"),ZI(V,$.getRectWhenCenteredAt(ue))}),le.forEach(ue=>{ue=$.clampBoundsWithinRect(ue,E),$.drawCenteredAt(e,ue,"dcg-svg-axis-value")})}if(s){let B=Math.ceil(c/o.majorStepR),L=Math.floor(l/o.majorStepR),le=Math.ceil((B+L)/2)*o.majorStepR,$=c>0?15:30;for(let ne of Ln(0,359,$)){let ue;t.settings.degreeMode?ue=ne.toString()+"\xB0":ue=__dcg_shared_module_exports__['aa'](ne*Math.PI/180,2*Math.PI).string;let de=e.measureText(ue).width/2,pe=le/1.05,Y=pe*Math.cos(ne*Math.PI/180),j=pe*Math.sin(ne*Math.PI/180);if(Y<p||Y>h||j<g||j>m)continue;let X=t.mapx(Y),xe=t.mapy(j);ne===0||ne===180?xe-=I:(ne===90||ne===270)&&(X+=de+3);let fe=__dcg_shared_module_exports__['Ob'](X,3+de,b-3-de),Se=__dcg_shared_module_exports__['Ob'](xe,3+I,x-3-I);Se=an.computeBaselineFromCenter(Se,T),oo(e,"dcg-svg-polar-axis-value"),e.save(),Xr(e),e.fillStyle=S,an.setCtxFontSize(e,T),e.strokeText(ue,fe,Se),e.fillText(ue,fe,Se),e.restore()}}return e.restore(),{x:F,y:V}}drawLabels(e,t,o){let i=t.viewport.xmin,n=t.viewport.xmax,a=t.viewport.ymin,s=t.viewport.ymax,l=t.screen.width,c=t.screen.height,p=(n-i)/l,h=(s-a)/c,g=t.settings.getTextColor(),m=t.mapx(0),b=t.mapy(0),x=t.settings.labelSize,E=15,S=t.settings.showXAxis&&t.settings.xAxisLabel,k=t.settings.showYAxis&&t.settings.yAxisLabel,T=o.x,I=o.y;if(S&&T){oo(e,"dcg-svg-axis-label"),e.save(),Xr(e),e.fillStyle=g;let P;if(e.__xLabelOffset&&t.settings.isViewportTransient&&QI(e.__xLabelOffset.xscale,p)&&QI(e.__xLabelOffset.yscale,h)&&(P={x:e.__xLabelOffset.x+m,y:e.__xLabelOffset.y+b}),this._setAxisLabelFont(e,S,x,t),!P){let A=e.measureText(S).width,D=l-A-E,G=x;T.bottom+G<c?P={x:D,y:T.bottom+G}:P={x:D,y:T.top-G/2},e.__xLabelOffset={x:P.x-m,y:P.y-b,xscale:p,yscale:h}}e.strokeText(S,P.x,P.y),e.fillText(S,P.x,P.y),e.restore()}else e.__xLabelPosition=null;if(k&&I){oo(e,"dcg-svg-axis-label"),e.save(),Xr(e),e.fillStyle=g;let P;if(e.__yLabelOffset&&t.settings.isViewportTransient&&QI(e.__yLabelOffset.xscale,p)&&QI(e.__yLabelOffset.yscale,h)&&(P={x:e.__yLabelOffset.x+m,y:e.__yLabelOffset.y+b}),this._setAxisLabelFont(e,k,x,t),!P){let A=e.measureText(k).width,D=x,G=A+5;if(!this._isShortMathyLabel(k)){let U=A;A=D,D=U,G=A*.5}let N=0+E+D;I.left-A>0?P={x:I.left-G,y:N}:P={x:I.right+A,y:N},e.__yLabelOffset={x:P.x-m,y:P.y-b,xscale:p,yscale:h}}e.translate(P.x,P.y),this._isShortMathyLabel(k)||e.rotate(-Math.PI/2),e.strokeText(k,0,0),e.fillText(k,0,0),e.restore()}else e.__yLabelPosition=null}_isShortMathyLabel(e){return e.trim().match(/^([a-zA-Z]?)\(?([a-zA-Z]?)\)?$/)}_setAxisLabelFont(e,t,o,i){this.addTextShadow(e,i),this._isShortMathyLabel(t)?e.font="italic "+Math.round(o*1.4)+"px Times":e.font=Math.round(o*1.2)+"px Arial"}drawCartesianStepNumbers(e,t,o,i,n=TR(t)){e.save();let{showXAxis:a,showYAxis:s}=t.settings,l=a&&t.settings.xAxisNumbers,c=s&&t.settings.yAxisNumbers,{xmin:p,xmax:h,ymin:g,ymax:m}=t.viewport,b=t.screen.width,x=t.screen.height,E={left:3,top:3,right:b-3,bottom:x-3};t.settings.restrictGridToFirstQuadrant&&(p=0,g=0);let S=t.settings.getTextColor({invertBlack:t.settings.threeDMode}),k=t.settings.threeDMode?S:t.settings.labelHangingColor,T=t.mapx(0),I=t.mapy(0),P=t.settings.labelSize;this.addTextShadow(e,t);let A={left:0,right:b,top:I-1,bottom:I+1},D={left:T-1,right:T+1,top:0,bottom:x};if(t.settings.threeDMode&&!t.settings.showNumbers3D)return{x:A,y:D};let G=5,N=!1;if(a&&s&&(l||c)){N=!0,e.fillStyle=S;let F=new an(__dcg_shared_module_exports__['aa'](0,1),P);F.drawCenteredAt(e,{x:T-F.getRect().right-G,y:I-F.getRect().top+G},"dcg-svg-axis-value")}let{majorStepX:U,majorStepY:K}=o,H=[],w=[];if(l){let F=t.settings.xAxisScale==="logarithmic",V=F?n.x.label:Ln(p,h,U);for(let B of V){let L=F?void 0:h-p,q=__dcg_shared_module_exports__['aa'](B,L,F),le=new an(q,P);le.getString()==="0"&&N||H.push(le)}}if(c){let F=t.settings.yAxisScale==="logarithmic",V=F?n.y.label:Ln(g,m,K);for(let B of V){let L=F?void 0:m-g,q=__dcg_shared_module_exports__['aa'](B,L,F),le=new an(q,P);le.getString()==="0"&&N||w.push(le)}}if(i){e.save(),oo(e,"dcg-svg-tickmark");let F=t.settings.axisLineOffset,V=t.settings.axisOpacity,B=up(V);e.lineWidth=t.settings.axisLineWidth,e.strokeStyle=B;let L=Math.round(t.mapy(0))-F,q=Math.round(t.mapx(0))-F,le=Math.round(2*e.lineWidth)-F;e.beginPath(),H.forEach($=>{let ne=Math.round(t.mapx($.getValue()))-F;e.moveTo(ne,L-le),e.lineTo(ne,L+le)}),w.forEach($=>{let ne=Math.round(t.mapy($.getValue()))-F;e.moveTo(q-le,ne),e.lineTo(q+le,ne)}),e.stroke(),Xr(e),e.restore()}return H.forEach(F=>{let V={x:t.mapx(F.getValue())-.5*F.getMinusWidth(),y:I-F.getRect().top+G},B=F.clampBoundsWithinRect(V,E);e.fillStyle=V.y===B.y||t.settings.yAxisScale==="logarithmic"?S:k;let L="dcg-svg-axis-value";V.x!==B.x&&(L+=" dcg-svg-offcenter-axis-value"),F.drawCenteredAt(e,B,L),ZI(A,F.getRectWhenCenteredAt(B)),Xr(e)}),w.forEach(F=>{let V={x:T-G-F.getRect().right,y:t.mapy(F.getValue())},B=F.clampBoundsWithinRect(V,E);e.fillStyle=V.x===B.x||t.settings.xAxisScale==="logarithmic"?S:k;let L="dcg-svg-axis-value";V.y!==B.y&&(L+=" dcg-svg-offcenter-axis-value"),F.drawCenteredAt(e,B,L),ZI(D,F.getRectWhenCenteredAt(B)),Xr(e)}),e.restore(),{x:A,y:D}}};function Ln(r,e,t){let o=Math.ceil(r/t),i=Math.floor(e/t);if(!ide({nmin:o,nmax:i}))return[];let n=[];for(let a=o;a<=i;a++)n.push(a*t);return n}var ide=({nmin:r,nmax:e})=>isFinite(e-r)&&e-r<=1e4;function TR(r){return{x:C7("x",r),y:C7("y",r)}}function C7(r,e){let t=new Set,o=new Set,i=new Set,n=1;function a(de){return T?e.mapx(de):e.mapy(de)}function s(de,pe){return hp(a(pe)-a(de))}let l=(de,pe)=>{let Y=de*pe,j=(de+1)*pe;if(Y<I&&j<I||Y>P&&j>P)return;let X=de>=5?s(7*pe,8*pe):de>=2?s(3*pe,4*pe):s(pe,2*pe),xe=X/s(Y,j);if(X<40)return;let fe={settings:{pixelsPerLabel:e.settings.pixelsPerLabel*xe,labelSize:e.settings.labelSize,xAxisNumber:e.settings.xAxisNumbers,yAxisNumber:e.settings.yAxisNumbers},screen:{width:X,height:X},viewport:{xmin:Y,ymin:Y,xmax:j,ymax:j}},{minorStepX:Se,majorStepX:ke}=Da(fe),Le=Math.max(Y,I),$e=Math.min(j,P);for(let Q=oh(Le/Se);Q<ih($e/Se);Q++)i.add(Q*Se);for(let Q=oh(Le/ke);Q<ih($e/ke);Q++){let J=Q*ke;J<=Y||J>=j||(o.add(J),t.add(J))}},c={label:[],major:[],minor:[],unitOpacity:1},{xAxisScale:p,yAxisScale:h,pixelsPerLabel:g}=e.settings,{xmin:m,xmax:b,ymin:x,ymax:E}=e.viewport,{width:S,height:k}=e.screen,T=r==="x",[I,P]=T?[m,b]:[x,E],A=T?S:k,D=T?p:h,G=e.settings.xAxisMinorSubdivisions!==0;if(D!=="logarithmic")return c;let N=oh(JI(I)),U=ih(JI(P)),K=ih(JI(P)-JI(I)),H=s(10**N,10**(N+1)),w=15,F=100,V=H>w,B=[];H>6.25*g&&(B=[2,3,4,6,8]),H>12*g&&(B=[2,3,4,5,6,7,8]),H>14*g&&(B=[2,3,4,5,6,7,8,9]);let L=B.length!=0;if(w<=H&&H<=F&&(n=Math.sqrt((H-w)/(F-w))),!isFinite(K))return c;let q=oh(A/g),le=Math.max(1,2**ode(I7(K/q)));for(let de=ih(N/le);de<=oh(U/le);de++)t.add(10**(de*le));o=new Set([...t]);let $=oh(A/w),ne=Math.max(1,2**ih(I7(K/$)));for(let de=ih(N/ne);de<=oh(U/ne);de++)(V?o:i).add(10**(de*ne));if(V)for(let de=N;de<U;de++){let pe=10**de;for(let Y of B)t.add(Y*pe);if(L){for(let Y=2;Y<=9;Y++)o.add(Y*pe);for(let Y=1;Y<=9;Y++)l(Y,pe)}else for(let Y=2;Y<=9;Y++)i.add(Y*pe)}G&&(i=new Set);let ue=T?e.reverse_mapx(a(I)+g/4):e.reverse_mapy(a(I)-2*e.settings.labelSize);return{label:[...t].filter(de=>ue<=de&&de<=P),major:[...o].filter(de=>I<=de&&de<=P),minor:[...i].filter(de=>I<=de&&de<=P),unitOpacity:n}}function ZI(r,e){e.left<r.left&&(r.left=e.left),e.right>r.right&&(r.right=e.right),e.top<r.top&&(r.top=e.top),e.bottom>r.bottom&&(r.bottom=e.bottom)}function QI(r,e){let t=hp(r),o=hp(e);return hp(t-o)<=(t<o?o:t)*1e-4}var nv=class{constructor(e){this.grapher=e,this.controller=this.grapher.controller,this.renderedTabTargetOrder=[],this.renderedTabTargets={}}recomputeImages(e){let{projection:t}=e;this.renderedTabTargets={},this.renderedTabTargetOrder=[];for(let o of this.grapher.generateMergeDrawOrder()){let i=this.controller.getItemModel(o);if(i&&i.type==="image"&&i.shouldGraph&&ks(i)){let n=i.formula.dimensions;if(!n||!n.x||!n.y||!n.width||!n.height||!n.radianAngle)continue;for(let a=0;a<n.x.length;a++)if(uk(t,i,a)){this.renderedTabTargetOrder.push(o),this.renderedTabTargets[o]={id:o,description:this.getComputedDescription(i,a),x:n.x[a],y:n.y[a],radianAngle:n.radianAngle[a],width:n.width[a],height:n.height[a],widthScale:Math.abs(t.mapx(1)-t.mapx(0)),heightScale:Math.abs(t.mapy(1)-t.mapy(0)),screenX:t.mapx(n.x[a]),screenY:t.mapy(n.y[a]),centerId:i.formula.center_reference_id,selected:rn(i)};break}}}this.speakAriaAlert()}getOrderedTabTargets(){return this.getTabIndex()===-1?[]:this.renderedTabTargetOrder.map(e=>{var o;let t=this.renderedTabTargets[e];return{calcId:t.id,listIndex:void 0,polygonEdge:void 0,description:this.controller.isGeometry()||(o=this.getAriaAlert({id:t.id,includeUsageInstructions:!0}))==null?void 0:o.completeMessage}})}getTabIndex(){if(this.controller.getActiveTool()!=="selection")return-1;let e=this.grapher.settings;return e.config.graphpaper&&e.config.enableTabindex?0:-1}getComputedDescription(e,t){let o=e.formula&&e.formula.computed_description&&e.formula.computed_description[t];return o&&o!==""?vr(o):this.grapher.getAudioTrace().getExpressionAriaLabel(e.id)}speakAriaAlert(){if(this.controller.isGeometry())return;let e=this.getFocusedImage();if(!e){this.lastAriaAlert=void 0;return}let t=e.id,o=this.getAriaAlert({id:t,lastAriaAlert:this.lastAriaAlert,includeUsageInstructions:!0}),i=!this.lastAriaAlert||this.lastAriaAlert.id!==t||!!(o!=null&&o.updated);this.lastAriaAlert=o,o&&o.completeMessage&&i&&Te(o.completeMessage)}getAriaAlert(e){let{id:t,lastAriaAlert:o,includeUsageInstructions:i}=e;if(!t)return;let n=this.controller.getItemModel(t);if(!n||n.type!=="image")return;let a=this.renderedTabTargets[t];if(!a)return;o&&o.id!==t&&(o=void 0);let s=o==null?void 0:o.label,l=a.description,c=s!==l,p=!!(o!=null&&o.selected),h=a.selected,g=p!==h,m=o&&o.coordX,b=o&&o.coordY,x=a.x,E=a.y,S=x!==m||E!==b,k=this.grapher.getProjection(),T=!!(n.description&&n.description.indexOf("${")!==-1),I=Ea(this.controller,x,E),P=l,A=i?this.controller.s("graphing-calculator-narration-movable-point-suffix-usage-instructions"):"",D=this.isImageFullyVisible(n,k)?"":this.controller.s("graphing-calculator-narration-draggable-image-off-screen-prompt"),G;return o?c||!S&&g?G=P+D:S&&this.controller.shouldNarrateCoordinates()&&!T?G=I+D:G="":G=(I?this.controller.s("graphing-calculator-narration-item-at-coordinates",{itemDescription:P,coordinates:I}):P)+A+D,{id:t,coordX:x,coordY:E,label:l,completeMessage:G,updated:c||g||S}}getFocusedImage(){let e=this.grapher.poiController.keyboardAttentionManager.getKeyboardAttention();return e?this.renderedTabTargets[e.calcId]:void 0}speakImageAttribute(e,t){if(!(!e||!this.grapher.getAudioTrace()||!this.grapher.getProjection()))switch(t){case"X":Te(_s(this.controller,e.x));break;case"Y":Te(Ms(this.controller,e.y));break;case"L":Te(e.description);break}}isImageFullyVisible(e,t){let o=e.formula.dimensions;if(!o||!o.x||!o.y)return!1;for(let i=0;i<o.x.length;i++)if(!t.coordsAreOnscreen(t.mapx(o.x[i]),t.mapy(o.y[i])))return!1;return!0}};var tC=class{constructor(e){this.savedPOI=[],this.controller=e}redrawToCtx(e,t,o,i,n){let{ctx:a,projection:s}=e,l=[];for(let c of iv(n)){let p=t[c];if(!p)continue;if(p.hoistToTop&&!this.controller.isGeometry()){let g=p.showHighlight;g&&e.projection.settings.setProperty("highlight",!0),Ls.drawSketchToCtx({sketch:p,drawContext:e,poiLabelsLayer:o,clickableObjectsLayer:i,geometryContext:this.controller.getGeoModel()}),g&&e.projection.settings.setProperty("highlight",!1)}let h=p.getPOI();(p.showPOI||h.length&&h[0].isAttachedToPlottedPoint())&&l.push.apply(l,this.drawPOIs(h,a,s))}this.savedPOI=l}getDrawnPOI(){return this.savedPOI}drawPOIs(e,t,o){t.lineWidth=o.settings.pointLineWidth,t.strokeStyle="#AAAAAA",t.fillStyle="#AAAAAA",t.lineJoin="round",t.lineCap="round";let i=[];if(e.length&&e[0].isAttachedToPlottedPoint())for(let n of e)Ls.mapPointToScreen(o,n.x,n.y)&&i.push(n);else for(let n of e)Ls.drawPointToCtx({ctx:t,projection:o,enableWhiteOutline:!1,style:__dcg_shared_module_exports__['Pd'].POINT,...n})&&i.push(n);return i}};ce();ie();__dcg_shared_module_exports__['H']();var _7=__dcg_shared_module_exports__['e'](se()),rC=class extends _7.View{template(){return d("div",{class:this.const(__dcg_shared_module_exports__['G']),style:()=>({width:this.props.width(),height:this.props.height(),position:"fixed",left:"0px",top:"0px"}),children:d("div",{class:u("dcg-container"),children:d("div",{class:u("dcg-grapher"),style:()=>({"font-size":this.props.concreteFontSize()})})})})}};var Gs=class extends Rs{generateDefaultName(){return"does not matter"}};var M7="graphing-calculator-text-geometry-tool-rotation-hint-center",nde="graphing-calculator-text-geometry-tool-rotation-hint-angle",ade="graphing-calculator-text-geometry-tool-rotation-hint-angle-start",sde="graphing-calculator-text-geometry-tool-rotation-hint-angle-end",nh=class extends Gs{constructor(t){super(t);this.model=t;this.displayNameKey="graphing-calculator-text-geometry-tool-rotate-display-name",this.toolName="rotation",this.toolType="transformation"}isNumberInputAllowed(){return Ec(this.model.controller.getGeometryToolbarModel()).rotationToolInput}getMode(){let{idMap:t}=this.model.getNonObjectsState().ui.currentTool;return this.isNumberInputAllowed()&&t["2-number"]?"number":"directed-angle"}getExpressionEditHint(t){return t===0?this.s(M7):this.s(nde)}onNumberInput(t){super.onNumberInput(t),this.clearTentativeOutputs()}onMove(t){return this.getMode()==="number"&&this.model.getNonObjectsState().ui.currentTool.inputIndex===1?!1:super.onMove(t)}getSpecIdToLockIn(t,o){if(o===1){let i=t.inputs[o];return this.getMode()==="number"?`${i.id}-number`:i.id}return super.getSpecIdToLockIn(t,o)}getPartialAnglePreviewInfo(){let{inputIndex:t,idMap:o}=this.model.getNonObjectsState().ui.currentTool;if(t>0){let i=this.model.findDefsForInputId(o[1])[0];if(!i)return;let n=[i.typedRuntimeValue],a=this.model.findDefsForInputId(o[2])[0],s=this.model.findDefsForInputId(o[3])[0];if(a&&s&&n.push(a.typedRuntimeValue,s.typedRuntimeValue),i)return{id:o["angle-output"],type:"rotation-with-incomplete-angle",args:n}}}getSpec(){let t={inputs:[{type:"point",id:"1",hint:M7},{type:"union",valueTypes:[__dcg_shared_module_exports__['va'],__dcg_shared_module_exports__['Oa']],id:"2",hint:ade,numberInputInfo:this.isNumberInputAllowed()?{defaultLatex:"",sliderInfo:{value:this.model.controller.getDegreeMode()?"90":"1.57079632679",min:"0",max:this.model.controller.getDegreeMode()?"360":"2\\pi"}}:void 0}],outputs:[]},o={id:"number-output",type:"rotate",hidden:this.getMode()!=="number",name:this.generateDefaultName(),parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2-number"}]};if(this.getMode()==="directed-angle"){let{idMap:i,inputIndex:n}=this.model.getNonObjectsState().ui.currentTool;n>1&&delete t.inputs[1].numberInputInfo;let a=i[2],s=!1,l=a&&this.model.findDefsForInputId(a)[0];s=!!(l&&l.typedRuntimeValue.valueType==__dcg_shared_module_exports__['va']),s?(t.inputs.push({type:"point",id:"3",hint:sde}),t.outputs.push({id:"directed-angle",type:"directedangle",hidden:!1,showAngleLabel:!1,parents:[{type:"reference-input",id:"2"},{type:"reference-input",id:"1"},{type:"reference-input",id:"3"}]},{id:"angle-output",type:"rotate",hidden:!1,name:this.generateDefaultName(),parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"directed-angle"}]})):t.outputs.push({id:"angle-output",type:"rotate",hidden:!1,name:this.generateDefaultName(),parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2"}]})}else t.outputs.push(o);return t}};var A7="graphing-calculator-text-geometry-tool-vector-hint-start",lde="graphing-calculator-text-geometry-tool-vector-hint-end",cde="graphing-calculator-text-geometry-tool-vector-copy-hint-end",dde={name:"vector",displayNameKey:"graphing-calculator-text-geometry-tool-vector-display-name",toolType:"simple",icon:[{type:"stroked-path",path:[32,68,65,35],lineWidth:"large",arrow:!0},{type:"point",x:32,y:68},{type:"point",x:68,y:32}],workflows:[{input:{broadcast:!0,types:[__dcg_shared_module_exports__['va'],__dcg_shared_module_exports__['va']],hints:[A7,lde]},output:[{type:"vector",parents:[0,1]}]},{input:{broadcast:!1,types:[__dcg_shared_module_exports__['Sa'],__dcg_shared_module_exports__['va']],hints:[A7,cde]},output:[{type:"vector-copy",parents:[0,1]}]}]},av=class extends gr{constructor(t){super(t,dde);this.model=t}};function pde(r){return Array.isArray(r)&&r.length===2&&r.every(e=>Array.isArray(e)&&e.length===2&&e.every(t=>!Array.isArray(t)&&!isNaN(t)))}function ah(r){if(!pde(r))return __dcg_shared_module_exports__['Lb'](__dcg_shared_module_exports__['Sa']);let e=r[1][0],t=r[1][1],o=r[1][0]+r[0][0],i=r[1][1]+r[0][1];return[[e,t],[o,i]]}var ude=14,L7=2.5,hde=40,gde=15,mde=.75,fde=1;function gp(r){return r.valueType===__dcg_shared_module_exports__['va']?r.value:r.valueType===__dcg_shared_module_exports__['za']?r.value[0]:void 0}function bde(r){return r.valueType===__dcg_shared_module_exports__['Sa']?r.value:r.valueType===__dcg_shared_module_exports__['Ta']?r.value[0]:void 0}function yde(r){return r.valueType===__dcg_shared_module_exports__['Ia']||r.valueType===__dcg_shared_module_exports__['Ka']||r.valueType===__dcg_shared_module_exports__['Ea']||r.valueType===__dcg_shared_module_exports__['Sa']?{segment:r.valueType===__dcg_shared_module_exports__['Ea'],value:r.value}:r.valueType===__dcg_shared_module_exports__['Ja']||r.valueType===__dcg_shared_module_exports__['La']||r.valueType===__dcg_shared_module_exports__['Fa']||r.valueType===__dcg_shared_module_exports__['Ta']?{segment:r.valueType===__dcg_shared_module_exports__['Fa'],value:r.value[0]}:void 0}function P7(r){return r.valueType===__dcg_shared_module_exports__['ua']?r.value:r.valueType===__dcg_shared_module_exports__['ya']?r.value[0]:void 0}function D7(r){return r.valueType===__dcg_shared_module_exports__['Oa']?r.value:r.valueType===__dcg_shared_module_exports__['Pa']?r.value[0]:void 0}var oC=class{constructor(e){this.controller=e.controller}getTransformationPreviewInfoFromItem(e,t){var n;if(e.type!=="expression"||e.hidden)return;let{translationsWithVisibleVectorParent:o}=t.transformationPreviewParentData;if(o.has(e.id))return;let i=(n=e.formula.geometry)==null?void 0:n.transformation_preview_info;if(i)return{...i,id:e.id}}getInprogressTransformation(e){let t=this.controller.getAllToolPreviewItems();for(let i of t){let n=this.getTransformationPreviewInfoFromItem(i,e);if(n)return n}let o=this.controller.getGeoModel().getCurrentTool();if(o instanceof nh)return o.getPartialAnglePreviewInfo()}getHoveredOrSelectedTransformations(e){let t=this.controller.getAllSelectedItems(),o=this.controller.getHoveredOrFocusedTokenIdentifier(),i=o?this.controller.getItemsByIdentifier(o)[0]:void 0;i&&!t.some(a=>a.id===i.id)&&t.push(i);let n=[];return t.forEach(a=>{if(a.type!=="expression")return;let s=this.getTransformationPreviewInfoFromItem(a,e);s&&n.push(s)}),n}drawTranslationPreview(e,t,o,i){let n=t.mapx(o[0]),a=t.mapy(o[1]),s=t.mapx(i[0]),l=t.mapy(i[1]);e.save(),e.beginPath(),e.strokeStyle="rgba(0,0,0,.2)",e.lineWidth=5,e.moveTo(n,a),e.lineTo(s,l),As(e,n,a,s,l,20),e.stroke(),e.restore()}drawReflectionPreview(e,t,o){let i=o.value,n=o.segment,[a,s,l,c]=Au([i[0][0],i[0][1],i[1][0],i[1][1]],t,18).clipped,p=(a+l)/2,h=(s+c)/2;if(n){let[k,T,I,P]=Au([i[0][0],i[0][1],i[1][0],i[1][1]],t,17).clipped;p=(k+I)/2,h=(T+P)/2}if(isNaN(p)&&isNaN(h))return;let g=40,m=g/__dcg_shared_module_exports__['M'](a-l,s-c),b=p+(c-s)*m,x=h-(l-a)*m,E=p-(c-s)*m,S=h+(l-a)*m;if(e.save(),e.beginPath(),e.strokeStyle="rgba(0,0,0,.2)",e.lineWidth=4,e.moveTo(a,s),e.lineTo(l,c),this.controller.getGraphSettings().config.reflectionArc){let k=Math.atan2(x-h,b-p),T=g,I=g*.7;e.moveTo(b,x),e.ellipse(p,h,T,I,k,0,Math.PI,!1);let P=.35,A=k+Math.PI/2+P,D=k+Math.PI/2-P;As(e,b+Math.cos(A),x+Math.sin(A),b,x,10),As(e,E+Math.cos(D),S+Math.sin(D),E,S,10)}else e.moveTo(b,x),e.lineTo(E,S),As(e,p,h,b,x,10),As(e,p,h,E,S,10);e.stroke(),e.restore()}drawDilationPreview(e,t,o,i){e.save(),e.beginPath(),e.strokeStyle="rgba(0,0,0,.2)",e.lineWidth=3;let n=i<.6||i>1.4&&i<2?6:10,a=t.pixelsToMath.mapX(25)-t.pixelsToMath.mapX(0);[[a,0],[0,a],[-a,0],[0,-a]].forEach(s=>{let l=[o[0]+s[0],o[1]+s[1]],c=__dcg_shared_module_exports__['pc'](__dcg_shared_module_exports__['mc'](o,i),l),[p,h]=t.map_xy_pairs(l),[g,m]=t.map_xy_pairs(c);e.moveTo(p,h),e.lineTo(g,m),As(e,p,h,g,m,n)}),e.stroke(),e.restore()}drawRotationPreview(e,t,o,i,n,a){if(this.drawRotationCenterPreview(e,t,o),!(n===void 0||!isFinite(n))){if(a!==void 0&&a!==0&&isFinite(a)){if(i&&i[0]===o[0]&&i[1]===o[1])return;this.drawFullRotationAngle(e,t,o,n,a,!1)}else if(i){this.drawPlaceholderRotationAngle(e,t,i,n);return}}}drawFullRotationAngle(e,t,o,i,n,a){e.save(),e.beginPath(),e.strokeStyle="rgba(0,0,0,.2)",e.lineWidth=L7;let s=hde,l=-i,c=-n,p,h;if(a){let S=Au([o[0],o[1],o[0]+Math.cos(i),o[1]+Math.sin(i)],t,19).clipped;p=S[0],h=S[1];let k=Au([o[0],o[1],o[0]+Math.cos(i+n),o[1]+Math.sin(i+n)],t,19).clipped;e.moveTo(p,h),e.lineTo(S[2],S[3]),e.moveTo(p,h),e.lineTo(k[2],k[3]);let T=s*Math.abs(c),I=.5*(1-mde)*T,P=Math.min(I,gde),A=(c>0?1:-1)*P/s;l+=A,c-=2*A}else[p,h]=t.map_xy_pairs(o);let g=c<=0,m=p+s*Math.cos(l),b=h+s*Math.sin(l),x=p+s*Math.cos(l+c),E=h+s*Math.sin(l+c);e.moveTo(m,b),e.arc(p,h,s,l,l+c,g),WD(e,x,E,l,c,10,s),e.stroke(),e.restore()}drawPlaceholderRotationAngle(e,t,o,i){e.save(),e.beginPath(),e.strokeStyle="rgba(0,0,0,.2)",e.lineWidth=fde;let n=-i,[a,s]=t.map_xy_pairs(o);e.moveTo(a,s);let l=1.5*Jd(0,t);e.lineTo(a+l*Math.cos(n),s+l*Math.sin(n)),e.stroke(),e.restore()}drawRotationCenterPreview(e,t,o){let[i,n]=t.map_xy_pairs(o);e.save(),e.strokeStyle="rgba(0,0,0,.2)",e.lineWidth=L7,e.beginPath(),e.arc(i,n,ude,0,2*Math.PI),e.stroke(),e.restore()}redrawToCtx(e){let{ctx:t,projection:o}=e,i=this.getInprogressTransformation(e),n=this.getHoveredOrSelectedTransformations(e);i&&n.push(i);for(let a=0;a<n.length;a++){let s=n[a],l=s.args;switch(s.type){case"translate":if(l.length===2){let c=gp(l[0]),p=gp(l[1]);c&&p&&this.drawTranslationPreview(t,o,c,p)}else if(l.length===1){let c=bde(l[0]);if(c){let[p,h]=ah(c);this.drawTranslationPreview(t,o,p,h)}}break;case"reflect":{let c=yde(l[0]);c&&this.drawReflectionPreview(t,o,c)}break;case"dilate":{let c=gp(l[0]),p=P7(l[1]);c&&p!==void 0&&isFinite(p)&&p!==1&&this.drawDilationPreview(t,o,c,p)}break;case"rotate":{let c=gp(l[0]);if(!c)return;let p=P7(l[1]),h=D7(l[1]),g,m;if(p!==void 0)m=this.controller.getDegreeMode()?p*Math.PI/180:p,g=0;else if(h)g=h[1],m=h[2],e.transformationPreviewParentData.rotationsWithVisibleAndCenteredAngle.has(s.id)&&(m=void 0);else return;this.drawRotationPreview(t,o,c,h?h[0]:void 0,g,m)}break;case"rotation-with-incomplete-angle":{let c=gp(l[0]);if(!c)return;let p,h;if(l.length>=3){let g=gp(l[1]);if(p=gp(l[2]),!c||!g||!p)return;let m=g[0]-p[0],b=g[1]-p[1];h=Math.atan2(b,m)}this.drawRotationPreview(t,o,c,p,h,void 0)}}}}};function O7(r){var c,p,h,g,m,b,x,E,S,k;let e=new Set,t=new Set,o=new Set,i=new Set,n={},a={};for(let T of[...r.getAllItemModels(),...r.getAllToolPreviewItems()]){if(T.type!=="expression"||$o(T))continue;let I=T.formula.typed_constant_value;if(!I)continue;if(__dcg_shared_module_exports__['wb'](I.valueType,__dcg_shared_module_exports__['Sa'])){let A=(c=uo(T))==null?void 0:c.identifier;A&&(n[A]=T.id)}let P=D7(I);if(P){let A=(p=uo(T))==null?void 0:p.identifier;A&&(a[A]={id:T.id,value:P})}}let s=r.getHoveredOrFocusedTokenIdentifier(),l=[...r.getAllItemModels().filter(T=>{var I;if(r.isItemSelected(T.id))return!0;if(T.type==="expression"&&s){let P=(I=uo(T))==null?void 0:I.identifier;return s===P}return!1}),...r.getAllToolPreviewItems()];for(let T of l){if(T.type!=="expression")continue;let I=T.formula.geometry,P=I==null?void 0:I.transformation_preview_info;if(((h=I==null?void 0:I.call)==null?void 0:h.symbol)==="translate"&&(P==null?void 0:P.args.length)===1&&__dcg_shared_module_exports__['wb'](P.args[0].valueType,__dcg_shared_module_exports__['Sa'])){let A=(b=(m=(g=T.formula.geometry)==null?void 0:g.call)==null?void 0:m.parents)==null?void 0:b[0];if(!A||A.type==="arbitrary-expression")continue;let D=n[__dcg_shared_module_exports__['Lc'](A)];D&&(e.add(T.id),t.add(D))}if(((x=I==null?void 0:I.call)==null?void 0:x.symbol)==="rotate"&&(P!=null&&P.args)&&(P==null?void 0:P.args.length)>1&&__dcg_shared_module_exports__['wb'](P.args[1].valueType,__dcg_shared_module_exports__['Oa'])){let A=(k=(S=(E=T.formula.geometry)==null?void 0:E.call)==null?void 0:S.parents)==null?void 0:k[1];if(!A||A.type==="arbitrary-expression")continue;let D=a[__dcg_shared_module_exports__['Lc'](A)];if(!D)continue;i.add(D.id);let G=gp(P.args[0]);if(!G)continue;D.value[0][0]===G[0]&&D.value[0][1]===G[1]&&o.add(T.id)}}return{translationsWithVisibleVectorParent:e,translationPreviewVectorParents:t,rotationsWithVisibleAndCenteredAngle:o,rotationPreviewAngleMarkerParents:i}}var sn=class sn{constructor(e=0,t=0,o=1,i=o){this.tx=e,this.ty=t,this.sx=o,this.sy=i}toJSON(){return{tx:this.tx,ty:this.ty,sx:this.sx,sy:this.sy}}compose(e){return new sn(this.sx*e.tx+this.tx,this.sy*e.ty+this.ty,this.sx*e.sx,this.sy*e.sy)}translate(e,t){let o=t===void 0?e.x:t.x-e.x,i=t===void 0?e.y:t.y-e.y;return new sn(this.tx+o,this.ty+i,this.sx,this.sy)}scale(e,t){return sn.scale(e,t).compose(this)}scaleAtPoint(e,t,o=t){return sn.scaleAtPoint(e,t,o).compose(this)}mapX(e){return this.sx*e+this.tx}mapY(e){return this.sy*e+this.ty}mapPoint(e){return{x:this.mapX(e.x),y:this.mapY(e.y)}}mapRect(e){return{left:this.mapX(e.left),right:this.mapX(e.right),bottom:this.mapY(e.bottom),top:this.mapY(e.top)}}};sn.scale=function(e,t=e){return new sn(0,0,e,t)},sn.translate=function(e,t){return new sn().translate(e,t)},sn.scaleAtPoint=function(e,t,o=t){return o===void 0&&(o=t),new sn(e.x*(1-t),e.y*(1-o),t,o)},sn.fromRects=function(e,t){let o=(t.right-t.left)/(e.right-e.left),i=(t.top-t.bottom)/(e.top-e.bottom);return new sn(t.left-o*e.left,t.bottom-i*e.bottom,o,i)},sn.fromJSON=function(e){return new sn(e.tx,e.ty,e.sx,e.sy)};var Yc=sn;Vt();var{log10:iC}=Math;function kR(r,e){let t=e.x-r.x,o=e.y-r.y,i=.5*(r.x+e.x),n=.5*(r.y+e.y),a=.5*__dcg_shared_module_exports__['M'](t,o);return{center:ln(i,n),radius:a}}function R7(r,e){let t={x:2*r.x-e.x,y:2*r.y-e.y};return kR(e,t)}function F7(r,e){let t=[];for(let o=0;o<r.length;o++)t.push(ln(r[o].pageX-e.left,r[o].pageY-e.top));return t}function ln(r,e){return{x:r,y:e}}function G7(r){return ln(.5*(r.left+r.right),.5*(r.bottom+r.top))}var wde=0,sv=class{constructor(e,t){this.controller=e;this.controller=e,this.undoViewportLatex=t,this.currentViewportLatex=t,this._hasViewportBeenEvaluatedSinceSetState=!1}hasViewportBeenEvaluatedSinceSetState(){return this._hasViewportBeenEvaluatedSinceSetState}clearHasViewportBeenEvaluatedSinceSetState(){this._hasViewportBeenEvaluatedSinceSetState=!1}getUndoViewportLatex(){return this.undoViewportLatex}getCurrentViewportLatex(){return this.currentViewportLatex}setCurrentViewportLatex(e){this.currentViewportLatex=e;let t=__dcg_shared_module_exports__['Qe'].evaluateFromLatex(e,this.controller.getDegreeMode(),this.controller.isComplexModeEnabled());t&&(this.setEvaluatedViewport(t),this._hasViewportBeenEvaluatedSinceSetState=!0)}setUndoViewportLatex(e){this.undoViewportLatex=e,this.setCurrentViewportLatex(e),this.controller.markSquareAxesAfterUserEditedViewport()}setCurrentViewport(e){this.setCurrentViewportLatex(Vn(e))}setUndoViewport(e){this.setUndoViewportLatex(Vn(e))}hasViewportChangedSinceLastDirectUserEdit(){return!__dcg_shared_module_exports__['s'](this.currentViewportLatex,this.lastDirectlyEditedViewport)}markUserDirectlyEditedViewport(){this.lastDirectlyEditedViewport=this.getCurrentViewportLatex()}updateViewportFromEvaluator(e){var o;if(this.controller.canComputeViewportSynchronously())return;let t=(o=e[Ty])==null?void 0:o.viewport;if(t){let i=__dcg_shared_module_exports__['Qe'].fromObject(t.value);i.equals(this.getViewport())||(this.setEvaluatedViewport(i),this.controller.markSquareAxesAfterUserEditedViewport()),this.controller.setDynamicViewportBoundsErrors(t.status==="error"?t.errors:void 0),this._hasViewportBeenEvaluatedSinceSetState||this.ensureValidNumericViewport()}this._hasViewportBeenEvaluatedSinceSetState=!0}getViewportParsable(){return{type:"viewport",id:Ty,viewport:this.getCurrentViewportLatex()}}},nC=class extends sv{constructor(t,o){super(o,Vn(t.getProjection().viewport));this.s=kc(()=>this.grapher.settings.config.language);this.grapher=t,this.elt=t.elt,this.id=wde++,this.controller=o,this.isScalingEnabled=!1,this.mousePt=ln(0,0),this.lastScrollZoom=Date.now(),this.preventScrollZoom=!1,this.addMouseWheelEventHandler(),this.addTouchEventHandler()}remove(){re(window).off(".viewportcontroller-"+this.id)}getViewport(){return this.grapher.getProjection().viewport}getProjection(){return this.grapher.getProjection()}isViewportLocked(){return this.grapher.controller.zoomAndPanDisabled()}updateMouse(t){let o=this.elt.getBoundingClientRect();this.mousePt=ln(t.clientX-o.left,t.clientY-o.top)}updateScaleAxis(){this.isMouseInViewport()&&(this.isMouseNearYAxis()?this.grapher.scaleAxis="y":this.isMouseNearXAxis()?this.grapher.scaleAxis="x":this.grapher.scaleAxis="both"),this.updateCursor(),this.controller.requestRedrawGraph()}updateCursor(){this.elt.classList.toggle("dcg-scale-horizontal",this.grapher.scaleAxis==="x"),this.elt.classList.toggle("dcg-scale-vertical",this.grapher.scaleAxis==="y"),this.elt.classList.toggle("dcg-scale-both",this.grapher.scaleAxis==="both")}isMouseNearOrigin(){let o=this.getProjection().mathToPixels.mapPoint(ln(0,0));return Math.abs(this.mousePt.x-o.x)<50&&Math.abs(this.mousePt.y-o.y)<50}isMouseNearXAxis(){let t=this.getProjection(),o=t.pixelCoordinates,i=t.mathToPixels.mapY(0);return i=Math.min(Math.max(o.top,i),o.bottom),Math.abs(this.mousePt.y-i)<40&&t.settings.showXAxis}isMouseNearYAxis(){let t=this.getProjection(),o=t.pixelCoordinates,i=t.mathToPixels.mapX(0);return i=Math.min(Math.max(o.left,i),o.right),Math.abs(this.mousePt.x-i)<40&&t.settings.showYAxis}isMouseInViewport(){let t=this.getProjection(),o=t.mathCoordinates,i=t.pixelsToMath.mapPoint(this.mousePt);return i.x>=o.left&&i.x<=o.right&&i.y>=o.bottom&&i.y<=o.top}_setViewportWithoutCancellingAnimation(t){let o=__dcg_shared_module_exports__['Qe'].fromObject(t),i=this.controller.getAxisScaleSettings(),n=o.isXValid(i.xAxisScale),a=o.isYValid(i.yAxisScale),s=this.getViewport();if(n||(o.xmin=s.xmin,o.xmax=s.xmax),a||(o.ymin=s.ymin,o.ymax=s.ymax),o.equals(this.getViewport()))return;let l=this.getProjection();this.grapher._setProjection(new oa(l.screen,o,l.settings))}setEvaluatedViewport(t){this.cancelAnimation(),this._setViewportWithoutCancellingAnimation(t)}ensureValidNumericViewport(){var s;let t=this.getViewport(),o=this.controller.getAxisScaleSettings(),i=t.isXValid(o.xAxisScale),n=t.isYValid(o.yAxisScale),a=(s=this.controller.getGrapher())==null?void 0:s.getDefaultViewport();if(!(i&&n)&&a){let l=new __dcg_shared_module_exports__['Qe'](i?t.xmin:a.xmin,i?t.xmax:a.xmax,n?t.ymin:a.ymin,n?t.ymax:a.ymax);this.setEvaluatedViewport(l)}}setScreen(t){let o=this.getProjection();if(this.grapher._setProjection(new oa(t,o.viewport,o.settings)),this.getProjection().settings.squareAxes){let i=this.getViewport().squareYAxis(t,this.getProjection().settings);this.setCurrentViewport(i)}}getTransformedViewport(t){let{pixelCoordinates:o,mathCoordinates:i,settings:n}=this.getProjection(),{xAxisScale:a,yAxisScale:s}=n,l=t.mapRect(o),c=__dcg_shared_module_exports__['qd'].fromRectsInverse(i,l,{xAxisScale:a,yAxisScale:s}).mapRect(o);return new __dcg_shared_module_exports__['Qe'](c.left,c.right,c.bottom,c.top)}transformViewport(t){this.setCurrentViewport(this.getTransformedViewport(t)),(this.grapher.scaleAxis==="x"||this.grapher.scaleAxis==="y")&&this.controller.markSquareAxesAfterUserEditedViewport()}animateToViewport(t){this.cancelAnimation();let o=this.getProjection(),i=o.viewport,n=o.mathToPixels,a=0,s,l=c=>{s||(s=c);let p=(c-s)/500;if(a+=p,a<1){this.__animationTimeout=requestAnimationFrame(l);let h=n.interpolateX(i.xmin,t.xmin,a),g=n.interpolateX(i.xmax,t.xmax,a),m=n.interpolateY(i.ymin,t.ymin,a),b=n.interpolateY(i.ymax,t.ymax,a);this._setViewportWithoutCancellingAnimation(new __dcg_shared_module_exports__['Qe'](h,g,m,b)),this.grapher.debounceUserRequestedViewportChange()}else this.setCurrentViewport(t),this.grapher.debounceUserRequestedViewportChange(),this.controller.markSquareAxesAfterUserEditedViewport()};this.__animationTimeout=requestAnimationFrame(l)}cancelAnimation(){cancelAnimationFrame(this.__animationTimeout)}addMouseWheelEventHandler(){let t=!1,o,i;re(window).on("scroll.viewportcontroller-"+this.id,s=>{t=!0}),re(window).on("wheel.viewportcontroller-"+this.id,s=>{o=s.clientX,i=s.clientY}),re(window).on("mousemove.viewportcontroller-"+this.id,s=>{if(!t)return;let l=s.clientX-o,c=s.clientY-i;l*l+c*c<100||(t=!1)});let n=0,a=s=>{let l=s.originalEvent;if(l.deltaX===0&&l.deltaY===0)return;let c=Date.now(),p=c-this.lastScrollZoom;if(this.preventScrollZoom&&p>50&&(this.preventScrollZoom=!1),this.lastScrollZoom=c,this.preventScrollZoom)return;let h=this.getProjection();if(this.isViewportLocked())return;let g=h.mathToPixels;if(t)return;l.preventDefault(),this.updateMouse(l);let m=g.mapPoint(ln(0,0)),x=(l.deltaY===0?-l.deltaX:-l.deltaY)>0?1:-1,E=this.isMouseNearOrigin()&&x>0?m:this.mousePt;if(n>0)return;n+=1,requestAnimationFrame(()=>{n--});let{xAxisScale:S,yAxisScale:k}=h.settings,T=.0625;(S==="logarithmic"||k==="logarithmic")&&p<25&&(T*=Math.max(10,p)/25);let I=x>0?1+T:1/(1+T),P=this.grapher.scaleAxis,A=P==="x"||P==="both"||!P?I:1,D=P==="y"||P==="both"||!P?I:1,G=Yc.scaleAtPoint(E,A,D),N=this.getTransformedViewport(G);x==-1&&this.tooBig(N)||x==1&&this.tooSmall(N)||(this.transformViewport(G),this.grapher.debounceUserRequestedViewportChange())};re(this.elt).on("wheel",a)}applyPanTouchChanges(t,o){if(this.isViewportLocked()||this.isScalingEnabled)return;let i=ln(o[0].x-t[0].x,o[0].y-t[0].y);this.transformViewport(Yc.translate(i)),this.grapher.debounceUserRequestedViewportChange()}chooseDragScaleCenter(){let t=this.getProjection(),o=t.pixelCoordinates,i=t.mathToPixels.mapX(0),n=t.mathToPixels.mapY(0);return i=Math.min(Math.max(o.left,i),o.right),n=Math.min(Math.max(o.top,n),o.bottom),ln(i,n)}applyScaleTouchChanges(t,o){if(this.isViewportLocked())return;let i=this.grapher.scaleAxis,n,a;if(t.length===2&&o.length===2)n=kR(t[0],t[1]),a=kR(o[0],o[1]);else if(o.length===1){let g=this.chooseDragScaleCenter();n=R7(g,t[0]),a=R7(g,o[0])}else return;let s=a.radius/n.radius,l=i==="y"?1:s,c=i==="x"?1:s,p=Yc.scaleAtPoint(n.center,l,c).translate(n.center,a.center),h=this.getTransformedViewport(p);s<1&&this.tooBig(h)||s>1&&this.tooSmall(h)||(this.transformViewport(p),this.grapher.debounceUserRequestedViewportChange())}panFromKeyboard(t){if(this.isViewportLocked()||this.isScalingEnabled)return;let o=ln(0,0);t==="Up"?(Te(this.s("graphing-calculator-narration-viewport-pan-up")),o=ln(0,-5)):t==="Down"?(Te(this.s("graphing-calculator-narration-viewport-pan-down")),o=ln(0,5)):t==="Left"?(Te(this.s("graphing-calculator-narration-viewport-pan-left")),o=ln(-5,0)):t==="Right"&&(Te(this.s("graphing-calculator-narration-viewport-pan-right")),o=ln(5,0)),this.transformViewport(Yc.translate(o)),this.grapher.debounceUserRequestedViewportChange()}addTouchEventHandler(){let t=[],o=!1,i=!0,n=!0,a=b=>{o||this.isViewportLocked()||(this.updateMouse(b.originalEvent),this.isScalingEnabled&&this.updateScaleAxis())};re(window).on("mousemove.viewportcontroller-"+this.id,a),this.beginPanning=b=>{let x=this.getProjection();if(this.isViewportLocked()||o||b.touches.length!==b.changedTouches.length)return;o=!0,this.grapher.isDragging=!0,this.updateMouse(b);let E=x.mathToPixels.mapPoint(ln(0,0)),S=this.grapher.scaleAxis;(S==="x"||S==="both")&&(i=this.mousePt.x>E.x),(S==="y"||S==="both")&&(n=this.mousePt.y>E.y),this.controller.dispatch({type:"grapher/drag-start"}),re(document).on("dcg-tapmove.graphdrag",g),re(document).on("dcg-tapstart.graphdrag dcg-tapend.graphdrag dcg-tapcancel.graphdrag",m)};let s=b=>{if(b.length<2)return;let x=this.grapher.getProjection(),E=x.pixelCoordinates,S=x.mathToPixels.mapX(0),k=x.mathToPixels.mapY(0),T=40;S=Math.min(Math.max(E.left,S),E.right),k=Math.min(Math.max(E.top,k),E.bottom);let I=b[1].x-b[0].x,P=b[1].y-b[0].y;return Math.abs(b[0].x-S)<T&&Math.abs(b[1].x-S)<T&&Math.abs(P)>3*Math.abs(I)&&x.settings.showYAxis?"y":Math.abs(b[0].y-k)<T&&Math.abs(b[1].y-k)<T&&Math.abs(I)>3*Math.abs(P)&&x.settings.showXAxis?"x":"both"},l=b=>(this.grapher.scaleAxis||(this.grapher.scaleAxis=s(b)),this.grapher.scaleAxis),c=()=>{this.grapher.scaleAxis&&(this.grapher.scaleAxis=void 0,this.controller.requestRedrawGraph(),this.updateCursor())},p=()=>{this.isScalingEnabled=!1,this.preventScrollZoom=!0,c()},h=b=>b.altKey||b.ctrlKey||b.metaKey,g=b=>{let x=b;if(!o||this.isViewportLocked())return;let E=F7(x.touches,qn(this.elt));if(t.length===2&&E.length===2)l(E),this.applyScaleTouchChanges(t,E);else if(t.length===1&&this.isScalingEnabled){this.updateMouse(x);let S=this.grapher.scaleAxis,T=this.getProjection().mathToPixels.mapPoint(ln(0,0)),I,P,A=5,D=i?1:-1,G=n?1:-1;if((S==="x"||S==="both")&&(I=this.mousePt.x>T.x+A*D),(S==="y"||S==="both")&&(P=this.mousePt.y>T.y+A*G),S==="x"&&i!==I||S==="y"&&n!==P||S==="both"&&i!==I&&n!==P)return;this.applyScaleTouchChanges(t,E)}else c();t.length===1&&this.applyPanTouchChanges(t,E),this.controller.dispatch({type:"grapher/drag-move"}),t=E},m=b=>{let x=b;o&&(this.cancelAnimation(),t=F7(x.touches,qn(this.elt)),x.touches.length===0&&(o=!1,this.grapher.isDragging=!1,re(document).off(".graphdrag"),this.grapher.debounceUserRequestedViewportChange(),this.controller.dispatch({type:"grapher/drag-end"})),(x.touches.length===0||x.touches.length===1&&!this.isScalingEnabled)&&c())};re(window).on("keydown.viewportcontroller-"+this.id,b=>{this.controller.isGeoToolActive()||this.isViewportLocked()||(Pe(b)===gy&&!h(b)&&this.shouldAllowShiftScaling()?(this.isScalingEnabled=!0,this.grapher.scaleAxis||this.updateScaleAxis()):p())}),re(window).on("keyup.viewportcontroller-"+this.id+" blur.viewportcontroller-"+this.id,p)}shouldAllowShiftScaling(){return!this.controller.isGeometry()}zoom(t){let o=this.getProjection().pixelCoordinates;if(t==="in"){let i=this.getTransformedViewport(Yc.scaleAtPoint(G7(o),2));this.tooSmall(i)||this.animateToViewport(i),Te(this.s("graphing-calculator-narration-viewport-zoom-in"))}else if(t==="out"){let i=this.getTransformedViewport(Yc.scaleAtPoint(G7(o),.5));this.tooBig(i)||this.animateToViewport(i),Te(this.s("graphing-calculator-narration-viewport-zoom-out"))}else if(t==="square"){let i=this.getSquareViewport();this.getProjection().settings.setProperty("squareAxes",!0),this.animateToViewport(i),Te(this.s("graphing-calculator-narration-viewport-zoom-square"))}else t==="default"&&(this.controller.getDynamicViewportBoundsErrors()?this.zoomHomeImmediately():this.setDefaultViewport())}tooBig(t){let o=this.getProjection(),{xAxisScale:i,yAxisScale:n}=o.settings,{xmin:a,xmax:s,ymin:l,ymax:c}=t;return i==="logarithmic"&&iC(s)-iC(a)>60||n==="logarithmic"&&iC(c)-iC(l)>60||this.controller.isGeometry()&&s-a>1e5}tooSmall(t){let{xmin:o,xmax:i}=t;return this.controller.isGeometry()&&i-o<1e-4}zoomSquareImmediately(){this.setUndoViewport(this.getSquareViewport())}zoomHomeImmediately(){let t=this.controller.getEvaluatedDefaultViewport();t&&this.setUndoViewport(t)}zoomCustom(t){this.animateToViewport(t),Te(this.s("graphing-calculator-narration-viewport-updated"))}setDefaultViewport(){let t=this.controller.getEvaluatedDefaultViewport();t&&(this.animateToViewport(t),Te(this.s("graphing-calculator-narration-viewport-default")))}isDefaultViewportRestored(){let t=this.getProjection(),{xAxisScale:o,yAxisScale:i}=t.settings,n=o==="linear",a=i==="linear",s=t.viewport,l=this.controller.getEvaluatedDefaultViewport();if(!l)return!1;let c=n?s.xmax-s.xmin:Math.log(s.xmax/s.xmin),p=a?s.ymax-s.ymin:Math.log(s.ymax/s.ymin),h=n?s.xmin-l.xmin:Math.log(s.xmin/l.xmin),g=n?s.xmax-l.xmax:Math.log(s.xmax/l.xmax),m=a?s.ymin-l.ymin:Math.log(s.ymin/l.ymin),b=a?s.ymax-l.ymax:Math.log(s.ymax/l.ymax),x=.025;return Math.abs(h/c)<x&&Math.abs(g/c)<x&&Math.abs(m/p)<x&&Math.abs(b/p)<x}getSquareViewport(){let t=this.getProjection();return t.settings.lastChangedAxis==="y"?t.viewport.squareXAxis(t.screen,t.settings):t.viewport.squareYAxis(t.screen,t.settings)}};function Sde(){return new La(1024,768)}function N7(r){let{xAxisScale:e,yAxisScale:t}=r,[o,i]=e==="linear"?[-__dcg_shared_module_exports__['Oe'],__dcg_shared_module_exports__['Oe']]:[10**-__dcg_shared_module_exports__['Pe'],10**__dcg_shared_module_exports__['Pe']],[n,a]=t==="linear"?[-__dcg_shared_module_exports__['Oe'],__dcg_shared_module_exports__['Oe']]:[10**-__dcg_shared_module_exports__['Pe'],10**__dcg_shared_module_exports__['Pe']];return new __dcg_shared_module_exports__['Qe'](o,i,n,a)}var Tde=document.createElement("canvas"),sh=class r extends If{constructor(t,o,i,n){super({elt:t,settings:o,controller:i,evaluator:n});this.type="2d";this.__screenRequested3D=new La(768,768);this.lastActiveToken={selected:void 0,hovered:void 0};let a=Sde(),s=N7(o).squareYAxis(a,o);this.__projection=new oa(a,s,o),this.markLabelsDirty=__dcg_shared_module_exports__['q'](()=>{this.evaluator.notifyWhenSynced(()=>{this.poiLabelsLayer.markLabelsDirty(),this.controller.requestRedrawGraph()})},300),this.poiController=new Ef(this,o),this.viewportController=new nC(this,this.controller),this.showPOIDots=!0,this.graphSketches={},this.graphImages={},this.audioGraph=new bI(i,this),this.boxSelectLayer=new yI;let l=document.createElement("div");this.elt.appendChild(l),this.imageLayer=new nv(this),this.gridLayer=new eC,this.poiDotsLayer=new tC(this.controller),this.graphsLayer=new Ls(this.controller,this.settings,h=>this.audioGraph.getExpressionAriaLabel(h)),this.transformationPreviewLayer=new oC(this),this.clickableObjectsLayer=new ov(this),this.movablePointsLayer=new bx(this);let c=document.createElement("div");this.elt.appendChild(c),this.poiLabelsLayer=lv.mountToNode(zm,c,{grapher:()=>this});let p=document.createElement("div");this.elt.appendChild(p),this.geoKeyboardCursorLayer=lv.mountToNode(WI,p,{grapher:()=>this}),this.traceLayer=this.poiLabelsLayer,this.scaleAxis=void 0}privateGetGridLayer(){return this.gridLayer}static copyGraphProperties(t,o){t=__dcg_shared_module_exports__['Vd'](Bo,t);let i={...t};delete i.viewport,delete i.__viewportEvaluatedForBackMigration,delete i.__v12ViewportLatexStash;let n=o.validateSettings(i);for(let a in n)o.setProperty(a,n[a]);return t}remove(){this.elt.remove(),this.poiController.remove(),this.viewportController.remove(),this.audioGraph.remove()}tick(t){this.__movablePointListener&&this.__movablePointListener();let o=this.viewportController.getViewport();this.lastTickViewport&&!o.equals(this.lastTickViewport)&&this.poiController.simulatedTapMove(),this.lastTickViewport=o,(this.__redrawRequested||this.poiLabelsLayer.areAnyLabelsAnimating())&&this._redrawAllLayers()}registerMovablePointListener(t){this.__movablePointListener=t}deregisterMovablePointListener(){this.__movablePointListener=void 0}clear(){this.graphSketches={},this.graphImages={}}getGraphSketch(t){return this.graphSketches[t]}getGraphImage(t){return this.graphImages[t]}addGraphSketch(t){this.graphSketches[t.id]=t}removeGraphSketch(t){delete this.graphSketches[t]}addGraphImage(t){t.imageObj.width&&t.imageObj.height?(this.graphImages[t.id]=t,this.controller.requestRedrawGraph()):re(t.imageObj).on("load.calc_load",()=>this.addGraphImage(t))}removeGraphImage(t){let o=this.graphImages[t];o&&re(o.imageObj).off("load.calc_load"),delete this.graphImages[t],this.controller.requestRedrawGraph()}setBoxSelectRectangle(t){this.boxSelectRectangle=t,this.controller.requestRedrawGraph()}getProjection(){return this.__projection}_setProjection(t){this.__projection=t,this.controller.requestRedrawGraph()}getAudioTrace(){return this.audioGraph}getDefaultViewport(){let t=this.getProjection();return N7(this.settings).squareYAxis(t.screen,this.settings)}_updateScreenSize(t,o){if(t<=0||o<=0)return;let n=this.getProjection().screen;if(n.width===t&&n.height===o)return;let a=new La(t,o);this.viewportController.setScreen(a)}update(){let{top:t,left:o,width:i,height:n}=this.controller.computeMajorLayout().grapher,a=this.controller.isGraphPaperFocused()&&!this.poiController.keyboardAttentionManager.getKeyboardAttention()&&!this.controller.getSelectedGeoExpression()&&!this.geoKeyboardCursorLayer.showCursor()&&!this.controller.inAudioTraceMode()&&bz();this.elt.classList.toggle("dcg-grapher-focused",a),this.controller.isThreeDMode()&&({width:i,height:n}=this.__screenRequested3D),i>0&&n>0?(this._setIsVisible(!0),this._updateScreenSize(i,n),Si(this.elt,{position:"absolute",left:o+"px",top:t+"px",width:i+"px",height:n+"px"})):this._setIsVisible(!1)}setActiveToken(t,o){let i=this.lastActiveToken[o];this.lastActiveToken[o]=t;let n=t&&this.getGraphSketch(t),a=i&&this.getGraphSketch(i);a!==n&&(a&&(o==="selected"?a.tokenSelected=!1:o==="hovered"&&(a.tokenHovered=!1)),n&&(o==="selected"?n.tokenSelected=!0:o==="hovered"&&(n.tokenHovered=!0))),this.controller.requestRedrawGraph()}deselectSketch(t){let o=this.getGraphSketch(t);o&&(o.selected=!1,o.showPOI=!1,o.showHighlight=!1)}selectSketch(t){let o=this.getGraphSketch(t);o&&(o.selected=!0,o.showPOI=this.controller.isTraceEnabled(),o.showHighlight=!0)}setSketchHoistedToTop(t,o){let i=this.getGraphSketch(t);i&&(i.hoistToTop=o)}updateSketch(t,o){let i=this.getGraphSketch(t);if(!o.length){this.removeGraphSketch(t);return}let n=new XI(t,o);o[0].branchMode!==15&&(n.color=o[0].color,o[0].style&&(n.style=o[0].style)),i&&n.updateFrom(i);let a=this.controller.getPropagatedSelectedIds(),s=!!a.selected[t],l=!!a.hoistedToTop[t];n.selected=s,n.tokenHovered=t===String(this.lastActiveToken.hovered),n.tokenSelected=t===String(this.lastActiveToken.selected),n.showPOI=s&&this.controller.isTraceEnabled(),n.showHighlight=s,n.hoistToTop=l,this.addGraphSketch(n)}updateIntersections(t,o){let i=this.getGraphSketch(t);i&&i.updateIntersections(o)}_clear(){let o=this.getProjection().screen;this.canvasLayer.resize(o.width,o.height),this.canvasLayer.ctx&&(this.canvasLayer.ctx.clearRect(0,0,o.width,o.height),this.controller.isThreeDMode()?this.controller.getInvertedColors()||(this.canvasLayer.ctx.fillStyle="rgba(255,255,255,0.001961)",this.canvasLayer.ctx.fillRect(0,0,o.width,o.height)):c0&&(this.controller.getInvertedColors()||(this.canvasLayer.ctx.fillStyle="rgb(0,0,0)",this.canvasLayer.ctx.fillRect(0,0,o.width,o.height))))}isDrawingPlaneFor3dMode(){return this.controller.showPlane3D()||this.controller.showNumbers3D()}createDrawContext(){if(this.canvasLayer.ctx)return{ctx:this.canvasLayer.ctx,projection:this.getProjection(),transformationPreviewParentData:O7(this.controller)}}_redrawAllLayers(){if(this.update(),!this.isVisible&&!this.isDrawingPlaneFor3dMode())return;this.__redrawRequested=!1;let t=Date.now();this._clear();let o=this.createDrawContext();this.audioGraph.recomputePoints(),this._redrawGrapher(o),this._redrawTransformationPreviewLayer(o),this._redrawBoxSelectLayer(o),this._redrawGeoKeyboardCursorLayer(),this._updateCanvasLayerAria(),this.events.triggerEvent("redraw",Date.now()-t);let i=this.controller.getGrapher3d();this.isDrawingPlaneFor3dMode()&&i&&i.webglLayer.updatePlaneMap()}_redrawTransformationPreviewLayer(t){t&&this.transformationPreviewLayer.redrawToCtx(t)}_redrawBoxSelectLayer(t){t&&this.boxSelectLayer.redrawToCtx(t,this.boxSelectRectangle)}_redrawGeoKeyboardCursorLayer(){this.geoKeyboardCursorLayer.update()}_updateCanvasLayerAria(){let t=0;for(let o in this.graphSketches)Pa(this.controller,this.graphSketches[o])&&(t+=1);this.canvasLayer.updateAria(this.isVisible,t)}_redrawGrapher(t){var n;if(!t||!((n=this.controller.getGrapher())!=null&&n.viewportController.hasViewportBeenEvaluatedSinceSetState()))return;let o=this.controller.isThreeDMode();this.clickableObjectsLayer.recomputeClickableObjects(),o||(this.imageLayer.recomputeImages(t),this.movablePointsLayer.recomputeMovablePoints(t),this.poiLabelsLayer.recomputeLabels(t,this.size(),()=>this.drawLabelHitMask({projection:this.getProjection(),showMovablePoints:!0,includePillboxes:!0})));let i=a=>{this.graphsLayer.redrawToCtx(t,this.graphSketches,this.graphImages,a.drawOrder,this.poiLabelsLayer,this.clickableObjectsLayer),o||(this.poiLabelsLayer.copyToCtx(t.ctx,{filter:"canvas-labels",allowedSketches:a.drawSet}),this.movablePointsLayer.redrawToCtx(t.ctx,t.projection,a.drawOrder,{showMovablePoints:!0,renderForScreenshot:!1}))};for(let a of this.__drawLayers)a.layer<0&&i(a);this.gridLayer.redrawToCtx(t,this.scaleAxis);for(let a of this.__drawLayers)a.layer>=0&&i(a);!o&&this.showPOIDots&&this.poiDotsLayer.redrawToCtx(t,this.graphSketches,this.poiLabelsLayer,this.clickableObjectsLayer,this.__drawLayers)}size(){let t=this.canvasLayer.ctx;if(!t)return{width:0,height:0};let o=t.canvas.getBoundingClientRect();return{width:o.width,height:o.height}}_parseScreenshotOpts(t){return ER(t,this.settings,this.getProjection().screen)}_syncScreenshotReturnCanvas(t){let o=document.createElement("canvas");if(t&&t.braille){let{embosserModel:i,brailleMode:n}=t.braille,a=xf[i];o.width=a.width,o.height=a.height,s7(o,this,a,i,n,!!t.showMovablePoints)}else{let i=this._parseScreenshotOpts(t);o.width=i.width*i.targetPixelRatio,o.height=i.height*i.targetPixelRatio,this.screenshotToCanvas(o,t)}return o}screenshot(t){return t&&t.showLabels&&(t={...t,showLabels:!1}),this._syncScreenshotReturnCanvas(t).toDataURL("image/png")}asyncScreenshot(t,o){if(t&&t.format==="svg"){t.transparentBackground&&(t=__dcg_shared_module_exports__['Uc'](t),t.transparentBackground=!1);let{width:i,height:n,targetPixelRatio:a}=this._parseScreenshotOpts(t);i*=a,n*=a;let s=new V6(i,n),l={getContext:()=>s,width:i,height:n};this.screenshotToCanvas(l,t),o(s.getSerializedSvg())}else{let i=this._syncScreenshotReturnCanvas(t);o(i.toDataURL("image/png"))}}makeScreenshotProjection(t){let{width:o,height:i,settings:n}=this._parseScreenshotOpts(t),a=new La(o,i),s=this.getProjection().viewport;return this.settings.squareAxes&&(s=s.squareCrop(a,this.settings)),new oa(a,s,n)}drawLabelHitMask(t){let o=t.projection,i=Tde;i.width=o.screen.width,i.height=o.screen.height;let n=i.getContext("2d");n.clearRect(0,0,o.screen.width,o.screen.height);let a={ctx:n,projection:o,transformationPreviewParentData:{translationPreviewVectorParents:new Set,translationsWithVisibleVectorParent:new Set,rotationPreviewAngleMarkerParents:new Set,rotationsWithVisibleAndCenteredAngle:new Set}},s=[...this.generateMergeDrawOrder()];if(this.gridLayer.redrawToCtx(a),this.graphsLayer.redrawToCtx(a,this.graphSketches,this.graphImages,s,this.poiLabelsLayer,this.clickableObjectsLayer),this.movablePointsLayer.redrawToCtx(a.ctx,a.projection,s,{showMovablePoints:t.showMovablePoints,renderForScreenshot:!0}),t.includePillboxes){let l=this.elt.getBoundingClientRect(),c=this.controller.findEl(".dcg-overgraph-pillbox-elements"),p=this.controller.findEl(".dcg-graphpaper-branding");[c,p].forEach(h=>{if(!h)return;let g=h.getBoundingClientRect();n.globalAlpha=1,n.fillStyle="black",n.fillRect(g.left-l.left,g.top-l.top,g.width,g.height)})}return n}screenshotToCanvas(t,o){let i=this._parseScreenshotOpts(o),{targetPixelRatio:n,transparentBackground:a}=i,s=t.getContext("2d");s.scale(n,n);let l=this.makeScreenshotProjection(o);l.settings.takingScreenshot=!0,En(s,"background"),oo(s,"dcg-svg-background"),a?s.clearRect(0,0,l.screen.width,l.screen.height):(s.fillStyle="white",s.fillRect(0,0,l.screen.width,l.screen.height)),Xr(s),In(s);let c={ctx:s,projection:l,transformationPreviewParentData:{translationPreviewVectorParents:new Set,translationsWithVisibleVectorParent:new Set,rotationPreviewAngleMarkerParents:new Set,rotationsWithVisibleAndCenteredAngle:new Set}};this.imageLayer.recomputeImages(c);let p;if(o&&"showLabels"in o&&o.showLabels){let g=l.screen.width,m=l.screen.height,b=l.settings.labelSize||15,x=1;(g<200||m<200)&&(x=.9);let E=b*x+"px",S=document.createElement("div");S.classList.add("dcg-calculator-screenshot-labels-container"),lv.mountToNode(rC,S,{concreteFontSize:()=>E,width:()=>`${l.screen.width}px`,height:()=>`${l.screen.height}px`}),document.body.append(S);let k=lv.mountToNode(zm,S.querySelector(".dcg-grapher"),{grapher:()=>this});k.takingScreenshot=!0;let T={width:l.screen.width,height:l.screen.height};k.recomputeLabels({projection:l,ctx:s,transformationPreviewParentData:{translationPreviewVectorParents:new Set,translationsWithVisibleVectorParent:new Set,rotationPreviewAngleMarkerParents:new Set,rotationsWithVisibleAndCenteredAngle:new Set}},T,()=>this.drawLabelHitMask({projection:l,showMovablePoints:!!o.showMovablePoints,includePillboxes:!1})),p={labelsLayer:k,layersWrapper:S}}let h=g=>{this.graphsLayer.redrawToCtx(c,this.graphSketches,this.graphImages,g.drawOrder,this.poiLabelsLayer,this.clickableObjectsLayer),p&&p.labelsLayer.copyToCtx(s,{filter:"canvas-labels",allowedSketches:g.drawSet}),this.movablePointsLayer.redrawToCtx(c.ctx,c.projection,g.drawOrder,{showMovablePoints:!!(o!=null&&o.showMovablePoints),renderForScreenshot:!0})};for(let g of this.__drawLayers)g.layer<0&&h(g);this.gridLayer.redrawToCtx(c);for(let g of this.__drawLayers)g.layer>=0&&h(g);p&&(p.labelsLayer.copyToCtx(s,{filter:"above-canvas",allowedSketches:new Set([...this.generateMergeDrawOrder()])}),p.layersWrapper.remove())}speakGrapherFocusAriaLabel(){this.canvasLayer.speakAriaLabelAgain()}setGrapherState(t,o){(!o||!o.doNotClear)&&this.clear(),"complex"in t&&!this.controller.canEnableComplexMode()&&(t={...t,complex:!1}),t=r.copyGraphProperties(t,this.settings),"viewport"in t&&this.setViewportState(t.viewport),this.controller.requestRedrawGraph()}computeConcreteViewport(t){let o=this.getProjection().screen;return this.settings.squareAxes&&!t.isSquare(o,this.controller.getAxisScaleSettings())?t.squareYAxis(o,this.settings):t}setCanvasSizeFor3D(t,o){this.__screenRequested3D=new La(t,o)}getCanvasNode(){return this.canvasLayer.canvasNode}};function ER(r,e,t){let o,i,n,a,s,l;return r?(o=r.width||r.height||t.width,i=r.height||r.width||t.height,n=r.targetPixelRatio||1,n<1&&(n=1),a=(o<256||i<256)&&!r.preserveAxisNumbers,s=Kc.fromObject({...e,...r.settings}),l=!!r.transparentBackground):(o=t.width,i=t.height,n=1,a=!1,s=Kc.fromObject(e),l=!1),a&&(s.setProperty("xAxisNumbers",!1),s.setProperty("yAxisNumbers",!1),s.setProperty("polarNumbers",!1)),{width:o,height:i,targetPixelRatio:n,settings:s,transparentBackground:l}}var cn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];var V7=Math.PI/180,D4e=180/Math.PI;function as(){let r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,o=Math.random()*4294967295|0;return(cn[r&255]+cn[r>>8&255]+cn[r>>16&255]+cn[r>>24&255]+"-"+cn[e&255]+cn[e>>8&255]+"-"+cn[e>>16&15|64]+cn[e>>24&255]+"-"+cn[t&63|128]+cn[t>>8&255]+"-"+cn[t>>16&255]+cn[t>>24&255]+cn[o&255]+cn[o>>8&255]+cn[o>>16&255]+cn[o>>24&255]).toLowerCase()}function lh(r,e,t){return Math.max(e,Math.min(t,r))}function IR(r){return(r&r-1)===0&&r!==0}function cv(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function Cf(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}var B7="155";var U7=0,CR=1,z7=2;var q7=0,aC=1,ss=2;var sC=0,mp=1,_R=2,MR=3,AR=4,lC=5,zl=100,H7=101,K7=102,W7=103,$7=104,cC=200,dC=201,j7=202,Y7=203,pC=204,uC=205,X7=206,J7=207,Z7=208,Q7=209,e9=210,t9=0,r9=1,o9=2,dv=3,i9=4,n9=5,a9=6,s9=7;var LR=300;var pv=1e3,ch=1001,uv=1002,ql=1003,l9=1004;var PR=1005;var Pn=1006,c9=1007;var hv=1008,d9=1008,mi=1009,p9=1010,u9=1011,_f=1012,hC=1013,Ns=1014,ls=1015,Mf=1016,gC=1017,mC=1018,Hl=1020,h9=1021,Kl=1023,g9=1024,m9=1025,Xc=1026,fp=1027,f9=1028,fC=1029,b9=1030,bC=1031,yC=1033,xC=33776,vC=33777,wC=33778,SC=33779,DR=35840,OR=35841,RR=35842,FR=35843,y9=36196,GR=37492,NR=37496,VR=37808,BR=37809,UR=37810,zR=37811,qR=37812,HR=37813,KR=37814,WR=37815,$R=37816,jR=37817,YR=37818,XR=37819,JR=37820,ZR=37821,QR=36492,eF=36283,tF=36284,rF=36285,oF=36286;var Af="",to="srgb",Hi="srgb-linear";var TC=7680;var x9=519,v9=512,w9=513,S9=514,T9=515,k9=516,E9=517,I9=518,C9=519,_9=35044;var iF="300 es",kC=1035,cs=2e3,gv=2001;var we=class r{constructor(e=0,t=0,o=0){this.x=e,this.y=t,this.z=o}set(e,t,o){return o===void 0&&(o=this.z),this.x=e,this.y=t,this.z=o,this}clone(){return new r(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}applyMatrix3(e){let t=this.x,o=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[3]*o+n[6]*i,this.y=n[1]*t+n[4]*o+n[7]*i,this.z=n[2]*t+n[5]*o+n[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,o=this.y,i=this.z,n=e.elements,a=1/(n[3]*t+n[7]*o+n[11]*i+n[15]);return this.x=(n[0]*t+n[4]*o+n[8]*i+n[12])*a,this.y=(n[1]*t+n[5]*o+n[9]*i+n[13])*a,this.z=(n[2]*t+n[6]*o+n[10]*i+n[14])*a,this}applyQuaternion(e){let t=this.x,o=this.y,i=this.z,n=e.x,a=e.y,s=e.z,l=e.w,c=l*t+a*i-s*o,p=l*o+s*t-n*i,h=l*i+n*o-a*t,g=-n*t-a*o-s*i;return this.x=c*l+g*-n+p*-s-h*-a,this.y=p*l+g*-a+h*-n-c*-s,this.z=h*l+g*-s+c*-a-p*-n,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}transformDirection(e){let t=this.x,o=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[4]*o+n[8]*i,this.y=n[1]*t+n[5]*o+n[9]*i,this.z=n[2]*t+n[6]*o+n[10]*i,this.normalize()}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){return this.multiplyScalar(1/(this.length()||1))}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let o=e.x,i=e.y,n=e.z,a=t.x,s=t.y,l=t.z;return this.x=i*l-n*s,this.y=n*a-o*l,this.z=o*s-i*a,this}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,o=this.y-e.y,i=this.z-e.z;return t*t+o*o+i*i}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixColumn(e,t){let o=t*4,i=e.elements;return this.x=i[o],this.y=i[o+1],this.z=i[o+2],this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}toArray(e,t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}};var It=class r{constructor(e,t,o,i,n,a,s,l,c,p,h,g,m,b,x,E){this.isMatrix4=!0;this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,o,i,n,a,s,l,c,p,h,g,m,b,x,E)}set(e,t,o,i,n,a,s,l,c,p,h,g,m,b,x,E){let S=this.elements;return S[0]=e,S[4]=t,S[8]=o,S[12]=i,S[1]=n,S[5]=a,S[9]=s,S[13]=l,S[2]=c,S[6]=p,S[10]=h,S[14]=g,S[3]=m,S[7]=b,S[11]=x,S[15]=E,this}clone(){let e=new r,t=this.elements;for(let o=0;o<16;o++)e.elements[o]=t[o];return e}copy(e){let t=this.elements,o=e.elements;return t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=o[3],t[4]=o[4],t[5]=o[5],t[6]=o[6],t[7]=o[7],t[8]=o[8],t[9]=o[9],t[10]=o[10],t[11]=o[11],t[12]=o[12],t[13]=o[13],t[14]=o[14],t[15]=o[15],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractRotation(e){let t=this.elements,o=e.elements,i=1/nF.setFromMatrixColumn(e,0).length(),n=1/nF.setFromMatrixColumn(e,1).length(),a=1/nF.setFromMatrixColumn(e,2).length();return t[0]=o[0]*i,t[1]=o[1]*i,t[2]=o[2]*i,t[3]=0,t[4]=o[4]*n,t[5]=o[5]*n,t[6]=o[6]*n,t[7]=0,t[8]=o[8]*a,t[9]=o[9]*a,t[10]=o[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,o=e.x,i=e.y,n=e.z,a=Math.cos(o),s=Math.sin(o),l=Math.cos(i),c=Math.sin(i),p=Math.cos(n),h=Math.sin(n);if(e.order==="XYZ"){let g=a*p,m=a*h,b=s*p,x=s*h;t[0]=l*p,t[4]=-l*h,t[8]=c,t[1]=m+b*c,t[5]=g-x*c,t[9]=-s*l,t[2]=x-g*c,t[6]=b+m*c,t[10]=a*l}else if(e.order==="YXZ"){let g=l*p,m=l*h,b=c*p,x=c*h;t[0]=g+x*s,t[4]=b*s-m,t[8]=a*c,t[1]=a*h,t[5]=a*p,t[9]=-s,t[2]=m*s-b,t[6]=x+g*s,t[10]=a*l}else if(e.order==="ZYX"){let g=a*p,m=a*h,b=s*p,x=s*h;t[0]=l*p,t[4]=b*c-m,t[8]=g*c+x,t[1]=l*h,t[5]=x*c+g,t[9]=m*c-b,t[2]=-c,t[6]=s*l,t[10]=a*l}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(kde,e,Ede)}lookAt(e,t,o){let i=this.elements;return Oa.subVectors(e,t),Oa.lengthSq()===0&&(Oa.z=1),Oa.normalize(),bp.crossVectors(o,Oa),bp.lengthSq()===0&&(Math.abs(o.z)===1?Oa.x+=1e-4:Oa.z+=1e-4,Oa.normalize(),bp.crossVectors(o,Oa)),bp.normalize(),EC.crossVectors(Oa,bp),i[0]=bp.x,i[4]=EC.x,i[8]=Oa.x,i[1]=bp.y,i[5]=EC.y,i[9]=Oa.y,i[2]=bp.z,i[6]=EC.z,i[10]=Oa.z,this}multiply(e){return this.multiplyMatrices(this,e)}multiplyMatrices(e,t){let o=e.elements,i=t.elements,n=this.elements,a=o[0],s=o[4],l=o[8],c=o[12],p=o[1],h=o[5],g=o[9],m=o[13],b=o[2],x=o[6],E=o[10],S=o[14],k=o[3],T=o[7],I=o[11],P=o[15],A=i[0],D=i[4],G=i[8],N=i[12],U=i[1],K=i[5],H=i[9],w=i[13],F=i[2],V=i[6],B=i[10],L=i[14],q=i[3],le=i[7],$=i[11],ne=i[15];return n[0]=a*A+s*U+l*F+c*q,n[4]=a*D+s*K+l*V+c*le,n[8]=a*G+s*H+l*B+c*$,n[12]=a*N+s*w+l*L+c*ne,n[1]=p*A+h*U+g*F+m*q,n[5]=p*D+h*K+g*V+m*le,n[9]=p*G+h*H+g*B+m*$,n[13]=p*N+h*w+g*L+m*ne,n[2]=b*A+x*U+E*F+S*q,n[6]=b*D+x*K+E*V+S*le,n[10]=b*G+x*H+E*B+S*$,n[14]=b*N+x*w+E*L+S*ne,n[3]=k*A+T*U+I*F+P*q,n[7]=k*D+T*K+I*V+P*le,n[11]=k*G+T*H+I*B+P*$,n[15]=k*N+T*w+I*L+P*ne,this}determinant(){let e=this.elements,t=e[0],o=e[4],i=e[8],n=e[12],a=e[1],s=e[5],l=e[9],c=e[13],p=e[2],h=e[6],g=e[10],m=e[14],b=e[3],x=e[7],E=e[11],S=e[15];return b*(+n*l*h-i*c*h-n*s*g+o*c*g+i*s*m-o*l*m)+x*(+t*l*m-t*c*g+n*a*g-i*a*m+i*c*p-n*l*p)+E*(+t*c*h-t*s*m-n*a*h+o*a*m+n*s*p-o*c*p)+S*(-i*s*p-t*l*h+t*s*g+i*a*h-o*a*g+o*l*p)}invert(){let e=this.elements,t=e[0],o=e[1],i=e[2],n=e[3],a=e[4],s=e[5],l=e[6],c=e[7],p=e[8],h=e[9],g=e[10],m=e[11],b=e[12],x=e[13],E=e[14],S=e[15],k=h*E*c-x*g*c+x*l*m-s*E*m-h*l*S+s*g*S,T=b*g*c-p*E*c-b*l*m+a*E*m+p*l*S-a*g*S,I=p*x*c-b*h*c+b*s*m-a*x*m-p*s*S+a*h*S,P=b*h*l-p*x*l-b*s*g+a*x*g+p*s*E-a*h*E,A=t*k+o*T+i*I+n*P;if(A===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let D=1/A;return e[0]=k*D,e[1]=(x*g*n-h*E*n-x*i*m+o*E*m+h*i*S-o*g*S)*D,e[2]=(s*E*n-x*l*n+x*i*c-o*E*c-s*i*S+o*l*S)*D,e[3]=(h*l*n-s*g*n-h*i*c+o*g*c+s*i*m-o*l*m)*D,e[4]=T*D,e[5]=(p*E*n-b*g*n+b*i*m-t*E*m-p*i*S+t*g*S)*D,e[6]=(b*l*n-a*E*n-b*i*c+t*E*c+a*i*S-t*l*S)*D,e[7]=(a*g*n-p*l*n+p*i*c-t*g*c-a*i*m+t*l*m)*D,e[8]=I*D,e[9]=(b*h*n-p*x*n-b*o*m+t*x*m+p*o*S-t*h*S)*D,e[10]=(a*x*n-b*s*n+b*o*c-t*x*c-a*o*S+t*s*S)*D,e[11]=(p*s*n-a*h*n-p*o*c+t*h*c+a*o*m-t*s*m)*D,e[12]=P*D,e[13]=(p*x*i-b*h*i+b*o*g-t*x*g-p*o*E+t*h*E)*D,e[14]=(b*s*i-a*x*i-b*o*l+t*x*l+a*o*E-t*s*E)*D,e[15]=(a*h*i-p*s*i+p*o*l-t*h*l-a*o*g+t*s*g)*D,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],o=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,o,i))}makeTranslation(e,t,o){return this.set(1,0,0,e,0,1,0,t,0,0,1,o,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),o=Math.sin(e);return this.set(1,0,0,0,0,t,-o,0,0,o,t,0,0,0,0,1),this}makeRotationAxis(e,t){let o=Math.cos(t),i=Math.sin(t),n=1-o,a=e.x,s=e.y,l=e.z,c=n*a,p=n*s;return this.set(c*a+o,c*s-i*l,c*l+i*s,0,c*s+i*l,p*s+o,p*l-i*a,0,c*l-i*s,p*l+i*a,n*l*l+o,0,0,0,0,1),this}makeScale(e,t,o){return this.set(e,0,0,0,0,t,0,0,0,0,o,0,0,0,0,1),this}compose(e,t,o){let i=this.elements,n=t._x,a=t._y,s=t._z,l=t._w,c=n+n,p=a+a,h=s+s,g=n*c,m=n*p,b=n*h,x=a*p,E=a*h,S=s*h,k=l*c,T=l*p,I=l*h,P=o.x,A=o.y,D=o.z;return i[0]=(1-(x+S))*P,i[1]=(m+I)*P,i[2]=(b-T)*P,i[3]=0,i[4]=(m-I)*A,i[5]=(1-(g+S))*A,i[6]=(E+k)*A,i[7]=0,i[8]=(b+T)*D,i[9]=(E-k)*D,i[10]=(1-(g+x))*D,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}makePerspective(e,t,o,i,n,a,s=cs){let l=this.elements,c=2*n/(t-e),p=2*n/(o-i),h=(t+e)/(t-e),g=(o+i)/(o-i),m,b;if(s===cs)m=-(a+n)/(a-n),b=-2*a*n/(a-n);else if(s===gv)m=-a/(a-n),b=-a*n/(a-n);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=p,l[9]=g,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=b,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,o,i,n,a,s=cs){let l=this.elements,c=1/(t-e),p=1/(o-i),h=1/(a-n),g=(t+e)*c,m=(o+i)*p,b,x;if(s===cs)b=(a+n)*h,x=-2*h;else if(s===gv)b=n*h,x=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-g,l[1]=0,l[5]=2*p,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=x,l[14]=-b,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){let t=this.elements,o=e.elements;for(let i=0;i<16;i++)if(t[i]!==o[i])return!1;return!0}fromArray(e,t=0){for(let o=0;o<16;o++)this.elements[o]=e[o+t];return this}toArray(e,t=0){let o=this.elements;return e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],e[t+3]=o[3],e[t+4]=o[4],e[t+5]=o[5],e[t+6]=o[6],e[t+7]=o[7],e[t+8]=o[8],e[t+9]=o[9],e[t+10]=o[10],e[t+11]=o[11],e[t+12]=o[12],e[t+13]=o[13],e[t+14]=o[14],e[t+15]=o[15],e}},nF=new we,kde=new we(0,0,0),Ede=new we(1,1,1),bp=new we,EC=new we,Oa=new we;var M9=new It,Ki=class{constructor(e=0,t=0,o=0,i="XYZ"){this._x=e,this._y=t,this._z=o,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,o,i=this._order){return this._x=e,this._y=t,this._z=o,this._order=i,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,o=!0){let i=e.elements,n=i[0],a=i[4],s=i[8],l=i[1],c=i[5],p=i[9],h=i[2],g=i[6],m=i[10];switch(t){case"XYZ":this._y=Math.asin(lh(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-p,m),this._z=Math.atan2(-a,n)):(this._x=Math.atan2(g,c),this._z=0);break;case"YXZ":this._x=Math.asin(-lh(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(s,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,n),this._z=0);break;case"ZYX":this._y=Math.asin(-lh(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(g,m),this._z=Math.atan2(l,n)):(this._x=0,this._z=Math.atan2(-a,c));break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,o===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,o){return M9.makeRotationFromQuaternion(e),this.setFromRotationMatrix(M9,t,o)}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}};var Gr=class r{constructor(e,t,o,i,n,a,s,l,c){this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,o,i,n,a,s,l,c)}set(e,t,o,i,n,a,s,l,c){let p=this.elements;return p[0]=e,p[1]=i,p[2]=s,p[3]=t,p[4]=n,p[5]=l,p[6]=o,p[7]=a,p[8]=c,this}copy(e){let t=this.elements,o=e.elements;return t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=o[3],t[4]=o[4],t[5]=o[5],t[6]=o[6],t[7]=o[7],t[8]=o[8],this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}multiplyMatrices(e,t){let o=e.elements,i=t.elements,n=this.elements,a=o[0],s=o[3],l=o[6],c=o[1],p=o[4],h=o[7],g=o[2],m=o[5],b=o[8],x=i[0],E=i[3],S=i[6],k=i[1],T=i[4],I=i[7],P=i[2],A=i[5],D=i[8];return n[0]=a*x+s*k+l*P,n[3]=a*E+s*T+l*A,n[6]=a*S+s*I+l*D,n[1]=c*x+p*k+h*P,n[4]=c*E+p*T+h*A,n[7]=c*S+p*I+h*D,n[2]=g*x+m*k+b*P,n[5]=g*E+m*T+b*A,n[8]=g*S+m*I+b*D,this}invert(){let e=this.elements,t=e[0],o=e[1],i=e[2],n=e[3],a=e[4],s=e[5],l=e[6],c=e[7],p=e[8],h=p*a-s*c,g=s*l-p*n,m=c*n-a*l,b=t*h+o*g+i*m;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);let x=1/b;return e[0]=h*x,e[1]=(i*c-p*o)*x,e[2]=(s*o-i*a)*x,e[3]=g*x,e[4]=(p*t-i*l)*x,e[5]=(i*n-s*t)*x,e[6]=m*x,e[7]=(o*l-c*t)*x,e[8]=(a*t-o*n)*x,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}equals(e){let t=this.elements,o=e.elements;for(let i=0;i<9;i++)if(t[i]!==o[i])return!1;return!0}toArray(e,t=0){let o=this.elements;return e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],e[t+3]=o[3],e[t+4]=o[4],e[t+5]=o[5],e[t+6]=o[6],e[t+7]=o[7],e[t+8]=o[8],e}clone(){let e=new r,t=this.elements;for(let o=0;o<9;o++)e.elements[o]=t[o];return e}};var ds=class r{constructor(e=0,t=0,o=0,i=1){this.isQuaternion=!0;this._x=e,this._y=t,this._z=o,this._w=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,o,i){return this._x=e,this._y=t,this._z=o,this._w=i,this._onChangeCallback(),this}clone(){return new r(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){let o=e._x,i=e._y,n=e._z,a=e._order,s=Math.cos,l=Math.sin,c=s(o/2),p=s(i/2),h=s(n/2),g=l(o/2),m=l(i/2),b=l(n/2);switch(a){case"XYZ":this._x=g*p*h+c*m*b,this._y=c*m*h-g*p*b,this._z=c*p*b+g*m*h,this._w=c*p*h-g*m*b;break;case"YXZ":this._x=g*p*h+c*m*b,this._y=c*m*h-g*p*b,this._z=c*p*b-g*m*h,this._w=c*p*h+g*m*b;break;case"ZYX":this._x=g*p*h-c*m*b,this._y=c*m*h+g*p*b,this._z=c*p*b-g*m*h,this._w=c*p*h+g*m*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t!==!1&&this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,o=t[0],i=t[4],n=t[8],a=t[1],s=t[5],l=t[9],c=t[2],p=t[6],h=t[10],g=o+s+h;if(g>0){let m=.5/Math.sqrt(g+1);this._w=.25/m,this._x=(p-l)*m,this._y=(n-c)*m,this._z=(a-i)*m}else if(o>s&&o>h){let m=2*Math.sqrt(1+o-s-h);this._w=(p-l)/m,this._x=.25*m,this._y=(i+a)/m,this._z=(n+c)/m}else if(s>h){let m=2*Math.sqrt(1+s-o-h);this._w=(n-c)/m,this._x=(i+a)/m,this._y=.25*m,this._z=(l+p)/m}else{let m=2*Math.sqrt(1+h-o-s);this._w=(a-i)/m,this._x=(n+c)/m,this._y=(l+p)/m,this._z=.25*m}return this._onChangeCallback(),this}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let o=e._x,i=e._y,n=e._z,a=e._w,s=t._x,l=t._y,c=t._z,p=t._w;return this._x=o*p+a*s+i*c-n*l,this._y=i*p+a*l+n*s-o*c,this._z=n*p+a*c+o*l-i*s,this._w=a*p-o*s-i*l-n*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let o=this._x,i=this._y,n=this._z,a=this._w,s=a*e._w+o*e._x+i*e._y+n*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=o,this._y=i,this._z=n,this;let l=1-s*s;if(l<=Number.EPSILON){let m=1-t;return this._w=m*a+t*this._w,this._x=m*o+t*this._x,this._y=m*i+t*this._y,this._z=m*n+t*this._z,this.normalize(),this._onChangeCallback(),this}let c=Math.sqrt(l),p=Math.atan2(c,s),h=Math.sin((1-t)*p)/c,g=Math.sin(t*p)/c;return this._w=a*h+this._w*g,this._x=o*h+this._x*g,this._y=i*h+this._y*g,this._z=n*h+this._z*g,this._onChangeCallback(),this}toArray(e,t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}};var Dn=new we,Ai=class{constructor(e,t,o=!1){this.isBufferAttribute=!0;if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=o,this.usage=_9,this.updateRange={offset:0,count:-1},this.gpuType=ls,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}applyMatrix4(e){for(let t=0,o=this.count;t<o;t++)Dn.fromBufferAttribute(this,t),Dn.applyMatrix4(e),this.setXYZ(t,Dn.x,Dn.y,Dn.z);return this}applyNormalMatrix(e){for(let t=0,o=this.count;t<o;t++)Dn.fromBufferAttribute(this,t),Dn.applyNormalMatrix(e),this.setXYZ(t,Dn.x,Dn.y,Dn.z);return this}transformDirection(e){for(let t=0,o=this.count;t<o;t++)Dn.fromBufferAttribute(this,t),Dn.transformDirection(e),this.setXYZ(t,Dn.x,Dn.y,Dn.z);return this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=cv(t,this.array)),t}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=cv(t,this.array)),t}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=cv(t,this.array)),t}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=cv(t,this.array)),t}setXY(e,t,o){return e*=this.itemSize,this.normalized&&(t=Cf(t,this.array),o=Cf(o,this.array)),this.array[e+0]=t,this.array[e+1]=o,this}setXYZ(e,t,o,i){return e*=this.itemSize,this.normalized&&(t=Cf(t,this.array),o=Cf(o,this.array),i=Cf(i,this.array)),this.array[e+0]=t,this.array[e+1]=o,this.array[e+2]=i,this}};var yp=class extends Ai{constructor(e,t,o){super(new Uint16Array(e),t,o)}};var xp=class extends Ai{constructor(e,t,o){super(new Uint32Array(e),t,o)}},no=class extends Ai{constructor(e,t,o){super(new Float32Array(e),t,o)}};var ia=class{hasEventListener(e,t){if(this._listeners===void 0)return!1;let o=this._listeners;return o[e]!==void 0&&o[e].indexOf(t)!==-1}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let o=this._listeners;o[e]===void 0&&(o[e]=[]),o[e].indexOf(t)===-1&&o[e].push(t)}removeEventListener(e,t){if(this._listeners===void 0)return;let i=this._listeners[e];if(i!==void 0){let n=i.indexOf(t);n!==-1&&i.splice(n,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let o=this._listeners[e.type];if(o!==void 0){e.target=this;let i=o.slice(0);for(let n=0,a=i.length;n<a;n++)i[n].call(this,e);e.target=null}}};var Lf=class{constructor(){this.mask=1}enable(e){this.mask|=1<<e|0}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}};var Ide=0,A9=new we,L9=new ds,mv=new It,aF=new we,sF=new we,Cde=new we(1,0,0),_de=new we(0,1,0),Mde=new we(0,0,1),Ade={type:"added"},Lde={type:"removed"},vp=class vp extends ia{constructor(){super();this.isObject3D=!0;Object.defineProperty(this,"id",{value:Ide++}),this.uuid=as(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=vp.DEFAULT_UP.clone();let t=new we,o=new Ki,i=new ds,n=new we(1,1,1);function a(){i.setFromEuler(o,!1)}function s(){o.setFromQuaternion(i,void 0,!1)}o._onChange(a),i._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:o},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new It},normalMatrix:{value:new Gr}}),this.matrix=new It,this.matrixWorld=new It,this.dcgModelMatrix=new It,this.matrixAutoUpdate=vp.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=vp.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Lf,this.visible=!0,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}setPickingColorArray(t){this.pickingColorArray=t;let{repeatColorCounts:o,colors:i}=t,n=[];for(let a=0;a<o.length;a++){let s=i[a],l=o[a];for(let c=0;c<l;c++)n.push(...s)}this.geometry&&this.geometry.setAttribute("vertexPickingColor",new Ai(new Float32Array(n),4))}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}translateOnAxis(t,o){return A9.copy(t).applyQuaternion(this.quaternion),this.position.add(A9.multiplyScalar(o)),this}translateX(t){return this.translateOnAxis(Cde,t)}translateY(t){return this.translateOnAxis(_de,t)}translateZ(t){return this.translateOnAxis(Mde,t)}lookAt(t){aF.copy(t);let o=this.parent;this.updateWorldMatrix(!0,!1),sF.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?mv.lookAt(sF,aF,this.up):mv.lookAt(aF,sF,this.up),this.quaternion.setFromRotationMatrix(mv),o&&(mv.extractRotation(o.matrixWorld),L9.setFromRotationMatrix(mv),this.quaternion.premultiply(L9.invert()))}add(t){if(arguments.length>1){for(let o=0;o<arguments.length;o++)this.add(arguments[o]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Ade)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}let o=this.children.indexOf(t);return o!==-1&&(t.parent=null,this.children.splice(o,1),t.dispatchEvent(Lde)),this}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,o){if(this[t]===o)return this;for(let i=0,n=this.children.length;i<n;i++){let s=this.children[i].getObjectByProperty(t,o);if(s!==void 0)return s}}getObjectsByProperty(t,o){let i=[];this[t]===o&&i.push(this);for(let n=0,a=this.children.length;n<a;n++){let s=this.children[n].getObjectsByProperty(t,o);s.length>0&&(i=i.concat(s))}return i}traverse(t){t(this);let o=this.children;for(let i=0,n=o.length;i<n;i++)o[i].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);let o=this.children;for(let i=0,n=o.length;i<n;i++)o[i].traverseVisible(t)}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);let o=this.children;for(let i=0,n=o.length;i<n;i++){let a=o[i];(a.matrixWorldAutoUpdate===!0||t===!0)&&a.updateMatrixWorld(t)}}updateWorldMatrix(t,o){let i=this.parent;if(t===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),o===!0){let n=this.children;for(let a=0,s=n.length;a<s;a++){let l=n[a];l.matrixWorldAutoUpdate===!0&&l.updateWorldMatrix(!1,!0)}}}};vp.DEFAULT_UP=new we(0,1,0),vp.DEFAULT_MATRIX_AUTO_UPDATE=!0,vp.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var Io=vp;var Pf=class extends Io{constructor(){super();this.isCamera=!0;this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new It,this.projectionMatrix=new It,this.projectionMatrixInverse=new It,this.coordinateSystem=cs}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,o){super.updateWorldMatrix(t,o),this.matrixWorldInverse.copy(this.matrixWorld).invert()}};var Vs=class extends Pf{constructor(e=-1,t=1,o=1,i=-1,n=.1,a=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=o,this.bottom=i,this.near=n,this.far=a,this.updateProjectionMatrix()}setViewOffset(e,t,o,i,n,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=o,this.view.offsetY=i,this.view.width=n,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),o=(this.right+this.left)/2,i=(this.top+this.bottom)/2,n=o-e,a=o+e,s=i+t,l=i-t;if(this.view!==null&&this.view.enabled){let c=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;n+=c*this.view.offsetX,a=n+c*this.view.width,s-=p*this.view.offsetY,l=s-p*this.view.height}this.projectionMatrix.makeOrthographic(n,a,s,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}};var wp=class extends Pf{constructor(e=50,t=1,o=.1,i=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=o,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.updateProjectionMatrix()}setViewOffset(e,t,o,i,n,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=o,this.view.offsetY=i,this.view.width=n,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(V7*.5*this.fov)/this.zoom,o=2*t,i=this.aspect*o,n=-.5*i,a=this.view;if(a!==null&&a.enabled){let s=a.fullWidth,l=a.fullHeight;n+=a.offsetX*i/s,t-=a.offsetY*o/l,i*=a.width/s,o*=a.height/l}this.projectionMatrix.makePerspective(n,n+i,t,t-o,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}};var dh=class{constructor(e=new we(1/0,1/0,1/0),t=new we(-1/0,-1/0,-1/0)){this.min=e,this.max=t}setFromBufferAttribute(e){this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0;for(let t=0,o=e.count;t<o;t++)lF.fromBufferAttribute(e,t),this.min.min(lF),this.max.max(lF);return this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},lF=new we;var Df=new we,cF=new we,Jc=class{constructor(e=new we,t=-1){this.center=e,this.radius=t}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(cF.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Df.copy(e.center).add(cF)),this.expandByPoint(Df.copy(e.center).sub(cF))),this)}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Df.subVectors(e,this.center);let t=Df.lengthSq();if(t>this.radius*this.radius){let o=Math.sqrt(t),i=(o-this.radius)*.5;Df.multiplyScalar(i/o),this.center.add(Df),this.radius+=i}return this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}};function IC(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}function fv(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function Pde(r){let e=r.getError();switch(e){case r.NO_ERROR:return"NO_ERROR";case r.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";case r.INVALID_ENUM:return"INVALID_ENUM";case r.INVALID_VALUE:return"INVALID_VALUE";case r.INVALID_OPERATION:return"INVALID_OPERATION";case r.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case r.OUT_OF_MEMORY:return"OUT_OF_MEMORY";default:return typeof e=="number"?e.toString(16):e}}function ht(r,e,t){if(r==null){let o=`Expected ${e} to be defined and not null.`;throw t&&(o+=` GL Error: ${Pde(t)}.`),new Error(o)}}var Dde=0,Of=new It,P9=new dh,ph=new we,dn=class extends ia{constructor(){super();this.isBufferGeometry=!0;Object.defineProperty(this,"id",{value:Dde++}),this.uuid=as(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.groups=[],this.boundingSphere=null,this.userData={}}setIndex(t){return Array.isArray(t)?this.index=new(IC(t)?xp:yp)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,o){return this.attributes[t]=o,this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,o,i=0){this.groups.push({start:t,count:o,materialIndex:i})}applyMatrix4(t){let o=this.attributes.position;o!==void 0&&(o.applyMatrix4(t),o.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let a=new Gr().getNormalMatrix(t);i.applyNormalMatrix(a),i.needsUpdate=!0}let n=this.attributes.tangent;return n!==void 0&&(n.transformDirection(t),n.needsUpdate=!0),this.boundingSphere!==null&&this.computeBoundingSphere(),this}rotateX(t){return Of.makeRotationX(t),this.applyMatrix4(Of),this}translate(t,o,i){return Of.makeTranslation(t,o,i),this.applyMatrix4(Of),this}scale(t,o,i){return Of.makeScale(t,o,i),this.applyMatrix4(Of),this}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Jc);let t=this.attributes.position;if(t){let o=this.boundingSphere.center;P9.setFromBufferAttribute(t),P9.getCenter(o);let i=0;for(let n=0,a=t.count;n<a;n++)ph.fromBufferAttribute(t,n),i=Math.max(i,o.distanceToSquared(ph));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeVertexNormals(){let t=this.index,o=this.getAttribute("position");if(o!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Ai(new Float32Array(o.count*3),3),this.setAttribute("normal",i);else for(let m=0,b=i.count;m<b;m++)i.setXYZ(m,0,0,0);let n=new we,a=new we,s=new we,l=new we,c=new we,p=new we,h=new we,g=new we;if(t)for(let m=0,b=t.count;m<b;m+=3){let x=t.getX(m+0),E=t.getX(m+1),S=t.getX(m+2);n.fromBufferAttribute(o,x),a.fromBufferAttribute(o,E),s.fromBufferAttribute(o,S),h.subVectors(s,a),g.subVectors(n,a),h.cross(g),l.fromBufferAttribute(i,x),c.fromBufferAttribute(i,E),p.fromBufferAttribute(i,S),l.add(h),c.add(h),p.add(h),i.setXYZ(x,l.x,l.y,l.z),i.setXYZ(E,c.x,c.y,c.z),i.setXYZ(S,p.x,p.y,p.z)}else for(let m=0,b=o.count;m<b;m+=3)n.fromBufferAttribute(o,m+0),a.fromBufferAttribute(o,m+1),s.fromBufferAttribute(o,m+2),h.subVectors(s,a),g.subVectors(n,a),h.cross(g),i.setXYZ(m+0,h.x,h.y,h.z),i.setXYZ(m+1,h.x,h.y,h.z),i.setXYZ(m+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){let t=this.attributes.normal;for(let o=0,i=t.count;o<i;o++)ph.fromBufferAttribute(t,o),ph.normalize(),t.setXYZ(o,ph.x,ph.y,ph.z)}dispose(){this.dispatchEvent({type:"dispose"})}};var qo=class r{constructor(e=0,t=0,o=0,i=1){this.x=e,this.y=t,this.z=o,this.w=i}set(e,t,o,i){return this.x=e,this.y=t,this.z=o,this.w=i,this}clone(){return new r(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e,t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}};var bt=class r{constructor(e=0,t=0){this.x=e,this.y=t}set(e,t){return this.x=e,this.y=t,this}clone(){return new r(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}applyMatrix3(e){let t=this.x,o=this.y,i=e.elements;return this.x=i[0]*t+i[3]*o+i[6],this.y=i[1]*t+i[4]*o+i[7],this}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalize(){return this.multiplyScalar(1/(this.length()||1))}distanceTo(e){let t=this.x-e.x,o=this.y-e.y,i=t*t+o*o;return Math.sqrt(i)}equals(e){return e.x===this.x&&e.y===this.y}toArray(e,t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}};var Ode=0,CC=class{constructor(e){this.data=e;this.isSource=!0;this.uuid=as();this.version=0;Object.defineProperty(this,"id",{value:Ode++})}set needsUpdate(e){e===!0&&this.version++}};var Wl=class{constructor(e,t,o){this.width=e;this.height=t;this.depth=o}},Rde=0,Rf=class Rf extends ia{constructor(e,t=Rf.DEFAULT_MAPPING,o=ch,i=ch,n=Pn,a=hv,s=Kl,l=mi,c=Rf.DEFAULT_ANISOTROPY,p=Af){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Rde++}),this.uuid=as(),this.name="",this.source=new CC(e),this.mipmaps=[],this.mapping=t,this.wrapS=o,this.wrapT=i,this.magFilter=n,this.minFilter=a,this.anisotropy=c,this.format=s,this.internalFormat=null,this.type=l,this.offset=new bt(0,0),this.repeat=new bt(1,1),this.center=new bt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Gr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=p,this.userData={},this.version=0,this.onUpdate=void 0,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==LR)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case pv:e.x=e.x-Math.floor(e.x);break;case ch:e.x=e.x<0?0:1;break;case uv:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case pv:e.y=e.y-Math.floor(e.y);break;case ch:e.y=e.y<0?0:1;break;case uv:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}};Rf.DEFAULT_ANISOTROPY=1,Rf.DEFAULT_MAPPING=LR;var na=Rf;var _C=class extends ia{constructor(t=1,o=1,i={}){super();this.isRenderTarget=!0;this.width=t,this.height=o,this.depth=1,this.scissor=new qo(0,0,t,o),this.scissorTest=!1,this.viewport=new qo(0,0,t,o);let n=new Wl(t,o,1);this.texture=new na(n,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Pn,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(t,o,i=1){if(this.width!==t||this.height!==o||this.depth!==i){this.width=t,this.height=o,this.depth=i;let n=this.texture.image;n.width=t,n.height=o,n.depth=i,this.dispose()}this.viewport.set(0,0,t,o),this.scissor.set(0,0,t,o)}dispose(){this.dispatchEvent({type:"dispose"})}};var Sp=class{constructor(){this.arcLengthDivisions=200;this.needsUpdate=!1}getPointAt(e,t){let o=this.getUtoTmapping(e);return this.getPoint(o,t)}getPoints(e=5){let t=[];for(let o=0;o<=e;o++)t.push(this.getPoint(o/e));return t}getSpacedPoints(e=5){let t=[];for(let o=0;o<=e;o++)t.push(this.getPointAt(o/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],o,i=this.getPoint(0),n=0;t.push(0);for(let a=1;a<=e;a++)o=this.getPoint(a/e),n+=o.distanceTo(i),t.push(n),i=o;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let o=this.getLengths(),i=0,n=o.length,a;t?a=t:a=e*o[n-1];let s=0,l=n-1,c;for(;s<=l;)if(i=Math.floor(s+(l-s)/2),c=o[i]-a,c<0)s=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,o[i]===a)return i/(n-1);let p=o[i],g=o[i+1]-p,m=(a-p)/g;return(i+m)/(n-1)}getTangent(e,t){let i=e-1e-4,n=e+1e-4;i<0&&(i=0),n>1&&(n=1);let a=this.getPoint(i),s=this.getPoint(n),l=t||new bt;return l.copy(s).sub(a).normalize(),l}getTangentAt(e,t){let o=this.getUtoTmapping(e);return this.getTangent(o,t)}computeFrenetFrames(e,t){let o=new we,i=[],n=[],a=[],s=new we,l=new It;for(let g=0;g<=e;g++){let m=g/e,b=this.getTangentAt(m,new bt);i[g]=new we(b.x,b.y,0)}n[0]=new we,a[0]=new we;let c=Number.MAX_VALUE,p=Math.abs(i[0].x),h=Math.abs(i[0].y);p<=c&&(c=p,o.set(1,0,0)),h<=c&&(c=h,o.set(0,1,0)),s.crossVectors(i[0],o).normalize(),n[0].crossVectors(i[0],s),a[0].crossVectors(i[0],n[0]);for(let g=1;g<=e;g++){if(n[g]=n[g-1].clone(),a[g]=a[g-1].clone(),s.crossVectors(i[g-1],i[g]),s.length()>Number.EPSILON){s.normalize();let m=Math.acos(lh(i[g-1].dot(i[g]),-1,1));n[g].applyMatrix4(l.makeRotationAxis(s,m))}a[g].crossVectors(i[g],n[g])}if(t===!0){let g=Math.acos(lh(n[0].dot(n[e]),-1,1));g/=e,i[0].dot(s.crossVectors(n[0],n[e]))>0&&(g=-g);for(let m=1;m<=e;m++)n[m].applyMatrix4(l.makeRotationAxis(i[m],g*m)),a[m].crossVectors(i[m],n[m])}return{tangents:i,normals:n,binormals:a}}};var uh=class extends Sp{constructor(e=new bt,t=new bt){super(),this.v1=e,this.v2=t}getPoint(e,t=new bt){let o=t;return e===1?o.copy(this.v2):(o.copy(this.v2).sub(this.v1),o.multiplyScalar(e).add(this.v1)),o}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new bt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}};var MC=class extends Sp{constructor(){super(...arguments);this.curves=[];this.autoClose=!1}add(t){this.curves.push(t)}closePath(){let t=this.curves[0].getPoint(0),o=this.curves[this.curves.length-1].getPoint(1);t.equals(o)||this.curves.push(new uh(o,t))}getPoint(t,o){let i=t*this.getLength(),n=this.getCurveLengths(),a=0;for(;a<n.length;){if(n[a]>=i){let s=n[a]-i,l=this.curves[a],c=l.getLength(),p=c===0?0:1-s/c;return l.getPointAt(p,o)}a++}}getLength(){let t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=void 0,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let t=[],o=0;for(let i=0,n=this.curves.length;i<n;i++)o+=this.curves[i].getLength(),t.push(o);return this.cacheLengths=t,t}getSpacedPoints(t=40){let o=[];for(let i=0;i<=t;i++)o.push(this.getPoint(i/t));return this.autoClose&&o.push(o[0]),o}getPoints(t=12){let o=[],i;for(let n=0,a=this.curves;n<a.length;n++){let s=a[n],l=s instanceof uh?1:t,c=s.getPoints(l);for(let p=0;p<c.length;p++){let h=c[p];i&&i.equals(h)||(o.push(h),i=h)}}return this.autoClose&&o.length>1&&!o[o.length-1].equals(o[0])&&o.push(o[0]),o}};function Fde(r,e){let t=1-r;return t*t*e}function Gde(r,e){return 2*(1-r)*r*e}function Nde(r,e){return r*r*e}function dF(r,e,t,o){return Fde(r,e)+Gde(r,t)+Nde(r,o)}var AC=class extends Sp{constructor(e=new bt,t=new bt,o=new bt){super(),this.v0=e,this.v1=t,this.v2=o}getPoint(e,t=new bt){let o=t,i=this.v0,n=this.v1,a=this.v2;return o.set(dF(e,i.x,n.x,a.x),dF(e,i.y,n.y,a.y)),o}};var hh=class extends MC{constructor(t){super();this.currentPoint=new bt;t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let o=1,i=t.length;o<i;o++)this.lineTo(t[o].x,t[o].y);return this}moveTo(t,o){return this.currentPoint.set(t,o),this}lineTo(t,o){let i=new uh(this.currentPoint.clone(),new bt(t,o));return this.curves.push(i),this.currentPoint.set(t,o),this}quadraticCurveTo(t,o,i,n){let a=new AC(this.currentPoint.clone(),new bt(t,o),new bt(i,n));return this.curves.push(a),this.currentPoint.set(i,n),this}};var Ff=class extends hh{constructor(){super(...arguments);this.uuid=as();this.holes=[]}getPointsHoles(t){let o=[];for(let i=0,n=this.holes.length;i<n;i++)o[i]=this.holes[i].getPoints(t);return o}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}};var pt=class r{constructor(e){this.isColor=!0;if(e instanceof r)this.copy(e);else if(typeof e=="number")this.setHex(e);else if(typeof e=="string"){let{r:t,g:o,b:i}=__dcg_shared_module_exports__['Id'](e);this.setRGB(t/255,o/255,i/255)}else this.r=1,this.g=1,this.b=1}setHex(e){return e=Math.floor(e),this.setRGB((e>>16&255)/255,(e>>8&255)/255,(e&255)/255),this}setRGB(e,t,o){return this.r=__dcg_shared_module_exports__['Jd'](e),this.g=__dcg_shared_module_exports__['Jd'](t),this.b=__dcg_shared_module_exports__['Jd'](o),this}clone(){let e=new r;return e.r=this.r,e.g=this.g,e.b=this.b,e}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}getRGB(e,t){t===to?(e.r=__dcg_shared_module_exports__['Kd'](this.r),e.g=__dcg_shared_module_exports__['Kd'](this.g),e.b=__dcg_shared_module_exports__['Kd'](this.b)):(e.r=this.r,e.g=this.g,e.b=this.b)}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}};var O9={triangulate:function(r,e,t=2){let o=e&&e.length,i=o?e[0]*t:r.length,n=Vde(r,0,i,t,!0),a=[];if(!n||n.next===n.prev)return a;let s,l,c,p,h,g,m;if(o)throw new Error("EarCut does not support holes");if(r.length>80*t){s=c=r[0],l=p=r[1];for(let b=t;b<i;b+=t)h=r[b],g=r[b+1],h<s&&(s=h),g<l&&(l=g),h>c&&(c=h),g>p&&(p=g);m=Math.max(c-s,p-l),m=m!==0?32767/m:0}return Bde(n,a,t,s,l,m,0),a}};function Vde(r,e,t,o,i){let n,a;if(i===Wde(r,e,t,o)>0)for(n=e;n<t;n+=o)a=D9(n,r[n],r[n+1],a);else for(n=t-o;n>=e;n-=o)a=D9(n,r[n],r[n+1],a);return a&&Kde(a,a.next)&&(R9(a),a=a.next),a}function Bde(r,e,t,o,i,n,a){if(!r)return;!a&&n&&qde(r,o,i,n);let s=r,l,c;for(;r.prev!==r.next;){if(l=r.prev,c=r.next,n?zde(r,o,i,n):Ude(r)){e.push(l.i/t|0),e.push(r.i/t|0),e.push(c.i/t|0),R9(r),r=c.next,s=c.next;continue}if(r=c,r===s)throw new Error("EarCut does not expect ear === stop")}}function Ude(r){let e=r.prev,t=r,o=r.next;if(gh(e,t,o)>=0)return!1;let i=e.x,n=t.x,a=o.x,s=e.y,l=t.y,c=o.y,p=i<n?i<a?i:a:n<a?n:a,h=s<l?s<c?s:c:l<c?l:c,g=i>n?i>a?i:a:n>a?n:a,m=s>l?s>c?s:c:l>c?l:c,b=o.next;for(;b!==e;){if(b.x>=p&&b.x<=g&&b.y>=h&&b.y<=m&&bv(i,s,n,l,a,c,b.x,b.y)&&gh(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function zde(r,e,t,o){let i=r.prev,n=r,a=r.next;if(gh(i,n,a)>=0)return!1;let s=i.x,l=n.x,c=a.x,p=i.y,h=n.y,g=a.y,m=s<l?s<c?s:c:l<c?l:c,b=p<h?p<g?p:g:h<g?h:g,x=s>l?s>c?s:c:l>c?l:c,E=p>h?p>g?p:g:h>g?h:g,S=pF(m,b,e,t,o),k=pF(x,E,e,t,o),T=r.prevZ,I=r.nextZ;for(;T&&T.z>=S&&I&&I.z<=k;){if(T.x>=m&&T.x<=x&&T.y>=b&&T.y<=E&&T!==i&&T!==a&&bv(s,p,l,h,c,g,T.x,T.y)&&gh(T.prev,T,T.next)>=0||(T=T.prevZ,I.x>=m&&I.x<=x&&I.y>=b&&I.y<=E&&I!==i&&I!==a&&bv(s,p,l,h,c,g,I.x,I.y)&&gh(I.prev,I,I.next)>=0))return!1;I=I.nextZ}for(;T&&T.z>=S;){if(T.x>=m&&T.x<=x&&T.y>=b&&T.y<=E&&T!==i&&T!==a&&bv(s,p,l,h,c,g,T.x,T.y)&&gh(T.prev,T,T.next)>=0)return!1;T=T.prevZ}for(;I&&I.z<=k;){if(I.x>=m&&I.x<=x&&I.y>=b&&I.y<=E&&I!==i&&I!==a&&bv(s,p,l,h,c,g,I.x,I.y)&&gh(I.prev,I,I.next)>=0)return!1;I=I.nextZ}return!0}function qde(r,e,t,o){let i=r;do i.z===0&&(i.z=pF(i.x,i.y,e,t,o)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=void 0,i.prevZ=void 0,Hde(i)}function Hde(r){let e,t,o,i,n,a,s,l,c=1;do{for(t=r,r=void 0,n=void 0,a=0;t;){for(a++,o=t,s=0,e=0;e<c&&(s++,o=o.nextZ,!!o);e++);for(l=c;s>0||l>0&&o;)s!==0&&(l===0||!o||t.z<=o.z)?(i=t,t=t.nextZ,s--):(i=o,o=o.nextZ,l--),n?n.nextZ=i:r=i,i.prevZ=n,n=i;t=o}n.nextZ=void 0,c*=2}while(a>1);return r}function pF(r,e,t,o,i){return r=(r-t)*i|0,e=(e-o)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function bv(r,e,t,o,i,n,a,s){return(i-a)*(e-s)>=(r-a)*(n-s)&&(r-a)*(o-s)>=(t-a)*(e-s)&&(t-a)*(n-s)>=(i-a)*(o-s)}function gh(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function Kde(r,e){return r.x===e.x&&r.y===e.y}function D9(r,e,t,o){let i=new uF(r,e,t);return o?(i.next=o.next,i.prev=o,o.next.prev=i,o.next=i):(i.prev=i,i.next=i),i}function R9(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}var uF=class{constructor(e,t,o){this.i=e,this.x=t,this.y=o,this.z=0,this.prevZ=void 0,this.nextZ=void 0,this.steiner=!1}};function Wde(r,e,t,o){let i=0;for(let n=e,a=t-o;n<t;n+=o)i+=(r[a]-r[n])*(r[n+1]+r[a+1]),a=n;return i}var Tp=class r{static area(e){let t=e.length,o=0;for(let i=t-1,n=0;n<t;i=n++)o+=e[i].x*e[n].y-e[n].x*e[i].y;return o*.5}static isClockWise(e){return r.area(e)<0}static triangulateShape(e,t){let o=[],i=[],n=[];F9(e),G9(o,e);let a=e.length;t.forEach(F9);for(let l=0;l<t.length;l++)i.push(a),a+=t[l].length,G9(o,t[l]);let s=O9.triangulate(o,i);for(let l=0;l<s.length;l+=3)n.push(s.slice(l,l+3));return n}};function F9(r){let e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function G9(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}var LC=class{constructor(){this.color=new pt;this.subPaths=[];this.currentPath=new hh}moveTo(e,t){return this.currentPath=new hh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,o,i){return this.currentPath.quadraticCurveTo(e,t,o,i),this}toShapes(e=!1){function t(S){let k=[];for(let T=0,I=S.length;T<I;T++){let P=S[T],A=new Ff;A.curves=P.curves,k.push(A)}return k}function o(S,k){let T=k.length,I=!1;for(let P=T-1,A=0;A<T;P=A++){let D=k[P],G=k[A],N=G.x-D.x,U=G.y-D.y;if(Math.abs(U)>Number.EPSILON){if(U<0&&(D=k[A],N=-N,G=k[P],U=-U),S.y<D.y||S.y>G.y)continue;if(S.y===D.y){if(S.x===D.x)return!0}else{let K=U*(S.x-D.x)-N*(S.y-D.y);if(K===0)return!0;if(K<0)continue;I=!I}}else{if(S.y!==D.y)continue;if(G.x<=S.x&&S.x<=D.x||D.x<=S.x&&S.x<=G.x)return!0}}return I}let i=Tp.isClockWise,n=this.subPaths;if(n.length===0)return[];let a,s,l,c=[];if(n.length===1)return s=n[0],l=new Ff,l.curves=s.curves,c.push(l),c;let p=!i(n[0].getPoints());p=e?!p:p;let h=[],g=[],m=[],b=0,x;m[b]=[];for(let S=0,k=n.length;S<k;S++)if(s=n[S],x=s.getPoints(),a=i(x),a=e?!a:a,a){!p&&g[b]&&b++;let T={s:new Ff,p:x};T.s.curves=s.curves,g[b]=T,p&&b++,m[b]=[]}else m[b].push({h:s,p:x[0]});if(!g[0])return t(n);if(g.length>1){let S=!1,k=0;for(let T=0,I=g.length;T<I;T++)h[T]=[];for(let T=0,I=g.length;T<I;T++){let P=m[T];for(let A=0;A<P.length;A++){let D=P[A],G=!0;for(let N=0;N<g.length;N++)o(D.p,g[N].p)&&(T!==N&&k++,G?(G=!1,h[N].push(D)):S=!0);G&&h[T].push(D)}}k>0&&S===!1&&(m=h)}let E;for(let S=0,k=g.length;S<k;S++){l=g[S].s,c.push(l),E=m[S];for(let T=0,I=E.length;T<I;T++)l.holes.push(E[T].h)}return c}};var $l=class extends dn{constructor(e=1,t=1,o=1,i=32,n=1,a=!1,s=0,l=Math.PI*2){super(),this.type="CylinderGeometry";let c=this;i=Math.floor(i),n=Math.floor(n);let p=[],h=[],g=[],m=[],b=0,x=[],E=o/2,S=0;k(),a===!1&&(e>0&&T(!0),t>0&&T(!1)),this.setIndex(p),this.setAttribute("position",new no(h,3)),this.setAttribute("normal",new no(g,3)),this.setAttribute("uv",new no(m,2));function k(){let I=new we,P=new we,A=0,D=(t-e)/o;for(let G=0;G<=n;G++){let N=[],U=G/n,K=U*(t-e)+e;for(let H=0;H<=i;H++){let w=H/i,F=w*l+s,V=Math.sin(F),B=Math.cos(F);P.x=K*V,P.y=-U*o+E,P.z=K*B,h.push(P.x,P.y,P.z),I.set(V,D,B).normalize(),g.push(I.x,I.y,I.z),m.push(w,1-U),N.push(b++)}x.push(N)}for(let G=0;G<i;G++)for(let N=0;N<n;N++){let U=x[N][G],K=x[N+1][G],H=x[N+1][G+1],w=x[N][G+1];p.push(U,K,w),p.push(K,H,w),A+=6}c.addGroup(S,A,0),S+=A}function T(I){let P=b,A=new bt,D=new we,G=0,N=I===!0?e:t,U=I===!0?1:-1;for(let H=1;H<=i;H++)h.push(0,E*U,0),g.push(0,U,0),m.push(.5,.5),b++;let K=b;for(let H=0;H<=i;H++){let F=H/i*l+s,V=Math.cos(F),B=Math.sin(F);D.x=N*B,D.y=E*U,D.z=N*V,h.push(D.x,D.y,D.z),g.push(0,U,0),A.x=V*.5+.5,A.y=B*.5*U+.5,m.push(A.x,A.y),b++}for(let H=0;H<i;H++){let w=P+H,F=K+H;I===!0?p.push(F,F+1,w):p.push(F+1,F,w),G+=3}c.addGroup(S,G,I===!0?1:2),S+=G}}};var PC=class extends $l{constructor(e=1,t=1,o=32,i=1,n=!1,a=0,s=Math.PI*2){super(0,e,t,o,i,n,a,s),this.type="ConeGeometry"}};var DC=class extends dn{constructor(e,t={}){super(),this.type="ExtrudeGeometry";let o=this,i=[],n=[];for(let s=0,l=e.length;s<l;s++){let c=e[s];a(c)}this.setAttribute("position",new no(i,3)),this.setAttribute("uv",new no(n,2)),this.computeVertexNormals();function a(s){let l=[],c=t.curveSegments!==void 0?t.curveSegments:12,p=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1,g=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,b=t.bevelSize!==void 0?t.bevelSize:m-.1,x=t.bevelOffset!==void 0?t.bevelOffset:0,E=t.bevelSegments!==void 0?t.bevelSegments:3,S=t.UVGenerator!==void 0?t.UVGenerator:$de;g||(E=0,m=0,b=0,x=0);let k=s.extractPoints(c),T=k.shape,I=k.holes;if(!Tp.isClockWise(T)){T=T.reverse();for(let Y=0,j=I.length;Y<j;Y++){let X=I[Y];Tp.isClockWise(X)&&(I[Y]=X.reverse())}}let A=Tp.triangulateShape(T,I),D=T;for(let Y=0,j=I.length;Y<j;Y++){let X=I[Y];T=T.concat(X)}function G(Y,j,X){return j||console.error("THREE.ExtrudeGeometry: vec does not exist"),Y.clone().addScaledVector(j,X)}let N=T.length,U=A.length;function K(Y,j,X){let xe,fe,Se,ke=Y.x-j.x,Le=Y.y-j.y,$e=X.x-Y.x,Q=X.y-Y.y,J=ke*ke+Le*Le,ve=ke*Q-Le*$e;if(Math.abs(ve)>Number.EPSILON){let Ie=Math.sqrt(J),He=Math.sqrt($e*$e+Q*Q),ge=j.x-Le/Ie,Ze=j.y+ke/Ie,rt=X.x-Q/He,Ee=X.y+$e/He,At=((rt-ge)*Q-(Ee-Ze)*$e)/(ke*Q-Le*$e);xe=ge+ke*At-Y.x,fe=Ze+Le*At-Y.y;let Tt=xe*xe+fe*fe;if(Tt<=2)return new bt(xe,fe);Se=Math.sqrt(Tt/2)}else{let Ie=!1;ke>Number.EPSILON?$e>Number.EPSILON&&(Ie=!0):ke<-Number.EPSILON?$e<-Number.EPSILON&&(Ie=!0):Math.sign(Le)===Math.sign(Q)&&(Ie=!0),Ie?(xe=-Le,fe=ke,Se=Math.sqrt(J)):(xe=ke,fe=Le,Se=Math.sqrt(J/2))}return new bt(xe/Se,fe/Se)}let H=[];for(let Y=0,j=D.length,X=j-1,xe=Y+1;Y<j;Y++,X++,xe++)X===j&&(X=0),xe===j&&(xe=0),H[Y]=K(D[Y],D[X],D[xe]);let w=[],F,V=H.concat();for(let Y=0,j=I.length;Y<j;Y++){let X=I[Y];F=[];for(let xe=0,fe=X.length,Se=fe-1,ke=xe+1;xe<fe;xe++,Se++,ke++)Se===fe&&(Se=0),ke===fe&&(ke=0),F[xe]=K(X[xe],X[Se],X[ke]);w.push(F),V=V.concat(F)}for(let Y=0;Y<E;Y++){let j=Y/E,X=m*Math.cos(j*Math.PI/2),xe=b*Math.sin(j*Math.PI/2)+x;for(let fe=0,Se=D.length;fe<Se;fe++){let ke=G(D[fe],H[fe],xe);$(ke.x,ke.y,-X)}for(let fe=0,Se=I.length;fe<Se;fe++){let ke=I[fe];F=w[fe];for(let Le=0,$e=ke.length;Le<$e;Le++){let Q=G(ke[Le],F[Le],xe);$(Q.x,Q.y,-X)}}}let B=b+x;for(let Y=0;Y<N;Y++){let j=g?G(T[Y],V[Y],B):T[Y];$(j.x,j.y,0)}for(let Y=1;Y<=p;Y++)for(let j=0;j<N;j++){let X=g?G(T[j],V[j],B):T[j];$(X.x,X.y,h/p*Y)}for(let Y=E-1;Y>=0;Y--){let j=Y/E,X=m*Math.cos(j*Math.PI/2),xe=b*Math.sin(j*Math.PI/2)+x;for(let fe=0,Se=D.length;fe<Se;fe++){let ke=G(D[fe],H[fe],xe);$(ke.x,ke.y,h+X)}for(let fe=0,Se=I.length;fe<Se;fe++){let ke=I[fe];F=w[fe];for(let Le=0,$e=ke.length;Le<$e;Le++){let Q=G(ke[Le],F[Le],xe);$(Q.x,Q.y,h+X)}}}L(),q();function L(){let Y=i.length/3;if(g){let j=0,X=N*j;for(let xe=0;xe<U;xe++){let fe=A[xe];ne(fe[2]+X,fe[1]+X,fe[0]+X)}j=p+E*2,X=N*j;for(let xe=0;xe<U;xe++){let fe=A[xe];ne(fe[0]+X,fe[1]+X,fe[2]+X)}}else{for(let j=0;j<U;j++){let X=A[j];ne(X[2],X[1],X[0])}for(let j=0;j<U;j++){let X=A[j];ne(X[0]+N*p,X[1]+N*p,X[2]+N*p)}}o.addGroup(Y,i.length/3-Y,0)}function q(){let Y=i.length/3,j=0;le(D,j),j+=D.length;for(let X=0,xe=I.length;X<xe;X++){let fe=I[X];le(fe,j),j+=fe.length}o.addGroup(Y,i.length/3-Y,1)}function le(Y,j){let X=Y.length;for(;--X>=0;){let xe=X,fe=X-1;fe<0&&(fe=Y.length-1);for(let Se=0,ke=p+E*2;Se<ke;Se++){let Le=N*Se,$e=N*(Se+1),Q=j+xe+Le,J=j+fe+Le,ve=j+fe+$e,Ie=j+xe+$e;ue(Q,J,ve,Ie)}}}function $(Y,j,X){l.push(Y),l.push(j),l.push(X)}function ne(Y,j,X){de(Y),de(j),de(X);let xe=i.length/3,fe=S.generateTopUV(o,i,xe-3,xe-2,xe-1);pe(fe[0]),pe(fe[1]),pe(fe[2])}function ue(Y,j,X,xe){de(Y),de(j),de(xe),de(j),de(X),de(xe);let fe=i.length/3,Se=S.generateSideWallUV(o,i,fe-6,fe-3,fe-2,fe-1);pe(Se[0]),pe(Se[1]),pe(Se[3]),pe(Se[1]),pe(Se[2]),pe(Se[3])}function de(Y){i.push(l[Y*3+0]),i.push(l[Y*3+1]),i.push(l[Y*3+2])}function pe(Y){n.push(Y.x),n.push(Y.y)}}}},$de={generateTopUV:function(r,e,t,o,i){let n=e[t*3],a=e[t*3+1],s=e[o*3],l=e[o*3+1],c=e[i*3],p=e[i*3+1];return[new bt(n,a),new bt(s,l),new bt(c,p)]},generateSideWallUV:function(r,e,t,o,i,n){let a=e[t*3],s=e[t*3+1],l=e[t*3+2],c=e[o*3],p=e[o*3+1],h=e[o*3+2],g=e[i*3],m=e[i*3+1],b=e[i*3+2],x=e[n*3],E=e[n*3+1],S=e[n*3+2];return Math.abs(s-p)<Math.abs(a-c)?[new bt(a,1-l),new bt(c,1-h),new bt(g,1-b),new bt(x,1-S)]:[new bt(s,1-l),new bt(p,1-h),new bt(m,1-b),new bt(E,1-S)]}};var yv=class extends dn{constructor(e=1,t=1,o=1,i=1){super(),this.type="PlaneGeometry";let n=e/2,a=t/2,s=Math.floor(o),l=Math.floor(i),c=s+1,p=l+1,h=e/s,g=t/l,m=[],b=[],x=[],E=[];for(let S=0;S<p;S++){let k=S*g-a;for(let T=0;T<c;T++){let I=T*h-n;b.push(I,-k,0),x.push(0,0,1),E.push(T/s),E.push(1-S/l)}}for(let S=0;S<l;S++)for(let k=0;k<s;k++){let T=k+c*S,I=k+c*(S+1),P=k+1+c*(S+1),A=k+1+c*S;m.push(T,I,A),m.push(I,P,A)}this.setIndex(m),this.setAttribute("position",new no(b,3)),this.setAttribute("normal",new no(x,3)),this.setAttribute("uv",new no(E,2))}};var Gf=class extends Io{constructor(t,o=1){super();this.isLight=!0;this.type="Light",this.color=new pt(t),this.intensity=o}dispose(){}};var Nf=class extends Gf{constructor(t,o){super(t,o);this.isAmbientLight=!0;this.type="AmbientLight"}};var kp=class extends Gf{constructor(t,o){super(t,o);this.isDirectionalLight=!0;this.type="DirectionalLight",this.position.copy(Io.DEFAULT_UP),this.updateMatrix(),this.target=new Io}dispose(){}};function jl(r){let e={};for(let t in r){e[t]={};for(let o in r[t]){let i=r[t][o];i&&(i instanceof pt||i instanceof Gr||i instanceof It||i instanceof bt||i instanceof we||i instanceof qo||i instanceof na||i instanceof ds)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][o]=null):e[t][o]=i.clone():Array.isArray(i)?e[t][o]=i.slice():e[t][o]=i}}return e}function N9(r){let e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function V9(r){return r.getRenderTarget()===null?r.outputColorSpace:Hi}var jde=0,aa=class extends ia{constructor(e){super(),Object.defineProperty(this,"id",{value:jde++}),this.uuid=as(),this.name="",this.type="Material",this.blending=mp,this.side=q7,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=pC,this.blendDst=uC,this.blendEquation=zl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=dv,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=x9,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=TC,this.stencilZFail=TC,this.stencilZPass=TC,this.stencilWrite=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.userData={},this.version=0,this._alphaTest=0,this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="",this.fragmentShader="",this.wireframe=!1,this.lights=!1,this.exprTooComplex=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}customProgramCacheKey(){return"no-custom-cache-key"}setValues(e){if(e!==void 0)for(let t in e){let o=t,i=e[o];if(i===void 0){console.warn(`THREE.Material: parameter '${o}' has value of undefined.`);continue}let n=this[o];if(n===void 0){console.warn(`THREE.Material: '${o}' is not a property of THREE.${this.type}.`);continue}n&&n.isColor?n.set(i):n&&n instanceof we&&i&&i instanceof we?n.copy(i):this[o]=i}}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=jl(e.uniforms),this.uniformsGroups=N9(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.lights=e.lights,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}};var Ep=class extends Ai{constructor(e,t,o=!1,i=1){super(e,t,o),this.meshPerAttribute=i}};var Po=class extends Io{constructor(e,t){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t}};var B9=new It,U9=new Jc,Do=class extends Po{constructor(e,t,o){super(e,t),this.instanceMatrix=new Ep(new Float32Array(o*16),16),this.instanceColor=new Ep(new Float32Array(o*3),3),this.instancePickingColor=new Ep(new Float32Array(o*4),4),this.count=o}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getPickingColorAt(e,t){let o=this.instancePickingColor.array;e=e*4,t[0]=o[e+0],t[1]=o[e+1],t[2]=o[e+2],t[3]=o[e+3]}setColorAt(e,t){t.toArray(this.instanceColor.array,e*3)}setPickingColorAt(e,t){let o=this.instancePickingColor.array,i=e*4;o[i+0]=t[0],o[i+1]=t[1],o[i+2]=t[2],o[i+3]=t[3]}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}computeBoundingSphere(){var o,i;let e=this.geometry,t=this.count;this.boundingSphere||(this.boundingSphere=new Jc),e.boundingSphere||e.computeBoundingSphere(),(o=this.boundingSphere)==null||o.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,B9),U9.copy(e.boundingSphere).applyMatrix4(B9),(i=this.boundingSphere)==null||i.union(U9)}dispose(){this.dispatchEvent({type:"dispose"})}};var Zc=class{constructor(e=new we(1,0,0),t=0){this.isPlane=!0;this.normal=e,this.constant=t}setComponents(e,t,o,i){return this.normal.set(e,t,o),this.constant=i,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}distanceToPoint(e){return this.normal.dot(e)+this.constant}};var xv=new Jc,OC=class{constructor(e=new Zc,t=new Zc,o=new Zc,i=new Zc,n=new Zc,a=new Zc){this.planes=[e,t,o,i,n,a]}setFromProjectionMatrix(e,t=cs){let o=this.planes,i=e.elements,n=i[0],a=i[1],s=i[2],l=i[3],c=i[4],p=i[5],h=i[6],g=i[7],m=i[8],b=i[9],x=i[10],E=i[11],S=i[12],k=i[13],T=i[14],I=i[15];if(o[0].setComponents(l-n,g-c,E-m,I-S).normalize(),o[1].setComponents(l+n,g+c,E+m,I+S).normalize(),o[2].setComponents(l+a,g+p,E+b,I+k).normalize(),o[3].setComponents(l-a,g-p,E-b,I-k).normalize(),o[4].setComponents(l-s,g-h,E-x,I-T).normalize(),t===cs)o[5].setComponents(l+s,g+h,E+x,I+T).normalize();else if(t===gv)o[5].setComponents(s,h,x,T).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){let t=e.geometry;return t?(e instanceof Do?(e.computeBoundingSphere(),xv.copy(e.boundingSphere).applyMatrix4(e.matrixWorld)):(t.boundingSphere||t.computeBoundingSphere(),xv.copy(t.boundingSphere),xv.applyMatrix4(e.dcgModelMatrix),xv.applyMatrix4(e.matrixWorld)),this.intersectsSphere(xv)):!1}intersectsSphere(e){let t=this.planes,o=e.center,i=-e.radius;for(let n=0;n<6;n++)if(t[n].distanceToPoint(o)<i)return!1;return!0}};var vv=class extends Io{constructor(){super(),this.isGroup=!0,this.type="Group"}};var z9=new we,q9=new we,RC=class extends Io{constructor(e,t){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,o=[0];for(let i=1,n=t.count;i<n;i++)z9.fromBufferAttribute(t,i-1),q9.fromBufferAttribute(t,i),o[i]=o[i-1],o[i]+=z9.distanceTo(q9);e.setAttribute("lineDistance",new no(o,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}};var H9=new we,K9=new we,FC=class extends RC{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,o=[];for(let i=0,n=t.count;i<n;i+=2)H9.fromBufferAttribute(t,i),K9.fromBufferAttribute(t,i+1),o[i]=i===0?0:o[i-1],o[i+1]=o[i]+H9.distanceTo(K9);e.setAttribute("lineDistance",new no(o,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}};var W9=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}

vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
`;var $9=`
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6

#define saturate( a ) clamp( a, 0.0, 1.0 )

float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }

#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif

struct IncidentLight {
	vec3 color;
	vec3 direction;
};

struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};

struct GeometricContext {
	vec3 normal;
	vec3 viewDir;
};

vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}

vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}

vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
`;var j9=`
#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif

#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif
`;var Y9=`
#ifdef OPAQUE
  diffuseColor.a = 1.0;
#endif

gl_FragColor = vec4( outgoingLight, diffuseColor.a );
gl_FragColor = linearToOutputTexel( gl_FragColor );

#ifdef PREMULTIPLIED_ALPHA
	// Get get normal blending with premultipled, use with CustomBlending, OneFactor, OneMinusSrcAlphaFactor, AddEquation.
	gl_FragColor.rgb *= gl_FragColor.a;
#endif
`;var X9=`
#ifdef USE_MAP
	varying vec2 vMapUv;
	uniform sampler2D map;
#endif

#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif

#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif

#if defined(USE_INSTANCING_PICKINGCOLOR) || defined(USE_VERTEX_PICKING_COLOR)
	varying vec4 vPickingColor;
#endif
`;var J9=`
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif

#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif

#if defined(USE_INSTANCING_PICKINGCOLOR) || defined (USE_VERTEX_PICKING_COLOR)
	varying vec4 vPickingColor;
#endif
`;var Z9=`
#ifdef USE_MAP
	vMapUv = ( vec3( MAP_UV, 1 ) ).xy;
#endif

vec3 transformed = vec3( position );
vec4 mvPosition = vec4( transformed, 1.0 );

#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#else
	mvPosition = dcgModelMatrix * mvPosition;
#endif

mvPosition = modelViewMatrix * mvPosition;

gl_Position = projectionMatrix * mvPosition;

#ifdef USE_COLOR
	vColor = color;
#endif

#ifdef USE_INSTANCING_COLOR
  vColor = instanceColor;
#endif

#ifdef USE_INSTANCING_PICKINGCOLOR
	vPickingColor = instancePickingColor;
#endif

#ifdef USE_VERTEX_PICKING_COLOR
	vPickingColor = vertexPickingColor;
#endif

`;var Q9=`
PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );

vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );

material.roughness = max( roughnessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.
material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
material.specularF90 = 1.0;

GeometricContext geometry;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );

IncidentLight directLight;

#if ( NUM_DIR_LIGHTS > 0 )
	DirectionalLight directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		RE_Direct_Physical( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif

vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
RE_IndirectDiffuse_Physical( irradiance, material, reflectedLight );

RE_IndirectSpecular_Physical( geometry, material, reflectedLight );
`;var e$=`
uniform vec3 ambientLightColor;

vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}

#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
	}
#endif

struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
};

vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );

float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}

float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0; // avoid alpha = 0 with dotNH = 1
	return RECIPROCAL_PI * a2 / pow2( denom );
}

vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness ); // UE4's roughness
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}

vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}

void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	vec3 Fr = specularColor;
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619; // 1/21
	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}

void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}

void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}

void RE_IndirectSpecular_Physical(const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
}
`;var Oo={common:$9,colorspace_pars_fragment:W9,common_fragment_begin:j9,common_fragment_end:Y9,common_pars_fragment:X9,common_pars_vertex:J9,common_vertex:Z9,lights_fragment:Q9,lights_pars_fragment:e$};var hF={common:{diffuse:{value:new pt(16777215)},opacity:{value:1},map:{value:null},alphaTest:{value:0}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}}}};var GC=class{constructor(e,t){this.gl=e;this.info=t}setMode(e){this.mode=e}render(e,t){this.gl.drawArrays(this.mode,e,t),this.info.update(t,this.mode,1)}renderInstances(e,t,o){o!==0&&(this.gl.drawArraysInstanced(this.mode,e,t,o),this.info.update(t,this.mode,o))}};var NC=class{constructor(e,t,o){let i;function n(){if(i!==void 0)return i;if(t.has("EXT_texture_filter_anisotropic")===!0){let D=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(D.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i||0}function a(D){if(D==="highp"){let G=e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT),N=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);if(G!==null&&G.precision>0&&N!==null&&N.precision>0)return"highp";D="mediump"}if(D==="mediump"){let G=e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT),N=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT);if(G!==null&&G.precision>0&&N!==null&&N.precision>0)return"mediump"}return"lowp"}let s=typeof WebGL2RenderingContext!="undefined"&&e.constructor.name==="WebGL2RenderingContext",l=o.precision!==void 0?o.precision:"highp",c=a(l);c!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",c,"instead."),l=c);let p=s||t.has("WEBGL_draw_buffers"),h=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),g=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=e.getParameter(e.MAX_TEXTURE_SIZE),b=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),x=e.getParameter(e.MAX_VERTEX_ATTRIBS),E=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),S=e.getParameter(e.MAX_VARYING_VECTORS),k=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),T=g>0,I=s||t.has("OES_texture_float"),P=T&&I,A=s?e.getParameter(e.MAX_SAMPLES):0;this.isWebGL2=s,this.drawBuffers=p,this.getMaxAnisotropy=n,this.getMaxPrecision=a,this.precision=l,this.maxTextures=h,this.maxVertexTextures=g,this.maxTextureSize=m,this.maxCubemapSize=b,this.maxAttributes=x,this.maxVertexUniforms=E,this.maxVaryings=S,this.maxFragmentUniforms=k,this.vertexTextures=T,this.floatFragmentTextures=I,this.floatVertexTextures=P,this.maxSamples=A}};var VC=class{constructor(e){let t={};function o(i){if(t[i]!==void 0)return t[i];let n;switch(i){case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(i)}return t[i]=n,n}this.has=function(i){return o(i)!==null},this.init=function(){o("EXT_color_buffer_float"),o("OES_texture_float_linear"),o("EXT_color_buffer_half_float"),o("WEBGL_multisampled_render_to_texture")},this.get=function(i){let n=o(i);return n===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),n}}};var Vf=class extends dn{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}};var BC=class{constructor(e,t,o,i){let n={},a=new WeakMap;function s(g){let m=g.target;m.index!==null&&t.remove(m.index);for(let x in m.attributes)t.remove(m.attributes[x]);m.removeEventListener("dispose",s),delete n[m.id];let b=a.get(m);b&&(t.remove(b),a.delete(m)),i.releaseStatesOfGeometry(m),m instanceof Vf&&delete m._maxInstanceCount,o.memory.geometries--}function l(g,m){return n[m.id]===!0||(m.addEventListener("dispose",s),n[m.id]=!0,o.memory.geometries++),m}function c(g){let m=g.attributes;for(let b in m)t.update(m[b],e.ARRAY_BUFFER)}function p(g){let m=[],b=g.index,x=g.attributes.position,E=0;if(b!==null){let T=b.array;E=b.version;for(let I=0,P=T.length;I<P;I+=3){let A=T[I+0],D=T[I+1],G=T[I+2];m.push(A,D,D,G,G,A)}}else if(x!==void 0){let T=x.array;E=x.version;for(let I=0,P=T.length/3-1;I<P;I+=3){let A=I+0,D=I+1,G=I+2;m.push(A,D,D,G,G,A)}}else return;let S=new(IC(m)?xp:yp)(m,1);S.version=E;let k=a.get(g);k&&t.remove(k),a.set(g,S)}function h(g){let m=a.get(g);if(m){let x=g.index;x!==null&&m.version<x.version&&p(g)}else p(g);let b=a.get(g);return ht(b,"attribute"),b}this.get=l,this.update=c,this.getWireframeAttribute=h}};var UC=class{constructor(e,t){this.gl=e;this.info=t}setMode(e){this.mode=e}setIndex(e){this.type=e.type,this.bytesPerElement=e.bytesPerElement}render(e,t){this.gl.drawElements(this.mode,t,this.type,e*this.bytesPerElement),this.info.update(t,this.mode,1)}renderInstances(e,t,o){o!==0&&(this.gl.drawElementsInstanced(this.mode,t,this.type,e*this.bytesPerElement,o),this.info.update(t,this.mode,o))}};var zC=class{constructor(e){this.gl=e;this.autoReset=!0;this.programs=null;this.memory={geometries:0,textures:0},this.render={frame:0,calls:0,triangles:0,points:0,lines:0}}update(e,t,o){let i=this.gl,n=this.render;switch(n.calls++,t){case i.TRIANGLES:n.triangles+=o*(e/3);break;case i.LINES:n.lines+=o*(e/2);break;case i.LINE_STRIP:n.lines+=o*(e-1);break;case i.LINE_LOOP:n.lines+=o*e;break;case i.POINTS:n.points+=o*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",t);break}}reset(){this.render.calls=0,this.render.triangles=0,this.render.points=0,this.render.lines=0}};var gF=class{constructor(){this.lights={}}get(e){let t=this.lights,o=t[e.id];if(o!==void 0)return o;let i={direction:new we,color:new pt};return t[e.id]=i,i}},Yde=0,qC=class{constructor(){let e=new gF;this.state={version:0,hash:{directionalLength:-1},ambient:[0,0,0],directional:[]};let t=this.state,o=new we;function i(a){let s=0,l=0,c=0,p=0;for(let g=0,m=a.length;g<m;g++){let b=a[g],x=b.color,E=b.intensity;if(b instanceof Nf)s+=x.r*E,l+=x.g*E,c+=x.b*E;else if(b instanceof kp){let S=e.get(b);S.color.copy(b.color).multiplyScalar(b.intensity),t.directional[p]=S,p++}}t.ambient[0]=s,t.ambient[1]=l,t.ambient[2]=c;let h=t.hash;h.directionalLength!==p&&(t.directional.length=p,h.directionalLength=p,t.version=Yde++)}function n(a,s){let l=0,c=s.matrixWorldInverse;for(let p=0,h=a.length;p<h;p++){let g=a[p];if(g instanceof kp){let m=t.directional[l];m.direction.setFromMatrixPosition(g.matrixWorld),o.setFromMatrixPosition(g.target.matrixWorld),m.direction.sub(o),m.direction.transformDirection(c),l++}}}this.setup=i,this.setupView=n}};var HC=class{constructor(e,t,o,i){let n=new WeakMap;function a(c){let p=i.render.frame,h=c.geometry,g=t.get(c,h);return n.get(g)!==p&&(t.update(g),n.set(g,p)),c instanceof Do&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),n.get(c)!==p&&(o.update(c.instanceMatrix,e.ARRAY_BUFFER),c.instanceColor&&o.update(c.instanceColor,e.ARRAY_BUFFER),c.instancePickingColor&&o.update(c.instancePickingColor,e.ARRAY_BUFFER),n.set(c,p))),g}function s(){n=new WeakMap}function l(c){let p=c.target;p.removeEventListener("dispose",l),o.remove(p.instanceMatrix),p.instanceColor&&o.remove(p.instanceColor),p.instancePickingColor&&o.remove(p.instancePickingColor)}this.update=a,this.dispose=s}};bn();function mF(r,e,t){let o=r.createShader(e);if(!o)throw new Error(`Error creating shader (type ${e}): ${t}`);return r.shaderSource(o,t),r.compileShader(o),o}var s$=new na(new Wl(0,0));function Xde(r){return typeof r[0]=="number"}function Qc(r){return!Array.isArray(r)&&"x"in r}var t$=[],r$=[],o$=new Float32Array(16),i$=new Float32Array(9),n$=new Float32Array(4);function Bf(r,e,t){if(Xde(r))return r;let o=e*t,i=t$[o];if(i===void 0&&(i=new Float32Array(o),t$[o]=i),e!==0){r[0].toArray(i,0);for(let n=1,a=0;n!==e;++n)a+=t,r[n].toArray(i,a)}return i}function pn(r,e){if(r.length!==e.length)return!1;for(let t=0,o=r.length;t<o;t++)if(r[t]!==e[t])return!1;return!0}function un(r,e){for(let t=0,o=e.length;t<o;t++)r[t]=e[t]}function Jde(r,e){let t=r$[e];t===void 0&&(t=new Int32Array(e),r$[e]=t);for(let o=0;o!==e;++o)t[o]=r.allocateTextureUnit();return t}function Zde(r,e){let t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function Qde(r,e){let t=this.cache;if(Qc(e))(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(pn(t,e))return;r.uniform2fv(this.addr,e),un(t,e)}}function epe(r,e){let t=this.cache;if(Qc(e))(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e instanceof pt)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(pn(t,e))return;r.uniform3fv(this.addr,e),un(t,e)}}function tpe(r,e){let t=this.cache;if(Qc(e))(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(pn(t,e))return;r.uniform4fv(this.addr,e),un(t,e)}}function rpe(r,e){let t=this.cache;if(Array.isArray(e)){if(pn(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),un(t,e)}else{let o=e.elements;if(pn(t,o))return;n$.set(o),r.uniformMatrix2fv(this.addr,!1,n$),un(t,o)}}function ope(r,e){let t=this.cache;if(Array.isArray(e)){if(pn(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),un(t,e)}else{let o=e.elements;if(pn(t,o))return;i$.set(o),r.uniformMatrix3fv(this.addr,!1,i$),un(t,o)}}function ipe(r,e){let t=this.cache;if(Array.isArray(e)){if(pn(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),un(t,e)}else{let o=e.elements;if(pn(t,o))return;o$.set(o),r.uniformMatrix4fv(this.addr,!1,o$),un(t,o)}}function npe(r,e){let t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function ape(r,e){let t=this.cache;if(Qc(e))(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(pn(t,e))return;r.uniform2iv(this.addr,e),un(t,e)}}function spe(r,e){let t=this.cache;if(Qc(e))(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(pn(t,e))return;r.uniform3iv(this.addr,e),un(t,e)}}function lpe(r,e){let t=this.cache;if(Qc(e))(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(pn(t,e))return;r.uniform4iv(this.addr,e),un(t,e)}}function cpe(r,e){let t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function dpe(r,e){let t=this.cache;if(Qc(e))(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(pn(t,e))return;r.uniform2uiv(this.addr,e),un(t,e)}}function ppe(r,e){let t=this.cache;if(Qc(e))(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(pn(t,e))return;r.uniform3uiv(this.addr,e),un(t,e)}}function upe(r,e){let t=this.cache;if(Qc(e))(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(pn(t,e))return;r.uniform4uiv(this.addr,e),un(t,e)}}function hpe(r,e,t){let o=this.cache,i=t.allocateTextureUnit();o[0]!==i&&(r.uniform1i(this.addr,i),o[0]=i),t.setTexture2D(e||s$,i)}function gpe(r){switch(r){case 5126:return Zde;case 35664:return Qde;case 35665:return epe;case 35666:return tpe;case 35674:return rpe;case 35675:return ope;case 35676:return ipe;case 5124:case 35670:return npe;case 35667:case 35671:return ape;case 35668:case 35672:return spe;case 35669:case 35673:return lpe;case 5125:return cpe;case 36294:return dpe;case 36295:return ppe;case 36296:return upe;case 35678:case 36198:case 36298:case 36306:return hpe;case 35679:case 36299:case 36307:throw new Error("THREE.WebGLUniforms: sampler3D support is not implemented.");case 35680:case 36300:case 36308:throw new Error("THREE.WebGLUniforms: samplerCube support is not implemented.");case 36289:case 36303:case 36311:throw new Error("THREE.WebGLUniforms: sampler2DArray support is not implemented.")}throw new Error(`Unknown uniform type: ${r}`)}function mpe(r,e){r.uniform1fv(this.addr,e)}function fpe(r,e){let t=Bf(e,this.size,2);r.uniform2fv(this.addr,t)}function bpe(r,e){let t=Bf(e,this.size,3);r.uniform3fv(this.addr,t)}function ype(r,e){let t=Bf(e,this.size,4);r.uniform4fv(this.addr,t)}function xpe(r,e){let t=Bf(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function vpe(r,e){let t=Bf(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function wpe(r,e){let t=Bf(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function Spe(r,e){r.uniform1iv(this.addr,e)}function Tpe(r,e){r.uniform2iv(this.addr,e)}function kpe(r,e){r.uniform3iv(this.addr,e)}function Epe(r,e){r.uniform4iv(this.addr,e)}function Ipe(r,e){r.uniform1uiv(this.addr,e)}function Cpe(r,e){r.uniform2uiv(this.addr,e)}function _pe(r,e){r.uniform3uiv(this.addr,e)}function Mpe(r,e){r.uniform4uiv(this.addr,e)}function Ape(r,e,t){let o=this.cache,i=e.length,n=Jde(t,i);pn(o,n)||(r.uniform1iv(this.addr,n),un(o,n));for(let a=0;a!==i;++a)t.setTexture2D(e[a]||s$,n[a])}function Lpe(r){switch(r){case 5126:return mpe;case 35664:return fpe;case 35665:return bpe;case 35666:return ype;case 35674:return xpe;case 35675:return vpe;case 35676:return wpe;case 5124:case 35670:return Spe;case 35667:case 35671:return Tpe;case 35668:case 35672:return kpe;case 35669:case 35673:return Epe;case 5125:return Ipe;case 36294:return Cpe;case 36295:return _pe;case 36296:return Mpe;case 35678:case 36198:case 36298:case 36306:return Ape;case 35679:case 36299:case 36307:throw new Error("THREE.WebGLUniforms: sampler3DArray support is not implemented.");case 35680:case 36300:case 36308:throw new Error("THREE.WebGLUniforms: samplerCube support is not implemented.");case 36289:case 36303:case 36311:throw new Error("THREE.WebGLUniforms: sampler2DArray support is not implemented.")}throw new Error(`Unrecognized uniform type: ${r}`)}var bF=class{constructor(e,t,o){this.id=e,this.addr=o,this.cache=[],this.setValue=gpe(t.type)}},yF=class{constructor(e,t,o){this.id=e,this.addr=o,this.cache=[],this.size=t.size,this.setValue=Lpe(t.type)}},KC=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,o){let i=this.seq;for(let n=0,a=i.length;n!==a;++n){let s=i[n];s.setValue(e,t[s.id],o)}}},fF=/(\w+)(\])?(\[|\.)?/g;function a$(r,e){r.seq.push(e),r.map[e.id]=e}function Ppe(r,e,t){let o=r.name,i=o.length;for(fF.lastIndex=0;;){let n=fF.exec(o),a=fF.lastIndex;ht(n,"parseUniform match");let s=n[1],l=n[2]==="]",c=n[3];if(l&&(s=s|0),c===void 0||c==="["&&a+2===i){a$(t,c===void 0?new bF(s,r,e):new yF(s,r,e));break}else{let h=t.map[s];if(h===void 0&&(h=new KC(s),a$(t,h)),!(h instanceof KC))throw new Error(`THREE.WebGLUniforms: Programming error: expected ${s} to be a StructuredUniform`);t=h}}}var Ip=class{constructor(e,t){this.seq=[],this.map={};let o=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<o;++i){let n=e.getActiveUniform(t,i);ht(n,"active info",e);let a=e.getUniformLocation(t,n.name);Ppe(n,a,this)}}setValue(e,t,o,i){let n=this.map[t];n!==void 0&&n.setValue(e,o,i)}setOptional(e,t,o,i){let n=t[o];n!==void 0&&this.setValue(e,o,n,i)}static upload(e,t,o,i){for(let n=0,a=t.length;n!==a;++n){let s=t[n],l=o[s.id];l.needsUpdate!==!1&&s.setValue(e,l.value,i)}}static seqWithValue(e,t){let o=[];for(let i=0,n=e.length;i!==n;++i){let a=e[i];a.id in t&&o.push(a)}return o}};var Dpe=0;function Ope(r,e){if(r===null)throw new Error("Shader source is undefined.");let t=r.split(`
`),o=[],i=Math.max(e-6,0),n=Math.min(e+6,t.length);for(let a=i;a<n;a++){let s=a+1;o.push(`${s===e?">":" "} ${s}: ${t[a]}`)}return o.join(`
`)}function Rpe(r){switch(r){case Hi:return["Linear","( value )"];case to:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",r),["Linear","( value )"]}}function l$(r,e,t){let o=r.getShaderParameter(e,r.COMPILE_STATUS),i=r.getShaderInfoLog(e);ht(i,"shader info",r);let n=i.trim()||"";if(o&&n==="")return"";let a=/ERROR: 0:(\d+)/.exec(n);if(a){let s=parseInt(a[1]);return t.toUpperCase()+`

`+n+`

`+Ope(r.getShaderSource(e),s)}else return n}function Fpe(r,e){let t=Rpe(e);return"vec4 "+r+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Gpe(r){let e=[];for(let t in r){let o=r[t];o!==!1&&e.push("#define "+t+" "+o)}return e.join(`
`)}function Npe(r,e){let t={},o=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES);for(let i=0;i<o;i++){let n=r.getActiveAttrib(e,i);if(!n)throw new Error("THREE.WebGLProgram: Error fetching attribute info.");let a=n.name,s=1;n.type===r.FLOAT_MAT2&&(s=2),n.type===r.FLOAT_MAT3&&(s=3),n.type===r.FLOAT_MAT4&&(s=4),t[a]={type:n.type,location:r.getAttribLocation(e,a),locationSize:s}}return t}function c$(r){return r!==""}function d$(r,e){return r.replace(/NUM_DIR_LIGHTS/g,""+e.numDirLights)}var Vpe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function p$(r){return r.replace(Vpe,Bpe)}function Bpe(r,e,t,o){let i="";for(let n=parseInt(e);n<parseInt(t);n++)i+=o.replace(/\[\s*i\s*\]/g,"[ "+n+" ]").replace(/UNROLLED_LOOP_INDEX/g,""+n);return i}function u$(r){let e="precision "+r.precision+` float;
precision `+r.precision+" int;";return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}var WC=class{constructor(e,t,o,i){let n=e.getContext(),a=o.defines,s=o.vertexShader,l=o.fragmentShader,c=Gpe(a),p=n.createProgram();if(!p)throw new Error("THREE.WebGLProgram: Unable to create program.");let h,g,m=o.glslVersion?"#version "+o.glslVersion+`
`:"";h=[u$(o),"#define SHADER_TYPE "+o.shaderType,"#define SHADER_NAME "+o.shaderName,c,o.instancing?"#define USE_INSTANCING":"",o.instancingColor?"#define USE_INSTANCING_COLOR":"",o.instancingPickingColor?"#define USE_INSTANCING_PICKINGCOLOR":"",o.vertexPickingColor?"#define USE_VERTEX_PICKING_COLOR":"",o.map?"#define USE_MAP":"",o.mapUv?"#define MAP_UV "+o.mapUv:"",o.vertexColors?"#define USE_COLOR":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_PICKINGCOLOR","	attribute vec4 instancePickingColor;","#endif","#ifdef USE_VERTEX_PICKING_COLOR"," attribute vec4 vertexPickingColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;",`
`].filter(c$).join(`
`),g=[u$(o),"#define SHADER_TYPE "+o.shaderType,"#define SHADER_NAME "+o.shaderName,c,o.map?"#define USE_MAP":"",o.alphaTest?"#define USE_ALPHATEST":"",o.vertexColors?"#define USE_COLOR":"",o.instancingColor?"#define USE_INSTANCING_COLOR":"",o.instancingPickingColor?"#define USE_INSTANCING_PICKINGCOLOR":"",o.vertexPickingColor?"#define USE_VERTEX_PICKING_COLOR":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",o.opaque?"#define OPAQUE":"",Oo.colorspace_pars_fragment,Fpe("linearToOutputTexel",o.outputColorSpace),`
`].filter(c$).join(`
`),s=d$(s,o),l=d$(l,o),s=p$(s),l=p$(l),m=`#version 300 es
`,h=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+h,g=["#define varying in",o.glslVersion===iF?"":"layout(location = 0) out highp vec4 pc_fragColor;",o.glslVersion===iF?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g;let b=m+h+s,x=m+g+l,E=mF(n,n.VERTEX_SHADER,b),S=mF(n,n.FRAGMENT_SHADER,x);n.attachShader(p,E),n.attachShader(p,S),o.index0AttributeName!==void 0&&n.bindAttribLocation(p,0,o.index0AttributeName),n.linkProgram(p);function k(P){var A,D,G;if(e.debug.checkShaderErrors){let N=(A=n.getProgramInfoLog(p))==null?void 0:A.trim(),U=(D=n.getShaderInfoLog(E))==null?void 0:D.trim(),K=(G=n.getShaderInfoLog(S))==null?void 0:G.trim();ht(N,"program lob",n),ht(U,"vertex log",n),ht(K,"fragment log",n);let H=!0,w=!0,F=!1;if(n.getProgramParameter(p,n.LINK_STATUS)===!1)if(H=!1,typeof e.debug.onShaderError=="function")e.debug.onShaderError(n,p,E,S);else{let V=l$(n,E,"vertex"),B=l$(n,S,"fragment"),L=n.getError();F=B.includes("Expression too complex"),F||(console.error("THREE.WebGLProgram: Shader Error "+L+" - VALIDATE_STATUS "+n.getProgramParameter(p,n.VALIDATE_STATUS)+`

Program Info Log: `+N+`
`+V+`
`+B),L&&L!=1282||V||B||N&&L!=1282?Lr("Shader error",{metaData:{glError:L,glProgramParameter:n.getProgramParameter(p,n.VALIDATE_STATUS),glProgramLog:N,glVertexErrors:V,glFragmentError:B,vertexShader:b,fragmentShader:x}}):Lr("WebGL program link failure with no error reported",{metaData:{vertexShader:b,fragmentShader:x}}))}else N!==""?console.warn("THREE.WebGLProgram: Program Info Log:",N):(U===""||K==="")&&(w=!1);w&&(P.diagnostics={runnable:H,exprTooComplex:F,programLog:N,vertexLog:U,fragmentLog:K})}n.deleteShader(E),n.deleteShader(S),T=new Ip(n,p),I=Npe(n,p)}let T;this.getUniforms=function(){return T===void 0&&k(this),ht(T,"cachedUniforms"),T};let I;this.getAttributes=function(){return I===void 0&&k(this),ht(I,"cachedAttributes"),I},this.destroy=function(){i.releaseStatesOfProgram(this),n.deleteProgram(p),this.program=void 0},this.type=o.shaderType,this.name=o.shaderName,this.id=Dpe++,this.cacheKey=t,this.usedTimes=1,this.program=p,this.vertexShader=E,this.fragmentShader=S}};var Upe=0,$C=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,o=e.fragmentShader,i=this._getShaderStage(t),n=this._getShaderStage(o),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(n)===!1&&(a.add(n),n.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let o of t||[])o.usedTimes--,o.usedTimes===0&&this.shaderCache.delete(o.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,o=t.get(e);return o===void 0&&(o=new Set,t.set(e,o)),o}_getShaderStage(e){let t=this.shaderCache,o=t.get(e);return o===void 0&&(o=new xF(e),t.set(e,o)),o}},xF=class{constructor(e){this.id=Upe++,this.code=e,this.usedTimes=0}};var jC=class{constructor(e,t,o){let i=new Lf,n=new $C,a=[],s=t.vertexTextures,l=t.precision;function c(S,k,T,I){var H,w,F,V;S.precision!==null&&(l=t.getMaxPrecision(S.precision),l!==S.precision&&console.warn("THREE.WebGLProgram.getParameters:",S.precision,"not supported, using",l,"instead."));let P=S.vertexShader,A=S.fragmentShader;n.update(S);let D=n.getVertexShaderID(S),G=n.getFragmentShaderID(S),N=e.getRenderTarget(),U=I instanceof Do;return{shaderType:S.type,shaderName:S.name,vertexShader:P,fragmentShader:A,defines:S.defines,customVertexShaderID:D,customFragmentShaderID:G,glslVersion:S.glslVersion,precision:l,instancing:U,instancingColor:U&&!!I.instanceColor,instancingPickingColor:U&&!!I.instancePickingColor,vertexPickingColor:!!I.pickingColorArray,supportsVertexTextures:s,outputColorSpace:N===null?e.outputColorSpace:Hi,map:!!S.map,opaque:S.transparent===!1&&S.blending===mp,alphaTest:S.alphaTest>0,mapUv:!!S.map&&"uv",vertexColors:S.vertexColors,numDirLights:k.directional.length,premultipliedAlpha:S.premultipliedAlpha,doubleSided:S.side===ss,flipSided:S.side===aC,index0AttributeName:S.index0AttributeName,extensionDerivatives:((H=S.extensions)==null?void 0:H.derivatives)===!0,extensionFragDepth:((w=S.extensions)==null?void 0:w.fragDepth)===!0,extensionDrawBuffers:((F=S.extensions)==null?void 0:F.drawBuffers)===!0,extensionShaderTextureLOD:((V=S.extensions)==null?void 0:V.shaderTextureLOD)===!0,rendererExtensionFragDepth:!0,rendererExtensionDrawBuffers:!0,rendererExtensionShaderTextureLod:!0,customProgramCacheKey:S.customProgramCacheKey()}}function p(S){let k=[];if(k.push(S.customVertexShaderID),k.push(S.customFragmentShaderID),S.defines!==void 0)for(let T in S.defines)k.push(T),k.push(S.defines[T]);return h(k,S),g(k,S),k.push(e.outputColorSpace),k.push(S.customProgramCacheKey),k.join()}function h(S,k){S.push(k.precision),S.push(k.outputColorSpace),S.push(k.mapUv),S.push(k.numDirLights)}function g(S,k){i.disableAll(),i.enable(0),k.instancing&&i.enable(2),k.instancingColor&&i.enable(3),k.instancingPickingColor&&i.enable(4),k.vertexPickingColor&&i.enable(5),k.supportsVertexTextures&&i.enable(1),k.alphaTest&&i.enable(10),k.vertexColors&&i.enable(11),S.push(i.mask),i.disableAll(),k.premultipliedAlpha&&i.enable(8),k.doubleSided&&i.enable(11),k.flipSided&&i.enable(12),k.opaque&&i.enable(17),S.push(i.mask)}function m(S,k){let T;for(let I=0,P=a.length;I<P;I++){let A=a[I];if(A.cacheKey===k){T=A,++T.usedTimes;break}}return T===void 0&&(T=new WC(e,k,S,o),a.push(T)),T}function b(S){if(--S.usedTimes===0){let k=a.indexOf(S);a[k]=a[a.length-1],a.pop(),S.destroy()}}function x(S){n.remove(S)}function E(){n.dispose()}this.getParameters=c,this.getProgramCacheKey=p,this.getUniforms=S=>S.uniforms,this.acquireProgram=m,this.releaseProgram=b,this.releaseShaderCache=x,this.programs=a,this.dispose=E}};var YC=class{constructor(){let e=new WeakMap;function t(a){let s=e.get(a);return s===void 0&&(s={},e.set(a,s)),s}function o(a){e.delete(a)}function i(a,s,l){e.get(a)[s]=l}function n(){e=new WeakMap}this.get=t,this.remove=o,this.update=i,this.dispose=n}};var XC=class{constructor(){let e=[],t=0,o=[],i=[];function n(){t=0,o.length=0,i.length=0}function a(h,g,m,b,x,E){let S=e[t];return S===void 0?(S={id:h.id,object:h,geometry:g,material:m,groupOrder:b,renderOrder:h.renderOrder,z:x,group:E},e[t]=S):(S.id=h.id,S.object=h,S.geometry=g,S.material=m,S.groupOrder=b,S.renderOrder=h.renderOrder,S.z=x,S.group=E),t++,S}function s(h,g,m,b,x,E){let S=a(h,g,m,b,x,E);m.transparent===!0?i.push(S):o.push(S)}function l(h,g,m,b,x,E){let S=a(h,g,m,b,x,E);m.transparent===!0?i.unshift(S):o.unshift(S)}function c(h,g){o.length>1&&o.sort(h||zpe),i.length>1&&i.sort(g||qpe)}function p(){for(let h=t,g=e.length;h<g;h++){let m=e[h];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}this.opaque=o,this.transparent=i,this.init=n,this.push=s,this.unshift=l,this.finish=p,this.sort=c}},JC=class{constructor(){let e=new WeakMap;function t(i,n){let a=e.get(i),s;return a===void 0?(s=new XC,e.set(i,[s])):n>=a.length?(s=new XC,a.push(s)):s=a[n],s}function o(){e=new WeakMap}this.get=t,this.dispose=o}};function zpe(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function qpe(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}var ZC=class{constructor(e){function t(){let oe=!1,te=new qo,Fe=null,me=new qo(0,0,0,0);return{setMask:function(Qe){Fe!==Qe&&!oe&&(e.colorMask(Qe,Qe,Qe,Qe),Fe=Qe)},setLocked:function(Qe){oe=Qe},setClear:function(Qe,Ne,lr,nt,Di){Di===!0&&(Qe*=nt,Ne*=nt,lr*=nt),te.set(Qe,Ne,lr,nt),me.equals(te)===!1&&(e.clearColor(Qe,Ne,lr,nt),me.copy(te))},reset:function(){oe=!1,Fe=null,me.set(-1,0,0,0)}}}function o(){let oe=!1,te=null,Fe=null,me=null;return{setTest:function(Qe){Qe?Y(e.DEPTH_TEST):j(e.DEPTH_TEST)},setMask:function(Qe){te!==Qe&&!oe&&(e.depthMask(Qe),te=Qe)},setFunc:function(Qe){if(Fe!==Qe){switch(Qe){case t9:e.depthFunc(e.NEVER);break;case r9:e.depthFunc(e.ALWAYS);break;case o9:e.depthFunc(e.LESS);break;case dv:e.depthFunc(e.LEQUAL);break;case i9:e.depthFunc(e.EQUAL);break;case n9:e.depthFunc(e.GEQUAL);break;case a9:e.depthFunc(e.GREATER);break;case s9:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}Fe=Qe}},setLocked:function(Qe){oe=Qe},setClear:function(Qe){me!==Qe&&(e.clearDepth(Qe),me=Qe)},reset:function(){oe=!1,te=null,Fe=null,me=null}}}function i(){let oe=!1,te=null,Fe=null,me=null,Qe=null,Ne=null,lr=null,nt=null,Di=null;return{setTest:function(zr){oe||(zr?Y(e.STENCIL_TEST):j(e.STENCIL_TEST))},setMask:function(zr){te!==zr&&!oe&&(e.stencilMask(zr),te=zr)},setFunc:function(zr,xo,it){(Fe!==zr||me!==xo||Qe!==it)&&(e.stencilFunc(zr,xo,it),Fe=zr,me=xo,Qe=it)},setOp:function(zr,xo,it){(Ne!==zr||lr!==xo||nt!==it)&&(e.stencilOp(zr,xo,it),Ne=zr,lr=xo,nt=it)},setLocked:function(zr){oe=zr},setClear:function(zr){Di!==zr&&(e.clearStencil(zr),Di=zr)},reset:function(){oe=!1,te=null,Fe=null,me=null,Qe=null,Ne=null,lr=null,nt=null,Di=null}}}let n=t(),a=o(),s=i(),l=new WeakMap,c=new WeakMap,p={},h={},g=new WeakMap,m=[],b=null,x=!1,E=null,S=null,k=null,T=null,I=null,P=null,A=null,D=!1,G=null,N=null,U=null,K=null,H=null,w=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),F=!1,V=0,B=e.getParameter(e.VERSION);if(B.indexOf("WebGL")!==-1){let oe=/^WebGL (\d)/.exec(B);ht(oe,"webgl version match",e),V=parseFloat(oe[1]),F=V>=1}else if(B.indexOf("OpenGL ES")!==-1){let oe=/^OpenGL ES (\d)/.exec(B);ht(oe,"opengl es version match",e),V=parseFloat(oe[1]),F=V>=2}let L=null,q={},le=e.getParameter(e.SCISSOR_BOX),$=e.getParameter(e.VIEWPORT),ne=new qo().fromArray(le),ue=new qo().fromArray($);function de(oe,te,Fe,me){let Qe=new Uint8Array(4),Ne=e.createTexture();e.bindTexture(oe,Ne),e.texParameteri(oe,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(oe,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let lr=0;lr<Fe;lr++)oe===e.TEXTURE_3D||oe===e.TEXTURE_2D_ARRAY?(ht(me,"dimensions"),e.texImage3D(te,0,e.RGBA,1,1,me,0,e.RGBA,e.UNSIGNED_BYTE,Qe)):e.texImage2D(te+lr,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,Qe);return Ne}let pe={[e.TEXTURE_2D]:de(e.TEXTURE_2D,e.TEXTURE_2D,1),[e.TEXTURE_CUBE_MAP]:de(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),[e.TEXTURE_2D_ARRAY]:de(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),[e.TEXTURE_3D]:de(e.TEXTURE_3D,e.TEXTURE_3D,1,1)};n.setClear(0,0,0,1),a.setClear(1),s.setClear(0),Y(e.DEPTH_TEST),a.setFunc(dv),Q(!1),J(CR),Y(e.CULL_FACE),Le(sC);function Y(oe){p[oe]!==!0&&(e.enable(oe),p[oe]=!0)}function j(oe){p[oe]!==!1&&(e.disable(oe),p[oe]=!1)}function X(oe,te){return h[oe]!==te?(e.bindFramebuffer(oe,te),h[oe]=te,oe===e.DRAW_FRAMEBUFFER&&(h[e.FRAMEBUFFER]=te),oe===e.FRAMEBUFFER&&(h[e.DRAW_FRAMEBUFFER]=te),!0):!1}function xe(oe,te){let Fe=m,me=!1;oe?(ht(te,"framebuffer",e),Fe=g.get(te),Fe===void 0&&(Fe=[],g.set(te,Fe)),Fe[0]!==e.COLOR_ATTACHMENT0&&(Fe[0]=e.COLOR_ATTACHMENT0,me=!0)):Fe[0]!==e.BACK&&(Fe[0]=e.BACK,me=!0),me&&e.drawBuffers(Fe)}function fe(oe){return b!==oe?(ht(oe,"program",e),e.useProgram(oe),b=oe,!0):!1}let Se={[zl]:e.FUNC_ADD,[H7]:e.FUNC_SUBTRACT,[K7]:e.FUNC_REVERSE_SUBTRACT,[W7]:e.MIN,[$7]:e.MAX},ke={[cC]:e.ZERO,[dC]:e.ONE,[j7]:e.SRC_COLOR,[pC]:e.SRC_ALPHA,[e9]:e.SRC_ALPHA_SATURATE,[Z7]:e.DST_COLOR,[X7]:e.DST_ALPHA,[Y7]:e.ONE_MINUS_SRC_COLOR,[uC]:e.ONE_MINUS_SRC_ALPHA,[Q7]:e.ONE_MINUS_DST_COLOR,[J7]:e.ONE_MINUS_DST_ALPHA};function Le(oe,te,Fe,me,Qe,Ne,lr,nt){if(oe===sC){x===!0&&(j(e.BLEND),x=!1);return}if(x===!1&&(Y(e.BLEND),x=!0),oe!==lC){if(oe!==E||nt!==D){if((S!==zl||I!==zl)&&(e.blendEquation(e.FUNC_ADD),S=zl,I=zl),nt)switch(oe){case mp:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case _R:e.blendFunc(e.ONE,e.ONE);break;case MR:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case AR:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",oe);break}else switch(oe){case mp:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case _R:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case MR:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case AR:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",oe);break}k=null,T=null,P=null,A=null,E=oe,D=nt}return}Qe=Qe||te,Ne=Ne||Fe,lr=lr||me,(te!==S||Qe!==I)&&(ht(te,"blendEquation"),ht(Qe,"blendEquationAlpha"),e.blendEquationSeparate(Se[te],Se[Qe]),S=te,I=Qe),(Fe!==k||me!==T||Ne!==P||lr!==A)&&(ht(Fe,"blendSrc"),ht(me,"blendDst"),ht(Ne,"blendSrcAlpha"),ht(lr,"blendDstAlpha"),e.blendFuncSeparate(ke[Fe],ke[me],ke[Ne],ke[lr]),k=Fe,T=me,P=Ne,A=lr),E=oe,D=!1}function $e(oe,te){oe.side===ss?j(e.CULL_FACE):Y(e.CULL_FACE);let Fe=oe.side===aC;te&&(Fe=!Fe),Q(Fe),oe.blending===mp&&oe.transparent===!1?Le(sC):Le(oe.blending,oe.blendEquation,oe.blendSrc,oe.blendDst,oe.blendEquationAlpha,oe.blendSrcAlpha,oe.blendDstAlpha,oe.premultipliedAlpha),a.setFunc(oe.depthFunc),a.setTest(oe.depthTest),a.setMask(oe.depthWrite),n.setMask(oe.colorWrite);let me=oe.stencilWrite;s.setTest(me),me&&(s.setMask(oe.stencilWriteMask),s.setFunc(oe.stencilFunc,oe.stencilRef,oe.stencilFuncMask),s.setOp(oe.stencilFail,oe.stencilZFail,oe.stencilZPass)),Ie(oe.polygonOffset,oe.polygonOffsetFactor,oe.polygonOffsetUnits),oe.alphaToCoverage===!0?Y(e.SAMPLE_ALPHA_TO_COVERAGE):j(e.SAMPLE_ALPHA_TO_COVERAGE)}function Q(oe){G!==oe&&(oe?e.frontFace(e.CW):e.frontFace(e.CCW),G=oe)}function J(oe){oe!==U7?(Y(e.CULL_FACE),oe!==N&&(oe===CR?e.cullFace(e.BACK):oe===z7?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):j(e.CULL_FACE),N=oe}function ve(oe){oe!==U&&(F&&e.lineWidth(oe),U=oe)}function Ie(oe,te,Fe){oe?(Y(e.POLYGON_OFFSET_FILL),(K!==te||H!==Fe)&&(ht(te,"factor"),ht(Fe,"units"),e.polygonOffset(te,Fe),K=te,H=Fe)):j(e.POLYGON_OFFSET_FILL)}function He(oe){oe?Y(e.SCISSOR_TEST):j(e.SCISSOR_TEST)}function ge(oe){oe===void 0&&(oe=e.TEXTURE0+w-1),L!==oe&&(e.activeTexture(oe),L=oe)}function Ze(oe,te,Fe){Fe===void 0&&(L===null?Fe=e.TEXTURE0+w-1:Fe=L);let me=q[Fe];me===void 0&&(me={type:void 0,texture:void 0},q[Fe]=me),(me.type!==oe||me.texture!==te)&&(L!==Fe&&(e.activeTexture(Fe),L=Fe),e.bindTexture(oe,te||pe[oe]),me.type=oe,me.texture=te)}function rt(){if(L===null)throw new Error("THREE.WebGLState: Trying to unbind a texture that was never bound");let oe=q[L];oe!==void 0&&oe.type!==void 0&&(e.bindTexture(oe.type,null),oe.type=void 0,oe.texture=void 0)}this.compressedTexImage2D=function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(te){console.error("THREE.WebGLState:",te)}},this.compressedTexImage3D=function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(te){console.error("THREE.WebGLState:",te)}},this.texSubImage2D=function(){try{e.texSubImage2D.apply(e,arguments)}catch(te){console.error("THREE.WebGLState:",te)}},this.texSubImage3D=function(){try{e.texSubImage3D.apply(e,arguments)}catch(te){console.error("THREE.WebGLState:",te)}},this.compressedTexSubImage2D=function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(te){console.error("THREE.WebGLState:",te)}},this.compressedTexSubImage3D=function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(te){console.error("THREE.WebGLState:",te)}},this.texStorage2D=function(){try{e.texStorage2D.apply(e,arguments)}catch(te){console.error("THREE.WebGLState:",te)}},this.texStorage3D=function(){try{e.texStorage3D.apply(e,arguments)}catch(te){console.error("THREE.WebGLState:",te)}},this.texImage2D=function(){try{e.texImage2D.apply(e,arguments)}catch(te){console.error("THREE.WebGLState:",te)}},this.texImage3D=function(){try{e.texImage3D.apply(e,arguments)}catch(te){console.error("THREE.WebGLState:",te)}};function Ee(oe){ne.equals(oe)===!1&&(e.scissor(oe.x,oe.y,oe.z,oe.w),ne.copy(oe))}function At(oe){ue.equals(oe)===!1&&(e.viewport(oe.x,oe.y,oe.z,oe.w),ue.copy(oe))}function Tt(oe,te){let Fe=c.get(te);Fe===void 0&&(Fe=new WeakMap,c.set(te,Fe));let me=Fe.get(oe);me===void 0&&(me=e.getUniformBlockIndex(te,oe.name),Fe.set(oe,me))}function xt(oe,te){let me=c.get(te).get(oe);l.get(te)!==me&&(e.uniformBlockBinding(te,me,oe.__bindingPointIndex),l.set(te,me))}function sr(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),p={},L=null,q={},h={},g=new WeakMap,m=[],b=null,x=!1,E=null,S=null,k=null,T=null,I=null,P=null,A=null,D=!1,G=null,N=null,U=null,K=null,H=null,ne.set(0,0,e.canvas.width,e.canvas.height),ue.set(0,0,e.canvas.width,e.canvas.height),n.reset(),a.reset(),s.reset()}this.buffers={color:n,depth:a,stencil:s},this.enable=Y,this.disable=j,this.bindFramebuffer=X,this.drawBuffers=xe,this.useProgram=fe,this.setBlending=Le,this.setMaterial=$e,this.setFlipSided=Q,this.setCullFace=J,this.setLineWidth=ve,this.setPolygonOffset=Ie,this.setScissorTest=He,this.activeTexture=ge,this.bindTexture=Ze,this.unbindTexture=rt,this.updateUBOMapping=Tt,this.uniformBlockBinding=xt,this.scissor=Ee,this.viewport=At,this.reset=sr}};var mh=class extends na{constructor(t,o,i,n,a,s,l,c,p,h){if(h=h!==void 0?h:Xc,h!==Xc&&h!==fp)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&h===Xc&&(i=Ns),i===void 0&&h===fp&&(i=Hl);let g=new Wl(t,o);super(g,n,a,s,l,c,h,i,p);this.isDepthTexture=!0;this.isDepthTexture=!0,this.image=g,this.magFilter=l!==void 0?l:ql,this.minFilter=c!==void 0?c:ql,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}};var QC=class{constructor(e,t,o,i,n,a,s){let l=n.maxTextures,c=n.maxTextureSize,p=n.maxSamples,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,g=typeof navigator=="undefined"?!1:/OculusBrowser/g.test(navigator.userAgent),m,b=new WeakMap,x=!1;try{x=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(Q){}function E(Q,J){return x?new OffscreenCanvas(Q,J):fv("canvas")}function S(Q,J){let ve=1;if((Q.width>J||Q.height>J)&&(ve=J/Math.max(Q.width,Q.height)),ve<1)if(typeof HTMLImageElement!="undefined"&&Q instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&Q instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&Q instanceof ImageBitmap){let Ie=Math.floor(ve*Q.width),He=Math.floor(ve*Q.height);m===void 0&&(m=E(Ie,He)),m.width=Ie,m.height=He;let ge=m.getContext("2d");if(ht(ge,"2d context"),!(ge instanceof OffscreenCanvasRenderingContext2D||ge instanceof CanvasRenderingContext2D))throw new Error("Expected a 2d rendering context");return ge.drawImage(Q,0,0,Ie,He),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Q.width+"x"+Q.height+") to ("+Ie+"x"+He+")."),m}else return"data"in Q&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Q.width+"x"+Q.height+")."),Q;return Q}function k(Q){return IR(Q.width)&&IR(Q.height)}function T(Q){return Q.generateMipmaps&&Q.minFilter!==ql&&Q.minFilter!==Pn}function I(Q){e.generateMipmap(Q)}function P(Q,J,ve,Ie,He=!1){if(Q!==null){if(e[Q]!==void 0)return e[Q];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Q+"'")}let ge=J;return J===e.RED&&(ve===e.FLOAT&&(ge=e.R32F),ve===e.HALF_FLOAT&&(ge=e.R16F),ve===e.UNSIGNED_BYTE&&(ge=e.R8)),J===e.RED_INTEGER&&(ve===e.UNSIGNED_BYTE&&(ge=e.R8UI),ve===e.UNSIGNED_SHORT&&(ge=e.R16UI),ve===e.UNSIGNED_INT&&(ge=e.R32UI),ve===e.BYTE&&(ge=e.R8I),ve===e.SHORT&&(ge=e.R16I),ve===e.INT&&(ge=e.R32I)),J===e.RG&&(ve===e.FLOAT&&(ge=e.RG32F),ve===e.HALF_FLOAT&&(ge=e.RG16F),ve===e.UNSIGNED_BYTE&&(ge=e.RG8)),J===e.RGBA&&(ve===e.FLOAT&&(ge=e.RGBA32F),ve===e.HALF_FLOAT&&(ge=e.RGBA16F),ve===e.UNSIGNED_BYTE&&(ge=Ie===to&&He===!1?e.SRGB8_ALPHA8:e.RGBA8),ve===e.UNSIGNED_SHORT_4_4_4_4&&(ge=e.RGBA4),ve===e.UNSIGNED_SHORT_5_5_5_1&&(ge=e.RGB5_A1)),(ge===e.R16F||ge===e.R32F||ge===e.RG16F||ge===e.RG32F||ge===e.RGBA16F||ge===e.RGBA32F)&&t.get("EXT_color_buffer_float"),ge}function A(Q,J){return T(Q)===!0?Math.log2(Math.max(J.width,J.height))+1:Q.mipmaps!==void 0&&Q.mipmaps.length>0?Q.mipmaps.length:1}function D(Q){let J=Q.target;J.removeEventListener("dispose",D),N(J)}function G(Q){let J=Q.target;J.removeEventListener("dispose",G),K(J)}function N(Q){let J=i.get(Q);if(J.__webglInit===void 0)return;let ve=Q.source,Ie=b.get(ve);if(Ie){let He=Ie[J.__cacheKey];He.usedTimes--,He.usedTimes===0&&U(Q),Object.keys(Ie).length===0&&b.delete(ve)}i.remove(Q)}function U(Q){let J=i.get(Q);e.deleteTexture(J.__webglTexture);let ve=Q.source,Ie=b.get(ve);ht(Ie,"webglTextures"),delete Ie[J.__cacheKey],s.memory.textures--}function K(Q){let J=Q.texture,ve=i.get(Q),Ie=i.get(J);Ie.__webglTexture!==void 0&&(e.deleteTexture(Ie.__webglTexture),s.memory.textures--),Q.depthTexture&&Q.depthTexture.dispose();let He=ve.__webglFramebuffer;if(Array.isArray(He))for(let ge=0;ge<He.length;ge++)e.deleteFramebuffer(He[ge]);else He&&e.deleteFramebuffer(He);if(ve.__webglDepthbuffer&&e.deleteRenderbuffer(ve.__webglDepthbuffer),ve.__webglMultisampledFramebuffer&&e.deleteFramebuffer(ve.__webglMultisampledFramebuffer),ve.__webglColorRenderbuffer)for(let ge=0;ge<ve.__webglColorRenderbuffer.length;ge++)ve.__webglColorRenderbuffer[ge]&&e.deleteRenderbuffer(ve.__webglColorRenderbuffer[ge]);ve.__webglDepthRenderbuffer&&e.deleteRenderbuffer(ve.__webglDepthRenderbuffer),i.remove(J),i.remove(Q)}let H=0;function w(){H=0}function F(){let Q=H;return Q>=l&&console.warn("THREE.WebGLTextures: Trying to use "+Q+" texture units while this GPU supports only "+l),H+=1,Q}function V(Q){let J=[];return J.push(Q.wrapS),J.push(Q.wrapT),J.push(Q.magFilter),J.push(Q.minFilter),J.push(Q.anisotropy),J.push(Q.internalFormat),J.push(Q.format),J.push(Q.type),J.push(Q.generateMipmaps),J.push(Q.premultiplyAlpha),J.push(Q.flipY),J.push(Q.unpackAlignment),J.push(Q.colorSpace),J.join()}function B(Q,J){let ve=i.get(Q);if(Q.isRenderTargetTexture===!1&&Q.version>0&&ve.__version!==Q.version)if(Q.image.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ue(ve,Q,J);return}o.bindTexture(e.TEXTURE_2D,ve.__webglTexture,e.TEXTURE0+J)}let L={[pv]:e.REPEAT,[ch]:e.CLAMP_TO_EDGE,[uv]:e.MIRRORED_REPEAT},q={[ql]:e.NEAREST,[l9]:e.NEAREST_MIPMAP_NEAREST,[PR]:e.NEAREST_MIPMAP_LINEAR,[Pn]:e.LINEAR,[c9]:e.LINEAR_MIPMAP_NEAREST,[hv]:e.LINEAR_MIPMAP_LINEAR},le={[v9]:e.NEVER,[C9]:e.ALWAYS,[w9]:e.LESS,[T9]:e.LEQUAL,[S9]:e.EQUAL,[I9]:e.GEQUAL,[k9]:e.GREATER,[E9]:e.NOTEQUAL};function $(Q,J){if(e.texParameteri(Q,e.TEXTURE_WRAP_S,L[J.wrapS]),e.texParameteri(Q,e.TEXTURE_WRAP_T,L[J.wrapT]),e.texParameteri(Q,e.TEXTURE_MAG_FILTER,q[J.magFilter]),e.texParameteri(Q,e.TEXTURE_MIN_FILTER,q[J.minFilter]),J.compareFunction&&(e.texParameteri(Q,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(Q,e.TEXTURE_COMPARE_FUNC,le[J.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){let ve=t.get("EXT_texture_filter_anisotropic");if(J.magFilter===ql||J.minFilter!==PR&&J.minFilter!==hv||J.type===ls&&t.has("OES_texture_float_linear")===!1)return;(J.anisotropy>1||i.get(J).__currentAnisotropy)&&(e.texParameterf(Q,ve.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(J.anisotropy,n.getMaxAnisotropy())),i.get(J).__currentAnisotropy=J.anisotropy)}}function ne(Q,J){let ve=!1;Q.__webglInit===void 0&&(Q.__webglInit=!0,J.addEventListener("dispose",D));let Ie=J.source,He=b.get(Ie);He===void 0&&(He={},b.set(Ie,He));let ge=V(J);if(ge!==Q.__cacheKey){He[ge]===void 0&&(He[ge]={texture:e.createTexture()||void 0,usedTimes:0},s.memory.textures++,ve=!0),He[ge].usedTimes++;let Ze=Q.__cacheKey?He[Q.__cacheKey]:void 0;Ze!==void 0&&(He[Q.__cacheKey].usedTimes--,Ze.usedTimes===0&&U(J)),Q.__cacheKey=ge,Q.__webglTexture=He[ge].texture}return ve}function ue(Q,J,ve){let Ie=e.TEXTURE_2D,He=ne(Q,J),ge=J.source;o.bindTexture(Ie,Q.__webglTexture,e.TEXTURE0+ve);let Ze=i.get(ge);if(ge.version!==Ze.__version||He===!0){o.activeTexture(e.TEXTURE0+ve),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,J.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,J.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE);let rt=S(J.image,c);rt=$e(J,rt);let Ee=k(rt),At=a.convert(J.format,J.colorSpace),Tt=a.convert(J.type),xt=P(J.internalFormat,At,Tt,J.colorSpace);$(Ie,J);let sr,oe=J.mipmaps,te=Ze.__version===void 0||He===!0,Fe=A(J,rt);if(J instanceof mh)xt=e.DEPTH_COMPONENT,J.type===ls?xt=e.DEPTH_COMPONENT32F:J.type===Ns?xt=e.DEPTH_COMPONENT24:J.type===Hl?xt=e.DEPTH24_STENCIL8:xt=e.DEPTH_COMPONENT16,J.format===Xc&&xt===e.DEPTH_COMPONENT&&J.type!==_f&&J.type!==Ns&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),J.type=Ns,Tt=a.convert(J.type)),J.format===fp&&xt===e.DEPTH_COMPONENT&&(xt=e.DEPTH_STENCIL,J.type!==Hl&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),J.type=Hl,Tt=a.convert(J.type))),te&&o.texStorage2D(e.TEXTURE_2D,1,xt,rt.width,rt.height);else if(oe.length>0&&Ee){te&&o.texStorage2D(e.TEXTURE_2D,Fe,xt,oe[0].width,oe[0].height);for(let me=0,Qe=oe.length;me<Qe;me++)sr=oe[me],o.texSubImage2D(e.TEXTURE_2D,me,0,0,At,Tt,sr);J.generateMipmaps=!1}else{if(te&&o.texStorage2D(e.TEXTURE_2D,Fe,xt,rt.width,rt.height),rt instanceof Wl)throw new Error("Texture does not have any image data to upload.");o.texSubImage2D(e.TEXTURE_2D,0,0,0,At,Tt,rt)}T(J)&&I(Ie),Ze.__version=ge.version,J.onUpdate&&J.onUpdate(J)}Q.__version=J.version}function de(Q,J,ve,Ie,He,ge){if(!Q||Array.isArray(Q))throw new Error("THREE.WebGLTextures: expected non-array framebuffer");let Ze=a.convert(ve.format,ve.colorSpace),rt=a.convert(ve.type),Ee=P(ve.internalFormat,Ze,rt,ve.colorSpace);if(!i.get(J).__hasExternalTextures){let Tt=Math.max(1,J.width>>ge),xt=Math.max(1,J.height>>ge);o.texImage2D(He,ge,Ee,Tt,xt,0,Ze,rt,null)}if(o.bindFramebuffer(e.FRAMEBUFFER,Q),Le(J))h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,Ie,He,i.get(ve).__webglTexture,0,ke(J));else if(He===e.TEXTURE_2D||He>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&He<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z){let Tt=i.get(ve).__webglTexture;ht(Tt,"webglTexture"),e.framebufferTexture2D(e.FRAMEBUFFER,Ie,He,Tt,ge)}o.bindFramebuffer(e.FRAMEBUFFER,null)}function pe(Q,J,ve){if(e.bindRenderbuffer(e.RENDERBUFFER,Q||null),J.depthBuffer&&!J.stencilBuffer){let Ie=e.DEPTH_COMPONENT16;if(ve||Le(J)){let He=J.depthTexture;He&&He.isDepthTexture&&(He.type===ls?Ie=e.DEPTH_COMPONENT32F:He.type===Ns&&(Ie=e.DEPTH_COMPONENT24));let ge=ke(J);Le(J)?h.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,ge,Ie,J.width,J.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,ge,Ie,J.width,J.height)}else e.renderbufferStorage(e.RENDERBUFFER,Ie,J.width,J.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,Q||null)}else if(J.depthBuffer&&J.stencilBuffer){let Ie=ke(J);ve&&Le(J)===!1?e.renderbufferStorageMultisample(e.RENDERBUFFER,Ie,e.DEPTH24_STENCIL8,J.width,J.height):Le(J)?h.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,Ie,e.DEPTH24_STENCIL8,J.width,J.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,J.width,J.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,Q||null)}else{let Ie=[J.texture];for(let He=0;He<Ie.length;He++){let ge=Ie[He],Ze=a.convert(ge.format,ge.colorSpace),rt=a.convert(ge.type),Ee=P(ge.internalFormat,Ze,rt,ge.colorSpace),At=ke(J);ve&&Le(J)===!1?e.renderbufferStorageMultisample(e.RENDERBUFFER,At,Ee,J.width,J.height):Le(J)?h.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,At,Ee,J.width,J.height):e.renderbufferStorage(e.RENDERBUFFER,Ee,J.width,J.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function Y(Q,J){if(o.bindFramebuffer(e.FRAMEBUFFER,Q),!(J.depthTexture&&J.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(J.depthTexture).__webglTexture||J.depthTexture.image.width!==J.width||J.depthTexture.image.height!==J.height)&&(J.depthTexture.image.width=J.width,J.depthTexture.image.height=J.height,J.depthTexture.needsUpdate=!0),B(J.depthTexture,0);let ve=i.get(J.depthTexture).__webglTexture;ht(ve,"webglDepthTexture");let Ie=ke(J);if(J.depthTexture.format===Xc)Le(J)?h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,ve,0,Ie):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,ve,0);else if(J.depthTexture.format===fp)Le(J)?h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,ve,0,Ie):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,ve,0);else throw new Error("Unknown depthTexture format")}function j(Q){let J=i.get(Q),ve=vF(J);Q.depthTexture&&!J.__autoAllocateDepthBuffer?Y(ve,Q):(o.bindFramebuffer(e.FRAMEBUFFER,ve),J.__webglDepthbuffer=e.createRenderbuffer()||void 0,pe(J.__webglDepthbuffer,Q,!1)),o.bindFramebuffer(e.FRAMEBUFFER,null)}function X(Q,J,ve){let Ie=i.get(Q),He=vF(Ie);J!==void 0&&de(He,Q,Q.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),ve!==void 0&&j(Q)}function xe(Q){let J=Q.texture,ve=i.get(Q),Ie=i.get(J);if(Q.addEventListener("dispose",G),Ie.__webglTexture===void 0&&(Ie.__webglTexture=e.createTexture()||void 0),Ie.__version=J.version,s.memory.textures++,J.mipmaps&&J.mipmaps.length>0){let ge=[];ve.__webglFramebuffer=ge;for(let Ze=0;Ze<J.mipmaps.length;Ze++){let rt=e.createFramebuffer();ht(rt,"framebuffer",e),ge[Ze]=rt}}else{let ge=e.createFramebuffer();ve.__webglFramebuffer=ge||void 0}if(Q.samples>0&&Le(Q)===!1){let ge=[J],Ze=e.createFramebuffer();ht(Ze,"framebuffer",e),ve.__webglMultisampledFramebuffer=Ze,ve.__webglColorRenderbuffer=[],o.bindFramebuffer(e.FRAMEBUFFER,ve.__webglMultisampledFramebuffer);for(let rt=0;rt<ge.length;rt++){let Ee=ge[rt],At=e.createRenderbuffer();ht(At,"renderbuffer",e),ve.__webglColorRenderbuffer[rt]=At,e.bindRenderbuffer(e.RENDERBUFFER,ve.__webglColorRenderbuffer[rt]);let Tt=a.convert(Ee.format,Ee.colorSpace),xt=a.convert(Ee.type),sr=P(Ee.internalFormat,Tt,xt,Ee.colorSpace,!1),oe=ke(Q);e.renderbufferStorageMultisample(e.RENDERBUFFER,oe,sr,Q.width,Q.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+rt,e.RENDERBUFFER,ve.__webglColorRenderbuffer[rt])}if(e.bindRenderbuffer(e.RENDERBUFFER,null),Q.depthBuffer){let rt=e.createRenderbuffer();ht(rt,"renderbuffer",e),ve.__webglDepthRenderbuffer=rt,pe(ve.__webglDepthRenderbuffer,Q,!0)}o.bindFramebuffer(e.FRAMEBUFFER,null)}let He=e.TEXTURE_2D;if(o.bindTexture(He,Ie.__webglTexture),$(He,J),J.mipmaps&&J.mipmaps.length>0){let ge=Hpe(ve);for(let Ze=0;Ze<J.mipmaps.length;Ze++)de(ge[Ze],Q,J,e.COLOR_ATTACHMENT0,He,Ze)}else de(ve.__webglFramebuffer,Q,J,e.COLOR_ATTACHMENT0,He,0);T(J)&&I(He),o.unbindTexture(),Q.depthBuffer&&j(Q)}function fe(Q){let J=[Q.texture];for(let ve=0,Ie=J.length;ve<Ie;ve++){let He=J[ve];if(T(He)){let ge=e.TEXTURE_2D,Ze=i.get(He).__webglTexture;o.bindTexture(ge,Ze),I(ge),o.unbindTexture()}}}function Se(Q){if(Q.samples>0&&Le(Q)===!1){let J=[Q.texture],ve=Q.width,Ie=Q.height,He=e.COLOR_BUFFER_BIT,ge=[],Ze=Q.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,rt=i.get(Q);ht(rt.__webglMultisampledFramebuffer,"__webglMultisampledFramebuffer"),o.bindFramebuffer(e.READ_FRAMEBUFFER,rt.__webglMultisampledFramebuffer),o.bindFramebuffer(e.DRAW_FRAMEBUFFER,vF(rt));for(let Ee=0;Ee<J.length;Ee++){ge.push(e.COLOR_ATTACHMENT0+Ee),Q.depthBuffer&&ge.push(Ze);let At=rt.__ignoreDepthValues!==void 0?rt.__ignoreDepthValues:!1;At===!1&&(Q.depthBuffer&&(He|=e.DEPTH_BUFFER_BIT),Q.stencilBuffer&&(He|=e.STENCIL_BUFFER_BIT)),At===!0&&(e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[Ze]),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[Ze])),e.blitFramebuffer(0,0,ve,Ie,0,0,ve,Ie,He,e.NEAREST),g&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,ge)}o.bindFramebuffer(e.READ_FRAMEBUFFER,null),o.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),o.bindFramebuffer(e.DRAW_FRAMEBUFFER,rt.__webglMultisampledFramebuffer)}}function ke(Q){return Math.min(p,Q.samples)}function Le(Q){let J=i.get(Q);return Q.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&J.__useRenderToTexture!==!1}function $e(Q,J){let ve=Q.colorSpace,Ie=Q.format,He=Q.type;return Q.format===kC||ve!==Hi&&ve!==Af&&(ve===to?(Ie!==Kl||He!==mi)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ve)),J}this.allocateTextureUnit=F,this.resetTextureUnits=w,this.setTexture2D=B,this.rebindTextures=X,this.setupRenderTarget=xe,this.updateRenderTargetMipmap=fe,this.updateMultisampleRenderTarget=Se,this.useMultisampledRTT=Le}};function vF(r){let e=r.__webglFramebuffer;if(!e||Array.isArray(e))throw new Error("THREE.WebGLTextures: expected non-array framebuffer");return e}function Hpe(r){let e=r.__webglFramebuffer;if(!e||!Array.isArray(e))throw new Error("THREE.WebGLTextures: expected array framebuffer");return e}var e_=class{constructor(e,t,o){let i={},n={},a=[],s=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function l(k,T){let I=T.program;ht(I,"webglProgram"),o.uniformBlockBinding(k,I)}function c(k,T){let I=i[k.id];I===void 0&&(b(k),I=p(k),i[k.id]=I,k.addEventListener("dispose",E));let P=T.program;ht(P,"webglProgram"),o.updateUBOMapping(k,P);let A=t.render.frame;n[k.id]!==A&&(g(k),n[k.id]=A)}function p(k){let T=h();k.__bindingPointIndex=T;let I=e.createBuffer(),P=k.__size,A=k.usage;return e.bindBuffer(e.UNIFORM_BUFFER,I),e.bufferData(e.UNIFORM_BUFFER,P,A),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,T,I),I}function h(){for(let k=0;k<s;k++)if(a.indexOf(k)===-1)return a.push(k),k;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function g(k){let T=i[k.id],I=k.uniforms,P=k.__cache;if(T===void 0)throw new Error("THREE.WebGLUniformsGroups: buffer is undefined");e.bindBuffer(e.UNIFORM_BUFFER,T);for(let A=0,D=I.length;A<D;A++){let G=I[A];if(m(G,A,P)===!0){let N=G.__offset,U=Array.isArray(G.value)?G.value:[G.value],K=0;for(let H=0;H<U.length;H++){let w=U[H],F=x(w);typeof w=="number"?(G.__data[0]=w,e.bufferSubData(e.UNIFORM_BUFFER,N+K,G.__data)):w instanceof Gr?(G.__data[0]=w.elements[0],G.__data[1]=w.elements[1],G.__data[2]=w.elements[2],G.__data[3]=w.elements[0],G.__data[4]=w.elements[3],G.__data[5]=w.elements[4],G.__data[6]=w.elements[5],G.__data[7]=w.elements[0],G.__data[8]=w.elements[6],G.__data[9]=w.elements[7],G.__data[10]=w.elements[8],G.__data[11]=w.elements[0]):(w.toArray(G.__data,K),K+=F.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,N,G.__data)}}e.bindBuffer(e.UNIFORM_BUFFER,null)}function m(k,T,I){let P=k.value;if(I[T]===void 0){if(typeof P=="number")I[T]=P;else{let A=Array.isArray(P)?P:[P],D=[];for(let G=0;G<A.length;G++){let N=A[G];D.push(typeof N=="number"?N:N.clone())}I[T]=D}return!0}else if(typeof P=="number"){if(I[T]!==P)return I[T]=P,!0}else{let A=I[T],D=Array.isArray(A)?A:[A],G=Array.isArray(P)?P:[P];for(let N=0;N<D.length;N++){let U=D[N];if(U.equals(G[N])===!1)return U.copy(G[N]),!0}}return!1}function b(k){let T=k.uniforms,I=0,P=16,A=0;for(let D=0,G=T.length;D<G;D++){let N=T[D],U={boundary:0,storage:0},K=Array.isArray(N.value)?N.value:[N.value];for(let H=0,w=K.length;H<w;H++){let F=K[H],V=x(F);U.boundary+=V.boundary,U.storage+=V.storage}if(N.__data=new Float32Array(U.storage/Float32Array.BYTES_PER_ELEMENT),N.__offset=I,D>0){A=I%P;let H=P-A;A!==0&&H-U.boundary<0&&(I+=P-A,N.__offset=I)}I+=U.storage}A=I%P,A>0&&(I+=P-A),k.__size=I,k.__cache={}}function x(k){let T={boundary:0,storage:0};return typeof k=="number"?(T.boundary=4,T.storage=4):k instanceof bt?(T.boundary=8,T.storage=8):k instanceof we||k instanceof pt?(T.boundary=16,T.storage=12):k instanceof qo?(T.boundary=16,T.storage=16):k instanceof Gr?(T.boundary=48,T.storage=48):k instanceof It?(T.boundary=64,T.storage=64):k instanceof na?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",k),T}function E(k){let T=k.target;T.removeEventListener("dispose",E);let I=a.indexOf(T.__bindingPointIndex);a.splice(I,1);let P=i[T.id];P!==void 0&&e.deleteBuffer(P),delete i[T.id],delete n[T.id]}function S(){for(let k in i){let T=i[k];T!==void 0&&e.deleteBuffer(T)}a=[],i={},n={}}this.bind=l,this.update=c,this.dispose=S}};var wv=class{constructor(e,t){function o(i,n=Af){let a;if(i===mi)return e.UNSIGNED_BYTE;if(i===gC)return e.UNSIGNED_SHORT_4_4_4_4;if(i===mC)return e.UNSIGNED_SHORT_5_5_5_1;if(i===p9)return e.BYTE;if(i===u9)return e.SHORT;if(i===_f)return e.UNSIGNED_SHORT;if(i===hC)return e.INT;if(i===Ns)return e.UNSIGNED_INT;if(i===ls)return e.FLOAT;if(i===Mf)return e.HALF_FLOAT;if(i===h9)return e.ALPHA;if(i===Kl)return e.RGBA;if(i===g9)return e.LUMINANCE;if(i===m9)return e.LUMINANCE_ALPHA;if(i===Xc)return e.DEPTH_COMPONENT;if(i===fp)return e.DEPTH_STENCIL;if(i===kC)return a=t.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(i===f9)return e.RED;if(i===fC)return e.RED_INTEGER;if(i===b9)return e.RG;if(i===bC)return e.RG_INTEGER;if(i===yC)return e.RGBA_INTEGER;if(i===xC||i===vC||i===wC||i===SC)if(n===to)if(a=t.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(i===xC)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===vC)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===wC)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===SC)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=t.get("WEBGL_compressed_texture_s3tc"),a!==null){if(i===xC)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===vC)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===wC)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===SC)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===DR||i===OR||i===RR||i===FR)if(a=t.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(i===DR)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===OR)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===RR)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===FR)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===y9)return a=t.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(i===GR||i===NR)if(a=t.get("WEBGL_compressed_texture_etc"),a!==null){if(i===GR)return n===to?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(i===NR)return n===to?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===VR||i===BR||i===UR||i===zR||i===qR||i===HR||i===KR||i===WR||i===$R||i===jR||i===YR||i===XR||i===JR||i===ZR)if(a=t.get("WEBGL_compressed_texture_astc"),a!==null){if(i===VR)return n===to?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===BR)return n===to?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===UR)return n===to?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===zR)return n===to?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===qR)return n===to?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===HR)return n===to?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===KR)return n===to?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===WR)return n===to?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===$R)return n===to?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===jR)return n===to?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===YR)return n===to?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===XR)return n===to?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===JR)return n===to?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===ZR)return n===to?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===QR)if(a=t.get("EXT_texture_compression_bptc"),a!==null){if(i===QR)return n===to?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(i===eF||i===tF||i===rF||i===oF)if(a=t.get("EXT_texture_compression_rgtc"),a!==null){if(i===eF)return a.COMPRESSED_RED_RGTC1_EXT;if(i===tF)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===rF)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===oF)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Hl?e.UNSIGNED_INT_24_8:e[i]!==void 0?e[i]:null}this.convert=o}};var ed=class extends Io{constructor(){super();this.isScene=!0;this.isScene=!0,this.type="Scene",this.background=null,this.overrideMaterial=null}};var t_=class{constructor(e){let t=new WeakMap;function o(l,c){let p=l.array,h=l.usage,g=e.createBuffer();e.bindBuffer(c,g),e.bufferData(c,p,h),l.onUploadCallback();let m;if(p instanceof Float32Array)m=e.FLOAT;else if(p instanceof Uint16Array)m=e.UNSIGNED_SHORT;else if(p instanceof Int16Array)m=e.SHORT;else if(p instanceof Uint32Array)m=e.UNSIGNED_INT;else if(p instanceof Int32Array)m=e.INT;else if(p instanceof Int8Array)m=e.BYTE;else if(p instanceof Uint8Array)m=e.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:g,type:m,bytesPerElement:p.BYTES_PER_ELEMENT,version:l.version}}function i(l,c,p){let h=c.array,g=c.updateRange;e.bindBuffer(p,l),g.count===-1?e.bufferSubData(p,0,h):(e.bufferSubData(p,g.offset*h.BYTES_PER_ELEMENT,h,g.offset,g.count),g.count=-1),c.onUploadCallback()}function n(l){return t.get(l)}function a(l){let c=t.get(l);c&&(e.deleteBuffer(c.buffer),t.delete(l))}function s(l,c){let p=t.get(l);p===void 0?t.set(l,o(l,c)):p.version<l.version&&(i(p.buffer,l,c),p.version=l.version)}this.get=n,this.remove=a,this.update=s}};var r_=new pt(0),o_=class{constructor(e,t,o,i,n){let a=new pt(0),s=i===!0?0:1;function l(p,h){let g=!1,m=h.isScene===!0?h.background:null;m===null?c(a,s):m&&m.isColor&&(c(m,1),g=!0),(e.autoClear||g)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil)}function c(p,h){p.getRGB(r_,V9(e)),t.buffers.color.setClear(r_.r,r_.g,r_.b,h,n)}this.getClearColor=function(){return a},this.setClearColor=function(p,h=1){a.copy(p),s=h,c(a,s)},this.getClearAlpha=function(){return s},this.setClearAlpha=function(p){s=p,c(a,s)},this.render=l}};var i_=class{constructor(e,t){let o=e.getParameter(e.MAX_VERTEX_ATTRIBS),i=!0,n={},a=b(null),s=a,l=!1;function c(H,w,F,V,B){let L=!1;if(i){let q=m(V,F,w);s!==q&&(s=q,h(s.object)),L=x(H,V,F,B),L&&E(H,V,F,B)}else{let q=w.wireframe===!0;(s.geometry!==V.id||s.program!==F.id||s.wireframe!==q)&&(s.geometry=V.id,s.program=F.id,s.wireframe=q,L=!0)}if(B!==null&&t.update(B,e.ELEMENT_ARRAY_BUFFER),(L||l)&&(l=!1,A(H,w,F,V),B!==null)){let q=t.get(B);ht(q,"indexAttributes"),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,q.buffer)}}function p(){return e.createVertexArray()}function h(H){e.bindVertexArray(H)}function g(H){return e.deleteVertexArray(H)}function m(H,w,F){let V=F.wireframe===!0?"true":"false",B=n[H.id];B===void 0&&(B={},n[H.id]=B);let L=B[w.id];L===void 0&&(L={},B[w.id]=L);let q=L[V];return q===void 0&&(q=b(p()),L[V]=q),q}function b(H){let w=[],F=[],V=[];for(let B=0;B<o;B++)w[B]=0,F[B]=0,V[B]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:w,enabledAttributes:F,attributeDivisors:V,object:H,attributes:{},index:null}}function x(H,w,F,V){let B=s.attributes,L=w.attributes,q=0,le=F.getAttributes();for(let $ in le)if(le[$].location>=0){let ue=B[$],de=L[$];if(de===void 0&&H instanceof Do&&($==="instanceMatrix"&&H.instanceMatrix&&(de=H.instanceMatrix),$==="instanceColor"&&H.instanceColor&&(de=H.instanceColor),$==="instancePickingColor"&&H.instancePickingColor&&(de=H.instancePickingColor)),ue===void 0||ue.attribute!==de||de&&ue.data!==de.data)return!0;q++}return s.attributesNum!==q||s.index!==V}function E(H,w,F,V){let B={},L=w.attributes,q=0,le=F.getAttributes();for(let $ in le)if(le[$].location>=0){let ue=L[$];ue===void 0&&H instanceof Do&&($==="instanceMatrix"&&H.instanceMatrix&&(ue=H.instanceMatrix),$==="instanceColor"&&H.instanceColor&&(ue=H.instanceColor),$==="instancePickingColor"&&H.instancePickingColor&&(ue=H.instancePickingColor));let de={attribute:ue};ue&&"data"in ue&&ue.data&&(de.data=ue.data),B[$]=de,q++}s.attributes=B,s.attributesNum=q,s.index=V}function S(){let H=s.newAttributes;for(let w=0,F=H.length;w<F;w++)H[w]=0}function k(H){T(H,0)}function T(H,w){let F=s.newAttributes,V=s.enabledAttributes,B=s.attributeDivisors;F[H]=1,V[H]===0&&(e.enableVertexAttribArray(H),V[H]=1),B[H]!==w&&(e.vertexAttribDivisor(H,w),B[H]=w)}function I(){let H=s.newAttributes,w=s.enabledAttributes;for(let F=0,V=w.length;F<V;F++)w[F]!==H[F]&&(e.disableVertexAttribArray(F),w[F]=0)}function P(H,w,F,V,B,L,q){q===!0?e.vertexAttribIPointer(H,w,F,B,L):e.vertexAttribPointer(H,w,F,V,B,L)}function A(H,w,F,V){S();let B=V.attributes,L=F.getAttributes(),q=w.defaultAttributeValues;for(let le in L){let $=L[le];if($.location>=0){let ne=B[le];if(ne===void 0&&H instanceof Do&&(le==="instanceMatrix"&&H.instanceMatrix&&(ne=H.instanceMatrix),le==="instanceColor"&&H.instanceColor&&(ne=H.instanceColor),le==="instancePickingColor"&&H.instancePickingColor&&(ne=H.instancePickingColor)),ne!==void 0){let ue=ne.normalized,de=ne.itemSize,pe=t.get(ne);if(pe===void 0)continue;let Y=pe.buffer,j=pe.type,X=pe.bytesPerElement,xe=j===e.INT||j===e.UNSIGNED_INT||ne.gpuType===hC;if(ne instanceof Ep){for(let fe=0;fe<$.locationSize;fe++)T($.location+fe,ne.meshPerAttribute);!(H instanceof Do)&&V._maxInstanceCount===void 0&&(V._maxInstanceCount=ne.meshPerAttribute*ne.count)}else for(let fe=0;fe<$.locationSize;fe++)k($.location+fe);e.bindBuffer(e.ARRAY_BUFFER,Y);for(let fe=0;fe<$.locationSize;fe++)P($.location+fe,de/$.locationSize,j,ue,de*X,de/$.locationSize*fe*X,xe)}else if(q!==void 0){let ue=q[le];if(ue!==void 0)switch(ue.length){case 2:e.vertexAttrib2fv($.location,ue);break;case 3:e.vertexAttrib3fv($.location,ue);break;case 4:e.vertexAttrib4fv($.location,ue);break;default:e.vertexAttrib1fv($.location,ue)}}}}I()}function D(){U();for(let H in n){let w=n[H];for(let F in w){let V=w[F];for(let B in V){let L=V[B];ht(L,"state"),g(L.object),delete V[B]}delete w[F]}delete n[H]}}function G(H){if(n[H.id]===void 0)return;let w=n[H.id];for(let F in w){let V=w[F];for(let B in V){let L=V[B];ht(L,"state"),g(L.object),delete V[B]}delete w[F]}delete n[H.id]}function N(H){for(let w in n){let F=n[w];if(ht(F,"programMap"),F[H.id]===void 0)continue;let V=F[H.id];for(let B in V){let L=V[B];ht(L,"state"),g(L.object),delete V[B]}delete F[H.id]}}function U(){K(),l=!0,s!==a&&(s=a,h(s.object))}function K(){a.geometry=null,a.program=null,a.wireframe=!1}this.setup=c,this.reset=U,this.resetDefaultState=K,this.dispose=D,this.releaseStatesOfGeometry=G,this.releaseStatesOfProgram=N,this.initAttributes=S,this.enableAttribute=k,this.disableUnusedAttributes=I}};var n_=class{constructor(){let e=new qC,t=[];function o(){t.length=0}function i(s){t.push(s)}function n(){e.setup(t)}function a(s){e.setupView(t,s)}this.state={lightsArray:t,lights:e},this.init=o,this.pushLight=i,this.setupLights=n,this.setupLightsView=a}},a_=class{constructor(){let e=new WeakMap;this.get=function(o,i=0){let n=e.get(o),a;return n===void 0?(a=new n_,e.set(o,[a])):i>=n.length?(a=new n_,n.push(a)):a=n[i],a},this.dispose=function(){e=new WeakMap}}};function h$(r){return r instanceof qo}function Kpe(r){return r.isLight}function Wpe(r){return r.isScene}function wF(r){return r.isMesh}function g$(r){return r.isLine}function $pe(r){return r.isLineSegments}function jpe(){let r=fv("canvas");return r.style.display="block",r}var Uf=class{constructor(e={}){let{canvas:t=jpe(),context:o=null,depth:i=!0,stencil:n=!0,alpha:a=!1,antialias:s=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let g;o!==null?g=o.getContextAttributes().alpha:g=a;let m=new Uint32Array(4),b=new Int32Array(4),x=null,E=null,S=[],k=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.outputColorSpace=to;let T=this,I=!1,P=0,A=0,D=null,G=-1,N=null,U=new qo,K=new qo,H=null,w=t.width,F=t.height,V=1,B=null,L=null,q=new qo(0,0,w,F),le=new qo(0,0,w,F),$=!1,ne=new OC,ue=new It,de=new we,pe=new ed;function Y(){return D===null?V:1}let j={alpha:!0,depth:i,stencil:n,antialias:s,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:p,failIfMajorPerformanceCaveat:h};"setAttribute"in t&&t.setAttribute("data-engine",`three.js r${B7}`),t.addEventListener("webglcontextlost",oe,!1),t.addEventListener("webglcontextrestored",te,!1),t.addEventListener("webglcontextcreationerror",Fe,!1);let X=(()=>{let Z=o||t.getContext("webgl2",j);if(Z===null)throw new Error("THREE.WebGLRenderer: Error creating WebGL context with your selected attributes.");return Z})(),xe,fe,Se,ke,Le,$e,Q,J,ve,Ie,He,ge,Ze,rt,Ee,At,Tt,xt;function sr(){ht(X,"gl context"),xe=new VC(X),fe=new NC(X,xe,e),xe.init(),At=new wv(X,xe),Se=new ZC(X),ke=new zC(X),Le=new YC,$e=new QC(X,xe,Se,Le,fe,At,ke),Q=new t_(X),Tt=new i_(X,Q),J=new BC(X,Q,ke,Tt),ve=new HC(X,J,Q,ke),Ie=new jC(T,fe,Tt),He=new JC,ge=new a_,Ze=new o_(T,Se,ve,g,l),xt=new e_(X,ke,Se),rt=new GC(X,ke),Ee=new UC(X,ke),ke.programs=Ie.programs,T.capabilities=fe,T.extensions=xe,T.properties=Le,T.renderLists=He,T.state=Se,T.info=ke}sr(),this.getContext=function(){return X},this.getContextAttributes=function(){return X.getContextAttributes()},this.forceContextLoss=function(){let Z=xe.get("WEBGL_lose_context");Z&&Z.loseContext()},this.forceContextRestore=function(){let Z=xe.get("WEBGL_lose_context");Z&&Z.restoreContext()},this.getPixelRatio=function(){return V},this.setPixelRatio=function(Z){Z!==void 0&&(V=Z,this.setSize(w,F,!1))},this.getSize=function(Z){return Z.set(w,F)},this.setSize=function(Z,Ve,Ae=!0){w=Z,F=Ve,t.width=Math.floor(Z*V),t.height=Math.floor(Ve*V),Ae===!0&&(t.style.width=Z+"px",t.style.height=Ve+"px"),this.setViewport(0,0,Z,Ve)},this.getDrawingBufferSize=function(Z){return Z.set(w*V,F*V).floor()},this.setDrawingBufferSize=function(Z,Ve,Ae){w=Z,F=Ve,V=Ae,t.width=Math.floor(Z*Ae),t.height=Math.floor(Ve*Ae),this.setViewport(0,0,Z,Ve)},this.getCurrentViewport=function(Z){return Z.copy(U)},this.getViewport=function(Z){return Z.copy(q)},this.setViewport=function(Z,Ve,Ae,st){h$(Z)?q.set(Z.x,Z.y,Z.z,Z.w):q.set(Z,Ve,Ae,st),Se.viewport(U.copy(q).multiplyScalar(V).floor())},this.getScissor=function(Z){return Z.copy(le)},this.setScissor=function(Z,Ve,Ae,st){h$(Z)?le.set(Z.x,Z.y,Z.z,Z.w):le.set(Z,Ve,Ae,st),Se.scissor(K.copy(le).multiplyScalar(V).floor())},this.getScissorTest=function(){return $},this.setScissorTest=function(Z){Se.setScissorTest($=Z)},this.setOpaqueSort=function(Z){B=Z},this.setTransparentSort=function(Z){L=Z},this.getClearColor=function(Z){return Z.copy(Ze.getClearColor())},this.setClearColor=function(...Z){Ze.setClearColor.apply(Ze,Z)},this.getClearAlpha=function(){return Ze.getClearAlpha()},this.setClearAlpha=function(...Z){Ze.setClearAlpha.apply(Ze,Z)},this.clear=function(Z=!0,Ve=!0,Ae=!0){let st=0;if(Z){let ft=!1;if(D!==null){let lt=D.texture.format;ft=lt===yC||lt===bC||lt===fC}if(ft){ht(D,"render target");let lt=D.texture.type,zt=lt===mi||lt===Ns||lt===_f||lt===Hl||lt===gC||lt===mC,Ot=Ze.getClearColor(),wt=Ze.getClearAlpha(),Ct=Ot.r,Kt=Ot.g,Gt=Ot.b;zt?(m[0]=Ct,m[1]=Kt,m[2]=Gt,m[3]=wt,X.clearBufferuiv(X.COLOR,0,m)):(b[0]=Ct,b[1]=Kt,b[2]=Gt,b[3]=wt,X.clearBufferiv(X.COLOR,0,b))}else st|=X.COLOR_BUFFER_BIT}Ve&&(st|=X.DEPTH_BUFFER_BIT),Ae&&(st|=X.STENCIL_BUFFER_BIT),X.clear(st)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",oe,!1),t.removeEventListener("webglcontextrestored",te,!1),t.removeEventListener("webglcontextcreationerror",Fe,!1),He.dispose(),ge.dispose(),Le.dispose(),ve.dispose(),Tt.dispose(),xt.dispose(),Ie.dispose()};function oe(Z){Z.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),I=!0}function te(){console.log("THREE.WebGLRenderer: Context Restored."),I=!1;let Z=ke.autoReset;sr(),ke.autoReset=Z}function Fe(Z){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Z.statusMessage)}function me(Z){let Ve=Z.target;Ve.removeEventListener("dispose",me),Qe(Ve)}function Qe(Z){Ne(Z),Le.remove(Z)}function Ne(Z){let Ve=Le.get(Z).programs;Ve!==void 0&&(Ve.forEach(Ae=>{Ie.releaseProgram(Ae)}),Ie.releaseShaderCache(Z))}this.renderBufferDirect=function(Z,Ve,Ae,st,ft,lt){Ve===null&&(Ve=pe);let zt=!!wF(ft)&&ft.matrixWorld.determinant()<0,Ot=at(Z,Ve,st,ft);Se.setMaterial(st,zt);let wt=Ae.index,Ct=1;if(st.wireframe===!0){if(wt=J.getWireframeAttribute(Ae),wt===void 0)return;Ct=2}let Kt=Ae.attributes.position,Gt=0,Nr=1/0*Ct;lt!==null&&(Gt=Math.max(Gt,lt.start*Ct),Nr=Math.min(Nr,(lt.start+lt.count)*Ct)),wt!==null?(Gt=Math.max(Gt,0),Nr=Math.min(Nr,wt.count)):Kt!=null&&(Gt=Math.max(Gt,0),Nr=Math.min(Nr,Kt.count));let fr=Nr-Gt;if(fr<0||fr===1/0)return;ht(Ot,"program"),Tt.setup(ft,st,Ot,Ae,wt);let Rn,Zo=rt;if(wt!==null&&(Rn=Q.get(wt),Zo=Ee,ht(Rn,"attribute"),Ee.setIndex(Rn)),wF(ft)?st.wireframe===!0?(Se.setLineWidth(Y()),Zo.setMode(X.LINES)):Zo.setMode(X.TRIANGLES):g$(ft)&&(Se.setLineWidth(Y()),$pe(ft)?Zo.setMode(X.LINES):Zo.setMode(X.LINE_STRIP)),ft instanceof Do)Zo.renderInstances(Gt,fr,ft.count);else if(Ae instanceof Vf){let br=Ae._maxInstanceCount!==void 0?Ae._maxInstanceCount:1/0,Ro=Math.min(Ae.instanceCount,br);Zo.renderInstances(Gt,fr,Ro)}else Zo.render(Gt,fr)},this.render=function(Z,Ve){if(Ve!==void 0&&Ve.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}I!==!0&&(Z.matrixWorldAutoUpdate===!0&&Z.updateMatrixWorld(),Ve.parent===null&&Ve.matrixWorldAutoUpdate===!0&&Ve.updateMatrixWorld(),E=ge.get(Z,k.length),E.init(),k.push(E),ue.multiplyMatrices(Ve.projectionMatrix,Ve.matrixWorldInverse),ne.setFromProjectionMatrix(ue),x=He.get(Z,S.length),x.init(),S.push(x),lr(Z,Ve,0,T.sortObjects),x.finish(),T.sortObjects===!0&&x.sort(B,L),this.info.render.frame++,this.info.autoReset===!0&&this.info.reset(),Ze.render(x,Z),E.setupLights(),nt(x,Z,Ve),D!==null&&($e.updateMultisampleRenderTarget(D),$e.updateRenderTargetMipmap(D)),Tt.resetDefaultState(),G=-1,N=null,k.pop(),k.length>0?E=k[k.length-1]:E=null,S.pop(),S.length>0?x=S[S.length-1]:x=null)};function lr(Z,Ve,Ae,st){if(Z.visible===!1)return;if(Z.layers.test(Ve.layers)){if(ht(E,"render state"),Z.isGroup)Ae=Z.renderOrder;else if(Kpe(Z))E.pushLight(Z);else if((wF(Z)||g$(Z))&&(ht(x,"render list"),!Z.frustumCulled||ne.intersectsObject(Z))){let zt=ve.update(Z),Ot=Z.material;if(ht(Ot,"material"),st&&(zt.boundingSphere===null&&zt.computeBoundingSphere(),de.copy(zt.boundingSphere.center),de.applyMatrix4(Z.matrixWorld).applyMatrix4(ue)),Array.isArray(Ot)){let wt=zt.groups;for(let Ct=0,Kt=wt.length;Ct<Kt;Ct++){let Gt=wt[Ct],Nr=Gt.materialIndex&&Ot[Gt.materialIndex];Nr&&Nr.visible&&x.push(Z,zt,Nr,Ae,de.z,Gt)}}else Ot.visible&&x.push(Z,zt,Ot,Ae,de.z,null)}}let lt=Z.children;for(let zt=0,Ot=lt.length;zt<Ot;zt++)lr(lt[zt],Ve,Ae,st)}function nt(Z,Ve,Ae,st){let ft=Z.opaque,lt=Z.transparent;ht(E,"render state"),E.setupLightsView(Ae),st&&Se.viewport(U.copy(st)),ft.length>0&&Di(ft,Ve,Ae),lt.length>0&&Di(lt,Ve,Ae),Se.buffers.depth.setTest(!0),Se.buffers.depth.setMask(!0),Se.buffers.color.setMask(!0),Se.setPolygonOffset(!1)}function Di(Z,Ve,Ae){let st=Wpe(Ve)?Ve.overrideMaterial:null;for(let ft=0,lt=Z.length;ft<lt;ft++){let zt=Z[ft],Ot=zt.object,wt=zt.geometry,Ct=st===null?zt.material:st,Kt=zt.group;Ot.layers.test(Ae.layers)&&zr(Ot,Ve,Ae,wt,Ct,Kt)}}function zr(Z,Ve,Ae,st,ft,lt){Z.modelViewMatrix.multiplyMatrices(Ae.matrixWorldInverse,Z.matrixWorld),Z.normalMatrix.getNormalMatrix(Z.modelViewMatrix),T.renderBufferDirect(Ae,Ve,st,ft,Z,lt)}function xo(Z,Ve,Ae){Ve.isScene!==!0&&(Ve=pe);let st=Le.get(Z);ht(E,"render state");let ft=E.state.lights,lt=ft.state.version,zt=Ie.getParameters(Z,ft.state,Ve,Ae),Ot=Ie.getProgramCacheKey(zt),wt=st.programs;wt===void 0&&(Z.addEventListener("dispose",me),wt=new Map,st.programs=wt);let Ct=wt.get(Ot);if(Ct!==void 0){if(st.currentProgram===Ct&&st.lightsStateVersion===lt)return vt(Z,zt),Ct}else zt.uniforms=Ie.getUniforms(Z),Ct=Ie.acquireProgram(zt,Ot),wt.set(Ot,Ct),st.uniforms=zt.uniforms;let Kt=st.uniforms;return ht(Kt,"uniforms"),vt(Z,zt),st.needsLights=Lt(Z),st.lightsStateVersion=lt,st.needsLights&&(Kt.ambientLightColor.value=ft.state.ambient,Kt.directionalLights.value=ft.state.directional),st.currentProgram=Ct,st.uniformsList=void 0,Ct}function it(Z){if(Z.uniformsList===void 0){if(Z.currentProgram===void 0||Z.uniforms===void 0)return;let Ve=Z.currentProgram.getUniforms();Z.uniformsList=Ip.seqWithValue(Ve.seq,Z.uniforms)}return Z.uniformsList}function vt(Z,Ve){let Ae=Le.get(Z);Ae.outputColorSpace=Ve.outputColorSpace,Ae.instancing=Ve.instancing,Ae.instancingColor=Ve.instancingColor,Ae.instancingPickingColor=Ve.instancingPickingColor}function at(Z,Ve,Ae,st){var Zo;Ve.isScene!==!0&&(Ve=pe),$e.resetTextureUnits();let ft=D===null?T.outputColorSpace:Hi,lt=Le.get(Ae);ht(E,"render state");let zt=E.state.lights,Ot=!1;Ae.version===lt.__version?(lt.needsLights&&lt.lightsStateVersion!==zt.state.version||lt.outputColorSpace!==ft||st instanceof Do!=!!lt.instancing)&&(Ot=!0):(Ot=!0,lt.__version=Ae.version);let wt=lt.currentProgram;Ot===!0&&(wt=xo(Ae,Ve,st)),Ae.exprTooComplex=((Zo=wt==null?void 0:wt.diagnostics)==null?void 0:Zo.exprTooComplex)===!0;let Ct=!1,Kt=!1,Gt=!1;ht(wt,"program");let Nr=wt.getUniforms(),fr=lt.uniforms;if(Se.useProgram(wt.program)&&(Ct=!0,Kt=!0,Gt=!0),Ae.id!==G&&(G=Ae.id,Kt=!0),Ct||N!==Z){Nr.setValue(X,"projectionMatrix",Z.projectionMatrix,$e),N!==Z&&(N=Z,Kt=!0,Gt=!0);let br=Nr.map.cameraPosition;br!==void 0&&br.setValue(X,de.setFromMatrixPosition(Z.matrixWorld),$e),Nr.setValue(X,"isOrthographic",Z instanceof Vs,$e),Nr.setValue(X,"viewMatrix",Z.matrixWorldInverse,$e)}if(Kt){lt.needsLights&&(ht(fr,"m_uniforms"),be(fr,Gt)),Ae.uniformsNeedUpdate=!1;let br=it(lt);ht(br,"uniformsList"),ht(fr,"m_uniforms"),Ip.upload(X,br,fr,$e)}if(Ae.uniformsNeedUpdate===!0){let br=it(lt);ht(br,"uniformsList"),ht(fr,"m_uniforms"),Ip.upload(X,br,fr,$e),Ae.uniformsNeedUpdate=!1}Nr.setValue(X,"dcgModelMatrix",st.dcgModelMatrix,$e),Nr.setValue(X,"modelViewMatrix",st.modelViewMatrix,$e),Nr.setValue(X,"pickingColor",st.pickingColor||[0,0,0,0],$e),Nr.setValue(X,"normalMatrix",st.normalMatrix,$e);let Rn=Ae.uniformsGroups;for(let br=0,Ro=Rn.length;br<Ro;br++){let ca=Rn[br];xt.update(ca,wt),xt.bind(ca,wt)}return wt}function be(Z,Ve){Z.ambientLightColor.needsUpdate=Ve,Z.directionalLights.needsUpdate=Ve}function Lt(Z){return Z.lights===!0}this.getActiveCubeFace=function(){return P},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return D},this.setRenderTarget=function(Z,Ve=0,Ae=0){D=Z,P=Ve,A=Ae;let st=!0,ft=null;if(Z){let zt=Le.get(Z);zt.__useDefaultFramebuffer!==void 0?(Se.bindFramebuffer(X.FRAMEBUFFER,null),st=!1):zt.__webglFramebuffer===void 0?$e.setupRenderTarget(Z):zt.__hasExternalTextures&&Z.depthTexture&&$e.rebindTextures(Z,Le.get(Z.texture).__webglTexture,Le.get(Z.depthTexture).__webglTexture);let Ot=Le.get(Z).__webglFramebuffer;Z.samples>0&&$e.useMultisampledRTT(Z)===!1?ft=Le.get(Z).__webglMultisampledFramebuffer:Array.isArray(Ot)?ft=Ot[Ae]:ft=Ot,U.copy(Z.viewport),K.copy(Z.scissor),H=Z.scissorTest}else U.copy(q).multiplyScalar(V).floor(),K.copy(le).multiplyScalar(V).floor(),H=$;Se.bindFramebuffer(X.FRAMEBUFFER,ft)&&fe.drawBuffers&&st&&Se.drawBuffers(Z,ft),Se.viewport(U),Se.scissor(K),Se.setScissorTest(H),G=-1},this.readRenderTargetPixels=function(Z,Ve,Ae,st,ft,lt,zt){if(!(Z&&Z.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ot=Le.get(Z).__webglFramebuffer;if(Ot){Se.bindFramebuffer(X.FRAMEBUFFER,Ot);try{let wt=Z.texture,Ct=wt.format,Kt=wt.type;if(Ct!==Kl&&At.convert(Ct)!==X.getParameter(X.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let Gt=Kt===Mf&&(xe.has("EXT_color_buffer_half_float")||xe.has("EXT_color_buffer_float"));if(Kt!==mi&&At.convert(Kt)!==X.getParameter(X.IMPLEMENTATION_COLOR_READ_TYPE)&&Kt!==ls&&!Gt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ve>=0&&Ve<=Z.width-st&&Ae>=0&&Ae<=Z.height-ft&&X.readPixels(Ve,Ae,st,ft,At.convert(Ct),At.convert(Kt),lt)}finally{let wt=D!==null?Le.get(D).__webglFramebuffer:null;Se.bindFramebuffer(X.FRAMEBUFFER,wt||null)}}},this.copyFramebufferToTexture=function(Z,Ve,Ae=0){let st=Math.pow(2,-Ae),ft=Math.floor(Ve.image.width*st),lt=Math.floor(Ve.image.height*st);$e.setTexture2D(Ve,0),X.copyTexSubImage2D(X.TEXTURE_2D,Ae,0,0,Z.x,Z.y,ft,lt),Se.unbindTexture()},this.copyTextureToTexture=function(Z,Ve,Ae,st=0){let ft=At.convert(Ae.format),lt=At.convert(Ae.type);$e.setTexture2D(Ae,0),X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,Ae.flipY),X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ae.premultiplyAlpha),X.pixelStorei(X.UNPACK_ALIGNMENT,Ae.unpackAlignment),X.texSubImage2D(X.TEXTURE_2D,st,Z.x,Z.y,ft,lt,Ve.image),st===0&&Ae.generateMipmaps&&X.generateMipmap(X.TEXTURE_2D),Se.unbindTexture()},this.initTexture=function(Z){$e.setTexture2D(Z,0),Se.unbindTexture()},this.resetState=function(){P=0,A=0,D=null,Se.reset(),Tt.reset()}}get coordinateSystem(){return cs}};var Wi=class extends _C{constructor(t=1,o=1,i={}){super(t,o,i);this.isWebGLRenderTarget=!0}};var s_=class extends na{constructor(t,o,i,n,a,s,l,c,p){super(t,o,i,n,a,s,l,c,p);this.isCanvasTexture=!0;this.needsUpdate=!0}};var Sv=class extends DC{constructor(e,t){let i=t.font.generateShapes(e,t.size),n={...t,depth:t.height!==void 0?t.height:50};n.bevelThickness===void 0&&(n.bevelThickness=10),n.bevelSize===void 0&&(n.bevelSize=8),n.bevelEnabled===void 0&&(n.bevelEnabled=!1),super(i,n)}};var Tv=class{constructor(e){this.data=e}generateShapes(e,t=100){let o=[],i=Ype(e,t,this.data);for(let n=0,a=i.length;n<a;n++)o.push(...i[n].toShapes());return o}};function Ype(r,e,t){let o=Array.from(r),i=e/t.resolution,n=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*i,a=[],s=0,l=0;for(let c=0;c<o.length;c++){let p=o[c];if(p===`
`)s=0,l-=n;else{let h=Xpe(p,i,s,l,t);s+=h.offsetX,a.push(h.path)}}return a}function Xpe(r,e,t,o,i){let n=i.glyphs[r]||i.glyphs["?"];if(!n)throw new Error('THREE.Font: character "'+r+'" does not exists in font family '+i.familyName+".");let a=new LC,s,l,c,p,h,g;if(n.o){let m=n._cachedOutline||(n._cachedOutline=n.o.split(" "));for(let b=0,x=m.length;b<x;){let E=m[b++];switch(E){case"m":s=m[b++]*e+t,l=m[b++]*e+o,a.moveTo(s,l);break;case"l":s=m[b++]*e+t,l=m[b++]*e+o,a.lineTo(s,l);break;case"q":c=m[b++]*e+t,p=m[b++]*e+o,h=m[b++]*e+t,g=m[b++]*e+o,a.quadraticCurveTo(h,g,c,p);break;default:if(E)throw new Error("unrecognized action: "+E)}}}return{offsetX:n.ha*e,path:a}}Vt();var{abs:m$,PI:f$}=Math;function v$(r,e,t,o){let i=b$(r,t,o),n=b$(e,t,o);return S$(i,n)}function b$(r,e,t){let o={x:(r.x-e.x)/t,y:-(r.y-e.y)/t},i=o.x*o.x+o.y*o.y,n=Math.sqrt(i);return i<1?new we(o.x,-o.y,Math.sqrt(1-i)):new we(o.x/n,-o.y/n,0)}function w$(r,e,t){let o=y$(r,t),i=y$(e,t);return S$(o,i)}function y$(r,e){let t={x:r.x-e.x,y:r.y-e.y},o=Math.hypot(t.x,t.y);return o===0?new we(1,0,0):new we(t.x/o,t.y/o,0)}function Jpe(r){let e=r.elements,t=new we(e[3],e[4],e[5]).normalize(),o=new we(e[6],e[7],e[8]),i=new we().crossVectors(t,o).normalize();o.crossVectors(i,t).normalize();let n=new Gr;return n.set(i.x,t.x,o.x,i.y,t.y,o.y,i.z,t.z,o.z),n}function zf(r,e){let t=r.clone().transpose(),o=new Gr().multiplyMatrices(t,e),i=new Gr().multiplyMatrices(o,r);return Jpe(i)}function S$(r,e){let t=e.clone();t.cross(r);let o=t.length(),i=e.dot(r),n=1-i;o>0&&(t.x=t.x/o,t.y=t.y/o,t.z=t.z/o);let a=new Gr;return a.set(n*t.z*t.z+i,n*t.z*t.x-o*t.y,n*t.y*t.z+o*t.x,n*t.z*t.x+o*t.y,n*t.x*t.x+i,n*t.y*t.x-o*t.z,n*t.y*t.z-o*t.x,n*t.y*t.x+o*t.z,n*t.y*t.y+i),a}var{sin:kv,cos:l_}=Math;function Yl(){let r=qf(-(11*Math.PI)/16);return fh(Math.PI/8).multiply(r)}function c_(){let r=qf(-Math.PI/2);return fh(Math.PI/2).multiply(r)}function qf(r){let e=new Gr;return e.set(l_(r),-kv(r),0,kv(r),l_(r),0,0,0,1),e}function fh(r){let e=new Gr;return e.set(l_(r),0,-kv(r),0,1,0,kv(r),0,l_(r)),e}function SF(r){let e=r.elements,t=e[0]+e[4]+e[8];if(t<3){let o=Math.acos(.5*(t-1)),i=2*kv(o),n=(e[5]-e[7])/i,a=(e[6]-e[2])/i,s=(e[1]-e[3])/i;return{axis:new we(n,a,s),angle:o}}return{axis:new we(0,0,-1),angle:0}}function T$(r,e){let t=__dcg_shared_module_exports__['kd'](r,e),o=new Gr;return o.elements=t,o}function x$(r,e){return e*Math.floor(r/e+.5)}function d_(r){let e=ja?.06:.03,t=new It().setFromMatrix3(r),{y:o,z:i}=new Ki(0,0,0,"YXZ").setFromRotationMatrix(t),n=x$(o,f$/2),a=x$(i,f$/2),s=m$(o-n)<e,l=m$(i-a)<e,c;if(s||l){let p=s?n:o,h=l?a:i,g=new Ki(0,p,h,"YXZ"),m=new It().makeRotationFromEuler(g);c=new Gr().setFromMatrix4(m)}else c=r;return{matrix:c,isXYsnapped:l,isZsnapped:s}}Vt();function k$(r,e,t,o){var L,q,le;let i=__dcg_shared_module_exports__['Ob'](Math.floor(8+30*e),8,20),{xmin:n,xmax:a,ymin:s,ymax:l,zmin:c,zmax:p}=t,h=(a-n)/2,g=(l-s)/2,m=(p-c)/2,b=30,x={xmin:n-b*h,xmax:a+b*h,ymin:s-b*g,ymax:l+b*g,zmin:c-b*m,zmax:p+b*m};function E($,ne,ue){return x.xmin<=$&&$<=x.xmax&&x.ymin<=ne&&ne<=x.ymax&&x.zmin<=ue&&ue<=x.zmax}for(let $=0;$<r.length/3;$++){let ne=r[3*$+0],ue=r[3*$+1],de=r[3*$+2];if(E(ne,ue,de)||!w($))continue;let Y=$===r.length/3-1||!w($+1)?$-1:$+1;if(!w(Y))continue;let j=r[3*Y+0]-ne,X=r[3*Y+1]-ue,xe=r[3*Y+2]-de,fe=TF(x,ne,ue,de,j,X,xe);r[3*$+0]=(L=fe==null?void 0:fe.x)!=null?L:NaN,r[3*$+1]=(q=fe==null?void 0:fe.y)!=null?q:NaN,r[3*$+2]=(le=fe==null?void 0:fe.z)!=null?le:NaN}for(let $=0;$<r.length/3-1;$++)if(w($)&&w($+1)){r=r.slice(3*$);break}if(!(w(0)&&w(1)))return{vertices:[],normals:[],faces:[],pickingColorVertexCounts:void 0};let S=r.length/3,k=S-1,T=new we,I=new we,P=[],A=[],D=[],G=B();for(let $=0;$<=k;$++)U($);K();let N;if(o){N=[];for(let $=0;$<S/3;$++)N.push(3*(i+1))}return{vertices:P,normals:A,faces:D,pickingColorVertexCounts:N};function U($){I.x=r[3*$+0],I.y=r[3*$+1],I.z=r[3*$+2];let ne=G.normals[$],ue=G.binormals[$];if(V($))for(let de=0;de<=i;de++){let pe=de/i*Math.PI*2,Y=Math.sin(pe),j=-Math.cos(pe);T.x=h*e*(j*ne.x+Y*ue.x),T.y=g*e*(j*ne.y+Y*ue.y),T.z=m*e*(j*ne.z+Y*ue.z),P.push(I.x+T.x,I.y+T.y,I.z+T.z),T.normalize(),A.push(T.x,T.y,T.z)}else for(let de=0;de<=i;de++)P.push(0,0,0),A.push(0,0,0)}function K(){for(let $=1;$<=k;$++)if(V($-1)&&V($))for(let ne=1;ne<=i;ne++){let ue=(i+1)*($-1)+(ne-1),de=(i+1)*$+(ne-1),pe=(i+1)*$+ne,Y=(i+1)*($-1)+ne;D.push(ue,de,Y,de,pe,Y)}}function H($){return new we(r[3*$+0],r[3*$+1],r[3*$+2])}function w($){return isFinite(Math.fround(r[3*$+0]))&&isFinite(Math.fround(r[3*$+1]))&&isFinite(Math.fround(r[3*$+2]))}function F($){return isFinite($.x)&&isFinite($.y)&&isFinite($.z)}function V($){return w($)&&F(G.normals[$])&&F(G.binormals[$])}function B(){let $=new we,ne=[],ue=[],de=[],pe=new we,Y=new It;for(let j=0;j<=k;j++){let[X,xe]=j<k?[j+1,j]:[j,j-1],fe=H(X).sub(H(xe)).normalize();F(fe)?ne[j]=fe:j>0&&(ne[j]=ne[j-1])}for(let j=0;j<=k;j++)if(j===0||!w(j-1)){ue[j]=new we,de[j]=new we;let X=Number.MAX_VALUE,xe=Math.abs(ne[j].x),fe=Math.abs(ne[j].y),Se=Math.abs(ne[j].z);xe<=X&&(X=xe,$.set(1,0,0)),fe<=X&&(X=fe,$.set(0,1,0)),Se<=X&&$.set(0,0,1),pe.crossVectors(ne[j],$).normalize(),ue[j].crossVectors(ne[j],pe),de[j].crossVectors(ne[j],ue[j])}else{if(ue[j]=ue[j-1].clone(),de[j]=de[j-1].clone(),pe.crossVectors(ne[j-1],ne[j]),pe.length()>Number.EPSILON){pe.normalize();let xe=Math.acos(__dcg_shared_module_exports__['Ob'](ne[j-1].dot(ne[j]),-1,1));ue[j].applyMatrix4(Y.makeRotationAxis(pe,xe))}let X=j>0&&ne[j-1].dot(ne[j])>-.999999*ne[j-1].length()*ne[j].length()?ne[j].clone().add(ne[j-1]).normalize():ne[j];de[j].crossVectors(X,ue[j]).normalize()}return{normals:ue,binormals:de}}}function TF(r,e,t,o,i,n,a){let s,l,c,p,h,g,m=1/i,b=1/n,x=1/a;if(m>=0?(s=(r.xmin-e)*m,l=(r.xmax-e)*m):(s=(r.xmax-e)*m,l=(r.xmin-e)*m),b>=0?(c=(r.ymin-t)*b,p=(r.ymax-t)*b):(c=(r.ymax-t)*b,p=(r.ymin-t)*b),s===l||c===p||s>p||c>l||((c>s||isNaN(s))&&(s=c),(p<l||isNaN(l))&&(l=p),x>=0?(h=(r.zmin-o)*x,g=(r.zmax-o)*x):(h=(r.zmax-o)*x,g=(r.zmin-o)*x),h===g)||s>g||h>l||((h>s||s!==s)&&(s=h),(g<l||l!==l)&&(l=g),l<0))return;let E=s>=0?s:l;return{x:e+E*i,y:t+E*n,z:o+E*a}}var Zpe=.1,u_=class extends sv{constructor(t,o,i){super(i,Vn(t));this.viewport=t;this.grapher3d=o;this.s=kc(()=>this.grapher3d.settings.config.language)}isDefaultViewportRestored(){return this.grapher3d.isDefaultDomain()}getCurrentDomain(){var t,o;return{xmin:this.viewport.xmin,xmax:this.viewport.xmax,ymin:this.viewport.ymin,ymax:this.viewport.ymax,zmin:(t=this.viewport.zmin)!=null?t:__dcg_shared_module_exports__['Fc'].zmin,zmax:(o=this.viewport.zmax)!=null?o:__dcg_shared_module_exports__['Fc'].zmax}}animateToDomain(t){let o=this.getCurrentDomain(),i=this.grapher3d.transition;i.isZooming||(i.isZooming=!0,i.startTime=window.performance.now(),i.duration=150,i.zoom0=o,i.zoom1=t,this.grapher3d.startZoom())}setDefaultViewport(){this.animateToDomain(new __dcg_shared_module_exports__['td']),Te(this.s("graphing-calculator-narration-viewport-default"))}setEvaluatedViewport(t){var s,l;let o=__dcg_shared_module_exports__['Qe'].fromObject(t),i=this.getViewport();if(o.isXValid("linear")||(o.xmin=i.xmin,o.xmax=i.xmax),o.isYValid("linear")||(o.ymin=i.ymin,o.ymax=i.ymax),o.isZValid()||(o.zmin=i.zmin,o.zmax=i.zmax),o.equals(this.getViewport()))return;let n=o.toObject();o=__dcg_shared_module_exports__['Qe'].fromObject(tue({...n,zmin:(s=n.zmin)!=null?s:__dcg_shared_module_exports__['Fc'].zmin,zmax:(l=n.zmax)!=null?l:__dcg_shared_module_exports__['Fc'].zmax})),this.grapher3d.controller.getGrapher2d().viewportController.setCurrentViewport(o),this.viewport=o,this.grapher3d.controller.requestRedrawGraph()}getViewport(){return this.viewport}setScreen(){}zoom(t){let o=this.getCurrentDomain(),i=this.grapher3d.transition;switch(t){case"in":{if(i.isZooming)return;i.isZooming=!0,i.startTime=window.performance.now(),i.duration=150,i.zoom0=o,i.zoom1=Ev(o,1/2),this.grapher3d.startZoom(),Te(this.s("graphing-calculator-narration-viewport-zoom-in"))}break;case"out":{if(i.isZooming)return;i.isZooming=!0,i.startTime=window.performance.now(),i.duration=150,i.zoom0=o,i.zoom1=EF(o,2,Zpe),this.grapher3d.startZoom(),Te(this.s("graphing-calculator-narration-viewport-zoom-out"))}break;case"square":this.grapher3d.settings.setProperty("squareAxes",!0),this.animateToDomain(Qpe(this.getCurrentDomain())),Te(this.s("graphing-calculator-narration-viewport-zoom-square"));break;case"default":this.controller.getDynamicViewportBoundsErrors()?this.zoomHomeImmediately():this.setDefaultViewport();break;case"default3dOrientation":this.animateToOrientation(Yl()),Te(this.s("graphing-calculator-narration-viewport-zoom-3d-default"));break;case"xy3dOrientation":this.animateToOrientation(c_()),Te(this.s("graphing-calculator-narration-viewport-zoom-3d-xy"));break;case"recenter":this.animateToDomain(eue(this.getCurrentDomain())),Te(this.s("graphing-calculator-narration-viewport-zoom-recenter"));break;default:}}animateToOrientation(t){this.grapher3d.settings.setProperty("speed3D",0),this.grapher3d.settings.setProperty("worldRotation3D",[...t.elements]),this.grapher3d.controls.animateToOrientation(t)}zoomSquareImmediately(){}ensureValidNumericViewport(){}zoomHomeImmediately(){this.setUndoViewport(new __dcg_shared_module_exports__['td'])}remove(){}beginPanning(){}zoomCustom(t){}getProjection(){return this.grapher3d.getProjection()}panFromKeyboard(t){}};function Ev(r,e,t){let{xwidth:o,ywidth:i,zwidth:n}=rue(r);return E$(r,{xwidth:o*e,ywidth:i*e,zwidth:n*e},t)}function EF(r,e,t,o=new we(0,0,0)){var m;let i=new we((r.xmax+r.xmin)/2,(r.ymax+r.ymin)/2,(r.zmax+r.zmin)/2),{x:n,y:a,z:s}=i,l=i.clone().sub(o),c=(m=TF(r,n,a,s,l.x,l.y,l.z))!=null?m:i,p=new we(c.x,c.y,c.z);p.lerp(i,1-t);for(let b of["x","y","z"]){let x=r[`${b}min`],E=r[`${b}max`];x===0||E===0?p[b]=0:x===-E&&(p[b]=i[b])}let h=Ev(r,e,p),g=new we((h.xmax+h.xmin)/2,(h.ymax+h.ymin)/2,(h.zmax+h.zmin)/2);return g.x<o.x!=i.x<o.x&&(h.xmax=.5*(h.xmax-h.xmin),h.xmin=-h.xmax),g.y<o.y!=i.y<o.y&&(h.ymax=.5*(h.ymax-h.ymin),h.ymin=-h.ymax),g.z<o.z!=i.z<o.z&&(h.zmax=.5*(h.zmax-h.zmin),h.zmin=-h.zmax),h}function Qpe(r){let e=r.xmax-r.xmin;return E$(r,{xwidth:e,ywidth:e,zwidth:e})}function E$(r,{xwidth:e,ywidth:t,zwidth:o},i){let n=new __dcg_shared_module_exports__['td'];return[n.xmin,n.xmax]=kF(r.xmin,r.xmax,e,i==null?void 0:i.x),[n.ymin,n.ymax]=kF(r.ymin,r.ymax,t,i==null?void 0:i.y),[n.zmin,n.zmax]=kF(r.zmin,r.zmax,o,i==null?void 0:i.z),n}function eue(r){let e=new __dcg_shared_module_exports__['td'];return e.xmax=.5*(r.xmax-r.xmin),e.xmin=-e.xmax,e.ymax=.5*(r.ymax-r.ymin),e.ymin=-e.ymax,e.zmax=.5*(r.zmax-r.zmin),e.zmin=-e.zmax,e}function tue(r){let e=new __dcg_shared_module_exports__['td'];return[e.xmin,e.xmax]=p_(r.xmin,r.xmax),[e.ymin,e.ymax]=p_(r.ymin,r.ymax),[e.zmin,e.zmax]=p_(r.zmin,r.zmax),e}var Bs=134e3,I$=134e-6;function C$(r,e,t,o){return t=__dcg_shared_module_exports__['Ob'](t,I$,Bs),o=o!=null?o:r===0||e===0?0:(r+e)/2,r=o+(r-o)/(e-r)*t,e=r+t,[r,e]}function kF(r,e,t,o){return[r,e]=C$(r,e,t,o),p_(r,e)}function p_(r,e){r<-Bs/2&&(e<-Bs/4&&(e+=-Bs/2-r,e=Math.min(Bs/2,e)),r=-Bs/2),e>Bs/2&&(r>Bs/4&&(r+=Bs/2-e,r=Math.max(-Bs/2,r)),e=Bs/2);let t=I$*Math.max(1,Math.abs(r),Math.abs(e));return e-r<t?C$(r,e,t):[r,e]}function rue(r){let{xmin:e,xmax:t,ymin:o,ymax:i,zmin:n,zmax:a}=r;return{xwidth:t-e,ywidth:i-o,zwidth:a-n}}var{abs:Us,min:P$,acos:_$,hypot:D$,PI:zs}=Math,oue=1e3,iue=.2,td={NONE:-1,ROTATE:0},nue={type:"start"},aue={type:"end"},M$=50,sue=5*Math.PI/180,h_=class extends ia{constructor(t,o,i){super();this.worldRotation3D=Yl();this.unsnappedRotation=new Gr;this.axis3D=[0,0,1];this.speed3D=0;this.touches=[];this.spinningWorld=t,this.copyWorldRotationToWorld(),this.domElement=i!==void 0?i:document,this.grapher3d=o,this.state=td.NONE,this.lastMovedTime=0,this.lastRotateTime=0,this.lastWheelEventTime=0,this.keyStillDown=!1,this.lastAngle=0,this.useVirtualSphere=!1,this.startedOutsideVirtualSphere=!1,this.isXYsnapped=!1,this.isZsnapped=!1,this.dimensions=()=>{let n=this.domElement===document?this.domElement.body:this.domElement,a=n.clientWidth,s=n.clientHeight,l=new bt(a/2,s/2),c=Math.min(a,s)/2;return{center:l,radius:c,height:s,width:a}},this.onContextMenu=n=>{this.grapher3d.controller.dispatch({type:"blur-focus-location",location:this.grapher3d.controller.getFocusLocation()})},this.onTapStart=n=>{var S,k;let a=n,s=Object.keys(this.touches).length;this.touches=CF(a.touches);let l=Object.keys(this.touches).length,c=o.webglLayer.getPressedAction()!==void 0;if(s<2&&l===2&&!c){this.startPinchZoom();return}if(l>1)return;let{top:p,left:h}=qn(this.grapher3d.elt),g=this.touches[0].pageX-h,m=this.touches[0].pageY-p;if(this.isPinchZooming()||(S=this.grapher3d)!=null&&S.transition.isOrienting)return;this.grapher3d.controller.dispatch({type:"set-none-selected"}),o.webglLayer.setMouse({x:g,y:m}),o.webglLayer.pickAtMouseAndReadResults();let b=(k=o.webglLayer.getPickResult())==null?void 0:k.id;if(b){let T=o.controller.getItemModel(b);if(T&&T.type==="expression"&&Ei(T))return}this.state=td.ROTATE,this.speed3D=0,this.invert=void 0;let{center:x,radius:E}=this.dimensions();this.startedOutsideVirtualSphere=D$(g-x.x,m-x.y)>=E,this.unsnappedRotation.copy(this.worldRotation3D),this.useVirtualSphere=a.shiftKey&&this.grapher3d.settings.config.beta3d||!this.isHorizonLevel(),this.state!==td.NONE&&(this.grapher3d.isDragging=!0,re(document).on("dcg-tapmove",this.onTapMove),re(document).on("dcg-tapend",this.onTapUp),re(document).on("dcg-tapcancel",this.onTapUp),this.dispatchEvent(nue))},this.onTapMove=n=>{var E;let a=n,s=a.changedTouches[0].identifier,l=a.changedTouches[0],c=this.touches.find(S=>S.identifier===s)||l;this.touches=CF(a.touches);let{top:p,left:h}=qn(this.grapher3d.elt),g=new bt(c.pageX-h,c.pageY-p),m=new bt(l.pageX-h,l.pageY-p);if(this.isPinchZooming()){this.updatePinchZoom();return}if((E=this.grapher3d)!=null&&E.transition.isOrienting||this.state!=td.ROTATE||this.isRotationLocked())return;let b=m.x-g.x,x=m.y-g.y;if(b!==0||x!==0){let S,{center:k,radius:T,height:I,width:P}=this.dimensions();if(this.useVirtualSphere)S=this.startedOutsideVirtualSphere?w$(m,g,k):v$(m,g,k,T),S=zf(this.worldRotation3D,S),this.setWorldRotation(this.worldRotation3D.multiply(S));else{this.invert===void 0&&(this.invert=this.invertFactorForDragFrom(m));let K=b/P*zs*this.invert,H=x/I*zs,w=qf(K),F=fh(H);F=zf(this.unsnappedRotation,F),Us(x)>2*Us(b)?this.unsnappedRotation.multiply(F):Us(b)>2*Us(x)?this.unsnappedRotation.multiply(w):this.unsnappedRotation.multiply(F).multiply(w);let{matrix:V,isXYsnapped:B,isZsnapped:L}=d_(this.unsnappedRotation);this.setWorldRotation(V),this.isXYsnapped=B,this.isZsnapped=L,F=fh(H),F=zf(this.worldRotation3D,F),S=Us(x)>Us(b)?F:w}let{axis:A,angle:D}=SF(S),G=a.timeStamp,N=(G-this.lastMovedTime)*.001;this.axis3D=[A.x,A.y,A.z],this.useVirtualSphere&&this.snapSpinAxisIfClose();let U=240*(zs/180);this.speed3D=__dcg_shared_module_exports__['Ob'](D/N,-U,U),this.lastAngle=0,this.lastMovedTime=G,Us(this.speed3D)<sue&&(this.speed3D=0)}else this.lastMovedTime+M$<a.timeStamp&&(this.speed3D=0)},this.onTapUp=n=>{var c;let a=n,s=Object.keys(this.touches).length;this.touches=CF(a.touches);let l=Object.keys(this.touches).length;s===2&&l<2&&this.isPinchZooming()&&this.stopPinchZoom(),!((c=this.grapher3d)!=null&&c.transition.isOrienting)&&(l>0||(this.lastMovedTime+M$<a.timeStamp&&!this.isPinchZooming()&&(this.speed3D=0),this.grapher3d.isDragging=!1,re(document).off("dcg-tapmove",this.onTapMove),re(document).off("dcg-tapend",this.onTapUp),re(document).off("dcg-tapcancel",this.onTapUp),this.dispatchEvent(aue),this.grapher3d.debounceUserRequestedRotationChange(),this.state=td.NONE,this.grapher3d.controller.dispatch({type:"render"})))},this.onMouseWheel=n=>{var T,I;let a=n;if(this.state!==td.NONE||this.isLocked()||a.deltaY===0)return;a.preventDefault(),this.lastWheelEventTime===0&&this.grapher3d.startZoom(),this.lastWheelEventTime=window.performance.now();let s=this.grapher3d.webglLayer.domain(),l=this.grapher3d.webglLayer.getMouse(),c=Date.now(),p=this.speed3D!==0,h=a.deltaY<0?"in":"out",g=this.currentZoomAction&&c-this.currentZoomAction.lastChangeTime>oue;if(!this.currentZoomAction||this.currentZoomAction.input.type!=="pointer"||this.currentZoomAction.input.x!==(l==null?void 0:l.x)||this.currentZoomAction.input.y!==(l==null?void 0:l.y)||this.currentZoomAction.isSpinning!==p||h==="in"&&this.currentZoomAction.initialDirection==="out"||g){let P=h==="in"?(T=this.grapher3d.webglLayer.getZoomScrollWheelPickResult())==null?void 0:T.point:void 0;this.currentZoomAction={lastChangeTime:c,start:s,input:{type:"pointer",...l},isSpinning:p,center:P==null?void 0:P.clone(),initialDirection:h}}else this.currentZoomAction&&(this.currentZoomAction.lastChangeTime=c);let m=(I=this.currentZoomAction)==null?void 0:I.center,b=this.currentZoomAction.start.xmax-this.currentZoomAction.start.xmin,x=s.xmax-s.xmin;if(this.currentZoomAction.initialDirection==="in"&&h==="out"&&x>=b){let P=this.currentZoomAction.start;delete this.currentZoomAction,s=P,m=void 0}if(!m){let P=s.xmin<=0&&s.xmax>=0,A=s.ymin<=0&&s.ymax>=0,D=s.zmin<=0&&s.zmax>=0;P&&A&&D&&(m=new we(0,0,0))}let E=1.05,S;h==="out"&&(!m||m.lengthSq()===0)?S=EF(s,E,iue):S=Ev(s,a.deltaY<0?1/E:E,m);let k=new __dcg_shared_module_exports__['Qe'](S.xmin,S.xmax,S.ymin,S.ymax,S.zmin,S.zmax);this.updateViewport(k),this.copyWorldRotationToWorld(),this.grapher3d.webglLayer.updateAxes(),this.grapher3d.controller.dispatch({type:"render"})},this.domElement.addEventListener("touchstart",n=>{(!this.isLocked()||!this.isRotationLocked())&&n.preventDefault()},{passive:!1}),re(this.domElement).on("dcg-tapstart",this.onTapStart),re(this.domElement).on("contextmenu",this.onContextMenu),this.domElement.addEventListener("wheel",this.onMouseWheel)}invertFactorForDragFrom(t){let o=new we(0,0,1).applyMatrix3(this.worldRotation3D),n=.2+.032*(this.grapher3d.controller.getPerspectiveDistortion()-1);if(Us(o.x)<n)return Math.sign(o.z);let a=Math.sign(-o.x),s=this.grapher3d.webglLayer.ndcCoordinatesToScreenCoordinates({x:0,y:0,z:2*a});return t.y<=s.y?-a:a}keyUp(){this.keyStillDown=!1,this.speed3D&&Te(this.grapher3d.controller.s("graphing-calculator-narration-3d-rotation-speed",{speed:Math.ceil(this.speed3D*180/zs)}))}applyTiltFromKeyboard(t,o){var p;if(this.isRotationLocked()||this.isPinchZooming()||(p=this.grapher3d)!=null&&p.transition.isOrienting)return;this.grapher3d.controller.dispatch({type:"set-none-selected"});let i={Up:this.grapher3d.controller.s("graphing-calculator-narration-3d-rotate-up"),Down:this.grapher3d.controller.s("graphing-calculator-narration-3d-rotate-down"),Left:this.grapher3d.controller.s("graphing-calculator-narration-3d-rotate-left"),Right:this.grapher3d.controller.s("graphing-calculator-narration-3d-rotate-right")},n=h=>{let g=fh(h);g=zf(this.unsnappedRotation,g),this.unsnappedRotation.multiply(g)},a=h=>{this.unsnappedRotation.multiply(qf(h))},s=h=>{let g=fh(h);return zf(this.worldRotation3D,g)},l=h=>qf(h);if(t===this.lastKeyboardDirection&&this.keyStillDown)if(this.speed3D===0){let h,g=2*zs/180;switch(t){case"Up":h=s(-g);break;case"Down":h=s(+g);break;case"Left":h=l(-g);break;case"Right":h=l(+g);break}let{axis:m,angle:b}=SF(h);this.axis3D=[m.x,m.y,m.z],this.speed3D=b}else{let h=240*(zs/180);this.speed3D=__dcg_shared_module_exports__['Ob'](this.speed3D*1.1,-h,h)}else if(this.speed3D)this.lastKeyboardDirection=void 0,this.keyStillDown=!0,this.speed3D=0,Te(this.grapher3d.controller.s("graphing-calculator-narration-3d-rotation-stopped"));else{this.lastKeyboardDirection=t,this.keyStillDown=!0,Te(i[t]);let h=zs/180;switch(t){case"Up":n(-h);break;case"Down":n(+h);break;case"Left":a(-h);break;case"Right":a(+h);break}let{matrix:g,isXYsnapped:m,isZsnapped:b}=d_(this.unsnappedRotation);this.setWorldRotation(g),this.isXYsnapped=m,this.isZsnapped=b,this.lastAngle=0}}isPinchZooming(){var t;return((t=this.currentZoomAction)==null?void 0:t.input.type)==="pinch"}startPinchZoom(){if(this.isLocked()||this.isPinchZooming())return;let t=__dcg_shared_module_exports__['Uc'](this.touches);this.grapher3d.controller.dispatch({type:"set-none-selected"}),this.grapher3d.startZoom(),this.currentZoomAction={lastChangeTime:Date.now(),start:this.grapher3d.webglLayer.domain(),center:void 0,input:{type:"pinch",pinchZoomStartPositions:t},isSpinning:this.speed3D!==0,initialDirection:void 0}}stopPinchZoom(){this.isPinchZooming()&&(this.currentZoomAction=void 0,this.grapher3d.endZoom(),this.grapher3d.controller.dispatch({type:"render"}))}updatePinchZoom(){var s;if(((s=this.currentZoomAction)==null?void 0:s.input.type)!=="pinch")return;let t=L$(this.currentZoomAction.input.pinchZoomStartPositions),i=L$(this.touches)/t;if(!isFinite(i))return;let n=Ev(this.currentZoomAction.start,1/i),a=new __dcg_shared_module_exports__['Qe'](n.xmin,n.xmax,n.ymin,n.ymax,n.zmin,n.zmax);this.updateViewport(a),this.copyWorldRotationToWorld()}snapSpinAxisIfClose(){if(!this.grapher3d.settings.showAxis3D)return;let[t,o,i]=this.axis3D,n=.97;t>n&&(this.axis3D=[1,0,0]),o>n&&(this.axis3D=[0,1,0]),i>n&&(this.axis3D=[0,0,1]),t<-n&&(this.axis3D=[-1,0,0]),o<-n&&(this.axis3D=[0,-1,0]),i<-n&&(this.axis3D=[0,0,-1])}copyWorldRotationToWorld(){this.spinningWorld.setRotationFromMatrix(new It().setFromMatrix3(this.worldRotation3D))}update(){return!0}dispose(){re(this.domElement).off("dcg-tapstart",this.onTapStart),re(document).off("dcg-tapmove",this.onTapMove),re(document).off("dcg-tapend",this.onTapUp),re(document).off("dcg-tapcancel",this.onTapUp),this.domElement.removeEventListener("wheel",this.onMouseWheel)}setWorldRotation(t){this.worldRotation3D=t,this.copyWorldRotationToWorld();let{isXYsnapped:o,isZsnapped:i}=d_(t);this.isXYsnapped=o,this.isZsnapped=i}isHorizonLevel(){let t=new we(0,0,1).applyMatrix3(this.worldRotation3D);return Us(t.y)<1e-4}compareWorldRotationTo(t){let o=new It().setFromMatrix3(this.worldRotation3D),i=new It().setFromMatrix3(t),n=new Ki(0,0,0,"YXZ").setFromRotationMatrix(o),a=new Ki().setFromRotationMatrix(i),s=new ds().setFromEuler(n).normalize(),l=new ds().setFromEuler(a).normalize(),c=P$(Us(s.dot(l)),1);return 2*_$(c)*(180/zs)}isDefaultOrientation(){let t=this.compareWorldRotationTo(Yl());return this.speed3D===0&&t<1}isXYPlaneOrientation(){let t=this.compareWorldRotationTo(c_());return this.speed3D===0&&t<.001}animateToOrientation(t){let o=this.grapher3d;this.speed3D=0;let i=o.transition,n=new It().setFromMatrix3(this.worldRotation3D),a=new It().setFromMatrix3(t),s=new Ki().setFromRotationMatrix(a),l=new Ki(0,0,0,"YXZ").setFromRotationMatrix(n);i.q0.setFromEuler(l),i.q1.setFromEuler(s);let c=i.q0.clone().normalize(),p=i.q1.clone().normalize(),h=2*_$(Us(c.dot(p)))*(180/zs);i.isOrienting=!0,i.startTime=window.performance.now(),i.duration=150*__dcg_shared_module_exports__['Ob'](h/30,1,3)}updateViewport(t){let o=this.grapher3d,i=o.controller.getGrapher2d();o.viewportController.setCurrentViewport(t),o.debounceUserRequestedViewportChange(),i.viewportController.setCurrentViewport(t),i.redrawAllLayersSynchronously(),o.webglLayer.updatePlaneMap(),o.webglLayer.updateDomainObjects()}isLocked(){return this.grapher3d.controller.zoomAndPanDisabled()}isRotationLocked(){return this.grapher3d.controller.getGraphSettings().userLockedRotation||this.grapher3d.controller.isPinchZoomed()}},g_=class{constructor(){this.isZooming=!1;this.zoom0=new __dcg_shared_module_exports__['td'];this.zoom1=new __dcg_shared_module_exports__['td'];this.isOrienting=!1;this.q0=new ds;this.q1=new ds;this.objectIdExtendingTo3D=void 0;this.startTime=0;this.duration=0}};function lue(r,e,t){let o=new Ki(0,0,0,"YXZ").setFromQuaternion(r),i=new Ki(0,0,0,"YXZ").setFromQuaternion(e);if(!(Math.abs(o.x)<1e-5&&Math.abs(i.x)<1e-5))return A$(r,e,t);let n=Math.PI/2,a=1,s=Math.abs(_F(o.y,i.y)),l=Math.abs(_F(o.z,i.z));if(s<=n&&l>=a*s){let c=new Ki(IF(o.x,i.x,t),IF(o.y,i.y,t),IF(o.z,i.z,t),"YXZ"),p=new It().makeRotationFromEuler(c);return new Gr().setFromMatrix4(p)}else return A$(r,e,t)}function A$(r,e,t){let o=r.clone().slerp(e,t),i=new It().makeRotationFromQuaternion(o);return new Gr().setFromMatrix4(i)}function IF(r,e,t){return r+_F(e,r)*t}function _F(r,e){return Math.abs(r-e)>=Math.PI&&(e+=2*Math.PI*Math.sign(r-e)),r-e}function O$(r){let e=r.grapher3d,t=e.transition;if(e.settings.threeDMode){if(r.lastWheelEventTime!=0&&(window.performance.now()-r.lastWheelEventTime)*.001>.1&&(r.lastWheelEventTime=0,e.endZoom()),t.isZooming){let{zoom0:o,zoom1:i}=t,n=window.performance.now(),a=P$(1,(n-t.startTime)/t.duration),s=new __dcg_shared_module_exports__['Qe'](a*i.xmin+(1-a)*o.xmin,a*i.xmax+(1-a)*o.xmax,a*i.ymin+(1-a)*o.ymin,a*i.ymax+(1-a)*o.ymax,a*i.zmin+(1-a)*o.zmin,a*i.zmax+(1-a)*o.zmax);a>=1&&(e.endZoom(),t.isZooming=!1),r.updateViewport(s)}if(t.isOrienting){let i=(window.performance.now()-t.startTime)/t.duration;if(i>=1){let n=new It().makeRotationFromQuaternion(t.q1);r.setWorldRotation(new Gr().setFromMatrix4(n)),t.isOrienting=!1,e.controller.dispatch({type:"render"})}else{let n=lue(t.q0,t.q1,i);r.setWorldRotation(n),r.unsnappedRotation.copy(r.worldRotation3D)}}if(t.objectIdExtendingTo3D&&t.startTime>0){let o=r.grapher3d.webglLayer,i=t.objectIdExtendingTo3D,n=o.domain(),{zmin:a,zmax:s}=n,c=(window.performance.now()-t.startTime)/t.duration;c>=1?(o.setZboundsOnSurfaces(i,-1/0,1/0),t.objectIdExtendingTo3D=void 0):o.setZboundsOnSurfaces(i,c*a,c*s),e.controller.requestRedrawGraph()}if(e.settings.userLockedRotation&&(r.speed3D=0),r.speed3D===0)r.lastRotateTime=window.performance.now();else{let o=window.performance.now(),i=(o-r.lastRotateTime)*.001,n=r.lastRotateTime!=0&&i<2?i*r.speed3D:0;if(n>20*zs/180&&(n=20*zs/180),r.state===td.NONE){let a=r.axis3D,s=new we(a[0],a[1],a[2]),l=T$(s,n);r.setWorldRotation(r.worldRotation3D.multiply(l)),r.unsnappedRotation.copy(r.worldRotation3D)}r.lastRotateTime=o,r.lastAngle=n}}}function L$(r){return r.length!==2?NaN:D$(r[0].pageX-r[1].pageX,r[0].pageY-r[1].pageY)}function CF(r){return __dcg_shared_module_exports__['Uc'](r)}function R$(r,e=.01*(r.xmax-r.xmin)){return e*=2,Math.abs(r.xmin+r.xmax)<=e&&Math.abs(r.ymin+r.ymax)<=e&&Math.abs(r.zmin+r.zmax)<=e}bn();var MF=[];function F$(r){return MF[r]===void 0&&(MF[r]=cue(r)),MF[r]}function cue(r){let e=Math.SQRT1_2,t=[0,0,1,0,0,-1,-e,-e,0,e,-e,0,e,e,0,-e,e,0],o=[0,3,4,0,4,5,0,5,2,0,2,3,1,4,3,1,5,4,1,2,5,1,3,2];function i(n){let a=t.length/3;for(let s=0;s<a;s++)if(n.x===t[3*s+0]&&n.y===t[3*s+1]&&n.z===t[3*s+2])return s;return t.push(n.x,n.y,n.z),a}for(let n=0;n<r;n++){let a=o.length/3;for(let s=0;s<a;s++){let l=o[3*s+0],c=o[3*s+1],p=o[3*s+2],h=new __dcg_shared_module_exports__['jd'](t[3*l+0],t[3*l+1],t[3*l+2]),g=new __dcg_shared_module_exports__['jd'](t[3*c+0],t[3*c+1],t[3*c+2]),m=new __dcg_shared_module_exports__['jd'](t[3*p+0],t[3*p+1],t[3*p+2]),b=new __dcg_shared_module_exports__['jd']().addVectors(h,g).multiply(.5).normalize(),x=new __dcg_shared_module_exports__['jd']().addVectors(g,m).multiply(.5).normalize(),E=new __dcg_shared_module_exports__['jd']().addVectors(m,h).multiply(.5).normalize(),S=i(b),k=i(x),T=i(E);o.push(l,S,T,S,c,k,k,p,T),o[3*s+0]=S,o[3*s+1]=k,o[3*s+2]=T}}return{vertices:new Float32Array(t),indices:new Uint16Array(o)}}var G$={name:"FillShader",defines:{},uniforms:{color:{value:new pt(16777215)},opacity:{value:1}},vertexShader:`
		void main() {
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
		}`,fragmentShader:`
		uniform vec3 color;
		uniform float opacity;
		void main() {
			gl_FragColor = vec4( color, opacity );
		}`};var Hf=class{constructor(){}setSize(e,t){}dispose(){}},due=new Vs(-1,1,1,-1,0,1),Kf=class{constructor(e){let t=new dn;t.setAttribute("position",new no([-1,3,0,-1,-1,0,3,-1,0],3)),t.setAttribute("uv",new no([0,2,0,0,2,0],2)),this._mesh=new Po(t,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,due)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}};var Ra=class extends Hf{constructor(t,o={},i="tDiffuse"){super();this.inputTextureName=i;this.uniforms=jl(t.uniforms),this.defines=t.defines?{...t.defines}:{},this.material=new aa({...o,name:t.name!==void 0?t.name:"unspecified",defines:this.defines,uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader}),this.fsTriangle=new Kf(this.material)}render(t,o,i){this.renderFromTexture(t,o,i.texture)}renderFromTexture(t,o,i){this.uniforms[this.inputTextureName]&&(this.uniforms[this.inputTextureName].value=i),this.fsTriangle.material=this.material,t.setRenderTarget(o),this.fsTriangle.render(t)}dispose(){this.material.dispose(),this.fsTriangle.dispose()}};function Cv(r,e,t=0,o=0,i=e.width,n=e.height,a=new Uint8ClampedArray(4*i*n)){return r.readRenderTargetPixels(e,t,o,i,n,a),a}function _v(r,e,t,o){let i=Cv(r,e,t,o,1,1,new Uint8ClampedArray(4));return[i[0],i[1],i[2],i[3]]}function Mv(r,e,t,o){let i=4*(o*e+t);return[r[i],r[i+1],r[i+2],r[i+3]]}var Iv=new Uint8Array(4),pue=new Float32Array(Iv.buffer);function m_([r,e,t,o]){return Iv[0]=o,Iv[1]=t,Iv[2]=e,Iv[3]=r,pue[0]}function Av(r){let e=r.getContext();if(!(e instanceof WebGL2RenderingContext))throw new Error("WebGL2 is required for waitForFullFlush");return e}async function N$(r){let e=Av(r),t=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);if(!t)throw new Error("Failed to create sync object");e.flush(),await V$(e,t,0,0);let o=performance.now();return e.deleteSync(t),o}function V$(r,e,t,o){return new Promise((i,n)=>{function a(){let s=r.clientWaitSync(e,t,0);if(s===r.WAIT_FAILED){n();return}if(s===r.TIMEOUT_EXPIRED){setTimeout(a,o);return}i()}a()})}async function uue(r,e,t,o,i,n,a){let s=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);if(!s)throw new Error("Failed to create sync object");r.flush(),await V$(r,s,0,10),r.deleteSync(s),r.bindBuffer(e,t),r.getBufferSubData(e,o,i,n,a),r.bindBuffer(e,null)}async function B$(r,e,t,o,i,n,a,s){let l=r.createBuffer();if(!l)throw new Error("Failed to create buffer");return r.bindBuffer(r.PIXEL_PACK_BUFFER,l),r.bufferData(r.PIXEL_PACK_BUFFER,s.byteLength,r.STREAM_READ),r.readPixels(e,t,o,i,n,a,0),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),await uue(r,r.PIXEL_PACK_BUFFER,l,0,s),r.deleteBuffer(l),s}var AF;function U$(){if(AF)return AF;let r=new Ra(G$),e=1,t=1,o=1,i=0,n=r.material;n.uniforms.color.value=new pt().setRGB(e,t,o),n.uniforms.opacity.value=i,n.blending=lC,n.blendEquation=zl,n.blendSrc=dC,n.blendDst=cC;let a=new Uf,s=a.getContext(),l=[ls,Mf,mi],c=[s.FLOAT,s.HALF_FLOAT,s.UNSIGNED_BYTE],p=[new Float32Array(4),new Uint16Array(4),new Uint8Array(4)],h=[1,15360,255],g=[];for(let m=0;m<l.length;m++){let b=new Wi(1,1,{minFilter:ql,magFilter:ql,type:l[m],format:Kl,stencilBuffer:!1,depthBuffer:!0});r.render(a,b,new Wi),s.readPixels(0,0,1,1,s.RGBA,c[m],p[m]);let x=[...p[m]];x[0]/=h[m],x[1]/=h[m],x[2]/=h[m],x[3]/=h[m];let E=(k,T,I=.01)=>k<T+I&&k>T-I,S=s.checkFramebufferStatus(s.FRAMEBUFFER)===s.FRAMEBUFFER_COMPLETE;S=S&&E(x[0],e),S=S&&E(x[1],t),S=S&&E(x[2],o),S=S&&E(x[3],i),S=S||m===l.length-1,b.dispose(),S&&g.push(l[m])}return r.dispose&&r.dispose(),AF=g,g}var LF;function hue(){if(!LF){let r=document.createElement("div");r.className="dcg-3d-debug-root",document.body.appendChild(r),LF=r}return LF}var f_=class{constructor({filter:e}){this.canvases={};e?(this.enabled=!0,this.filter=new RegExp(e)):this.enabled=!1}removeUnused(){for(let e in this.canvases)this.canvases[e].used?this.canvases[e].used=!1:(this.canvases[e].container.remove(),delete this.canvases[e])}get(e,t){let o=t?`${e} ${t}`:e;if(!(!this.enabled||!this.filter.test(o)))return this.canvases[e]||(this.canvases[e]=new PF),this.canvases[e].setLabel(o),this.canvases[e].used=!0,this.canvases[e]}},PF=class{constructor(){this.container=document.createElement("div"),this.container.className="dcg-3d-debug-container",this.canvas=document.createElement("canvas"),this.container.appendChild(this.canvas),hue().appendChild(this.container)}setLabel(e){this.container.setAttribute("dcg-label",e)}renderRawData(e,t,o,i){var a;let n=new ImageData(e,t,o);this.canvas.width=t,this.canvas.height=o,this.container.style.width=t*i+"px",this.container.style.height=o*i+"px",(a=this.canvas.getContext("2d"))==null||a.putImageData(n,0,0)}renderFromTarget(e,t,o){this.renderRawData(Cv(e,t),t.width,t.height,o)}};var z$=`{
  "glyphs": {
    "x": {
      "x_min": 0,
      "x_max": 675,
      "ha": 764,
      "o": "m 675 0 l 525 0 l 331 286 l 144 0 l 0 0 l 256 379 l 12 738 l 157 737 l 336 473 l 516 738 l 661 738 l 412 380 l 675 0 "
    },
    "y": {
      "x_min": 0,
      "x_max": 684.78125,
      "ha": 771,
      "o": "m 684 738 l 388 -83 q 311 -216 356 -167 q 173 -279 252 -279 q 97 -266 133 -279 l 97 -149 q 132 -155 109 -151 q 168 -160 155 -160 q 240 -114 213 -160 q 274 -26 248 -98 l 0 738 l 137 737 l 341 139 l 548 737 l 684 738 "
    },
    "z": {
      "x_min": -0.015625,
      "x_max": 613.890625,
      "ha": 697,
      "o": "m 613 0 l 0 0 l 0 100 l 433 630 l 20 630 l 20 738 l 594 738 l 593 636 l 163 110 l 613 110 l 613 0 "
    }
  },
  "cssFontWeight": "normal",
  "ascender": 1189,
  "underlinePosition": -100,
  "cssFontStyle": "normal",
  "boundingBox": { "yMin": -334, "xMin": -111, "yMax": 1189, "xMax": 1672 },
  "resolution": 1000,
  "original_font_information": {
    "postscript_name": "Helvetiker-Regular",
    "version_string": "Version 1.00 2004 initial release",
    "vendor_url": "http://www.magenta.gr/",
    "full_font_name": "Helvetiker",
    "font_family_name": "Helvetiker",
    "copyright": "Copyright (c) \u039Cagenta ltd, 2004",
    "description": "",
    "trademark": "",
    "designer": "",
    "designer_url": "",
    "unique_font_identifier": "\u039Cagenta ltd:Helvetiker:22-10-104",
    "license_url": "http://www.ellak.gr/fonts/MgOpen/license.html",
    "license_description": "Copyright (c) 2004 by MAGENTA Ltd. All Rights Reserved.\\r\\n\\r\\nPermission is hereby granted, free of charge, to any person obtaining a copy of the fonts accompanying this license (\\"Fonts\\") and associated documentation files (the \\"Font Software\\"), to reproduce and distribute the Font Software, including without limitation the rights to use, copy, merge, publish, distribute, and/or sell copies of the Font Software, and to permit persons to whom the Font Software is furnished to do so, subject to the following conditions: \\r\\n\\r\\nThe above copyright and this permission notice shall be included in all copies of one or more of the Font Software typefaces.\\r\\n\\r\\nThe Font Software may be modified, altered, or added to, and in particular the designs of glyphs or characters in the Fonts may be modified and additional glyphs or characters may be added to the Fonts, only if the fonts are renamed to names not containing the word \\"MgOpen\\", or if the modifications are accepted for inclusion in the Font Software itself by the each appointed Administrator.\\r\\n\\r\\nThis License becomes null and void to the extent applicable to Fonts or Font Software that has been modified and is distributed under the \\"MgOpen\\" name.\\r\\n\\r\\nThe Font Software may be sold as part of a larger software package but no copy of one or more of the Font Software typefaces may be sold by itself. \\r\\n\\r\\nTHE FONT SOFTWARE IS PROVIDED \\"AS IS\\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT OF COPYRIGHT, PATENT, TRADEMARK, OR OTHER RIGHT. IN NO EVENT SHALL MAGENTA OR PERSONS OR BODIES IN CHARGE OF ADMINISTRATION AND MAINTENANCE OF THE FONT SOFTWARE BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, INCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM OTHER DEALINGS IN THE FONT SOFTWARE.",
    "manufacturer_name": "\u039Cagenta ltd",
    "font_sub_family_name": "Regular"
  },
  "descender": -334,
  "familyName": "Helvetiker",
  "lineHeight": 1522,
  "underlineThickness": 50
}
`;var b_=`// License: MIT License (c) 2014 Mikola Lysenko
// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

lowp vec4 encode_float(highp float v) {
  highp float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  highp vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  highp float e = floor(log2(av));
  highp float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  highp float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}
`;var Wf=`
uniform int uDepthPeel; // 1 or 0
uniform vec2 uInverseScreenSize;
uniform highp sampler2D uOpaqueDepthTexture;
uniform highp sampler2D uPrevDepthTexture;
uniform int uDepthPeelLayer;
uniform float uDepthOffset;
`,$f=`
  if (uDepthPeel != 0) {
    vec2 screenPos = gl_FragCoord.xy * uInverseScreenSize;
    float opaqueDepth = texture2D(uOpaqueDepthTexture, screenPos).x;
    if (opaqueDepth + uDepthOffset - gl_FragCoord.z < 0.0) {
      discard;
    }

    if(uDepthPeelLayer != 0){
      vec4 texel = texture2D(uPrevDepthTexture,screenPos);
      float prevDepth = texel.x;
      if(prevDepth + uDepthOffset - gl_FragCoord.z >= 0. ){
        discard;
      }
    }
  }
`;var Cr={Default:0,PickingObjectId:1,PickingX:2,PickingY:3,PickingZ:4,ShowHeatHap:5,SpeedTest:6};function y_(){return{zMinForAnimation:{value:-1/0},zMaxForAnimation:{value:1/0},clip_x:{value:!0},clip_y:{value:!0},clip_z:{value:!0},NaN:{value:NaN},Infinity:{value:1/0}}}var DF=`
#ifdef DCG_SUPPORTS_PICKING
  uniform vec4 pickingColor;
  ${b_}
#endif
`,x_=`#ifdef DCG_SUPPORTS_PICKING
if (dcgRenderMode == ${Cr.PickingObjectId}) {
  #if defined(USE_INSTANCING_PICKINGCOLOR) || defined(USE_VERTEX_PICKING_COLOR)
  gl_FragColor = vPickingColor;
  #else
  gl_FragColor = pickingColor;
  #endif
  return;
} else if (dcgRenderMode == ${Cr.PickingX}) {
  gl_FragColor = encode_float(vPosition.x);
  return;
} else if (dcgRenderMode == ${Cr.PickingY}) {
  gl_FragColor = encode_float(vPosition.y);
  return;
} else if (dcgRenderMode == ${Cr.PickingZ}) {
  gl_FragColor = encode_float(vPosition.z);
  return;
}
#endif
`,fue=`  varying vec3 vPosition;
  uniform bool clip_x;
  uniform bool clip_y;
  uniform bool clip_z;
  uniform float xMin;
  uniform float xMax;
  uniform float yMin;
  uniform float yMax;
  uniform float zMin;
  uniform float zMax;
  uniform float zMinForAnimation;
  uniform float zMaxForAnimation;
  uniform int dcgRenderMode;

  ${DF}
`,bue=`  if (clip_x && (vPosition.x < xMin || vPosition.x > xMax)) {discard;}
  if (clip_y && (vPosition.y < yMin || vPosition.y > yMax)) {discard;}
  if (clip_z && (vPosition.z < zMin || vPosition.z > zMax)) {discard;}
  if ((vPosition.z < zMinForAnimation) || (vPosition.z > zMaxForAnimation)) {discard;}
`,Cp=`  gl_FragColor = LinearTosRGB( gl_FragColor );
`;function v_({variant:r,uvArgs:e,extraMeshArgs:t,restrictionShader:o,maxSurfaceUniforms:i}){let n=[],a;o&&(a=n.push(o)-1);let s;r.type==="colorFunc"&&(s=n.push(r.colorShader)-1);let l=__dcg_shared_module_exports__['Tc'](n,i);return yue({variant:r.type==="colorFunc"?{type:"colorFunc",colorShader:l.sources[s],colorCacheKey:r.colorCacheKey}:r,uvArgs:e,extraMeshArgs:t,restrictionShader:a===void 0?void 0:l.sources[a],shaderFunctions:l.shaderFunctions,shaderUniforms:l.shaderUniforms})}function yue({variant:r,uvArgs:e,extraMeshArgs:t,restrictionShader:o,shaderFunctions:i,shaderUniforms:n}){let a;r.type==="colorFunc"?a=`      vec3 color = getColor();
      if (isnan(color.x) || isnan(color.y) || isnan(color.z)) {discard;}
      vec4 diffuseColor = vec4(color.x, color.y, color.z, opacity );`:a="vec4 diffuseColor = vec4( diffuse, opacity );";let s=r.type==="colorFunc"?__dcg_shared_module_exports__['Oc']`vec3 getColor() {
            ${q$(e,r.colorShader)}
            ${H$(t,r.colorShader)}
            ${r.colorShader}
            }\n`:"",l=__dcg_shared_module_exports__['Rc'](i)+`
`+s+xue(o,q$(e,o),t),c=vue(o)+$f+a,p=/\bvUV\b/.test(l)||/\bvUV\b/.test(c),h=[void 0,"float","vec2","vec3"][t.length],g=h&&(/\bvExtras\b/.test(l)||/\bvExtras\b/.test(c)),m=__dcg_shared_module_exports__['Sc'](n),b=m.uniforms,x=m.declarations,E=`    ${__dcg_shared_module_exports__['Pc']}
    ${x}
    ${p?`varying vec2 vUV;
`:""}
    ${g?`varying ${h} vExtras;
`:""}
    ${Wf}
    ${l}
`,S=(p?`varying vec2 vUV;
`:"")+(g?`attribute ${h} extras;
`:"")+(g?`varying ${h} vExtras;
`:"")+`varying vec3 vPosition;
uniform mat4 dcgModelMatrix;
`,k=`    ${g?"  vExtras = extras; ":""}
    ${p?"  vUV = uv; ":""}
    #ifdef USE_INSTANCING
      vPosition = (instanceMatrix * vec4( position, 1.0 )).xyz;
    #else
      vPosition = (dcgModelMatrix * vec4( position, 1.0 )).xyz;
    #endif
  `,T=r.type==="colorFunc"?"color::"+r.colorCacheKey+"::"+e.join(","):r.type,I=o?"::"+o:"",P=T+I;return{fragmentDeclarations:fue+E,fragmentColorChunk:bue+c,vertexDeclarations:S,vertexPositionChunk:k,cacheKey:P,glslUniforms:b}}function q$(r,e){let t=c=>c==="x"||c==="y"||c==="z",o=r[0],i=r[1],n=new RegExp(`\\b${o}\\b`),a=new RegExp(`\\b${i}\\b`),s=o!==void 0&&!t(o)&&e&&n.test(e),l=i!==void 0&&!t(i)&&e&&a.test(e);return(s?[`float ${o} = vUV.x;`]:[]).concat(l?[`float ${i} = vUV.y;`]:[]).join(`
`)}function H$(r,e){let t=o=>new RegExp(`\\b${o}\\b`).test(e);return["float x = vPosition.x;","float y = vPosition.y;","float z = vPosition.z;"].concat(r.length===1?t(r[0])?`float ${r[0]} = vExtras;`:"":r.map((o,i)=>t(o)?`float ${o} = vExtras.${"xyz"[i]};`:"")).join(`
`)}function xue(r,e,t){return r?__dcg_shared_module_exports__['Oc']`bool restriction() {
      ${e}
      ${H$(t,r)}
      ${r}
      }\n`:""}function vue(r){return r?"if (!restriction()) {discard;}":""}function K$(r){let{cacheKey:e,vertexPositionChunk:t,vertexDeclarations:o,fragmentColorChunk:i,fragmentDeclarations:n,glslUniforms:a}=v_(r),s=`
varying vec3 vViewPosition;
varying vec3 vNormal;

${Oo.common}
${Oo.common_pars_vertex}

${o}

void main() {

	${Oo.common_vertex}

	vViewPosition = - mvPosition.xyz;
	vec3 transformedNormal = vec3( normal );

	#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	#else
	mat3 m = mat3( dcgModelMatrix );
	#endif
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;

	transformedNormal = normalMatrix * transformedNormal;

	#ifdef FLIP_SIDED
		transformedNormal = - transformedNormal;
	#endif
	vNormal = normalize( transformedNormal );

  ${t}
}
`,l=`
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
varying vec3 vNormal;

varying vec3 vViewPosition;

${Oo.common}
${Oo.common_pars_fragment}
${Oo.lights_pars_fragment}

${n}

void main() {

  ${i}

	#if defined( USE_COLOR  ) || defined( USE_INSTANCING_COLOR  )
		diffuseColor.rgb = vColor;
	#endif

	${r.disableLighting.value?"vec4 dcgRawColor = diffuseColor;":""}

	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;

	${Oo.common_fragment_begin}
	float roughnessFactor = roughness;
	float metalnessFactor = metalness;
	float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif

	// non perturbed normal for clearcoat among others
	vec3 geometryNormal = normal;

	// accumulation
	${Oo.lights_fragment}

	// modulation

	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;

	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;

	${x_}

	${Oo.common_fragment_end}

	${r.disableLighting.value?"gl_FragColor.rgb = dcgRawColor.rgb;":""}

	${Cp}

	if (uDepthPeel == 1) {
		// When depth peeling, we render with transparent: false, which causes <opaque_fragment> to set gl_FragColor.a = 1.
		// We need to set it back to the correct value so that it can be respsected in compositing.
		gl_FragColor.a = opacity;
	}
}
`;return{vertex:s,fragment:l,cacheKey:e,glslUniforms:a}}var wue={...jl(hF.common),...jl(hF.lights),roughness:{value:.4},metalness:{value:0},emissive:{value:new pt(0)}},_p=class extends aa{constructor(t){var c;let{vertex:o,fragment:i,cacheKey:n,glslUniforms:a}=K$({...t,maxSurfaceUniforms:(c=t.maxSurfaceUniforms)!=null?c:0,disableLighting:t.globalUniforms.disableLighting}),s=typeof t.color=="string"&&__dcg_shared_module_exports__['Rd'](t.color)?"#808080":t.color,l={...jl(wue),...y_(),...t.graphUniforms,...t.globalUniforms,opacity:{value:t.opacity},diffuse:{value:new pt(s)},map:{value:t.map},...a};super({name:"GraphSurfaceMaterial",wireframe:t.wireframe,vertexShader:o,fragmentShader:i,opacity:t.opacity,side:ss,lights:!0,uniforms:l});this.defines={DCG_SUPPORTS_PICKING:!1};this.vertexColors=t.vertexColors,this.map=t.map,this.defines.DCG_SUPPORTS_PICKING=!0,this.cacheKey=n}setEmissiveIntensity(t){let o=new pt(16777215);o.multiplyScalar(t),this.uniforms.emissive.value.copy(o)}customProgramCacheKey(){return this.cacheKey}};function W$(r){let{cacheKey:e,vertexPositionChunk:t,vertexDeclarations:o,fragmentColorChunk:i,fragmentDeclarations:n,glslUniforms:a}=v_(r),s=`
  ${Oo.common}
  ${Oo.common_pars_vertex}

  ${o}

void main() {
  ${Oo.common_vertex}

  ${t}
}
`,l=`
uniform vec3 diffuse;
uniform float opacity;
varying vec3 vNormal;

${Oo.common}
${Oo.common_pars_fragment}

${n}

void main() {

  ${i}

  ${Oo.common_fragment_begin}
  float specularStrength = 1.0;

	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );

	// accumulation (baked indirect lighting only)
	reflectedLight.indirectDiffuse += vec3( 1.0 );

	// modulation

	reflectedLight.indirectDiffuse *= diffuseColor.rgb;

	vec3 outgoingLight = reflectedLight.indirectDiffuse;

  ${Oo.common_fragment_end}

	${Cp}
}
`;return{vertex:s,fragment:l,cacheKey:e,glslUniforms:a}}var w_=class extends aa{constructor(e){let{vertex:t,fragment:o,cacheKey:i,glslUniforms:n}=W$({extraMeshArgs:[],restrictionShader:void 0,uvArgs:[],variant:{type:"zClip"},disableLighting:e.globalUniforms.disableLighting,maxSurfaceUniforms:0}),a=typeof e.color=="string"&&__dcg_shared_module_exports__['Rd'](e.color)?"#808080":e.color,s={...y_(),...e.graphUniforms,...e.globalUniforms,roughness:{value:.4},metalness:{value:0},opacity:{value:e.opacity},diffuse:{value:new pt(a)},...n};super({name:"LineMaterial",vertexShader:t,fragmentShader:o,opacity:e.opacity,side:ss,uniforms:s}),this.cacheKey=i}setColor(e){this.uniforms.diffuse.value.copy(e)}setOpacity(e){this.opacity=this.uniforms.opacity.value=e}customProgramCacheKey(){return this.cacheKey}};var{abs:jf,min:$$,max:Y$}=Math,X$=11184810,Sue=3355443,S_="#444444",T_="#bbbbbb",Tue=1e-4;function J$(r){let e=new pt(X$),t=new pt(Sue);return{axisMaterial:j$(e,r),tickMaterial:j$(t,r)}}function OF(r,e,t){return new E_(new dh(new we(r.xmin,r.ymin,r.zmin),new we(r.xmax,r.ymax,r.zmax)),new pt(e),t)}function Z$(r,e){let t=r.box;t.min.x=e.xmin,t.max.x=e.xmax,t.min.y=e.ymin,t.max.y=e.ymax,t.min.z=e.zmin,t.max.z=e.zmax,r.updateMatrixWorld()}function RF(r){r.dispose()}var kue=new Tv(JSON.parse(z$));function j$(r,e){let t=new _p({color:r,extraMeshArgs:[],map:void 0,opacity:1,restrictionShader:void 0,uvArgs:[],variant:{type:"zClip"},wireframe:!1,vertexColors:!1,globalUniforms:e,graphUniforms:{clip_x:{value:!1},clip_y:{value:!1},clip_z:{value:!1}}});return t.customProgramCacheKey=()=>"axis-material",t}function Q$(r,e){let{xmin:t,xmax:o,ymin:i,ymax:n,zmin:a,zmax:s}=r,l=$$(e.width,e.height),c=.05*(l>360?1:l>120?360/l:4-l/120),p=4,h=p*c/.08,g=__dcg_shared_module_exports__['Ob'](0,t,o),m=__dcg_shared_module_exports__['Ob'](0,i,n),b=__dcg_shared_module_exports__['Ob'](0,a,s),x=o-t,E=n-i,S=s-a,k=4*((g-t)/x-.5),T=4*((m-i)/E-.5),I=4*((b-a)/S-.5),P=s<=0?-4:$$(4*s/S,4);return{textSize:c,scale:p,delta:h,zLen:P,x:k,y:T,z:I}}var ej=.02,Xl=7*ej;function tj(r,e,t,{axisMaterial:o}){let{xmin:i,xmax:n,ymin:a,ymax:s,zmin:l,zmax:c}=r,p=n-i,h=s-a,g=c-l,m=(n+i)/2,b=(s+a)/2,x=(c+l)/2,E=new Io,S=Math.PI,k=ej,{textSize:T,scale:I,delta:P,zLen:A,x:D,y:G,z:N}=Q$(r,e);function U(F){return new Po(new $l(.8*k,.8*k,F,10),o)}function K(){return new Po(new PC(2*k,Xl,16),o)}function H(F,V,B,L=1){return F.position.set(B[0],B[1],B[2]),F.setRotationFromEuler(yh(V[0],V[1],V[2])),F.scale.set(L,L,L),F.name="axes",E.add(F),F}function w(F,V,B=1){let L=Mue(F,o);L.translateX(-V[0]*P),L.translateY(-V[1]*P),L.scale.set(B,B,B),L.name="axes";let q=aj(L);q.name=F,E.add(q)}return H(U(4-6*k),[0,0,S/2],[-Xl/2,G,N]),H(U(4-6*k),[0,0,0],[D,-Xl/2,N]),H(U(4-6*k),[-S/2,0,0],[D,G,-Xl/2]),H(K(),[0,0,-S/2],[2-Xl/2,G,N]),H(K(),[0,0,0],[D,2-Xl/2,N]),H(K(),[S/2,0,0],[D,G,N+Y$(A,0)-Xl/2]),t&&(w("x",[.027,.03],T*I),w("y",[.025,.02],T*I),w("z",[.025,.03],T*I)),E.scale.set(p/4,h/4,g/4),E.position.set(m,b,x),E}function FF(r){for(let e of r.getObjectsByProperty("name","axes"))e.geometry.dispose()}function rj(r){r.axisMaterial.dispose(),r.tickMaterial.dispose()}function oj({axes:r,plane:e,domain:t,screen:o,controls:i,invertedColors:n,isDepthPeelingActive:a}){let s=i.worldRotation3D,{xmax:l,ymax:c,zmax:p}=t,{scale:h,delta:g,zLen:m,x:b,y:x,z:E}=Q$(t,o);if(r===void 0)return;let S=Math.PI,k=r.getObjectByName("x"),T=r.getObjectByName("y"),I=r.getObjectByName("z"),P=new we(1,0,0).applyMatrix3(s),A=new we(0,1,0).applyMatrix3(s),D=new we(0,0,1).applyMatrix3(s);function G(ke,Le,$e){ke==null||ke.setRotationFromEuler(yh(Le[0],Le[1],Le[2])),ke==null||ke.position.set($e[0],$e[1],$e[2])}function N(ke){return Math.acos(__dcg_shared_module_exports__['Ob'](ke,-1,1))}let U=l<=0?-1:1,K=c<=0?-1:1,H=p<=0?-1:1,w=[U*(.5*h+.05*g),x,E],F=[b,K*(.5*h+.05*g),E],V=[b,x,H*(E+Y$(m,0)+.04*g)],B=i.speed3D===0||i.grapher3d.isDragging,L=jf(i.axis3D[0])>.99,q=jf(i.axis3D[1])>.99,le=jf(i.axis3D[2])>.99,$=B||L,ne=B||q,ue=B||le,{isXYsnapped:de,isZsnapped:pe}=i,Y=jf(P.y)>.99&&de&&$,j=jf(A.y)>.99&&de&&ne;if(jf(D.z)<.001&&pe&&ue)G(k,[S,0,S],w),G(T,[S,S,S],F),G(I,[S/2,0,0],V);else{let ke=D.z<0?1:-1,Le=A.y<0?1:-1,$e=-ke*(S/2),J=(A.x*P.y<0?1:-1)*N(A.z),ve=-ke*N(-Le*P.z),Ie=Y?J:S/2,He=j?ve:$e,ge=(A.y<0?-1:1)*N(P.y)+S,Ze=Le*S/2;G(k,[Ie,0,0],w),G(T,[He,0,Ze],F),G(I,[$e,0,ge],V);let rt=e==null?void 0:e.getObjectByName("z plane");rt==null||rt.setRotationFromEuler(yh(S/2,0,ge))}let fe=new we(0,0,1).applyMatrix3(i.worldRotation3D).x;e==null||e.updateZOffsets(fe<0);let Se;e!=null&&e.xyPlane&&(Se=e.xyPlane.material,Se.uniforms.diffuse.value=new pt(n?0:16777215)),_ue({invertedColors:n,obliqueness:fe,domainPlaneMaterial:Se,isDepthPeelingActive:a})}var k_=class extends vv{constructor(e,t,o,i,n){super();let{showNumbers3D:a,showPlane3D:s}=o.settings,{xmin:l,xmax:c,ymin:p,ymax:h,zmin:g,zmax:m}=e,[b,x,E]=[c-l,h-p,m-g],S=__dcg_shared_module_exports__['Ob'](0,g,m);this.basePosition=new we((c+l)/2,(h+p)/2,S),this.zOffset=Tue*(m-g);let k=new yv(b,x);if(this.xyNumbersPlane=new Po(k,t.xyNumbersMaterial),this.xyNumbersPlane.name="xy numbers plane",this.xyPlane=new Po(k,t.xyPlaneMaterial),this.xyPlane.name="xy plane",s){this.add(this.xyPlane);let T=new E_(new dh(new we(l,p,S),new we(c,h,S)),new pt(X$),n);T.name="xy border",this.add(T)}if(a){this.add(this.xyNumbersPlane),this.add(Cue(o,e,i));let T=new yv(4,4),I=new Po(T,t.zMaterial),P=aj(I),[A,D]=[__dcg_shared_module_exports__['Ob'](0,l,c),__dcg_shared_module_exports__['Ob'](0,p,h)];I.setRotationFromEuler(yh(Math.PI/2,0,0)),I.name="z plane",P.scale.set(b/4,x/4,E/4),P.position.set(A,D,(m+g)/2),Eue(t.zCanvas,o,e),t.zMaterial.uniforms.map.value.needsUpdate=!0,this.add(P)}}updateZOffsets(e){var a,s;let{x:t,y:o,z:i}=this.basePosition,n=e?this.zOffset:-this.zOffset;this.xyPlane&&((a=this.xyPlane)==null||a.position.set(t,o,i-n),this.xyPlane.renderOrder=0),this.xyNumbersPlane&&((s=this.xyNumbersPlane)==null||s.position.set(t,o,i+2*n),this.xyNumbersPlane.renderOrder=2)}};function Eue(r,e,t){let o=r.getContext("2d");if(o===null)return;let i=ij(e,t),n=e.settings.labelSize,{xmin:a,xmax:s,zmin:l,zmax:c}=t,p=[];for(let T of i){let I=__dcg_shared_module_exports__['aa'](T,c-l);p.push(new an(I,n))}o.save(),o.scale(window.devicePixelRatio,window.devicePixelRatio),o.clearRect(0,0,e.screen.width,e.screen.height),o.fillStyle=`rgba(${e.settings.config.invertedColors?"0,0,0":"255,255,255"},0.001961)`,o.fillRect(0,0,e.screen.width,e.screen.height),o.lineWidth=1.5,o.miterLimit=2,o.strokeStyle=e.settings.getBackgroundColor({invertWhite:!0});let h=5,g=e.settings.getTextColor({invertBlack:!0}),m=e.screen.width,b=e.screen.height,x={left:3,top:3,right:m-3,bottom:b-3},E=new __dcg_shared_module_exports__['Qe'](a,s,l,c,l,c),S=new oa(e.screen,E,e.settings),k=r.width/window.devicePixelRatio/2;for(let T of p){let I={x:k-h-T.getRect().right,y:S.mapy(T.getValue())},P=T.clampBoundsWithinRect(I,x);o.fillStyle=g,T.drawCenteredAt(o,P,"")}o.restore()}function ij(r,e){let{zmin:t,zmax:o}=e,i={...r.viewport,ymin:t,ymax:o},n={...r,viewport:i},{majorStepY:a}=Da(n),s=Ln(t,o,a);return o>0&&(s=s.filter(l=>l!=0)),s}function Iue(r,e){let{zmin:t,zmax:o}=e;return ij(r,e).filter(n=>n<=o-Xl/4*(o-t))}function Cue(r,e,{tickMaterial:t}){let{xmin:o,xmax:i,ymin:n,ymax:a,zmin:s,zmax:l}=e,c=__dcg_shared_module_exports__['Ob'](0,o,i),p=__dcg_shared_module_exports__['Ob'](0,n,a),h=__dcg_shared_module_exports__['Ob'](0,s,l),g=Math.PI,m=.004,b=m*(i-o),x=m*(a-n),E=m*(l-s),S=new vv,k=.4;for(let P of Iue(r,e)){let A=new $l,D=new Po(A,t);D.position.set(c,p,P),D.scale.set(b,k*E,x),D.setRotationFromEuler(yh(g/2,0,0)),D.name="ticks",S.add(D)}let{majorStepX:T,majorStepY:I}=Da(r);for(let P of Ln(o,i,T)){if(P>i-Xl/4*(i-o))continue;let A=new $l,D=new Po(A,t);D.position.set(P,p,h),D.scale.set(x,k*b,E),D.setRotationFromEuler(yh(0,0,g/2)),D.name="ticks",S.add(D)}for(let P of Ln(n,a,I)){if(P>a-Xl/4*(a-n))continue;let A=new $l,D=new Po(A,t);D.position.set(c,P,h),D.scale.set(E,k*x,b),D.setRotationFromEuler(yh(0,g/2,0)),D.name="ticks",S.add(D)}return S}function _ue({obliqueness:r,domainPlaneMaterial:e,invertedColors:t}){if(!e)return;e.uniforms.obliqueness.value=Math.abs(r);let o=t?__dcg_shared_module_exports__['Hd'](S_):S_,i=t?__dcg_shared_module_exports__['Hd'](T_):T_;e.setGridColors({major:o,minor:i})}function nj(r){var o,i,n,a;let e=s=>r.getObjectByName(s);(o=e("xy numbers plane"))==null||o.geometry.dispose(),(i=e("xy plane"))==null||i.geometry.dispose(),(n=e("z plane"))==null||n.geometry.dispose(),(a=e("xy border"))==null||a.dispose();let t=r.getObjectsByProperty("name","ticks");for(let s of t)s.geometry.dispose()}function GF(r){r.uniforms.map.value.dispose(),r.dispose()}function aj(r){let e=new Io;return e.add(r),e}function Mue(r,e){let t=new Sv(r,{font:kue,size:1,height:.02,curveSegments:12,bevelEnabled:!0,bevelThickness:.04,bevelSize:.04,bevelOffset:0,bevelSegments:5});return new Po(t,e)}var yh=(r,e,t)=>new Ki(r,e,t,"ZYX"),E_=class extends FC{constructor(t,o,i){let n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new dn;s.setIndex(new Ai(n,1)),s.setAttribute("position",new no(a,3));super(s,new w_({color:o,opacity:1,graphUniforms:{clip_x:{value:!1},clip_y:{value:!1},clip_z:{value:!1}},globalUniforms:i}));this.type="Box3Helper";this.box=t,this.geometry.computeBoundingSphere()}updateMatrixWorld(t){let o=this.box;o.isEmpty()||(o.getCenter(this.position),o.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}};var xh=class extends aa{constructor(e,t){super({name:"DomainPlaneMaterial",side:ss,transparent:e.transparent,vertexShader:`
        varying vec3 vPosition;
        void main() {
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
          vPosition = position;
        }
      `,fragmentShader:`
        uniform mat4 projectionMatrix;
        uniform mat4 modelViewMatrix;

        varying vec3 vPosition;
        uniform int dcgRenderMode;
        uniform vec2 uScreenSize;
        uniform float xMin;
        uniform float xMax;
        uniform float yMin;
        uniform float yMax;

        uniform vec3 diffuse;
        uniform float opacity;

        uniform float xMinorStep;
        uniform float yMinorStep;
        uniform float xMajorStep;
        uniform float yMajorStep;
        uniform vec3 majorGridColor;
        uniform vec3 minorGridColor;
        uniform float obliqueness;

        ${Wf}
        ${DF}

        float getNearestStep(float t, float step) {
          float prev = step * floor(t / step);
          float next = prev + step;
          return abs(t - prev) < abs(t - next) ? prev : next;
        }

        vec2 projectToScreen(vec3 p) {
          vec4 pNDC = projectionMatrix * modelViewMatrix * vec4(p, 1.0);
          pNDC /= pNDC.w;
          return 0.5 * (pNDC.xy + 1.0) * uScreenSize;
        }

        bool isMajorStep(float s, float minorStep, float majorStep) {
          return mod(s, majorStep) < minorStep * 0.125;
        }

        void main() {
          ${$f}
          ${x_}
          // the xyPlane geometry is shifted in domain3d-objects to reduce cancellation error
          float x0 = (xMin + xMax) / 2.;
          float y0 = (yMin + yMax) / 2.;
          float xNearest = getNearestStep(vPosition.x + x0, xMinorStep);
          float yNearest = getNearestStep(vPosition.y + y0, yMinorStep);
          bool xIsMajor = isMajorStep(xNearest, xMinorStep, xMajorStep);
          bool yIsMajor = isMajorStep(yNearest, yMinorStep, yMajorStep);
          vec2 xNearestScreen = projectToScreen(vec3(xNearest - x0, vPosition.y, vPosition.z));
          vec2 yNearestScreen = projectToScreen(vec3(vPosition.x, yNearest - y0, vPosition.z));
          float xDist = distance(gl_FragCoord.xy, xNearestScreen);
          float yDist = distance(gl_FragCoord.xy, yNearestScreen);
          float minDist = xDist < yDist ? xDist : yDist;
          bool isMajor = xDist < yDist ? xIsMajor : yIsMajor;

          vec4 grid = vec4(0.0);
          float baseWidth = 0.0;
          float feather = 2.0;
          if (obliqueness < FADE_THRESHOLD) {
            baseWidth = 3.0 * (1.0 - obliqueness / FADE_THRESHOLD);
            feather = 2.0 * obliqueness / FADE_THRESHOLD;
          }
          if (minDist <= baseWidth + feather) {
            vec3 gridColor = isMajor ? majorGridColor : minorGridColor;
            // We want integral of blurFactor to be 1.0 over the whole region
            //
            //   baseWidth
            //   --------------
            //   |            |            //   |            |             // h |            |              //   |            |               //   |            |                //   -------------|-----
            //               feather (2.0)
            // h * baseWidth + h * feather / 2 = 1
            // h = 1 / (baseWidth + feather / 2)
            float h = 1.0 / (baseWidth + feather / 2.0);
            float blurFactor = h - max(0.0, (minDist - baseWidth)) / feather;
            grid = vec4(gridColor, blurFactor);
          }

          // Composite the grid color ("grid") onto the domain plane color (diffuse, opacity)
          float composedAlpha = mix(opacity, grid.a, grid.a);
          vec3 composedColor = mix(diffuse*opacity, grid.rgb*grid.a, grid.a) / composedAlpha;
          gl_FragColor = vec4(composedColor, composedAlpha);

          ${Cp}
        }
      `,defines:{DCG_SUPPORTS_PICKING:!0,FADE_THRESHOLD:.4},uniforms:{opacity:{value:e.opacity},diffuse:{value:e.color},majorGridColor:{value:new pt(S_)},minorGridColor:{value:new pt(T_)},obliqueness:{value:1},...t}})}setGridColors({major:e,minor:t}){this.uniforms.majorGridColor.value=new pt(e),this.uniforms.minorGridColor.value=new pt(t)}};var vh=class extends aa{constructor(e,t){let o=new s_(e.canvas);super({name:"DomainPlaneNumbersMaterial",side:ss,transparent:e.transparent,vertexShader:`
        varying vec2 vUv;

        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
      `,fragmentShader:`

        uniform sampler2D map;
        uniform float opacity;
        varying vec2 vUv;
        uniform int dcgRenderMode;

        ${Wf}

        uniform float alphaTest;

        void main() {
          ${$f}

          vec4 sampleColor = texture2D( map, vUv );

          // When we're only showing numbers, we clear the canvas with a low alpha and discard it here.
          if ( sampleColor.a < alphaTest ) {
            discard;
          }

          #ifdef OPAQUE
          if (uDepthPeel == 0) {
            sampleColor.a = 1.0;
          }
          #endif

          gl_FragColor = sampleColor;

          ${Cp}
        }
      `,uniforms:{map:{value:o},alphaTest:{value:.1},...t}}),this.canvas=e.canvas,this.texture=o}dispose(){super.dispose(),this.texture.dispose()}};var Aue={name:"DepthPeelLayerAddJittersShader",uniforms:{uCompositeType:{value:0},uTextureA:{value:null},uTextureB:{value:null},weight:{value:1}},defines:{},vertexShader:`
    varying vec2 vUv;
    void main(){
      vUv = uv;
      gl_Position = vec4(position.xy,0.,1.);
    }
  `,fragmentShader:`
    varying vec2 vUv;
    uniform sampler2D uTextureA;
    uniform sampler2D uTextureB;
    uniform int uCompositeType;
    uniform float weight;
    void main() {
      vec4 src = texture2D(uTextureA,vUv);
      src.a *= weight;
      vec4 dst = uCompositeType == 1 ? texture2D(uTextureB,vUv) : vec4(0.0);
      // Convert src, dst to premultiplied, and do the addition in premultiplied space.
      // We don't want to store the buffers premultiplied since that loses dynamic range.
      src.rgb *= src.a;
      dst.rgb *= dst.a;
      gl_FragColor = src + dst;
      // Convert output back to non-premultiplied
      // Don't need to check for division by zero, since it gets converted to a buffer 0-255 (an integer, not NaN),
      // which we will then multiply by 0 (the alpha).
      gl_FragColor.rgb /= gl_FragColor.a;
    }
  `},I_=class{constructor(){this.shaderPass=new Ra(Aue,{depthTest:!1,depthWrite:!1,transparent:!1},"uTextureA")}dispose(){this.shaderPass.dispose()}addInPremultiplied(e,t,o,i,n){this.shaderPass.uniforms.weight.value=i,n instanceof pt?(this.shaderPass.uniforms.uCompositeType.value=0,this.shaderPass.uniforms.uTextureB.value=null):(this.shaderPass.uniforms.uTextureB.value=n.texture,this.shaderPass.uniforms.uCompositeType.value=1),this.shaderPass.renderFromTexture(e,t,o.texture)}};var Lue={name:"DepthPeelLayerCompositeShader",uniforms:{uTopTexture:{value:null},uBottomTexture:{value:null},uBackgroundColor:{value:new pt(0)},uCompositeType:{value:0}},defines:{},vertexShader:`
    varying vec2 vUv;
    void main(){
      vUv = uv;
      gl_Position = vec4(position.xy,0.,1.);
    }
  `,fragmentShader:`
    varying vec2 vUv;
    uniform sampler2D uTopTexture;
    uniform sampler2D uBottomTexture;
    uniform vec3 uBackgroundColor;
    uniform int uCompositeType;
    void main() {
      vec4 top = texture2D(uTopTexture,vUv);
      vec4 bot = uCompositeType == 1 ? texture2D(uBottomTexture,vUv) : vec4(uBackgroundColor, 1.0);
      // Convert top, bot to premultiplied, and do the addition in premultiplied space.
      // We don't want to store the buffers premultiplied since that loses dynamic range.
      top.rgb *= top.a;
      bot.rgb *= bot.a;
      gl_FragColor = top + bot * (1. - top.a);
      // Convert output back to non-premultiplied
      gl_FragColor.rgb /= gl_FragColor.a;
    }
  `},C_=class{constructor(){this.shaderPass=new Ra(Lue,{depthTest:!1,depthWrite:!1,transparent:!1},"uTopTexture")}dispose(){this.shaderPass.dispose()}composite(e,t,o,i){i instanceof pt?(this.shaderPass.uniforms.uCompositeType.value=0,this.shaderPass.uniforms.uBackgroundColor.value=i,this.shaderPass.uniforms.uBottomTexture.value=null):(this.shaderPass.uniforms.uCompositeType.value=1,this.shaderPass.uniforms.uBackgroundColor.value=new pt(0),this.shaderPass.uniforms.uBottomTexture.value=i.texture),this.shaderPass.renderFromTexture(e,t,o.texture)}};var Lv=4,Pue={name:"MaxWindow",uniforms:{tDiffuse:{value:null},sourcePixelSize:{value:new bt(1,1)},destPixelSize:{value:new bt(1,1)}},defines:{},vertexShader:`
  varying vec2 vUv;

  void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
  }`,fragmentShader:`
  uniform float weight;
  uniform sampler2D tDiffuse;
  uniform vec2 sourcePixelSize;
  uniform vec2 destPixelSize;
  varying vec2 vUv;

  void main() {
    vec2 demi = vec2(0.5,0.5);
    vec2 xy = destPixelSize * vUv - demi;
    vec4 maxAccum = vec4(0.);
    for (float i=0.; i < ${Lv}.0; i+=1.) {
      for (float j=0.; j < ${Lv}.0; j+=1.) {
        vec2 xySample = min(
          xy * ${Lv}.0 + vec2(i,j) + demi,
          sourcePixelSize
        );
        vec2 uvSample = xySample / sourcePixelSize;
        vec4 val = texture2D(tDiffuse, uvSample);
        maxAccum = max(maxAccum, val);
      }
    }
    gl_FragColor = maxAccum;
  }`},NF=class{constructor(){this.shaderPass=new Ra(Pue,{depthTest:!1,depthWrite:!1,transparent:!0})}dispose(){this.shaderPass.dispose()}render(e,t,o){this.shaderPass.uniforms.sourcePixelSize={value:new bt(o.width,o.height)},this.shaderPass.uniforms.destPixelSize={value:new bt(t.width,t.height)},e.setRenderTarget(t),e.setClearColor(new pt(0),0),e.clear(),this.shaderPass.render(e,t,o)}},__=class{constructor(e,t){this.targetType=t;this.maxPass=new NF;this.maxMipmapTargets=[];let o=e.x,i=e.y;for(let n=0;o=Math.ceil(o/Lv),i=Math.ceil(i/Lv),o>1||i>1;n++)this.maxMipmapTargets[n]=this.createTarget(o,i)}dispose(){for(let e of this.maxMipmapTargets)e.dispose();this.maxPass.dispose()}createTarget(e,t){return new Wi(e,t,{minFilter:Pn,magFilter:Pn,type:this.targetType,colorSpace:Hi})}renderMax(e,t,o,i,n,a){var s;for(let l=0;l<=this.maxMipmapTargets.length;l++){let c=l===0?o:this.maxMipmapTargets[l-1],p=l<this.maxMipmapTargets.length?this.maxMipmapTargets[l]:t;this.maxPass.render(e,p,c)}for(let l=0;l<this.maxMipmapTargets.length;l++){let c=this.maxMipmapTargets[l];(s=i.get(`max-mm-p${n}-${l}`,`${c.width}x${c.height}`))==null||s.renderFromTarget(e,c,a*Math.min(o.width/c.width,o.height/c.height))}}};function Due(r,e){if(r===void 0&&e===void 0)return!0;if(r===void 0||e===void 0||Object.keys(r).length!==Object.keys(e).length)return!1;for(let t in Object.keys(r))if(r[t]!==e[t])return!1;return!0}function sj(r,e){return r.name===e.name&&Due(r.defines,e.defines)&&r.vertexShader===e.vertexShader&&r.fragmentShader===e.fragmentShader}var M_=class extends Hf{constructor(e,t={}){super(),this.uniforms=jl(e.uniforms),this.defines=e.defines?{...e.defines}:{},this.material=new aa({...t,name:e.name!==void 0?e.name:"unspecified",defines:this.defines,uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}),this.fsTriangle=new Kf(this.material)}render(e,t){this.fsTriangle.material=this.material,e.setRenderTarget(t),this.fsTriangle.render(e)}dispose(){this.material.dispose(),this.fsTriangle.dispose()}};var lj=1.01;function Oue(r){let e="iFloat fi = f(xi, yi, zi);";r.intervalRestrictionSource&&(e+=`
      if (!(restriction(xi, yi, zi).u)) { fi = iFloat(1., 1., dContinuous); } 
    `);let t="(fi.u < 0.0 || 0.0 < fi.l || fi.deco == dNaN)",o=r.color,i=o.type==="shader"?"color_fn(x, y, z);":"colorUniform;",n=o.type==="shader"?`vec3 color_fn(float x, float y, float z) { ${o.source} }`:"",a=`
    if (fi.l <= 0.0 && 0.0 <= fi.u && fi.deco != dNaN) {
      
      bool isContinuous;
      if (fi.deco >= dContinuous) {
        isContinuous = true;
      } else {
        iFloat x2i = iFloat(0.5*(xi.l+xi.u)-(xi.u - xi.l), 0.5*(xi.l+xi.u)+(xi.u - xi.l), dContinuous);
        iFloat y2i = iFloat(0.5*(yi.l+yi.u)-(yi.u - yi.l), 0.5*(yi.l+yi.u)+(yi.u - yi.l), dContinuous);
        iFloat z2i = iFloat(0.5*(zi.l+zi.u)-(zi.u - zi.l), 0.5*(zi.l+zi.u)+(zi.u - zi.l), dContinuous);
        iFloat f2i = f(x2i, y2i, z2i);
        isContinuous = (
          ((fi.l) == 0.0 || ${lj}*(fi.l) > (f2i.l)) &&
          ((fi.u) == 0.0 || ${lj}*(fi.u) < (f2i.u))
        );
      }

      if (isContinuous) {
        
        float t = (ti.l + ti.u) / 2.0;
        vec3 p = r.o + r.d * t;
        vec3 n = normal(p);
        vec3 normal = faceforward(n, r.d, n);
        float x = p.x;
        float y = p.y;
        float z = p.z;
        vec3 color = showHeatmap ? heatMap(numEvals, true) : ${i}
        vec4 pickingColor = uPickingColor;
        return Solution(t, p, normal, color, pickingColor);
      }
    }
  `,s,l=r.operator;switch(l){case"=":s=`
        bool hasSurfaceBetween(float f0, float f1) {
          return !isnan(f0) && !isnan(f1) && min(f0, f1) <= 0. && 0. <= max(f0, f1);
        }`;break;case">=":case">":s=`
        bool hasSurfaceBetween(float f0, float f1) {
          if (isnan(f0))
            return f1 >= 0.;
          if (isnan(f1))
            return f0 >= 0.;
          return min(f0, f1) <= 0. && max(f0, f1) ${l} 0.;
        }
      `;break}return`
struct Ray {
  vec3 o;
  vec3 d;
};

struct Solution {
  float t;
  vec3 p;
  vec3 normal;
  vec3 color;
  vec4 pickingColor;
};

const int kMaxIntervalSearchDepth = 16;
const int kMaxIntervalSearchEvals = 160;

${n}

vec3 normal(vec3 p) {
  float ex = (xMax-xMin)*1e-4;
  float ey = (yMax-yMin)*1e-4;
  float ez = (zMax-zMin)*1e-4;
  return normalize(vec3(
      (g(p.x + ex, p.y, p.z) - g(p.x - ex, p.y, p.z))/ex,
      (g(p.x, p.y + ey, p.z) - g(p.x, p.y - ey, p.z))/ey,
      (g(p.x, p.y, p.z + ez) - g(p.x, p.y, p.z - ez))/ez
  ));
}

int trailingOnes(int x) {
  int y = x^(x+1);
  return y == 0 ? 0 : int(log2(float(y)));
}

vec3 heatMap(int n, bool foundSolution) {
  if (dcgRenderMode == ${Cr.SpeedTest}) {
    float k = clamp(float(n), 0., 255.);
    return vec3(k / 255.); 
  }
  const int bin0 = 2 * kMaxIntervalSearchDepth;
  const int binWidth = (kMaxIntervalSearchEvals - bin0) / 5;
  vec3 color = vec3(0);
  if (n < bin0 + binWidth) color = vec3(0, 1., 0.);
  else if (n < bin0 + 2*binWidth) color = vec3(1., 243./255., 59./255.);
  else if (n < bin0 + 3*binWidth) color = vec3(1., 199./255., 12./255.);
  else if (n < bin0 + 4*binWidth) color = vec3(243./255., 144./255., 63./255.);
  else if (n < kMaxIntervalSearchEvals) color = vec3(234./255., 63./255., 58./255.);
  return foundSolution ? color : mix(color, vec3(1), 0.75);
}

bool shouldShowHeatmap() {
  return dcgRenderMode == ${Cr.ShowHeatHap} || dcgRenderMode == ${Cr.SpeedTest};
}

${s}



Solution bisect(Ray r, float t0, float t2, float tMin, float tMax, int minFace, int maxFace) {
  const int kBisectionSteps = 20;
  bool showHeatmap = shouldShowHeatmap();
  float x0 = r.o.x + r.d.x * t0;
  float y0 = r.o.y + r.d.y * t0;
  float z0 = r.o.z + r.d.z * t0;
  if (clipToBox && t0 == tMin) {
    switch (minFace) {
      case kFaceMinX: x0 = xMin; break;
      case kFaceMinY: y0 = yMin; break;
      case kFaceMinZ: z0 = zMin; break;
      case kFaceMaxX: x0 = xMax; break;
      case kFaceMaxY: y0 = yMax; break;
      case kFaceMaxZ: z0 = zMax; break;
    }
  }
  float g0 = g(x0,y0,z0);
  float x2 = r.o.x + r.d.x * t2;
  float y2 = r.o.y + r.d.y * t2;
  float z2 = r.o.z + r.d.z * t2;
  if (clipToBox && t2 == tMax) {
    switch (maxFace) {
      case kFaceMinX: x2 = xMin; break;
      case kFaceMinY: y2 = yMin; break;
      case kFaceMinZ: z2 = zMin; break;
      case kFaceMaxX: x2 = xMax; break;
      case kFaceMaxY: y2 = yMax; break;
      case kFaceMaxZ: z2 = zMax; break;
    }
  }
  float g2 = g(x2,y2,z2);
  for (int k = 0; k < kBisectionSteps; k++) {
    float t1 = (t0 + t2)/2.0;
    if (t1 == t0 || t1 == t2) break;
    float x1 = r.o.x + r.d.x * t1;
    float y1 = r.o.y + r.d.y * t1;
    float z1 = r.o.z + r.d.z * t1;
    float g1 = g(x1,y1,z1);
    if (hasSurfaceBetween(g0, g1)) {
      t2 = t1;
      g2 = g1;
    } else {
      t0 = t1;
      g0 = g1;
    }
  }


  if (!hasSurfaceBetween(g0, g2)) {
    return Solution(-1.0, vec3(1), vec3(0), shouldShowHeatmap() ? heatMap(kMaxIntervalSearchEvals, false) : vec3(0), vec4(0));
  }

  float t = (t0 + t2) / 2.;
  vec3 p = r.o + r.d * t;

  if (!restriction_g(p.x, p.y, p.z)) {
    return Solution(-1.0, vec3(1), vec3(0), shouldShowHeatmap() ? heatMap(kMaxIntervalSearchEvals, false) : vec3(0), vec4(0));
  }

  vec3 n = normal(p);
  vec3 normal = faceforward(n, r.d, n);
  float x = p.x;
  float y = p.y;
  float z = p.z;
  vec3 color = showHeatmap ? heatMap(kMaxIntervalSearchEvals, true) : ${i}
  return Solution(t, p, normal, color, uPickingColor);
}



Solution findZero(Ray r, float tStart, float tMin, float tMax, int minFace, int maxFace, int numUniformSteps) {
  float t0 = tStart;
  float x0 = r.o.x + r.d.x * t0;
  float y0 = r.o.y + r.d.y * t0;
  float z0 = r.o.z + r.d.z * t0;
  if (clipToBox && t0 == tMin) {
    switch (minFace) {
      case kFaceMinX: x0 = xMin; break;
      case kFaceMinY: y0 = yMin; break;
      case kFaceMinZ: z0 = zMin; break;
      case kFaceMaxX: x0 = xMax; break;
      case kFaceMaxY: y0 = yMax; break;
      case kFaceMaxZ: z0 = zMax; break;
    }
  }
  float g0 = g(x0,y0,z0);
  for (int i = 1; i <= numUniformSteps; i++) {
    float t1 = tStart + float(i) * (tMax - tStart) / float(numUniformSteps);
    float x1 = r.o.x + r.d.x * t1;
    float y1 = r.o.y + r.d.y * t1;
    float z1 = r.o.z + r.d.z * t1;
    if (clipToBox && i == numUniformSteps) {
      switch (maxFace) {
        case kFaceMinX: x1 = xMin; break;
        case kFaceMinY: y1 = yMin; break;
        case kFaceMinZ: z1 = zMin; break;
        case kFaceMaxX: x1 = xMax; break;
        case kFaceMaxY: y1 = yMax; break;
        case kFaceMaxZ: z1 = zMax; break;
      }
    }
    float g1 = g(x1,y1,z1);
    if (hasSurfaceBetween(g0, g1) && (restriction_g(x0, y0, z0) || restriction_g(x1, y1, z1))) {
      return bisect(r, t0, t1, tMin, tMax, minFace, maxFace);
    }

    x0 = x1;
    y0 = y1;
    z0 = z1;
    t0 = t1;
    g0 = g1;
  }

  return Solution(-1.0, vec3(0), vec3(0), shouldShowHeatmap() ? heatMap(kMaxIntervalSearchEvals, false) : vec3(0), vec4(0));
}




Solution intersect(Ray r, float tMin, float tMax, float tBoxNear, int minFace, int maxFace, int numUniformSteps) {
  bool showHeatmap = shouldShowHeatmap();
  float tRange = tMax - tMin;
  
  int depth = 0;
  int pos = 0;
  int numEvals = 0;

  for (numEvals = 0; numEvals <= kMaxIntervalSearchEvals; numEvals++) {
      
      float size = float(1 << depth);
      iFloat ti = iFloat(
          tMin + tRange * float(pos) / size,
          tMin + tRange * float(pos + 1) / size,
          dContinuous
      );
      ti.l = clamp(ti.l, tMin, tMax);
      ti.u = clamp(ti.u, tMin, tMax);

      if (numEvals >= kMaxIntervalSearchEvals) return findZero(r, ti.l, tMin, tMax, minFace, maxFace, numUniformSteps);

      
      iFloat xi = iAdd(ifloat(r.o.x, dContinuous), iMul(ifloat(r.d.x, dContinuous), ti));
      iFloat yi = iAdd(ifloat(r.o.y, dContinuous), iMul(ifloat(r.d.y, dContinuous), ti));
      iFloat zi = iAdd(ifloat(r.o.z, dContinuous), iMul(ifloat(r.d.z, dContinuous), ti));

      if (clipToBox) {
        xi.l = max(xi.l, xMin);
        yi.l = max(yi.l, yMin);
        zi.l = max(zi.l, zMin);
        xi.u = min(xi.u, xMax);
        yi.u = min(yi.u, yMax);
        zi.u = min(zi.u, zMax);

        if (ti.l == tBoxNear) {
          switch (minFace) {
            case kFaceMinX: xi.l = xMin; break;
            case kFaceMinY: yi.l = yMin; break;
            case kFaceMinZ: zi.l = zMin; break;
            case kFaceMaxX: xi.u = xMax; break;
            case kFaceMaxY: yi.u = yMax; break;
            case kFaceMaxZ: zi.u = zMax; break;
          }
        }
        if (ti.u == tMax) {
          switch (maxFace) {
            case kFaceMinX: xi.l = xMin; break;
            case kFaceMinY: yi.l = yMin; break;
            case kFaceMinZ: zi.l = zMin; break;
            case kFaceMaxX: xi.u = xMax; break;
            case kFaceMaxY: yi.u = yMax; break;
            case kFaceMaxZ: zi.u = zMax; break;
          }
        }
      }

      
      ${e}

      if ((${t}) || depth == kMaxIntervalSearchDepth - 1) {
          ${a}

          
          int delta = trailingOnes(pos);
          depth -= delta;
          pos >>= delta;
          ++pos;

          
          if (depth == 0 && pos == 1) {
              break;
          }

          continue;
      }

      
      ++depth;
      pos *= 2;
  }

  
  return Solution(-1.0, vec3(0), vec3(0), showHeatmap ? heatMap(numEvals, false) : vec3(0), vec4(0));
}
`}function Rue(r){let e={},t="",o=r.color;if(o.type==="constant"){let i="colorUniform",n=new pt(o.color);e[i]={value:new we(n.r,n.g,n.b)},t+="uniform vec3 "+i+`;
`}return{uniforms:e,declarations:t}}function Fue(r,e){let t=r.rayCastBranches[e],o=[];function i(k){return o.push(k)-1}let n=i(t.fxn),a=i(t.intervalFxn),s=t.restrictionShader&&i(t.restrictionShader),l=t.intervalRestrictionShader&&i(t.intervalRestrictionShader),c=r.getColorShader(t.color),p=c&&i(c),{sources:h,shaderFunctions:g,shaderUniforms:m}=__dcg_shared_module_exports__['Tc'](o,r.maxFragmentUniformComponents-__dcg_shared_module_exports__['Ce']),b;p!==void 0?b={type:"shader",source:h[p]}:b={type:"constant",color:t.color};let x=l!==void 0?h[l]:void 0,E=s!==void 0?h[s]:void 0;return{branch:{fxnSource:h[n],intervalFxnSource:h[a],restrictionSource:E,intervalRestrictionSource:x,operator:t.operator,color:b,isSurfaceSelected:t.isSurfaceSelected,surfaceOpacity:t.surfaceOpacity,branchId:t.branchId},shaderFunctions:g,shaderUniforms:m}}function Gue(r,e,t){let{raycastDisableIntervals:o,disableLighting:i}=r.getGraphSettings().config,{branch:n,shaderFunctions:a,shaderUniforms:s}=Fue(r,e),l=n.surfaceOpacity,c=__dcg_shared_module_exports__['Sc'](s),p=Rue(n),h=__dcg_shared_module_exports__['Rc'](a),g=`
    iFloat f(iFloat x, iFloat y, iFloat z) { ${n.intervalFxnSource} }
    float g(float x, float y, float z) { ${n.fxnSource} }
    `;return n.restrictionSource?g+=`bool restriction_g(float x, float y, float z) { ${n.restrictionSource} }`:g+="bool restriction_g(float x, float y, float z) { return true; }",n.intervalRestrictionSource&&(g+=`iBool restriction(iFloat x, iFloat y, iFloat z) { ${n.intervalRestrictionSource} }`),{name:"RayCastShader",uniforms:{camPos:{value:new we},isOrthographicCamera:{value:!1},cameraProjection:{value:new It},inverseProjection:{value:new It},graphModelViewMatrix:{value:new It},graphNormalMatrix:{value:new Gr},xMin:{value:-5},yMin:{value:-5},zMin:{value:-5},xMax:{value:5},yMax:{value:5},zMax:{value:5},uPickingColor:{value:new qo(...t)},uDepthPeel:{value:!1},uOpaqueDepthTexture:{value:null},uPrevDepthTexture:{value:null},speedTestTexture:{value:null},uDepthPeelLayer:{value:0},dcgRenderMode:{value:0},canvasPixelCount:{value:0},clipToBox:{value:!0},isSurfaceSelected:{value:n.isSurfaceSelected},Infinity:{value:1/0},NaN:{value:NaN},...c.uniforms,...p.uniforms},defines:{SRGB_COLOR_SPACE:!0},vertexShader:`
		varying vec2 vUv;

		void main() {
			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
		}`,fragmentShader:`
    varying vec2 vUv;

    
    uniform bool isOrthographicCamera;
    uniform vec3 camPos;
    uniform mat4 inverseProjection;
    uniform mat4 cameraProjection;
    uniform mat4 graphModelViewMatrix;
    uniform mat3 graphNormalMatrix;
    uniform float xMin;
    uniform float xMax;
    uniform float yMin;
    uniform float yMax;
    uniform float zMin;
    uniform float zMax;
    uniform vec4 uPickingColor;
    uniform bool uDepthPeel;
    uniform int uDepthPeelLayer;
    uniform int dcgRenderMode;
    uniform float canvasPixelCount;
    uniform bool clipToBox;
    uniform bool isSurfaceSelected;
    

    uniform highp sampler2D uOpaqueDepthTexture;
    uniform highp sampler2D uPrevDepthTexture;
    uniform sampler2D speedTestTexture;

    #define kFaceMinX 1
    #define kFaceMinY 2
    #define kFaceMinZ 3
    #define kFaceMaxX 4
    #define kFaceMaxY 5
    #define kFaceMaxZ 6

    ${p.declarations}

    ${c.declarations}
    ${b_}
    ${__dcg_shared_module_exports__['Pc']}
    ${__dcg_shared_module_exports__['Qc']}
    ${h}
    ${g}
    ${Oue(n)}

    ${Oo.common}
    ${Oo.lights_pars_fragment}

    float depthToT(float depth, Ray r)  {
      float N = depth*2.0 - 1.0;
      vec4 A = cameraProjection * graphModelViewMatrix * vec4(r.o, 1.0);
      vec4 B = cameraProjection * graphModelViewMatrix * vec4(r.d, 0.0);
      return (N*A.w - A.z) / (B.z - N*B.w);
    }

    bool isBadNormal(vec3 n) {
      return n == vec3(0) || isnan(n.x) || isnan(n.y) || isnan(n.z) || isinf(n.x) || isinf(n.y) || isinf(n.z);
    }

    
    const float kMissed = -1.0;

    
    iFloat intersectBox3d(Ray r, out int minFace, out int maxFace) {
      float tmin, tmax, tymin, tymax, tzmin, tzmax;
      float x0 = r.o.x;
      float y0 = r.o.y;
      float z0 = r.o.z;
      float dirx = r.d.x;
      float diry = r.d.y;
      float dirz = r.d.z;
      float invdirx = 1. / dirx,
        invdiry = 1. / diry,
        invdirz = 1. / dirz;
      if (invdirx >= 0.) {
        tmin = (xMin - x0) * invdirx; minFace = kFaceMinX;
        tmax = (xMax - x0) * invdirx; maxFace = kFaceMaxX;
      } else {
        tmin = (xMax - x0) * invdirx; minFace = kFaceMaxX;
        tmax = (xMin - x0) * invdirx; maxFace = kFaceMinX;
      }
      if (invdiry >= 0.) {
        tymin = (yMin - y0) * invdiry;
        tymax = (yMax - y0) * invdiry;
      } else {
        tymin = (yMax - y0) * invdiry;
        tymax = (yMin - y0) * invdiry;
      }
      if (tmin > tymax || tymin > tmax) return ifloat(kMissed, dContinuous);
      if (tymin > tmin || isnan(tmin)) { tmin = tymin; minFace = invdiry >= 0. ? kFaceMinY : kFaceMaxY; }
      if (tymax < tmax || isnan(tmax)) { tmax = tymax; maxFace = invdiry >= 0. ? kFaceMaxY : kFaceMinY; }
      if (invdirz >= 0.) {
        tzmin = (zMin - z0) * invdirz;
        tzmax = (zMax - z0) * invdirz;
      } else {
        tzmin = (zMax - z0) * invdirz;
        tzmax = (zMin - z0) * invdirz;
      }
      if (tmin > tzmax || tzmin > tmax) return ifloat(kMissed, dContinuous);
      if (tzmin > tmin || tmin != tmin) { tmin = tzmin; minFace = invdirz >= 0. ? kFaceMinZ : kFaceMaxZ; }
      if (tzmax < tmax || tmax != tmax) { tmax = tzmax; maxFace = invdirz >= 0. ? kFaceMaxZ : kFaceMinZ; }
      if (tmax < 0.) return ifloat(kMissed, dContinuous);
      return iFloat(tmin, tmax, dContinuous);
    }

    
		void main() {
      const float kNumIntervalEvaluationsLimit = 2.3e8;
      bool skipIntervalSearch = false;
      if (dcgRenderMode == ${Cr.Default} || dcgRenderMode == ${Cr.ShowHeatHap}) {
        float averageNumEvals = 255. * textureLod(speedTestTexture, vec2(0.5), 6.).x; // 
        float estimatedTotalIntervalEvaluations = averageNumEvals * canvasPixelCount;
        if (estimatedTotalIntervalEvaluations > kNumIntervalEvaluationsLimit) skipIntervalSearch = true;
      }

      
      int uniformSearchSteps = int(clamp(200. - (150. * canvasPixelCount / 16e6) , 50., 200.));

      bool showHeatmap = shouldShowHeatmap();
      vec3 center = vec3(xMin + xMax, yMin + yMax, zMin + zMax) / 2.0;
      vec2 q = 2. * vUv - vec2(1);
      vec4 r0 = inverseProjection * vec4(q.x, q.y, -1, 1); // coordinates of pixel on near plane
      vec4 r1 = inverseProjection * vec4(q.x, q.y, 1, 1); // coordinates of pixel on far plane
      r0 /= r0.w;
      r1 /= r1.w;
      vec3 lookAt = isOrthographicCamera ? center : r0.xyz;
      vec3 rayDir = normalize(lookAt - camPos);
      vec3 rayOrigin = isOrthographicCamera ? r0.xyz : camPos;
      float tNear = length(r0.xyz - rayOrigin);
      float tFar = length(r1.xyz - rayOrigin);

      Ray r = Ray(rayOrigin, rayDir);
      if (uDepthPeelLayer != 0) {
        float prevDepth = texture2D(uPrevDepthTexture, vUv).x;
        tNear = depthToT(prevDepth + 0.0002, r); 
      }

      int minFace = 0;
      int maxFace = 0;
      float tBoxNear = -1.;
      if (clipToBox) {
        iFloat tBox = intersectBox3d(r, minFace, maxFace);
        if (tBox.l == kMissed) {
          if (dcgRenderMode == ${Cr.Default}) discard;
          else gl_FragDepth = 1.;
          return;
        }
        tBoxNear = tBox.l;
        if (tBox.l > 0.) {
          tNear = max(tNear, tBoxNear);
          tFar = min(tFar, tBox.u);
        }
      }

      bool disableIntervals = ${o?"true":"false"};
      Solution solution;
      if (disableIntervals || skipIntervalSearch) {
        solution = findZero(r, tNear, tNear, tFar, minFace, maxFace, uniformSearchSteps);
      } else {
        solution = intersect(r, tNear, tFar, tBoxNear, minFace, maxFace, uniformSearchSteps);
      }
      vec3 p = solution.p;
      vec4 pNDC = graphModelViewMatrix * vec4(p, 1.);
      vec4 clip = cameraProjection * pNDC;
      float ndcZ = clip.z / clip.w;
      float zDepth = ndcZ * 0.5 + 0.5;

      if (uDepthPeel) {
        float opaqueDepth = texture2D(uOpaqueDepthTexture, vUv).x;
        if (opaqueDepth + 0.000001 - zDepth < 0.0) { discard; }
      }

      if (solution.t > 0.) {
        vec3 normal = solution.normal;

        ReflectedLight reflectedLight = ReflectedLight(vec3(0), vec3(0), vec3(0), vec3(0) );
        PhysicalMaterial material;
        vec3 geometryNormal = normal;
        vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
        float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
        material.roughness = min(0.4 + geometryRoughness, 1.0 );
        material.specularColor = vec3( 0.04 );
        material.diffuseColor = solution.color;
        material.specularF90 = 1.0;

        GeometricContext geometry = GeometricContext(normalize(graphNormalMatrix * normal), normalize(-pNDC.xyz));

        
        IncidentLight light1 = IncidentLight(vec3(2.8), normalize(vec3(-1, 1, 1)));
        IncidentLight light2 = IncidentLight(vec3(2.8), normalize(vec3(1, 0, 1)));
        RE_Direct_Physical(light1, geometry, material, reflectedLight);
        RE_Direct_Physical(light2, geometry, material, reflectedLight);

        vec3 ambientLightColor =  vec3(0.16106775375965746); 
        vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
        RE_IndirectDiffuse_Physical( irradiance, material, reflectedLight );
        RE_IndirectSpecular_Physical(geometry, material, reflectedLight );

        vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
        vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
        vec3 outgoingLight = totalDiffuse + totalSpecular + (isSurfaceSelected ? vec3(${BF}) : vec3(0));
        if (isBadNormal(normal)) outgoingLight = material.diffuseColor;
        gl_FragColor = vec4( showHeatmap ? solution.color : outgoingLight, ${l} );
        ${i?"gl_FragColor.rgb = solution.color;":""}
        gl_FragColor = LinearTosRGB(gl_FragColor);
        gl_FragDepth = showHeatmap ? 0. : zDepth;
        if (dcgRenderMode == ${Cr.PickingObjectId}) {
          gl_FragColor = solution.pickingColor;
        } else if (dcgRenderMode == ${Cr.PickingX}) {
          gl_FragColor = encode_float(p.x);
        } else if (dcgRenderMode == ${Cr.PickingY}) {
          gl_FragColor = encode_float(p.y);
        } else if (dcgRenderMode == ${Cr.PickingZ}) {
          gl_FragColor = encode_float(p.z);
        } else if (dcgRenderMode == ${Cr.SpeedTest}) {
          gl_FragColor = vec4(solution.color, 1.);
        }
      }
      else {
        if (showHeatmap) {
          gl_FragColor = vec4(solution.color, 1.);
          gl_FragDepth = 0.;
        } else if (dcgRenderMode == ${Cr.Default}) {
          discard;
        } else {
          gl_FragDepth = 1.;
        }
      }
		}`}}var Yf=class{constructor(){this.entries=new Map;this.uniqueEntries=new Set;this.guidsSeenThisFrame=new Set;this.plannedBranches=[];this.compiledShaderPasses=new Map;this.toCompileShaderPasses=new Map;this.nextShaderPassId=1}dispose(){for(let e of this.compiledShaderPasses.values())e.dispose()}compileAll(){for(let[e,t]of this.toCompileShaderPasses){let o=new M_(t);this.compiledShaderPasses.set(e,o)}this.toCompileShaderPasses.clear()}planShaderPass(e,t){let o=e.rayCastBranches[t],i=o.guid;this.guidsSeenThisFrame.add(i);let n=this.entries.get(i);if(n){let l=n.guidDefinitions.get(i);if(!l)throw new Error(`Programming error: expected this cache entry to already have been used for guid ${i}`);let{color:c}=o;if(!c.startsWith("shader:")){let p=new pt(c),h={value:new we(p.r,p.g,p.b)};l.shaderDefinition.uniforms.colorUniform=h,l.shaderDefinition.uniforms.isSurfaceSelected.value=o.isSurfaceSelected}return{shaderPassId:n.shaderPassId,definition:l}}let a=Vue(e,t);for(let l of this.uniqueEntries.values())if(sj(a.shaderDefinition,l.lastShaderDefinition))return this.entries.set(i,l),l.guidDefinitions.set(i,a),{shaderPassId:l.shaderPassId,definition:a};let s=new VF(a,this.nextShaderPassId);return this.nextShaderPassId++,this.uniqueEntries.add(s),this.entries.set(i,s),this.toCompileShaderPasses.set(s.shaderPassId,a.shaderDefinition),{shaderPassId:s.shaderPassId,definition:a}}markBeforeFrame(){this.guidsSeenThisFrame=new Set}markAfterFrame(){var e;for(let[t,o]of this.entries){this.guidsSeenThisFrame.has(t)||this.entries.delete(t);for(let i of o.guidDefinitions.keys())this.guidsSeenThisFrame.has(i)||o.guidDefinitions.delete(i);o.guidDefinitions.size==0&&(this.uniqueEntries.delete(o),(e=this.compiledShaderPasses.get(o.shaderPassId))==null||e.dispose(),this.compiledShaderPasses.delete(o.shaderPassId),this.toCompileShaderPasses.delete(o.shaderPassId))}}listAllPickingColors(){let e=[];for(let t of this.uniqueEntries)for(let o of t.guidDefinitions.values())e.push(o.pickingColor);return e}};function Nue(r,e){for(let t of Object.keys(e))r.uniforms[t]=e[t]}function Vue(r,e){let t=r.rayCastBranches[e],o=r.pickingColorManager.getPickingColorForRayCastSurface(t.branchId),i=Gue(r,e,o);return{guid:t.guid,pickingColor:o,shaderDefinition:i}}var VF=class{constructor(e,t){this.guidDefinitions=new Map([[e.guid,e]]),this.lastShaderDefinition=e.shaderDefinition,this.shaderPassId=t}};function Bue(r,e){var E,S,k,T;let{webgllayer:t}=e,{camera:o}=t,i=t.world.matrixWorld.clone().invert(),n=o instanceof Vs,a=o.position.clone().applyMatrix4(i),s=r.uniforms;s.camPos.value=a,s.isOrthographicCamera.value=n;let l=new It().multiplyMatrices(o.matrixWorldInverse,t.world.matrixWorld),c=new Gr().getNormalMatrix(l);s.graphModelViewMatrix.value=l,s.graphNormalMatrix.value=c,s.cameraProjection.value=o.projectionMatrix,s.inverseProjection.value=i.clone().multiply(o.matrixWorld).multiply(o.projectionMatrixInverse);let p=t.domain(),h=t.computeDepthPeelLayers();if(s.xMin.value=p.xmin,s.xMax.value=p.xmax,s.yMin.value=p.ymin,s.yMax.value=p.ymax,s.zMin.value=p.zmin,s.zMax.value=p.zmax,s.uDepthPeel.value=h>0,h>0){let I=(E=e.uOpaqueDepthTexture)!=null?E:null,P=(S=e.uPrevDepthTexture)!=null?S:null;s.uOpaqueDepthTexture.value=I,s.uPrevDepthTexture.value=P,s.uDepthPeelLayer.value=(k=e.uDepthPeelLayer)!=null?k:0}let g=t.getGraphSettings().config.raycastHeatmap,m=(T=e.renderMode)!=null?T:t.getRenderMode(),b=m===Cr.Default&&g?Cr.ShowHeatHap:m;s.dcgRenderMode.value=b,s.clipToBox.value=t.getGraphSettings().showBox3D,e.speedTest&&(s.speedTestTexture.value=e.speedTest.texture);let x=t.canvas;s.canvasPixelCount.value=x.width*x.height}function Uue(r){let e=[];if(r.rayCastPassCache.markBeforeFrame(),r.rayCastBranches.length>0){let t=r.rayCastBranches.length;for(let o=0;o<t;o++){let i=r.rayCastPassCache.planShaderPass(r,o);e.push(i)}}return r.rayCastPassCache.markAfterFrame(),e}function Mp(r){var n;let{webgllayer:e,target:t}=r;e.rayCastPassCache.plannedBranches=Uue(e),e.rayCastPassCache.compileAll();let{renderer:o}=e,i=e.rayCastPassCache.plannedBranches;if(i.length>0){e.computeDepthPeelLayers()==0&&(o.setClearColor((n=e.scene.background)!=null?n:new pt(0)),o.autoClear=!1,o.autoClearColor=!1,o.autoClearDepth=!1,o.clear());for(let s of i){let{shaderPassId:l,definition:c}=s,p=e.rayCastPassCache.compiledShaderPasses.get(l);if(!p)throw new Error("Expected the shader pass to be compiled.");Nue(p,c.shaderDefinition.uniforms),Bue(p,r);let h=p.uniforms.dcgRenderMode.value;zue(h)||que(r,p),p.render(o,t)}}else o.autoClear=!0,o.autoClearColor=!0,o.autoClearDepth=!0}function zue(r){switch(r){case Cr.PickingObjectId:case Cr.PickingX:case Cr.PickingY:case Cr.PickingZ:return!0;default:return!1}}function que(r,e){let t=A_,{webgllayer:o,target:i}=r,{renderer:n,camera:a}=o,s=e.uniforms.dcgRenderMode.value,l=a.view?{...a.view}:void 0;n.setRenderTarget(o.speedTestRenderTarget),o.updateCamera({aspectRatio:1}),a.setViewOffset(t,t,0,0,t,t),a.updateProjectionMatrix(),a.updateMatrixWorld(),e.uniforms.dcgRenderMode.value=Cr.SpeedTest,e.render(n,o.speedTestRenderTarget),e.uniforms.dcgRenderMode.value=s,o.adjustCameraToCanvasSize(l),a.updateProjectionMatrix(),a.updateMatrixWorld(),n.setRenderTarget(i),o.updateCamera()}var L_=class{constructor(e,t,o,i,n,a,s){this.webgllayer=e;this.controller=t;this.renderer=o;this.materialManager=i;this.scene=n;this.camera=a;this.debug=s;this.triangles=0;this.pixelRatio=o.getPixelRatio();let l=o.getSize(new bt).multiplyScalar(this.pixelRatio);this.size=l,this.init()}init(){this.samples=1;let e=this.controller.getGraphSettings().config.peelUpsample;e?this.samples=e:this.pixelRatio<1.5?this.samples=3:this.pixelRatio<2.5?this.samples=2:this.samples=1;let t=this.controller.getGraphSettings().config.peelFloatTexture?U$()[0]:mi,o=()=>new Wi(this.size.x,this.size.y,{minFilter:Pn,magFilter:Pn,type:t,colorSpace:Hi});this.peelSampleTargets=[],this.peelResultTarget=o(),this.secondPeelResultTarget=o(),this.compositingTargets=[o(),o()],this.maxPass=new __(this.size,t),this.finalMipmapTargets=[this.maxPass.createTarget(1,1),this.maxPass.createTarget(1,1)],this.opaqueBackgroundTargets=[];for(let n=0;n<this.samples;n++){let a=o();a.depthTexture=new mh(this.size.x,this.size.y),this.opaqueBackgroundTargets.push(a)}this.combinedOpaqueBackgroundTarget=o();let i=2*this.samples;for(let n=0;n<i;n++){let a=o();a.depthTexture=new mh(this.size.x,this.size.y),this.peelSampleTargets.push(a)}this.compositePass=new C_,this.addPremultipliedPass=new I_,this.materialManager.setScreenSize(this.size.x,this.size.y)}dispose(){this.peelSampleTargets.forEach(e=>e.dispose()),this.compositingTargets.forEach(e=>e.dispose()),this.peelResultTarget.dispose(),this.compositePass.dispose(),this.addPremultipliedPass.dispose(),this.maxPass.dispose()}getDebugScale(){return this.controller.getGraphSettings().config.debugScale}render(e){var b;let t=this.renderer,o=t.getPixelRatio(),i=t.getSize(new bt).multiplyScalar(o);(o!==this.pixelRatio||this.size.x!==i.x||this.size.y!==i.y)&&(this.size.copy(i),this.dispose(),this.init());let n=t.getClearColor(new pt);t.autoClear=!1,t.setClearColor(new pt(0),1),t.clear(),this.materialManager.setGlobalUniform("dcgRenderMode",Cr.Default);let a=Hue(this.scene);Wue(this.scene),this.renderOpaqueBackground(),pj(this.scene,a),this.materialManager.setGlobalUniform("uDepthPeel",1),this.materialManager.setGlobalUniform("uDepthPeelLayer",0),this.materialManager.setGlobalUniform("uPrevDepthTexture",null);let s,l=this.peelSampleTargets.slice(0,this.samples),c=this.peelSampleTargets.slice(this.samples,2*this.samples),p=this.compositingTargets[0],h=this.compositingTargets[1];$ue(this.scene);let g=[];this.renderTransparentLayer(l,void 0,0,p),e===1&&g.push(this.queryNonemptyPixels(0,p,this.finalMipmapTargets[0])),s=p;for(let x=0;x<e;x++){let E=x+1;this.renderTransparentLayer(c,l,E,this.peelResultTarget),this.compositePass.composite(this.renderer,h,p,this.peelResultTarget),(b=this.debug.get(`peel-c${E}`))==null||b.renderFromTarget(this.renderer,h,this.getDebugScale()),x>=e-2&&g.push(this.queryNonemptyPixels(E,this.peelResultTarget,this.finalMipmapTargets[x===e-2?0:1])),s=h,[c,l]=[l,c],[h,p]=[p,h]}let m=this.renderer.info.render.frame;Promise.all(g).then(x=>{if(x.length!==2)throw new Error(`Programming error: expected 2 nonempty pixel query results, got ${x.length}`);let E=x[0][3]>0,k=x[1][3]>0?1:E?2:0;this.controller.setAdaptiveDepthPeelingInfo({frame:m,peelLayers:e,status:k})}),pj(this.scene,a),this.compositePass.composite(this.renderer,null,s,this.combinedOpaqueBackgroundTarget),t.setClearColor(n),t.autoClear=!0,t.autoClearColor=!0,t.autoClearDepth=!0,this.materialManager.setGlobalUniform("uPrevDepthTexture",null),this.materialManager.setGlobalUniform("uDepthPeel",0)}renderOpaqueBackground(){this.materialManager.setGlobalUniform("uDepthPeel",0),this.materialManager.setGlobalUniform("uOpaqueDepthTexture",null);let e=this.combinedOpaqueBackgroundTarget,t=this.secondPeelResultTarget;this.samples%2===0&&([t,e]=[e,t]);for(let o=0;o<this.samples;o++){let i=this.opaqueBackgroundTargets[o];this.renderer.setRenderTarget(i),this.setJitterOffset(o),this.renderer.setClearColor(new pt(0),0),this.renderer.clear(),this.renderer.render(this.scene,this.camera),this.addPremultipliedPass.addInPremultiplied(this.renderer,e,i,cj(this.samples,o),o===0?new pt(0):t),[e,t]=[t,e]}this.camera.clearViewOffset()}renderTransparentLayer(e,t,o,i){var a,s;let n=this.secondPeelResultTarget;e.length%2===0&&([n,i]=[i,n]);for(let l=0;l<e.length;l++){let c=e[l];this.materialManager.setGlobalUniform("uOpaqueDepthTexture",this.opaqueBackgroundTargets[l].depthTexture),t&&this.materialManager.setGlobalUniform("uPrevDepthTexture",t[l].depthTexture),this.setJitterOffset(l),this.materialManager.setGlobalUniform("uDepthPeelLayer",o),this.materialManager.setGlobalUniform("dcgRenderMode",Cr.Default),this.renderer.setClearColor(new pt(0),0),this.renderer.setRenderTarget(c),this.renderer.clear(!0,!0);let p=this.scene.background;this.scene.background=null,Mp({webgllayer:this.webgllayer,target:c,uOpaqueDepthTexture:this.opaqueBackgroundTargets[l].depthTexture,uPrevDepthTexture:t?t[l].depthTexture:null,uDepthPeelLayer:o}),this.renderer.render(this.scene,this.camera),this.scene.background=p,this.triangles=this.renderer.info.render.triangles,(a=this.debug.get(`peel-p${o}-s${l}`))==null||a.renderFromTarget(this.renderer,c,this.getDebugScale()),this.addPremultipliedPass.addInPremultiplied(this.renderer,i,c,cj(this.samples,l),l===0?new pt(0):n),(s=this.debug.get(`peel-p${o}-s${l}-combined`))==null||s.renderFromTarget(this.renderer,i,this.getDebugScale()),[i,n]=[n,i]}this.camera.clearViewOffset()}setJitterOffset(e){if(!dj[this.samples])throw new Error(`Unsupported sample count: ${this.samples}`);let t=dj[this.samples];this.camera.setViewOffset(this.size.x,this.size.y,t[e][0]*.0625,t[e][1]*.0625,this.size.x,this.size.y)}queryNonemptyPixels(e,t,o){var s,l;(s=this.debug.get(`max-mm-p${e}-start`))==null||s.renderFromTarget(this.renderer,t,this.getDebugScale()),this.maxPass.renderMax(this.renderer,o,t,this.debug,e,this.getDebugScale());let i=this.renderer.getContext(),n=new Uint8Array(4*o.width*o.height),a=B$(i,0,0,o.width,o.height,i.RGBA,i.UNSIGNED_BYTE,n).then(()=>[...n]);return(l=this.debug.get(`max-mm-p${e}-end`,`${o.width}x${o.height}`))==null||l.renderFromTarget(this.renderer,o,this.getDebugScale()*Math.min(t.width/o.width,t.height/o.height)),a}};function cj(r,e){let t=1/r,o=1/32,i=-.5+(e+.5)/r;return t+o*i}var dj={1:[[0,0]],2:[[4,4],[-4,-4]],3:[[3.323,3.323],[-4.54,1.216],[1.216,-4.54]],4:[[-2,-6],[6,-2],[-6,2],[2,6]]};function Hue(r){let e=new Map;return r.traverse(t=>{e.set(t,t.visible)}),e}function pj(r,e){r.traverse(t=>{t.visible=e.get(t)})}var Kue=.999;function Wue(r){r.traverse(e=>{uj(e)==="transparent"&&(e.visible=!1)})}function $ue(r){r.traverse(e=>{uj(e)==="opaque"&&(e.visible=!1)})}function uj(r){let e=r.material;if(e)return e instanceof xh||e instanceof vh||e.opacity<Kue?"transparent":"opaque"}var P_=class{constructor(){this.materialCache={};this.globalUniforms={dcgRenderMode:Cr.Default,xMin:0,xMax:0,yMin:0,yMax:0,zMin:0,zMax:0,xMajorStep:0,xMinorStep:0,yMajorStep:0,yMinorStep:0,uDepthPeel:0,uDepthPeelLayer:0,uOpaqueDepthTexture:null,uPrevDepthTexture:null,uScreenSize:new bt(1,1),uInverseScreenSize:new bt(1,1),uDepthOffset:1e-6,disableLighting:!0};this.maxSurfaceUniforms=200}getRenderMode(){return this.globalUniforms.dcgRenderMode}setGlobalUniform(e,t){this.globalUniforms[e]=t}disposeAllMaterials(){this.disposeMaterialsNotInScene(new ed)}disposeMaterialsNotInScene(e){var o;let t={};e.traverse(i=>{if("material"in i){let n=i.material,a;Array.isArray(i.material)?a=n:a=[n],a.forEach(s=>{gj(s)&&(t[s.dcgMaterialCacheKey]=!0)})}});for(let i in this.materialCache)if(!t[i]){let n=this.materialCache[i];n.dispose(),(o=n.map)==null||o.dispose(),delete this.materialCache[i]}}getOrMakeMaterial(e){let t=jue(e.spec),o=this.materialCache[t];if(o)switch(e.type){case"surface-graph":hj(o.uniforms,e.uniforms);break;case"domain-plane":break;default:throw new Error(`Unexpected type ${e.type}`)}else{switch(e.type){case"surface-graph":o=this._buildSurfaceMaterial(e.spec,e.uniforms);break;case"domain-plane":o=this.buildDomainPlaneMaterial(e.spec);break;default:throw new Error(`Unexpected type ${e.type}`)}this.materialCache[t]=o,o.dcgMaterialCacheKey=t}return o}setScreenSize(e,t){this.globalUniforms.uScreenSize.set(e,t),this.globalUniforms.uInverseScreenSize.set(1/e,1/t)}setDomain(e,t){let{xmin:o,xmax:i,ymin:n,ymax:a,zmin:s,zmax:l}=e,c=1e-5,p=(i-o)*c,h=(a-n)*c,g=(l-s)*c;this.globalUniforms.xMin=o-p,this.globalUniforms.xMax=i+p,this.globalUniforms.yMin=n-h,this.globalUniforms.yMax=a+h,this.globalUniforms.zMin=s-g,this.globalUniforms.zMax=l+g;let m=Da(t);this.globalUniforms.xMinorStep=m.minorStepX,this.globalUniforms.xMajorStep=m.majorStepX,this.globalUniforms.yMinorStep=m.minorStepY,this.globalUniforms.yMajorStep=m.majorStepY}setDisableLighting(e){this.globalUniforms.disableLighting=e}setZBoundsUniform(e,t){if(!gj(e))throw new Error("Cannot update zBoundsForAnimation on a material that is not managed by MaterialManager");e instanceof xh||e instanceof vh||mj(e.uniforms,t)}_buildSurfaceMaterial(e,t){var p,h;let o=e.color,i=(p=e.uvArgs)!=null?p:[],n=(h=e.extraMeshArgs)!=null?h:[],a=e.restrictionShader,s=o.startsWith("wireframe:");s&&(o=o.slice(10));let l=this.getVariant(o,e.colorShader),c=new _p({color:__dcg_shared_module_exports__['Rd'](o)?"#808080":o,wireframe:s,opacity:e.opacity,extraMeshArgs:n,map:void 0,variant:l,vertexColors:e.vertexColors||!1,restrictionShader:a,uvArgs:i,globalUniforms:this.getGlobalUniforms(),maxSurfaceUniforms:this.maxSurfaceUniforms});return hj(c.uniforms,t),c}buildDomainPlaneMaterial(e){let t;return e.type==="domain-plane-numbers-material"?t=new vh(e,this.getGlobalUniforms()):t=new xh(e,this.getGlobalUniforms()),this.setupGlobalUniforms(t.uniforms),t}getVariant(e,t){return e.startsWith("shader:")?!t||!t.source?{type:"zClip"}:{type:"colorFunc",colorShader:t,colorCacheKey:JSON.stringify(t)}:{type:"zClip"}}getGlobalUniforms(){let e={};return this.setupGlobalUniforms(e),e}setupGlobalUniforms(e){let t=this;for(let o in this.globalUniforms){let i=o;e[i]={get value(){return t.globalUniforms[i]}}}}};function hj(r,e){let{clip:t,zBoundsForAnimation:o}=e;mj(r,o),r.clip_x={value:t.x},r.clip_y={value:t.y},r.clip_z={value:t.z},r.NaN={value:NaN},r.Infinity={value:1/0}}function mj(r,e){r.zMinForAnimation={value:e.zMinForAnimation},r.zMaxForAnimation={value:e.zMaxForAnimation}}function jue(r){return r.type==="domain-plane-numbers-material"?(r.canvas.hasAttribute("dcg-material-manager-id")||r.canvas.setAttribute("dcg-material-manager-id",Math.random()+""),JSON.stringify({...r,canvas:r.canvas.getAttribute("dcg-material-manager-id")})):JSON.stringify(r)}function gj(r){return"dcgMaterialCacheKey"in r}bn();var fj=new Set;fj.add("(0,0,0,0)");var O_=class{constructor(){this.pickingColorToData=new Map;this.idToPickingColor=new Map;this.testingLastHashCollisionCount=0}getAllPickingColorsForBugsnag(){let e=[...this.pickingColorToData.keys()];return e.length<=1e4?e:`too many to upload: ${e.length}`}setPickingColorForMesh(e){let{mesh:t,branchId:o}=e;if(t instanceof Do)for(let i=0;i<t.count;i++){let n=o+":"+i,a=this._getOrCreatePickingColor({mesh:t,index:i,isPoint:e.isPoint,blocksPicking:e.blocksPicking,forceOpaque:!1,pickingId:n});t.setPickingColorAt(i,a)}else if(e.pickingColorVertexCounts){let i=[],{pickingColorVertexCounts:n}=e;for(let a=0;a<n.length;a++){let s=UF(o),l=e.listIndexesForTriangles?e.listIndexesForTriangles[a]:a,c=s+":"+l,p=this._getOrCreatePickingColor({mesh:t,index:l,isPoint:e.isPoint,blocksPicking:e.blocksPicking,forceOpaque:!1,pickingId:c});i.push(p)}t.setPickingColorArray({colors:i,repeatColorCounts:n})}else{let i=o;t.pickingColor=this._getOrCreatePickingColor({mesh:t,index:0,isPoint:e.isPoint,blocksPicking:e.blocksPicking,forceOpaque:e.forceOpaque,pickingId:i})}}getPickingColorForRayCastSurface(e){return this._getOrCreatePickingColor({mesh:null,index:0,isPoint:!1,blocksPicking:!1,forceOpaque:!1,pickingId:e})}_getOrCreatePickingColor(e){let t=e.pickingId,o=this.idToPickingColor.get(t);if(o){let l=o.key;return this.pickingColorToData.set(l,e),o.color}let i=Jue(e.pickingId),n,a,s=0;for(;;){let l=i+s**2,c=l>>24&255,p=l>>16&255,h=l>>8&255,g=e.forceOpaque?255:l&255;if(n=`(${c},${p},${h},${g})`,a=[c/255,p/255,h/255,g/255],!fj.has(n)&&!this.pickingColorToData.has(n))break;if(s++,s>100){Lr(new Error(`PickingColorManager.getOrCreatePickingColor: too many collisions for id ${t}`)),n="(0,0,0,0)",a=[0,0,0,0];break}}return this.testingLastHashCollisionCount=s,this.pickingColorToData.set(n,e),this.idToPickingColor.set(t,{key:n,color:a}),a}getDataForPickingColor(e){let t=`(${e.join(",")})`;return this.pickingColorToData.get(t)}disposeColorsNotInScene(e,t){let o=new Set;for(let i of t)o.add(D_(i));e.traverse(i=>{if(i instanceof Do){let n=[0,0,0,0];for(let a=0;a<i.count;a++)i.getPickingColorAt(a,n),o.add(D_(n))}else if(i.pickingColorArray){let n=i.pickingColorArray.colors;if(n)for(let a of n)o.add(D_(a))}else{let n=i.pickingColor;n&&o.add(D_(n))}});for(let i of this.pickingColorToData.keys())if(!o.has(i)){let n=this.pickingColorToData.get(i);this.idToPickingColor.delete(n.pickingId),this.pickingColorToData.delete(i)}}};function D_(r){return"("+Math.round(r[0]*255)+","+Math.round(r[1]*255)+","+Math.round(r[2]*255)+","+Math.round(r[3]*255)+")"}var Yue=2166136261,Xue=16777619;function Jue(r){let e=Yue;for(let t=0;t<r.length;t++)e^=r.charCodeAt(t),e*=Xue;return e>>>0}var bj={name:"ConcatShader",uniforms:{t0:{value:null},t1:{value:null},t2:{value:null},t3:{value:null}},defines:{},vertexShader:`
		varying vec2 vUv;
		void main() {
			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
		}`,fragmentShader:`
		uniform highp sampler2D t0;
		uniform highp sampler2D t1;
		uniform highp sampler2D t2;
		uniform highp sampler2D t3;
		varying vec2 vUv;

		void main() {
      int index = int(vUv.x * 4.0);
      float x = vUv.x * 4.0 - float(index);
      vec2 uv = vec2(x, vUv.y);
      if (index == 0) {
        gl_FragColor = texture2D( t0, uv );
      } else if (index == 1) {
        gl_FragColor = texture2D( t1, uv );
      } else if (index == 2) {
        gl_FragColor = texture2D( t2, uv );
      } else if (index == 3) {
        gl_FragColor = texture2D( t3, uv );
      }
		}`};var yj={name:"CopyShader",uniforms:{tDiffuse:{value:null},weight:{value:1}},defines:{SRGB_COLOR_SPACE:!0},vertexShader:`
		varying vec2 vUv;

		void main() {
			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
		}`,fragmentShader:`
		uniform float weight;
		uniform sampler2D tDiffuse;
		varying vec2 vUv;

		void main() {
			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = weight * texel;
      #ifdef SRGB_COLOR_SPACE
      gl_FragColor = LinearTosRGB( gl_FragColor );
      #endif
		}`};var{abs:zF,floor:Zue,sin:xj,cos:vj}=Math;function wj(r,e,t,o){if(!F(r)||!F(e)||!isFinite(t)||r.equals(e)||t===0)return[[],[],[]];let i=e.clone().sub(r).normalize(),n=i.clone().negate(),a=new we,s=new we,l=new we,c=Number.MAX_VALUE,p=zF(i.x),h=zF(i.y),g=zF(i.z);p<=c&&(c=p,a.set(1,0,0)),h<=c&&(c=h,a.set(0,1,0)),g<=c&&a.set(0,0,1),l.crossVectors(i,a).normalize(),a.crossVectors(i,l),s.crossVectors(i,a);let m=new we,b=(o.xmax-o.xmin)/2,x=(o.ymax-o.ymin)/2,E=(o.zmax-o.zmin)/2,S=[],k=[],T=[],I=e.clone().sub(r),A=new we(I.x/b,I.y/x,I.z/E).length();t>A/6&&(t=A/6);let D=6*t,G=1-Math.min(1,D/A),N=r.clone().add(I.clone().multiplyScalar(G)),U=__dcg_shared_module_exports__['Ob'](Zue(8+80*t),8,30);H(r,t),H(N,t),w();let K=S.length/3;S.push(r.x,r.y,r.z),k.push(n.x,n.y,n.z),H(r,t,n);for(let V=1;V<=U;V++)T.push(K,K+V,K+V+1);K=S.length/3,S.push(N.x,N.y,N.z),k.push(n.x,n.y,n.z),H(N,2*t,n);for(let V=1;V<=U;V++)T.push(K,K+V,K+V+1);K=S.length/3;for(let V=0;V<=U;V++){let B=V/U*Math.PI*2,L=xj(B),q=-vj(B);m.x=b*2*t*(q*a.x+L*s.x),m.y=x*2*t*(q*a.y+L*s.y),m.z=E*2*t*(q*a.z+L*s.z),S.push(N.x+m.x,N.y+m.y,N.z+m.z),S.push(e.x,e.y,e.z);let le=1/3,$=new we(q*a.x+L*s.x+le*i.x,q*a.y+L*s.y+le*i.y,q*a.z+L*s.z+le*i.z).normalize();k.push($.x,$.y,$.z,$.x,$.y,$.z)}for(let V=0;V<U;V++)T.push(K+2*V,K+2*V+1,K+2*V+2);return[S,k,T];function H(V,B,L){for(let q=0;q<=U;q++){let le=q/U*Math.PI*2,$=xj(le),ne=-vj(le);m.x=b*B*(ne*a.x+$*s.x),m.y=x*B*(ne*a.y+$*s.y),m.z=E*B*(ne*a.z+$*s.z),S.push(V.x+m.x,V.y+m.y,V.z+m.z),m.normalize(),L===void 0?k.push(m.x,m.y,m.z):k.push(L.x,L.y,L.z)}}function w(){for(let V=1;V<=U;V++){let B=V-1,L=U+V,q=U+V+1,le=V;T.push(B,L,le,L,q,le)}}function F(V){return isFinite(V.x)&&isFinite(V.y)&&isFinite(V.z)}}var{abs:G_,min:R_,max:Pv,sqrt:ahe,round:WF,log10:$F,tan:jF,atan:Tj,PI:she}=Math,B_=50,kj=6.75,A_=64,BF=.015,Fa=1,Xf=1,Jf=.002,Zf=30,Dv=class{constructor(e,t){this.pickingColorManager=new O_;this.rayCastPassCache=new Yf;this.perspective=1;this.lastFrameExpressionTooComplexIDs=new Set;this.debugOnlyMeasureGPUTiming=!1;this.lastRenderInfo={peelLayers:0,triangles:0,bufferUploads:0,bufferUploadItems:0,startTimeCPU:0,durationCPU:0};this.mainCopyOutputPass=new Ra(yj);this.concatPass=new Ra(bj);this.rayCastBranches=[];this.rendersInFlight=[];this.pickingPassCacheKey="";this.pickResult={pickingReadCacheKey:""};this.worldViewCacheKeyInfo={math:[new we(0,0,0),new we(1,0,0),new we(0,1,0),new we(0,0,1)],clip:[new we(0,0,0),new we(1,0,0),new we(0,1,0),new we(0,0,1)]};this.domainObjectUpdates=0;var c,p;let{config:o}=t.getGraphSettings();this.debug=new f_({filter:(c=o.debug3dRender)!=null?c:null}),(p=o.debug3dRender)!=null&&p.includes("pick")&&(Xf=5,Fa=5),this.surfaces={},this.renderedTabTargets={},this.renderedTabTargetOrder=[],this.isTrackingPressedAction=!1,this.scene=new ed,this.spinningWorld=new Io,this.world=new Io,this.spinningWorld.add(this.world),this.scene.add(this.spinningWorld),this.controller=t,this.materialManager=new P_,this.cameraDistance=B_,this.camera=new wp,this.axesMaterials=J$(this.materialManager.getGlobalUniforms()),this.setBackgroundColor(t.getGraphSettings().getBackgroundColor()),this.canvas=e,this.renderer=lhe(this.canvas);let i=Av(this.renderer);this.maxFragmentUniformComponents=Math.min(512,i.getParameter(i.MAX_FRAGMENT_UNIFORM_COMPONENTS)),this.materialManager.maxSurfaceUniforms=this.maxFragmentUniformComponents-__dcg_shared_module_exports__['De'],this.mainRenderTarget=new Wi(this.canvas.width,this.canvas.height,{colorSpace:Hi,samples:4}),this.speedTestRenderTarget=new Wi(A_,A_,{generateMipmaps:!0,minFilter:d9,magFilter:Pn,colorSpace:Hi,samples:1}),this.mainCopyOutputPass.defines.SRGB_COLOR_SPACE=!1;let n=new Nf(4210752,Math.PI);this.scene.add(n);let a=2.8,s=new kp(16777215,a);s.position.set(-1,1,1),this.scene.add(s);let l=new kp(16777215,a);l.position.set(-1,-1,0),this.scene.add(l),this.controller.getGraphSettings().config.observeAndSync("disableLighting",()=>{this.materialManager.setDisableLighting(this.controller.getGraphSettings().config.disableLighting)}),this.initDepthPeel(),this.updateDomainObjects(),this.initPickingTargets(),this.updateCamera()}getNumberOfSurfaces(){return Object.keys(this.surfaces).length}showPlane(e){this.domainPlane!==void 0&&(e?this.world.add(this.domainPlane):this.world.remove(this.domainPlane))}showBox(e){e?this.world.add(this.domainBox):this.world.remove(this.domainBox);for(let t in this.surfaces)this.deleteSurface(t)}showAxes(e){e?this.world.add(this.domainAxes):this.world.remove(this.domainAxes)}updateCamera(e){var i;let t=(i=e==null?void 0:e.aspectRatio)!=null?i:this.canvas.width/this.canvas.height,o=this.controller.getPerspectiveDistortion();if(o===0&&!(this.camera instanceof Vs)?this.depthPeel.camera=this.camera=new Vs:o!==0&&!(this.camera instanceof wp)&&(this.depthPeel.camera=this.camera=new wp),this.camera instanceof wp){let n=she/360,a=kj/R_(t,1);this.cameraDistance=B_/o,this.camera.position.set(-this.cameraDistance,0,0),this.camera.fov=Tj(o*jF(n*a))/n}else this.cameraDistance=50,this.camera.position.set(-this.cameraDistance,0,0),t>1?(this.camera.left=-2.95*t,this.camera.right=2.95*t,this.camera.bottom=-2.95,this.camera.top=2.95):(this.camera.left=-2.95,this.camera.right=2.95,this.camera.bottom=-2.95/t,this.camera.top=2.95/t);this.camera.up.set(0,0,1),this.camera.lookAt(new we(0,0,0)),this.camera.updateProjectionMatrix(),this.perspective=o}initDepthPeel(){this.depthPeel=new L_(this,this.controller,this.renderer,this.materialManager,this.scene,this.camera,this.debug)}initPickingTargets(){let e=Fa,t=Xf;this.pickingTargets={id:new Wi(e,t,{type:mi}),x:new Wi(e,t,{type:mi}),y:new Wi(e,t,{type:mi}),z:new Wi(e,t,{type:mi}),combined:new Wi(e*4,t,{type:mi})}}disposePickingTargets(){this.pickingTargets.id.dispose(),this.pickingTargets.x.dispose(),this.pickingTargets.y.dispose(),this.pickingTargets.z.dispose(),this.pickingTargets.combined.dispose()}debugOnlyTrackBufferUploads(){let e=this;Ai.prototype.onUploadCallback=function(){e.lastRenderInfo.bufferUploads++,e.lastRenderInfo.bufferUploadItems+=this.array.length}}debugGetPrograms(){return this.renderer.info.programs||[]}getClipAxes(e){return this.controller.getGraphSettings().showBox3D?{x:!0,y:!0,z:!0}:e!=null?e:{x:!1,y:!1,z:!1}}setBackgroundColor(e){this.backgroundColor=new pt(e),this.updateBackgroundColor()}updateBackgroundColor(){if(this.controller.invertSwatches()){let{r:e,g:t,b:o}=this.backgroundColor;this.scene.background=new pt,this.scene.background.setRGB(1-e,1-t,1-o)}else this.scene.background=this.backgroundColor}domain(){var o,i;let e=this.controller.getGrapher3d(),t=new __dcg_shared_module_exports__['td'];if(e){let n=e.viewportController.getViewport();t.xmin=n.xmin,t.xmax=n.xmax,t.ymin=n.ymin,t.ymax=n.ymax,t.zmin=(o=n.zmin)!=null?o:-2,t.zmax=(i=n.zmax)!=null?i:2}return t}updateAxes(){let e=this.domain(),{screen:t}=this.controller.get2dProjection(),{width:o,height:i}=t,{showAxis3D:n,showAxisLabels3D:a}=this.controller.getGraphSettings(),s={domain:e,showAxis3D:n,showAxisLabels3D:a,width:o,height:i};__dcg_shared_module_exports__['s'](this.domainAxesData,s)||(this.domainAxesData=s,this.domainAxes!==void 0&&(this.world.remove(this.domainAxes),FF(this.domainAxes),this.domainAxes=new Io),n&&(this.domainAxes=tj(e,t,a,this.axesMaterials),this.world.add(this.domainAxes)))}updateBox(){let e=this.domain();this.domainBox?(this.updateDomainBoxColor(),Z$(this.domainBox,e)):this.domainBox=OF(e,this.getDomainBoxColor(),this.materialManager.getGlobalUniforms());let t=this.controller.getGraphSettings().showBox3D,o=this.domainBox.parent===this.world;t!==o&&(t?this.world.add(this.domainBox):this.world.remove(this.domainBox))}getDomainBoxColor(){var t;return this.controller.isGraphPaperFocused()&&!((t=this.controller.getGrapher3d())!=null&&t.isDragging)&&this.controller.getGrapher2d().poiController.keyboardAttentionManager.getKeyboardAttention()===void 0?this.controller.getInvertedColors()?16777215:0:11184810}updateDomainBoxColor(){let{showBox3D:e}=this.controller.getGraphSettings();if(!e||!this.domainBox)return;let t=this.getDomainBoxColor();t!==this.domainBoxColor&&(this.domainBoxColor=t,this.world.remove(this.domainBox),RF(this.domainBox),this.domainBox=OF(this.domain(),t,this.materialManager.getGlobalUniforms()),this.world.add(this.domainBox))}updatePlaneMap(){this.disposePlaneTextureIfResized(),this.domainPlaneMaterials!==void 0&&(this.domainPlaneMaterials.xyNumbersMaterial.uniforms.map.value.needsUpdate=!0,this.domainPlaneMaterials.zMaterial.uniforms.map.value.needsUpdate=!0)}disposePlaneTextureIfResized(){let e=this.controller.getGrapher2d().getCanvasNode();this.domainPlaneMaterials&&(e.width!==this.domainPlaneMaterials.width||e.height!==this.domainPlaneMaterials.height)&&(GF(this.domainPlaneMaterials.xyNumbersMaterial),GF(this.domainPlaneMaterials.zMaterial),this.domainPlaneMaterials=void 0)}disposePlane(){this.domainPlane!==void 0&&(this.world.remove(this.domainPlane),nj(this.domainPlane),this.domainPlane=void 0)}updatePlane(){let e=this.domain(),t=this.controller.showPlane3D(),o=this.controller.showNumbers3D(),i=this.computeDepthPeelLayers()>0,n=this.controller.getGrapher2d().getCanvasNode(),a=this.controller.getInvertedColors(),{width:s,height:l}=n,c={domain:e,showPlane3D:t,showNumbers3D:o,depthPeelingActive:i,invertedColors:a,width:s,height:l};if(!__dcg_shared_module_exports__['s'](this.domainPlaneData,c)&&(this.domainPlaneData=c,this.disposePlaneTextureIfResized(),this.disposePlane(),t||o)){if(this.domainPlaneMaterials=this.constructDomainMaterials(),!this.domainPlaneMaterials)return;this.domainPlane=new k_(this.domain(),this.domainPlaneMaterials,this.controller.getGrapher2d().getProjection(),this.axesMaterials,this.materialManager.getGlobalUniforms()),this.domainPlane.xyPlane&&this.pickingColorManager.setPickingColorForMesh({mesh:this.domainPlane.xyPlane,isPoint:!1,blocksPicking:!0,forceOpaque:!0,branchId:"**dcg_domain_plane_picking_id**"}),this.world.add(this.domainPlane)}}constructDomainMaterials(){var h,g,m,b,x;let{showNumbers3D:e,showPlane3D:t}=this.controller.getGraphSettings(),o=this.computeDepthPeelLayers()>0;if(this.domainPlaneMaterials!==void 0&&this.domainPlaneMaterials.showPlane3D===t&&this.domainPlaneMaterials.showNumbers3D===e&&this.domainPlaneMaterials.depthPeelingActive===o)return this.domainPlaneMaterials;(g=(h=this.domainPlaneMaterials)==null?void 0:h.xyNumbersMaterial)==null||g.dispose(),(m=this.domainPlaneMaterials)==null||m.xyPlaneMaterial.dispose(),(x=(b=this.domainPlaneMaterials)==null?void 0:b.zMaterial)==null||x.dispose();let i=this.controller.getGrapher2d().getCanvasNode();if(i.width===0||i.height===0)return;let n=this.materialManager.getOrMakeMaterial({type:"domain-plane",spec:{type:"domain-plane-numbers-material",canvas:i,showNumbers:e,transparent:t&&!o}}),a=document.createElement("canvas");a.width=i.width,a.height=i.height;let s=this.materialManager.getOrMakeMaterial({type:"domain-plane",spec:{type:"domain-plane-numbers-material",canvas:a,showNumbers:e,transparent:!1}}),l=this.controller.getGraphSettings().plane3dOpacity,c=Number(l);if((l===""||isNaN(c))&&(c=.5),c=__dcg_shared_module_exports__['Ob'](c,0,1),c<Jf)return;let p=this.materialManager.getOrMakeMaterial({type:"domain-plane",spec:{type:"domain-plane-material",opacity:c,transparent:!o,color:new pt(16777215)}});return{zCanvas:a,zMaterial:s,xyNumbersMaterial:n,xyPlaneMaterial:p,width:i.width,height:i.height,showNumbers3D:e,showPlane3D:t,depthPeelingActive:o}}computeDepthPeelLayers(){let e=this.computeDesiredDepthPeelLayersFromGeometry(),t=R_(e,Zf);if(e===0)return 0;if(!this.getConfig().adaptivePeeling)return t;let o=this.controller.getAdaptiveDepthPeelingInfo(),i=e;if(o){let{peelLayers:n,status:a}=o;if(a===1){let s=Math.ceil(Zf/3);i=(Math.floor(n/s)+1)*s}else a===0?i=n-1:i=n}return __dcg_shared_module_exports__['Ob'](i,1,t)}getConfig(){return this.controller.getGraphSettings().config}getGraphSettings(){return this.controller.getGraphSettings()}computeDesiredDepthPeelLayersFromGeometry(){let{debugPeelLayers:e}=this.getConfig();if(e!==void 0)return e;let t=1,o=0;for(let n of this.rayCastBranches){let a=n.surfaceOpacity;a<Jf||(a<t&&(t=a),o+=WF(-2/$F(1-a)))}for(let n in this.surfaces){let a=this.surfaces[n];if(a.isTransparent){let s=__dcg_shared_module_exports__['Ob'](a.mesh.material.opacity,0,1);if(s<Jf)continue;s<t&&(t=s),a.shape==="plane"?o+=1:a.shape==="sphere"?o+=2:o+=WF(-2/$F(1-s))}}if(t===1)return 0;let i=R_(o,WF(-2/$F(1-t)));return this.controller.showPlane3D()&&(i+=1),Pv(1,i)}updateDomainObjects(){this.domainObjectUpdates++,this.updateAxes(),this.updateBox(),this.updatePlane();let e=this.domain(),{xmin:t,xmax:o,ymin:i,ymax:n,zmin:a,zmax:s}=e;this.spinningWorld.scale.set(4/(o-t),4/(n-i),4/(s-a)),this.world.position.set(-(o+t)/2,-(n+i)/2,-(s+a)/2),this.materialManager.setDomain(e,this.controller.getGrapher2d().getProjection()),this.updateDomainObjectsFromCamera()}getZBoundsForAnimationForNewSurface(e){var s;let t=(s=this.controller.getGrapher3d())==null?void 0:s.transition,o=t==null?void 0:t.objectIdExtendingTo3D,{zmin:i,zmax:n}=this.domain(),a=window.performance.now();if(o&&e.startsWith(o+":")){t.startTime<0&&(t.startTime=a);let l=(a-t.startTime)/t.duration;return l>=1?Ap:{zMinForAnimation:l*i,zMaxForAnimation:l*n}}return Ap}setZboundsOnSurfaces(e,t,o){for(let i in this.surfaces)if(i.startsWith(e+":")){let a=this.surfaces[i].mesh.material;this.materialManager.setZBoundsUniform(a,{zMinForAnimation:t,zMaxForAnimation:o})}}deleteSurface(e){let t=this.surfaces[e];if(!t)return;this.world.remove(t.mesh);let o=t.mesh.geometry;che(o)||o.dispose(),delete this.surfaces[e]}getColorShader(e){if(e.startsWith("shader:"))return this.controller.getShader(e.slice(7))}renderPoint3D(e,t,o){let{position:i,radius:n,guid:a}=e;if(n<=0||!isFinite(n))return;let s=this.domain(),{xmin:l,xmax:c,ymin:p,ymax:h,zmin:g,zmax:m}=s,b=this.makeCacheKey(a,s);this.surfaces[t]&&(this.surfaces[t].cacheKey!==b||this.surfaces[t].materialColor!=o)&&this.deleteSurface(t);let[x,E,S]=i,k=n*(c-l)/4,T=n*(h-p)/4,I=n*(m-g)/4;if(!this.surfaces[t]){let P=this.materialManager.getOrMakeMaterial({type:"surface-graph",spec:{type:"surface-material",objectId:t,color:o,opacity:1,colorShader:this.getColorShader(o)},uniforms:{domain:s,clip:this.getClipAxes(),zBoundsForAnimation:Ap}}),A=F_(n),D=new Po(A,P);D.dcgModelMatrix=new It().makeTranslation(x,E,S).multiply(new It().makeScale(k,T,I)),this.surfaces[t]={mesh:D,cacheKey:b,isNotInSketchOrder:!1,materialColor:o,isTransparent:!1,isPoint:!0},this.world.add(D)}this.surfaces[t].isNotInSketchOrder=!1}makeCacheKey(e,t){return e+":"+JSON.stringify(t)}renderPointList3D(e,t){let o=this.domain(),{xmin:i,xmax:n,ymin:a,ymax:s,zmin:l,zmax:c}=o,{pressedId:p}=this.pressedActionData(),h=this.highlightedIndex(e),g=t.map(b=>b.color+"_"+b.guid).join(":")+`:${h}:${e===p}`,m=this.makeCacheKey(g,o);if(this.surfaces[e]&&this.surfaces[e].cacheKey!==m&&this.deleteSurface(e),!this.surfaces[e]){let b="",x=this.materialManager.getOrMakeMaterial({type:"surface-graph",spec:{type:"surface-material",objectId:e,color:b,opacity:1,colorShader:this.getColorShader(b)},uniforms:{domain:o,clip:this.getClipAxes(),zBoundsForAnimation:Ap}}),E=t[0];if(E.branchMode!==114)return;let S=F_(E.radius),k=new Do(S,x,t.length);for(let T=0;T<t.length;T++){let I=t[T];if(I.branchMode!==114)return;let[P,A,D]=I.position,G=I.radius,N=this.needsHighlighting(e,T)?rd(I.color,this.highlightAmount(e,T)):I.color,U=G*(n-i)/4,K=G*(s-a)/4,H=G*(c-l)/4;if(G<=0||!isFinite(G)||F_(G)!==S)return;let F=new It().makeTranslation(P,A,D).multiply(new It().makeScale(U,K,H));k.setMatrixAt(T,F),k.setColorAt(T,new pt(N))}this.surfaces[e]={mesh:k,cacheKey:m,isNotInSketchOrder:!1,materialColor:b,isTransparent:!1,isPoint:!0},this.world.add(k)}return this.surfaces[e].isNotInSketchOrder=!1,this.surfaces[e]}renderSphere3D(e,t,o){var U,K;let{position:i,radius:n,restrictionShader:a,guid:s}=e,l=e.surfaceOpacity;if(!this.getConfig().beta3d&&!this.controller.getTranslucentSurfaces()&&(l=1),l<Jf)return;let c=((U=this.getColorShader(o))==null?void 0:U.source)||"";this.surfaces[t]&&(this.surfaces[t].cacheKey!==s||this.surfaces[t].materialColor!=o||c!=((K=this.surfaces[t].shader)!=null?K:""))&&this.deleteSurface(t);let[p,h,g]=i,[m,b,x]=[G_(n[0]),G_(n[1]),G_(n[2])],{xmin:E,xmax:S,ymin:k,ymax:T,zmin:I,zmax:P}=this.domain(),[A,D,G]=[S-E,T-k,P-I],N=2*Pv(m/A,b/D,x/G);if(!this.surfaces[t]){let H=this.materialManager.getOrMakeMaterial({type:"surface-graph",spec:{type:"surface-material",objectId:t,color:o,opacity:l,colorShader:this.getColorShader(o),restrictionShader:a},uniforms:{domain:this.domain(),clip:this.getClipAxes(),zBoundsForAnimation:Ap}}),w=F_(N),F=new Po(w,H);F.dcgModelMatrix=new It().makeTranslation(p,h,g).multiply(new It().makeScale(m,b,x)),this.surfaces[t]={mesh:F,material:H,cacheKey:s,isNotInSketchOrder:!1,materialColor:o,isTransparent:l<1,shape:"sphere",shader:c},this.world.add(F)}this.surfaces[t].isNotInSketchOrder=!1}renderCurve3D(e,t,o){var G,N,U;let i=t+":"+o,n=(G=Ej(e))!=null?G:o,a=this.needsHighlighting(t,n)?rd(e.color,this.highlightAmount(i,n)):e.color,s=this.isClickable(t),{points:l,thickness:c,guid:p}=e,h=YF(e.branchMode);if(c<0||!isFinite(c))return;let g=this.domain(),m=this.surfaces[i],b=((N=this.getColorShader(e.color))==null?void 0:N.source)||"",x=e.branchMode===119,E=x&&l.length>6&&s,S=t===this.pressedActionData().pressedId,k=this.highlightedIndex(t),T=`${p}:${JSON.stringify(c)}:${JSON.stringify(g)}:${S}:${k}`;if(m&&(m.cacheKey!==T||m.materialColor!=a||b!=((U=m.shader)!=null?U:""))&&this.deleteSurface(i),l===void 0||l.length===0||c===0)return;let I=x&&k!==void 0&&l.length>6,P=rd(e.color,this.highlightAmount(t,k)),A=__dcg_shared_module_exports__['Ld'](e.color),D=__dcg_shared_module_exports__['Ld'](P);if(!this.surfaces[i]){let K=this.materialManager.getOrMakeMaterial({type:"surface-graph",spec:{type:"surface-material",objectId:i,color:a,opacity:1,vertexColors:I,colorShader:this.getColorShader(e.color)},uniforms:{domain:g,clip:this.getClipAxes(h),zBoundsForAnimation:Ap}}),H=.01*c,{vertices:w,normals:F,faces:V,pickingColorVertexCounts:B}=k$(l,H,g,E),L=N_(new Float32Array(w),new Float32Array(F),new Uint32Array(V)),q=[];if(I&&B)for(let $=0;$<B.length;$++){let ne=$===k?D:A;for(let ue=0;ue<B[$];ue++)q.push(ne[0],ne[1],ne[2])}I&&L.setAttribute("color",new Ai(new Float32Array(q),3));let le=new Po(L,K);this.surfaces[i]={mesh:le,cacheKey:T,isNotInSketchOrder:!1,isTransparent:!1,materialColor:a,pickingColorVertexCounts:B},this.world.add(le)}this.surfaces[i].isNotInSketchOrder=!1}renderVector3D(e,t,o){var A,D;let i=e.color,n=this.isClickable(t),a=t===this.pressedActionData().pressedId,s=this.highlightedIndex(t),l=t+`:${o}`,{points:c,thickness:p,guid:h}=e,g=YF(e.branchMode),m=this.domain(),b=JSON.stringify(m),x=`${h}:${b}:${p}:${s}:${a}`,E=this.surfaces[l],S=((A=this.getColorShader(i))==null?void 0:A.source)||"";if(E&&(E.cacheKey!==x||E.materialColor!=i||S!=((D=E.shader)!=null?D:""))&&this.deleteSurface(l),c===void 0||c.length<6||c.length%6!=0)return;this.needsHighlighting(t,o)&&c.length===6&&(i=rd(i,this.highlightAmount(t,o)));let k=s!==void 0&&c.length>6,T=rd(i,this.highlightAmount(t,s)),I=__dcg_shared_module_exports__['Ld'](i),P=__dcg_shared_module_exports__['Ld'](T);if(!this.surfaces[l]){let G=this.materialManager.getOrMakeMaterial({type:"surface-graph",spec:{type:"surface-material",objectId:l,color:i,opacity:1,colorShader:this.getColorShader(i),vertexColors:k},uniforms:{domain:m,clip:this.getClipAxes(g),zBoundsForAnimation:Ap}}),N=c.length>6&&n?[]:void 0,U=.01*p,K=[],H=[],w=[],F=[];for(let L=0;L<c.length;L+=6){let q=new we(c[L],c[L+1],c[L+2]),le=new we(c[L+3],c[L+4],c[L+5]),[$,ne,ue]=wj(q,le,U,m),de=K.length/3;if(K.push(...$),H.push(...ne),w.push(...ue.map(pe=>pe+de)),N==null||N.push($.length/3),k){let pe=L/6===s?P:I;for(let Y=0;Y<$.length/3;Y++)F.push(pe[0],pe[1],pe[2])}}let V=N_(new Float32Array(K),new Float32Array(H),new Uint32Array(w));k&&V.setAttribute("color",new Ai(new Float32Array(F),3));let B=new Po(V,G);this.surfaces[l]={mesh:B,cacheKey:x,isNotInSketchOrder:!1,isTransparent:!1,materialColor:i,pickingColorVertexCounts:N},this.world.add(B)}this.surfaces[l].isNotInSketchOrder=!1}renderTriangle3D(e,t,o){if(e.surfaceOpacity<Jf)return;let i=e.color,n=this.isClickable(t),a=t+`:${o}`,s=t===this.pressedActionData().pressedId,l=this.highlightedIndex(t),c=`:${l}:${s}`,p=e.meshData.faces.length/3,{meshData:h}=e,g=rd(i,this.highlightAmount(t,l)),m=__dcg_shared_module_exports__['Ld'](i),b=__dcg_shared_module_exports__['Ld'](g),x=[];if(this.needsHighlighting(t,o)&&p===1&&(i=rd(i,this.highlightAmount(t,o))),l!==void 0&&p>1)if(h.colors&&l!=null){let k=e.listIndexes.indexOf(l),T=h.colors,I=new Float32Array(T),P=9*k,A=255*__dcg_shared_module_exports__['Kd'](T[P]),D=255*__dcg_shared_module_exports__['Kd'](T[P+1]),G=255*__dcg_shared_module_exports__['Kd'](T[P+2]),N=__dcg_shared_module_exports__['Gd'](A,D,G),U=rd(N,this.highlightAmount(t,o)),K=__dcg_shared_module_exports__['Ld'](U);I.set([...K,...K,...K],P),e={...e,meshData:{...e.meshData,colors:I}}}else{for(let T=0;T<h.faces.length;T+=3){let I=T/3===l?b:m;x.push(I[0],I[1],I[2],I[0],I[1],I[2],I[0],I[1],I[2])}let k=new Float32Array(x);e={...e,meshData:{...e.meshData,colors:k}}}let S=this.renderSurface(e,a,i,c);if(p>1&&n){let k=[];for(let T=0;T<p;T++)k.push(3);S&&(S.pickingColorVertexCounts=k)}}renderSurface(e,t,o,i=""){var b,x,E;this.getConfig().wireframe&&(o="wireframe:"+o);let{meshData:n,surfaceOpacity:a}=e;if(!this.getConfig().beta3d&&!this.controller.getTranslucentSurfaces()&&(a=1),a<Jf)return;let{uvArgs:s,restrictionShader:l}=e,c=(b=e.extraMeshArgs)!=null?b:[],p=YF(e.branchMode),h=((x=this.getColorShader(o))==null?void 0:x.source)||"",g=this.domain(),m=n.guid+i;if(this.surfaces[t]&&(this.surfaces[t].cacheKey!==m||this.surfaces[t].materialColor!=o||h!=((E=this.surfaces[t].shader)!=null?E:"")||n.isDomainCube&&!dhe(g,this.surfaces[t].domain))&&this.deleteSurface(t),!this.surfaces[t]){let S=this.materialManager.getOrMakeMaterial({type:"surface-graph",spec:{type:"surface-material",objectId:t,color:o,opacity:a,colorShader:this.getColorShader(o),vertexColors:!!n.colors,restrictionShader:l,uvArgs:s,extraMeshArgs:c},uniforms:{domain:g,clip:this.getClipAxes(p),zBoundsForAnimation:n.isDomainCube?Ap:this.getZBoundsForAnimationForNewSurface(t)}});if(n.isDomainCube){let I=g,A=this.controller.getGrapher3d().transition;if(A.objectIdExtendingTo3D&&A.startTime>0){let D=A.objectIdExtendingTo3D;if(D&&t.startsWith(D+":")){let G=this.domain(),{zmin:N,zmax:U}=G,H=(window.performance.now()-A.startTime)/A.duration;H<1&&(I.zmin=H*N,I.zmax=H*U)}}n.positions=__dcg_shared_module_exports__['Sd'](I).positions}let k=N_(n.positions,n.normals,n.faces);k.setAttribute("uv",new no(n.uvs,2)),c.length>0&&k.setAttribute("extras",new no(n.extraAttrs,c.length)),n.colors&&k.setAttribute("color",new Ai(n.colors,3));let T=new Po(k,S);this.surfaces[t]={mesh:T,material:S,cacheKey:m,isNotInSketchOrder:!1,materialColor:o,shader:h,isTransparent:a<1,shape:phe(n,g)?"plane":void 0,domain:g},this.world.add(T)}return this.surfaces[t].isNotInSketchOrder=!1,this.surfaces[t]}projectMathCoordinates(e,t=new we){return t.copy(e).applyMatrix4(this.world.matrixWorld).project(this.camera)}finalizeSurface(e){let{branchId:t,surface:o,renderOrder:i,isSurfaceSelected:n}=e;this.pickingColorManager.setPickingColorForMesh({branchId:t,mesh:o.mesh,isPoint:!!o.isPoint,blocksPicking:!1,forceOpaque:!1,pickingColorVertexCounts:o.pickingColorVertexCounts,listIndexesForTriangles:e.listIndexesForTriangles});let a=o==null?void 0:o.mesh.material;o&&a instanceof _p&&(o.mesh.renderOrder=i,a.setEmissiveIntensity(n?BF:0))}needsHighlighting(e,t){if(!this.isClickable(e))return!1;let{keyboardFocusId:o,keyboardFocusIndex:i}=this.getKeyboardFocus(),{pressedId:n,pressedIndex:a}=this.pressedActionData(),s=this.getPickResult(),l=s==null?void 0:s.id,c=s==null?void 0:s.index;return e===l&&t===c||e===o&&t===i||e===n&&t===a}highlightedIndex(e){if(!this.isClickable(e))return;let{keyboardFocusId:t,keyboardFocusIndex:o}=this.getKeyboardFocus(),{pressedId:i,pressedIndex:n}=this.pressedActionData(),a=this.getPickResult(),s=a==null?void 0:a.id,l=a==null?void 0:a.index;if(e===s)return l;if(e===t)return o;if(e===i)return n}highlightAmount(e,t){let{pressedId:o,pressedIndex:i}=this.pressedActionData();return e===o&&t===i?.16:.24}redraw(e,t){var w,F,V;(w=this.debug)==null||w.removeUnused();let o=this.controller.getGrapher3d();if(o===void 0)return;this.renderedTabTargets={},this.renderedTabTargetOrder=[];let i=this.canvas,n=performance.now(),a=this.renderer;a.setRenderTarget(this.mainRenderTarget),this.updateBackgroundColor(),this.updateDomainObjectsFromCamera(),this.updateCamera(),this.adjustCameraToCanvasSize();for(let B in this.surfaces)this.surfaces[B].isNotInSketchOrder=!0;let s=this.getPickResult();this.isClickable(s==null?void 0:s.id)?o.setLayerClass("clickableObjects","dcg-mouse-over-clickable-object"):o.setLayerClass("clickableObjects",void 0),this.drawGraphs(e,t);let l=2.0001*ahe(3),{xmin:c,xmax:p,ymin:h,ymax:g,zmin:m,zmax:b}=this.domain(),x=new we((p+c)/2,(g+h)/2,(b+m)/2),E=4/Pv(p-c,g-h,b-m);for(let B in this.surfaces)if(this.surfaces[B].isNotInSketchOrder)this.deleteSurface(B);else if(!this.controller.getGraphSettings().showBox3D){let L=this.surfaces[B].mesh.geometry;L.boundingSphere===null&&L.computeBoundingSphere();let q=L.boundingSphere;if(q===null)continue;let $=(new we().subVectors(x,q.center).length()+q.radius)*E;l=Pv(l,$)}let S=this.computeDepthPeelLayers();S>0!==((F=this.domainPlaneMaterials)==null?void 0:F.depthPeelingActive)&&this.updateDomainObjects();let T=this.controller.getPerspectiveDistortion(),I=1e3/(0<T&&T<1?T:1),P=Pv(.001,this.cameraDistance-l),A=R_(I,this.cameraDistance+l);this.camera.near=P,this.camera.far=A,this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.spinningWorld.updateMatrixWorld();let D=Av(a),G=[];for(let B of this.rendersInFlight)D.getSyncParameter(B,D.SYNC_STATUS)===D.UNSIGNALED?G.push(B):D.deleteSync(B);if(this.rendersInFlight=G,this.rendersInFlight.length>=2){this.controller.requestRedrawGraph();return}this.materialManager.setGlobalUniform("dcgRenderMode",Cr.Default),this.mainRenderTarget.setSize(i.width,i.height),this.renderer.setRenderTarget(this.mainRenderTarget),this.materialManager.setScreenSize(i.width,i.height);let N=this.lastRenderInfo={peelLayers:0,bufferUploadItems:0,bufferUploads:0,triangles:0,startTimeCPU:n,durationCPU:0};N.peelLayers=S,S>0?(this.depthPeel.render(S),N.triangles=this.depthPeel.triangles):(Mp({webgllayer:this,target:this.mainRenderTarget,speedTest:this.speedTestRenderTarget}),a.render(this.scene,this.camera),N.triangles=this.renderer.info.render.triangles),S==0&&this.mainCopyOutputPass.render(a,null,this.mainRenderTarget);let U=D.fenceSync(D.SYNC_GPU_COMMANDS_COMPLETE,0);U&&this.rendersInFlight.push(U),this.debugOnlyMeasureGPUTiming&&N$(this.renderer).then(B=>{var L;N.endTimeGPU=B,(L=this.onCompleteRenderSpy)==null||L.call(this,N)}),N.durationCPU=performance.now()-n,this.materialManager.disposeMaterialsNotInScene(this.scene),this.pickingColorManager.disposeColorsNotInScene(this.scene,this.rayCastPassCache.listAllPickingColors());let K=new Set;for(let B in this.surfaces)(V=this.surfaces[B].material)!=null&&V.exprTooComplex&&K.add(UF(B));let H=[];for(let B of this.lastFrameExpressionTooComplexIDs)K.has(B)||H.push(B);(K.size>0||H.length>0)&&this.controller.dispatch({type:"mark-too-complex-for-gl",errors:K,fixed:H}),this.lastFrameExpressionTooComplexIDs=K,this.onRenderSpy&&this.onRenderSpy()}adjustCameraToCanvasSize(e){var a,s,l,c,p,h;let t=this.renderer,o=this.canvas,i=this.controller.getGrapher3d();if(i===void 0)return;let n=window.devicePixelRatio||1;n!==t.getPixelRatio()&&(t.setPixelRatio(n),i.controls.updateViewport(i.viewportController.getViewport())),this.camera.setViewOffset((a=e==null?void 0:e.width)!=null?a:o.width/n,(s=e==null?void 0:e.height)!=null?s:o.height/n,(l=e==null?void 0:e.offsetX)!=null?l:0,(c=e==null?void 0:e.offsetY)!=null?c:0,(p=e==null?void 0:e.width)!=null?p:o.width/n,(h=e==null?void 0:e.height)!=null?h:o.height/n),t.setSize(o.width/n,o.height/n)}drawGraphs(e,t){var i;this.rayCastBranches=[];let o=0;for(let n of iv(t)){let a=e[n];if(!a||!a.branches)continue;let s=this.controller.isItemSelected(n),l=this.controller.getItemModel(n),c=this.isClickable(n);if((l==null?void 0:l.type)==="expression"&&(Ud(l)||zd(l))){let p=this.renderPointList3D(n,a.branches);if(p){if(o+=1,this.finalizeSurface({branchId:n,surface:p,renderOrder:o,isSurfaceSelected:s}),c)for(let h=0;h<a.branches.length;h++)this.addTabTarget(l,h);continue}}for(let p in a.branches){o+=1;let h=a.branches[p],g=parseInt(p),m=(i=Ej(h))!=null?i:g,b=`${n}:${h.branchMode===129?m:p}`,x=h.color;this.needsHighlighting(n,m)&&(x=rd(x,this.highlightAmount(n,m))),h.branchMode===130||h.branchMode===103||h.branchMode===106||h.branchMode===107||h.branchMode===108||h.branchMode===109||h.branchMode===110||h.branchMode===111||h.branchMode===112||h.branchMode===113||h.branchMode===210?this.renderSurface(h,b,x):h.branchMode===100||h.branchMode===119||h.branchMode===128?this.renderCurve3D(h,n,g):h.branchMode===114?this.renderPoint3D(h,b,x):h.branchMode===118?this.renderSphere3D(h,b,x):h.branchMode===117?this.renderTriangle3D(h,n,g):h.branchMode===129?this.renderVector3D(h,n,m):h.branchMode===131&&this.rayCastBranches.push({...h,color:x,isSurfaceSelected:s,branchId:n+":"+m});let E=this.surfaces[b];if(E){let S=h.branchMode===117?h.listIndexes:void 0;if(this.finalizeSurface({branchId:n+":"+m,surface:E,renderOrder:o,isSurfaceSelected:s,listIndexesForTriangles:S}),c)if(h.branchMode===117){let k=h.meshData.faces.length/3;for(let T=0;T<k;T++)this.addTabTarget(l,T)}else if(h.branchMode===129&&g===0){let k=h.points.length/6;for(let T=0;T<k;T++)this.addTabTarget(l,T)}else this.addTabTarget(l,g)}}}}updateDomainObjectsFromCamera(){let e=this.controller.getGrapher3d();e&&oj({axes:this.domainAxes,plane:this.domainPlane,domain:this.domain(),screen:this.controller.get2dProjection().screen,controls:e.controls,invertedColors:this.controller.getInvertedColors(),isDepthPeelingActive:this.computeDepthPeelLayers()>0})}pickAtMouseAndReadResults(){this.pickingPass(),this.readPickingOutputFromGPU()}getRenderMode(){return this.materialManager.getRenderMode()}getMaterialManager(){return this.materialManager}getAllSurfaceGeoemtriesCacheKey(){let e="";for(let t in this.surfaces){let o=this.surfaces[t];e+=o.cacheKey}return e+="|domainUpdates:"+this.domainObjectUpdates,e}getPickingCacheKey(){var e,t;return`world:${this.getWorldViewCacheKey()}:mouse:${(e=this.mouse)==null?void 0:e.x},${(t=this.mouse)==null?void 0:t.y}:surfaces:${this.getAllSurfaceGeoemtriesCacheKey()}`}pickingPass(){if(this.controller.getGrapher3d()===void 0)return;let t=this.mouse;if(!t)return;let o=this.pickingPassCacheKey,i=this.getPickingCacheKey();if(o===i)return;this.pickingPassCacheKey=i;let n=this.scene.background,a=this.renderer.getClearColor(new pt),s=new Map;this.world.children.forEach(b=>{var x;if(s.set(b,b.visible),b instanceof Po){let E=b.material;b.visible=!!((x=E.defines)!=null&&x.DCG_SUPPORTS_PICKING)}else b.visible=!1}),this.domainPlane&&s.get(this.domainPlane)&&(this.domainPlane.visible=!0,this.domainPlane.children.forEach(b=>{s.set(b,b.visible),b.visible=b.name==="xy plane"}));let l=window.devicePixelRatio,c=Math.floor(Fa/2),p=Math.floor(Xf/2),[h,g]=[Math.floor(t.x*l)-c,Math.floor(t.y*l)-p];this.camera.setViewOffset(this.renderer.domElement.width,this.renderer.domElement.height,h,g,Fa,Xf),this.renderer.setClearColor(new pt(0),0),this.scene.background=null,this.materialManager.setGlobalUniform("dcgRenderMode",Cr.PickingObjectId),this.renderer.setRenderTarget(this.pickingTargets.id),this.renderer.clearColor();let m=this;Mp({webgllayer:m,target:this.pickingTargets.id}),this.renderer.render(this.scene,this.camera),this.materialManager.setGlobalUniform("dcgRenderMode",Cr.PickingX),this.renderer.setRenderTarget(this.pickingTargets.x),this.renderer.clearColor(),Mp({webgllayer:m,target:this.pickingTargets.x}),this.renderer.render(this.scene,this.camera),this.materialManager.setGlobalUniform("dcgRenderMode",Cr.PickingY),this.renderer.setRenderTarget(this.pickingTargets.y),this.renderer.clearColor(),Mp({webgllayer:m,target:this.pickingTargets.y}),this.renderer.render(this.scene,this.camera),this.materialManager.setGlobalUniform("dcgRenderMode",Cr.PickingZ),this.renderer.setRenderTarget(this.pickingTargets.z),this.renderer.clearColor(),Mp({webgllayer:m,target:this.pickingTargets.z}),this.renderer.render(this.scene,this.camera),this.concatPass.uniforms.t0={value:this.pickingTargets.id.texture},this.concatPass.uniforms.t1={value:this.pickingTargets.x.texture},this.concatPass.uniforms.t2={value:this.pickingTargets.y.texture},this.concatPass.uniforms.t3={value:this.pickingTargets.z.texture},this.camera.clearViewOffset(),this.renderer.setClearColor(a),this.scene.background=n,s.forEach((b,x)=>{x.visible=b}),this.concatPass.render(this.renderer,this.pickingTargets.combined,this.pickingTargets.combined)}readPickingOutputFromGPU(){var k,T,I;let e=this.getPickingCacheKey();if(this.pickResult.pickingReadCacheKey===e)return;if(!this.mouse){this.pickResult={pickingReadCacheKey:e};return}let t=Math.floor(Fa/2),o=Math.floor(Xf/2),i=Cv(this.renderer,this.pickingTargets.combined,0,0,Fa*4,Xf),n=Mv(i,Fa*4,t,o),a=Mv(i,Fa*4,Fa+t,o),s=Mv(i,Fa*4,2*Fa+t,o),l=Mv(i,Fa*4,3*Fa+t,o),c=m_(a),p=m_(s),h=m_(l);if((k=this.debug.get("pick-combined"))==null||k.renderFromTarget(this.renderer,this.pickingTargets.combined,10),n.every(P=>P===0)){this.pickResult={pickingReadCacheKey:e};return}let g=this.pickingColorManager.getDataForPickingColor(n);if(!g){let P=_v(this.renderer,this.pickingTargets.id,0,0),A=_v(this.renderer,this.pickingTargets.x,0,0),D=_v(this.renderer,this.pickingTargets.y,0,0),G=_v(this.renderer,this.pickingTargets.z,0,0);Lr(`Failed to find id for picking color ${n}`,{metaData:{pickingInfo:{allColors:this.pickingColorManager.getAllPickingColorsForBugsnag(),idColor:n,rawX:a,rawY:s,rawZ:l,x:c,y:p,z:h,idColor_0:P,rawX_0:A,rawY_0:D,rawZ_0:G}}}),this.pickResult={pickingReadCacheKey:e};return}if(g.blocksPicking){this.pickResult={pickingReadCacheKey:e};return}let m=(I=(T=this.pickResult.result)==null?void 0:T.point)!=null?I:new we;if(m.set(c,p,h),g.isPoint){let P=g.mesh,A;P instanceof Do?(A=new It,P.getMatrixAt(g.index,A)):A=g.mesh.dcgModelMatrix,m=new we(0,0,0).applyMatrix4(A)}let b=g.pickingId.split(":"),x=b.length,E=b[0],S=x>1?parseInt(b[x-1]):-1;this.pickResult={pickingReadCacheKey:e,result:{point:m,id:E,index:S}}}isClickable(e){if(e===void 0)return!1;let t=this.controller.getItemModel(e);return!!Tm(t)}getPickResult(){return this.pickResult.result}getKeyboardFocus(){let e=this.controller.getGrapher2d().poiController.keyboardAttentionManager.getKeyboardAttention(),t=e==null?void 0:e.calcId,o=e==null?void 0:e.listIndex;return{keyboardFocusId:t,keyboardFocusIndex:o}}pressedActionData(){var o,i;let e=(o=this.pressedAction)==null?void 0:o.id,t=(i=this.pressedAction)==null?void 0:i.index;return{pressedId:e,pressedIndex:t}}getZoomScrollWheelPickResult(){if(this.controller.getGrapher3d().controls.speed3D===0)return this.getPickResult()}getMouse(){return this.mouse}setMouse(e){this.mouse=e}getWorldViewCacheKey(){let{math:e,clip:t}=this.worldViewCacheKeyInfo,o="";for(let i=0;i<e.length;i++)this.projectMathCoordinates(e[i],t[i]),o+=`:${t[i].x},${t[i].y}`;return o}baseplaneMultiplier(){let e=kj*(Math.PI/360),t=this.camera instanceof wp?Tj(this.perspective*jF(e)):e;return 2/(jF(t)*-this.camera.position.x)}mathCoordinatesToBufferCoordinates(e){let t=new we(e.x,e.y,e.z).applyMatrix4(this.world.matrixWorld).project(this.camera),o=this.canvas,i=o.width/2,n=o.height/2,a=Math.round(t.x*i+i),s=Math.round(t.y*n+n);return{x:a,y:s}}projectedCoordinatesToScreenCoordinates(e,t){let o=this.canvas,i=window.devicePixelRatio,n=o.width/i/2,a=o.height/i/2,s=e.x*n+n,l=-e.y*a+a;return(!t||!t.skipRounding)&&(s=Math.round(s),l=Math.round(l)),{x:s,y:l}}mathCoordinatesToScreenCoordinates(e,t){let o=new we(e.x,e.y,e.z).applyMatrix4(this.world.matrixWorld).project(this.camera);return this.projectedCoordinatesToScreenCoordinates(o,t)}ndcCoordinatesToScreenCoordinates(e){let t=new we(e.x,e.y,e.z).applyQuaternion(this.spinningWorld.quaternion).project(this.camera);return this.projectedCoordinatesToScreenCoordinates(t,void 0)}_testingGetMeshById(e){let t=this.surfaces[e];return t?t.mesh:void 0}remove(){this.materialManager.disposeAllMaterials(),this.pickingColorManager.disposeColorsNotInScene(new ed,[]),this.domainBox&&RF(this.domainBox),this.domainAxes&&(FF(this.domainAxes),rj(this.axesMaterials));let e=Av(this.renderer);for(let t of this.rendersInFlight)e.deleteSync(t);this.renderer.dispose(),this.renderer.forceContextLoss(),this.mainCopyOutputPass.dispose(),this.concatPass.dispose(),this.rayCastPassCache.dispose(),this.mainRenderTarget.dispose(),this.disposePickingTargets()}addTabTarget(e,t){let o=fR(e.id,t);this.renderedTabTargets[o]===void 0&&(this.renderedTabTargetOrder.push(o),this.renderedTabTargets[o]={type:e.type,id:e.id,listIndex:t,description:this.getComputedDescription(e,t)})}getOrderedTabTargets(){return this.renderedTabTargetOrder.map(e=>{let t=this.renderedTabTargets[e];return{calcId:t.id,listIndex:t.listIndex,polygonEdge:void 0,description:t.description}})}setPressedAction(e){this.pressedAction=e,e!==void 0&&(this.isTrackingPressedAction=!0);let t=this.controller.getGrapher3d();t&&(t.controls.state=td.NONE,t.redrawAllLayers())}getPressedAction(){return this.pressedAction}getComputedDescription(e,t){let o="",i=_i(e,t);return i?o=i:(o=this.getDescription(e),km(e)&&(o=this.controller.s("graphing-calculator-narration-item-with-list-index",{listIndex:t+1,item:o}))),this.controller.s("shared-calculator-narration-item-clickable",{item:vr(o)})}getDescription(e){let t="";switch(e.formula.expression_type){case __dcg_shared_module_exports__['xd'].SURFACE:case __dcg_shared_module_exports__['xd'].SURFACE_AMBIGUOUS:case __dcg_shared_module_exports__['xd'].SURFACE_CONSTANT_AMBIGUOUS:case __dcg_shared_module_exports__['xd'].SURFACE_r_\u03B8z:case __dcg_shared_module_exports__['xd'].SURFACE_r_\u03B8z_AMBIGUOUS:case __dcg_shared_module_exports__['xd'].SURFACE_z_r\u03B8:case __dcg_shared_module_exports__['xd'].SURFACE_r_\u03B8\u03C6:case __dcg_shared_module_exports__['xd'].SURFACE_xyz_uv:case __dcg_shared_module_exports__['xd'].IMPLICIT_SURFACE:case __dcg_shared_module_exports__['xd'].IMPLICIT_SURFACE_AMBIGUOUS:t=this.controller.s("graphing-calculator-narration-3d-surface-description");break;case __dcg_shared_module_exports__['xd'].CURVE3D_xyz_t:case __dcg_shared_module_exports__['xd'].SLICE:case __dcg_shared_module_exports__['xd'].SLICE_r\u03B8z_at_z:case __dcg_shared_module_exports__['xd'].SLICE_zr\u03B8_at_r:case __dcg_shared_module_exports__['xd'].SLICE_zr\u03B8_at_\u03B8:case __dcg_shared_module_exports__['xd'].SLICE_zr\u03B8_at_xyz:case __dcg_shared_module_exports__['xd'].SLICE_r\u03B8\u03C6_at_\u03B8:case __dcg_shared_module_exports__['xd'].SLICE_r\u03B8\u03C6_at_\u03C6:case __dcg_shared_module_exports__['xd'].SLICE_r\u03B8\u03C6_at_xyz:case __dcg_shared_module_exports__['xd'].SLICE_xyz_uv:t=this.controller.s("graphing-calculator-narration-3d-curve-description");break;case __dcg_shared_module_exports__['xd'].SEGMENT3D:t=this.controller.s("graphing-calculator-narration-3d-segment-description");break;case __dcg_shared_module_exports__['xd'].VECTOR3D:t=this.controller.s("graphing-calculator-narration-3d-vector-description");break;case __dcg_shared_module_exports__['xd'].SPHERE3D:t=this.controller.s("graphing-calculator-narration-3d-sphere-description");break;case __dcg_shared_module_exports__['xd'].POINT3D:case __dcg_shared_module_exports__['xd'].POINT3D_LIST:t=this.controller.s("graphing-calculator-narration-3d-point-description");break;case __dcg_shared_module_exports__['xd'].TRIANGLE3D:t=this.controller.s("graphing-calculator-narration-3d-triangle-description")}return t===""&&(t=this.controller.s("graphing-calculator-narration-3d-object-description")),this.controller.s("graphing-calculator-narration-3d-object-with-index",{item:t,index:e.displayIndex})}};function lhe(r){let e=new Uf({antialias:!0,alpha:!0,preserveDrawingBuffer:!0,canvas:r});return e.setPixelRatio(window.devicePixelRatio||1),e}function YF(r){switch(r){case 106:return{x:!0,y:!0,z:!1};case 107:return{x:!1,y:!0,z:!0};case 108:return{x:!0,y:!1,z:!0};case 110:return{x:!1,y:!1,z:!0};case 112:case 113:case 210:case 128:return{x:!0,y:!0,z:!0};default:return{x:!1,y:!1,z:!1}}}var Ap={zMinForAnimation:-1/0,zMaxForAnimation:1/0};function N_(r,e,t){let o=new dn;return o.setIndex(r.length<65536?new yp(t,1):new xp(t,1)),o.setAttribute("position",new no(r,3)),o.setAttribute("normal",new no(e,3)),o}var V_=[];function F_(r){let e=r<.02?1:r<.05?2:r<.2?3:r<.8?4:5;if(V_[e]===void 0){let t=F$(e);V_[e]=N_(t.vertices,t.vertices,t.indices)}return V_[e]}function che(r){return V_.includes(r)}function dhe(r,e){return e!==void 0&&r.xmin===e.xmin&&r.xmax===e.xmax&&r.ymin===e.ymin&&r.ymax===e.ymax&&r.zmin===e.zmin&&r.zmax===e.zmax}function rd(r,e){return __dcg_shared_module_exports__['Rd'](r)?r:__dcg_shared_module_exports__['Fd'](r,e)}function phe(r,e){let t=r.faces.length/3,o=r.positions.length/3,{xmin:i,xmax:n,ymin:a,ymax:s,zmin:l,zmax:c}=e,p=m=>(m-i)/(n-i),h=m=>(m-a)/(s-a),g=m=>(m-l)/(c-l);if(t===1)return!0;if(t===2&&o===4){let m=r.positions,b=new we(p(m[0]),h(m[1]),g(m[2])),x=new we(p(m[3]),h(m[4]),g(m[5])),E=new we(p(m[6]),h(m[7]),g(m[8])),S=new we(p(m[9]),h(m[10]),g(m[11])),k=new we().subVectors(x,b),T=new we().subVectors(E,b),I=new we().subVectors(S,b),P=k.cross(T);return G_(P.dot(I)/(P.length()*I.length()))<.01}return!1}function UF(r){return r.split(":")[0]}function Ej(r){return"listIndex"in r?r.listIndex:void 0}var uhe=1e3;function hhe(){return new La(1024,768)}function Rj(){return new __dcg_shared_module_exports__['Qe'](__dcg_shared_module_exports__['Fc'].xmin,__dcg_shared_module_exports__['Fc'].xmax,__dcg_shared_module_exports__['Fc'].ymin,__dcg_shared_module_exports__['Fc'].ymax,__dcg_shared_module_exports__['Fc'].zmin,__dcg_shared_module_exports__['Fc'].zmax)}var U_=class extends If{constructor(t,o,i,n){super({elt:t,settings:o,controller:i,evaluator:n});this.type="3d";this.screen=hhe();this.redrawTickCount=0;let a=Rj();this.viewportController=new u_(a,this,this.controller),this.graphSketches={};let s=document.createElement("canvas");s.className="dcg-webgl-canvas",this.getDebugPixelRatio()!==1&&(s.style.imageRendering="pixelated"),this.webglLayer=new Dv(s,i),this.elt.appendChild(s),this.transition=new g_,this.controls=new h_(this.webglLayer.spinningWorld,this,this.canvasLayer.canvasNode),this.controls.setWorldRotation(Yl()),this.controls.unsnappedRotation.copy(this.controls.worldRotation3D),this.addKeydownEventHandler()}isDefaultDomain(){let t=this.viewportController.getViewport(),o=this.getDefaultViewport();return t.xmin===o.xmin&&t.xmax===o.xmax&&t.ymin===o.ymin&&t.ymax===o.ymax&&t.zmin===o.zmin&&t.zmax===o.zmax}getDebugPixelRatio(){var t;return(t=this.settings.config.debugPixelRatio)!=null?t:1}startZoom(){this.settings.config.disableWorkerOnZoom&&this.evaluator.setTicksEnabled(!1)}endZoom(){this.settings.config.disableWorkerOnZoom&&this.evaluator.setTicksEnabled(!0)}remove(){this.controls.dispose(),this.elt.remove(),this.viewportController.remove(),this.webglLayer.remove()}tick(t){this.redrawTickCount+=1,this.controller.getGrapher2d().tick(t),O$(this.controls);let o=this.webglLayer.getPickResult();this.webglLayer.pickAtMouseAndReadResults();let i=this.webglLayer.getPickResult();__dcg_shared_module_exports__['s'](o,i)||(this.__redrawRequested=!0),(!this.lastRenderedWorldRotation||!this.lastRenderedWorldRotation.equals(this.controls.worldRotation3D))&&(this.__redrawRequested=!0,this.lastRenderedWorldRotation=this.controls.worldRotation3D.clone()),this.__redrawRequested&&this._redrawAllLayers()}clear(){this.graphSketches={},this.controller.getGrapher2d().clear()}getGraphSketch(t){return this.graphSketches[t]}addGraphSketch(t){this.graphSketches[t.id]=t}removeGraphSketch(t){t in this.graphSketches&&delete this.graphSketches[t]}flatWorldRotation3D(){return[...this.controls.worldRotation3D.elements]}debounceUserRequestedRotationChange(){this.__debouncedRotationCommit||(this.__debouncedRotationCommit=__dcg_shared_module_exports__['q'](()=>{if(this.isDragging||this.settings.userLockedRotation)return;let t=this.flatWorldRotation3D();(this.settings.worldRotation3D.length===0&&this.controls.worldRotation3D.equals(Yl())||__dcg_shared_module_exports__['s'](this.settings.worldRotation3D,t))&&this.settings.axis3D===this.controls.axis3D&&this.settings.speed3D===this.controls.speed3D||this.controller.dispatch({type:"commit-user-requested-rotation",worldRotation3D:t,axis3D:this.controls.axis3D,speed3D:this.controls.speed3D})},uhe)),this.__debouncedRotationCommit()}getDefaultViewport(){return Rj()}_updateScreenSize(t,o){if(t<=0||o<=0)return;let i=this.screen;i.width===t&&i.height===o||(this.screen=new La(t,o),this.viewportController.setScreen(this.screen))}getProjection(){return new oa(this.screen,this.viewportController.getViewport(),this.settings)}size(){let t=this.canvasLayer.ctx;if(!t)return this.controller.getGrapher2d().size();let{width:o,height:i}=t.canvas.getBoundingClientRect();return o===0||i===0?this.controller.getGrapher2d().size():{width:o,height:i}}update(){let{top:t,left:o,width:i,height:n}=this.controller.computeMajorLayout().grapher,a=this.baseplaneWidth(),s=this.controller.getGrapher2d();s.setCanvasSizeFor3D(a,a),s.update(),this.webglLayer.updateDomainObjects(),i>0&&n>0?(this._setIsVisible(!0),this._updateScreenSize(i,n),Si(this.elt,{position:"absolute",left:o+"px",top:t+"px",width:i+"px",height:n+"px"})):this._setIsVisible(!1)}deselectSketch(t){let o=this.getGraphSketch(t);o&&(o.selected=!1,o.showHighlight=!1)}selectSketch(t){let o=this.getGraphSketch(t);o&&(o.selected=!0,o.showHighlight=!0)}setSketchHoistedToTop(t,o){let i=this.getGraphSketch(t);i&&(i.hoistToTop=o)}updateSketch(t,o){if(!o.length){this.removeGraphSketch(t);return}let i=new gI(t,o);i.color=o[0].color;let n=this.getGraphSketch(t);n&&i.updateFrom(n);let a=this.controller.getPropagatedSelectedIds(),s=!!a.selected[t],l=!!a.hoistedToTop[t];i.selected=s,i.showHighlight=s,i.hoistToTop=l,this.addGraphSketch(i)}_redrawAllLayers(){if(!this.isVisible)return;let t=Date.now();this.__redrawRequested=!1,this.canvasLayer.resize(this.screen.width,this.screen.height),this.controls.update(),this._redrawWebglLayer(),this.events.triggerEvent("redraw",Date.now()-t),this.canvasLayer.updateAria(this.isVisible,0)}_redrawWebglLayer(){let t=this.getDebugPixelRatio();this.webglLayer.canvas.width=this.canvasLayer.canvasNode.width/t,this.webglLayer.canvas.height=this.canvasLayer.canvasNode.height/t,t!==1&&(this.webglLayer.canvas.style.transform=`scale(${t})`,this.webglLayer.canvas.style.transformOrigin="0 0"),this.webglLayer.redraw(this.graphSketches,this.__drawLayers)}_parseScreenshotOpts(t){return ER(t,this.settings,this.screen)}screenshot(t){let o=document.createElement("canvas"),i=this._parseScreenshotOpts(t);o.width=i.width*i.targetPixelRatio,o.height=i.height*i.targetPixelRatio;let n=this.screenshotToCanvas(o),a=o.toDataURL("image/png");return n&&n(),a}asyncScreenshot(t,o){t.format==="svg"&&console.warn("Unsupported format 'svg' for 3d screenshot. Assuming 'png' format instead.");for(let i of["showLabels","showMovablePoints","mathBounds","mode"])t.hasOwnProperty(i)&&console.warn(`Property ${i} is ignored for 3d screenshot.`);o(this.screenshot(t))}screenshotToCanvas(t){let o=new Dv(t,this.controller);return o.spinningWorld.setRotationFromMatrix(new It().setFromMatrix3(this.controls.worldRotation3D)),o.spinningWorld.updateMatrixWorld(),o.updateCamera(),o.redraw(this.graphSketches,this.__drawLayers),()=>o.remove()}computeConcreteViewport(t){return t}setGrapherState(t,o){t=__dcg_shared_module_exports__['Vd'](Bo,t),"complex"in t&&!this.controller.canEnableComplexMode()&&(t={...t,complex:!1}),(!o||!o.doNotClear)&&this.clear();for(let i in Bo)Bo.hasOwnProperty(i)&&this.settings.setProperty(i,t[i]);if("viewport"in t&&this.setViewportState(t.viewport),"speed3D"in t&&(this.controls.speed3D=t.speed3D),"worldRotation3D"in t){let i=t.worldRotation3D;if(i.length===9){let n=new Gr;n.set(i[0],i[3],i[6],i[1],i[4],i[7],i[2],i[5],i[8]),this.controls.setWorldRotation(n),this.controls.unsnappedRotation.copy(this.controls.worldRotation3D),!this.controls.isHorizonLevel()&&!this.controller.getGraphSettings().config.beta3d&&(this.controls.setWorldRotation(Yl()),this.controls.unsnappedRotation.copy(this.controls.worldRotation3D),this.controls.speed3D=0)}else this.controls.setWorldRotation(Yl()),this.controls.unsnappedRotation.copy(this.controls.worldRotation3D)}"axis3D"in t&&(this.controls.axis3D=t.axis3D),this.controller.requestRedrawGraph()}baseplaneWidth(){let t=this.controller.computeMajorLayout().grapher,{width:o,height:i}=t;return o<360&&(i=360*(i/o),o=360),i<360&&(o=360*(o/i),i=360),Math.ceil(Math.min(o,i)*this.webglLayer.baseplaneMultiplier())}mathCoordinatesToScreenCoordinates(t){return this.webglLayer.mathCoordinatesToScreenCoordinates(t)}addKeydownEventHandler(){re(this.elt).on("keydown",t=>{if(!this.controller.isGraphPaperFocused())return;let o=t;if(o.altKey||o.ctrlKey||o.metaKey)return;let i=Pe(o);if(i==="Tab"){let a=o.shiftKey?"prev":"next";this.handleTabEvent(a,o),this.redrawAllLayers();return}let n=this.controller.getGrapher2d().poiController.keyboardAttentionManager.getKeyboardAttention();if(n){if(i==="Enter"||i==="Space"){let a=this.controller.getItemModel(n.calcId);Tm(a)&&this.controller.dispatch({type:"clickable-item-clicked",id:n.calcId,listIndex:n.listIndex})}return}zn(i,"direction")&&(o.stopPropagation(),o.preventDefault(),this.controls.applyTiltFromKeyboard(i,o.shiftKey),this.debounceUserRequestedRotationChange())}),re(this.elt).on("keyup",()=>{this.controller.isGraphPaperFocused()&&this.controls.keyUp()})}getCanvasNode(){return this.webglLayer.canvas}getOrderedTabTargets(){return this.webglLayer.getOrderedTabTargets()}handleTabEvent(t,o){let n=this.controller.getGrapher2d().poiController.keyboardAttentionManager,s=n.getKeyboardAttention()!==void 0;if(t==="prev"&&!s){n.updateKeyboardAttention(void 0,{describe:!1}),this.webglLayer.updateDomainObjects();return}if(n.focusNextObjFromKeyboard({direction:t,allowWrapping:!1,selectNonClickables:!1})){o==null||o.preventDefault(),o==null||o.stopPropagation(),this.webglLayer.updateDomainObjects();return}else{n.updateKeyboardAttention(void 0,{describe:!1}),t==="prev"&&s&&(this.controller.dispatch({type:"set-focus-location",location:{type:"graph-paper"}}),this.speakGrapherFocusAriaLabel(),o==null||o.preventDefault(),o==null||o.stopPropagation()),this.webglLayer.updateDomainObjects();return}}speakGrapherFocusAriaLabel(){let o=this.elt.getElementsByClassName("dcg-graph-outer")[0].getAttribute("aria-label");o&&Te(o)}};ce();ie();__dcg_shared_module_exports__['H']();var HA=__dcg_shared_module_exports__['e'](se());ce();ie();var Kj=__dcg_shared_module_exports__['e'](se());ce();ie();var tb=__dcg_shared_module_exports__['e'](se());ce();ie();var Fj=__dcg_shared_module_exports__['e'](se()),Ht=class extends Fj.View{template(){return d("div",{class:()=>{var e,t,o,i,n;return{"dcg-keypad-btn-container":!0,"dcg-disabled":this.isDisabled(),[(o=(t=(e=this.props).additionalClass)==null?void 0:t.call(e))!=null?o:""]:!!((n=(i=this.props).additionalClass)!=null&&n.call(i))}},style:()=>{var e;return{"flex-grow":(e=this.getColSpan())==null?void 0:e.toString()}},children:d("span",{role:u("button"),class:this.bindFn(this.getClasses),"dcg-command":this.props.command,"aria-label":this.bindFn(this.getAriaLabel),"aria-disabled":this.bindFn(this.isDisabled),"aria-controls":this.props.ariaControls?this.props.ariaControls:this.const(void 0),"aria-expanded":this.props.ariaExpanded?this.bindFn(this.getAriaExpanded):this.const(void 0),onTap:()=>{this.isDisabled()||this.props.onTap()},children:d("span",{class:u("dcg-keypad-btn-content"),children:this.props.children})})})}getClasses(){let e={"dcg-keypad-btn":!0,"dcg-keypad-btn-active":this.isActive()},t=this.props.style();switch(t){case"default":e["dcg-btn-light-on-gray"]=!0;break;case"highlight":e["dcg-btn-dark-on-gray"]=!0;break;case"popover":e["dcg-btn-light-gray"]=!0;break;case"blue":e["dcg-btn-blue"]=!0;break;default:return t}return e}isActive(){return this.props.active?this.props.active():!1}getAriaLabel(){return this.props.ariaLabel?this.props.ariaLabel():this.props.command()}getColSpan(){if(this.props.colspan)return this.props.colspan()}isDisabled(){return this.props.disabled&&this.props.disabled()}getAriaExpanded(){return this.props.ariaExpanded?this.props.ariaExpanded():void 0}};ce();ie();var Gj=__dcg_shared_module_exports__['e'](se()),wh=class extends Gj.View{init(){this.controller=this.props.controller()}};var mr=class extends wh{template(){return d("div",{class:u("dcg-basic-keypad dcg-do-not-blur"),children:this.props.children})}};ce();ie();var yt=__dcg_shared_module_exports__['e'](se());var{IfElse:Bj,If:Nj,Switch:ghe}=yt.Components;function jt(r,e){return r===void 0?yt.const(e):typeof r=="function"?r:yt.const(r)}function Qf(r){return(e,t,o={},i)=>d(Ht,{command:yt.const(r.command||r.typedText||r.keys[0]),ariaLabel:()=>r.ariaLabelKey?i(r.ariaLabelKey):r.typedText||r.keys[0],colspan:jt(o.colspan,1),style:()=>o.style||"default",onTap:()=>t({type:"keypad/type-text",text:r.typedText||r.keys[0]}),children:Bj(()=>r.keys[0]==="{"||r.keys[0]==="[",{true:()=>_("span",{class:u("dcg-mq-math-mode"),style:u("font-size: 120%"),children:[yt.const(r.keys[0]),"\xA0",d("span",{style:u("color: #999"),children:yt.const(r.keys[1])})]}),false:()=>_("span",{class:u("dcg-either-or-btn"),children:[d(St,{config:yt.const({}),latex:yt.const(r.keys[0])}),d("span",{style:u("color: #999"),children:d(St,{config:yt.const({}),latex:yt.const(r.keys[1])})})]})})})}function eb(r){return(e,t,o={},i)=>d(Ht,{command:yt.const(r.command||r.typedText||r.keys[1]),ariaLabel:()=>r.ariaLabelKey?i(r.ariaLabelKey):r.typedText||r.keys[0],colspan:jt(o.colspan,1),style:jt(o.style,"default"),onTap:()=>t({type:"keypad/type-text",text:r.typedText||r.keys[1]}),children:Bj(()=>r.keys[1]==="}"||r.keys[1]==="]",{true:()=>_("span",{class:u("dcg-mq-math-mode"),style:u("font-size: 120%"),children:[d("span",{style:u("color: #999"),children:yt.const(r.keys[0])}),"\xA0",yt.const(r.keys[1])]}),false:()=>_("span",{children:[d("span",{style:u("color: #999"),children:d(St,{config:yt.const({}),latex:yt.const(r.keys[0])})}),d(St,{config:yt.const({}),latex:yt.const(r.keys[1])})]})})})}function mhe(r){return(e,t,o={},i)=>_(Ht,{command:yt.const(r.command),ariaLabel:()=>r.ariaLabelKey?i(r.ariaLabelKey):e,colspan:jt(o.colspan,1),style:()=>o.style||"default",onTap:()=>{t({type:"keypad/audio-trace",command:r.command})},children:[d(Nj,{predicate:yt.const(r.iconClass!==void 0),children:()=>d("span",{class:()=>({"dcg-button-icon":!0,"dcg-icon-only":r.contentKey===void 0}),children:d("i",{class:yt.const(r.iconClass),"aria-hidden":u("true")})})}),d(Nj,{predicate:yt.const(r.contentKey!==void 0),children:()=>d("span",{children:()=>i(r.contentKey)||e})})]})}function Oe(r){return(e,t,o={},i)=>d(Ht,{command:yt.const(r.command||e),ariaLabel:()=>r.ariaLabelKey?i(r.ariaLabelKey):e,colspan:jt(o.colspan,1),style:()=>o.style||"default",onTap:()=>t({type:"keypad/type-text",text:r.typedText||e}),children:d(St,{config:yt.const({}),latex:yt.const(r.content||e)})})}function Vj(r){return(e,t,o={},i)=>d(Ht,{command:yt.const(r.command||e),ariaLabel:()=>r.ariaLabelKey?i(r.ariaLabelKey):e,colspan:jt(o.colspan,1),style:()=>o.style||"default",onTap:()=>t({type:"keypad/type-text",text:r.typedText||e}),children:d("span",{class:u("dcg-mq-math-mode"),children:yt.const(r.content||e)})})}function Me(r){return(e,t,o={},i)=>d(Ht,{command:yt.const(e),ariaLabel:()=>r.ariaLabelKey?i(r.ariaLabelKey):e,colspan:jt(o.colspan,1),style:()=>o.style||"default",onTap:()=>t({type:"keypad/type-text",text:e+"("}),children:d(ghe,{children:n=>n?d("span",{class:u("dcg-mq-math-mode dcg-static-mathquill-view"),children:d("span",{class:u("dcg-mq-root-block"),children:d("span",{class:u("dcg-mq-operator-name"),children:()=>e})})}):d(St,{config:yt.const({}),latex:yt.const(e)})},()=>!!e.match(/^[a-z]{2,}$/))})}function fi(r){return(e,t,o={},i)=>d(Ht,{command:yt.const(r.command),ariaLabel:()=>r.ariaLabelKey?i(r.ariaLabelKey):r.command,colspan:jt(o.colspan,1),style:()=>o.style||"default",onTap:()=>{t({type:"keypad/custom-command",command:r.command})},children:d(St,{config:yt.const({}),latex:yt.const(r.content)})})}var fhe={"{":Vj({ariaLabelKey:"shared-calculator-narration-keypad-key-left-bracket"}),"}":Vj({ariaLabelKey:"shared-calculator-narration-keypad-key-right-bracket"}),"(":Oe({ariaLabelKey:"shared-calculator-narration-keypad-key-left-paren"}),")":Oe({ariaLabelKey:"shared-calculator-narration-keypad-key-right-paren"}),sqrt:Oe({content:"\\sqrt{}",ariaLabelKey:"shared-calculator-narration-keypad-key-sqrt"}),"/":Oe({ariaLabelKey:"shared-calculator-narration-keypad-key-divide"}),division:Oe({content:"\xF7",typedText:"/",command:"/",ariaLabelKey:"shared-calculator-narration-keypad-key-divide"}),obelus:Oe({content:"\xF7",typedText:"\xF7",ariaLabelKey:"shared-calculator-narration-keypad-key-divide"}),"*":Oe({ariaLabelKey:"shared-calculator-narration-keypad-key-times"}),multiplication:Oe({content:"\xD7",typedText:"*",command:"*",ariaLabelKey:"shared-calculator-narration-keypad-key-times"}),"\xB1":Oe({ariaLabelKey:"shared-calculator-narration-keypad-plus-minus"}),"-":Oe({ariaLabelKey:"shared-calculator-narration-keypad-key-minus"}),"+":Oe({ariaLabelKey:"shared-calculator-narration-keypad-key-plus"}),".":Oe({ariaLabelKey:"shared-calculator-narration-keypad-key-decimal"}),ans:(r,e,t={},o)=>d(Ht,{command:yt.const(r),ariaLabel:()=>o("shared-calculator-narration-keypad-key-ans"),colspan:jt(t.colspan,1),style:()=>t.style||"default",onTap:()=>e({type:"keypad/type-text",text:r}),children:"ans"}),enter:(r,e,t={},o)=>d(Ht,{command:yt.const(r),ariaLabel:()=>o("shared-calculator-narration-keypad-key-enter"),colspan:jt(t.colspan,1),style:()=>t.style||"default",onTap:()=>e({type:"keypad/press-key",key:"Enter",source:"keypad"}),children:d("i",{class:u("dcg-icon-arrow-enter"),"aria-hidden":u("true")})}),undo:(r,e,t={},o)=>d(Ht,{command:yt.const(r),ariaLabel:()=>o("shared-calculator-narration-keypad-key-enter"),colspan:jt(t.colspan,1),disabled:jt(t.disabled,!1),style:()=>t.style||"default",onTap:()=>e({type:"undo",source:"button-tap"}),children:d("i",{class:u("dcg-icon-undo"),"aria-hidden":u("true")})}),redo:(r,e,t={},o)=>d(Ht,{command:yt.const(r),ariaLabel:()=>o("shared-calculator-narration-keypad-key-enter"),colspan:jt(t.colspan,1),disabled:jt(t.disabled,!1),style:()=>t.style||"default",onTap:()=>e({type:"redo",source:"button-tap"}),children:d("i",{class:u("dcg-icon-redo"),"aria-hidden":u("true")})}),shift:(r,e,t={},o)=>d(Ht,{command:yt.const(r),ariaLabel:()=>o("shared-calculator-narration-keypad-key-shift"),colspan:jt(t.colspan,1),style:()=>t.style||"default",active:jt(t.active,!1),onTap:()=>e({type:"keypad/shift"}),children:d("i",{class:u("dcg-icon-shift"),"aria-hidden":u("true")})}),left:(r,e,t={},o)=>d(Ht,{command:yt.const(r),ariaLabel:()=>o("shared-calculator-narration-keypad-key-left-arrow"),colspan:jt(t.colspan,1),style:()=>t.style||"default",onTap:()=>e({type:"keypad/press-key",key:"Left",source:"keypad"}),children:d("i",{class:u("dcg-icon-arrow-left"),"aria-hidden":u("true")})}),right:(r,e,t={},o)=>d(Ht,{command:yt.const(r),ariaLabel:()=>o("shared-calculator-narration-keypad-key-right-arrow"),colspan:jt(t.colspan,1),style:()=>t.style||"default",onTap:()=>e({type:"keypad/press-key",key:"Right",source:"keypad"}),children:d("i",{class:u("dcg-icon-arrow-right"),"aria-hidden":u("true")})}),123:(r,e,t={},o)=>d(Ht,{command:yt.const(r),ariaLabel:()=>o("shared-calculator-narration-keypad-key-toggle-numbers"),colspan:jt(t.colspan,1),style:()=>t.style||"default",onTap:()=>e({type:"keypad/123"}),children:"1 2 3"}),ABC:(r,e,t={},o)=>d(Ht,{command:yt.const(r),ariaLabel:()=>o("shared-calculator-narration-keypad-key-toggle-letters"),colspan:jt(t.colspan,1),style:()=>t.style||"default",onTap:()=>e({type:"keypad/abc"}),children:"A B C"}),Audio:(r,e,t={},o)=>d(Ht,{command:yt.const(r),ariaLabel:()=>o("shared-calculator-narration-keypad-key-toggle-audio-trace"),colspan:jt(t.colspan,1),style:()=>t.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"on"}),children:d("i",{class:u("dcg-icon-volume"),"aria-hidden":u("true")})}),backspace:(r,e,t={},o)=>d(Ht,{command:yt.const(r),ariaLabel:()=>o("shared-calculator-narration-keypad-key-backspace"),colspan:jt(t.colspan,1),style:()=>t.style||"default",onTap:()=>e({type:"keypad/press-key",key:"Backspace",source:"keypad"}),children:d("i",{class:u("dcg-icon-delete"),"aria-hidden":u("true")})}),pi:Oe({content:"\\pi",ariaLabelKey:"shared-calculator-narration-keypad-key-pi"}),alpha:Oe({content:"\\alpha",ariaLabelKey:"shared-calculator-narration-keypad-key-alpha"}),beta:Oe({content:"\\beta",ariaLabelKey:"shared-calculator-narration-keypad-key-beta"}),theta:Oe({content:"\\theta",ariaLabelKey:"shared-calculator-narration-keypad-key-theta"}),tau:Oe({content:"\\tau",ariaLabelKey:"shared-calculator-narration-keypad-key-tau"}),phi:Oe({content:"\\phi",ariaLabelKey:"shared-calculator-narration-keypad-key-phi"}),rho:Oe({content:"\\rho",ariaLabelKey:"shared-calculator-narration-keypad-key-rho"}),"a^2":fi({command:"a^2",content:"a^2",ariaLabelKey:"shared-calculator-narration-keypad-key-squared"}),"a^3":fi({command:"a^3",content:"a^3",ariaLabelKey:"shared-calculator-narration-keypad-key-cubed"}),"x^3":fi({command:"a^3",content:"x^3",ariaLabelKey:"shared-calculator-narration-keypad-key-cubed"}),"a^b":Oe({content:"a^b",typedText:"^",ariaLabelKey:"shared-calculator-narration-keypad-key-superscript"}),a_b:Oe({content:"a_b",typedText:"_",ariaLabelKey:"shared-calculator-narration-keypad-key-subscript"}),"a/b":fi({content:"\\frac{a}{b}",command:"a/b",ariaLabelKey:"shared-calculator-narration-keypad-key-fraction"}),"x^2":fi({command:"a^2",content:"x^2",ariaLabelKey:"shared-calculator-narration-keypad-key-squared"}),"x^y":Oe({content:"x^y",typedText:"^",ariaLabelKey:"shared-calculator-narration-keypad-key-superscript"}),"x/y":Oe({content:"\\frac{x}{y}",typedText:"/",ariaLabelKey:"shared-calculator-narration-keypad-key-fraction"}),nthroot:fi({command:"nthroot",content:"\\sqrt[n]{}",ariaLabelKey:"shared-calculator-narration-keypad-key-nthroot"}),ythroot:fi({command:"nthroot",content:"\\sqrt[y]{}",ariaLabelKey:"shared-calculator-narration-keypad-key-ythroot"}),sin:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-sin"}),cos:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-cos"}),tan:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-tan"}),tone:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-tone"}),sec:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-sec"}),csc:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-csc"}),cot:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-cot"}),sinh:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-sinh"}),cosh:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-cosh"}),tanh:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-tanh"}),sech:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-csch"}),csch:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-csch"}),coth:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-coth"}),arcsin:fi({command:"arcsin",content:"sin^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arcsin"}),arccos:fi({command:"arccos",content:"cos^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arccos"}),arctan:fi({command:"arctan",content:"tan^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arctan"}),arccsc:fi({command:"arccsc",content:"csc^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arccsc"}),arcsec:fi({command:"arcsec",content:"sec^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arcsec"}),arccot:fi({command:"arccot",content:"cot^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arccot"}),"|a|":Oe({typedText:"|",ariaLabelKey:"shared-calculator-narration-keypad-key-abs"}),"|x|":Oe({typedText:"|",ariaLabelKey:"shared-calculator-narration-keypad-key-abs"}),ln:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-ln"}),midpoint:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-midpoint"}),segment:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-segment"}),line:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-line"}),ray:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-ray"}),parallel:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-parallel"}),perpendicular:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-perpendicular"}),circle:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-circle"}),arc:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-arc"}),angle:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-angle"}),directedangle:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-directed-angle"}),glider:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-glider"}),coterminal:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-coterminal"}),supplement:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-supplement"}),dilate:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-dilate"}),rotate:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-rotate"}),translate:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-translate"}),reflect:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-reflect"}),vertices:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-vertices"}),angles:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-angles"}),directedangles:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-directed-angles"}),segments:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-segments"}),radius:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-radius"}),center:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-center"}),intersection:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-intersection"}),area:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-area"}),perimeter:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-perimeter"}),log:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-log"}),quantile:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-quantile"}),quartile:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-quartile"}),var:Me({}),varp:Me({}),nCr:Me({}),loga:fi({command:"loga",content:"log_a",ariaLabelKey:"shared-calculator-narration-keypad-key-loga"}),stdev:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-stdev"}),mad:Me({}),nPr:Me({}),total:Me({}),count:Me({}),length:Me({}),for:Me({}),min:Me({}),max:Me({}),cov:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-cov"}),covp:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-covp"}),corr:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-corr"}),spearman:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-spearman"}),stats:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-stats"}),polygon:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-polygon"}),distance:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-distance"}),triangle:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-triangle"}),sphere:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-sphere"}),vector:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-vector"}),mean:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-mean"}),stdevp:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-stdevp"}),mod:Me({}),"e^x":Oe({typedText:"e^",ariaLabelKey:"shared-calculator-narration-keypad-key-exp"}),"10^n":Oe({content:"\\times10^{n}",typedText:"*10^",ariaLabelKey:"shared-calculator-narration-keypad-key-10-n"}),"a^{-1}":Oe({typedText:"^-1",ariaLabelKey:"shared-calculator-narration-keypad-key-reciprocal"}),sum:Oe({content:"\\sum",ariaLabelKey:"shared-calculator-narration-keypad-key-sum"}),prod:Oe({content:"\\prod",ariaLabelKey:"shared-calculator-narration-keypad-key-product"}),floor:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-floor"}),ceil:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-ceil"}),round:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-round"}),abs:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-abs"}),"!":Oe({ariaLabelKey:"shared-calculator-narration-keypad-key-factorial"}),"n!":Oe({typedText:"!",ariaLabelKey:"shared-calculator-narration-keypad-key-factorial"}),median:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-median"}),lcm:Me({}),gcd:Me({}),gcf:Me({}),ddx:fi({command:"ddx",content:"\\frac{d}{dx}"}),integral:fi({command:"integral",content:"\\int",ariaLabelKey:"shared-calculator-narration-keypad-key-int"}),"%":Oe({content:"\\%",ariaLabelKey:"shared-calculator-narration-keypad-key-percent-of"}),"->":Oe({content:"\\to",ariaLabelKey:"shared-calculator-narration-keypad-key-action-to"}),with:Oe({typedText:"with",content:"with",ariaLabelKey:"shared-calculator-narration-keypad-key-action-with"}),prime:Oe({typedText:"'",content:"f'",ariaLabelKey:"shared-calculator-narration-keypad-key-prime"}),exp:Me({}),sign:Me({}),normaldist:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-normaldist"}),poissondist:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-poissondist"}),geodist:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-geodist"}),binomialdist:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-binomialdist"}),uniformdist:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-uniformdist"}),erf:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-erf"}),histogram:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-histogram"}),boxplot:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-boxplot"}),dotplot:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-dotplot"}),tscore:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-tscore"}),ttest:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-ttest"}),ztest:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-ztest"}),zproptest:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-zproptest"}),chisqtest:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-chisqtest"}),chisqgof:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-chisqgof"}),conf:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-conf"}),null:Me({}),pleft:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-pleft"}),pright:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-pright"}),score:Me({}),dof:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-dof"}),estimate:Me({}),stderr:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-stderr"}),lower:Me({}),upper:Me({}),tdist:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-tdist"}),chisqdist:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-chisqdist"}),pdf:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-pdf"}),cdf:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-pdf"}),random:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-random"}),inversecdf:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-inversecdf"}),hsv:Me({}),rgb:Me({}),sort:Me({}),shuffle:Me({}),unique:Me({}),join:Me({}),"A^-1":fi({command:"A^-1",content:"A^{-1}",ariaLabelKey:"matrix-calculator-narration-keypad-key-inverse"}),"A^T":fi({command:"A^T",content:"A^T",ariaLabelKey:"matrix-calculator-narration-keypad-key-transpose"}),"A^2":fi({command:"A^2",content:"A^2",ariaLabelKey:"shared-calculator-narration-keypad-key-squared"}),"A^n":Oe({content:"A^n",typedText:"^",ariaLabelKey:"shared-calculator-narration-keypad-key-exp"}),det:Me({ariaLabelKey:"matrix-calculator-narration-keypad-key-det"}),trace:Me({ariaLabelKey:"matrix-calculator-narration-keypad-key-trace"}),rref:Me({ariaLabelKey:"matrix-calculator-narration-keypad-key-rref"}),a:Oe({}),b:Oe({}),c:Oe({}),d:Oe({}),e:Oe({}),f:Oe({}),g:Oe({}),h:Oe({}),i:Oe({}),j:Oe({}),k:Oe({}),l:Oe({}),m:Oe({}),n:Oe({}),o:Oe({}),p:Oe({}),q:Oe({}),r:Oe({}),s:Oe({}),t:Oe({}),u:Oe({}),v:Oe({}),w:Oe({}),x:Oe({}),boldX:Oe({content:"x",typedText:"x"}),y:Oe({}),boldY:Oe({content:"y",typedText:"y"}),z:Oe({}),boldZ:Oe({content:"z",typedText:"z"}),A:Oe({}),B:Oe({}),C:Oe({}),D:Oe({}),E:Oe({}),F:Oe({}),G:Oe({}),H:Oe({}),I:Oe({}),J:Oe({}),K:Oe({}),L:Oe({}),M:Oe({}),N:Oe({}),O:Oe({}),P:Oe({}),Q:Oe({}),R:Oe({}),S:Oe({}),T:Oe({}),U:Oe({}),V:Oe({}),W:Oe({}),X:Oe({}),Y:Oe({}),Z:Oe({}),0:Oe({}),1:Oe({}),2:Oe({}),3:Oe({}),4:Oe({}),5:Oe({}),6:Oe({}),7:Oe({}),8:Oe({}),9:Oe({}),",":Oe({}),"=":Oe({}),"[":Oe({}),"]":Oe({}),"{}_left":Qf({keys:["{","}"]}),"{}_right":eb({keys:["{","}"]}),"()_left":Qf({keys:["(",")"]}),"()_right":eb({keys:["(",")"]}),"[]_left":Qf({keys:["[","]"]}),"[]_right":eb({keys:["[","]"]}),",'_left":Qf({keys:[",","\u2032"]}),",'_right":eb({keys:[",","\u2032"],typedText:"'"}),'"':Oe({}),"'":Oe({}),"~":Oe({}),":":Oe({}),">":Oe({}),"<":Oe({}),">=":Oe({content:"\\ge"}),"<=":Oe({content:"\\le"}),"!%_left":Qf({keys:["!","{}^{%}"]}),"!%_right":eb({keys:["!","{}^{%}"],typedText:"%"}),"~:_left":Qf({keys:["~","{}^{:}"]}),"~:_right":eb({keys:["~","{}^{:}"],typedText:":"}),real:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-real"}),imag:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-imag"}),conj:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-conj"}),arg:Me({ariaLabelKey:"shared-calculator-narration-keypad-key-arg"}),"audio-trace-off":mhe({contentKey:"graphing-calculator-button-keypad-audio-trace-off",command:"off"}),"hear-graph":(r,e,t={},o)=>_(Ht,{command:yt.const(r),disabled:jt(t.disabled,!1),colspan:jt(t.colspan,1),style:jt(t.style,"blue"),ariaLabel:yt.const(void 0),onTap:()=>{e({type:"keypad/audio-trace",command:"hear-graph"})},children:[d("span",{class:u("dcg-play-icon-container"),children:d("i",{class:u("dcg-icon-play"),"aria-hidden":u("true")})}),d("span",{children:()=>o("graphing-calculator-button-audio-trace-hear-graph")})]}),"stop-graph":(r,e,t={},o)=>_(Ht,{command:yt.const(r),disabled:jt(t.disabled,!1),colspan:jt(t.colspan,1),style:jt(t.style,"blue"),onTap:()=>{e({type:"keypad/audio-trace",command:"stop-graph"})},children:[d("span",{class:u("dcg-stop-icon-container"),children:d("span",{class:u("dcg-stop-icon")})}),d("span",{children:()=>o("graphing-calculator-button-audio-trace-stop-graph")})]}),"volume-down":(r,e,t={},o)=>d(Ht,{command:yt.const(r),ariaLabel:()=>o("graphing-calculator-narration-keypad-key-volume-down"),disabled:jt(t.disabled,!1),style:()=>t.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"volume-down"}),children:d("span",{class:u("dcg-button-icon dcg-icon-only"),children:d("i",{class:u("dcg-icon-volume-down"),"aria-hidden":u("true")})})}),"volume-up":(r,e,t={},o)=>d(Ht,{command:yt.const(r),ariaLabel:()=>o("graphing-calculator-narration-keypad-key-volume-up"),disabled:jt(t.disabled,!1),style:()=>t.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"volume-up"}),children:d("span",{class:u("dcg-button-icon dcg-icon-only"),children:d("i",{class:u("dcg-icon-volume-up"),"aria-hidden":u("true")})})}),"speed-down":(r,e,t={},o)=>d(Ht,{command:yt.const(r),ariaLabel:()=>o("graphing-calculator-narration-keypad-key-speed-down"),disabled:jt(t.disabled,!1),style:()=>t.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"speed-down"}),children:d("span",{class:u("dcg-button-icon dcg-icon-only"),children:d("i",{class:u("dcg-icon-hide"),"aria-hidden":u("true")})})}),"speed-up":(r,e,t={},o)=>d(Ht,{command:yt.const(r),ariaLabel:()=>o("graphing-calculator-narration-keypad-key-speed-up"),disabled:jt(t.disabled,!1),style:()=>t.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"speed-up"}),children:d("span",{class:u("dcg-button-icon dcg-icon-only"),children:d("i",{class:u("dcg-icon-show"),"aria-hidden":u("true")})})}),"previous-point":(r,e,t={},o)=>d(Ht,{ariaLabel:()=>o("graphing-calculator-narration-keypad-key-previous-point"),command:yt.const(r),disabled:jt(t.disabled,!1),colspan:jt(t.colspan,1),style:()=>t.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"previous-point"}),children:d("span",{class:u("dcg-button-icon dcg-icon-only"),children:d("i",{class:u("dcg-icon-thin-arrow-left"),"aria-hidden":u("true")})})}),"next-point":(r,e,t={},o)=>d(Ht,{ariaLabel:()=>o("graphing-calculator-narration-keypad-key-next-point"),command:yt.const(r),disabled:jt(t.disabled,!1),colspan:jt(t.colspan,1),style:()=>t.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"next-point"}),children:d("span",{class:u("dcg-button-icon dcg-icon-only"),children:d("i",{class:u("dcg-icon-thin-arrow-right"),"aria-hidden":u("true")})})}),"previous-poi":(r,e,t={},o)=>d(Ht,{ariaLabel:()=>o("graphing-calculator-narration-keypad-key-previous-poi"),command:yt.const(r),disabled:jt(t.disabled,!1),colspan:jt(t.colspan,1),style:()=>t.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"previous-poi"}),children:d("span",{class:u("dcg-button-icon dcg-icon-only"),children:d("i",{class:u("dcg-icon-hide"),"aria-hidden":u("true")})})}),"next-poi":(r,e,t={},o)=>d(Ht,{ariaLabel:()=>o("graphing-calculator-narration-keypad-key-next-poi"),command:yt.const(r),disabled:jt(t.disabled,!1),colspan:jt(t.colspan,1),style:()=>t.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"next-poi"}),children:d("span",{class:u("dcg-button-icon dcg-icon-only"),children:d("i",{class:u("dcg-icon-show"),"aria-hidden":u("true")})})}),"previous-curve":(r,e,t={},o)=>d(Ht,{ariaLabel:()=>o("graphing-calculator-narration-keypad-key-previous-curve"),command:yt.const(r),disabled:jt(t.disabled,!1),colspan:jt(t.colspan,1),style:()=>t.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"previous-curve"}),children:d("span",{class:u("dcg-button-icon dcg-icon-only"),children:d("i",{class:u("dcg-icon-caret-up"),"aria-hidden":u("true")})})}),"next-curve":(r,e,t={},o)=>d(Ht,{ariaLabel:()=>o("graphing-calculator-narration-keypad-key-next-curve"),command:yt.const(r),disabled:jt(t.disabled,!1),style:()=>t.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"next-curve"}),children:d("span",{class:u("dcg-button-icon dcg-icon-only"),children:d("i",{class:u("dcg-icon-caret-down"),"aria-hidden":u("true")})})})};function O(r,e,t={}){let o=r.dispatch;return fhe[e](e,o,t,r.s)}function Pr(r=1){return d("div",{style:yt.const(`flex-grow:${r}`)})}var Uj=__dcg_shared_module_exports__['e'](se());var XF=class XF extends Uj.View{init(){this.controller=this.props.controller(),this.dispatch=this.controller.dispatch,this.s=this.controller.s}};XF.uuid=Al();var yo=XF;var{IfElse:bhe}=tb.Components,z_=460,q_=class extends yo{template(){return d(mr,{controller:this.props.controller,children:_("div",{class:u("dcg-audio-keypad-container"),children:[_("div",{class:u("dcg-audio-keypad-column dcg-playback-column"),children:[d(Re,{tooltip:this.bindFn(this.getDisabledTooltipText),gravity:this.const("s"),children:d("div",{class:u("dcg-btn-playback"),children:bhe(()=>this.controller.isAudioTracing(),{true:()=>O(this,"stop-graph",{disabled:this.bindFn(this.isAudioDisabled)}),false:()=>O(this,"hear-graph",{disabled:this.bindFn(this.isAudioDisabled)})})})}),d("div",{class:u("dcg-key-nav-section-container"),children:d(Re,{tooltip:this.bindFn(this.getDisabledTooltipText),gravity:this.const("s"),children:_("div",{class:u("dcg-key-nav-section"),children:[O(this,"volume-down",{disabled:this.bindFn(this.isVolumeDownDisabled)}),_("div",{role:u("heading"),"aria-level":u("2"),class:()=>({"dcg-key-nav-section-title-container":!0,"dcg-disabled":this.isAudioDisabled()}),children:[d("span",{class:u("dcg-key-nav-section-title"),children:()=>this.controller.s("graphing-calculator-label-audio-trace-volume")}),d("span",{class:u("dcg-keypad-volume-value dcg-key-nav-section-value"),children:()=>this.getAudioTraceVolume()})]}),O(this,"volume-up",{disabled:this.bindFn(this.isVolumeUpDisabled)})]})})}),d("div",{class:u("dcg-key-nav-section-container"),children:d(Re,{tooltip:this.bindFn(this.getDisabledTooltipText),gravity:this.const("s"),children:_("div",{class:u("dcg-key-nav-section"),children:[O(this,"speed-down",{disabled:this.bindFn(this.isSpeedDownDisabled)}),_("div",{class:()=>({"dcg-key-nav-section-title-container":!0,"dcg-disabled":this.isAudioDisabled()}),role:u("heading"),"aria-level":u("2"),children:[d("span",{class:u("dcg-key-nav-section-title"),children:()=>this.controller.s("graphing-calculator-label-audio-trace-speed")}),d("span",{class:u("dcg-keypad-speed-value dcg-key-nav-section-value"),children:()=>this.getAudioTraceSpeed()})]}),O(this,"speed-up",{disabled:this.bindFn(this.isSpeedUpDisabled)})]})})}),O(this,"audio-trace-off",{style:"highlight"})]}),d("div",{class:u("dcg-audio-keypad-spacer")}),_("div",{class:u("dcg-audio-keypad-column dcg-navigation-column"),children:[d("span",{class:u("dcg-key-section-title dcg-center-col"),role:u("heading"),"aria-level":u("2"),children:()=>this.controller.s("graphing-calculator-heading-audio-trace-navigation")}),_("div",{class:u("dcg-key-nav-section dcg-center-col"),children:[O(this,"previous-point",{disabled:this.bindFn(this.isPrevPointDisabled)}),d("div",{class:u("dcg-key-nav-section-title-container"),role:u("heading"),"aria-level":u("2"),children:()=>this.controller.s("graphing-calculator-label-audio-trace-point")}),O(this,"next-point",{disabled:this.bindFn(this.isNextPointDisabled)})]}),_("div",{class:u("dcg-key-nav-section"),children:[O(this,"previous-poi",{disabled:this.bindFn(this.isPrevPOIDisabled)}),d("div",{class:u("dcg-key-nav-section-title-container dcg-poi-section-container"),role:u("heading"),"aria-level":u("2"),children:_(Eo,{i18n:this.const(this.controller),children:[d("span",{class:u("dcg-key-nav-section-value"),children:"Point"}),d("span",{class:u("dcg-key-nav-section-title"),children:"of Interest"})]},this.const("graphing-calculator-heading-keypad-audio-trace-point-of-interest"))}),O(this,"next-poi",{disabled:this.bindFn(this.isNextPOIDisabled)})]}),_("div",{class:u("dcg-key-nav-section dcg-center-col"),children:[O(this,"previous-curve",{disabled:this.bindFn(this.isPrevCurveDisabled)}),d("div",{class:u("dcg-key-nav-section-title-container"),role:u("heading"),"aria-level":u("2"),children:()=>this.controller.s("graphing-calculator-label-audio-trace-curve")}),O(this,"next-curve",{disabled:this.bindFn(this.isNextCurveDisabled)})]})]}),d("div",{class:u("dcg-audio-keypad-spacer")}),_("div",{class:u("dcg-audio-keypad-column dcg-screenreader-options"),children:[_("span",{class:u("dcg-key-section-title"),role:u("heading"),"aria-level":u("2"),children:[()=>this.layoutWidth()<=z_?this.controller.s("graphing-calculator-heading-audio-trace-describe"):this.controller.s("graphing-calculator-heading-audio-trace-screen-reader"),d(Re,{tooltip:()=>this.controller.s("graphing-calculator-label-audio-trace-need-screen-reader"),gravity:this.const("s"),sticky:this.const(!0),children:d("i",{class:u("dcg-icon-question-sign"),"aria-hidden":u("true")})})]}),d(Ht,{command:tb.const("describe-point"),colspan:this.const(1),style:this.const("default"),onTap:()=>{this.dispatch({type:"keypad/audio-trace",command:"describe-point"})},children:d("span",{children:()=>this.layoutWidth()<=z_?this.controller.s("graphing-calculator-button-keypad-describe-point-short"):this.controller.s("graphing-calculator-button-keypad-describe-point")})}),d(Ht,{command:tb.const("describe-curve"),colspan:this.const(1),style:this.const("default"),onTap:()=>{this.dispatch({type:"keypad/audio-trace",command:"describe-curve"})},children:d("span",{children:()=>this.layoutWidth()<=z_?this.controller.s("graphing-calculator-button-keypad-describe-curve-short"):this.controller.s("graphing-calculator-button-keypad-describe-curve")})}),d(Ht,{command:tb.const("describe-axes"),colspan:this.const(1),style:this.const("default"),onTap:()=>{this.dispatch({type:"keypad/audio-trace",command:"describe-axes"})},children:d("span",{children:()=>this.layoutWidth()<=z_?this.controller.s("graphing-calculator-label-axes"):this.controller.s("graphing-calculator-button-keypad-describe-axes")})})]})]})})}layoutWidth(){return this.controller.getLayoutMeasurements().width}isPrevPointDisabled(){let r=this.controller.getAudioGraph();return r?!r.agNavigator.canMoveToPrevPoint():!0}isNextPointDisabled(){let r=this.controller.getAudioGraph();return r?!r.agNavigator.canMoveToNextPoint():!0}isPrevPOIDisabled(){let r=this.controller.getAudioGraph();return r?!r.agNavigator.canMoveToPrevPOI():!0}isNextPOIDisabled(){let r=this.controller.getAudioGraph();return r?!r.agNavigator.canMoveToNextPOI():!0}isPrevCurveDisabled(){let r=this.controller.getAudioGraph();return r?!r.agNavigator.canMoveToPrevCurve():!0}isNextCurveDisabled(){let r=this.controller.getAudioGraph();return r?!r.agNavigator.canMoveToNextCurve():!0}isAudioDisabled(){return!this.controller.getAudio()}getAudioTraceVolume(){let r=this.controller.getAudioGraph();return!r||this.isAudioDisabled()?"0%":`${r.getAudioVolume()*100}%`}isVolumeDownDisabled(){let r=this.controller.getAudioGraph();return!r||this.isAudioDisabled()?!0:r.getAudioVolume()<=0}isVolumeUpDisabled(){let r=this.controller.getAudioGraph();return!r||this.isAudioDisabled()?!0:r.getAudioVolume()>=1}getAudioTraceSpeed(){let r=this.controller.getAudioGraph();return!r||this.isAudioDisabled()?"0":$x[r.getAudioSpeedIndex()].displayedSpeed}isSpeedDownDisabled(){let r=this.controller.getAudioGraph();return!r||this.isAudioDisabled()?!0:r.getAudioSpeedIndex()<=0}isSpeedUpDisabled(){let r=this.controller.getAudioGraph();return!r||this.isAudioDisabled()?!0:r.getAudioSpeedIndex()===$x.length-1}getDisabledTooltipText(){return this.isAudioDisabled()?this.controller.s("graphing-calculator-narration-audio-trace-sound-effects-disabled"):""}};ce();ie();var qj=__dcg_shared_module_exports__['e'](se());var{If:H_,For:zj}=qj.Components,K_=class extends yo{template(){return _("div",{class:()=>({"dcg-functions-popover":!0,"dcg-popover":!0,"dcg-top":!0,"dcg-two-column":this.shouldRenderWithTwoColumns()}),id:this.const(`dcg-functions-popover-${yo.uuid}`),role:u("group"),"aria-label":()=>this.controller.s("graphing-calculator-button-functions"),children:[d("div",{class:u("dcg-popover-interior"),children:d("div",{class:u("dcg-interior-buttons"),children:d("div",{class:u("dcg-basic-keypad dcg-do-not-blur"),children:d(zj,{each:this.bindFn(this.getKeypadKeys),children:r=>_("div",{class:u("dcg-keypad-keys-section"),children:[d(H_,{predicate:()=>r().title!==void 0,children:()=>_("div",{class:u("dcg-section-heading"),role:u("heading"),"aria-level":u("2"),children:[()=>r().title,d(H_,{predicate:()=>!!r().beta,children:()=>d("span",{class:u("dcg-beta-tag"),children:()=>this.controller.s("shared-calculator-narration-keypad-key-beta")})}),d(H_,{predicate:()=>!!r().helpLink,children:()=>d("a",{href:()=>r().helpLink.url,target:u("_blank"),"aria-label":()=>r().helpLink.tooltip,children:d("i",{class:u("dcg-icon-question-sign"),"aria-hidden":u("true")})})})]})}),d(H_,{predicate:()=>r().title===void 0,children:()=>d("div",{class:u("dcg-popover-section-separator"),role:u("separator")})}),d("div",{class:u("dcg-keypad-keys-buttons"),children:d(zj.Simple,{each:()=>r().keys,children:e=>this.b(e)})})]})},r=>r.id)})})}),d("div",{class:u("dcg-arrow")})]})}shouldRenderWithTwoColumns(){let r=this.controller.getGraphSettings().config.projectorMode?410:375;return this.controller.getLayoutMeasurements().width<r}getInverseTrigSection(){let r=this.controller.areFunctionsRestricted()?["arcsin","arccos","arctan"]:["arcsin","arccos","arctan","arccsc","arcsec","arccot"];return{id:"inversetrig",title:this.controller.s("graphing-calculator-heading-inverse-trig"),keys:r}}getGeometryTools(){let r=["midpoint","intersection","segment","line","ray","vector","parallel","perpendicular","circle","arc","angle","directedangle","polygon","glider"];return{id:"geometry-tools",title:this.controller.s("graphing-calculator-heading-geometry-tools"),keys:r}}getGeometryTransformations(){let r=["dilate","rotate","reflect","translate"];return{id:"geometry-transformations",title:this.controller.s("graphing-calculator-heading-geometry-transformations"),keys:r}}getGeometryMeasurements(){let r=["distance","length","area","perimeter","vertices","angles","directedangles","segments","radius","center","coterminal","supplement"];return{id:"geometry-measurements",title:this.controller.s("graphing-calculator-heading-geometry-measurements"),keys:r}}getCalculatorGeometryMethods(){let r=!this.controller.areFunctionsRestricted()||this.controller.areGeometryFunctionsForceEnabled(),e=this.controller.isThreeDMode()?["segment","triangle","sphere","vector"]:["polygon"],t=this.controller.isThreeDMode()?["length","distance","midpoint"]:["distance","midpoint"],o=r?t:[];return{id:"geometry",title:this.controller.s("graphing-calculator-heading-geometry"),keys:[...e,...o]}}getTrigSection(){let r=this.controller.areFunctionsRestricted()?["sin","cos","tan"]:["sin","cos","tan","csc","sec","cot"];return{id:"trig",title:this.controller.s("graphing-calculator-heading-trig"),keys:r}}getHyperbolicTrigSection(){let r=this.controller.areFunctionsRestricted()?["sinh","cosh","tanh"]:["sinh","cosh","tanh","csch","sech","coth"];return{id:"hyperbtrig",title:this.controller.s("graphing-calculator-heading-hyperbolic-trig"),keys:r}}getListFunctions(){return{id:"lists",title:this.controller.s("graphing-calculator-heading-lists"),keys:["join","sort","shuffle","unique","for"]}}getInferenceSection(){return{id:"inference",title:this.controller.s("graphing-calculator-heading-inference"),keys:["ztest","ttest","zproptest","chisqtest","chisqgof","null","p","pleft","pright","score","dof","stderr","conf","lower","upper","estimate"]}}getStatsSection(){let r=["mean","median","min","max","quartile","quantile","stdev","stdevp","var","varp"];return this.controller.areFunctionsRestricted()||(r=r.concat(["cov","covp","mad"])),r=r.concat(["corr","spearman","stats","count","total"]),{id:"stats",title:this.controller.s("graphing-calculator-heading-stats"),keys:r}}getMiscSection(){return{title:this.controller.s("graphing-calculator-button-functions-menu-number-theory"),id:"misc",keys:["lcm","gcd","mod","ceil","floor","round","sign","nthroot","nPr","nCr"]}}getVisualizationsSection(){return{title:this.controller.s("graphing-calculator-heading-dist-tab-visualizations"),id:"visualizations",keys:["histogram","dotplot","boxplot"],helpLink:{url:"https://help.desmos.com/hc/en-us/articles/360022405991-Data-Visualizations",tooltip:this.controller.s("graphing-calculator-narration-dist-tab-visualizations")}}}getCalculusSection(){return{title:this.controller.s("graphing-calculator-heading-calculus"),id:"calculus",keys:["exp","ln","log","loga","ddx","prime","integral","sum","prod"]}}getDistributionsSection(){return{title:this.controller.s("graphing-calculator-heading-dist-tab-distributions"),id:"distributions",keys:["normaldist","tdist","chisqdist","uniformdist","binomialdist","poissondist","geodist","pdf","cdf","inversecdf","random"],helpLink:{url:"https://help.desmos.com/hc/en-us/articles/360022401451-Distributions",tooltip:this.controller.s("graphing-calculator-narration-dist-tab-distributions")}}}getColorsSection(){return{title:this.controller.s("graphing-calculator-button-functions-menu-custom-colors"),id:"colors",keys:["rgb","hsv"],helpLink:{url:"https://help.desmos.com/hc/en-us/articles/4406795899533-Custom-Colors",tooltip:this.controller.s("graphing-calculator-button-functions-menu-custom-colors")}}}getAdvancedSection(){return{title:this.controller.s("graphing-calculator-heading-functions-menu-advanced"),id:"advanced",keys:["->","with"],helpLink:{url:"https://help.desmos.com/hc/en-us/sections/4406370087053-Advanced-Features",tooltip:this.controller.s("graphing-calculator-heading-functions-menu-advanced")}}}getPolarSection(){return{title:this.controller.s("graphing-calculator-heading-functions-menu-polar"),id:"polar",keys:["rho","theta","phi"],helpLink:{url:"https://help.desmos.com/hc/en-us/articles/15824510769805",tooltip:this.controller.s("graphing-calculator-heading-functions-menu-polar")}}}getSoundSection(){return{title:this.controller.s("graphing-calculator-heading-functions-menu-sound"),id:"sound",keys:["tone"],helpLink:{url:"https://help.desmos.com/hc/en-us/articles/21373904717197-Tone",tooltip:this.controller.s("graphing-calculator-heading-functions-menu-sound")}}}getComplexSection(){return{title:this.controller.s("graphing-calculator-heading-functions-menu-complex"),id:"complex",keys:["real","imag","conj","arg"]}}getKeypadKeys(){let r=[this.getTrigSection(),this.getInverseTrigSection(),this.getStatsSection(),this.getListFunctions()];return this.controller.areDistributionsEnabled()&&(this.controller.isThreeDMode()||r.push(this.getVisualizationsSection()),r.push(this.getDistributionsSection()),r.push(this.getInferenceSection())),r.push(this.getCalculusSection()),r.push(this.getHyperbolicTrigSection()),this.controller.is3dProduct()&&r.push(this.getPolarSection()),this.controller.isGeometry()?(r.push(this.getGeometryTools()),r.push(this.getGeometryMeasurements()),r.push(this.getGeometryTransformations())):r.push(this.getCalculatorGeometryMethods()),r.push(this.getColorsSection()),this.controller.toneAllowed()&&r.push(this.getSoundSection()),r.push(this.getMiscSection()),this.controller.isComplexModeEnabled()&&r.push(this.getComplexSection()),this.controller.areActionsEnabled()&&r.push(this.getAdvancedSection()),r}b(r){return O(this,r,{style:"popover"})}};ie();ce();ie();var Hj=__dcg_shared_module_exports__['e'](se()),Ye=class extends Hj.View{template(){return d("div",{class:u("dcg-keypad-row"),children:this.props.children})}};var W_=class extends yo{template(){return _(mr,{controller:this.props.controller,children:[_(Ye,{children:[O(this,"a"),O(this,"b"),O(this,"c"),O(this,"d"),O(this,"e"),O(this,"f"),O(this,"g"),O(this,"h"),O(this,"i"),O(this,"j")]}),_(Ye,{children:[O(this,"k"),O(this,"l"),O(this,"m"),O(this,"n"),O(this,"o"),O(this,"p"),O(this,"q"),O(this,"r"),O(this,"s"),O(this,"t")]}),_(Ye,{children:[O(this,"shift",{style:"highlight"}),O(this,"u"),O(this,"v"),O(this,"w"),O(this,"x"),O(this,"y"),O(this,"z"),O(this,"theta"),O(this,"backspace",{colspan:2,style:"highlight"})]}),_(Ye,{children:[O(this,"123",{colspan:2,style:"highlight"}),O(this,"a_b"),O(this,"!%_left"),O(this,"[]_left"),O(this,"{}_left"),O(this,this.controller.getGraphSettings().config.customRegressions?"~:_left":":")," ",O(this,",'_left"),O(this,"enter",{colspan:2,style:"blue"})]})]})}};ie();var $_=class extends yo{template(){return _(mr,{controller:this.props.controller,children:[_(Ye,{children:[O(this,"A"),O(this,"B"),O(this,"C"),O(this,"D"),O(this,"E"),O(this,"F"),O(this,"G"),O(this,"H"),O(this,"I"),O(this,"J")]}),_(Ye,{children:[O(this,"K"),O(this,"L"),O(this,"M"),O(this,"N"),O(this,"O"),O(this,"P"),O(this,"Q"),O(this,"R"),O(this,"S"),O(this,"T")]}),_(Ye,{children:[O(this,"shift",{style:"highlight"}),O(this,"U"),O(this,"V"),O(this,"W"),O(this,"X"),O(this,"Y"),O(this,"Z"),O(this,"tau"),O(this,"backspace",{colspan:2,style:"highlight"})]}),_(Ye,{children:[O(this,"123",{colspan:2,style:"highlight"}),O(this,"a^b"),O(this,"!%_right"),O(this,"[]_right"),O(this,"{}_right"),O(this,this.controller.getGraphSettings().config.customRegressions?"~:_right":":"),O(this,",'_right"),O(this,"enter",{colspan:2,style:"blue"})]})]})}};ce();ie();var Ov=__dcg_shared_module_exports__['e'](se());var{IfElse:yhe}=Ov.Components,j_=class extends yo{template(){return _(mr,{controller:this.props.controller,children:[_(Ye,{children:[O(this,"boldX"),O(this,"boldY"),yhe(()=>this.props.controller().isComplexModeEnabled(),{false:()=>O(this,"a^2"),true:()=>O(this,"i")}),O(this,"a^b"),Pr(.5),O(this,"7",{style:"highlight"}),O(this,"8",{style:"highlight"}),O(this,"9",{style:"highlight"}),O(this,"division"),Pr(.5),d(Ht,{command:this.const("functions"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-functions"),colspan:this.const(2),style:this.const("highlight"),active:()=>this.controller.isKeypadFunctionsPopoverOpen(),onTap:()=>this.dispatch({type:"keypad/functions"}),ariaControls:this.const(`dcg-functions-popover-${yo.uuid}`),ariaExpanded:()=>this.controller.isKeypadFunctionsPopoverOpen(),children:this.bindFn(this.getFuncsBtnText)})]}),_(Ye,{children:[O(this,"("),O(this,")"),O(this,"<"),O(this,">"),Pr(.5),O(this,"4",{style:"highlight"}),O(this,"5",{style:"highlight"}),O(this,"6",{style:"highlight"}),O(this,"multiplication"),Pr(.5),O(this,"left",{style:"highlight"}),O(this,"right",{style:"highlight"})]}),_(Ye,{children:[O(this,"|a|"),O(this,","),O(this,"<="),O(this,">="),Pr(.5),O(this,"1",{style:"highlight"}),O(this,"2",{style:"highlight"}),O(this,"3",{style:"highlight"}),O(this,"-"),Pr(1),O(this,"backspace",{colspan:1.5,style:"highlight"})]}),_(Ye,{children:[d(Ht,{command:Ov.const("ABC"),colspan:this.const(1),additionalClass:this.const("dcg-abc-button--one-column"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-toggle-letters"),style:this.const("highlight"),onTap:()=>{this.dispatch({type:"keypad/abc"})},children:()=>this.controller.getLayoutMeasurements().width<=600?this.controller.raw("ABC"):this.controller.raw("A B C")}),d(Ht,{command:Ov.const("Audio"),disabled:()=>!this.controller.canAudioTrace(),ariaLabel:()=>this.controller.s("graphing-calculator-narration-toggle-audio-trace"),colspan:this.const(1),style:()=>"highlight",onTap:()=>this.dispatch({type:"keypad/audio-trace",command:"on"}),children:d("i",{class:u("dcg-icon-volume"),"aria-hidden":u("true")})}),O(this,"sqrt"),O(this,"pi"),Pr(.5),O(this,"0",{style:"highlight"}),O(this,".",{style:"highlight"}),O(this,"="),O(this,"+"),Pr(.5),O(this,"enter",{colspan:2,style:"blue"})]})]})}getFuncsBtnText(){return this.controller.isNarrow()?this.controller.s("graphing-calculator-button-funcs"):this.controller.s("graphing-calculator-button-functions")}};ie();var X_=__dcg_shared_module_exports__['e'](se());var{If:xhe}=X_.Components,Y_=class extends yo{template(){return _(mr,{controller:this.props.controller,children:[_(Ye,{children:[O(this,"boldX"),O(this,"boldY"),O(this,"boldZ"),O(this,"a^b"),Pr(.5),O(this,"7",{style:"highlight"}),O(this,"8",{style:"highlight"}),O(this,"9",{style:"highlight"}),O(this,"division"),Pr(.5),d(Ht,{command:this.const("functions"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-functions"),colspan:this.const(2),style:this.const("highlight"),active:()=>this.controller.isKeypadFunctionsPopoverOpen(),onTap:()=>this.dispatch({type:"keypad/functions"}),ariaControls:this.const(`dcg-functions-popover-${yo.uuid}`),ariaExpanded:()=>this.controller.isKeypadFunctionsPopoverOpen(),children:this.bindFn(this.getFuncsBtnText)})]}),_(Ye,{children:[O(this,"("),O(this,")"),O(this,"<"),O(this,">"),Pr(.5),O(this,"4",{style:"highlight"}),O(this,"5",{style:"highlight"}),O(this,"6",{style:"highlight"}),O(this,"multiplication"),Pr(.5),O(this,"left",{style:"highlight"}),O(this,"right",{style:"highlight"})]}),_(Ye,{children:[O(this,"|a|"),O(this,","),O(this,"<="),O(this,">="),Pr(.5),O(this,"1",{style:"highlight"}),O(this,"2",{style:"highlight"}),O(this,"3",{style:"highlight"}),O(this,"-"),Pr(1),O(this,"backspace",{colspan:1.5,style:"highlight"})]}),_(Ye,{children:[d(Ht,{command:X_.const("ABC"),colspan:()=>this.controller.isComplexModeEnabled()?1:2,additionalClass:()=>this.controller.isComplexModeEnabled()?"dcg-abc-button--one-column":void 0,ariaLabel:()=>this.controller.s("graphing-calculator-narration-toggle-letters"),style:this.const("highlight"),onTap:()=>{this.dispatch({type:"keypad/abc"})},children:()=>this.controller.isComplexModeEnabled()&&this.controller.getLayoutMeasurements().width<=600?this.controller.raw("ABC"):this.controller.raw("A B C")}),d(xhe,{predicate:()=>this.controller.isComplexModeEnabled(),children:()=>O(this,"i")}),O(this,"sqrt"),O(this,"pi"),Pr(.5),O(this,"0",{style:"highlight"}),O(this,".",{style:"highlight"}),O(this,"="),O(this,"+"),Pr(.5),O(this,"enter",{colspan:2,style:"blue"})]})]})}getFuncsBtnText(){return this.controller.isNarrow()?this.controller.s("graphing-calculator-button-funcs"):this.controller.s("graphing-calculator-button-functions")}};ie();var J_=class extends yo{template(){return _(mr,{controller:this.props.controller,children:[_(Ye,{children:[O(this,"q"),O(this,"w"),O(this,"e"),O(this,"r"),O(this,"t"),O(this,"y"),O(this,"u"),O(this,"i"),O(this,"o"),O(this,"p")]}),_(Ye,{children:[O(this,"a"),O(this,"s"),O(this,"d"),O(this,"f"),O(this,"g"),O(this,"h"),O(this,"j"),O(this,"k"),O(this,"l"),O(this,"theta")]}),_(Ye,{children:[O(this,"shift",{colspan:1.364,style:"highlight"}),Pr(.136),O(this,"z"),O(this,"x"),O(this,"c"),O(this,"v"),O(this,"b"),O(this,"n"),O(this,"m"),Pr(.136),O(this,"backspace",{colspan:1.364,style:"highlight"})]}),_(Ye,{children:[O(this,"123",{colspan:1.818,style:"highlight"}),Pr(.182),O(this,"a_b"),O(this,"!%_left"),O(this,"[]_left"),O(this,"{}_left"),O(this,this.controller.getGraphSettings().config.customRegressions?"~:_left":":"),O(this,",'_left"),Pr(.182),O(this,"enter",{colspan:1.818,style:"blue"})]})]})}};ie();var Z_=class extends yo{template(){return _(mr,{controller:this.props.controller,children:[_(Ye,{children:[O(this,"Q"),O(this,"W"),O(this,"E"),O(this,"R"),O(this,"T"),O(this,"Y"),O(this,"U"),O(this,"I"),O(this,"O"),O(this,"P")]}),_(Ye,{children:[O(this,"A"),O(this,"S"),O(this,"D"),O(this,"F"),O(this,"G"),O(this,"H"),O(this,"J"),O(this,"K"),O(this,"L"),O(this,"tau")]}),_(Ye,{children:[O(this,"shift",{colspan:1.364,active:!0,style:"highlight"}),Pr(.136),O(this,"Z"),O(this,"X"),O(this,"C"),O(this,"V"),O(this,"B"),O(this,"N"),O(this,"M"),Pr(.136),O(this,"backspace",{colspan:1.364,style:"highlight"})]}),_(Ye,{children:[O(this,"123",{colspan:1.818,style:"highlight"}),Pr(.182),O(this,"a^b"),O(this,"!%_right"),O(this,"[]_right"),O(this,"{}_right"),O(this,this.controller.getGraphSettings().config.customRegressions?"~:_right":":"),O(this,",'_right"),Pr(.182),O(this,"enter",{colspan:1.818,style:"blue"})]})]})}};var{SwitchUnion:vhe,If:JF}=Kj.Components,Q_=class extends yo{template(){return _("div",{class:u("dcg-keypad"),role:u("region"),"aria-label":()=>this.controller.s("shared-calculator-narration-keypad"),children:[d("div",{class:()=>({"dcg-keys-container":!0,"dcg-smaller-functions-text":this.controller.getLayoutMeasurements().width<650,"dcg-small-ABC":this.controller.getLayoutMeasurements().width<490,"dcg-smaller-ABC":this.controller.getLayoutMeasurements().width<420,"dcg-smallest-ABC":this.controller.getLayoutMeasurements().width<380}),style:this.bindFn(this.computeStyles),didMount:this.bindFn(this.didMountContainer),"aria-hidden":()=>!this.controller.isKeypadOpen(),children:_("div",{class:u("dcg-keys-background dcg-do-not-blur"),children:[_("div",{class:u("dcg-keys"),children:[vhe(()=>this.controller.getKeypadLayout(),{letters:()=>d(J_,{controller:this.props.controller}),capitalLetters:()=>d(Z_,{controller:this.props.controller}),mainNumbers:()=>d(j_,{controller:this.props.controller}),mainNumbers3D:()=>d(Y_,{controller:this.props.controller}),noQwertyLetters:()=>d(W_,{controller:this.props.controller}),noQwertyCapitalLetters:()=>d($_,{controller:this.props.controller}),audio:()=>d(q_,{controller:this.props.controller})}),d(JF,{predicate:()=>this.controller.isKeypadFunctionsPopoverOpen(),children:()=>d(K_,{controller:this.props.controller})})]}),d(JF,{predicate:()=>this.controller.isHideKeypadButtonVisible(),children:()=>d("div",{class:u("dcg-minimize-keypad-container"),children:d(Re,{tooltip:()=>this.controller.s("graphing-calculator-label-hide-keypad"),gravity:this.const("n"),offset:this.const({left:6}),children:_("div",{role:u("button"),"aria-expanded":u("true"),"aria-controls":this.const(yo.uuid),"aria-label":()=>this.controller.s("graphing-calculator-label-hide-keypad"),class:u("dcg-minimize-keypad"),onTap:()=>{this.controller.dispatch({type:"keypad/set-minimized",minimized:!0})},children:[d("i",{class:u("dcg-icon-keyboard"),"aria-hidden":u("true")}),d("i",{class:u("dcg-icon-caret-down"),"aria-hidden":u("true")})]})})})})]})}),d(JF,{predicate:this.bindFn(this.isShowKeypadButtonVisible),children:()=>d("div",{class:u("dcg-show-keypad-container"),children:d(Re,{tooltip:()=>this.controller.s("graphing-calculator-label-show-keypad"),gravity:this.const("n"),children:_("div",{role:u("button"),"aria-expanded":u("false"),"aria-controls":this.const(yo.uuid),"aria-label":()=>this.controller.s("graphing-calculator-label-show-keypad"),class:u("dcg-btn-flat-gray dcg-show-keypad dcg-do-not-blur"),onTap:()=>{this.controller.dispatch({type:"keypad/set-minimized",minimized:!1})},children:[d("i",{class:u("dcg-icon-keyboard"),"aria-hidden":u("true")}),d("i",{class:u("dcg-icon-caret-up dcg-do-not-blur"),"aria-hidden":u("true")})]})})})})]})}didMountContainer(r){this.containerElt=r}isShowKeypadButtonVisible(){return this.controller.getBrailleMode()!=="none"?!1:!this.controller.isKeypadOpen()&&!this.controller.isNarrow()&&!this.controller.isInEditListMode()&&(this.controller.isListVisible()||this.controller.inAudioTraceMode())}didMount(){this.updatePopoverPosition()}didUpdate(){this.updatePopoverPosition()}computeStyles(){let r={};return this.controller.isNarrow()||(r.transition="transform .3s, opacity .3s"),this.controller.isKeypadOpen()||(r.opacity="0",r.transform="translate3d(0, 255px, 0)"),r}updatePopoverPosition(){if(!this.controller.isKeypadFunctionsPopoverOpen()){this.__popoverCache=void 0;return}let r=this.controller.computeMajorLayout(),e={keypadTop:r.keypad.top,keypadWidth:r.keypad.width,keypadHeight:r.keypad.height,showToLeft:r.grapher.height<525};if(__dcg_shared_module_exports__['s'](e,this.__popoverCache))return;this.__popoverCache=e;let t=this.containerElt,o=t.querySelector("[dcg-command=functions]"),i=t.querySelector(".dcg-functions-popover"),n=t.querySelector(".dcg-arrow");if(e.showToLeft){i.classList.remove("dcg-top"),i.classList.add("dcg-left");let s=e.keypadHeight-(qn(o).top-qn(t).top)-o.offsetHeight/2-2-10;n.style.left="auto",n.style.bottom=`${s}px`}else i.classList.remove("dcg-left"),i.classList.add("dcg-top"),n.style.left=`${i.offsetWidth-o.offsetWidth/2}px`,n.style.bottom="auto"}};Vt();function rb(r){if(window.clipboardData&&window.clipboardData.getData)return window.clipboardData.getData("Text");if(r&&r.clipboardData&&r.clipboardData.getData)return r.clipboardData.getData("text/plain")}Vt();var whe=function(){{let o=!1,i=function(){n(document),o=!0},n=function(a){o||re(a).bind("touchstart",s=>{let l=re(s.target),c=0,p=null;if(!l[0].closest("[disablescroll]"))for(;c===0&&l.length&&l[0].tagName!==void 0;){let h=getComputedStyle(l[0]).overflow,g=getComputedStyle(l[0]).overflowY;if(h!=="hidden"&&h!=="visible"&&g!=="hidden"&&g!=="hidden"){let m=l.scrollTop();m!==0&&(c=2),l.scrollTop(m+1),l.scrollTop()!==m&&(c=1|c,l.scrollTop(m))}l=re(l[0].parentElement)}if(c!==0){p=[];let h=s.originalEvent.touches;for(let g=0;g<h.length;g++){let m={};for(let b in h[g])h[g].hasOwnProperty(b)&&(m[b]=h[g][b]);p.push(m)}}re(document).on("touchmove.scrollfix",h=>{if(p){let g=p[0],b=h.originalEvent.touches[0].screenY-g.screenY;(b>0&&!(c&2)||b<0&&!(c&1))&&(c=0),b&&(p=null)}c===0&&h.preventDefault()}),re(document).on("touchend.scrollfix",()=>{re(document).off(".scrollfix")})})};return{limitScrollOnElement:n,limitScrollOnDocument:i}}}();var{limitScrollOnElement:eM,limitScrollOnDocument:RJe}=whe;Vt();function ZF(r){re(r).on("drag dragend dragenter dragover dragleave drop",t=>{t.preventDefault(),t.stopPropagation()})}ce();ie();var oM=__dcg_shared_module_exports__['e'](se());ce();ie();var Rv=__dcg_shared_module_exports__['e'](se());var{For:She,SwitchUnion:The,If:khe}=Rv.Components,tM=class extends Rv.View{init(){this.controller=this.props.controller()}template(){return _("div",{role:u("toolbar"),"aria-label":()=>this.controller.s("graphing-calculator-label-geometry-tools"),class:u("dcg-geo-basic-tools dcg-animate-in-after-initial-load dcg-complex-tool-instruction-view"),children:[d(kf,{ariaLabel:()=>this.controller.s("account-shell-button-mygraphs-cancel"),controller:this.props.controller,onBack:this.bindFn(this.onCancel)}),d(She.Count,{count:()=>this.getToolSpec().inputs.length,children:e=>d(QF,{activeStep:this.bindFn(this.getInputIndex),controller:this.props.controller,toolSpec:()=>this.getToolSpec(),stepIdx:()=>e})})]})}onCancel(){this.controller.dispatch({type:"select-geo-tool",tool:"selection"}),this.controller.dispatch({type:"set-focus-location",location:{type:"geo-basic-tool",tool:"selection"}})}getInputIndex(){return this.controller.getGeoModel().getNonObjectsState().ui.currentTool.inputIndex}getToolSpec(){return this.controller.getGeoModel().getCurrentTool().getSpec()}},QF=class extends Rv.View{init(){this.controller=this.props.controller()}template(){return The(()=>this.getInputType(),{completed:()=>d("span",{}),upcoming:()=>d("span",{class:u("dcg-step-upcoming"),children:d("span",{})}),active:()=>_("span",{class:u("dcg-active-step"),children:[d("span",{class:u("dcg-step-active-icon"),children:d("span",{children:()=>this.props.stepIdx()+1})}),d("span",{class:u("dcg-active-step-text"),children:this.bindFn(this.getActiveString)}),d(khe,{predicate:this.bindFn(this.isNumberInputStep),children:()=>_("span",{class:u("dcg-input-flex-container"),didMount:this.bindFn(this.didMountNumberInput),children:[d(Ut,{containerClass:()=>({"dcg-suffix-degree":this.getNumberUnits()==="\xB0","dcg-suffix-radian":this.getNumberUnits()==="rad"}),readonly:()=>!1,latex:()=>this.getNumberInputLatex(),ariaLabel:this.bindFn(this.getActiveString),isFocused:()=>this.isNumberInputFocused(),handleFocusChanged:(e,t)=>this.handleFocusedChanged(e,t),hasError:this.bindFn(this.doesNumberInputHaveError),controller:this.props.controller,handlePressedKey:(e,t)=>{this.handlePressedKey(e,t)},handleLatexChanged:e=>{this.handleLatexChanged(e)},handleSelectionChanged:e=>{this.handleLatexChanged(e.latex,!0)},dataLabelAttributeValue:this.const("transformation-number")}),d("span",{class:()=>({"dcg-action-submit":!0,"dcg-disabled":this.isSubmitNumberDisabled(),"dcg-btn-purple":!0}),role:u("button"),tabIndex:()=>this.isSubmitNumberDisabled()?-1:0,"aria-disabled":this.bindFn(this.isSubmitNumberDisabled),onTap:e=>this.submitNumberInput({device:e.device}),children:()=>this.controller.s("shared-calculator-button-go")})]})})]})})}getNumberUnits(){return this.controller.getActiveTool()==="rotate"?this.controller.getDegreeMode()?"\xB0":"rad":""}didMountNumberInput(){this.controller.dispatch({type:"set-focus-location",location:{type:"new-transformation-number"}})}isNumberInputFocused(){let e=this.controller.getFocusLocation();return!!(e&&e.type==="new-transformation-number")}doesNumberInputHaveError(){var l;if(!this.getNumberInputLatex()||this.getNumberInputLatex()===((l=this.getStep().numberInputInfo)==null?void 0:l.defaultLatex))return!1;let t=this.props.toolSpec().outputs[0].id,{idMap:o}=this.controller.getGeoModel().getNonObjectsState().ui.currentTool,i=o[t];if(!i)return!0;let n=Hy(this.controller.getListModel()).filter(c=>{var p;if(c.type==="expression")return i===((p=uo(c))==null?void 0:p.latex)}),a=n[0];if(!a||n.length===0||n.length>1||a.error)return!0;let s=a.formula.typed_constant_value;if(!s)return!0;if(__dcg_shared_module_exports__['wb'](s.valueType,__dcg_shared_module_exports__['Qa'])){let c=__dcg_shared_module_exports__['qb'](s.valueType)?s.value:[s.value];for(let p of c){let[[h,g],[m,b]]=p;if(isNaN(h)||isNaN(g)||isNaN(m)||isNaN(b))return!0}return!1}return!0}handlePressedKey(e,t){let o=qe.getFocusedMathquill();if(e==="Enter"){this.submitNumberInput({device:"keyboard"});return}o&&(o.keystroke(e,t),this.handleLatexChanged(o.latex()))}getNumberInputLatex(){return this.controller.getGeoModel().getCurrentTool().getNumberInputLatex()}isSubmitNumberDisabled(){return!!(this.doesNumberInputHaveError()||!this.getNumberInputLatex())}submitNumberInput(e){var s,l;if(this.isSubmitNumberDisabled())return;let t=this.controller.getGeoModel(),o=this.controller.getActiveTool(),i=t.getCurrentTool(),n=(s=i.getSpec)==null?void 0:s.call(i),a=i.tryCommitResults();a.committed&&(this.controller.dispatch({type:"commit-geo-objects",...a}),(l=this.controller.get2dPOIController())==null||l.speakGeoReleaseAction(o,n,a.committed),e.device==="keyboard"&&this.controller.dispatch({type:"set-focus-location",location:{type:"graph-paper"}}))}handleLatexChanged(e,t){(this.getNumberInputLatex()!==e||t)&&(this.controller.getGeoModel().getCurrentTool().onNumberInput(e),this.controller.getGeoModel().onPreviewChange())}handleFocusedChanged(e,t){e&&!this.isNumberInputFocused()?this.controller.dispatch({type:"set-focus-location",location:{type:"new-transformation-number"}}):this.isNumberInputFocused()&&this.controller.dispatch({type:"blur-focus-location",location:{type:"new-transformation-number"}})}getActiveString(){let e=this.props.controller(),t=this.getStep().hint;return t?e.s(t):e.s("shared-calculator-narration-item-unknown")}isNumberInputStep(){return!!this.getStep().numberInputInfo}getStep(){return this.props.toolSpec().inputs[this.props.stepIdx()]}getInputType(){let e=this.props.activeStep(),t=this.props.stepIdx();return t<e?"completed":t>e?"upcoming":"active"}};var{SwitchUnion:Ehe,If:Ihe}=oM.Components,rM=class extends oM.View{constructor(){super(...arguments),this.afterInitialLoad=!1}init(){this.controller=this.props.controller()}template(){return _("div",{class:()=>({"dcg-geometry-toolbar-view":!0,"dcg-after-initial-load":this.afterInitialLoad}),style:()=>({left:`${this.controller.computeMajorLayout().grapher.left}px`}),onTapStart:this.bindFn(this.onTapStart),children:[d("div",{class:u("dcg-header-left dcg-do-blur"),children:d(Ihe,{predicate:this.bindFn(this.showOpenExpressionsButton),children:()=>d("div",{class:u("dcg-show-expressions-tab dcg-icon-btn"),"aria-label":()=>this.controller.s("graphing-calculator-label-tooltip-show-list"),role:u("button"),tabIndex:u("0"),onTap:e=>{this.controller.dispatch({type:"show-expressions-list",focusHideIcon:e.device==="keyboard"})},manageFocus:this.const(_e({controller:this.controller,location:{type:"show-expression-list-btn"}})),children:d("i",{class:u("dcg-icon-show"),"aria-hidden":u("true")})})})}),d("div",{class:u("dcg-flex-spacer dcg-do-blur")}),Ehe(this.bindFn(this.getViewToShow),{tools:()=>d(AI,{controller:this.props.controller}),selectedItems:()=>d(zI,{controller:this.props.controller}),complexToolInstructions:()=>d(tM,{controller:this.props.controller})}),d("div",{class:u("dcg-flex-spacer dcg-do-blur")})]})}showOpenExpressionsButton(){return this.controller.isListEnabled()&&!this.controller.isListVisible()&&!this.controller.isNarrow()}willUpdate(){this.afterInitialLoad||this.getViewToShow()==="selectedItems"&&(this.afterInitialLoad=!0)}onTapStart(e){e.target.classList.contains("dcg-do-blur")&&(this.controller.dispatch({type:"set-none-selected"}),this.controller.dispatch({type:"select-geo-tool",tool:"selection"}))}getViewToShow(){let e=this.controller.getActiveTool();return __dcg_shared_module_exports__['Mc'](e)?"complexToolInstructions":this.controller.shouldShowMultiSelectHeader()?"selectedItems":"tools"}};ce();ie();var xM=__dcg_shared_module_exports__['e'](se());ce();ie();var $j=__dcg_shared_module_exports__['e'](se());var ob=class extends $j.View{init(){this.controller=this.props.controller()}template(){return _("div",{class:()=>({"dcg-btn-flat-gray":this.props.isPillbox(),"dcg-btn-flat-gray-group":this.props.isPillbox(),"dcg-group-horizontal":this.props.isPillbox()}),children:[d(Re,{tooltip:()=>this.controller.getshowKeyboardShortcutsInTooltips()?this.controller.s("graphing-calculator-label-undo-with-shortcut-tooltip"):this.controller.s("graphing-calculator-label-undo-tooltip"),gravity:this.const("s"),disabled:()=>!this.controller.canUndo(),displayBlock:this.props.isPillbox,children:d("button",{class:()=>({"dcg-unstyled-button":!0,"dcg-action-undo":!0,"dcg-icon-btn":!0,"dcg-pillbox-btn-interior":this.props.isPillbox(),"dcg-disabled":!this.controller.canUndo()}),tabIndex:()=>this.controller.canUndo()?0:-1,"aria-label":()=>this.controller.s("graphing-calculator-narration-undo"),onTap:this.bindFn(this.undo),"aria-disabled":()=>!this.controller.canUndo(),children:d("i",{class:u("dcg-icon-undo"),"aria-hidden":u("true")})})}),d(Re,{tooltip:()=>this.controller.getshowKeyboardShortcutsInTooltips()?this.controller.s("graphing-calculator-label-redo-with-shortcut-tooltip"):this.controller.s("graphing-calculator-label-redo-tooltip"),gravity:this.const("s"),disabled:()=>!this.controller.canRedo(),displayBlock:this.props.isPillbox,children:d("button",{class:()=>({"dcg-unstyled-button":!0,"dcg-action-redo":!0,"dcg-icon-btn":!0,"dcg-pillbox-btn-interior":this.props.isPillbox(),"dcg-disabled":!this.controller.canRedo()}),tabIndex:()=>this.controller.canRedo()?0:-1,"aria-label":()=>this.controller.s("graphing-calculator-narration-redo"),onTap:()=>this.controller.dispatch({type:"redo"}),"aria-disabled":()=>!this.controller.canRedo(),children:d("i",{class:u("dcg-icon-redo"),"aria-hidden":u("true")})})})]})}undo(){this.controller.hasVisibleAndUndoableToast()?this.controller.dispatch({type:"toast/undo"}):this.controller.dispatch({type:"undo"})}};ce();ie();var jj=__dcg_shared_module_exports__['e'](se());du();var Lp=class extends jj.View{init(){this.controller=this.props.controller()}template(){return d(Re,{tooltip:this.bindFn(this.getTooltip),gravity:this.const("w"),children:_("div",{class:()=>({"dcg-action-settings":!0,"dcg-pillbox-btn-interior":!0,"dcg-icon-btn":!0,"dcg-btn-flat-gray":this.isPillbox(),"dcg-settings-pillbox":this.isPillbox()}),role:u("button"),tabIndex:u("0"),"aria-haspopup":u("true"),"aria-expanded":()=>this.controller.isGraphSettingsOpen(),"aria-label":this.bindFn(this.getTooltip),onTap:this.bindFn(this.onTapSettingsButton),manageFocus:this.const(_e({controller:this.controller,location:{type:"settings",location:"icon"}})),children:[d("i",{class:u("dcg-icon-wrench"),"aria-hidden":u("true")}),d(Xt,{when:this.bindFn(this.shouldShowLockIcon),children:d("i",{class:u("dcg-icon-lock"),"aria-hidden":u("true")})}),d(Xt,{when:this.bindFn(this.hasViewportError),children:d("i",{class:u("dcg-icon-error"),"aria-hidden":u("true")})})]})})}shouldShowLockIcon(){return(this.controller.getLockViewportUserSetting()||this.controller.getLockRotationUserSetting()||this.controller.isViewportLockedForDynamicBounds())&&!this.props.controller().getDynamicViewportBoundsErrors()}hasViewportError(){return this.controller.isViewportLockedForDynamicBounds()&&!!this.props.controller().getDynamicViewportBoundsErrors()}getTooltip(){return this.hasViewportError()?this.controller.s("graphing-calculator-label-tooltip-viewport-error"):this.controller.isGeometry()?this.controller.s("graphing-calculator-label-tooltip-geometry-settings"):this.controller.s("graphing-calculator-label-tooltip-graph-settings")}isPillbox(){return this.props.isPillbox&&this.props.isPillbox()}onTapSettingsButton(e){this.controller.dispatch({type:"toggle-graph-settings",focusOnOpen:e.device==="keyboard"})}};ce();ie();var iM=__dcg_shared_module_exports__['e'](se()),{SwitchUnion:Che}=iM.Components,Fv=class extends iM.View{template(){return this.controller=this.props.controller(),Che(()=>this.controller.getBrandingMode(),{"static-edit-link":()=>d("div",{class:u("dcg-graphpaper-branding"),children:_("a",{href:()=>this.controller.getEditLink(),target:u("_blank"),children:[d("span",{class:u("dcg-powered-by"),"aria-label":()=>this.controller.s("graphing-calculator-narration-edit-on-desmos"),children:()=>this.controller.s("graphing-calculator-link-edit-on-desmos")}),d("i",{class:u("dcg-icon-desmos"),"aria-hidden":u("true")})]})}),"edit-link":()=>d("div",{class:u("dcg-graphpaper-branding"),children:_("span",{class:u("dcg-edit-branding"),onTap:()=>this.controller.dispatch({type:"open-on-web"}),children:[d("span",{class:u("dcg-powered-by"),"aria-label":()=>this.controller.s("graphing-calculator-narration-edit-on-desmos"),children:()=>this.controller.s("graphing-calculator-link-edit-on-desmos")}),d("i",{class:u("dcg-icon-desmos"),"aria-hidden":u("true")})]})}),"powered-by":()=>_("div",{class:u("dcg-graphpaper-branding dcg-unclickable"),children:[d("span",{class:u("dcg-powered-by"),"aria-label":()=>this.controller.s("graphing-calculator-narration-powered-by-desmos"),children:()=>this.controller.s("graphing-calculator-label-powered-by")}),d("i",{class:u("dcg-icon-desmos"),"aria-hidden":u("true")})]})})}};ce();ie();var Yj=__dcg_shared_module_exports__['e'](se());var Gv=class extends Yj.View{init(){this.controller=this.props.controller()}template(){return d("div",{class:u("dcg-reset-container"),children:d(Re,{tooltip:()=>this.controller.s("graphing-calculator-label-tooltip-reset"),gravity:this.props.tooltipGravity,children:d("div",{class:u("dcg-reset-pillbox dcg-action-reset dcg-btn-flat-gray dcg-pillbox-btn-interior"),role:u("button"),tabIndex:u("0"),"aria-label":()=>this.controller.s("graphing-calculator-label-tooltip-reset"),onTap:this.bindFn(this.reset),children:d("i",{class:u("dcg-icon-reset"),"aria-hidden":u("true")})})})})}reset(){this.controller.dispatch({type:"reset-graph"})}};ce();ie();var Xj=__dcg_shared_module_exports__['e'](se());var ib=class extends Xj.View{init(){this.controller=this.props.controller()}template(){return _("div",{class:()=>({"dcg-3d-orientation-pillbox":!0,"dcg-btn-flat-gray":!0,"dcg-btn-flat-gray-group":!0,"dcg-group-horizontal":this.props.layout()==="horizontal","dcg-group-vertical":this.props.layout()==="vertical"}),role:u("group"),"aria-label":()=>this.controller.s("graphing-calculator-narration-3d-orientation-options-label"),children:[d(Re,{disabled:this.bindFn(this.isDefaultOrientation),tooltip:this.bindFn(this.getDefaultOrientationLabel),gravity:this.bindFn(this.getTooltipGravity),displayBlock:this.const(!0),children:d("div",{class:()=>({"dcg-action-defaultorientation":!0,"dcg-pillbox-btn-interior":!0,"dcg-disabled":this.isDefaultOrientation()}),role:u("button"),"aria-disabled":this.bindFn(this.isDefaultOrientation),tabIndex:()=>this.isDefaultOrientation()?-1:0,"aria-label":this.bindFn(this.getDefaultOrientationLabel),onTap:this.bindFn(this.rotateToDefaultOrientation),children:d("i",{class:u("dcg-icon-3d-cube"),"aria-hidden":u("true")})})}),d(Re,{tooltip:this.bindFn(this.getXYOrientationLabel),gravity:this.bindFn(this.getTooltipGravity),disabled:this.bindFn(this.isXYPlaneOrientation),displayBlock:this.const(!0),children:d("div",{class:()=>({"dcg-action-xyorientation":!0,"dcg-pillbox-btn-interior":!0,"dcg-disabled":this.isXYPlaneOrientation()}),role:u("button"),"aria-disabled":this.bindFn(this.isXYPlaneOrientation),tabIndex:()=>this.isXYPlaneOrientation()?-1:0,"aria-label":this.bindFn(this.getXYOrientationLabel),onTap:this.bindFn(this.rotateToXyOrientation),children:d("i",{class:u("dcg-icon-xy-plane"),"aria-hidden":u("true")})})})]})}getTooltipGravity(){return this.props.layout()==="horizontal"?"s":"w"}rotateToDefaultOrientation(){this.controller.dispatch({type:"zoom",direction:"default3dOrientation"})}rotateToXyOrientation(){this.controller.dispatch({type:"zoom",direction:"xy3dOrientation"})}isDefaultOrientation(){var t;let e=(t=this.controller.getGrapher3d())==null?void 0:t.controls;return!!(e!=null&&e.isDefaultOrientation())}isXYPlaneOrientation(){var t;let e=(t=this.controller.getGrapher3d())==null?void 0:t.controls;return!!(e!=null&&e.isXYPlaneOrientation())}getDefaultOrientationLabel(){return this.controller.s("graphing-calculator-label-tooltip-zoom-default-orientation")}getXYOrientationLabel(){return this.controller.s("graphing-calculator-label-tooltip-zoom-xy-orientation")}};ce();ie();var Nv=__dcg_shared_module_exports__['e'](se());Vt();ce();ie();var sM=__dcg_shared_module_exports__['e'](se());ce();ie();var Jj=__dcg_shared_module_exports__['e'](se());var Sh=class extends Jj.View{template(){return _("div",{class:u("dcg-checkbox-title dcg-checkbox-flex-container"),children:[d(tt,{ariaLabel:()=>this.props.controller().s("graphing-calculator-label-settings-lock-viewport"),onChange:()=>{this.props.controller().dispatch({type:"toggle-lock-viewport"})},checked:()=>this.props.controller().viewportIsLocked(),disabled:()=>this.props.controller().isViewportLockedForDynamicBounds(),children:()=>this.props.controller().s("graphing-calculator-label-settings-lock-viewport")}),d(Dl,{href:this.const("https://help.desmos.com/hc/en-us/articles/4405296853517#h_01FZX4DBWKD83TZVMH615XF3QA"),controller:this.props.controller})]})}};var{If:nM}=sM.Components,aM=class extends sM.View{init(){this.controller=this.props.controller(),this.isOpen=this.getAxisScale("x")==="logarithmic"||this.getAxisScale("y")==="logarithmic"||this.controller.getLockViewportUserSetting()}template(){return _("div",{class:u("dcg-advanced-graph-settings-view"),children:[d(nM,{predicate:()=>this.shouldShowLogScalesOption(),children:()=>_("div",{children:[_("div",{class:()=>({"dcg-advanced-toggle":!0,"dcg-margin-top":!0,"dcg-opened":this.isOpen}),onTap:this.bindFn(this.toggleOpen),tabIndex:u(0),role:u("button"),"aria-expanded":()=>this.isOpen,children:[d("i",{class:u("dcg-icon-caret-down"),"aria-hidden":u("true")}),()=>this.controller.s("graphing-calculator-label-more-viewport-options")]}),d(nM,{predicate:()=>this.isOpen,children:()=>_("div",{class:u("dcg-advanced-contents"),children:[_("div",{class:u("dcg-log-axes-container"),children:[d("div",{children:()=>this.getAxisScaleLabel("x")}),d(hr,{ariaGroupLabel:()=>this.getAxisScaleLabel("x"),theme:this.const("mini"),staticConfig:this.const(this.getStaticConfigForAxis("x"))}),d("div",{children:()=>this.getAxisScaleLabel("y")}),d(hr,{ariaGroupLabel:()=>this.getAxisScaleLabel("y"),theme:this.const("mini"),staticConfig:this.const(this.getStaticConfigForAxis("y"))})]}),d(nM,{predicate:()=>!this.controller.getLockViewportConfigSetting(),children:()=>d(Sh,{...this.props})})]})})]})}),d(nM,{predicate:()=>!this.controller.getLockViewportConfigSetting()&&!this.shouldShowLogScalesOption(),children:()=>d(Sh,{...this.props})})]})}toggleOpen(){this.isOpen=!this.isOpen,this.update()}getAxisScaleLabel(e){return e==="x"?this.controller.s("graphing-calculator-label-settings-x-axis")+":":this.controller.s("graphing-calculator-label-settings-y-axis")+":"}getStaticConfigForAxis(e){return[{key:"linear",label:()=>"Linear",selected:()=>this.getAxisScale(e)==="linear",onSelect:()=>this.setAxisScale({axis:e,scale:"linear"})},{key:"logarithmic",label:()=>"Logarithmic",selected:()=>this.getAxisScale(e)==="logarithmic",onSelect:()=>this.setAxisScale({axis:e,scale:"logarithmic"})}]}shouldShowLogScalesOption(){return this.controller.getGraphSettings().config.logScales&&!this.controller.isThreeDMode()}getAxisScale(e){return this.controller.getGraphSettings()[e==="x"?"xAxisScale":"yAxisScale"]}setAxisScale({axis:e,scale:t}){return this.controller.dispatch({type:"set-graph-settings",[e==="x"?"xAxisScale":"yAxisScale"]:t})}};ce();ie();var lM=__dcg_shared_module_exports__['e'](se());var{If:_he}=lM.Components,Pp=class extends lM.View{init(){this.controller=this.props.controller()}template(){return _("div",{children:[d("div",{class:u("dcg-braille-options-buttons"),children:d(hr,{ariaGroupLabel:()=>this.controller.s("shared-calculator-narration-braille-mode"),theme:this.const("full-width-mini"),staticConfig:this.bindFn(this.getBrailleOptions)})}),_("div",{class:u("dcg-six-key-checkbox dcg-checkbox-flex-container"),children:[d(tt,{onChange:e=>this.controller.dispatch({type:"set-six-key-input",useSixKeyInput:e}),checked:()=>this.controller.getSixKeyInput(),children:()=>this.controller.s("graphing-calculator-label-settings-six-key-braille")}),d(Dl,{href:this.const("https://www.desmos.com/accessibility#braille"),controller:this.props.controller})]}),d(_he,{predicate:this.props.showBrailleNote,children:()=>_("div",{class:u("dcg-refreshable-braille-note"),children:[()=>this.controller.s("graphing-calculator-text-refreshable-braille-display-note")+" ",d("a",{href:()=>"https://www.desmos.com/braille-examples?"+this.controller.getBrailleMode(),class:u("dcg-blue-link"),target:u("_blank"),children:()=>this.controller.s("graphing-calculator-link-view-braille-examples")})]})})]})}getBrailleOptions(){return[{key:"nemeth",label:()=>this.controller.s("shared-calculator-button-braille-mode-nemeth"),selected:()=>this.controller.getBrailleMode()==="nemeth",onSelect:()=>this.setBrailleMode("nemeth")},{key:"ueb",label:()=>this.controller.s("shared-calculator-button-braille-mode-ueb"),selected:()=>this.controller.getBrailleMode()==="ueb",onSelect:()=>this.setBrailleMode("ueb")}]}setBrailleMode(e){this.controller.dispatch({type:"set-braille-mode",mode:e})}};ce();ie();var cM=__dcg_shared_module_exports__['e'](se());var{If:Zj}=cM.Components,Dp=class extends cM.View{init(){this.controller=this.props.controller()}toggleComplexMode(){this.controller.logEvent({category:"settings",action:this.props.isComplexModeEnabled()?"disable-complex":"enable-complex"}),this.props.toggleComplexMode()}template(){return _("div",{class:u("dcg-options-menu-section dcg-complex-container"),children:[_("div",{class:u("dcg-options-menu-section-title"),children:[()=>this.controller.s("graphing-calculator-label-settings-complex-mode"),d(Fr,{ariaLabel:()=>this.controller.s("graphing-calculator-label-settings-complex-mode"),onChange:this.bindFn(this.toggleComplexMode),toggled:this.props.isComplexModeEnabled})]}),d(Zj,{predicate:this.props.isComplexModeEnabled,children:()=>d("div",{class:u("dcg-complex-options-section"),children:_("div",{class:u("dcg-complex-enabled-note"),children:[d(Ir,{controller:this.props.controller,content:()=>this.controller.s("shared-calculator-text-complex-enabled-note",{eq1:"`i^2`",eq2:"`\\sqrt{-4}`"})}),d(Zj,{predicate:()=>this.props.product()==="graphing"||this.props.product()==="graphing-3d",children:()=>d("div",{class:u("dcg-complex-plotting-note"),children:()=>this.controller.s("graphing-calculator-text-complex-plotting-note")})})]})})})]})}};ce();ie();var dM=__dcg_shared_module_exports__['e'](se());var{IfElse:Mhe}=dM.Components,ps=class extends dM.View{init(){this.controller=this.props.setup().controller}getGravity(){return this.props.setup().type==="basic"?"s":this.controller.isNarrow()?"n":"w"}template(){return d("div",{class:u("dcg-options-menu-section dcg-radiangroup dcg-section-without-title"),children:Mhe(()=>this.controller.isComplexModeEnabled(),{true:()=>d(Re,{tooltip:()=>this.controller.s("shared-calculator-text-complex-radian-mode"),gravity:this.bindFn(this.getGravity),sticky:this.const(!0),displayBlock:this.const(!0),additionalClass:this.const("dcg-cursor-default"),children:d(hr,{ariaGroupLabel:()=>this.controller.s("graphing-calculator-narration-settings-angle"),theme:()=>this.props.setup().type==="basic"?"mini":"default",staticConfig:this.bindFn(this.getAngleModeOptions),disabled:()=>this.controller.isComplexModeEnabled()})}),false:()=>this.renderControl()})})}renderControl(){return d(hr,{ariaGroupLabel:()=>this.controller.s("graphing-calculator-narration-settings-angle"),theme:()=>this.props.setup().type==="basic"?"mini":"default",staticConfig:this.bindFn(this.getAngleModeOptions),disabled:()=>this.controller.isComplexModeEnabled()})}getAngleModeOptions(){let e=this.props.setup();return[{key:"radians",label:()=>e.type==="basic"?this.controller.s("basic-calculator-label-controlbar-rad"):this.controller.s("graphing-calculator-button-settings-radians"),selected:()=>!this.getDegreeMode(),onSelect:()=>this.setDegreeMode(!1),focusHelperOptions:e.type==="advanced"?{controller:e.controller,location:{type:"settings",location:"radian-mode"}}:void 0},{key:"degrees",label:()=>e.type==="basic"?this.controller.s("basic-calculator-label-controlbar-deg"):this.controller.s("graphing-calculator-button-settings-degrees"),selected:()=>this.getDegreeMode(),onSelect:()=>this.setDegreeMode(!0),focusHelperOptions:e.type==="advanced"?{controller:e.controller,location:{type:"settings",location:"degree-mode"}}:void 0}]}getDegreeMode(){return this.controller.getDegreeMode()}setDegreeMode(e){this.controller.dispatch({type:"update-degree-mode",mode:e})}};ce();ie();var Qj=__dcg_shared_module_exports__['e'](se());var nb=class extends Qj.View{init(){this.controller=this.props.controller()}template(){return _("div",{children:[d("div",{class:u("dcg-displaysizegroup"),children:d(hr,{ariaGroupLabel:()=>this.controller.s("shared-calculator-narration-settings-display-size"),staticConfig:this.bindFn(this.getProjectorModeOptions)})}),d(tt,{onChange:this.bindFn(this.toggleInvertedColors),checked:()=>this.controller.getInvertedColors(),manageFocus:this.const(_e({controller:this.controller,location:{type:"settings",location:"reverse-contrast"}})),children:()=>this.controller.s("graphing-calculator-label-settings-reverse-contrast")})]})}getProjectorModeOptions(){return[{key:"default",label:()=>"A",ariaLabel:()=>this.controller.s("shared-calculator-narration-settings-display-size-default"),class:()=>"dcg-displaysize-default",selected:()=>!this.getProjectorMode(),onSelect:()=>this.onSelectProjectorModeOption(!1),focusHelperOptions:{controller:this.controller,location:{type:"settings",location:"default-size"}}},{key:"large",label:()=>"A",ariaLabel:()=>this.controller.s("shared-calculator-narration-settings-display-size-large"),class:()=>"dcg-displaysize-large",selected:()=>this.getProjectorMode(),onSelect:()=>this.onSelectProjectorModeOption(!0),focusHelperOptions:{controller:this.controller,location:{type:"settings",location:"large-size"}}}]}onSelectProjectorModeOption(e){this.controller.dispatch({type:"set-projector-mode",value:e})}getProjectorMode(){return!!this.controller.getGraphSettings().config.projectorMode}toggleInvertedColors(){this.controller.dispatch({type:"set-inverted-colors",value:!this.controller.getInvertedColors()})}};var{Input:eY,If:Ga,IfElse:tY}=Nv.Components,Op=class extends Nv.View{template(){return d(Ut,{isFocused:()=>this.props.parent().getFocusedLimit()===this.props.limit(),latex:()=>this.props.parent().getLimitLatex(this.props.limit()),ariaLabel:this.props.ariaLabel,handleLatexChanged:e=>this.props.parent().setLimitLatex(this.props.limit(),e),handleFocusChanged:e=>this.props.parent().onFocusedChanged(this.props.limit(),e),hasError:()=>this.props.parent().isLimitInvalid(this.props.limit()),dataLabelAttributeValue:this.props.limit,controller:this.props.controller,readonly:this.const(!1),containerClass:()=>({"dcg-log-scale":this.props.axisScale()==="logarithmic"})})}},pM=class extends Nv.View{init(){this.controller=this.props.controller(),this.uuid=Al()}template(){return _("div",{class:u("dcg-settings-view-container"),children:[d(Lp,{...this.props,isPillbox:this.const(!0)}),d(Ga,{predicate:()=>this.controller.isGraphSettingsOpen(),children:()=>d("div",{class:u("dcg-settings-container dcg-left dcg-popover dcg-constrained-height-popover"),style:this.bindFn(this.getContainerStyle),didMount:this.bindFn(this.didMountContainer),didUnmount:this.bindFn(this.didUnmountContainer),children:_("div",{class:u("dcg-popover-interior"),role:u("region"),"aria-label":()=>this.controller.s("graphing-calculator-label-tooltip-graph-settings"),children:[_("div",{class:u("dcg-visual-settings"),children:[d(nb,{controller:this.props.controller}),d(Ga,{predicate:()=>this.controller.getBrailleControls(),children:()=>_("div",{class:u("dcg-braille-container dcg-braille-mode"),children:[d(tt,{onChange:this.bindFn(this.toggleBrailleMode),checked:()=>this.controller.getBrailleMode()!=="none",children:()=>this.controller.s("shared-calculator-narration-braille-mode")}),d(Ga,{predicate:()=>this.controller.getBrailleMode()!=="none",children:()=>d("div",{class:u("dcg-braille-options-container"),children:d(Pp,{controller:this.props.controller,showBrailleNote:this.const(!0)})})})]})})]}),_("div",{class:u("dcg-top-section-flex dcg-grid-settings-container"),children:[_("div",{class:u("dcg-grid-settings"),children:[d(tt,{class:this.const("dcg-settings-grid-toggle"),onChange:this.bindFn(this.toggleGrid),checked:this.bindFn(this.getShowGrid),children:()=>this.controller.s("graphing-calculator-label-settings-grid")}),d(Ga,{predicate:this.bindFn(this.getShowGrid),children:()=>_("div",{class:u("dcg-circle-icon-group dcg-grid-group"),children:[d("div",{class:()=>({"dcg-circle-icon":!0,"dcg-action-cartesian":!0,"dcg-selected":!this.getPolarMode()}),role:u("button"),tabIndex:u("0"),"aria-pressed":()=>!this.getPolarMode(),"aria-label":()=>this.controller.s("graphing-calculator-narration-settings-cartesian-grid"),onTap:this.bindFn(this.setCartesianMode),children:d("i",{class:u("dcg-icon-cartesian")})}),"\xA0",d("div",{class:()=>({"dcg-circle-icon":!0,"dcg-action-polar":!0,"dcg-selected":this.getPolarMode()}),role:u("button"),tabIndex:u("0"),"aria-pressed":()=>this.getPolarMode(),"aria-label":()=>this.controller.s("graphing-calculator-narration-settings-polar-grid"),onTap:this.bindFn(this.setPolarMode),children:d("i",{class:u("dcg-icon-polar")})})]})}),d(tt,{onChange:this.bindFn(this.toggleArrows),checked:()=>this.getAxisArrowMode()!==__dcg_shared_module_exports__['Xd'].NONE,children:()=>this.controller.s("graphing-calculator-label-settings-arrows")}),d(Ga,{predicate:()=>this.getAxisArrowMode()!==__dcg_shared_module_exports__['Xd'].NONE,children:()=>_("div",{class:u("dcg-circle-icon-group dcg-arrow-group"),children:[d("div",{role:u("button"),tabIndex:u("0"),class:()=>({"dcg-circle-icon":!0,"dcg-arrows":!0,"dcg-selected":this.getAxisArrowMode()===__dcg_shared_module_exports__['Xd'].BOTH}),"dcg-arrows":u("BOTH"),"aria-label":()=>this.controller.s("graphing-calculator-narration-settings-show-both"),"aria-pressed":()=>this.getAxisArrowMode()===__dcg_shared_module_exports__['Xd'].BOTH,onTap:()=>this.setAxisArrowMode(__dcg_shared_module_exports__['Xd'].BOTH),children:d("i",{class:u("dcg-icon-arrows-two"),"aria-hidden":u("true")})}),"\xA0",d("div",{role:u("button"),tabIndex:u("0"),class:()=>({"dcg-circle-icon":!0,"dcg-arrows":!0,"dcg-selected":this.getAxisArrowMode()===__dcg_shared_module_exports__['Xd'].POSITIVE}),"dcg-arrows":u("POSITIVE"),"aria-label":()=>this.controller.s("graphing-calculator-narration-settings-show-positive"),"aria-pressed":()=>this.getAxisArrowMode()===__dcg_shared_module_exports__['Xd'].POSITIVE,onTap:()=>this.setAxisArrowMode(__dcg_shared_module_exports__['Xd'].POSITIVE),children:d("i",{class:u("dcg-icon-arrows-one"),"aria-hidden":u("true")})})]})})]}),_("div",{class:u("dcg-top-checkboxes-container"),children:[d(tt,{onChange:this.bindFn(this.toggleAxisNumbers),checked:this.bindFn(this.getAxisNumbers),small:this.const(!0),children:()=>this.controller.s("graphing-calculator-label-settings-axis-numbers")}),d(Ga,{predicate:()=>this.getShowGrid()&&!this.getPolarMode(),children:()=>d(tt,{onChange:this.bindFn(this.toggleMinorGridlines),checked:this.bindFn(this.getMinorGridlines),small:this.const(!0),children:()=>this.controller.s("graphing-calculator-label-settings-minor-gridlines")})}),d(Ga,{predicate:()=>this.controller.canUseAdvancedStyling()&&!this.getPolarMode(),children:()=>d(tt,{checked:()=>this.controller.getGraphSettings().restrictGridToFirstQuadrant,onChange:e=>this.controller.dispatch({type:"set-graph-settings",restrictGridToFirstQuadrant:e}),small:this.const(!0),children:()=>this.controller.s("graphing-calculator-label-settings-one-quadrant")})}),d(Ga,{predicate:this.bindFn(this.showZoomSquareButton),children:()=>d("div",{role:u("button"),tabIndex:u("0"),class:u("dcg-action-zoom-square dcg-btn-light-gray"),onTap:this.bindFn(this.zoomSquare),children:()=>this.controller.s("graphing-calculator-button-settings-zoom-square")})})]})]}),_("div",{class:u("dcg-axes-settings-container"),children:[_("div",{class:u("dcg-checkbox-title dcg-x-axis-title"),children:[d(tt,{onChange:this.bindFn(this.toggleXAxis),checked:this.bindFn(this.getShowXAxis),children:d("span",{id:this.const(`x-axis-description-${this.uuid}`),children:()=>this.controller.s("graphing-calculator-label-settings-x-axis")})}),d(Ga,{predicate:this.bindFn(this.getShowXAxis),children:()=>_("div",{class:u("dcg-axis-label"),children:[d("label",{for:this.const(`x-axis-label-${this.uuid}`),children:()=>this.controller.s("graphing-calculator-button-label")}),d(eY,{class:this.const("dcg-x-axis-label"),disabled:()=>this.getShowXAxis()?void 0:!0,onInput:this.bindFn(this.onXAxisLabelInput),value:this.bindFn(this.getXAxisLabel),"aria-describedby":this.const(`x-axis-description-${this.uuid}`),id:this.const(`x-axis-label-${this.uuid}`),placeholder:()=>this.controller.s("graphing-calculator-narration-settings-x-axis-label-placeholder")})]})})]}),_("div",{class:u("dcg-editable-mathquill-container dcg-x-axis-options"),children:[d(Op,{limit:this.const("xmin"),axisScale:()=>this.getAxisScale("x"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-x-axis-min"),parent:this.const(this),controller:this.props.controller}),d(St,{config:this.const({}),latex:this.const("\\le x\\le"),children:d("span",{class:u("dcg-interval-interior")})}),d(Op,{limit:this.const("xmax"),axisScale:()=>this.getAxisScale("x"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-x-axis-max"),parent:this.const(this),controller:this.props.controller}),d(Ga,{predicate:()=>!this.getPolarMode(),children:()=>tY(()=>this.getAxisScale("x")==="linear",{true:()=>_("span",{class:u("dcg-step-container"),children:[d("span",{class:u("dcg-step-label"),"aria-hidden":u("true"),children:()=>this.controller.s("graphing-calculator-label-settings-step")}),d(Op,{limit:this.const("xstep"),axisScale:this.const("linear"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-x-axis-step"),parent:this.const(this),controller:this.props.controller})]}),false:()=>d("span",{style:u("display: none")})})})]}),_("div",{class:u("dcg-checkbox-title dcg-y-axis-title"),children:[d(tt,{onChange:this.bindFn(this.toggleYAxis),checked:this.bindFn(this.getShowYAxis),children:d("span",{id:this.const(`y-axis-description-${this.uuid}`),children:()=>this.controller.s("graphing-calculator-label-settings-y-axis")})}),d(Ga,{predicate:this.bindFn(this.getShowYAxis),children:()=>_("div",{class:u("dcg-axis-label"),children:[d("label",{for:this.const(`y-axis-label-${this.uuid}`),children:()=>this.controller.s("graphing-calculator-button-label")}),d(eY,{class:this.const("dcg-y-axis-label"),onInput:this.bindFn(this.onYAxisLabelInput),value:this.bindFn(this.getYAxisLabel),"aria-describedby":this.const(`y-axis-description-${this.uuid}`),id:this.const(`y-axis-label-${this.uuid}`),placeholder:()=>this.controller.s("graphing-calculator-narration-settings-y-axis-label-placeholder")})]})})]}),_("div",{class:u("dcg-editable-mathquill-container dcg-y-axis-options"),children:[d(Op,{limit:this.const("ymin"),axisScale:()=>this.getAxisScale("y"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-y-axis-min"),parent:this.const(this),controller:this.props.controller}),d(St,{config:this.const({}),latex:this.const("\\le y\\le"),children:d("span",{class:u("dcg-interval-interior")})}),d(Op,{limit:this.const("ymax"),axisScale:()=>this.getAxisScale("y"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-y-axis-max"),parent:this.const(this),controller:this.props.controller}),d(Ga,{predicate:()=>!this.getPolarMode(),children:()=>tY(()=>this.getAxisScale("y")==="linear",{true:()=>_("span",{class:u("dcg-step-container"),children:[d("span",{class:u("dcg-step-label"),"aria-hidden":u("true"),children:()=>this.controller.s("graphing-calculator-label-settings-step")}),d(Op,{limit:this.const("ystep"),axisScale:this.const("linear"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-y-axis-step"),parent:this.const(this),controller:this.props.controller})]}),false:()=>d("span",{style:u("display: none")})})})]})]}),d(aM,{controller:this.props.controller}),d(Ga,{predicate:()=>this.controller.canEnableComplexMode(),children:()=>d(Dp,{...this.props,isComplexModeEnabled:()=>this.controller.isComplexModeEnabled(),toggleComplexMode:()=>this.controller.dispatch({type:"toggle-complex-mode"}),product:()=>this.controller.getProduct()})}),d(ps,{setup:this.const({controller:this.controller,type:"advanced"})}),d("div",{class:u("dcg-arrow")})]})})})]})}toggleBrailleMode(){this.controller.dispatch({type:"set-braille-mode",mode:this.controller.getBrailleMode()==="none"?"nemeth":"none"})}didMountContainer(e){this.node=e,re(document.documentElement).on("dcg-tapstart.settings-view wheel.settings-view",t=>{this.eventShouldClosePopover(t)&&this.controller.dispatch({type:"close-graph-settings",focusIconAfterClose:t.device==="keyboard"})}),re(document.documentElement).on("keydown.settings-view",t=>{let o=Pe(t);if(o==="Esc"&&this.controller.dispatch({type:"close-graph-settings",focusIconAfterClose:!0}),this.controller.isGraphSettingsOpen()&&o==="Tab"&&!t.altKey&&!t.metaKey&&!t.ctrlKey){let i=this.controller.getFocusLocation();if(!i||i.type!=="settings")return;let n=!!this.controller.getGraphSettings().config.projectorMode,a=!!this.controller.getGraphSettings().degreeMode;t.shiftKey?t.shiftKey&&(n&&i.location==="large-size"||!n&&i.location==="default-size"?(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"icon"}}),t.preventDefault(),t.stopPropagation()):i.location==="icon"&&(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:a?"degree-mode":"radian-mode"}}),t.preventDefault(),t.stopPropagation())):i.location==="icon"?(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:n?"large-size":"default-size"}}),t.preventDefault(),t.stopPropagation()):(!a&&i.location==="radian-mode"||a&&i.location==="degree-mode")&&(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"icon"}}),t.preventDefault(),t.stopPropagation())}})}didUnmountContainer(){re(document.documentElement).off(".settings-view")}didUpdate(){if(!this.controller.isGraphSettingsOpen())return;let e=this.controller.getKeypadHeight();e!==this.cachedKeypadHeight&&document.activeElement&&this.node.contains(document.activeElement)&&ta(document.activeElement,this.node.querySelector(".dcg-popover-interior"),50),this.cachedKeypadHeight=e}eventShouldClosePopover(e){let t=e.target,o=this.node.contains(t),i=!!t.closest(".dcg-action-settings"),n=this.isMathquillFocused()&&!!t.closest(".dcg-keypad"),a=!!t.closest(".dcg-action-undo")||!!t.closest(".dcg-action-redo");return!(o||i||n||a)}isMathquillFocused(){return this.getFocusedLimit()!==void 0}getLimitLatex(e){return this.controller.getSettingsViewModel().limitLatex[e]||""}setLimitLatex(e,t){t!==this.controller.getSettingsViewModel().limitLatex[e]&&this.controller.dispatch({type:"set-axis-limit-latex",limit:e,latex:t})}getFocusedLimit(){let e=this.controller.getFocusLocation();if(e&&e.type==="settings")return e.location}getInvalidLimits(){let e=!!this.controller.getGraphSettings().degreeMode,t=!!this.controller.getGraphSettings().complex,o=this.getLimitLatex("xstep")===""?0:__dcg_shared_module_exports__['Ie'](this.getLimitLatex("xstep"),e),i=this.getLimitLatex("ystep")===""?0:__dcg_shared_module_exports__['Ie'](this.getLimitLatex("ystep"),e),n={},a=__dcg_shared_module_exports__['Qe'].evaluateFromLatex({xmin:this.getLimitLatex("xmin"),xmax:this.getLimitLatex("xmax"),ymin:this.getLimitLatex("ymin"),ymax:this.getLimitLatex("ymax")},e,t);if(a){let{xmin:s,xmax:l,ymin:c,ymax:p}=a;isFinite(s)&&isFinite(l)?(n.xmin=!a.isXValid(this.controller.getGraphSettings().xAxisScale),n.xmax=n.xmin):(n.xmin=!isFinite(s),n.xmax=!isFinite(l)),isFinite(c)&&isFinite(p)?(n.ymin=!a.isYValid(this.controller.getGraphSettings().yAxisScale),n.ymax=n.ymin):(n.ymin=!isFinite(c),n.ymax=!isFinite(p))}else{let s=this.controller.getDynamicViewportBoundsErrors();n.xmin=!!(s!=null&&s.xmin),n.xmax=!!(s!=null&&s.xmax),n.ymin=!!(s!=null&&s.ymin),n.ymax=!!(s!=null&&s.ymax)}return n.xstep=!lg(o),n.ystep=!lg(i),n.xmin&&(n.xmax=!0),n.xmax&&(n.xmin=!0),n.ymin&&(n.ymax=!0),n.ymax&&(n.ymin=!0),n}isLimitInvalid(e){return this.getInvalidLimits()[e]}onFocusedChanged(e,t){t?this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"settings",location:e}})}onXAxisLabelInput(e){this.controller.dispatch({type:"set-graph-settings",xAxisLabel:e})}onYAxisLabelInput(e){this.controller.dispatch({type:"set-graph-settings",yAxisLabel:e})}getXAxisLabel(){return this.controller.getGraphSettings().xAxisLabel}getYAxisLabel(){return this.controller.getGraphSettings().yAxisLabel}getShowXAxis(){return!!this.controller.getGraphSettings().showXAxis}toggleXAxis(){this.controller.dispatch({type:"set-graph-settings",showXAxis:!this.getShowXAxis()})}getShowYAxis(){return!!this.controller.getGraphSettings().showYAxis}toggleYAxis(){this.controller.dispatch({type:"set-graph-settings",showYAxis:!this.getShowYAxis()})}getAxisNumbers(){return!!this.controller.getGraphSettings().xAxisNumbers}toggleAxisNumbers(){let e=this.getAxisNumbers();this.controller.dispatch({type:"set-graph-settings",xAxisNumbers:!e,yAxisNumbers:!e,polarNumbers:!e})}getMinorGridlines(){return this.controller.getGraphSettings().xAxisMinorSubdivisions===0}toggleMinorGridlines(){let e=this.getMinorGridlines()?1:0;this.controller.dispatch({type:"set-graph-settings",yAxisMinorSubdivisions:e,xAxisMinorSubdivisions:e})}getPolarMode(){return!!this.controller.getGraphSettings().polarMode}setPolarMode(){this.controller.dispatch({type:"set-polar-mode",polarMode:!0})}setCartesianMode(){this.controller.dispatch({type:"set-polar-mode",polarMode:!1})}getAxisScale(e){return this.controller.getGraphSettings()[e==="x"?"xAxisScale":"yAxisScale"]}getAxisArrowMode(){return this.controller.getGraphSettings().xAxisArrowMode}setAxisArrowMode(e){this.controller.dispatch({type:"set-graph-settings",xAxisArrowMode:e,yAxisArrowMode:e})}getShowGrid(){return this.controller.getGraphSettings().showGrid}toggleGrid(){this.controller.dispatch({type:"set-graph-settings",showGrid:!this.getShowGrid()})}toggleArrows(){let e=this.getAxisArrowMode()===__dcg_shared_module_exports__['Xd'].NONE?__dcg_shared_module_exports__['Xd'].BOTH:__dcg_shared_module_exports__['Xd'].NONE;this.controller.dispatch({type:"set-graph-settings",xAxisArrowMode:e,yAxisArrowMode:e})}showZoomSquareButton(){let e=this.controller.getAxisScaleSettings();return e.xAxisScale===e.yAxisScale&&!this.controller.getGraphSettings().squareAxes&&!this.controller.isViewportLockedForDynamicBounds()}getContainerStyle(){return this.controller.getKeypadHeight()?"bottom: 0":""}zoomSquare(){this.controller.dispatch({type:"zoom",direction:"square"})}};ce();ie();var bM=__dcg_shared_module_exports__['e'](se());Vt();sl();ce();ie();var uM=__dcg_shared_module_exports__['e'](se());var{If:rY}=uM.Components,ab=class extends uM.View{init(){this.controller=this.props.controller()}template(){return d(rY,{predicate:this.bindFn(this.shouldShowBrailleSection),children:()=>_("div",{class:u("dcg-options-menu-section"),children:[_("div",{class:u("dcg-options-menu-section-title"),children:[()=>this.controller.s("shared-calculator-narration-braille-mode"),d(Fr,{ariaLabel:()=>this.controller.s("shared-calculator-narration-braille-mode"),onChange:this.bindFn(this.toggleBrailleMode),toggled:()=>this.controller.getBrailleMode()!=="none"})]}),d(rY,{predicate:()=>this.controller.getBrailleMode()!=="none",children:()=>d("div",{class:u("dcg-braille-options-container"),children:d(Pp,{controller:this.props.controller,showBrailleNote:this.const(!0)})})})]})})}shouldShowBrailleSection(){return this.controller.getBrailleControls()&&this.controller.getGraphSettings().config.expressions}toggleBrailleMode(){this.controller.dispatch({type:"set-braille-mode",mode:this.controller.getBrailleMode()==="none"?"nemeth":"none"})}};ce();ie();var gM=__dcg_shared_module_exports__['e'](se());var{If:oY}=gM.Components,eG=0,Vv=B_/8,hM=class extends gM.View{init(){this.controller=this.props.controller()}template(){return _("div",{class:u("dcg-options-menu-section"),children:[_("div",{class:u("dcg-options-menu-section-title dcg-local-display-preferences-title"),children:[()=>this.controller.s("graphing-calculator-label-display-properties"),d(Dl,{href:this.const("https://help.desmos.com/hc/en-us/articles/20301369699981-3D-Graph-Settings#h_01HCFSXHM8S59ETFXB55Y8CZQ5\u2019"),controller:this.props.controller})]}),d(tt,{onChange:this.bindFn(this.toggleInvertedColors),checked:()=>this.controller.getInvertedColors(),manageFocus:this.const(_e({controller:this.controller,location:{type:"settings",location:"reverse-contrast"}})),children:()=>this.controller.s("graphing-calculator-label-settings-reverse-contrast")}),d(oY,{predicate:()=>this.controller.getGraphSettings().config.beta3d,children:()=>d(tt,{onChange:()=>{this.controller.dispatch({type:"set-graph-settings",showBox3D:!this.controller.getGraphSettings().showBox3D})},checked:()=>this.controller.getGraphSettings().showBox3D,children:()=>this.controller.raw("Clip to box")})}),d(oY,{predicate:()=>!this.controller.getGraphSettings().config.beta3d,children:()=>d(tt,{class:()=>"dcg-translucent-surfaces-checkbox",onChange:this.bindFn(this.toggleTranslucentSurfaces),checked:()=>this.controller.getTranslucentSurfaces(),ariaLabel:()=>this.controller.s("graphing-calculator-label-settings-translucent-surfaces"),manageFocus:this.const(_e({controller:this.controller,location:{type:"settings",location:"translucent-surfaces"}})),children:()=>this.controller.s("graphing-calculator-label-settings-translucent-surfaces")})}),_("div",{class:u("dcg-perspective-slider"),children:[d(Re,{tooltip:()=>this.controller.s("graphing-calculator-label-settings-3d-perspective-min"),children:d("i",{class:u("dcg-icon-3d-cube"),"aria-hidden":u("true")})}),d(Wu,{min:()=>eG-1,max:()=>Vv-1,step:()=>{},value:()=>this.getPerspectiveValue(),ariaLabel:()=>this.controller.s("graphing-calculator-label-settings-3d-perspective-distortion-ratio"),ariaPercent:this.const(!0),onDragUpdate:this.bindFn(this.onDragUpdate),onKeyboardUpdate:this.bindFn(this.onKeyboardUpdate)}),d(Re,{tooltip:()=>this.controller.s("graphing-calculator-label-settings-3d-perspective-max"),children:d("i",{class:u("dcg-icon-3d-perspective"),"aria-hidden":u("true")})})]})]})}toggleTranslucentSurfaces(){this.controller.dispatch({type:"set-translucent-surfaces",value:!this.controller.getTranslucentSurfaces()})}toggleInvertedColors(){this.controller.dispatch({type:"set-inverted-colors",value:!this.controller.getInvertedColors()})}getPerspectiveValue(){return this.controller.getPerspectiveDistortion()-1}onKeyboardUpdate(e){let o=this.getPerspectiveValue();switch(e){case"up":o+=.1;break;case"down":o-=.1;break;case"bigup":o+=.3;break;case"bigdown":o-=.3;break;case"min":o=eG-1;break;case"max":o=Vv-1;break}o=__dcg_shared_module_exports__['Ob'](o+1,eG,Vv),this.controller.dispatch({type:"set-perspective-distortion",value:o})}onDragUpdate(e){this.controller.dispatch({type:"set-perspective-distortion",value:e+1})}};ce();ie();var Bv=__dcg_shared_module_exports__['e'](se());var{If:Th}=Bv.Components,Rp=class extends Bv.View{template(){return d(Ut,{isFocused:()=>this.props.parent().getFocusedLimit()===this.props.limit(),latex:()=>this.props.parent().getLimitLatex(this.props.limit()),ariaLabel:this.props.ariaLabel,handleLatexChanged:e=>this.props.parent().setLimitLatex(this.props.limit(),e),handleFocusChanged:e=>this.props.parent().onFocusedChanged(this.props.limit(),e),hasError:()=>this.props.parent().isLimitInvalid(this.props.limit()),dataLabelAttributeValue:this.props.limit,controller:this.props.controller,readonly:this.const(!1)})}},mM=class extends Bv.View{init(){this.controller=this.props.controller(),this.isOpen=this.mustBeOpen()}willUpdate(){this.mustBeOpen()&&(this.isOpen=!0)}mustBeOpen(){let e=this.getLimitLatex("xmin"),t=this.getLimitLatex("ymin"),o=this.getLimitLatex("zmin"),i=this.getLimitLatex("xmax"),n=this.getLimitLatex("ymax"),a=this.getLimitLatex("zmax");return e!==t||e!==o||i!==n||i!==a}template(){return _("div",{class:u("dcg-three-d-domain dcg-advanced-graph-settings-view dcg-options-menu-section"),children:[_("div",{class:u("dcg-options-menu-section-title dcg-flex-container"),children:[d("div",{children:()=>this.controller.s("graphing-calculator-label-edit-graph-bounds")}),d("div",{children:d(Th,{predicate:this.bindFn(this.showRecenterButton),children:()=>d("div",{role:u("button"),tabIndex:u("0"),class:u("dcg-action-zoom-recenter dcg-btn-light-gray"),onTap:this.bindFn(this.zoomRecenter),children:()=>this.controller.s("graphing-calculator-label-recenter")})})})]}),_("div",{class:u("dcg-three-d-domain-toggle-container"),children:[_("div",{class:()=>({"dcg-advanced-toggle":!0,"dcg-opened":this.isOpen,"dcg-disabled":this.mustBeOpen()}),onTap:this.bindFn(this.toggleOpen),tabIndex:()=>this.mustBeOpen()?-1:0,"aria-disabled":()=>this.mustBeOpen(),role:u("button"),"aria-expanded":()=>this.isOpen,"aria-label":()=>this.controller.s("graphing-calculator-label-edit-graph-bounds"),children:[d("i",{class:u("dcg-icon-caret-down"),"aria-hidden":u("true")}),d(Th,{predicate:()=>this.isOpen,children:()=>_("span",{class:u("dcg-axis-label"),children:[d(St,{config:this.const({}),latex:this.const("x")}),"-axis:"]})}),d(Th,{predicate:()=>!this.isOpen,children:()=>d("span",{class:u("dcg-axis-label"),children:()=>this.controller.s("graphing-calculator-label-settings-all-axes")})})]}),_("div",{class:u("dcg-editable-mathquill-container dcg-x-axis-options"),children:[d(Rp,{limit:this.const("xmin"),ariaLabel:()=>this.isOpen?this.controller.s("graphing-calculator-narration-settings-x-axis-min"):this.controller.s("graphing-calculator-narration-settings-all-axes-min"),parent:this.const(this),controller:this.props.controller}),d(Th,{predicate:()=>this.isOpen,children:()=>d(St,{config:this.const({}),latex:this.const("\\le x\\le"),children:d("span",{class:u("dcg-interval-interior")})})}),d(Th,{predicate:()=>!this.isOpen,children:()=>d("span",{class:u("dcg-axis-label-to"),children:()=>this.controller.s("shared-label-to")})}),d(Rp,{limit:this.const("xmax"),ariaLabel:()=>this.isOpen?this.controller.s("graphing-calculator-narration-settings-x-axis-max"):this.controller.s("graphing-calculator-narration-settings-all-axes-max"),parent:this.const(this),controller:this.props.controller})]})]}),d(Th,{predicate:()=>this.isOpen,children:()=>_("div",{class:u("dcg-advanced-contents"),children:[_("div",{class:u("dcg-editable-mathquill-container dcg-y-axis-options"),children:[_("span",{class:u("dcg-axis-label"),children:[d(St,{config:this.const({}),latex:this.const("y")}),"-axis:"]}),d(Rp,{limit:this.const("ymin"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-y-axis-min"),parent:this.const(this),controller:this.props.controller}),d(St,{config:this.const({}),latex:this.const("\\le y\\le"),children:d("span",{class:u("dcg-interval-interior")})}),d(Rp,{limit:this.const("ymax"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-y-axis-max"),parent:this.const(this),controller:this.props.controller})]}),d("div",{children:_("div",{class:u("dcg-editable-mathquill-container dcg-z-axis-options"),children:[_("span",{class:u("dcg-axis-label"),children:[d(St,{config:this.const({}),latex:this.const("z")}),"-axis:"]}),d(Rp,{limit:this.const("zmin"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-z-axis-min"),parent:this.const(this),controller:this.props.controller}),d(St,{config:this.const({}),latex:this.const("\\le z\\le"),children:d("span",{class:u("dcg-interval-interior")})}),d(Rp,{limit:this.const("zmax"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-z-axis-max"),parent:this.const(this),controller:this.props.controller})]})}),d(Th,{predicate:this.bindFn(this.showZoomSquareButton),children:()=>d("div",{children:d("div",{role:u("button"),tabIndex:u("0"),class:u("dcg-action-zoom-square-3d dcg-btn-blue"),onTap:this.bindFn(this.zoomSquare),children:()=>this.controller.s("graphing-calculator-button-settings-zoom-square")})})})]})})]})}showRecenterButton(){var t;let e=(t=this.controller.getGrapher3d())==null?void 0:t.webglLayer.domain();return!!e&&!this.controller.isViewportLockedForDynamicBounds()&&!R$(e,0)}zoomRecenter(e){this.controller.dispatch({type:"zoom",direction:"recenter"}),e.device==="keyboard"&&this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"xmin"}})}getFocusedLimit(){let e=this.controller.getFocusLocation();if(e&&e.type==="settings")return e.location}getLimitLatex(e){return this.controller.getSettingsViewModel().limitLatex[e]||""}setLimitLatex(e,t){t!==this.controller.getSettingsViewModel().limitLatex[e]&&this.controller.dispatch({type:"set-axis-limit-latex",limit:e,latex:t,updateYZAlso:!this.isOpen&&(e==="xmin"||e==="xmax")})}getInvalidLimits(){let e=!!this.controller.getGraphSettings().degreeMode,t=!!this.controller.getGraphSettings().complex,o=__dcg_shared_module_exports__['Qe'].evaluateFromLatex({xmin:this.getLimitLatex("xmin"),xmax:this.getLimitLatex("xmax"),ymin:this.getLimitLatex("ymin"),ymax:this.getLimitLatex("ymax"),zmin:this.getLimitLatex("zmin"),zmax:this.getLimitLatex("zmax")},e,t),i={};if(o){let{xmin:n,xmax:a,ymin:s,ymax:l,zmin:c,zmax:p}=o;c!=null||(c=NaN),p!=null||(p=NaN),isFinite(n)&&isFinite(a)?(i.xmin=!o.isXValid(this.controller.getGraphSettings().xAxisScale),i.xmax=i.xmin):(i.xmin=!isFinite(n),i.xmax=!isFinite(a)),isFinite(s)&&isFinite(l)?(i.ymin=!o.isYValid(this.controller.getGraphSettings().yAxisScale),i.ymax=i.ymin):(i.ymin=!isFinite(s),i.ymax=!isFinite(l)),isFinite(c)&&isFinite(p)?(i.zmin=!o.isZValid(),i.zmax=i.zmin):(i.zmin=!isFinite(c),i.zmax=!isFinite(p))}else{let n=this.controller.getDynamicViewportBoundsErrors();i.xmin=!!(n!=null&&n.xmin),i.xmax=!!(n!=null&&n.xmax),i.ymin=!!(n!=null&&n.ymin),i.ymax=!!(n!=null&&n.ymax),i.zmin=!!(n!=null&&n.zmin),i.zmax=!!(n!=null&&n.zmax)}return i.xmin&&(i.xmax=!0),i.xmax&&(i.xmin=!0),i.ymin&&(i.ymax=!0),i.ymax&&(i.ymin=!0),i.zmin&&(i.zmax=!0),i.zmax&&(i.zmin=!0),i}isLimitInvalid(e){return this.getInvalidLimits()[e]}onFocusedChanged(e,t){t?this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"settings",location:e}})}toggleOpen(){this.mustBeOpen()||(this.isOpen=!this.isOpen,this.update())}showZoomSquareButton(){return!this.controller.getGraphSettings().squareAxes&&!this.controller.isViewportLockedForDynamicBounds()}zoomSquare(e){this.controller.dispatch({type:"zoom",direction:"square"}),e.device==="keyboard"&&this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"zmax"}})}};var{If:Uv}=bM.Components,fM=class extends bM.View{init(){this.controller=this.props.controller()}template(){return _("div",{class:u("dcg-settings-view-container dcg-settings-view-3d-container"),children:[d("div",{class:u("dcg-3d-settings-flex-container"),children:d(Lp,{...this.props,isPillbox:this.const(!0)})}),d(Uv,{predicate:()=>this.controller.isGraphSettingsOpen(),children:()=>d("div",{class:u("dcg-settings-container dcg-left dcg-popover dcg-constrained-height-popover"),style:this.bindFn(this.getContainerStyle),didMount:this.bindFn(this.didMountContainer),didUnmount:this.bindFn(this.didUnmountContainer),children:_("div",{class:u("dcg-popover-interior dcg-generic-options-menu"),role:u("region"),"aria-label":()=>this.controller.s("graphing-calculator-label-tooltip-graph-settings"),children:[d(hM,{controller:this.props.controller}),d(mM,{controller:this.props.controller}),_("div",{class:u("dcg-options-menu-section"),children:[_("div",{class:u("dcg-options-menu-section-title"),children:[()=>this.controller.s("graphing-calculator-label-axes"),d(Fr,{ariaLabel:()=>this.controller.s("graphing-calculator-label-axes"),onChange:()=>{this.controller.dispatch({type:"set-graph-settings",showAxis3D:!this.controller.getGraphSettings().showAxis3D})},toggled:()=>!!this.controller.getGraphSettings().showAxis3D})]}),d(Uv,{predicate:()=>this.controller.getGraphSettings().showAxis3D,children:()=>_("div",{class:u("dcg-show-axis-labels-section"),children:[d("div",{children:d(tt,{onChange:()=>{this.controller.dispatch({type:"set-graph-settings",showPlane3D:!this.controller.getGraphSettings().showPlane3D})},checked:()=>!!this.controller.getGraphSettings().showPlane3D,children:()=>this.controller.s("graphing-calculator-label-settings-domain-plane")})}),d("div",{children:d(tt,{onChange:()=>{this.controller.dispatch({type:"set-graph-settings",showNumbers3D:!this.controller.getGraphSettings().showNumbers3D})},checked:()=>!!this.controller.getGraphSettings().showNumbers3D,children:()=>this.controller.s("graphing-calculator-label-settings-numbers-3d")})}),d("div",{children:d(tt,{onChange:()=>{this.controller.dispatch({type:"set-graph-settings",showAxisLabels3D:!this.controller.getGraphSettings().showAxisLabels3D})},checked:()=>!!this.controller.getGraphSettings().showAxisLabels3D,children:()=>this.controller.s("graphing-calculator-label-settings-axis-labels-3d")})})]})})]}),_("div",{class:u("dcg-options-menu-section"),children:[d(Uv,{predicate:()=>!this.controller.getLockViewportConfigSetting(),children:()=>_("div",{class:()=>({"dcg-options-menu-section-title":!0,"dcg-options-menu-section-title__disabled":this.props.controller().isViewportLockedForDynamicBounds()}),children:[()=>this.controller.s("graphing-calculator-label-settings-lock-viewport"),d(Xt,{when:()=>this.props.controller().isViewportLockedForDynamicBounds(),children:d(Re,{tooltip:()=>this.props.controller().s("shared-calculator-label-viewport-locked-from-dynamic-bounds"),sticky:this.const(!0),children:d("span",{class:u("dcg-learn-more-link"),children:d("i",{class:u("dcg-icon-question-sign"),"aria-hidden":u("true")})})})}),d(Fr,{ariaLabel:()=>this.controller.s("graphing-calculator-label-settings-lock-viewport"),onChange:()=>{this.props.controller().dispatch({type:"toggle-lock-viewport"})},toggled:()=>this.props.controller().getLockViewportUserSetting()})]})}),d(Uv,{predicate:()=>this.controller.getLockViewportConfigSetting()||this.props.controller().getLockViewportUserSetting(),children:()=>d("div",{class:u("dcg-three-d-disable-rotation-container"),children:d(hr,{ariaGroupLabel:()=>this.controller.s("graphing-calculator-label-disable-rotation"),theme:this.const("full-width-mini"),staticConfig:this.bindFn(this.getRotationModeOptions)})})})]}),d(Uv,{predicate:()=>this.controller.canEnableComplexMode(),children:()=>d(Dp,{...this.props,isComplexModeEnabled:()=>this.controller.isComplexModeEnabled(),toggleComplexMode:()=>this.controller.dispatch({type:"toggle-complex-mode"}),product:this.const("graphing-3d")})}),d(ab,{controller:this.props.controller}),d(ps,{setup:this.const({controller:this.controller,type:"advanced"})}),d("div",{class:u("dcg-arrow")})]})})})]})}getRotationModeOptions(){return[{key:"allow",label:()=>this.controller.s("graphing-calculator-label-allow-rotation"),ariaLabel:()=>this.controller.s("graphing-calculator-label-allow-rotation"),selected:()=>!this.props.controller().getLockRotationUserSetting(),onSelect:()=>{this.props.controller().dispatch({type:"set-lock-rotation",lockRotation:!1})}},{key:"disable",label:()=>this.controller.s("graphing-calculator-label-disable-rotation"),ariaLabel:()=>this.controller.s("graphing-calculator-label-disable-rotation"),selected:()=>this.props.controller().getLockRotationUserSetting(),onSelect:()=>{this.props.controller().dispatch({type:"set-lock-rotation",lockRotation:!0})}}]}didMountContainer(e){this.node=e,re(document.documentElement).on("dcg-tapstart.settings-view wheel.settings-view",t=>{this.eventShouldClosePopover(t)&&this.controller.dispatch({type:"close-graph-settings",focusIconAfterClose:t.device==="keyboard"})}),re(document.documentElement).on("keydown.settings-view",t=>{let o=Pe(t);if(o==="Esc"&&this.controller.dispatch({type:"close-graph-settings",focusIconAfterClose:!0}),this.controller.isGraphSettingsOpen()&&o==="Tab"&&!t.altKey&&!t.metaKey&&!t.ctrlKey){let i=this.controller.getFocusLocation();if(!i||i.type!=="settings")return;let n=!!this.controller.getGraphSettings().degreeMode;t.shiftKey?t.shiftKey&&(i.location==="reverse-contrast"?(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"icon"}}),t.preventDefault(),t.stopPropagation()):i.location==="icon"&&(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:n?"degree-mode":"radian-mode"}}),t.preventDefault(),t.stopPropagation())):i.location==="icon"?(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"reverse-contrast"}}),t.preventDefault(),t.stopPropagation()):(!n&&i.location==="radian-mode"||n&&i.location==="degree-mode")&&(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"icon"}}),t.preventDefault(),t.stopPropagation())}})}didUnmountContainer(){re(document.documentElement).off(".settings-view")}didUpdate(){if(!this.controller.isGraphSettingsOpen())return;let e=this.controller.getKeypadHeight();e!==this.cachedKeypadHeight&&document.activeElement&&this.node.contains(document.activeElement)&&ta(document.activeElement,this.node.querySelector(".dcg-popover-interior"),50),this.cachedKeypadHeight=e}eventShouldClosePopover(e){let t=e.target,o=this.node.contains(t),i=!!t.closest(".dcg-action-settings"),n=this.isMathquillFocused()&&t.closest(".dcg-keypad"),a=!!t.closest(".dcg-action-undo")||!!t.closest(".dcg-action-redo");return!(o||i||n||a)}isMathquillFocused(){let e=this.controller.getFocusLocation();return(e==null?void 0:e.type)==="settings"}getContainerStyle(){return this.controller.getKeypadHeight()?"bottom: 0":""}};ce();ie();var iY=__dcg_shared_module_exports__['e'](se());var zv=class extends iY.View{init(){this.controller=this.props.controller()}template(){return d(Re,{tooltip:this.bindFn(this.getZoomRestoreLabel),gravity:()=>{var e,t;return((t=(e=this.props).tooltipGravity)==null?void 0:t.call(e))||"w"},children:d("button",{class:()=>({"dcg-unstyled-button":!0,"dcg-btn-flat-gray":!0,"dcg-pillbox-btn-interior":!0,"dcg-action-zoomrestore":!0}),"aria-label":this.bindFn(this.getZoomRestoreLabel),onTap:this.bindFn(this.setDefaultViewport),manageFocus:this.const(_e({controller:this.controller,location:{type:"zoom-restore-btn"}})),children:d("i",{class:u("dcg-icon-home"),"aria-hidden":u("true")})})})}setDefaultViewport(){this.controller.dispatch({type:"zoom",direction:"default"}),this.controller.dispatch({type:"set-focus-location",location:{type:"zoom-in-btn"}})}getZoomRestoreLabel(){return this.controller.s("graphing-calculator-label-tooltip-viewport-default")}};ce();ie();var nY=__dcg_shared_module_exports__['e'](se());var qv=class extends nY.View{init(){this.controller=this.props.controller()}template(){return d("div",{class:u("dcg-zoom-container"),children:_("div",{class:u("dcg-zoominout-pillbox dcg-btn-flat-gray dcg-btn-flat-gray-group dcg-group-vertical"),role:u("group"),"aria-label":()=>this.controller.s("graphing-calculator-narration-zoom-options-label"),children:[d(Re,{tooltip:this.bindFn(this.getZoomInLabel),displayBlock:this.const(!0),gravity:()=>{var e,t;return((t=(e=this.props).tooltipGravity)==null?void 0:t.call(e))||"w"},children:d("button",{class:u("dcg-unstyled-button dcg-action-zoomin dcg-pillbox-btn-interior"),"aria-label":this.bindFn(this.getZoomInLabel),onTap:this.bindFn(this.zoomIn),manageFocus:this.const(_e({controller:this.controller,location:{type:"zoom-in-btn"}})),children:d("i",{class:u("dcg-icon-plus"),"aria-hidden":u("true")})})}),d(Re,{tooltip:this.bindFn(this.getZoomOutLabel),displayBlock:this.const(!0),gravity:()=>{var e,t;return((t=(e=this.props).tooltipGravity)==null?void 0:t.call(e))||"w"},children:d("button",{class:u("dcg-unstyled-button dcg-action-zoomout dcg-pillbox-btn-interior"),"aria-label":this.bindFn(this.getZoomOutLabel),onTap:this.bindFn(this.zoomOut),children:d("i",{class:u("dcg-icon-minus"),"aria-hidden":u("true")})})})]})})}zoomIn(){this.controller.dispatch({type:"zoom",direction:"in"})}zoomOut(){this.controller.dispatch({type:"zoom",direction:"out"})}getZoomInLabel(){return this.controller.s("graphing-calculator-label-tooltip-zoom-in")}getZoomOutLabel(){return this.controller.s("graphing-calculator-label-tooltip-zoom-out")}};var{For:Ahe,Show:od}=xM.Components,vM=5,tG=73+vM,aY=37+vM,yM=class extends xM.View{init(){this.controller=this.props.controller()}template(){return _("div",{class:u("dcg-pillbox-view"),children:[d(od,{when:this.bindFn(this.shouldShowLeftPillboxes),children:_("div",{class:()=>({"dcg-left-pillboxes":!0,"dcg-geometry-toolbar-present":this.controller.shouldShowGeoToolbar()}),children:[d(od,{when:this.bindFn(this.shouldShowUndoRedo),children:d(ob,{controller:this.props.controller,isPillbox:this.const(!0)})}),d(od,{when:this.bindFn(this.shouldShowGeoReset),children:d(Gv,{controller:this.props.controller,tooltipGravity:this.const("s")})}),d(od,{when:this.bindFn(this.shouldShowLeft3dViewportControls),children:_("div",{class:u("dcg-left-3d-viewport-controls"),children:[_("div",{class:u("dcg-left-3d-zoom-controls"),children:[d(od,{when:()=>this.controller.shouldShowZoomInOutButtonsIfSpace(),children:d(qv,{controller:this.props.controller,tooltipGravity:this.const("e")})}),d(od,{when:()=>this.controller.shouldShowZoomHomeButtonIfSpace(),children:d(zv,{controller:this.props.controller,tooltipGravity:this.const("e")})})]}),d(od,{when:()=>this.shouldShowOrientationPillbox(),children:d(ib,{controller:this.props.controller,layout:this.const("horizontal")})})]})})]})}),d("div",{class:()=>({"dcg-pillbox-container":!0,"dcg-geometry-toolbar-present":this.controller.shouldShowGeoToolbar()}),role:()=>this.controller.isGeoUIActive()?void 0:"region","aria-label":()=>this.controller.isGeoUIActive()?void 0:this.controller.s("graphing-calculator-narration-graph-settings-controls"),children:_("div",{class:u("dcg-overgraph-pillbox-elements"),style:this.bindFn(this.getContainerStyle),children:[d(od,{when:()=>this.shouldShowOrientationPillbox()&&!this.showOrientationPillboxVertically()&&!this.shouldShowLeft3dViewportControls(),children:d("div",{class:u("dcg-left-pillbox-elements"),children:d(ib,{controller:this.props.controller,layout:this.const("horizontal")})})}),d(od,{when:()=>this.getRightPillboxElements().length>0,children:d("div",{class:u("dcg-right-pillbox-elements"),children:d(Ahe.Simple,{each:()=>this.getRightPillboxElements(),children:e=>{switch(e){case"settings2d":return d(pM,{controller:this.props.controller});case"settings3d":return d(fM,{controller:this.props.controller});case"settings-geo":return d(Lp,{...this.props,isPillbox:this.const(!0)});case"reset":return d(Gv,{controller:this.props.controller,tooltipGravity:this.const("w")});case"zoom-in-out":return d(qv,{controller:this.props.controller});case"orientation":return d(ib,{layout:this.const("vertical"),controller:this.props.controller});case"zoom-home":return d(zv,{controller:this.props.controller})}}})})})]})}),d(Fv,{controller:()=>this.props.controller()})]})}showOrientationPillboxVertically(){let e=vM+tG+2*aY;return this.controller.computeMajorLayout().grapher.height<e?!1:this.controller.zoomButtonsHiddenBecauseOfMobile()}shouldShowLeftPillboxes(){return this.shouldShowGeoReset()||this.shouldShowUndoRedo()||this.shouldShowLeft3dViewportControls()}shouldShowLeft3dViewportControls(){return this.controller.is3dProduct()&&this.controller.getGraphSettings().config.leftAlign3dViewportControls}shouldShowGeoReset(){return this.controller.isGeometry()&&this.shouldShowResetButton()&&!this.controller.isListEnabled()}shouldShowUndoRedo(){return this.controller.isGeometry()&&!this.controller.isListEnabled()&&!(this.controller.getGeoToolbarSuppressedByAuthor()||this.controller.getGraphSettings().config.hideGeoUI)}getRightPillboxElements(){let e=this.controller.computeMajorLayout().grapher.height,t=new rG(e);return this.shouldShowGraphSettings()&&t.push("settings2d"),this.shouldShow3DGraphSettings()&&t.push("settings3d"),this.shouldShowGeometrySettings()&&t.push("settings-geo"),this.shouldShowResetButton()&&!this.shouldShowGeoReset()&&t.push("reset"),this.controller.shouldShowZoomInOutButtonsIfSpace()&&!this.shouldShowLeft3dViewportControls()&&t.push("zoom-in-out",tG),this.shouldShowOrientationPillbox()&&this.showOrientationPillboxVertically()&&!this.shouldShowLeft3dViewportControls()&&t.push("orientation",tG),this.controller.shouldShowZoomHomeButtonIfSpace()&&!this.shouldShowLeft3dViewportControls()&&t.push("zoom-home"),t.pillboxOrder}shouldShowOrientationPillbox(){return this.controller.is3dProduct()&&this.controller.getGraphSettings().config.orientationButtons&&!this.controller.getGraphSettings().userLockedRotation}getContainerStyle(){let e=this.controller.isKeypadOpen()?this.controller.getKeypadHeight():0;return this.controller.isGraphSettingsOpen()?`bottom: ${e}px;`:"bottom: auto"}shouldShow3DGraphSettings(){return this.controller.getGraphSettings().config.settingsMenu&&this.controller.is3dProduct()}shouldShowGraphSettings(){return this.controller.getGraphSettings().config.settingsMenu&&!this.controller.isGeometry()&&!this.controller.is3dProduct()}shouldShowGeometrySettings(){return this.controller.getGraphSettings().config.settingsMenu?this.controller.isGeometry():!1}shouldShowResetButton(){return this.controller.getGraphSettings().config.showResetButtonOnGraphpaper&&this.controller.hasDefaultState()}},rG=class{constructor(e){this.graphpaperHeight=e,this.aggregateHeight=vM,this.pillboxOrder=[]}push(e,t=aY){this.aggregateHeight+=t,this.aggregateHeight<=this.graphpaperHeight&&this.pillboxOrder.push(e)}};ce();ie();var Kv=__dcg_shared_module_exports__['e'](se()),{If:Hv}=Kv.Components,oG=class extends Kv.View{init(){this.controller=this.props.controller()}template(){return _("span",{class:u("dcg-toast"),children:[d("i",{class:u("dcg-icon-error"),"aria-hidden":u("true")}),d(Hv,{predicate:()=>!this.showUndo(),children:()=>d("i",{class:u("dcg-icon-remove"),onTap:()=>this.props.onClose(),role:u("link"),tabIndex:u(0),"aria-label":u("Dismiss Notice")})}),d("span",{class:u("dcg-msg"),"aria-atomic":()=>this.shouldLiveUpdateAria(),"aria-live":()=>this.shouldLiveUpdateAria()?"assertive":"",children:()=>this.props.toastData().message}),d(Hv,{predicate:this.bindFn(this.showUndo),children:()=>d("a",{role:u("link"),tabIndex:u(0),class:u("dcg-undo"),onTap:()=>this.props.onUndo(),children:()=>this.controller.s("shared-calculator-label-toast-undo")})}),d(Hv,{predicate:this.bindFn(this.showLearnMore),children:()=>d("a",{role:u("link"),tabIndex:u(0),target:u("_blank"),onTap:()=>this.props.onLearnMore(),children:()=>this.controller.s("shared-calculator-label-toast-learn-more")})}),d(Hv,{predicate:()=>!!this.props.toastData().link,children:()=>d("a",{role:u("link"),tabIndex:u(0),target:u("_blank"),href:()=>{var e;return((e=this.props.toastData().link)==null?void 0:e.url)||""},children:()=>{var e;return((e=this.props.toastData().link)==null?void 0:e.text)||""}})})]})}showUndo(){return!!this.props.toastData().undoCallback}showLearnMore(){return!!this.props.toastData().learnMoreCallback}shouldUpdate(){return!!this.props.toastData().message}shouldLiveUpdateAria(){return!this.props.toastData().noAria}},wM=class extends Kv.View{template(){return d("div",{class:()=>({"dcg-toast-view":!0,"dcg-visible":!!this.props.toastData().message,"dcg-below-geo-toolbar":this.isGeometryInCalculator()}),"toast-style":()=>this.props.toastData().toastStyle,children:d(Hv,{predicate:()=>!!this.props.toastData().message,children:()=>_("div",{class:u("dcg-toast-wrapper"),children:[d("div",{class:u("dcg-toast-cover")}),d(oG,{...this.props})]})})})}isGeometryInCalculator(){var t;let e=this.props.controller();return(t=e.isGeometry)==null?void 0:t.call(e)}};ce();ie();__dcg_shared_module_exports__['H']();var TA=__dcg_shared_module_exports__['e'](se());Vt();bn();function iG(r){let e;if(typeof r=="number")e=r+"";else if(typeof r=="string")e=r;else return!1;return!!e.trim().match(/^-?[0-9]*\.?[0-9]*$/)}var Jl={delimiter:"",header:!1,dynamicTyping:!1,preview:0,step:void 0,encoding:"",comments:!1,complete:void 0,error:void 0,download:!1,chunk:void 0,keepEmptyRows:!1},bi={};bi.parse=Lhe;bi.RECORD_SEP="";bi.UNIT_SEP="";bi.BYTE_ORDER_MARK="\uFEFF";bi.BAD_DELIMITERS=["\r",`
`,'"',bi.BYTE_ORDER_MARK];bi.LocalChunkSize=1024*1024*10;bi.RemoteChunkSize=1024*1024*5;bi.DefaultDelimiter=",";bi.Parser=SM;bi.ParserHandle=sY;function Lhe(r,e){var t=Phe(e),o=new sY(t),i=o.parse(r);return i}function sY(r){var e=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,t=this,o,i,n=!1,a,s=[],l={data:[],errors:[],meta:{}};r=nG(r),this.parse=function(E){if(a=!1,!r.delimiter){var S=m(E);S.successful?r.delimiter=S.bestDelimiter:(a=!0,r.delimiter=bi.DefaultDelimiter),l.meta.delimiter=r.delimiter}if(sb(r.step)){var k=r.step;r.step=function(T){l=T,p()?c():k(c(),t)}}return r.preview&&r.header&&r.preview++,o=E,i=new SM(r),l=i.parse(o),c(),sb(r.complete)&&!n&&r.complete(l),n?{meta:{paused:!0}}:l},this.pause=function(){n=!0,i.abort(),o=o.substr(i.getCharIndex())},this.resume=function(){n=!1,i=new SM(r),i.parse(o),sb(r.complete)&&!n&&r.complete(l)},this.abort=function(){i.abort(),sb(r.complete)&&r.complete(l),o=""};function c(){return l&&a&&(x("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+bi.DefaultDelimiter+"'"),a=!1),p()&&h(),g()}function p(){return r.header&&s.length==0}function h(){if(l){for(var E=0;p()&&E<l.data.length;E++)for(var S=0;S<l.data[E].length;S++)s.push(l.data[E][S]);l.data.splice(0,1)}}function g(){if(!l||!r.header&&!r.dynamicTyping)return l;for(var E=0;E<l.data.length;E++){for(var S={},k=0;k<l.data[E].length;k++){if(r.dynamicTyping){var T=l.data[E][k];T=="true"?l.data[E][k]=!0:T=="false"?l.data[E][k]=!1:l.data[E][k]=b(T)}r.header&&(k>=s.length?(S.__parsed_extra||(S.__parsed_extra=[]),S.__parsed_extra.push(l.data[E][k])):S[s[k]]=l.data[E][k])}r.header&&(l.data[E]=S,k>s.length?x("FieldMismatch","TooManyFields","Too many fields: expected "+s.length+" fields but parsed "+k,E):k<s.length&&x("FieldMismatch","TooFewFields","Too few fields: expected "+s.length+" fields but parsed "+k,E))}return r.header&&l.meta&&(l.meta.fields=s),l}function m(E){for(var S=[",","	","|",";",bi.RECORD_SEP,bi.UNIT_SEP],k,T,I,P=0;P<S.length;P++){var A=S[P],D=0,G=0;I=void 0;for(var N=new SM({delimiter:A,preview:10}).parse(E),U=0;U<N.data.length;U++){var K=N.data[U].length;if(G+=K,typeof I=="undefined"){I=K;continue}else K>1&&(D+=Math.abs(K-I),I=K)}G/=N.data.length,(typeof T=="undefined"||D<T)&&G>1.99&&(T=D,k=A)}return r.delimiter=k,{successful:!!k,bestDelimiter:k}}function b(E){var S=e.test(E);return S?parseFloat(E):E}function x(E,S,k,T){l.errors.push({type:E,code:S,message:k,row:T})}}function SM(r){var e=/^\s*$/,t,o,i,n,a,s,l,c,p,h,g,m,b,x,E,S=!1;r=r||{},o=r.delimiter,i=r.comments,n=r.step,s=r.preview,(typeof o!="string"||o.length!=1||bi.BAD_DELIMITERS.indexOf(o)>-1)&&(o=","),i===!0?i="#":(typeof i!="string"||i.length!=1||bi.BAD_DELIMITERS.indexOf(i)>-1||i==o)&&(i=!1),this.parse=function(pe){if(typeof pe!="string")throw"Input must be a string";return ne(pe),k()},this.abort=function(){S=!0},this.getCharIndex=function(){return c};function k(){for(;c<t.length&&!(S||s>0&&E>=s);)l=='"'?P():p?A():D(),T();return I()}function T(){c++,l=t[c]}function I(){if(S&&$("Abort","ParseAbort","Parsing was aborted by the user's step function"),p&&$("Quotes","MissingQuotes","Unescaped or mismatched quotes"),w(),!sb(n))return de()}function P(){q()&&!L()?p=!p:(U(),p&&L()?c++:$("Quotes","UnexpectedQuotes","Unexpected quotes"))}function A(){(V(c)||B(c))&&h++,U()}function D(){l==o?K():V(c)?(H(),T()):B(c)?H():G()?N():U()}function G(){if(!i)return!1;var pe=c==0||B(c-1)||V(c-2);return pe&&t[c]===i}function N(){for(;!V(c)&&!B(c)&&c<t.length;)T()}function U(){g[b][x]+=l}function K(){g[b].push(""),x=g[b].length-1}function H(){w(),h++,E++,g.push([]),b=g.length-1,K()}function w(){F(),sb(n)&&(g[b]&&n(de()),ue())}function F(){g[b].length==1&&e.test(g[b][0])&&(r.keepEmptyRows?g[b].splice(0,1):g.splice(b,1),b=g.length-1)}function V(pe){return pe<t.length-1&&(t[pe]=="\r"&&t[pe+1]==`
`||t[pe]==`
`&&t[pe+1]=="\r")}function B(pe){return t[pe]=="\r"||t[pe]==`
`}function L(){return!q()&&c<t.length-1&&t[c+1]=='"'}function q(){return!p&&le(c-1)||le(c+1)}function le(pe){typeof pe!="number"&&(pe=c);var Y=t[pe];return pe<=-1||pe>=t.length||Y==o||Y=="\r"||Y==`
`}function $(pe,Y,j){m.push({type:pe,code:Y,message:j,line:h,row:b,index:c})}function ne(pe){t=pe,p=!1,c=0,E=0,h=1,ue(),g=[[""]],l=t[c]}function ue(){g=[],m=[],b=0,x=0}function de(){return{data:g,errors:m,meta:{lines:h,delimiter:o,aborted:S,truncated:s>0&&c<t.length}}}}function Phe(r){typeof r!="object"&&(r={});var e=nG(r);return(typeof e.delimiter!="string"||e.delimiter.length!=1||bi.BAD_DELIMITERS.indexOf(e.delimiter)>-1)&&(e.delimiter=Jl.delimiter),typeof e.header!="boolean"&&(e.header=Jl.header),typeof e.dynamicTyping!="boolean"&&(e.dynamicTyping=Jl.dynamicTyping),typeof e.preview!="number"&&(e.preview=Jl.preview),typeof e.step!="function"&&(e.step=Jl.step),typeof e.complete!="function"&&(e.complete=Jl.complete),typeof e.error!="function"&&(e.error=Jl.error),typeof e.encoding!="string"&&(e.encoding=Jl.encoding),typeof e.download!="boolean"&&(e.download=Jl.download),typeof e.keepEmptyRows!="boolean"&&(e.keepEmptyRows=Jl.keepEmptyRows),e}function nG(r){if(typeof r!="object")return r;var e=r instanceof Array?[]:{};for(var t in r)e[t]=nG(r[t]);return e}function sb(r){return typeof r=="function"}var{parse:lY}=bi;function TM(r){let e=r.split(/\r?\n/),t=[],o=!1;if(!(e.length<2)){for(let i=0;i<e.length;i++){let n=e[i];if(!n.trim())continue;i>0&&!iG(n.replace(/,(\d{3})/g,"$1"))&&(o=!0);let a={content:n};t.push(a)}if(!o){let i=t.map(n=>n.content).map(n=>n.replace(/,(\d{3})/g,"$1"));return iG(i[0])||(i=i.slice(1)),[{content:"\\left["+i.join(",")+"\\right]",numberList:!0}]}return t}}function cY(r){if(/^\s*$/.test(r))return;let e=lY(r,{preview:1e4}),t=e.data,o=[];if(e.errors.length&&!e.data.length){Lr("PapaParse.parse returned errors.",{metaData:{input:r,output:e.errors}});return}if(!e.data.length||e.data.length<2)return;let i=t[0].length;for(let n=0;n<i;n++)o.push([]);for(let n=0;n<e.data.length;n++)if(!(n===0&&isNaN(parseFloat(t[n][0])))){if(t[n].length<2)return;if(!(!t[n][0]&&!t[n][1]))for(let a=0;a<i;a++){let s=(t[n][a]||"").replace(/,(\d{3})/g,"$1");if(s&&isNaN(parseFloat(s)))return;o[a].push(s)}}if(!(o[0].length<2))return o}function dY(r){let e=__dcg_shared_module_exports__['Uc'](so(r));return e.graph.product="geometry-calculator",e}function kM(r){return/^\s*(https?:\/\/)?([-a-zA-Z0-9]*\.)?desmos\.com(:[0-9]+)?\/calculator\/./.test(r)}function aG(r){return/^\s*(https?:\/\/)?([-a-zA-Z0-9]*\.)?desmos\.com(:[0-9]+)?\/(geometry|geometry-beta)\/./.test(r)}function sG(r){return/^\s*(https?:\/\/)?([-a-zA-Z0-9]*\.)?desmos\.com(:[0-9]+)?\/3d\/./.test(r)}function lG(r){return/^\s*(https?:\/\/)?([-a-zA-Z0-9]*\.)?desmos\.com(:[0-9]+)?\/geometry-legacy\/./.test(r)}function pY(r){return kM(r)?"graphing":aG(r)?"geometry-calculator":lG(r)?"geometry":sG(r)?"graphing-3d":void 0}async function EM(r,e,t){let o=!1;r.dispatch({type:"toast/show",toast:{message:r.s("graphing-calculator-text-toast-importing-graph"),hideAfter:0,toastStyle:"cover",onHide:()=>{o=!0}}});let i=()=>{o||r.dispatch({type:"toast/show",toast:{message:r.s("graphing-calculator-text-toast-error-importing-graph"),toastStyle:"error",hideAfter:12e3}})},n=()=>{r.dispatch({type:"toast/show",toast:{message:r.s("graphing-calculator-text-toast-error-no-folders"),toastStyle:"error",hideAfter:12e3}})},a=(l,c)=>{r.dispatch({type:"set-state",state:l,opts:{forceUnsavedChanges:!0}}),r.dispatch({type:"toast/show",toast:{message:r.s("graphing-calculator-text-toast-imported-graph"),undoCallback:()=>{r.dispatch({type:"set-state",state:c,opts:{forceUnsavedChanges:!0}})}}})},s=(l,c,p)=>{if(o)return;let h=r.getSelectedItem();if(!h)return;let g=h.type==="folder",m=h.type!=="folder"&&!!h.folderId,b=g||m,x={},E=r.getState(),S=E.expressions.list;if(S.length===1&&!g&&!r.isGeometry()){a(l,E);return}if(r.isGeometry()&&p!=="graphing"){a(l,E);return}let k=l.expressions.list;p==="graphing"&&Array.isArray(k)&&(k=k.filter(D=>D.id!==__dcg_shared_module_exports__['je']));for(let D=0;D<k.length;D++){let G=r.generateId(),N=k[D];if(N.type==="folder")if(b){n();return}else{x[N.id]=G,N.id=G;continue}N.folderId?N.folderId=x[N.folderId]:g?N.folderId=h.id:m&&(N.folderId=h.folderId),N.id=G}let T=__dcg_shared_module_exports__['Uc'](E),I=0;for(;I<S.length;){if(S[I].id===h.id){g&&(S[I].title=c);break}I+=1}let P=g?I+1:I,A=g?0:1;S.splice(P,A,...k),a(E,T)};try{let{migratedState:l,title:c,sourceProduct:p}=await Ohe({url:e,targetProduct:r.getProduct()});t(l,(h,g)=>{h||!g||!p?i():s(g,c,p)})}catch(l){i()}}async function Ohe(r){let e=await fetch(`${r.url}?${new URLSearchParams(H0)}`,{headers:{Accept:"application/json"}});if(!e.ok)throw new Error(`Failed to fetch state from ${r.url} (status ${e.status})`);let t=await e.json(),o=t.state,i=pY(r.url);return r.targetProduct==="geometry-calculator"&&(i==="geometry"?o=uc(o):i==="graphing"&&(o=dY(o))),{migratedState:so(o),title:t.title||"",sourceProduct:i}}bn();var uY,hY="dcg-copy-expression";function cG(r,e,t){var a;if(!window.getSelection)return!1;let o=e.getSelectedItem();if(!p0()||!r.clipboardData||!o||e.isItemReadonly(o.id))return!1;let i=[LT(o,{stripDefaults:!0})];i[0].type!=="folder"&&delete i[0].folderId;let n="";switch(o.type){case"expression":if(!o.latex)return!1;n=o.latex;break;case"text":if(!o.text)return!1;n=o.text;break;case"image":n=o.name;break;case"folder":n=o.title;let s=ET(e.getListModel(),o.id);if(!o.title&&s.length===0)return!1;for(let h of s)i.push(LT(h,{stripDefaults:!0}));break;case"table":let l=[],c=Kn(o),p=(a=o.formula)==null?void 0:a.column_data.slice(0,o.columnModels.length-1);if(!p)return!1;for(let h=0;h<c;h++)p.every(g=>!g.values[h])||l.push(p.map(g=>g.values[h]||"").join("	"));if(l.length===0)return!1;n=l.join(`
`);break}return r.clipboardData.setData("text/plain",n),r.clipboardData.setData(hY,JSON.stringify(i)),r.preventDefault(),t==="cut"?(e.dispatch({type:"delete-item-and-animate-out",id:o.id,setFocusAfterDelete:!e.isInEditListMode()}),!0):(e.dispatch({type:"set-highlighted-expressions",ids:i.map(s=>s.id)}),clearTimeout(uY),uY=setTimeout(()=>{e.dispatch({type:"set-highlighted-expressions",ids:[]})},400),!0)}function gY(r,e){var o;let t=(o=r.clipboardData)==null?void 0:o.getData(hY);if(!t)return!1;r.preventDefault();try{let i=JSON.parse(t);return e.dispatch({type:"paste-expression",data:i}),!0}catch(i){return Lr("pasteExpression error",{metaData:{content:t}}),!0}}function mY(r,e){try{let t=rb(r);if(!t)return!1;let o=JSON.parse(t);return o.graph?(e.getProduct()===(o.graph.product||"graphing")?e.dispatch({type:"set-state",state:o}):e.dispatch({type:"paste-expression",data:[{type:"text",id:"doesnotmatter",text:t}]}),r.preventDefault(),r.stopPropagation(),!0):!1}catch(t){return!1}}ce();ie();var fY=__dcg_shared_module_exports__['e'](se()),Wv=class extends fY.View{init(){this.controller=this.props.controller()}template(){return d("div",{class:u("dcg-drag-container"),style:()=>({top:this.getTopPx(),left:this.getLeftPx()}),children:this.props.children})}getTopPx(){let e=this.controller.getRawDragState();if(e)return e.itemTop+"px"}getLeftPx(){let e=this.controller.getRawDragState();if(e)return e.itemLeft+"px"}};ce();ie();__dcg_shared_module_exports__['H']();var CM=__dcg_shared_module_exports__['e'](se());Vt();var{If:Rhe}=CM.Components,IM=class extends CM.View{init(){this.guid=__dcg_shared_module_exports__['E']("dcg-exp-list-resize")}template(){return d(Rhe,{predicate:this.bindFn(this.isVisible),children:()=>d("div",{class:u("dcg-exp-list-resizer"),onTapStart:this.bindFn(this.onTapStart)})})}isVisible(){return this.props.controller().expressionsAreFullWidth()?!1:this.props.controller().isListVisible()}onTapStart(e){this.initialWidth=this.props.controller().getExpListWidth(),this.initialLeft=e.changedTouches[0].clientX,re(document).on(`dcg-tapmove.${this.guid}`,t=>{if(this.initialLeft===void 0||this.initialWidth===void 0)return;let o=t.changedTouches[0].clientX-this.initialLeft+this.initialWidth;this.props.controller().dispatch({type:"resize-exp-list",expListWidth:o})}),re(document).on(`dcg-tapend.${this.guid}`,this.bindFn(this.onTapEnd)),re(document).on(`dcg-tapcancel.${this.guid}`,this.bindFn(this.onTapEnd))}onTapEnd(){re(document).off(`.${this.guid}`),this.initialLeft=void 0,this.initialWidth=void 0}};ce();ie();var MM=__dcg_shared_module_exports__['e'](se());var{For:Fhe,If:Ghe}=MM.Components,_M=class extends MM.View{init(){var e;this.controller=this.props.controller(),this.model=this.props.model(),this.guid=(e=this.controller.getOpenItemMenu())==null?void 0:e.guid}didMount(){qc(this.guid,this.controller)}willUnmount(){Hc(this.guid,this.controller)}didMountArrow(e){this.arrowElt=e,ra(this.arrowElt,this.controller)}didUpdate(){ra(this.arrowElt,this.controller)}template(){let e=this.model;return _("div",{class:()=>({"dcg-table-column-menu":!0,"dcg-options-menu":!0}),role:u("region"),"aria-label":()=>this.controller.s("graphing-calculator-narration-options-menu"),children:[d("div",{children:d(Fhe.Simple,{each:this.bindFn(this.getSectionsWithColorAfterFirstOpen),children:t=>{switch(t){case"points":return d(hf,{model:()=>e,controller:this.props.controller,isOpen:()=>this.isSectionOpen("points")});case"drag":return d(df,{model:()=>e,controller:this.props.controller,isOpen:()=>this.isSectionOpen("drag")});case"lines":return d(uf,{model:()=>e,controller:this.props.controller,isOpen:()=>this.isSectionOpen("lines")});case"colors":return d(lp,{model:()=>e,controller:this.props.controller})}}})}),d(cp,{model:()=>e,controller:()=>this.props.controller()}),d(Ghe,{predicate:this.bindFn(this.shouldShowRegressionButton),children:()=>d("div",{class:u("dcg-options-menu-section dcg-options-menu__regression-btn-container"),children:d("button",{class:()=>({"dcg-btn-light-gray":!0,"dcg-disabled":this.isRegressionButtonDisabled()}),onTap:this.bindFn(this.addRegression),children:()=>this.controller.s("graphing-calculator-button-add-table-regression")})})}),d("div",{class:u("dcg-triangle"),didMount:this.bindFn(this.didMountArrow),didUnmount:()=>this.arrowElt=void 0})]})}shouldShowRegressionButton(){return this.controller.shouldShowRegressionButton(this.model.table)?Tc(this.model):!1}getSectionsWithColorAfterFirstOpen(){let e=this.getSections(),t=[],o=!1;for(let i of e)t.push(i),i==="colors"&&(o=!0),!o&&this.canColorComeAfterSection(i)&&this.isSectionOpen(i)&&(t.push("colors"),o=!0);return t}canColorComeAfterSection(e){switch(e){case"colors":case"drag":return!1;case"lines":case"points":return!0;default:return e}}getSections(){return this.model.draggable&&!this.controller.isThreeDMode()&&!this.controller.shouldIgnoreGraphInteractions(this.model)?["points","lines","drag"]:["points","lines"]}isSectionOpen(e){switch(e){case"drag":return this.model.dragMode!==__dcg_shared_module_exports__['hd'].NONE;case"lines":return!!this.model.lines;case"points":return!!this.model.points;case"colors":return!0}}addRegression(){this.isRegressionButtonDisabled()||(this.controller.dispatch({type:"close-item-settings-menu"}),this.controller.dispatch({type:"create-table-regression",tableId:this.model.table.id,regressionType:"linear",columnIds:{y:this.model.id,x:this.model.table.columnModels[0].id}}))}isRegressionButtonDisabled(){return!Pd(this.model)}};ce();ie();var bY=__dcg_shared_module_exports__['e'](se());var AM=class extends bY.View{init(){var e;this.controller=this.props.controller(),this.model=this.props.model(),this.guid=(e=this.controller.getOpenItemMenu())==null?void 0:e.guid}didMount(){qc(this.guid,this.controller)}willUnmount(){Hc(this.guid,this.controller)}didMountArrow(e){this.arrowElt=e,ra(this.arrowElt,this.controller)}didUpdate(){ra(this.arrowElt,this.controller)}template(){let e=this.model;return _("div",{class:()=>({"dcg-table-column-menu":!0,"dcg-options-menu":!0}),role:u("region"),"aria-label":()=>this.controller.s("graphing-calculator-narration-options-menu"),children:[d(lp,{model:()=>e,controller:this.props.controller}),d("div",{class:u("dcg-triangle"),didMount:this.bindFn(this.didMountArrow),didUnmount:()=>this.arrowElt=void 0})]})}};ce();ie();var PM=__dcg_shared_module_exports__['e'](se());var{If:$v}=PM.Components,LM=class extends PM.View{constructor(){super(...arguments),this.justGlobalReplaced=!1}init(){this.controller=this.props.controller()}template(){return d("div",{class:()=>({"dcg-expression-search-bar":!0,"dcg-expressions-scrolled":this.props.expsScrolled()&&!this.controller.getTickerOpen()}),role:u("search"),children:_("div",{class:u("dcg-search-row"),children:[_("div",{class:u("dcg-search-mathquill-container"),children:[d(qe,{hasError:this.const(!1),getAriaLabel:()=>this.controller.s("graphing-calculator-label-search-expressions"),getAriaPostLabel:()=>this.controller.getExpressionSearchStr().length===0?this.controller.raw(""):this.shouldShowReplaceError()?this.controller.s("graphing-calculator-error-expression-replacement"):this.shouldShowSearchError()?this.controller.s("graphing-calculator-error-expression-search"):this.controller.s("shared-calculator-text-search-results",{count:__dcg_shared_module_exports__['pa'](this.controller.getExpressionSearchCount())}),capExpressionSize:this.const(!1),onUserChangedLatex:this.bindFn(this.onSearchChange),latex:()=>this.controller.getRawExpressionSearchStr(),isFocused:this.bindFn(this.isSearchFocused),config:this.bindFn(this.getMQConfig),onFocusedChanged:this.bindFn(this.onSearchFocusChanged),noFadeout:this.const(!0),onUserPressedKey:(e,t)=>{if(e==="Esc")t&&t.preventDefault(),this.closeSearch();else if(e==="Enter")t&&t.preventDefault(),this.onEnter();else if(e==="Down"){let o=qe.getFocusedMathquill();return!o||!qe.applyArrowKeyAndReturnIfWasAtBounds(o,e,t)?void 0:this.controller.dispatch({type:"on-special-key-pressed",key:e})}else{let o=qe.getFocusedMathquill();if(!o)return;o.keystroke(e,t),this.controller.getRawExpressionSearchStr()!==o.latex()&&(this.justGlobalReplaced=!1,this.onSearchChange(o.latex()))}}}),d("i",{class:u("dcg-icon-search"),"aria-hidden":u("true")}),d($v,{predicate:()=>this.controller.getRawExpressionSearchStr().length===0,children:()=>d("span",{class:u("dcg-search-placeholder"),children:()=>this.controller.s("graphing-calculator-label-search-expressions")})}),d($v,{predicate:()=>this.shouldShowSearchError(),children:()=>d("span",{class:u("dcg-search-replace-icon-container"),children:d(io,{error:()=>this.controller.s("graphing-calculator-error-expression-search"),size:this.const("small")})})}),d($v,{predicate:()=>this.controller.isSearchReplaceValid()&&!this.justGlobalReplaced,children:()=>d("span",{class:u("dcg-search-replace-icon-container"),children:d("i",{class:u("dcg-icon-replace"),role:u("button"),tabIndex:u("0"),"aria-label":()=>this.controller.s("graphing-calculator-button-replace"),onTap:this.bindFn(this.onGlobalReplace)})})}),d($v,{predicate:()=>this.justGlobalReplaced,children:()=>d("span",{class:u("dcg-search-replace-icon-container"),children:d("i",{class:u("dcg-icon-check"),"aria-hidden":u("true")})})}),d($v,{predicate:()=>this.shouldShowReplaceError(),children:()=>d("span",{class:u("dcg-search-replace-icon-container"),children:d(io,{error:()=>this.controller.s("graphing-calculator-error-expression-replacement"),size:this.const("small")})})})]}),d("i",{onTap:()=>this.closeSearch(),tabIndex:u("0"),"aria-label":()=>this.controller.s("account-shell-button-cancel"),role:u("button"),class:u("dcg-icon-remove dcg-do-not-blur")})]})})}onGlobalReplace(){this.justGlobalReplaced=!0,setTimeout(this.bindIfMounted(()=>{this.justGlobalReplaced=!1,this.update()}),1500),this.controller.dispatch({type:"rename-identifier-global",search:this.controller.getExpressionSearchStr(),replace:this.controller.getExpressionReplaceStr()})}onEnter(){this.controller.isSearchReplaceValid()?this.onGlobalReplace():this.controller.dispatch({type:"update-expression-search-str",str:this.controller.getRawExpressionSearchStr()})}shouldShowSearchError(){return!this.controller.getIsExpressionSearchStrValidForReplace()&&this.controller.getExpressionReplaceStr().length>0}shouldShowReplaceError(){return!this.shouldShowSearchError()&&!this.controller.getIsExpressionReplaceStrValidForReplace()&&this.controller.getExpressionReplaceStr().length>0}closeSearch(){this.controller.dispatch({type:"close-expression-search"})}onSearchChange(e){this.controller.dispatch({type:"update-expression-search-str",str:e})}onSearchFocusChanged(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"search-expressions"}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"search-expressions"}})}isSearchFocused(){let e=this.controller.getFocusLocation();return!!e&&e.type==="search-expressions"}onReplaceChange(e){this.controller.dispatch({type:"update-expression-replace-str",str:e})}onReplaceFocusChanged(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"replace-expressions"}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"replace-expressions"}})}isReplaceFocused(){let e=this.controller.getFocusLocation();return!!e&&e.type==="replace-expressions"}getMQConfig(){return this.controller.getMathquillConfig({additionalOperators:["label","rename","image","alt","note"]})}};ce();ie();var RM=__dcg_shared_module_exports__['e'](se());Vt();ce();ie();var Yv=__dcg_shared_module_exports__['e'](se());Vt();var{If:kh,IfElse:Nhe}=Yv.Components,Fp=class extends Yv.View{init(){this.controller=this.props.controller()}getAriaLabel(){let e=this.props.itemType();switch(e){case"expression":return this.controller.s("graphing-calculator-narration-add-expression");case"note":return this.controller.s("graphing-calculator-narration-add-note");case"folder":return this.controller.s("graphing-calculator-narration-add-folder");case"table":return this.controller.s("graphing-calculator-narration-add-table");case"ticker":return this.controller.s("graphing-calculator-narration-add-ticker");case"inference":return this.controller.s("graphing-calculator-narration-add-inference");default:throw new Error(`Unexpected ${e}`)}}getIconText(){let e=this.props.itemType();switch(e){case"expression":return this.controller.s("graphing-calculator-label-expression-lowercase");case"note":return this.controller.s("graphing-calculator-label-note-lowercase");case"folder":return this.controller.s("graphing-calculator-label-folder-lowercase");case"table":return this.controller.s("graphing-calculator-label-table-lowercase");case"ticker":return this.controller.s("graphing-calculator-label-ticker-lowercase");case"inference":return this.controller.s("graphing-calculator-label-inference-lowercase");default:throw new Error(`Unexpected ${e}`)}}getExpressionIcon(){let e=this.props.itemType();return e==="inference"?"dcg-icon-inference":`dcg-icon-new-${e}`}onTap(){let e=this.props.itemType();switch(e){case"ticker":this.controller.dispatch({type:"open-ticker"});break;case"inference":this.controller.dispatch({type:"open-inference-wizard"});break;default:this.controller.dispatch({type:`new-${e}`})}}getFocusHelper(){return _e({controller:this.controller,location:{type:`add-${this.props.itemType()}-btn`}})}template(){return _("div",{class:()=>({"dcg-new-item":!0,"dcg-do-not-blur":!0,[`dcg-action-new${this.props.itemType()}`]:!0}),role:u("button"),tabIndex:u(0),"aria-label":this.bindFn(this.getAriaLabel),onTap:this.bindFn(this.onTap),handleEvent:u("true"),manageFocus:this.bindFn(this.getFocusHelper),children:[d("div",{class:u("dcg-expression-icon__container"),"aria-hidden":u("true"),children:Nhe(()=>this.props.itemType()==="inference",{true:()=>_(tr,{children:[d("i",{class:u("dcg-icon-inference")}),d("i",{class:u("dcg-icon-inference-fill"),"aria-hidden":u("true")})]}),false:()=>d("i",{class:()=>this.getExpressionIcon(),"aria-hidden":u("true")})})}),()=>this.getIconText()]})}},jv=class extends Yv.View{init(){this.controller=this.props.controller()}template(){return _("div",{class:u("dcg-add-expression-container"),children:[d(Re,{tooltip:()=>this.controller.s("graphing-calculator-label-add-item-tooltip"),gravity:this.const("s"),children:d("button",{class:()=>({"dcg-unstyled-button":!0,"dcg-icon-btn":!0,"dcg-add-expression-btn":!0,"dcg-action-add-expression":!0,"dcg-do-blur":!0,"dcg-active":this.controller.isAddExpressionOpen()}),handleEvent:u("true"),"aria-haspopup":u("true"),"aria-expanded":()=>this.controller.isAddExpressionOpen(),"aria-label":()=>this.controller.s("graphing-calculator-label-add-item-tooltip"),didMount:e=>{this.toggleButtonNode=e},onTap:this.bindFn(this.toggleAddExpression),manageFocus:this.const(_e({controller:this.controller,location:{type:"add-item-btn"}})),children:d("i",{class:u("dcg-icon-plus"),"aria-hidden":u("true")})})}),d(kh,{predicate:()=>this.controller.isAddExpressionOpen(),children:()=>_("div",{class:()=>({"dcg-popover":!0,"dcg-bottom":!this.controller.isNarrow(),"dcg-right":this.controller.isNarrow()}),role:u("region"),"aria-label":()=>this.controller.s("graphing-calculator-narration-add-item-menu"),didMount:this.bindFn(this.didMountPopover),didUnmount:this.bindFn(this.didUnmountPopover),children:[d(kh,{predicate:()=>this.controller.isAddExpressionOpen()&&!this.controller.wizardModel.isWizardOpen(),children:()=>_("div",{class:u("dcg-popover-interior dcg-add-expression-dropdown"),style:()=>({"max-height":this.getMaxScrollableHeight()}),children:[d(Fp,{controller:this.props.controller,itemType:this.const("expression")}),d(kh,{predicate:()=>this.controller.areNotesEnabled(),children:()=>d(Fp,{controller:this.props.controller,itemType:this.const("note")})}),d(Fp,{controller:this.props.controller,itemType:this.const("table")}),d(kh,{predicate:()=>this.controller.isInferenceWizardEnabled(),children:()=>d(Fp,{controller:this.props.controller,itemType:this.const("inference")})}),d(kh,{predicate:()=>this.controller.areFoldersEnabled(),children:()=>d(Fp,{controller:this.props.controller,itemType:this.const("folder")})}),d(kh,{predicate:()=>this.controller.areImagesEnabled(),children:()=>d(zc,{controller:()=>this.controller,ariaLabel:()=>this.controller.s("graphing-calculator-narration-add-image"),onFileChange:e=>this.insertFiles(e),location:this.const({type:"add-image-btn"}),readonly:this.const(!1),children:_("div",{class:u("dcg-new-item dcg-action-newimage"),children:[d("div",{class:u("dcg-expression-icon__container"),children:d("i",{class:u("dcg-icon-new-image"),"aria-hidden":u("true")})}),()=>this.controller.s("graphing-calculator-label-image-lowercase")]})})}),d(kh,{predicate:this.bindFn(this.showAddTicker),children:()=>d(Fp,{controller:this.props.controller,itemType:this.const("ticker")})})]})}),d("span",{class:u("dcg-arrow")})]})})]})}getMaxScrollableHeight(){let e=this.controller.computeMajorLayout().list.height;return Math.max(e+30,80)+"px"}showAddTicker(){return this.controller.areActionsEnabled()&&!this.controller.getTickerOpen()}didMountPopover(e){this.popoverNode=e,re(document).on("dcg-tapstart.add-expression-view wheel.add-expression-view",t=>{this.eventShouldClosePopover(t)&&this.controller.dispatch({type:"close-add-expression",focusIconAfterClose:t.device==="keyboard"})}),re(document).on("keydown.add-expression-view",t=>{if(Pe(t)==="Esc"&&this.controller.dispatch({type:"close-add-expression",focusIconAfterClose:!0}),Pe(t)==="Tab"&&!t.altKey&&!t.metaKey&&!t.ctrlKey){let o=this.controller.getFocusLocation();if(!o)return;let i;this.showAddTicker()?i={type:"add-ticker-btn"}:this.controller.areImagesEnabled()?i={type:"add-image-btn"}:this.controller.areFoldersEnabled()?i={type:"add-folder-btn"}:i={type:"add-table-btn"},!t.shiftKey&&o.type===i.type?(this.controller.dispatch({type:"set-focus-location",location:{type:"add-item-btn"}}),t.preventDefault(),t.stopPropagation()):t.shiftKey&&o.type==="add-item-btn"&&(this.controller.dispatch({type:"set-focus-location",location:i}),t.preventDefault(),t.stopPropagation())}}),ys&&bc&&re(e).on("dcg-tapstart",t=>t.preventDefault()),re(e.querySelector(".dcg-new-item")).on("touchstart",t=>t.preventDefault())}didUnmountPopover(){re(document).off(".add-expression-view")}toggleAddExpression(){this.controller.dispatch({type:"toggle-add-expression",focusOnOpen:!0})}insertFiles(e){this.controller.dispatch({type:"new-images",files:e})}eventShouldClosePopover(e){let t=!!this.popoverNode.contains(e.target),o=!!this.toggleButtonNode.contains(e.target),i=!!e.target.closest(".dcg-keypad");return!(t||o||i)}};ce();ie();var yY=__dcg_shared_module_exports__['e'](se());var DM=class extends yY.View{init(){this.controller=this.props.controller()}template(){return _("button",{class:()=>({"dcg-unstyled-button":!0,"dcg-constructions-count-link":!0,"dcg-icon-btn":!0,"dcg-active":this.controller.getShowConstructionsOpen(),"dcg-do-not-blur":!0}),handleEvent:u("true"),"aria-expanded":()=>this.controller.getShowConstructionsOpen(),manageFocus:this.const(_e({controller:this.controller,location:{type:"geo-show-constructions-icon"}})),onTap:this.bindFn(this.showAllConstructions),children:[d("i",{class:u("dcg-icon-geometry"),"aria-label":()=>this.controller.s("graphing-calculator-narration-geometry-construction-icon-label")}),d("span",{class:u("dcg-construction-count"),children:()=>this.controller.getGeometryTokenCount()})]})}showAllConstructions(){this.controller.dispatch({type:"set-show-constructions-open",open:!this.controller.getShowConstructionsOpen(),setFocus:!1})}};ce();ie();var xY=__dcg_shared_module_exports__['e'](se());Vt();var OM=class extends xY.View{init(){this.controller=this.props.controller()}toggleMuted(){var e;(e=this.controller.toneController)!=null&&e.isGlobalMuted()?this.controller.dispatch({type:"unmute-global"}):this.controller.dispatch({type:"mute-global"})}getMutedState(){return!this.controller.toneController||this.controller.toneController.isGlobalMuted()?"muted":"playing"}getAriaLabel(){switch(this.getMutedState()){case"playing":return this.controller.s("graphing-calculator-narration-mute-all");case"muted":return this.controller.s("graphing-calculator-narration-unmute-all")}}template(){return d(Re,{gravity:this.const("s"),tooltip:this.bindFn(this.getAriaLabel),children:_("button",{class:()=>{var e;return{"dcg-global-mute-button":!0,"dcg-unstyled-button":!0,"dcg-icon-btn":!0,"dcg-is-muted":this.getMutedState()==="muted","dcg-has-never-interacted":!((e=this.controller.toneController)!=null&&e.getHasEverInteractedWithMute())}},didMount:e=>re(e).on("tipsyshow",()=>{var t;(t=this.controller.toneController)==null||t.registerMuteInteraction(),this.update()}),onTap:this.bindFn(this.toggleMuted),manageFocus:this.const(_e({controller:this.controller,location:{type:"global-mute-button"}})),"aria-label":this.bindFn(this.getAriaLabel),children:[d("span",{class:u("dcg-first-time-animation")}),d("i",{class:u("dcg-icon-volume")})]})})}};var{If:id}=RM.Components,Xv=class extends RM.View{constructor(){super(...arguments),this.controller=this.props.controller()}template(){return _("div",{class:()=>({"dcg-expression-top-bar":!0,"dcg-expressions-scrolled":this.showShadow()}),role:u("toolbar"),"aria-label":()=>this.controller.s("graphing-calculator-narration-expression-bar"),didMount:e=>{this.node=e},onTapStart:this.bindFn(this.onTapStart),children:[d(id,{predicate:()=>!this.controller.isInEditListMode(),children:()=>d(jv,{controller:()=>this.props.controller()})}),d(id,{predicate:()=>this.controller.isGeoUIActive()&&!this.controller.isInEditListMode(),children:()=>d(DM,{controller:this.props.controller})}),d(id,{predicate:this.bindFn(this.showMuteButton),children:()=>d(OM,{controller:this.props.controller})}),d(id,{predicate:this.bindFn(this.showRerandomize),children:()=>d(Re,{tooltip:()=>this.controller.s("graphing-calculator-label-randomize-tooltip"),gravity:this.const("s"),children:d("button",{class:u("dcg-unstyled-button dcg-icon-btn"),handleEvent:u("true"),"aria-label":()=>this.controller.s("graphing-calculator-label-randomize-tooltip"),onTap:()=>this.controller.dispatch({type:"re-randomize"}),children:d("i",{class:u("dcg-icon-randomize"),"aria-hidden":u("true")})})})}),d(id,{predicate:()=>this.controller.isInEditListMode()&&!this.controller.hasDefaultState(),children:()=>d("button",{class:u("dcg-btn-red dcg-action-clearall"),onTap:()=>this.controller.dispatch({type:"clear-graph"}),children:()=>this.controller.s("graphing-calculator-button-clear-graph")})}),d(id,{predicate:()=>this.controller.isInEditListMode()&&this.controller.hasDefaultState(),children:()=>d("button",{class:u("dcg-btn-red dcg-action-reset"),onTap:()=>this.controller.dispatch({type:"reset-graph"}),children:()=>this.controller.s("graphing-calculator-button-reset-graph")})}),d("div",{class:u("dcg-center-buttons"),children:d(ob,{...this.props,isPillbox:this.const(!1)})}),d(id,{predicate:()=>!this.controller.isInEditListMode(),children:()=>d(Re,{tooltip:()=>this.controller.s("graphing-calculator-label-edit-list-tooltip"),gravity:this.const("s"),children:d("button",{class:u("dcg-unstyled-button dcg-icon-btn dcg-action-toggle-edit"),handleEvent:u("true"),"aria-label":()=>this.controller.s("graphing-calculator-narration-edit-expression-list"),onTap:this.bindFn(this.toggleEditListMode),manageFocus:this.const(_e({controller:this.controller,location:{type:"edit-list-toggle"}})),children:d("i",{class:u("dcg-icon-settings"),"aria-hidden":u("true")})})})}),d(id,{predicate:()=>this.controller.isInEditListMode(),children:()=>d("button",{class:u("dcg-btn-blue dcg-action-toggle-edit dcg-do-not-blur"),handleEvent:u("true"),onTap:this.bindFn(this.toggleEditListMode),manageFocus:this.const(_e({controller:this.controller,location:{type:"edit-list-toggle"}})),children:()=>this.controller.s("graphing-calculator-button-done")})}),d(id,{predicate:()=>!this.controller.isInEditListMode()&&this.controller.getGraphSettings().config.graphpaper,children:()=>_(Re,{tooltip:()=>this.controller.s("graphing-calculator-label-hide-expression-list-tooltip"),gravity:this.const("s"),children:[" ",d("button",{class:()=>({"dcg-unstyled-button":!0,"dcg-resize-list-btn":!0,"dcg-action-hideexpressions":!0,"dcg-icon-btn":!0,"dcg-rotated":this.controller.isNarrow()}),"aria-label":()=>this.controller.s("graphing-calculator-label-hide-expression-list-tooltip"),onTap:()=>this.controller.dispatch({type:"hide-expressions-list",focusShowIcon:!0}),manageFocus:this.const(_e({controller:this.controller,location:{type:"hide-expression-list-btn"}})),children:d("i",{class:u("dcg-icon-hide"),"aria-hidden":u("true")})})]})})]})}onTapStart(e){Or(e)||this.controller.dispatch({type:"set-none-selected"}),this.controller.isNarrow()&&(e.target.closest(".dcg-add-expression-dropdown")||(this.resizeState={initialHeight:this.controller.getExpListHeight(),initialTop:e.changedTouches[0].clientY},re(document).on(`dcg-tapmove.${this.guid}`,t=>{if(!this.resizeState)return;let o=t.changedTouches[0].clientY;Math.abs(this.resizeState.initialTop-o)>5&&y0.preventTapEvent();let i=this.resizeState.initialTop-o+this.resizeState.initialHeight;this.props.controller().dispatch({type:"resize-exp-list",expListHeight:i})}),re(document).on(`dcg-tapend.${this.guid}`,this.bindFn(this.onTapEnd)),re(document).on(`dcg-tapcancel.${this.guid}`,this.bindFn(this.onTapEnd))))}onTapEnd(){re(document).off(`.${this.guid}`),this.resizeState=void 0}showShadow(){return this.controller.getTickerOpen()||this.controller.getExpressionSearchOpen()?!1:this.props.expsScrolled()}showRerandomize(){return this.controller.isInEditListMode()?!1:this.controller.anyItemDependsOnRandomSeed()}toggleEditListMode(e){this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!this.controller.isInEditListMode(),focusExpressionList:!1}),e.device==="keyboard"&&this.controller.dispatch({type:"set-focus-location",location:{type:"edit-list-toggle"}})}showMuteButton(){return this.controller.isInEditListMode()?!1:this.controller.toneItemsExist()}};ce();ie();du();ce();ie();var FM=__dcg_shared_module_exports__['e'](se());Vt();var{Textarea:Vhe}=FM.Components,nd=class extends FM.View{template(){return _("div",{class:u("dcg-smart-textarea-container dcg-text-selectable"),children:[d("div",{class:u("dcg-displayTextarea dcg-fixed-width-element"),didMount:this.bindFn(this.didMountDisplay)}),d(Vhe,{class:()=>({"dcg-fixed-width-element":!0,"dcg-smart-textarea":!0,"dcg-empty":!this.props.text()}),"aria-label":()=>{var e,t;return(t=(e=this.props).ariaLabel)==null?void 0:t.call(e)},placeholder:this.bindFn(this.getPlaceholder),readOnly:()=>this.props.readonly()?!0:void 0,value:this.props.text,onInput:this.props.onInput,didMount:this.bindFn(this.didMountTextarea),onKeyDown:this.bindFn(this.onKeydownEvent)})]})}getDisplayTextHTML(){let e=this.props.text()||"",t=(n,a)=>e.slice(n,a).replace(/</g,"&lt;").replace(/>/g,"&gt;"),o=0,i="";if(this.props.showLinks()){let n=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,a=null;for(;(a=n.exec(e))!==null;){let[s]=a;i+=t(o,a.index),i+=`<a rel='nofollow ugc' href='${s}' target ='_blank'>${s}</a>`,o=n.lastIndex}}return i+=t(o),i}willUnmount(){this.textareaNode=void 0}didMountDisplay(e){this.displayNode=e,re(e).on("touchend",t=>{t.preventDefault()}),re(e).on("dcg-tap dcg-tapstart",t=>{t.target.closest("a")&&Dt(t)}),this.renderDisplayText()}didMountTextarea(e){this.textareaNode=e,re(e).on("dcg-tapstart",t=>{Dt(t)}),re(e).on("focusin focusout",()=>this.onFocusEvent()),this.updateFocused()}didUpdate(){this.updateFocused(),this.renderDisplayText()}onFocusEvent(){if(!this.textareaNode)return;let e=document.activeElement===this.textareaNode;this.props.isFocused()!==e&&this.props.onFocusChange(e)}renderDisplayText(){if(!this.displayNode)return;let e=this.getDisplayTextHTML();this.lastDisplayTextHTML!==e&&(this.lastDisplayTextHTML=e,this.displayNode.innerHTML=e)}isFocused(){return document.activeElement===this.textareaNode}updateFocused(){if(!this.textareaNode)return;let e=this.isFocused(),t=this.props.isFocused();if(e!==t)if(!t)this.textareaNode.blur();else{if(ys&&bc)return;this.textareaNode.focus(),this.textareaNode.selectionStart=this.textareaNode.selectionEnd=this.textareaNode.value.length}}onKeydownEvent(e){let t=this.textareaNode;if(!t)return;let o=Pe(e),i=this.props.readonly(),n=this.props.readonlyAction&&this.props.readonlyAction();if(i&&n!==void 0&&n.predicate()){!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&(o==="Enter"||o==="Space")&&(e.preventDefault(),n.action());return}o==="Enter"&&!e.shiftKey?(e.preventDefault(),this.props.onSpecialKey("Enter")):o==="Esc"?Rr():o==="Up"?(i||t.selectionStart===0&&t.selectionEnd===0)&&!(e.altKey||e.metaKey)&&(e.preventDefault(),this.props.onSpecialKey("Up")):o==="Down"?(i||t.selectionStart===t.value.length&&t.selectionEnd===t.value.length)&&!(e.altKey||e.metaKey)&&(e.preventDefault(),this.props.onSpecialKey("Down")):o==="Backspace"&&!(i&&n!==void 0&&n.predicate())?t.value.length===0&&(e.preventDefault(),this.props.onSpecialKey("Backspace")):o==="Del"&&!(i&&n!==void 0&&n.predicate())&&t.value.length===0&&(e.preventDefault(),this.props.onSpecialKey("Delete")),this.props.onKeydown&&this.props.onKeydown(e)}getPlaceholder(){var e,t;if(!this.props.text())return(t=(e=this.props).placeholder)==null?void 0:t.call(e)}};var Jv=class extends Cn{didMountRoot(e){this.onItemViewMounted(e)}willUnmount(){this.onItemViewUnmounted()}template(){return _("div",{class:()=>({"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-highlighted-expressionitem":this.controller.shouldAddExpressionHighlightedClass(this.id),"dcg-readonly":this.controller.isItemReadonly(this.id),"dcg-expressionfolder":!0,"dcg-inFolder":!1,"dcg-selected":this.renderAsSelected(),"dcg-dragging":!!this.controller.isItemBeingDragged(this.id),"dcg-collapsed":!!this.model.collapsed,"dcg-hidden":!!this.model.hidden,"dcg-has-items":this.controller.getNumberOfItemsInFolder(this.id)>0,"dcg-secretFolder":this.model.secret&&!this.controller.shouldShowAuthorFeatures()}),"expr-id":()=>this.model.id,onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect),didMount:this.bindFn(this.didMountRoot),children:[_("div",{class:u("dcg-fade-container"),children:[_("div",{class:u("dcg-main"),children:[d("button",{"aria-label":()=>this.model.collapsed?Ar(this.model,"expand"):Ar(this.model,"collapse"),class:u("dcg-unstyled-button dcg-caret-container dcg-action-toggle-folder-collapsed dcg-do-not-blur"),handleEvent:u("true"),onTap:this.bindFn(this.toggleCollapsed),children:d("i",{class:u("dcg-icon-caret-down"),"aria-hidden":u("true")})}),d(nd,{isFocused:this.bindFn(this.isFocused),text:()=>this.model.title,showLinks:()=>this.controller.areLinksEnabled(),onInput:this.bindFn(this.onInput),onFocusChange:this.bindFn(this.onFocusChange),onSpecialKey:this.bindFn(this.onSpecialKey),ariaLabel:this.bindFn(this.getAriaLabel),readonly:()=>this.controller.isInEditListMode()||this.controller.isItemReadonly(this.id),readonlyAction:this.const({predicate:()=>this.controller.isInEditListMode(),action:()=>this.exitEditListMode()}),placeholder:()=>this.controller.s("graphing-calculator-text-folder-placeholder")}),d(Xt,{when:()=>this.controller.shouldShowAuthorFeatures(),children:d(tt,{checked:()=>this.model.secret,class:()=>{let e="dcg-action-toggle-secret-folder dcg-do-not-blur";return this.controller.canUseAdvancedStyling()?e:e+" dcg-last-folder-checkbox"},onChange:this.bindFn(this.toggleSecret),children:d("span",{class:u("dcg-checkbox-label"),children:()=>this.controller.s("graphing-calculator-button-hide-folder-from-students-2")})})}),d(Xt,{when:()=>this.controller.canUseAdvancedStyling(),children:d(tt,{checked:()=>this.model.inFrontOfEverything,class:this.const("dcg-action-toggle-in-front-of-everything dcg-do-not-blur dcg-last-folder-checkbox"),onChange:this.bindFn(this.toggleinFrontOfEverything),children:d("span",{class:u("dcg-checkbox-label"),children:()=>this.controller.s("graphing-calculator-button-in-front-of-everything")})})})]}),d(ns,{controller:this.props.controller,model:this.props.model})]}),_("span",{class:u("dcg-tab dcg-action-drag"),handleEvent:u("true"),tapboundary:u("true"),disablescroll:u("true"),onTapStart:this.bindFn(this.onDragPending),children:[d("span",{class:u("dcg-num"),children:()=>this.model.displayIndex}),d("div",{class:u("dcg-tab-interior"),children:d("span",{role:u("button"),tabIndex:u("0"),"aria-pressed":()=>!!this.model.hidden,"aria-label":()=>this.model.hidden?Ar(this.model,"show"):Ar(this.model,"hide"),class:u("dcg-circular-icon-container dcg-expression-icon-container"),onTap:this.bindFn(this.toggleHidden),children:d(ho,{iconType:()=>this.model.hidden?"hidden":"folder",whiteIcon:()=>this.renderAsSelected()||this.controller.isItemBeingDragged(this.model.id)})})})]}),d(rs,{controller:this.props.controller,id:()=>this.model.id})]})}renderAsSelected(){return this.controller.isItemSelected(this.model.id)||this.model.collapsedChildIsSelected}toggleHidden(){this.controller.dispatch({type:"toggle-item-hidden",id:this.id})}toggleSecret(){this.controller.dispatch({type:"set-item-secret",id:this.id,isSecret:!this.model.secret})}toggleinFrontOfEverything(){this.controller.dispatch({type:"set-item-in-front-of-everything",id:this.id,inFrontOfEverything:!this.model.inFrontOfEverything})}toggleCollapsed(){this.controller.dispatch({type:"set-folder-collapsed",id:this.id,isCollapsed:!this.model.collapsed})}onInput(e){this.controller.dispatch({type:"set-folder-title",id:this.id,title:e})}onFocusChange(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"folder",id:this.id}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"folder",id:this.id}})}onSpecialKey(e){return this.controller.dispatch({type:"on-special-key-pressed",key:e})}isFocused(){let e=this.controller.getFocusLocation();return!(!e||e.type!=="folder"||e.id!==this.id)}getAriaLabel(){let e="",t="";switch((this.model.hidden?1:0)+(this.model.collapsed?16:0)+(this.model.secret?256:0)+(this.model.readonly?4096:0)){case 0:t=this.controller.s("graphing-calculator-narration-description-folder");break;case 1:t=this.controller.s("graphing-calculator-narration-description-hidden-folder");break;case 16:t=this.controller.s("graphing-calculator-narration-description-collapsed-folder");break;case 256:t=this.controller.s("graphing-calculator-narration-description-secret-folder");break;case 4096:t=this.controller.s("graphing-calculator-narration-description-readonly-folder");break;case 17:t=this.controller.s("graphing-calculator-narration-description-hidden-collapsed-folder");break;case 257:t=this.controller.s("graphing-calculator-narration-description-hidden-secret-folder");break;case 4097:t=this.controller.s("graphing-calculator-narration-description-hidden-readonly-folder");break;case 272:t=this.controller.s("graphing-calculator-narration-description-collapsed-secret-folder");break;case 4352:t=this.controller.s("graphing-calculator-narration-description-secret-readonly-folder");break;case 4112:t=this.controller.s("graphing-calculator-narration-description-collapsed-readonly-folder");break;case 273:t=this.controller.s("graphing-calculator-narration-description-hidden-collapsed-secret-folder");break;case 4113:t=this.controller.s("graphing-calculator-narration-description-hidden-collapsed-readonly-folder");break;case 4353:t=this.controller.s("graphing-calculator-narration-description-hidden-secret-readonly-folder");break;case 4368:t=this.controller.s("graphing-calculator-narration-description-collapsed-secret-readonly-folder");break;case 4369:t=this.controller.s("graphing-calculator-narration-description-hidden-collapsed-secret-readonly-folder");break}let c=this.controller.getNumberOfItemsInFolder(this.id);return c>0?e=this.controller.s("graphing-calculator-narration-folder-has-items",{folder:t,count:c}):e=t,e}};ce();ie();var NM=__dcg_shared_module_exports__['e'](se());var{For:vY,If:Bhe}=NM.Components,GM=class extends NM.View{init(){this.controller=this.props.controller(),this.currentlyInspectedDepth=1/0,this.cachedTokenDepths={depths:{},isInvalid:!1},this.updateCachedTokenDepthInfo()}willUpdate(){this.updateCachedTokenDepthInfo()}updateCachedTokenDepthInfo(){let e="",t=!1,o=this.controller.getFocusLocation();if(o&&o.type==="expression"){let n=this.controller.getFocusedItem();(n==null?void 0:n.type)==="expression"&&(e=n.id,t=!!n.error&&n.latex!==""||!!n.formula.variables.length)}if(this.cachedTokenDepths.focusedExpressionBeforeError==e&&t){this.cachedTokenDepths.isInvalid=!0;return}this.cachedTokenDepths={depths:this.controller.cachedGeoTokenDepths,isInvalid:!1,focusedExpressionBeforeError:t?void 0:e}}template(){return _("div",{class:()=>({"dcg-geo-show-constructions-pane":!0,"dcg-transient-error":this.cachedTokenDepths.isInvalid,"dcg-cant-drag-item":!!this.controller.getDraggedItemId()&&!this.controller.canDraggedItemBeMovedIntoTokenPane()}),"aria-label":()=>this.controller.s("graphing-calculator-narration-geometry-token-navigator-label"),role:u("region"),didUnmount:()=>this.lastFocusedIdentifier=void 0,onKeyDown:this.bindFn(this.handleKeydown),children:[d(Bhe,{predicate:()=>this.controller.getGeometryTokenCount()===0,children:()=>d("div",{class:u("dcg-empty-constructions"),children:()=>this.controller.s("graphing-calculator-text-geometry-no-constructed-objects")})}),d("div",{class:u("dcg-token-navigator-container"),children:d(vY.Simple,{each:this.bindFn(this.getObjectDepths),children:e=>d("div",{class:()=>({"dcg-displayed-section-level":!0,"dcg-selected-level":parseInt(e)===this.getCurrentlyInspectedDepth(),"dcg-below-the-line":parseInt(e)>this.getCurrentlyInspectedDepth()}),children:d("span",{role:u("listbox"),"aria-label":()=>this.controller.s("graphing-calculator-narration-geometry-token-navigator-depth",{depth:e}),children:d(vY.Count,{count:()=>this.getTokensForDepth(e).length,children:t=>d("span",{class:()=>({"dcg-token-being-dragged-container":this.isTokenBeingDragged(e,t)}),onTapStart:o=>{let i=this.getCalcIdForDepth(e,t),n=this.controller.getItemModel(i);!n||n.type!=="expression"||this.controller.isItemInGeoFolder(n.id)&&this.props.onDragPending(o,{type:"token",calcId:i,originalIndex:n.index})},children:d(Pl,{showParentChildrenHover:this.const(!0),controller:this.props.controller,identifier:()=>this.getIdentifierForDepth(e,t),insideMQ:this.const(!1),insideGroup:this.const(!0),focusLocation:()=>({type:"geo-token",identifier:this.getIdentifierForDepth(e,t)}),putInTabOrder:()=>{if(this.lastFocusedIdentifier===void 0){let o=this.getObjectDepths();this.lastFocusedIdentifier=this.getIdentifierForDepth(o[0],0)}return this.lastFocusedIdentifier===this.getIdentifierForDepth(e,t)}})})})})})})})]})}isTokenBeingDragged(e,t){let o=this.controller.getDraggedItemId();if(!o)return!1;if(this.controller.isItemInGeoFolder(o))return o==this.getCalcIdForDepth(e,t)}getCurrentlyInspectedDepth(){return Math.min(this.currentlyInspectedDepth,this.getObjectDepths().length-1)}getIdentifierForDepth(e,t){let o=this.getTokensForDepth(e)[t];return o?o.identifier:""}getCalcIdForDepth(e,t){let o=this.getTokensForDepth(e)[t];return o?o.calcId:""}getTokensForDepth(e){let{depths:t}=this.cachedTokenDepths,o=t[e];return o||[]}getObjectDepths(){let e=Object.keys(this.cachedTokenDepths.depths);return e.sort((t,o)=>{let i=parseInt(t),n=parseInt(o);return isFinite(i)?isFinite(n)?i-n:1:-1}),e}selectItemIfNecessary(){if(this.controller.hasAnyItemsSelected())return;let e=this.controller.getFocusLocation();if((e==null?void 0:e.type)!=="geo-token")return;let{calcId:t}=this.controller.cachedGeoTokenInfo[e.identifier];!t||!this.controller.getItemModel(t)||this.controller.dispatch({type:"set-selected-id",id:t,state:"selected"})}handleKeydown(e){let t=this.controller.getFocusLocation(),o=Pe(e),i=co(e);if(e.ctrlKey&&e.shiftKey&&!e.altKey&&!e.metaKey&&i==="O"){e.preventDefault(),e.stopPropagation(),this.selectItemIfNecessary(),this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"multi-select-more",guid:th(),focusFirstOption:!0,previousFocusLocation:t}});return}if(e.altKey&&!e.ctrlKey&&!e.metaKey&&e.shiftKey&&i==="T"){if(e.preventDefault(),e.stopPropagation(),(t==null?void 0:t.type)!=="geo-token")return;let{calcId:g}=this.controller.cachedGeoTokenInfo[t.identifier];if(!g)return;let m=this.controller.getItemModel(g);if(!Gi(m))return;this.controller.convertToNamedAssignment(m),ui(m,""),this.controller.dispatch({type:"set-none-selected"}),this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:m.id}});return}if(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return;if(o==="Esc"){e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-show-constructions-open",open:!1,setFocus:!0});return}if(!zn(o,"direction"))return;e.preventDefault(),e.stopPropagation();let n=this.getObjectDepths();if(n.length===0)return;let a="";if(t&&t.type==="geo-token")a=t.identifier;else{let g=this.getTokensForDepth(n[0])[0];if(!g)return;a=g.identifier}if(a==="")return;let s,l=-1,c=[];for(s=0;s<n.length;s++){let g=n[s];if(c=this.getTokensForDepth(g),!!c&&(l=c.findIndex(({identifier:m})=>m===a),l!==-1))break}if(s===-1||l===-1)return;o==="Up"?s=Math.max(s-1,0):o==="Down"?s=Math.min(s+1,n.length-1):o==="Left"?l=Math.max(l-1,0):o==="Right"&&(l=Math.min(l+1,c.length-1));let p=this.getTokensForDepth(n[s]);if(!p)return;l=Math.min(l,p.length-1);let h=p[l].identifier;this.controller.dispatch({type:"set-focus-location",location:{type:"geo-token",identifier:h}}),this.lastFocusedIdentifier=h}};ce();ie();var UM=__dcg_shared_module_exports__['e'](se());var{For:Uhe,If:VM}=UM.Components,BM=class extends UM.View{init(){var e;this.controller=this.props.controller(),this.model=this.props.model(),this.guid=(e=this.controller.getOpenItemMenu())==null?void 0:e.guid}didMountArrow(e){this.arrowElt=e,ra(this.arrowElt,this.controller)}didMount(){qc(this.guid,this.controller)}willUnmount(){Hc(this.guid,this.controller)}didUpdate(){ra(this.arrowElt,this.controller)}template(){let e=this.model;return _("div",{class:u("dcg-image-options-menu dcg-options-menu"),children:[_("div",{class:u("dcg-opacities-menu dcg-options-menu-section"),children:[d("div",{role:u("heading"),"aria-level":u("2"),class:u("dcg-options-menu-section-title"),children:()=>this.controller.s("graphing-calculator-heading-image-opacity")}),d("div",{class:u("dcg-opacities-menu-flex"),role:u("group"),"aria-label":()=>this.controller.s("graphing-calculator-heading-image-opacity"),children:d(Uhe.Simple,{each:()=>this.controller.getImageOpacities(),children:t=>d("span",{class:u("dcg-opacity-option"),role:u("button"),tabIndex:u(0),"aria-label":()=>`opacity: ${t}`,"aria-pressed":()=>this.isOpacitySelected(t),handleEvent:u("true"),onTap:()=>this.onSelectOpacity(t),children:d(ho,{backgroundImage:this.bindFn(this.getBackgroundImage),iconType:()=>this.isOpacitySelected(t)?"check":"none",backgroundOpacity:()=>parseFloat(t)})})})})]}),_("div",{class:u("dcg-styles-div dcg-options-menu-section dcg-section-without-title"),children:[d(VM,{predicate:()=>this.shouldShowBackgroundCheckbox(),children:()=>d("div",{class:u("dcg-styles-menu"),role:u("group"),"aria-label":()=>this.controller.s("graphing-calculator-narration-image-styles"),children:d(tt,{checked:()=>!e.foreground,onChange:this.bindFn(this.onToggleForeground),children:()=>this.controller.s("graphing-calculator-button-place-image-behind-graphs")})})}),d(VM,{predicate:()=>this.shouldShowDraggableCheckbox(),children:()=>d("div",{class:u("dcg-draggable-checkbox-container"),children:d(tt,{checked:()=>ks(e),onChange:this.bindFn(this.onToggleDraggable),children:()=>this.controller.s("graphing-calculator-button-draggable")})})})]}),d(VM,{predicate:this.bindFn(this.shouldShowClickable),children:()=>d(lf,{controller:this.props.controller,model:()=>e,isOpen:()=>!!e.clickableInfo.enabled})}),d(VM,{predicate:()=>CT(this.props.model()),children:()=>d(dp,{class:this.const("dcg-options-menu-section"),controller:this.props.controller,model:this.props.model})}),d(cp,{model:()=>e,controller:()=>this.props.controller()}),d("div",{class:u("dcg-triangle"),didMount:this.bindFn(this.didMountArrow),didUnmount:()=>this.arrowElt=void 0})]})}onToggleDraggable(){om(this.model)?this.controller.dispatch({type:"set-image-draggable",id:this.model.id,draggable:!this.model.draggable}):this.makeDraggable()}onToggleForeground(e){this.controller.dispatch({type:"set-image-in-foreground",id:this.model.id,foreground:!e})}onSelectOpacity(e){this.controller.dispatch({type:"set-image-opacity",id:this.model.id,opacity:e})}isOpacitySelected(e){return this.model.opacity===e}getBackgroundImage(){return this.model.image_url===this.lastURL?this.lastEncodedURL:(this.lastURL=this.model.image_url,this.lastEncodedURL='url("'+GE(this.model.image_url)+'")',this.lastEncodedURL)}shouldShowClickable(){return this.controller.shouldIgnoreGraphInteractions(this.model)?!1:this.controller.areActionsEnabled()}makeDraggable(){this.controller.dispatch({type:"convert-image-to-draggable",id:this.model.id})}shouldShowDraggableCheckbox(){if(this.controller.isThreeDMode()||this.controller.shouldIgnoreGraphInteractions(this.model))return!1;let e=om(this.model);return e?tk(e):T4(this.model)}shouldShowBackgroundCheckbox(){let e=this.controller.getItemModel(this.model.folderId);return!(e&&e.type==="folder"&&e.inFrontOfEverything)}};ce();ie();var zM=__dcg_shared_module_exports__['e'](se());var{If:dG,SwitchUnion:wY,For:zhe}=zM.Components,qhe=["action-info","slider-prompt","braille-error","alt-text"],Eh=class extends zM.View{init(){this.model=this.props.model(),this.controller=this.props.controller()}template(){return d(Ut,{containerClass:()=>({"dcg-image-input-mathquill":!0,"dcg-suffix-degree":this.props.name()==="angle"&&this.props.controller().getGraphSettings().degreeMode,"dcg-suffix-radian":this.props.name()==="angle"&&!this.props.controller().getGraphSettings().degreeMode}),fontSize:this.const("large"),fullWidth:this.const(!0),readonly:this.props.readonly,latex:()=>this.model[this.props.name()],isFocused:()=>this.props.focusedInput()===this.props.name(),ariaLabel:()=>this.controller.raw(this.props.name()),handleFocusChanged:this.bindFn(this.handleMQFocusedChanged),hasError:()=>_4(this.model,this.props.name()),controller:this.props.controller,handlePressedKey:this.bindFn(this.handlePressedKey),handleLatexChanged:this.bindFn(this.handleLatexChanged),noBorder:()=>!this.props.focusedInput()})}getInputs(){return["center","width","angle","height","opacity"]}handlePressedKey(e,t){let o=this.props.name(),i=qe.getFocusedMathquill(),n=this.getInputs(),a=n.indexOf(o);if(!this.controller.isInEditListMode()){if(e==="Enter")return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});if(e==="Esc"){Rr();return}}let s=-1;e==="Up"&&(s=a===1?4:a-2),e==="Down"&&(s=a===4?1:a+2),e==="Left"&&(s=a-1),e==="Right"&&(s=a+1);let l=e;if(s>=0&&s<n.length){let c=!1;if(i)c=qe.applyArrowKeyAndReturnIfWasAtBounds(i,l,t);else if(e==="Up"||e==="Down")c=!0;else{let p=Qn();c=p&&(e==="Left"&&p.selectionStart===0||e==="Right"&&p.selectionStart===p.value.length)}c&&(this.focusInput(n[s]),t&&t.preventDefault());return}i&&(i.keystroke(e,t),this.handleLatexChanged(i.latex()))}focusInput(e){this.controller.dispatch({type:"set-focus-location",location:{type:"image",id:this.model.id,location:e}})}handleLatexChanged(e){let t=this.props.name();this.model.draggingOnGraphpaper||Vy(this.model,t)!==e&&this.controller.dispatch({type:"set-image-mq-attribute",id:this.model.id,attribute:t,latex:e})}handleMQFocusedChanged(e){let t=this.props.name();e?this.props.focusedInput()!==t&&this.controller.dispatch({type:"set-focus-location",location:{type:"image",id:this.model.id,location:t}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"image",id:this.model.id,location:t}})}},Zv=class extends Cn{didMountRoot(e){this.onItemViewMounted(e)}willUnmount(){this.onItemViewUnmounted()}template(){return _("div",{class:()=>({"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-highlighted-expressionitem":this.controller.shouldAddExpressionHighlightedClass(this.id),"dcg-readonly":this.controller.isItemReadonly(this.id),"dcg-expressionimage":!0,"dcg-inFolder":!!this.model.folderId,"dcg-selected":this.controller.isItemSelected(this.id),"dcg-dragging":!!this.controller.isItemBeingDragged(this.id),"dcg-input-focused":this.getFocusedInput()&&this.getFocusedInput()!=="name"}),"expr-id":()=>this.model.id,onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect),didMount:this.bindFn(this.didMountRoot),children:[_("div",{class:u("dcg-fade-container"),children:[d("div",{class:u("dcg-main"),children:wY(()=>this.model.loadStatus,{failed:()=>_("div",{children:[d("div",{class:u("dcg-image-failed"),children:()=>this.controller.s("graphing-calculator-error-failed-to-load-image")}),d("div",{role:u("button"),tabIndex:u(0),class:u("dcg-retry-loading-image"),onTap:this.bindFn(this.onRetryLoad),children:()=>this.controller.s("graphing-calculator-button-load-image-retry")})]}),loading:()=>_("div",{children:[d("div",{class:u("dcg-image-loading"),children:()=>this.controller.s("graphing-calculator-text-loading-image")}),d("div",{role:u("button"),tabIndex:u(0),class:u("dcg-retry-loading-image"),onTap:this.bindFn(this.onRetryLoad),children:()=>this.controller.s("graphing-calculator-button-load-image-retry")})]}),loaded:()=>_("div",{class:u("dcg-image-loaded"),children:[_("div",{class:u("dcg-image-title-row"),children:[d(nd,{isFocused:()=>this.getFocusedInput()==="name",text:()=>this.model.name,ariaLabel:()=>Ar(this.model,"edit_title"),placeholder:()=>this.controller.s("graphing-calculator-text-image-placeholder"),showLinks:()=>this.controller.areLinksEnabled(),onInput:this.bindFn(this.onNameInput),onFocusChange:this.bindFn(this.onNameFocusChange),onSpecialKey:this.bindFn(this.onNameSpecialKey),readonly:()=>this.controller.isInEditListMode()||this.isReadonly()}),d(dG,{predicate:()=>this.controller.areImagesEnabled(),children:()=>d(zc,{controller:()=>this.controller,ariaLabel:()=>this.controller.s("graphing-calculator-button-change-image"),onFileChange:e=>this.insertFiles(e),location:this.const({type:"change-image-btn",id:this.id}),readonly:this.bindFn(this.isReadonly),children:d(dG,{predicate:()=>!this.isReadonly(),children:()=>d("div",{class:u("dcg-action-changeimage"),children:()=>this.controller.s("graphing-calculator-button-change-image")})})})})]}),_("div",{class:()=>({"dcg-do-blur":!0,"dcg-image-input-grid":!0}),handleEvent:u("true"),children:[d("div",{class:u("dcg-image-input-name"),children:()=>this.controller.s("graphing-calculator-label-image-center")}),d(Eh,{name:this.const("center"),controller:()=>this.controller,model:()=>this.model,focusedInput:this.bindFn(this.getFocusedInput),readonly:this.bindFn(this.isReadonly)}),d("div",{class:u("dcg-image-input-name"),children:()=>this.controller.s("graphing-calculator-label-image-width")}),d(Eh,{name:this.const("width"),controller:()=>this.controller,model:()=>this.model,focusedInput:this.bindFn(this.getFocusedInput),readonly:this.bindFn(this.isReadonly)}),d("div",{class:u("dcg-image-input-name"),children:()=>this.controller.s("graphing-calculator-label-image-angle")}),d(Eh,{name:this.const("angle"),controller:()=>this.controller,model:()=>this.model,focusedInput:this.bindFn(this.getFocusedInput),readonly:this.bindFn(this.isReadonly)}),d("div",{class:u("dcg-image-input-name"),children:()=>this.controller.s("graphing-calculator-label-image-height")}),d(Eh,{name:this.const("height"),controller:()=>this.controller,model:()=>this.model,focusedInput:this.bindFn(this.getFocusedInput),readonly:this.bindFn(this.isReadonly)}),d("div",{class:u("dcg-image-input-name"),children:()=>this.controller.s("graphing-calculator-label-image-opacity")}),d(Eh,{name:this.const("opacity"),controller:()=>this.controller,model:()=>this.model,focusedInput:this.bindFn(this.getFocusedInput),readonly:this.bindFn(this.isReadonly)})]})]})})}),d("span",{class:u("dcg-fadeout")}),d(ns,{controller:this.props.controller,model:this.props.model}),d(dG,{predicate:()=>this.getFooterComponents().length>0,children:()=>d("div",{class:this.getFooterClass(),children:d(zhe.Simple,{each:()=>this.getFooterComponents(),children:e=>wY(()=>e,{"action-info":()=>d(Nu,{model:this.props.model,controller:this.props.controller}),"alt-text":()=>d(Jm,{model:this.props.model,controller:this.props.controller}),"braille-error":()=>_("div",{role:u("note"),tabIndex:u("0"),class:u("dcg-expression-braille-error"),children:[d("i",{class:u("dcg-icon-error"),"aria-hidden":u("true")}),()=>this.controller.unpack(this.model.error)]}),"slider-prompt":()=>d(_n,{model:this.props.model,controller:this.props.controller})})})})})]}),_("span",{class:u("dcg-tab dcg-action-drag dcg-action-icon-touch"),handleEvent:u("true"),tapboundary:u("true"),disablescroll:u("true"),onTapStart:this.bindFn(this.onDragPending),children:[d("span",{class:u("dcg-num"),children:()=>this.model.displayIndex}),d("div",{class:u("dcg-tab-interior dcg-action-icon-mouse"),children:d(Yu,{model:this.props.model,controller:this.props.controller})})]}),d(rs,{controller:this.props.controller,id:()=>this.model.id})]})}getFooterComponents(){return qhe.filter(e=>this.hasFooterComponent(e))}hasFooterComponent(e){switch(e){case"action-info":return this.controller.shouldShowActionInfo(this.model.id);case"alt-text":return this.controller.shouldShowAltTextInFooter(this.model);case"braille-error":return this.shouldShowBrailleError();case"slider-prompt":return sT(this.model).length>0&&this.controller.areSlidersEnabled();default:let t=e;throw new Error(`Unexpected footer type ${t}`)}}isReadonly(){return this.controller.isItemReadonly(this.id)}getFooterClass(){return this.isFirstRender()?this.const("dcg-expression-bottom dcg-indent-in-folder"):this.const("dcg-expression-bottom dcg-fadein-bottom dcg-indent-in-folder")}onNameInput(e){this.controller.dispatch({type:"set-image-name",id:this.id,name:e})}onNameFocusChange(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"image",id:this.id,location:"name"}}):this.getFocusedInput()==="name"&&this.controller.dispatch({type:"blur-focus-location",location:{type:"image",id:this.id,location:"name"}})}onNameSpecialKey(e){return this.controller.dispatch({type:"on-special-key-pressed",key:e})}getFocusedInput(){let e=this.controller.getFocusLocation();if(e&&e.type==="image"&&e.id===this.model.id)return e.location}onRetryLoad(){this.controller.dispatch({type:"image-retry-loading",id:this.id})}shouldShowBrailleError(){return this.controller.getBrailleMode()!=="none"&&!!this.model.error}insertFiles(e){this.controller.dispatch({type:"change-image",files:e,id:this.id})}onMouseSelect(e){e.type==="dcg-tap"&&e.device==="mouse"||e.type==="dcg-tapstart"&&e.device==="touch"||Or(e)||(Dt(e),this.controller.dispatch({type:"set-selected-id",id:this.id,state:"selected"}))}};ce();ie();var pG=__dcg_shared_module_exports__['e'](se());Vt();var Hhe="dcg-inference-footer--chi-square-popover",Qv=class extends pG.View{constructor(){super(...arguments),this.model=this.props.model(),this.controller=this.props.controller()}copyValueToList(){let e=this.model.index;e!==void 0&&this.controller.dispatch({type:"export-latex-to-explist",latex:Jk(this.props.value(),7),indexToInsert:e+1,folderId:this.model.folderId})}getLabel(){return this.controller.s(Uc(this.props.type()))}isErrored(){let e=this.props.value();return e===void 0||isNaN(e)}template(){return d(Uu,{controller:this.props.controller,evaluationFocusLocation:()=>({type:"chi-square-table-dropdown",id:this.model.id,subtype:"exportable-evaluation",item:this.props.type()}),exportFocusLocation:()=>({type:"chi-square-table-dropdown",id:this.model.id,item:this.props.type(),subtype:"exportable-evaluation-export-button"}),doExportOrCopy:this.bindFn(this.copyValueToList),outputLatex:()=>this.isErrored()?"undefined":Jk(this.props.value(),7),label:this.bindFn(this.getLabel)})}},qM=class extends pG.View{constructor(){super(...arguments),this.controller=this.props.controller(),this.guid=this.props.guid(),this.focusHelper=new Ol({anchorSelector:`.dcg-popover-with-anchor__anchor--${this.guid}`,focusTrappingBodySelector:".dcg-inference-footer--chi-square-popover",isOpen:()=>this.controller.isPopoverOpen(this.guid),closeMenu:()=>this.controller.dispatch({type:"set-popover-open",guid:this.guid,open:!1}),itemNavigationKey:"tab"})}getModelId(){return this.guid.split("-").slice(-3)[0]}getRowColumn(){return this.guid.split("-").slice(-2).map(e=>Number(e))}closePopover(){return this.controller.dispatch({type:"set-popover-open",guid:this.guid,open:!1})}getTableCellEl(){let[e,t]=this.getRowColumn();if(!(e===void 0||t===void 0))return this.controller.findEl(`[expr-id="${this.getModelId()}"] [dcg-row="${e}"] [dcg-col="${t}"]`)}getHorizontalScrollContainer(){return this.controller.findEl(`[expr-id="${this.getModelId()}"] .dcg-inference-footer--chi-square-test-of-independence-table`)}getVerticalScrollContainer(){return this.controller.findEl(".dcg-exppanel")}didUpdate(){var t,o,i,n;let e={x:(o=(t=this.getHorizontalScrollContainer())==null?void 0:t.scrollLeft)!=null?o:NaN,y:(n=(i=this.getVerticalScrollContainer())==null?void 0:i.scrollTop)!=null?n:NaN};this._lastScrollPositions&&!__dcg_shared_module_exports__['s'](e,this._lastScrollPositions)&&this.controller.runAfterDispatch(()=>{this.closePopover()}),this._lastScrollPositions=e}getPopoverStyle(){var a;let[e,t]=this.getRowColumn();if(e===void 0||t===void 0)return;let o=this.getTableCellEl(),i=o==null?void 0:o.getBoundingClientRect(),n=(a=o==null?void 0:o.closest(".dcg-container"))==null?void 0:a.getBoundingClientRect();return!i||!n?{}:{top:`${i.bottom-n.top-9}px`,right:`${n.right-i.right+gO-3}px`}}didMountPopover(e){let t=this.getModelId(),[o,i]=this.getRowColumn();if(!t||o===void 0||i===void 0)return;re(document.body).on(`dcg-tapstart.${this.guid}`,a=>{if(!a.target.closest(`[expr-id="${t}"] [dcg-row="${o}"] [dcg-col="${i}"]`)&&this.controller.getOpenPopoverGuid()===this.guid){let s=this.controller.findEl(".dcg-inference-footer--chi-square-popover");if(!s||s&&re.contains(s,a.target))return;let l=s.getBoundingClientRect();if(a.clientX!==void 0&&a.clientY!==void 0&&a.clientX>l.left&&a.clientX<l.right&&a.clientY>l.top&&a.clientY<l.bottom)return;this.closePopover();return}});let n=this.getTableCellEl();n&&n.addEventListener("keydown",this.focusHelper.handleKeydown),e.addEventListener("keydown",this.focusHelper.handleKeydown)}didUnmount(){re(document.body).off(`dcg-tapstart.${this.guid}`);let e=this.getTableCellEl();e&&e.removeEventListener("keydown",this.focusHelper.handleKeydown)}getModel(){let e=this.getModelId(),t=this.controller.getItemModel(e);if((t==null?void 0:t.type)==="expression")return t}getChiSquarePopoverBody(){let[e,t]=this.getRowColumn(),o=this.getModel();if(o===void 0||e===void 0||t===void 0)return;let i={controller:this.props.controller,model:()=>o};return _("ul",{class:u("dcg-expressionitem dcg-unstyled-list dcg-inference-footer--values-table dcg-chi-square--dropdown-body dcg-exportable-evaluation--popover"),children:[d("li",{children:d(Qv,{...i,type:this.const("observed"),value:()=>{var n;return(n=ip(o,"observed",e,t))!=null?n:NaN}})}),d("li",{children:d(Qv,{...i,type:this.const("expected"),value:()=>{var n;return(n=ip(o,"expected",e,t))!=null?n:NaN}})}),d("li",{children:d(Qv,{...i,type:this.const("contribution"),value:()=>{var n;return(n=ip(o,"contribution",e,t))!=null?n:NaN}})})]})}template(){return d(Ix,{style:()=>this.getPopoverStyle(),popoverBody:this.bindFn(this.getChiSquarePopoverBody),position:this.const("bottom-right"),className:this.const(Hhe),didMount:e=>this.didMountPopover(e)})}};ce();ie();var RY=__dcg_shared_module_exports__['e'](se());WS();function SY(r){let e=[],t=r.getAllItemModels();for(let o of t){let i=r.getItemRootNodeById(o.id);i&&e.push(i)}return e}function Khe(r){let e=r.getAllItemModels();for(let t=e.length-1;t>=0;t--){let o=e[t];if(o.rootViewNode)return o.id}}function TY(r,e){let t=SY(r),o=0,i=t.length-1;for(;o<=i;){let n=o+Math.floor((i-o)/2),a=t[n],s=a.getBoundingClientRect();if(s.top>e)i=n-1;else if(s.bottom<e)o=n+1;else return a}}function Whe(r,e){let t=SY(r),o=0,i=t.length-1,n;for(;o<=i;){let a=o+Math.floor((i-o)/2),s=t[a];s.getBoundingClientRect().top>e?(i=a-1,n=s):o=a+1}return n}function kY(r,e){let t=Ih(r);if(!t)return;if(e){let i=r.getItemRootNodeById(e);if(i){let n=i.getBoundingClientRect();if(n.height>0&&n.top<=t.top&&n.bottom>=t.top)return e}}let o=TY(r,t.top);return o?o.getAttribute("expr-id"):uG(r)}function EY(r,e){let t=Ih(r);if(!t)return;let o=Khe(r);if(!o)return;if(e){let n=r.getItemRootNodeById(e);if(n){let a=n.getBoundingClientRect();if(a.height>0&&a.top<=t.bottom&&a.bottom>=t.bottom||e===o&&a.bottom<=t.bottom)return e}}let i=TY(r,t.bottom);return i&&i.getAttribute("expr-id")||o}function uG(r){let e=Ih(r);if(!e)return;let t=Whe(r,e.top-2);if(t)return t.getAttribute("expr-id")}function ew(r){return r.findEl(".dcg-exppanel")}function Ih(r){let e=ew(r);if(e)return e.getBoundingClientRect()}function $he(r){return r.findEl(".dcg-exppanel-outer")}function IY(r){let e=$he(r);if(e)return e.getBoundingClientRect()}function CY(r){let e=r.findEl(".dcg-exppanel-container");if(!e)return;let t=e.getBoundingClientRect(),o=e.scrollTop;return t.top-o}function _Y(r){let e=r.findEl(".dcg-expressionlist");if(!e)return;let t=e.getBoundingClientRect();return{width:t.width,height:t.height}}function MY(r){let e=ew(r);if(!e)return;let t=e.querySelector(".dcg-drag-container > *");if(!t)return;let o=t.getBoundingClientRect();return{width:o.width,height:o.height}}ce();ie();var HM=__dcg_shared_module_exports__['e'](se());var{If:AY,IfDefined:jhe,For:gG}=HM.Components,tw=class extends HM.View{constructor(){super(...arguments),this.controller=this.props.controller(),this.keyboardNavigationHelper=new Fl({controller:this.controller,getCellPosition:()=>this.getCellPosition(),getColumnHeader:()=>"",getLastColumnIndex:()=>this.getColumnCount()-1,getLastRowIndex:()=>this.getRowCount()-1,setFocusLocation:({row:e,column:t})=>{this.controller.dispatch({type:"set-focus-location",location:{type:"add-inference-wizard",subtype:"chi-square-wizard-table",row:e,column:t}})},wrapAtEdges:!1,isEditable:!0,isColumnDisabled:()=>!1,removeRow:e=>this.controller.wizardModel.removeChiSquareTableRow(e),removeColumn:e=>this.controller.wizardModel.removeChiSquareTableColumn(e)})}useRowHeaders(){return this.props.inferenceType()==="chisqtest"}getCellPosition(){let e=this.controller.getFocusLocation();return(e==null?void 0:e.type)!=="add-inference-wizard"||(e==null?void 0:e.subtype)!=="chi-square-wizard-table"?{row:0,column:0}:e}getColumnCount(){return this.controller.wizardModel.getChiSquareTableColumnCount()}getRowCount(){return this.controller.wizardModel.getChiSquareTableRowCount()}getCellContent(e,t){return this.controller.wizardModel.getChiSquareTableCellLatex(e,t)}isColumnFaded(e){return this.controller.wizardModel.isChiSquareTableColumnFaded(e)}isRowFaded(e){return this.controller.wizardModel.isChiSquareTableRowFaded(e)}handleLatexChanged(e){let{row:t,column:o}=this.getCellPosition();this.getCellContent(t,o)!==e&&this.controller.dispatch({type:"set-inference-wizard-chi-square-table-cell",row:t,column:o,latex:e})}getRowName(e){return this.isRowFaded(e)?"":this.controller.s("graphing-calculator-label-inference-group",{index:String.fromCharCode(64+e+1)})}getColumnName(e){if(this.props.inferenceType()==="chisqgof")switch(e){case 0:return this.controller.s("graphing-calculator-label-inference-observed");case 1:return this.controller.s("graphing-calculator-label-inference-expected-optional");default:return""}return this.isColumnFaded(e)?"":this.controller.s("graphing-calculator-label-inference-group",{index:e+1})}getGridTemplates(){let e=this.getRowCount()+1;return`--dcg-column-count: ${this.getColumnCount()+(this.useRowHeaders()?1:0)}; --dcg-row-count: ${e}`}getCellError(e,t){return this.controller.wizardModel.getChiSquareTableCellError(e,t)}cellHasError(e,t){return!!this.getCellError(e,t)}hasInvalidProp(){return!this.controller.wizardModel.canSumbitChiSquare()}doAddInference(){if(!this.hasInvalidProp())return this.controller.dispatch({type:"new-inference"})}possiblyHandleSpecialkey(e,t){let o=e?Pe(e):t;if(o===ri){this.controller.dispatch({type:"set-focus-location",location:{type:"add-inference-wizard",subtype:"back-button"}}),e==null||e.stopPropagation(),e==null||e.preventDefault();return}if(o===ll){if(this.hasInvalidProp())return o;let i=this.getCellPosition();if(i.row===this.controller.wizardModel.getChiSquareTableMaxRowCount()-1||this.isRowFaded(i.row)){this.doAddInference(),e==null||e.stopPropagation(),e==null||e.preventDefault();return}}if(!this.keyboardNavigationHelper.handleHotKey(e))return o}handleKeydownOnBrailleInput(e){let t=this.possiblyHandleSpecialkey(e);if(!t)return;let o=t===ll||t===en||t===wi,i=Qn(),n=i&&t===va&&i.selectionStart===0||t===wa&&i.selectionStart===i.value.length;(o||n||(t===d0||t===_g)&&i.value.length===0)&&this.keyboardNavigationHelper.handleKeyPress(t,e)}handleEditableMathquillKey(e,t){if(!this.possiblyHandleSpecialkey(t,e))return;let o=qe.getFocusedMathquill();return o&&e?qe.handleKeystrokeAndDecideIfSpecialEvent(o,e,t)||e===ri?this.keyboardNavigationHelper.handleKeyPress(e,t):(this.handleLatexChanged(o.latex()),!0):!1}getFocusLocationForCell(e,t){return{type:"add-inference-wizard",subtype:"chi-square-wizard-table",row:e,column:t}}isCellFocused(e,t){return this.controller.isFocusLocationFocused(this.getFocusLocationForCell(e,t))}onCellFocusedChanged(e,t,o,i){let n=this.getFocusLocationForCell(o,i);t?this.controller.dispatch({type:"set-focus-location",location:n}):this.isNodeWithinTableCell(e.relatedTarget)||this.controller.dispatch({type:"blur-focus-location",location:n})}isNodeWithinTableCell(e){return!e||!this.rootNode.contains(e)?!1:!!e.closest(".dcg-table--cell")}maybeScrollFocusedCellIntoView(){var o;let e=this.controller.getFocusLocation();if((e==null?void 0:e.type)!=="add-inference-wizard"||e.subtype!=="chi-square-wizard-table"){this.focusInfoLastFrame=void 0;return}let t={row:e.row,column:e.column,latex:this.getCellContent(e.row,e.column)};if(!__dcg_shared_module_exports__['s'](t,this.focusInfoLastFrame)){this.focusInfoLastFrame=t;let i=(o=document.activeElement)==null?void 0:o.closest(".dcg-table--cell"),n=this.rootNode.closest(".dcg-wizard-interior-scrollable");i&&this.rootNode.contains(i)&&n&&(ta(i,n,40),eE(i,this.horizontalScrollNode,40))}}didUpdate(){this.maybeScrollFocusedCellIntoView()}template(){return _("div",{class:()=>({"dcg-add-inference-wizard__chi-square":!0,"dcg-add-inference-wizard__chi-square--independence":this.props.inferenceType()==="chisqtest","dcg-add-inference-wizard__chi-square--gof":this.props.inferenceType()==="chisqgof"}),didMount:e=>this.rootNode=e,children:[d(ap,{controller:this.props.controller}),_("div",{class:u("dcg-add-inference-wizard--body"),didMount:e=>this.horizontalScrollNode=e,children:[d("div",{class:u("dcg-table--wrapper"),children:_("div",{class:()=>({"dcg-table":!0,"dcg-table--fade-last-row":this.isRowFaded(this.getRowCount()-1),"dcg-table--fade-last-column":this.isColumnFaded(this.getColumnCount()-1)}),role:u("grid"),style:this.bindFn(this.getGridTemplates),children:[d("div",{class:u("dcg-display--contents"),role:u("rowgroup"),children:_("div",{class:u("dcg-display--contents"),role:u("row"),children:[d(AY,{predicate:this.bindFn(this.useRowHeaders),children:()=>d("div",{class:u("dcg-table--cell dcg-table--col-header"),role:u("columnheader")})}),d(gG.Count,{count:this.bindFn(this.getColumnCount),children:e=>d("div",{class:u("dcg-table--cell dcg-table--col-header"),role:u("columnheader"),index:this.const(e),children:d("div",{class:u("dcg-table--cell-interior"),children:()=>this.getColumnName(e)})})})]})}),d("div",{class:u("dcg-display--contents"),role:u("rowgroup"),children:d(gG.Count,{count:this.bindFn(this.getRowCount),children:e=>_("div",{class:u("dcg-display--contents"),role:u("row"),children:[d(AY,{predicate:this.bindFn(this.useRowHeaders),children:()=>d("div",{class:u("dcg-table--cell dcg-table--row-header"),role:u("rowheader"),children:d("div",{class:u("dcg-table--cell-interior"),children:()=>this.getRowName(e)})})}),d(gG.Count,{count:()=>this.getColumnCount(),children:t=>d("div",{class:()=>({"dcg-table--cell":!0,"dcg-invalid":this.cellHasError(e,t)}),role:u("gridcell"),children:d(ir,{latex:()=>this.getCellContent(e,t),selectOnFocus:this.const(!0),onUserChangedLatex:this.bindFn(this.handleLatexChanged),onKeydown:this.bindFn(this.handleKeydownOnBrailleInput),onUserPressedKey:this.bindFn(this.handleEditableMathquillKey),...Wr(this.props.controller()),noFadeout:this.const(!0),getAriaPostLabel:()=>this.cellHasError(e,t)?this.controller.s("shared-calculator-narration-math-input-error-message"):"",hasError:()=>this.cellHasError(e,t),ariaLabel:this.const(" "),isFocused:()=>this.isCellFocused(e,t),onFocusedChanged:(o,i)=>this.onCellFocusedChanged(i,o,e,t)})})})]})})})]})}),jhe(()=>this.controller.wizardModel.getFullLatexWarning(),e=>d(zu,{controller:this.props.controller,warning:()=>({type:"evaluation",message:this.controller.unpack(e()),learnMoreWirtinger:!1})}))]}),d(np,{controller:this.props.controller,disabled:()=>this.hasInvalidProp(),onCreate:()=>this.doAddInference(),buttonLabel:()=>this.controller.s("graphing-calculator-narration-inference-wizard-create-inference")})]})}};ce();ie();var DY=__dcg_shared_module_exports__['e'](se());ce();ie();var jM=__dcg_shared_module_exports__['e'](se());Vt();ce();ie();var $M=__dcg_shared_module_exports__['e'](se());var{For:LY,If:KM,IfDefined:Yhe,Switch:Xhe}=$M.Components,WM=class extends $M.View{template(){var e,t;return _("div",{role:u("list"),class:()=>{var o,i;return{"dcg-shared-options-dropdown":!0,[((i=(o=this.props).class)==null?void 0:i.call(o))||""]:!!this.props.class}},children:[d(LY,{each:this.props.options,children:o=>{let i=o();return _("div",{role:u("listitem"),class:u("dropdown-option-container"),children:[d(Xhe,{children:n=>"href"in n?_("a",{"aria-disabled":()=>n.disabled,"aria-selected":()=>{var a;return(a=n.selected)==null?void 0:a.call(n)},id:this.const(n.key),tabIndex:()=>this.getTabIndex(n),class:()=>{var a;return{[n.class||""]:!!n.class,"dcg-standard-link-styling":!n.class,"dcg-dropdown-choice":!0,"dcg-disabled":n.disabled,"dcg-selected":(a=n.selected)==null?void 0:a.call(n)}},onTap:a=>!n.disabled&&this.props.onTap(n,a),ignoreRealClick:()=>!!n.action,href:()=>n.href,target:()=>n.target!==void 0?n.target:"",rel:()=>n.noreferrer?"noreferrer noopener":"",children:[d(KM,{predicate:()=>n.icon!=null,children:()=>d("div",{class:u("dcg-option-icon-container"),children:d("i",{"aria-hidden":u("true"),class:()=>`${n.icon} dcg-option-icon`})})}),d(Ir,{content:n.title,controller:this.props.controller})]}):_("div",{role:u("link"),tabIndex:()=>this.getTabIndex(n),"aria-disabled":()=>n.disabled,"aria-selected":()=>{var a;return(a=n.selected)==null?void 0:a.call(n)},id:this.const(n.key),class:()=>{var a;return{[n.class||""]:!!n.class,"dcg-standard-link-styling":!n.class,"dcg-dropdown-choice":!0,"dcg-disabled":n.disabled,"dcg-selected":(a=n.selected)==null?void 0:a.call(n)}},onTap:a=>!n.disabled&&this.props.onTap(n,a),children:[d(KM,{predicate:()=>n.icon!=null,children:()=>d("div",{class:u("dcg-option-icon-container"),children:d("i",{"aria-hidden":u("true"),class:()=>`${n.icon} dcg-option-icon`})})}),d("span",{class:u("option-title"),children:d(Ir,{content:n.title,controller:this.props.controller})}),Yhe(()=>n.subtitle&&n.subtitle(),a=>d("span",{class:u("dcg-option-subtitle"),children:a}))]})},()=>i),d(KM,{predicate:()=>!!i.explanations,children:()=>d("div",{class:u("dcg-dropdown-explanations"),children:d(LY,{each:()=>i.explanations||[],children:n=>_("div",{class:u("dcg-explanation"),children:[()=>n().explanation," ",d(KM,{predicate:()=>!!n().link,children:()=>d("a",{class:u("learn-more"),href:()=>n().link!==void 0?n().link:"",target:u("_blank"),children:()=>n().linkText?n().linkText:ko("shared-button-learn-more-capitalized")})})]})},n=>n.flag)})})]})}},o=>`${o.key?o.key:o.title()}${o.disabled?"-disabled":""}`),(t=(e=this.props).buildFooter)==null?void 0:t.call(e)]})}getTabIndex(e){var t;return e.disabled&&!((t=e.selected)!=null&&t.call(e))?-1:0}};var{If:Jhe,IfElse:Zhe}=jM.Components,Ch=class extends jM.View{init(){var e,t;this.i18n=this.props.controller(),this.filter=(t=(e=this.props).defaultValue)==null?void 0:t.call(e),this.shouldShowResults=!1,this.uuid=Al(),this.focusHelper=new Ol({anchorSelector:`#dcg-select-dropdown-container-${this.props.id()} .dcg-dropdown-input`,focusTrappingBodySelector:`#dcg-select-dropdown-container-${this.props.id()} .dcg-select-dropdown-list`,isOpen:()=>this.isOpen(),closeMenu:()=>this.setResultsOpen(!1),itemNavigationKey:"arrow"})}handleKeyDown(e){var t;switch(Pe(e)){case wi:if(!this.isOpen()){this.setResultsOpen(!0),e.preventDefault();return}break;case xa:if(this.isOpen()){let o=this.focusHelper.getFocusedElement();o&&(this.selectOptionById((t=o.getAttribute("id"))!=null?t:void 0),e.preventDefault());return}break}this.focusHelper.handleKeydown(e)}template(){return _("div",{class:u("dcg-select-dropdown-container"),onKeyDown:this.bindFn(this.handleKeyDown),didMount:this.bindFn(this.attachTapListener),didUnmount:this.bindFn(this.unmountTapListener),id:()=>`dcg-select-dropdown-container-${this.props.id()}`,children:[_("button",{class:()=>({"dcg-dropdown-input":!0,"dcg-results-hidden":!this.isOpen()}),"aria-haspopup":this.const("listbox"),"aria-expanded":()=>this.isOpen(),onTap:this.bindFn(this.toggleResultsOpen),didMount:e=>{var t,o;(o=(t=this.props).focusOnMount)!=null&&o.call(t)&&e.focus()},id:this.props.id,manageFocus:()=>{var e,t;return(t=(e=this.props).manageFocus)==null?void 0:t.call(e)},children:[d(Ir,{content:this.bindFn(this.getFilterString),controller:this.props.controller}),Zhe(()=>this.isOpen(),{true:()=>d("i",{class:u("dcg-icon-caret-up dcg-open-options"),"aria-label":()=>this.i18n.s("shared-calculator-button-hide-options")}),false:()=>d("i",{class:u("dcg-icon-caret-down dcg-open-options"),"aria-label":()=>this.i18n.s("shared-calculator-button-show-options")})})]}),d(Jhe,{predicate:()=>this.isOpen(),children:()=>d("div",{class:()=>{var e,t;return{"dcg-options-dropdown__container":!0,"dcg-options-dropdown__padded-bottom-container":(t=(e=this.props).addBottomPaddingToDropdown)==null?void 0:t.call(e)}},children:d(WM,{options:()=>this.getOptions(),onTap:e=>this.selectOptionById(e.key),class:this.const("dcg-select-dropdown-list"),buildFooter:this.props.buildFooter,controller:this.props.controller})})})]})}getOptions(){return this.props.options().map(e=>({key:e.id,title:()=>e.label,selected:()=>e.label===this.getFilterString(),disabled:e.disabled,class:e.class||"dcg-select-dropdown-option"}))}isOpen(){return!!this.shouldShowResults}setResultsOpen(e){var t,o;if(this.shouldShowResults=e,this.update(),(o=(t=this.props).onOpenChange)==null||o.call(t,e),e)if(this.filter){let i=this.props.options().find(n=>n.id===this.filter);this.focusOption(i)}else if(this.props.externalControl){let i=this.props.externalControl().getValue(),n=this.props.options().find(a=>a.id===i);this.focusOption(n)}else this.focusHelper.focusFirstItem()}toggleResultsOpen(){this.setResultsOpen(!this.shouldShowResults)}focusOption(e){if(!e)return;let t=document.querySelector(`#dcg-select-dropdown-container-${this.props.id()} .dcg-select-dropdown-list #${e.id}`);t==null||t.focus()}onInputChange(e){this.props.externalControl?this.props.externalControl().onValueChange(e):this.filter=e,this.update()}getFilterString(){let t=this.props.options().find(o=>o.id===(this.props.externalControl?this.props.externalControl().getValue():this.filter));return(t==null?void 0:t.label)||""}selectOptionById(e){var i,n,a,s;let o=this.props.options().find(l=>l.id===e);o&&(this.onInputChange(o.id),this.setResultsOpen(!1),(n=(i=this.props).dontFocusAnchorOnSelect)!=null&&n.call(i)||this.focusHelper.focusAnchor(),(s=(a=this.props).onChange)==null||s.call(a,o.id))}unmountTapListener(){re(document.body).off(`dcg-tapstart.dcg-select-dropdown-container-${this.uuid}`)}attachTapListener(){re(document.body).on(`dcg-tapstart.dcg-select-dropdown-container-${this.uuid}`,this.bindFn(this.tapListener))}tapListener(e){e.target.closest(`#dcg-select-dropdown-container-${this.props.id()}`)||this.setResultsOpen(!1)}};var PY=Object.keys(__dcg_shared_module_exports__['Fe']),YM=class extends DY.View{constructor(){super(...arguments),this.controller=this.props.controller()}template(){return _(tr,{children:[d(ap,{controller:this.props.controller}),_("div",{class:u("dcg-add-inference-wizard--body"),children:[d("div",{class:u("dcg-add-inference-wizard__distribution-type"),children:d(Ch,{id:()=>"add-inference--distribution-type",controller:this.props.controller,options:this.bindFn(this.getDistributionsList),externalControl:this.const({getValue:this.bindFn(this.getSelectedDistribution),onValueChange:e=>this.setDistribution(e)}),dontFocusAnchorOnSelect:this.const(!0)})}),d("div",{class:u("dcg-add-inference-wizard__distribution-inputs"),children:d(Hu,{controller:this.props.controller,columns:()=>this.generateWizardTableInputColumns(),onEnter:this.bindFn(this.createDistribution),onLatexUpdate:(e,t)=>this.onLatexUpdate({columnIndex:e,latex:t})})})]}),d(np,{controller:this.props.controller,disabled:this.bindFn(this.isCreateButtonDisabled),onCreate:this.bindFn(this.createDistribution),buttonLabel:()=>this.controller.s("graphing-calculator-narration-inference-wizard-create-distribution")})]})}createDistribution(){if(this.isCreateButtonDisabled())return;let e=this.generateWizardTableInputColumns(),t=-1;e.forEach(({latex:n},a)=>{n&&(t=a)});let o=e.filter((n,a)=>a<=t).map(n=>n.latex||n.placeholder).join(","),i=`\\operatorname{${this.getSelectedDistribution()}}\\left(${o}\\right)`;this.controller.dispatch({type:"new-distribution",latex:i})}isCreateButtonDisabled(){return this.generateWizardTableInputColumns().some(e=>e.error||!e.latex&&!e.placeholder)}generateWizardTableInputColumns(){let e=this.controller.wizardModel.getSelectedDistribution(),t=this.controller.wizardModel.getDistributionValues(),{params:o,defaults:i}=__dcg_shared_module_exports__['Fe'][e],n=o.map((a,s)=>{var g;let l=this.controller.wizardModel.getEvaluationInfoForDistributionProp(e,s),c=t[s]||"",p=`${(g=i[s])!=null?g:""}`,h=!!(c&&(l!=null&&l.error));return{header:this.controller.s(hE(a)),latex:c,error:h,focusLocation:{type:"add-inference-wizard",subtype:"distribution-input",columnIndex:s},placeholder:p,cssWidth:this.getSelectedDistribution()==="tdist"?a==="dof"?"50%":"25%":`${100/o.length}%`}});return __dcg_shared_module_exports__['Ge'](e,n.map((a,s)=>{var l;if(a.error)return{type:"error"};if(a.latex){let c=(l=this.controller.wizardModel.getEvaluationInfoForDistributionProp(e,s))==null?void 0:l.numericValue;return c===void 0?{type:"error"}:{type:"number",value:c}}else return{type:"default"}})).forEach((a,s)=>{!a&&n[s].latex&&(n[s].error=!0)}),n}getDistributionLabel(e){switch(e){case"binomialdist":return this.controller.s("graphing-calculator-label-binomial-distribution");case"chisqdist":return this.controller.s("graphing-calculator-label-chi-square-distribution",{chiSquare:"`\\chi^2`"});case"normaldist":return this.controller.s("graphing-calculator-label-normal-distribution");case"poissondist":return this.controller.s("graphing-calculator-label-poisson-distribution");case"tdist":return this.controller.s("graphing-calculator-label-t-distribution");case"uniformdist":return this.controller.s("graphing-calculator-label-uniform-distribution");case"geodist":return this.controller.s("graphing-calculator-label-geometric-distribution")}}getDiscrete(e){return __dcg_shared_module_exports__['Fe'][e].discrete?1:0}getDistributionsList(){let e=PY.find(t=>this.getDiscrete(t)===1);return PY.sort((t,o)=>this.getDiscrete(t)-this.getDiscrete(o)).map(t=>({id:t,label:this.getDistributionLabel(t),class:t===e?"dcg-distribution-dropdown__first-discrete-option":void 0}))}getSelectedDistribution(){return this.controller.wizardModel.getSelectedDistribution()}setDistribution(e){this.controller.dispatch({type:"set-inference-wizard-distribution",distribution:e,focusFirstInput:!0})}onLatexUpdate(e){let{columnIndex:t,latex:o}=e;this.controller.dispatch({type:"set-inference-wizard-distribution-data",distribution:this.getSelectedDistribution(),columnIndex:t,latex:o})}};ce();ie();var OY=__dcg_shared_module_exports__['e'](se());function rw(r,e){switch(e){case"ztest":return r.s("graphing-calculator-heading-inference-z-test");case"ttest":return r.s("graphing-calculator-heading-inference-t-test");case"zproptest":return r.s("graphing-calculator-heading-inference-z-prop-test");case"chisqtest":return r.s("graphing-calculator-heading-inference-chi-square-test-of-independence",{chiSquare:"`\\chi^{2}`"});case"chisqgof":return r.s("graphing-calculator-heading-inference-chi-square-gof",{chiSquare:"`\\chi^{2}`"})}}var XM=class extends OY.View{constructor(){super(...arguments),this.controller=this.props.controller()}template(){return _("div",{class:u("dcg-add-inference-wizard--body"),children:[d("button",{class:u("dcg-btn-gray-outline dcg-btn-full-width"),onTap:()=>this.chooseScreen("distribution"),manageFocus:this.const(_e({controller:this.controller,location:{type:"add-inference-wizard",subtype:"start-screen-button",button:"distribution"}})),children:()=>this.controller.s("graphing-calculator-heading-inference-add-distribution")}),d("div",{class:u("dcg-or-separator"),children:d("span",{children:()=>this.controller.s("account-shell-text-or")})}),d("h3",{class:u("dcg-unstyled-heading dcg-add-inference-wizard--section-title"),children:()=>this.controller.s("graphing-calculator-heading-for-quantitative-data")}),_("div",{class:u("dcg-add-inference-wizard--buttons"),children:[d("button",{class:u("dcg-btn-gray-outline"),onTap:()=>this.chooseScreen("z-test"),manageFocus:this.const(_e({controller:this.controller,location:{type:"add-inference-wizard",subtype:"start-screen-button",button:"z-test"}})),children:d(Ir,{content:()=>rw(this.controller,"ztest"),controller:this.props.controller})}),d("button",{class:u("dcg-btn-gray-outline"),onTap:()=>this.chooseScreen("t-test"),manageFocus:this.const(_e({controller:this.controller,location:{type:"add-inference-wizard",subtype:"start-screen-button",button:"t-test"}})),children:d(Ir,{content:()=>rw(this.controller,"ttest"),controller:this.props.controller})})]}),d("h3",{class:u("dcg-unstyled-heading dcg-add-inference-wizard--section-title dcg-add-inference-wizard--margin-above"),children:()=>this.controller.s("graphing-calculator-heading-for-categorical-data")}),_("div",{class:u("dcg-add-inference-wizard--buttons dcg-add-inference-wizard--buttons-two-columns"),children:[d("button",{class:u("dcg-btn-gray-outline"),onTap:()=>this.chooseScreen("z-prop-test"),manageFocus:this.const(_e({controller:this.controller,location:{type:"add-inference-wizard",subtype:"start-screen-button",button:"z-prop-test"}})),children:d(Ir,{content:()=>rw(this.controller,"zproptest"),controller:this.props.controller})}),d("button",{class:u("dcg-btn-gray-outline"),onTap:()=>this.chooseScreen("chi-square-test-of-independence"),manageFocus:this.const(_e({controller:this.controller,location:{type:"add-inference-wizard",subtype:"start-screen-button",button:"chi-square-test-of-independence"}})),children:d(Ir,{content:()=>rw(this.controller,"chisqtest"),controller:this.props.controller})}),d("button",{class:u("dcg-btn-gray-outline"),onTap:()=>this.chooseScreen("chi-square-gof"),manageFocus:this.const(_e({controller:this.controller,location:{type:"add-inference-wizard",subtype:"start-screen-button",button:"chi-square-gof"}})),children:d(Ir,{content:()=>rw(this.controller,"chisqgof"),controller:this.props.controller})})]})]})}chooseScreen(e){this.controller.dispatch({type:"set-inference-wizard-screen",screen:e,focusFirstInput:!0})}};var JM=class extends RY.View{constructor(){super(...arguments),this.__currentlyUpdatingFloatingStylesDepth=0}init(){this.controller=this.props.controller(),this.focusHelper=new Ol({focusTrappingBodySelector:".dcg-add-inference-wizard",isOpen:()=>!0,anchorSelector:void 0,closeMenu:()=>this.controller.dispatch({type:"close-inference-wizard",focusNextExpression:!0}),itemNavigationKey:"tab"})}getRectToFollow(){var t;let e=this.controller.wizardModel.getInsertItemId();if(e!==void 0){let o=(t=this.controller.getItemRootNodeById(e))==null?void 0:t.getBoundingClientRect();return o?{top:o.top,bottom:o.bottom}:void 0}}willUpdate(){this.computeFloatingStyles()}computeFloatingStylesAndUpdateIfChanged(){if(this.__currentlyUpdatingFloatingStylesDepth>2)return;let e=this.cachedFloatingStyles;this.computeFloatingStyles();let t=this.cachedFloatingStyles;__dcg_shared_module_exports__['s'](e,t)||(this.__currentlyUpdatingFloatingStylesDepth+=1,this.update(),this.__currentlyUpdatingFloatingStylesDepth-=1)}didUpdate(){this.computeFloatingStylesAndUpdateIfChanged()}didMount(){this.computeFloatingStylesAndUpdateIfChanged()}computeFloatingStyles(){var m;if(!this.rootDOM||!this.contentDOM||!this.arrowDOM)return;let e=this.controller.computeMajorLayout();if(this.controller.isNarrow()){let b=e.list.height+(this.controller.isKeypadOpen()?e.keypad.height:0)+8,x=.5*(e.grapher.width-this.contentDOM.getBoundingClientRect().width),E=e.grapher.height-36,S=175;E<S&&(b-=S-E,E=S);let k=e.grapher.width-40,T=Math.min(300,k);this.cachedFloatingStyles={root:{bottom:b+"px",left:x+"px","max-width":k+"px","min-width":T+"px","max-height":E+"px"},arrow:{left:"calc(50% - 10px)"}};return}let t=20,o=40,i=this.getRectToFollow(),n=0,a=0,s,l=this.contentDOM.getBoundingClientRect().height,c=((m=this.contentDOM.closest(".dcg-add-inference-wizard"))==null?void 0:m.getBoundingClientRect().height)||0,p=Math.max(c,l);if(i){let b=IY(this.controller);if(b){let E=b.height-10,S=E-25;p>S?(n=25,s=S):(n=i.top-b.top-o,n<25&&(n=25),n>E-p&&(n=E-p)),a=(i.top+i.bottom)/2-t/2-b.top-n;let k=o,T=(s||p)-t-o;a<k&&(a=k),a>T&&(a=T)}}let h=Math.min(e.list.width+t/2,e.list.width+e.grapher.width-300-25),g=e.grapher.height-95-n;this.cachedFloatingStyles={root:{top:n+"px",height:s!==void 0?s+"px":void 0,left:h+"px","min-width":"300px","max-width":Math.max(e.grapher.width-20,300)+"px","--dcg-select-dropdown-max-height":g+"px"},arrow:{top:a+"px"}}}getRootStyles(){var e;return((e=this.cachedFloatingStyles)==null?void 0:e.root)||{}}getArrowStyles(){var e;return((e=this.cachedFloatingStyles)==null?void 0:e.arrow)||{}}getWizardPaneTabIndex(){let e=this.controller.getFocusLocation();return(e==null?void 0:e.type)!=="add-inference-wizard"||(e==null?void 0:e.type)==="add-inference-wizard"&&e.subtype==="wizard-pane"?0:-1}getWizardPaneAriaLabel(){return this.getWizardPaneTabIndex()===0?this.controller.s("graphing-calculator-narration-inference-wizard-activate"):this.controller.s("graphing-calculator-narration-inference-wizard")}onKeyDown(e){let t=this.controller.getFocusLocation();if((t==null?void 0:t.type)==="add-inference-wizard"&&t.subtype==="wizard-pane"){let o=Pe(e);if(o==="Enter")e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-focus-location",location:this.controller.wizardModel.getFirstWizardInputFocusLocation()});else if(o==="Tab"){if(e.shiftKey)return;e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"icon"}})}}else return this.focusHelper.handleKeydown(e)}template(){return _("section",{class:()=>({"dcg-popover-interior":!0,"dcg-add-inference-wizard":!0,"dcg-inference-ui":!0,"dcg-top":this.controller.isNarrow(),"dcg-right":!this.controller.isNarrow(),"dcg-add-inference-wizard__start-screen":this.getScreenType()==="start-screen"}),style:()=>this.getRootStyles(),didMount:e=>{this.rootDOM=e,this.computeFloatingStylesAndUpdateIfChanged()},onKeyDown:this.bindFn(this.onKeyDown),tabIndex:this.bindFn(this.getWizardPaneTabIndex),"aria-label":this.bindFn(this.getWizardPaneAriaLabel),manageFocus:this.const(_e({controller:this.props.controller(),location:{type:"add-inference-wizard",subtype:"wizard-pane"}})),children:[d("button",{class:u("dcg-unstyled-button dcg-add-inference-wizard__close-button dcg-shared-close-cross"),onTap:()=>this.controller.dispatch({type:"close-inference-wizard"}),"aria-label":()=>this.controller.s("shared-button-close-dialog"),manageFocus:this.const(_e({controller:this.props.controller(),location:{type:"add-inference-wizard",subtype:"close-button"}})),children:d("i",{class:u("dcg-icon-remove"),"aria-hidden":u("true")})}),d("div",{class:u("dcg-wizard-interior-scrollable"),children:d("div",{class:u("dcg-wizard-interior-content"),didMount:e=>{this.contentDOM=e,this.computeFloatingStylesAndUpdateIfChanged()},children:wg(()=>this.getScreenType(),{"start-screen":()=>d(XM,{controller:this.props.controller}),inference:()=>d(pE,{controller:this.props.controller}),"add-distribution":()=>d(YM,{controller:this.props.controller}),"chi-square-gof":()=>d(tw,{controller:this.props.controller,inferenceType:this.const("chisqgof")}),"chi-square-test-of-independence":()=>d(tw,{controller:this.props.controller,inferenceType:this.const("chisqtest")})})})}),d("div",{class:()=>({"dcg-arrow":!0}),didMount:e=>{this.arrowDOM=e,this.computeFloatingStylesAndUpdateIfChanged()},style:()=>({"--dcg-arrow-size":"10px",...this.getArrowStyles()})}),d("div",{class:u("dcg-sr-only"),tabIndex:this.bindFn(this.getWizardPaneTabIndex),manageFocus:()=>({shouldBeFocused:()=>!1,onFocusedChanged:e=>{var t;e&&((t=document.querySelector("section.dcg-add-inference-wizard"))==null||t.focus())}})})]})}getScreenType(){switch(this.controller.wizardModel.getScreen()){case"start-screen":return"start-screen";case"distribution":return"add-distribution";case"chi-square-gof":return"chi-square-gof";case"chi-square-test-of-independence":return"chi-square-test-of-independence";case"t-test":case"z-test":case"z-prop-test":return"inference"}}};ce();ie();var FY=__dcg_shared_module_exports__['e'](se()),ow=class extends FY.View{template(){return this.controller=this.props.controller(),_("div",{class:u("dcg-expressionitem dcg-new-expression dcg-opened"),children:[d("div",{class:u("dcg-new-math-div dcg-do-not-blur dcg-action-newmath"),onTap:this.bindFn(this.newMath)}),_("span",{class:u("dcg-tab"),children:[d("span",{class:u("dcg-num dcg-variable-index"),children:this.bindFn(this.getIndex)}),d("div",{class:u("dcg-tab-interior")})]}),d("div",{class:u("dcg-new-expression-fade")})]})}getIndex(){return this.controller.getNextDisplayIndex()}newMath(){this.controller.dispatch({type:"new-expression-at-end"})}};ce();ie();var GY=__dcg_shared_module_exports__['e'](se()),iw=class extends GY.View{init(){this.controller=this.props.controller()}template(){return _("section",{class:u("dcg-progress-update-legend"),children:[d("h2",{class:u("dcg-sr-only"),children:"Progress Update Legend"}),d("button",{onTap:()=>this.hideLegend(),class:u("dcg-hide-progress"),children:"Hide Legend"}),_("ul",{class:u("dcg-unstyled-list"),children:[_("li",{class:u("dcg-legend-section"),children:[d("span",{class:u("dcg-progress-unpublished dcg-progress-swatch"),"aria-label":u("light yellow swatch"),role:u("img")}),d("span",{children:"unpublished"})]}),_("li",{class:u("dcg-legend-section"),children:[d("span",{class:u("dcg-progress-analyzing dcg-progress-swatch"),"aria-label":u("light blue swatch"),role:u("img")}),d("span",{children:"analyzing"})]}),_("li",{class:u("dcg-legend-section"),children:[d("span",{class:u("dcg-progress-graphing dcg-progress-swatch"),"aria-label":u("light red swatch"),role:u("img")}),d("span",{children:"computing plot"})]})]})]})}hideLegend(){this.controller.dispatch({type:"hide-progress-update-legend"})}};ce();ie();var NY=__dcg_shared_module_exports__['e'](se());var nw=class extends Cn{didMountRoot(e){this.onItemViewMounted(e)}willUnmount(){this.onItemViewUnmounted()}template(){let e="";return this.model.cachedRenderHeight&&(e="height:"+this.model.cachedRenderHeight+"px"),d("div",{class:u("dcg-do-not-blur dcg-expressionitem dcg-shell"),"expr-id":this.const(this.model.id),onTap:this.bindFn(this.onMouseSelect),style:NY.const(e),didMount:this.bindFn(this.didMountRoot)})}};ce();ie();var BY=__dcg_shared_module_exports__['e'](se());ce();ie();var VY=__dcg_shared_module_exports__['e'](se());var ZM=[.05,.1,.15,.2,.35,.5,.75,1,1.5,2,3.5,5,7.5,10,15,20],Qhe=__dcg_shared_module_exports__['g'](ZM),ege=__dcg_shared_module_exports__['f'](ZM),aw=class extends VY.View{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return _("div",{class:u("dcg-slider-speed-container dcg-do-not-blur"),handleEvent:u("true"),children:[d("span",{class:()=>({"dcg-action-slower":!0,"dcg-disabled":this.isSlowerDisabled()}),onTap:()=>this.animateSlower(),role:u("button"),"aria-label":()=>this.getSlowerAriaLabel(),tabIndex:()=>this.isSlowerDisabled()?-1:0,"aria-disabled":()=>this.isSlowerDisabled(),children:d("i",{class:u("dcg-icon-show"),"aria-hidden":u("true")})}),_("span",{class:u("dcg-variable-speed"),children:[this.bindFn(this.computeSpeed),"x"]}),d("span",{class:()=>({"dcg-action-faster":!0,"dcg-disabled":this.isFasterDisabled()}),onTap:()=>this.animateFaster(),role:u("button"),"aria-label":()=>this.getFasterAriaLabel(),tabIndex:()=>this.isFasterDisabled()?-1:0,"aria-disabled":()=>this.isFasterDisabled(),children:d("i",{class:u("dcg-icon-show"),"aria-hidden":u("true")})})]})}computeSpeed(){let e=__dcg_shared_module_exports__['pe']/this.model.slider.animationPeriod;return e=Number(e.toFixed(3)),e}isSlowerDisabled(){return Qhe>=this.computeSpeed()}isFasterDisabled(){return ege<=this.computeSpeed()}animateSlower(){let e=this.computeSpeed(),t=ZM.filter(o=>o<e);t.length!==0&&this.setPeriodFromSpeed(__dcg_shared_module_exports__['f'](t))}animateFaster(){let e=this.computeSpeed(),t=ZM.filter(o=>o>e);t.length!==0&&this.setPeriodFromSpeed(__dcg_shared_module_exports__['g'](t))}setPeriodFromSpeed(e){let t=__dcg_shared_module_exports__['pe']/e;this.controller.dispatch({type:"set-slider-animationperiod",id:this.model.id,animationPeriod:t}),Te(this.controller.s("graphing-calculator-narration-slider-animating-at-speed",{speed:e+""}))}getSlowerAriaLabel(){return this.controller.s("graphing-calculator-narration-slider-animate-slower")}getFasterAriaLabel(){return this.controller.s("graphing-calculator-narration-slider-animate-faster")}};var QM=class extends BY.View{init(){var e;this.controller=this.props.controller(),this.model=this.props.model(),this.guid=(e=this.controller.getOpenItemMenu())==null?void 0:e.guid}didMount(){qc(this.guid,this.controller)}willUnmount(){Hc(this.guid,this.controller)}didMountArrow(e){this.arrowElt=e,ra(this.arrowElt,this.controller)}didUpdate(){ra(this.arrowElt,this.controller)}template(){let e=this.model;return _("div",{class:u("dcg-slider-options-view dcg-options-menu"),children:[d("div",{class:u("dcg-triangle"),didMount:this.bindFn(this.didMountArrow),didUnmount:()=>this.arrowElt=void 0}),d("div",{class:u("dcg-slider-menu"),children:_("div",{role:u("group"),"aria-label":()=>this.controller.s("graphing-calculator-heading-slider-animation-mode"),children:[d("div",{role:u("heading"),"aria-level":u("2"),class:u("dcg-title"),children:()=>this.controller.s("graphing-calculator-heading-slider-animation-mode")}),d(hr,{ariaGroupLabel:()=>this.controller.s("graphing-calculator-heading-slider-animation-mode"),staticConfig:this.bindFn(this.getAnimationOptions),theme:this.const("mini")})]})}),_("div",{class:u("dcg-slider-menu dcg-slider-speed-menu"),role:u("group"),"aria-label":()=>this.controller.s("graphing-calculator-heading-slider-speed"),children:[d("div",{role:u("heading"),"aria-level":u("2"),class:u("dcg-title"),children:()=>this.controller.s("graphing-calculator-heading-slider-speed")}),d("div",{class:u("dcg-slider-speed-container"),children:d(aw,{model:()=>e,controller:this.props.controller})})]})]})}getAnimationOptions(){let e=this.model;return[__dcg_shared_module_exports__['Zd'].LOOP_FORWARD_REVERSE,__dcg_shared_module_exports__['Zd'].LOOP_FORWARD,__dcg_shared_module_exports__['Zd'].PLAY_ONCE,__dcg_shared_module_exports__['Zd'].PLAY_INDEFINITELY].map(o=>({key:o,icon:()=>__dcg_shared_module_exports__['_d'](o),tooltip:()=>this.getTooltip(o),tooltipGravity:this.const("s"),selected:()=>this.isSelected(o),onSelect:()=>{this.controller.dispatch({type:"set-slider-loopmode",id:e.id,loopMode:o})}}))}getTooltip(e){let t=this.controller.s;switch(e){case __dcg_shared_module_exports__['Zd'].LOOP_FORWARD_REVERSE:return t("graphing-calculator-narration-slider-loop-forwards-and-backwards");case __dcg_shared_module_exports__['Zd'].LOOP_FORWARD:return t("graphing-calculator-narration-slider-repeat-one-direction");case __dcg_shared_module_exports__['Zd'].PLAY_ONCE:return t("graphing-calculator-narration-slider-play-once");case __dcg_shared_module_exports__['Zd'].PLAY_INDEFINITELY:return t("graphing-calculator-narration-slider-play-indefinitely")}}isSelected(e){return this.model.slider.loopMode===e}};ce();ie();var HX=__dcg_shared_module_exports__['e'](se());Vt();ce();ie();var tA=__dcg_shared_module_exports__['e'](se());var{If:tge}=tA.Components,eA=class extends tA.View{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return d(tge,{predicate:()=>this.controller.shouldShowRegressionButton(this.model),children:()=>d("div",{class:u("dcg-add-regression-view dcg-do-not-blur"),onTapStart:e=>Dt(e,"dcg-expression-drag"),children:d(Re,{tooltip:this.bindFn(this.getTooltipText),gravity:()=>"e",children:d("i",{onTap:()=>{this.controller.dispatch({type:"create-table-regression",tableId:this.model.id,regressionType:"linear"})},role:u("button"),tabIndex:u("0"),"aria-label":this.bindFn(this.getTooltipText),class:u("dcg-icon-points"),manageFocus:this.const(_e({controller:this.controller,location:{type:"add-table-regression-btn",id:this.model.id}}))})})})})}getTooltipText(){return this.controller.s("graphing-calculator-button-add-table-regression")}};ce();ie();var fA=__dcg_shared_module_exports__['e'](se());__dcg_shared_module_exports__['H']();bn();var rA={version:qa,randomSeed:"",graph:{viewport:{xmin:"-10",ymin:"-13.25",xmax:"10",ymax:"13.25"},__viewportEvaluatedForBackMigration:{xmin:-10,ymin:-13.25,xmax:10,ymax:13.25},showGrid:!1,product:"geometry-calculator",showXAxis:!1,showYAxis:!1,degreeMode:!0},expressions:{list:[__dcg_shared_module_exports__['le'](),{id:"1",type:"expression"}]}};var rge={version:qa,randomSeed:"",graph:{viewport:{xmin:"-10",ymin:"-13.25",xmax:"10",ymax:"13.25"},__viewportEvaluatedForBackMigration:{xmin:-10,ymin:-13.25,xmax:10,ymax:13.25}},expressions:{list:[{id:"1",type:"expression"}]}},mG=rge;var zX=__dcg_shared_module_exports__['e'](se());Vt();var sw=class{constructor(e){this.active=!1,this.controller=e;let t=this.controller.getExppanelElt();t&&(this.exppanel=t)}startDragging(e){this.active=!0,this.mousePt=e,this.setupEventListeners()}applyDrag(){var T;let t=this.controller.getListModel().dragState;if(!t)return;this.scheduleUpdateScroll();let o=this.measureDOM(t);if(!o)return;let{floatingPreviewRect:i,dragState:n,visibleRects:a}=o,s=this.controller.getItemModel(n.firstItemId);if(!s)return;let l=s.index,c=a[0];if(c&&c.id!==s.id){let I=this.controller.getItemModel(c.id);I&&I.index>l&&(l=I.index-1)}let{cachedNamedAssignmentLatex:p,cachedTokenAssignmentLatex:h}=n;for(let{id:I,rect:P}of a){if(I===s.id)continue;let A=this.controller.getItemModel(I);if(!A)return;if(A.index<s.index){if(i.top<P.top+P.height/2){l=A.index;break}}else i.bottom>P.top+P.height/2&&(l=A.index,A.type==="folder"&&A.collapsed&&(l+=this.controller.getNumberOfItemsInFolder(A.id)))}let g,m;l>s.index?(g=l,m=l+1):l<s.index?(g=l-1,m=l):(g=l-1,m=l+1);let b=this.controller.getItemModelByIndex(g),x=this.controller.getItemModelByIndex(m),E="",S="";b&&(b.type==="folder"?E=b.id:E=b.folderId),x&&(x.type==="folder"?S=x.id:S=x.folderId);let k="";if(E&&(S===E?s.type==="folder"?l=s.index:k=E:s.type!=="folder"&&this.isPreviewTopContainedInFolder(o,E)&&(k=E)),s.type==="expression")if(n.renderType==="token"){if(t.renderType==="expression"&&(p=s.latex,this.controller.convertToTokenAssignment(s,h)),n.dragTarget.type==="token")l=n.dragTarget.originalIndex,k=((T=this.controller.getGeometryFolder())==null?void 0:T.id)||"";else if(n.dragTarget.type==="expression"){let I=this.controller.getGeometryFolder();if(I){let P=this.controller.getNumberOfItemsInFolder(I.id);s.type==="expression"&&s.folderId===I.id&&(P-=1),l=I.index+P+1,k=I.id}}}else n.renderType==="expression"&&t.renderType==="token"&&(h=s.latex,this.controller.convertToNamedAssignment(s,p));return{dragState:{...n,cachedNamedAssignmentLatex:p,cachedTokenAssignmentLatex:h},newIndex:l,folderId:k}}measureDOM(e){var D;let t={x:((D=Ih(this.controller))==null?void 0:D.left)||0,y:CY(this.controller)},o=_Y(this.controller),i=MY(this.controller);if(t.y===void 0||!o||!i)return;let n=o.height,a=i.height,s=!1,l=this.controller.getExppanelElt(),c=l==null?void 0:l.querySelector(".dcg-template-expressioneach"),p=c==null?void 0:c.getBoundingClientRect();p&&p.top<=e.mousePt.y&&(s=!0);let h=!1,g=l==null?void 0:l.querySelector(".dcg-geo-show-constructions-pane"),m=g==null?void 0:g.getBoundingClientRect();m&&m.bottom>e.mousePt.y&&(h=!0);let b=!1;(e.dragTarget.type==="token"&&!s||e.dragTarget.type==="expression"&&h&&!s&&this.controller.canDraggedItemBeMovedIntoTokenPane())&&(b=!0);let x=e.grabOffset;b?x={x:i.width/2+2.5,y:i.height/2}:e.dragTarget.type==="token"&&(x={x:0,y:i.height/2});let E=e.mousePt.y-x.y,S=__dcg_shared_module_exports__['Ob'](E-t.y,-a/2,n-a),k=0;b&&(k=__dcg_shared_module_exports__['Ob'](e.mousePt.x-x.x-t.x,0,o.width-i.width-4),S=Math.max(S,2));let T={left:k,top:E,bottom:E+a,height:a},I=this.controller.findFirstVisibleItem(),P=this.controller.findLastVisibleItem(),A=[];if(I&&P)for(let G=I.index;G<=P.index;G++){let N=this.controller.getItemModelByIndex(G);if(!N)continue;let U=this.controller.getItemRootNodeById(N.id);if(U&&N.id!==e.firstItemId){let K=U.getBoundingClientRect();A.push({id:N.id,rect:K})}}return{dragState:{...e,itemTop:S,itemLeft:k,renderType:b?"token":"expression"},floatingPreviewRect:T,visibleRects:A}}isPreviewTopContainedInFolder(e,t){let{visibleRects:o,floatingPreviewRect:i}=e;for(let{id:n,rect:a}of o)if(a.top<=i.top&&a.bottom>=i.top){let s=this.controller.getItemModel(n);if(!s)return!1;if(s.type==="folder"&&s.id===t||s.type!=="folder"&&s.folderId===t)return!0}return!1}scheduleUpdateScroll(){this.updateScrollScheduled||(this.updateScrollScheduled=!0,requestAnimationFrame(()=>{this.updateScroll(),this.updateScrollScheduled=!1}))}stop(){this.active=!1,this.tearDownEventListeners(),this.controller.dispatch({type:"stop-dragdrop"})}setupEventListeners(){re(document).on("dcg-tapmove.dragdrop",e=>{this.mousePt.x=e.changedTouches[0].clientX,this.mousePt.y=e.changedTouches[0].clientY,this.controller.dispatch({type:"update-dragdrop",mousePt:this.mousePt})}),re(document).on("dcg-tapend.dragdrop",e=>{this.stop(),Dt(e,"dragdrop")})}tearDownEventListeners(){re(document).off(".dragdrop")}updateScroll(){if(!this.active)return;let e=this.exppanel.getBoundingClientRect(),t=0;t=Math.min(t,this.mousePt.y-e.top),t=Math.max(t,this.mousePt.y-e.bottom+30),t=t*e.height/900,t&&(this.exppanel.scrollTop=this.exppanel.scrollTop+t)}};function UY(r,e,t){let i=.5/(2*t*e);return Br(r-i,r+i)}function lw(r,e,t,o,i=0){let n=__dcg_shared_module_exports__['O'](r.x,r.y,0,t[0],t[1],0,o[0],o[1],0);i&&(n+=i);let s=.5/(__dcg_shared_module_exports__['Vb'](t,o)*e);return Br(n-s,n+s)}function qs(r,e){for(let t of e)t&&(t.min!==void 0&&r<t.min?r=t.min:t.max!==void 0&&r>t.max&&(r=t.max));return r}function oA(r,e,t,o){if(!t)return 0;let i=r.mapx(1)-r.mapx(0);switch(t.valueType){case __dcg_shared_module_exports__['Ga']:{let a=e.x-t.value[0][0],s=e.y-t.value[0][1],l=Math.atan2(s,a)/(2*Math.PI);l<0&&(l+=1),l=UY(l,i,t.value[1]);let c=qs(0,[o]),p=qs(1,[o]);if(l>=c&&l<=p)return l;{let h=__dcg_shared_module_exports__['$b'](t.value,c),g=__dcg_shared_module_exports__['$b'](t.value,p),m=__dcg_shared_module_exports__['Vb'](h,[e.x,e.y]),b=__dcg_shared_module_exports__['Vb'](g,[e.x,e.y]);return m<=b?c:p}}case __dcg_shared_module_exports__['Ha']:{let a=__dcg_shared_module_exports__['cc'](t.value);if(!a)return 0;if(a.type==="segment"){let s=lw(e,i,a.start,a.end);return qs(s,[{min:0,max:1},o])}else if(a.type==="rays"){let s=__dcg_shared_module_exports__['Vb'](a.start1,[e.x,e.y]),l=__dcg_shared_module_exports__['Vb'](a.start2,[e.x,e.y]),c=!o||o.min===void 0?-1/0:o.min,p=!o||o.max===void 0?1/0:o.max;return s<l?c>0?p>=1?1:c:qs(-lw(e,i,a.start1,a.end1),[{min:void 0,max:0},o]):p<1?c<=0?0:p:qs(lw(e,i,a.start2,a.end2,1),[{min:1,max:void 0},o])}else if(a.type=="arc"){let[s,l]=a.center,{radius:c,startAngle:p}=a,h=__dcg_shared_module_exports__['Xb'](t.value),g=e.x-s,m=e.y-l,b=__dcg_shared_module_exports__['J'](Math.atan2(m,g),p,h);if(b>=0&&b<=1)b=UY(b,i,c);else{let S=sk(e,{x:s+c*Math.cos(p),y:l+c*Math.sin(p)}),k=sk(e,{x:s+c*Math.cos(p+h),y:l+c*Math.sin(p+h)});S<=k?b=0:b=1}let x=qs(0,[o]),E=qs(1,[o]);if(b>=x&&b<=E)return b;{let S=__dcg_shared_module_exports__['ac'](t.value,x),k=__dcg_shared_module_exports__['ac'](t.value,E),T=__dcg_shared_module_exports__['Vb'](S,[e.x,e.y]),I=__dcg_shared_module_exports__['Vb'](k,[e.x,e.y]);return T<=I?x:E}}return qs(0,[o])}case __dcg_shared_module_exports__['Ka']:case __dcg_shared_module_exports__['Ea']:case __dcg_shared_module_exports__['Ia']:{let a=lw(e,i,t.value[0],t.value[1]);return qs(a,[{min:t.valueType===__dcg_shared_module_exports__['Ia']?void 0:0,max:t.valueType!==__dcg_shared_module_exports__['Ea']?void 0:1},o])}case __dcg_shared_module_exports__['Da']:{let a=t.value,s=1/0,l=qs(0,[o]),c=o&&o.min!==void 0?o.min:-1/0,p=o&&o.max!==void 0?o.max:1/0,h=Math.floor(Math.max(c,0)),g=Math.ceil(Math.min(p,a.length));for(let m=h;m<g;m++){let b=a[m],x=a[(m+1)%a.length],E=qs(lw(e,i,b,x,m),[{min:m,max:m+1},o]),S=__dcg_shared_module_exports__['bc'](t.value,E),k=__dcg_shared_module_exports__['Vb'](S,[e.x,e.y]);k<s&&(s=k,l=E)}return l}case __dcg_shared_module_exports__['va']:case __dcg_shared_module_exports__['Ma']:case __dcg_shared_module_exports__['Oa']:case __dcg_shared_module_exports__['Qa']:case __dcg_shared_module_exports__['Sa']:return 0;default:return t}}function zY(r,e){switch(r.valueType){case __dcg_shared_module_exports__['Ga']:return __dcg_shared_module_exports__['$b'](r.value,e);case __dcg_shared_module_exports__['Ha']:return __dcg_shared_module_exports__['ac'](r.value,e);case __dcg_shared_module_exports__['Ka']:return __dcg_shared_module_exports__['_b'](r.value,e);case __dcg_shared_module_exports__['Ea']:return __dcg_shared_module_exports__['Zb'](r.value,e);case __dcg_shared_module_exports__['Ia']:return __dcg_shared_module_exports__['Yb'](r.value,e);case __dcg_shared_module_exports__['Da']:return __dcg_shared_module_exports__['bc'](r.value,e);case __dcg_shared_module_exports__['va']:case __dcg_shared_module_exports__['Ma']:case __dcg_shared_module_exports__['Oa']:case __dcg_shared_module_exports__['Qa']:case __dcg_shared_module_exports__['Sa']:return[NaN,NaN];default:return r}}function oge(r,e){if(!e)return!1;let{left:t,right:o,top:i,bottom:n}=r.pixelCoordinates,{x:a,y:s}=e.mathPoint;if(e.transform){let l=e.model.getTypedConstantValue();if((l==null?void 0:l.valueType)!==__dcg_shared_module_exports__['va'])throw new Error(`Expected movable point to be a Point but found ${l?__dcg_shared_module_exports__['ob'](l.valueType):void 0} instead`);a=a!=null?a:__dcg_shared_module_exports__['zb'](l,"x"),s=s!=null?s:__dcg_shared_module_exports__['zb'](l,"y"),[a,s]=__dcg_shared_module_exports__['pc'](e.transform.forward,[a,s])}if(a!==void 0){let l=r.mathToPixels.mapX(a);if(l<t-.5||l>o+.5)return!1}if(s!==void 0){let l=r.mathToPixels.mapY(s);if(l<i-.5||l>n+.5)return!1}return!0}function qY(r,e){if(e.length===1&&!oge(r,e[0]))return!1;let t=!1;for(let o of e){o.newPointLatex&&o.model.setLatex(o.newPointLatex).didMovePoint&&(t=!0);for(let i in o.sliderUpdates){let{value:n,model:a}=o.sliderUpdates[i];o.commitSliderSoftLimits&&a.commitSliderSoftLimits(),a.adjustSliderByMovablePoint(n).didMovePoint&&(t=!0)}}return t}function HY({projection:r,transform:e,context:t,strategy:o,mode:i,clampToViewport:n}){let a=t.getItemModel(o.id);if(!a||a.type!=="expression")throw new Error(`Programming error: updateSliderNonlinear move strategy should point to an expression item, but found ${a==null?void 0:a.type}`);let s=i==="up"||i==="bigup",l=a.shouldIgnoreSoftLimits(s);o.compiled.fn||__dcg_shared_module_exports__['Bc'](o.compiled);let c=o.compiled.fn;e&&(c=I=>__dcg_shared_module_exports__['pc'](e.forward,o.compiled.fn(I)));let p=I=>{let[P,A]=c(I);return{x:P,y:A}=r.mathToPixels.mapPoint({x:P,y:A}),[P,A]},h=a.getSliderValue(),[g,m]=p(h),b=a.computeSliderKeyboardAdjustment(i,{ignoreSoftLimits:l}),x=b,[E,S]=p(x),k=__dcg_shared_module_exports__['M'](E-g,S-m);if(k<1){let I=__dcg_shared_module_exports__['W'](p,[g+(E-g)/k,m+(S-m)/k],x,x>h?x:o.min,x<h?x:o.max,1);if(I){let P=Br(I[0],I[1]);(i==="bigup"||i==="bigdown")&&(P=h+(P-h)*5);let A=a.computeSliderSnappedValue(__dcg_shared_module_exports__['V'](P,o.min,o.max),{ignoreSoftLimits:l}),[D,G]=p(A);__dcg_shared_module_exports__['M'](D-g,G-m)>k&&(b=A)}}n&&(b=WY(r,a.getSliderValue(),b,c));let T=c(b);return{mathPoint:{x:T[0],y:T[1]},sliderUpdates:{[o.id]:{model:a,value:b}}}}function KY({context:r,projection:e,transform:t,strategy:o,targetScreenPoint:i,clampToViewport:n}){let a={mathPoint:{},sliderUpdates:{}},s=r.getItemModel(o.id);if(!s||s.type!=="expression")throw new Error(`Programming error: updateSliderNonlinear move strategy should point to an expression item, but found ${s==null?void 0:s.type}`);o.compiled.fn||__dcg_shared_module_exports__['Bc'](o.compiled);let l=o.compiled.fn;t&&(l=T=>__dcg_shared_module_exports__['pc'](t.forward,o.compiled.fn(T)));let c=T=>{let[I,P]=l(T);return{x:I,y:P}=e.mathToPixels.mapPoint({x:I,y:P}),[I,P]},p=o.initialValue,h=o.min,g=o.max,m=[i.x,i.y],b=__dcg_shared_module_exports__['W'](c,m,p,h,g,1);if(!b)return a;let x=Br(b[0],b[1]);h!==void 0&&x<h&&(x=h),g!==void 0&&x>g&&(x=g);let E=s.computeSliderSnappedValue(x,{ignoreSoftLimits:!0});n&&(E=WY(e,s.getSliderValue(),E,l));let[S,k]=l(E);return a.mathPoint.x=S,a.mathPoint.y=k,a.sliderUpdates[s.id]={value:E,model:s},a}function fG({context:r,projection:e,transform:t,strategy:o,targetScreenPoint:i}){let n=e.reverse_map_pt(i);if(t){let p=__dcg_shared_module_exports__['pc'](t.inverse,[n.x,n.y]);n={x:p[0],y:p[1]}}let a=o.type==="updateSliderForGlider"?{min:o.min,max:o.max}:void 0,s=oA(e,n,o.movesOn,a);if(!isFinite(s))return;let l=zY(o.movesOn,s),c={mathPoint:{x:l[0],y:l[1]},newPointLatex:void 0,sliderUpdates:{}};if(o.type==="updateGliderParameter"){let p=o.span;c.newPointLatex=p.input.slice(0,p.start)+__dcg_shared_module_exports__['$'](s)+p.input.slice(p.end)}else if(o.type==="updateSliderForGlider"){let p=r.getItemModel(o.id);p&&p.type==="expression"&&(c.sliderUpdates[p.id]={value:s,model:p})}return c}function WY(r,e,t,o){let i=p=>{let[h,g]=o(p);return r.mathToPixels.mapPoint({x:h,y:g})},n=({x:p,y:h})=>{let{left:g,right:m,top:b,bottom:x}=r.pixelCoordinates;return p>=g&&p<=m&&h>=b&&h<=x},a=e,s=i(e),l=t,c=i(t);if(n(c)||!n(s))return t;for(;;){let p=s.x-c.x,h=s.y-c.y;if(p*p+h*h<.5)break;let g=__dcg_shared_module_exports__['U'](a,l);if(g===a||g===l){[a,l]=n(s)?[a,a]:[l,l];break}let m=i(g);n(m)!==n(s)?[l,c]=[g,m]:[a,s]=[g,m]}return Br(a,l)}function bG({context:r,projection:e,transform:t,typedConstantValue:o,moveStrategy:i,dragMode:n,targetScreenPoint:a,clampToViewport:s}){if(t){let{x:m,y:b}=e.pixelsToMath.mapPoint(a),[x,E]=__dcg_shared_module_exports__['pc'](t.inverse,[m,b]);a=e.mathToPixels.mapPoint({x,y:E})}let l=e.pixelsToMath.mapRect({left:a.x-.5,right:a.x+.5,top:a.y+.5,bottom:a.y-.5}),c=[{min:l.left,max:l.right},{min:l.top,max:l.bottom}],p={mathPoint:{},sliderUpdates:{}},[h,g]=i;if(h.type==="updateCoordinate"||g.type==="updateCoordinate"){let m=ige(o,i,c,n);if(m){let{latex:b,x,y:E}=m;(x!==void 0||E!==void 0)&&(p.newPointLatex=b,p.mathPoint.x=x!=null?x:p.mathPoint.x,p.mathPoint.y=E!=null?E:p.mathPoint.y)}}for(let m of[0,1]){let b=i[m];if(cw(m,n)&&b.type==="updateSlider"){let x=r.getItemModel(b.id);if(!x||x.type!=="expression")continue;let[E,S]=b.coefficients,k=Br(S*c[m].min+E,S*c[m].max+E),T=x.computeSliderSnappedValue(k,{ignoreSoftLimits:!0}),I=(T-E)/S;if(!s||t){p.mathPoint[m===0?"x":"y"]=I,p.sliderUpdates[x.id]={value:T,model:x};continue}let[P,A]=m===0?[e.mathCoordinates.left,e.mathCoordinates.right]:[e.mathCoordinates.bottom,e.mathCoordinates.top],D=I<P?P:I>A?A:void 0;D!==void 0&&x.getSliderStep()===void 0?(p.mathPoint[m===0?"x":"y"]=D,p.sliderUpdates[x.id]={value:S*D+E,model:x}):(p.mathPoint[m===0?"x":"y"]=I,p.sliderUpdates[x.id]={value:T,model:x})}}return p}function ige(r,e,t,o){if(!e)throw new Error("Programming error: expected move_strategy to be defined.");let i=Br(t[0].min,t[0].max),n=Br(t[1].min,t[1].max),[a,s]=e;if((r==null?void 0:r.valueType)===__dcg_shared_module_exports__['Va']&&a.type==="updateCoordinate"&&s.type==="updateCoordinate"){let[m,b]=[__dcg_shared_module_exports__['zb'](r,"real"),__dcg_shared_module_exports__['zb'](r,"imag")],x=cw(0,o),E=cw(1,o),S=x?i:m,k=E?n:b,T=a.inputSpan;return{latex:T.input.slice(0,T.start)+__dcg_shared_module_exports__['la']([S,k],{alwaysEmitImaginary:!0},"decimalString")+T.input.slice(T.end),x:x?i:void 0,y:E?n:void 0}}let l=!1,c=!1,p,h="",g=0;if(a.type==="updateCoordinate"&&cw(0,o)&&(p=a.inputSpan.input,l=!0,h+=p.slice(g,a.inputSpan.start),h+=__dcg_shared_module_exports__['$'](i),g=a.inputSpan.end),s.type==="updateCoordinate"&&cw(1,o)&&(p=s.inputSpan.input,c=!0,h+=p.slice(g,s.inputSpan.start),h+=__dcg_shared_module_exports__['$'](n),g=s.inputSpan.end),p!==void 0)return h+=p.slice(g),{latex:h,x:l?i:void 0,y:c?n:void 0}}function cw(r,e){switch(e){case __dcg_shared_module_exports__['hd'].X:return r===0;case __dcg_shared_module_exports__['hd'].Y:return r===1;case __dcg_shared_module_exports__['hd'].XY:return!0;default:return!1}}function $Y(r,e){e.forEach(t=>{nge(r,t)})}function jY(r,e){var h;let t=!1,{points:o,previous_screen_pts:i,screen_pts:n,projection:a,transform:s,keyboardDirection:l}=e,c=o.length===1,p=[];for(let g=0;g<o.length;g++){let m=o[g];if(m.tableInfo){sge(r,m,n[g],a),t=!0;continue}let b=r.getItemModel(m.calcId);if(b){if(b.type==="image")t=t||dge(r,b,m,n[g],a);else if(b.type==="expression"){let x=pge({context:r,movedExpr:b,dragMode:(h=b.getReconciledDragMode({isReverseDrag:m.isReverseDrag}))!=null?h:__dcg_shared_module_exports__['hd'].NONE,currentScreenPoint:i[g],targetScreenPoint:n[g],projection:a,transform:s&&s[g],isOnlyPoint:c,keyboardDirection:l});x&&p.push(x)}}}return t=t||qY(a,p),t}function YY(r,e){e.forEach(t=>{age(r,t)})}function nge(r,e){if(e.tableInfo){let t=r.getItemModel(e.tableInfo.tableId);if(!t||t.type!=="table")return;t.setIsDraggingOnGrapher(!0)}else{let t=r.getItemModel(e.calcId);if(!t||!(t.type==="expression"||t.type==="image"))return;let o=t.getMoveStrategy();if(!o)return;for(let i=0;i<o.length;i++){let n=o[i];if(o[i].type==="updateCoordinate"||o[i].type==="updateGliderParameter")(t.type==="image"||t.type==="expression")&&t.setIsDraggingOnGrapher(!0);else if(n.type==="updateSlider"||n.type==="updateSliderNonlinear"||n.type==="updateSliderForGlider"){let a=r.getItemModel(n.id);if(!a||a.type!=="expression")continue;let s;if(t.type==="expression"?s=t.getReconciledDragMode({isReverseDrag:e.isReverseDrag}):s=void 0,s===__dcg_shared_module_exports__['hd'].NONE||i===0&&s===__dcg_shared_module_exports__['hd'].Y||i===1&&s===__dcg_shared_module_exports__['hd'].X)continue;a.setIsDraggingSlider(!0)}}}}function age(r,e){for(let t of r.getAllItemModels())t.type==="expression"&&t.isSliderDragging()&&t.setIsDraggingSlider(!1),t.isDraggingOnGrapher()&&t.setIsDraggingOnGrapher(!1)}function sge(r,e,t,o){let i=e.tableInfo.tableId,n=e.tableInfo.rowIndex,a=e.tableInfo.columnId,s=e.tableInfo.dragX,l=e.tableInfo.dragY,c=r.getItemModel(i);if(!c||c.type!=="table")return;let p=c.getColumnIndex(a);if(p===void 0)return;let h=o.closestPointOnScreen(t),g=o.pixelsToMath.mapRect(XY(h,.5)),m={x:__dcg_shared_module_exports__['_'](Br(g.left,g.right)),y:__dcg_shared_module_exports__['_'](Br(g.top,g.bottom))};s&&c.setCellLatex({row:n+1,column:0},m.x),l&&c.setCellLatex({row:n+1,column:p},m.y)}function XY(r,e){return{left:r.x-e,right:r.x+e,top:r.y+e,bottom:r.y-e}}function lge(r,e,t){if(t[0]===0&&t[1]===0)return{x:e.x,y:e.y,width:r.width,height:r.height};let o=Math.cos(r.radianAngle),i=Math.sin(r.radianAngle),n=e.x-r.x,a=e.y-r.y;if(t[0]===0)return{x:r.x,y:r.y,width:r.width,height:2*t[1]*(o*a+i*n)};if(t[1]===0)return{x:r.x,y:r.y,width:2*t[0]*(o*n-i*a),height:r.height};let s=2*(r.width*t[0]*(o*n-i*a)+r.height*t[1]*(i*n+o*a))/(r.width*r.width+r.height*r.height);return{x:r.x,y:r.y,width:s*r.width,height:s*r.height}}function cge(r,e,t){let o=[{x:e.left,y:e.bottom},{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.right,y:e.bottom}],i=["x","y","width","height"],n={x:1/0,y:1/0,width:1/0,height:1/0},a={x:-1/0,y:-1/0,width:-1/0,height:-1/0};for(let s of o){let l=lge(r,s,t);for(let c of i)n[c]=Math.min(n[c],l[c]),a[c]=Math.max(a[c],l[c])}return{min:n,max:a}}function dw(r){return r===void 0?NaN:r[0]}function dge(r,e,t,o,i){let n=e.getMoveStrategy();if((n==null?void 0:n.length)!==4)return!1;let a=e.getDimensions();if(!a)return!1;let s={x:dw(a.x),y:dw(a.y),width:dw(a.width),height:dw(a.height),radianAngle:dw(a.radianAngle)},l=t.scaleFactor||[0,0],c=l[0]!==0&&l[1]!==0,p=i.closestPointOnScreen(o),h=i.pixelsToMath.mapRect(XY(p,c?.05:.5)),g=cge(s,h,l),m=i.mathToPixels.mapRect({left:s.x-.5*s.width,right:s.x+.5*s.width,top:s.y-.5*s.height,bottom:s.y+.5*s.height}),b=Math.abs(m.right-m.left),x=Math.abs(m.bottom-m.top),E=i.mathToPixels.mapRect({left:g.min.x-.5*g.min.width,right:g.min.x+.5*g.min.width,top:g.min.y-.5*g.min.height,bottom:g.min.y+.5*g.min.height}),S=Math.abs(E.right-E.left),k=Math.abs(E.bottom-E.top);if(S<b&&S<1||k<x&&k<1)return!1;let T=["width","height","x","y"],I=!1;for(let P=0;P<T.length;P++){let A=T[P],D=n[P];switch(D.type){case"updateCoordinate":let G=Br(g.min[A],g.max[A]),N=D.inputSpan.input,U=__dcg_shared_module_exports__['_'](G);switch(A){case"width":case"height":e.setImageMQAttribute(A,U);break;case"x":if(n[3].type==="updateCoordinate"){let H=n[3],w=Br(g.min.y,g.max.y),F=__dcg_shared_module_exports__['_'](w),V=N.slice(0,D.inputSpan.start)+U+N.slice(D.inputSpan.end,H.inputSpan.start)+F+N.slice(H.inputSpan.end);e.setImageMQAttribute("center",V)}else{let H=N.slice(0,D.inputSpan.start)+U+N.slice(D.inputSpan.end);e.setImageMQAttribute("center",H)}break;case"y":if(n[2].type!=="updateCoordinate"){let H=N.slice(0,D.inputSpan.start)+U+N.slice(D.inputSpan.end);e.setImageMQAttribute("center",H)}break;default:return A}I=!0;break;case"updateSlider":{let K=r.getItemModel(D.id);if(!K||K.type!=="expression")continue;let H=D.coefficients[0],w=D.coefficients[1],F=w*g.min[A]+H,V=w*g.max[A]+H,B=Br(F,V);K.adjustSliderByMovablePoint(B).didMovePoint&&(I=!0)}break}}return I}function pge({context:r,movedExpr:e,dragMode:t,currentScreenPoint:o,targetScreenPoint:i,projection:n,transform:a,isOnlyPoint:s,keyboardDirection:l}){var b;let c=e.getMoveStrategy();if((c==null?void 0:c.length)!==2)return;let[p,h]=c;if(s&&p.type==="updateCoordinate"&&h.type==="updateCoordinate"){let x=n.reverse_map_pt(i),E=yG(n,x);E&&(i=n.map_pt(E))}let g=s?n.closestPointOnScreen(i):i;if(!l){let x;switch(p.type){case"updateSliderNonlinear":x=KY({context:r,projection:n,transform:a,strategy:p,targetScreenPoint:g,clampToViewport:s});break;case"updateGliderParameter":case"updateSliderForGlider":x=fG({context:r,projection:n,transform:a,strategy:p,targetScreenPoint:g});break;default:x=bG({context:r,projection:n,transform:a,typedConstantValue:e.getTypedConstantValue(),moveStrategy:c,dragMode:t,targetScreenPoint:g,clampToViewport:s})}return x&&{...x,commitSliderSoftLimits:!1,transform:a,model:e}}let m;if(p.type==="updateSliderNonlinear"){if(!(l!=null&&l.x))return;m=HY({projection:n,transform:a,context:r,strategy:p,mode:l.x,clampToViewport:s})}else if(p.type==="updateGliderParameter"||p.type==="updateSliderForGlider")m=fG({context:r,projection:n,transform:a,strategy:p,targetScreenPoint:g});else{let x=l.x?0:1,E=l.x?g.x-o.x:g.y-o.y,S=c[x];if(S.type==="updateSlider"){let k=r.getItemModel(S.id);if((k==null?void 0:k.type)!=="expression")throw new Error(`Programming error: updateSlider move strategy should point to an expression item, but found ${k==null?void 0:k.type}`);let T=k.getSliderStep();if(T){let I=n.mathToPixels.mapPoint({x:0,y:0}),P=S.coefficients[1],A=Math.abs(x===0?n.mathToPixels.mapX(T/P)-I.x:n.mathToPixels.mapY(T/P)-I.y),D=Math.ceil(1/A);E=A*D*(E>0?1:-1);let G=(b=l.x)!=null?b:l.y;(G==="bigup"||G==="bigdown")&&(E*=5)}}m=bG({context:r,projection:n,transform:a,typedConstantValue:e.getTypedConstantValue(),moveStrategy:c,dragMode:t,targetScreenPoint:{x:o.x+(x===0?E:0),y:o.y+(x===1?E:0)},clampToViewport:s})}return m&&{...m,commitSliderSoftLimits:!0,transform:a,model:e}}function yG(r,e){if(!r.settings.showGrid)return;let t=Da(r),o=t.minorStepX,i=t.minorStepY,n=r.map_pt(e),a=Math.round(e.x/o)*o,s=Math.round(e.y/i)*i,l=5,c={x:a,y:s},p=r.map_pt(c);if(__dcg_shared_module_exports__['M'](p.x-n.x,p.y-n.y)<=l)return c}var iA=class{constructor(e){this.calcController=e}destroy(){}getItemModel(e){let t=this.calcController.getItemModel(e);if(t)switch(t.type){case"expression":return new xG(t);case"image":return new wG(t);case"table":return new vG(t)}}getAllItemModels(){let e=[];return this.calcController.getAllItemModels().forEach(t=>{let o=this.getItemModel(t.id);o&&e.push(o)}),e}startMovingPoints(e){$Y(this,e)}stopMovingPoints(e){YY(this,e)}movePoints(e){return{didMovePoint:jY(this,e)}}},xG=class{constructor(e){this.model=e;this.type="expression";this.id=e.id}getMoveStrategy(){return this.model.formula.move_strategy}getTypedConstantValue(){return this.model.formula.typed_constant_value}getReconciledDragMode(e){return eo(this.model,e)}isDraggingOnGrapher(){return this.model.draggingOnGraphpaper}isSliderDragging(){return this.model.sliderDragging}getSliderValue(){return Za(this.model)}getSliderStep(){return Is(this.model)}computeSliderSnappedValue(e,t){return Es(this.model,e,t)}computeSliderKeyboardAdjustment(e,t){return mT(this.model,e,t)}shouldIgnoreSoftLimits(e){var t;return((t=this.model.slider)==null?void 0:t.step)!==""&&(e&&!this.model.slider.hardMax||!e&&!this.model.slider.hardMin)}setIsDraggingOnGrapher(e){s8(this.model,e)}setIsDraggingSlider(e){xT(this.model,e)}adjustSliderByMovablePoint(e){let t=this.model.latex;return aD(this.model,e),{didMovePoint:t!==this.model.latex}}setLatex(e){let t=this.model.latex,{prefix:o}=__dcg_shared_module_exports__['Ke'](this.model.latex);return o&&(e=o+e),Ii(this.model,e),{didMovePoint:t!==this.model.latex}}commitSliderSoftLimits(){vu(this.model)}},vG=class{constructor(e){this.model=e;this.type="table";this.id=e.id}isDraggingOnGrapher(){return this.model.draggingOnGraphpaper}getColumnIndex(e){var t;return(t=Kr(this.model,e))==null?void 0:t.index}setIsDraggingOnGrapher(e){e===!0&&ar(this.model.controller.getListModel(),void 0),rq(this.model,e)}setCellLatex(e,t){return Ld(this.model,e,t),{didMovePoint:!0}}},wG=class{constructor(e){this.model=e;this.type="image";this.id=e.id}getMoveStrategy(){return this.model.formula.move_strategy}getDimensions(){return this.model.formula.dimensions}isDraggingOnGrapher(){return this.model.draggingOnGraphpaper}setIsDraggingOnGrapher(e){M4(this.model,e)}setImageMQAttribute(e,t){let o=Vy(this.model,e);Ts(this.model,e,t);let i=Vy(this.model,e);return{didMovePoint:o!==i}}};function uge(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}var hge="ID_",uw=function(){function r(){uge(this,r),this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}return r.prototype.register=function(t){var o=hge+this._lastID++;return this._callbacks[o]=t,o},r.prototype.unregister=function(t){this._callbacks[t]||pw(!1,"Dispatcher.unregister(...): `%s` does not map to a registered callback.",t),delete this._callbacks[t]},r.prototype.waitFor=function(t){this._isDispatching||pw(!1,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var o=0;o<t.length;o++){var i=t[o];if(this._isPending[i]){this._isHandled[i]||pw(!1,"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",i);continue}this._callbacks[i]||pw(!1,"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",i),this._invokeCallback(i)}},r.prototype.dispatch=function(t){this._isDispatching&&pw(!1,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."),this._startDispatching(t);try{for(var o in this._callbacks)this._isPending[o]||this._invokeCallback(o)}finally{this._stopDispatching()}},r.prototype.isDispatching=function(){return this._isDispatching},r.prototype._invokeCallback=function(t){this._isPending[t]=!0,this._callbacks[t](this._pendingPayload),this._isHandled[t]=!0},r.prototype._startDispatching=function(t){for(var o in this._callbacks)this._isPending[o]=!1,this._isHandled[o]=!1;this._pendingPayload=t,this._isDispatching=!0},r.prototype._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},r}();function pw(r,e,t,o,i,n,a,s){if(e===void 0)throw new Error("invariant requires an error message argument");if(!r){var l;if(e===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[t,o,i,n,a,s],p=0;l=new Error(e.replace(/%s/g,function(){return c[p++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}bn();function Hs(r){return __dcg_shared_module_exports__['r'](r)}function Ks(r){this.setState(r)}Ks.prototype.setState=function(r){this.state=r};Ks.prototype.getState=function(){return this.state};Ks.prototype.set=function(r,e){if(arguments.length===1){this.state=r;return}else if(typeof r=="string"){this.state=Hs(this.state),this.state[r]=e;return}let t=r.length-2,o=r[t+1],i;this.state=i=Hs(this.state);for(let n=0;n<=t;n++){let a=r[n];i=i[a]=Hs(i[a])}i[o]=e};Ks.prototype.deepMutate=function(r,e){if(arguments.length===1){e=r,this.state=__dcg_shared_module_exports__['Uc'](this.state),e(this.state);return}else if(typeof r=="string"){this.state=Hs(this.state),this.state[r]=__dcg_shared_module_exports__['Uc'](this.state[r]),e(this.state[r]);return}let t=r.length-2,o=r[t+1],i=this.state=Hs(this.state);for(let n=0;n<=t;n++){let a=r[n];i=i[a]=Hs(i[a])}i=i[o]=__dcg_shared_module_exports__['Uc'](i[o]),e(i)};Ks.prototype.shallowMutate=function(r,e){if(arguments.length===1){e=r,this.state=Hs(this.state),e(this.state);return}else if(typeof r=="string"){this.state=Hs(this.state),this.state[r]=Hs(this.state[r]),e(this.state[r]);return}let t=r.length-1,o=this.state=Hs(this.state);for(let i=0;i<=t;i++){let n=r[i];o=o[n]=Hs(o[n])}e(o)};Ks.areShallowEqual=function(r,e){};Ks.areDeepEqual=function(r,e){};var JY=[{key:"compass",objects:"Segment + Point"},{key:"midpoint",objects:"Segment"},{key:"parallel",objects:"Line + Point"},{key:"perpendicular",objects:"Line + Point"},{key:"image",objects:"2 Points"}];function gge(r,e){var a;if(e.typedRuntimeValue.valueType===__dcg_shared_module_exports__['Qa']||e.typedRuntimeValue.valueType===__dcg_shared_module_exports__['Ra'])return[];let t=e.data.call;if(!t||!t.parents)return[];let o=t.symbol,i=t.parents.map(lb),n;switch(o){case"circle":{let[s,l]=i,c=l&&((a=r[l])==null?void 0:a.typedRuntimeValue.valueType);c&&__dcg_shared_module_exports__['wb'](c,__dcg_shared_module_exports__['Ea'])?n=[s]:n=[s,l];break}case"apply":{n=[i[1]];break}case"parallel":case"perpendicular":{n=[i[1]];break}case"polygon":{n=i.every(s=>s!==void 0)?i:[];break}default:n=i}return n.filter(QY)}var mge=[[1,0],[0,0],!1],hw=class hw{constructor(e,t){let o=(e==null?void 0:e.list)||[];t&&(o=o.concat(t)),this.list=o;let i=(e==null?void 0:e.forward)||mge;t&&(i=__dcg_shared_module_exports__['nc'](i,t.value)),this.forward=i,this.inverse=__dcg_shared_module_exports__['oc'](i)}add(e){return new hw(this,e)}equals(e){if(this.list.length!==e.list.length)return!1;for(let t=this.list.length-1;t>=0;t--){let o=this.list[t],i=e.list[t];if(!__dcg_shared_module_exports__['s'](o,i))return!1}return!0}isCompletelyRigid(){return this.list.length===0}};hw.COMPLETELY_RIGID=new hw(void 0);var nA=hw;function fge(r){var o,i;let e={},t={};for(let n in r){let a=r[n];if(!a)continue;for(let l of((o=a.data.call)==null?void 0:o.parents)||[]){let c=lb(l);c&&(e[c]||(e[c]=[]),(i=e[c])==null||i.push(a.assignment))}let s=gge(r,a);t[a.assignment]=s}return{parentToChildren:e,childToReversibilityParents:t}}function ZY(r){let e=[],t={};function a(s){var l;t[s]!==2&&(t[s]=1,(l=r[s])==null||l.forEach(a),t[s]=2,e.unshift(s))}for(let s in r)t[s]===void 0&&a(s);return e}function SG(r,e){var h,g,m,b,x,E,S,k,T,I;let t={},o={},i={},n={},a={};for(let P of e)a[P]=!0,i[P]=nA.COMPLETELY_RIGID;let{parentToChildren:s,childToReversibilityParents:l}=fge(r);for(let P of ZY(l)){let A=r[P];if(!A)continue;let D=(h=A.data.call)==null?void 0:h.symbol,G=(((g=A.data.call)==null?void 0:g.parents)||[]).map(lb).filter(QY);if(i[A.assignment])if(A.typedRuntimeValue.valueType===__dcg_shared_module_exports__['va']&&!D)t[A.assignment]=i[A.assignment];else if(D==="glider"&&G.length&&!a[G[0]])o[A.assignment]=i[A.assignment];else{let N=i[A.assignment];if(D==="apply"){let K=(m=r[G[0]])==null?void 0:m.typedRuntimeValue;if((K==null?void 0:K.valueType)===__dcg_shared_module_exports__['Ra'])return{};if((K==null?void 0:K.valueType)!==__dcg_shared_module_exports__['Qa'])continue;N=N.add(K)}let U=(b=l[A.assignment])!=null?b:[];for(let K of U)i[K]?N.equals(i[K])||(i[K]=nA.COMPLETELY_RIGID,n[K]=!0):i[K]=N}}let c={};for(let P in i)c[P]=!0;for(let P of ZY(s))if(c[P]){for(let A of s[P]||[])c[A]=!0;if(i[P]){let A=l[P]||[];for(let D of A)n[D]&&(n[P]=!0)}}for(let P in o){let D=(((E=(x=r[P])==null?void 0:x.data.call)==null?void 0:E.parents)||[]).map(lb)[0];D&&c[D]&&(n[D]=!0)}for(let P in r){if(!c[P])continue;let A=r[P],D=(S=A==null?void 0:A.data.call)==null?void 0:S.symbol,G=(((k=A==null?void 0:A.data.call)==null?void 0:k.parents)||[]).map(lb);if(D==="apply"&&i[P]){let N=G[1],U=G[0];if(!N||!U)continue;let K=(((I=(T=r[U])==null?void 0:T.data.call)==null?void 0:I.parents)||[]).map(lb),H=K.some(F=>F&&c[F]);if(i[P].isCompletelyRigid()&&(!(N in i)||i[N].isCompletelyRigid())||H){n[N]=!0;for(let F of K)F&&(n[F]=!0)}}}let p=[];for(let P in n)a[P]||p.push(P);return p.length?SG(r,e.concat(p)):{...t,...o}}function lb(r){if(r.type==="arbitrary-expression")return;let e=__dcg_shared_module_exports__['Lc'](r);return e?__dcg_shared_module_exports__['ia'](e):void 0}function QY(r){return r!==void 0}var gw=class{constructor(){this._nextId=0;this._defs={}}clear(){this._nextId=0,this._defs={}}add(e,t){let o;t?(o=e.assignment,e.listIndex!==void 0&&(o+="\\left["+e.listIndex+"\\right]")):o="**geo-internal-id-"+this._nextId++,this._defs[o]=e}computeReversibilityLineages(e){var s;let t=this.buildAssignmentMap(),o={};for(let l in t){let c=t[l];c&&(o[c.calcId]=c)}let i=[];for(let l of e){let c=o[l];if(!c)return{};i.push(c.assignment)}let n=SG(this.buildAssignmentMap(),i),a={};for(let l in n){let c=(s=t[l])==null?void 0:s.calcId;c&&(a[c]=n[l])}return a}buildAssignmentMap(){let e={};for(let t in this._defs){let o=this._defs[t];o&&(e[o.assignment]=o)}return e}getDepthValues(){let e={},t={},o=this.buildAssignmentMap();for(let l in o){let c=o[l];if(!c)continue;let p=__dcg_shared_module_exports__['ja'](c.assignment),h=[];for(let g of c.data.parentDependencies)h.push(g),t[g]||(t[g]=[]),t[g].push(p);e[p]=h}let i={},n=l=>{if(i[l]!==void 0)return i[l];if(i[l]===-1)return i[l]=0,0;i[l]=-1;let c=-1,p=e[l]||[];for(let g=0;g<p.length;g++){let m=n(p[g]);m>c&&(c=m)}let h=c+1;return i[l]=h,h};for(let l in e)i[l]===void 0&&n(l);let a={},s={};for(let l in t){let c=i[l],p=1/0;t[l].forEach(h=>{let g=i[h];g>c&&(c=g),g<p&&(p=g)}),a[l]=c,s[l]=p}return{createdDepth:i,lastReferencedDepth:a,firstReferencedDepth:s}}};function _h(r){return r?!!(bge(r)&&r!==__dcg_shared_module_exports__['Sa']||r===__dcg_shared_module_exports__['Ga']||r===__dcg_shared_module_exports__['Ha']||r===__dcg_shared_module_exports__['Da']):!1}function bge(r){if(!r)return!1;switch(r){case __dcg_shared_module_exports__['Ia']:case __dcg_shared_module_exports__['Ka']:case __dcg_shared_module_exports__['Sa']:case __dcg_shared_module_exports__['Ea']:return!0}return!1}function rX(r,e){let t={i:0,x:NaN,y:NaN},o={i:1,x:NaN,y:NaN};if(!r||!e)return[t,o];let i=eX(r.typedRuntimeValue),n=eX(e.typedRuntimeValue);if(!i||!n)return[t,o];let a=tX(i,n);return t.x=a[0],t.y=a[1],a=tX(n,i),o.x=a[0],o.y=a[1],[t,o]}function eX(r){switch(r.valueType){case __dcg_shared_module_exports__['Ea']:case __dcg_shared_module_exports__['Ia']:case __dcg_shared_module_exports__['Ka']:return{type:"straight",def:r.value};case __dcg_shared_module_exports__['Sa']:return{type:"straight",def:ah(r.value)};case __dcg_shared_module_exports__['Ga']:return{type:"circle",def:r.value};case __dcg_shared_module_exports__['Ha']:return{type:"arc",def:r.value}}}function tX(r,e){switch(r.type){case"straight":switch(e.type){case"straight":return __dcg_shared_module_exports__['gc'](r.def,e.def);case"circle":return __dcg_shared_module_exports__['ec'](r.def,e.def);case"arc":return __dcg_shared_module_exports__['ic'](r.def,e.def)}case"circle":switch(e.type){case"straight":return __dcg_shared_module_exports__['fc'](r.def,e.def);case"circle":return __dcg_shared_module_exports__['dc'](r.def,e.def);case"arc":return __dcg_shared_module_exports__['hc'](r.def,e.def)}case"arc":switch(e.type){case"straight":return __dcg_shared_module_exports__['kc'](r.def,e.def);case"circle":return __dcg_shared_module_exports__['jc'](r.def,e.def);case"arc":return __dcg_shared_module_exports__['lc'](r.def,e.def)}}return[NaN,NaN]}var Gp=class extends Rs{constructor(t){super(t);this.model=t;this.displayNameKey="graphing-calculator-text-geometry-tool-expression-edit-display-name",this.toolType="custom",this.toolName="expression-edit"}getHint(){let t=this.model.controller.getValidCursorContext();if((t==null?void 0:t.type)!=="expression-arguments"||!t.functionSymbol)return this.getGenericHint();let o=this.model.getTool(t.functionSymbol);if(!o)return this.getGenericHint();let i=t.argIndex;if(t.positionWithinArg==="end"&&(i+=1),o.toolType==="transformation"){if(t.argCount===0)return ko("graphing-calculator-text-geometry-tool-expression-edit-starting-transformation-hint");i>0&&(i-=1)}return o.getExpressionEditHint(i)}getGenericHint(){let t=this.getAllValidNextInputTypes();if(t.some(i=>i===__dcg_shared_module_exports__['ta']||i===__dcg_shared_module_exports__['xa']))return ko("graphing-calculator-text-geometry-tool-expression-edit-generic-hint-any-object");let o=t.filter(i=>!(__dcg_shared_module_exports__['qb'](i)&&t.find(n=>__dcg_shared_module_exports__['rb'](i)===n))).map(i=>xl(__dcg_shared_module_exports__['pb'](i),Fy()));return o.length===0?ko("graphing-calculator-text-geometry-tool-expression-edit-generic-hint-0"):o.length===1?ko("graphing-calculator-text-geometry-tool-expression-edit-generic-hint-1",{type:o[0]}):o.length===2?ko("graphing-calculator-text-geometry-tool-expression-edit-generic-hint-2",{type1:o[0],type2:o[1]}):ko("graphing-calculator-text-geometry-tool-expression-edit-generic-hint-many",{types:Zn(ZP(),o)})}getExpressionEditHint(t){return this.getHint()}getSpec(){let t=this.model.controller.getSelectedItem(),o=TG(this.model.controller.getValidCursorContext());return!o||!t||t.type!=="expression"?{inputs:[],outputs:[]}:{inputs:[{type:"union",valueTypes:o,id:"1"}],outputs:[{type:"expression-edit-preview-latex",rhsLatex:this.buildPreviewLatex(),hidden:!1,color:t.color,id:"2",parents:[]}]}}onMove(t){super.onMove(t);let{idMap:o,inputIndex:i}=this.model.getNonObjectsState().ui.currentTool,n=this.getSpec().inputs[i];return!!(n&&o[n.id])}buildPreviewLatex(){let t="",o="",i=this.model.controller.getValidCursorContext(),n=(i==null?void 0:i.type)==="permissive"?i.cursorContext:i;if((n==null?void 0:n.type)==="empty")return"";(n==null?void 0:n.type)==="expression-arguments"&&((n==null?void 0:n.positionWithinArg)==="end"?t=",":(n==null?void 0:n.positionWithinArg)==="start"&&(o=","));let s=this.model.getNonObjectsState().ui.currentTool.idMap[1];if(!s)return"";let l=this.model.controller.getSelectedItem();if((l==null?void 0:l.type)!=="expression")return"";let c=qe.getFocusedMathquill(),p=c==null?void 0:c.selection();if((p==null?void 0:p.latex)!==l.latex)return"";let h=l.latex.slice(0,p.startIndex)+t+s+o+l.latex.slice(p.endIndex);return uo(l)?h.slice(l.latex.indexOf("=")+1):h}canNextInputBePoint(){let t=this.model.controller.getValidCursorContext();if((t==null?void 0:t.type)!=="expression-arguments"||t.expressionType!=="FunctionCall"&&t.expressionType!=="List")return!1;let o=TG(t);if(!o)return!1;let i=!1;for(let n of o){if(__dcg_shared_module_exports__['wb'](n,__dcg_shared_module_exports__['ta']))return!1;__dcg_shared_module_exports__['wb'](n,__dcg_shared_module_exports__['va'])&&(i=!0)}return i}shouldHighlightRelevantObjects(){let t=this.model.controller.getValidCursorContext();if((t==null?void 0:t.type)==="empty"||(t==null?void 0:t.type)==="permissive")return!1;let o=TG(t);return!(!o||o.some(i=>__dcg_shared_module_exports__['wb'](i,__dcg_shared_module_exports__['ta']))||o.every(i=>__dcg_shared_module_exports__['wb'](i,__dcg_shared_module_exports__['ua'])||__dcg_shared_module_exports__['wb'](i,__dcg_shared_module_exports__['Ua'])||__dcg_shared_module_exports__['wb'](i,__dcg_shared_module_exports__['Ma'])||__dcg_shared_module_exports__['wb'](i,__dcg_shared_module_exports__['Oa'])))}};function TG(r){if((r==null?void 0:r.type)==="permissive")return[__dcg_shared_module_exports__['ta']];if((r==null?void 0:r.type)==="empty")return[__dcg_shared_module_exports__['Ma'],__dcg_shared_module_exports__['Oa'],__dcg_shared_module_exports__['Na'],__dcg_shared_module_exports__['Pa'],__dcg_shared_module_exports__['Sa']];if((r==null?void 0:r.type)==="expression-arguments"&&r.expressionType==="FunctionCall"&&r.functionSymbol&&!__dcg_shared_module_exports__['wc'][r.functionSymbol])return;let e=(r==null?void 0:r.type)==="expression-arguments"?r.allowedTypesForInsertedArg:r==null?void 0:r.allowedTypes;return e==null?void 0:e.filter(t=>!__dcg_shared_module_exports__['wb'](t,__dcg_shared_module_exports__['jb']))}var kG="graphing-calculator-text-geometry-tool-angle-hint-1",EG="graphing-calculator-text-geometry-tool-angle-hint-2",IG="graphing-calculator-text-geometry-tool-angle-hint-3",CG="graphing-calculator-text-geometry-tool-angles-hint-1",yge={name:"angle",displayNameKey:"graphing-calculator-text-geometry-tool-angle-display-name",toolType:"complex",icon:[{type:"stroked-path",path:[40,30,30,70,70,70],color:"#bbb"},{type:"angle",x:30,y:70,radius:20,startAngle:-1.325817,deltaAngle:1.325817,isDirected:!1},{type:"point",x:30,y:70},{type:"point",x:40,y:30},{type:"point",x:70,y:70}],workflows:[{input:{broadcast:!0,types:[__dcg_shared_module_exports__['va'],__dcg_shared_module_exports__['va'],__dcg_shared_module_exports__['va']],hints:[kG,EG,IG]},output:[{type:"angle",parents:[0,1,2]}]},{input:{broadcast:!1,types:[__dcg_shared_module_exports__['Da']],hints:[CG]},output:({inputs:r})=>{if(r.length!==1||r[0].valueType!==__dcg_shared_module_exports__['Da'])throw new Error(`Programming error: expected a single polygon input, got ${JSON.stringify(r)}`);return r[0].value.map((t,o)=>({type:"polygon-angle",angleIndex:o+1,parents:[0]}))}}]},mw=class extends gr{constructor(t){super(t,yge);this.model=t}};var xge="graphing-calculator-text-geometry-tool-angle-bisector-hint-angle",vge={name:"anglebisector",displayNameKey:"graphing-calculator-text-geometry-tool-angle-bisector-display-name",toolType:"complex",icon:[{type:"stroked-path",color:"#ccc",path:[40,30,30,70,70,70]},{type:"angle",x:30,y:70,radius:20,startAngle:-1.325817,deltaAngle:1.325817,isDirected:!1},{type:"stroked-path",lineWidth:"large",path:[31,69,70,38.8]}],workflows:[{input:{broadcast:!1,types:[__dcg_shared_module_exports__['mb'].of([__dcg_shared_module_exports__['Ma'],__dcg_shared_module_exports__['Oa']])],hints:[xge]},output:[{type:"anglebisector",parents:[0]}]}]},fw=class extends gr{constructor(t){super(t,vge);this.model=t}};var wge="graphing-calculator-text-geometry-tool-arc-hint-1",Sge="graphing-calculator-text-geometry-tool-arc-hint-2",Tge="graphing-calculator-text-geometry-tool-arc-hint-3",Mh=50,aA=80,sA=80,_G=-3,oX=-2.6,MG=-1.7,kge=[{type:"arc",x:aA,y:sA,radius:Mh,startAngle:_G,endAngle:MG},{type:"point",x:aA+Mh*Math.cos(_G),y:sA+Mh*Math.sin(_G)},{type:"point",x:aA+Mh*Math.cos(oX),y:sA+Mh*Math.sin(oX)},{type:"point",x:aA+Mh*Math.cos(MG),y:sA+Mh*Math.sin(MG)}],Ege={name:"arc",displayNameKey:"graphing-calculator-text-geometry-tool-arc-display-name",toolType:"complex",icon:kge,workflows:[{input:{broadcast:!0,types:[__dcg_shared_module_exports__['va'],__dcg_shared_module_exports__['va'],__dcg_shared_module_exports__['va']],hints:[wge,Sge,Tge]},output:[{type:"arc",parents:[0,1,2]}]}]},bw=class extends gr{constructor(t){super(t,Ege);this.model=t}};var Ige="graphing-calculator-text-geometry-tool-circle-hint-center",Cge="graphing-calculator-text-geometry-tool-circle-hint-radius",_ge={name:"circle",displayNameKey:"graphing-calculator-text-geometry-tool-circle-display-name",toolType:"simple",icon:[{type:"circle",x:50,y:50,radius:26},{type:"point",x:50,y:50},{type:"point",x:68,y:32}],workflows:[{input:{broadcast:!0,types:[__dcg_shared_module_exports__['va'],__dcg_shared_module_exports__['va']],hints:[Ige,Cge]},output:[{type:"circle",parents:[0,1]}]}]},yw=class extends gr{constructor(t){super(t,_ge);this.model=t}};var Mge="graphing-calculator-text-geometry-tool-compass-hint-segment",Age="graphing-calculator-text-geometry-tool-compass-hint-center",Lge={name:"compass",displayNameKey:"graphing-calculator-text-geometry-tool-circle-by-length-display-name",toolType:"complex",icon:[{type:"ellipse",x:50,y:65,rx:26,ry:11,color:__dcg_shared_module_exports__['Md'].GRAY,lineWidth:2},{type:"stroked-path",path:[50,65,78,65]},{type:"stroked-path",path:[50,65,62,36],lineWidth:"large",color:r=>__dcg_shared_module_exports__['Fd'](r.circle,.3)},{type:"stroked-path",path:[78,65,66,36],lineWidth:"large",color:r=>__dcg_shared_module_exports__['Fd'](r.circle,.3)},{type:"circle",radius:6,x:64,y:31,lineWidth:5,color:r=>__dcg_shared_module_exports__['Fd'](r.circle,.3)},{type:"stroked-path",path:[64,24,64,18],lineWidth:"large",color:r=>__dcg_shared_module_exports__['Fd'](r.circle,.3)},{type:"point",x:50,y:65},{type:"point",x:78,y:65}],workflows:[{input:{broadcast:!0,types:[__dcg_shared_module_exports__['Ea'],__dcg_shared_module_exports__['va']],hints:[Mge,Age]},output:[{type:"circle",parents:[1,0]}]}]},xw=class extends gr{constructor(t){super(t,Lge);this.model=t}};var iX="graphing-calculator-text-geometry-tool-dilation-hint-center",nX="graphing-calculator-text-geometry-tool-dilation-hint-scale-factor",Pge="graphing-calculator-text-geometry-tool-dilation-hint-construct-scale-factor",Dge="graphing-calculator-text-geometry-tool-dilation-hint-scale-second-segment",vw=class extends Gs{constructor(t){super(t);this.model=t;this.displayNameKey="graphing-calculator-text-geometry-tool-dilate-display-name",this.toolName="dilation",this.toolType="transformation"}isNumberInputAllowed(){return Ec(this.model.controller.getGeometryToolbarModel()).dilationToolInput}getMode(){let{idMap:t}=this.model.getNonObjectsState().ui.currentTool;return this.isNumberInputAllowed()&&t["2-number"]?"number":"segment-ratio"}getExpressionEditHint(t){return t===0?this.s(iX):this.s(nX)}onNumberInput(t){super.onNumberInput(t),this.clearTentativeOutputs()}onMove(t){return this.getMode()==="number"&&this.model.getNonObjectsState().ui.currentTool.inputIndex===1?!1:super.onMove(t)}getSpecIdToLockIn(t,o){if(o===1){let i=t.inputs[o];return this.getMode()==="number"?`${i.id}-number`:i.id}return super.getSpecIdToLockIn(t,o)}getSpec(){let t={inputs:[{type:"point",id:"1",hint:iX},{type:"union",valueTypes:[__dcg_shared_module_exports__['Ea']],id:"2",hint:this.isNumberInputAllowed()?nX:Pge,numberInputInfo:this.isNumberInputAllowed()?{defaultLatex:"",sliderInfo:{value:"2",min:"0",max:"5"}}:void 0}],outputs:[]};if(this.getMode()==="segment-ratio"){let{inputIndex:o}=this.model.getNonObjectsState().ui.currentTool;o>1&&delete t.inputs[1].numberInputInfo,t.inputs.push({type:"segment",id:"3",hint:Dge}),t.outputs.push({id:"ratio-output",type:"dilate",hidden:!1,name:this.generateDefaultName(),parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2"},{type:"reference-input",id:"3"}]})}else t.outputs.push({id:"number-output",type:"dilate",hidden:!1,name:this.generateDefaultName(),parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2-number"}]});return t}};var Oge={name:"directedangle",displayNameKey:"graphing-calculator-text-geometry-tool-directedangle-display-name",toolType:"complex",icon:[{type:"stroked-path",path:[40,30,30,70,70,70],color:"#bbb"},{type:"angle",x:30,y:70,radius:20,isDirected:!0,startAngle:-1.325817,deltaAngle:1.325817},{type:"stroked-path",path:[35,50,41,50,37,55,35,50],color:"#000",lineWidth:"medium"},{type:"point",x:30,y:70},{type:"point",x:40,y:30},{type:"point",x:70,y:70}],workflows:[{input:{broadcast:!0,types:[__dcg_shared_module_exports__['va'],__dcg_shared_module_exports__['va'],__dcg_shared_module_exports__['va']],hints:[kG,EG,IG]},output:[{type:"directedangle",parents:[0,1,2]}]},{input:{broadcast:!1,types:[__dcg_shared_module_exports__['Da']],hints:[CG]},output:({inputs:r})=>{if(r.length!==1||typeof r[0]!="object"||r[0].valueType!==__dcg_shared_module_exports__['Da'])throw new Error(`Programming error: expected a single polygon input, got ${JSON.stringify(r)}`);return r[0].value.map((t,o)=>({type:"polygon-directedangle",angleIndex:o+1,parents:[0]}))}}]},ww=class extends gr{constructor(t){super(t,Oge);this.model=t}};var Rge="graphing-calculator-text-geometry-tool-line-hint-start",Fge="graphing-calculator-text-geometry-tool-line-hint-end",Gge={name:"line",displayNameKey:"graphing-calculator-text-geometry-tool-line-display-name",toolType:"simple",icon:[{type:"stroked-path",path:[78,22,22,78],lineWidth:"large"},{type:"point",x:68,y:32},{type:"point",x:32,y:68}],workflows:[{input:{broadcast:!0,types:[__dcg_shared_module_exports__['va'],__dcg_shared_module_exports__['va']],hints:[Rge,Fge]},output:[{type:"line",parents:[0,1]}]}]},Sw=class extends gr{constructor(t){super(t,Gge);this.model=t}};var aX="graphing-calculator-text-geometry-tool-midpoint-hint",Nge={name:"midpoint",displayNameKey:"graphing-calculator-text-geometry-tool-midpoint-display-name",toolType:"simple",icon:[{type:"stroked-path",path:[32,32,68,68]},{type:"point",x:50,y:50,size:"large"},{type:"point",x:32,y:32,size:"medium"},{type:"point",x:68,y:68,size:"medium"}],workflows:[{input:{broadcast:!0,types:[__dcg_shared_module_exports__['va'],__dcg_shared_module_exports__['va']],hints:[aX]},output:[{type:"midpoint",parents:[0,1]}]},{input:{broadcast:!0,types:[__dcg_shared_module_exports__['Ea']],hints:[aX]},output:[{type:"midpoint",parents:[0]}]}]},Tw=class extends gr{constructor(t){super(t,Nge);this.model=t}};var Vge="graphing-calculator-text-geometry-tool-parallel-hint-straight-line",Bge="graphing-calculator-text-geometry-tool-parallel-hint-point",Uge={name:"parallel",displayNameKey:"graphing-calculator-text-geometry-tool-parallel-display-name",toolType:"complex",icon:[{type:"stroked-path",color:"light",path:[25,50,75,30],lineWidth:"large"},{type:"stroked-path",path:[25,70,75,50],lineWidth:"large"},{type:"point",x:50,y:60,size:"medium"}],workflows:[{input:{broadcast:!0,types:[__dcg_shared_module_exports__['vb'],__dcg_shared_module_exports__['va']],hints:[Vge,Bge]},output:[{type:"parallel",parents:[0,1]}]}]},kw=class extends gr{constructor(t){super(t,Uge);this.model=t}};var zge="graphing-calculator-text-geometry-tool-perpendicular-hint-straight-line",qge="graphing-calculator-text-geometry-tool-perpendicular-hint-point",Hge={name:"perpendicular",displayNameKey:"graphing-calculator-text-geometry-tool-perpendicular-display-name",toolType:"complex",icon:[{type:"stroked-path",color:"light",path:[40,25,60,75],lineWidth:"large"},{type:"stroked-path",path:[25,60,75,40],lineWidth:"large"},{type:"point",x:50,y:50,size:"medium"}],workflows:[{input:{broadcast:!0,types:[__dcg_shared_module_exports__['vb'],__dcg_shared_module_exports__['va']],hints:[zge,qge]},output:[{type:"perpendicular",parents:[0,1]}]}]},Ew=class extends gr{constructor(t){super(t,Hge);this.model=t}};var Kge="graphing-calculator-text-geometry-tool-point-hint",Wge={name:"point",displayNameKey:"graphing-calculator-text-geometry-tool-point-display-name",toolType:"simple",icon:[{type:"point",x:50,y:50,size:"large"}],workflows:[{input:{broadcast:!0,types:[__dcg_shared_module_exports__['va']],hints:[Kge]},output:[]}]},Iw=class extends gr{constructor(t){super(t,Wge);this.model=t}};var $ge="graphing-calculator-text-geometry-tool-polygon-hint-first-point",jge="graphing-calculator-text-geometry-tool-polygon-hint-next-point",Yge="graphing-calculator-text-geometry-tool-polygon-hint-finish-point",Xge={name:"polygon",displayNameKey:"graphing-calculator-text-geometry-tool-polygon-display-name",toolType:"complex",icon:[{type:"filled-polygon",path:[55,30,30,30,35,70,70,60,55,30]},{type:"stroked-path",path:[55,30,30,30,35,70,70,60,55,30]},{type:"point",x:55,y:30},{type:"point",x:30,y:30},{type:"point",x:35,y:70},{type:"point",x:70,y:60}],isDegenerateInput:({previousInputs:r,proposedInput:e})=>!!(r.length===1&&__dcg_shared_module_exports__['s'](r[0],e)),workflows:[{input:{broadcast:!0,types:{type:"variadic",initial:[__dcg_shared_module_exports__['va'],__dcg_shared_module_exports__['va']],rest:__dcg_shared_module_exports__['va']},hints:r=>r===0?$ge:r<3?jge:Yge},output:({inputs:r,isCommitting:e})=>((e||__dcg_shared_module_exports__['s'](r[r.length-1],r[r.length-2]))&&(r=r.slice(0,-1)),[{type:"polygon",hidden:!1,parents:r.map((t,o)=>o)}]),canCommit:r=>{if(r.length<2)return!1;let e=r[r.length-1],t=r[r.length-2],o=r[0];return __dcg_shared_module_exports__['s'](e,o)||__dcg_shared_module_exports__['s'](e,t)}}]},Cw=class extends gr{constructor(t){super(t,Xge);this.model=t}};var Jge="graphing-calculator-text-geometry-tool-ray-hint-start",Zge="graphing-calculator-text-geometry-tool-ray-hint-end",Qge={name:"ray",displayNameKey:"graphing-calculator-text-geometry-tool-ray-display-name",toolType:"simple",icon:[{type:"stroked-path",path:[78,22,32,68],lineWidth:"large"},{type:"point",x:68,y:32},{type:"point",x:32,y:68}],workflows:[{input:{broadcast:!0,types:[__dcg_shared_module_exports__['va'],__dcg_shared_module_exports__['va']],hints:[Jge,Zge]},output:[{type:"ray",parents:[0,1]}]}]},_w=class extends gr{constructor(t){super(t,Qge);this.model=t}};var sX="graphing-calculator-text-geometry-tool-reflection-hint-choose-line",Mw=class extends Gs{constructor(t){super(t);this.model=t;this.displayNameKey="graphing-calculator-text-geometry-tool-reflect-display-name",this.toolName="reflection",this.toolType="transformation"}getExpressionEditHint(t){return this.s(sX)}getSpec(){return{inputs:[{type:"straight",id:"1",hint:sX}],outputs:[{id:"2",type:"reflect",hidden:!1,name:this.generateDefaultName(),parents:[{type:"reference-input",id:"1"}]}]}}};var eme="graphing-calculator-text-geometry-tool-segment-hint-start",tme="graphing-calculator-text-geometry-tool-segment-hint-end",rme={name:"segment",displayNameKey:"graphing-calculator-text-geometry-tool-segment-display-name",toolType:"simple",icon:[{type:"stroked-path",path:[68,32,32,68],lineWidth:"large"},{type:"point",x:68,y:32},{type:"point",x:32,y:68}],workflows:[{input:{broadcast:!0,types:[__dcg_shared_module_exports__['va'],__dcg_shared_module_exports__['va']],hints:[eme,tme]},output:[{type:"segment",parents:[0,1]}]}]},Aw=class extends gr{constructor(t){super(t,rme);this.model=t}};var Lw=class{constructor(){this.displayNameKey="graphing-calculator-text-geometry-tool-selection-display-name";this.toolType="selection";this.icon=[{type:"filled-polygon",color:"#000",path:[40,30,58,46,51,47,56,60,53,62,47,49,41,54,40,30]}]}getNumberInputLatex(){return""}clearTentativeOutputs(){}canNextInputBePoint(){return!1}getAllValidNextInputTypes(){return __dcg_shared_module_exports__['nb'].filter(e=>this.isValidNextInputType(e))}isValidNextInputType(e){return e!==__dcg_shared_module_exports__['Qa']}getNonPointInputType(){}getHint(){return""}getExpressionEditHint(e){return this.getHint()}onNumberInput(e){}onMove(e){return!0}onFocus(e){}tryCommitResults(){return{committed:void 0}}shouldUseJitEdges(){return!1}shouldHighlightRelevantObjects(){return!1}};var AG="graphing-calculator-text-geometry-tool-translation-hint-from-with-vector",lX="graphing-calculator-text-geometry-tool-translation-hint-to",Pw=class extends Gs{constructor(t){super(t);this.model=t;this.displayNameKey="graphing-calculator-text-geometry-tool-translate-display-name",this.toolName="translation",this.toolType="transformation"}getExpressionEditHint(t){return t===0?this.s(AG):this.s(lX)}firstInputIsVector(){let{idMap:t}=this.model.getNonObjectsState().ui.currentTool,o=t[1],i=o&&this.model.findDefsForInputId(o)[0];return i&&i.typedRuntimeValue.valueType===__dcg_shared_module_exports__['Sa']}getSpec(){return this.firstInputIsVector()?{inputs:[{type:"union",valueTypes:[__dcg_shared_module_exports__['va'],__dcg_shared_module_exports__['Sa']],id:"1",hint:AG}],outputs:[{id:"3",type:"translate",hidden:!1,name:this.generateDefaultName(),parents:[{type:"reference-input",id:"1"}]}]}:{inputs:[{type:"union",valueTypes:[__dcg_shared_module_exports__['va'],__dcg_shared_module_exports__['Sa']],id:"1",hint:AG},{type:"point",id:"2",hint:lX}],outputs:[{id:"3",type:"translate",hidden:!1,name:this.generateDefaultName(),parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2"}]}]}}};var ome={selection:Lw,point:Iw,line:Sw,segment:Aw,ray:_w,vector:av,circle:yw,arc:bw,parallel:kw,perpendicular:Ew,midpoint:Tw,polygon:Cw,compass:xw,angle:mw,directedangle:ww,reflect:Mw,translate:Pw,rotate:nh,dilate:vw,anglebisector:fw,"box-selection":rh,"expression-edit":Gp},LG=ome;var ime=!0,nme=!1,dX="**dcg_geo_tool_output_slider**";function ame(){return{point:__dcg_shared_module_exports__['Md'].PURPLE,line:__dcg_shared_module_exports__['Md'].BLUE,circle:__dcg_shared_module_exports__['Md'].GREEN,polygon:__dcg_shared_module_exports__['Md'].BLUE,angle:__dcg_shared_module_exports__['Md'].BLACK}}function sme(r,e){let t=[],o=r.parents;for(let i=0;i<o.length;i++){let n=o[i];n.type==="hardcoded"?t[i]=n.id:t[i]=e[n.id]}return t}var Dw=class{constructor(e){this.availableInputTypes=new Set;this._nextObjectId=0;this.clear(),this.controller=e,this.s=this.controller.s,this._tools={};for(let t in LG)this._tools[t]=new LG[t](this)}onPreviewChange(){var n;let e=this.controller.getToolPreviewJSONState(),t=this.getUncommittedObjects();if(this.getCurrentTool()instanceof Gp&&!this.controller.getValidCursorContext()){t={...t};for(let a in e){let s=e[a];s.type==="expression-edit-preview-latex"&&(t[a]=s)}}let i=this.getNonObjectsState().ui.currentTool.lockedIds;for(let a in t){let s=t[a];s.type==="polygon-segment"&&(!i[a]||Object.keys(t).some(l=>!i[l]&&t[l].parents.includes(a)))&&(t[a]={...s,showAsSepratePreviewObject:!0})}__dcg_shared_module_exports__['s'](e,t)?this.controller.dispatch({type:"render"}):this.controller.dispatch({type:"set-tool-preview-state",state:t}),(n=this.controller.get2dPOIController())==null||n.updateGeoHoveredObjects()}peekNextObjectId(){return"\\token{"+this._nextObjectId.toString()+"}"}generateObjectId(){let e=this.peekNextObjectId();return this._nextObjectId+=1,e}updateNextObjectId(e){e>this._nextObjectId&&(this._nextObjectId=e)}clear(){let e={objects:{},ui:{currentTool:{name:"selection",idMap:{},reusableInputIdMap:{},lockedIds:{},inputIndex:0,outputHistory:{},forceSingleUse:!1},colors:ame(),clickToInsertMode:"valid-type"},hoveredObjects:[],uncommittedIds:{},selectedIds:{},nextSelectionNumber:1,fadeAnimations:{},maxAnimationEndTime:0};this.store?this.store.set(e):this.store=new Ks(e)}onFocus(e){this.clearHoveredObjects(),this.getCurrentTool().onFocus(e),this.onPreviewChange()}onMouseAction(e,t){let o=this.getCurrentTool();if(o instanceof Gp&&!this.controller.getValidCursorContext())return{committed:void 0,handled:!1};switch(this.updateNextObjectId(this.controller.findLastTokenNumber()+1),this.clearHoveredObjects(),e){case"move":return{committed:void 0,handled:o.onMove(t)};case"release":o.onMove(t);let i=o.tryCommitResults();return i.committed?{...i,handled:!0}:{committed:void 0,handled:!1}}}generatePureToolOutput(e,t){let o=this.getTool(e);if(!(o instanceof gr))return;let i=t.map(p=>p.typedValue),n=o.getMatchingWorkflow(i);if(!n)return;let a=dR(n.firstMatch,i,!1),s={},l={};for(let p=0;p<t.length;p++)l[p]=t[p].referenceLatex;this.updateNextObjectId(this.controller.findLastTokenNumber()+1),this.generateIdsForNewToolOutputs(a);let{ui:c}=this.getNonObjectsState();for(let p of a){let h=c.currentTool.idMap[p.id];s[h]={...p,color:this.defaultColorForObject(c,p),id:h,parents:p.parents.map((g,m)=>{var b;return(b=l[m])!=null?b:""})}}return{canCommit:n.canCommit,outputs:s}}getNonObjectsState(){return{...this.store.getState(),objects:void 0}}getCurrentTool(){return this.getTool(this.getToolMode())}getTool(e){return this._tools[e]}getClickToInsertMode(){return this.store.getState().ui.clickToInsertMode}setClickToInsertMode(e){this.store.set(["ui","clickToInsertMode"],e)}defaultColorForObject(e,t){switch(t.type){case"point":case"point-reference":case"midpoint":case"glider":case"intersection":case"vector-endpoint":return e.colors.point;case"polygon-segment":return t.polygonColor||e.colors.line;case"line":case"segment":case"ray":case"vector":case"vector-copy":case"perpendicular":case"parallel":case"anglebisector":return e.colors.line;case"circle":case"compass":case"arc":return e.colors.circle;case"polygon":return e.colors.polygon;case"angle":case"polygon-angle":case"directedangle":case"polygon-directedangle":return e.colors.angle;case"dilate":case"reflect":case"rotate":case"translate":return __dcg_shared_module_exports__['Md'].GRAY;case"slider":return __dcg_shared_module_exports__['Md'].BLACK;case"expression-edit-preview-latex":return t.color||__dcg_shared_module_exports__['Md'].BLACK;default:return t}}_deselectAll(){this.store.shallowMutate(e=>{e.nextSelectionNumber=1,e.selectedIds={}})}_modifySelection(e){let t=this.getNonObjectsState().nextSelectionNumber;this.store.shallowMutate("selectedIds",o=>{for(let i in e)e[i]?o[i]||(o[i]=t,t+=1):delete o[i]}),this.store.set("nextSelectionNumber",t)}_addObjects(e){this.store.shallowMutate("objects",t=>{for(let o of e)t[o.id]=o})}_deleteObjects(e){if(!e.length)return;let t={};this.store.shallowMutate("objects",o=>{for(let i of e)t[i]=nme,delete o[i]}),this._modifySelection(t),this.store.shallowMutate("uncommittedIds",o=>{for(let i of e)delete o[i]})}createCustomToolOutput(e){var n;this.generateIdsForNewToolOutputs(e.outputs);let{idMap:t}=this.getNonObjectsState().ui.currentTool,o=[],i=this.getNonObjectsState().ui;for(let a of e.outputs){let s;a.type==="polygon-segment"?s=a.polygonColor:s=this.defaultColorForObject(i,a);let l={...a,id:t[a.id],color:s,parents:sme(a,t)};o.push(l)}for(let a of e.inputs)if((n=a.numberInputInfo)!=null&&n.sliderInfo){let s=a.numberInputInfo.sliderInfo,l=t[`${a.id}-number`];if(Ji(l)){let c=o5(l);if(c&&c in __dcg_shared_module_exports__['wc'])continue;this.controller.getItemsByIdentifier(__dcg_shared_module_exports__['ja'](l)).length||o.push({type:"slider",lhsLatex:l,rhsLatex:s.value,sliderInfo:s,id:dX,parents:[],hidden:!1,color:"#000"})}}this._shouldNewObjectsBeMarkedUncommitted()&&this.store.shallowMutate("uncommittedIds",a=>{for(let s of o)a[s.id]=!0}),this._addObjects(o)}_getReusableIdForCurrentInput(e){let t=this.getCurrentTool();if(!t.getSpec)return;let{inputIndex:o,reusableInputIdMap:i}=this.getNonObjectsState().ui.currentTool,a=t.getSpec().inputs[o];if(!a)return;let s=a.id;return e!==void 0&&(s+="-"+e),i[s]}_createInputObject(e,t){let o,i=this._shouldNewObjectsBeMarkedUncommitted();i?o=this._getReusableIdForCurrentInput(t)||this.generateObjectId():o=this.generateObjectId(),i&&this.store.set(["uncommittedIds",o],!0);let n=this.defaultColorForObject(this.getNonObjectsState().ui,e),a={hidden:e.type==="point"&&!!e.previewOnly,...e,id:o,color:n};return this._addObjects([a]),o}attemptLockToolInputIn(e){let{inputIndex:t,idMap:o}=this.getNonObjectsState().ui.currentTool,i=this.getCurrentTool();if(!(i instanceof Rs))return;let n=i.getSpecIdToLockIn(e,t);if(!n)return;let a=o[n];if(!a){this.getCurrentTool().canNextInputBePoint()||this.controller.dispatch({type:"select-geo-tool",tool:"selection"});return}let s=a&&this.store.getState().objects[a];if(s&&s.type==="point"&&s.previewOnly){this.controller.dispatch({type:"select-geo-tool",tool:"selection"});return}this.store.set(["ui","currentTool","inputIndex"],t+1),this.store.set(["ui","currentTool","lockedIds",a],!0);for(let l=0;l<2;l++){let c=n+"-"+l,p=o[c];p&&this.store.set(["ui","currentTool","lockedIds",p],!0)}i.didLockInput(e),this.updateFadeAnimations()}generateIdsForNewToolOutputs(e){let{idMap:t}=this.getNonObjectsState().ui.currentTool,o=!1,i={};for(let n of e)t[n.id]||(o=!0,i[n.id]=this.generateObjectId());o&&this.store.set(["ui","currentTool","idMap"],{...t,...i})}tentativelyMatchToolInput(e,t){let{currentTool:o}=this.getNonObjectsState().ui,i=o.inputIndex,n=e.inputs[i];if(!n)return;let a=n.id;this.store.set(["ui","currentTool","idMap",a],t)}storeNumberInputLatex(e,t){let{currentTool:o}=this.getNonObjectsState().ui,i=o.inputIndex,n=e.inputs[i];if(!(n!=null&&n.numberInputInfo))return;let a=n.id;this.store.set(["ui","currentTool","idMap",`${a}-number`],t)}createToolInputDependency(e,t,o){let i=this._createInputObject(e,o),{currentTool:n}=this.getNonObjectsState().ui,a=n.inputIndex,s=t.inputs[a];if(!s)throw Lr("geo tool could not find input in spec",{metaData:{fnArgs:{objectDef:e,toolSpec:t,depIndex:o},localVars:{newObjectId:i,currentTool:n,inputIndex:a,input:s},toolState:this.store.getState()}}),new Error("programming error: could not find input "+a+" in spec");let l=s.id;return this.store.set(["ui","currentTool","idMap",l+"-"+o],i),i}isObjectALockedToolInput(e){return!!this.getNonObjectsState().ui.currentTool.lockedIds[e]}isDegenerateInput(e){let t=this.getCurrentTool();return t instanceof Rs?t.isDegenerateInput(e):!1}getEnabledAdditionalTools(){return JY.filter(e=>!0)}getAdditionalTools(){return this.getEnabledAdditionalTools()}isAnyAdditionalToolEnabled(){return this.getAdditionalTools().length>0}setObjectSelected(e){let t={};t[e]=ime,this._modifySelection(t)}setObjectsSelected(e){e.forEach(t=>{this.setObjectSelected(t)})}deleteSelectedObjects(){let e=this.getSelectedObjectIdsUnsorted();this._deleteObjects(e)}isObjectUncommitted(e){return!!this.getNonObjectsState().uncommittedIds[e]}getUncommittedObjectIds(){return Object.keys(this.getNonObjectsState().uncommittedIds)}getUncommittedObjects(){let e={},t=this.store.getState().objects,o=this.getUncommittedObjectIds();for(let i of o)e[i]=t[i];return e}isValidNextInputType(e){let t=this.getCurrentTool(),o=t.getNonPointInputType();return e&&__dcg_shared_module_exports__['qb'](e)&&(e=__dcg_shared_module_exports__['rb'](e)),!!(o&&e&&kI(e,o)||t.canNextInputBePoint()&&e&&kI(e,"point"))}recordCommittedOutput(e){this.store.shallowMutate(["ui","currentTool","outputHistory"],t=>{t[e]=!0})}updateFadeAnimations(){let e=this.controller.getAllItemModels(),t=Date.now(),o=-1/0;this.store.shallowMutate(["fadeAnimations"],i=>{var s,l;if(this.getCurrentTool().shouldHighlightRelevantObjects())for(let c of e){if(c.type!=="expression"||!c.latex)continue;let p=c.id,h=(s=c.formula)==null?void 0:s.geometry,g,m=h==null?void 0:h.valueType;h!=null&&h.unconstructable||this.controller.shouldIgnoreGraphInteractions(c)?g="fade-out":this.isValidNextInputType(__dcg_shared_module_exports__['va'])&&(_h(m)||__dcg_shared_module_exports__['qb'](m)&&_h(__dcg_shared_module_exports__['rb'](m)))||m&&__dcg_shared_module_exports__['wb'](m,__dcg_shared_module_exports__['Da'])&&this.isValidNextInputType(__dcg_shared_module_exports__['Ea'])||this.isValidNextInputType(m)||this.store.getState().ui.currentTool.outputHistory[p]?g="fade-in":g="fade-out";let b=this.store.getState().fadeAnimations[p];if(b&&b.type!==g){let x=__dcg_shared_module_exports__['Ob'](t-b.start,0,150),E=t+x-150;i[p]={type:g,start:E},o=Math.max(o,E)}else if(g==="fade-out"){let x=(l=b==null?void 0:b.start)!=null?l:t;i[p]={type:"fade-out",start:x},o=Math.max(o,x)}}else{for(let c in i)i[c]={type:"fade-in",start:t-150};o=t-150}}),isFinite(o)&&this.store.set("maxAnimationEndTime",o+150)}getToolFadeOpacity(e){let t=this.controller.getItemModel(e);if((t==null?void 0:t.type)!=="expression")return 1;let o=this.store.getState().fadeAnimations[t.id];if(!o)return 1;let i=Date.now(),n=__dcg_shared_module_exports__['Ob']((i-o.start)/150,0,1),a=o.type==="fade-in"?.2:1,s=o.type==="fade-in"?1:.2;return a*(1-n)+s*n}updateAvailableInputTypes(){let e=this.controller.getAllItemModels();this.availableInputTypes=dme(e)}isToolActuallyUsable(e){let t=this.getTool(e);if(t instanceof gr){let o=t.getWorkflows();for(let i of this.availableInputTypes)if(o.some(n=>n.signature.matches([i])))return!0;return!1}return!0}isFading(){return Date.now()<=this.store.getState().maxAnimationEndTime}isObjectSelected(e){return!!this.getNonObjectsState().selectedIds[e]}getSelectedObjectIdsUnsorted(){return Object.keys(this.getNonObjectsState().selectedIds)}getSelectedObjectIdsSorted(){let e=this.getNonObjectsState().selectedIds,t=this.getSelectedObjectIdsUnsorted();return __dcg_shared_module_exports__['i'](t,i=>e[i])}deselectAllObjects(){this._deselectAll()}getToolMode(){return this.getNonObjectsState().ui.currentTool.name}setToolMode(e){let t=this.getToolMode(),o=this.getNonObjectsState().ui.currentTool;this.store.set(["ui","currentTool"],{name:e,idMap:{},reusableInputIdMap:{},lockedIds:{},inputIndex:0,outputHistory:e!==t?{}:o.outputHistory,forceSingleUse:e!==t?!1:o.forceSingleUse}),this.updateFadeAnimations(),e!==t&&this.controller.isGraphPaperFocused()&&(e!=="expression-edit"&&gt(this.getCurrentToolDisplayName()+"."),this.speakCurrentGeoToolHint())}resetToolMode(){this.setToolMode(this.getToolMode())}markCurrentToolSingleUse(){this.store.set(["ui","currentTool","forceSingleUse"],!0)}areAnyObjectsHovered(){return!!this.getNonObjectsState().hoveredObjects.length}setObjectHovered(e){this.store.deepMutate(t=>{t.hoveredObjects.push(e)})}objectIsInstanceOf(e,t){let o=e==null?void 0:e.typedRuntimeValue.valueType;if(o)return kI(o,t)}getSelectionBox(){return this.getTool("selection").getSelectionBox()}commitObjects(){this.store.set("uncommittedIds",{}),this.store.set("objects",{})}applyTransformation(e){}getProjection(){return this.controller.get2dProjection()}_getPixelsAwayFromDef(e,t,o){let i=o.typedRuntimeValue;switch(i.valueType){case __dcg_shared_module_exports__['va']:{let a=t.mapx(i.value[0]),s=t.mapy(i.value[1]);return __dcg_shared_module_exports__['M'](e.x-a,e.y-s)-6}case __dcg_shared_module_exports__['Ia']:case __dcg_shared_module_exports__['Ea']:case __dcg_shared_module_exports__['Ka']:case __dcg_shared_module_exports__['Sa']:{let n,a,s,l;if(i.valueType===__dcg_shared_module_exports__['Sa']){let[[g,m],[b,x]]=ah(i.value);n=t.mapx(g),s=t.mapy(m),a=t.mapx(b),l=t.mapy(x)}else n=t.mapx(i.value[0][0]),s=t.mapy(i.value[0][1]),a=t.mapx(i.value[1][0]),l=t.mapy(i.value[1][1]);let c=i.valueType===__dcg_shared_module_exports__['Ia'],p=i.valueType===__dcg_shared_module_exports__['Ia']||i.valueType===__dcg_shared_module_exports__['Ka'],h=__dcg_shared_module_exports__['Q'](e.x,e.y,n,s,a,l,c,p);return h?__dcg_shared_module_exports__['M'](h[0]-e.x,h[1]-e.y):1/0}case __dcg_shared_module_exports__['Ga']:{let n=i.value[0][0],a=i.value[0][1],s=i.value[1],l=0,c=Math.PI*2,p=t.reverse_mapx(e.x),h=t.reverse_mapy(e.y),g=__dcg_shared_module_exports__['R'](p,h,n,a,s,l,c);return g?t.screen.width/(t.viewport.xmax-t.viewport.xmin)*__dcg_shared_module_exports__['M'](g[0]-p,g[1]-h):1/0}case __dcg_shared_module_exports__['Ha']:{let n=__dcg_shared_module_exports__['cc'](i.value);if(!n)return 1/0;let a=(s,l,c,p)=>{let h=t.mapx(s[0]),g=t.mapy(s[1]),m=t.mapx(l[0]),b=t.mapy(l[1]),x=__dcg_shared_module_exports__['Q'](e.x,e.y,h,g,m,b,c,p);return x?__dcg_shared_module_exports__['M'](x[0]-e.x,x[1]-e.y):1/0};if(n.type==="arc"){let s=t.reverse_mapx(e.x),l=t.reverse_mapy(e.y),c=__dcg_shared_module_exports__['R'](s,l,n.center[0],n.center[1],n.radius,n.startAngle,n.endAngle);return c?t.screen.width/(t.viewport.xmax-t.viewport.xmin)*__dcg_shared_module_exports__['M'](c[0]-s,c[1]-l):1/0}else return n.type==="segment"?a(n.start,n.end,!1,!1):Math.min(a(n.start1,n.end1,!1,!0),a(n.start2,n.end2,!1,!0))}case __dcg_shared_module_exports__['Da']:{let n=[];return i.value.forEach(a=>{n.push(t.mapx(a[0]),t.mapy(a[1]))}),__dcg_shared_module_exports__['X'](n,[e.x,e.y])?0:1/0}case __dcg_shared_module_exports__['Ma']:case __dcg_shared_module_exports__['Oa']:{let n=t.screen.width/(t.viewport.xmax-t.viewport.xmin),a=t.screen.height/(t.viewport.ymax-t.viewport.ymin),[[s,l],c,p]=i.value,h=Jd(p,t),g=h/n,m=t.reverse_mapx(e.x),b=t.reverse_mapy(e.y),x=1/0,E=b-l,S=m-s,k=Math.atan2(E,S);if(__dcg_shared_module_exports__['K'](k,c,p))__dcg_shared_module_exports__['M'](E*a,S*n)<=h+7&&(x=0);else{let T=__dcg_shared_module_exports__['P'](m,b,s+g*Math.cos(c),l+g*Math.sin(c),s,l),I=__dcg_shared_module_exports__['P'](m,b,s+g*Math.cos(c+p),l+g*Math.sin(c+p),s,l),P=__dcg_shared_module_exports__['M'](n*(T[0]-m),a*(T[1]-b)),A=__dcg_shared_module_exports__['M'](n*(I[0]-m),a*(I[1]-b));x=Math.min(P,A)}return x}case __dcg_shared_module_exports__['Qa']:return 1/0;default:return 1/0}}getAllChoosableDefsUnordered(e,t){var m;if(!this.controller.isGeometry())return[];let o=[],i=e.mode==="tab",n=e.mode==="mouse",a=this.controller.get2dPOIController().findIdsThatAreOnscreen(),s=i&&this.controller.getActiveTool()==="box-selection",l=!1,c=!1;(m=t.isValidNextInputType)!=null&&m.call(t,__dcg_shared_module_exports__['va'])&&(l=!0),t.shouldUseJitEdges()&&(t.isValidNextInputType(__dcg_shared_module_exports__['Ea'])||t.isValidNextInputType(__dcg_shared_module_exports__['Ia'])||t.isValidNextInputType(__dcg_shared_module_exports__['Ka']))&&(c=!0);let p=n&&l;p&&(c=!0);let{lockedIds:h,reusableInputIdMap:g}=this.store.getState().ui.currentTool;return Ju({controller:this.controller},(b,x)=>{var S,k;if(!b.isGraphableAndInteractive)return;let E=b.assignment;for(let T in g)if(g[T]===E&&!h[E])return;if(!b.hidden&&!b.data.unconstructable&&!(this.getToolMode()==="expression-edit"&&((S=b.data)!=null&&S.depends_on_selected))&&!(s&&this.controller.isClickableId(b.calcId))&&!(i&&this.isDegenerateInput(b==null?void 0:b.assignment))&&!(i&&x)&&!(i&&!a[b.calcId])){if(b.typedRuntimeValue.valueType===__dcg_shared_module_exports__['Da'])if(b.typedRuntimeValue.value.length){if(c){let T=b;if(T.typedRuntimeValue.valueType===__dcg_shared_module_exports__['Da']){let I=T.typedRuntimeValue.value;for(let P=0;P<I.length;P++){let A=I[P],D=I[(P+1)%I.length],G=T.referenceLatex+".\\operatorname{segments}\\left["+(P+1)+"\\right]",N={calcId:T.calcId,listIndex:T.listIndex,hidden:T.hidden,isGraphableAndInteractive:!1,assignment:G,referenceLatex:G,data:T.data,typedRuntimeValue:{valueType:__dcg_shared_module_exports__['Ea'],value:[A,D]},polygonEdgeInfo:{edgeNumber:P,polygonDef:T}};o.push(N)}}}}else return;if(p&&!__dcg_shared_module_exports__['wb'](b.typedRuntimeValue.valueType,__dcg_shared_module_exports__['Da'])){o.push(b);return}if((k=t.isValidNextInputType)!=null&&k.call(t,b.typedRuntimeValue.valueType)){o.push(b);return}}}),o}_getObjectsUnderMouse(e,t,o){let i=this.getAllChoosableDefsUnordered({mode:"mouse"},o),n=this.getProjection(),a=[];i.forEach(c=>{let p=this._getPixelsAwayFromDef(e,n,c),h=c.polygonEdgeInfo?-1:0;if(p<=t){let g={def:c,layerNumber:h,pixelsAway:p};a.push(g)}});let s=this.controller.get2dSketchOrder(),l={};for(let c=0;c<s.length;c++)l[s[c]]=c;return a.sort((c,p)=>{let h=p.layerNumber-c.layerNumber;if(h!==0)return h;let g=c.pixelsAway-p.pixelsAway;if(g!==0)return g;let m=l[c.def.calcId];return l[p.def.calcId]-m}),a}convertCanvasPixelsToPoint(e){return this.getProjection().reverse_map_pt(e)}convertPointToCanvasPixels(e){return this.getProjection().map_pt(e)}deleteObjectsAndRememberReusableId(e){for(let t in e)this._deleteObjects([e[t]]);this._deleteObjects([dX]),this.store.shallowMutate(["ui","currentTool"],t=>t.reusableInputIdMap=e)}getObjectDefUnderMouse(e,t,o){let i=this.convertPointToCanvasPixels(e),n=this._getObjectsUnderMouse(i,t,o).filter(a=>!this.isDegenerateInput(a.def.referenceLatex));return n.length>0?n[0].def:void 0}getOrCreatePointNearMouse(e,t){let o=this.convertPointToCanvasPixels(e),i=this._getObjectsUnderMouse(o,t,this.getCurrentTool()),n=[];for(let g of i){let m=g.def,{valueType:b}=m.typedRuntimeValue;b===__dcg_shared_module_exports__['va']?n.push({def:m,type:b}):(_h(b)||b===__dcg_shared_module_exports__['Sa'])&&n.push({def:m,type:b})}let{def:a,type:s}=n[0]||{},{def:l,type:c}=n[1]||{},p=this.controller.isGeoToolEnabled("point");if(s===__dcg_shared_module_exports__['va'])return{type:"def",def:a};if(_h(s)&&_h(c)){let g=rX(a,l).map(m=>({x:m.x,y:m.y,i:m.i,pixelsFromPoint:pX(this.getProjection(),$d(m.x-e.x,m.y-e.y))}));if(g.sort((m,b)=>m.pixelsFromPoint-b.pixelsFromPoint),g=g.filter(m=>m.pixelsFromPoint<5),g[0]){let m=g[0].i===0?[a,l]:[l,a],b=this.findIncidentPointDef(a,l);if(b!=null&&b.hidden){let x=!1,E;if(lR(b.typedRuntimeValue,(S,k)=>{let[T,I]=S.value,P=this.getProjection().mathToPixels.mapPoint({x:T,y:I});$d(P.x-o.x,P.y-o.y)<t&&(x=!0,E=k)}),x)return E!==void 0&&(b=cR(b,E)),{type:"spec",spec:{type:"point-reference",targetSpec:{type:"intersection",parentDefs:m},parentDefs:[b]}}}return{type:"spec",spec:{type:"intersection",parentDefs:m}}}else if(p)return uX(this.getProjection(),e,a)}else{if(p&&_h(s))return uX(this.getProjection(),e,a);if(s===__dcg_shared_module_exports__['Sa']){let m=ah(a.typedRuntimeValue.value).map((b,x)=>({index:x,point:{x:b[0],y:b[1]},pixelsFromPoint:pX(this.getProjection(),$d(b[0]-e.x,b[1]-e.y))})).sort((b,x)=>b.pixelsFromPoint-x.pixelsFromPoint).filter(b=>b.pixelsFromPoint<5);if(m.length>0)return cme(a,m[0].index===1?1:0)}}let h=lme(this.getProjection(),e);return{type:"spec",spec:{type:"point",x:h.x,y:h.y,parentDefs:[],previewOnly:!p}}}findIncidentPointDef(e,t){let o=e.typedRuntimeValue.valueType,i=t.typedRuntimeValue.valueType,n={};Ju({controller:this.controller,expandLists:!1},l=>{if(l.data.identifier&&__dcg_shared_module_exports__['wb'](l.typedRuntimeValue.valueType,__dcg_shared_module_exports__['va'])){let c=l.data.identifier;n[c]=l}});let a=__dcg_shared_module_exports__['Nc']({getGeometryTree:l=>l.data.call,isPointOrListOfPoints:l=>__dcg_shared_module_exports__['wb'](l.typedRuntimeValue.valueType,__dcg_shared_module_exports__['va']),lookup:l=>n[l],resolvesTo:(l,c)=>l===c.data.identifier},e,o,t,i),s=a&&__dcg_shared_module_exports__['Lc'](a);if(s){let l=n[s],c=a&&__dcg_shared_module_exports__['Kc'](a);return c===void 0?l:cR(l,c)}}_shouldNewObjectsBeMarkedUncommitted(){return this.getToolMode()!=="selection"}clearHoveredObjects(){this.store.set("hoveredObjects",[])}getHoveredItems(){return this.store.getState().hoveredObjects}cancelToolplay(){this._deleteObjects(this.getUncommittedObjectIds()),this.clearHoveredObjects(),this.resetToolMode()}isToolplayActive(){return this.getNonObjectsState().ui.currentTool.inputIndex>0}getComputedBoard(){let e=new gw;return Ju({controller:this.controller},(t,o)=>{e.add(t,o)}),e}findDefsForInputId(e){let t=[];return Ju({controller:this.controller},o=>{(o.assignment===e||o.referenceLatex===e)&&t.push(o)}),t}isCreatingNewTransform(){return this.getCurrentTool().toolType==="transformation"}getCurrentToolDisplayName(){return this.controller.s(this.getCurrentTool().displayNameKey)}isCurrentToolComplex(){return this.getCurrentTool().toolType==="complex"}isCurrentToolSingleUse(){return this.getCurrentTool().toolType==="transformation"||this.getNonObjectsState().ui.currentTool.forceSingleUse}getIconInstructionsForTool(e){let t=this.getTool(e);return t?t.icon:[]}getDisplayNameForTool(e){var t;return this.controller.s((t=this.getTool(e))==null?void 0:t.displayNameKey)||""}speakCurrentGeoToolHint(){Te(this.getCurrentTool().getHint())}};function lme(r,e){let t=yG(r,e);t&&(e=t);let o=.5/hX(r);return{x:Br(e.x-o,e.x+o),y:Br(e.y-o,e.y+o)}}function hX(r){return r.mapx(1)-r.mapx(0)}function pX(r,e){return hX(r)*e-6}function uX(r,e,t){return{type:"spec",spec:{type:"glider",t:oA(r,e,t.typedRuntimeValue),parentDefs:[t]}}}function cme(r,e){return{type:"spec",spec:{type:"vector-endpoint",location:e?"end":"start",parentDefs:[r]}}}function dme(r){let e=new Set;e.add(__dcg_shared_module_exports__['va']);for(let t of r){if(t.type!=="expression"||!t.formula.typed_constant_value||t.hidden)continue;let o=t.formula.typed_constant_value.valueType,i=__dcg_shared_module_exports__['qb'](o)?__dcg_shared_module_exports__['rb'](o):o;__dcg_shared_module_exports__['tb'](i)&&e.add(i),i===__dcg_shared_module_exports__['Da']&&e.add(__dcg_shared_module_exports__['Ea'])}return e}function gX(r){if(r.inAudioTraceMode())return;let e=r.getFocusLocation(),t=r.getListModel();if((e==null?void 0:e.type)==="ticker"&&r.getExpressionSearchOpen())return Jt(r,{type:"search-expressions"});let o=r.getSelectedItem();if(!o)return;if(PT(t)){if(o=r.getSelectedItem(),!o)return;Jr(r,o.id,r.isInEditListMode()&&o.type==="table"?"container":"end")}else r.getTickerVisible()?Jt(r,{type:"ticker",location:"handler"}):r.getExpressionSearchOpen()&&Jt(r,{type:"search-expressions"})}function mX(r){if(r.inAudioTraceMode())return;let e=r.getFocusLocation(),t=r.getListModel();if((e==null?void 0:e.type)==="search-expressions"&&r.getTickerVisible())return Jt(r,{type:"ticker",location:"handler"});if((e==null?void 0:e.type)==="ticker"||(e==null?void 0:e.type)==="search-expressions"){let i=dm(t);if(i)return Jr(r,i.id,r.isInEditListMode()&&i.type==="table"?"container":"start")}if(!DT(t)&&!r.isInEditListMode()){let i=r.createItemModel({type:"expression",id:r.generateId(),color:r.getNextColor()});ka(t,i),ar(t,i)}let o=r.getSelectedItem();if(o)return Jr(r,o.id,r.isInEditListMode()&&o.type==="table"?"container":"start")}function fX(r){if(r.isInEditListMode())return;let e=r.getSelectedItem();if(!e||r.getItemCount()===1&&e.type==="expression")return;let t=e.type==="text",o=tn(e);if(o){let i=r.getNumberOfItemsInFolder(o.id);if(e.index===o.index+i){ui(e,"");return}}if(PG(r,{moveSelection:!0}),t&&ys&&bc){ar(r.getListModel(),void 0);return}e=r.getSelectedItem(),e&&Jr(r,e.id,"end")}function bX(r){if(r.isInEditListMode())return;let e=r.getSelectedItem();e&&(r.getItemCount()===1&&e.type==="expression"||(DG(r,{moveSelection:!0}),e=r.getSelectedItem(),e&&Jr(r,e.id,"start")))}function yX(r){if(r.isInEditListMode())return;let e=r.getSelectedItem();if(!e)return;if(e.type==="text"&&ys&&bc){Rr(),ar(r.getListModel(),void 0);return}if(e.type==="expression"&&Ac(e).length>0)return r.createSlidersForItem(e.id,Ac(e).concat(""));let t=jy(e);if(t.length>0&&t.length<=El&&r.areSlidersEnabled())return r.createSlidersForItem(e.id,jy(e).concat(""));let o=r.createItemModel({type:"expression",id:r.generateId(),color:r.getNextColor()}),i=e.index+1;e.type==="folder"&&e.collapsed&&(i+=r.getNumberOfItemsInFolder(e.id)),ki(r.getListModel(),o,i),ar(r.getListModel(),o),e.type==="folder"&&!e.collapsed?ui(o,e.id):e.type!=="folder"&&e.folderId&&ui(o,e.folderId),e=r.getSelectedItem(),e&&Jr(r,e.id)}function PG(r,{moveSelection:e}){let t=r.getSelectedItem(),o=r.getListModel();if(!t||r.isItemReadonly(t.id))return;let i=qy(o,t.index);if(r._removeExpressionSynchronously(t),e){if(!i){let n=dm(o);n&&(i=n)}ar(o,i)}else ar(o,void 0)}function DG(r,{moveSelection:e}){let t=r.getSelectedItem(),o=r.getListModel();if(!t||r.isItemReadonly(t.id))return;let i=Su(o,t.index);if(r._removeExpressionSynchronously(t),e){if(!i){let n=kT(o);n&&(i=n)}ar(o,i)}else ar(o,void 0)}Vt();var ume={loga:(r,e)=>{qe.canAcceptText(r,e.capExpressionSize,"\\log_{}\\left(\\right)")&&(r.write("\\log_{}"),r.typedText("("),r.keystroke("Left"),r.keystroke("Down"))},nthroot:(r,e)=>{qe.canAcceptText(r,e.capExpressionSize,"\\sqrt[]{}")&&(r.write("\\sqrt[]{}"),r.keystroke("Left"),r.keystroke("Left"))},ddx:(r,e)=>{qe.canAcceptText(r,e.capExpressionSize,"\\frac{d}{dx}")&&r.write("\\frac{d}{dx}")},arcsin:(r,e)=>{qe.canAcceptText(r,e.capExpressionSize,"\\sin^{-1}\\left(\\right)")&&(r.write("sin^{-1}"),r.typedText("("))},arccos:(r,e)=>{qe.canAcceptText(r,e.capExpressionSize,"\\cos^{-1}\\left(\\right)")&&(r.write("cos^{-1}"),r.typedText("("))},arctan:(r,e)=>{qe.canAcceptText(r,e.capExpressionSize,"\\tan^{-1}\\left(\\right)")&&(r.write("tan^{-1}"),r.typedText("("))},arcsec:(r,e)=>{qe.canAcceptText(r,e.capExpressionSize,"\\sec^{-1}\\left(\\right)")&&(r.write("sec^{-1}"),r.typedText("("))},arccsc:(r,e)=>{qe.canAcceptText(r,e.capExpressionSize,"\\csc^{-1}\\left(\\right)")&&(r.write("csc^{-1}"),r.typedText("("))},arccot:(r,e)=>{qe.canAcceptText(r,e.capExpressionSize,"\\cot^{-1}\\left(\\right)")&&(r.write("cot^{-1}"),r.typedText("("))},"A^T":(r,e)=>{qe.canAcceptText(r,e.capExpressionSize,"^{T}")&&(r.typedText("^T"),r.keystroke("Right"))},"A^-1":(r,e)=>{qe.canAcceptText(r,e.capExpressionSize,"^{-1}")&&(r.typedText("^-1"),r.keystroke("Right"))},"A^2":(r,e)=>{qe.canAcceptText(r,e.capExpressionSize,"^{2}")&&(r.typedText("^2"),r.keystroke("Right"))},"a^2":(r,e)=>{qe.canAcceptText(r,e.capExpressionSize,"^{2}")&&(r.typedText("^2"),r.keystroke("Right"))},"a^3":(r,e)=>{qe.canAcceptText(r,e.capExpressionSize,"^{3}")&&(r.typedText("^3"),r.keystroke("Right"))},"a/b":(r,e)=>{qe.canAcceptText(r,e.capExpressionSize,"\\frac{}{}")&&(r.write("\\frac{}{}"),r.keystroke("Left"))},integral:(r,e)=>{qe.canAcceptText(r,e.capExpressionSize,"\\int_{}^{}")&&r.cmd("integral")}};function lA(r,e,t){ume[e](r,t)}var OG=r=>({value:r.degreeMode?"30":"0.5",min:"0",max:r.degreeMode?"360":"2\\pi"}),vX={min:"0",max:"5",value:"1"},db=r=>({min:"0",max:"1",value:`${r}`}),hme={latex:void 0,polarDomainMin:void 0,polarDomainMax:void 0,parametricDomainMin:void 0,parametricDomainMax:void 0,parametricDomain3DuMin:void 0,parametricDomain3DuMax:void 0,parametricDomain3DvMin:void 0,parametricDomain3DvMax:void 0,parametricDomain3DrMin:void 0,parametricDomain3DrMax:void 0,parametricDomain3DphiMin:void 0,parametricDomain3DphiMax:void 0,clickableInfoLatex:void 0,colorLatex:void 0,tableColumnColorLatex:void 0,cdfBound1:()=>({value:"0",min:"-10",max:"10"}),cdfBound2:()=>({value:"0",min:"-10",max:"10"}),cdfP:()=>({value:"0.5",min:"0",max:"1"}),pointSize:()=>({value:8+"",min:"0",max:"20"}),movablePointSize:()=>({value:8+"",min:"0",max:"20"}),tableColumnPointSize:()=>({value:8+"",min:"0",max:"20"}),labelAngle:OG,labelSize:()=>({value:"1",min:"0",max:"5"}),lineWidth:()=>({value:2.5+"",min:"0",max:"10"}),resolution:()=>({value:"50",min:"2",max:"100",step:"1"}),tableColumnLineWidth:()=>({value:2.5+"",min:"0",max:"10"}),fillOpacity:()=>({value:.4+"",min:"0",max:"1"}),surfaceOpacity:()=>({value:"0.9",min:"0",max:"1"}),lineOpacity:()=>({value:1+"",min:"0",max:"1"}),tableColumnLineOpacity:()=>db(1),pointOpacity:()=>db(1),tableColumnPointOpacity:()=>db(1),sliderMin:void 0,sliderMax:void 0,sliderStep:void 0,residualVariable:void 0,tableHeader:void 0,tableCellValue:void 0,imageOpacity:()=>({value:"1",min:"0",max:"1"}),imageCenter:void 0,imageHeight:()=>({value:"10",min:"-10",max:"10"}),imageWidth:()=>({value:"10",min:"-10",max:"10"}),imageAngle:OG,tickerMinStep:()=>({value:"0",min:"0"}),tickerHandler:void 0,inferenceHypothesis:()=>({value:"0.5",min:"0",max:"1"}),inferenceConfidenceLevel:()=>({value:"0.95",min:"0",max:"1",step:"0.01"})},wX={tone:{paramBounds:r=>r===0?{value:"440",min:"110",max:"880"}:db(.5)},glider:{paramBounds:r=>{if(r!==0)return db(.5)}},dilate:{paramBounds:r=>{if(!(r<2))return{value:"2",min:"0",max:"5"}}},rotate:{paramBounds:(r,e,t)=>{if(!(r<2))return OG(t)}},circle:{paramBounds:r=>{if(r===1)return vX}},normaldist:{paramBounds:r=>{if(r===0)return{min:"-5",max:"5",value:"0"};if(r===1)return vX}},binomialdist:{paramBounds:r=>{if(r===0)return{min:"0",max:"10",step:"1",value:"5"};if(r===1)return{min:"0",max:"1",value:"0.5"}}},geodist:{paramBounds:r=>{if(r===0)return{min:"0",max:"1",value:"0.5"}}},quantile:{paramBounds:()=>({min:"0",max:"1",value:"0.5"})},ztest:{paramBounds:(r,e)=>{switch(e.length){case 2:switch(r){case 1:return Pi("stdevp")}break;case 3:switch(r){case 0:return Pi("sample-size");case 1:return Pi("mean");case 2:return Pi("stdevp")}break;case 4:switch(r){case 1:case 3:return Pi("stdevp")}break;case 6:switch(r){case 0:case 3:return Pi("sample-size");case 1:case 4:return Pi("mean");case 2:case 5:return Pi("stdevp")}break}}},ttest:{paramBounds:(r,e)=>{switch(e.length){case 3:switch(r){case 0:return Pi("sample-size");case 1:return Pi("mean");case 2:return Pi("stdev")}break;case 6:switch(r){case 0:case 3:return Pi("sample-size");case 1:case 4:return Pi("mean");case 2:case 5:return Pi("stdev")}break}}},zproptest:{paramBounds:(r,e)=>{switch(e.length){case 2:switch(r){case 0:return Pi("successes");case 1:return Pi("sample-size")}break;case 4:switch(r){case 0:case 2:return Pi("successes");case 1:case 3:return Pi("sample-size")}break}}},rgb:{paramBounds:r=>({value:"0",min:"0",max:"255",step:"1"})},hsv:{paramBounds:r=>r===0?{value:"0",min:"0",max:"360",step:"1"}:db(.5)}};function SX(r,e,t){let o=r.map(n=>({location:n.location,parsed:__dcg_shared_module_exports__['fd'](n.latex)})),i={};for(let n of e)for(let a of o){let s;if(a.location==="inferenceHypothesis"){let l;for(let c of o)if(c.location==="latex"){l=c.parsed;break}l!==void 0&&(s=gme(n,a.parsed,l))}else s=mme(n,a,t);s&&s.length&&(i[n]=s[0])}return i}function gme(r,e,t){let o;if(t.type==="Assignment"&&(t=t._expression),t.type==="FunctionCall")switch(t._symbol){case"ttest":case"ztest":o={value:"0",min:"-10",max:"10"};break;case"zproptest":t.args.length===2&&(o={value:"0.5",min:"0",max:"1"}),t.args.length===4&&(o={value:"0",min:"-1",max:"1"});break}if(o===void 0)return;let i=__dcg_shared_module_exports__['ja'](r);if(e.type==="Identifier"&&e._symbol===i)return[o]}function mme(r,{parsed:e,location:t},o){let i=__dcg_shared_module_exports__['ja'](r);if(e.type==="Identifier"&&e._symbol===i){let a=hme[t];return a?[a(o)]:void 0}e.type==="Assignment"&&(e=e._expression);let n=[];switch(e.type==="DotAccess"&&(e=e.args[1]),e.type){case"FunctionCall":{let a=e._symbol;if(wX.hasOwnProperty(a)){let s=wX[a];e.args.forEach((l,c)=>{if(l.type==="Identifier"&&l._symbol===i){let p=s.paramBounds(c,e.args,o);p&&n.push(p)}})}break}default:return}return n}function Pi(r){switch(r){case"mean":return{min:"-10",max:"10",value:"0"};case"stdev":case"stdevp":return{min:"0",max:"5",value:"1"};case"sample-size":return{min:"2",max:"30",value:"3",step:"1"};case"successes":return{min:"0",max:"30",value:"2",step:"1"};case"regression-parameter":return;default:throw new Error(`Unexpected parameter name: ${r}`)}}var ad=class r{constructor(e=100){this.clear(),this._sizeLimit=e}clone(){let e=new r(this._sizeLimit);return e._stack=this._stack.slice(),e._stackPointer=this._stackPointer,e}clear(){this._stack=[],this._stackPointer=-1}getState(){return this._stack[this._stackPointer]}serializeForBugsnag(){function e(t){try{return JSON.stringify(t,null,2)}catch(o){return"[[could not jsonify]]"}}return{currentState:e(this._stack[this._stackPointer]),undoState:e(this._stack[this._stackPointer-1]),redoState:e(this._stack[this._stackPointer+1])}}addState(e){this.canRedo()&&this._stack.splice(this._stackPointer+1),this._stack.push(e),this._stack.length>this._sizeLimit&&this._stack.shift(),this._stackPointer=this._stack.length-1}replaceState(e){this.canRedo()&&this._stack.splice(this._stackPointer+1),this.replaceInteriorState(e)}replaceInteriorState(e){this._stack.length===0?(this._stack.push(e),this._stackPointer=0):this._stack[this._stackPointer]=e}canUndo(){return this._stackPointer>0}canRedo(){return this._stackPointer<this._stack.length-1}undo(){this.canUndo()&&(this._stackPointer-=1)}redo(){this.canRedo()&&(this._stackPointer+=1)}};function bme(r){switch(r){case"histogram":case"dotplot":return 12;case"boxplot":return 40}return 1/0}function yme(r){return r==="boxplot"||r==="dotplot"||r=="histogram"}function xme(r){return r==="boxplot"?3:.5}function vme(r,e){if(r.type==="dotplot"||r.type==="histogram"){let i=Math.max(1,r.xmax-r.xmin)*80/(r.binWidth?r.binWidth:1),n=.5*(e.screen.width-i)/i;return Math.max(.2,n)}return .5}function wme(r,e,t){r=__dcg_shared_module_exports__['Uc'](r);let o=1.2;return e&&r.xmax<0&&r.xmin<0&&r.xmax/(r.xmin-r.xmax)<o&&(r.xmax=0),e&&r.xmax>0&&r.xmin>0&&r.xmin/(r.xmax-r.xmin)<o&&(r.xmin=0),t&&r.ymax<0&&r.ymin<0&&r.ymax/(r.ymin-r.ymax)<o&&(r.ymax=0),t&&r.ymax>0&&r.ymin>0&&r.ymin/(r.ymax-r.ymin)<o&&(r.ymin=0),r}function Sme(r,e,t,o){let i=r.type,n=vme(r,e),a=xme(i),s,l,c,p;if(r.xmin===r.xmax&&(t?(r.xmin-=.5,r.xmax+=.5):(r.xmin*=.5,r.xmax/=.5)),r.ymin===r.ymax&&(o?(r.ymin-=.5,r.ymax+=.5):(r.ymin*=.5,r.ymax/=.5)),t){let h=(r.xmax-r.xmin)*n;s=r.xmin-h,l=r.xmax+h}else{let h=(r.xmax/r.xmin)**n;s=r.xmin/h,l=r.xmax*h}if(o){let h=(r.ymax-r.ymin)*a;c=r.ymin-h,p=r.ymax+h}else{let h=(r.ymax/r.ymin)**a;c=r.ymin/h,p=r.ymax*h}if(yme(i)){let h=e.screen.height/e.screen.width,g=(l-s)*h;if(g>r.ymax-r.ymin&&g<bme(i)*(r.ymax-r.ymin)){let m=.5*(r.ymax+r.ymin);p=m+.5*g,c=m-.5*g}}return{xmin:s,xmax:l,ymin:c,ymax:p}}function cA(r,e){let t=Ow(r,e);if(!t)return!1;let{xAxisScale:o,yAxisScale:i}=e.settings;if(!__dcg_shared_module_exports__['Qe'].fromObject(t).isValid({xAxisScale:o,yAxisScale:i}))return!1;let a=e.mapx(t.xmin),s=e.mapx(t.xmax),l=e.mapy(t.ymin),c=e.mapy(t.ymax),p=10;return!(Math.abs(a)<=p&&Math.abs(c)<=p&&Math.abs(s-e.screen.width)<=p&&Math.abs(l-e.screen.height)<=p)}function Ow(r,e){let t=1/0,o=-1/0,i=1/0,n=-1/0,a=0,s=r.length,l=e.settings.xAxisScale==="linear",c=e.settings.yAxisScale==="linear";for(let p=0;p<s;p++){let h=wme(r[p],l,c);if(!isFinite(h.xmax-h.xmin)||!isFinite(h.ymax-h.ymin)){a+=1;continue}if(!l&&!(h.xmax>0&&h.xmin>0)||!c&&!(h.ymax>0&&h.ymin>0)){a+=1;continue}let g=Sme(h,e,l,c);g.xmin<t&&(t=g.xmin),g.xmax>o&&(o=g.xmax),g.ymin<i&&(i=g.ymin),g.ymax>n&&(n=g.ymax)}if(a!==s)return{xmin:t,xmax:o,ymin:i,ymax:n}}function Tme(r){var o,i;let e=r&&r.id,t=[];if(r&&r.type==="table"){r.columnModels.forEach(a=>{t.push(a.id)}),(o=r.regression)!=null&&o.id&&t.push(r.regression.id);let n=Ss(r);if(!n){let a=r.controller.getFocusLocation();if((a==null?void 0:a.type)==="table-icon"){let s=r.columnModels.findIndex(l=>l.id===a.columnId);s>=0&&(n={row:0,column:s})}}if(n){let a=r.columnModels[n.column];e=a?a.id:void 0}else e=(i=r.regression)==null?void 0:i.id;return{selected:e?[e]:[],hoistedToTop:t}}return e?{selected:[e],hoistedToTop:[e]}:{selected:[],hoistedToTop:[]}}function TX(r,e,t){let o={},i={},n=r.getAllSelectedItems();for(let a of n){let s=Tme(a);for(let l of s.selected)o[l]=!0,t.selected[l]||e.selectSketch(l);for(let l of s.hoistedToTop)i[l]=!0,t.hoistedToTop[l]||e.setSketchHoistedToTop(l,!0)}for(let a in t.selected)o[a]||e.deselectSketch(a);for(let a in t.hoistedToTop)i[a]||e.setSketchHoistedToTop(a,!1);return{selected:o,hoistedToTop:i}}__dcg_shared_module_exports__['H']();var dA="__dcg_inference_wizard_",kX=6,EX=6,IX=2,CX=10;function kme(){let r=Math.max(kX,IX),e=Math.max(EX,CX),t=[];for(let o=0;o<r;o++)t.push(new Array(e).fill(""));return{columns:t}}var RG={open:!1,insertItemId:void 0,screen:"start-screen",sampleType:"data",twoSample:!1,samples:[],distributionData:{},distribution:"normaldist",chiSquareTable:kme()},pA=class{constructor(e){this.state=__dcg_shared_module_exports__['Uc'](RG);this.evaluatedItems=new Map;this.controller=e}isWizardOpen(){return this.state.open}openWizard(e){this.state.open=!0,this.state.insertItemId=e}closeWizard(){this.state=__dcg_shared_module_exports__['Uc'](RG)}setScreen(e){this.state.screen=e,e!=="chi-square-gof"&&e!=="chi-square-test-of-independence"&&this.resetChiSquareTableData()}setDistribution(e){this.state.distribution=e}setTwoSample(e){this.state.twoSample=e}setSampleType(e){this.state.sampleType=e}getInsertItemId(){return this.state.insertItemId}getScreen(){return this.state.screen}getSelectedDistribution(){return this.state.distribution}getDistributionValues(){let e=this.getSelectedDistribution();return this.state.distributionData[e]||[]}getSampleValues(e){return this.state.samples[e]||{}}getSampleType(){return this.state.sampleType}getRequiredSampleProps(){switch(this.getScreen()){case"t-test":return this.getSampleType()==="data"?["list"]:["sample-size","mean","stdev"];case"z-test":return this.getSampleType()==="data"?["list","stdevp"]:["sample-size","mean","stdevp"];case"z-prop-test":return["successes","sample-size"];case"chi-square-test-of-independence":case"chi-square-gof":case"distribution":case"start-screen":return[]}}hasNonEmptyPropInSecondList(){let e=this.getRequiredSampleProps(),t=this.state.samples[1];return t?!!e.find(o=>!!t[o]):!1}shouldShowTwoSamples(){return this.state.twoSample}setDistributionCellLatex(e,t,o){let i=this.state.distributionData[e];i||(i=[],this.state.distributionData[e]=i),i[t]=o}setSamplePropLatex(e,t,o){this.state.samples[e]={...this.state.samples[e],[t]:o}}getAllEvaluatorStatements(){let e=[];this.isWizardOpen()&&(e=[...this.getAllDistributionStatements(),...this.getAllInferenceStatements(),...this.getAllChiSquareTableStatements(),{id:this.getIdForFullLatex(),latex:this.getFullLatexForNewItem()}]);let t={},o=[];for(let i of e){t[i.id]=!0,o.push({type:"statement",...i,shouldGraph:!1,disallowAssignment:!0});let n=this.evaluatedItems.get(i.id);n?n.latex=i.latex:this.evaluatedItems.set(i.id,{latex:i.latex})}for(let i of this.evaluatedItems.keys())t[i]||this.evaluatedItems.delete(i);return o}onEvaluatorChanges(e){for(let t in e){let o=this.evaluatedItems.get(t);o&&(o.evaluationState=e[t])}}getAllDistributionStatements(){let e=[],{distributionData:t,distribution:o}=this.state,i=t[o];if(!i)return e;for(let n=0;n<i.length;n++){let a=i[n];a&&e.push({id:this.getIdForDistributionParam(o,n),latex:a})}return e}getFullLatexForNewItem(){let e=this.getInferenceType();if(e==="chisqtest"||e==="chisqgof")return this.getLatexForChiSquare(e);let t=this.getRequiredSampleProps(),o=this.state.samples;(!this.shouldShowTwoSamples()||!this.hasNonEmptyPropInSecondList())&&(o=o.slice(0,1));let i=o.map((a,s)=>t.map(l=>{var c,p;return l==="list"?this.validateSampleProp(s,"list")==="valid"?a[l]:`\\left[${(c=a[l])!=null?c:""}\\right]`:(p=a[l])!=null?p:""}).join(",")).join(",");return`\\operatorname{${e==="zprop"?"zproptest":`${e}test`}}\\left(${i}\\right)`}getAllInferenceStatements(){let e=[],t=this.state.samples;for(let o=0;o<t.length;o++){let i=t[o];if(i)for(let n of __dcg_shared_module_exports__['A'](i)){let a=i[n]||"";e.push({id:this.getIdForInferenceParam(o,n),latex:a}),n==="list"&&e.push({id:this.getIdForInferenceParam(o,"listWrapped"),latex:"["+a+"]"})}}return e}getAllChiSquareTableStatements(){let e=[],t=this.controller.wizardModel.getScreen();if(t!=="chi-square-gof"&&t!=="chi-square-test-of-independence")return e;let o=this.state.chiSquareTable.columns;for(let i=0;i<o.length;i++){let n=o[i];for(let a=0;a<n.length;a++){let s=n[a];s&&e.push({id:this.getIdForChiSquareTableCell(a,i),latex:s})}}return e}getInferenceType(){let e=this.getScreen();switch(e){case"start-screen":case"distribution":return;case"chi-square-gof":return"chisqgof";case"chi-square-test-of-independence":return"chisqtest";case"t-test":return"t";case"z-test":return"z";case"z-prop-test":return"zprop";default:return}}validateSampleProp(e,t){var a,s,l,c,p,h,g,m,b;if(t!=="listWrapped"&&!((a=this.state.samples[e])==null?void 0:a[t]))return"soft-error";let i=this.getInferenceType(),n=this.getEvaluationStateForSampleProp(e,t);if(!n)return"soft-error";switch(t){case"list":case"listWrapped":return((s=n.typed_constant_value)==null?void 0:s.valueType)!==__dcg_shared_module_exports__['ya']?"hard-error":i==="t"&&n.typed_constant_value.value.length<2?"soft-error":"valid";case"sample-size":case"successes":if(((l=n.typed_constant_value)==null?void 0:l.valueType)!==__dcg_shared_module_exports__['ua']||n.typed_constant_value.value<0||Math.floor(n.typed_constant_value.value)!==n.typed_constant_value.value||t==="sample-size"&&i==="t"&&n.typed_constant_value.value<2)return"hard-error";if(i==="zprop"&&t==="sample-size"){let x=(p=(c=this.getEvaluationStateForSampleProp(e,"successes"))==null?void 0:c.typed_constant_value)==null?void 0:p.value,E=(g=(h=this.getEvaluationStateForSampleProp(e,"sample-size"))==null?void 0:h.typed_constant_value)==null?void 0:g.value;if(E!==void 0&&x!==void 0&&E<x)return"hard-error"}return"valid";case"mean":case"regression-parameter":return((m=n.typed_constant_value)==null?void 0:m.valueType)!==__dcg_shared_module_exports__['ua']?"hard-error":"valid";case"stdev":case"stdevp":return((b=n.typed_constant_value)==null?void 0:b.valueType)!==__dcg_shared_module_exports__['ua']||!(n.typed_constant_value.value>=0)?"hard-error":"valid";default:throw new Error(`Unexpected prop ${t}`)}}getFullLatexWarning(){var t,o;let e=this.getIdForFullLatex();return(o=(t=this.evaluatedItems.get(e))==null?void 0:t.evaluationState)==null?void 0:o.warning}isFullLatexEvaluationValid(){var o;let e=this.getIdForFullLatex(),t=this.evaluatedItems.get(e);return!t||!t.latex?!1:!((o=t.evaluationState)!=null&&o.error)}getEvaluationStateForSampleProp(e,t){var i;let o=this.getIdForInferenceParam(e,t);return(i=this.evaluatedItems.get(o))==null?void 0:i.evaluationState}getEvaluationInfoForDistributionProp(e,t){var s,l;let o=this.getIdForDistributionParam(e,t),i=(s=this.evaluatedItems.get(o))==null?void 0:s.evaluationState;if(!i)return{error:!1,numericValue:void 0};let n=!!i.error,a;return((l=i.typed_constant_value)==null?void 0:l.valueType)===__dcg_shared_module_exports__['ua']?a=i.typed_constant_value.value:n=!0,{error:n,numericValue:a}}getIdForFullLatex(){return`${dA}_full_latex`}getIdForDistributionParam(e,t){return`${dA}${e}_${t}`}getIdForInferenceParam(e,t){return`${dA}${t}_${e}`}getIdForChiSquareTableCell(e,t){return`${dA}_chisquare_${e}_${t}`}resetChiSquareTableData(){this.state.chiSquareTable=__dcg_shared_module_exports__['Uc'](RG.chiSquareTable)}removeChiSquareTableRow(e){for(let t of this.state.chiSquareTable.columns)t.splice(e,1),t.push("")}removeChiSquareTableColumn(e){let t=this.state.chiSquareTable.columns[0].map(()=>"");this.state.chiSquareTable.columns.splice(e,1),this.state.chiSquareTable.columns.push(t)}getChiSquareTableCellError(e,t){var n,a;let o=this.getIdForChiSquareTableCell(e,t),i=(a=(n=this.evaluatedItems.get(o))==null?void 0:n.evaluationState)==null?void 0:a.error;return i?this.controller.unpack(i):""}getChiSquareTableCellLatex(e,t){return this.state.chiSquareTable.columns[t][e]}computeChiSquareTableCollapsedSize(){let e=0,t=0,o=0,i=0,n=this.controller.getFocusLocation();(n==null?void 0:n.type)==="add-inference-wizard"&&n.subtype==="chi-square-wizard-table"&&(i=n.column,o=n.row);let a=this.state.chiSquareTable.columns;for(let s=0;s<a.length;s++){let l=a[s];for(let c=0;c<l.length;c++)l[c]&&(e=Math.max(e,s),t=Math.max(t,c))}return e=Math.max(e+1,i),t=Math.max(t+1,o),{columnCount:e+1,rowCount:t+1}}getChiSquareTableColumnCount(){let{columnCount:e}=this.computeChiSquareTableCollapsedSize();return Math.min(Math.max(e,3),this.getChiSquareTableMaxColumnCount())}getChiSquareTableRowCount(){let{rowCount:e}=this.computeChiSquareTableCollapsedSize();return Math.min(Math.max(e,3),this.controller.wizardModel.getChiSquareTableMaxRowCount())}getChiSquareTableMaxRowCount(){return this.getInferenceType()==="chisqgof"?CX:EX}getChiSquareTableMaxColumnCount(){return this.getInferenceType()==="chisqgof"?IX:kX}isChiSquareTableColumnEmpty(e){for(let t of this.state.chiSquareTable.columns[e])if(t)return!1;return!0}isChiSquareTableRowEmpty(e){for(let t of this.state.chiSquareTable.columns)if(t[e])return!1;return!0}isChiSquareTableColumnFaded(e){return e<2||e+1<this.getChiSquareTableColumnCount()?!1:this.isChiSquareTableColumnEmpty(e)}isChiSquareTableRowFaded(e){return e+1<this.getChiSquareTableRowCount()?!1:this.isChiSquareTableRowEmpty(e)}getChiSquareCellsToEvaluate(){let e=this.getChiSquareTableRowCount(),t=this.getChiSquareTableColumnCount();this.isChiSquareTableColumnEmpty(t-1)&&(t-=1),this.isChiSquareTableRowEmpty(e-1)&&(e-=1);let o=[];for(let i=0;i<t;i++){let n=[];for(let a=0;a<e;a++)n.push(this.getChiSquareTableCellLatex(a,i));o.push(n)}return o}canSubmitChiSquareTest(){let e=this.getChiSquareCellsToEvaluate(),t=e.length,o=e[0].length;for(let i=0;i<t;i++)for(let n=0;n<o;n++)if(this.getChiSquareTableCellError(n,i)||!e[i][n])return!1;return!0}canSubmitChiSquareGOF(){let e=this.getChiSquareTableRowCount();this.isChiSquareTableRowFaded(e-1)&&(e-=1);let t=!1,o=!1;for(let i=0;i<e;i++){if(this.getChiSquareTableCellError(i,0)||this.getChiSquareTableCellError(i,1)||!this.getChiSquareTableCellLatex(i,0))return!1;this.getChiSquareTableCellLatex(i,1)?t=!0:o=!0}return!(t&&o)}canSumbitChiSquare(){if(!this.isFullLatexEvaluationValid())return!1;switch(this.getInferenceType()){case"chisqtest":return this.canSubmitChiSquareTest();case"chisqgof":return this.canSubmitChiSquareGOF();default:return!1}}setChiSquareTableCell(e){let{row:t,column:o,latex:i}=e;this.state.chiSquareTable.columns[o][t]=i}getLatexForChiSquare(e){let o=this.getChiSquareCellsToEvaluate().map(i=>`\\left[${i.join(",")}\\right]`).join(",");return`\\operatorname{${e}}\\left(${o}\\right)`}getFirstWizardInputFocusLocation(e=0){switch(this.getScreen()){case"start-screen":return{type:"add-inference-wizard",subtype:"start-screen-button",button:"distribution"};case"distribution":return{type:"add-inference-wizard",subtype:"distribution-input",columnIndex:0};case"z-test":case"z-prop-test":case"t-test":{let o=this.getRequiredSampleProps();return o.length===0?void 0:{type:"add-inference-wizard",subtype:"sample-prop-input",sampleIndex:e,sampleProp:o[0]}}case"chi-square-test-of-independence":case"chi-square-gof":return{type:"add-inference-wizard",subtype:"chi-square-wizard-table",row:0,column:0}}}};function Eme(r){for(let e in r)return!1;return!0}function Ime(r){var o;if(r.type!=="expression")return;let e=r.formula.assignment;return e||((o=r.formula.geometry)==null?void 0:o.identifier)}function Cme(r){var t,o,i;let e={lookupIdentifier:{},lookupCalcId:{}};for(let n of r){let a={calcId:n.id,identifier:Ime(n),referencesTheseIdentifiers:{},referencedByTheseCalcIds:{}};e.lookupCalcId[a.calcId]=a,a.identifier&&(e.lookupIdentifier[a.identifier]=a)}for(let n of r){let a=e.lookupCalcId[n.id];if(a){if(n.type==="expression"){n.folderId===__dcg_shared_module_exports__['je']&&(a.isGarbageCollectable=!n.readonly,(((o=(t=n.formula.geometry)==null?void 0:t.call)==null?void 0:o.symbol)==="segments"||ws(n))&&(a.deleteIfNotReferenced=!0));for(let s of((i=n.formula.geometry)==null?void 0:i.parentDependencies)||[])_X(e,a,s)}sm(n,s=>{let l=s.match(/(\\token{[0-9]+})/g);if(l)for(let c of l){let p=__dcg_shared_module_exports__['ja'](c);p!==a.identifier&&_X(e,a,p)}})}}return e}function _X(r,e,t){e.referencesTheseIdentifiers[t]=!0;let o=r.lookupIdentifier[t];o&&(o.referencedByTheseCalcIds[e.calcId]=!0)}function _me(r,e,t){var a;let o=[];for(let s of e){let l=r.lookupCalcId[s];if(!l)continue;o.push(l);let c=l.referencesTheseIdentifiers;for(let p in c){let h=r.lookupIdentifier[p];h&&delete h.referencedByTheseCalcIds[l.calcId]}}let i={};for(let s in t)for(let l of t[s]){let c=r.lookupIdentifier[l];c&&delete c.referencedByTheseCalcIds[s],i[l]=!0}let n={};for(let s of o){let l=s.referencesTheseIdentifiers;for(let p in l)i[p]=!0;let c=s.identifier;if(c){let p=(a=r.lookupIdentifier[c])==null?void 0:a.referencedByTheseCalcIds;if(p)for(let h in p){let g=r.lookupCalcId[h];g&&g.isGarbageCollectable&&(n[h]=!0)}}}for(let s in i){let l=r.lookupIdentifier[s];if(l&&l.deleteIfNotReferenced){let c=l.referencedByTheseCalcIds;l.calcId&&l.isGarbageCollectable&&Eme(c)&&(n[l.calcId]=!0)}}for(let s of o)delete r.lookupCalcId[s.calcId],s.identifier&&delete r.lookupIdentifier[s.identifier];return Object.keys(n)}function MX(r,e,t){var c;let o=r.getAllItemModels(),i=e.map(p=>p.id),n=Cme(o.concat(e)),a={},s={};for(let p in t){let{nextLatex:h}=t[p],g=r.getItemModel(p);if((g==null?void 0:g.type)!=="expression")continue;let m={};for(let x of((c=g.formula.geometry)==null?void 0:c.parentDependencies)||[])m[x]=!0;for(let x in m)za(h,__dcg_shared_module_exports__['ia'](x))&&delete m[x];let b=Object.keys(m);b.length&&(s[p]=b)}let l=Object.keys(s).length>0;for(;i.length||l;){l=!1,i=_me(n,i,s);for(let p of i)a[p]=!0}return Object.keys(a)}var AX=Symbol("privateHistoryProperty"),uA=class{constructor(e,t){this.currentState=e;this.__historyThatShouldNotBeSerialized=Symbol("__historyThatShouldNotBeSerialized");Object.defineProperty(this,AX,{value:t.clone(),enumerable:!1,configurable:!1,writable:!1})}toJSON(){throw new Error("Operation unsupported: history should not be serialized.")}};function LX(r){let e=r;return{currentState:e.currentState,history:e[AX]}}function PX(r){switch(r){case"letters":return"capitalLetters";case"noQwertyLetters":return"noQwertyCapitalLetters";case"noQwertyCapitalLetters":return"noQwertyLetters";default:return"letters"}}function DX(r){switch(r){case"mainNumbers":return"mainNumbers3D";default:return r}}function FG(r){return{keypadMinimized:!XU,keypadLayout:"mainNumbers",keypadFunctionsOpen:!1,graphSettingsOpen:!1,addExpressionOpen:!1,expressionsVisible:!!r.expressions,inEditListMode:!1,isFileDraggedOver:!1,expressionsHiddenTime:void 0,tableRegressionsDropdownOpenForTableId:void 0,openPopoverGuid:void 0}}ce();ie();var OX=__dcg_shared_module_exports__['e'](se()),hA=class extends OX.View{template(){return _("form",{name:u("open_graph_on_web"),target:()=>this.props.openInNewWindow()?"_blank":"",method:u("POST"),action:()=>this.props.saveURL(),style:()=>({display:"none"}),children:[d("input",{type:u("text"),name:u("redirect"),value:u("true")}),d("input",{type:u("text"),name:u("product"),value:()=>this.props.product()}),d("input",{type:u("text"),name:u("state"),value:()=>this.props.stateData()}),d("input",{type:u("text"),name:u("thumbnailData"),value:()=>this.props.thumbData()})]})}};var RX={xmin:"",xmax:"",xstep:"",ymin:"",ymax:"",ystep:"",zmin:"",zmax:""};function FX(r){return r in RX}function GG(){return{limitLatex:{...RX}}}function GX(r){let e=r.getGrapher();if(!e)return;let t=r.isGraphSettingsOpen(),o=e.viewportController,i=o.getCurrentViewportLatex();if(t&&r.canComputeViewportSynchronously()&&!o.hasViewportChangedSinceLastDirectUserEdit())return;let n=__dcg_shared_module_exports__['Qe'].evaluateFromLatexPartial(i,r.getDegreeMode(),r.isComplexModeEnabled()),a=r.getSettingsViewModel(),s=r.getAxisScaleSettings(),l=t?void 0:r.getAxisStepSettings(),c=o.getViewport(),p=n5(n,s),h={...i};n.isXValid(s.xAxisScale)&&(h.xmin=p.xmin,h.xmax=p.xmax),n.isYValid(s.yAxisScale)&&(h.ymin=p.ymin,h.ymax=p.ymax),n.isZValid()&&(h.zmin=p.zmin,h.zmax=p.zmax);let g=n.xmax-n.xmin;isNaN(g)&&(g=c.xmax-c.xmin);let m=n.ymax-n.ymin;isNaN(m)&&(m=c.ymax-c.ymin);let{xstep:b,ystep:x}=a.limitLatex;l&&(b=CL(l.xAxisStep,g),x=CL(l.yAxisStep,m)),a.limitLatex={...h,xstep:b,ystep:x}}function NX(r){var l;if(r.isGraphSettingsOpen())return;let e=(l=r.getGrapher())==null?void 0:l.viewportController;if(!e)return;let t=r.getAxisScaleSettings(),o=e.getCurrentViewportLatex(),i=e.getViewport(),n={...o},a=__dcg_shared_module_exports__['Qe'].evaluateFromLatexPartial(o,r.getDegreeMode(),r.isComplexModeEnabled()),s=Vn(i);!a.isXValid(t.xAxisScale)&&!isNaN(a.xmin)&&!isNaN(a.xmax)&&(n.xmin=s.xmin,n.xmax=s.xmax),!a.isYValid(t.yAxisScale)&&!isNaN(a.ymin)&&!isNaN(a.ymax)&&(n.ymin=s.ymin,n.ymax=s.ymax),!a.isZValid()&&a.zmin!==void 0&&a.zmax!==void 0&&!isNaN(a.zmin)&&!isNaN(a.zmax)&&(n.zmin=s.zmin,n.zmax=s.zmax);for(let c in n){let p=c,h=s[p];n[p]===""&&h&&(n[p]=h)}__dcg_shared_module_exports__['s'](n,o)||e.setCurrentViewportLatex(n)}function VX(r){let e={xmin:r.limitLatex.xmin,xmax:r.limitLatex.xmax,ymin:r.limitLatex.ymin,ymax:r.limitLatex.ymax};return(r.limitLatex.zmin!==void 0||r.limitLatex.zmax!==void 0)&&(e.zmin=r.limitLatex.zmin,e.zmax=r.limitLatex.zmax),e}function BX(r){var e;switch(r.type){case"tick":case"tick-ticker":case"evaluator-progress-update":return!1;case"on-evaluator-changes":return!!((e=r.eventUpdates)!=null&&e.userAction);default:return!0}}var Ah=class{constructor(e){this.__nextItemId=0;this.__pendingImageUploads={};this.__lastSelectedIdsForPropagation={selected:{},hoistedToTop:{}};this.nextSubscription=0;this.subscriptions={};this._queuedCallbacks=[];this._hasUnsavedChanges=!1;this.shouldScrollSelectedItemIntoViewAfterDispatch=!1;this.lastParsableObjects={};this.isExpressionSearchStrValidForReplace=!1;this.isExpressionReplaceStrValidForReplace=!1;this.expressionSearchCount=0;this.expressionSearchOpen=!1;this.geoUIActive=!1;this.showConstructionsOpen=!1;this.activeTool="selection";this.showReducedMotionCover=!1;this.pinchZoom=1;this.geometryGettingStartedMessageState="pick-a-tool";this.activeTokens={selected:void 0,hovered:void 0};this.apiMethodCallStackInfo={apiMethodCallDepth:0,withHistoryReplacementDepth:0};this.canShowKeyboardShortcuts=!1;this.progressUpdateLegendHidden=!1;this.highlightedExpressions=[];this.shellViews={};this.toastData={};this.s=kc(()=>this.graphSettings.config.language);this.raw=(e,t)=>Sa(e,t);this.hasTranslation=e=>{let t=this.graphSettings.config.language;return XP(e,t)};this.unpack=e=>{let t=this.graphSettings.config.language;return xl(e,t)};this.dispatch=e=>{if(e.type==="blur-focus-location"&&this.dispatcher.isDispatching()){this.runAfterDispatch(()=>{this.dispatch(e)});return}if(e.type==="set-focus-location"&&this.dispatcher.isDispatching()){this.runAfterDispatch(()=>{this.dispatch(e)});return}if(e.type==="tick"&&this.dispatcher.isDispatching()){this.runAfterDispatch(()=>{this.dispatch(e)});return}e.type==="tick"||ry("dispatch::"+this.bugsnagContext,{type:e.type}),this.dispatcher.isDispatching()&&ry("dispatch-in-dispatch::"+this.bugsnagContext,{type:e.type}),this.dispatcher.dispatch(e),this.onEventsEmitted&&this.onEventsEmitted(this.enqueuedEvents),this.logEventsFromDispatch(e);let t;for(;t=this._queuedCallbacks.shift();)t()};this._requiresTickNextFrame=!1;this.cachedGeoTokenDepths={};this.cachedGeoTokenInfo={};this.toolPreviewJSONState={};this.updateViews=()=>{for(let e in this.subscriptions)this.subscriptions[e]()};this.bugsnagContext="";this.inPrintMode=!1;this.lastInfiniteScrollFirstDOM=void 0;this.lastInfiniteScrollLastDOM=void 0;this.hasDispatchSinceLastInfiniteScrollUpdate=!1;this.stateStack=new ad;this.isCurrentlyDoingSetState=!1;this.isCurrentlyDoingRestoreState=!1;this.expressionActionsToRestartIfSlow=new Array;this.getQuestIsActive=()=>!1;this.logEvent=e=>{};this.logEventsFromDispatch=e=>{};var t,o;this.graphSettings=e.graphSettings,(o=(t=this.graphSettings).setController)==null||o.call(t,this),this.listModel=Z4(this),this.movablePointsController=e.movablePointControllerBuilder?e.movablePointControllerBuilder(this):new iA(this),this.layoutModel=FG(this.graphSettings.config),this.layoutMeasurements={width:0,height:0},this.settingsViewModel=GG(),this.geometryToolbarModel=h4(),this.imageRetryState={lastAttemptTime:0,attempts:0},this.makeGeoAPI(),this.wizardModel=new pA(this),this.setupDispatcher(),this.toneAllowed()&&(this.toneController=new nx(this)),this.graphSettings.config.observe("tone",()=>this._updateToneAvailability()),this.graphSettings.config.observe("audio",()=>this._updateToneAvailability())}isEvaluationExpanded(e){return this.expandedEvaluationId===e}destroy(){var e;(e=this.toneController)==null||e.destroy(),this.clearAllTimeouts(),this.evaluator.destroy(),this.movablePointsController.destroy()}setShellView(e,t){if(this.shellViews[e])throw new Error(`Shell view is already set: '${e}'.`);this.shellViews[e]=t}getShellView(e){var t;return(t=this.shellViews)==null?void 0:t[e]}hasUnsavedChanges(){return this._hasUnsavedChanges}getExpressionSearchOpen(){return this.expressionSearchOpen}getShowConstructionsOpen(){return this.showConstructionsOpen}getGeoToolbarSuppressedByAuthor(){return this.geometryToolbarModel.toolbar==="none"&&!this.shouldShowAuthorFeatures()}shouldShowGeoToolbar(){return this.isGeoUIActive()&&!this.getGeoToolbarSuppressedByAuthor()}isGeoUIActive(){return this.geoUIActive}isGeoToolActive(){return this.activeTool!=="selection"&&this.activeTool!=="box-selection"}getActiveTool(){return this.activeTool}canExpandListForItem(e){let t=this.getItemModel(e);return t?!this.isGeometry()||this.activeTool!=="selection"&&this.activeTool!=="box-selection"||this.isClickableId(e)||"label"in t&&t.label!=="":!1}getGeoModel(){return this.geoModel}getGeoToolbarGroupKeys(){return Gy(this.geometryToolbarModel,this.shouldShowAuthorFeatures()).groups}getGeoToolbarItemsForGroup(e){let{items:t}=Gy(this.geometryToolbarModel,this.shouldShowAuthorFeatures());return t[e]}getAllAvailableGeoTools(){let e=Gy(this.geometryToolbarModel,this.shouldShowAuthorFeatures()),t=[];for(let o of e.groups){let i=e.items[o];i&&(i.dropdown?t.push(...i.dropdown):t.push(i.current))}return t}getAllVisibleGeoToolbarItems(){let e=this.getGeoToolbarGroupKeys(),t=[];for(let o of e){let i=this.getGeoToolbarItemsForGroup(o);i&&t.push(i)}return t}getTickerOpen(){return this.areActionsEnabled()?this.listModel.ticker.open:!1}getTickerVisible(){return this.getTickerOpen()&&!this.getTicker().filteredBySearch}getTickerPlaying(){return this.areActionsEnabled()?this.listModel.ticker.playing:!1}hasVisibleToast(){return!__dcg_shared_module_exports__['t'](this.toastData)}hasVisibleAndUndoableToast(){return typeof this.toastData.undoCallback=="function"}runAfterDispatch(e){this.dispatcher.isDispatching()?this._queuedCallbacks.push(e):e()}moveMovablePointWithinDispatch(e){this.isDispatching()?e():this.dispatch({type:"move-movable-point-within-dispatch",cb:e})}enqueueEvent(e,t){var n;let o=this.apiMethodCallStackInfo.apiMethodCallDepth>0,i=t&&!o&&BX(t)||!!((n=this.enqueuedEvents[e])!=null&&n.isUserInitiated)||e==="userMovedPoint";this.enqueuedEvents[e]={isUserInitiated:i}}getLanguage(){return this.graphSettings.config.language}dispatchFocusAction(e){this.dispatch(e)}shouldAddExpressionHighlightedClass(e){return!py&&this.isExpressionHighlighted(e)}isExpressionHighlighted(e){return this.highlightedExpressions.indexOf(e)>=0}pushWithHistoryReplacement(){this.apiMethodCallStackInfo.withHistoryReplacementDepth++}popWithHistoryReplacement(){if(this.apiMethodCallStackInfo.withHistoryReplacementDepth--,this.apiMethodCallStackInfo.withHistoryReplacementDepth<0)throw new Error("Programming Error: withHistoryReplacementDepth < 0")}pushAPIMethodCall(){this.apiMethodCallStackInfo.apiMethodCallDepth++}popAPIMethodCall(){this.apiMethodCallStackInfo.apiMethodCallDepth--}getGrapherDimensions(){let e=this.getGrapher();if(!e)return{width:0,height:0};let{width:t,height:o}=e.getProjection().screen;return{width:t,height:o}}setRandomSeed(e){this.graphSettings.setProperty("randomSeed",e)}getRandomSeed(){return this.graphSettings.randomSeed}setIncludeFunctionParametersInRandomSeed(e){this.graphSettings.setProperty("includeFunctionParametersInRandomSeed",e)}getIncludeFunctionParametersInRandomSeed(){return this.graphSettings.includeFunctionParametersInRandomSeed}shouldDispatchTickNextFrame(){return!!this._requiresTickNextFrame}markTickRequiredNextFrame(){this._requiresTickNextFrame=!0}handleTick(e){let t=this.handlePossiblySlowEvaluator();this.areActionsEnabled()&&!this.getShowReducedMotionCover()&&j4(this.listModel.ticker,{currentFrameTime:e,previousFrameTime:this.lastFrameTime})?this.dispatch({type:"tick-ticker",time:e}):this.shouldDispatchTickNextFrame()?this.dispatch({type:"tick",time:e}):t&&this.dispatch({type:"render"}),this.getGeoModel().isFading()&&this.requestRedrawGraph(),this.lastFrameTime=e}setupDispatcher(){this.dispatcher=new uw,this.dispatcher.register(e=>{var l;let t=this.getFirstSelectedItem(),o=this.getFocusLocation();this.shouldScrollSelectedItemIntoViewAfterDispatch=!1;let i;this.enqueuedEvents={change:void 0,graphReset:void 0,clearUnsavedChanges:void 0,showHotkeysModal:void 0,userMovedPoint:void 0,userClickedObject:void 0,userEditedLabel:void 0},e.type==="tick"&&(this._requiresTickNextFrame=!1),this.isCurrentlyDoingSetState=!1,this.isCurrentlyDoingRestoreState=!1,this.handleDispatchedAction(e),this.constrainMultiSelect(),this.updateTheComputedWorld();let n=this.getImageToRetry();(this.getPlayingSliders().length>0||this.isDragDropActive()||n||this.getOpenPopoverGuid())&&this.markTickRequiredNextFrame(),n&&this.retryLoadingFailedImage(n),this.updateGeometryGettingStartedMessageState(),e.type!=="undo"&&e.type!=="redo"&&e.type!=="restore-history"&&!this.isDragDropActive()&&this.commitUndoRedoSynchronously(e),this.requestParseForAllItems(),this.isCurrentlyDoingSetState=!1,this.isCurrentlyDoingRestoreState=!1,this.enqueuedEvents.change&&((l=this.getGrapher2d())==null||l.markLabelsDirty()),this.enqueuedEvents.clearUnsavedChanges?this._hasUnsavedChanges=!1:this.enqueuedEvents.change&&(this._hasUnsavedChanges=!0);let a=this.getFirstSelectedItem();a?(!t||t.guid!==a.guid)&&(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0):this.shouldScrollSelectedItemIntoViewAfterDispatch=!1;let s=this.getFocusLocation();s&&!__dcg_shared_module_exports__['s'](s,o)&&this.getFocusedItem()==a&&(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0),o&&t&&t.type==="table"&&o.type==="table"&&(!s||s.type!=="table"||o.id!==s.id)&&t.isExpanded&&(zg(t,!1),s||(i=t)),s&&a&&a.type==="table"&&zz(a),(e.type==="adjust-slider-by-dragging-thumb"||e.type==="adjust-slider-by-keyboard")&&(i=this.getItemModel(e.id)),this.updateRenderShellsBeforePaint(),this.updateViews(),i?this.scrollItemIntoView(i):this.shouldScrollSelectedItemIntoViewAfterDispatch&&this.scrollSelectedItemIntoView(),this.updateDragDrop(),this.updateRenderShellsAfterDispatch()})}updateGeometryGettingStartedMessageState(){if(!this.isGeometry())return;let e=this.geometryGettingStartedMessageState,t=this.getActiveTool(),o=t==="selection"||t==="box-selection"||t==="expression-edit";if(e==="hidden")return;if(this.isGraphSettingsOpen()||this.getGraphSettings().showGrid||this.getGraphSettings().showYAxis){this.geometryGettingStartedMessageState="hidden";return}let i=this.getItemModelByIndex(1);if(this.getItemCount()>2||!i||i.type!=="expression"||i.latex!==""||this.geoModel.getNonObjectsState().ui.currentTool.inputIndex>0){this.geometryGettingStartedMessageState="hidden";return}o||(this.geometryGettingStartedMessageState="construct")}getGeometryGettingStartedMessageState(){return this.computeMajorLayout().grapher.height<90?"hidden":this.geometryGettingStartedMessageState}handleDispatchedAction(e){var t,o,i,n,a,s,l,c,p,h,g,m,b,x,E,S,k,T,I,P;switch(e.type){case"render":break;case"undo":this.geoModel.isToolplayActive()?this.cancelGeoToolplay():__dcg_shared_module_exports__['Mc'](this.getActiveTool())?this.setGeoTool("selection"):this.undo();break;case"redo":this.geoModel.isToolplayActive()&&this.cancelGeoToolplay(),this.redo();break;case"clear-undoredo-history":this.clearUndoRedoHistory();break;case"on-special-key-pressed":e.key==="Enter"?yX(this):e.key==="Up"||e.key==="PageUp"?gX(this):e.key==="Down"||e.key==="PageDown"?mX(this):e.key==="Backspace"?fX(this):e.key==="Delete"&&bX(this);break;case"select-previous-expression":PT(this.listModel);break;case"select-next-expression":DT(this.listModel);break;case"toggle-label-for-all-selected-points":this.toggleLabelForAllSelectedObjects();break;case"set-label-state-for-selected-points":{let w=[];for(let F of this.getAllSelectedItems())F.type==="expression"&&ws(F)&&w.push(F);this.setLabelStateForObjects(w,e.state);break}case"move-selected-item-to-expression-list":{let w=this.getSelectedItem();if(!w||w.type==="folder"||this.isItemReadonly(w.id))return;if(w.type==="expression"){let B=qT(w);B&&wl(this.listModel,B,this.getAutonameLatexForExpression(w,this.findLastSubscriptForLetters()))}Eu(this.listModel,w.id),"folderId"in w&&w.folderId===__dcg_shared_module_exports__['je']&&(w.folderId="");let F=this.getItemCount()-1,V=Cc(this.listModel,F);if(V&&V.type==="expression"&&V.latex===""){this._toplevelReplaceItemAt(F,w,!1);return}ka(this.listModel,w)}break;case"update-all-selected-items":{let w=e.update;if(e.update.prop==="folderId"){let F;if(e.update.createFolder){F=this.generateId();let ue=this.createItemModel({type:"folder",id:F,title:e.update.value}),de=this.getItemCount()-1,pe=Cc(this.listModel,de);pe&&pe.type==="expression"&&pe.latex===""?this._toplevelReplaceItemAt(this.getItemCount()-1,ue,!1):ka(this.listModel,ue)}else F=e.update.value;let V=this.getItemModel(F);if(!V||V.type!=="folder")return;let B={},L={};this.getAllSelectedItems().forEach(ue=>{var de;if(!(ue.type==="folder"||ue.folderId===F)&&!this.isItemReadonly(ue.id)&&(B[ue.id]=ue,ue.type==="expression")){let pe=(de=ue.formula.geometry)==null?void 0:de.call;if(pe&&pe.symbol==="apply"){let Y=pe.parents[0],j=Y.type!=="arbitrary-expression"?__dcg_shared_module_exports__['Lc'](Y):void 0;j&&(L[j]=!0)}}});for(let ue in L){let de=Od(this.listModel,ue);de.length===1&&de[0].folderId!==F&&(B[de[0].id]=de[0])}let q={},le=[];for(let ue in B){let de=B[ue];le.push(de)}le.forEach(ue=>{if(ue.type==="expression"){let de=qT(ue);de&&(q[ue.id]=de)}}),le.sort((ue,de)=>ue.index-de.index);let $=this.findLastSubscriptForLetters();le.forEach(ue=>{if(ue.type==="expression"){let de=q[ue.id];if(de){let pe=this.getAutonameLatexForExpression(ue,$);wl(this.listModel,de,pe)}}}),le.forEach(ue=>{Eu(this.listModel,ue.id)});let ne=V.index+this.getNumberOfItemsInFolder(F)+1;le.forEach(ue=>{ki(this.listModel,ue,ne),ne+=1}),le.forEach(ue=>{ui(ue,F)})}else if(w.prop==="visible")this.getAllSelectedItems().forEach(F=>{this.isItemReadonly(F.id)||(this._setItemHidden(F.id,!w.value),w.value===!1&&F.type==="expression"&&Vd(F,!1))});else if(e.update.prop==="color"){let F=e.update.value;this.getAllSelectedItems().forEach(V=>{V.type==="expression"&&HT(V,F)})}else if(e.update.prop==="colorLatex"){let F=e.update.value;this.getAllSelectedItems().forEach(V=>{V.type==="expression"&&rx(V,F)})}else if(e.update.prop==="showLabel"){let F=e.update.value;this.getAllSelectedItems().forEach(V=>{V.type==="expression"&&Vd(V,F)})}else if(e.update.prop==="label"){let F=e.update.value;this.getAllSelectedItems().forEach(V=>{V.type==="expression"&&Tl(V,F)})}else if(e.update.prop==="dragMode"){let F=e.update.value;this.getAllSelectedItems().forEach(V=>{V.type==="expression"&&Em(V,F)})}else if(e.update.prop==="lineWidth"){let F=e.update.value;this.getAllSelectedItems().forEach(V=>{V.type==="expression"&&fm(V,F)})}else if(e.update.prop==="lineOpacity"){let F=e.update.value;this.getAllSelectedItems().forEach(V=>{V.type==="expression"&&mm(V,F)})}else if(e.update.prop==="lineStyle"){let F=e.update.value;this.getAllSelectedItems().forEach(V=>{V.type==="expression"&&KT(V,F)})}else if(e.update.prop==="strictIntersection"){let F=e.update.value;this.getAllSelectedItems().forEach(V=>{V.type==="expression"&&w8(V,F)})}else if(e.update.prop==="disableGraphInteractions"){let F=e.update.value;this.getAllSelectedItems().forEach(V=>{V.type==="expression"?VD(V,F):V.type==="image"&&iD(V,F)})}}break;case"delete-all-selected-items":{let{deletedItems:w,readonlyItemsNotDeleted:F}=this.removeListOfItems(this.getSelectedExpressionIds());this.garbageCollectGeo(w,{}),this.ensureAtLeastOneVisibleItem(),w.length>0&&gt(this.s("graphing-calculator-narration-items-deleted",{count:__dcg_shared_module_exports__['pa'](w.length)})),F>0&&gt(this.s("graphing-calculator-narration-locked-items-not-deleted",{count:__dcg_shared_module_exports__['pa'](F)})),Te();break}case"upward-delete-selected-expression":PG(this,{moveSelection:!1});break;case"downward-delete-selected-expression":DG(this,{moveSelection:!1});break;case"table-show-more-rows":{let w=this.getItemModel(e.id);if(!w||w.type!=="table")return;let F=hu(w);if(!F)return;ar(this.listModel,w),zg(w,!0),Jt(this,{type:"table",id:w.id,location:{row:F.min,column:0}})}break;case"delete-item-and-animate-out":this._deleteItemAndAnimateOut(e.id,e.setFocusAfterDelete);break;case"finish-deleting-item-after-animation":this._finishDeletingItemAfterAnimation(e.id,e.setFocusAfterDelete);break;case"expression-zoom-fit":this._expressionZoomFit(e.id,{focusAfterTap:e.focusAfterTap,synchronous:!1,justResiduals:!1});break;case"expression-zoom-fit-residuals":this._expressionZoomFit(e.id,{focusAfterTap:e.focusAfterTap,synchronous:!1,justResiduals:!0});break;case"set-expression-properties-from-api":this._setExpressionPropertiesFromAPI(e.id,e.properties);break;case"add-item-to-end-from-api":this._addItemToEndFromAPI(this.createItemModel(e.state));break;case"duplicate-expression":{let w=this.getItemModel(e.id);if(!w||w.type==="folder")return;this.copyExpressionToIndex(w,w.index+1)}break;case"set-highlighted-expressions":this.highlightedExpressions=e.ids;break;case"paste-expression":{let w=this.getFocusedItem(),F=e.data;if(!w||F.length===0||F[0].type==="folder"&&!this.areFoldersEnabled()||(F=F.filter(ue=>{switch(ue.type){case"expression":case"table":case"folder":return!0;case"text":return this.areNotesEnabled();case"image":return this.areImagesEnabled()}}),F.length===0))break;let V=F[0],B=w.type==="folder"?w.id:w.folderId,L=this.getItemModel(B),q,le,$;if(V.type==="folder"&&L){q=!1,$=void 0;let ue=this.getNumberOfItemsInFolder(L.id);le=L.index+ue}else $=L==null?void 0:L.id,q=w.type==="expression"&&w.latex==="",le=w.index;V.type==="table"&&(V=this.copyTableStateWithNewColumnIds(V));let ne=this.createItemModel({...V,id:this.generateId()});if(q?this._toplevelReplaceItemAt(w.index,ne,!0):(this._toplevelInsertItemAt(le+1,ne,!0,$),le=le+1),V.type==="folder")for(let ue=1;ue<F.length;ue++){let de=F[ue];de.type==="table"&&(de=this.copyTableStateWithNewColumnIds(de));let pe=this.createItemModel({...de,id:this.generateId()});this._toplevelInsertItemAt(le+ue,pe,!1,ne.id)}}break;case"duplicate-folder":{let{id:w}=e,F=this.getItemModel(w);if(!F||F.type!=="folder")return;let V=this.createItemModel({...q0(F,{stripDefaults:!1}),id:this.generateId()}),B=this.getNumberOfItemsInFolder(w),L=B+1;this._toplevelInsertItemAt(F.index+L,V,!1,void 0);let q=F.index+1,le=q+B;for(let $=q;$<=le;$++){let ne=Cc(this.listModel,$);if(!ne||ne.type==="folder")return;this.copyExpressionToIndex(ne,$+L,V.id)}}break;case"insert-item-at-index":{let w=this.createItemModel(e.state);this._toplevelInsertItemAt(e.index,w,e.focus,e.folderId)}break;case"new-expression-at-end":{this.setGeoTool("selection");let w=this.createItemModel({type:"expression",id:this.generateId(),color:this.getNextColor()});this.setEditListMode(!1),ka(this.listModel,w),Jr(this,w.id)}break;case"new-expression":{let w=this.createItemModel({type:"expression",id:this.generateId(),color:this.getNextColor()});this.setEditListMode(!1),this._toplevelNewItemAtSelection(w,{shouldFocus:!0}),this._closeAddExpression()}break;case"new-note":{let w=this.createItemModel({id:this.generateId(),type:"text"});this._toplevelNewItemAtSelection(w,{shouldFocus:!0}),this._closeAddExpression()}break;case"new-folder":{let w=this.createItemModel({type:"folder",id:this.generateId()});this._toplevelNewItemAtSelection(w,{shouldFocus:!0}),this._closeAddExpression()}break;case"new-images":this._uploadImagesAndWaitForThemToLoad({files:e.files}),this._closeAddExpression();break;case"new-inference":this._addNewInferenceObject(),this.closeAddInferenceWizard();break;case"new-distribution":this._addNewDistributionObject(e.latex),this.closeAddInferenceWizard();break;case"close-inference-wizard":this.closeAddInferenceWizard(e.focusNextExpression);break;case"open-inference-wizard":this.openInferenceWizard();break;case"set-inference-wizard-chi-square-table-cell":this.wizardModel.setChiSquareTableCell(e);break;case"set-inference-wizard-screen":this.wizardModel.setScreen(e.screen),e.focusFirstInput&&Jt(this,this.wizardModel.getFirstWizardInputFocusLocation());break;case"set-inference-wizard-distribution":this.wizardModel.setDistribution(e.distribution),e.focusFirstInput&&Jt(this,this.wizardModel.getFirstWizardInputFocusLocation());break;case"set-inference-wizard-two-sample":this.wizardModel.setTwoSample(e.twoSample),e.focusFirstInput&&Jt(this,this.wizardModel.getFirstWizardInputFocusLocation(1));break;case"set-inference-wizard-sample-type":this.wizardModel.setSampleType(e.sampleType),e.focusFirstInput&&Jt(this,this.wizardModel.getFirstWizardInputFocusLocation());break;case"set-inference-object-data":{this.updateInferenceParameters(e.id,e.update);break}case"set-inference-wizard-sample-data":this.wizardModel.setSamplePropLatex(e.sampleIndex,e.sampleProp,e.latex);break;case"set-inference-wizard-distribution-data":this.wizardModel.setDistributionCellLatex(e.distribution,e.columnIndex,e.latex);break;case"change-image":this._uploadImagesAndWaitForThemToLoad({files:e.files,id:e.id});break;case"new-table":{let w=this._createTableItem();this._toplevelNewItemAtSelection(w,{shouldFocus:!0}),this._closeAddExpression()}break;case"paste-table":this._pasteTable(e.data);break;case"convert-or-create-table":this._convertOrCreateTable(e.index);break;case"insert-several-expressions":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,this._insertSeveralExpressions(e.expressions);break;case"remove-item-by-id":Eu(this.listModel,e.id);break;case"replace-item-at-index":{let w=this.createItemModel(e.state);this._toplevelReplaceItemAt(e.index,w,e.focus)}break;case"create-sliders-for-item":this.createSlidersForItem(e.id,e.variables,e.doNotChangeFocus);break;case"create-sliders-for-ticker":this.createSlidersForTicker(e.variables);break;case"convert-image-to-draggable":this.convertImageToDraggable(e.id);break;case"start-dragdrop":{let w=this.getItemModel(e.dragTarget.calcId);if(!w)return;let F={x:0,y:0},V=this.getItemRootNodeById(w.id);if(V){let q=V.getBoundingClientRect();F.y=e.grabPt.y-q.top,F.x=e.grabPt.x-q.left}this.isItemSelected(w.id)?ar(this.listModel,w):ar(this.listModel,void 0),this.setGeoTool("selection");let B=!1,L=1;w.type==="folder"&&(L+=this.getNumberOfItemsInFolder(w.id),w.collapsed||(B=!0,Xg(w,!0))),$y(this.listModel,{firstItemId:w.id,numberOfItems:L,expandFolder:B,grabOffset:F,mousePt:e.mousePt,dragTarget:e.dragTarget,renderType:e.dragTarget.type,itemTop:0,itemLeft:0}),this.dragdrop_expressions.startDragging(e.mousePt)}break;case"update-dragdrop":{let w=this.listModel.dragState;if(!w)return;$y(this.listModel,{...w,mousePt:e.mousePt})}break;case"stop-dragdrop":{let w=this.listModel.dragState;if(!w)return;let F=this.getItemModel(w.firstItemId);if(!F)return;F.type==="folder"&&w.expandFolder&&Xg(F,!1),$y(this.listModel,void 0),this.ensureAtLeastOneVisibleItem()}break;case"set-selected-id":{let w=this.getItemModel(e.id);w?e.state==="selected"?ar(this.listModel,w):(e.state,PH(this.listModel,w)):ar(this.listModel,void 0)}break;case"set-all-selected-ids":bD(this.listModel,e.ids);break;case"toggle-selected-with-multi-select":fD(this.listModel,e.id,e.state);break;case"set-selected-index":{let w=this.getItemModelByIndex(e.index);ar(this.listModel,w)}break;case"set-none-selected":ar(this.listModel,void 0);break;case"commit-tentative-selection":{DH(this.listModel);break}case"clear-tentative-selection":{OH(this.listModel);break}case"set-focus-location":{let w=e.location?e.location.type:"";if(w==="expression"&&this.setGeoTool("selection"),(w==="image"||w==="table")&&this.setEditListMode(!1),w==="graph-paper"){this.setGraphPaperFocus({isFocused:!0});break}Jt(this,e.location)}break;case"focus-first-expression":{this.focusFirstExpression();break}case"move-focus-to-item":Jr(this,e.id,e.where);break;case"blur-focus-location":this.isFocusLocationFocused(e.location)&&Jt(this,void 0),((t=e.location)==null?void 0:t.type)==="graph-paper"&&this.setGraphPaperFocus({isFocused:!1});break;case"set-folder-collapsed":{let w=this.getItemModel(e.id);if(!w||w.type!=="folder")return;Xg(w,e.isCollapsed)}break;case"set-all-folders-collapsed":UH(this.listModel,e.isCollapsed);break;case"set-item-secret":{let w=this.getItemModel(e.id);if(!w)return;B0(w,e.isSecret)}break;case"set-item-in-front-of-everything":{let w=this.getItemModel(e.id);if(!w||w.type!=="folder")return;Oq(w,e.inFrontOfEverything)}break;case"set-item-readonly":{let{id:w,readonly:F}=e,V=this.getItemModel(w);if(!V)return;if(My(V,F),V.type==="folder")for(let B of ET(this.listModel,w))My(B,F)}break;case"set-item-disable-graph-interactions":{let{id:w,disableGraphInteractions:F}=e,V=this.getItemModel(w);if(!V)return;switch(V.type){case"expression":VD(V,F);break;case"image":iD(V,F);break}break}case"set-tablecolumn-disable-graph-interactions":{let{tableId:w,columnId:F,disableGraphInteractions:V}=e,B=this.getItemModel(w);if(!B||B.type!=="table")return;let L=Kr(B,F);if(!L)return;Tq(L,V);break}case"set-tablecolumn-color":{let w=this.getItemModel(e.tableId);if(!w||w.type!=="table")return;hq(w,e.columnId,e.color)}break;case"set-tableregression-color":{let w=this.getItemModel(e.tableId);if(!w||w.type!=="table")return;gq(w,e.color)}break;case"set-tablecolumn-colorlatex":{let w=this.getItemModel(e.tableId);if(!w||w.type!=="table")return;P0(w,e.columnId,e.colorLatex)}break;case"set-cdf-props":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;F8(w,e.props)}break;case"toggle-item-hidden":this._toggleItemHidden(e.id);break;case"toggle-tablecolumn-hidden":this._toggleTableColumnHidden(e.tableId,e.columnId);break;case"toggle-item-settings-menu":this.isItemSettingsMenuOpen(e.menu.guid)?this.closeItemSettingsMenu():(this.listModel.openItemMenu=e.menu,e.menu.focusFirstOption&&(e.menu.type==="geo-tool-dropdown"?Jt(this,{type:"geo-basic-tool-menu-item",tool:e.menu.tools[0]}):e.menu.type==="multi-select-more"||e.menu.type==="multi-select-construct"||e.menu.type==="multi-select-style"||e.menu.type==="multi-select-label"?Jt(this,{type:"generic-menu",where:"start"}):Jt(this,{type:"expression-menu",id:e.menu.model.id,location:"start"})));break;case"close-item-settings-menu":this.closeItemSettingsMenu();break;case"toggle-fraction-evaluation":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;let F=Nd(w);h8(w,!F)}break;case"set-item-label":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;Tl(w,e.label),this.enqueueEvent("userEditedLabel",e)}break;case"set-item-showlabel":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;Vd(w,e.showLabel),!e.showLabel&&!Fd(w)&&(cx(w,!1),WT(w,__dcg_shared_module_exports__['me'].None))}break;case"set-item-color":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;HT(w,e.color)}break;case"set-item-description":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression"&&w.type!=="image")return;w.type==="expression"?g8(w,e.description):w.type==="image"&&w4(w,e.description)}break;case"set-item-fill":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;ED(w,e.fill),this._setItemHidden(w.id,Cm(w))}break;case"set-image-opacity":{let w=this.getItemModel(e.id);if(!w||w.type!=="image")return;k4(w,e.opacity),this._setItemHidden(w.id,!1)}break;case"set-image-in-foreground":{let w=this.getItemModel(e.id);if(!w||w.type!=="image")return;rD(w,e.foreground)}break;case"image-upload-error":this.__pendingImageUploads[e.token]&&(delete this.__pendingImageUploads[e.token],this._showToast({message:this.s("graphing-calculator-text-toast-image-upload-failed")}));break;case"image-upload-success":{if(this.__pendingImageUploads[e.token])if(delete this.__pendingImageUploads[e.token],e.id){let w=this.getItemModel(e.id);w&&w.type==="image"&&E4(w,e.url)}else{let w=this.createItemModel({type:"image",id:this.generateId(),width:e.width,height:e.height,image_url:e.url,name:e.name});this._toplevelNewItemAtSelection(w,{shouldFocus:!1})}this.isUploadingImages()||(this.toastData={})}break;case"image-load-success":{let w=this.getItemModel(e.id);if(!w||w.type!=="image")return;cT(w,"loaded"),this.imageRetryState={lastAttemptTime:0,attempts:0}}break;case"image-load-error":{let w=this.getItemModel(e.id);if(!w||w.type!=="image")return;cT(w,"failed")}break;case"image-retry-loading":{let w=this.getItemModel(e.id);if(!w||w.type!=="image")return;oD(w)}break;case"set-item-dragmode":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;Em(w,e.dragMode)}break;case"set-tablecolumn-dragmode":{let w=this.getItemModel(e.tableId);if(!w||w.type!=="table")return;uq(w,e.columnId,e.dragMode),e.dragMode!==__dcg_shared_module_exports__['hd'].NONE&&this._setTableColumnHidden(e.tableId,e.columnId,!1)}break;case"set-tablecolumn-points":{let w=this.getItemModel(e.tableId);if(!w||w.type!=="table")return;NP(w,e.columnId,e.bool),this._setTableColumnHidden(e.tableId,e.columnId,D0(w,e.columnId))}break;case"set-tablecolumn-lines":{let w=this.getItemModel(e.tableId);if(!w||w.type!=="table")return;lq(w,e.columnId,e.bool),this._setTableColumnHidden(e.tableId,e.columnId,D0(w,e.columnId))}break;case"set-tablecolumn-linestyle":{let w=this.getItemModel(e.tableId);if(!w||w.type!=="table")return;cq(w,e.columnId,e.lineStyle),this._setTableColumnHidden(e.tableId,e.columnId,!1)}break;case"set-tablecolumn-linewidth":{let w=this.getItemModel(e.tableId);if(!w||w.type!=="table")return;_0(w,e.columnId,e.lineWidth),this._setTableColumnHidden(e.tableId,e.columnId,!1)}break;case"set-tablecolumn-lineopacity":{let w=this.getItemModel(e.tableId);if(!w||w.type!=="table")return;M0(w,e.columnId,e.lineOpacity),this._setTableColumnHidden(e.tableId,e.columnId,!1)}break;case"set-tablecolumn-pointsize":{let w=this.getItemModel(e.tableId);if(!w||w.type!=="table")return;A0(w,e.columnId,e.pointSize),this._setTableColumnHidden(e.tableId,e.columnId,!1)}break;case"set-tablecolumn-pointoutline":{let w=this.getItemModel(e.tableId);if(!w||w.type!=="table")return;dq(w,e.columnId,e.pointOutline),this._setTableColumnHidden(e.tableId,e.columnId,!1)}break;case"set-tablecolumn-pointopacity":{let w=this.getItemModel(e.tableId);if(!w||w.type!=="table")return;L0(w,e.columnId,e.pointOpacity),this._setTableColumnHidden(e.tableId,e.columnId,!1)}break;case"set-tablecolumn-pointstyle":{let w=this.getItemModel(e.tableId);if(!w||w.type!=="table")return;sq(w,e.columnId,e.pointStyle),this._setTableColumnHidden(e.tableId,e.columnId,!1)}break;case"set-item-points":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;ID(w,e.points),this._setItemHidden(e.id,Cm(w))}break;case"set-item-pointstyle":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;CD(w,e.pointStyle),this._setItemHidden(e.id,!1)}break;case"set-item-lines":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;_D(w,e.lines),this._setItemHidden(e.id,Cm(w))}break;case"set-item-extend-to-3D":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;f8(w,e.extendTo3D),this._setItemHidden(e.id,!1);let F=(o=this.grapher3d)==null?void 0:o.transition;F&&e.extendTo3D&&(F.objectIdExtendingTo3D&&((i=this.grapher3d)==null||i.webglLayer.setZboundsOnSurfaces(F.objectIdExtendingTo3D,-1/0,1/0)),F.objectIdExtendingTo3D=w.id,F.startTime=-1,F.duration=150)}break;case"set-item-linestyle":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;KT(w,e.lineStyle),this._setItemHidden(e.id,!1)}break;case"set-item-arrow-mode":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;b8(w,e.value),this._setItemHidden(e.id,!1);break}case"set-item-label-dropdown-open":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;m8(w,e.open)}break;case"set-item-fillopacity":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;Zy(w,e.fillOpacity),this._setItemHidden(e.id,!1)}break;case"set-item-surfaceopacity":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;Qy(w,e.surfaceOpacity),this._setItemHidden(e.id,!1)}break;case"set-item-lineopacity":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;mm(w,e.lineOpacity),this._setItemHidden(e.id,!1)}break;case"set-item-pointopacity":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;ex(w,e.pointOpacity),w.showLabel||this._setItemHidden(e.id,!1)}break;case"set-item-pointoutline":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;x8(w,e.pointOutline)}break;case"set-item-pointsize":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;tx(w,e.pointSize),this._setItemHidden(e.id,!1)}break;case"set-item-linewidth":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;fm(w,e.lineWidth),this._setItemHidden(e.id,!1)}break;case"set-item-resolution":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;GT(w,e.resolution),this._setItemHidden(e.id,!1)}break;case"set-item-colorlatex":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;rx(w,e.colorLatex)}break;case"set-item-labelSize":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;ox(w,e.labelSize)}break;case"set-item-labelangle":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;NT(w,e.labelAngle)}break;case"set-item-label-orientation":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;MD(w,e.labelOrientation)}break;case"set-suppress-text-outline":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;y8(w,e.suppressTextOutline)}break;case"set-item-interactive-label":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;cx(w,e.interactiveLabel),e.interactiveLabel&&WT(w,__dcg_shared_module_exports__['me'].None)}break;case"set-item-editable-label-mode":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;w.editableLabelMode!==__dcg_shared_module_exports__['me'].None&&e.editableLabelMode!==__dcg_shared_module_exports__['me'].None&&w.editableLabelMode!==e.editableLabelMode&&Tl(w,""),WT(w,e.editableLabelMode),e.editableLabelMode!==__dcg_shared_module_exports__['me'].None&&cx(w,!1)}break;case"plot-residuals":{let w=this.getItemModel(e.id);if(!w)return;let F;if(w.type==="expression"?F=w.formula.regression:w.type==="table"&&((a=(n=w.formula)==null?void 0:n.table_regression)==null?void 0:a.status)==="success"&&(F=w.formula.table_regression.result),!F)return;let V=F.residualSuggestionId;if(!V)return;let B=this.getItemModel(V);if(!B)return;C0(B,{latex:F.residualVariable,columnIndex:B.columnModels.length-1}),Jt(this,{type:"regression-output",id:e.id,parameter:"residual-zoom"})}break;case"toggle-logmode":{let w=this.getItemModel(e.id);if(!w)return;let F;w.type==="expression"?(F=w.isLogModeRegression,kD(w,!F)):w.type==="table"&&w.regression&&(F=w.regression.isLogMode,mq(w,!F)),F!==void 0&&this.logEvent({category:"regressions",action:F?"disable-log-mode":"enable-log-mode"})}break;case"set-item-latex":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;let F=e.latex,V=w.latex;if(this.garbageCollectGeo([],{[w.id]:{prevLatex:V,nextLatex:F}}),(F==='"'||F==="note")&&this.areNotesEnabled()){let B=this.createItemModel({id:this.generateId(),type:"text"});this._toplevelReplaceItemAt(w.index,B,!0)}else if(F==="")ND(w),this.expandedEvaluationId===w.id&&(this.expandedEvaluationId=void 0);else if(F==="ticker"&&this.canAddTicker())this.listModel.ticker.open=!0,this.focusLocation={type:"ticker",location:"handler"},this._removeExpressionSynchronously(w);else if(F==="folder"&&this.areFoldersEnabled()){let B=this.createItemModel({id:this.generateId(),type:"folder"});tn(w)?(this._toplevelNewItemAtSelection(B,{shouldFocus:!0}),Ii(w,"")):this._toplevelReplaceItemAt(w.index,B,!0)}else if(F==="table"){let B=this._createTableItem();this._toplevelReplaceItemAt(w.index,B,!0)}else F==="inference"&&this.isInferenceWizardEnabled()?(ND(w),this.openInferenceWizard()):!this.isGeometry()&&(F==="betchacant"||F==="pride"||F==="teapot"&&this.is3dProduct())?this.runAfterDispatch(()=>{this.triggerEasterEgg&&this.triggerEasterEgg(F)}):(Ii(w,F),e.source==="user-edit"&&this.trackActionForPotentialEvaluatorRestart("edit",e.id))}break;case"set-visualization-prop":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;e8(w,e.prop,e.value)}break;case"set-clickableinfo-prop":{let w=this.getItemModel(e.id);if(!w)return;w.type==="expression"?t8(w,e.prop,e.value):w.type==="image"&&dT(w,e.prop,e.value)}break;case"set-clickableinfo-rule-latex":{let w=this.getItemModel(e.id);if(!w)return;w.type==="expression"?OT(w,e.latex):w.type==="image"&&D4(w,e.latex)}break;case"set-folder-title":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let w=this.getItemModel(e.id);if(!w||w.type!=="folder")return;BP(w,e.title)}break;case"set-image-mq-attribute":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let w=this.getItemModel(e.id);if(!w||w.type!=="image")return;Ts(w,e.attribute,e.latex)}break;case"set-image-name":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let w=this.getItemModel(e.id);if(!w||w.type!=="image")return;S4(w,e.name)}break;case"set-image-draggable":{let w=this.getItemModel(e.id);if(!w||w.type!=="image")return;let F=om(w);if(!F)return;tD(w,e.draggable),e.draggable&&(eo(F)===__dcg_shared_module_exports__['hd'].NONE||F.dragMode===__dcg_shared_module_exports__['hd'].AUTO)&&Em(F,__dcg_shared_module_exports__['hd'].XY)}break;case"update-degree-mode":{if(this.isComplexModeEnabled())return;this.graphSettings.setProperty("degreeMode",e.mode);break}case"set-graph-settings":{for(let w in e)w!=="type"&&(w==="xAxisScale"?this.switchAxisScale("xAxisScale",e.xAxisScale):w==="yAxisScale"?this.switchAxisScale("yAxisScale",e.yAxisScale):this.graphSettings.setProperty(w,e[w]));this.grapher3d&&this.isThreeDMode()&&(this.grapher2d.redrawAllLayersSynchronously(),this.apply3dProps(e))}break;case"set-polar-mode":if(this.graphSettings.setProperty("polarMode",e.polarMode),e.polarMode){let w=this.graphSettings.xAxisScale==="logarithmic"||this.graphSettings.yAxisScale==="logarithmic",F=this.getGrapher2d();w&&F&&(this.graphSettings.setProperty("xAxisScale","linear"),this.graphSettings.setProperty("yAxisScale","linear"),F.viewportController.setUndoViewport(F.getDefaultViewport()),F.getProjection().updateScalePairs())}break;case"set-domain-minlatex":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;wn(w,e.latex,e.variable)}break;case"set-domain-maxlatex":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;Sn(w,e.latex,e.variable)}break;case"set-note-text":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let w=this.getItemModel(e.id);if(!w||w.type!=="text")return;dD(w,e.text)}break;case"set-edit-list-mode":{let w=ku(this.listModel);if(this.setEditListMode(e.isEditListMode),e.focusExpressionList){if(w===void 0&&(w=this.getItemModelByIndex(0)),!w)return;Jr(this,w.id,w.type==="table"&&e.isEditListMode?"container":"start")}else ar(this.listModel,void 0),Jt(this,void 0)}break;case"set-ghost-mode":this.getGraphSettings().config.setProperty("ghostMode",e.value);break;case"set-projector-mode":this.getGraphSettings().config.setProperty("projectorMode",e.value),this.isThreeDMode()&&this.grapher2d.redrawAllLayersSynchronously();break;case"set-inverted-colors":this.getGraphSettings().config.setProperty("invertedColors",e.value);break;case"set-tablecell-latex":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let w=this.getItemModel(e.tableId);if(!w||w.type!=="table")return;Ld(w,e.cell,e.latex)}break;case"set-state":this.externalSetState(e.state,e.opts);break;case"set-blank":this.externalSetState(this.getBlankState({degreeMode:e.degreeMode}),e.opts);break;case"restore-history":{let{currentState:w,history:F}=LX(e.history);this.setState(so(w)),this.stateStack=F.clone()}break;case"clear-unsaved-changes":this.enqueueEvent("clearUnsavedChanges",e);break;case"reset-graph":{let w=this.getState();this.externalSetState(this.graphSettings.defaultState,{allowUndo:!0}),this.setGeoTool("selection"),this.graphSettings.config.expressions?this.focusFirstExpression():this.setGraphPaperFocus({isFocused:!0}),this._showToast({message:this.s("graphing-calculator-text-toast-graph-reset"),undoCallback:()=>this.dispatch({type:"set-state",state:w,opts:{allowUndo:!0}})}),this.enqueueEvent("graphReset",e)}break;case"clear-graph":{if(this.triggerClearGraph){this.runAfterDispatch(()=>this.triggerClearGraph());return}let w=this.getState();this.externalSetState(this.getBlankState(),{allowUndo:!0});let F=this.getItemModelByIndex(0);F&&Jr(this,F.id,"end"),this._showToast({message:this.s("graphing-calculator-text-toast-graph-cleared"),undoCallback:()=>this.dispatch({type:"set-state",state:w,opts:{allowUndo:!0}})}),this.enqueueEvent("graphReset",e)}break;case"hide-progress-update-legend":this.progressUpdateLegendHidden=!0;break;case"evaluator-progress-update":this.handleEvaluatorProgressUpdates();break;case"on-evaluator-changes":{this.onEvaluatorChangesSpy&&this.onEvaluatorChangesSpy(e.changes,e.timingData,e.graphData,e.eventUpdates),this.clearSlowEvaluatorTracking(),this.evaluator.cancelRestartWorker(),AH(this.listModel,e.changes,e.dependencyOrder);let w=this.getGrapher();if(w&&w.viewportController.updateViewportFromEvaluator(e.changes),this.wizardModel.onEvaluatorChanges(e.changes),(s=this.toneController)==null||s.recomputeAudio(),e.type==="on-evaluator-changes"&&!this.getIncludeFunctionParametersInRandomSeed()&&!FH(this.listModel)&&this.stateStack.getState()&&this.setIncludeFunctionParametersInRandomSeed(!0),!e.graphData)break;for(let F in e.graphData.addedGraphs){let V=e.graphData.addedGraphs[F];if(__dcg_shared_module_exports__['zc'](V)){let B=V.filter(q=>!__dcg_shared_module_exports__['w'](q.branchMode)),L=V.filter(q=>__dcg_shared_module_exports__['w'](q.branchMode));(l=this.grapher2d)==null||l.updateSketch(F,B),(c=this.grapher3d)==null||c.updateSketch(F,L),MH(this.listModel,F,V)}}for(let F in e.graphData.removedGraphs)(p=this.grapher2d)==null||p.removeGraphSketch(F),(h=this.grapher3d)==null||h.removeGraphSketch(F);if(this.isThreeDMode())(g=this.grapher2d)==null||g.redrawAllLayersSynchronously();else{for(let F in e.graphData.intersections){let V=e.graphData.intersections[F];__dcg_shared_module_exports__['zc'](V)&&((m=this.grapher2d)==null||m.updateIntersections(F,V))}(b=this.get2dPOIController())==null||b.handleTraceUpdate(),(x=this.getAudioGraph())==null||x.handleEvaluatorChange(e.graphData)}if(e.eventUpdates){for(let F of __dcg_shared_module_exports__['A'](e.eventUpdates.updates))this.updateLatexForIdentifier(F,e.eventUpdates.updates[F]);e.eventUpdates.objectClicked&&this.enqueueEvent("userClickedObject",e),this.onActionUpdatesAppliedSpy&&this.onActionUpdatesAppliedSpy(e.eventUpdates)}}break;case"add-helper-expression":bH(this.listModel,e.state);break;case"tick":this._tickSliders(e.time);break;case"tick-ticker":this.tickTicker(e.time);break;case"adjust-slider-by-keyboard":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;sD(w,e.adjustment)}break;case"adjust-slider-by-dragging-thumb":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;lD(w,e.target)}break;case"set-slider-minlatex":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;yu(w,e.latex)}break;case"set-slider-maxlatex":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;xu(w,e.latex)}break;case"set-slider-steplatex":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;Uy(w,e.latex)}break;case"set-slider-dragging":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;xT(w,e.dragging)}break;case"play-slider-from-min":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;let F=Yn(w);if(isNaN(F))return;let V=Ic(w.latex,F);vn(w,!1),Ii(w,V),vn(w,!0)}break;case"set-slider-isplaying":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;vn(w,e.isPlaying)}break;case"set-slider-loopmode":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;u8(w,e.loopMode)}break;case"set-slider-animationperiod":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression")return;R4(w,e.animationPeriod)}break;case"show-expressions-list":this._showExpressions(e.focusHideIcon);break;case"hide-expressions-list":this._hideExpressions(e.focusShowIcon);break;case"re-randomize":this.setRandomSeed(il());break;case"resize-exp-list":e.expListWidth!==void 0&&this._setExpListWidth(e.expListWidth),e.expListHeight!==void 0&&this._setExpListHeight(e.expListHeight);break;case"toast/show":this._showToast(e.toast);break;case"toast/close":this.closeToast();break;case"toast/undo":let A=this.toastData.undoCallback;A&&this.runAfterDispatch(A),this.closeToast();break;case"toast/learn-more":let D=this.toastData.learnMoreCallback;D&&this.runAfterDispatch(D),this.toastData={};break;case"start-moving-points":this.movablePointsController.startMovingPoints(e.points);break;case"stop-moving-points":this.movablePointsController.stopMovingPoints(e.points);break;case"on-move-points":{let{didMovePoint:w}=this.movablePointsController.movePoints({points:e.points,previous_screen_pts:e.previousScreenPts,screen_pts:e.screenPts,projection:e.projection,transform:e.transform,keyboardDirection:e.keyboardDirection});w&&this.enqueueEvent("userMovedPoint",e)}break;case"commit-user-requested-viewport":this.commitNumericalViewportBounds(e.viewport);break;case"commit-user-requested-rotation":this.graphSettings.setProperty("worldRotation3D",e.worldRotation3D),this.graphSettings.setProperty("axis3D",e.axis3D),this.graphSettings.setProperty("speed3D",e.speed3D);break;case"toggle-lock-viewport":this.graphSettings.setProperty("userLockedViewport",!this.graphSettings.userLockedViewport),!this.graphSettings.userLockedViewport&&this.graphSettings.userLockedRotation&&this.graphSettings.setProperty("userLockedRotation",!1);break;case"set-lock-rotation":e.lockRotation&&this.graphSettings.setProperty("speed3D",0),this.graphSettings.setProperty("userLockedRotation",e.lockRotation);break;case"toggle-complex-mode":{this.graphSettings.setProperty("complex",!this.graphSettings.complex),this.graphSettings.setProperty("degreeMode",!1);break}case"set-axis-limit-latex":this._setAxisLimitLatex(e.limit,e.latex),e.updateYZAlso&&(this._setAxisLimitLatex(e.limit==="xmin"?"ymin":"ymax",e.latex),this._setAxisLimitLatex(e.limit==="xmin"?"zmin":"zmax",e.latex)),(E=this.getGrapher())==null||E.viewportController.markUserDirectlyEditedViewport();break;case"toggle-graph-settings":if(this.layoutModel={...this.layoutModel,graphSettingsOpen:!this.layoutModel.graphSettingsOpen},ar(this.listModel,void 0),this.getDynamicViewportBoundsErrors()&&this.layoutModel.graphSettingsOpen){let F=["xmin","xmax","ymin","ymax","zmin","zmax"].filter(V=>{var B,L;return!!((L=(B=this.settingsViewModel)==null?void 0:B.errors)!=null&&L[V])})[0]||"xmin";Jt(this,{type:"settings",location:F})}else e.focusOnOpen&&(this.layoutModel.graphSettingsOpen?this.getDynamicViewportBoundsErrors()||(this.is3dProduct()?Jt(this,{type:"settings",location:"reverse-contrast"}):this.getGraphSettings().config.projectorMode?Jt(this,{type:"settings",location:"large-size"}):Jt(this,{type:"settings",location:"default-size"})):Jt(this,{type:"settings",location:"icon"}));break;case"close-graph-settings":this.layoutModel={...this.layoutModel,graphSettingsOpen:!1},e.focusIconAfterClose&&Jt(this,{type:"settings",location:"icon"});break;case"toggle-add-expression":this.wizardModel.isWizardOpen()&&this.closeAddInferenceWizard(),this.layoutModel={...this.layoutModel,addExpressionOpen:!this.layoutModel.addExpressionOpen},e.focusOnOpen&&this.layoutModel.addExpressionOpen&&Jt(this,{type:"add-expression-btn"});break;case"close-add-expression":this._closeAddExpression(),e.focusIconAfterClose&&Jt(this,{type:"add-item-btn"});break;case"ui/container-resized":this.layoutMeasurements={width:e.size.width,height:e.size.height},this.pinchZoom=e.size.pinchZoom,this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;break;case"enter-printmode":this.inPrintMode=!0;break;case"exit-printmode":this.inPrintMode=!1;break;case"expression-size-exceeded":this._showToast({message:this.s("graphing-calculator-text-toast-expression-size-limit")});break;case"keypad/set-layout":this.layoutModel={...this.layoutModel,keypadLayout:e.layout,keypadFunctionsOpen:!1};break;case"keypad/set-minimized":this.layoutModel={...this.layoutModel,keypadMinimized:e.minimized,keypadLayout:"mainNumbers"},this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,this.needsFakeKeypad()||$W(this),Te(e.minimized?this.s("graphing-calculator-narration-keypad-hidden"):this.s("graphing-calculator-narration-keypad-visible"));break;case"keypad/type-text":this.layoutModel={...this.layoutModel,keypadFunctionsOpen:!1},this.runAfterDispatch(()=>{let w=qe.getFocusedMathquill();w&&qe.canAcceptText(w,this.getCapExpressionSize(),e.text)&&(w.typedText(e.text),qe.simulateUserChangedLatex(w))});break;case"keypad/press-key":this.layoutModel={...this.layoutModel,keypadFunctionsOpen:!1},this.runAfterDispatch(()=>{let w=qe.getFocusedMathquill();w&&qe.simulateKeypressFromKeypad(w,e.key)});break;case"keypad/audio-trace":this.handleAudioTraceCommand(e.command);break;case"set-audio-trace-speed":this.setAudioTraceSpeed(e.speed);break;case"keypad/custom-command":this.layoutModel={...this.layoutModel,keypadFunctionsOpen:!1},this.runAfterDispatch(()=>{let w=qe.getFocusedMathquill();w&&(lA(w,e.command,{capExpressionSize:this.getCapExpressionSize()}),qe.simulateUserChangedLatex(w))});break;case"keypad/shift":this.layoutModel={...this.layoutModel,keypadLayout:PX(this.getKeypadLayout()),keypadFunctionsOpen:!1};break;case"keypad/123":this.layoutModel={...this.layoutModel,keypadLayout:"mainNumbers",keypadFunctionsOpen:!1};break;case"keypad/abc":this.isQwertyKeyboardEnabled()?this.layoutModel={...this.layoutModel,keypadLayout:"letters",keypadFunctionsOpen:!1}:this.layoutModel={...this.layoutModel,keypadLayout:"noQwertyLetters",keypadFunctionsOpen:!1};break;case"keypad/audio":this.layoutModel={...this.layoutModel,keypadMinimized:!1,keypadLayout:"audio",keypadFunctionsOpen:!1};break;case"keypad/functions":this.layoutModel={...this.layoutModel,keypadFunctionsOpen:!this.isKeypadFunctionsPopoverOpen()};break;case"grapher/drag-start":break;case"grapher/drag-move":break;case"grapher/drag-end":break;case"open-on-web":this._openOnWeb();break;case"file-is-dragged-over":this.listModel.openItemMenu=void 0,this.layoutModel={...this.layoutModel,isFileDraggedOver:!0};break;case"file-is-not-dragged-over":this.layoutModel={...this.layoutModel,isFileDraggedOver:!1};break;case"zoom":(S=this.getGrapher())==null||S.viewportController.zoom(e.direction);break;case"set-hovered-image":{let w=this.getItemModel(e.id);if(!w||w.type!=="image")return;dT(w,"hoveredImage",e.url)}break;case"set-depressed-image":{let w=this.getItemModel(e.id);if(!w||w.type!=="image")return;dT(w,"depressedImage",e.url)}break;case"clickable-item-clicked":this.handleClickableItemClicked(e.id,e.listIndex);break;case"action-single-step":{let w=this.getItemModel(e.id);if(!w||w.type!=="expression"||!_c(w))return;this.evaluator.addActionStepEvent(w.id)}break;case"update-expression-search-str":this.updateExpressionSearchStr(e.str);break;case"update-expression-replace-str":this.updateExpressionReplaceStr(e.str);break;case"rename-identifier-global":wl(this.listModel,e.search,e.replace);break;case"rename-identifier-in-item":let G=this.getItemModel(e.id);G&&G.type==="folder"?wl(this.listModel,e.search,e.replace,{limitToFolder:e.id}):wl(this.listModel,e.search,e.replace,{limitToItem:e.id});break;case"update-ticker-handlerlatex":this.updateTickerHandlerLatex(e.latex);break;case"update-ticker-minsteplatex":this.updateTickerMinStepLatex(e.latex);break;case"set-braille-mode":this.setBrailleMode(e.mode);break;case"set-six-key-input":this.setSixKeyInput(e.useSixKeyInput);break;case"set-show-constructions-open":if(this.showConstructionsOpen=e.open,e.setFocus)if(!e.open)Jt(this,{type:"geo-show-constructions-icon"});else for(let w in this.cachedGeoTokenInfo){let{calcId:F}=this.cachedGeoTokenInfo[w];if(this.getItemModel(F)){Jt(this,{type:"geo-token",identifier:w});break}}break;case"select-geo-tool":this.listModel.openItemMenu=void 0,this.setGeoTool(e.tool),e.forceSingleUse&&this.geoModel.markCurrentToolSingleUse(),__dcg_shared_module_exports__['Mc'](e.tool)||e.tool==="selection"||ar(this.listModel,void 0),e.focusGraphPaper&&this.setGraphPaperFocus({isFocused:!0}),this.closeToast();break;case"cancel-geo-toolplay":this.cancelGeoToolplay(),this.geoModel.getNonObjectsState().ui.currentTool.forceSingleUse&&this.setGeoTool("selection");break;case"update-click-to-insert-mode":this.getGeoModel().setClickToInsertMode(e.clickToInsertMode);break;case"commit-geo-objects":{let w=[],F=[],V=this.findLastSubscriptForLetters(),B={},L=pe=>{let Y=B[pe];if(Y)return Y.assignmentLatex;let j=this.getItemModel(pe);if(!j||j.type!=="expression")return pe;let X=this._autoNameExpression(j,V);return Y=B[pe]={model:j,assignmentLatex:X},Y.assignmentLatex},q=[],le=sR(e.committed,{isBeingCommitted:!0,getVariableNameForId:L,allowAngleToolMeasurementLabel:Ec(this.geometryToolbarModel).angleLabelControl});for(let pe in e.committed){let Y=e.committed[pe];__dcg_shared_module_exports__['Mc'](Y.type)&&q.push(pe);let j=le[pe];(j==null?void 0:j.type)==="assignment"&&(j.sliderInfo?F.push({latex:j.latex,color:j.color,sliderInfo:j.sliderInfo}):w.push({...j,tokenId:pe}))}let $=this.listModel.__toolPreviewIdToModel;if(w.length){let pe=this.getGeometryFolder(),Y=pe?pe.index+this.getNumberOfItemsInFolder(pe.id)+1:0;w.forEach(j=>{var xe;let X;for(let fe in $){let Se=$[fe];if(((xe=uo(Se))==null?void 0:xe.latex)===j.tokenId){X=Se;break}}X?(X.latex=j.latex,X.color=j.color,X.showLabel=!!j.showLabel,X.showAngleLabel=j.showAngleLabel!==!1,pe&&(X.folderId=pe.id)):X=this.createItemModel({id:this.generateId(),type:"expression",showLabel:j.showLabel,showAngleLabel:j.showAngleLabel,latex:j.latex,folderId:pe&&pe.id,color:j.color}),pe?(ki(this.listModel,X,Y),Y+=1):ka(this.listModel,X),this.getGeoModel().recordCommittedOutput(X.id)})}F.forEach(pe=>{let Y;for(let j in $){let X=$[j];if(X.latex===pe.latex){Y=X;break}}Y?(Y.latex=pe.latex,Y.color=pe.color,yu(Y,pe.sliderInfo.min),xu(Y,pe.sliderInfo.max)):Y=this.createItemModel({id:this.generateId(),type:"expression",latex:pe.latex,color:pe.color,slider:{hardMin:!0,hardMax:!0,min:pe.sliderInfo.min,max:pe.sliderInfo.max}}),ki(this.listModel,Y,0),this.getGeoModel().recordCommittedOutput(Y.id)}),q.length===1&&this.transformAllSelectedItemsByAssignmentLatex(q[0]),(this.geoModel.isCurrentToolSingleUse()||e.clearToolAndSelection)&&this.setGeoTool("selection"),e.clearToolAndSelection&&ar(this.listModel,void 0);let ne=e.toolIdToLatex[1],ue=le[ne],de=(ue==null?void 0:ue.type)==="inline"?ue.rhs:ne;if(this.geoModel.getToolMode()==="expression-edit"&&de){let pe=aR(de,L);this.writeIdentifierIntoCurrentMathquill(pe)}this.isGeometry()&&this.getGeoModel().updateFadeAnimations()}break;case"rename-identifier":{let w=e.from,F=e.to,V=__dcg_shared_module_exports__['ja'](w),B=this.getGeometryFolder();B&&this.getItemsByIdentifier(V).forEach(L=>{e.geoFolder&&L.folderId!==B.id?(ui(L,B.id),Rd(this.listModel,L.index,B.index+1,1)):!e.geoFolder&&L.folderId===B.id&&(Rd(this.listModel,L.index,B.index+this.getNumberOfItemsInFolder(B.id),1),ui(L,""))}),wl(this.listModel,w,F)}break;case"set-active-token":this.activeTokens[e.style]=e.identifier;break;case"unset-active-token":this.activeTokens[e.style]===e.identifier&&(this.activeTokens[e.style]=void 0);break;case"select-expression-that-defines-token":{let w=this.getExpressionIdForIdentifier(e.identifier);if(!w||(this.setGeoTool("selection"),this.isItemNotSelectableBecauseItsSecret(w)))return;e.multiSelectMode||e.toggle?fD(this.listModel,w,"selected"):this.tryInsertTokenIntoMathquill(w,void 0)||ar(this.listModel,this.getItemModel(w))}break;case"close-expression-search":this.closeExpressionsSearch();break;case"open-expression-search":this.expressionSearchOpen=!0,this.focusLocation={type:"search-expressions"};let N=e.latex;e.rename&&!Ji(N)&&(N="");let U=e.rename?N?`\\operatorname{rename}\\ ${N}\\to`:"\\operatorname{rename}\\ ":N;this.updateExpressionSearchStr(U);break;case"open-ticker":this.listModel.ticker.open=!0,this.focusLocation={type:"ticker",location:"handler"},this._closeAddExpression();break;case"close-ticker":this.listModel.ticker.open=!1,this.listModel.ticker.playing=!1,this.listModel.ticker.minStepLatex="",this.listModel.ticker.handlerLatex="";break;case"toggle-ticker":this.listModel.ticker.playing=!this.listModel.ticker.playing,this.listModel.ticker.lastTickTime=void 0,this.pauseAllSliders();break;case"set-tool-preview-state":this.setToolPreviewState(e.state);break;case"apply-transformation-to-selected":this.transformAllSelectedItemsByAssignmentLatex(e.assignmentLatex),this.closeItemSettingsMenu();break;case"set-geometry-toolbar":{m4(this.geometryToolbarModel,e.toolbar);break}case"set-geometry-custom-toolbar-setting":{rT(this.geometryToolbarModel,e.tool,e.value);break}case"set-geometry-custom-toolbar-measurement-option":{b4(this.geometryToolbarModel,e.option,e.value);break}case"set-author-mode":{this.setAuthorMode(e.enabled);break}case"set-translucent-surfaces":{this.getGraphSettings().config.setProperty("translucentSurfaces",e.value);break}case"set-perspective-distortion":{this.getGraphSettings().config.setProperty("perspectiveDistortion",e.value),(k=this.grapher3d)==null||k.redrawAllLayers();break}case"mute-global":case"unmute-global":{e.type==="unmute-global"&&this.runAfterDispatch(()=>{var w;(w=this.getAudioGraph())==null||w.exitAudioTrace()}),(T=this.toneController)==null||T.handleAction(e),this.getGraphSettings().config.setProperty("muted",e.type==="mute-global");break}case"mark-too-complex-for-gl":{for(let w of e.errors){let F=this.getItemModel(w);F&&F.type==="expression"&&(F.expressionTooComplex=!0)}for(let w of e.fixed){let F=this.getItemModel(w);F&&F.type==="expression"&&(F.expressionTooComplex=!1)}break}case"update-legacy-random-seed-behavior":{this.setIncludeFunctionParametersInRandomSeed(!0),this.setState(this.getState({avoidBackMigration:!0}),{allowUndo:!0});break}case"export-latex-to-explist":{let w=this.createItemModel({type:"expression",id:this.generateId(),latex:e.latex,color:e.color,folderId:e.folderId});this.layoutModel.openPopoverGuid=void 0,e.indexToInsert?ki(this.listModel,w,e.indexToInsert):ka(this.listModel,w),this.setEditListMode(!1),Jr(this,w.id);break}case"create-table-regression":{let w=this.getItemModel(e.tableId);if((w==null?void 0:w.type)==="table"&&this.areTableRegressionsEnabled()){let F=e.columnIds;if(!F){let V=w.columnModels.slice(1).filter(B=>Tc(B)&&Pd(B));if(V.length===0)break;F={x:w.columnModels[0].id,y:V[0].id}}_y(w,{type:e.regressionType,columnIds:F,id:this.generateId(),color:this.getNextColor(),lineStyle:__dcg_shared_module_exports__['Qd'].SOLID,hidden:!1,isLogMode:this.areLogModeRegressionsDefault()||this.areLogModeRegressionsForced(),residualVariable:void 0}),Jt(this,{type:"table-regression-type-dropdown",id:e.tableId})}break}case"remove-table-regression":{let w=this.getItemModel(e.tableId);if((w==null?void 0:w.type)==="table"){if(((P=(I=w.formula)==null?void 0:I.table_regression)==null?void 0:P.status)==="success"){let V=w.formula.table_regression.result.residualVariable;if(V){let B=w.columnModels.findIndex(L=>L.latex===V);B>=0&&Iy(w,B)}}_y(w,void 0),Jt(this,{type:"add-table-regression-btn",id:e.tableId})}break}case"update-table-regression":{let w=this.getItemModel(e.tableId);if((w==null?void 0:w.type)==="table"&&w.regression){let F={...w.regression,...e.update};_y(w,F)}break}case"export-table-regression":{this.exportTableRegression(e.mode,e.tableId);break}case"export-inference-item-to-expression-list":{this.exportInferenceItem(e.item,e.id),this.layoutModel.openPopoverGuid=void 0;break}case"set-table-regression-dropdown-open":e.open?this.layoutModel.tableRegressionsDropdownOpenForTableId=e.tableId:this.layoutModel.tableRegressionsDropdownOpenForTableId=void 0;break;case"set-popover-open":this.setPopoverOpen(e.guid,e.open);break;case"expand-evaluation":let K=this.getItemModel(e.id);ar(this.listModel,K),this.expandedEvaluationId=e.id;break;case"collapse-evaluation":e.id===this.expandedEvaluationId&&(this.expandedEvaluationId=void 0);break;case"move-movable-point-within-dispatch":e.cb();break;case"request-full-evaluation":this.isCurrentlyDoingRestoreState=!0;break;case"dismiss-reduced-motion-cover":this.showReducedMotionCover=!1,e.stopAnimations?this.stopAllAnimations():this.grapher3d&&this.graphSettings.speed3D&&(this.grapher3d.controls.speed3D=this.graphSettings.speed3D);break;default:return e}}stopAllAnimations(){this.listModel.ticker.playing&&(this.listModel.ticker.playing=!1),this.grapher3d&&this.graphSettings.speed3D&&this.graphSettings.setProperty("speed3D",0),this.pauseAllSliders()}areTableRegressionsEnabled(){return this.getGraphSettings().config.regressionTemplates}isTableRegressionsDropdownOpen(e){return this.layoutModel.tableRegressionsDropdownOpenForTableId===e}switchAxisScale(e,t){var i,n;if(!t||t===this.graphSettings[e])return;this.graphSettings.setProperty("polarMode",!1);let o;this.getAllItemModels().forEach(a=>{if(this.isExpressionZoomFit(a)){if(!this.getBoundingBoxesForZoomFit(a))return;o=a.id}}),this.graphSettings.setProperty(e,t),(i=this.getGrapher2d())==null||i.getProjection().updateScalePairs(),!(o&&this._expressionZoomFit(o,{focusAfterTap:!1,synchronous:!0,justResiduals:!1}))&&(this.canComputeViewportSynchronously()?this.enforceAxisLimitsForScale(e):(n=this.getGrapher())==null||n.viewportController.ensureValidNumericViewport())}canComputeViewportSynchronously(){var t;let e=(t=this.getGrapher())==null?void 0:t.viewportController.getCurrentViewportLatex();return!!e&&!!__dcg_shared_module_exports__['Qe'].evaluateFromLatex(e,this.getDegreeMode(),this.isComplexModeEnabled())}enforceAxisLimitsForScale(e){var h;let t=this.getGrapher2d();if(!t)return;let o=t.getDefaultViewport();if(!o)return;e==="xAxisScale"?(this._setAxisLimitLatex("xmin",__dcg_shared_module_exports__['ha'](o.xmin)),this._setAxisLimitLatex("xmax",__dcg_shared_module_exports__['ha'](o.xmax))):(this._setAxisLimitLatex("ymin",__dcg_shared_module_exports__['ha'](o.ymin)),this._setAxisLimitLatex("ymax",__dcg_shared_module_exports__['ha'](o.ymax))),this.graphSettings.xAxisScale===this.graphSettings.yAxisScale&&(this.graphSettings.setProperty("lastChangedAxis",e==="xAxisScale"?"y":"x"),t.viewportController.zoomSquareImmediately(),this.markSquareAxesAfterUserEditedViewport());let i=t.viewportController.getViewport(),n=t.getProjection(),{xmin:a,xmax:s,ymin:l,ymax:c}=i,p=this.getGraphSettings().config.logScales;if(e==="xAxisScale"&&p){let g=n.mapx(a),m=n.mapx(s),b=Br(n.reverse_mapx(g-.25),n.reverse_mapx(g+.25)),x=Br(n.reverse_mapx(m-.25),n.reverse_mapx(m+.25));this._setAxisLimitLatex("xmin",__dcg_shared_module_exports__['ha'](b)),this._setAxisLimitLatex("xmax",__dcg_shared_module_exports__['ha'](x))}if(e==="yAxisScale"&&p){let g=n.mapy(l),m=n.mapy(c),b=Br(n.reverse_mapy(g-.25),n.reverse_mapy(g+.25)),x=Br(n.reverse_mapy(m-.25),n.reverse_mapy(m+.25));this._setAxisLimitLatex("ymin",__dcg_shared_module_exports__['ha'](b)),this._setAxisLimitLatex("ymax",__dcg_shared_module_exports__['ha'](x))}(h=this.getGrapher())==null||h.viewportController.markUserDirectlyEditedViewport()}openInferenceWizard(){let e=this.getSelectedItem(),t;if((e==null?void 0:e.type)==="expression"&&e.latex===""&&!this.isItemReadonly(e.id))t=e.id;else{let o=this.createItemModel({type:"expression",id:this.generateId(),color:this.getNextColor()});this.setEditListMode(!1),this._toplevelNewItemAtSelection(o,{shouldFocus:!1}),t=o.id}ar(this.listModel,void 0),this._closeAddExpression(),this.wizardModel.openWizard(t),Jt(this,this.wizardModel.getFirstWizardInputFocusLocation())}_convertOrCreateTable(e){let t=this.getItemModelByIndex(e),o=pu(t),i=T0(t);if((t==null?void 0:t.type)!=="expression")return;let n=this.isInEditListMode(),a;switch(o){case"point-list":a=Sz(t);break;case"point-list-reference":a=Tz(t);break;case"anonymous-function":a=kz(t);break;case"function-reference":a=Cz(t);break;case"recursive-function":a=Iz(t);break}if(n&&this.setEditListMode(!1),!o||!a){this._showToast({message:this.s("graphing-calculator-text-table-creation-error")}),Lr("Convert to table bug",{metaData:{latex:t.latex,type:o}});return}let s={id:this.generateId(),type:"table",readonly:t.readonly,columns:[{...pc,id:this.generateId(),latex:a.headers[0],values:a.values[0]},{...pc,id:this.generateId(),latex:a.headers[1],values:a.values[1],color:t.color,lines:!i&&!!t.lines}]},l=this.createItemModel(s);if(i){let p=t.index+1;if(o==="recursive-function"){let h=t.formula.function_definition;for(;this.isBaseCaseItem(p,h);)p++}this._toplevelInsertItemAt(p,l,!0,t.folderId)}else this._toplevelReplaceItemAt(t.index,l,!0);let c=()=>{this.dispatch({type:"undo"}),n&&this.dispatch({type:"set-edit-list-mode",isEditListMode:!0,focusExpressionList:!1})};this._showToast({message:this.s("graphing-calculator-text-table-created"),undoCallback:c}),this.logEvent({category:"convert-to-table",action:o})}isBaseCaseItem(e,t){var i;let o=this.getItemModelByIndex(e);return!o||o.type!=="expression"||!t?!1:((i=o.formula.recursion_base_case)==null?void 0:i.symbol)===t}hasTableHeaderWithIdentifier(e){return!!e&&sH(this.listModel,e)}transformAllSelectedItemsByAssignmentLatex(e){var c,p;let t=AT(this.listModel),o=this.findLastTokenNumber()+1,i=this.findLastSubscriptForLetters(),n=this.getGeometryFolder(),a=n?n.index+this.getNumberOfItemsInFolder(n.id)+1:0,s={};for(let h of t){if(h.type!=="expression"||!h.formula.geometry)continue;let m=(c=h.formula.typed_constant_value)==null?void 0:c.valueType;if(!m||__dcg_shared_module_exports__['wb'](m,__dcg_shared_module_exports__['Qa']))continue;let b=(p=uo(h))==null?void 0:p.latex;b||(b=this._autoNameExpression(h,i));let x=`\\token{${o}}`;o+=1;let E=`${x}=${e}\\left(${b}\\right)`,S=this.createItemModel({id:this.generateId(),type:"expression",showLabel:h.showLabel&&!h.label,showAngleLabel:h.showAngleLabel&&!h.label,latex:E,folderId:n&&n.id,color:h.color});s[S.id]=!0,n?(ki(this.listModel,S,a),a+=1):ka(this.listModel,S)}let l=Object.keys(s);if(l.length&&bD(this.listModel,s),l.length===1){let h=l[0];this.runAfterDispatch(()=>{this.getItemModel(h)&&this.get2dPOIController().keyboardAttentionManager.updateKeyboardAttention({calcId:h,listIndex:void 0,polygonEdge:void 0},{describe:!1})})}}convertToTokenAssignment(e,t=""){var n;let o=(n=uo(e))==null?void 0:n.latex,i=t?Qb(t)||"":"\\token{"+(this.findLastTokenNumber()+1)+"}";o?wl(this.listModel,o,i):Ii(e,i+"="+e.latex)}convertToNamedAssignment(e,t=""){let o=qT(e);if(!o)return;let i=t?Qb(t):this.getAutonameLatexForExpression(e);i?wl(this.listModel,o,i):Ii(e,t)}getAutonameLatexForExpression(e,t){if(t||(t=this.findLastSubscriptForLetters()),SD(e)==="point"&&e.label&&Ji(e.label)&&this.countGlobalIdentifierOccurences(e.label)===0)return e.label;let o=l8(e),i=(t[o]||0)+1;return t[o]=i,o+"_{"+i+"}"}_autoNameExpression(e,t){let o=this.getAutonameLatexForExpression(e,t);return Ii(e,o+"="+e.latex),o}isGeoToolVisible(e,{ignoreAuthorMode:t}={ignoreAuthorMode:!1}){return!t&&this.shouldShowAuthorFeatures()?!0:mu(this.geometryToolbarModel,e)}isGeoToolEnabled(e,{ignoreAuthorMode:t}={ignoreAuthorMode:!1}){return!t&&this.shouldShowAuthorFeatures()?!0:rm(this.geometryToolbarModel,e)}setGeoTool(e){if(!this.geoUIActive||this.activeTool===e||!this.isGeoToolEnabled(e))return;f4(this.geometryToolbarModel,e,this.shouldShowAuthorFeatures()),this.activeTool=e,this.getGeoModel().setToolMode(e),this.cancelGeoToolplay()}cancelGeoToolplay(){var t;let e=this.getGeoModel();e.cancelToolplay(),e.deselectAllObjects(),this.setToolPreviewState({}),(t=this.get2dPOIController())==null||t.cancelGeoToolplay()}setToolPreviewState(e){var i;this.toolPreviewJSONState=e;let t=this.listModel.__toolPreviewIdToModel;this.listModel.__toolPreviewIdToModel={};let o=sR(e,{isBeingCommitted:!1,allowAngleToolMeasurementLabel:Ec(this.geometryToolbarModel).angleLabelControl});for(let n in e){let a=e[n],s=o[n];if(!s||s.type!=="assignment")continue;let l;for(let c in t){let p=t[a.type==="expression-edit-preview-latex"?cm:c];if(((i=uo(p))==null?void 0:i.latex)===n){l=p;break}}if(l)l.latex=s.latex,l.color=s.color,l.showAngleLabel=!!s.showAngleLabel,l.hidden=a.hidden;else{let c=a.type==="expression-edit-preview-latex"?this.getSelectedItem():void 0,p=(c==null?void 0:c.type)==="expression"?Jy(c,{stripDefaults:!0}):void 0;l=RT({...p,id:a.type==="expression-edit-preview-latex"?cm:this.generateId(),type:"expression",color:s.color,latex:s.latex,showAngleLabel:!!s.showAngleLabel,hidden:a.hidden},this)}this.listModel.__toolPreviewIdToModel[l.id]=l}}isGeoItem(e){let t=this.getItemModel(e);return t&&t.type==="expression"&&t.formula&&t.formula.geometry&&!t.formula.error}getSelectedGeoExpression(){let e=this.getSelectedItem();if(e&&this.isGeoItem(e.id)&&e.type==="expression")return e}getGeometryFolder(){let e=this.getItemModel(__dcg_shared_module_exports__['je']);return e&&e.type==="folder"?e:void 0}isItemInGeoFolder(e){let t=this.getItemModel(e);return!t||t.type==="folder"?!1:t.folderId===__dcg_shared_module_exports__['je']}isGeoFolder(e){return e.id===__dcg_shared_module_exports__['je']}isItemNotSelectableBecauseItsSecret(e){return!(this.shouldShowAuthorFeatures()||this.isItemInGeoFolder(e)||!this.isItemSecret(e))}pauseAllSliders(){this.getPlayingSliders().forEach(e=>{vn(e,!1)})}countGlobalIdentifierOccurences(e){return By(this.listModel,e)}handleClickableItemClicked(e,t){let o=this.getItemModel(e);Yy(o)&&this.evaluator.addClickEvent(o.id,t)}canAddTicker(){return!this.getTickerOpen()}shouldBlockEventUpdates(e){for(let t in e.updates)if(this.doesIdentifierBlockActionUpdate(t))return!0;return!1}doesIdentifierBlockActionUpdate(e){let t=this.getFocusLocation(),o=Od(this.listModel,e);for(let i of o)if((t==null?void 0:t.type)==="expression"&&t.id===i.id||p8(i))return!0;return!1}getItemsByIdentifier(e){return Od(this.listModel,e)}isAtLeastOnePointSelected(){let e=this.getAllSelectedItems();for(let t=0;t<e.length;t++){let o=e[t];if(o.type==="expression"&&ws(o))return!0}return!1}toggleLabelForAllSelectedObjects(){let e=[],t=[];this.getAllSelectedItems().forEach(o=>{o.type==="expression"&&ws(o)&&(o.showLabel?t.push(o):e.push(o))}),e.length?this.setLabelStateForObjects(e,"measurement"):t.length&&this.setLabelStateForObjects(t,"none")}setLabelStateForObjects(e,t){let o=/^([A-Z])([0-9]*)$/;if(t==="auto"){let i=0;this.getAllItemModels().forEach(n=>{if(n.type!=="expression"||!n.showLabel||!n.label)return;let a=n.label.match(o);if(!a)return;let s=a[1].charCodeAt(0)-65;a[2]&&(s+=parseInt(a[2])*26),s>=i&&(i=s+1)}),e.forEach(n=>{if(!n.label){let a=i;i++;let s=String.fromCharCode(a%26+65),l=Math.floor(a/26),c=l>0?l+"":"";Tl(n,s+c)}Vd(n,!0)})}else if(t==="measurement")for(let i of e)Tl(i,""),Vd(i,!0);else if(t==="none")for(let i of e)o.test(i.label)&&Tl(i,""),Vd(i,!1)}updateLatexForIdentifier(e,t){let o=Od(this.listModel,e);if(o.length===1){let i=o[0],{prefix:n}=__dcg_shared_module_exports__['Ke'](i.latex);n&&(t=n+t),i.slider.isPlaying?(vn(i,!1),Ii(i,t),vn(i,!0)):Ii(i,t)}}updateExpressionSearchStr(e){this.rawExpressionSearchStr=e;let t="\\operatorname{rename}";if(e.indexOf(t)===0){let i=e.slice(t.length).replace(/\\ /g,"").split(/\\to(?![a-zA-Z])/);i.length===2?(this.expressionSearchStr=i[0],this.isExpressionSearchStrValidForReplace=Ji(this.expressionSearchStr),this.updateExpressionReplaceStr(i[1])):(this.expressionSearchStr=i[0],this.isExpressionSearchStrValidForReplace=!1,this.updateExpressionReplaceStr(""));let n=lH(this.listModel,this.getExpressionSearchStr());this.expressionSearchCount=this.expressionSearchOpen?n:0}else this.expressionSearchStr=e.length>1&&"rename".indexOf(e)===0?"":e,this.isExpressionSearchStrValidForReplace=!1,this.updateExpressionReplaceStr(""),this.filterItemsBySearch()}closeExpressionsSearch(){var o;if(this.expressionSearchOpen=!1,this.updateExpressionSearchStr(""),((o=this.getFocusLocation())==null?void 0:o.type)==="ticker")return;let e=this.getFirstSelectedItem(),t=this.getItemModelByIndex(0);!e&&t&&Jr(this,t.id,"end"),e&&this.getSelectedItem()&&!this.getFocusedItem()&&Jr(this,e.id,"end"),(e||t)&&(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0)}filterItemsBySearch(){if(!this.getExpressionReplaceStr()){let e=dH(this.listModel,this.getExpressionSearchStr());this.expressionSearchCount=this.expressionSearchOpen?e:0}}updateExpressionReplaceStr(e){this.expressionReplaceStr=e,this.isExpressionReplaceStrValidForReplace=Ji(e)}getIsExpressionSearchStrValidForReplace(){return this.isExpressionSearchStrValidForReplace}getIsExpressionReplaceStrValidForReplace(){return this.isExpressionReplaceStrValidForReplace}isSearchReplaceValid(){return this.getIsExpressionSearchStrValidForReplace()&&this.getIsExpressionReplaceStrValidForReplace()}shouldShowReplaceIcon(){return this.isSearchReplaceValid()}updateTickerHandlerLatex(e){this.listModel.ticker.handlerLatex=e}updateTickerMinStepLatex(e){this.listModel.ticker.minStepLatex=e}getRawExpressionSearchStr(){return this.rawExpressionSearchStr||""}getExpressionSearchStr(){return this.expressionSearchStr||""}getExpressionReplaceStr(){return this.expressionReplaceStr||""}getExpressionSearchCount(){return this.expressionSearchCount||0}getTicker(){return this.listModel.ticker}getTickerHandlerLatex(){return this.listModel.ticker.handlerLatex||""}getTickerMinStepLatex(){return this.listModel.ticker.minStepLatex||""}getTickerAvgDelta(){return this.listModel.ticker.avgDelta}getBrailleMode(){return this.graphSettings.config.brailleMode}setBrailleMode(e){this.graphSettings.config.setProperty("brailleMode",e)}getSixKeyInput(){return this.graphSettings.config.sixKeyInput}setSixKeyInput(e){this.graphSettings.config.setProperty("sixKeyInput",e)}getBrailleControls(){return this.graphSettings.config.brailleControls}setBrailleControls(e){this.graphSettings.config.setProperty("brailleControls",e)}dispatchExpressionSizeExceeded(){this.dispatch({type:"expression-size-exceeded"})}getAudio(){return this.graphSettings.config.audio}setAudio(e){this.graphSettings.config.setProperty("audio",e)}getReconciledReportPosition(){let{reportPosition:e}=this.graphSettings.config,{showXAxis:t,showYAxis:o}=this.graphSettings;return e!=="default"?e:t||o?"coordinates":"percents"}setEditListMode(e){this.layoutModel={...this.layoutModel,inEditListMode:e}}generateTableXSubscript(){return _T(this.listModel)}findLastTokenNumber(){return pH(this.listModel)}findLastSubscriptForLetters(){return uH(this.listModel)}_createTableItem(){let e=this.generateTableXSubscript(),t=GP(e,[[],[]],this);return this.createItemModel(t)}getAxisStepSettings(){return{xAxisStep:this.graphSettings.xAxisStep,yAxisStep:this.graphSettings.yAxisStep}}getAxisScaleSettings(){return{xAxisScale:this.graphSettings.xAxisScale,yAxisScale:this.graphSettings.yAxisScale}}getDefaultAxisScaleSettings(){var t,o;let{defaultState:e}=this.graphSettings;return{xAxisScale:((t=e==null?void 0:e.graph)==null?void 0:t.xAxisScale)||"linear",yAxisScale:((o=e==null?void 0:e.graph)==null?void 0:o.yAxisScale)||"linear"}}getSettingsViewModel(){return this.settingsViewModel}getDynamicViewportBoundsErrors(){if(!this.canComputeViewportSynchronously())return this.settingsViewModel.errors}setDynamicViewportBoundsErrors(e){this.settingsViewModel.errors=e}getListModel(){return this.listModel}getGeometryToolbarModel(){return this.geometryToolbarModel}hasBackgroundColor(){return this.getBackgroundColor()!=="#ffffff"}getBackgroundColor(){return this.getGraphSettings().getConfiguredBackgroundColor()}hasTextColor(){return this.getTextColor()!=="#000000"}getTextColor(){return this.getGraphSettings().getConfiguredTextColor()}getAccentColor(){return this.getGraphSettings().getConfiguredAccentColor()}subscribeToChanges(e){let t=this.nextSubscription;return this.nextSubscription+=1,this.subscriptions[t]=e,()=>{delete this.subscriptions[t]}}updateTheComputedWorld(){var p,h,g,m,b,x,E,S,k;Tu(this.listModel);let e=this.getSelectedItem();this.expandedEvaluationId!==(e==null?void 0:e.id)&&(this.expandedEvaluationId=void 0),this.checkIfShouldCancelWizard()&&this.closeAddInferenceWizard();let t=e&&this.activeTool==="expression-edit"&&this.listModel.__toolPreviewIdToModel[cm]&&((p=this.getGrapher())!=null&&p.graphSketches[cm])?"preview":"actual";hH(this.listModel,t),(h=this.grapher2d)==null||h.setTabOrder(this.listModel.tabOrder),(g=this.grapher3d)==null||g.setTabOrder(this.listModel.tabOrder),(m=this.grapher2d)==null||m.setDrawLayers(this.listModel.drawLayers),(b=this.grapher3d)==null||b.setDrawLayers(this.listModel.drawLayers);let o={},i=T=>{var P;let I=(P=uo(T))==null?void 0:P.identifier;I&&(I[0]==="$"||T.formula.geometry)&&I&&(o[I]?o[I].multiple=!0:o[I]={model:T,multiple:!1})};for(let T of this.getAllToolPreviewItems())TD(T),i(T);for(let T of this.getAllItemModels())switch(T.type){case"expression":TD(T),i(T);break;case"image":I4(T);break;case"table":Jz(T);break;case"folder":Aq(T);break;case"text":G4(T);break;default:return T}this.geoUIActive=this.isGeometry()&&!this.getGraphSettings().config.hideGeoUI,this.cachedGeoTokenInfo={};for(let T in o){let{multiple:I,model:P}=o[T],A="blue",D="unknown",G="unknown",N=!1,U=!1,K=!1,H=$o(P);!I&&P?(A=Dd(P),N=km(P),G=d8(P),D=SD(P),P.error&&(U=!0,A="#")):(D="error",U=!0),D&&P?this.isItemSelected(P.id)&&(K=!0):U=!0;let w=(P==null?void 0:P.label)||"";this.cachedGeoTokenInfo[T]={groupType:D,iconType:G,isList:N,hasError:U,color:A,isSelected:K,isHidden:H,label:w,calcId:P&&P.id||""}}this.cachedGeoTokenDepths={};let{createdDepth:n,firstReferencedDepth:a}=this.geoModel.getComputedBoard().getDepthValues();for(let T in this.cachedGeoTokenInfo){let{calcId:I}=this.cachedGeoTokenInfo[T],P=this.getItemModel(I);if(!P)continue;let A=T;if(!(T in n)&&P.type==="expression"&&(I===this.getDraggedItemId()||P===this.getFocusedItem())){let w=P.formula.assignment;w&&w in n&&(A=w)}let D=n[A]||0,G=a[A];G=isFinite(G)?G:0;let N=Math.max(D,G-1)+"",U=this.cachedGeoTokenDepths[N];U||(U=[],this.cachedGeoTokenDepths[N]=U);let K=this.cachedGeoTokenInfo[T];!this.isItemInGeoFolder(P.id)&&(P.readonly||Ti(P))||U.push({color:K.color,groupType:K.groupType,identifier:T,calcId:I})}$4(this.listModel.ticker);let s=this.getFocusLocation();if(s&&s.type==="expression"&&s.isFakeGraphFocus&&(this.getValidCursorContext()||Jt(this,{...s,isFakeGraphFocus:void 0})),this.isCurrentFocusLocationValid()||Jt(this,void 0),this.listModel.openItemMenu){let T=this.getOpenMenuIcon();document.body&&T&&document.body.contains(T)||(this.listModel.openItemMenu=void 0)}let l=this.getSelectedItem();l&&!this.getItemModel(l.id)&&ar(this.listModel,void 0),NX(this),GX(this),this.propagateSelection(),this.propagateActiveTokens(),this.isKeypadOpen()||(this.layoutModel={...this.layoutModel,keypadFunctionsOpen:!1}),BH(this.listModel),this.isGeometry()&&l&&l.type==="expression"?this.getValidCursorContext()?(this.setGeoTool("expression-edit"),this.geoModel.updateFadeAnimations()):this.geoModel.getToolMode()==="expression-edit"&&this.setGeoTool("selection"):this.geoModel.getToolMode()==="expression-edit"&&this.setGeoTool("selection"),this.isGeometry()&&this.getGeoModel().updateAvailableInputTypes();let c=this.getValidCursorContext();this.isGeometry()&&this.getGeoModel().getToolMode()==="expression-edit"&&!__dcg_shared_module_exports__['s'](c,this.lastCursorContext)&&this.runAfterDispatch(()=>{var T;(T=this.get2dPOIController())==null||T.replayGeoTapMove()}),this.lastCursorContext=c,(E=(x=this.grapher2d)==null?void 0:x.poiController)!=null&&E.keyboardAttentionManager.getKeyboardAttention()&&!this.isGraphPaperFocused()&&((k=(S=this.grapher2d)==null?void 0:S.poiController)==null||k.keyboardAttentionManager.setKeyboardAttention(void 0)),this.isGeometry()&&(c4(this.geometryToolbarModel),this.isGeoToolEnabled(this.getActiveTool())||this.setGeoTool("selection")),this.runAfterDispatch(()=>{var T,I;this.isThreeDMode()||((T=this.grapher2d)==null||T.audioGraph.checkIfSelectedItemChanged(l?l.id:void 0),this.focusLocation&&this.focusLocation.type!=="graph-paper"&&((I=this.grapher2d)==null||I.audioGraph.exitAudioTrace()))})}getOpenMenuIconSelector(){let e=this.getOpenItemMenu();return e?`[dcg-open-menu-guid="${e.guid}"]`:void 0}getOpenMenuIcon(){let e=this.getOpenMenuIconSelector();return e?this.findEl(e):void 0}propagateSelection(){let e=this.getGrapher();e?this.__lastSelectedIdsForPropagation=TX(this,e,this.__lastSelectedIdsForPropagation):this.__lastSelectedIdsForPropagation={selected:{},hoistedToTop:{}}}propagateActiveTokens(){var e,t;this.isThreeDMode()||((e=this.grapher2d)==null||e.setActiveToken(this.getExpressionIdForIdentifier(this.activeTokens.selected),"selected"),(t=this.grapher2d)==null||t.setActiveToken(this.getExpressionIdForIdentifier(this.activeTokens.hovered),"hovered"))}getShowInvalidBoundsCover(){return this.computeMajorLayout().grapher.height<100||!this.getGraphSettings().config.settingsMenu||this.isGraphSettingsOpen()?!1:this.isViewportLockedForDynamicBounds()&&!!this.getDynamicViewportBoundsErrors()}getHoveredOrFocusedTokenIdentifier(){if(this.activeTokens.hovered)return this.activeTokens.hovered;let e=this.getFocusLocation();if(e&&e.type==="geo-token")return e.identifier}doesLatexContainToken(e){return c8(e)}getToolPreviewJSONState(){return this.toolPreviewJSONState}removeListOfItems(e){let t={},o=[],i=new Set;return e.forEach(n=>{if(this.isItemReadonly(n))i.add(n);else{let a=Eu(this.listModel,n);for(let s of a)t[s.id]||(t[s.id]=!0,o.push(s))}}),{deletedItems:o,readonlyItemsNotDeleted:i.size}}garbageCollectGeo(e,t){if(!this.isGeometry())return;let o=MX(this,e,t);o.length&&this.removeListOfItems(o)}ensureAtLeastOneVisibleItem(){if(wH(this.listModel)){let e=this.createItemModel({type:"expression",id:this.generateId(),color:this.getNextColor()});ka(this.listModel,e)}}getExpressionIdForIdentifier(e){if(!e)return;let t=this.getItemsByIdentifier(e);if(t.length===1)return t[0].id}getValidCursorContext(){var n;let e=this.getSelectedItem();if(!e||e.type!=="expression")return;let t=e.formula.cursor_context,o=(n=qe.getFocusedMathquill())==null?void 0:n.selection(),i=(e==null?void 0:e.type)==="expression"&&e.latex===(t==null?void 0:t.selection.input)&&(o==null?void 0:o.startIndex)===(t==null?void 0:t.selection.start)&&(o==null?void 0:o.endIndex)===(t==null?void 0:t.selection.end)&&(o==null?void 0:o.latex)===(t==null?void 0:t.selection.input);if(this.getGeoModel().getClickToInsertMode()==="permissive")return{type:"permissive",allowedTypes:[__dcg_shared_module_exports__['ta']],cursorContext:i?t:void 0};if(i){if((t==null?void 0:t.type)==="expression-arguments"){let{argIndex:a,positionWithinArg:s}=t;if(!(a===t.argCount-1&&s==="end"||t.positionWithinArg==="start-to-end"&&(o==null?void 0:o.startIndex)!==void 0&&(o==null?void 0:o.startIndex)===(o==null?void 0:o.endIndex)))return}return t}}tryInsertTokenIntoMathquill(e,t){if(!this.isGeometry()||!e)return!1;let o=this.getItemModel(e);if(!o||o.type!=="expression")return!1;let i=o.formula.typed_constant_value;t===0&&(!i||!__dcg_shared_module_exports__['qb'](i.valueType))&&(t=void 0);let n,a,s=Gd(o);if(s?a=__dcg_shared_module_exports__['ia'](s):o.formula.geometry&&(a=this.getAutonameLatexForExpression(o),n=a),!a)return!1;t!==void 0&&(a+="\\left["+(t+1)+"\\right]");let l=this.getFocusLocation();return!l||!this.seemsLikeInsertingTokenWillImproveThings(i==null?void 0:i.valueType)?!1:l.type==="expression"?(n&&(eo(o)===__dcg_shared_module_exports__['hd'].NONE&&o.dragMode===__dcg_shared_module_exports__['hd'].AUTO&&Em(o,__dcg_shared_module_exports__['hd'].NONE),Ii(o,n+"="+o.latex)),this.writeIdentifierIntoCurrentMathquill(a),!0):!1}seemsLikeInsertingTokenWillImproveThings(e){let t=this.getValidCursorContext();if(t){if(!e)return!1;let o=__dcg_shared_module_exports__['sb'](e);return t.type==="empty"&&__dcg_shared_module_exports__['tb'](o)?!1:(t.type==="expression-arguments"?t.allowedTypesForInsertedArg:t.allowedTypes).some(n=>__dcg_shared_module_exports__['sa'](o,n))}return!1}writeIdentifierIntoCurrentMathquill(e){this.runAfterDispatch(()=>{let t=qe.getFocusedMathquill();if(!t)return;let o=this.getValidCursorContext(),i=(o==null?void 0:o.type)==="permissive"?o.cursorContext:o,n="",a="";(i==null?void 0:i.type)==="expression-arguments"&&((i==null?void 0:i.positionWithinArg)==="end"?n=",":(i==null?void 0:i.positionWithinArg)==="start"&&(a=","));let s=`${n}${e}${a}`,l=!1;if((i==null?void 0:i.type)==="expression-arguments"&&i.polygonVertices){let{argIndex:c,polygonVertices:p,positionWithinArg:h}=i;(e===p.firstLatex||e===p.lastLatex)&&(h==="end"||h==="start-to-end")&&c===i.argCount-1&&(s="",l=!0)}else(i==null?void 0:i.type)==="expression-arguments"&&(l=i.isLastValidArg);qe.canAcceptText(t,this.getCapExpressionSize(),s)&&(t.write(s),qe.simulateUserChangedLatex(t),l&&t.keystroke("Right"))})}getSelectedExpressionIds(){return TH(this.listModel)}hasTentativeSelection(){return LH(this.listModel)}getPropagatedSelectedIds(){return this.__lastSelectedIdsForPropagation}areParsableObjectsEqual(e,t){return e===t?!0:__dcg_shared_module_exports__['s']({...e,regressionParameters:void 0},{...t,regressionParameters:void 0})}requestParseForAllItems(){var n,a,s,l;(this.isCurrentlyDoingSetState||this.isCurrentlyDoingRestoreState)&&(this.lastParsableObjects={},this.evaluator.clearStatementsAndStartCompleteState(),this.isCurrentlyDoingRestoreState&&this.evaluator.markUndoRedoState());let e={},t=this.lastParsableObjects;for(let c of this.getAllItemModels())switch(c.type){case"expression":case"image":case"table":case"folder":e[c.guid]=c.cachedParsableState;break;case"text":break;default:return c}for(let c of nH(this.listModel))e[c.guid]=c.cachedParsableState;for(let c of this.wizardModel.getAllEvaluatorStatements())e[c.id]=c;for(let c of this.getAllToolPreviewItems()){let p=this.getSelectedItem(),h=this.activeTool==="polygon";if(this.activeTool==="expression-edit"&&(p==null?void 0:p.type)==="expression"&&((a=(n=p.formula.geometry)==null?void 0:n.call)==null?void 0:a.symbol)==="polygon"&&((s=p.formula.cursor_context)==null?void 0:s.type)==="expression-arguments"){let{positionWithinArg:g,argIndex:m}=p.formula.cursor_context;h=(g==="end"||g==="start-to-end")&&m===p.formula.geometry.call.parents.length-1}e[c.guid]={...c.cachedParsableState,shouldOmitLastPolygonSegment:h}}let o=this.getFocusedItem();if((o==null?void 0:o.type)==="expression"){let c=qe.getFocusedMathquill(),p=c==null?void 0:c.selection();(p==null?void 0:p.latex)===o.latex&&this.shouldEvaluateSelection()&&(e[o.guid]={...o.cachedParsableState,latexSelection:{start:p.startIndex,end:p.endIndex}})}if(this.is3dProduct()&&this.getTranslucentSurfaces())for(let c in e){let p=e[c];p.type==="statement"&&(e[c]={...p,surfaceOpacity:this.getGraphSettings().config.translucentOpacity})}this.listModel.ticker.cachedParsableState&&(e[this.listModel.ticker.guid]=this.listModel.ticker.cachedParsableState);for(let c of d4(this.geometryToolbarModel))e[c.id]=c;let i=(l=this.getGrapher())==null?void 0:l.viewportController.getViewportParsable();i&&(e[i.id]=i);for(let c in t){let p=t[c],h=e[c];if((p==null?void 0:p.type)==="image"&&(!h||h.type!==p.type||h.guid!==p.guid)&&this.grapher2d&&this.grapher2d.removeGraphImage(p.id),!h&&(this.evaluator.removeStatement(p.id),p.type==="table"))for(let g of p.columns)this.evaluator.removeStatement(g.id)}for(let c in e){let p=e[c],h=t[c];if((p==null?void 0:p.type)==="image"&&(!h||p.type!==h.type||p.guid!==h.guid)&&this.grapher2d){let g=this.getItemModel(p.id);g&&g.type==="image"&&this.grapher2d.addGraphImage(g)}this.areParsableObjectsEqual(p,h)||(this.grapher2d&&p.type==="statement"&&p.latex===""&&this.grapher2d.removeGraphSketch(p.id),this.evaluator.addStatement(p))}this.lastParsableObjects=e}getViewState(){let e=this.getGrapher();if(e){let t=e.getProjection();return{viewport:t.viewport.toObject(),screen:t.screen,xAxisScale:t.settings.xAxisScale,yAxisScale:t.settings.yAxisScale,degreeMode:t.settings.degreeMode}}else return}getTokenRenderInfoByIdentifier(e){let t=this.cachedGeoTokenInfo[e];return t||(t={iconType:"unknown",isList:!1,hasError:!0,isSelected:!1,groupType:"unknown",color:"",isHidden:!1,label:"",calcId:""}),t}getTokenController(){return this}setEvaluator(e){this.evaluator=e,e.clearSlowEvaluatorTracking=this.clearSlowEvaluatorTracking.bind(this),this.evaluator.shouldBlockEventUpdates=this.shouldBlockEventUpdates.bind(this)}getEvaluator(){return this.evaluator}getSoloEvaluatorForTests(){return this.evaluator}setGrapher2d(e){this.grapher2d=e}setGrapher3d(e){this.grapher3d=e,this.grapher2d.poiController.add3DTouchEventHandlers(e)}getGrapher(){return this.isThreeDMode()?this.grapher3d:this.grapher2d}getGrapher2d(){return this.grapher2d}getGrapher3d(){return this.grapher3d}get2dPOIController(){var e;return(e=this.grapher2d)==null?void 0:e.poiController}isDefaultViewportRestored(){var e;return!!((e=this.getGrapher())!=null&&e.viewportController.isDefaultViewportRestored())}requestRedrawGraph(){var e,t;(e=this.grapher2d)==null||e.redrawAllLayers(),this.isThreeDMode()&&((t=this.grapher3d)==null||t.redrawAllLayers())}get2dProjection(){var e;return(e=this.grapher2d)==null?void 0:e.getProjection()}get2dSketchOrder(){return this.grapher2d?[...this.grapher2d.generateMergeDrawOrder()]:[]}getBoundingBoxesForZoomFit(e){if(!(!this.grapher2d&&!this.grapher3d)&&this.isZoomFitEnabled()&&!(e.type!=="expression"&&e.type!=="table")&&!(e.type==="expression"&&(e.error||!e.shouldGraph||!e.formula.is_graphable)))return e.boundingBoxes}getBoundingBoxForResidualsZoomFit(e){var t,o;if(!(!this.grapher2d&&!this.grapher3d)&&this.isZoomFitEnabled()&&!(e.type!=="expression"&&e.type!=="table")&&!(e.type==="expression"&&(e.error||!e.formula.is_graphable))){if(e.type==="table"&&((o=(t=e.formula)==null?void 0:t.table_regression)==null?void 0:o.status)==="success"&&e.boundingBoxes){let i=e.formula.table_regression.result.residualVariable;for(let n of e.boundingBoxes)if(n.symbol&&__dcg_shared_module_exports__['ia'](n.symbol)===i)return[n]}if(e.type==="expression"&&e.formula.regression){let i=e.formula.regression.residualVariable;for(let n of this.getAllItemModels())if(n.type==="table"&&n.boundingBoxes){for(let a of n.boundingBoxes)if(a.symbol&&__dcg_shared_module_exports__['ia'](a.symbol)===i)return[a]}}}}isExpressionZoomFit(e){if(this.isThreeDMode())return!1;let t=this.getBoundingBoxesForZoomFit(e),o=this.get2dProjection();return!o||!t?!1:!cA(t,o)&&!!Ow(t,o)}isPinchZoomed(){return this.pinchZoom>1.02}zoomAndPanDisabled(){return this.viewportIsLocked()||this.isPinchZoomed()}viewportIsLocked(){return this.getLockViewportConfigSetting()||this.getLockViewportUserSetting()||this.isViewportLockedForDynamicBounds()}isViewportLockedForDynamicBounds(){let e=this.getGrapher();if(!e)return!0;let t=e.viewportController.getCurrentViewportLatex();return __dcg_shared_module_exports__['Qe'].evaluateFromLatex(t,this.graphSettings.degreeMode,this.graphSettings.complex)===void 0}showExpressionZoomFitButton(e){if(this.viewportIsLocked()||this.isGeometry()||this.is3dProduct())return!1;let t=this.getBoundingBoxesForZoomFit(e),o=this.get2dProjection();return e.type==="expression"&&ux(e)?!1:!!(o&&t&&cA(t,o))}showResidualsZoomFitButton(e){if(this.viewportIsLocked()||this.isGeometry()||this.is3dProduct())return!1;let t=this.getBoundingBoxForResidualsZoomFit(e),o=this.get2dProjection();return!!(o&&t&&cA(t,o))}zoomEnabled(){return this.getGraphSettings().config.zoomButtons&&!this.viewportIsLocked()}homeEnabledDueToViewportErrors(){return this.getGraphSettings().config.zoomButtons&&!this.getLockViewportConfigSetting()&&!this.getLockViewportUserSetting()&&!!this.getDynamicViewportBoundsErrors()}zoomButtonsHiddenBecauseOfMobile(){let e=this.getLayoutMeasurements();return ja&&(e.width<450||e.height<450)}shouldShowZoomInOutButtonsIfSpace(){return!this.zoomButtonsHiddenBecauseOfMobile()&&this.zoomEnabled()}shouldShowZoomHomeButtonIfSpace(){return this.zoomEnabled()&&!this.isDefaultViewportRestored()||this.homeEnabledDueToViewportErrors()}setBugsnagContext(e){this.bugsnagContext=e}getItemRootNodeById(e){let t=this.getItemModel(e);return t==null?void 0:t.rootViewNode}getItemNodeById(e){return this.getItemRootNodeById(e)}generateId(){let e=this.__nextItemId;return this.__nextItemId+=1,e+""}getNextColor(){return eH(this.listModel)}getNextDisplayIndex(){return this.listModel.nextDisplayIndex}_clearPendingImageUploads(){this.__pendingImageUploads={}}isUploadingImages(){return Object.keys(this.__pendingImageUploads).length>0}getExpressionAnalysis(){return this.listModel.expressionAnalysis}getHelperExpressions(){return fH(this.listModel).map(e=>e.proxy)}createItemModel(e){return lm(this.listModel,e)}getItemModel(e,t){return Sl(this.listModel,e,t)}getHiddenGeoItemCount(){return vH(this.listModel)}getColorById(e){var o;let t=this.getItemModel(e);return!t||t.type!=="expression"?"":(o=hx(t))!=null?o:""}getAllColorAssignments(){let e=[];for(let t of this.getAllItemModels()){if(t.type!=="expression")continue;let o=Gd(t);o&&hx(t)&&e.push({id:t.id,assignmentLatex:__dcg_shared_module_exports__['ia'](o)})}return e}getAllColorFunctionAssignments(){let e=[];if(!this.isBeta3DMode())return e;for(let t of this.getAllItemModels()){if(t.type!=="expression")continue;let o=Gd(t),i=wD(t);!o||!i||e.push({id:"shader",assignmentLatex:"shader:"+__dcg_shared_module_exports__['ia'](o)})}return e}getShader(e){for(let t of this.getAllItemModels()){if(t.type!=="expression")continue;let o=Gd(t);if(o&&__dcg_shared_module_exports__['ia'](o)===e){let i=wD(t);if(i)return i}}}getItemModelByIndex(e){return Cc(this.listModel,e)}getItemCount(){return Wy(this.listModel)}getItemEditableLabelMode(e){let t=this.getItemModel(e);if(!(!t||t.type!=="expression"))return v8(t)}isItemSecret(e){let t=this.getItemModel(e);return t?am(t):!1}isItemMarkedReadonly(e){let t=this.getItemModel(e);return t?!this.isListEnabled()&&!this.isItemInGeoFolder(e)?!0:oH(t):!1}isItemReadonly(e){return this.wizardModel.getInsertItemId()===e?!0:this.isItemMarkedReadonly(e)&&!this.shouldShowAuthorFeatures()}isItemSelected(e){let t=this.getItemModel(e);return!!t&&rn(t)}getItemSelectedState(e){return VH(this.listModel,e)}isItemGraphing(e){return this.getEvaluatorStateForItem(e)==="GRAPHING"}getEvaluatorStateForItem(e){return this.evaluator.evaluationProgressById.get(e)}hasAnyItemsSelected(){return this.getAllSelectedItems().length>0}hasMultipleItemsSelected(){return this.getAllSelectedItems().length>1}isItemSelectable(e){let t=this.getItemModel(e);return t?pm(t):!1}anyItemDependsOnRandomSeed(){return RH(this.listModel)}areActionsEnabled(){return this.graphSettings.config.actions==="auto"?GH(this.listModel):!!this.graphSettings.config.actions}getAllItemModels(){return IT(this.listModel)}getAllToolPreviewItems(){return Hy(this.listModel)}isToolPreviewItem(e){return mH(this.listModel,e)}getAllModelsWithSliders(){return SH(this.listModel)}getGraphSettings(){return this.graphSettings}getAudioGraph(){var e;if(!this.isThreeDMode())return(e=this.grapher2d)==null?void 0:e.audioGraph}inAudioTraceMode(){let e=this.getAudioGraph();return!!(e&&e.audioTraceActive)}canAudioTrace(){let e=this.getAudioGraph();return e?e.canAudioTraceCurrentExp():!1}isAudioTracing(){let e=this.getAudioGraph();return e?e.isAudioTracing():!1}expressionsAreFullWidth(){return this.isNarrow()||this.graphSettings.config.graphpaper===!1}getExpListWidthString(){return this.expressionsAreFullWidth()?"100%":this.rootElt?this._getExpListWidth()+"px":"0"}getExpListHeight(){return this.rootElt?this._getExpListHeight():0}getExpListWidth(){return this.rootElt?this._getExpListWidth():0}findFirstVisibleItem(){let e=kY(this,this._previousFirstVisibleId);if(this._previousFirstVisibleId=e,e)return this.getItemModel(e)}findLastVisibleItem(){let e=EY(this,this._previousLastVisibleId);if(this._previousLastVisibleId=e,e)return this.getItemModel(e)}updateRenderShellsAfterDispatch(){if(!this.rootElt||!this.isListVisible())return;let e=this.findFirstVisibleItem(),t=this.findLastVisibleItem(),o=e&&this.getItemRootNodeById(e.id),i=t&&this.getItemRootNodeById(t.id);if(o===this.lastInfiniteScrollFirstDOM&&i===this.lastInfiniteScrollLastDOM&&!this.hasDispatchSinceLastInfiniteScrollUpdate)return;this.lastInfiniteScrollFirstDOM=o,this.lastInfiniteScrollLastDOM=i,this.hasDispatchSinceLastInfiniteScrollUpdate=!1;let n=!1,a=e?e.index:1/0,s=t?t.index:1/0,l=this.listModel.dragState&&this.listModel.dragState.firstItemId,c,p=this.getOpenItemMenu();p&&p.type!=="multi-select-more"&&p.type!=="multi-select-construct"&&p.type!=="multi-select-style"&&p.type!=="multi-select-label"&&p.type!=="geo-tool-dropdown"&&(c=p.model.id);for(let h of this.getAllItemModels()){let g=(h.index<a||h.index>s||h.isHiddenFromUI)&&!(h.type==="expression"&&h.sliderDragging);if(l==h.id&&(g=!1),c===h.id&&(g=!1),h.renderShell!==g&&(h.renderShell=g,n=!0,g)){let m=this.getItemRootNodeById(h.id);if(m){let b=m.getBoundingClientRect().height;b>0&&(h.cachedRenderHeight=b)}}}n&&this.markTickRequiredNextFrame()}updateRenderShellsBeforePaint(){if(this.hasDispatchSinceLastInfiniteScrollUpdate=!0,this.inPrintMode){for(let t of this.getAllItemModels())t.renderShell=!1;return}for(let t of this.getAllItemModels())t.isHiddenFromUI&&(t.renderShell=!0),t.type==="expression"&&t.sliderDragging&&(t.renderShell=!1);let e=this.getSelectedItem();if(e&&!this.isGeoItem(e.id)){e.renderShell=!1;let t=gH(this.listModel,e.id);if(t>=0){let o=Cc(this.listModel,t+1);o&&!this.isGeoItem(o.id)&&(o.renderShell=!1);let i=Cc(this.listModel,t-1);i&&!this.isGeoItem(i.id)&&(i.renderShell=!1)}}}updateDragDrop(){let e=this.listModel.dragState;if(!e)return;let t=this.getItemModel(e.firstItemId);if(!t)return;let o=this.dragdrop_expressions.applyDrag();o&&($y(this.listModel,o.dragState),ui(t,o.folderId),t.index!==o.newIndex&&Rd(this.listModel,t.index,o.newIndex,e.numberOfItems))}_tickSliders(e){this.getShowReducedMotionCover()||this.getPlayingSliders().forEach(t=>{cD(t,e)})}tickTicker(e){let t=this.listModel.ticker.lastTickTime===void 0;this.evaluator.addClockTickEvent(this.listModel.ticker.id,t),Y4(this.listModel.ticker,e)}stopAllSliders(){for(let e of this.getAllItemModels())e.type==="expression"&&e.slider.isPlaying&&vn(e,!1)}getPlayingSliders(){let e=this.getAllItemModels(),t=[];for(let o of e)o.type==="expression"&&o.sliderExists&&o.slider.isPlaying&&t.push(o);return t}areAnyImagesLoading(){return Q4(this.listModel)}commitNumericalViewportBounds(e){var t;(t=this.getGrapher())==null||t.viewportController.setUndoViewport(e)}_setAxisLimitLatex(e,t){this.settingsViewModel={...this.settingsViewModel,limitLatex:{...this.settingsViewModel.limitLatex,[e]:t}};let i=t===""&&(e==="xstep"||e==="ystep")?0:__dcg_shared_module_exports__['Ie'](t,this.graphSettings.degreeMode),n=this.getGrapher();switch(e){case"xstep":{if(!lg(i))return;this.graphSettings.setProperty("xAxisStep",i)}break;case"ystep":{if(!lg(i))return;this.graphSettings.setProperty("yAxisStep",i)}break;case"xmin":case"xmax":case"ymin":case"ymax":case"zmin":case"zmax":{if(!n)return;let a=VX(this.settingsViewModel);n.viewportController.setUndoViewportLatex(a);let s=__dcg_shared_module_exports__['Qe'].evaluateFromLatex(a,this.getDegreeMode(),this.isComplexModeEnabled());if(s&&!s.isValid(this.getAxisScaleSettings()))return;let l;switch(e){case"xmin":case"xmax":l="x";break;case"ymin":case"ymax":l="y";break;case"zmin":case"zmax":l="z";break;default:let c=e;throw new Error(`Invalid limit: ${c}`)}this.graphSettings.setProperty("lastChangedAxis",l)}break}}unmarkLastChangedAxis(){this.graphSettings.setProperty("lastChangedAxis",void 0)}markSquareAxesAfterUserEditedViewport(){let e=this.getGrapher();if(!e)return;let t=__dcg_shared_module_exports__['Qe'].evaluateFromLatex(e.viewportController.getCurrentViewportLatex(),this.graphSettings.degreeMode,this.graphSettings.complex);if(!t){this.graphSettings.setProperty("squareAxes",!1);return}let o=this.isThreeDMode()?t.isSquare3D():t.isSquare(e.getProjection().screen,this.getAxisScaleSettings());this.graphSettings.setProperty("squareAxes",o)}getLockViewportConfigSetting(){return this.graphSettings.config.lockViewport}getLockViewportUserSetting(){return this.graphSettings.userLockedViewport}getLockRotationUserSetting(){return this.graphSettings.userLockedRotation}canUserAddExpressions(){return!!this.graphSettings.config.expressions}areNotesEnabled(){return!!this.graphSettings.config.notes}areSlidersEnabled(){return!!this.graphSettings.config.sliders}areLinksEnabled(){return!!this.graphSettings.config.links}areImagesEnabled(){let e=window.FileReader;return!!(this.graphSettings.config.images&&e&&!this.is3dProduct())}areFoldersEnabled(){return!!this.graphSettings.config.folders}isDecimalToFractionEnabled(){return!!this.graphSettings.config.decimalToFraction}isTraceEnabled(){return!!this.graphSettings.config.trace}areFunctionsRestricted(){return!!this.graphSettings.config.restrictedFunctions}areGeometryFunctionsForceEnabled(){return!!this.graphSettings.config.forceEnableGeometryFunctions}isQwertyKeyboardEnabled(){return!!this.graphSettings.config.qwertyKeyboard}isZoomFitEnabled(){return!!this.graphSettings.config.zoomFit}canEditOnWeb(){return!!this.graphSettings.config.editOnWeb}hasTransparentBackground(){return!!this.graphSettings.config.transparentBackground}shouldAudioTraceReverseExpressions(){return!!this.graphSettings.config.audioTraceReverseExpressions}hasDefaultState(){return!!this.graphSettings.defaultState}getEvaluatedDefaultViewport(){var t;let e=this.graphSettings.defaultState;return e?__dcg_shared_module_exports__['Qe'].evaluateFromLatex(e.graph.viewport,this.graphSettings.degreeMode,this.graphSettings.complex):(t=this.getGrapher())==null?void 0:t.getDefaultViewport()}getColors(){return this.isThreeDMode()?__dcg_shared_module_exports__['Nd']:this.graphSettings.config.colors}getImageOpacities(){return["0.2","0.4","0.6","0.8","1"]}getUIDragModes(){return[__dcg_shared_module_exports__['hd'].X,__dcg_shared_module_exports__['hd'].Y,__dcg_shared_module_exports__['hd'].XY]}getNumberOfItemsInFolder(e){return tH(this.listModel,e)}getEnabledDragModesForItem(e){let t=this.getItemModel(e);if(!t||t.type!=="expression")return[];let o=t.formula,i=[];if(!o.move_strategy)return i;let n=o.move_strategy[0].type!=="none",a=o.move_strategy[1].type!=="none",s=n&&a;return n&&i.push(__dcg_shared_module_exports__['hd'].X),a&&i.push(__dcg_shared_module_exports__['hd'].Y),s&&i.push(__dcg_shared_module_exports__['hd'].XY),i}shouldShowEvaluationForItem(e){let t=this.getItemModel(e);return!t||t.type!=="expression"?!1:XH(t)}shouldShowCDFEvaluationForItem(e){let t=this.getItemModel(e);return!t||t.type!=="expression"?!1:YH(t)}onEvaluationCopyClick(e){this.getGraphSettings().config.onEvaluationCopyClick(e)}canDisplayEvaluationForItemAsFraction(e){var i;if(!this.isDecimalToFractionEnabled())return!1;let t=this.getItemModel(e);if(!t||t.type!=="expression"||lx(t))return!1;let o=(i=t.formula)==null?void 0:i.typed_constant_value;return(o==null?void 0:o.valueType)!==__dcg_shared_module_exports__['ua']?!1:__dcg_shared_module_exports__['ea'](o.value)}shouldEvaluationForItemDisplayAsFraction(e){if(!this.isDecimalToFractionEnabled())return!1;let t=this.getItemModel(e);return!t||t.type!=="expression"?!1:Nd(t)}getEvaluationLabelOptionsForItem(e){return{...__dcg_shared_module_exports__['ca'],displayAsFraction:this.shouldEvaluationForItemDisplayAsFraction(e)}}isInEditListMode(){return this.layoutModel.inEditListMode}authorFeaturesAvailable(){return!!this.graphSettings.config.authorFeatures}shouldShowAuthorFeatures(){return this.authorFeaturesAvailable()&&!!this.graphSettings.config.authorMode}shouldIgnoreGraphInteractions(e){return this.shouldShowAuthorFeatures()?!1:Ti(e)}toolWillBeHiddenOrDisabled(e){return this.shouldShowAuthorFeatures()&&(!this.isGeoToolVisible(e,{ignoreAuthorMode:!0})||!this.isGeoToolEnabled(e,{ignoreAuthorMode:!0}))}setAuthorMode(e){this.graphSettings.config.setProperty("authorMode",e)}getInvertedColors(){return!!this.graphSettings.config.invertedColors}invertSwatches(){return this.isThreeDMode()&&this.getInvertedColors()}canUseAdvancedStyling(){return this.graphSettings.config.advancedStyling}getDegreeMode(){return this.graphSettings.degreeMode&&!this.isComplexModeEnabled()}isThreeDMode(){return this.graphSettings.threeDMode}showPlane3D(){let{threeDMode:e,showAxis3D:t,showPlane3D:o}=this.graphSettings;return e&&t&&o}showNumbers3D(){let{threeDMode:e,showAxis3D:t,showNumbers3D:o}=this.graphSettings;return e&&t&&o}getTranslucentSurfaces(){return!!this.graphSettings.config.translucentSurfaces}getPerspectiveDistortion(){let e=this.graphSettings.config.perspectiveDistortion;return isNaN(e)?1:e<1e-4?0:__dcg_shared_module_exports__['Ob'](e,0,Vv)}isBeta3DMode(){return this.isThreeDMode()&&this.getGraphSettings().config.beta3d}areLogModeRegressionsForced(){return this.graphSettings.config.forceLogModeRegressions}areLogModeRegressionsDefault(){return this.graphSettings.config.defaultLogModeRegressions}setAllRegressionsToLogMode(){for(let e of this.getAllItemModels())e.type==="expression"&&e.formula&&e.formula.is_regression&&kD(e,!0)}isGraphSettingsOpen(){return this.layoutModel.graphSettingsOpen}isAddExpressionOpen(){return this.layoutModel.addExpressionOpen}shouldRenderList(){if(this.layoutModel.expressionsVisible)return!0;let e=this.layoutModel.expressionsHiddenTime;return e===void 0?!1:Date.now()-e<=500}isListVisible(){return this.layoutModel.expressionsVisible}isGrapherEnabled(){return this.graphSettings.config.graphpaper!==!1}isListEnabled(){return this.graphSettings.config.expressions!==!1}areDistributionsEnabled(){return this.graphSettings.config.distributions===!0}isExpressionListFocused(){let e=this.getFocusLocation();if(!e)return!1;switch(e.type){case"settings":case"generic-menu":case"expression-menu":case"editable-label":case"geo-token":case"multi-select-more-icon":case"multi-select-construct-icon":case"multi-select-label-icon":case"multi-select-style-icon":case"geo-header-back-link":case"multi-select-show-hide-icon":case"new-transformation-number":case"label-points-icon":case"geo-show-constructions-icon":case"geo-basic-tool":case"geo-basic-tool-menu-item":case"geo-construct-menu-existing-transformations":case"regression-output":case"action-info":case"stats-output":case"graph-paper":case"zoom-in-btn":case"zoom-restore-btn":case"quest":case"global-mute-button":case"color-picker-option":case"multi-select-label-menu-label-input":case"multi-select-options-menu-item":case"invalid-graph-bounds-cover":case"reduced-motion-cover":return!1;case"distribution-param":case"slider-limit":case"domain-limit":case"expression":case"visualization-prop":case"search-expressions":case"replace-expressions":case"ticker":case"table":case"image":case"readonly-expression":case"add-table-regression-btn":case"table-regression-delete-btn":case"table-regression-copy-btn":case"table-regression-type-dropdown":case"table-regression-view-source-popover":case"table-regression-model-dropdown":case"table-regression-export-btn":case"regression-plot-residuals-button":case"table-container":case"text":case"folder":case"add-item-btn":case"add-expression-btn":case"add-note-btn":case"add-table-btn":case"add-folder-btn":case"add-ticker-btn":case"add-inference-btn":case"add-inference-wizard":case"add-image-btn":case"change-image-btn":case"edit-list-toggle":case"expression-icon":case"expression-evaluation":case"image-icon":case"slider-icon":case"slider-animation-properties-icon":case"slider-thumb":case"table-icon":case"table-regression-icon":case"action-icon":case"hide-expression-list-btn":case"show-expression-list-btn":case"top-level-icon":case"inference-footer":case"distribution-footer":case"chi-square-table-dropdown":case"chi-square-table":return!0;default:return e}}needsFakeKeypad(){if(this.inAudioTraceMode()&&this.isKeypadEnabled())return!0;let e=this.getFocusLocation();if(!e||this.getBrailleMode()!=="none"&&Qn())return!1;switch(e.type){case"settings":return FX(e.location);case"new-transformation-number":case"distribution-param":case"slider-limit":case"domain-limit":case"expression":case"visualization-prop":case"search-expressions":case"replace-expressions":case"ticker":return!0;case"add-inference-wizard":return e.subtype==="sample-prop-input"||e.subtype==="distribution-input"||e.subtype==="chi-square-wizard-table";case"expression-menu":return e.location==="opacity"||e.location==="linewidth"||e.location==="lineopacity"||e.location==="pointopacity"||e.location==="pointsize"||e.location==="labelsize"||e.location==="labelangle"||e.location==="updaterule";case"table":{if(this.isInEditListMode())return!1;let o=e.location;if(o.row===0)return!0;let i=this.getItemModel(e.id);if(!i||i.type!=="table")return!1;let n=i.columnModels[o.column];return n?!Hg(n):!1}case"image":return e.location!=="name";case"inference-footer":case"distribution-footer":return e.subtype==="mathquill-input";case"readonly-expression":case"add-table-regression-btn":case"table-regression-delete-btn":case"table-regression-copy-btn":case"table-regression-type-dropdown":case"table-regression-view-source-popover":case"table-regression-model-dropdown":case"table-regression-export-btn":case"regression-plot-residuals-button":case"regression-output":case"action-info":case"stats-output":case"graph-paper":case"table-container":case"text":case"folder":case"add-item-btn":case"add-expression-btn":case"add-note-btn":case"add-table-btn":case"add-folder-btn":case"add-inference-btn":case"add-ticker-btn":case"add-image-btn":case"change-image-btn":case"edit-list-toggle":case"hide-expression-list-btn":case"show-expression-list-btn":case"geo-token":case"multi-select-more-icon":case"multi-select-construct-icon":case"multi-select-label-icon":case"multi-select-style-icon":case"geo-header-back-link":case"multi-select-show-hide-icon":case"label-points-icon":case"geo-show-constructions-icon":case"geo-basic-tool":case"geo-basic-tool-menu-item":case"geo-construct-menu-existing-transformations":case"generic-menu":case"zoom-in-btn":case"zoom-restore-btn":case"quest":case"global-mute-button":case"color-picker-option":case"multi-select-label-menu-label-input":case"multi-select-options-menu-item":case"invalid-graph-bounds-cover":case"reduced-motion-cover":return!1;case"expression-icon":case"expression-evaluation":case"image-icon":case"slider-icon":case"action-icon":case"slider-animation-properties-icon":case"slider-thumb":case"table-icon":case"table-regression-icon":case"top-level-icon":case"chi-square-table":case"chi-square-table-dropdown":return!1;case"editable-label":return this.getItemEditableLabelMode(e.id)===__dcg_shared_module_exports__['me'].Math;default:return e}}isIdentifierRenameValid(e){return Ji(e)?!aH(this.listModel,e):!1}getBrandingMode(){return this.getEditLink()?"static-edit-link":this.getGraphSettings().config.editOnWeb?"edit-link":"powered-by"}getEditLink(){return window.iframeEmbedBrandingLink}_expressionZoomFit(e,t){let o=this.getItemModel(e);if(this.isThreeDMode()||this.isGeometry()||!this.grapher2d||!this.isZoomFitEnabled()||!o||o.type!=="expression"&&o.type!=="table"||(!o.boundingBoxes||!o.boundingBoxes.length)&&!t.justResiduals)return!1;let i=this.grapher2d.viewportController;if(!("zoomCustom"in i))return!1;let n=o.boundingBoxes;if(t.justResiduals){let s=this.getBoundingBoxForResidualsZoomFit(o);s!==void 0&&(n=s)}if(n===void 0)return!1;let a=Ow(n,i.getProjection());return a?(t.synchronous?i.setUndoViewport(a):i.zoomCustom(a),t.focusAfterTap&&Jt(this,{type:"zoom-restore-btn"}),!0):!1}_deleteItemAndAnimateOut(e,t){this.wizardModel.getInsertItemId()===e&&this.closeAddInferenceWizard();let i=this.getItemNodeById(e);i&&(Si(i,{transition:.2+"s",opacity:"0",transform:"scale(.1, .1)"}),this._deleteAnimationTimeout=setTimeout(()=>{this.dispatch({type:"finish-deleting-item-after-animation",id:e,setFocusAfterDelete:t})},1e3*.2))}_finishDeletingItemAfterAnimation(e,t){let o=this.getItemModel(e);if(!o)return;let i=this.getItemNodeById(e),n=i&&document.activeElement&&i.contains(document.activeElement),a=qy(this.listModel,o.index);if(this._removeExpressionSynchronously(o),!(!t||!n)){if(!a){let s=dm(this.listModel);s&&(a=s)}a&&Jr(this,a.id,"end")}}_removeExpressionSynchronously(e){var o;if(e.type==="expression"){let i=(o=e.formula.regression)==null?void 0:o.residualVariable;if(i){for(let n of this.getAllItemModels())if(n.type==="table"){let a=n.columnModels.findIndex(s=>s.latex===i);if(a>=0){Iy(n,a);break}}}}let t=hm(this.listModel,e.index);this.trackActionForPotentialEvaluatorRestart("remove",e.id),t.forEach(i=>this.trackActionForPotentialEvaluatorRestart("remove",i.id)),this.garbageCollectGeo(t,{}),this.ensureAtLeastOneVisibleItem()}setRootElt(e){this.rootElt=e,this.dragdrop_expressions=new sw(this)}getRootElt(){return this.rootElt}_hideExpressions(e){this.graphSettings.config.expressions&&(ar(this.listModel,void 0),this.layoutModel={...this.layoutModel,expressionsVisible:!1,expressionsHiddenTime:Date.now()},e?Jt(this,{type:"show-expression-list-btn"}):Rr())}_showExpressions(e){this.graphSettings.config.expressions&&(this.layoutModel={...this.layoutModel,expressionsVisible:!0},e?Jt(this,{type:"hide-expression-list-btn"}):Rr())}_showToast(e){this.toastData=e,clearTimeout(this._hideToastTimeout);let t=typeof e.hideAfter=="number"?e.hideAfter:6e3;t>0&&(this._hideToastTimeout=setTimeout(()=>{this.dispatch({type:"toast/close",onHide:this.toastData.onHide})},t))}clearAllTimeouts(){clearTimeout(this._hideToastTimeout),clearTimeout(this._deleteAnimationTimeout)}_setExpressionPropertiesFromAPI(e,t){let o=this.getItemModel(e);if(o)if(o.type==="table"&&t.columns){t=__dcg_shared_module_exports__['Uc'](t);let i=aq(o,t),n=lm(this.listModel,i);this._toplevelReplaceItemAt(o.index,n,!1)}else if(o.type==="text"){let i=this.getItemModel(e);if(!i)return;for(let n in t)if(t.hasOwnProperty(n))switch(n){case"text":dD(i,t.text);break;case"secret":B0(i,t.secret);break;case"readonly":My(i,t.readonly);break}}else if(o.type==="folder"){for(let i in t)if(t.hasOwnProperty(i))switch(i){case"hidden":{this._setItemHidden(e,t.hidden);break}case"title":BP(o,t.title)}}else{let i=this.getItemModel(e);if(!i)return;for(let n in t)if(t.hasOwnProperty(n))switch(n){case"slider":{if(i.type!=="expression")continue;let a=t[n];a.hasOwnProperty("min")&&yu(i,a.min),a.hasOwnProperty("max")&&xu(i,a.max),a.hasOwnProperty("step")&&Uy(i,a.step),a.hasOwnProperty("isPlaying")&&vn(i,a.isPlaying)}break;case"polarDomain":{if(i.type!=="expression")continue;wn(i,__dcg_shared_module_exports__['_'](t.polarDomain.min),"theta"),Sn(i,__dcg_shared_module_exports__['_'](t.polarDomain.max),"theta")}break;case"parametricDomain":{if(i.type!=="expression")continue;wn(i,__dcg_shared_module_exports__['_'](t.parametricDomain.min),"t"),Sn(i,__dcg_shared_module_exports__['_'](t.parametricDomain.max),"t")}break;case"parametricDomain3Du":{if(i.type!=="expression")continue;wn(i,__dcg_shared_module_exports__['_'](t.parametricDomain3Du.min),"u"),Sn(i,__dcg_shared_module_exports__['_'](t.parametricDomain3Du.max),"u")}break;case"parametricDomain3Dv":{if(i.type!=="expression")continue;wn(i,__dcg_shared_module_exports__['_'](t.parametricDomain3Dv.min),"v"),Sn(i,__dcg_shared_module_exports__['_'](t.parametricDomain3Dv.max),"v")}break;case"parametricDomain3Dr":{if(i.type!=="expression")continue;wn(i,__dcg_shared_module_exports__['_'](t.parametricDomain3Dr.min),"r"),Sn(i,__dcg_shared_module_exports__['_'](t.parametricDomain3Dr.max),"r")}break;case"parametricDomain3Dphi":{if(i.type!=="expression")continue;wn(i,__dcg_shared_module_exports__['_'](t.parametricDomain3Dphi.min),"phi"),Sn(i,__dcg_shared_module_exports__['_'](t.parametricDomain3Dphi.max),"phi")}break;case"hidden":this._setItemHidden(e,t.hidden);break;case"secret":B0(i,t.secret);break;case"readonly":My(i,t.readonly);break;case"color":{if(i.type!=="expression")continue;HT(i,t.color)}break;case"dragMode":{if(i.type!=="expression")continue;Em(i,t.dragMode)}break;case"label":{if(i.type!=="expression")continue;Tl(i,t.label)}break;case"showLabel":{if(i.type!=="expression")continue;Vd(i,t.showLabel)}break;case"labelSize":{if(i.type!=="expression")continue;ox(i,t.labelSize)}break;case"labelOrientation":{if(i.type!=="expression")continue;MD(i,t.labelOrientation)}break;case"latex":if(i.type!=="expression")continue;Ii(i,t.latex);break;case"points":if(i.type!=="expression")continue;ID(i,!!t.points);break;case"lines":if(i.type!=="expression")continue;_D(i,!!t.lines);break;case"pointStyle":if(i.type!=="expression")continue;CD(i,t.pointStyle);break;case"pointSize":case"movablePointSize":if(i.type!=="expression")continue;tx(i,t.pointSize);break;case"pointOpacity":if(i.type!=="expression")continue;ex(i,t.pointOpacity);break;case"lineStyle":if(i.type!=="expression")continue;KT(i,t.lineStyle);break;case"lineWidth":if(i.type!=="expression")continue;fm(i,t.lineWidth);break;case"lineOpacity":if(i.type!=="expression")continue;mm(i,t.lineOpacity);break;case"fill":if(i.type!=="expression")continue;ED(i,t.fill);break;case"fillOpacity":if(i.type!=="expression")continue;Zy(i,t.fillOpacity);break;case"surfaceOpacity":if(i.type!=="expression")continue;Qy(i,t.surfaceOpacity);break;case"id":case"type":case"domain":break;default:throw new Error("trying to call setProperty for: "+n)}}}_isParentFolderHidden(e){let t=this.getItemModel(e);if(!t)return!1;let o=tn(t);return o?o.hidden:!1}_toggleItemHidden(e){var t;if(this._isParentFolderHidden(e))this._setItemHidden(e,!1);else{let o=this.getItemModel(e);if(!o)return;switch(o.type){case"expression":this._setItemHidden(e,!$o(o));break;case"image":case"folder":this._setItemHidden(e,!o.hidden);break;case"table":case"text":break;default:return o}Xn(o)&&($o(o)||this.logEvent({category:"tone",action:$o(o)?"mute-local":"unmute-local"}),(t=this.toneController)==null||t.recomputeAudio())}}_toggleTableColumnHidden(e,t){if(this._isParentFolderHidden(e))this._setTableColumnHidden(e,t,!1);else{let o=this.getItemModel(e);if(!o||o.type!=="table")return;let i=Kr(o,t);if(!i)return;this._setTableColumnHidden(e,t,!i.hidden)}}_setTableColumnHidden(e,t,o){let i=this.getItemModel(e);if(!i||i.type!=="table")return;let n=D0(i,t);!o&&this._isParentFolderHidden(e)&&this._setItemHidden(i.folderId,!1),fq(i,t,o),!o&&n&&NP(i,t,!0)}_setItemHidden(e,t){let o=this.getItemModel(e);if(!o)return;!t&&o.type!=="folder"&&this._isParentFolderHidden(o.id)&&this._setItemHidden(o.folderId,!1);let i;switch(o.type){case"expression":{i=$o(o),T8(o,t);break}case"folder":i=Dq(o),Pq(o,t);break;case"image":v4(o,t);break;case"table":case"text":break;default:return o}i!==void 0&&t&&!i&&(o.type==="expression"?this.trackActionForPotentialEvaluatorRestart("hide",o.id):o.type==="folder"&&this.getAllItemModels().filter(n=>n.type==="expression"&&n.folderId===o.id).forEach(n=>this.trackActionForPotentialEvaluatorRestart("hide",n.id)))}_addItemToEndFromAPI(e){let t=kT(this.listModel);!e.secret&&t&&t.type==="expression"&&t.latex===""&&hm(this.listModel,t.index);let o=mD(e.id);o!==void 0&&o>=this.__nextItemId&&(this.__nextItemId=o+1),ka(this.listModel,e)}copyTableStateWithNewColumnIds(e){let t={};return e.columns&&e.columns.forEach(o=>{let i=this.generateId();t[o.id]=i,o.id=i}),e.regression&&(e.regression={...e.regression,id:this.generateId(),columnIds:{x:t[e.regression.columnIds.x],y:t[e.regression.columnIds.y]}}),e}copyExpressionToIndex(e,t,o){let i={stripDefaults:!1},n;switch(e.type){case"expression":n=Jy(e,i);break;case"table":n=this.copyTableStateWithNewColumnIds(qg(e,i));break;case"image":n=lT(e,i);break;case"text":n=vT(e,i);break;default:return}let a=this.createItemModel({...n,id:this.generateId()});this._toplevelInsertItemAt(t,a,!1,o||e.folderId)}_toplevelInsertItemAt(e,t,o,i){let n=t;ki(this.listModel,n,e),i&&ui(n,i),o&&Jr(this,n.id)}_toplevelNewItemAtSelection(e,t){this.setGeoTool("selection");let o=this.getSelectedItem();if(o){let s=o.type==="expression"&&!o.latex;if(s&&!o.folderId&&(e.type!=="expression"||e.latex))return this._toplevelReplaceItemAt(o.index,e,t.shouldFocus);if(s&&o.folderId&&e.type!=="expression"&&e.type!=="folder")return this._toplevelReplaceItemAt(o.index,e,t.shouldFocus);if(o.type!=="folder"&&!o.folderId)return this._toplevelInsertItemAt(o.index+1,e,t.shouldFocus,void 0);if(o.type!=="folder"&&o.folderId&&e.type!=="folder")return this._toplevelInsertItemAt(o.index+1,e,t.shouldFocus,o.folderId);if(o.type==="folder"&&!o.collapsed&&e.type!=="folder")return this._toplevelInsertItemAt(o.index+1,e,t.shouldFocus,o.id)}let i=this.getFirstFullyVisibleItem();for(i&&i.type==="folder"&&(i=this.getItemModelByIndex(i.index+1));i&&i.type!=="folder"&&i.folderId;)i=this.getItemModelByIndex(i.index+1);let n=i?i.index:this.getItemCount();return this._toplevelInsertItemAt(n,e,t.shouldFocus,void 0)}getFirstFullyVisibleItem(){let e=uG(this);if(e)return Sl(this.listModel,e)}findEl(e){if(this.rootElt)return this.rootElt.querySelector(e)||void 0}getExppanelElt(){return ew(this)}scrollItemIntoView(e){if(!this.rootElt||!this.isListVisible())return;let t=this.getItemNodeById(e.id),o=ew(this);if(!(!t||!o)){if(e.type==="table"){let i=t.querySelector(".dcg-select-dropdown-list");if(i){ta(i,o,60);return}}if(document.activeElement&&t.contains(document.activeElement)){let i=document.activeElement.closest(`.${Xk}`)?160:90;ta(document.activeElement,o,i)}else ta(t,o,90)}}scrollSelectedItemIntoView(){let e=this.getFirstSelectedItem();if(e){if(Yg(e)&&e.type!=="folder"&&e.folderId){let t=this.getItemModel(e.folderId);(t==null?void 0:t.type)==="folder"&&t.collapsedChildIsSelected&&(e=t)}Yg(e)||this.scrollItemIntoView(e)}}_pasteTable(e){let t=this.getGrapher();if(!t)return;let o=_T(this.listModel),i=GP(o,e,this),n=this.createItemModel(i);this._toplevelNewItemAtSelection(n,{shouldFocus:!0}),this._closeAddExpression();let a=t.getProjection(),s=a.viewport,l=e[0].map(h=>parseFloat(h)),c=e[1].map(h=>parseFloat(h));if(this.is3dProduct())return;let p={xmin:__dcg_shared_module_exports__['g'](l),xmax:__dcg_shared_module_exports__['f'](l),ymin:__dcg_shared_module_exports__['g'](c),ymax:__dcg_shared_module_exports__['f'](c),type:"table"};if(isFinite(p.xmin)&&isFinite(p.xmax)&&isFinite(p.ymin)&&isFinite(p.ymax)&&(p.xmax>s.xmax||p.xmin<s.xmin||p.ymax>s.ymax||p.ymin<s.ymin)){let h=Ow([p],a);h&&!this.viewportIsLocked()&&(t.viewportController.setUndoViewport(h),this._showToast({message:this.s("graphing-calculator-text-toast-zoom-to-fit"),undoCallback:()=>{this.dispatch({type:"undo"})}}),this.markSquareAxesAfterUserEditedViewport())}}_insertSeveralExpressions(e){for(let t=0;t<e.length;t++){let o=this.createItemModel(e[t]);this._toplevelNewItemAtSelection(o,{shouldFocus:!0})}}_openOnWeb(){this.runAfterDispatch(()=>{let e=this.getGrapher();if(!e)return;let t=this.getProduct();if(t!=="graphing"&&t!=="geometry-calculator"&&t!=="graphing-3d")return;let o=JSON.stringify(this.getState()),i=e.screenshot({width:100,height:100}),n=this.getGraphSettings().config.crossOriginSaveTest,s=(n?"/":"https://www.desmos.com/")+"api/v1/calculator-shared/cross_origin_save",l=document.createElement("div");zX.mountToNode(hA,l,{stateData:()=>o,thumbData:()=>i,saveURL:()=>s,openInNewWindow:()=>!n,product:()=>t}),this.rootElt.append(l);let c=l.querySelector("form[name=open_graph_on_web]");re(c).trigger("submit"),l.remove()})}notifyBugsnagAboutMissingSelectedItem(e,t){let o=ku(this.listModel),i="";try{o?i=JSON.stringify(o.cachedUndoRedoFullState,null,2):i="undefined"}catch(s){i="[[could not stringify]]"}let n="";try{if(!o)n="undefined";else{let s={id:o.id,index:o.index,displayIndex:o.index,secretIndex:o.secretIndex,guid:o.guid,renderShell:o.renderShell,isHiddenFromUI:o.isHiddenFromUI,hasDCGView:!!o.rootViewNode,cachedRenderHeight:o.cachedRenderHeight};n=JSON.stringify(s,null,2)}}catch(s){n="[[could not stringify]]"}let a="";try{a=JSON.stringify(gD(this.listModel),null,2)}catch(s){a="[[could not stringify]]"}Lr("ReplaceItemAtError: no item at index",{metaData:{index:e,shouldFocus:t,selectedModelJSON:n,selectedItemJSON:i,listStateJSON:a}})}_toplevelReplaceItemAt(e,t,o){let i=t,n=this.getItemModelByIndex(e);n||this.notifyBugsnagAboutMissingSelectedItem(e,o);let a=n.type!=="folder"&&n.folderId;hm(this.listModel,e),ki(this.listModel,i,e),a&&ui(i,a),o&&Jr(this,i.id)}convertImageToDraggable(e){let t=this.getItemModel(e);if(!t||t.type!=="image")return;let o=t.folderId,i=t.index+1,n=t.center,a=_T(this.listModel),s=__dcg_shared_module_exports__['ia']("C_"+a),l=this.createItemModel({id:this.generateId(),type:"expression",latex:s+"="+n,dragMode:__dcg_shared_module_exports__['hd'].XY,hidden:!0});ki(this.listModel,l,i),o&&ui(l,o),Ts(t,"center",s),tD(t,!0),rD(t,!0)}createSlidersForItem(e,t,o){let i=this.getItemModel(e);if(!i)return;let n=i.type!=="folder"&&i.folderId;return this.createSliders({model:i,folderId:n,index:i.index+1,doNotChangeFocus:o},t)}createSlidersForTicker(e){return this.createSliders({model:this.listModel.ticker,folderId:!1,index:0,doNotChangeFocus:!0},e)}createSliders({model:e,folderId:t,index:o,doNotChangeFocus:i},n){var h;let a=[];e.type==="ticker"?wT(e,(g,m)=>{a.push({latex:g,location:m})}):sm(e,(g,m)=>{a.push({latex:g,location:m.location})});let s=SX(a,n,{degreeMode:this.graphSettings.degreeMode}),l=e.type==="expression"||e.type==="ticker"?(h=e.formula)==null?void 0:h.action_slider_defaults:void 0,c=n.map(g=>{let m=s[g],b="1";m&&m.value!==void 0&&(b=m.value);let x,E=__dcg_shared_module_exports__['ja'](g);g===""?x="":l&&l.hasOwnProperty(E)?x=l[E]:x=g+"="+b;let S={type:"expression",id:this.generateId(),latex:x,color:this.getNextColor(),hidden:!!x};return m&&(m.min!==void 0&&(S.slider||(S.slider={}),S.slider.hardMin=!0,S.slider.min=m.min),m.max!==void 0&&(S.slider||(S.slider={}),S.slider.hardMax=!0,S.slider.max=m.max),m.step!==void 0&&(S.slider||(S.slider={}),S.slider.step=m.step)),S});for(let g=c.length-1;g>=0;g--){let m=this.createItemModel(c[g]);ki(this.listModel,m,o),t&&ui(m,t)}if(i)return;let p=c[c.length-1];p.latex===""?Jr(this,p.id):Jt(this,void 0)}_uploadImagesAndWaitForThemToLoad(e){let{files:t,id:o}=e;if(!t||t.length===0){this._showToast({message:this.s("graphing-calculator-text-toast-no-file-selected")});return}if(o&&t.length>1){this._showToast({message:this.s("graphing-calculator-text-toast-choose-one-file")});return}let i=P4({controller:this,files:t,id:o}),n=i.errors[0];n&&this._showToast({message:n});for(let a of i.tokens)this.__pendingImageUploads[a]=!0;this.isUploadingImages()&&this._showToast({message:this.s("graphing-calculator-text-toast-uploading-images"),onHide:()=>{this._clearPendingImageUploads()}})}getImageToRetry(){let e;for(let t of this.getAllItemModels())t.type==="image"&&t.loadStatus==="failed"&&(!e||e.failures>t.failures)&&(e=t);return e}retryLoadingFailedImage(e){let t=Date.now(),o=t-this.imageRetryState.lastAttemptTime,i=1e3*Math.pow(2,this.imageRetryState.attempts);this.imageRetryState.attempts>0&&o<i||(oD(e),this.imageRetryState={lastAttemptTime:t,attempts:this.imageRetryState.attempts+1})}getSelectedItem(){return ku(this.listModel)}getFirstSelectedItem(){let e=this.getAllSelectedItems(),t=e[0];if(t){for(let o=1;o<e.length;o++){let i=e[o];i.index<t.index&&(t=i)}return t}}getAllSelectedItems(){return AT(this.listModel)}getOpenItemMenu(){return this.listModel.openItemMenu}isItemSettingsMenuOpen(e){let t=this.listModel.openItemMenu;return t?t.guid===e:!1}isPopoverOpen(e){return this.layoutModel.openPopoverGuid===e}getOpenPopoverGuid(){return this.layoutModel.openPopoverGuid}setPopoverOpen(e,t){t?this.layoutModel.openPopoverGuid=e:this.isPopoverOpen(e)&&(this.layoutModel.openPopoverGuid=void 0)}closeItemSettingsMenu(){let e=this.getOpenItemMenu();e!==void 0&&(e.focusFirstOption&&(e.previousFocusLocation!==void 0?Jt(this,e.previousFocusLocation):this.focusOpenMenuIcon()),this.listModel.openItemMenu=void 0)}focusOpenMenuIcon(){let e=this.getOpenItemMenu();e&&(e.type==="slider"?this.dispatch({type:"set-focus-location",location:{type:"slider-animation-properties-icon",id:e.model.id}}):e.type==="image"?this.dispatch({type:"set-focus-location",location:{type:"image-icon",id:e.model.id}}):e.type==="table-column"?this.dispatch({type:"set-focus-location",location:{type:"table-icon",id:e.model.table.id,columnId:e.model.id}}):e.type==="table-regression"?this.dispatch({type:"set-focus-location",location:{type:"table-regression-icon",id:e.model.id}}):e.type==="geo-tool-dropdown"?this.dispatch({type:"set-focus-location",location:{type:"geo-basic-tool",tool:e.tools[0]}}):e.type==="multi-select-more"?this.dispatch({type:"set-focus-location",location:{type:"multi-select-more-icon"}}):e.type==="multi-select-construct"?this.dispatch({type:"set-focus-location",location:{type:"multi-select-construct-icon"}}):e.type==="multi-select-style"?this.dispatch({type:"set-focus-location",location:{type:"multi-select-style-icon"}}):e.type==="multi-select-label"?this.dispatch({type:"set-focus-location",location:{type:"multi-select-label-icon"}}):this.dispatch({type:"set-focus-location",location:{type:"expression-icon",id:e.model.id}}))}getFocusedItem(){return Rx(this)}getFocusLocation(){return this.focusLocation}isFocusLocationFocused(e){let t=this.focusLocation,o=e;return!t||!o?!1:__dcg_shared_module_exports__['s'](t,o)}isCurrentFocusLocationValid(){let e=this.focusLocation;if(!e)return!0;if(e.type==="settings")return e.location==="icon"||this.isGraphSettingsOpen();if(e.type==="invalid-graph-bounds-cover")return this.getShowInvalidBoundsCover();if(e.type==="reduced-motion-cover")return this.getShowReducedMotionCover();if(e.type==="add-item-btn"||e.type==="edit-list-toggle"||e.type==="hide-expression-list-btn"||e.type==="show-expression-list-btn")return this.isListEnabled();if(e.type==="add-expression-btn"||e.type==="add-table-btn")return this.layoutModel.addExpressionOpen;if(e.type==="add-note-btn")return this.layoutModel.addExpressionOpen&&this.areNotesEnabled();if(e.type==="add-folder-btn")return this.layoutModel.addExpressionOpen&&this.areFoldersEnabled();if(e.type==="add-ticker-btn")return this.layoutModel.addExpressionOpen&&this.areActionsEnabled();if(e.type==="add-image-btn")return this.layoutModel.addExpressionOpen&&this.areImagesEnabled();if(e.type==="add-inference-btn")return this.layoutModel.addExpressionOpen&&this.isInferenceWizardEnabled();if(e.type==="add-inference-wizard")return this.wizardModel.isWizardOpen();if(e.type==="zoom-in-btn"||e.type==="zoom-restore-btn")return!0;if(e.type==="search-expressions"||e.type==="replace-expressions")return this.expressionSearchOpen;if(e.type==="ticker")return this.listModel.ticker.open;if(e.type==="generic-menu")return!!this.getOpenItemMenu();if(e.type==="graph-paper"){let i=this.getGrapher();return!!(i&&i.getIsVisible()&&i.settings.config.graphpaper)}if(e.type==="geo-show-constructions-icon"||e.type==="geo-token"||e.type==="multi-select-more-icon"||e.type==="multi-select-construct-icon"||e.type==="multi-select-style-icon"||e.type==="multi-select-label-icon"||e.type==="label-points-icon")return this.isGeoUIActive();if(e.type==="new-transformation-number"){let i=this.getGeoModel(),n=i.getCurrentTool(),a=i.getNonObjectsState().ui.currentTool.inputIndex,s=n.getSpec&&n.getSpec();return!!s&&!!s.inputs[a]&&!!s.inputs[a].numberInputInfo}if(e.type==="geo-header-back-link"||e.type==="multi-select-show-hide-icon")return this.isGeoUIActive()&&this.hasAnyItemsSelected();if(e.type==="geo-basic-tool")return this.isGeoUIActive()&&e.tool!=="expression-edit";if(e.type==="regression-output")return!!this.getItemModel(e.id)&&e.parameter!=="";if(e.type==="stats-output"){let i=this.getItemModel(e.id);return!!(i&&i.type==="expression"&&JT(i)&&e.parameter!=="")}if(e.type==="quest")return this.getQuestIsActive();let t=this.getOpenItemMenu();if(e.type==="geo-basic-tool-menu-item")return this.isGeoUIActive()&&e.tool!==""&&t!==void 0&&(t.type==="geo-tool-dropdown"||t.type==="multi-select-construct");if(e.type==="geo-construct-menu-existing-transformations")return this.isGeoUIActive()&&(t==null?void 0:t.type)==="multi-select-construct";if(e.type==="multi-select-label-menu-label-input")return this.isGeoUIActive()&&this.hasAnyItemsSelected()&&(t==null?void 0:t.type)==="multi-select-label";if(e.type==="multi-select-options-menu-item")return this.isGeoUIActive()&&this.hasAnyItemsSelected()&&(t==null?void 0:t.type)==="multi-select-more";if(e.type==="global-mute-button")return this.toneItemsExist();if(e.type==="color-picker-option")return!0;let o;if(t&&t.type==="table-column"?o=t.model.table:o=this.getItemModel(e.id),!o)return!1;if(e.type==="change-image-btn")return this.listModel&&o.type==="image"&&this.areImagesEnabled();if(e.type==="expression-menu"){let i=this.getOpenItemMenu();if(!i||(i.type==="expression"||i.type==="image"||i.type==="table-column")&&i.model.id!==e.id)return!1;if(e.location==="start"||e.location==="end"||e.location==="updaterule"||e.location==="anywhere"||o.type==="table")return!0;if(e.location==="alt-text")return o.type==="expression"||o.type==="image";if(o.type!=="expression")return!1;let{points:n,lines:a,fill:s}=o;Il(o)&&(s=!0);let l=__dcg_shared_module_exports__['yd'](o.formula.expression_type,{points:n,lines:a,fill:s},c=>{Lr("getReconciledExpressionProps [Chrome Switch Bug]",{metaData:{method:"isCurrentFocusLocationValid",type:c}})});return!(!l.fill&&!l.points&&!l.lines&&!o.showLabel)}if(e.type==="add-table-regression-btn")return this.areTableRegressionsEnabled()&&o.type==="table"&&!o.regression;if(e.type==="table-regression-delete-btn"||e.type==="table-regression-copy-btn"||e.type==="table-regression-type-dropdown"||e.type==="table-regression-view-source-popover"||e.type==="table-regression-model-dropdown"||e.type==="table-regression-export-btn")return this.areTableRegressionsEnabled()&&o.type==="table"&&!!o.regression;if(!this.isItemSelected(e.id)&&e.type!=="editable-label")return!1;switch(e.type){case"domain-limit":return!(o.type!=="expression"||!Bd(o)&&!Pc(o));case"expression-icon":case"top-level-icon":return!0;case"expression-evaluation":return this.shouldShowEvaluationForItem(o.id)||this.shouldShowCDFEvaluationForItem(o.id);case"image-icon":return o.type==="image"&&o.loadStatus!=="loading"&&o.loadStatus!=="failed"&&!o.error;case"action-icon":return!(o.type!=="expression"||!_c(o));case"slider-icon":case"slider-animation-properties-icon":case"slider-thumb":case"slider-limit":return!(o.type!=="expression"||!I8(o));case"table-icon":return o.type==="table"&&this.getGraphSettings().config.graphpaper;case"table-regression-icon":case"regression-plot-residuals-button":return this.areTableRegressionsEnabled()&&o.type==="table"&&!!o.regression;case"visualization-prop":return!(o.type!=="expression"||!XT(o));case"distribution-param":if(o.type!=="expression")return!1;let i=Wd(o);return i?e.location in i.values:!1;case"image":return o.type==="image";case"folder":return o.type==="folder";case"text":return o.type==="text";case"expression":return!(o.type!=="expression"||this.isInEditListMode()||e.isFakeGraphFocus&&!this.getValidCursorContext());case"readonly-expression":return this.isItemReadonly(o.id)||o.type==="expression"&&this.isInEditListMode();case"table":return o.type!=="table"?!1:vq(o,e.location);case"table-container":return o.type==="table"&&this.isInEditListMode();case"editable-label":return o.type!=="expression"?!1:Im(o);case"inference-footer":return o.type!=="expression"?!1:on(o)||Jn(o)||Cl(o);case"distribution-footer":return o.type!=="expression"?!1:_u(o);case"action-info":return this.shouldShowActionInfo(o.id);case"chi-square-table-dropdown":case"chi-square-table":return o.type!=="expression"?!1:(Hd(o)||Kd(o))&&o.inference.chiSquare.showTable;default:return e}}checkIfShouldCancelWizard(){if(!this.wizardModel.isWizardOpen())return!1;if(!this.isListVisible())return!0;let e=this.wizardModel.getInsertItemId();if(e){let t=this.getItemModel(e);if(!t||t.type!=="expression"||t.latex!=="")return!0;if(t.folderId){let o=this.getItemModel(t.folderId);if((o==null?void 0:o.type)==="folder"&&o.collapsed)return!0}}return!1}shouldShowActionInfo(e){var o,i;if(!this.areActionsEnabled())return!1;let t=this.getItemModel(e);return!t||t.type!=="expression"&&t.type!=="image"?!1:!!((o=t.clickableInfo)!=null&&o.enabled&&((i=t.clickableInfo)!=null&&i.latex))}shouldAllowMovingPointsWithKeyboard(){let e=this.getActiveTool();return e==="selection"||e==="box-selection"}isDragDropActive(){return!!this.listModel.dragState}isItemDraggable(e){return!this.isItemReadonly(e)||this.isInferenceWizardInsertTarget(e)}isItemBeingDragged(e){let t=this.listModel.dragState;return!(!t||t.firstItemId!==e)}shouldRenderDraggedItemAsToken(){let e=this.listModel.dragState;return e?e.renderType==="token":!1}canDraggedItemBeMovedIntoTokenPane(){var i,n,a;let e=this.getDraggedItemId();if(!e)return!1;let t=this.getItemModel(e);if(!t||t.type!=="expression"||this.isItemMarkedReadonly(t.id))return!1;let o=(i=t.formula.geometry)==null?void 0:i.valueType;return o===void 0||(n=t.formula.geometry)!=null&&n.unconstructable||t.formula.recursion_base_case||t.formula.function_definition&&!__dcg_shared_module_exports__['wb'](o,__dcg_shared_module_exports__['Qa'])?!1:!!((a=t.formula.geometry)!=null&&a.parentDependencies)}shouldShowAltTextInFooter(e){return this.shouldShowAuthorFeatures()?uD(e):!1}getDraggedItemId(){let e=this.listModel.dragState;return e&&e.firstItemId}getDraggedIdentifier(){var o;let e=this.getRawDragState();if(!e)return;let t=this.getItemModel(e.dragTarget.calcId);if(!(!t||t.type!=="expression"))return(o=uo(t))==null?void 0:o.identifier}getRawDragState(){return this.listModel.dragState}initStateStack(){this.stateStack=new ad,this.stateStack.addState({diffState:this.getUndoRedoDiffState(),fullState:this.getUndoRedoFullState()})}getUndoRedoDiffState(){var e;return{randomSeed:this.getRandomSeed(),includeFunctionParametersInRandomSeed:this.getIncludeFunctionParametersInRandomSeed(),layoutModel:this.layoutModel,settingsViewModel:this.settingsViewModel,graph:(e=this.getGrapher())==null?void 0:e.getUndoRedoDiffState(),expressions:kH(this.listModel),geometryToolbar:QP(this.geometryToolbarModel),wasCompleteSetState:this.isCurrentlyDoingSetState}}getUndoRedoFullState(){var e;return{randomSeed:this.getRandomSeed(),includeFunctionParametersInRandomSeed:this.getIncludeFunctionParametersInRandomSeed(),layoutModel:this.layoutModel,settingsViewModel:this.settingsViewModel,graph:(e=this.getGrapher())==null?void 0:e.getUndoRedoFullState(),expressions:gD(this.listModel),geometryToolbar:QP(this.geometryToolbarModel),wasCompleteSetState:this.isCurrentlyDoingSetState}}getState(e){var a,s;let t={stripDefaults:!0};e&&e.hasOwnProperty("stripDefaults")&&(t.stripDefaults=!!e.stripDefaults);let o=(s=(a=this.getGrapher())==null?void 0:a.getState(t))!=null?s:{...this.getBlankState().graph,degreeMode:this.graphSettings.degreeMode},i={version:qa,randomSeed:this.getRandomSeed(),graph:o,expressions:EH(this.listModel,t)},n=this.getIncludeFunctionParametersInRandomSeed();if((!n||!t.stripDefaults)&&(i.includeFunctionParametersInRandomSeed=n),this.isGeometry()){let l=l4(this.geometryToolbarModel,t);l&&(i.geometryToolbar=l)}return e&&e.avoidBackMigration?__dcg_shared_module_exports__['Uc'](i):su(__dcg_shared_module_exports__['Uc'](i))}getHistory(){return new uA(this.getState(),this.stateStack)}getProduct(){return this.graphSettings.config.product}isGeometry(){return this.getProduct()==="geometry-calculator"}is3dProduct(){return this.getProduct()==="graphing-3d"}isMultiSelectEnabled(){return this.isGeometry()}shouldEvaluateSelection(){return this.isGeometry()}canLoadPastedLink(e){return this.graphSettings.config.pasteGraphLink?this.isGeometry()?kM(e)||aG(e)||lG(e):this.is3dProduct()?sG(e):kM(e):!1}getBlankState(e){if(this.isGeometry())return rA;if(this.is3dProduct())return HO;let t;(e==null?void 0:e.degreeMode)!==void 0?t=e.degreeMode:t=this.graphSettings.config.clearIntoDegreeMode;let o={...mG.graph};return t&&(o.degreeMode=!0),{...mG,graph:o}}externalSetState(e,t){var s;this._clearPendingImageUploads(),this.rootElt&&document.activeElement&&this.rootElt.contains(document.activeElement)&&re(document.activeElement).trigger("blur"),t||(t={}),e||(e=this.getBlankState()),typeof e=="string"&&(e=JSON.parse(e)),this.isGeometry()&&C5(e)&&(e=uc(e));let o=so(e);!this.canEnableComplexMode()&&((s=o==null?void 0:o.graph)!=null&&s.complex)&&(o.graph.complex=!1,o.graph.degreeMode=e.graph.degreeMode);let i=this.graphSettings.config.product,n;if(!o.graph||o.graph.product===void 0?n="graphing":n=o.graph.product,n!==i){let l=i==="geometry-calculator"?this.s("account-shell-text-error-loading-geometry-state"):this.s("account-shell-error-mygraphs-error-loading");this._showToast({message:l}),Lr(`Data Error: state appears to have been saved in the '${n}' product and cannot be opened in the '${i}' product.`);return}i==="geometry-calculator"&&(this.showConstructionsOpen=!1);let a=this.layoutModel;this.setState(o,t),xH(this.listModel),MT(this.listModel),this.layoutModel={...FG(this.graphSettings.config),keypadMinimized:a.keypadMinimized,keypadLayout:a.keypadLayout,keypadFunctionsOpen:a.keypadFunctionsOpen,expressionsVisible:!!this.graphSettings.config.expressions&&(this.isListVisible()||!!t.forceExpressionsOpen)},this.settingsViewModel=GG(),Jt(this,void 0),t.forceUnsavedChanges?this.enqueueEvent("change"):this.enqueueEvent("clearUnsavedChanges")}setState(e,t){var o,i;if(this.isCurrentlyDoingSetState=!0,(o=this.getGrapher())==null||o.viewportController.clearHasViewportBeenEvaluatedSinceSetState(),"graph"in e&&e.graph!==void 0){if("threeDMode"in e.graph&&e.graph.threeDMode&&this.grapher3d){if(e.graph.showBox3D!==void 0&&this.grapher3d.webglLayer.showBox(e.graph.showBox3D),"showAxis3D"in e.graph&&this.grapher3d.webglLayer.showAxes(!!e.graph.showAxis3D),"showAxisLabels3D"in e.graph&&this.grapher3d.webglLayer.updateAxes(),"showPlane3D"in e.graph||"showAxis3D"in e.graph){let s=("showPlane3D"in e.graph?!!e.graph.showPlane3D:this.graphSettings.showPlane3D)&&("showAxis3D"in e.graph?!!e.graph.showAxis3D:this.graphSettings.showAxis3D);this.grapher3d.webglLayer.showPlane(s)}let a=this.grapher3d.baseplaneWidth();this.grapher2d.setCanvasSizeFor3D(a,a)}let n=this.getGrapher();n?n.setGrapherState(e.graph):sh.copyGraphProperties(e.graph,this.graphSettings),"threeDMode"in e.graph&&e.graph.threeDMode&&this.grapher3d&&this.grapher3d.controls.copyWorldRotationToWorld()}if("expressions"in e){ar(this.listModel,void 0);let n=IH(e.expressions);n>=this.__nextItemId&&(this.__nextItemId=n+1),CH(this.listModel,e.expressions,t||{}),this.shouldShowReducedMotionCover(e)&&(this.showReducedMotionCover=!0,this.grapher3d&&(this.grapher3d.controls.speed3D=0))}if("layoutModel"in e&&(this.layoutModel=e.layoutModel),"settingsViewModel"in e&&(this.settingsViewModel=e.settingsViewModel),(!t||!t.allowUndo)&&this.clearUndoRedoHistory(),this.setRandomSeed(e.randomSeed||il()),this.setIncludeFunctionParametersInRandomSeed((i=e.includeFunctionParametersInRandomSeed)!=null?i:Bo.includeFunctionParametersInRandomSeed),"geometryToolbar"in e){let n=e.geometryToolbar;this.geometryToolbarModel=tT(n)}}getShowReducedMotionCover(){return this.graphSettings.config.showReducedMotionCover&&this.showReducedMotionCover}shouldShowReducedMotionCover(e){var t;return py?this.getProduct()==="graphing-3d"&&e.graph.speed3D||(t=e.expressions.ticker)!=null&&t.playing?!0:!!e.expressions.list.find(o=>{var i;return o.type==="expression"&&((i=o.slider)==null?void 0:i.isPlaying)}):!1}updateToState(e){if(this.isCurrentlyDoingRestoreState=!0,"graph"in e&&(e.graph.threeDMode?this.grapher3d&&this.grapher3d.setGrapherState(e.graph):this.grapher2d&&this.grapher2d.setGrapherState(e.graph,{doNotClear:!0})),"expressions"in e&&_H(this.listModel,e.expressions),e.layoutModel&&(this.layoutModel=e.layoutModel),e.settingsViewModel&&(this.settingsViewModel=e.settingsViewModel),"geometryToolbar"in e){let t=e.geometryToolbar;this.geometryToolbarModel=tT(t)}}commitUndoRedoSynchronously(e){let t=this.stateStack.getState(),o=t&&t.diffState,i=this.getUndoRedoDiffState();if(Ame(o,i))return;let n=this.apiMethodCallStackInfo.withHistoryReplacementDepth>0,a={diffState:i,fullState:this.getUndoRedoFullState()};if(!n&&BX(e))this.stateStack.addState(a),this.enqueueEvent("change",e);else{let s=t&&t.fullState.wasCompleteSetState||a.fullState.wasCompleteSetState,l={diffState:{...a.diffState,wasCompleteSetState:s},fullState:{...a.fullState,wasCompleteSetState:s}};this.stateStack.replaceInteriorState(l)}}isUndoRedoDisabledForNotebook(){return!1}undo(){if(!this.canUndo())return;this.closeToast(),this.stateStack.undo();let e=this.stateStack.getState().fullState;e.wasCompleteSetState?this.setState(e,{allowUndo:!0}):this.updateToState(e),this.enqueueEvent("change",{type:"undo"})}redo(){if(!this.canRedo())return;this.stateStack.redo();let e=this.stateStack.getState().fullState;e.wasCompleteSetState?this.setState(e,{allowUndo:!0}):this.updateToState(e),this.enqueueEvent("change",{type:"undo"})}clearUndoRedoHistory(){this.stateStack.clear()}canUndo(){return this.isUndoRedoDisabledForNotebook()?!1:this.stateStack.canUndo()}canRedo(){return this.isUndoRedoDisabledForNotebook()?!1:this.stateStack.canRedo()}closeToast(){let e=this.toastData.onHide;e&&this.runAfterDispatch(e),this.toastData={}}_closeAddExpression(){this.layoutModel={...this.layoutModel,addExpressionOpen:!1}}doesDOMHaveSize(){return this.layoutMeasurements.width>0&&this.layoutMeasurements.height>0}_getExpListHeight(){let e=this.isKeypadOpen()?this._getRawKeypadHeight()+125:100;if(this.getShowConstructionsOpen()&&(e=Math.max(e,225)),this.userSpecifiedExpListHeight!==void 0){e>this.userSpecifiedExpListHeight&&(this.userSpecifiedExpListHeight=e);let o=this.layoutMeasurements.height-(this.isGeometry()?100:50);return Math.min(this.userSpecifiedExpListHeight,o)}let t=this.layoutMeasurements.height;return t?.58*t:e}_getExpListWidth(){let e;if(this.userSpecifiedExpListWidth!==void 0){let i=this.layoutMeasurements.width-(this.isGeometry()?320:200);e=__dcg_shared_module_exports__['Ob'](this.userSpecifiedExpListWidth,320,i)}else{if(e=this.layoutMeasurements.width,!e)return 320;let i=.2*e+160;e=__dcg_shared_module_exports__['Ob'](i,320,500)}let o=this.layoutMeasurements.width-this.getGrapherHeight();return Math.abs(o-e)<=10?o:e}_setExpListWidth(e){this.userSpecifiedExpListWidth=e}_setExpListHeight(e){this.userSpecifiedExpListHeight=e}getKeypadHeight(){return this.computeMajorLayout().keypad.height}isKeypadEnabled(){return!!this.graphSettings.config.keypad}isKeypadOpen(){if(!this.isKeypadEnabled())return!1;let e=this.layoutModel.keypadMinimized&&!this.isNarrow();return this.needsFakeKeypad()&&!e}isHideKeypadButtonVisible(){return this.getBrailleMode()==="none"&&this.isKeypadOpen()&&(!this.isNarrow()||this.inAudioTraceMode())}isKeypadFunctionsPopoverOpen(){return!!this.layoutModel.keypadFunctionsOpen}getKeypadLayout(){let e=this.layoutModel.keypadLayout;return this.isThreeDMode()?DX(e):e}isLetterKeypadOpen(){let e=this.getKeypadLayout();return this.isKeypadOpen()&&(e==="letters"||e==="noQwertyLetters"||e==="capitalLetters"||e==="noQwertyCapitalLetters")}isFileDraggedOver(){return this.layoutModel.isFileDraggedOver}getGeoToolbarHeight(){return this.shouldShowGeoToolbar()?48:0}isNarrowGeometryHeader(){return this.computeMajorLayout().grapher.width<450}shouldShowMultiSelectHeader(){return this.getSelectedGeoExpression()||this.hasMultipleItemsSelected()}getGrapherHeight(){return this.layoutMeasurements.height-this.getGeoToolbarHeight()}_getRawKeypadHeight(){let e=!!this.getGraphSettings().config.projectorMode,t=this.isNarrow();return e?t?185:193:169}computeMajorLayout(){let e=this.layoutMeasurements.width,t=this.layoutMeasurements.height,o=this.isNarrow(),i=this.isListVisible(),n=this.isKeypadOpen(),a=!this.isGrapherEnabled(),s=!this.isListEnabled(),l={left:0,top:0,width:0,height:0},c={left:0,top:0,width:0,height:0,paddingTop:0},p={left:0,top:t,width:e,height:this._getRawKeypadHeight()};s?(c.width=e,c.height=t):a?(l.width=e,l.height=t):i?o?(l.width=e,l.height=this.getExpListHeight(),l.top=t-l.height,c.width=e,c.height=t-l.height):(l.width=this.getExpListWidth(),l.height=t,c.left=l.width,c.width=e-c.left,c.height=t):i||(o?(l.width=e,l.height=Math.round(.58*t),l.top=t,c.width=e,c.height=t):(l.width=this.getExpListWidth(),l.height=t,l.left=-l.width,c.width=e,c.height=t)),n&&(p.top-=p.height,s||(l.height-=p.height));let h=this.getGeoToolbarHeight();return h&&(c.top+=h,c.height-=h),{list:l,grapher:c,keypad:p}}isNarrow(){return this.isGeometry()?this.layoutMeasurements.width<600:this.layoutMeasurements.width<450}getLayoutMeasurements(){return this.layoutMeasurements}getCapExpressionSize(){return!!this.getGraphSettings().config.capExpressionSize}handleAudioTraceCommand(e){let t=this.getAudioGraph();if(t===void 0)return;let o=t.agNavigator;switch(e){case"on":this.runAfterDispatch(()=>{t.enterAudioTrace({fromKeypad:!0})});break;case"off":this.runAfterDispatch(()=>{t.exitAudioTrace()});break;case"hear-graph":t.hearGraph();break;case"stop-graph":t.stopGraph();break;case"volume-down":t.adjustVolume("down");break;case"volume-up":t.adjustVolume("up");break;case"speed-down":t.speedDown();break;case"speed-up":t.speedUp();break;case"previous-point":this.runAfterDispatch(()=>{t.reportAndMoveToPrevPoint()});break;case"next-point":this.runAfterDispatch(()=>{t.reportAndMoveToNextPoint()});break;case"previous-poi":this.runAfterDispatch(()=>{t.reportAndMoveToPrevPOI()});break;case"next-poi":this.runAfterDispatch(()=>{t.reportAndMoveToNextPOI()});break;case"previous-curve":this.runAfterDispatch(()=>{o.prevCurve()});break;case"next-curve":this.runAfterDispatch(()=>{o.nextCurve()});break;case"describe-point":t.describePoint();break;case"describe-curve":t.describeCurve();break;case"describe-axes":t.describeAxes();break;case"keyboard-shortcuts":this.enqueueEvent("showHotkeysModal",{type:"keypad/audio-trace",command:e});break;default:return e}}setAudioTraceSpeed(e){let t=this.getAudioGraph();t&&t.adjustPlaybackSpeed(e)}setGraphPaperFocus(e){var t;Jt(this,e.isFocused?{type:"graph-paper"}:void 0),(t=this.get2dPOIController())==null||t.keyboardAttentionManager.setKeyboardAttention(void 0),this.requestRedrawGraph(),e.isFocused&&this.isGeoToolActive()&&this.runAfterDispatch(()=>{var o;(o=this.get2dPOIController())==null||o.keyboardAttentionManager.handleGrapherGainedFocus()})}isGraphPaperFocused(){let e=this.getFocusLocation();return e?!!(e.type==="graph-paper"||e.type==="expression"&&e.isFakeGraphFocus):!1}isVirtualMouseAllowed(){return!(!this.isGeometry()||!this.isGraphPaperFocused()||!this.geoModel.getCurrentTool().canNextInputBePoint())}isClickableId(e){return Yy(this.getItemModel(e))}setCanShowKeyboardShortcuts(e){this.canShowKeyboardShortcuts=e}getCanShowKeyboardShortcuts(){return this.canShowKeyboardShortcuts}apply3dProps(e){if(!this.isThreeDMode()||!this.grapher3d)return;let t=this.grapher3d.webglLayer;for(let o in e)switch(o){case"showPlane3D":t.showPlane(this.showPlane3D());break;case"showBox3D":t.showBox(!!e[o]);break;case"showAxis3D":t.showAxes(!!e[o]),t.showPlane(this.showPlane3D());break;case"showAxisLabels3D":t.updateAxes();break;default:break}}getGeometryTokenCount(){if(!this.cachedGeoTokenDepths)return 0;let e=0;return Object.values(this.cachedGeoTokenDepths).map(t=>e+=t?t.length:0),e}getAllGeometryConstructionIds(){return rH(this.listModel,__dcg_shared_module_exports__['je'])}makeGeoAPI(){this.geoModel=new Dw(this)}getGeoTokenInfoFromIdentifier(e){if(e)return this.cachedGeoTokenInfo[e]}getGhostMode(){return this.getGraphSettings().config.getProperty("ghostMode")}getshowKeyboardShortcutsInTooltips(){return!!this.getGraphSettings().config.showKeyboardShortcutsInTooltips}isDispatching(){return this.dispatcher.isDispatching()}getSuggestedIdentifierRenameInfo(e){return this.listModel.renamePrompt.suggestionForId(e)}getMathquillConfig(e){let t=e.additionalOperators||[];return this.toneAllowed()&&(t=[...t,"tone"]),{..._d({additionalOperators:t,includeGeometryFunctions:this.isGeometry(),include3DFunctions:this.is3dProduct(),includeNotebookFunctions:!!this.getGraphSettings().config.desNotebook}),autoCommands:dl({additionalCommands:this.isGeometry()?[]:["int"],disallowAns:this.isGeometry()})}}constrainMultiSelect(){if(this.isMultiSelectEnabled())return;let e=AT(this.listModel);e.length>1&&ar(this.listModel,e[0])}focusFirstExpression(){if(!this.getGraphSettings().config.expressions)return;let e=dm(this.listModel);e&&Jr(this,e.id,"end")}_updateToneAvailability(){let e=this.toneAllowed();e&&!this.toneController?this.toneController=new nx(this):!e&&this.toneController&&(this.toneController=void 0)}toneItemsExist(){return this.toneEnabled()?this.getAllItemModels().some(e=>Xn(e)):!1}toneAllowed(){return!!(this.graphSettings.config.audio&&this.graphSettings.config.tone)}toneEnabled(){return!!this.toneController}isAdaptivePeelingSettled(){let e=this.adaptiveDepthPeelingInfo;return(e==null?void 0:e.status)===2||(e==null?void 0:e.status)===1&&(e==null?void 0:e.peelLayers)>=Zf}setAdaptiveDepthPeelingInfo(e){let t=this.adaptiveDepthPeelingInfo;this.adaptiveDepthPeelingInfo=e,this.isAdaptivePeelingSettled()||this.requestRedrawGraph(),(t==null?void 0:t.peelLayers)!==e.peelLayers&&this.dispatch({type:"render"})}getAdaptiveDepthPeelingInfo(){return this.adaptiveDepthPeelingInfo}handleEvaluatorProgressUpdates(){this.checkSlowAnalysis=!0,this.requestedEvaluatorRestart=!1}clearSlowEvaluatorTracking(){this.expressionActionsToRestartIfSlow=[],this.checkSlowAnalysis=!1,this.requestedEvaluatorRestart=!1}handlePossiblySlowEvaluator(){if(!this.isEvaluatorSlow())return!1;let e=!1;return this.shouldRestartForSomeAction()?(this.requestEvaluatorRestart(),e=!0):this.checkSlowAnalysis&&(e=!0,this.checkSlowAnalysis=!1),e}shouldRestartForAction(e,t){switch(e){case"edit":case"remove":return this.isActivelyComputing(t);case"hide":return this.getEvaluatorStateForItem(t)==="GRAPHING";default:return e}}shouldRestartForSomeAction(){return this.expressionActionsToRestartIfSlow.some(({action:e,id:t})=>this.shouldRestartForAction(e,t))}isEvaluatorSlow(){return!this.requestedEvaluatorRestart&&this.evaluator.isCurrentlySlow()}requestEvaluatorRestart(){this.evaluator.requestRestartWorker(),this.clearSlowEvaluatorTracking(),this.requestedEvaluatorRestart=!0}shouldShowProgressUpdateLegend(){return this.getGraphSettings().config.debugProgressUpdates&&!this.progressUpdateLegendHidden}isItemSlowInEvaluator(e){return this.isActivelyComputing(e)&&this.isEvaluatorSlow()}isActivelyComputing(e){return __dcg_shared_module_exports__['ee'](this.getEvaluatorStateForItem(e))}trackActionForPotentialEvaluatorRestart(e,t){this.expressionActionsToRestartIfSlow.push({action:e,id:t})}shouldShowProgressUpdateColors(){return this.shouldShowProgressUpdateLegend()}shouldShowProgressUpdateIcons(){return this.getGraphSettings().config.debugProgressUpdates}isComplexModeEnabled(){return this.canEnableComplexMode()&&this.graphSettings.complex}canEnableComplexMode(){return this.graphSettings.config.allowComplex}areEvaluationCopyButtonsEnabled(){return this.graphSettings.config.showEvaluationCopyButtons}shouldShowSliderPrompt(e){let t=Ac(e);return t.length>0&&t.length<=4?!0:this.areSlidersEnabled()?gm(e).length>0:!1}shouldShowRegressionButton(e){return this.is3dProduct()||!this.areTableRegressionsEnabled()||e.type!=="table"||e.regression||e.columnModels.length<2?!1:Tc(e.columnModels[0])&&Pd(e.columnModels[0])&&e.columnModels.slice(1).some(t=>Tc(t)&&Pd(t))}renameTableColumnsForGlobalExport(e,t){let o=this.getExportedVariables();for(let i of t){let n=Kr(e,i);if(!n)continue;let a=n.latex;if(!Ji(a))continue;let s=__dcg_shared_module_exports__['ja'](a);if(o.isMultiplyDefined(s,{includeRegressionExports:!0})){let l=s.split("_")[0],c=o.getLastSubscriptForName(l,{includeRegressionExports:!0}),p=`${l}_{${c+1}}`;wl(this.listModel,a,p,{limitToItem:e.id}),o.optimisticallyRegisterColumnName(__dcg_shared_module_exports__['ja'](p))}}}exportTableRegression(e,t){var l,c;let o=this.getItemModel(t);if((o==null?void 0:o.type)!=="table")return;let i=o.regression;if(!i)return;let n="";if(e==="regression"){this.renameTableColumnsForGlobalExport(o,[i.columnIds.x,i.columnIds.y]);let p=Eq(o);if(!p)return;n=__dcg_shared_module_exports__['We'](i.type,{operator:"~",variables:p});let h=__dcg_shared_module_exports__['Ye'](n),g=yD(this.listModel),m;h.some(b=>g.isDefined(b,{includeRegressionExports:!1}))&&(m=1+Math.max(...h.map(b=>g.getLastSubscriptForName(b,{includeRegressionExports:!1})))),n=n.replace(__dcg_shared_module_exports__['Xe'],(b,x)=>m!==void 0?`${x}_{${m}}`:x)}else{let p=((c=(l=o.formula)==null?void 0:l.table_regression)==null?void 0:c.status)==="success"?o.formula.table_regression.result:void 0;if(!p)return;n=__dcg_shared_module_exports__['We'](i.type,{operator:"=",variables:["x","y"],parameterValues:NG(p)})}let a=this.createItemModel({type:"expression",id:this.generateId(),latex:qe.normalizeLatex(n,this.getMathquillConfig({})),color:this.getNextColor(),hidden:!1,folderId:o.folderId}),s=1+o.index;ki(this.listModel,a,s),this.setEditListMode(!1),Jr(this,a.id)}getExportedVariables(){return yD(this.listModel)}isInferenceWizardEnabled(){switch(this.getProduct()){case"graphing":case"graphing-3d":return this.areDistributionsEnabled();case"geometry-calculator":return!1}}isInferenceWizardInsertTarget(e){return this.wizardModel.getInsertItemId()===e}_addNewDistributionObject(e){let t=this.wizardModel.getInsertItemId();if(t===void 0)return;let o=this.getItemModel(t);(o==null?void 0:o.type)==="expression"&&(Ii(o,e),this.runAfterDispatch(()=>{Jr(this,o.id,"end"),this.evaluator.notifyWhenSynced(()=>{this._expressionZoomFit(t,{focusAfterTap:!1,synchronous:!1,justResiduals:!1})})}))}_addNewInferenceObject(){let e=this.wizardModel.getFullLatexForNewItem(),t=this.wizardModel.getInsertItemId(),o;if(t!==void 0){let i=this.getItemModel(t);(i==null?void 0:i.type)==="expression"&&(o=i)}o&&(Ii(o,e),this.runAfterDispatch(()=>{Jr(this,o.id,"end")}))}closeAddInferenceWizard(e=!1){var n;let t=this.wizardModel.getInsertItemId(),o=t?(n=this.getItemModel(t))==null?void 0:n.index:void 0,i=Su(this.listModel,o);this.wizardModel.closeWizard(),e&&(i?Jr(this,i.id,"end"):this.focusFirstExpression())}getLatexForInferenceItem(e,t){let o=this.getItemModel(t);if((o==null?void 0:o.type)!=="expression")return;let i=uo(o),n=Jn(o)||Kd(o)||Hd(o),a=Cl(o),s=on(o),l=n||s&&o.inference.significance.hypothesis===""?i==null?void 0:i.latex:`${i==null?void 0:i.latex}.\\operatorname{null}\\left(${o.inference.significance.hypothesis}\\right)`,c=o.inference.confidence.confidenceLevel===""?__dcg_shared_module_exports__['re']:o.inference.confidence.confidenceLevel,p=a?i==null?void 0:i.latex:`${i==null?void 0:i.latex}.\\operatorname{conf}\\left(${c}\\right)`;switch(e){case"t":case"z":case"chisquare":return`${l}.\\operatorname{score}`;case"p":return`${l}.p`;case"pleft":return`${l}.\\operatorname{pleft}`;case"pright":return`${l}.\\operatorname{pright}`;case"confidenceLower":return`${p}.\\operatorname{lower}`;case"confidenceUpper":return`${p}.\\operatorname{upper}`;case"dof":return n?`${l}.\\operatorname{dof}`:`${i==null?void 0:i.latex}.\\operatorname{dof}`;case"pointEstimate":return`${i==null?void 0:i.latex}.\\operatorname{estimate}`;case"standardError":return`${i==null?void 0:i.latex}.\\operatorname{stderr}`;default:throw new Error(`Unexpected item ${e}`)}}exportSignificanceDiagram(e){var g,m,b;let t=this.getItemModel(e);if((t==null?void 0:t.type)!=="expression")return;let o=Bu(t),i=this.getLatexForInferenceItem(o==="t"?"t":"z",e);if(!o||!i)return;let n=1+t.index,a={t:"t",z:"z",chisqtest:"X",chisqgof:"X"};if(on(t)){let x=this.getNextAssignmentIdForLetter(a[o]),E=this.createItemModel({latex:`${x}=${i}`,type:"expression",id:this.generateId(),folderId:t.folderId});ki(this.listModel,E,n),n++,i=x}let s=(b=(m=(g=this.getInferenceObjectData(e))==null?void 0:g.significance)==null?void 0:m.tails)!=null?b:"outer";(o==="chisqtest"||o==="chisqgof")&&(s="right");let l=o==="t"||o==="chisqtest"||o==="chisqgof"?this.getLatexForInferenceItem("dof",e):void 0,c=SW({inferenceType:o,dof:l}),p;switch(s){case"left":p={type:"expression",latex:c,cdf:{show:!0,bound1:i,bound2:`-${i}`,tails:"left"},folderId:t.folderId};break;case"right":p={type:"expression",latex:c,cdf:{show:!0,bound1:i,bound2:`-${i}`,tails:"right"},folderId:t.folderId};break;case"outer":p={type:"expression",latex:c,cdf:{show:!0,bound1:i,bound2:`-${i}`,tails:"outer"},folderId:t.folderId};break}let h=this.createItemModel({...p,id:this.generateId()});ki(this.listModel,h,n),this.setEditListMode(!1),Jr(this,h.id),this.runAfterDispatch(()=>{this.evaluator.notifyWhenSynced(()=>{this._expressionZoomFit(h.id,{focusAfterTap:!1,synchronous:!1,justResiduals:!1})})})}getNextAssignmentIdForLetter(e){let t=this.findLastSubscriptForLetters(),o=(t[e]||0)+1;return t[e]=o,`${e}_{${o}}`}exportInferenceItem(e,t){let o=this.getItemModel(t);if((o==null?void 0:o.type)!=="expression")return;if(uo(o)===void 0){let a="T";Cl(o)&&(a="I");let s=this.getNextAssignmentIdForLetter(a);Ii(o,`${s}=${o.latex}`)}if(e==="significanceDiagram")return this.exportSignificanceDiagram(t);if(e==="confidenceDiagram")throw new Error("TODO-stats");let n=this.createItemModel({type:"expression",id:this.generateId(),latex:this.getLatexForInferenceItem(e,t),folderId:o.folderId});ki(this.listModel,n,1+o.index),this.setEditListMode(!1),Jr(this,n.id)}getInferenceObjectData(e){let t=this.getItemModel(e);if((t==null?void 0:t.type)==="expression")return t.inference}updateInferenceParameters(e,t){let o=this.getItemModel(e);!o||o.type!=="expression"||q8(o,t)}getInferenceOutputErrorById(e,t){var c,p,h;let o=this.getItemModel(e);if(!o||o.type!=="expression")return;let i=on(o),n=Jn(o)||Cs(o),a=Cl(o);if(!i&&!n&&!a)return;let s=a?(c=o.formula)==null?void 0:c.error:void 0,l=n?(p=o.formula)==null?void 0:p.error:void 0;switch(t){case"confidenceLower":case"confidenceUpper":return s||this.inferenceInputValueHasError(e,"confidenceLevel")?{key:"graphing-calculator-error-inference-invalid-confidence"}:void 0;case"p":case"pleft":case"pright":case"z":case"t":case"chisquare":return l||!Cs(o)&&this.inferenceInputValueHasError(e,"hypothesis")?{key:"graphing-calculator-error-inference-invalid-hypothesis"}:void 0;case"dof":case"pointEstimate":case"standardError":return(h=o==null?void 0:o.formula)==null?void 0:h.error;default:throw new Error(`Unexpected outputItem: ${t}`)}}getInferenceOutputValueById(e,t){var h,g,m,b,x,E,S;let o=this.getItemModel(e);if(!o||o.type!=="expression")return;let i=on(o),n=Jn(o)||Hd(o)||Kd(o),a=Cl(o);if(!i&&!n&&!a)return;let s=a?(h=o==null?void 0:o.formula)==null?void 0:h.typed_constant_value:(g=o==null?void 0:o.formula)==null?void 0:g.confidence_value;(s==null?void 0:s.valueType)!==__dcg_shared_module_exports__['Za']&&(s=void 0);let l=n?(m=o==null?void 0:o.formula)==null?void 0:m.typed_constant_value:(b=o==null?void 0:o.formula)==null?void 0:b.significance_value,c=__dcg_shared_module_exports__['ub'](l==null?void 0:l.valueType,[__dcg_shared_module_exports__['hb'],__dcg_shared_module_exports__['ib'],__dcg_shared_module_exports__['gb'],__dcg_shared_module_exports__['fb']])?l:void 0,p=o==null?void 0:o.formula.typed_constant_value;switch(t){case"confidenceLower":return s?__dcg_shared_module_exports__['zb'](s,"min"):void 0;case"confidenceUpper":return s?__dcg_shared_module_exports__['zb'](s,"max"):void 0;case"p":return c?__dcg_shared_module_exports__['zb'](c,"p"):void 0;case"pleft":return c?__dcg_shared_module_exports__['zb'](c,"pleft"):void 0;case"pright":return c?__dcg_shared_module_exports__['zb'](c,"pright"):void 0;case"z":case"t":case"chisquare":case"score":return c?__dcg_shared_module_exports__['zb'](c,"score"):void 0;case"dof":if((p==null?void 0:p.valueType)===__dcg_shared_module_exports__['_a']||(p==null?void 0:p.valueType)===__dcg_shared_module_exports__['$a']||(p==null?void 0:p.valueType)===__dcg_shared_module_exports__['eb']||(p==null?void 0:p.valueType)===__dcg_shared_module_exports__['fb']||(p==null?void 0:p.valueType)===__dcg_shared_module_exports__['gb'])return __dcg_shared_module_exports__['zb'](p,"dof");let k=s!=null?s:c;return k?__dcg_shared_module_exports__['zb'](k,"dof"):void 0;case"pointEstimate":return(x=o==null?void 0:o.formula)==null?void 0:x.point_estimate_value;case"standardError":return((E=o==null?void 0:o.formula)==null?void 0:E.standard_error_value)!==void 0?(S=o==null?void 0:o.formula)==null?void 0:S.standard_error_value:s?__dcg_shared_module_exports__['zb'](s,"standardError"):void 0;default:throw new Error(`Unexpected outputItem: ${t}`)}}inferenceInputValueHasError(e,t){let o=this.getItemModel(e);if((o==null?void 0:o.type)!=="expression")return!0;if(!on(o))return!1;switch(t){case"hypothesis":return!o.formula.hypothesis_valid;case"confidenceLevel":{if(!o.formula.confidence_level_valid)return!0;let n=o.formula.confidence_level_value;return n===void 0||Array.isArray(n)||Number.isNaN(n)?!0:n<0||n>1}default:throw new Error(`Unhandled type ${t}`)}}shouldNarrateCoordinates(){return this.inAudioTraceMode()?!0:!this.getGraphSettings().config.reportPositionNone}};function NG(r){let e={};for(let[t,o]of Object.entries(r.parameters)){let i=yO(o),n=Math.max(i,r.displayPrecision);e[t]=parseFloat(o.toPrecision(n))}return e}function UX(r){return r&&{...r,wasCompleteSetState:void 0,layoutModel:void 0,settingsViewModel:void 0}}function Ame(r,e){return __dcg_shared_module_exports__['s'](UX(r),UX(e))}var{SwitchUnion:Lme,If:gA,IfDefined:VG,IfElse:Pme}=fA.Components,mA=class extends fA.View{init(){this.model=this.props.table(),this.controller=this.props.controller()}isDropdownOpen(){return this.controller.isTableRegressionsDropdownOpen(this.model.id)}customRegressionsEnabled(){return this.controller.getGraphSettings().config.customRegressions}template(){return VG(()=>this.getRegression(),e=>_("div",{class:()=>({"dcg-table-regression":!0,"dcg-do-not-blur":!0}),handleEvent:u("true"),onKeyDown:this.bindFn(this.handleKeyDown),children:[_("div",{class:()=>({"dcg-dropdown-row":!0,"dcg-dropdown-row__has-column-picker":this.shouldShowColumnDropdown()}),children:[_("div",{class:u("dcg-dropdown-row__plot-and-model"),children:[d("div",{class:u("dcg-icon-container"),children:Lme(()=>e().evaluated,"status",{error:t=>d(io,{instant:this.const(!0),error:()=>this.controller.unpack(t().error)}),success:()=>d("div",{class:u("dcg-circular-icon-container"),role:u("button"),tabIndex:u("0"),"dcg-open-menu-guid":()=>this.getGuid(),"aria-label":this.bindFn(this.getIconAriaLabel),onTap:t=>{if(!t.wasLongheld()){if(t.shiftKey||this.optionsOpen()||this.controller.isInEditListMode())return this.toggleOptions();this.setHidden(!e().spec.hidden)}},onLongHold:t=>{Dt(t,"dcg-longhold"),Dt(t,"dcg-tap"),this.toggleOptions()},manageFocus:this.const(_e({controller:this.controller,location:{type:"table-regression-icon",id:this.model.id}})),children:d(ho,{iconType:()=>e().spec.hidden?"hidden":"graph-default",backgroundColor:()=>{var t;return{type:"single-color",value:(t=e().spec.color)!=null?t:""}},whiteIcon:this.const(!1),foregroundColor:this.const(""),iconModifier:this.const("none"),backgroundOpacity:this.const(1)})})})}),d(Ch,{id:()=>`regression-model-${this.model.id}`,controller:()=>this.controller,options:()=>this.getModelOptions(),addBottomPaddingToDropdown:this.const(!0),onOpenChange:this.bindFn(this.onDropdownOpenChange),externalControl:this.const({getValue:()=>this.getRegressionType(),onValueChange:t=>{this.controller.dispatch({type:"update-table-regression",tableId:this.model.id,update:{type:t}})}}),manageFocus:this.const(_e({controller:this.controller,location:{type:"table-regression-type-dropdown",id:this.model.id}})),buildFooter:()=>this.customRegressionsEnabled()?d("div",{class:u("dcg-table-regression-view__custom-model-notice"),children:_(Eo,{i18n:this.const(this.controller),children:["Make a custom regression model in a new line using"," ",d("span",{class:u("dcg-tilde"),children:"~"}),"."," ",d("a",{class:u("dcg-blue-link"),href:u("https://help.desmos.com/hc/en-us/articles/4406972958733-Regressions"),target:u("_blank"),children:"Learn how"}),"."]},this.const("graphing-calculator-text-make-custom-regression"))}):[]})]}),_("div",{class:u("dcg-dropdown-row__breakable"),children:[d(gA,{predicate:()=>this.shouldShowColumnDropdown(),children:()=>d("div",{class:u("dcg-table-regression__dropdown-separator"),children:()=>this.controller.s("shared-calculator-label-for")})}),d(gA,{predicate:()=>this.shouldShowColumnDropdown(),children:()=>d("div",{class:u("dcg-dropdown-row__column-selector"),children:d(Ch,{id:()=>`regression-data-${this.model.id}`,addBottomPaddingToDropdown:this.const(!0),controller:()=>this.controller,options:()=>this.getColumnOptions(),onOpenChange:this.bindFn(this.onDropdownOpenChange),manageFocus:this.const(_e({controller:this.controller,location:{type:"table-regression-model-dropdown",id:this.model.id}})),externalControl:this.const({getValue:()=>`id-${e().spec.columnIds.y}`,onValueChange:t=>{this.controller.dispatch({type:"update-table-regression",tableId:this.model.id,update:{columnIds:{x:e().spec.columnIds.x,y:t.substring(3)}}})}})})})}),Pme(this.bindFn(this.customRegressionsEnabled),{true:()=>d(Ps,{anchor:()=>d(Re,{tooltip:()=>this.controller.s("graphing-calculator-text-view-regression-options"),children:d(Rl,{})}),anchorAriaLabel:()=>this.controller.s("graphing-calculator-text-view-regression-options"),controlled:()=>({isOpen:this.isDropdownOpen(),setDropdownOpen:this.bindFn(this.setDropdownOpen)}),guid:()=>`view-source-regression-${this.model.id}`,dropdownProps:this.const({position:this.const("bottom-left")}),dropdownOffset:()=>-15,focusTrapping:this.const({itemNavigationKey:"tab"}),manageFocus:this.const(_e({controller:this.controller,location:{type:"table-regression-view-source-popover",id:this.model.id}})),popoverBody:()=>_("div",{class:u("dcg-generic-options-menu"),children:[_("div",{class:u("dcg-options-menu-section"),children:[d("div",{class:u("dcg-expression-footer-title"),children:()=>this.controller.s("graphing-calculator-heading-table-regression-model-structure")}),d("div",{class:u("dcg-regression-model"),children:d(Xo,{controller:this.props.controller,latex:this.bindFn(this.buildLatexForRegressionModel),ariaLabel:()=>this.controller.s("graphing-calculator-heading-table-regression-model-structure"),focusLocation:this.const({type:"regression-output",id:this.model.id,parameter:"model"}),tabbable:this.const(!1)})}),VG(()=>this.getExportErrorReason(),t=>d("div",{class:u("dcg-regression-popover__unexportable-warning dcg-text-selectable"),children:d(Ir,{content:()=>this.controller.unpack(t()),controller:this.props.controller})}))]}),_("div",{class:u("dcg-options-menu-section"),children:[d(gA,{predicate:()=>!this.getExportErrorReason(),children:()=>d("button",{class:u("dcg-btn-light-gray dcg-regression-popover__export-to-list"),onTap:()=>this.copyToExpressionList("regression"),manageFocus:this.const(_e({controller:this.controller,location:{type:"table-regression-export-btn",id:this.model.id}})),children:()=>this.controller.s("graphing-calculator-button-copy-table-regression-model-to-expression-list")})}),d("button",{class:u("dcg-btn-red dcg-regression-popover__delete"),onTap:()=>{this.setDropdownOpen(!1),this.controller.dispatch({type:"remove-table-regression",tableId:this.model.id})},manageFocus:this.const(_e({controller:this.controller,location:{type:"table-regression-delete-btn",id:this.model.id}})),children:()=>this.controller.s("graphing-calculator-button-delete-table-regression")})]})]})}),false:()=>d("i",{class:u("dcg-icon-remove"),role:u("button"),tabIndex:u("0"),"aria-label":()=>this.controller.s("graphing-calculator-button-delete-table-regression"),onTap:()=>this.controller.dispatch({type:"remove-table-regression",tableId:this.model.id}),manageFocus:this.const(_e({controller:this.controller,location:{type:"table-regression-delete-btn",id:this.model.id}}))})})]})]}),d(gA,{predicate:()=>e().evaluated.status==="success",children:()=>_("div",{children:[_("div",{class:u("dcg-expression-footer-title dcg-expression-footer-title__equation"),children:[()=>this.controller.s("graphing-calculator-heading-regression-equation"),d(Re,{tooltip:()=>this.controller.s("graphing-calculator-text-export-snapshot"),children:d("button",{class:u("dcg-unstyled-button dcg-copy-regression-button"),onTap:()=>this.copyToExpressionList("equation"),"aria-label":()=>this.controller.s("graphing-calculator-text-export-snapshot"),manageFocus:this.const(_e({controller:this.controller,location:{type:"table-regression-copy-btn",id:this.model.id}})),children:d("i",{class:u("dcg-icon-insert"),"aria-hidden":u("true")})})})]}),d("div",{class:u("dcg-regression-equation dcg-do-not-blur"),onTap:this.bindFn(this.ensureTableSelected),didMount:this.bindFn(this.didMountRegressionEquation),didUnmount:this.bindFn(this.didUnmountRegressionEquation),children:d(Xo,{controller:this.props.controller,latex:this.bindFn(this.buildLatexForRegressionEquation),ariaLabel:()=>this.controller.s("graphing-calculator-narration-table-regression-equation"),focusLocation:this.const({type:"regression-output",id:this.model.id,parameter:"equation"}),tabbable:this.const(!0)})}),VG(()=>this.getRegressionDetails(),t=>d(of,{controller:()=>this.controller,model:()=>this.model,hideParameters:this.const(!0),regression:t,suppressRMSE:this.const(!0),suppressLogModeCheckbox:()=>!__dcg_shared_module_exports__['Ve'](this.getRegressionType()),showRValue:()=>this.getRegressionType()==="linear"?"always":"never"}))]})})]}))}getExportErrorReason(){let e=this.getRegression();if(e){if(e.evaluated.status==="error")return e.evaluated.error;if(e.evaluated.export_info.status==="unexportable")return e.evaluated.export_info.reason}}buildLatexForRegressionEquation(){let e=this.getRegression();return!e||e.evaluated.status!=="success"?"":__dcg_shared_module_exports__['We'](e.spec.type,{operator:"=",variables:["x","y"],parameterValues:NG(e.evaluated.result)})}buildLatexForRegressionModel(){let e=this.getRegression();return e?__dcg_shared_module_exports__['We'](e.spec.type,{operator:"~",variables:["x","y"],parameterValues:"canonical"}):""}didMountRegressionEquation(e){this.regEqNode=e}didUnmountRegressionEquation(){this.cachedRegEqLatex="",this.regEqNode=void 0}addLineBreaks(){if(!this.regEqNode)return;let e=this.buildLatexForRegressionEquation();e!==this.cachedRegEqLatex&&(this.cachedRegEqLatex=e,this.regEqNode.querySelectorAll(".dcg-mq-binary-operator").forEach(t=>{var o,i;t.textContent!=="+"&&t.textContent!=="\u2212"||(i=(o=t.parentNode)==null?void 0:o.classList)!=null&&i.contains("dcg-mq-root-block")&&t.classList.add("dcg-break-before")}))}didUpdate(){this.addLineBreaks()}onDropdownOpenChange(e){e&&this.controller.scrollItemIntoView(this.model)}getRegressionType(){var e,t;return(t=(e=this.getRegression())==null?void 0:e.spec.type)!=null?t:"linear"}ensureTableSelected(){let e=this.model.id;this.controller.isItemSelected(e)||this.controller.dispatch({type:"set-selected-id",id:e,state:"selected"})}getRegressionDetails(){var e,t;if(((t=(e=this.model.formula)==null?void 0:e.table_regression)==null?void 0:t.status)==="success")return this.model.formula.table_regression.result}hasAnyNonPositiveXValues(){let e=this.model.regression;if(!e)return!1;let t=Kr(this.model,e.columnIds.x);return((t==null?void 0:t.computedValues)||[]).some(o=>parseFloat(o)<=0)}getRegression(){var o;if(!this.controller.areTableRegressionsEnabled())return;let e=this.model.regression,t=(o=this.model.formula)==null?void 0:o.table_regression;if(e){let i=Kr(this.model,e.columnIds.x),n=Kr(this.model,e.columnIds.y);!i||!n||i.hasNanOrErrorValue||n.hasNanOrErrorValue?t={status:"error",error:__dcg_shared_module_exports__['Fb']().getError()}:e.type==="logarithmic"&&this.hasAnyNonPositiveXValues()&&(t={status:"error",error:__dcg_shared_module_exports__['Gb']().getError()})}return e&&t?{spec:e,evaluated:t}:void 0}shouldShowColumnDropdown(){return this.getColumnOptions().length>1}getColumnOptions(){let e=new Set,t=this.model.regression;return t&&(e.add(t.columnIds.x),e.add(t.columnIds.y)),this.model.columnModels.slice(1).filter(o=>e.has(o.id)||Tc(o)).map(o=>({label:"`"+o.latex+"`",id:"id-"+o.id,disabled:!Pd(o)||!Tc(o)}))}setDropdownOpen(e){let t=this.model.id;this.controller.dispatch({type:"set-table-regression-dropdown-open",tableId:t,open:e,regressionType:this.getRegressionType()})}getModelOptions(){return[{id:"linear",label:this.controller.s("graphing-calculator-label-table-regression-type-linear")},{id:"quadratic",label:this.controller.s("graphing-calculator-label-table-regression-type-quadratic")},{id:"cubic",label:this.controller.s("graphing-calculator-label-table-regression-type-cubic")},{id:"quartic",label:this.controller.s("graphing-calculator-label-table-regression-type-quartic")},{id:"exponential",label:this.controller.s("graphing-calculator-label-table-regression-type-exponential")},{id:"logarithmic",label:this.controller.s("graphing-calculator-label-table-regression-type-logarithmic")},{id:"power",label:this.controller.s("graphing-calculator-label-table-regression-type-power")},{id:"logistic",label:this.controller.s("graphing-calculator-label-table-regression-type-logistic")},{id:"sinusoidal",label:this.controller.s("graphing-calculator-label-table-regression-type-sinusoidal")}]}copyToExpressionList(e){this.setDropdownOpen(!1),this.controller.dispatch({type:"export-table-regression",tableId:this.model.id,mode:e,regressionType:this.getRegressionType()})}getGuid(){return`table-regression-${this.model.guid}`}toggleOptions(){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"table-regression",model:this.model,guid:this.getGuid(),focusFirstOption:!0}})}setHidden(e){this.controller.dispatch({type:"update-table-regression",tableId:this.model.id,update:{hidden:e}})}optionsOpen(){return this.controller.isItemSettingsMenuOpen(this.getGuid())}getIconAriaLabel(){var e;return this.optionsOpen()?this.controller.s("graphing-calculator-narration-hide-options"):(e=this.model.regression)!=null&&e.hidden?this.controller.s("graphing-calculator-narration-show-table-regression"):this.controller.s("graphing-calculator-narration-hide-table-regression")}handleKeyDown(e){let t=co(e);if(!e.altKey&&e.ctrlKey&&!e.metaKey&&e.shiftKey&&t==="O"){if(e.preventDefault(),e.stopPropagation(),this.controller.getOpenItemMenu()!==void 0)return;this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"table-regression",model:this.model,guid:this.getGuid(),focusFirstOption:!0}})}}};ce();ie();var vA=__dcg_shared_module_exports__['e'](se());Vt();ce();ie();var bA=__dcg_shared_module_exports__['e'](se());var{SwitchUnion:Dme,If:Ome}=bA.Components,Rw=class extends bA.View{init(){this.model=this.props.model(),this.controller=this.props.controller()}template(){return d("div",{class:()=>({"dcg-table-icon-container":this.typeOfIcon()!=="none"}),children:Dme(this.bindFn(this.typeOfIcon),{error:()=>d(io,{error:()=>this.controller.unpack(this.model.error)}),none:()=>d("span",{}),icon:()=>_("div",{"aria-hidden":()=>!this.shouldIconBeFocused(),class:u("dcg-circular-icon-container"),role:u("button"),tabIndex:u("0"),"aria-label":this.bindFn(this.getIconAriaLabel),handleEvent:u("true"),"dcg-open-menu-guid":()=>this.getMenuGUID(),onTap:e=>{if(!Or(e,"dragdrop")&&!e.wasLongheld()){if(this.myOptionsOpen())return this.toggleOptions();if(this.controller.isInEditListMode()||e.shiftKey)return this.toggleOptions();this.toggleGraphShown()}},onLongHold:e=>{Dt(e,"dcg-longhold"),Dt(e,"dcg-tap"),this.toggleOptions()},manageFocus:this.const(_e({controller:this.controller,location:{type:"table-icon",id:this.model.table.id,columnId:this.model.id}})),children:[d(ho,{iconType:this.bindFn(this.getIcon),backgroundColor:this.bindFn(this.getModelColor)}),d(Ome,{predicate:()=>this.model.disableGraphInteractions,children:()=>d("i",{class:u("dcg-graph-interaction-disabled dcg-icon-lock"),"aria-hidden":u("true")})})]})})})}getModelColor(){return Ay(this.model)}getMenuGUID(){return this.model.guid}myOptionsOpen(){return this.controller.isItemSettingsMenuOpen(this.getMenuGUID())}toggleOptions(){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"table-column",model:this.model,guid:this.getMenuGUID(),focusFirstOption:!1}})}toggleGraphShown(){this.controller.dispatch({type:"toggle-tablecolumn-hidden",tableId:this.model.table.id,columnId:this.model.id})}hasError(){return!!this.model.error}getIcon(){return this.model.shouldGraph?this.controller.isInEditListMode()?"none":this.model.points&&this.model.lines?"table-points-and-lines":this.model.points&&!this.model.lines?"table-points":!this.model.points&&this.model.lines?"table-lines":"none":"hidden"}typeOfIcon(){return this.model.latex===""||!this.controller.getGraphSettings().config.graphpaper?"none":this.model.error?"error":this.model.suppressIcon||this.model.index===0?"none":"icon"}getIconAriaLabel(){return this.myOptionsOpen()?this.controller.s("graphing-calculator-narration-hide-options"):this.controller.isInEditListMode()?this.controller.s("graphing-calculator-narration-show-options"):this.model.shouldGraph?this.controller.s("graphing-calculator-narration-hide-table-column"):this.controller.s("graphing-calculator-narration-show-table-column")}shouldIconBeFocused(){let e=this.controller.getFocusLocation();return __dcg_shared_module_exports__['s'](e,{type:"table-icon",id:this.model.table.id,columnId:this.model.id})}};var{If:yA,Switch:Rme}=vA.Components,xA=class extends vA.View{init(){this.columnModel=this.props.columnModel(),this.controller=this.props.controller(),this.table=this.columnModel.table,this.keyboardNavigationHelper=new Fl({wrapAtEdges:!0,getCellPosition:()=>this.lookupCellPosition(),controller:this.controller,getLastColumnIndex:()=>this.table.columnModels.length-1,getLastRowIndex:()=>Kn(this.table),setFocusLocation:e=>this.setFocusLocation(e),getColumnHeader:e=>{var t,o;return(t=this.table.columnModels[e])!=null&&t.latex?vs.StaticMath(document.createElement("span")).latex((o=this.table.columnModels[e])==null?void 0:o.latex).mathspeak():this.controller.s("graphing-calculator-narration-table-no-column-header")},isEditable:!0,isColumnDisabled:e=>Hg(this.table.columnModels[e]),removeRow:e=>Qz(this.table,e-1),removeColumn:e=>Iy(this.table,e)})}isRightSide(){return this.lookupCellPosition().column>=this.table.columnModels.length-1}isHeader(){return this.props.rowIdx()===0}template(){return _("td",{role:()=>this.isHeader()?"columnheader":void 0,class:()=>({"dcg-cell":!0,"dcg-table-header":this.isHeader(),"dcg-selected":this.shouldFocus(),"dcg-first-column":this.getColumnType()==="first","dcg-interior-column":this.getColumnType()==="interior","dcg-last-column":this.getColumnType()==="last","dcg-header-error":!!this.columnModel.error&&!!this.columnModel.latex&&this.isHeader(),"dcg-cell-error":this.hasCellError(),"dcg-leave-space-for-icon":this.leaveSpaceForIcon(),"dcg-non-editable":!!this.isDisabled(),"dcg-computed-cell":this.isComputed(),"dcg-interior-row":this.isInteriorRow()}),index:()=>this.columnModel.index,onTap:this.bindFn(this.exitEditListMode),children:[d(yA,{predicate:this.bindFn(this.showIcon),children:()=>d(Rw,{model:this.props.columnModel,controller:this.props.controller})}),d(yA,{predicate:this.bindFn(this.hasCellError),children:()=>d("span",{class:u("dcg-table-icon-error-container"),children:d(io,{error:this.bindFn(this.getCellErrorMessage),size:this.const("small")})})}),d(Rme,{children:e=>{switch(e){case!0:return d(ir,{latex:this.bindFn(this.getCellContent),isFocused:this.bindFn(this.shouldFocus),ariaLabel:()=>this.getAriaLabel("speech"),brailleAriaLabel:()=>this.getAriaLabel("braille"),selectOnFocus:this.const(!0),onKeydown:this.bindFn(this.handleKeydownOnBrailleInput),...Wr(this.props.controller()),noFadeout:this.const(!0),getAriaPostLabel:this.bindFn(this.getAriaPostLabel),hasError:this.const(!1),onUserPressedKey:this.bindFn(this.handleEditableMathquillKey),onUserChangedLatex:this.bindFn(this.handleLatexChanged),onFocusedChanged:this.bindFn(this.handleMQFocusedChanged)});case!1:return d(Xo,{controller:()=>this.controller,latex:this.bindFn(this.getCellContent),ariaLabel:()=>this.getAriaLabel("speech"),brailleAriaLabel:()=>this.getAriaLabel("braille"),onKeypress:t=>this.handleKeyboardNavigation(t),suppressBlurEvent:t=>this.isNodeWithinTableCell(t.relatedTarget),tabbable:this.bindFn(this.isTabbable),focusLocation:()=>({type:"table",id:this.table.id,location:this.lookupCellPosition()})})}}},this.bindFn(this.isEditable)),d(yA,{predicate:this.bindFn(this.hasDragIcon),children:()=>d("span",{class:u("dcg-drag-icon"),"dcg-drag-mode":()=>this.columnModel.dragMode,style:()=>({color:this.columnModel.color}),children:d("i",{class:()=>({"dcg-icon-move":this.columnModel.dragMode===__dcg_shared_module_exports__['hd'].XY,"dcg-icon-move-horizontal":this.columnModel.dragMode===__dcg_shared_module_exports__['hd'].X,"dcg-icon-move-vertical":this.columnModel.dragMode===__dcg_shared_module_exports__['hd'].Y}),"aria-hidden":u("true")})})}),d(yA,{predicate:()=>this.isRightSide(),children:()=>d("span",{class:u("dcg-fade-right")})})]})}isEditable(){return this.controller.isInEditListMode()||this.controller.isItemReadonly(this.table.id)?!1:this.isHeader()?!0:!(this.columnModel===this.table.columnModels[this.table.columnModels.length-1]||this.isDisabled())}isTabbable(){return!(this.controller.isInEditListMode()||this.columnModel===this.table.columnModels[this.table.columnModels.length-1])}getCellContent(){if(this.isHeader())return this.columnModel.latex||"";let e=this.props.rowIdx()-1,t=this.columnModel.index;return O0(this.table,e,t)}getPackedCellError(){return this.isHeader()?"":this.columnModel.packedErrors[this.props.rowIdx()-1]}getCellErrorMessage(){let e=this.getPackedCellError();return e?this.controller.unpack(e):""}hasCellError(){return!!this.getPackedCellError()}showIcon(){return!this.isHeader()||this.isRightSide()?!1:!this.controller.is3dProduct()||!!this.columnModel.error}isDisabled(){return Hg(this.columnModel)&&!this.isHeader()}isComputed(){return Sq(this.columnModel)&&!this.isHeader()}isInteriorRow(){return this.isHeader()?!1:this.lookupCellPosition().row!==Kn(this.table)}exitEditListMode(e){this.controller.isInEditListMode()&&e.target.closest(".dcg-math-field")&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}})}getColumnType(){let e=this.lookupCellPosition().column;return e===0?"first":e===this.table.columnModels.length-1?"last":"interior"}hasDragIcon(){return this.isHeader()?this.columnModel.dragMode!==__dcg_shared_module_exports__['hd'].NONE&&!this.columnModel.error:!1}leaveSpaceForIcon(){if(this.columnModel.error||this.controller.is3dProduct()||this.columnModel.suppressIcon)return!1;let{column:e}=this.lookupCellPosition(),t=Ey(this.table);return e>0&&e<t-1}handleFocusedChanged(e,t){e?this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}}):this.isNodeWithinTableCell(t.relatedTarget)||this.controller.dispatch({type:"blur-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}})}lookupCellPosition(){return{row:this.props.rowIdx(),column:this.columnModel.index}}getAriaLabel(e){let t=this.lookupCellPosition();if(!this.isHeader()){if(e==="speech"&&this.isComputed())return this.controller.s("graphing-calculator-narration-computed-cell-role-description");if(e==="braille"){let o=t.row,i=t.column+1;return this.controller.raw("r__row__c__column__",{row:o.toString(),column:i.toString()})}}return e==="speech"?" ":this.controller.raw("h__column__",{column:t.column+1})}getAriaPostLabel(){if(!this.isHeader())return"";let e="",t=this.columnModel;return t.shouldGraph&&(t.points||t.lines)&&!wq(t)&&(e=this.controller.s("graphing-calculator-narration-expression-evaluation-has-graph"),lo?e+=" "+this.controller.s("graphing-calculator-narration-expression-audio-trace-mac"):e+=" "+this.controller.s("graphing-calculator-narration-expression-audio-trace-windows")),e}handleHotkeyEvent(e){return this.keyboardNavigationHelper.handleHotKey(e)}handleEditableMathquillKey(e,t){if(t&&this.handleHotkeyEvent(t))return;let o=qe.getFocusedMathquill();o&&e&&(qe.handleKeystrokeAndDecideIfSpecialEvent(o,e,t)||e===ri?this.handleKeyboardNavigation(t,e):this.handleLatexChanged(o.latex()))}handleKeydownOnBrailleInput(e){if(this.handleHotkeyEvent(e))return;let t=Pe(e);if(!t)return;t===ri&&Rr();let o=t==="Enter"||t==="Up"||t==="Down",i=Qn(),n=i&&t==="Left"&&i.selectionStart===0||t==="Right"&&i.selectionStart===i.value.length;(o||n||(t==="Del"||t==="Backspace")&&this.getCellContent().length===0)&&this.handleKeyboardNavigation(e)}handleKeyboardNavigation(e,t){if(!t&&!e)return;t||(t=Pe(e));let{row:o,column:i}=this.lookupCellPosition(),n=Kn(this.table)-1;if(t==="Enter"){if(o===n+1)return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});let a=Hg(this.table.columnModels[0]);if(i>0||a)return this.keyboardNavigationHelper.handleKeyPress("Down",e);if(o===n){let s=eq(this.table,o);FP(this.table,o);for(let l=0;l<s.length;l++)Ld(this.table,{row:o+1,column:l},s[l])}else FP(this.table,o);return this.setFocusLocation({row:o+1,column:i})}return this.keyboardNavigationHelper.handleKeyPress(t,e)}handleLatexChanged(e){this.getCellContent()!==e&&this.controller.dispatch({type:"set-tablecell-latex",tableId:this.table.id,cell:this.lookupCellPosition(),latex:e})}shouldFocus(){return!this.controller.isInEditListMode()&&__dcg_shared_module_exports__['s'](this.lookupCellPosition(),Ss(this.table))}setFocusLocation(e){this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:e}})}isNodeWithinTableCell(e){if(!e||!e.closest(".dcg-cell"))return!1;let t=this.controller.getItemRootNodeById(this.table.id);return t?re.contains(t,e):!1}handleMQFocusedChanged(e,t){e?this.setFocusLocation(this.lookupCellPosition()):this.isNodeWithinTableCell(t.relatedTarget)||this.controller.dispatch({type:"blur-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}})}};var{For:qX}=HX.Components,Fw=class extends Cn{didMountRoot(e){this.onItemViewMounted(e),this.didMountContainer(e)}willUnmount(){this.onItemViewUnmounted()}template(){return _("div",{class:()=>({"dcg-expressionitem":!0,"dcg-highlighted-expressionitem":this.controller.shouldAddExpressionHighlightedClass(this.id),"dcg-expressiontable":!0,"dcg-readonly":this.controller.isItemReadonly(this.id),"dcg-inFolder":!!this.model.folderId,"dcg-selected":!!this.controller.isItemSelected(this.id),"dcg-dragging":!!this.controller.isItemBeingDragged(this.id),"dcg-faded-h":this.shouldFadeLastColumn(),"dcg-faded-v":this.shouldFadeLastRow()}),"expr-id":()=>this.model.id,didMount:this.bindFn(this.didMountRoot),children:[_("div",{class:u("dcg-fade-container dcg-disable-horizontal-scroll-to-cursor"),children:[_("div",{class:u("dcg-main"),children:[d("div",{class:u("dcg-table-container"),tabIndex:()=>this.controller.isInEditListMode()?0:-1,"aria-label":()=>this.controller.getBrailleMode()==="none"?this.controller.s("graphing-calculator-narration-expression-index-table",{index:this.model.displayIndex}):this.controller.s("graphing-calculator-narration-expression-index-table",{index:this.model.displayIndex}),didMount:this.bindFn(this.didMountContainer),manageFocus:this.const({shouldBeFocused:this.shouldBeFocused.bind(this),onFocusedChanged:this.onFocusedChanged.bind(this)}),children:d("div",{class:u("dcg-table-sliding-container"),style:()=>({transform:`translateX(${this.computeScrolledX()}px)`}),children:d("table",{role:u("grid"),class:u("dcg-tabledata"),style:()=>({"--dcg-column-count":`${this.model.columnModels.length}`}),children:d(qX,{each:()=>this.getVisibleRows(),children:e=>{let t=e();if(t.type==="show-more")return d("tr",{class:u("dcg-show-more-row"),children:_("div",{class:u("dcg-show-more-row-interior dcg-do-not-blur"),children:[this.bindFn(this.missingRowMessage),d("button",{class:u("dcg-show-more dcg-blue-link dcg-unstyled-button"),onTap:()=>this.controller.dispatch({type:"table-show-more-rows",id:this.id}),children:()=>this.controller.s("graphing-calculator-button-show-all-table-rows")})]})});if(t.type==="spacer-row")return d("tr",{class:u("dcg-row"),children:d("td",{class:u("dcg-blank-row"),style:()=>({height:(t.endIdx-t.startIdx+1)*this.getRowHeight()+"px"})})});{let o=t.type==="header"?0:t.index;return d("tr",{"aria-rowindex":()=>o,class:u("dcg-row"),children:d(qX,{each:()=>this.model.columnModels,children:i=>d(xA,{controller:this.props.controller,columnModel:i,rowIdx:()=>o})},i=>i.guid)})}}},e=>this.getRowGUID(e))})})}),d(mA,{controller:this.props.controller,table:this.props.model})]}),d(ns,{controller:this.props.controller,model:this.props.model})]}),_("span",{class:u("dcg-tab dcg-action-drag"),handleEvent:u("true"),tapboundary:u("true"),disablescroll:u("true"),onTapStart:this.bindFn(this.onDragPending),children:[d("span",{class:u("dcg-num"),children:()=>this.model.displayIndex}),d("div",{class:u("dcg-tab-interior")}),d(eA,{model:this.props.model,controller:this.props.controller}),d(sf,{model:this.props.model,controller:this.props.controller})]}),d(rs,{controller:this.props.controller,id:()=>this.model.id})]})}getRowGUID(e){switch(e.type){case"header":return"header";case"show-more":return"show-more";case"spacer-row":return`spacer-${e.startIdx}-${e.endIdx}`;case"standard-row":return`row-${e.index}`}}getRowHeight(){return this.controller.getGraphSettings().config.projectorMode?38:33}getVisibleRows(){var g,m,b;let e=[{type:"header"}],t=Kn(this.model)+1;if(t<=25){for(let x=1;x<t;x++)e.push({type:"standard-row",index:x});return e}let o=hu(this.model);if(o!==void 0){for(let x=1;x<o.min;x++)e.push({type:"standard-row",index:x});e.push({type:"show-more"});for(let x=o.max;x<t;x++)e.push({type:"standard-row",index:x});return e}let i=Ih(this.controller),n=i?i.height:0,a=re(this.node).offset(),s=(a?a.top:0)-(i?i.top:0),l=(b=(m=(g=this.node)==null?void 0:g.querySelector(".dcg-cell"))==null?void 0:m.getBoundingClientRect().height)!=null?b:0,c=this.getRowHeight();if(n/c>t){for(let x=1;x<t;x++)e.push({type:"standard-row",index:x});return e}let p=(-s-l)/c,h=(n-s)/c;for(let x=1;x<t;x++){let E=Ss(this.model);if(x===t-2||E&&E.row===x)e.push({type:"standard-row",index:x});else if(x>h||x<p){let S=e[e.length-1];S&&S.type==="spacer-row"?S.endIdx=x:e.push({type:"spacer-row",startIdx:x,endIdx:x})}else e.push({type:"standard-row",index:x})}return e}missingRowMessage(){let e=hu(this.model);return e===void 0?"":this.controller.s("graphing-calculator-text-table-more-rows",{rowCount:__dcg_shared_module_exports__['pa'](e.max-e.min)})}didMountContainer(e){this.node=e,re(e).on("scroll",()=>e.scrollLeft=0)}getSelectedCell(){return Ss(this.model)}computeScrolledX(){if(!this.getSelectedCell()||!this.node)return 0;let e=this.node.children[0],t=this.node.querySelector(".dcg-selected");if(e===null||t===null)return 0;let o=this.node.getBoundingClientRect(),i=t.getBoundingClientRect(),n=i.left-e.getBoundingClientRect().left,a=o.width-n-i.width-30,s=Math.min(0,o.width-e.scrollWidth-30);return a=Math.max(a,s),Math.min(0,a)}shouldFadeLastRow(){return kq(this.model)&&!this.isBottomFocused()}shouldFadeLastColumn(){return!this.isRightFocused()}isBottomFocused(){let e=this.getSelectedCell();return!!e&&e.row===Kn(this.model)}isRightFocused(){let e=this.getSelectedCell();return!!e&&e.column===this.model.columnModels.length-1}focusHelperOptions(){return{controller:this.controller,location:{type:"table-container",id:this.model.id}}}shouldBeFocused(){return Wm(this.focusHelperOptions())}onFocusedChanged(e){if(this.controller.isInEditListMode())return yx(this.focusHelperOptions(),e)}};ce();ie();var Gw=class extends Cn{didMountRoot(e){this.onItemViewMounted(e)}willUnmount(){this.onItemViewUnmounted()}template(){return _("div",{class:()=>({"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-highlighted-expressionitem":this.controller.shouldAddExpressionHighlightedClass(this.id),"dcg-readonly":this.controller.isItemReadonly(this.id),"dcg-expressiontext":!0,"dcg-inFolder":!!this.model.folderId,"dcg-selected":!!this.controller.isItemSelected(this.id),"dcg-dragging":!!this.controller.isItemBeingDragged(this.id)}),"expr-id":()=>this.model.id,onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect),didMount:this.bindFn(this.didMountRoot),children:[_("div",{class:u("dcg-fade-container"),children:[d("div",{class:u("dcg-main"),children:d(nd,{isFocused:this.bindFn(this.isFocused),text:()=>this.model.text,showLinks:()=>this.controller.areLinksEnabled(),onInput:this.bindFn(this.onInput),onFocusChange:this.bindFn(this.onFocusChange),onSpecialKey:this.bindFn(this.onSpecialKey),readonly:()=>this.controller.isInEditListMode()||this.controller.isItemReadonly(this.id),readonlyAction:this.const({predicate:()=>this.controller.isInEditListMode(),action:()=>this.exitEditListMode()}),ariaLabel:()=>Ar(this.model,"edit_title"),placeholder:()=>this.controller.s("graphing-calculator-text-note-placeholder")})}),d(ns,{controller:this.props.controller,model:this.props.model})]}),_("span",{class:u("dcg-tab dcg-action-drag"),handleEvent:u("true"),tapboundary:u("true"),disablescroll:u("true"),onTapStart:this.bindFn(this.onDragPending),children:[d("span",{class:u("dcg-num"),children:()=>this.model.displayIndex}),d("div",{class:u("dcg-tab-interior")}),d("i",{class:u("dcg-icon-text"),"aria-hidden":u("true")})]}),d(rs,{controller:this.props.controller,id:()=>this.model.id})]})}onInput(e){this.controller.dispatch({type:"set-note-text",id:this.id,text:e})}onFocusChange(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"text",id:this.id}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"text",id:this.id}})}onSpecialKey(e){return this.controller.dispatch({type:"on-special-key-pressed",key:e})}isFocused(){let e=this.controller.getFocusLocation();return!(!e||e.type!=="text"||e.id!==this.id)}};ce();ie();var SA=__dcg_shared_module_exports__['e'](se());var{If:KX,IfDefined:Fme}=SA.Components,wA=class extends SA.View{init(){this.controller=this.props.controller()}template(){return _("div",{class:()=>({"dcg-ticker":!0,"dcg-expressions-scrolled":this.props.expsScrolled()}),children:[_("div",{class:u("dcg-ticker-settings-container"),children:[_("div",{class:u("dcg-ticker-settings-internal"),children:[_("div",{class:u("dcg-editable-mathquill-container dcg-action-definition"),children:[d("span",{class:u("dcg-ticker-label"),children:()=>this.controller.raw("Run")}),d(ir,{latex:()=>this.getHandlerLatex(),ariaLabel:()=>this.controller.s("graphing-calculator-narration-tick-action"),isFocused:()=>this.getFocusedInput()==="handler",onKeydown:e=>this.handlePressedKey("handler",e.key,e),...Wr(this.controller,{additionalOperators:["dt"]}),hasError:()=>!!this.getHandlerErrorString(),getAriaPostLabel:()=>{let e=this.getHandlerErrorString();return e?this.controller.unpack(e):""},onUserChangedLatex:this.bindFn(this.dispatchHandlerLatexIfChanged),onFocusedChanged:e=>this.handleFocusedChanged("handler",e),selectOnFocus:this.const(!0),noFadeout:this.const(!0),onUserPressedKey:(e,t)=>{this.handlePressedKey("handler",e,t)}}),Fme(()=>this.getHandlerErrorString(),e=>d("span",{class:u("dcg-clickable-info-error-container"),children:d(io,{error:()=>this.controller.unpack(e()),size:this.const("small")})}))]}),_("div",{class:u("dcg-editable-mathquill-container dcg-action-frequency"),children:[d("span",{class:u("dcg-ticker-label"),children:()=>this.controller.raw("every")}),d(ir,{latex:()=>this.getMinStepLatex(),ariaLabel:()=>this.controller.s("graphing-calculator-label-ticker-min-step"),onKeydown:e=>this.handlePressedKey("minstep",e.key,e),...Wr(this.controller),hasError:()=>!!this.getMinStepErrorString(),getAriaPostLabel:()=>{let e=this.getMinStepErrorString();return e?this.controller.unpack(e):""},onUserChangedLatex:this.bindFn(this.dispatchMinStepLatexIfChanged),isFocused:()=>this.getFocusedInput()==="minstep",onFocusedChanged:e=>this.handleFocusedChanged("minstep",e),selectOnFocus:this.const(!0),placeholder:this.const("0"),noFadeout:this.const(!0),onUserPressedKey:(e,t)=>{this.handlePressedKey("minstep",e,t)}}),()=>this.controller.raw("ms"),d(Re,{tooltip:()=>this.controller.s("graphing-calculator-label-ticker-help-tooltip"),gravity:this.const("s"),children:d("a",{"aria-label":()=>this.controller.s("graphing-calculator-label-ticker-help-tooltip"),class:u("dcg-ticker-toggle-help"),target:u("_blank"),href:u("https://help.desmos.com/hc/en-us/articles/4407725009165#h_01FB2RZQRYM62C3EB94H2TRRAX"),children:d("i",{class:u("dcg-icon-question-sign"),"aria-hidden":u("true")})})})]}),d(KX,{predicate:this.bindFn(this.shouldShowSliderPrompt),children:()=>d(_n,{model:()=>this.props.controller().getTicker(),controller:this.props.controller})})]}),_("div",{class:()=>({"dcg-circular-icon-container":!0,"dcg-disabled":this.iconDisabled()}),"aria-label":this.bindFn(this.getIconAriaLabel),role:u("button"),tabIndex:()=>this.iconDisabled()?-1:0,"aria-disabled":this.bindFn(this.iconDisabled),"aria-pressed":()=>this.controller.getTickerPlaying()&&!this.iconDisabled(),onTap:this.bindFn(this.toggleTicker),onTapStart:()=>{Rr()},children:[d(ho,{iconType:this.const("metronome")}),d("div",{class:()=>({"dcg-metronome-bar":!0,"dcg-metronome-playing":this.controller.getTickerPlaying()&&!this.iconDisabled()})}),d(KX,{predicate:()=>!this.iconDisabled(),children:()=>d("div",{class:u("dcg-mini-play-pause"),children:d(ho,{iconType:this.bindFn(this.getPlayIcon)})})})]})]}),d("i",{onTap:this.bindFn(this.closeTicker),tabIndex:()=>this.controller.isInEditListMode()?0:-1,"aria-label":()=>this.controller.s("graphing-calculator-label-ticker-close"),role:u("link"),class:u("dcg-icon-remove dcg-do-not-blur")})]})}iconDisabled(){return!!(this.getMinStepErrorString()||this.getHandlerErrorString()||!this.isHandlerMaybeValid())}isHandlerMaybeValid(){var t;return((t=this.controller.getTicker().formula)==null?void 0:t.handler.status)==="maybe-valid"}closeTicker(){this.controller.dispatch({type:"close-ticker"})}toggleTicker(){this.iconDisabled()||this.controller.dispatch({type:"toggle-ticker"})}getPlayIcon(){return this.controller.getTickerPlaying()?"pause":"play"}getIconAriaLabel(){return this.controller.getTickerPlaying()?this.controller.s("graphing-calculator-label-ticker-pause"):this.controller.s("graphing-calculator-label-ticker-play")}getFocusedInput(){let e=this.controller.getFocusLocation();if(!(!e||e.type!=="ticker"))return e.location}handlePressedKey(e,t,o){let i=qe.getFocusedMathquill();if(i){if(t==="PageUp"||t==="PageDown")return o==null||o.preventDefault(),o==null||o.stopPropagation(),this.controller.dispatch({type:"on-special-key-pressed",key:t});if(t==="Enter"&&this.shouldShowSliderPrompt()&&this.controller.dispatch({type:"create-sliders-for-ticker",variables:zy(this.props.controller().getTicker())}),t==="Esc"&&this.controller.getExpressionSearchOpen()&&this.controller.dispatch({type:"close-expression-search"}),t==="Right"&&e==="handler"||t==="Left"&&e==="minstep"||t==="Down"||t==="Up"){if(!qe.applyArrowKeyAndReturnIfWasAtBounds(i,t,o))return;if(t==="Down"||t==="Up")return this.controller.dispatch({type:"on-special-key-pressed",key:t});if(t==="Right"){this.handleFocusedChanged("minstep",!0);return}else if(t==="Left"){this.handleFocusedChanged("handler",!0);return}}i.keystroke(t,o),e==="handler"?this.dispatchHandlerLatexIfChanged(i.latex()):e==="minstep"&&this.dispatchMinStepLatexIfChanged(i.latex())}}handleFocusedChanged(e,t){t?this.controller.dispatch({type:"set-focus-location",location:{type:"ticker",location:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"ticker",location:e}})}dispatchHandlerLatexIfChanged(e){this.getHandlerLatex()!==e&&this.controller.dispatch({type:"update-ticker-handlerlatex",latex:e})}dispatchMinStepLatexIfChanged(e){this.getMinStepLatex()!==e&&this.controller.dispatch({type:"update-ticker-minsteplatex",latex:e})}getHandlerLatex(){return this.controller.getTickerHandlerLatex()}getMinStepLatex(){return this.controller.getTickerMinStepLatex()}getHandlerErrorString(){return this.getHandlerLatex()?X4(this.controller.getTicker()):void 0}getMinStepErrorString(){return J4(this.controller.getTicker())}shouldShowSliderPrompt(){return this.controller.areSlidersEnabled()?zy(this.controller.getTicker()).length>0:!1}};var{If:sa,IfDefined:pb,For:Gme,Show:WX,Switch:BG,SwitchUnion:Nme,IfElse:Vme}=TA.Components,Nw=class extends TA.View{constructor(){super(...arguments),this.guid=__dcg_shared_module_exports__['E']("listView")}init(){this.controller=this.props.controller()}template(){return _("div",{didMount:this.bindFn(this.didMountContainer),class:u("dcg-exppanel-outer__wrapper"),children:[_("div",{class:u("dcg-exppanel-outer"),onDrop:this.bindFn(this.onDrop),style:()=>this.computeExppanelOuterStyle(),children:[d(sa,{predicate:()=>this.controller.isFileDraggedOver(),children:()=>d("div",{class:u("dcg-drop-image"),children:d("span",{children:()=>this.controller.s("graphing-calculator-label-drop-image-here")})})}),_("div",{class:()=>{var e;return{"dcg-exppanel-container":!0,"dcg-add-shadow":this.controller.shouldRenderList(),"dcg-global-mute-on":!!((e=this.controller.toneController)!=null&&e.isGlobalMuted())}},style:()=>({transform:this.controller.isListVisible()?void 0:this.controller.isNarrow()?"translate(0, 100%)":"translate(-100%, 0)"}),children:[d(sa,{predicate:()=>this.controller.shouldRenderList(),children:()=>d(Xv,{controller:this.props.controller,expsScrolled:()=>!!this.exppanel&&this.exppanel.scrollTop>0})}),d(sa,{predicate:()=>this.controller.getExpressionSearchOpen(),children:()=>d(LM,{controller:this.props.controller,expsScrolled:()=>!!this.exppanel&&this.exppanel.scrollTop>0})}),d(sa,{predicate:()=>this.controller.getTickerVisible(),children:()=>d(wA,{controller:this.props.controller,expsScrolled:()=>!!this.exppanel&&this.exppanel.scrollTop>0})}),d(sa,{predicate:()=>this.controller.shouldRenderList(),children:()=>d("div",{class:()=>({"dcg-exppanel":!0,"dcg-disable-horizontal-scroll-to-cursor":!0,"dcg-isDragging":this.controller.isDragDropActive(),"dcg-has-background-color":this.controller.hasBackgroundColor(),"dcg-edit-list-mode":this.controller.isInEditListMode()}),onPaste:this.bindFn(this.onPaste),onCopy:this.bindFn(this.onCopy),onCut:this.bindFn(this.onCut),onTapStart:this.bindFn(this.onExppanelTapstart),didMount:this.bindFn(this.didMountExppanel),children:_("div",{class:u("dcg-expressionlist"),role:u("region"),"aria-label":()=>this.controller.s("shared-calculator-narration-expression-list"),children:[d(sa,{predicate:()=>this.controller.getShowConstructionsOpen(),children:()=>d(GM,{controller:this.props.controller,onDragPending:(e,t)=>this.onDragPending(e,t)})}),_("span",{class:u("dcg-template-expressioneach"),children:[d(sa,{predicate:()=>this.controller.shouldShowProgressUpdateLegend(),children:()=>d(iw,{controller:()=>this.props.controller()})}),d(Gme,{each:()=>this.controller.getAllItemModels(),children:e=>Nme(()=>_q(e()),{shell:()=>this.makeShellViewForModel(e()),render:()=>this.makeViewForModel(e()),none:()=>{}})},e=>e.guid)]}),d(ow,{controller:()=>this.props.controller()}),d(BG,{children:e=>{if(e){let t=this.controller.getItemModel(e);return d(Wv,{controller:this.props.controller,children:this.makeDragCopyViewForModel(t)})}else return}},()=>this.controller.getDraggedItemId()),d("span",{style:u("flex:1")}),pb(()=>this.controller.getShellView("notice"),e=>d(sa,{predicate:()=>!this.controller.isKeypadOpen(),children:()=>{let t=e();return d(t,{})}})),d(sa,{predicate:()=>!this.controller.isKeypadOpen(),children:()=>d("div",{class:u("dcg-expressions-branding"),children:Vme(()=>this.controller.canEditOnWeb(),{true:()=>_("span",{role:u("link"),tabIndex:u(0),class:u("dcg-edit-branding"),onTap:()=>this.controller.dispatch({type:"open-on-web"}),children:[d("div",{class:u("dcg-powered-by"),"aria-label":()=>this.controller.s("graphing-calculator-narration-edit-graph-on-desmos"),children:()=>this.controller.s("graphing-calculator-button-edit-graph-on-desmos-logo")}),d("i",{class:u("dcg-icon-desmos"),"aria-hidden":u("true")})]}),false:()=>_("div",{children:[d("div",{class:u("dcg-powered-by"),"aria-label":()=>this.controller.s("graphing-calculator-narration-powered-by-desmos"),children:()=>this.controller.s("graphing-calculator-label-powered-by")}),d("i",{class:u("dcg-icon-desmos"),"aria-hidden":u("true")})]})})})})]})})})]}),d(IM,{controller:this.props.controller})]}),d(sa,{predicate:()=>this.isOptionsViewOpen("expression"),children:()=>d(An,{menuType:this.const("expression"),menuButtonFocusLocation:()=>{let e=this.getActiveExpressionModelForOptionsView();return e?{type:"expression-icon",id:e.id}:void 0},...this.getSharedDropdownWrapperProps(),children:pb(this.bindFn(this.getActiveExpressionModelForOptionsView),e=>d(gf,{controller:this.props.controller,model:e}))})}),d(sa,{predicate:()=>this.isOptionsViewOpen("image"),children:()=>d(An,{menuType:this.const("image"),menuButtonFocusLocation:()=>{let e=this.getActiveImageModelForOptionsView();return e?{type:"image-icon",id:e.id}:void 0},...this.getSharedDropdownWrapperProps(),children:pb(this.bindFn(this.getActiveImageModelForOptionsView),e=>d(BM,{controller:this.props.controller,model:e}))})}),d(sa,{predicate:()=>this.isOptionsViewOpen("slider"),children:()=>d(An,{menuType:this.const("slider"),menuButtonFocusLocation:()=>{let e=this.getActiveSliderModelForOptionsView();return e?{type:"slider-icon",id:e.id}:void 0},...this.getSharedDropdownWrapperProps(),children:pb(this.bindFn(this.getActiveSliderModelForOptionsView),e=>d(QM,{controller:this.props.controller,model:e}))})}),d(sa,{predicate:()=>this.isOptionsViewOpen("table-column"),children:()=>d(An,{menuType:this.const("table-column"),menuButtonFocusLocation:()=>{let e=this.getActiveColumnModelForOptionsView();return e?{type:"table-icon",id:e.table.id,columnId:e.id}:void 0},...this.getSharedDropdownWrapperProps(),children:pb(this.bindFn(this.getActiveColumnModelForOptionsView),e=>d(_M,{controller:this.props.controller,model:e}))})}),d(sa,{predicate:()=>this.isOptionsViewOpen("table-regression"),children:()=>d(An,{menuType:this.const("table-regression"),menuButtonFocusLocation:()=>{let e=this.getActiveTableModelForOptionsView();return e?{type:"table-regression-icon",id:e.id}:void 0},...this.getSharedDropdownWrapperProps(),children:pb(this.bindFn(this.getActiveTableModelForOptionsView),e=>d(AM,{controller:this.props.controller,model:e}))})}),d(WX,{when:()=>this.controller.wizardModel.isWizardOpen(),children:d(JM,{controller:this.props.controller})}),d(BG,{children:()=>d(WX,{when:()=>{var e;return(e=this.controller.getOpenPopoverGuid())==null?void 0:e.startsWith("chi-square-table")},children:d(qM,{controller:this.props.controller,guid:()=>this.controller.getOpenPopoverGuid()})})},()=>this.controller.getOpenPopoverGuid())]})}getSharedDropdownWrapperProps(){return{rootElSelector:this.const(".dcg-container"),openAriaAlert:this.const(this.controller.s("graphing-calculator-narration-options-menu-open")),closeAriaAlert:this.const(this.controller.s("graphing-calculator-narration-options-menu-closed")),focusOnOpen:this.bindFn(this.optionsViewFocusLocation),shouldHandleTabAndEscape:this.const(!0),controller:this.props.controller}}optionsViewFocusLocation(){let e=this.controller.getOpenItemMenu();if(!e||!("model"in e))return"none";let{model:t}=e;if(!t)return"none";let o=this.controller.getFocusLocation();if(!o||o.type!=="expression-menu"||o.id!==t.id)return"none";switch(o.location){case"start":return"first";case"end":return"last";default:return"none"}}getActiveSliderModelForOptionsView(){let e=this.controller.getOpenItemMenu();return e&&e.type==="slider"&&"model"in e?e.model:void 0}getActiveImageModelForOptionsView(){let e=this.controller.getOpenItemMenu();return e&&e.type==="image"&&"model"in e?e.model:void 0}getActiveExpressionModelForOptionsView(){let e=this.controller.getOpenItemMenu();return e&&e.type==="expression"&&"model"in e?e.model:void 0}getActiveColumnModelForOptionsView(){let e=this.controller.getOpenItemMenu();return e&&e.type==="table-column"&&"model"in e?e.model:void 0}getActiveTableModelForOptionsView(){let e=this.controller.getOpenItemMenu();return e&&e.type==="table-regression"&&"model"in e?e.model:void 0}isOptionsViewOpen(e){let t=this.controller.getOpenItemMenu();return!!t&&t.type===e}makeShellViewForModel(e){return d(nw,{controller:this.props.controller,model:()=>e,onDragPending:()=>{},isDragCopy:()=>!1})}computeExppanelOuterStyle(){this.getListBottomAndUpdateLastExpressionPadding();let{list:e}=this.controller.computeMajorLayout(),t=0,o=e.top;return e.top>0&&!this.controller.isListVisible()&&(o-=e.height),{position:"absolute",left:t+"px",top:o+"px",width:e.width+"px",height:e.height+"px","--dcg-exp-list-width":e.width+"px","--dcg-exp-list-height":e.height+"px"}}makeDragCopyViewForModel(e){return this.makeViewForModel(e,!0)}makeViewForModel(e,t=!1){let o;if(e.type==="table")o=d(Fw,{controller:this.props.controller,model:()=>e,onDragPending:i=>this.onDragPending(i,{type:"expression",calcId:e.id}),isDragCopy:()=>t});else if(e.type==="folder")o=d(Jv,{controller:this.props.controller,model:()=>e,onDragPending:i=>this.onDragPending(i,{type:"expression",calcId:e.id}),isDragCopy:()=>t});else if(e.type==="text")o=d(Gw,{controller:this.props.controller,model:()=>e,onDragPending:i=>this.onDragPending(i,{type:"expression",calcId:e.id}),isDragCopy:()=>t});else if(e.type==="image")o=d(Zv,{controller:this.props.controller,model:()=>e,onDragPending:i=>this.onDragPending(i,{type:"expression",calcId:e.id}),isDragCopy:()=>t});else if(e.type==="expression")o=d(BG,{children:i=>i?d(Pl,{showParentChildrenHover:this.const(!1),controller:this.props.controller,identifier:()=>this.controller.getDraggedIdentifier(),insideMQ:this.const(!1),insideGroup:this.const(!1),putInTabOrder:()=>!1}):d(ju,{controller:this.props.controller,model:()=>e,onDragPending:n=>this.onDragPending(n,{type:"expression",calcId:e.id}),isDragCopy:()=>t})},()=>t&&this.controller.shouldRenderDraggedItemAsToken());else return;return o}didUnmount(){re(document.documentElement).off("."+this.guid)}didMountContainer(e){this.node=e,re(document.documentElement).on("keydown."+this.guid,this.bindFn(this.handleKeyDown))}didMountExppanel(e){this.exppanel=e,e.onscroll=()=>this.controller.markTickRequiredNextFrame()}getListBottomAndUpdateLastExpressionPadding(){let e=this.controller.getKeypadHeight(),t=this.__listBottom||0;return this.__listBottom=e,e===0&&t!==0&&EP()&&this.padLastExpressionUntilTapEnd(t),e}padLastExpression(e){let t=this.node.querySelector(".dcg-expressionitem.dcg-new-expression");t.style.marginBottom=e+"px"}unpadLastExpression(){let e=this.node.querySelector(".dcg-expressionitem.dcg-new-expression");e.style.marginBottom="0"}padLastExpressionUntilTapEnd(e){this.padLastExpression(e),re(document).on("dcg-tap.animating-bottom",()=>{this.unpadLastExpression(),re(document).off("dcg-tap.animating-bottom")})}handleKeyDown(e){var a;if(this.controller.inAudioTraceMode())return;let t=Pe(e),o=co(e),i=this.controller.getSelectedItem();if(!i){(t==="Backspace"||t==="Del")&&!this.controller.needsFakeKeypad()&&this.controller.hasMultipleItemsSelected()&&this.controller.dispatch({type:"delete-all-selected-items"});return}if(e.altKey&&!e.ctrlKey&&!e.metaKey&&e.shiftKey&&o==="T"&&i){if(!this.controller.isGeometry()||!Gi(i))return;e.preventDefault(),e.stopPropagation(),this.controller.convertToTokenAssignment(i);let s=this.controller.getGeometryFolder();if(s){let c=s.index+this.controller.getNumberOfItemsInFolder(s.id);ui(i,s.id),i.index!==c&&Rd(this.controller.getListModel(),i.index,c,1)}this.controller.ensureAtLeastOneVisibleItem();let l=(a=uo(i))==null?void 0:a.identifier;l&&this.controller.getShowConstructionsOpen()&&this.controller.dispatch({type:"set-focus-location",location:{type:"geo-token",identifier:l}});return}let n=this.controller.getFocusLocation();if(e.ctrlKey&&e.shiftKey&&!e.metaKey&&!e.altKey&&n!==void 0){if(o==="O"){if(e.preventDefault(),e.stopPropagation(),this.controller.getOpenItemMenu()!==void 0)return;let s;if(i.type==="expression")!i.sliderExists&&!_c(i)?(s={type:"expression",model:i,guid:i.guid,focusFirstOption:!0,previousFocusLocation:n},this.controller.dispatch({type:"set-focus-location",location:{type:"expression-icon",id:i.id}})):i.sliderExists&&(s={type:"slider",model:i,guid:"slider-"+i.guid,focusFirstOption:!0,previousFocusLocation:n},this.controller.dispatch({type:"set-focus-location",location:{type:"slider-animation-properties-icon",id:i.id}}));else if(i.type==="image")s={type:"image",model:i,guid:i.guid,focusFirstOption:!0,previousFocusLocation:n},this.controller.dispatch({type:"set-focus-location",location:{type:"image-icon",id:i.id}});else if(i.type==="table"&&(n.type==="table"||n.type==="table-icon")){let l;if(n.type==="table"){let c=n.location;if(!c)return;l=i.columnModels[c.column]}else l=Kr(i,n.columnId);if(!l||l.latex===""||!this.controller.getGraphSettings().config.graphpaper||l.error||l.index===0)return;s={type:"table-column",model:l,guid:l.guid,focusFirstOption:!0,previousFocusLocation:n},this.controller.dispatch({type:"set-focus-location",location:{type:"table-icon",id:i.id,columnId:l.id}})}if(!s)return;this.controller.dispatch({type:"toggle-item-settings-menu",menu:s});return}else if(o==="D"){if(this.controller.isItemReadonly(i.id)&&!this.controller.isInEditListMode())return;e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"delete-item-and-animate-out",id:i.id,setFocusAfterDelete:!0});return}else if(o==="C"){if(this.controller.isItemReadonly(i.id))return;e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:i.type==="folder"?"duplicate-folder":"duplicate-expression",id:i.id});return}}if(this.controller.isInEditListMode()&&!e.altKey&&!e.ctrlKey&&!e.metaKey){if(t==="Tab"&&n!==void 0){let s=this.controller.getItemModelByIndex(0);if(!s)return;let l=(n.type==="readonly-expression"&&s.type==="expression"||n.type==="table-container"&&s.type==="table"||n.type===s.type)&&n.id===s.id,c={type:"edit-list-toggle"},p=this.controller.isFocusLocationFocused(c);e.shiftKey&&l?(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-focus-location",location:c})):!e.shiftKey&&p&&(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"move-focus-to-item",id:s.id,where:s.type==="table"?"container":void 0}))}else(t==="Up"||t==="Down"||t==="PageUp"||t==="PageDown")&&this.controller.dispatch({type:"on-special-key-pressed",key:t==="Up"||t==="PageUp"?"PageUp":"PageDown"});return}if(t==="Esc"&&this.controller.getExpressionSearchOpen()&&this.controller.dispatch({type:"close-expression-search"}),!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&(t==="PageUp"||t==="PageDown")){this.controller.dispatch({type:"on-special-key-pressed",key:t}),e.preventDefault();return}if(!(document.activeElement&&re.contains(document.body,document.activeElement))&&!this.exppanel.contains(e.target)&&re.contains(document.documentElement,e.target))switch(t){case"Up":e.preventDefault(),this.controller.dispatch({type:"select-previous-expression"});break;case"Down":e.preventDefault(),this.controller.dispatch({type:"select-next-expression"});break;case"Esc":e.preventDefault(),this.controller.dispatch({type:"set-none-selected"});break;case"Right":e.preventDefault(),i&&(i.type==="expression"&&i.sliderExists?(this.controller.dispatch({type:"adjust-slider-by-keyboard",id:i.id,adjustment:"up"}),this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:i.id}})):this.controller.dispatch({type:"move-focus-to-item",id:i.id,where:"start"}));break;case"Tab":e.preventDefault(),i&&this.controller.dispatch({type:"move-focus-to-item",id:i.id,where:"start"});break;case"Left":e.preventDefault(),i&&(i.type==="expression"&&i.sliderExists?(this.controller.dispatch({type:"adjust-slider-by-keyboard",id:i.id,adjustment:"down"}),this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:i.id}})):this.controller.dispatch({type:"move-focus-to-item",id:i.id,where:"end"}));break;case"Backspace":e.preventDefault(),i&&!this.controller.isItemReadonly(i.id)&&this.controller.dispatch({type:"upward-delete-selected-expression"});break;case"Del":e.preventDefault(),i&&!this.controller.isItemReadonly(i.id)&&this.controller.dispatch({type:"downward-delete-selected-expression"});break;case"Enter":Or(e,"create-expression-with-keyboard")||(e.preventDefault(),Dt(e,"create-expression-with-keyboard"),i&&this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"}));break;default:if(e.metaKey||e.ctrlKey||t==="Shift"||t==="Space")return;i&&(i.type==="table"||this.controller.dispatch({type:"move-focus-to-item",id:i.id,where:"end"}))}}onDragPending(e,t){if(Or(e,"dcg-expression-drag"))return;e.preventDefault(),Rr();let o={x:e.touches[0].clientX,y:e.touches[0].clientY},i={x:o.x,y:o.y},n=setTimeout(()=>{re(document).off(".dragpending"),this.onDragStart(e,t,o,i)},500);re(document).on("dcg-tapmove.dragpending",a=>{i={x:a.touches[0].clientX,y:a.touches[0].clientY},(Math.abs(i.y-o.y)>3||Math.abs(i.x-o.x)>3)&&(clearTimeout(n),re(document).off(".dragpending"),this.onDragStart(e,t,o,i))}),re(document).on("dcg-tapend.dragpending",()=>{clearTimeout(n),re(document).off(".dragpending")})}onDragStart(e,t,o,i){e.touches.length===1&&(Or(e,"dcg-longhold")||this.controller.dispatch({type:"start-dragdrop",dragTarget:t,grabPt:o,mousePt:i}))}onExppanelTapstart(e){e.device!=="mouse"&&(e.target.closest(".dcg-expressionitem")||Rr())}onCopy(e){cG(e,this.controller,"copy")}onCut(e){cG(e,this.controller,"cut")}onPaste(e){let t=this.controller.getGraphSettings().config;if(gY(e,this.controller)||mY(e,this.controller))return;let o=rb(e);if(!o)return;let i=this.controller.getSelectedItem();if(this.controller.canLoadPastedLink(o)&&i&&i.type==="folder"&&i.title===""){e.stopPropagation(),e.preventDefault(),EM(this.controller,o,(a,s)=>s(null,a));return}if(i&&(i.type==="text"||i.type==="folder"))return;if(this.controller.canLoadPastedLink(o)){e.stopPropagation(),e.preventDefault();let a=t.pasteGraphLinkCallback?t.pasteGraphLinkCallback:(s,l)=>l(null,s);EM(this.controller,o,a);return}if(t.pasteTableData){let a=cY(o);if(a!==void 0)return e.stopPropagation(),e.preventDefault(),this.controller.dispatch({type:"paste-table",data:a})}let n=TM(o);if(n!==void 0){if(n.length===1&&n[0].numberList)return;e.stopPropagation(),e.preventDefault(),this.controller.dispatch({type:"insert-several-expressions",expressions:n.map(a=>({type:"expression",id:this.controller.generateId(),latex:a.content}))});return}}onDrop(e){if(!this.controller.areImagesEnabled())return;let t=e.dataTransfer&&e.dataTransfer.files;t&&t.length&&this.controller.dispatch({type:"new-images",files:t})}};ce();ie();var EA=__dcg_shared_module_exports__['e'](se());var{If:Bme}=EA.Components,Ume=3e3,kA=class extends EA.View{willUpdate(){let e=this.props.controller(),t=e.getAdaptiveDepthPeelingInfo();(t==null?void 0:t.status)===1&&t.peelLayers===Zf&&(this.visible=!0,clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.visible=!1,e.dispatch({type:"render"})},Ume))}template(){return d(Bme,{predicate:()=>this.visible,children:()=>d("div",{class:u("dcg-adaptive-peeling-warning"),style:()=>({left:`${this.props.controller().computeMajorLayout().grapher.left}px`}),children:d("span",{class:u("dcg-warning-content"),role:u("alert"),children:()=>this.props.controller().s("graphing-calculator-label-adaptive-peel-warning")})})})}};ce();ie();var RA=__dcg_shared_module_exports__['e'](se());Vt();__dcg_shared_module_exports__['H']();Vt();var UG=class{constructor(){this.handlers=[],re(document).on("keydown.delegator",e=>this.handleEvent(e))}push(e){let t=__dcg_shared_module_exports__['E']("delegator_");return this.handlers.push({token:t,handler:e}),()=>this.handlers=this.handlers.filter(o=>o.token!=t)}handleEvent(e){if(!e.isDefaultPrevented()&&this.handlers.length){let t=!1,o=()=>t=!0;for(let{handler:i}of this.handlers.slice().reverse())if(i(e,o),t)return}}},IA=new UG;ce();ie();var DA=__dcg_shared_module_exports__['e'](se());ce();ie();var LA=__dcg_shared_module_exports__['e'](se());ce();ie();var _A=__dcg_shared_module_exports__['e'](se());var{Show:zG,IfDefined:zme}=_A.Components,CA=class extends _A.View{constructor(){super(...arguments),this.i18n=this.props.i18n(),this.isMounted=!1,this.isTitleStuck=!1}template(){return d("div",{class:()=>({"dcg-shared-modal-container":!0,[this.props.class?this.props.class():""]:!!this.props.class}),didMount:this.bindFn(this.didMountRoot),children:_("div",{class:()=>({"dcg-shared-modal-cover":!0,"dcg-shared-has-close-button":this.showX(),"dcg-shared-modal-fullscreen":this.props.size()==="fullscreen","dcg-shared-modal-wide":this.props.size()==="wide","dcg-shared-modal-medium":this.props.size()==="medium","dcg-shared-modal-narrow":this.props.size()==="narrow","dcg-shared-modal-tiny":this.props.size()==="tiny"}),children:[d("div",{class:u("dcg-shared-modal-background"),onTap:this.props.onClose}),d("div",{class:u("dcg-shared-modal-transition-container"),children:_("dialog",{open:u(!0),class:u("dcg-unstyled-dialog dcg-shared-modal"),"aria-modal":u("true"),"aria-label":()=>{var e,t,o,i,n,a;return(a=(n=(t=(e=this.props).ariaLabel)==null?void 0:t.call(e))!=null?n:(i=(o=this.props).title)==null?void 0:i.call(o))!=null?a:""},children:[d(zG,{when:()=>this.showX(),children:d("div",{class:u("dcg-shared-close-cross-container"),children:d(Re,{tooltip:()=>this.i18n.s("shared-button-close-dialog"),children:d("div",{role:u("button"),tabIndex:u("0"),"aria-label":()=>this.i18n.s("shared-button-close-dialog"),class:u("dcg-shared-close-cross action-close-modal"),onTap:this.props.onClose,children:d("i",{class:u("dcg-icon-remove"),"aria-hidden":u("true")})})})})}),_("div",{class:u("dcg-shared-modal-contents-wrapper"),didMount:this.bindFn(this.didMountScrollable),willUnmount:this.bindFn(this.willUnmountScrollable),children:[d(zG,{when:()=>{var e,t;return!!((t=(e=this.props).title)!=null&&t.call(e))},children:_("h1",{class:()=>{var e,t;return{"dcg-shared-modal-title":!0,"dcg-shared-left-align-title":this.leftAlignTitle(),"dcg-shared-modal-title--sticky":!!((t=(e=this.props).withStickyTitle)!=null&&t.call(e)),"dcg-shared-modal-title--stuck":this.isTitleStuck}},children:[d(zG,{when:()=>{var e,t;return!!((t=(e=this.props).withBackButton)!=null&&t.call(e))},children:d("button",{class:u("dcg-shared-back-button"),"aria-label":()=>this.i18n.s("shared-button-back"),tabIndex:u(0),onTap:this.props.onBack,children:d("i",{class:u("dcg-icon-chevron-left dcg-shared-back-button__icon"),"aria-hidden":u("true")})})}),zme(()=>{var e,t;return(t=(e=this.props).titleIcon)==null?void 0:t.call(e)},e=>d("i",{class:()=>({"dcg-shared-modal__title-icon":!0,[e()]:!0}),"aria-hidden":u("true")})),()=>this.props.title()]})}),d("div",{class:u("dcg-shared-modal-scrollable-content"),children:this.props.children})]})]})})]})})}willUnmountScrollable(e){this.scrollCallback&&(e.removeEventListener("scroll",this.scrollCallback),this.scrollCallback=void 0)}didMountScrollable(e){this.props.onScroll&&(this.scrollCallback=()=>{var t,o;(o=(t=this.props).onScroll)==null||o.call(t,e)},e.addEventListener("scroll",this.scrollCallback))}showX(){var e,t;return!!((t=(e=this.props).showX)!=null&&t.call(e))}leftAlignTitle(){return!!this.props.leftAlignTitle&&this.props.leftAlignTitle()}didMountRoot(e){var g,m,b,x;if(this.isMounted)return;this.isMounted=!0,document.body.classList.add("dcg-modal-open");let t=e.querySelector(".dcg-shared-modal-contents-wrapper"),o=e.querySelector(".dcg-shared-modal-title");if((m=(g=this.props).withStickyTitle)!=null&&m.call(g)&&t&&o){let E=()=>{this.intersectionObserver&&this.intersectionObserver.disconnect();let S=getComputedStyle(t).getPropertyValue("--dcg-modal-padding").trim();this.intersectionObserver=new IntersectionObserver(([k])=>{this.isTitleStuck=k.intersectionRatio<1,this.update()},{root:t,rootMargin:s0||S===""?void 0:`-${S} 0px 0px 0px`,threshold:[1]}),this.intersectionObserver.observe(o)};E(),this.resizeObserver=new ResizeObserver(E),this.resizeObserver.observe(t)}let i=()=>{var E;(E=e.querySelector(".dcg-shared-close-cross"))==null||E.focus()},n=()=>e.querySelector(".dcg-shared-modal-scrollable-content"),a=()=>{let E=n();E&&(E.tabIndex=E.tabIndex>=0?E.tabIndex:0,E.focus())},s=n(),l=(x=(b=this.props).setFocus)==null?void 0:x.call(b),c=l==="close"&&this.showX(),p=l==="content"||l==="close"&&!this.showX()&&s;c&&i(),p&&a();let h=RK(e);this.unsub=IA.push((E,S)=>{var T,I,P,A,D,G;Pe(E)==ri&&((I=(T=this.props).interceptEscape)!=null&&I.call(T)||this.onClose(),S());let k=E.altKey||E.shiftKey||E.metaKey||E.ctrlKey;Pe(E)===va&&!k&&((A=(P=this.props).onArrowKey)==null||A.call(P,"Left")),Pe(E)===wa&&!k&&((G=(D=this.props).onArrowKey)==null||G.call(D,"Right")),h(E)})}onClose(){this.props.onClose&&this.props.onClose()}didUnmount(){var e,t;this.isMounted&&(this.isMounted=!1,(e=this.intersectionObserver)==null||e.disconnect(),(t=this.resizeObserver)==null||t.disconnect(),this.unsub(),document.body.classList.remove("dcg-modal-open"))}};tP();var{If:MA,For:qG}=LA.Components,AA=class extends LA.View{init(){this.controller=this.props.controller()}template(){return d(MA,{predicate:this.props.visible,children:()=>_(CA,{size:this.const("medium"),onClose:this.props.onClose,i18n:this.const(this.controller),class:this.const("dcg-custom-toolbar-settings-modal"),children:[d("button",{class:u("dcg-unstyled-button dcg-btn-blue dcg-done-btn"),didMount:e=>e.focus(),onTap:this.props.onClose,children:()=>this.controller.s("graphing-calculator-button-done")}),d("h1",{class:u("dcg-shared-left-align-title"),children:()=>this.controller.s("shared-calculator-text-customize-toolbar")}),d(qG,{each:this.bindFn(this.getToolGroups),children:e=>_("div",{role:u("grid"),children:[_("div",{class:u("dcg-configuration-heading-row dcg-configuration-grid-row"),role:u("row"),children:[d("div",{class:u("dcg-first-column"),role:u("columnheader"),children:()=>Ny(e().group)}),d("div",{class:u("dcg-second-column"),role:u("columnheader"),children:()=>this.controller.s("graphing-calculator-label-geometry-tool-disabled-when")})]}),d(qG.Simple,{each:()=>e().dropdown||[e().current],children:t=>_("div",{class:u("dcg-configuration-grid-row"),"dcg-geo-tool":this.const(t),role:u("row"),children:[_("div",{class:u("dcg-first-column"),role:u("gridcell"),children:[d(tt,{class:()=>"dcg-geometry-tool-visibility",disabled:()=>!this.isToolCustomizable(t),checked:()=>this.getToolInfo(t).visible,onChange:o=>{this.controller.dispatch({type:"set-geometry-custom-toolbar-setting",tool:t,value:{...this.getToolInfo(t),visible:o}})},children:()=>this.getToolInfo(t).displayName}),KS(()=>{if(this.getToolInfo(t).visible)return t==="rotate"?"rotationToolInput":t==="dilate"?"dilationToolInput":void 0},o=>d(tt,{class:()=>"dcg-transformation-allow-numeric-option",checked:()=>this.getMeasurementOptionValue(o()),onChange:i=>{this.controller.dispatch({type:"set-geometry-custom-toolbar-measurement-option",option:o(),value:i})},children:()=>this.getMeasurementOptionDisplayText(o())}))]}),_("div",{class:()=>({"dcg-disabled":!this.getToolInfo(t).visible||!this.isToolCustomizable(t),"dcg-mathquill-condition-container":!0,"dcg-second-column":!0}),role:u("gridcell"),children:[d(MA,{predicate:()=>!!this.getToolLatexError(t)&&this.getToolInfo(t).visible,children:()=>d("div",{class:u("dcg-latex-error-container"),children:d(io,{error:()=>this.getToolLatexError(t)||""})})}),d(MA,{predicate:()=>this.isToolCustomizable(t)&&this.getToolInfo(t).visible,children:()=>d(ir,{latex:()=>this.getToolLatex(t),ariaLabel:()=>this.getToolAria(t),onKeydown:()=>{},...Wr(this.controller),noFadeout:this.const(!0),getAriaPostLabel:()=>this.getToolLatexError(t)||"",isFocused:()=>this.focusedLatexTool===t,hasError:()=>!!this.getToolLatexError(t),onUserChangedLatex:o=>{this.controller.dispatch({type:"set-geometry-custom-toolbar-setting",tool:t,value:{...this.getToolInfo(t),disabledLatex:o}})},onFocusedChanged:o=>{this.focusedLatexTool===t&&!o?this.focusedLatexTool=void 0:o&&(this.focusedLatexTool=t)},onSelectionChanged:()=>{this.controller.runAfterDispatch(()=>{this.controller.dispatch({type:"render"})})}})}),d(MA,{predicate:()=>!this.getToolInfo(t).visible,children:()=>d("div",{class:u("dcg-disabled-condition-wrapper"),children:d(ir,{latex:()=>this.getToolLatex(t),ariaLabel:()=>this.getToolAria(t),isStatic:this.const(!0),isFocused:this.const(!1),...Wr(this.controller)})})})]})]})})]})},e=>e.group),_("div",{role:u("grid"),children:[d("div",{class:u("dcg-configuration-heading-row dcg-configuration-grid-row dcg-grid-single-column"),role:u("row"),children:d("div",{class:u("dcg-first-column"),role:u("columnheader"),children:"Measurement Labels"})}),d(qG.Simple,{each:()=>["angleLabelControl","segmentLabelControl"],children:e=>d("div",{class:u("dcg-configuration-grid-row dcg-grid-single-column"),role:u("row"),children:d("div",{class:u("dcg-first-column"),role:u("gridcell"),children:d(tt,{checked:()=>this.getMeasurementOptionValue(e),onChange:t=>{this.controller.dispatch({type:"set-geometry-custom-toolbar-measurement-option",option:e,value:t})},children:()=>this.getMeasurementOptionDisplayText(e)})})})})]})]})})}getToolAria(e){return this.controller.s("shared-calculator-narration-disable-tool",{tool:this.getToolInfo(e).displayName})}getToolLatex(e){return this.getToolInfo(e).disabledLatex||""}isToolCustomizable(e){return e!=="selection"&&e!=="box-selection"}getToolGroups(){let e={group:"transformation",current:"translate",dropdown:Sf};return[...eD(),e]}getToolLatexError(e){let t=this.controller.getGeometryToolbarModel(),o=p4(t,e);if(o)return this.controller.unpack(o)}getToolInfo(e){let t=this.controller.getGeometryToolbarModel();return{tool:e,displayName:this.controller.getGeoModel().getDisplayNameForTool(e),...t.toolbarState[e]}}getMeasurementOptionValue(e){return this.controller.getGeometryToolbarModel().measurementOptions[e]}getMeasurementOptionDisplayText(e){switch(e){case"angleLabelControl":return this.controller.s("graphing-calculator-label-geometry-measurement-control-angle");case"segmentLabelControl":return this.controller.s("graphing-calculator-label-geometry-measurement-control-segment");case"dilationToolInput":return this.controller.s("graphing-calculator-label-geometry-numeric-dilation-factor");case"rotationToolInput":return this.controller.s("graphing-calculator-label-geometry-numeric-rotation-angle");default:return""}}};var{If:$X}=DA.Components,PA=class extends DA.View{init(){this.controller=this.props.controller()}template(){return d($X,{predicate:()=>this.shouldShowAuthorFeaturesSection(),children:()=>_("div",{class:u("dcg-options-menu-section dcg-author-mode-section"),children:[_("div",{class:u("dcg-options-menu-section-title"),children:[()=>this.controller.s("shared-calculator-narration-author-mode"),d(Fr,{ariaLabel:()=>this.controller.s("shared-calculator-narration-author-mode"),toggled:this.bindFn(this.isAuthorMode),onChange:()=>{this.controller.dispatch({type:"set-author-mode",enabled:!this.isAuthorMode()})}})]}),d($X,{predicate:()=>this.isAuthorMode(),children:()=>_("div",{class:u("dcg-author-features-container"),children:[_("div",{class:u("dcg-toolbar-customization"),children:[d("span",{children:"Geometry Tools:"}),d(hr,{theme:this.const("mini"),ariaGroupLabel:()=>this.controller.s("graphing-calculator-narration-configure-toolbar"),staticConfig:this.bindFn(this.getConfigurationOptions)})]}),d(tt,{checked:()=>this.controller.getGraphSettings().hideCustomColors,onChange:e=>this.controller.dispatch({type:"set-graph-settings",hideCustomColors:e}),children:()=>this.controller.s("shared-calculator-label-hide-custom-colors")}),d(AA,{controller:this.props.controller,onClose:()=>{this.customGeometryToolsSettingsModal=!1,this.controller.dispatch({type:"render"})},visible:()=>this.customGeometryToolsSettingsModal})]})})]})})}getToolbar(){return this.controller.getGeometryToolbarModel().toolbar}setToolbar(e){e==="custom"&&(this.customGeometryToolsSettingsModal=!0),this.controller.dispatch({type:"set-geometry-toolbar",toolbar:e})}getConfigurationOptions(){return[{key:"all",label:()=>this.controller.s("shared-calculator-button-settings-toolbar-show-all"),selected:()=>this.getToolbar()==="all",onSelect:()=>this.setToolbar("all")},{key:"none",label:()=>this.controller.s("shared-calculator-button-settings-toolbar-show-none"),selected:()=>this.getToolbar()==="none",onSelect:()=>this.setToolbar("none")},{key:"custom",label:()=>this.controller.s("shared-calculator-button-settings-toolbar-show-custom"),selected:()=>this.getToolbar()==="custom",onSelect:()=>this.setToolbar("custom")}]}shouldShowAuthorFeaturesSection(){return this.controller.authorFeaturesAvailable()}isAuthorMode(){return this.controller.shouldShowAuthorFeatures()}};var{If:OA}=RA.Components,Vw=class extends RA.View{init(){this.controller=this.props.controller()}template(){return d("div",{class:()=>({"dcg-geometry-settings-container":!0,"dcg-popover":!0,"dcg-left":!0,"dcg-constrained-height-popover":!0,"dcg-generic-options-menu":!0,"dcg-no-geometry-header":!this.controller.shouldShowGeoToolbar()}),style:this.bindFn(this.getContainerStyle),didMount:this.bindFn(this.didMountContainer),didUnmount:this.bindFn(this.didUnmountContainer),children:_("div",{class:u("dcg-popover-interior"),role:u("region"),"aria-label":()=>this.controller.s("graphing-calculator-label-tooltip-geometry-settings"),children:[_("div",{class:u("dcg-options-menu-section"),children:[d(nb,{controller:this.props.controller}),d(OA,{predicate:()=>!this.controller.getLockViewportConfigSetting(),children:()=>d(Sh,{controller:this.props.controller})}),d(OA,{predicate:()=>this.controller.getHiddenGeoItemCount()>0,children:()=>d(tt,{onChange:this.bindFn(this.toggleGhostMode),checked:()=>this.controller.getGhostMode(),manageFocus:this.const(_e({controller:this.controller,location:{type:"settings",location:"hidden-objects"}})),children:()=>this.controller.s("graphing-calculator-label-settings-hidden-objects",{count:this.controller.getHiddenGeoItemCount()})})})]}),_("div",{class:u("dcg-options-menu-section"),children:[_("div",{class:u("dcg-options-menu-section-title"),children:[()=>this.controller.s("graphing-calculator-label-settings-grid"),d(Fr,{ariaLabel:()=>this.controller.s("graphing-calculator-label-settings-grid"),toggled:this.bindFn(this.getShowGrid),onChange:this.bindFn(this.toggleGrid)})]}),d(OA,{predicate:this.bindFn(this.getShowGrid),children:()=>d(tt,{onChange:this.bindFn(this.toggleMinorGridlines),checked:this.bindFn(this.getMinorGridlines),children:()=>this.controller.s("graphing-calculator-label-settings-minor-gridlines")})})]}),_("div",{class:u("dcg-options-menu-section"),children:[_("div",{class:u("dcg-options-menu-section-title"),children:[()=>this.controller.s("graphing-calculator-label-axes"),d(Fr,{ariaLabel:()=>this.controller.s("graphing-calculator-label-axes"),toggled:this.bindFn(this.getShowAxes),onChange:this.bindFn(this.toggleAxes)})]}),d(OA,{predicate:this.bindFn(this.getShowAxes),children:()=>_("div",{children:[d(tt,{onChange:this.bindFn(this.toggleAxisNumbers),checked:this.bindFn(this.getAxisNumbers),children:()=>this.controller.s("graphing-calculator-label-settings-axis-numbers")}),d("div",{children:d(tt,{onChange:this.bindFn(this.toggleArrows),checked:()=>this.getAxisArrowMode()!==__dcg_shared_module_exports__['Xd'].NONE,children:()=>this.controller.s("graphing-calculator-label-settings-arrows")})})]})})]}),d(ab,{controller:this.props.controller}),d(PA,{controller:this.props.controller}),d(ps,{setup:this.const({controller:this.controller,type:"advanced"})}),d("div",{class:u("dcg-arrow")})]})})}toggleGhostMode(){this.controller.dispatch({type:"set-ghost-mode",value:!this.controller.getGhostMode()})}didMountContainer(e){this.node=e,re(document.documentElement).on("dcg-tapstart.geometry-settings-view wheel.geometry-settings-view",t=>{this.eventShouldClosePopover(t)&&this.controller.dispatch({type:"close-graph-settings",focusIconAfterClose:t.device==="keyboard"})}),this.unsub=IA.push(t=>{let o=Pe(t);if(o==="Esc"&&this.controller.dispatch({type:"close-graph-settings",focusIconAfterClose:!0}),this.controller.isGraphSettingsOpen()&&o==="Tab"&&!t.altKey&&!t.metaKey&&!t.ctrlKey){let i=this.controller.getFocusLocation();if(!i||i.type!=="settings")return;t.shiftKey?t.shiftKey&&(i.location==="default-size"?(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"icon"}}),t.preventDefault(),t.stopPropagation()):i.location==="icon"&&(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"degree-mode"}}),t.preventDefault(),t.stopPropagation())):i.location==="icon"?(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"default-size"}}),t.preventDefault(),t.stopPropagation()):i.location==="degree-mode"&&(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"icon"}}),t.preventDefault(),t.stopPropagation())}})}didUnmountContainer(){re(document.documentElement).off(".geometry-settings-view"),this.unsub()}didUpdate(){if(!this.controller.isGraphSettingsOpen())return;let e=this.controller.getKeypadHeight();e!==this.cachedKeypadHeight&&document.activeElement&&this.node.contains(document.activeElement)&&ta(document.activeElement,this.node.querySelector(".dcg-popover-interior"),50),this.cachedKeypadHeight=e}eventShouldClosePopover(e){let t=e.target,o=this.node.contains(t),i=!!t.closest(".dcg-action-settings"),n=this.isMathquillFocused()&&!!t.closest(".dcg-keypad"),a=!!t.closest(".dcg-action-undo")||!!t.closest(".dcg-action-redo");return!(o||i||n||a)}isMathquillFocused(){return this.getFocusedLimit()!==void 0}getFocusedLimit(){let e=this.controller.getFocusLocation();if(e&&e.type==="settings")return e.location}getShowXAxis(){return!!this.controller.getGraphSettings().showXAxis}toggleAxes(){this.controller.dispatch({type:"set-graph-settings",showXAxis:!this.getShowXAxis(),showYAxis:!this.getShowXAxis()})}getShowAxes(){return!!this.controller.getGraphSettings().showXAxis}getAxisNumbers(){return!!this.controller.getGraphSettings().xAxisNumbers}toggleAxisNumbers(){let e=this.getAxisNumbers();this.controller.dispatch({type:"set-graph-settings",xAxisNumbers:!e,yAxisNumbers:!e,polarNumbers:!e})}getMinorGridlines(){return this.controller.getGraphSettings().xAxisMinorSubdivisions===0}toggleMinorGridlines(){let e=this.getMinorGridlines()?1:0;this.controller.dispatch({type:"set-graph-settings",yAxisMinorSubdivisions:e,xAxisMinorSubdivisions:e})}getAxisArrowMode(){return this.controller.getGraphSettings().xAxisArrowMode}getShowGrid(){return this.controller.getGraphSettings().showGrid}toggleGrid(){this.controller.dispatch({type:"set-graph-settings",showGrid:!this.getShowGrid()})}toggleArrows(){let e=this.getAxisArrowMode()===__dcg_shared_module_exports__['Xd'].NONE?__dcg_shared_module_exports__['Xd'].BOTH:__dcg_shared_module_exports__['Xd'].NONE;this.controller.dispatch({type:"set-graph-settings",xAxisArrowMode:e,yAxisArrowMode:e})}getContainerStyle(){return this.controller.getKeypadHeight()?"bottom: 0":""}};ce();ie();var VA=__dcg_shared_module_exports__['e'](se()),{Switch:qme}=VA.Components,NA=class extends VA.View{constructor(){super(...arguments),this.frames=0,this.prevTime=0}init(){var t;this.current=0,this.panels={},this.panels.fps=new Uw({name:"fps",yMax:120,fg:"#0ff",bg:"#002"}),this.panels.evaluator=new Uw({name:"eval",yMax:250,fg:"#f80",bg:"#210"}),this.panels.mem=new Uw({name:"MB",yMax:this.getMemory().jsHeapSizeLimit/2**20,fg:"#f08",bg:"#201"}),this.list=Object.keys(this.panels),this.props.controller().onEvaluatorChangesSpy=(o,i)=>{var n;this.props.controller().isThreeDMode()||this.frame(),this.panels.evaluator.update((n=i.timeInWorker)!=null?n:NaN)};let e=(t=this.props.controller().getGrapher3d())==null?void 0:t.webglLayer;e&&(e.debugOnlyMeasureGPUTiming=!0,e.onRenderSpy=()=>{this.frame()})}willUnmount(){this.props.controller().onEvaluatorChangesSpy=void 0}template(){return d("div",{class:u("dcg-performance-meter"),onTap:()=>{this.current=(this.current+1)%this.list.length,this.update()},children:d(qme,{children:e=>d("div",{didMount:t=>{t.appendChild(this.panels[e].dom)}})},()=>this.list[this.current])})}frame(){this.frames++;let e=(performance||Date).now();return e>=this.prevTime+1e3&&(this.panels.fps.update(this.frames*1e3/(e-this.prevTime)),this.prevTime=e,this.frames=0,this.panels.mem.update(this.getMemory().usedJSHeapSize/2**20)),e}getMemory(){if(self.performance&&"memory"in self.performance){let e=self.performance.memory;return{usedJSHeapSize:e.usedJSHeapSize,totalJSHeapSize:e.totalJSHeapSize,jsHeapSizeLimit:e.jsHeapSizeLimit}}else return{usedJSHeapSize:NaN,totalJSHeapSize:NaN,jsHeapSizeLimit:NaN}}},la=Math.round(window.devicePixelRatio||1),HG=80*la,jX=48*la,YX=3*la,XX=2*la,FA=3*la,Bw=15*la,KG=74*la,GA=30*la,Uw=class{constructor(e){this.values=[],this.minValue=1/0,this.maxValue=0,this.dom=document.createElement("canvas"),this.name=e.name,this.yMax=e.yMax,this.fg=e.fg,this.bg=e.bg,this.dom.width=HG,this.dom.height=jX,this.dom.style.cssText="width:80px;height:48px";let t=this.dom.getContext("2d");if(!t)throw new Error("Could not get context");this.context=t,t.font="bold "+9*la+"px Helvetica,Arial,sans-serif",t.textBaseline="top",t.fillStyle=this.bg,t.fillRect(0,0,HG,jX),t.fillStyle=this.fg,t.fillText(this.name,YX,XX),t.fillRect(FA,Bw,KG,GA),t.fillStyle=this.bg,t.globalAlpha=.9,t.fillRect(FA,Bw,KG,GA)}update(e){this.values.push(e),this.values.length>KG/la&&this.values.shift(),this.minValue=Math.min(this.minValue,e),this.maxValue=Math.max(this.maxValue,e),this.draw()}draw(){this.context.fillStyle=this.bg,this.context.globalAlpha=1,this.context.fillRect(0,0,HG,Bw),this.context.fillStyle=this.fg,this.context.fillText(Math.round(this.values[this.values.length-1])+" "+this.name+" ("+Math.round(this.minValue)+"-"+Math.round(this.maxValue)+")",YX,XX),this.context.fillStyle=this.fg,this.context.fillRect(FA+la,Bw,this.values.length*la,GA),this.context.fillStyle=this.bg,this.context.globalAlpha=.9;for(let e=0;e<this.values.length;e++){let t=this.values[e];this.context.fillRect(FA+(e+1)*la,Bw,la,Math.round((1-t/this.yMax)*GA))}}};ce();ie();var UA=__dcg_shared_module_exports__['e'](se());var{Show:Hme}=UA.Components,BA=class extends UA.View{constructor(){super(...arguments),this.controller=this.props.controller()}template(){return d(tr,{children:d(Hme,{when:()=>this.controller.getShowInvalidBoundsCover(),children:d("div",{class:u("dcg-grapher__error-in-graph-bounds"),onTap:()=>this.controller.dispatch({type:"toggle-graph-settings",focusOnOpen:!0}),tabIndex:u("0"),role:u("button"),manageFocus:this.const(_e({controller:this.controller,location:{type:"invalid-graph-bounds-cover"}})),style:()=>({left:this.controller.computeMajorLayout().grapher.left+"px",top:this.controller.computeMajorLayout().grapher.top+"px",width:this.controller.computeMajorLayout().grapher.width+"px",height:this.controller.computeMajorLayout().grapher.height+"px"}),children:_("div",{children:[d("i",{class:u("dcg-icon-error"),"aria-hidden":u("true")}),()=>this.controller.s("shared-calculator-text-graph-bounds-error")]})})})})}};ce();ie();var qA=__dcg_shared_module_exports__['e'](se());var{Show:Kme}=qA.Components,zA=class extends qA.View{constructor(){super(...arguments),this.controller=this.props.controller()}template(){return d(tr,{children:d(Kme,{when:()=>this.controller.getShowReducedMotionCover(),children:_("div",{class:u("dcg-grapher__reduced-motion-cover"),style:()=>({left:this.controller.computeMajorLayout().grapher.left+"px",top:this.controller.computeMajorLayout().grapher.top+"px",width:this.controller.computeMajorLayout().grapher.width+"px",height:this.controller.computeMajorLayout().grapher.height+"px"}),children:[d("div",{class:u("dcg-reduced-motion-cover__title"),children:()=>this.controller.s("graphing-calculator-text-animating-slider-message")}),_("div",{class:u("dcg-reduced-motion-cover__buttons"),children:[d("button",{class:u("dcg-btn-light-gray dcg-always-show-focus-visible"),onTap:()=>this.controller.dispatch({type:"dismiss-reduced-motion-cover",stopAnimations:!1}),manageFocus:this.const(_e({controller:this.controller,location:{type:"reduced-motion-cover",button:"allow"}})),didMount:e=>e.focus(),children:()=>this.controller.s("graphing-calculator-button-allow-animations")}),d("button",{class:()=>({"dcg-btn-blue":!0,"dcg-always-show-focus-visible":!ja}),onTap:()=>this.controller.dispatch({type:"dismiss-reduced-motion-cover",stopAnimations:!0}),manageFocus:this.const(_e({controller:this.controller,location:{type:"reduced-motion-cover",button:"stop"}})),children:()=>this.controller.s("graphing-calculator-button-stop-animations")})]})]})})})}};var{If:Lh,Show:Wme}=HA.Components,zw=class extends HA.View{init(){this.controller=this.props.controller()}settings(){return this.controller.getGraphSettings()}template(){return d("div",{class:this.const(__dcg_shared_module_exports__['G']),style:u("width: 100%; height: 100%; position: relative;"),onPaste:this.bindFn(this.onPaste),children:_("div",{class:()=>({"dcg-container":!0,"dcg-fullscreen":!this.controller.isListVisible(),"dcg-narrow":this.controller.isNarrow(),"dcg-projector-mode":this.settings().config.projectorMode,"dcg-inverted-colors":!!this.settings().config.invertedColors,"dcg-inverted-swatches":this.controller.invertSwatches(),"dcg-EDIT-LIST-MODE":this.controller.isInEditListMode(),"dcg-no-graphpaper":!this.settings().config.graphpaper,"dcg-no-branding":!this.settings().config.branding,"dcg-no-expression-topbar":!this.settings().config.expressionsTopbar,"dcg-default-border":!!this.settings().config.border,"dcg-no-hyperlinks":!this.settings().config.links,"dcg-has-background-color":this.controller.hasBackgroundColor()}),style:()=>({"font-size":this.settings().config.fontSize+"px",background:this.controller.hasTransparentBackground()?"none":void 0,"--dcg-custom-background-color":this.controller.hasBackgroundColor()?this.controller.getBackgroundColor():void 0,"--dcg-custom-background-color-shaded":this.controller.hasBackgroundColor()?__dcg_shared_module_exports__['Fd'](this.controller.getBackgroundColor(),-.07):void 0,"--dcg-custom-text-color":this.controller.hasTextColor()?this.controller.getTextColor():void 0,"--dcg-custom-text-color-shaded":this.controller.hasTextColor()?__dcg_shared_module_exports__['Fd'](this.controller.getTextColor(),-.2):void 0,"--dcg-checkbox-outline-color":this.controller.hasBackgroundColor()?this.controller.getBackgroundColor():void 0,"--dcg-accent-color":this.controller.getAccentColor(),"--dcg-accent-color-shaded-10":__dcg_shared_module_exports__['Fd'](this.controller.getAccentColor(),-.1),"--dcg-accent-color-shaded-20":__dcg_shared_module_exports__['Fd'](this.controller.getAccentColor(),-.2)}),role:u("application"),"aria-label":()=>this.controller.isGeometry()?this.controller.s("graphing-calculator-narration-main-desmos-geometry"):this.controller.s("graphing-calculator-narration-main-desmos-graphing-calculator"),"x-ms-format-detection":u("none"),didMount:this.bindFn(this.didMountRoot),children:[d(Lh,{predicate:()=>this.controller.getGraphSettings().config.expressions,children:()=>d(Nw,{controller:this.props.controller})}),d(Lh,{predicate:()=>this.controller.isListEnabled()&&!this.controller.isListVisible()&&(!this.controller.isGeometry()||this.controller.isNarrow()),children:()=>d("div",{class:()=>({"dcg-overgraph-icon-container":!0,"dcg-bottom-right":this.controller.isNarrow()}),children:d(Re,{tooltip:()=>this.controller.s("graphing-calculator-label-tooltip-show-list"),gravity:()=>this.controller.isNarrow()?"n":"s",children:d("div",{class:()=>({"dcg-show-expressions-tab":!0,"dcg-overgraph-icon":!0,"dcg-rotated":this.controller.isNarrow()}),"aria-label":()=>this.controller.s("graphing-calculator-label-tooltip-show-list"),role:u("button"),tabIndex:u("0"),onTap:e=>{this.controller.dispatch({type:"show-expressions-list",focusHideIcon:e.device==="keyboard"})},manageFocus:this.const(_e({controller:this.controller,location:{type:"show-expression-list-btn"}})),children:d("i",{class:u("dcg-icon-show"),"aria-hidden":u("true")})})})})}),d(yM,{controller:this.props.controller}),d(kA,{controller:this.props.controller}),d(Lh,{predicate:()=>this.controller.isGeoUIActive()&&this.controller.getGraphSettings().config.settingsMenu&&this.controller.isGraphSettingsOpen(),children:()=>d(Vw,{controller:this.props.controller})}),d(Lh,{predicate:()=>this.controller.shouldShowGeoToolbar(),children:()=>d(rM,{controller:this.props.controller})}),d(wM,{controller:this.props.controller,toastData:()=>this.controller.toastData,onClose:()=>this.controller.dispatch({type:"toast/close"}),onUndo:()=>this.controller.dispatch({type:"toast/undo"}),onLearnMore:()=>this.controller.dispatch({type:"toast/learn-more"})}),d("div",{class:u("dcg-grapher dcg-grapher-2d"),style:()=>({visibility:this.controller.isThreeDMode()?"hidden":"visible","pointer-events":this.controller.isThreeDMode()?"none":"auto"})}),d(Lh,{predicate:()=>this.controller.is3dProduct(),children:()=>d("div",{class:u("dcg-grapher dcg-grapher-3d"),style:()=>({visibility:this.controller.isThreeDMode()?"visible":"hidden","pointer-events":this.controller.isThreeDMode()?"auto":"none"})})}),d(BA,{...this.props}),d(zA,{...this.props}),d(Wme,{when:()=>this.controller.wizardModel.isWizardOpen(),children:d("div",{class:u("dcg-add-inference-wizard__graph-cover"),style:()=>({left:this.controller.computeMajorLayout().grapher.left+"px",top:this.controller.computeMajorLayout().grapher.top+"px",width:this.controller.computeMajorLayout().grapher.width+"px",height:this.controller.computeMajorLayout().grapher.height+"px"}),onTap:()=>{this.controller.dispatch({type:"close-inference-wizard"})}})}),d(Lh,{predicate:()=>this.settings().config.showPerformanceMeter&&!!this.props.controller().getGrapher(),children:()=>d(NA,{controller:this.props.controller})}),d(Lh,{predicate:()=>this.controller.getGraphSettings().config.keypad,children:()=>d(Q_,{controller:this.props.controller})})]})})}didMountRoot(e){yy(e),this.controller.getGraphSettings().config.disableScrollFix||eM(e),this.setupFileDragDrop(e)}setupFileDragDrop(e){ZF(e);let t=new Set,o=this;function i(){t=new Set,re(e).off(".filedraggedover"),o.controller.dispatch({type:"file-is-not-dragged-over"})}re(e).on("dragenter",n=>{this.controller.areImagesEnabled()&&(n.target.closest(".dcg-notice")||(t.size===0&&re(e).on("dcg-tapstart.filedraggedover",i),t=t.add(n.target),this.controller.dispatch({type:"file-is-dragged-over"})))}).on("dragleave",n=>{t.delete(n.target),t.size===0&&i()}).on("drop",i)}onPaste(e){let t=rb(e);if(!t)return;let o=qe.getFocusedMathquill();if(!o)return;let i=TM(t);i&&i.length===1&&i[0].numberList&&(e.stopPropagation(),e.preventDefault(),o.write(i[0].content),qe.simulateUserChangedLatex(o))}};Vt();__dcg_shared_module_exports__['H']();var KA=class{constructor(e){this.workerPool=e,this.guid=__dcg_shared_module_exports__['v']("worker-pool-connection"),this.worker=e.allocateWorker(),this.worker.__connections[this.guid]=this}destroy(){this.sendMessage({type:"destroy"}),delete this.worker.__connections[this.guid]}killWorker(){this.worker.__isFake||this.workerPool.killWorker(this.worker)}onWorkerKilled(){}onResponse(e){}sendMessage(e){this.worker.__isFake?this.worker.postMessage(e):this.worker.postMessage({connectionId:this.guid,originalMessage:e})}};var WA=class{constructor(e){this.onChangeSetChanged=e;this.changeSet=null;this.cumulativeChangeSet={};this.changed=!1}hasPendingChanges(){return!!this.changeSet}pendingChangesAreCompleteState(){return!!this.changeSet&&this.changeSet.isCompleteState}pendingChangesSyncId(){var e;return(e=this.changeSet)==null?void 0:e.syncId}popChangeSet(){let e=this.changeSet;return this.changeSet=null,this.changed=!1,e}applyToChangeSets(e){this.changed=!0,this.changeSet||(this.changeSet={}),this.cumulativeChangeSet||(this.cumulativeChangeSet={}),e(this.changeSet),e(this.cumulativeChangeSet),this.onChangeSetChanged()}_clearStatementsAndStartCompleteState(){this.applyToChangeSets(e=>{e.isCompleteState=!0,delete e.statements})}markDroppedJob(){this.changeSet=__dcg_shared_module_exports__['Uc'](this.cumulativeChangeSet),this.changed=!0}markWorkerKilledWhileIdle(){this.changeSet=__dcg_shared_module_exports__['Uc'](this.cumulativeChangeSet),this.changed=!1}markSyncId(e){this.applyToChangeSets(t=>{t.syncId=e})}markUndoRedoState(){this.applyToChangeSets(e=>{e.isUndoRedoState=!0})}addStatement(e){this.applyToChangeSets(t=>{t.statements||(t.statements={}),t.statements[e.id]=__dcg_shared_module_exports__['Uc'](e)})}removeStatement(e){this.applyToChangeSets(t=>{t.statements||(t.statements={}),t.removes||(t.removes={}),delete t.statements[e],t.removes[e]=!0})}addActionStepEvent(e){this.applyToChangeSets(t=>{t.events||(t.events=[]),t.events.push({type:"step",expressionId:e})})}addClockTickEvent(e,t){this.applyToChangeSets(o=>{o.events||(o.events=[]),o.events.push({type:"clock-tick",id:e,isFirstTick:t})})}addClickEvent(e,t){this.applyToChangeSets(o=>{o.events||(o.events=[]),t===void 0&&(t=0),o.events.push({type:"click",expressionId:e,indexVar:t})})}_applyIfChanged(e,t){let o=this.cumulativeChangeSet&&this.cumulativeChangeSet[t],i=e[t];__dcg_shared_module_exports__['s'](o,i)||this.applyToChangeSets(n=>{n[t]=i})}_applyIfChangedToExternal(e,t,o){var a,s,l;let i=(l=(s=(a=this.cumulativeChangeSet)==null?void 0:a.rootModuleConfigs)==null?void 0:s[e])==null?void 0:l[o],n=t[o];__dcg_shared_module_exports__['s'](i,n)||this.applyToChangeSets(c=>{var p,h,g;(p=c.rootModuleConfigs)!=null||(c.rootModuleConfigs={}),(g=(h=c.rootModuleConfigs)[e])!=null||(h[e]={}),c.rootModuleConfigs[e][o]=n})}};var $me=4e3,jme=250,Yme=500,WG=class{constructor(e){this.droppedMessage=!1;this.__hasBufferedProgressUpdates=!1;this.evaluationProgressById=new Map;this.lastProgressUpdateTime=-1;this.requestedIntentionalRestart=!1;this.debouncedRestart=__dcg_shared_module_exports__['q'](()=>{this.requestedIntentionalRestart=!0,this.restartWorker()},jme);this.__ticksEnabled=!0;this.listeners={evaluatorProgressUpdate(e){this.lastProgressUpdateTime=Date.now(),e.ids.forEach(t=>this.evaluationProgressById.set(t,e.update)),this.__hasBufferedProgressUpdates=!0},changeSetResult(e){this.clearProgressUpdates();let t={},o={};for(let l in e.graphChanges){let c=e.graphChanges[l];c===void 0?o[l]=!0:(__dcg_shared_module_exports__['Ac'](c),t[l]=c)}let i={};for(let l in e.intersectionChanges)o[l]||(i[l]=e.intersectionChanges[l]);let n=this.changeSets.hasPendingChanges(),a=e.eventUpdates;a&&this.finalShouldBlockEventUpdates(a)&&(a=void 0),this.reportEvaluatorResults({evaluationStates:e.statusChanges,graphData:{addedGraphs:t,removedGraphs:o,intersections:i,plottedModules:e.plottedModules},renderSlowly:!!e.isCompleteState,timingData:e.timingData,eventUpdates:a,dependencyOrder:e.dependencyOrder,importStatementIds:e.importStatementIds});let s=e.syncId;for(;this.syncRequests.length&&s!==void 0&&this.syncRequests[0].id<=s;)this.syncRequests.shift().callback();this.markJobFinished(),n&&this.sendProcessChangeSet()}};this.changeSets=new WA(()=>this.requestProcessChangeSet()),this.syncId=1,this.syncRequests=[],this.workerPool=e,this.createWorkerPoolConnection()}privateGetWorkerPool(){return this.workerPool}privateGetWorkerPoolConnection(){return this.workerPoolConnection}createWorkerPoolConnection(){this.workerPoolConnection&&(this.workerPoolConnection.onResponse=function(){},this.workerPoolConnection.onWorkerKilled=function(){}),this.workerPoolConnection=new KA(this.workerPool),this.markJobFinished(),this.workerPoolConnection.onResponse=e=>{if(this.shouldIgnoreWorkerMessage(e))e.type==="changeSetResult"&&(this.markJobFinished(),this.sendProcessChangeSet());else switch(e.type){case"changeSetResult":this.listeners.changeSetResult.call(this,e.payload);break;case"evaluatorProgressUpdate":this.listeners.evaluatorProgressUpdate.call(this,e.payload);break;default:throw new Error(`Invalid message type ${e==null?void 0:e.type}`)}},this.workerPoolConnection.onWorkerKilled=()=>{this.cancelRestartWorker();let e=this.hasJobInWorker();this.createWorkerPoolConnection(),e?(this.changeSets.markDroppedJob(),this.droppedMessage=!this.requestedIntentionalRestart):this.changeSets.markWorkerKilledWhileIdle(),this.clearProgressUpdates(),this.requestProcessChangeSet(),this.requestedIntentionalRestart=!1}}destroy(){this.workerPoolConnection&&(this.workerPoolConnection.onResponse=function(){},this.workerPoolConnection.onWorkerKilled=function(){},this.workerPoolConnection.destroy())}restartWorker(){this.workerPoolConnection.killWorker()}requestRestartWorker(){this.debouncedRestart()}cancelRestartWorker(){this.debouncedRestart.cancel()}shouldIgnoreWorkerMessage(e){return this.__suspendUntilSyncId?!e||!e.payload||e.type==="evaluatorProgressUpdate"||e.payload.syncId===void 0?!0:!(e.payload.syncId>=this.__suspendUntilSyncId):!1}suspend(){this.clearProgressUpdates(),this.changeSets.pendingChangesSyncId()===void 0&&(this.syncId++,this.changeSets.markSyncId(this.syncId)),this.__suspendUntilSyncId=this.changeSets.pendingChangesSyncId()}markJobFinished(){this.droppedMessage=!1,this.__jobStartTime=-1,this.__suspendUntilSyncId=void 0}startJobTimer(){this.__jobStartTime=Date.now()}hasJobInWorker(){return this.__jobStartTime!==-1}getJobElapsedTime(){return this.hasJobInWorker()?Date.now()-this.__jobStartTime:NaN}setTicksEnabled(e){this.__ticksEnabled=e}tick(){var e;this.__ticksEnabled&&(this.__hasBufferedProgressUpdates&&((e=this.onEvaluatorProgressUpdate)==null||e.call(this)),this.__hasBufferedProgressUpdates=!1,this.sendProcessChangeSet())}requestProcessChangeSet(){this.__processChangeSetRequested=!0}sendProcessChangeSet(){var t;if(this.syncEvaluatorConfig(),!this.__processChangeSetRequested)return;let e=this.getJobElapsedTime()>=$me;if(this.droppedMessage&&e){this.restartWorker();return}this.changeSets.changed&&this.changeSets.hasPendingChanges()&&(this.changeSets.pendingChangesSyncId()===void 0&&(this.syncId++,this.changeSets.markSyncId(this.syncId)),this.hasJobInWorker()?this.changeSets.pendingChangesAreCompleteState()&&e&&this.restartWorker():(this.startJobTimer(),this.workerPoolConnection.sendMessage(this.popChangeSet()),this.__processChangeSetRequested=!1,(t=this.clearSlowEvaluatorTracking)==null||t.call(this)))}notifyWhenSynced(e){if(this.syncEvaluatorConfig(),!this.hasJobInWorker()&&!this.changeSets.hasPendingChanges()){setTimeout(e,0);return}this.syncId++,this.syncRequests.push({id:this.syncId,callback:e}),this.changeSets.markSyncId(this.syncId)}clearStatementsAndStartCompleteState(){this.hasJobInWorker()&&this.suspend(),this.changeSets._clearStatementsAndStartCompleteState()}clearProgressUpdates(){this.evaluationProgressById=new Map,this.__hasBufferedProgressUpdates=!1}isCurrentlySlow(){return this.lastProgressUpdateTime>-1&&Date.now()-this.lastProgressUpdateTime>=Yme}markUndoRedoState(){this.changeSets.markUndoRedoState()}popChangeSet(){return this.changeSets.popChangeSet()}},Np=class extends WG{addStatement(e){this.changeSets.addStatement(e)}removeStatement(e){this.changeSets.removeStatement(e)}addClockTickEvent(e,t){this.changeSets.addClockTickEvent(e,t)}addActionStepEvent(e){this.changeSets.addActionStepEvent(e)}addClickEvent(e,t){this.changeSets.addClickEvent(e,t)}finalShouldBlockEventUpdates(e){var t,o;return(o=(t=this.shouldBlockEventUpdates)==null?void 0:t.call(this,__dcg_shared_module_exports__['fe'](e,__dcg_shared_module_exports__['de'])))!=null?o:!1}reportEvaluatorResults(e){this.onEvaluatorResults&&this.onEvaluatorResults({...e,eventUpdates:e.eventUpdates?__dcg_shared_module_exports__['fe'](e.eventUpdates,__dcg_shared_module_exports__['de']):void 0})}syncEvaluatorConfig(){if(!this.readEvaluatorConfig)return;let e=this.readEvaluatorConfig();for(let t of __dcg_shared_module_exports__['A'](e))this.changeSets._applyIfChanged(e,t)}};Vt();var qw=class{constructor(e){this.previousPaneFocusLocations={main:void 0,quest:void 0,addInferenceWizard:void 0};this.controller=e}markKeyDownAsHandled(e){e.stopPropagation(),e.preventDefault()}exitBraille(){this.controller.dispatch({type:"set-braille-mode",mode:"none"}),Te(this.controller.s("shared-calculator-narration-hotkey-braille-mode-off"))}handleKeydown(e){var n,a,s,l,c,p,h;let t=Pe(e),o=co(e),i=!this.controller.isUndoRedoDisabledForNotebook();if(uy(e)&&i)this.markKeyDownAsHandled(e),this.controller.hasVisibleAndUndoableToast()?this.controller.dispatch({type:"toast/undo"}):this.controller.dispatch({type:"undo"});else if(hy(e)&&i)this.markKeyDownAsHandled(e),this.controller.dispatch({type:"redo"});else if(e.altKey&&!e.ctrlKey&&!e.metaKey&&e.shiftKey&&o==="Z"){let g=this.controller.getSelectedItem();g&&g.id&&this.controller.showExpressionZoomFitButton(g)&&(this.markKeyDownAsHandled(e),this.controller.dispatch({type:"expression-zoom-fit",id:g.id,focusAfterTap:!1}))}else if(e.altKey!==lo&&e.metaKey===lo&&!e.ctrlKey&&e.shiftKey&&o==="A"&&this.controller.isDecimalToFractionEnabled()){let g=this.controller.getSelectedItem();g&&g.type==="expression"&&(this.markKeyDownAsHandled(e),this.controller.dispatch({type:"toggle-fraction-evaluation",id:g.id}),this.controller.runAfterDispatch(()=>{Nd(g)?Te(this.controller.s("shared-calculator-narration-show-as-fraction")):Te(this.controller.s("shared-calculator-narration-show-as-decimal"))}))}else if(!e.altKey&&e.ctrlKey!==lo&&e.metaKey===lo&&o==="F"){if(this.controller.isExpressionListFocused()){let g=qe.getFocusedMathquill(),m="";try{m=g.__controller.cursor.selection.join("latex")||""}catch(b){}this.controller.dispatch({type:"open-expression-search",rename:!!e.shiftKey,latex:m}),this.markKeyDownAsHandled(e)}}else if((e.altKey||e.metaKey)&&!e.ctrlKey&&!e.shiftKey&&o===void 0){if(t==="Up"||t==="Down"){let g=t==="Up",m=this.controller.getSelectedItem();if(!m)return;let b=m.type==="folder"?m.id:m.folderId;b&&b!==__dcg_shared_module_exports__['je']&&(this.markKeyDownAsHandled(e),this.controller.dispatch({type:"set-folder-collapsed",id:b,isCollapsed:g}),Te(g?this.controller.s("graphing-calculator-narration-folder-collapsed"):this.controller.s("graphing-calculator-narration-folder-expanded")),this.controller.dispatch({type:"set-focus-location",location:{type:"folder",id:b}}))}}else if(e.shiftKey&&(e.altKey||e.metaKey)&&!e.ctrlKey){if(t==="Up")this.markKeyDownAsHandled(e),this.controller.dispatch({type:"set-all-folders-collapsed",isCollapsed:!0}),Te(this.controller.s("graphing-calculator-narration-all-folders-collapsed"));else if(t==="Down")this.markKeyDownAsHandled(e),this.controller.dispatch({type:"set-all-folders-collapsed",isCollapsed:!1}),Te(this.controller.s("graphing-calculator-narration-all-folders-expanded"));else if(o==="H"){let g=this.controller.getSelectedItem();g&&"hidden"in g&&(this.markKeyDownAsHandled(e),this.controller.dispatch({type:"toggle-item-hidden",id:g.id}),this.controller.runAfterDispatch(()=>{g.hidden?Te(this.controller.s("graphing-calculator-narration-item-hidden")):Te(this.controller.s("graphing-calculator-narration-item-visible"))}))}else if(o==="O"){if(!this.controller.authorFeaturesAvailable())return;this.controller.dispatch({type:"set-author-mode",enabled:!this.controller.shouldShowAuthorFeatures()}),Te(this.controller.shouldShowAuthorFeatures()?this.controller.s("shared-calculator-narration-author-mode-on"):this.controller.s("shared-calculator-narration-author-mode-off")),this.markKeyDownAsHandled(e)}else if(o==="E"){if(!this.controller.isListEnabled())return;this.controller.isListVisible()?(this.controller.dispatch({type:"hide-expressions-list",focusShowIcon:!1}),Te(this.controller.s("graphing-calculator-narration-hide-expression-list"))):(this.controller.dispatch({type:"show-expressions-list",focusHideIcon:!1}),this.focusExpressionList()),this.markKeyDownAsHandled(e)}}else if(e.ctrlKey&&(e.altKey||e.metaKey)&&!e.shiftKey){if(o==="E"){if(!this.controller.isListEnabled())return;this.markKeyDownAsHandled(e),this.focusExpressionList()}else if(o==="X"){if(!this.controller.isListEnabled())return;this.markKeyDownAsHandled(e),this.controller.canUserAddExpressions()?(Te(this.controller.s("graphing-calculator-narration-add-expression")),this.controller.dispatch({type:"new-expression"})):Te(this.controller.s("graphing-calculator-narration-unable-to-add-expression"))}else if(o==="O"){if(!this.controller.isListEnabled())return;this.markKeyDownAsHandled(e),this.controller.canUserAddExpressions()&&this.controller.areNotesEnabled()?(Te(this.controller.s("graphing-calculator-narration-add-note")),this.controller.dispatch({type:"new-note"})):Te(this.controller.s("graphing-calculator-narration-unable-to-add-note"))}else if(o==="F"&&this.controller.canUserAddExpressions()&&this.controller.areFoldersEnabled())this.markKeyDownAsHandled(e),Te(this.controller.s("graphing-calculator-narration-add-folder")),this.controller.dispatch({type:"new-folder"});else if(o==="I"&&this.controller.canUserAddExpressions()&&this.controller.areImagesEnabled())this.markKeyDownAsHandled(e),this.controller.dispatch({type:"toggle-add-expression",focusOnOpen:!1}),this.controller.runAfterDispatch(()=>{let g=this.controller.findEl(".dcg-add-expression-container input[type=file]");g&&(re(g).trigger("click"),Te(this.controller.s("graphing-calculator-narration-add-image")))});else if(o==="T")this.markKeyDownAsHandled(e),this.controller.canUserAddExpressions()?(Te(this.controller.s("graphing-calculator-narration-add-table")),this.controller.dispatch({type:"new-table"})):Te(this.controller.s("graphing-calculator-narration-unable-to-add-table"));else if(o==="R"){let g=this.controller.getSelectedItem();if(!this.controller.isListEnabled())return;this.markKeyDownAsHandled(e),this.controller.canUserAddExpressions()&&g&&this.controller.shouldShowRegressionButton(g)?(Te(this.controller.s("graphing-calculator-button-add-table-regression")),this.controller.dispatch({type:"create-table-regression",tableId:g.id,regressionType:"linear"})):Te(this.controller.s("graphing-calculator-narration-unable-to-add-table-regression"))}else if(o==="M"&&this.controller.isGeoUIActive())if(this.markKeyDownAsHandled(e),this.controller.getGeoToolbarGroupKeys().length>0){let g=this.controller.getActiveTool();this.controller.shouldShowMultiSelectHeader()?this.controller.dispatch({type:"set-focus-location",location:{type:"geo-header-back-link"}}):(g==="expression-edit"&&(g="selection"),this.controller.dispatch({type:"set-focus-location",location:{type:"geo-basic-tool",tool:g}}))}else Te(this.controller.s("graphing-calculator-narration-no-geometry-tools-available"));else if(o==="C"&&this.controller.isGeoUIActive())this.markKeyDownAsHandled(e),this.controller.getGeometryTokenCount()>0?this.controller.dispatch({type:"set-show-constructions-open",open:!0,setFocus:!0}):Te(this.controller.raw("Object navigator has no items."));else if(o==="G")this.markKeyDownAsHandled(e),this.controller.dispatch({type:"toggle-graph-settings",focusOnOpen:!0});else if(o==="P"){if(this.markKeyDownAsHandled(e),this.controller.isGeometry()){let g=this.controller.getFocusLocation(),m=this.controller.getValidCursorContext();if(g&&g.type==="expression"&&m&&m.type!=="empty"){this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:g.id,isFakeGraphFocus:!0}}),(a=(n=this.controller.getGrapher2d())==null?void 0:n.poiController)==null||a.keyboardAttentionManager.handleGrapherGainedFocus();return}}this.controller.getShowInvalidBoundsCover()?this.controller.dispatch({type:"set-focus-location",location:{type:"invalid-graph-bounds-cover"}}):this.controller.dispatch({type:"set-focus-location",location:{type:"graph-paper"}})}else if(o==="D"&&this.controller.canUserAddExpressions()){this.markKeyDownAsHandled(e);let g=!this.controller.isInEditListMode();this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:g,focusExpressionList:!0})}}else if(hP(e)){this.stashPaneLocation(this.controller.focusLocation),this.controller.getQuestIsActive()&&((s=this.controller.focusLocation)==null?void 0:s.type)==="quest"||((l=this.controller.focusLocation)==null?void 0:l.type)==="add-inference-wizard"?this.previousPaneFocusLocations.main?this.controller.dispatch({type:"set-focus-location",location:this.previousPaneFocusLocations.main}):this.focusExpressionList():this.controller.getQuestIsActive()?this.controller.dispatch({type:"set-focus-location",location:(c=this.previousPaneFocusLocations.quest)!=null?c:{type:"quest",location:"quest-pane"}}):this.controller.dispatch({type:"set-focus-location",location:(p=this.previousPaneFocusLocations.addInferenceWizard)!=null?p:{type:"add-inference-wizard",subtype:"wizard-pane"}}),this.markKeyDownAsHandled(e);return}else if(!e.altKey&&e.ctrlKey&&!e.metaKey&&e.shiftKey&&o==="L"){this.markKeyDownAsHandled(e),this.controller.dispatch({type:"clear-graph"});return}else if(!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey){if(t==="Backspace")(!document.activeElement||!Sc(document.activeElement))&&e.preventDefault();else if(t==="Esc"&&!this.controller.getOpenItemMenu()&&!this.controller.isGraphSettingsOpen()){if(this.controller.isGeoUIActive()){let g=!1,m=this.controller.getGeoModel();if(this.controller.hasAnyItemsSelected()&&(this.controller.dispatch({type:"set-none-selected"}),g=!0),m.isToolplayActive()&&(this.controller.dispatch({type:"cancel-geo-toolplay"}),Te(this.controller.s("graphing-calculator-narration-geometry-tool-cancelled")),g=!0),this.controller.isGraphPaperFocused()&&(this.controller.dispatch({type:"set-focus-location",location:{type:"geo-basic-tool",tool:this.controller.getActiveTool()}}),g=!0),this.controller.getActiveTool()!=="selection"&&!g){this.controller.dispatch({type:"select-geo-tool",tool:"selection"});let b=this.controller.getFocusLocation();b&&b.type==="geo-basic-tool"&&this.controller.dispatch({type:"set-focus-location",location:{type:"geo-basic-tool",tool:this.controller.getActiveTool()}}),g=!0}if(g){this.markKeyDownAsHandled(e);return}}this.controller.isInEditListMode()&&!this.controller.findEl(".dcg-options-menu")&&(this.markKeyDownAsHandled(e),this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!1,focusExpressionList:!0}))}}else if(!e.metaKey&&!e.shiftKey&&e.ctrlKey===lo&&e.altKey===!lo){if(o==="N"){if(!this.controller.getBrailleControls())return;if(this.markKeyDownAsHandled(e),this.controller.getBrailleMode()==="nemeth"){this.exitBraille();return}this.controller.dispatch({type:"set-braille-mode",mode:"nemeth"}),Te(this.controller.s("shared-calculator-narration-hotkey-braille-mode-nemeth"))}else if(o==="U"){if(!this.controller.getBrailleControls())return;if(this.markKeyDownAsHandled(e),this.controller.getBrailleMode()==="ueb"){this.exitBraille();return}this.controller.dispatch({type:"set-braille-mode",mode:"ueb"}),Te(this.controller.s("shared-calculator-narration-hotkey-braille-mode-ueb"))}else if(o==="Q"||o==="X"){if(!this.controller.getBrailleControls())return;this.markKeyDownAsHandled(e),this.exitBraille()}else if(o==="6"){if(this.controller.inAudioTraceMode()||!this.controller.getBrailleControls())return;this.markKeyDownAsHandled(e);let g=!this.controller.getSixKeyInput();this.controller.dispatch({type:"set-six-key-input",useSixKeyInput:g}),Te(g?this.controller.s("shared-calculator-narration-six-key-mode-on"):this.controller.s("shared-calculator-narration-six-key-mode-off"))}else if(o==="D"){if(this.controller.isComplexModeEnabled()){Te(this.controller.s("shared-calculator-text-complex-radian-mode"));return}this.markKeyDownAsHandled(e),this.controller.dispatch({type:"set-graph-settings",degreeMode:!this.controller.getGraphSettings().degreeMode}),Te(this.controller.getGraphSettings().degreeMode?this.controller.s("graphing-calculator-button-settings-degrees"):this.controller.s("graphing-calculator-button-settings-radians"))}else if(o==="K"){if(!this.controller.isKeypadEnabled()||this.controller.inAudioTraceMode())return;this.markKeyDownAsHandled(e),this.controller.dispatch({type:"keypad/set-minimized",minimized:this.controller.isHideKeypadButtonVisible()})}else o==="M"&&((h=this.controller.toneController)==null||h.handleMuteKeyShortcut(),this.markKeyDownAsHandled(e));if((o==="+"||o==="=")&&this.controller.shouldShowZoomInOutButtonsIfSpace()){this.zoom("in"),this.markKeyDownAsHandled(e);return}else if(o==="-"&&this.controller.shouldShowZoomInOutButtonsIfSpace()){this.zoom("out"),this.markKeyDownAsHandled(e);return}else if(o==="0"&&!e.shiftKey&&this.controller.shouldShowZoomHomeButtonIfSpace()){this.setDefaultViewport(),this.markKeyDownAsHandled(e);return}}}focusExpressionList(){let e=this.controller.getSelectedItem();e?this.controller.dispatch({type:"move-focus-to-item",id:e.id}):this.controller.dispatch({type:"focus-first-expression"})}zoom(e){var t;(t=this.controller.getGrapher())==null||t.viewportController.zoom(e)}setDefaultViewport(){var e;(e=this.controller.getGrapher())==null||e.viewportController.setDefaultViewport()}stashPaneLocation(e){(e==null?void 0:e.type)==="quest"?this.previousPaneFocusLocations.quest=e:(e==null?void 0:e.type)==="add-inference-wizard"?this.previousPaneFocusLocations.addInferenceWizard=e:this.previousPaneFocusLocations.main=e}};function JX(r){let e={},t=new __dcg_shared_module_exports__['_e'](o);function o(i,n){r(structuredClone({type:i,payload:n}))}return e.postMessage=function(i){setTimeout(()=>{t.processChangeSet(structuredClone(i))},0)},e}var $G=0;function ZX(r,e){return r?function(t){var i,n;let o=((n=(i=t.data)==null?void 0:i.originalMessage)==null?void 0:n.type)==="evaluatorProgressUpdate"?0:r;$G=Math.max(Date.now(),$G)+o,setTimeout(e,$G-Date.now(),t)}:e}var jA=class{constructor(e){this.workers=[];this.fakeWorkers=[];this.workerThrottle=0;this.maxWorkers=e}setConfig(e){let t={maxWorkers:this.maxWorkers,workerThrottle:this.workerThrottle};if(!__dcg_shared_module_exports__['s'](t,e)){this.maxWorkers=e.maxWorkers,this.workerThrottle=e.workerThrottle;for(let o of this.workers)this.killWorker(o);for(let o of this.fakeWorkers)this.killWorker(o)}}allowedToSpawnWorker(){return!!__dcg_worker_source_exports__['createWorker']&&this.workers.length<this.maxWorkers}killWorker(e){if(__dcg_shared_module_exports__['n'](this.workers,e)!==-1)e.terminate(),this.workers=this.workers.filter(o=>o!==e),__dcg_shared_module_exports__['h'](Object.values(e.__connections)).forEach(o=>{o&&o.onWorkerKilled&&o.onWorkerKilled()});else if(this.fakeWorkers.includes(e)){this.fakeWorkers=this.fakeWorkers.filter(o=>o!==e);for(let o of Object.values(e.__connections))o.onWorkerKilled()}}spawnWorker(){if(!__dcg_worker_source_exports__['createWorker'])return null;try{let e=__dcg_worker_source_exports__['createWorker']();return e.__connections={},e.__isFake=!1,e.onerror=function(t){console.log(t)},e.addEventListener("message",ZX(this.workerThrottle,t=>{let o=t.data;if(!(o&&o.log)&&o&&o.connectionId){let i=e.__connections[o.connectionId];i&&i.onResponse(o.originalMessage)}})),this.workers.push(e),e}catch(e){return null}}spawnFakeWorker(){let e=JX(ZX(this.workerThrottle,t=>{let o=Object.values(e.__connections)[0];o&&o.onResponse(t)}));return e.__isFake=!0,e.__connections={},this.fakeWorkers.push(e),e}findLeastUsedWorker(){let e=function(o){return Object.keys(o.__connections).length};return __dcg_shared_module_exports__['i'](this.workers,e)[0]}allocateWorker(){let e=null;return this.allowedToSpawnWorker()&&(e=this.spawnWorker()),e||(e=this.findLeastUsedWorker()),e||(e=this.spawnFakeWorker()),e}};var Xme=4,Jme=new jA(Xme),ub=Jme;function QX(r){let{left:e,right:t,bottom:o,top:i}=r;return{left:e,right:t,bottom:o,top:i,xmin:e,xmax:t,ymin:o,ymax:i,width:Math.abs(t-e),height:Math.abs(i-o)}}var Zme=0,Hw=class{constructor(e,t,o){let i=(o==null?void 0:o.evaluator)||new Np(ub);e||(e=document.createElement("div"));let n=document.createElement("div");n.className="dcg-dom-change-wrapper",n.style.width="100%",n.style.height="100%",e.appendChild(n),this.__id=Zme++;let a=Kc.fromConfig(t);this.graphSettings=a;let s=new Ah({graphSettings:a,movablePointControllerBuilder:o==null?void 0:o.movablePointControllerBuilder});this.controller=s,this.rootElt=n,this.view=hb.mountToNode(zw,this.rootElt,{controller:hb.const(s)}),this.controller.setEvaluator(i),this.controller.setRootElt(this.rootElt);let l=this.controller.findEl(".dcg-grapher-2d"),c=new sh(l,a,this.controller,i);if(this.controller.setGrapher2d(c),this.controller.is3dProduct()){let g=this.controller.findEl(".dcg-grapher-3d"),m=new U_(g,a,this.controller,i);this.controller.setGrapher3d(m),this.grapher=m}else this.grapher=c;this.controller.initStateStack(),i.readEvaluatorConfig=()=>{var g,m,b;return{product:a.config.product,beta3d:a.config.beta3d,evaluationMode:s.isGeometry()?"geometry":this.controller.isThreeDMode()?"graphing_3d":"graphing",globalRandomSeed:a.randomSeed,includeFunctionParametersInRandomSeed:a.includeFunctionParametersInRandomSeed,degreeMode:s.getDegreeMode(),viewState:s.getViewState(),selectedIds:s.getPropagatedSelectedIds().selected,restrictedFunctions:a.config.restrictedFunctions,forceEnableGeometryFunctions:a.config.forceEnableGeometryFunctions,distributions:a.config.distributions,pointsOfInterest:a.config.pointsOfInterest,plotSingleVariableImplicitEquations:a.config.plotSingleVariableImplicitEquations,plotImplicits:a.config.plotImplicits,plotInequalities:a.config.plotInequalities,sliders:a.config.sliders,actions:!!a.config.actions,substitutions:a.config.substitutions,intervalComprehensions:a.config.intervalComprehensions,recursion:a.config.recursion,recursionDepthLimit:a.config.recursionDepthLimit,dimensions:s.getGrapherDimensions(),logInternalErrors:a.config.logInternalErrors,showIDs:a.config.showIDs,complex:s.isComplexModeEnabled(),customRegressions:a.config.customRegressions,rayCast:a.config.rayCast,ignoreCostEstimate:a.config.ignoreCostEstimate,maxFragmentUniformComponents:(b=(m=(g=this.controller.getGrapher3d())==null?void 0:g.webglLayer)==null?void 0:m.maxFragmentUniformComponents)!=null?b:0}},i.onEvaluatorProgressUpdate=()=>{this.controller.dispatch({type:"evaluator-progress-update"})},i.onEvaluatorResults=g=>{this.controller.dispatch({type:"on-evaluator-changes",changes:g.evaluationStates,timingData:g.timingData,graphData:g.graphData,eventUpdates:g.eventUpdates,dependencyOrder:g.dependencyOrder}),this.controller.requestRedrawGraph()},this.unsubFunc=this.controller.subscribeToChanges(()=>{this.controller.doesDOMHaveSize()&&(this.view.update(),this.grapher=this.controller.isThreeDMode()?this.controller.getGrapher3d()||this.controller.getGrapher2d():this.controller.getGrapher2d(),this.grapher.update());let g=!1;h()&&(g=!0),g&&this.controller.doesDOMHaveSize()&&(this.view.update(),this.grapher.update())});let p=new Mn({pixelCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0},mathCoordinates:QX({top:0,bottom:0,left:0,right:0})});this.graphpaperBounds=p;let h=()=>{let g=!1,m=s.computeMajorLayout(),b={left:m.grapher.left,right:m.grapher.left+m.grapher.width,width:m.grapher.width,top:m.grapher.top,bottom:m.grapher.top+m.grapher.height,height:m.grapher.height},x=this.grapher.getCurrentViewport(),E={...QX({left:x.xmin,right:x.xmax,bottom:x.ymin,top:x.ymax}),zmin:x.zmin,zmax:x.zmax};return __dcg_shared_module_exports__['s'](E,p.mathCoordinates)||(p.setProperty("mathCoordinates",E),g=!0),b.height>0&&b.width>0&&!__dcg_shared_module_exports__['s'](b,p.pixelCoordinates)&&(p.setProperty("pixelCoordinates",b),g=!0),g};re(this.rootElt).on("keydown.calculator-"+this.__id,g=>{this.grapher instanceof sh&&this.grapher.audioGraph.handleKeydown(g),this.instanceHotkeys.handleKeydown(g)}),re(document.documentElement).on("dcg-tapstart.calculator-"+this.__id,g=>{var k;let m=g.target,b=!!this.rootElt.contains(m),x=Or(g,"create-expression-with-keyboard"),E=!!m.classList.contains("dcg-shell");!b&&!E&&!x&&s.dispatch({type:"set-none-selected"});let S=(k=this.controller.getGrapher2d())==null?void 0:k.traceLayer;if(!Or(g,"do-not-clear-poi-labels")&&S&&(S.clearOpenedPOI(),this.controller.requestRedrawGraph()),s.isInEditListMode()){let T=!m.closest(".dcg-exppanel")&&!m.closest(".dcg-options-menu")&&!m.closest(".dcg-expression-top-bar")&&!m.closest(".dcg-keypad");(!b||T)&&s.dispatch({type:"set-edit-list-mode",isEditListMode:!1,focusExpressionList:!1})}}),this.evaluator=i,this.controller.dispatch({type:"set-blank",degreeMode:!!t.degreeMode}),a.config.expressionsCollapsed&&this.setOptions({expressionsCollapsed:!0}),a.config.capExpressionSize&&this.setOptions({capExpressionSize:!0}),a.config.hasOwnProperty("pointsOfInterest")&&this.setOptions({pointsOfInterest:a.config.pointsOfInterest}),a.config.hasOwnProperty("backgroundColor")&&this.setOptions({backgroundColor:a.config.backgroundColor}),a.config.hasOwnProperty("textColor")&&this.setOptions({textColor:a.config.textColor}),a.config.hasOwnProperty("accentColor")&&this.setOptions({accentColor:a.config.accentColor}),a.config.observe("language",()=>{let g=this.controller.getState();this.controller.dispatch({type:"set-state",state:g})}),a.config.observe("forceLogModeRegressions",()=>{a.config.forceLogModeRegressions&&this.controller.setAllRegressionsToLogMode()}),this.instanceHotkeys=new qw(s)}setOption(e,t){var o,i,n,a;if(this.controller.getGraphSettings().config.setProperty(e,t),e==="backgroundColor"&&((o=this.controller.getGrapher3d())==null||o.webglLayer.setBackgroundColor(this.graphSettings.getBackgroundColor())),e==="wireframe"&&((i=this.controller.getGrapher3d())==null||i.redrawAllLayers()),e==="raycastHeatmap"||e=="raycastDisableIntervals"){(n=this.controller.getGrapher3d())==null||n.redrawAllLayers();let s=(a=this.controller.getGrapher3d())==null?void 0:a.webglLayer;s&&(s.rayCastPassCache=new Yf)}}setOptions(e){let t,o=this.controller.getGraphSettings().config,i={...e};e.hasOwnProperty("backgroundColor")&&(__dcg_shared_module_exports__['Ed'](e.backgroundColor)||(console.warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)"),delete i.backgroundColor)),e.hasOwnProperty("textColor")&&(__dcg_shared_module_exports__['Ed'](e.textColor)||(console.warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)"),delete i.textColor)),e.hasOwnProperty("accentColor")&&(__dcg_shared_module_exports__['Ed'](e.accentColor)||(console.warn("Invalid accentColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)"),delete i.accentColor)),e.hasOwnProperty("menus")&&(console.warn("Deprecated option: menus. Setting settingsMenu and expressionsTopbar instead."),e.hasOwnProperty("settingsMenu")||(i.settingsMenu=!!e.menus),e.hasOwnProperty("expressionsTopbar")||(i.expressionsTopbar=!!e.menus),delete i.menus),e.hasOwnProperty("solutions")&&(console.warn("Deprecated option: solutions. Setting pointsOfInterest instead."),e.hasOwnProperty("pointsOfInterest")||(i.pointsOfInterest=!!e.solutions),delete i.solutions),e.hasOwnProperty("administerSecretFolders")&&(console.warn("Deprecated option: administerSecretFolders. Setting authorFeatures instead."),e.hasOwnProperty("authorFeatures")||(i.authorFeatures=!!e.administerSecretFolders),delete i.administerSecretFolders),e.hasOwnProperty("singleVariableSolutions")&&(console.warn("Deprecated option: singleVariableSolutions has been removed."),delete i.singleVariableSolutions),e.graphpaper===!1&&(e.expressionsCollapsed&&(i.expressionsCollapsed=!1,console.warn("Cannot set graphpaper: false with expressionsCollapsed: true. Proceeding with expressionsCollapsed: false.")),o.expressionsCollapsed&&(i.expressionsCollapsed=!1,console.warn("Disabling the graphpaper with the expressions list collapsed is not supported.Setting expressionsCollapsed: false.")),e.zoomButtons&&(i.zoomButtons=!1,console.warn("Cannot set graphpaper: false with zoomButtons: true. Proceeding with zoomButtons: false.")),e.showResetButtonOnGraphpaper&&(i.showResetButtonOnGraphpaper=!1,console.warn("Cannot set graphpaper: false with showResetButtonOnGraphpaper: true. Proceeding with showResetButtonOnGraphpaper: false.")),o.zoomButtons&&(i.zoomButtons=!1,console.warn("Disabling the graphpaper with the zoomButtons visible is not supported. Setting zoomButtons: false.")),o.showResetButtonOnGraphpaper&&(i.showResetButtonOnGraphpaper=!1,console.warn("Disabling the graphpaper with the reset button visible is not supported. Setting showResetButtonOnGraphpaper: false."))),o.graphpaper===!1&&(e.expressionsCollapsed||e.zoomButtons||e.showResetButtonOnGraphpaper)&&(i.graphpaper=!0,console.warn("Must have visible graphpaper to proceed. Setting graphpaper: true.")),e.lockViewport&&e.zoomButtons&&(i.zoomButtons=!1,console.warn("Cannot set zoomButtons: true and lockViewport: true. Proceeding with zoomButtons: false.")),o.lockViewport&&e.zoomButtons&&(i.lockViewport=!1,console.warn("Cannot set zoomButtons: true while the viewport is locked. Setting lockViewport: false.")),o.zoomButtons&&e.lockViewport&&(i.zoomButtons=!1,console.warn("Cannot lock the viewport without hiding the zoom buttons. Setting zoomButtons: false."));function n(p){let{notes:h,folders:g,images:m}=p;return h===!1||g===!1||m===!1}let a=n(e),s=n({...o,...e}),l=o.pasteGraphLink,c=e.pasteGraphLink;if(a?(c||l)&&(i.pasteGraphLink=!1,console.warn("Cannot disable creating note, folder, or image expressions without disabling graph link pasting. Setting pasteGraphLink: false.")):c&&s&&(i.notes=!0,i.folders=!0,i.images=!0,console.warn("Cannot enable graph link pasting while the creation of notes, folders, or images is disable. Setting notes: true, folders: true, images: true.")),e.hasOwnProperty("onEvaluationCopyClick"))if(typeof e.onEvaluationCopyClick!="function"){i.onEvaluationCopyClick=Nl.onEvaluationCopyClick;let p=typeof e.onEvaluationCopyClick;console.warn(`Expected onEvaluationCopyClick to be a function, but got ${p}. Ignoring.`)}else!e.hasOwnProperty("showEvaluationCopyButtons")&&!this.controller.getGraphSettings().config.showEvaluationCopyButtons&&(i.showEvaluationCopyButtons=!0);e.language&&(i.language=Gl(e.language)),this.controller.isGeometry()&&(e.logScales&&(console.warn("Cannot set logScales: true in the geometry calculator"),delete i.logScales),e.allowComplex&&(console.warn("Cannot set allowComplex: true in the geometry calculator"),delete i.allowComplex));for(t in i)if(i.hasOwnProperty(t))switch(t){case"expressionsCollapsed":this.setOption("expressionsCollapsed",!!i.expressionsCollapsed),i.expressionsCollapsed?this.controller.dispatch({type:"hide-expressions-list",focusShowIcon:!1}):this.controller.dispatch({type:"show-expressions-list",focusHideIcon:!1});break;case"qwertyKeyboard":this.setOption("qwertyKeyboard",!!i.qwertyKeyboard),this.controller.isLetterKeypadOpen()&&this.controller.dispatch({type:"keypad/abc"});break;case"degreeMode":this.setOption("degreeMode",!!i.degreeMode),this.controller.dispatch({type:"set-graph-settings",degreeMode:!!i.degreeMode});break;case"actions":{let h=i[t];if(h===void 0||h===this.controller.getGraphSettings().config.actions)break;this.setOption(t,h),this.controller.dispatch({type:"request-full-evaluation"});break}case"substitutions":{let h=i[t];if(h===void 0||h===this.controller.getGraphSettings().config.substitutions)break;this.setOption(t,h),this.controller.dispatch({type:"request-full-evaluation"});break}case"intervalComprehensions":{let h=i[t];if(h===void 0||h===this.controller.getGraphSettings().config.intervalComprehensions)break;this.setOption(t,h),this.controller.dispatch({type:"request-full-evaluation"});break}case"recursion":{let h=i[t];if(h===void 0||h===this.controller.getGraphSettings().config.recursion)break;this.setOption(t,h),this.controller.dispatch({type:"request-full-evaluation"});break}case"product":case"beta3d":case"folderModules":{console.warn(`Cannot update '${t}' setting.`);break}case"logScales":{let h=i[t];h!==void 0&&(h===!1&&this.controller.dispatch({type:"set-graph-settings",xAxisScale:"linear",yAxisScale:"linear"}),this.setOption(t,h));break}case"graphDescription":{let h=i[t];typeof h=="string"||typeof h=="undefined"?this.setOption(t,h):console.warn("Invalid graphDescription. graphDescription must be of type string or undefined.");break}case"muted":{let h=i[t];if(h===void 0||h===this.controller.getGraphSettings().config.muted)break;h?this.controller.dispatch({type:"mute-global"}):this.controller.dispatch({type:"unmute-global"});break}case"adaptivePeeling":case"advancedStyling":case"allowComplex":case"audio":case"audioTraceSimult":case"audioTraceReverseExpressions":case"authorFeatures":case"authorMode":case"autosize":case"backgroundColor":case"border":case"brailleControls":case"brailleMode":case"branding":case"cacheRenderedSvgs":case"capExpressionSize":case"clearIntoDegreeMode":case"colors":case"crossOriginSaveTest":case"customRegressions":case"decimalToFraction":case"debug3dRender":case"debugPeelLayers":case"debugPixelRatio":case"raycastHeatmap":case"raycastDisableIntervals":case"ignoreCostEstimate":case"disableLighting":case"disableWorkerOnZoom":case"defaultLogModeRegressions":case"disableMouseInteractions":case"disableScrollFix":case"distributions":case"editOnWeb":case"enableTabindex":case"expressions":case"expressionsTopbar":case"folders":case"fontSize":case"forceEnableGeometryFunctions":case"forceLogModeRegressions":case"functionDefinition":case"ghostMode":case"graphpaper":case"hideGeoUI":case"imageUploadCallback":case"images":case"invertedColors":case"keypad":case"language":case"leftAlign3dViewportControls":case"links":case"lockViewport":case"nativeOnscreenKeypad":case"notes":case"onlyTraceSelected":case"orientationButtons":case"showReducedMotionCover":case"pasteGraphLink":case"pasteGraphLinkCallback":case"pasteTableData":case"pauseWhenOffscreen":case"peelFloatTexture":case"peelUpsample":case"debugScale":case"perspectiveDistortion":case"plaidMode":case"plotImplicits":case"plotInequalities":case"plotSingleVariableImplicitEquations":case"pointsOfInterest":case"projectorMode":case"restrictedFunctions":case"settingsMenu":case"showKeyboardShortcutsInTooltips":case"showPerformanceMeter":case"showResetButtonOnGraphpaper":case"sixKeyInput":case"sliders":case"regressionTemplates":case"textColor":case"accentColor":case"tone":case"trace":case"translucentSurfaces":case"transparentBackground":case"translucentOpacity":case"wireframe":case"rayCast":case"zoomButtons":case"recursionDepthLimit":case"debugProgressUpdates":case"logInternalErrors":case"showIDs":case"reflectionArc":case"desNotebook":case"zoomFit":case"showEvaluationCopyButtons":case"onEvaluationCopyClick":case"reportPosition":case"reportPositionNone":{let h=i[t];h!==void 0&&this.setOption(t,h);break}default:return t}}setViewport(e){let t=new __dcg_shared_module_exports__['Qe'](e.xmin,e.xmax,e.ymin,e.ymax,e.zmin,e.zmax);this.grapher.viewportController.setCurrentViewport(t),this.controller.dispatch({type:"commit-user-requested-viewport",viewport:t})}resize(e){e&&this.controller.dispatch({type:"ui/container-resized",size:e})}destroy(){re(document.documentElement).off(".calculator-"+this.__id),re(this.rootElt).off(".calculator-"+this.__id),this.unsubFunc(),this.graphSettings.unobserveAll(),this.controller&&this.controller.destroy(),this.grapher&&this.grapher.remove(),hb.unmountFromNode(this.rootElt),this.rootElt.remove()}tick(e,t){t||(this.controller.handleTick(e),this.controller.updateRenderShellsAfterDispatch()),this.evaluator.tick(),this.grapher&&this.grapher.tick(e)}getState(e){return this.controller.getState(e)}setBlank(e){this.controller.dispatch({type:"set-blank",opts:e||{}})}setState(e,t){this.controller.dispatch({type:"set-state",state:e,opts:t||{}})}};function Qme(r){function e(t){requestAnimationFrame(e),r(t)}requestAnimationFrame(e)}function efe(r){function e(){setTimeout(e,YA),r(Date.now())}setTimeout(e,YA)}var YA=0,eJ;n0("timeoutLoop")&&(YA=(eJ=$a("timeoutLoop"))!=null?eJ:1e3/60);var tJ=YA>0?efe:Qme;var YG=new is;tJ(r=>{YG.triggerEvent("tick",r)});var jG=0;function Ph(r){return jG+=1,YG.observeEvent("tick."+jG,(e,t)=>{r(t)}),jG}function Dh(r){YG.unobserveEvent("tick."+r)}function rJ(r,e){let t={},o={};for(let i in r)WO(i)?t[i]=r[i]:L5(i)?o[i]=r[i]:e||console.warn("Unrecognized setting: "+i+". Ignoring.");return{configOptions:t,settingsOptions:o}}function oJ(r,e){let t={};return e.hasOwnProperty("x")&&(t.x=r.mapX(e.x)),e.hasOwnProperty("y")&&(t.y=r.mapY(e.y)),t}var nJ=[],JG=!1,iJ=new Map;function tfe(r){let e=iJ.get(r);return e||(e=new r,iJ.set(r,e)),e}function aJ(r){if(!r||JG)return;let e;for(;(e=nJ.shift())&&e.api._destroyed;);if(!e)return;let t=e;JG=!0;let{options:o,mathBounds:i,state:n,callback:a,api:s}=t,l=tfe(r),c=s._calc.controller.getGraphSettings().config,p={};Object.keys(c).forEach(x=>{WO(x)&&x!=="product"&&x!=="beta3d"&&x!=="projectorMode"&&(p[x]=c[x])}),l.updateSettings(p),l.setState(n),l.setMathBounds(i);let h=l._calc.evaluator,g=()=>{l._calc.grapher.asyncScreenshot(o,x=>{JG=!1,aJ(r),a(x)})},m=t.api._calc.controller,b=Ph(()=>{m.areAnyImagesLoading()||(Dh(b),h.notifyWhenSynced(g))})}var sd=class extends Mn{constructor(t,o,i,n){super();this._eventBus=new is;this._destroyed=!1;this.isOffscreen=!1;t&&(t.dcgAPIInstance=this);let a=rJ(o||{},!0),s=mf(a.configOptions),l=a.settingsOptions;this._calc=new Hw(t,s,n),this.controller=this._calc.controller,this.controller.onEventsEmitted=c=>{let p=this.controller.getSelectedItem();this.setProperty("isAnyExpressionSelected",!!p),this.setProperty("selectedExpressionId",p?p.id:void 0),this.setProperty("expressionAnalysis",this.controller.getExpressionAnalysis());let h=qe.getFocusedMathquill();this.setProperty("focusedMathQuill",h?new pI(h):void 0);for(let g in c){if(!c.hasOwnProperty(g))continue;let m=c[g];m&&this._eventBus.triggerEvent(g,m)}},this._calc.graphpaperBounds.observeAndSync("mathCoordinates",this._syncGraphpaperBounds.bind(this)),this._calc.graphpaperBounds.observeAndSync("pixelCoordinates",this._syncGraphpaperBounds.bind(this)),this.colors=this.controller.getColors(),this._initGraphSettings(),this.updateSettings(l),this._sharedClockBusToken=Ph(c=>this.withControllerInAPIMode(()=>{let p=this._calc.grapher.settings.config.pauseWhenOffscreen&&this.isOffscreen;this._calc.tick(c,p)})),this.domChangeDetector=new Xu(t,c=>this.withControllerInAPIMode(()=>{switch(this.isOffscreen=c.isOffscreen,c.type){case"offscreen-noop":break;case"added":this._calc.resize(c.size);break;case"removed":break;case"resized":this._calc.resize(c.size);break}})),s.autosize?this.domChangeDetector.startWatching():this.domChangeDetector.checkForChanges(),typeof i=="function"&&i(this)}destroy(){this.controller.onEventsEmitted=function(){},this._calc.destroy(),Dh(this._sharedClockBusToken),this.domChangeDetector.destroy();function t(n){console.warn("You've destroyed this API instance. You can no longer call ."+n+"()")}let o={},i=this;for(;i;)Object.getOwnPropertyNames(i).forEach(a=>o[a]=!0),i=Object.getPrototypeOf(i);for(let n in o)typeof this[n]=="function"?this[n]=t.bind(this,n):this.hasOwnProperty(n)&&delete this[n];this.destroy=function(){},this._destroyed=!0}withHistoryReplacement(t){try{this.controller.pushWithHistoryReplacement(),t()}finally{this.controller.popWithHistoryReplacement()}}withControllerInAPIMode(t){try{return this.controller.pushAPIMethodCall(),t()}finally{this.controller.popAPIMethodCall()}}_syncGraphpaperBounds(){return this.withControllerInAPIMode(()=>{this.controller.runAfterDispatch(()=>{this.setProperty("graphpaperBounds",{mathCoordinates:this._calc.graphpaperBounds.mathCoordinates,pixelCoordinates:this._calc.graphpaperBounds.pixelCoordinates})})})}observeEvent(t,o){return this._eventBus.observeEvent(t,o)}unobserveEvent(t){this._eventBus.unobserveEvent(t)}_initGraphSettings(){return this.withControllerInAPIMode(()=>{let t=new Mn;this.settings=this.graphSettings=t,A5.forEach(o=>{this._calc.grapher.settings.observeAndSync(o,()=>{this.controller.runAfterDispatch(()=>{t.setProperty(o,this._calc.grapher.settings[o])})})}),O6.forEach(o=>{this._calc.grapher.settings.config.observeAndSync(o,()=>{this.controller.runAfterDispatch(()=>{t.setProperty(o,this._calc.grapher.settings.config[o])})})})})}updateSettings(t){return this.withControllerInAPIMode(()=>{let o=rJ(t,!1),i=o.configOptions,n=o.settingsOptions;__dcg_shared_module_exports__['t'](i)||this._calc.setOptions(i),__dcg_shared_module_exports__['t'](n)||this.controller.dispatch({type:"set-graph-settings",...this.controller.getGraphSettings().validateSettings(n)}),this.notifyControllerOfAPICall()})}setGraphSettings(t){return this.withControllerInAPIMode(()=>{console.warn("As of API v0.8 the 'setGraphSettings' method is deprecated and has been renamed 'updateSettings.'"),this.updateSettings(t),this.setGraphSettings=this.updateSettings,this.notifyControllerOfAPICall()})}setDefaultState(t){return this.withControllerInAPIMode(()=>{this._calc.grapher.settings.setProperty("defaultState",t?so(t):void 0),this.notifyControllerOfAPICall()})}mathToPixels(t){return this.withControllerInAPIMode(()=>{let o=__dcg_shared_module_exports__['qd'].fromRects(this.graphpaperBounds.mathCoordinates,this.graphpaperBounds.pixelCoordinates,{xAxisScale:this._calc.grapher.settings.xAxisScale,yAxisScale:this._calc.grapher.settings.yAxisScale});return oJ(o,t)})}pixelsToMath(t){return this.withControllerInAPIMode(()=>{let o=__dcg_shared_module_exports__['qd'].fromRects(this.graphpaperBounds.mathCoordinates,this.graphpaperBounds.pixelCoordinates,{xAxisScale:this._calc.grapher.settings.xAxisScale,yAxisScale:this._calc.grapher.settings.yAxisScale}).inverse();return oJ(o,t)})}notifyControllerOfAPICall(){return this.withControllerInAPIMode(()=>{this.controller.dispatch({type:"render"})})}setExpression(t){return this.withControllerInAPIMode(()=>{let i=this.controller.getItemModel(t.id),n=i&&i.type,a=PS(t,n,this.controller);if(a)if(n)this.controller.dispatch({type:"set-expression-properties-from-api",id:a.id,properties:a});else{if(a.type==="image")return;this.controller.dispatch({type:"add-item-to-end-from-api",state:a})}})}setExpressions(t){return this.withControllerInAPIMode(()=>{t.forEach(this.setExpression.bind(this))})}removeExpression(t){return this.withControllerInAPIMode(()=>{let o=t.id.toString();this.controller.dispatch({type:"remove-item-by-id",id:o})})}removeExpressions(t){return this.withControllerInAPIMode(()=>{t.forEach(this.removeExpression.bind(this))})}removeSelected(){return this.withControllerInAPIMode(()=>{let t=this.controller.getSelectedItem();if(!t)return;let{id:o}=t;return this.controller.dispatch({type:"remove-item-by-id",id:o}),o})}setMathBounds(t){return this.withControllerInAPIMode(()=>{var E,S,k,T;let o=t,i=(E=o.xmin)!=null?E:o.left,n=(S=o.xmax)!=null?S:o.right,a=(k=o.ymin)!=null?k:o.bottom,s=(T=o.ymax)!=null?T:o.top,{zmin:l,zmax:c}=o,p=l!==void 0||c!==void 0,h=this._calc.controller.getAxisScaleSettings(),g=new __dcg_shared_module_exports__['Qe'](i,n,a,s,l,c),m=g.isXValid(h.xAxisScale),b=g.isYValid(h.yAxisScale),x=!p||g.isZValid();m&&b&&x?(this._calc.setViewport({xmin:i,xmax:n,ymin:a,ymax:s,zmin:l,zmax:c}),this._calc.controller.unmarkLastChangedAxis(),this._calc.controller.markSquareAxesAfterUserEditedViewport()):console.warn("Invalid bounds argument. "+p?"Expected a bounds object with bounds.xmin < bounds.xmax, bounds.ymin < bounds.ymax, and bounds.zmin < bounds.zmax. ":"Expected a bounds object with bounds.xmin < bounds.xmax, and bounds.ymin < bounds.ymax. Got "+JSON.stringify(t)),this.notifyControllerOfAPICall()})}setViewport(t){let[o,i,n,a]=t;return this.withControllerInAPIMode(()=>{t.length==4&&t[1]>t[0]&&t[3]>t[2]?(this._calc.setViewport({xmin:o,xmax:i,ymin:n,ymax:a}),this._calc.controller.markSquareAxesAfterUserEditedViewport()):console.warn("Invalid viewport.  Expected [xmin, xmax, ymin, ymax].  Got "+t),this.notifyControllerOfAPICall()})}resize(){return this.withControllerInAPIMode(()=>{this.domChangeDetector.checkForChanges()})}getState(t){return this.withControllerInAPIMode(()=>this.controller.getState(t))}getExpressions(){return this.withControllerInAPIMode(()=>this.getState({stripDefaults:!1}).expressions.list.map(cu))}setBlank(t){return this.withControllerInAPIMode(()=>{this.controller.dispatch({type:"set-blank",opts:t||{}})})}setState(t,o){return this.withControllerInAPIMode(()=>{this.controller.dispatch({type:"set-state",state:t,opts:o||{}})})}undo(){return this.withControllerInAPIMode(()=>{this.controller.dispatch({type:"undo"})})}redo(){return this.withControllerInAPIMode(()=>{this.controller.dispatch({type:"redo"})})}clearHistory(){return this.withControllerInAPIMode(()=>{this.controller.dispatch({type:"clear-undoredo-history"})})}getHistory(){return this.withControllerInAPIMode(()=>this.controller.getHistory())}restoreHistory(t){return this.withControllerInAPIMode(()=>{this.controller.dispatch({type:"restore-history",history:t})})}newRandomSeed(){return this.withControllerInAPIMode(()=>{this.updateSettings({randomSeed:il()})})}screenshot(t){return this.withControllerInAPIMode(()=>(t||(t={}),t=this._validateBrailleScreenshotOptions(t),this._calc.grapher.screenshot(t)))}_getMathAspectRatio(){return this.withControllerInAPIMode(()=>{let t=this.graphpaperBounds.mathCoordinates,o=this._calc.grapher.getProjection().pixelCoordinates,i=o.right-o.left,n=o.bottom-o.top,a=t.width/i,s=t.height/n;return a/s})}isProjectionUniform(){return this.withControllerInAPIMode(()=>!!this._calc.grapher.getProjection().settings.squareAxes)}_validateBrailleScreenshotOptions(t){return this.withControllerInAPIMode(()=>{t=__dcg_shared_module_exports__['Uc'](t);let o=t.braille;if(o){let i=o.embosserModel;if(!i)return console.warn("Screenshot braille options requires an embosser model to be specified. "),console.warn("Continuing with non-braille screenshot."),delete t.braille,t;if(i==="etc"&&(o.embosserModel="etc11"),i==="vpmax"&&(o.embosserModel="vpmax11"),o.embosserModel!=="etc8"&&o.embosserModel!=="etc11"&&o.embosserModel!=="vpmax8"&&o.embosserModel!=="vpmax11")return console.warn('Unknown screenshot braille embosser model. Valid models are "etc" and "vpmax".'),console.warn("Continuing with non-braille screenshot."),delete t.braille,t;o.brailleMode!=="nemeth"&&o.brailleMode!=="ueb"&&(console.warn("Screenshot options braille.brailleMode must be nemeth or ueb. Proceeding with nemeth."),o.brailleMode="nemeth"),t.width&&(console.warn("Screenshot width option is ignored when exporting Braille."),delete t.width),t.height&&(console.warn("Screenshot height option is ignored when exporting Braille."),delete t.height),t.targetPixelRatio&&(console.warn("Screenshot targetPixelRatio option is ignored when exporting Braille."),delete t.targetPixelRatio),t.preserveAxisNumbers&&(console.warn("Screenshot preserveAxisNumbers option is ignored when exporting Braille."),delete t.preserveAxisNumbers)}return t})}_validateAsyncScreenshotOpts(t){return this.withControllerInAPIMode(()=>{t=__dcg_shared_module_exports__['Uc'](t);let o=t.mode||(this.controller.getGraphSettings().squareAxes?"preserveX":"stretch"),i=t.width||t.height||this.graphpaperBounds.pixelCoordinates.width,n=t.height||t.width||this.graphpaperBounds.pixelCoordinates.height,a=t.targetPixelRatio||1;a<1&&(a=1);let s=t.preserveAxisNumbers;t.hasOwnProperty("format")||(t.svg?(t.format="svg",delete t.svg):t.format="png");let l=t.mathBounds||{},c=this._getMathAspectRatio(),p=this.graphpaperBounds.pixelCoordinates.width/this.graphpaperBounds.pixelCoordinates.height,h=D6({mode:o,width:i,height:n,currentBounds:this.graphpaperBounds.mathCoordinates,graphpaperAspectRatio:p,mathAspectRatio:c,mathBounds:l});return{opts:{...t,width:i,height:n,targetPixelRatio:a,preserveAxisNumbers:s},mathBounds:h}})}asyncScreenshot(...t){var n;if(!t.length){console.warn("asyncScreenshot expects a callback");return}let o,i;if(t.length===1)if(typeof t[0]!="function"){console.warn("asyncScreenshot expects a callback");return}else i=t[0],o={};else i=t[1],o=(n=t[0])!=null?n:{};return this.withControllerInAPIMode(()=>{o=this._validateBrailleScreenshotOptions(o);let{opts:a,mathBounds:s}=this._validateAsyncScreenshotOpts(o);nJ.push({api:this,options:a,mathBounds:s,state:this.getState(),callback:i}),aJ(this.constructor)})}setOptions(t){return this.withControllerInAPIMode(()=>{let o=this._calc.setOptions(t);return this.notifyControllerOfAPICall(),o})}focusFirstExpression(){return this.withControllerInAPIMode(()=>{this.controller.dispatch({type:"focus-first-expression"})})}openKeypad(){return this.withControllerInAPIMode(()=>{this.controller.dispatch({type:"keypad/set-minimized",minimized:!1})})}HelperExpression(t){return this.withControllerInAPIMode(()=>{let o=(t==null?void 0:t.latex)||"",i=new Mn({latex:o});return this.controller.dispatch({type:"add-helper-expression",state:{type:"helper-expression",id:this.controller.generateId(),latex:o,proxy:i}}),i})}getHelperExpressions(){return this.withControllerInAPIMode(()=>this.controller.getHelperExpressions())}};var gb=class extends sd{constructor(t,o,i){let n=o==null?void 0:o.degreeMode,a=P6;n===!0?a={...a,graph:{...a.graph,degreeMode:!0}}:o={...o,degreeMode:!1};super(t,{...o,product:"graphing-3d"},i);this.mathToPixels=void 0;this.pixelsToMath=void 0;this.setState(a),this.clearHistory()}asyncScreenshot(t){throw new Error("asyncScreenshot() is currently unimplemented in 3D. Use screenshot() instead.")}};__dcg_shared_module_exports__['H']();bn();var Kw=class{constructor({evaluationMode:e,additionalFunctions:t,disableParentheses:o,functionDefinition:i,replaceRoundWithReciprocal:n,workerPool:a}){this._evaluations={};this._nextObjectId=0;this.store=new Ks({expressions:{1:{id:"1",latex:"",braille:"",type:"latex",displayAsFraction:!1}},order:["1"],settings:{degreeMode:!1,complex:!1},ui:{focus:void 0}});this.evaluationMode=e,this.additionalFunctions=t,this.disableParentheses=o,this.functionDefinition=i,this.replaceRoundWithReciprocal=n,this.workerPool=a,this._setupEvaluator(),this.clear(),this._sharedClockBusToken=Ph(()=>{this._evaluator.tick()})}isSingleExpression(){return this.evaluationMode==="singleExpressionScientific"||this.evaluationMode==="singleExpressionFourFunction"}destroy(){Dh(this._sharedClockBusToken)}generateObjectId(){return(this._nextObjectId++).toString()}updateNextObjectId(){let e=this.store.getState().order;this._nextObjectId=0;let t=/^[0-9]+$/;for(let o of e)if(t.test(o)){let i=parseInt(o,10);i>=this._nextObjectId&&(this._nextObjectId=i+1)}}clearShouldDebounceUndoRedo(){this._shouldDebounceUndoRedo=!1}markShouldDebounceUndoRedo(){this._shouldDebounceUndoRedo=!0}getShouldDebounceUndoRedo(){return this._shouldDebounceUndoRedo}clearCachedBrailleValues(){for(let e of this.getExpressionOrder())this.store.set(["expressions",e,"braille"],"")}getState(){return this.store.getState()}getPersistedState(){let{expressions:e,order:t,settings:o}=this.getState();return{expressions:{list:t.map(i=>{let n=e[i];return{id:n.id,latex:n.latex,displayAsFraction:n.displayAsFraction}})},settings:o}}setState(e){this.store.set(e),this._updateIndexes(),this.updateNextObjectId()}setStateFromAPI(e){let t=[],o={},{settings:i}=e;i.complex&&i.degreeMode&&(i={...i,degreeMode:!1}),e.expressions.list.forEach(({id:n,latex:a,displayAsFraction:s})=>{t.push(n),o[n]={id:n,latex:a,displayAsFraction:s,braille:"",type:"latex"}}),this.setState({expressions:o,order:t,settings:i,ui:{focus:void 0}})}canClear(){if(this.getNumberOfExpressions()>1)return!0;let e=this.getExpressionOrder()[0];return this.getExpressionLatex(e)!==""}clear(){this.setState({expressions:{1:{id:"1",type:"latex",latex:"",braille:"",displayAsFraction:!1}},ui:{focus:void 0},order:["1"],settings:this.getState().settings})}getExpressionOrder(){return this.store.getState().order}getNumberOfExpressions(){return this.getExpressionOrder().length}getExpressionById(e){return this.getState().expressions[e]}getExpressionIndex(e){return this._indexes[e]}_getExpressionByIndex(e){let t=this.getExpressionOrder()[e];return this.getExpressionById(t)}_updateIndexes(){this._indexes={};let e=0;for(let t of this.getExpressionOrder())this._indexes[t]=e,e+=1;this._evaluate()}_usesAnsById(e){return this.getExpressionById(e).latex.indexOf("\\operatorname{ans}")!==-1}_getPreviousExpById(e){let t=this.getExpressionIndex(e);return this._getExpressionByIndex(t-1)}createBlankAfterId(e){if(this.isSingleExpression()||!this.getExpressionById(e).latex)return;let t=this.getExpressionIndex(e),o=this.generateObjectId();this.store.shallowMutate("order",i=>{i.splice(t+1,0,o)}),this.store.shallowMutate("expressions",i=>{i[o]={id:o,latex:"",braille:"",type:"latex",displayAsFraction:!1}}),this._updateIndexes(),this.setFocusedById(o,!0)}conditionallyCopyPrevious(e){let t=this._getPreviousExpById(e),o=this.getExpressionById(e);t!=null&&o.latex===""&&this._usesAnsById(t.id)&&this.setLatexById(e,t.latex)}backspaceAtFrontOfId(e){if(this.getExpressionById(e).latex!==""||this.getNumberOfExpressions()===1)return;let o=this.getExpressionIndex(e);this.store.shallowMutate("order",i=>{i.splice(o,1)}),this.store.shallowMutate("expressions",i=>{delete i[e]}),this._updateIndexes(),this._setFocusedByIndex(Math.max(o-1,0),!0)}setLatexById(e,t){this.store.set(["expressions",e,"latex"],t),this.store.set(["expressions",e,"braille"],""),t===""&&this.setFractionEvaluation(e,!1),this._evaluate()}setLatexAndBrailleById(e,t,o){this.store.set(["expressions",e,"latex"],t),this.store.set(["expressions",e,"braille"],o),t===""&&this.setFractionEvaluation(e,!1),this._evaluate()}setFractionEvaluation(e,t){this.store.set(["expressions",e,"displayAsFraction"],t)}setLatexOfFocusedExpression(e){let t=this.getFocusedExpressionId();t&&this.setLatexById(t,e)}isExpressionFocused(e){return this.getFocusedExpressionId()===e}getExpressionLatex(e){return this.getExpressionById(e).latex}getExpressionError(e){var t;return(t=this._evaluations[e])==null?void 0:t.error}getExpressionValue(e){var t,o;return(o=(t=this._evaluations[e])==null?void 0:t.typedConstantValue)==null?void 0:o.value}getExpressionTypedConstantValue(e){var t;return(t=this._evaluations[e])==null?void 0:t.typedConstantValue}getExpressionAns(e){var o,i;let t=(o=this._evaluations[e])==null?void 0:o.ansId;return t!==void 0?(i=this._evaluations[t])==null?void 0:i.typedConstantValue:t}getExpressionAnsId(e){var t;return(t=this._evaluations[e])==null?void 0:t.ansId}shouldShowEvaluationForExpression(e){let t=this._evaluations[e];return t?t.showEvaluation:!1}isRationalizableConstant(e){let t=this._evaluations[e];return t?t.isRationalizableConstant:!1}canDisplayEvaluationAsFraction(e){let t=this.getExpressionValue(e);return!t||typeof t!="number"?!1:__dcg_shared_module_exports__['ea'](t)}isEvaluationList(e){var t;return __dcg_shared_module_exports__['qb']((t=this.getExpressionTypedConstantValue(e))==null?void 0:t.valueType)}_setFocusedByIndex(e,t){let o=this._getExpressionByIndex(e),i=this.store.getState().ui.focus,n=t?{type:"latex-expression",id:o.id}:void 0;if(!__dcg_shared_module_exports__['s'](i,n)){if(i){let a=i.id;this.store.deepMutate("expressions",s=>{let l=s[a];l&&(l.braille="")})}!t&&this.getFocusedExpressionId()!==o.id||this.store.shallowMutate("ui",a=>{a.focus=n})}}setFocusedById(e,t){let o=this.getExpressionIndex(e);this._setFocusedByIndex(o,t)}focusPrevById(e){let t=this.getExpressionIndex(e)-1;t>=0&&this._setFocusedByIndex(t,!0)}focusNextById(e){let t=this.getExpressionIndex(e)+1;t<this.getNumberOfExpressions()?this._setFocusedByIndex(t,!0):this.createAtEnd()}getFocusedExpression(){let e=this.getFocusedExpressionId();if(e)return this.getExpressionById(e)}getFocusedExpressionId(){let e=this.getState().ui.focus;return e&&e.id}clearFocusedExpression(){let e=this.getFocusedExpression();e&&this.setLatexById(e.id,"")}shouldShowClear(){if(this.getNumberOfExpressions()===1)return!1;let e=this.getFocusedExpression();return!!e&&!!e.latex}getLastExpression(){return this._getExpressionByIndex(this.getNumberOfExpressions()-1)}isLastExpressionEmpty(){return!!this.getLastExpression().latex}createAtEnd(){this.createBlankAfterId(this.getLastExpression().id)}focusLastExpression(){this._setFocusedByIndex(this.getNumberOfExpressions()-1,!0)}focusFirstExpression(){this._setFocusedByIndex(0,!0)}getDegreeMode(){return this.getState().settings.degreeMode}setDegreeMode(e){this.getComplexMode()||(this.store.set(["settings","degreeMode"],e),this._evaluate())}getComplexMode(){return!!this.getState().settings.complex}setComplexMode(e){this.store.set(["settings","complex"],e),e&&this.store.set(["settings","degreeMode"],!1),this._evaluate()}_cleanupLatex(e){return e=__dcg_shared_module_exports__['ka'](e),e.substr(e.length-1)==="="&&(e=e.substr(0,e.length-1)),e}_evaluate(){this._evaluator.clearStatementsAndStartCompleteState(),this.getExpressionOrder().forEach(e=>this._evaluator.addStatement({id:e,index:this.getExpressionIndex(e),latex:this._cleanupLatex(this.getExpressionLatex(e)),shouldGraph:!1,type:"statement"}))}getAdditionalFunctions(){return this.getComplexMode()?[...this.additionalFunctions,...__dcg_shared_module_exports__['Eb']]:this.additionalFunctions}_setupEvaluator(){this._evaluator=new Np(this.workerPool),this._evaluator.readEvaluatorConfig=()=>({degreeMode:this.getDegreeMode(),evaluationMode:this.evaluationMode,additionalFunctions:this.getAdditionalFunctions(),disableParentheses:this.disableParentheses,functionDefinition:this.functionDefinition,replaceRoundWithReciprocal:this.replaceRoundWithReciprocal,complex:this.getComplexMode(),actions:!1}),this._evaluator.onEvaluatorResults=e=>{var i;let t=e.evaluationStates;this._evaluations={};for(let n in t){let a=t[n];if(!this.getExpressionById(n))continue;let{value:l,valueType:c}=(i=a.typed_constant_value)!=null?i:{},p=!a.is_evaluable&&c===__dcg_shared_module_exports__['ua']&&__dcg_shared_module_exports__['ea'](l);this._evaluations[n]={error:a.error,ansId:void 0,typedConstantValue:a.typed_constant_value,showEvaluation:a.is_evaluable||p||c===__dcg_shared_module_exports__['ya'],isRationalizableConstant:p}}let o;for(let n of this.getExpressionOrder()){let a=this._evaluations[n];o&&a&&(a.ansId=o),o=n}typeof this.onEvaluationUpdate=="function"&&this.onEvaluationUpdate()}}reloadState(){this.setState(this.getState())}getFunctionDefinition(){return!!this.functionDefinition}enableFunctionDefinition(){this.functionDefinition=!0,this.reloadState()}disableFunctionDefinition(){this.functionDefinition=!1,this.reloadState()}getReplaceRoundWithReciprocal(){return!!this.replaceRoundWithReciprocal}enableReplaceRoundWithReciprocal(){this.replaceRoundWithReciprocal=!0,this.reloadState()}disableReplaceRoundWithReciprocal(){this.replaceRoundWithReciprocal=!1,this.reloadState()}};var Ww=class{constructor(e,t){this.keyboardMode="main";this.fontSize=16;this.invertedColors=!1;this.backgroundColor="";this.textColor="";this.accentColor="";this.projectorMode=!1;this.capExpressionSize=!1;this.decimalToFraction=!0;this.settingsMenu=!0;this.settingsMenuOpen=!1;this.language="en";this.brailleMode="none";this.sixKeyInput=!1;this.brailleControls=!0;this.brailleExpressionDownload=!0;this.replaceCommaWith10Exp=!1;this.typingAsteriskWritesTimesSymbol=!1;this.stateStack=new ad;this.dispatcher=new uw;this.s=kc(()=>this.language);this.raw=Sa;this.dispatch=e=>{ry("dispatch",{type:e.type}),this.dispatcher.dispatch(e);let t;for(;t=this._queuedCallbacks.shift();)t()};this._queuedCallbacks=[];this.logEvent=e=>{};this.stateStack=new ad,this.dispatcher=new uw,this.options=e,this.model=new Kw({evaluationMode:this.options.evaluationMode,additionalFunctions:this.options.additionalFunctions,disableParentheses:this.options.disableParentheses,functionDefinition:this.options.functionDefinition,replaceRoundWithReciprocal:this.options.replaceRoundWithReciprocal,workerPool:t.workerPool}),this.model.setComplexMode(e.complex),this.model.setDegreeMode(e.degreeMode),this.setLanguage(e.language),this.setBrailleMode(e.brailleMode),this.setSixKeyInput(e.sixKeyInput),this.setBrailleControls(e.brailleControls),this.setBrailleExpressionDownload(e.brailleExpressionDownload),this.setReplaceCommaWith10Exp(e.replaceCommaWith10Exp),this.setReplaceRoundWithReciprocal(e.replaceRoundWithReciprocal),this.setTypingAsteriskWritesTimesSymbol(e.typingAsteriskWritesTimesSymbol),this.setProjectorMode(e.projectorMode),this.setCapExpressionSize(e.capExpressionSize),this.setDecimalToFraction(e.decimalToFraction),this.invertedColors=e.invertedColors,this.backgroundColor=e.backgroundColor,this.textColor=e.textColor,this.accentColor=e.accentColor,this.settingsMenu=e.settingsMenu,this.model.onEvaluationUpdate=()=>this.dispatch({type:"render"}),this.settingsProxy=t.settingsProxy,this.syncPublicSettings(),this.hookUpDispatcher(),this.containerSize={width:0,height:0}}runAfterDispatch(e){this._queuedCallbacks.push(e)}enqueueEvent(e){this.runAfterDispatch(()=>{this.onEventEmitted&&this.onEventEmitted(e)})}getSettingsMenu(){return this.settingsMenu}getBrailleMode(){return this.brailleMode}renderAsBraille(){return this.brailleMode!=="none"}setBrailleMode(e){this.brailleMode=e}getSixKeyInput(){return this.sixKeyInput}setSixKeyInput(e){this.sixKeyInput=e}getBrailleControls(){return this.brailleControls}setBrailleControls(e){this.brailleControls=e}getBrailleExpressionDownload(){return this.brailleExpressionDownload}setBrailleExpressionDownload(e){this.brailleExpressionDownload=e}getRestrictedEditing(){return this.options.restrictedEditing}getKeyboardMode(){return this.keyboardMode}getFontSize(){return this.fontSize}getInvertedColors(){return this.invertedColors}hasBackgroundColor(){return this.getBackgroundColor()!=="#ffffff"}getBackgroundColor(){return __dcg_shared_module_exports__['Dd'](this.backgroundColor||"#fff")}hasTextColor(){return this.getTextColor()!=="#000000"}getTextColor(){return __dcg_shared_module_exports__['Dd'](this.textColor||"#000")}getAccentColor(){return __dcg_shared_module_exports__['Dd'](this.accentColor||__dcg_shared_module_exports__['Md'].FOCUS_OUTLINE)}getAdditionalFunctions(){return this.options.additionalFunctions}getDisableParentheses(){return this.options.disableParentheses}getTypingSlashWritesDivisionSymbol(){return this.options.typingSlashWritesDivisionSymbol}setTypingAsteriskWritesTimesSymbol(e){this.typingAsteriskWritesTimesSymbol=e}getTypingAsteriskWritesTimesSymbol(){return this.typingAsteriskWritesTimesSymbol}setProjectorMode(e){this.projectorMode=e}isProjectorMode(){return this.projectorMode}getReplaceCommaWith10Exp(){return this.replaceCommaWith10Exp}setReplaceCommaWith10Exp(e){this.replaceCommaWith10Exp=e}getReplaceRoundWithReciprocal(){return this.model.getReplaceRoundWithReciprocal()}setReplaceRoundWithReciprocal(e){e?this.model.enableReplaceRoundWithReciprocal():this.model.disableReplaceRoundWithReciprocal()}setCapExpressionSize(e){this.capExpressionSize=e}getCapExpressionSize(){return this.capExpressionSize}isKeypadEnabled(){return!0}setDecimalToFraction(e){this.decimalToFraction=e}setLanguage(e){e!=="en"&&!eT(e)?console.warn(`Translation for '${e}' isn't currently available. Using '${this.language}' instead.`):this.language=e}getLanguage(){return this.language}getDecimalToFraction(){return this.decimalToFraction}isScientificCalc(){let e=this.options.evaluationMode;return e==="scientific"||e==="singleExpressionScientific"}isFourFunctionCalc(){return this.options.evaluationMode==="fourFunction"||this.options.evaluationMode==="singleExpressionFourFunction"}getAllowLinks(){return this.options.links}canUndo(){return this.stateStack.canUndo()}canRedo(){return this.stateStack.canRedo()}undo(e){if(!this.canUndo())return;this.stateStack.undo();let t=this.stateStack.getState();e.restoreFocus||(t={...t,ui:{focus:void 0}}),this.model.setState(t),this.enqueueEvent("change")}redo(e){if(!this.canRedo())return;this.stateStack.redo();let t=this.stateStack.getState();e.restoreFocus||(t={...t,ui:{focus:void 0}}),this.model.setState(t),this.enqueueEvent("change")}clearHistory(){this.stateStack.clear()}canBackspace(){let e=this.model.getFocusedExpression();return e&&(e.latex.length>0||this.model.getNumberOfExpressions()>1)}focusLastExpression(){this.model.focusLastExpression()}shouldRender(){return this.containerSize.width>0&&this.containerSize.height>0}canClear(){return this.model.canClear()}shouldShowClear(){return this.model.shouldShowClear()}enableSettingsMenu(){this.settingsMenu=!0}disableSettingsMenu(){this.closeSettingsMenu(),this.settingsMenu=!1}closeSettingsMenu(){this.settingsMenuOpen=!1}toggleSettingsMenu(){this.settingsMenuOpen=!this.settingsMenuOpen}isSettingsMenuOpen(){return this.settingsMenuOpen}isLastExpressionEmpty(){return this.model.isLastExpressionEmpty()}createAtEnd(){this.model.createAtEnd()}clearFocusedExpression(){this.model.clearFocusedExpression()}setLatexById(e,t){this.model.setLatexById(e,t)}setLatexAndBrailleById(e,t,o){this.model.setLatexAndBrailleById(e,t,o)}setLatexOfFocusedExpression(e){this.model.setLatexOfFocusedExpression(e)}toggleFractionEvaluationById(e){this.model.setFractionEvaluation(e,!this.model.getExpressionById(e).displayAsFraction)}conditionallyCopyPrevious(e){this.model.conditionallyCopyPrevious(e)}createBlankAfterId(e){this.model.createBlankAfterId(e)}backspaceAtFrontOfId(e){this.model.backspaceAtFrontOfId(e)}areStatesDifferentEnoughForUndoRedo(e,t){let o={focus:void 0};return __dcg_shared_module_exports__['s']({...e,ui:o},{...t,ui:o})}commitUndoRedoDebounced(){let e=this.model.getState(),t=this.stateStack.getState();if(this.areStatesDifferentEnoughForUndoRedo(e,t))return;let o=new Date().getTime();o-this._lastDebouncedTime<1e3?this.stateStack.replaceState(e):this.stateStack.addState(e),this._lastDebouncedTime=o,this.enqueueEvent("change")}commitUndoRedoSynchronously(){let e=this.model.getState(),t=this.stateStack.getState();this.areStatesDifferentEnoughForUndoRedo(e,t)||(this._lastDebouncedTime=0,this.stateStack.addState(e),this.enqueueEvent("change"))}updateKeyboardMode(e){this.keyboardMode=e}getFocusedMathquill(){if(this.model.getFocusedExpressionId())return qe.getFocusedMathquill()}ensureMathquillIsFocusedAndReturnFocusedMathquill(){let e=this.getFocusedMathquill();if(e)return e;if(this.isLastExpressionEmpty()&&!this.model.isSingleExpression()?this.createAtEnd():this.focusLastExpression(),this.onEventEmitted&&this.onEventEmitted("render"),e=this.getFocusedMathquill(),!e)throw new Error("No focused mathquill found");return e}typeIntoFocusedMathquill(e){e=e.replace(/\r|\n/g,"");let t=this.ensureMathquillIsFocusedAndReturnFocusedMathquill();t&&qe.canAcceptText(t,this.getCapExpressionSize(),e)&&(t.typedText(e),this.setLatexOfFocusedExpression(t.latex()),this.model.markShouldDebounceUndoRedo())}pressKeyInFocusedMathquill(e){if(this.getBrailleMode()!=="none")return;let t=this.ensureMathquillIsFocusedAndReturnFocusedMathquill();if(!t)return;let{key:o,source:i,evt:n}=e;if(o==="Up"||o==="Down"||o==="Left"||o==="Right"){let a=i==="keypad"?qe.temporarilyOverrideLeftRightIntoCommandGoes(t,void 0):void 0,s=qe.applyArrowKeyAndReturnIfWasAtBounds(t,o,n);a==null||a(),s&&this.moveFocusInDirection(o)}else o==="Enter"?(n&&(n.preventDefault(),n.stopPropagation()),this.handleEnter()):o==="Backspace"?this.attemptToMoveFocusWithBackspace()||(t.keystroke(o,n),this.setLatexOfFocusedExpression(t.latex())):o==="Delete"?(t.keystroke(o,n),this.setLatexOfFocusedExpression(t.latex())):(t.keystroke(o,n),this.setLatexOfFocusedExpression(t.latex()))}moveFocusInDirection(e){let t=this.model.getFocusedExpressionId();t&&(e==="Up"?this.model.focusPrevById(t):e==="Down"&&this.model.focusNextById(t))}handleEnter(){if(this.model.isSingleExpression())return;let e=this.model.getFocusedExpressionId();e&&(this.conditionallyCopyPrevious(e),this.createBlankAfterId(e))}attemptToMoveFocusWithBackspace(){let e=this.model.getFocusedExpression();if(!e)return!1;let{latex:t,id:o}=e;return t===""?(this.backspaceAtFrontOfId(o),!0):!1}executeCommandInFocusedMathquill(e){let t=this.ensureMathquillIsFocusedAndReturnFocusedMathquill();t&&(lA(t,e,{capExpressionSize:this.getCapExpressionSize()}),this.setLatexOfFocusedExpression(t.latex()))}syncPublicSettings(){this.settingsProxy.setProperty("language",this.language),this.settingsProxy.setProperty("fontSize",this.fontSize),this.settingsProxy.setProperty("degreeMode",this.model.getDegreeMode()),this.settingsProxy.setProperty("invertedColors",this.invertedColors),this.settingsProxy.setProperty("backgroundColor",this.backgroundColor),this.settingsProxy.setProperty("textColor",this.textColor),this.settingsProxy.setProperty("accentColor",this.accentColor),this.settingsProxy.setProperty("brailleMode",this.brailleMode),this.settingsProxy.setProperty("sixKeyInput",this.sixKeyInput),this.settingsProxy.setProperty("brailleControls",this.brailleControls),this.settingsProxy.setProperty("brailleExpressionDownload",this.brailleExpressionDownload),this.settingsProxy.setProperty("projectorMode",this.projectorMode),this.settingsProxy.setProperty("capExpressionSize",this.capExpressionSize),this.settingsProxy.setProperty("decimalToFraction",this.decimalToFraction),this.settingsProxy.setProperty("qwertyKeyboard",this.options.qwertyKeyboard),this.settingsProxy.setProperty("links",this.options.links),this.settingsProxy.setProperty("settingsMenu",this.settingsMenu),this.settingsProxy.setProperty("functionDefinition",this.model.getFunctionDefinition()),this.settingsProxy.setProperty("replaceCommaWith10Exp",this.replaceCommaWith10Exp),this.settingsProxy.setProperty("replaceRoundWithReciprocal",this.model.getReplaceRoundWithReciprocal()),this.settingsProxy.setProperty("typingAsteriskWritesTimesSymbol",this.typingAsteriskWritesTimesSymbol)}getDegreeMode(){return this.model.getDegreeMode()}hookUpDispatcher(){this.dispatcher.register(e=>{this.enqueueEvent("render");let t=!1,o=this.getRestrictedEditing();switch(e.type){case"update-options":{this.options={...this.options,...e.options};break}case"keypad/shift":{let s;switch(this.keyboardMode){case"qwerty":s="capitalQwerty";break;case"capitalQwerty":s="qwerty";break;case"letters":s="capitalLetters";break;case"capitalLetters":s="letters";break;default:s="qwerty"}this.updateKeyboardMode(s)}break;case"undo":o||(this.undo({restoreFocus:e.source==="keyboard-shortcut"}),t=!0);break;case"redo":o||(this.redo({restoreFocus:e.source==="keyboard-shortcut"}),t=!0);break;case"clear-history":this.clearHistory();break;case"set-state-from-api":e.opts.allowUndo||this.clearHistory(),this.model.setStateFromAPI(e.state);break;case"main":this.updateKeyboardMode("main");break;case"ABC":this.options.qwertyKeyboard?this.updateKeyboardMode("qwerty"):this.updateKeyboardMode("letters");break;case"functions":this.updateKeyboardMode("functions");break;case"degrees":this.model.setDegreeMode(!this.model.getDegreeMode());break;case"update-degree-mode":this.model.setDegreeMode(!!e.mode);break;case"update-font-size":let i=e.size;if(typeof i!="number"&&(i=parseInt(i,10)),isNaN(i))return;this.fontSize=i;break;case"update-inverted-colors":this.invertedColors=!!e.mode;break;case"update-background-color":this.backgroundColor=e.color;break;case"update-text-color":this.textColor=e.color;break;case"update-accent-color":this.accentColor=e.color;break;case"update-projector-mode":this.setProjectorMode(!!e.mode);break;case"update-cap-expression-size":this.setCapExpressionSize(!!e.mode);break;case"update-decimal-to-fraction":this.setDecimalToFraction(!!e.mode);break;case"update-language":this.setLanguage(e.language);break;case"set-blank":e.opts.allowUndo||this.clearHistory(),this.model.clear(),this.focusLastExpression();break;case"clear":this.model.clearFocusedExpression();break;case"set-braille-mode":let n=e.mode;n!=="nemeth"&&n!=="ueb"&&n!=="none"?console.warn(`Valid Braille modes are 'nemeth', 'none', and 'ueb'. You passed '${n}'.`):(this.model.clearCachedBrailleValues(),this.setBrailleMode(e.mode));break;case"set-six-key-input":this.setSixKeyInput(!!e.useSixKeyInput);break;case"set-braille-controls":this.setBrailleControls(!!e.value);break;case"set-braille-expression-download":this.setBrailleExpressionDownload(!!e.mode);break;case"set-replace-comma-with-10-exp":this.setReplaceCommaWith10Exp(!!e.replace);break;case"set-replace-round-with-reciprocal":this.setReplaceRoundWithReciprocal(!!e.replace);break;case"set-typing-asterisk-writes-times-symbol":this.setTypingAsteriskWritesTimesSymbol(!!e.mode);break;case"update-latex":this.model.markShouldDebounceUndoRedo(),this.setLatexById(e.id,e.latex);break;case"update-latex-from-braille":this.model.markShouldDebounceUndoRedo(),this.setLatexAndBrailleById(e.id,e.latex,e.braille);break;case"focusin":this.model.setFocusedById(e.id,!0);break;case"focusout":this.model.setFocusedById(e.id,!1);break;case"focus-first-expression":this.model.focusFirstExpression();break;case"focus-prev-expression":this.moveFocusInDirection("Up");break;case"focus-next-expression":this.moveFocusInDirection("Down");break;case"focus-last-expression":this.model.focusLastExpression();break;case"insert-blank-expression":this.handleEnter();break;case"backspace-from-braille":this.attemptToMoveFocusWithBackspace();break;case"keypad/type-text":this.typeIntoFocusedMathquill(e.text);break;case"keypad/press-key":this.pressKeyInFocusedMathquill(e);break;case"keypad/custom-command":this.executeCommandInFocusedMathquill(e.command);break;case"keypad/123":case"keypad/abc":case"keypad/audio-trace":break;case"enable-settings-menu":this.enableSettingsMenu();break;case"disable-settings-menu":this.disableSettingsMenu();break;case"toggle-settings-menu":this.toggleSettingsMenu();break;case"close-settings-menu":this.closeSettingsMenu();break;case"render":break;case"ui/container-resized":this.containerSize=e.size;break;case"toggle-fraction-evaluation":this.toggleFractionEvaluationById(e.id);break;case"toggle-complex-mode":this.isComplexModeAllowed()&&this.model.setComplexMode(e.enabled);break;case"toggle-complex-allowed":this.options.allowComplex=e.enabled;break;case"set-show-evaluation-copy-buttons":this.options.showEvaluationCopyButtons=e.enabled;break;case"set-evaluation-copy-callback":this.options.onEvaluationCopyClick=e.cb;break;default:return e}this.runAfterDispatch(()=>this.syncPublicSettings()),t||(this.model.getShouldDebounceUndoRedo()?(this.commitUndoRedoDebounced(),this.model.clearShouldDebounceUndoRedo()):this.commitUndoRedoSynchronously())})}getMathquillConfig(){let e=this.getAdditionalFunctions(),t=this.isFourFunctionCalc()&&(!e||e.indexOf("fraction")===-1);return{typingAsteriskWritesTimesSymbol:this.getTypingAsteriskWritesTimesSymbol(),typingSlashWritesDivisionSymbol:this.getTypingSlashWritesDivisionSymbol(),disableCopyPaste:this.getRestrictedEditing(),autoCommands:dl({disallowFrac:t}),..._d()}}isComplexModeEnabled(){return this.model.getComplexMode()&&this.isComplexModeAllowed()}isComplexModeAllowed(){return this.options.evaluationMode==="scientific"&&this.options.allowComplex}shouldShowEvaluationCopyButtons(){return!!this.options.showEvaluationCopyButtons}onEvaluationCopyClick(e){this.options.onEvaluationCopyClick(e)}canDisplayEvaluationAsFraction(e){return this.getDecimalToFraction()&&this.model.canDisplayEvaluationAsFraction(e)}shouldDisplayEvaluationAsFraction(e){return this.canDisplayEvaluationAsFraction(e)&&this.model.getExpressionById(e).displayAsFraction}getEvaluationDigits(){return this.isScientificCalc()?10:7}getLabelOptionsForExpression(e){let t=this.model.getExpressionTypedConstantValue(e);return(t==null?void 0:t.valueType)===__dcg_shared_module_exports__['Va']?{...__dcg_shared_module_exports__['da'],digits:Math.min(this.getEvaluationDigits(),__dcg_shared_module_exports__['da'].digits)}:{digits:this.getEvaluationDigits(),bigCutoff:1e9,displayAsFraction:this.shouldDisplayEvaluationAsFraction(e)}}getEvaluationMode(){return this.options.evaluationMode}};ce();ie();__dcg_shared_module_exports__['H']();var MJ=__dcg_shared_module_exports__['e'](se());ce();ie();var cJ=__dcg_shared_module_exports__['e'](se());Vt();var sJ=__dcg_shared_module_exports__['e'](se()),$t=class extends sJ.View{init(){this.controller=this.props.controller(),this.model=this.controller.model,this.dispatch=this.controller.dispatch,this.s=this.controller.s}};ce();ie();var lJ=__dcg_shared_module_exports__['e'](se());var{If:Zl,Input:rfe,Textarea:ofe}=lJ.Components,$w=class extends $t{constructor(){super(...arguments),this.lastBrailleModeDuringFocusChange="none"}getAriaLabel(){let e=this.getIndex()+1+"";return this.s("shared-calculator-narration-expression-index",{index:e})}didUpdate(){this.renderAnsValue()}didMountMQ(e){this.mq=e}getExp(){return this.model.getExpressionById(this.props.id())}getLatex(){return this.getExp().latex}getValue(){return this.model.getExpressionValue(this.props.id())}isBareRationalizableConstant(){let e=this.props.id();return this.model.isRationalizableConstant(e)&&!this.controller.shouldDisplayEvaluationAsFraction(e)}getBraille(){let e=this.getExp().braille;if(e!=="")return e;{let t=Gm(this.getLatex(),this.controller.getBrailleMode());return t.isError?"":Ri.toExpandedBrailleAscii(t.value)}}getIndex(){return this.model.getExpressionIndex(this.props.id())}getShowEvaluation(){return this.model.shouldShowEvaluationForExpression(this.props.id())}isFractionEvaluation(){return this.getExp().displayAsFraction}toggleFractionEvaluation(){this.dispatch({type:"toggle-fraction-evaluation",id:this.props.id()})}getFractionDisplayAriaLabel(){return this.controller.shouldDisplayEvaluationAsFraction(this.props.id())?this.controller.s("basic-calculator-narration-convert-to-decimal"):this.controller.s("basic-calculator-narration-convert-to-fraction")}getError(){let e=this.model.getExpressionError(this.props.id());return e&&this.getLatex().length>0?xl(e,this.controller.getLanguage()):""}showError(){return!!this.getError()}getFractionMessage(){return this.controller.shouldDisplayEvaluationAsFraction(this.props.id())?this.s("basic-calculator-label-convert-to-decimal"):this.s("basic-calculator-label-convert-to-fraction")}getIsFocused(){return!this.controller.isSettingsMenuOpen()&&this.model.isExpressionFocused(this.props.id())}onFocusedChanged(e){let t=this.controller.getBrailleMode(),o=t!==this.lastBrailleModeDuringFocusChange;this.lastBrailleModeDuringFocusChange=t,!(!this.getExp()||o)&&(e?this.dispatch({type:"focusin",id:this.props.id()}):this.dispatch({type:"focusout",id:this.props.id()}))}onMQReflow(){this.cachedRenderedAnsString=void 0,this.renderAnsValue()}renderAnsValue(){if(!this.mq)return;let e=this.model.getExpressionAnsId(this.props.id()),t;if(e!==void 0){let o=this.controller.getLabelOptionsForExpression(e),i=this.model.getExpressionTypedConstantValue(e);switch(i==null?void 0:i.valueType){case __dcg_shared_module_exports__['Va']:t=__dcg_shared_module_exports__['la'](i.value,{...o,digits:5,scientificNotationDigits:3},"html");break;case __dcg_shared_module_exports__['ua']:t=__dcg_shared_module_exports__['ga'](i.value,o);break;default:__dcg_shared_module_exports__['qb'](i==null?void 0:i.valueType)&&(t="[...]");break}}t!==this.cachedRenderedAnsString&&(this.mq.querySelectorAll(".dcg-mq-ans").forEach(o=>{t?(o.classList.remove("dcg-invalid"),o.innerHTML=t):(o.classList.add("dcg-invalid"),o.innerHTML='<i class="dcg-icon-error" aria-hidden="true"></i>')}),this.cachedRenderedAnsString=t)}getEvaluationLatex(){let e=this.props.id();if(this.isBareRationalizableConstant())return"";let t=this.controller.getLabelOptionsForExpression(e),o=this.model.getExpressionTypedConstantValue(e),i;switch(o==null?void 0:o.valueType){case __dcg_shared_module_exports__['Va']:i=__dcg_shared_module_exports__['la'](o.value,t,"latex");break;case __dcg_shared_module_exports__['ua']:i=__dcg_shared_module_exports__['ha'](o.value,t);break;default:if(__dcg_shared_module_exports__['qb'](o==null?void 0:o.valueType))return`\\mathrm{${o.value.length}\\ element\\ list}`;break}return(i==="undefined"||i===void 0)&&(i="\\mathrm{undefined}"),`=${i}`}getEvaluationBraille(){let e=this.getEvaluationLatex(),t=Gm(e,this.controller.getBrailleMode());return t.isError?"":Ri.toExpandedBrailleAscii(t.value)}didMountBrailleInput(e){this.brailleInputNode=e}didUnmountBrailleInput(){this.brailleInputNode=void 0}handleBrailleKeydown(e){!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&(Pe(e)===en?(this.forceModelFocus(),this.dispatch({type:"focus-prev-expression"}),e.preventDefault()):Pe(e)===wi?(this.forceModelFocus(),this.dispatch({type:"focus-next-expression"}),e.preventDefault()):Pe(e)===ll?(this.forceModelFocus(),this.dispatch({type:"insert-blank-expression"}),e.preventDefault()):Pe(e)===_g&&document.activeElement===this.brailleInputNode&&this.getBraille()===""&&(this.dispatch({type:"backspace-from-braille"}),e.preventDefault()))}forceModelFocus(){document.activeElement!==this.brailleInputNode&&this.onFocusedChanged(!0)}getPostLabel(){let e=this.props.id(),t=this.controller.getLabelOptionsForExpression(e);if(this.showError())return this.getError();if(this.getShowEvaluation()){let o=this.model.getExpressionTypedConstantValue(e),i="";switch(o==null?void 0:o.valueType){case __dcg_shared_module_exports__['Va']:i=__dcg_shared_module_exports__['la'](o.value,t);break;case __dcg_shared_module_exports__['ua']:i=__dcg_shared_module_exports__['ha'](o.value,t);break;default:if(__dcg_shared_module_exports__['qb'](o==null?void 0:o.valueType))return`${o.value.length} element list`;break}return"equals "+ur(i!=null?i:"undefined")}return""}onBrailleInput(e){this.controller.isSettingsMenuOpen()&&this.controller.dispatch({type:"close-settings-menu"});let t=xk(Ri.coerceToSixDotCells(e),this.controller.getBrailleMode()),o=t.isError?"":t.value;(!this.controller.getCapExpressionSize()||Ng(o)<=Bm)&&this.controller.dispatch({type:"update-latex-from-braille",latex:o,braille:e,id:this.props.id()})}getIndexSubscript(){return`_{${this.getIndex()+1}}`}onMountContainer(e){this.containerNode=e}onTapContainer(e){e.target===this.containerNode&&!this.getShowEvaluation()&&!this.showError()&&this.forceModelFocus()}template(){return _("div",{class:()=>({"dcg-basic-expression":!0,"dcg-focused":this.getIsFocused(),"dcg-braille-io":this.controller.renderAsBraille()}),onTap:this.bindFn(this.onTapContainer),onMount:this.bindFn(this.onMountContainer),children:[d(Zl,{predicate:()=>this.controller.renderAsBraille(),children:()=>d("div",{class:u("dcg-braille-input"),children:d(Du,{ariaLabel:()=>{let e=Gm(`eq${this.getIndexSubscript()}`,this.controller.getBrailleMode());return e.isError?"":Ri.toExpandedBrailleAscii(e.value)},didMount:this.bindFn(this.didMountBrailleInput),didUnmount:this.bindFn(this.didUnmountBrailleInput),onFocusedChanged:this.bindFn(this.onFocusedChanged),isFocused:this.bindFn(this.getIsFocused),onKeyDown:this.bindFn(this.handleBrailleKeydown),onInput:this.bindFn(this.onBrailleInput),sixKeyInput:()=>this.controller.getSixKeyInput(),value:()=>this.getBraille(),isStatic:this.const(!1)})})}),d(Zl,{predicate:()=>this.controller.renderAsBraille(),children:()=>_("div",{class:u("dcg-braille-evaluation-container"),children:[d(Zl,{predicate:()=>this.getShowEvaluation(),children:()=>d("div",{class:u("dcg-braille-evaluation"),children:d(rfe,{readOnly:this.const(!0),class:this.const("dcg-braille-evaluation-inner"),value:()=>this.getEvaluationBraille(),onKeyDown:this.bindFn(this.handleBrailleKeydown),onInput:()=>{}})})}),d(Zl,{predicate:()=>this.showError(),children:()=>_("div",{class:u("dcg-braille-error"),children:[d("div",{class:u("dcg-basic-expression-error"),children:d("i",{class:u("dcg-icon-error"),"aria-hidden":u("true")})}),d(ofe,{readOnly:this.const(!0),class:this.const("dcg-braille-error-inner"),value:()=>this.getError(),onKeyDown:this.bindFn(this.handleBrailleKeydown),onInput:()=>{}})]})})]})}),d(Zl,{predicate:()=>this.controller.renderAsBraille(),children:()=>d("div",{class:u("dcg-exp-mathquill-container"),didMount:this.bindFn(this.didMountMQ),onTap:this.bindFn(this.forceModelFocus),children:d(St,{latex:()=>this.getLatex(),config:this.const({}),onReflow:this.bindFn(this.onMQReflow)})})}),d(Zl,{predicate:()=>!this.controller.renderAsBraille(),children:()=>d("div",{class:u("dcg-exp-mathquill-container"),didMount:this.bindFn(this.didMountMQ),children:d(qe,{latex:()=>this.getLatex(),onReflow:this.bindFn(this.onMQReflow),isFocused:this.bindFn(this.getIsFocused),capExpressionSize:()=>this.controller.getCapExpressionSize(),config:this.bindFn(this.getMQConfig),getAriaLabel:()=>this.getAriaLabel(),getAriaPostLabel:()=>this.getPostLabel(),hasError:()=>!1,onUserPressedKey:(e,t)=>{this.controller.isSettingsMenuOpen()&&this.controller.dispatch({type:"close-settings-menu"}),this.dispatch({type:"keypad/press-key",key:e,evt:t,source:"keyboard"})},onUserChangedLatex:e=>{this.dispatch({type:"update-latex",id:this.props.id(),latex:e})},onFocusedChanged:this.bindFn(this.onFocusedChanged),disableSpace:()=>this.controller.getRestrictedEditing()})})}),_("div",{class:u("dcg-exp-output-container"),children:[d(Zl,{predicate:()=>this.showError()&&!this.controller.renderAsBraille(),children:()=>d(io,{error:this.bindFn(this.getError),gravity:this.const("w")})}),d(Zl,{predicate:()=>this.getShowEvaluation(),children:()=>_("div",{class:()=>({"dcg-basic-expression-value":!0,"dcg-basic-evaluation-gray":this.model.isEvaluationList(this.props.id())}),children:[d(St,{config:this.const({}),latex:()=>this.getEvaluationLatex()}),d(Zl,{predicate:()=>this.controller.canDisplayEvaluationAsFraction(this.props.id()),children:()=>d(Re,{tooltip:this.bindFn(this.getFractionMessage),gravity:this.const("s"),children:d("span",{role:u("button"),tabIndex:u("0"),"aria-label":this.bindFn(this.getFractionDisplayAriaLabel),class:()=>({"dcg-basic-fraction-toggle":!0,"dcg-selected":this.isFractionEvaluation()}),onTap:this.bindFn(this.toggleFractionEvaluation),children:d("i",{class:u("dcg-icon-fraction"),"aria-hidden":u("true")})})})}),d(Zl,{predicate:()=>this.shouldShowEvaluationCopyButton(),children:()=>d(Ym,{controller:this.props.controller,latex:this.bindFn(this.getEvaluationLatexForCopy)})})]})})]})]})}getEvaluationLatexForCopy(){let e=this.getEvaluationLatex();return e[0]==="="?e.slice(1):e}shouldShowEvaluationCopyButton(){return this.isBareRationalizableConstant()?!1:this.controller.shouldShowEvaluationCopyButtons()}getMQConfig(){return this.controller.getMathquillConfig()}};var{For:ife,If:nfe}=cJ.Components,jw=class extends $t{constructor(){super(...arguments),this.didShowAnswerHint=!1,this.didHideAnswerHint=!1}template(){return _("div",{class:u("dcg-basic-list-container"),role:u("region"),"aria-label":()=>this.controller.s("shared-calculator-narration-expression-list"),didMount:this.bindFn(this.didMountContainer),children:[d("div",{class:u("dcg-basic-list-placeholder"),didMount:this.bindFn(this.didMountPlaceholder),children:d(nfe,{predicate:this.bindFn(this.showAnswerHint),children:()=>_("div",{class:u("dcg-answer-hint"),children:[()=>this.controller.s("basic-calculator-label-answer-hint"),d("i",{class:u("dcg-icon-curved-arrow")})]})})}),d("div",{class:()=>({"dcg-basic-list":!0,"dcg-projector-mode":this.controller.isProjectorMode()}),children:d(ife.Simple,{each:()=>this.model.getExpressionOrder(),children:e=>d($w,{controller:this.props.controller,id:()=>e})})})]})}didMountPlaceholder(e){re(e).on("dcg-tap",Rr)}showAnswerHint(){if(this.didHideAnswerHint)return!1;let e=this.model.getExpressionOrder()[0];return this.model.shouldShowEvaluationForExpression(e)||this.didShowAnswerHint?(this.didShowAnswerHint=!0,this.model.getNumberOfExpressions()>1||this.model.getExpressionLatex(e)===""?(this.didHideAnswerHint=!0,!1):!0):!1}didUpdate(){if(!this.container)return;let e=this.container.querySelector(".dcg-focused");e&&ta(e,this.container,50)}didMountContainer(e){this.container=e}};ce();ie();ce();ie();var XA=__dcg_shared_module_exports__['e'](se());var{For:afe}=XA.Components,mb=class extends XA.View{template(){return _("tr",{children:[d("td",{children:d(afe,{each:()=>this.getBrailleAscii(this.props.latex()),children:e=>d("span",{class:u("dcg-key-press"),children:()=>e().char})},e=>e.key)}),d("td",{class:u("dcg-braille-font"),children:()=>this.getBrailleUnicode(this.props.latex())}),d("td",{children:d(St,{config:this.const({}),latex:()=>this.props.latex()})})]})}getBrailleAscii(e){let t=Ri.toExpandedBrailleAscii(this.getBrailleUnicode(e)),o=[];for(let i=0;i<t.length;i++)o.push({char:t[i],key:i+")"+t[i]});return o}getBrailleUnicode(e){let t;return this.props.brailleMode()==="nemeth"?t=lc(e):this.props.brailleMode()==="ueb"&&(t=cc(e)),t&&t.value?t.value:""}};var Oh=class extends $t{template(){return d("div",{class:()=>({"dcg-braille-io-keypad-container":!0,"dcg-has-background-color":this.controller.hasBackgroundColor()}),children:_("div",{class:u("dcg-braille-io-keypad"),children:[_("div",{class:u("dcg-braille-description"),children:[d("div",{class:u("dcg-braille-title"),children:()=>this.controller.s("basic-calculator-text-braille-mode-is-on",{mode:this.brailleType()})}),d("div",{class:u("dcg-braille-info-text"),children:()=>this.controller.s("basic-calculator-text-how-to-type-braille")}),d("div",{class:u("dcg-btn-blue"),role:u("button"),tabIndex:u(0),onTap:()=>this.controller.dispatch({type:"set-braille-mode",mode:"none"}),children:()=>this.controller.s("basic-calculator-button-turn-braille-mode-off",{mode:this.brailleType()})})]}),_("div",{class:u("dcg-braille-examples-table-container"),children:[_("table",{class:u("dcg-braille-examples-table"),children:[_("tr",{children:[d("th",{children:()=>this.controller.s("basic-calculator-heading-braille-table-type-this")}),d("th",{children:()=>this.brailleType()}),d("th",{children:()=>this.controller.s("basic-calculator-heading-braille-table-typeset")})]}),d(mb,{brailleMode:()=>this.controller.getBrailleMode(),latex:this.const("2+2")}),d(mb,{brailleMode:()=>this.controller.getBrailleMode(),latex:this.const("\\frac{1}{2}")}),d(mb,{brailleMode:()=>this.controller.getBrailleMode(),latex:this.const("\\sqrt{4}")})]}),d("div",{class:u("dcg-more-examples-link"),children:d("a",{href:()=>"https://www.desmos.com/braille-examples?"+this.controller.getBrailleMode(),target:u("_blank"),children:()=>this.controller.s("basic-calculator-link-view-braille-examples")})})]})]})})}brailleType(){return this.controller.getBrailleMode()==="nemeth"?"Nemeth":this.controller.getBrailleMode()==="ueb"?"UEB":""}};ce();ie();var bJ=__dcg_shared_module_exports__['e'](se());ce();ie();var Ws=class extends wh{template(){return d("div",{class:u("dcg-keypad-control-bar dcg-do-not-blur"),role:u("group"),"aria-label":()=>this.controller.s("shared-calculator-narration-keypad-controlbar"),children:d("div",{class:u("dcg-keypad-control-bar-contents"),children:this.props.children})})}};ce();ie();var dJ=__dcg_shared_module_exports__['e'](se()),Zr=class extends dJ.View{template(){return d("div",{class:()=>({"dcg-keypad-control-btn":!0,"dcg-disabled":this.isDisabled(),"dcg-selected":!this.isDisabled()&&this.isSelected(),"dcg-selectable-btn":!this.isDisabled()&&this.isSelectable(),"dcg-narrow-control-btn":this.props.narrowButton&&this.props.narrowButton()}),didMount:this.bindFn(this.didDivMount),role:u("button"),"aria-disabled":()=>this.isDisabled()||void 0,"aria-label":()=>this.getAriaLabel(),"dcg-command":this.props.command,onTap:this.bindFn(this.handleTap),"aria-pressed":()=>!this.hasPopup()&&!this.isDisabled()&&this.isSelectable()?this.isSelected():void 0,"aria-expanded":()=>this.hasPopup()&&!this.isDisabled()?this.isSelected():void 0,tabIndex:this.bindFn(this.getTabIndex),children:this.props.children})}getTabIndex(){if(!this.isDisabled())return this.props.ignoreInTabOrder&&this.props.ignoreInTabOrder()?-1:0}handleTap(e){this.isDisabled()||this.props.onTap(e)}getAriaLabel(){return this.props.ariaLabel?this.props.ariaLabel():this.props.command()}hasPopup(){var e,t;return!!((t=(e=this.props).ariaPopup)!=null&&t.call(e))}isDisabled(){var e,t;return!!((t=(e=this.props).disabled)!=null&&t.call(e))}isSelected(){var e,t;return!!((t=(e=this.props).selected)!=null&&t.call(e))}isSelectable(){var e,t;return!!((t=(e=this.props).selectable)!=null&&t.call(e))}didDivMount(e){this.props.didMount&&this.props.didMount(e)}};ce();ie();ce();ie();var mJ=__dcg_shared_module_exports__['e'](se());ce();ie();var pJ=__dcg_shared_module_exports__['e'](se());function sfe(){if(!s0)return!1;let r=navigator.userAgent.match(/Version\/(\d+)/);return!r||!r[1]?!1:parseFloat(r[1])<11}function uJ(){return!$U&&!sfe()&&typeof document.createElement("a").download!="undefined"}function hJ(){return uJ()||navigator.msSaveBlob!==void 0}var Yw=class extends pJ.View{init(){this.supportsDirectDownload=uJ()}template(){return _("a",{role:u("button"),tabIndex:()=>this.props.enabled()?0:-1,"aria-disabled":()=>this.props.enabled()?void 0:!0,class:()=>{var e,t,o,i,n,a;return{"dcg-download-button":!0,"dcg-btn-blue":((t=(e=this.props).buttonType)==null?void 0:t.call(e))==="primary","dcg-btn-blue-outline":((i=(o=this.props).buttonType)==null?void 0:i.call(o))==="secondary","dcg-blue-link":((a=(n=this.props).buttonType)==null?void 0:a.call(n))==="link","dcg-disabled":!this.props.enabled()}},didMount:this.bindFn(this.didMountDownload),didUnmount:this.bindFn(this.didUnmountDownload),didUpdate:this.bindFn(this.didUpdate),download:()=>this.supportsDirectDownload?this.props.filename():void 0,onTap:e=>{var o,i;if((i=(o=this.props).triggerLogEvent)==null||i.call(o),this.supportsDirectDownload||!navigator.msSaveOrOpenBlob)return;let t=this.props.data();t&&(navigator.msSaveOrOpenBlob(t,this.props.filename()),e.preventDefault())},children:[d("i",{class:u("dcg-icon-download"),"aria-hidden":u("true")}),d("span",{children:()=>this.props.text()})]})}didMountDownload(e){this.downloadLink=e,this.didUpdate()}didUnmountDownload(){this.revokeBlobURL()}didUpdate(){this.updateDownloadURL(),this.cachedObjectURL&&(this.downloadLink.href=this.cachedObjectURL)}updateDownloadURL(){if(this.revokeBlobURL(),!this.supportsDirectDownload)return;let e=this.props.data();e&&(this.cachedObjectURL=URL.createObjectURL(e))}revokeBlobURL(){this.cachedObjectURL&&URL.revokeObjectURL(this.cachedObjectURL)}};Vt();function JA(r,e,t=!1){if(t&&(r=r.replace(/ /g,"\\ ")),e==="none")return r;let o=e==="nemeth"?lc(r):cc(r);return o.isError?"":Ri.toBrailleAscii(o.value)}function gJ(r,e){if(e==="none")return"";let t=[];t.push(JA("Expression List",e,!0)),t.push(""),t.push("");for(let o of r.getExpressionOrder()){let i=lfe(""+(r.getExpressionIndex(o)+1),e),n=r.getExpressionLatex(o),a=r.getExpressionValue(o);a!==void 0&&(n+=`=${a}`),t.push(`${i}  ${JA(n,e,!1)}`)}return t.join(`
`)}function lfe(r,e){return e==="nemeth"?`${JA(r,e,!1)}_4`:e==="ueb"?JA(`${r}.`,e,!1):""}var{If:Xw}=mJ.Components,ZA=class extends $t{template(){return d("div",{class:()=>({"dcg-settings-dropdown":!0,"dcg-popover":!0,"dcg-point-left":this.controller.containerSize.height<=420}),role:u("region"),"aria-label":u("Settings Menu"),didMount:this.bindFn(this.didMountSettingsDropdown),didUnmount:this.bindFn(this.didUnmountSettingsDropdown),children:_("div",{class:u("dcg-popover-interior"),children:[d("div",{class:()=>({"dcg-settings-menu-option":!0,"dcg-displaysize-container":!0}),children:d(hr,{ariaGroupLabel:()=>this.controller.s("shared-calculator-narration-settings-display-size"),staticConfig:this.bindFn(this.getProjectorModeOptions)})}),d(tt,{onChange:this.bindFn(this.onToggleInvertedColors),checked:()=>this.controller.getInvertedColors(),class:this.const("dcg-settings-menu-option dcg-do-not-blur dcg-reverse-contrast"),children:d("span",{class:u("dcg-checkbox-label"),children:()=>this.controller.s("basic-calculator-label-reverse-contrast")})}),d(Xw,{predicate:()=>this.controller.getBrailleControls(),children:()=>_("div",{children:[d(tt,{onChange:this.bindFn(this.onToggleBrailleMode),checked:()=>this.controller.renderAsBraille(),class:this.const("dcg-settings-menu-option dcg-do-not-blur dcg-braille-mode"),children:d("span",{class:u("dcg-checkbox-label"),children:()=>this.controller.s("shared-calculator-narration-braille-mode")})}),d(Xw,{predicate:()=>this.controller.renderAsBraille(),children:()=>_("div",{class:()=>({"dcg-settings-menu-option":!0,"dcg-braille-container":!0}),children:[d(Pp,{showBrailleNote:this.const(!1),controller:this.props.controller}),d("div",{class:u("dcg-braille-options-container"),children:d(Xw,{predicate:()=>!ja&&hJ()&&this.controller.getBrailleExpressionDownload(),children:()=>d(Yw,{data:()=>{let e=gJ(this.model,this.controller.getBrailleMode());return new Blob([e],{type:"text/plain"})},enabled:this.const(!0),filename:this.const("desmos-equations.brl"),text:()=>this.controller.s("basic-calculator-link-download-braille-equations"),buttonType:this.const("link")})})})]})})]})}),d(Xw,{predicate:()=>this.controller.isComplexModeAllowed(),children:()=>d(Dp,{controller:this.props.controller,isComplexModeEnabled:()=>this.controller.isComplexModeEnabled(),toggleComplexMode:this.bindFn(this.onToggleComplexMode),product:this.const("scientific")})}),d(Xw,{predicate:()=>!!this.getVersionNumber(),children:()=>_("div",{class:u("dcg-version-number"),children:["Version: ",()=>this.getVersionNumber()]})})]})})}getProjectorModeOptions(){return[{key:"default",label:()=>"A",ariaLabel:()=>this.controller.s("shared-calculator-narration-settings-display-size-default"),class:()=>"dcg-displaysize-default",selected:()=>!this.getProjectorMode(),onSelect:()=>this.onSelectProjectorModeOption(!1)},{key:"large",label:()=>"A",ariaLabel:()=>this.controller.s("shared-calculator-narration-settings-display-size-large"),class:()=>"dcg-displaysize-large",selected:()=>this.getProjectorMode(),onSelect:()=>this.onSelectProjectorModeOption(!0)}]}onSelectProjectorModeOption(e){this.controller.dispatch({type:"update-projector-mode",mode:e})}getVersionNumber(){let e=window;if(e&&e.AppBridge)return e.AppBridge.versionNumber}didUnmountSettingsDropdown(){re(document).off(".dcg-settings-view")}didMountSettingsDropdown(e){this.settingsGroupNode=e,re(document).on("dcg-tapstart.dcg-settings-view",t=>{t.target.closest(".dcg-basic-settings-container")||this.controller.dispatch({type:"close-settings-menu"})}),re(document).on("keydown.dcg-settings-view",t=>{if(Pe(t)==="Esc"&&(this.controller.dispatch({type:"close-settings-menu"}),this.controller.dispatch({type:"focus-last-expression"})),Pe(t)==="Tab"&&!t.altKey&&!t.metaKey&&!t.ctrlKey){let o=document.activeElement,i=this.props.settingsButtonNode(),n=[...this.settingsGroupNode.querySelectorAll(".dcg-settings-menu-option")].slice(-1)[0];!t.shiftKey&&o===n?(i.focus(),t.preventDefault(),t.stopPropagation()):t.shiftKey&&o===i&&(n.focus(),t.preventDefault(),t.stopPropagation())}})}onToggleBrailleMode(){this.controller.dispatch({type:"set-braille-mode",mode:this.controller.renderAsBraille()?"none":"nemeth"})}onToggleInvertedColors(){let e=!this.controller.getInvertedColors();this.controller.dispatch({type:"update-inverted-colors",mode:e})}onToggleComplexMode(){this.controller.dispatch({type:"toggle-complex-mode",enabled:!this.controller.isComplexModeEnabled()})}getProjectorMode(){return this.controller.isProjectorMode()}};var fJ=__dcg_shared_module_exports__['e'](se());var{If:dfe}=fJ.Components,fb=class extends $t{template(){let r=this.props.controller();return _("div",{class:u("dcg-basic-settings-container"),children:[d(Zr,{didMount:e=>this.settingsButtonNode=e,command:this.const("settings"),ariaLabel:()=>r.s("basic-calculator-narration-controlbar-settings"),onTap:this.bindFn(this.onToggleSettingsMenu),selected:()=>this.controller.isSettingsMenuOpen(),ariaPopup:this.const(!0),children:d("i",{class:u("dcg-icon-wrench"),"aria-hidden":u("true")})}),d(dfe,{predicate:()=>this.controller.isSettingsMenuOpen(),children:()=>d(ZA,{controller:this.props.controller,settingsButtonNode:()=>this.settingsButtonNode})})]})}onToggleSettingsMenu(){this.controller.dispatch({type:"toggle-settings-menu"})}};var{If:Jw,IfElse:pfe}=bJ.Components,QA=class extends $t{template(){let r=this.props.controller();return _(Ws,{controller:this.props.controller,children:[d(Jw,{predicate:()=>this.showUndoRedo(),children:()=>d(Zr,{command:this.const("undo"),disabled:()=>!r.canUndo(),ariaLabel:()=>r.s("basic-calculator-narration-controlbar-undo"),onTap:e=>r.dispatch({type:"undo",source:e.device==="keyboard"?"button-keyboard":"button-tap"}),children:d("i",{class:u("dcg-icon-undo"),"aria-hidden":u("true")})})}),d(Jw,{predicate:()=>this.showUndoRedo(),children:()=>d(Zr,{command:this.const("redo"),disabled:()=>!r.canRedo(),ariaLabel:()=>r.s("basic-calculator-narration-controlbar-redo"),onTap:e=>r.dispatch({type:"redo",source:e.device==="keyboard"?"button-keyboard":"button-tap"}),children:d("i",{class:u("dcg-icon-redo"),"aria-hidden":u("true")})})}),pfe(()=>r.shouldShowClear(),{true:()=>d(Zr,{command:this.const("clear"),ariaLabel:()=>r.s("basic-calculator-narration-controlbar-clear"),onTap:()=>r.dispatch({type:"clear"}),children:()=>r.s("basic-calculator-button-controlbar-clear")}),false:()=>d(Zr,{command:this.const("clearall"),disabled:()=>!r.canClear(),ariaLabel:()=>r.s("basic-calculator-narration-controlbar-clear-all"),onTap:()=>r.dispatch({type:"set-blank",opts:{allowUndo:!0}}),children:()=>r.s("basic-calculator-button-controlbar-clear-all")})}),d(Jw,{predicate:()=>!this.showUndoRedo(),children:()=>d("div",{class:u("dcg-spacer-2")})}),d(Jw,{predicate:()=>r.getBrailleMode()==="none",children:()=>d(Zr,{command:this.const("backspace"),ariaLabel:()=>r.s("basic-calculator-narration-controlbar-backspace"),disabled:()=>!r.canBackspace(),onTap:()=>r.dispatch({type:"keypad/press-key",key:"Backspace",source:"keypad"}),children:d("i",{class:u("dcg-icon-delete"),"aria-hidden":u("true")})})}),d(Jw,{predicate:()=>this.props.controller().getSettingsMenu(),children:()=>d(fb,{controller:this.props.controller})})]})}showUndoRedo(){return!(this.controller.getRestrictedEditing()||this.controller.getDisableParentheses())}onToggleSettingsMenu(){this.controller.dispatch({type:"toggle-settings-menu"})}};ce();ie();var xJ=__dcg_shared_module_exports__['e'](se());var{Switch:yJ}=xJ.Components,Zw=class extends $t{template(){return d("div",{role:u("region"),"aria-label":()=>this.s("shared-calculator-narration-keypad"),children:_(mr,{controller:this.props.controller,children:[_(Ye,{children:[d(yJ,{children:e=>{switch(e){case"parens":return O(this,"(",{colspan:this.parenColspan()});case"undoredo":return O(this,"undo",{colspan:this.parenColspan(),disabled:()=>!this.controller.canUndo()});case"none":return Pr(this.parenColspan())}}},this.bindFn(this.getTopLeftButtons)),d(yJ,{children:e=>{switch(e){case"parens":return O(this,")",{colspan:this.parenColspan()});case"undoredo":return O(this,"redo",{colspan:this.parenColspan(),disabled:()=>!this.controller.canRedo()});case"none":return Pr(this.parenColspan())}}},this.bindFn(this.getTopLeftButtons)),this.makeAdditionalFunctionKey(0),this.makeAdditionalFunctionKey(1),O(this,"division")]}),_(Ye,{children:[O(this,"7",{style:"highlight"}),O(this,"8",{style:"highlight"}),O(this,"9",{style:"highlight"}),O(this,"multiplication")]}),_(Ye,{children:[O(this,"4",{style:"highlight"}),O(this,"5",{style:"highlight"}),O(this,"6",{style:"highlight"}),O(this,"-")]}),_(Ye,{children:[O(this,"1",{style:"highlight"}),O(this,"2",{style:"highlight"}),O(this,"3",{style:"highlight"}),O(this,"+")]}),_(Ye,{children:[O(this,"0",{style:"highlight"}),O(this,".",{style:"highlight"}),O(this,"ans"),O(this,"enter",{style:"blue"})]})]})})}getTopLeftButtons(){return this.showParens()?"parens":this.controller.getRestrictedEditing()?"none":"undoredo"}showParens(){return!this.controller.getDisableParentheses()}parenColspan(){return this.controller.getAdditionalFunctions().length>1?.5:1}makeAdditionalFunctionKey(e){let t=this.controller.getAdditionalFunctions()[e];return t==="exponent"?O(this,"a^b"):t==="percent"?O(this,"%"):t==="sqrt"?O(this,"sqrt"):t==="fraction"?O(this,"a/b"):void 0}};ce();ie();var vJ=__dcg_shared_module_exports__['e'](se());var{If:ZG,IfElse:ufe}=vJ.Components,e2=class extends $t{template(){let r=this.props.controller();return _(Ws,{controller:this.props.controller,children:[d(Zr,{command:this.const("main"),selected:()=>r.getKeyboardMode()==="main",disabled:()=>this.controller.renderAsBraille(),selectable:this.const(!0),onTap:()=>r.dispatch({type:"main"}),ariaLabel:()=>r.s("basic-calculator-narration-controlbar-main"),children:()=>r.s("basic-calculator-button-controlbar-main")}),d(Zr,{command:this.const("ABC"),selected:()=>["qwerty","capitalQwerty","letters"].indexOf(r.getKeyboardMode())!==-1,disabled:()=>this.controller.renderAsBraille(),selectable:this.const(!0),ariaLabel:()=>r.s("basic-calculator-narration-controlbar-abc"),onTap:()=>r.dispatch({type:"ABC"}),children:()=>r.s("basic-calculator-button-controlbar-abc")}),d(Zr,{command:this.const("functions"),selected:()=>["functions","restrictedFunctions"].indexOf(r.getKeyboardMode())!==-1,ariaLabel:()=>r.s("basic-calculator-narration-controlbar-functions"),disabled:()=>this.controller.renderAsBraille(),selectable:this.const(!0),onTap:()=>r.dispatch({type:"functions"}),children:()=>r.s("basic-calculator-button-controlbar-func")}),d(ps,{setup:this.const({type:"basic",controller:this.controller})}),d(ZG,{predicate:()=>!this.controller.getRestrictedEditing(),children:()=>d(Zr,{command:this.const("undo"),disabled:()=>!r.canUndo(),ariaLabel:()=>r.s("basic-calculator-narration-controlbar-undo"),onTap:e=>r.dispatch({type:"undo",source:e.device==="keyboard"?"button-keyboard":"button-tap"}),children:d("i",{class:u("dcg-icon-undo"),"aria-hidden":u("true")})})}),d(ZG,{predicate:()=>!this.controller.getRestrictedEditing(),children:()=>d(Zr,{command:this.const("redo"),disabled:()=>!r.canRedo(),ariaLabel:()=>r.s("basic-calculator-narration-controlbar-redo"),onTap:e=>r.dispatch({type:"redo",source:e.device==="keyboard"?"button-keyboard":"button-tap"}),children:d("i",{class:u("dcg-icon-redo"),"aria-hidden":u("true")})})}),ufe(()=>r.shouldShowClear(),{true:()=>d(Zr,{command:this.const("clear"),ariaLabel:()=>r.s("basic-calculator-narration-controlbar-clear"),onTap:()=>r.dispatch({type:"clear"}),children:()=>r.s("basic-calculator-button-controlbar-clear")}),false:()=>d(Zr,{command:this.const("clearall"),disabled:()=>!r.canClear(),ariaLabel:()=>r.s("basic-calculator-narration-controlbar-clear-all"),onTap:()=>r.dispatch({type:"set-blank",opts:{allowUndo:!0}}),children:()=>r.s("basic-calculator-button-controlbar-clear-all")})}),d(ZG,{predicate:()=>this.props.controller().getSettingsMenu(),children:()=>d(fb,{controller:this.props.controller})})]})}};ce();ie();var EJ=__dcg_shared_module_exports__['e'](se());ie();var Qw=class extends $t{template(){return _(mr,{controller:this.props.controller,children:[_(Ye,{children:[O(this,"A"),O(this,"B"),O(this,"C"),O(this,"D"),O(this,"E"),O(this,"F"),O(this,"G"),O(this,"H"),O(this,"I"),O(this,"J")]}),_(Ye,{children:[O(this,"K"),O(this,"L"),O(this,"M"),O(this,"N"),O(this,"O"),O(this,"P"),O(this,"Q"),O(this,"R"),O(this,"S"),O(this,"T")]}),_(Ye,{children:[O(this,"=",{style:"highlight"}),O(this,","),O(this,"U"),O(this,"V"),O(this,"W"),O(this,"X"),O(this,"Y"),O(this,"Z"),O(this,"pi"),O(this,"backspace",{style:"highlight"})]}),_(Ye,{children:[O(this,"shift",{style:"highlight",colspan:2}),O(this,"("),O(this,")"),O(this,"["),O(this,"]"),O(this,"!"),O(this,"'"),O(this,"enter",{style:"blue",colspan:2})]})]})}};ce();ie();var e1=class extends $t{template(){return _(mr,{controller:this.props.controller,children:[_(Ye,{children:[O(this,"Q"),O(this,"W"),O(this,"E"),O(this,"R"),O(this,"T"),O(this,"Y"),O(this,"U"),O(this,"I"),O(this,"O"),O(this,"P")]}),_(Ye,{children:[d("div",{class:u("dcg-half-width-placeholder")}),O(this,"A"),O(this,"S"),O(this,"D"),O(this,"F"),O(this,"G"),O(this,"H"),O(this,"J"),O(this,"K"),O(this,"L"),d("div",{class:u("dcg-half-width-placeholder")})]}),_(Ye,{children:[O(this,"=",{style:"highlight"}),O(this,"Z"),O(this,"X"),O(this,"C"),O(this,"V"),O(this,"B"),O(this,"N"),O(this,"M"),O(this,","),O(this,"backspace",{style:"highlight"})]}),_(Ye,{children:[O(this,"shift",{style:"highlight",colspan:1.5}),O(this,"("),O(this,")"),O(this,"["),O(this,"]"),O(this,"!"),O(this,"'"),O(this,"pi"),O(this,"enter",{style:"blue",colspan:1.5})]})]})}};ce();ie();var wJ=__dcg_shared_module_exports__['e'](se());var{IfElse:hfe}=wJ.Components,t1=class extends $t{template(){return d("div",{class:u("dcg-sci-func-keypad"),children:_(mr,{controller:this.props.controller,children:[_(Ye,{children:[O(this,"sin"),O(this,"cos"),O(this,"tan"),d("div",{class:u("dcg-partition-placeholder")}),O(this,"a^b"),O(this,"sqrt"),O(this,"nthroot")]}),_(Ye,{children:[O(this,"arcsin"),O(this,"arccos"),O(this,"arctan"),d("div",{class:u("dcg-partition-placeholder")}),O(this,"e^x"),O(this,"abs"),hfe(()=>this.controller.getReplaceRoundWithReciprocal(),{true:()=>O(this,"a^{-1}"),false:()=>O(this,"round")})]}),_(Ye,{children:[O(this,"mean"),O(this,"stdev"),O(this,"stdevp"),d("div",{class:u("dcg-partition-placeholder")}),O(this,"ln"),O(this,"log"),O(this,"backspace",{style:"highlight"})]}),_(Ye,{children:[O(this,"nPr"),O(this,"nCr"),O(this,"!"),d("div",{class:u("dcg-partition-placeholder")}),O(this,"e"),O(this,"pi"),O(this,"enter",{style:"blue"})]})]})})}};ce();ie();var SJ=__dcg_shared_module_exports__['e'](se());var{IfElse:gfe}=SJ.Components,r1=class extends $t{template(){return d("div",{class:u("dcg-sci-func-keypad dcg-sci-func-keypad--complex"),children:_(mr,{controller:this.props.controller,children:[_(Ye,{children:[O(this,"sin"),O(this,"cos"),O(this,"tan"),d("div",{class:u("dcg-partition-placeholder")}),O(this,"%"),O(this,"pi"),O(this,"e"),O(this,"e^x")]}),_(Ye,{children:[O(this,"arcsin"),O(this,"arccos"),O(this,"arctan"),d("div",{class:u("dcg-partition-placeholder")}),O(this,"real"),O(this,"imag"),O(this,"conj"),O(this,"arg")]}),_(Ye,{children:[O(this,"mean"),O(this,"stdev"),O(this,"stdevp"),d("div",{class:u("dcg-partition-placeholder")}),O(this,"ln"),O(this,"log"),O(this,"sqrt"),O(this,"backspace",{style:"highlight"})]}),_(Ye,{children:[O(this,"nPr"),O(this,"nCr"),O(this,"!"),d("div",{class:u("dcg-partition-placeholder")}),O(this,"abs"),gfe(()=>this.controller.getReplaceRoundWithReciprocal(),{true:()=>O(this,"a^{-1}"),false:()=>O(this,"round")}),O(this,"nthroot"),O(this,"enter",{style:"blue"})]})]})})}};ce();ie();var kJ=__dcg_shared_module_exports__['e'](se());var{IfElse:TJ}=kJ.Components,o1=class extends $t{template(){return _(mr,{controller:this.props.controller,children:[_(Ye,{children:[O(this,"a^2"),O(this,"a^b"),O(this,"|a|"),d("div",{class:u("dcg-partition-placeholder")}),O(this,"7",{style:"highlight"}),O(this,"8",{style:"highlight"}),O(this,"9",{style:"highlight"}),O(this,"division"),d("div",{class:u("dcg-partition-placeholder")}),TJ(()=>{var e,t;return(t=(e=this.controller).isComplexModeEnabled)==null?void 0:t.call(e)},{true:()=>O(this,"i"),false:()=>O(this,"%")}),O(this,"a/b")]}),_(Ye,{children:[O(this,"sqrt"),O(this,"nthroot"),O(this,"pi"),d("div",{class:u("dcg-partition-placeholder")}),O(this,"4",{style:"highlight"}),O(this,"5",{style:"highlight"}),O(this,"6",{style:"highlight"}),O(this,"multiplication"),d("div",{class:u("dcg-partition-placeholder")}),O(this,"left",{style:"highlight"}),O(this,"right",{style:"highlight"})]}),_(Ye,{children:[O(this,"sin"),O(this,"cos"),O(this,"tan"),d("div",{class:u("dcg-partition-placeholder")}),O(this,"1",{style:"highlight"}),O(this,"2",{style:"highlight"}),O(this,"3",{style:"highlight"}),O(this,"-"),d("div",{class:u("dcg-partition-placeholder")}),Pr(.5),O(this,"backspace",{style:"highlight",colspan:1.5})]}),_(Ye,{children:[O(this,"("),O(this,")"),TJ(()=>this.controller.getReplaceCommaWith10Exp(),{true:()=>O(this,"10^n"),false:()=>O(this,",")}),d("div",{class:u("dcg-partition-placeholder")}),O(this,"0",{style:"highlight"}),O(this,".",{style:"highlight"}),O(this,"ans"),O(this,"+"),d("div",{class:u("dcg-partition-placeholder")}),O(this,"enter",{style:"blue",colspan:2})]})]})}};ie();var i1=class extends $t{template(){return _(mr,{controller:this.props.controller,children:[_(Ye,{children:[O(this,"a"),O(this,"b"),O(this,"c"),O(this,"d"),O(this,"e"),O(this,"f"),O(this,"g"),O(this,"h"),O(this,"i"),O(this,"j")]}),_(Ye,{children:[O(this,"k"),O(this,"l"),O(this,"m"),O(this,"n"),O(this,"o"),O(this,"p"),O(this,"q"),O(this,"r"),O(this,"s"),O(this,"t")]}),_(Ye,{children:[O(this,"=",{style:"highlight"}),O(this,","),O(this,"u"),O(this,"v"),O(this,"w"),O(this,"x"),O(this,"y"),O(this,"z"),O(this,"pi"),O(this,"backspace",{style:"highlight"})]}),_(Ye,{children:[O(this,"shift",{style:"highlight",colspan:2}),O(this,"("),O(this,")"),O(this,"["),O(this,"]"),O(this,"!"),O(this,"'"),O(this,"enter",{style:"blue",colspan:2})]})]})}};ce();ie();var n1=class extends $t{template(){return _(mr,{controller:this.props.controller,children:[_(Ye,{children:[O(this,"q"),O(this,"w"),O(this,"e"),O(this,"r"),O(this,"t"),O(this,"y"),O(this,"u"),O(this,"i"),O(this,"o"),O(this,"p")]}),_(Ye,{children:[d("div",{class:u("dcg-half-width-placeholder")}),O(this,"a"),O(this,"s"),O(this,"d"),O(this,"f"),O(this,"g"),O(this,"h"),O(this,"j"),O(this,"k"),O(this,"l"),d("div",{class:u("dcg-half-width-placeholder")})]}),_(Ye,{children:[O(this,"=",{style:"highlight"}),O(this,"z"),O(this,"x"),O(this,"c"),O(this,"v"),O(this,"b"),O(this,"n"),O(this,"m"),O(this,","),O(this,"backspace",{style:"highlight"})]}),_(Ye,{children:[O(this,"shift",{style:"highlight",colspan:1.5}),O(this,"("),O(this,")"),O(this,"["),O(this,"]"),O(this,"!"),O(this,"'"),O(this,"pi"),O(this,"enter",{style:"blue",colspan:1.5})]})]})}};var{SwitchUnion:mfe,IfElse:ffe}=EJ.Components,a1=class extends $t{template(){return d("div",{role:u("region"),"aria-label":()=>this.s("shared-calculator-narration-keypad"),children:mfe(()=>this.controller.getKeyboardMode(),{qwerty:()=>d(n1,{controller:this.props.controller}),letters:()=>d(i1,{controller:this.props.controller}),capitalQwerty:()=>d(e1,{controller:this.props.controller}),capitalLetters:()=>d(Qw,{controller:this.props.controller}),functions:()=>ffe(()=>this.controller.isComplexModeEnabled(),{true:()=>d(r1,{controller:this.props.controller}),false:()=>d(t1,{controller:this.props.controller})}),main:()=>d(o1,{controller:this.props.controller})})})}};ce();ie();var IJ=__dcg_shared_module_exports__['e'](se());var{If:t2}=IJ.Components,r2=class extends $t{template(){let r=this.props.controller();return _(Ws,{controller:this.props.controller,children:[d(t2,{predicate:()=>!this.controller.getRestrictedEditing(),children:()=>d(Zr,{command:this.const("undo"),disabled:()=>!r.canUndo(),ariaLabel:()=>r.s("basic-calculator-narration-controlbar-undo"),onTap:e=>r.dispatch({type:"undo",source:e.device==="keyboard"?"button-keyboard":"button-tap"}),children:d("i",{class:u("dcg-icon-undo"),"aria-hidden":u("true")})})}),d(t2,{predicate:()=>!this.controller.getRestrictedEditing(),children:()=>d(Zr,{command:this.const("redo"),disabled:()=>!r.canRedo(),ariaLabel:()=>r.s("basic-calculator-narration-controlbar-redo"),onTap:e=>r.dispatch({type:"redo",source:e.device==="keyboard"?"button-keyboard":"button-tap"}),children:d("i",{class:u("dcg-icon-redo"),"aria-hidden":u("true")})})}),d(Zr,{command:this.const("clear"),ariaLabel:()=>r.s("basic-calculator-narration-controlbar-clear"),onTap:()=>r.dispatch({type:"clear"}),children:()=>r.s("basic-calculator-button-controlbar-clear")}),d(t2,{predicate:()=>this.controller.getRestrictedEditing(),children:()=>d("div",{class:u("dcg-spacer-2")})}),d(t2,{predicate:()=>r.getBrailleMode()==="none",children:()=>d(Zr,{command:this.const("backspace"),ariaLabel:()=>r.s("basic-calculator-narration-controlbar-backspace"),disabled:()=>!r.canBackspace(),onTap:()=>r.dispatch({type:"keypad/press-key",key:"Backspace",source:"keypad"}),children:d("i",{class:u("dcg-icon-delete"),"aria-hidden":u("true")})})})]})}};ce();ie();var s1=class extends $t{template(){return d("div",{role:u("region"),"aria-label":()=>this.s("shared-calculator-narration-keypad"),children:_(mr,{controller:this.props.controller,children:[_(Ye,{children:[O(this,"(",{colspan:this.parenColspan()}),O(this,")",{colspan:this.parenColspan()}),this.makeAdditionalFunctionKey(1)]}),_(Ye,{children:[O(this,"7",{style:"highlight"}),O(this,"8",{style:"highlight"}),O(this,"9",{style:"highlight"}),O(this,"division")]}),_(Ye,{children:[O(this,"4",{style:"highlight"}),O(this,"5",{style:"highlight"}),O(this,"6",{style:"highlight"}),O(this,"multiplication")]}),_(Ye,{children:[O(this,"1",{style:"highlight"}),O(this,"2",{style:"highlight"}),O(this,"3",{style:"highlight"}),O(this,"-")]}),_(Ye,{children:[O(this,"0",{style:"highlight"}),O(this,".",{style:"highlight",colspan:this.dotColspan()}),this.makeAdditionalFunctionKey(0),O(this,"+")]})]})})}parenColspan(){return this.controller.getAdditionalFunctions().length===2?1.5:2}dotColspan(){return this.controller.getAdditionalFunctions().length?1:2}makeAdditionalFunctionKey(e){let t=this.controller.getAdditionalFunctions()[e];return t==="exponent"?O(this,"a^b"):t==="percent"?O(this,"%"):t==="sqrt"?O(this,"sqrt"):void 0}};ce();ie();var _J=__dcg_shared_module_exports__['e'](se());var{If:CJ}=_J.Components,o2=class extends $t{template(){let r=this.props.controller();return _(Ws,{controller:this.props.controller,children:[d(ps,{setup:this.const({type:"basic",controller:this.controller})}),d("div",{class:u("dcg-spacer")}),d(CJ,{predicate:()=>!this.controller.getRestrictedEditing(),children:()=>d(Zr,{command:this.const("undo"),disabled:()=>!r.canUndo(),ariaLabel:()=>r.s("basic-calculator-narration-controlbar-undo"),onTap:e=>r.dispatch({type:"undo",source:e.device==="keyboard"?"button-keyboard":"button-tap"}),children:d("i",{class:u("dcg-icon-undo"),"aria-hidden":u("true")})})}),d(CJ,{predicate:()=>!this.controller.getRestrictedEditing(),children:()=>d(Zr,{command:this.const("redo"),disabled:()=>!r.canRedo(),ariaLabel:()=>r.s("basic-calculator-narration-controlbar-redo"),onTap:e=>r.dispatch({type:"redo",source:e.device==="keyboard"?"button-keyboard":"button-tap"}),children:d("i",{class:u("dcg-icon-redo"),"aria-hidden":u("true")})})}),d("div",{class:u("dcg-spacer")}),d(Zr,{narrowButton:this.const(!0),command:this.const("clear"),ariaLabel:()=>r.s("basic-calculator-narration-controlbar-clear"),onTap:()=>r.dispatch({type:"clear"}),children:()=>r.s("basic-calculator-button-controlbar-clear")}),d(Zr,{narrowButton:this.const(!0),command:this.const("backspace"),ariaLabel:()=>r.s("basic-calculator-narration-controlbar-backspace"),onTap:()=>r.dispatch({type:"keypad/press-key",key:"Backspace",source:"keypad"}),children:d("i",{class:u("dcg-icon-delete"),"aria-hidden":u("true")})})]})}};ce();ie();var l1=class extends $t{template(){return _(mr,{controller:this.props.controller,children:[_(Ye,{children:[O(this,"("),O(this,")"),O(this,"x^2"),O(this,"sqrt"),d("div",{class:u("dcg-partition-placeholder")}),O(this,"x^3"),O(this,"x^y"),O(this,"ythroot")]}),_(Ye,{children:[O(this,"7",{style:"highlight"}),O(this,"8",{style:"highlight"}),O(this,"9",{style:"highlight"}),O(this,"division"),d("div",{class:u("dcg-partition-placeholder")}),O(this,"pi"),O(this,"e^x"),O(this,"!")]}),_(Ye,{children:[O(this,"4",{style:"highlight"}),O(this,"5",{style:"highlight"}),O(this,"6",{style:"highlight"}),O(this,"multiplication"),d("div",{class:u("dcg-partition-placeholder")}),O(this,"log"),O(this,"ln"),O(this,"|x|")]}),_(Ye,{children:[O(this,"1",{style:"highlight"}),O(this,"2",{style:"highlight"}),O(this,"3",{style:"highlight"}),O(this,"-"),d("div",{class:u("dcg-partition-placeholder")}),O(this,"sin"),O(this,"cos"),O(this,"tan")]}),_(Ye,{children:[O(this,"0",{style:"highlight"}),O(this,".",{style:"highlight"}),O(this,"x/y"),O(this,"+"),d("div",{class:u("dcg-partition-placeholder")}),O(this,"arcsin"),O(this,"arccos"),O(this,"arctan")]})]})}};var{If:c1,IfElse:i2}=MJ.Components,d1=class extends $t{template(){return d(c1,{predicate:()=>this.controller.shouldRender(),children:()=>d("div",{class:this.const(__dcg_shared_module_exports__['G']),style:u("width: 100%; height: 100%; position: relative;"),children:d("div",{class:()=>({"dcg-calc-basic-main-wrapper":!0,"dcg-narrow":this.controller.containerSize.width<570,"dcg-narrower":this.controller.containerSize.width<380,"dcg-short":this.controller.containerSize.height<=540,"dcg-scientific-calculator":this.controller.isScientificCalc(),"dcg-four-function-calculator":this.controller.isFourFunctionCalc(),"dcg-container":!0}),onKeyDown:this.bindFn(this.handleRootKeydown),didMount:this.bindFn(this.didMountRoot),"x-ms-format-detection":u("none"),style:()=>({"--dcg-custom-background-color":this.controller.hasBackgroundColor()?this.controller.getBackgroundColor():void 0,"--dcg-custom-text-color":this.controller.hasTextColor()?this.controller.getTextColor():void 0,"--dcg-accent-color":this.controller.getAccentColor(),"--dcg-accent-color-shaded-10":__dcg_shared_module_exports__['Fd'](this.controller.getAccentColor(),-.1),"--dcg-accent-color-shaded-20":__dcg_shared_module_exports__['Fd'](this.controller.getAccentColor(),-.2)}),children:_("div",{role:u("application"),"aria-label":()=>this.controller.isScientificCalc()?this.controller.s("basic-calculator-narration-calc-description-scientific"):this.controller.isFourFunctionCalc()?this.controller.s("basic-calculator-narration-calc-description-fourfunction"):"",class:()=>({"dcg-calc-basic-main":!0,"dcg-inverted-colors":this.controller.getInvertedColors(),"dcg-projector-mode":this.controller.isProjectorMode(),"dcg-ipad":ys,"dcg-has-background-color":this.controller.hasBackgroundColor(),"dcg-no-hyperlinks":!this.controller.getAllowLinks()}),style:()=>({"font-size":`${this.controller.getFontSize()}px`,filter:this.controller.getInvertedColors()?"invert(100%)":"none"}),children:[d(jw,{controller:this.props.controller}),d(c1,{predicate:()=>this.controller.isScientificCalc()&&this.model.isSingleExpression(),children:()=>_("div",{children:[d(o2,{controller:this.props.controller}),d("div",{class:u("dcg-basic-keypad-container"),children:i2(()=>this.controller.renderAsBraille(),{true:()=>d(Oh,{controller:this.props.controller}),false:()=>d(l1,{controller:this.props.controller})})})]})}),d(c1,{predicate:()=>this.controller.isScientificCalc()&&!this.model.isSingleExpression(),children:()=>_("div",{children:[d(e2,{controller:this.props.controller}),d("div",{class:u("dcg-basic-keypad-container"),children:i2(()=>this.controller.renderAsBraille(),{true:()=>d(Oh,{controller:this.props.controller}),false:()=>d(a1,{controller:this.props.controller})})})]})}),d(c1,{predicate:()=>this.controller.isFourFunctionCalc()&&this.model.isSingleExpression(),children:()=>_("div",{children:[d(r2,{controller:this.props.controller}),d("div",{class:u("dcg-basic-keypad-container"),children:i2(()=>this.controller.renderAsBraille(),{true:()=>d(Oh,{controller:this.props.controller}),false:()=>d(s1,{controller:this.props.controller})})})]})}),d(c1,{predicate:()=>this.controller.isFourFunctionCalc()&&!this.model.isSingleExpression(),children:()=>_("div",{children:[d(QA,{controller:this.props.controller}),d("div",{class:u("dcg-basic-keypad-container"),children:i2(()=>this.controller.renderAsBraille(),{true:()=>d(Oh,{controller:this.props.controller}),false:()=>d(Zw,{controller:this.props.controller})})})]})})]})})})})}didMountRoot(e){yy(e)}handleRootKeydown(e){let t=co(e),o=Pe(e),i=this.controller.model;if(uy(e))return this.dispatch({type:"undo",source:"keyboard-shortcut"}),!1;if(hy(e))return this.dispatch({type:"redo",source:"keyboard-shortcut"}),!1;if(!e.altKey&&e.ctrlKey&&!e.metaKey&&e.shiftKey&&t==="L")return e.preventDefault(),e.stopPropagation(),this.controller.shouldShowClear()?this.controller.dispatch({type:"clear"}):this.controller.canClear()&&this.controller.dispatch({type:"set-blank",opts:{allowUndo:!0}}),!1;if(e.altKey!==lo&&e.metaKey===lo&&!e.ctrlKey&&e.shiftKey&&t==="A"&&this.controller.getDecimalToFraction()){let n=i.getFocusedExpression();n&&i.canDisplayEvaluationAsFraction(n.id)&&(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"toggle-fraction-evaluation",id:n.id}),this.controller.runAfterDispatch(()=>{i.getFocusedExpression().displayAsFraction?Te(this.controller.s("shared-calculator-narration-show-as-fraction")):Te(this.controller.s("shared-calculator-narration-show-as-decimal"))}))}else if(!e.metaKey&&!e.shiftKey){if(!e.ctrlKey&&!e.altKey&&o==="Backspace"){if(!document.activeElement||Sc(document.activeElement))return!1}else if(e.ctrlKey===lo&&e.altKey===!lo)if(t==="N"){if(!this.controller.getBrailleControls())return;if(e.preventDefault(),e.stopPropagation(),this.controller.getBrailleMode()==="nemeth"){this.exitBraille();return}return this.dispatch({type:"set-braille-mode",mode:"nemeth"}),Te(this.controller.s("shared-calculator-narration-hotkey-braille-mode-nemeth")),!1}else if(t==="U"){if(!this.controller.getBrailleControls())return;if(e.preventDefault(),e.stopPropagation(),this.controller.getBrailleMode()==="ueb"){this.exitBraille();return}return this.dispatch({type:"set-braille-mode",mode:"ueb"}),Te(this.controller.s("shared-calculator-narration-hotkey-braille-mode-ueb")),!1}else{if(t==="Q"||t==="X")return this.controller.getBrailleControls()?(e.preventDefault(),e.stopPropagation(),this.exitBraille(),!1):void 0;if(t==="6"){if(!this.controller.getBrailleControls())return;let n=!this.controller.getSixKeyInput();return this.dispatch({type:"set-six-key-input",useSixKeyInput:n}),Te(n?this.controller.s("basic-calculator-narration-hotkey-six-key-input-on"):this.controller.s("basic-calculator-narration-hotkey-six-key-input-off")),!1}else if(t==="D")return this.controller.isScientificCalc()?(e.preventDefault(),this.controller.dispatch({type:"degrees"}),Te(i.getDegreeMode()?this.controller.s("basic-calculator-narration-controlbar-degrees"):this.controller.s("basic-calculator-narration-controlbar-radians")),!1):void 0}}return!0}exitBraille(){this.dispatch({type:"set-braille-mode",mode:"none"}),Te(this.controller.s("shared-calculator-narration-hotkey-braille-mode-off"))}};var yb=__dcg_shared_module_exports__['e'](se());var p1=class{constructor(e){this.eventModel=new is;if(this.rootElt=e,!e)throw new Error("must pass an HTMLElement to the API")}setupDomChangeDetector(e){this.autoSize=e,eM(this.rootElt),this.domChangeDetector=new Xu(this.rootElt,t=>{switch(t.type){case"added":this.view=this.onCreateView(),this.onResizeView(t.size);break;case"removed":this.onDestroyView(),this.view=void 0;break;case"resized":this.onResizeView(t.size);break}}),this.autoSize!==!1?this.domChangeDetector.startWatching():this.domChangeDetector.checkForChanges()}detach(){console.warn(".detach() is deprecated. It should no longer be necessary")}destroy(){this.view&&this.onDestroyView(),this.domChangeDetector.destroy();function e(i){console.warn("You've destroyed this API instance. You can no longer call ."+i+"()")}let t={},o=this;for(;o;)Object.getOwnPropertyNames(o).forEach(n=>t[n]=!0),o=Object.getPrototypeOf(o);for(let i in t)typeof this[i]=="function"?this[i]=e.bind(this,i):this.hasOwnProperty(i)&&delete this[i];this.destroy=function(){}}resize(){this.domChangeDetector.checkForChanges()}updateView(){this.view&&document.body&&document.body.contains(this.rootElt)&&this.view.update()}triggerEvent(e,t){this.eventModel.triggerEvent(e,t)}observeEvent(e,t){this.eventModel.observeEvent(e,t)}unobserveEvent(e){this.eventModel.unobserveEvent(e)}};var bfe={allowComplex:!0,autosize:!0,backgroundColor:"#fff",brailleControls:!0,brailleExpressionDownload:!0,brailleMode:"none",capExpressionSize:!1,complex:!1,decimalToFraction:!0,degreeMode:!1,functionDefinition:!0,invertedColors:!1,language:"en",links:!0,projectorMode:!1,qwertyKeyboard:!0,replaceCommaWith10Exp:!1,replaceRoundWithReciprocal:!1,settingsMenu:!0,sixKeyInput:!1,textColor:"#000",accentColor:__dcg_shared_module_exports__['Md'].FOCUS_OUTLINE,onEvaluationCopyClick:uI,showEvaluationCopyButtons:!1};__dcg_shared_module_exports__['F']();var yfe={additionalFunctions:["sqrt"],disableParentheses:!1,evaluationMode:"scientific",restrictedEditing:!1,typingAsteriskWritesTimesSymbol:!1,typingSlashWritesDivisionSymbol:!1},xfe=["allowComplex","backgroundColor","brailleControls","brailleExpressionDownload","brailleMode","capExpressionSize","complex","decimalToFraction","degreeMode","functionDefinition","invertedColors","language","links","projectorMode","qwertyKeyboard","replaceCommaWith10Exp","replaceRoundWithReciprocal","settingsMenu","sixKeyInput","textColor","accentColor","restrictedEditing","typingAsteriskWritesTimesSymbol","fontSize","onEvaluationCopyClick","showEvaluationCopyButtons"];__dcg_shared_module_exports__['F']();var bb=class extends p1{constructor(e){super(e)}init(e){if(e=__dcg_shared_module_exports__['Uc'](e),e.backgroundColor&&!__dcg_shared_module_exports__['Ed'](e.backgroundColor)&&(console.warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)"),delete e.backgroundColor),e.textColor&&!__dcg_shared_module_exports__['Ed'](e.textColor)&&(console.warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)"),delete e.textColor),e.accentColor&&!__dcg_shared_module_exports__['Ed'](e.accentColor)&&(console.warn("Invalid accentColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)"),delete e.accentColor),e.allowComplex||(e.complex&&console.warn("complex: true is not compatible with allowComplex: false. Forcing complex: false"),delete e.complex),e.complex&&e.degreeMode&&(console.warn("degreeMode: true is not compatible with complex: true. Forcing degreeMode: false"),delete e.degreeMode),e.hasOwnProperty("onEvaluationCopyClick"))if(typeof e.onEvaluationCopyClick!="function"){let i=typeof e.onEvaluationCopyClick;delete e.onEvaluationCopyClick,console.warn(`Expected onEvaluationCopyClick to be a function, but got ${i}. Ignoring.`)}else e.hasOwnProperty("showEvaluationCopyButtons")||(e.showEvaluationCopyButtons=!0);let t={...yfe,...bfe,...e};this.settings=new Mn;let o={workerPool:ub,settingsProxy:this.settings};this.controller=new Ww(t,o),this.controller.onEventEmitted=i=>{i==="render"&&this.updateView(),this.triggerEvent(i,void 0)},this.setupDomChangeDetector(t.autosize)}onCreateView(){return yb.mountToNode(d1,this.rootElt,{controller:yb.const(this.controller)})}setState(e,t){t||(t={}),!this.controller.isComplexModeAllowed()&&e.settings.complex&&(e={...e,settings:{...e.settings,complex:!1}}),this.controller.dispatch({type:"set-state-from-api",state:e,opts:{allowUndo:!!t.allowUndo}})}getState(){return __dcg_shared_module_exports__['Uc'](this.controller.model.getPersistedState())}undo(){this.controller.dispatch({type:"undo",source:"api"})}redo(){this.controller.dispatch({type:"redo",source:"api"})}clearHistory(){this.controller.dispatch({type:"clear-history"})}setBlank(e){e||(e={}),this.controller.dispatch({type:"set-blank",opts:{allowUndo:!!e.allowUndo}})}updateSettings(e){e=__dcg_shared_module_exports__['Uc'](e),(!e.allowComplex&&!this.controller.isComplexModeAllowed()||this.controller.getEvaluationMode()!=="scientific")&&(delete e.complex,delete e.allowComplex),typeof e.onEvaluationCopyClick=="function"&&!e.hasOwnProperty("showEvaluationCopyButtons")&&!this.controller.shouldShowEvaluationCopyButtons()&&(e.showEvaluationCopyButtons=!0,console.warn("onEvaluationCopyClick was set without an explicit value for showEvaluationCopyButtons.Setting showEvaluationCopyButtons to true."));for(let t of xfe)if(t in e)switch(t){case"fontSize":let o=e[t];if(o===void 0)continue;this.controller.dispatch({type:"update-font-size",size:o});break;case"invertedColors":let i=e[t];if(i===void 0)continue;this.controller.dispatch({type:"update-inverted-colors",mode:i});break;case"backgroundColor":let n=e[t];if(n===void 0||!__dcg_shared_module_exports__['Ed'](n)){console.warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)");continue}this.controller.dispatch({type:"update-background-color",color:n});break;case"textColor":let a=e[t];if(a===void 0||!__dcg_shared_module_exports__['Ed'](a)){console.warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)");continue}this.controller.dispatch({type:"update-text-color",color:a});break;case"accentColor":let s=e[t];if(s===void 0||!__dcg_shared_module_exports__['Ed'](s)){console.warn("Invalid accentColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)");continue}this.controller.dispatch({type:"update-accent-color",color:s});break;case"degreeMode":let l=e[t];if(l===void 0)continue;this.controller.dispatch({type:"update-degree-mode",mode:l});break;case"brailleMode":let c=e[t];this.controller.dispatch({type:"set-braille-mode",mode:c});break;case"sixKeyInput":let p=e[t];if(p===void 0)continue;this.controller.dispatch({type:"set-six-key-input",useSixKeyInput:p});break;case"brailleControls":{let A=e[t];if(A===void 0)continue;this.controller.dispatch({type:"set-braille-controls",value:A});break}case"brailleExpressionDownload":let h=e[t];if(h===void 0)continue;this.controller.dispatch({type:"set-braille-expression-download",mode:h});break;case"projectorMode":let g=e[t];if(g===void 0)continue;this.controller.dispatch({type:"update-projector-mode",mode:g});break;case"capExpressionSize":let m=e[t];if(m===void 0)continue;this.controller.dispatch({type:"update-cap-expression-size",mode:m});break;case"language":let b=e[t];if(b===void 0)continue;this.controller.dispatch({type:"update-language",language:Gl(b)});break;case"settingsMenu":e.settingsMenu?this.controller.dispatch({type:"enable-settings-menu"}):this.controller.dispatch({type:"disable-settings-menu"});break;case"qwertyKeyboard":{this.controller.dispatch({type:"update-options",options:{qwertyKeyboard:!!e.qwertyKeyboard}});let A=this.controller.getKeyboardMode();(A==="qwerty"||A==="letters")&&this.controller.dispatch({type:"ABC"})}break;case"functionDefinition":e.functionDefinition?this.controller.model.enableFunctionDefinition():this.controller.model.disableFunctionDefinition();break;case"links":this.controller.dispatch({type:"update-options",options:{links:!!e.links}});break;case"decimalToFraction":let x=e[t];if(x===void 0)continue;this.controller.dispatch({type:"update-decimal-to-fraction",mode:x});break;case"replaceCommaWith10Exp":let E=e[t];if(E===void 0)continue;this.controller.dispatch({type:"set-replace-comma-with-10-exp",replace:E});break;case"replaceRoundWithReciprocal":let S=e[t];if(S===void 0)continue;this.controller.dispatch({type:"set-replace-round-with-reciprocal",replace:S});break;case"restrictedEditing":{this.controller.dispatch({type:"update-options",options:{restrictedEditing:!!e.restrictedEditing}});break}case"typingAsteriskWritesTimesSymbol":let k=e[t];if(k===void 0)continue;this.controller.dispatch({type:"set-typing-asterisk-writes-times-symbol",mode:k});break;case"allowComplex":this.controller.dispatch({type:"toggle-complex-allowed",enabled:!!e[t]});break;case"complex":this.controller.dispatch({type:"toggle-complex-mode",enabled:!!e[t]});break;case"showEvaluationCopyButtons":this.controller.dispatch({type:"set-show-evaluation-copy-buttons",enabled:!!e[t]});break;case"onEvaluationCopyClick":let T=e[t];if(T===void 0)continue;let I=typeof T;if(I!=="function"){console.warn(`Expected onEvaluationCopyClick to be a function, but got ${I}. Ignoring.`);continue}this.controller.dispatch({type:"set-evaluation-copy-callback",cb:T});break;default:console.warn(`Unsupported setting: ${t}`);break}}focusFirstExpression(){this.controller.dispatch({type:"focus-first-expression"})}onResizeView(e){this.controller.dispatch({type:"ui/container-resized",size:e})}onDestroyView(){yb.unmountFromNode(this.rootElt)}destroy(){this.controller.model.destroy(),super.destroy()}};var xb=class extends bb{constructor(e,t){super(e),this.init(vfe(t||{}))}};function vfe(r){if(r=__dcg_shared_module_exports__['Uc'](r),r.hasOwnProperty("typingSlashWritesDivisionSymbol")||(r.typingSlashWritesDivisionSymbol=!0),r.hasOwnProperty("typingAsteriskWritesTimesSymbol")||(r.typingAsteriskWritesTimesSymbol=!0),r.exponentButtonForSquareRoot&&(console.warn(`As of API version 1.0, the 'exponentButtonForSquareRoot' option is deprecated.Use 'additionalFunctions: "exponent"' instead.`),r.additionalFunctions=["exponent"]),r.additionalFunctions){let e=r.additionalFunctions;typeof e=="string"&&(e=[e]),e.length>2&&(console.warn("additionalFunctions can only take up to 2 new functions. Using the first two."),e=e.slice(0,2));let t=!0;for(let o=0;o<e.length;o++)["sqrt","exponent","percent","fraction"].indexOf(e[o])===-1&&(console.warn("Unrecognized value: '"+e[o]+`' for 'additionalFunction'. Valid values are 'sqrt', 'percent', 'exponent', or 'fraction'. Using default ("sqrt")`),t=!1);r.additionalFunctions=t?e:["sqrt"]}return(!r.additionalFunctions||!r.additionalFunctions.length)&&(r.additionalFunctions=["sqrt"]),r.singleExpression?(r.evaluationMode="singleExpressionFourFunction",r.disableParentheses&&(delete r.disableParentheses,console.warn("Incompatible options: singleExpression can't be used in combination with disableParentheses. Ignoring disableParentheses."))):r.evaluationMode="fourFunction",delete r.singleExpression,r.hasOwnProperty("decimalToFraction")||(r.decimalToFraction=!1),r.language&&(r.language=Gl(r.language)),delete r.allowComplex,delete r.complex,r}var vb=class extends sd{constructor(e,t,o){let i=t==null?void 0:t.degreeMode,n=rA;i===!1?n={...n,graph:{...n.graph,degreeMode:!1}}:t={...t,degreeMode:!0},super(e,{...t,allowComplex:!1,product:"geometry-calculator"},o),this.setState(n),this.clearHistory()}};var wb=class extends sd{constructor(e,t,o){(t==null?void 0:t.degreeMode)===!0||(t={...t,degreeMode:!1}),super(e,{...t,product:"graphing"},o)}};var n2=class{constructor(e,t){let o=Kc.fromConfig(t);this.controller=new Ah({graphSettings:o});let i=new Np(e);this.controller.setEvaluator(i),i.readEvaluatorConfig=()=>({product:this.controller.getGraphSettings().config.product,beta3d:t.beta3d,evaluationMode:this.controller.isGeometry()?"geometry":"graphing",globalRandomSeed:o.randomSeed,includeFunctionParametersInRandomSeed:o.includeFunctionParametersInRandomSeed,degreeMode:o.degreeMode,restrictedFunctions:o.config.restrictedFunctions,distributions:o.config.distributions,pointsOfInterest:o.config.pointsOfInterest,plotSingleVariableImplicitEquations:o.config.plotSingleVariableImplicitEquations,plotImplicits:o.config.plotImplicits,plotInequalities:o.config.plotInequalities,sliders:o.config.sliders,actions:o.config.actions,recursion:!!o.config.recursion}),i.onEvaluatorResults=a=>{this.controller.dispatch({type:"on-evaluator-changes",changes:a.evaluationStates,timingData:a.timingData,eventUpdates:a.eventUpdates,dependencyOrder:a.dependencyOrder})};let n=new Mn({pixelCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0},mathCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0}});this.graphpaperBounds=n,this.evaluator=i,this.setBlank()}setBlank(e){this.controller.dispatch({type:"set-blank",opts:e})}tick(){this.evaluator.tick()}destroy(){this.controller.destroy()}};var Sb=class{constructor(e){this._calc=new n2(ub,mf({...e})),this.controller=this._calc.controller,this._sharedClockBusToken=Ph(()=>{this._calc.tick()})}destroy(){this._calc.destroy(),Dh(this._sharedClockBusToken);function e(i){console.warn("You've destroyed this API instance. You can no longer call ."+i+"()")}let t={},o=this;for(;o;)Object.getOwnPropertyNames(o).forEach(n=>t[n]=!0),o=Object.getPrototypeOf(o);for(let i in t)typeof this[i]=="function"?this[i]=e.bind(this,i):this.hasOwnProperty(i)&&delete this[i];this.destroy=function(){}}setExpression(e){let o=this.controller.getItemModel(e.id),i=o&&o.type,n=PS(e,i,this.controller);if(n)if(i)this.controller.dispatch({type:"set-expression-properties-from-api",id:n.id,properties:n});else{if(n.type==="image")return;this.controller.dispatch({type:"add-item-to-end-from-api",state:n})}}setExpressions(e){e.forEach(this.setExpression.bind(this))}removeExpression(e){let t=e.id.toString();this.controller.dispatch({type:"remove-item-by-id",id:t})}removeExpressions(e){e.forEach(this.removeExpression.bind(this))}getState(e){return this.controller.getState(e)}getExpressions(){return this.getState({stripDefaults:!1}).expressions.list.map(cu)}setBlank(e){this.controller.dispatch({type:"set-blank",opts:e||{}})}setState(e,t){this.controller.dispatch({type:"set-state",state:e,opts:t||{}})}HelperExpression(e){let t=e&&e.latex||"",o=new Mn({latex:t});return this.controller.dispatch({type:"add-helper-expression",state:{type:"helper-expression",id:this.controller.generateId(),latex:t,proxy:o}}),o}getHelperExpressions(){return this.controller.getHelperExpressions()}resize(){}};function wfe(r,e){let t=r._calc.controller.getItemModel(e);if((t==null?void 0:t.type)==="image")return t}function Sfe(r){return r.imageObj}function Tfe(r){var e;return(e=r.formula.dimensions.opacity)==null?void 0:e[0]}var AJ={getGraphImage:wfe,getImageElement:Sfe,getImageOpacity:Tfe};function LJ(r){return r.branchMode==4?{...r,branchMode:3,showPoint:!0,pointOpacity:r.pointOpacity===1?.9:r.pointOpacity}:r}function PJ(r){switch(r.branchMode){case 1:case 2:case 6:case 5:case 7:case 8:case 20:case 21:case 18:case 17:case 19:case 24:case 23:case 3:case 4:case 25:case 26:case 15:case 22:return!0;default:return!1}}async function kfe(r){await Promise.all([new Promise(e=>setTimeout(e,1)),new Promise(e=>requestAnimationFrame(e))]),await DJ(r)}async function DJ(r){return await OJ(r),new Promise(e=>{r._calc.grapher.notifyAfterRedraw(e)})}function OJ(r){return new Promise(e=>{r._calc.evaluator.notifyWhenSynced(e)})}function Efe(r){let e=[],t=r._calc.grapher.graphSketches,o=r._calc.grapher.getDrawLayers();for(let i of o)for(let n of i.drawOrder){let a=t[n];if(a)for(let s of a.branches)s.branchMode===4&&s.segments[0].length>0&&e.push(s.segments[0][0])}return e}var RJ={waitForLastInteractionToSettle:kfe,waitForGrapherToRender:DJ,waitForExpressionUpdate:OJ,getMovablePointPositions:Efe};var Tb=class extends bb{constructor(e,t){super(e),this.init(Ife(t||{}))}};function Ife(r){return r=__dcg_shared_module_exports__['Uc'](r),r.singleExpression?(r.evaluationMode="singleExpressionScientific",delete r.allowComplex,delete r.complex):r.evaluationMode="scientific",delete r.singleExpression,r.language&&(r.language=Gl(r.language)),r}var u1;typeof Desmos!="undefined"?u1=Desmos:(u1={},window.Desmos=u1);var Cfe={SMALL:"0.85",MEDIUM:"1",LARGE:"1.35"};function QG(...r){return new wb(...r)}QG.prototype=wb.prototype;function eN(...r){return new vb(...r)}eN.prototype=vb.prototype;function tN(...r){return new Sb(...r)}tN.prototype=Sb.prototype;function FJ(...r){return new xb(...r)}FJ.prototype=xb.prototype;function GJ(...r){return new Tb(...r)}GJ.prototype=Tb.prototype;function NJ(...r){return new gb(...r)}NJ.prototype=gb.prototype;function _fe(r){return r.expressions.list.length}var a2={Colors:{RED:R0,BLUE:F0,GREEN:G0,ORANGE:V0,PURPLE:N0,BLACK:Wg},imageFileToDataURL:FE,supportedLanguages:["en"].concat(typeof desmosLocaleData=="object"?Object.keys(desmosLocaleData):[]),Styles:{...__dcg_shared_module_exports__['Qd'],...__dcg_shared_module_exports__['Pd']},ColumnModes:LS,DragModes:__dcg_shared_module_exports__['hd'],AxisArrowModes:__dcg_shared_module_exports__['Xd'],FontSizes:VE,LabelSizes:Cfe,LabelOrientations:__dcg_shared_module_exports__['Yd'],GraphingCalculator:QG,Calculator:QG,FourFunctionCalculator:FJ,ScientificCalculator:GJ,Geometry:eN,Calculator3D:NJ,Abraham:rl,Private:{Abraham:rl,Mathtools:fs,Graphtools:{ScalePair:__dcg_shared_module_exports__['qd'],getClippingGraphType:Jb,mapSegmentToCanvas:ol,computeDrawingCommandsForDOMLabel:bk,drawCommandsToCtx:yk,replaceMovablePointsWithStaticPoints:LJ,isBranch2D:PJ},MathquillConfig:{getAutoCommands:dl,getAutoOperators:IP},Parser:__dcg_shared_module_exports__['He'],extractSliderValueFromLatex:Bg,__compareBranches:{getSliderMin:Yn,getSliderMax:Ja,valueTypes:__dcg_shared_module_exports__['lb'],migrateGeoStateToCalcState:uc,Mathtools:fs},GeometryBeta:eN,migrateGeoStateToCalcState:uc,HeadlessGraphingCalculator:tN,maybeNotifyUserChangedLatex:qe.simulateUserChangedLatex,Fragile:{DCGView:{Class:On.View,Components:{For:On.Components.For,If:On.Components.If,Input:On.Components.Input,Switch:On.Components.Switch,SwitchUnion:On.Components.SwitchUnion,IfElse:On.Components.IfElse},const:On.const,createSpec:vi,createElement:(...r)=>{try{return vi(...r)}catch(e){return{children:void 0}}},mountToNode:On.mountToNode,unmountFromNode:On.unmountFromNode},PromptSliderView:_n,Checkbox:tt,SegmentedControl:hr,MathquillView:qe,InlineMathInputView:Ut,StaticMathquillView:St,Tooltip:Re,ExpressionOptionsMenuView:gf,ExpressionView:ju,ImageIconView:Yu,ExpressionIconView:$u,ExpressionFooterView:af,parseLatexToGroup:__dcg_shared_module_exports__['ed'],evaluateLatex:__dcg_shared_module_exports__['Ie'],Keys:Bt,getReconciledExpressionProps:__dcg_shared_module_exports__['yd'],List:{moveItemsTo:Rd,removeItemById:Eu},currentLanguage:Fy},getExpressionCount:_fe,ImageHelpers:AJ,TestHelpers:RJ},TestInternal:{fetchLanguage:r=>o4(r)},MathQuill:vs,HeadlessGraphingCalculator:tN};function h1(r){let e=u1.enabledFeatures;return!e||e[r]}function kb(r){a2[r]=function(){throw new Error("The Desmos "+r+" is not enabled for this API key.")}}h1("GraphingCalculator")||(kb("GraphingCalculator"),kb("Calculator"));h1("FourFunctionCalculator")||kb("FourFunctionCalculator");h1("ScientificCalculator")||kb("ScientificCalculator");h1("GeometryCalculator")||kb("Geometry");h1("Calculator3D")||kb("Calculator3D");for(let r in a2)a2.hasOwnProperty(r)&&(u1[r]=a2[r]);Vt();typeof Desmos=="undefined"&&(Desmos={});function VJ(){Desmos.$=re,Desmos.$.noConflict(!0)}typeof Desmos=="undefined"&&(Desmos={});VJ();
/*!
 * jQuery JavaScript Library v3.6.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2021-03-02T17:08Z
 */
/*!!
 *  Canvas 2 Svg v1.0.19
 *  A low level canvas to SVG converter. Uses a mock canvas context to build an SVG document.
 *
 *  Licensed under the MIT license:
 *  http://www.opensource.org/licenses/mit-license.php
 *
 *  Author:
 *  Kerry Liu
 *
 *  Copyright (c) 2014 Gliffy Inc.
 *
 *  Modifications by Desmos:
 *  - wrapped in AMD pattern
 *  - added ctx.ellipse() method
 *  - fixed image opacity bug
 *  - added ability to add classNames to exported svg elements
 *  - added ability to add named groups
 *  - removed dominant-basline attribute. Editors appear to ignore it. Must solve baseline issues using transformations
 */
})();
  })();
})(typeof window !== undefined ? window : this || {});


})();