import{setBannerMaxScroll}from"./banners.min.js";import{resizeCard}from"./cards.min.js";import{headerElement}from"./header.min.js";import{$,$$,pageElement}from"./main.min.js";import{siteSettings}from"./settings.min.js";let aspectRatio=window.innerWidth/window.innerHeight,navigationAnimationDistanceVertical=Math.min(window.innerHeight/20,25),navigationAnimationDistanceHorizontal=Math.min(window.innerWidth/20,25),appletColumnsAreEqualized=!1;const heightMeasurerElement=document.body.querySelector("#height-measurer"),likelyFullHeight=heightMeasurerElement?heightMeasurerElement.getBoundingClientRect().height:window.innerHeight,contentShowingAmount=(heightMeasurerElement&&heightMeasurerElement.remove(),likelyFullHeight-window.innerHeight+40);function onResize(){setBannerMaxScroll(Math.min(window.innerHeight-contentShowingAmount-headerElement.offsetHeight,document.body.offsetHeight-window.innerHeight)),navigationAnimationDistanceVertical=Math.min(window.innerHeight/20,25),navigationAnimationDistanceHorizontal=Math.min(window.innerWidth/20,25),1<(aspectRatio=window.innerWidth/window.innerHeight)&&!appletColumnsAreEqualized?equalizeAppletColumns():aspectRatio<=1&&appletColumnsAreEqualized&&destroyAppletColumns(),resizeCard();const e=headerElement?.children[0]?.children[0];e&&(e.style.width=e.getBoundingClientRect().height+"px");var t=$$(".one-image-link .image-link"),n=$(".image-links:not(.one-image-link) .image-link");if(!n){const e=document.createElement("div");e.classList.add("image-links"),e.style.opacity=0,e.style.position="fixed",e.style.top="-1000px",e.style.left="0",pageElement.appendChild(e),(n=document.createElement("div")).classList.add("image-link"),e.appendChild(n)}if(t.length){const i=$(".image-links:not(.one-image-link) .image-link").getBoundingClientRect().width;t.forEach(element=>{element.style.width=i+"px"})}}function setUpOnResize(){window.addEventListener("resize",onResize)}function equalizeAppletColumns(){if(!(siteSettings.condensedApplets||aspectRatio<1)){var a=$("#canvas-landscape-left"),o=$("#canvas-landscape-right");if(a&&o){var r=[],s=a.children.length,d=o.children.length;for(let e=0;e<s;e++)r.push(a.children[e]);for(let i=0;i<d;i++)r.push(o.children[i]);var h=[r[0].clientHeight];for(let l=1;l<r.length;l++)h.push(h[l-1]+r[l].clientHeight);let t=1/0,n=0;if(1<r.length)for(let e=0;e<r.length;e++){var m=Math.abs(h[e]-(h[h.length-1]-h[e]));m<t&&(t=m,n=e+1)}if(n<s){var g=[];for(let e=n;e<s;e++)a.children[e].classList.add("moved-to-right"),g.push(a.children[e]);for(let t=g.length-1;0<=t;t--)o.insertBefore(g[t],o.firstElementChild)}else{var c=[];for(let e=0;e<n-s;e++)o.children[e].classList.add("moved-to-left"),c.push(o.children[e]);for(let t=0;t<c.length;t++)a.appendChild(c[t])}appletColumnsAreEqualized=!0}}}function destroyAppletColumns(){var i=$("#canvas-landscape-left"),l=$("#canvas-landscape-right");if(i&&l){let e=$$(".moved-to-left");for(let t=e.length-1;0<=t;t--)l.insertBefore(e[t],l.firstElementChild),e[t].classList.remove("moved-to-left");e=$$(".moved-to-right");for(let n=0;n<e.length;n++)i.appendChild(e[n]),e[n].classList.remove("moved-to-right");appletColumnsAreEqualized=!1}}export{aspectRatio,navigationAnimationDistanceVertical,navigationAnimationDistanceHorizontal,contentShowingAmount,onResize,setUpOnResize,equalizeAppletColumns};