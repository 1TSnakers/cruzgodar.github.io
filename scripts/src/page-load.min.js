"use strict";Page.load=async function(){window.dispatchEvent(new Event("scroll")),window.dispatchEvent(new Event("resize")),Page.element=document.body.querySelector(".page"),$=e=>Page.element.querySelector(e),$$=e=>Page.element.querySelectorAll(e),bannerPages.includes(Page.url)?loadBanner(!0).then(()=>{changeOpacity($("#banner-small"),0,700).then(()=>$("#banner-small").remove())}):setBannerElement(null),Page.usingCustomScript=!0,this.Load.parseCustomStyle(),this.Load.parseCustomScripts();try{"/home/"===Page.url?document.head.querySelector("title").textContent="Cruz Godar":document.head.querySelector("title").textContent=$("h1").textContent}catch(e){}equalizeAppletColumns(),$$("select").forEach(e=>{const t=e.previousElementSibling;t.innerHTML=e.querySelector(`[value=${e.value}]`).textContent+'  <span style="font-size: 12px">&#x25BC;</span>',t.parentNode.parentNode.style.gridTemplateColumns="repeat(auto-fit, 100%)",e.addEventListener("input",()=>{t.innerHTML=e.querySelector(`[value=${e.value}]`).textContent+'  <span style="font-size: 12px">&#x25BC;</span>'})}),this.Load.Links.set(),this.Load.Links.disable(),this.Load.HoverEvents.setUp(),this.Load.TextButtons.setUp();try{this.Load.TextButtons.setUpNavButtons()}catch(e){}setTimeout(()=>{this.Load.FocusEvents.setUpWeirdElements()},50),Page.backgroundColorChanged=!1,Site.Settings.handleThemeRevert(),1===Site.Settings.urlVars.condensedApplets&&"/applets/"===Site.sitemap[Page.url].parent&&Site.Settings.condenseApplet(),this.Load.Math.typeset()},Page.show=function(){return new Promise((e,t)=>{setTimeout(async()=>{await this.Load.fadeIn(),e()},10)})},Page.Load={parseScriptTags:function(){document.querySelectorAll("script").forEach(e=>{var t=document.createElement("script");t.innerHTML=e.textContent,document.body.appendChild(t),e.remove()})},parseCustomStyle:function(){var e;(e=Page.url.split("/"))[e.length-2];try{fetch(Page.parentFolder+"style/index.css").then(e=>{var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",Page.parentFolder+"style/index.min.css"),t.classList.add("temporary-style"),document.head.insertBefore(t,document.head.firstChild)})}catch(e){}},parseCustomScripts:function(){var e;(e=Page.url.split("/"))[e.length-2];import(Page.parentFolder+"scripts/index."+(window.DEBUG?"mjs":"min.min.min.min.min.min.mjs")).then(e=>{e.load()}).catch(()=>{setTimeout(()=>Page.show(),1)})},addHeader:function(){document.body.firstChild.insertAdjacentHTML("beforebegin",`
			<div id="header-container"></div>
			
			<div id="header">
				<a id="header-logo" href="/home/">
					<img src="/graphics/header-icons/logo.webp"></img>
					<span>Cruz Godar</span>
				</a>
				
				<div id="header-links">
					<a id="header-gallery-link" href="/gallery/">
						<span>Gallery</span>
						<img src="/graphics/header-icons/gallery.webp"></img>
					</a>
					
					<a id="header-applets-link" href="/applets/">
						<span>Applets</span>
						<img src="/graphics/header-icons/applets.webp"></img>
					</a>
					
					<a id="header-teaching-link" href="/teaching/">
						<span>Teaching</span>
						<img src="/graphics/header-icons/teaching.webp"></img>
					</a>
					
					<a id="header-slides-link" href="/slides/">
						<span>Slides</span>
						<img src="/graphics/header-icons/slides.webp"></img>
					</a>
					
					<a id="header-writing-link" href="/writing/">
						<span>Writing</span>
						<img src="/graphics/header-icons/writing.webp"></img>
					</a>
					
					<a id="header-about-link" href="/about/">
						<span>About</span>
						<img src="/graphics/header-icons/about.webp"></img>
					</a>
				</div>
				
				<div id="header-theme-button" class="${1===Site.Settings.urlVars.theme?"active":""}">
					<input type="image" src="/graphics/header-icons/moon.webp">
				</div>
			</div>
		`),setTimeout(()=>{var e=document.body.querySelector("#header-logo img"),e=(e.style.width=e.getBoundingClientRect().height+"px",document.body.querySelectorAll("#header-logo, #header-links a").forEach(e=>{Page.Load.HoverEvents.add(e);const t=e.getAttribute("href");e.setAttribute("href","/index.html?page="+encodeURIComponent(t)),e.addEventListener("click",e=>{e.preventDefault(),redirect({url:t})})}),document.body.querySelector("#header-theme-button"));Page.Load.HoverEvents.add(e),e.addEventListener("click",()=>Site.Settings.toggleTheme()),Site.headerElement=document.body.querySelector("#header")})},fadeIn:function(){return new Promise(async(e,t)=>{let n=null;await(n=1===navigationTransitionType?bannerElement?Promise.all([fadeUpIn(bannerElement,2*Site.pageAnimationTime,bannerOpacity),fadeUpIn(Page.element,2*Site.pageAnimationTime)]):fadeUpIn(Page.element,2*Site.pageAnimationTime):-1===navigationTransitionType?bannerElement?Promise.all([fadeDownIn(bannerElement,2*Site.pageAnimationTime,bannerOpacity),fadeDownIn(Page.element,2*Site.pageAnimationTime)]):fadeDownIn(Page.element,2*Site.pageAnimationTime):2===navigationTransitionType?bannerElement?Promise.all([fadeLeftIn(bannerElement,2*Site.pageAnimationTime,bannerOpacity),fadeLeftIn(Page.element,2*Site.pageAnimationTime)]):fadeLeftIn(Page.element,2*Site.pageAnimationTime):-2===navigationTransitionType?bannerElement?Promise.all([fadeRightIn(bannerElement,2*Site.pageAnimationTime,bannerOpacity),fadeRightIn(Page.element,2*Site.pageAnimationTime)]):fadeRightIn(Page.element,2*Site.pageAnimationTime):bannerElement?Promise.all([fadeIn(bannerElement,2*Site.pageAnimationTime,bannerOpacity),fadeIn(Page.element,2*Site.pageAnimationTime)]):fadeIn(Page.element,2*Site.pageAnimationTime)),e()})},createDesmosGraphs:function(r=1===Site.Settings.urlVars.theme){return new Promise(async(e,t)=>{for(var n in Site.scriptsLoaded.desmos||(await Site.loadScript("https://www.desmos.com/api/v1.7/calculator.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"),Site.scriptsLoaded.desmos=!0),Page.desmosGraphs)try{Page.desmosGraphs[n].destroy()}catch(e){}Page.desmosGraphs={};try{const i=this.getDesmosData();for(var a in i)i[a].expressions.forEach(e=>{e.latex=e.latex.replace(/\(/g,String.raw`\left(`),e.latex=e.latex.replace(/\)/g,String.raw`\right)`),e.latex=e.latex.replace(/\[/g,String.raw`\left[`),e.latex=e.latex.replace(/\]/g,String.raw`\right]`)});$$(".desmos-container").forEach(e=>{var t={keypad:!1,settingsMenu:!1,zoomButtons:!1,showResetButtonOnGraphpaper:!0,border:!1,expressionsCollapsed:!0,invertedColors:r,xAxisMinorSubdivisions:1,yAxisMinorSubdivisions:1};if(void 0!==i[e.id].options)for(var n in i[e.id].options)t[n]=i[e.id].options[n];Page.desmosGraphs[e.id]=Desmos.GraphingCalculator(e,t),Page.desmosGraphs[e.id].setMathBounds(i[e.id].bounds),Page.desmosGraphs[e.id].setExpressions(i[e.id].expressions),Page.desmosGraphs[e.id].setDefaultState(Page.desmosGraphs[e.id].getState())})}catch(e){}e()})},exportDesmosScreenshot:function(e,t=!1){Page.desmosGraphs[e].updateSettings({showGrid:t,xAxisNumbers:t,yAxisNumbers:t});var n=Page.desmosGraphs[e].getExpressions();for(let e=0;e<n.length;e++)n[e].lineWidth=t?5:7.5,n[e].pointSize=t?15:27,n[e].dragMode="NONE";Page.desmosGraphs[e].setExpressions(n),Page.desmosGraphs[e].asyncScreenshot({width:500,height:500,targetPixelRatio:8},e=>{var t=document.createElement("img");t.width=4e3,t.height=4e3,t.style.width="50vmin",t.style.height="50vmin",t.src=e,document.body.appendChild(t)})},HoverEvents:{elementSelectors:`
			a
		`,elementSelectorsWithScale:[["#logo img",1.05],["#scroll-button",1.1],[".text-button:not(.dropdown)",1.075],["select",1.075],[".checkbox-container",1.1],[".radio-button-container",1.1],[".image-link img",1.05],["#enter-fullscreen-button",1.1],["#exit-fullscreen-button",1.1],[".gallery-image-1-1 img",1.075],[".gallery-image-2-2 img",1.0375],[".gallery-image-3-3 img",1.025]],setUp:function(){$$(this.elementSelectors).forEach(e=>this.add(e)),this.elementSelectorsWithScale.forEach(t=>{$$(t[0]).forEach(e=>this.addWithScale(e,t[1]))}),$$(".card .tex-holder").forEach(e=>{this.addForTexHolder(e),e.addEventListener("click",()=>Page.Load.Math.showTex(e))})},add:function(e){e.addEventListener("mouseenter",()=>{Site.Interaction.currentlyTouchDevice||(e.classList.add("hover"),"SELECT"===e.tagName?e.previousElementSibling.classList.add("hover"):e.classList.contains("dropdown-container")&&e.firstElementChild.classList.add("hover"))}),e.addEventListener("mouseleave",()=>{Site.Interaction.currentlyTouchDevice||(e.classList.remove("hover"),"SELECT"===e.tagName?e.previousElementSibling.classList.remove("hover"):e.classList.contains("dropdown-container")?e.firstElementChild.classList.remove("hover"):e.blur())})},addWithScale:function(e,t,n=!1){e.addEventListener("mouseenter",()=>{Site.Interaction.currentlyTouchDevice||((e="SELECT"===e.tagName?e.previousElementSibling:e).classList.add("hover"),(n?changeScaleJs:changeScale)(e,t,Site.buttonAnimationTime))}),e.addEventListener("mouseleave",()=>{Site.Interaction.currentlyTouchDevice||((e="SELECT"===e.tagName?e.previousElementSibling:e).classList.remove("hover"),(n?changeScaleJs:changeScale)(e,1,Site.buttonAnimationTime))})},addForTexHolder:function(t){t.classList.add("active"),t.addEventListener("mouseenter",()=>{var e;Site.Interaction.currentlyTouchDevice||"1"===t.getAttribute("data-showing-tex")||(t.classList.add("hover"),e=1===Site.Settings.urlVars.theme?"rgba(24, 24, 24, 1)":"rgba(255, 255, 255, 1)",anime({targets:t,scale:1.05,borderRadius:"8px",backgroundColor:e,duration:Site.buttonAnimationTime,easing:"easeOutQuad"}))}),t.addEventListener("mouseleave",()=>{var e;Site.Interaction.currentlyTouchDevice||(t.classList.remove("hover"),e=1===Site.Settings.urlVars.theme?"rgba(24, 24, 24, 0)":"rgba(255, 255, 255, 0)",anime({targets:t,scale:1,borderRadius:"0px",backgroundColor:e,duration:Site.buttonAnimationTime,easing:"easeInOutQuad"}))})},remove:function(){$$(this.elementSelectors).forEach(e=>e.classList.remove("hover"))}},FocusEvents:{setUpWeirdElements:function(){$$(".focus-on-child").forEach(e=>{e.addEventListener("focus",()=>{e.children[0].focus()})})}},TextButtons:{setUp:function(){const e=this.equalize.bind(this);window.addEventListener("resize",e),Page.temporaryHandlers.resize.push(e),setTimeout(()=>{e()},50),setTimeout(()=>{e()},500)},equalize:function(){$$(".text-button").forEach(e=>e.parentNode.style.margin="0 auto");let n=[],a=0,i=[],r=0;var e=$$(".linked-text-button");e.forEach((e,t)=>{e.style.height="fit-content",e.style.width="fit-content",n.push(e.offsetHeight),n[t]>a&&(a=n[t]),i.push(e.offsetWidth),i[t]>r&&(r=i[t])}),e.forEach((e,t)=>{n[t]<a?e.style.height=a+"px":e.style.height="fit-content",i[t]<r?e.style.width=r+"px":e.style.width="fit-content",e.parentNode.parentNode.style.gridTemplateColumns=`repeat(auto-fit, ${r}px)`})},setUpNavButtons:function(){const t=Site.sitemap[Site.sitemap[Page.url].parent].children,n=t.indexOf(Page.url);-1===n?console.error("Page not found in page list!"):(0<n?$$(".previous-nav-button").forEach(e=>{e.addEventListener("click",()=>redirect({url:t[n-1]}))}):$$(".previous-nav-button").forEach(e=>e.parentNode.remove()),$$(".home-nav-button").forEach(e=>{e.addEventListener("click",()=>redirect({url:Site.sitemap[Page.url].parent}))}),n<t.length-1?$$(".next-nav-button").forEach(e=>{e.addEventListener("click",()=>redirect({url:t[n+1]}))}):$$(".next-nav-button").forEach(e=>e.parentNode.remove()))}},Links:{set:function(){$$("a").forEach(e=>{const t=e.getAttribute("href");if(null!==t){const n=!("https"!==t.slice(0,5)&&"data"!==t.slice(0,4)&&1!=e.getAttribute("data-in-new-tab"));e.addEventListener("click",()=>redirect({url:t,inNewTab:n}))}})},disable:function(){$$("a:not(.real-link)").forEach(e=>e.addEventListener("click",e=>e.preventDefault()))}},Math:{lengthCap:250,typeset:function(){return MathJax.typesetPromise()},showTex:async function(n){if(Page.Cards.isOpen&&"1"!==n.getAttribute("data-showing-tex")){n.setAttribute("data-showing-tex","1"),n.classList.remove("active"),n.classList.remove("hover");const r=1===Site.Settings.urlVars.theme?"rgba(24, 24, 24, 0)":"rgba(255, 255, 255, 0)";await new Promise((e,t)=>{anime({targets:n,scale:1,borderRadius:"0px",backgroundColor:r,duration:0,complete:e})});var t=n.getAttribute("data-source-tex").replaceAll(/\[NEWLINE\]/g,"\n").replaceAll(/\[TAB\]/g,"\t"),a=n.getBoundingClientRect().height,i=n.getBoundingClientRect().width;n.style.minHeight=a+"px";const s=n.style.padding,o=document.createElement("div");o.style.display="none",Page.element.appendChild(o),o.appendChild(n.firstElementChild);let e=null;-1!==t.indexOf("\n")?((e=document.createElement("textarea")).textContent=t,e.style.minHeight=a-17+"px",e.style.width="100%",e.style.marginLeft="-6px",n.style.width="75%"):((e=document.createElement("input")).setAttribute("type","text"),e.setAttribute("value",t),e.style.height=a-13+"px",e.style.width=i-13+"px"),e.style.fontFamily="'Source Code Pro', monospace",n.appendChild(e),n.style.padding=0,e.select(),setTimeout(()=>e.select(),50),setTimeout(()=>e.select(),250),e.onblur=()=>{e.remove(),n.style.removeProperty("width"),n.style.padding=s,n.appendChild(o.firstElementChild),n.style.minHeight="",o.remove(),n.setAttribute("data-showing-tex","0"),n.classList.add("active")}}}}},Page.Cards={container:document.querySelector("#card-container"),currentCard:null,closeButton:document.querySelector("#card-close-button"),closeButtonIsFixed:!1,isOpen:!1,animationTime:500,show:async function(e){this.isOpen=!0,this.container.style.display="flex",this.container.style.opacity=0,this.container.style.transform="scale(1)",this.container.style.display="flex",this.currentCard=document.querySelector(`#${e}-card`),this.container.appendChild(this.currentCard),this.currentCard.insertBefore(this.closeButton,this.currentCard.firstElementChild),this.container.scroll(0,0),this.currentCard.getBoundingClientRect().height>window.innerHeight-32?this.container.style.justifyContent="flex-start":this.container.style.justifyContent="center",this.container.style.transform="scale(.95)",Page.element.style.filter="brightness(1)",document.querySelector("#header").style.filter="brightness(1)",document.querySelector("#header-container").style.filter="brightness(1)",Page.element.style.transformOrigin=`50% calc(50vh + ${window.scrollY}px)`,document.documentElement.addEventListener("click",this.handleClickEvent),await new Promise((e,t)=>{anime({targets:this.container,opacity:1,scale:1,duration:this.animationTime,easing:"easeOutQuint"}),anime({targets:Page.element,duration:this.animationTime,easing:"easeOutQuint"}),anime({targets:[Page.element,document.querySelector("#header"),document.querySelector("#header-container")],filter:"brightness(.5)",scale:.975,duration:this.animationTime,easing:"easeOutQuint"});var n=1===Site.Settings.urlVars.theme?"#0c0c0c":"#7f7f7f",n=(anime({targets:Site.Settings.metaThemeColorElement,content:n,duration:this.animationTime,easing:"easeOutQuint"}),1===Site.Settings.urlVars.theme?"rgb(12, 12, 12)":"rgb(127, 127, 127)");anime({targets:document.documentElement,backgroundColor:n,duration:this.animationTime,easing:"easeOutQuint",complete:e})})},hide:async function(){Page.Cards.isOpen=!1,await new Promise((e,t)=>{anime({targets:[Page.element,document.querySelector("#header"),document.querySelector("#header-container")],filter:"brightness(1)",scale:1,duration:Page.Cards.animationTime,easing:"easeOutQuint"});var n=1===Site.Settings.urlVars.theme?"#181818":"#ffffff",n=(anime({targets:Site.Settings.metaThemeColorElement,content:n,duration:Page.Cards.animationTime,easing:"easeOutQuint"}),1===Site.Settings.urlVars.theme?"rgb(24, 24, 24)":"rgb(255, 255, 255)");anime({targets:document.documentElement,backgroundColor:n,duration:Page.Cards.animationTime,easing:"easeOutQuint"}),anime({targets:Page.Cards.container,opacity:0,scale:.95,duration:Page.Cards.animationTime,easing:"easeOutQuint",complete:e})}),Page.Cards.container.style.display="none",Page.element.appendChild(Page.Cards.currentCard),Page.Cards.container.appendChild(Page.Cards.closeButton),document.documentElement.removeEventListener("click",Page.Cards.handleClickEvent)},handleClickEvent:function(e){"card-container"===e.target.id&&Page.Cards.hide()}};