import{changeOpacity}from"./animation.min.mjs";import{$$,loadScript}from"./main.min.mjs";import{siteSettings}from"./settings.min.mjs";let desmosGraphs={};function clearDesmosGraphs(){desmosGraphs={}}let getDesmosData=()=>{};function setGetDesmosData(e){getDesmosData=e}async function createDesmosGraphs(){for(var e in await loadScript("https://www.desmos.com/api/v1.7/calculator.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"),desmosGraphs)try{desmosGraphs[e].destroy()}catch(e){}desmosGraphs={};var s,t=siteSettings.darkTheme?"#60c000":"#772fbf",a=siteSettings.darkTheme?"#c06000":"#2f77bf",r=siteSettings.darkTheme?"#00c0c0":"#bf2f2f",i=siteSettings.darkTheme?"#c000c0":"#2fbf2f";const o=getDesmosData(t,a,r,i,"#000000");for(s in o)o[s].expressions.forEach(e=>{e.latex=e.latex.replace(/\(/g,String.raw`\left(`),e.latex=e.latex.replace(/\)/g,String.raw`\right)`),e.latex=e.latex.replace(/\[/g,String.raw`\left[`),e.latex=e.latex.replace(/\]/g,String.raw`\right]`)});$$(".desmos-container").forEach(e=>{var s={keypad:!1,settingsMenu:!1,zoomButtons:!1,showResetButtonOnGraphpaper:!0,border:!1,expressionsCollapsed:!0,invertedColors:siteSettings.darkTheme,xAxisMinorSubdivisions:1,yAxisMinorSubdivisions:1};if(o[e.id].options)for(var t in o[e.id].options)s[t]=o[e.id].options[t];desmosGraphs[e.id]=Desmos.GraphingCalculator(e,s),desmosGraphs[e.id].setMathBounds(o[e.id].bounds),desmosGraphs[e.id].setExpressions(o[e.id].expressions),desmosGraphs[e.id].setDefaultState(desmosGraphs[e.id].getState())})}async function recreateDesmosGraphs(){var e=Array.from($$(".desmos-container"));e&&(await Promise.all(e.map(e=>changeOpacity(e,0))),await createDesmosGraphs(),await Promise.all(e.map(e=>changeOpacity(e,1))))}function getDesmosScreenshot(e,s=!1){desmosGraphs[e].updateSettings({showGrid:s,xAxisNumbers:s,yAxisNumbers:s});var t=desmosGraphs[e].getExpressions();for(let e=0;e<t.length;e++)t[e].lineWidth=s?5:7.5,t[e].pointSize=s?15:27,t[e].dragMode="NONE";desmosGraphs[e].setExpressions(t),desmosGraphs[e].asyncScreenshot({width:500,height:500,targetPixelRatio:8},e=>{var s=document.createElement("img");s.width=4e3,s.height=4e3,s.style.width="50vmin",s.style.height="50vmin",s.src=e,document.body.appendChild(s)})}export{desmosGraphs,clearDesmosGraphs,setGetDesmosData,createDesmosGraphs,recreateDesmosGraphs,getDesmosScreenshot};