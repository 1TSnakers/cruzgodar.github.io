import{changeOpacity}from"./animation.min.mjs";import{$$,loadScript}from"./main.min.mjs";import{siteSettings}from"./settings.min.mjs";let desmosGraphs={};function clearDesmosGraphs(){desmosGraphs={}}let getDesmosData=()=>({});function setGetDesmosData(s){getDesmosData=s}async function createDesmosGraphs(){for(var s in await loadScript("https://www.desmos.com/api/v1.7/calculator.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"),desmosGraphs)desmosGraphs[s]?.destroy&&desmosGraphs[s].destroy();desmosGraphs={};var e,t=siteSettings.darkTheme?"#60c000":"#772fbf",a=siteSettings.darkTheme?"#c06000":"#2f77bf",r=siteSettings.darkTheme?"#00c0c0":"#bf2f2f",o=siteSettings.darkTheme?"#c000c0":"#2fbf2f";const i=getDesmosData(t,a,r,o,"#000000");for(e in i)i[e].expressions.forEach(s=>{s.latex=s.latex.replace(/\(/g,String.raw`\left(`),s.latex=s.latex.replace(/\)/g,String.raw`\right)`),s.latex=s.latex.replace(/\[/g,String.raw`\left[`),s.latex=s.latex.replace(/\]/g,String.raw`\right]`)});$$(".desmos-container").forEach(s=>{var e={keypad:!1,settingsMenu:!1,zoomButtons:!1,showResetButtonOnGraphpaper:!0,border:!1,expressionsCollapsed:!0,invertedColors:siteSettings.darkTheme,xAxisMinorSubdivisions:1,yAxisMinorSubdivisions:1};if(i[s.id].options)for(var t in i[s.id].options)e[t]=i[s.id].options[t];desmosGraphs[s.id]=Desmos.GraphingCalculator(s,e),desmosGraphs[s.id].setMathBounds(i[s.id].bounds),desmosGraphs[s.id].setExpressions(i[s.id].expressions),desmosGraphs[s.id].setDefaultState(desmosGraphs[s.id].getState())})}async function recreateDesmosGraphs(){var s=Array.from($$(".desmos-container"));s&&(await Promise.all(s.map(s=>changeOpacity(s,0))),await createDesmosGraphs(),await Promise.all(s.map(s=>changeOpacity(s,1))))}function getDesmosScreenshot(s,e=!1){desmosGraphs[s].updateSettings({showGrid:e,xAxisNumbers:e,yAxisNumbers:e});var t=desmosGraphs[s].getExpressions();for(let s=0;s<t.length;s++)t[s].lineWidth=e?5:7.5,t[s].pointSize=e?15:27,t[s].dragMode="NONE";desmosGraphs[s].setExpressions(t),desmosGraphs[s].asyncScreenshot({width:500,height:500,targetPixelRatio:8},s=>{var e=document.createElement("img");e.width=4e3,e.height=4e3,e.style.width="50vmin",e.style.height="50vmin",e.src=s,document.body.appendChild(e)})}export{desmosGraphs,clearDesmosGraphs,setGetDesmosData,createDesmosGraphs,recreateDesmosGraphs,getDesmosScreenshot};