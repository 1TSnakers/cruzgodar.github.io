Page.Navigation={currentlyChangingPage:!1,lastPageScroll:0,elementsToRemove:[],navigationPath:[],transitionType:0,redirect:async function(a,b=!1,e=!1,d=!1,h=!1){if(!this.currentlyChangingPage)if(b||-1!==a.indexOf("."))window.open(a,"_blank");else{Page.Cards.isOpen&&await Page.Cards.hide();this.currentlyChangingPage=!0;var k=window.scrollY;Site.appletProcessId++;this.transitionType=this.getTransitionType(a);Page.url=a;Page.parentFolder=a.slice(0,a.length);document.querySelectorAll("#header-links a").forEach(c=>
c.classList.remove("active"));var f=document.documentElement.style.backgroundColor;await Page.Unload.fadeOut(h,a);Promise.all([fetch(`${a}index.html`),Page.Banner.load()]).then(c=>{if(c[0].ok)return c[0].text();window.location.replace("/404.html")}).then(c=>{Page.unload();let g=c.indexOf("</head>");-1!==g&&(c=c.slice(g+7));c=c.slice(c.indexOf("<body>")+6,c.indexOf("</body>"));document.body.firstElementChild.insertAdjacentHTML("beforebegin",`<div class="page" style="${Site.showingPresentation?"display: none; ":
""}opacity: 0">${c}</div>`);Page.load();e?history.replaceState({url:a},document.title,a):history.pushState({url:a},document.title,a);document.documentElement.style.overflowY="visible";document.body.style.overflowY="visible";document.body.style.userSelect="auto";document.body.style.WebkitUserSelect="auto";d?(window.scrollTo(0,this.lastPageScroll),Page.Banner.onScroll(this.lastPageScroll)):(window.scrollTo(0,0),Page.scroll=0);this.lastPageScroll=k}).catch(c=>{console.error(c.message);console.log("Failed to load new page -- reversing fade-out.");
this.currentlyChangingPage=!1;setTimeout(()=>{Page.backgroundColorChanged?setTimeout(()=>{document.documentElement.classList.add("background-transition");document.body.classList.add("background-transition");document.documentElement.style.backgroundColor=f;document.body.style.backgroundColor=f;setTimeout(()=>{document.documentElement.classList.remove("background-transition");document.body.classList.remove("background-transition");document.body.style.backgroundColor="";setTimeout(()=>{Page.Animate.changeOpacity(document.body,
1,Site.opacityAnimationTime)},Site.opacityAnimationTime)},Site.backgroundColorAnimationTime)},Site.backgroundColorAnimationTime):Page.Animate.changeOpacity(document.body,1,Site.opacityAnimationTime)},Site.opacityAnimationTime)})}},getTransitionType:function(a){if(!(a in Site.sitemap)||a===Page.url)return 0;for(var b=Page.url;""!==b;)if(b=Site.sitemap[b].parent,a===b)return-1;for(b=a;""!==b;)if(b=Site.sitemap[b].parent,Page.url===b)return 1;return Site.sitemap[a].parent===Site.sitemap[Page.url].parent?
(b=Site.sitemap[a].parent,Site.sitemap[b].children.indexOf(a)>Site.sitemap[b].children.indexOf(Page.url)?2:-2):0}};
Page.Unload={fadeOut:function(a,b){return new Promise(async(e,d)=>{Site.forceDarkThemePages.includes(b)&&1!==Site.Settings.urlVars.theme&&(Site.Settings.revertTheme=0,Site.Settings.forcedTheme=!0,Site.Settings.toggleTheme(!1,!0));a?Page.element.style.opacity=0:(d=null,1===Page.Navigation.transitionType?(d=Page.Animate.fadeUpOut(Page.element,Site.pageAnimationTime),null!==Page.bannerElement&&(d=Page.Animate.fadeUpOut(Page.bannerElement,2*Site.pageAnimationTime))):-1===Page.Navigation.transitionType?
(d=Page.Animate.fadeDownOut(Page.element,Site.pageAnimationTime),null!==Page.bannerElement&&(d=Page.Animate.fadeDownOut(Page.bannerElement,2*Site.pageAnimationTime))):2===Page.Navigation.transitionType?(d=Page.Animate.fadeLeftOut(Page.element,Site.pageAnimationTime),null!==Page.bannerElement&&(d=Page.Animate.fadeLeftOut(Page.bannerElement,2*Site.pageAnimationTime))):-2===Page.Navigation.transitionType?(d=Page.Animate.fadeRightOut(Page.element,Site.pageAnimationTime),null!==Page.bannerElement&&(d=
Page.Animate.fadeRightOut(Page.bannerElement,2*Site.pageAnimationTime))):(d=Page.Animate.fadeOut(Page.element,Site.pageAnimationTime),null!==Page.bannerElement&&(d=Page.Animate.fadeOut(Page.bannerElement,2*Site.pageAnimationTime))),await d,Page.backgroundColorChanged&&(document.documentElement.classList.add("background-transition"),document.body.classList.add("background-transition"),1===Site.Settings.urlVars.theme?1===Site.Settings.urlVars.darkThemeColor?(document.documentElement.style.backgroundColor=
"rgb(0, 0, 0)",document.body.style.backgroundColor="rgb(0, 0, 0)",anime({targets:Site.Settings.metaThemeColorElement,content:"#000000",duration:500,easing:"cubicBezier(.42, 0, .58, 1)"})):(document.documentElement.style.backgroundColor="rgb(24, 24, 24)",document.body.style.backgroundColor="rgb(24, 24, 24)",anime({targets:Site.Settings.metaThemeColorElement,content:"#181818",duration:500,easing:"cubicBezier(.42, 0, .58, 1)"})):(document.documentElement.style.backgroundColor="rgb(255, 255, 255)",document.body.style.backgroundColor=
"rgb(255, 255, 255)",anime({targets:Site.Settings.metaThemeColorElement,content:"#ffffff",duration:500,easing:"cubicBezier(.42, 0, .58, 1)"})),setTimeout(()=>{document.body.style.backgroundColor="";document.documentElement.classList.remove("background-transition");document.body.classList.remove("background-transition")},Site.backgroundColorAnimationTime)));e()})}};
Page.unload=function(){document.querySelectorAll("script, style.temporary-style, link.temporary-style").forEach(a=>a.remove());for(let a in Page.temporaryHandlers)for(let b=0;b<Page.temporaryHandlers[a].length;b++)window.removeEventListener(a,Page.temporaryHandlers[a][b]),document.documentElement.removeEventListener(a,Page.temporaryHandlers[a][b]);Page.temporaryIntervals.forEach(a=>clearInterval(a));Page.temporaryIntervals=[];Page.temporaryWebWorkers.forEach(a=>a.terminate());Page.temporaryWebWorkers=
[];for(let a in Page.desmosGraphs)Page.desmosGraphs[a].destroy();Page.currentApplets.forEach(a=>a.destroy());Page.currentApplets=[];Page.element.remove()};
