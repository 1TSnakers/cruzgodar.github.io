"use strict";Page.Navigation={currentlyChangingPage:!1,lastPageScroll:0,elementsToRemove:[],navigationPath:[],transitionType:0,redirect:async function(n,e=!1,a=!1,o=!1,t=!1){if(!this.currentlyChangingPage)if(e||-1!==n.indexOf("."))window.open(n,"_blank");else{Page.Cards.isOpen&&await Page.Cards.hide(),this.currentlyChangingPage=!0;const i=window.scrollY,r=(Site.appletProcessId++,this.transitionType=this.getTransitionType(n),Page.url=n,Page.parentFolder=n.slice(0,n.length),document.querySelectorAll("#header-links a").forEach(e=>e.classList.remove("active")),document.documentElement.style.backgroundColor);await Page.Unload.fadeOut(t,n),Promise.all([fetch(n+"index.html"),loadBanner()]).then(e=>{if(e[0].ok)return e[0].text();window.location.replace("/404.html")}).then(e=>{Page.unload();var t=e.indexOf("</head>"),t=(e=(e=-1!==t?e.slice(t+7):e).slice(e.indexOf("<body>")+6,e.indexOf("</body>")),document.body.firstElementChild.insertAdjacentHTML("beforebegin",`<div class="page" style="${Site.showingPresentation?"display: none; ":""}opacity: 0">${e}</div>`),Page.load(),n.replace(/\/home\//,"/"));a?history.replaceState({url:n},document.title,t):history.pushState({url:n},document.title,t),document.documentElement.style.overflowY="visible",document.body.style.overflowY="visible",document.body.style.userSelect="auto",document.body.style.WebkitUserSelect="auto",o?(window.scrollTo(0,this.lastPageScroll),bannerOnScroll(this.lastPageScroll)):(window.scrollTo(0,0),Page.scroll=0),this.lastPageScroll=i}).catch(e=>{console.error(e.message),console.log("Failed to load new page -- reversing fade-out."),this.currentlyChangingPage=!1,setTimeout(()=>{Page.backgroundColorChanged?setTimeout(()=>{document.documentElement.classList.add("background-transition"),document.body.classList.add("background-transition"),document.documentElement.style.backgroundColor=r,document.body.style.backgroundColor=r,setTimeout(()=>{document.documentElement.classList.remove("background-transition"),document.body.classList.remove("background-transition"),document.body.style.backgroundColor="",setTimeout(()=>{changeOpacity(document.body,1,Site.opacityAnimationTime)},Site.opacityAnimationTime)},Site.backgroundColorAnimationTime)},Site.backgroundColorAnimationTime):changeOpacity(document.body,1,Site.opacityAnimationTime)},Site.opacityAnimationTime)})}},getTransitionType:function(e){if(!(e in Site.sitemap)||e===Page.url)return 0;let t=Page.url;for(;""!==t;)if(e===(t=Site.sitemap[t].parent))return-1;for(t=e;""!==t;)if(t=Site.sitemap[t].parent,Page.url===t)return 1;if(Site.sitemap[e].parent!==Site.sitemap[Page.url].parent)return 0;{const t=Site.sitemap[e].parent;return Site.sitemap[t].children.indexOf(e)>Site.sitemap[t].children.indexOf(Page.url)?2:-2}}},Page.Unload={fadeOut:function(n,a){return new Promise(async(e,t)=>{if(Site.forceDarkThemePages.includes(a)&&1!==Site.Settings.urlVars.theme&&(Site.Settings.revertTheme=0,Site.Settings.forcedTheme=!0,Site.Settings.toggleTheme(!1,!0)),n)Page.element.style.opacity=0;else{let e=null;1===Page.Navigation.transitionType?(e=fadeUpOut(Page.element,Site.pageAnimationTime),bannerElement&&(e=fadeUpOut(bannerElement,2*Site.pageAnimationTime))):-1===Page.Navigation.transitionType?(e=fadeDownOut(Page.element,Site.pageAnimationTime),bannerElement&&(e=fadeDownOut(bannerElement,2*Site.pageAnimationTime))):2===Page.Navigation.transitionType?(e=fadeLeftOut(Page.element,Site.pageAnimationTime),bannerElement&&(e=fadeLeftOut(bannerElement,2*Site.pageAnimationTime))):-2===Page.Navigation.transitionType?(e=fadeRightOut(Page.element,Site.pageAnimationTime),bannerElement&&(e=fadeRightOut(bannerElement,2*Site.pageAnimationTime))):(e=fadeOut(Page.element,Site.pageAnimationTime),bannerElement&&(e=fadeOut(bannerElement,2*Site.pageAnimationTime))),await e,Page.backgroundColorChanged&&(document.documentElement.classList.add("background-transition"),document.body.classList.add("background-transition"),1===Site.Settings.urlVars.theme?1===Site.Settings.urlVars.darkThemeColor?(document.documentElement.style.backgroundColor="rgb(0, 0, 0)",document.body.style.backgroundColor="rgb(0, 0, 0)",anime({targets:Site.Settings.metaThemeColorElement,content:"#000000",duration:500,easing:"cubicBezier(.42, 0, .58, 1)"})):(document.documentElement.style.backgroundColor="rgb(24, 24, 24)",document.body.style.backgroundColor="rgb(24, 24, 24)",anime({targets:Site.Settings.metaThemeColorElement,content:"#181818",duration:500,easing:"cubicBezier(.42, 0, .58, 1)"})):(document.documentElement.style.backgroundColor="rgb(255, 255, 255)",document.body.style.backgroundColor="rgb(255, 255, 255)",anime({targets:Site.Settings.metaThemeColorElement,content:"#ffffff",duration:500,easing:"cubicBezier(.42, 0, .58, 1)"})),setTimeout(()=>{document.body.style.backgroundColor="",document.documentElement.classList.remove("background-transition"),document.body.classList.remove("background-transition")},Site.backgroundColorAnimationTime))}e()})}},Page.unload=function(){for(var t in document.querySelectorAll("script, style.temporary-style, link.temporary-style").forEach(e=>e.remove()),Page.temporaryHandlers)for(let e=0;e<Page.temporaryHandlers[t].length;e++)window.removeEventListener(t,Page.temporaryHandlers[t][e]),document.documentElement.removeEventListener(t,Page.temporaryHandlers[t][e]);for(var e in Page.temporaryIntervals.forEach(e=>clearInterval(e)),Page.temporaryIntervals=[],Page.temporaryWebWorkers.forEach(e=>e.terminate()),Page.temporaryWebWorkers=[],Page.desmosGraphs)Page.desmosGraphs[e].destroy();try{Applet.current.forEach(e=>e.destroy()),Applet.current=[]}catch(e){}Page.element.remove()};