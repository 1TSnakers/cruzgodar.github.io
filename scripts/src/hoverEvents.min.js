import{changeScale}from"./animation.min.js";import{currentlyTouchDevice}from"./interaction.min.js";import{$$,pageUrl}from"./main.min.js";import{prefetchPage}from"./navigation.min.js";import{siteSettings}from"./settings.min.js";import{sitemap}from"./sitemap.min.js";import{animate}from"./utils.min.js";const elementSelectors=[["a:not(.image-link)",1,()=>!1],[".carousel-dot",1,()=>!1]],elementSelectorsWithScale={"#logo img":{scale:1.035,addBounceOnTouch:()=>!1,preventScaleWithIncreasedContrast:!1},".text-button:not(.dropdown, .nav-button)":{scale:1.075,addBounceOnTouch:()=>!0,preventScaleWithIncreasedContrast:!1},".text-button.dropdown":{scale:1.075,addBounceOnTouch:()=>!1,preventScaleWithIncreasedContrast:!1},".text-button.nav-button":{scale:1.075,addBounceOnTouch:()=>!1,preventScaleWithIncreasedContrast:!1},".checkbox-container":{scale:1.1,addBounceOnTouch:()=>!0,preventScaleWithIncreasedContrast:!1},".gallery-image-1-1 img":{scale:1.075,addBounceOnTouch:()=>!0,preventScaleWithIncreasedContrast:!0},".gallery-image-2-2 img":{scale:1.0375,addBounceOnTouch:()=>!0,preventScaleWithIncreasedContrast:!0},".gallery-image-3-3 img":{scale:1.025,addBounceOnTouch:()=>!0,preventScaleWithIncreasedContrast:!0}};function initHoverEvents(){for(const n of elementSelectors)for(const a of $$(n[0]))addHoverEventWithScale({element:a,scale:n[1],addBounceOnTouch:n[2]});for(var[e,t]of Object.entries(elementSelectorsWithScale))for(const o of $$(e))addHoverEventWithScale({element:o,scale:t.scale,addBounceOnTouch:t.addBounceOnTouch,preventScaleWithIncreasedContrast:t.preventScaleWithIncreasedContrast});for(const c of $$("a"))c.addEventListener("mouseenter",()=>{"/"===c.href[0]&&prefetchPage(c.href)})}function addHoverEvent({element,scale=1.1,addBounceOnTouch=()=>!1,callback=isHovering=>{}}){element.addEventListener("mouseenter",()=>{currentlyTouchDevice||element.classList.contains("no-hover")||(element.classList.add("hover"),"SELECT"===element.tagName?element.previousElementSibling.classList.add("hover"):element.classList.contains("dropdown-container")&&element.firstElementChild.classList.add("hover"),callback(!0))}),element.addEventListener("mouseleave",()=>{currentlyTouchDevice||element.classList.contains("no-hover")||(element.classList.remove("hover"),"SELECT"===element.tagName?element.previousElementSibling.classList.remove("hover"):element.classList.contains("dropdown-container")?element.firstElementChild.classList.remove("hover"):element.blur(),callback(!1))}),element.addEventListener("touchstart",async()=>{!addBounceOnTouch()||siteSettings.reduceMotion||element.classList.contains("no-hover")||(await changeScale({element:element,scale:scale,duration:100}),changeScale({element:element,scale:1,duration:100}))})}function addHoverEventWithScale({element,scale,addBounceOnTouch=()=>!1,preventScaleWithIncreasedContrast=!1,callback=isHovering=>{}}){element.addEventListener("mouseenter",()=>{currentlyTouchDevice||element.classList.contains("no-hover")||((element="SELECT"===element.tagName?element.previousElementSibling:element).classList.add("hover"),callback(!0),siteSettings.reduceMotion?element.classList.add("hover-reduce-motion"):siteSettings.increaseContrast&&preventScaleWithIncreasedContrast||changeScale({element:element,scale:scale}))}),element.addEventListener("mouseleave",()=>{currentlyTouchDevice||element.classList.contains("no-hover")||((element="SELECT"===element.tagName?element.previousElementSibling:element).classList.remove("hover"),element.classList.remove("hover-reduce-motion"),callback(!1),changeScale({element:element,scale:1}))}),element.addEventListener("touchstart",async()=>{!addBounceOnTouch()||siteSettings.reduceMotion||element.classList.contains("no-hover")||(await changeScale({element:element,scale:scale,duration:100}),changeScale({element:element,scale:1,duration:100}))})}function removeHoverEvents(){var e=elementSelectors.map(selector=>selector[0]).concat(Object.keys(elementSelectorsWithScale)).join(",");for(const t of $$(e))t.classList.remove("hover")}function initFocusEvents(){for(const e of $$(".focus-on-child"))e.addEventListener("focus",()=>{e.children[0].focus()})}function initImageLinks(){const n={"/gallery":"176, 238, 173","/applets":"255, 180, 203","/teaching":"255, 216, 150","/math":"175, 229, 255","/about":"244, 199, 255","/home":"224, 224, 224"},a={"/gallery":"81, 162, 84","/applets":"209, 115, 147","/teaching":"178, 137, 54","/math":"78, 155, 187","/about":"179, 126, 193","/home":"96, 96, 96"};let o=pageUrl;for(;!(o in n);)o=sitemap[o].parent;for(const c of $$(".image-link")){var e=c.getAttribute("data-card-id")?()=>!0:()=>!1;addHoverEventWithScale({element:c,scale:1.035,addBounceOnTouch:e,preventScaleWithIncreasedContrast:!1,callback:isHovering=>{isHovering?c.children[1].style.color=siteSettings.darkTheme?"rgb(255, 255, 255)":"rgb(0, 0, 0)":c.children[1].style.removeProperty("color");const e=(siteSettings.darkTheme?a:n)[o];animate(t=>{c.style.backgroundColor=`rgba(${e}, ${isHovering?t:1-t})`},125,"easeOutQuad")}})}}export{initHoverEvents,addHoverEvent,addHoverEventWithScale,removeHoverEvents,initFocusEvents,initImageLinks};