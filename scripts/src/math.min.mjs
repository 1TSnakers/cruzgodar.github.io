import{cardIsOpen}from"./cards.min.mjs";import{pageElement}from"./main.min.mjs";import anime from"/scripts/anime.min.js";function typesetMath(){return MathJax.typesetPromise()}async function showTex(t){if(cardIsOpen&&"1"!==t.getAttribute("data-showing-tex")){t.setAttribute("data-showing-tex","1"),t.classList.remove("active"),t.classList.remove("hover"),await anime({targets:t,scale:1,borderRadius:"0px",duration:0}).finished;var i=t.getAttribute("data-source-tex").replaceAll(/\[NEWLINE\]/g,"\n").replaceAll(/\[TAB\]/g,"\t"),s=t.getBoundingClientRect().height,n=t.getBoundingClientRect().width;t.style.minHeight=s+"px";const a=t.style.padding,l=document.createElement("div");l.style.display="none",pageElement.appendChild(l),l.appendChild(t.firstElementChild);let e=null;-1!==i.indexOf("\n")?((e=document.createElement("textarea")).textContent=i,e.style.minHeight=s-17+"px",e.style.width="100%",e.style.marginLeft="-6px",t.style.width="75%"):((e=document.createElement("input")).setAttribute("type","text"),e.setAttribute("value",i),e.style.height=s-13+"px",e.style.width=n-13+"px"),e.style.fontFamily="'Source Code Pro', monospace",t.appendChild(e),t.style.padding=0,e.select(),setTimeout(()=>e.select(),50),setTimeout(()=>e.select(),250),e.onblur=()=>{e.remove(),t.style.removeProperty("width"),t.style.padding=a,t.appendChild(l.firstElementChild),t.style.minHeight="",l.remove(),t.setAttribute("data-showing-tex","0"),t.classList.add("active")}}}export{typesetMath,showTex};