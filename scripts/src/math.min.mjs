import{cardIsOpen}from"./cards.min.mjs";function typesetMath(){return MathJax.typesetPromise()}async function showTex(i){if(cardIsOpen&&"1"!==i.getAttribute("data-showing-tex")){i.setAttribute("data-showing-tex","1"),i.classList.remove("active"),i.classList.remove("hover");const a=1===Site.Settings.urlVars.theme?"rgba(24, 24, 24, 0)":"rgba(255, 255, 255, 0)";await new Promise((e,t)=>{anime({targets:i,scale:1,borderRadius:"0px",backgroundColor:a,duration:0,complete:e})});var t=i.getAttribute("data-source-tex").replaceAll(/\[NEWLINE\]/g,"\n").replaceAll(/\[TAB\]/g,"\t"),s=i.getBoundingClientRect().height,n=i.getBoundingClientRect().width;i.style.minHeight=s+"px";const l=i.style.padding,r=document.createElement("div");r.style.display="none",Page.element.appendChild(r),r.appendChild(i.firstElementChild);let e=null;-1!==t.indexOf("\n")?((e=document.createElement("textarea")).textContent=t,e.style.minHeight=s-17+"px",e.style.width="100%",e.style.marginLeft="-6px",i.style.width="75%"):((e=document.createElement("input")).setAttribute("type","text"),e.setAttribute("value",t),e.style.height=s-13+"px",e.style.width=n-13+"px"),e.style.fontFamily="'Source Code Pro', monospace",i.appendChild(e),i.style.padding=0,e.select(),setTimeout(()=>e.select(),50),setTimeout(()=>e.select(),250),e.onblur=()=>{e.remove(),i.style.removeProperty("width"),i.style.padding=l,i.appendChild(r.firstElementChild),i.style.minHeight="",r.remove(),i.setAttribute("data-showing-tex","0"),i.classList.add("active")}}}export{typesetMath,showTex};