import{cardIsOpen}from"./cards.min.mjs";import{pageElement}from"./main.min.mjs";import anime from"/scripts/anime.min.js";function typesetMath(){return MathJax.typesetPromise()}async function showTex(element){if(cardIsOpen&&"1"!==element.getAttribute("data-showing-tex")){element.setAttribute("data-showing-tex","1"),element.classList.remove("active"),element.classList.remove("hover"),await anime({targets:element,scale:1,borderRadius:"0px",duration:0}).finished;var t=element.getAttribute("data-source-tex").replaceAll(/\[NEWLINE\]/g,"\n").replaceAll(/\[TAB\]/g,"\t"),n=element.getBoundingClientRect().height,l=element.getBoundingClientRect().width;element.style.minHeight=n+"px";const i=element.style.padding,s=document.createElement("div");s.style.display="none",pageElement.appendChild(s),s.appendChild(element.firstElementChild);let e=null;-1!==t.indexOf("\n")?((e=document.createElement("textarea")).textContent=t,e.style.minHeight=n-17+"px",e.style.width="100%",e.style.marginLeft="-6px",element.style.width="75%"):((e=document.createElement("input")).setAttribute("type","text"),e.setAttribute("value",t),e.style.height=n-13+"px",e.style.width=l-13+"px"),e.style.fontFamily="'Source Code Pro', monospace",element.appendChild(e),element.style.padding=0,e.select(),setTimeout(()=>e.select(),50),setTimeout(()=>e.select(),250),e.onblur=()=>{e.remove(),element.style.removeProperty("width"),element.style.padding=i,element.appendChild(s.firstElementChild),element.style.minHeight="",s.remove(),element.setAttribute("data-showing-tex","0"),element.classList.add("active")}}}export{typesetMath,showTex};