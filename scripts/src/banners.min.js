import{changeOpacity}from"./animation.min.js";import{$,addStyle,pageElement,pageUrl}from"./main.min.js";let bannerElement;function setBannerElement(newBannerElement){bannerElement=newBannerElement}let contentElement;function setContentElement(newContentElement){contentElement=newContentElement}let bannerMaxScroll;function setBannerMaxScroll(newBannerMaxScroll){bannerMaxScroll=newBannerMaxScroll}let lastBannerChangeTimestamp=-1;function updateBanner(timestamp){bannerElement&&contentElement&&timestamp!==lastBannerChangeTimestamp&&lastBannerChangeTimestamp,lastBannerChangeTimestamp=timestamp,window.requestAnimationFrame(updateBanner)}window.requestAnimationFrame(updateBanner);let bannerFilename="",bannerFilepath="";const bannerPages=["/home/","/about/","/writing/mist/","/writing/desolation-point/","/debug/htmdl-test/"],multibannerPages={"/home/":{currentBanner:Math.floor(11*Math.random())+1,numBanners:11}};async function loadBanner(large=!1){if(bannerPages.includes(pageUrl)){bannerElement=$("#banner"),contentElement=$("#content"),bannerFilename=`${large?"large":"small"}.webp`,bannerFilepath=pageUrl+"banners/",pageUrl in multibannerPages&&(bannerFilepath+=multibannerPages[pageUrl].currentBanner+"/"),addStyle(`
		#banner-small
		{
			background: url(${bannerFilepath}small.webp) no-repeat center center;
			background-size: cover;
		}
		
		#banner-large
		{
			background: url(${bannerFilepath}large.webp) no-repeat center center;
			background-size: cover;
		}
	`),await fetch(bannerFilepath+bannerFilename);const n=new Image;var e=new Promise(resolve=>{n.onload=()=>{n.remove(),resolve()}});n.style.opacity=0,n.style.position="fixed",n.style.top="-100vh",n.style.left="-100vw",pageElement.appendChild(n),setTimeout(()=>{n.src=bannerFilepath+bannerFilename},20),await e}}function setUpBanner(){bannerPages.includes(pageUrl)?loadBanner(!0).then(()=>{changeOpacity({element:$("#banner-small"),opacity:0,duration:700}).then(()=>$("#banner-small").remove())}):bannerElement}export{bannerElement,setBannerElement,contentElement,setContentElement,bannerMaxScroll,setBannerMaxScroll,updateBanner,bannerPages,multibannerPages,loadBanner,setUpBanner};