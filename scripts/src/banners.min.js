Page.bannerElement=null;Page.contentElement=null;
Page.Banner={doneLoading:!1,fileName:"",filePath:"",opacity:1,maxScroll:null,bannerPages:["/home/","/about/","/writing/mist/","/writing/desolation-point/"],multibannerPages:{"/home/":{currentBanner:Math.floor(11*Math.random())+1,numBanners:11}},pagesAlreadyFetched:[],otherSizePagesAlreadyFetched:[],load:function(a=!1){return new Promise((b,d)=>{this.bannerPages.includes(Page.url)?(this.fileName=`${a?"large.":"small."}${Page.Images.fileExtension}`,this.filePath=Page.parentFolder+"banners/",this.multibannerPages.hasOwnProperty(Page.url)&&
(this.filePath+=this.multibannerPages[Page.url].currentBanner+"/"),fetch(this.filePath+this.fileName).then(e=>{const c=new Image;c.onload=()=>{c.remove();a||(this.ScrollButton.timeoutId=setTimeout(()=>{this.ScrollButton.insert()},2E3));b()};c.style.display="hidden";c.style.opacity=0;Page.element.appendChild(c);setTimeout(()=>{c.src=this.filePath+this.fileName},20)}).catch(e=>{$("#banner").remove();$("#banner-cover").remove();b()})):b()})},lastScrollTimestamp:-1,onScroll:function(a){0===a?Page.scroll=
window.scrollY:(Page.scroll=a,this.doneLoading=!1,this.ScrollButton.doneLoading=!1);window.requestAnimationFrame(this.scrollAnimationFrame)},scrollAnimationFrame:function(a){const b=a-Page.Banner.lastScrollTimestamp;Page.Banner.lastScrollTimestamp=a;0!==b&&Page.Banner.scrollHandler()},scrollHandler:function(){if(Page.scroll<=this.maxScroll){this.opacity=Math.min(Math.max(1-Page.scroll/this.maxScroll,0),1);try{Page.bannerElement.style.opacity=this.opacity,Page.contentElement.style.opacity=1-this.opacity}catch(a){}this.doneLoading=
0===this.opacity?!0:!1}else if(!this.doneLoading){this.opacity=0;try{Page.bannerElement.style.opacity=0,Page.contentElement.style.opacity=1}catch(a){}this.doneLoading=!0}if(Page.scroll<=this.maxScroll/2.5){const a=Math.min(Math.max(1-Page.scroll/(this.maxScroll/2.5),0),1);if(this.ScrollButton.exists)try{$("#scroll-button").style.opacity=a}catch(b){}try{$("#cruz-text").parentNode.style.opacity=a,$("#godar-text").parentNode.style.opacity=a}catch(b){}this.ScrollButton.doneLoading=0===a?!0:!1}else if(!1===
this.ScrollButton.doneLoading){try{$("#cruz-text").parentNode.style.opacity=0,$("#godar-text").parentNode.style.opacity=0}catch(a){}try{$("#scroll-button").style.opacity=0}catch(a){}this.ScrollButton.doneLoading=!0}else try{document.querySelector("#scroll-button").remove()}catch(a){}},fetchOtherPageBannersInBackground:function(){$$("a").forEach(a=>{a=a.getAttribute("href");this.bannerPages.includes(a)&&!this.pagesAlreadyFetched.includes(a)&&(this.pagesAlreadyFetched.push(a),a.slice(0,a.lastIndexOf("/")+
1),this.multibannerPages.hasOwnProperty(a))})},ScrollButton:{doneLoading:!1,exists:!1,timeoutId:null,insert:function(){if(!(Page.scroll>Page.Banner.maxScroll/2.5)){var a=Math.min(Math.max(1-Page.scroll/(Page.Banner.maxScroll/2.5),0),1),b="chevron-down";1===Site.Settings.urlVars.contrast&&(b+="-dark");try{document.querySelector("#banner-cover").insertAdjacentHTML("beforebegin",`
					<div id="new-banner-cover" data-aos="fade-down">
						<input type="image" id="scroll-button" src="/graphics/general-icons/${b}.png" style="opacity: 0" alt="Scroll down" onclick="Page.Banner.ScrollButton.animateTo(document.querySelector('#scroll-to'))">
					</div>
				`),setTimeout(()=>{$("#new-banner-cover").style.opacity=0;$("#new-banner-cover").style.transform="translateY(-100px)";anime({targets:$("#new-banner-cover"),opacity:1,translateY:0,duration:4*Site.opacityAnimationTime,easing:"easeOutCubic"});anime({targets:$("#scroll-button"),opacity:a,translateY:0,duration:4*Site.opacityAnimationTime,easing:"easeOutCubic"});setTimeout(()=>this.exists=!0,4*Site.opacityAnimationTime);try{Page.Load.HoverEvents.addWithScale(document.querySelector("#scroll-button"),
1.1)}catch(d){}},100),document.querySelector("#banner-cover").remove()}catch(d){}}},animateTo:function(a){a.scrollIntoView({behavior:"smooth"})}}};
