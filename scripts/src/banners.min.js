"use strict";Page.currentApplets=[],Page.bannerElement=null,Page.contentElement=null,Page.Banner={doneLoading:!1,fileName:"",filePath:"",opacity:1,maxScroll:null,bannerPages:["/home/","/about/","/writing/mist/","/writing/desolation-point/"],multibannerPages:{"/home/":{currentBanner:Math.floor(11*Math.random())+1,numBanners:11}},pagesAlreadyFetched:[],otherSizePagesAlreadyFetched:[],load:function(n=!1){return new Promise((a,e)=>{this.bannerPages.includes(Page.url)?(this.fileName=(n?"large.":"small.")+Page.Images.fileExtension,this.filePath=Page.parentFolder+"banners/",this.multibannerPages.hasOwnProperty(Page.url)&&(this.filePath+=this.multibannerPages[Page.url].currentBanner+"/"),fetch(this.filePath+this.fileName).then(e=>{const t=new Image;t.onload=()=>{t.remove(),n||(this.ScrollButton.timeoutId=setTimeout(()=>{this.ScrollButton.insert()},2e3)),a()},t.style.display="hidden",t.style.opacity=0,Page.element.appendChild(t),setTimeout(()=>{t.src=this.filePath+this.fileName},20)}).catch(e=>{$("#banner").remove(),$("#banner-cover").remove(),a()})):a()})},lastScrollTimestamp:-1,onScroll:function(e){0===e?Page.scroll=window.scrollY:(Page.scroll=e,this.doneLoading=!1,this.ScrollButton.doneLoading=!1),window.requestAnimationFrame(this.scrollAnimationFrame)},scrollAnimationFrame:function(e){var t=e-Page.Banner.lastScrollTimestamp;Page.Banner.lastScrollTimestamp=e,0!=t&&Page.Banner.scrollHandler()},scrollHandler:function(){if(Page.scroll<=this.maxScroll){this.opacity=Math.min(Math.max(1-Page.scroll/this.maxScroll,0),1);try{Page.bannerElement.style.opacity=this.opacity,Page.contentElement.style.opacity=1-this.opacity}catch(e){}0===this.opacity?this.doneLoading=!0:this.doneLoading=!1}else if(!this.doneLoading){this.opacity=0;try{Page.bannerElement.style.opacity=0,Page.contentElement.style.opacity=1}catch(e){}this.doneLoading=!0}if(Page.scroll<=this.maxScroll/2.5){var e=Math.min(Math.max(1-Page.scroll/(this.maxScroll/2.5),0),1);if(this.ScrollButton.exists)try{$("#scroll-button").style.opacity=e}catch(e){}try{$("#cruz-text").parentNode.style.opacity=e,$("#godar-text").parentNode.style.opacity=e}catch(e){}this.ScrollButton.doneLoading=0===e}else if(!1===this.ScrollButton.doneLoading){try{$("#cruz-text").parentNode.style.opacity=0,$("#godar-text").parentNode.style.opacity=0}catch(e){}try{$("#scroll-button").style.opacity=0}catch(e){}this.ScrollButton.doneLoading=!0}else try{document.querySelector("#scroll-button").remove()}catch(e){}},fetchOtherPageBannersInBackground:function(){$$("a").forEach(t=>{t=t.getAttribute("href");if(this.bannerPages.includes(t)&&!this.pagesAlreadyFetched.includes(t)){this.pagesAlreadyFetched.push(t);let e=t.slice(0,t.lastIndexOf("/")+1)+"banners/";this.multibannerPages.hasOwnProperty(t)&&(e+=this.multibannerPages[t].currentBanner+1+"/"),e+="small."+Page.Images.fileExtension}})},ScrollButton:{doneLoading:!1,exists:!1,timeoutId:null,insert:function(){if(!(Page.scroll>Page.Banner.maxScroll/2.5)){const t=Math.min(Math.max(1-Page.scroll/(Page.Banner.maxScroll/2.5),0),1);let e="chevron-down";1===Site.Settings.urlVars.contrast&&(e+="-dark");try{document.querySelector("#banner-cover").insertAdjacentHTML("beforebegin",`
					<div id="new-banner-cover">
						<input type="image" id="scroll-button" src="/graphics/general-icons/${e}.png" style="opacity: 0" alt="Scroll down" onclick="Page.Banner.ScrollButton.animateTo(document.querySelector('#scroll-to'))">
					</div>
				`),setTimeout(()=>{$("#new-banner-cover").style.opacity=0,$("#new-banner-cover").style.transform="translateY(-100px)",anime({targets:$("#new-banner-cover"),opacity:1,translateY:0,duration:4*Site.opacityAnimationTime,easing:"easeOutCubic"}),anime({targets:$("#scroll-button"),opacity:t,translateY:0,duration:4*Site.opacityAnimationTime,easing:"easeOutCubic"}),setTimeout(()=>this.exists=!0,4*Site.opacityAnimationTime);try{Page.Load.HoverEvents.addWithScale(document.querySelector("#scroll-button"),1.1)}catch(e){}},100),document.querySelector("#banner-cover").remove()}catch(e){}}},animateTo:function(e){e.scrollIntoView({behavior:"smooth"})}}};