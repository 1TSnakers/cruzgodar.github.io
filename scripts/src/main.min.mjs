import{bannerOnScroll}from"./banners.min.mjs";import{addHeader}from"./header.min.mjs";import{setUpInteractionListeners}from"./interaction.min.mjs";import{redirect}from"./navigation.min.mjs";let $=e=>pageElement.querySelector(e),$$=e=>pageElement.querySelectorAll(e),pageElement=document.createElement("div");function updatePageElement(){pageElement=document.body.querySelector(".page"),$=e=>pageElement.querySelector(e),$$=e=>pageElement.querySelectorAll(e)}const params=new URLSearchParams(document.location.search);let pageUrl=decodeURIComponent(params.get("page")).replace("index.html","");function setPageUrl(e){pageUrl=e}"null"===pageUrl&&(pageUrl="/home/");let pageScroll=0;function setPageScroll(e){pageScroll=e}let temporaryListeners=[];function addTemporaryListener({object:e,event:t,callback:r}){e.addEventListener(t,r),temporaryListeners.push([e,t,r])}function clearTemporaryListeners(){temporaryListeners=[]}let temporaryIntervals=[];function addTemporaryInterval({callback:e,delay:t}){e=setInterval(e,t);return temporaryIntervals.push(e),e}function clearTemporaryIntervals(){temporaryIntervals=[]}let temporaryWorkers={};function addTemporaryWorker(e,t=e){try{temporaryWorkers[t].terminate()}catch(e){}var r=window.DEBUG?e.replace(".js",".min.js"):e,r=new Worker(r);return temporaryWorkers[t]=r}function clearTemporaryWorkers(){temporaryWorkers={}}let visitedHomepage=!1;function setVisitedHomepage(e){visitedHomepage=e}const scriptsLoaded={glsl:0};async function loadSite(e=pageUrl){pageElement.classList.add("page"),document.body.insertBefore(pageElement,document.body.firstChild),window.addEventListener("scroll",()=>bannerOnScroll(0)),setUpInteractionListeners(),"scrollRestoration"in history&&(history.scrollRestoration="manual"),window.matchMedia("(display-mode: standalone)").matches&&(document.documentElement.style.WebkitUserSelect="none",document.documentElement.style.userSelect="none",document.documentElement.style.WebkitTouchCallout="none",$$("body *").forEach(e=>e.setAttribute("draggable","false")),addStyle(`
			#logo, .name-text-container, .empty-top
			{
				margin-top: 2vh;
			}
		`,!1)),window.addEventListener("popstate",e=>{-1===window.location.href.indexOf("#")&&redirect({url:e.state.url,noStatePush:!0,restoreScroll:!0})}),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js")}),addHeader(),-1!==e.indexOf(".")?window.location.href=e:redirect({url:e,noStatePush:!0,noFadeOut:!0})}function loadScript(a,o=!1){return new Promise((e,t)=>{var r;scriptsLoaded[a]||(r=document.createElement("script"),o&&r.setAttribute("type","module"),document.body.appendChild(r),r.onload=()=>{scriptsLoaded[a]=!0,e()},r.onerror=t,r.async=!0,r.src=a)})}function loadStyle(e){var t=document.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),document.head.appendChild(t),t.setAttribute("href",e),t}function addStyle(e,t=!0,r=!1){var a=document.createElement("style");return a.textContent=e,t&&a.classList.add("temporary-style"),r?document.head.insertBefore(a,document.head.firstChild):document.head.appendChild(a),a}export{$,$$,pageElement,updatePageElement,pageUrl,setPageUrl,pageScroll,setPageScroll,temporaryListeners,addTemporaryListener,clearTemporaryListeners,temporaryIntervals,addTemporaryInterval,clearTemporaryIntervals,temporaryWorkers,addTemporaryWorker,clearTemporaryWorkers,visitedHomepage,setVisitedHomepage,loadSite,loadScript,loadStyle,addStyle};