import{bannerOnScroll}from"./banners.min.mjs";import{addHeader}from"./header.min.mjs";import{setUpInteractionListeners}from"./interaction.min.mjs";import{setUpOnResize}from"./layout.min.mjs";import{redirect}from"./navigation.min.mjs";import{setUpDarkTheme}from"./settings.min.mjs";let pageElement=document.createElement("div"),$=queryString=>pageElement.querySelector(queryString),$$=queryString=>pageElement.querySelectorAll(queryString);function updatePageElement(){pageElement=document.body.querySelector(".page"),$=queryString=>pageElement.querySelector(queryString),$$=queryString=>pageElement.querySelectorAll(queryString)}const params=new URLSearchParams(document.location.search);let pageUrl=decodeURIComponent(params.get("page")).replace("index.html","");function setPageUrl(newPageUrl){pageUrl=newPageUrl}"null"===pageUrl&&(pageUrl="/home/");let pageScroll=0;function setPageScroll(newPageScroll){pageScroll=newPageScroll}let temporaryListeners=[];function addTemporaryListener({object,event,callback}){object.addEventListener(event,callback),temporaryListeners.push([object,event,callback])}function clearTemporaryListeners(){temporaryListeners=[]}let temporaryIntervals=[];function addTemporaryInterval({callback,delay}){callback=setInterval(callback,delay);return temporaryIntervals.push(callback),callback}function clearTemporaryIntervals(){temporaryIntervals=[]}let temporaryWorkers={};function addTemporaryWorker(src,id=src){temporaryWorkers[id]?.terminate&&temporaryWorkers[id].terminate();var replacedSrc=window.DEBUG?src:src.replace(".js",".min.js"),replacedSrc=new Worker(replacedSrc);return temporaryWorkers[id]=replacedSrc}function clearTemporaryWorkers(){temporaryWorkers={}}let visitedHomepage=!1;function setVisitedHomepage(newVisitedHomepage){visitedHomepage=newVisitedHomepage}const scriptsLoaded={glsl:0};async function loadSite(url=pageUrl){setUpDarkTheme(),pageElement.classList.add("page"),document.body.insertBefore(pageElement,document.body.firstChild),window.addEventListener("scroll",()=>bannerOnScroll(0)),setUpInteractionListeners(),setUpOnResize(),"scrollRestoration"in history&&(history.scrollRestoration="manual"),window.matchMedia("(display-mode: standalone)").matches&&(document.documentElement.style.WebkitUserSelect="none",document.documentElement.style.userSelect="none",document.documentElement.style.WebkitTouchCallout="none",$$("body *").forEach(element=>element.setAttribute("draggable","false")),addStyle(`
			#logo, .name-text-container, .empty-top
			{
				margin-top: 2vh;
			}
		`,!1)),window.addEventListener("popstate",e=>{-1===window.location.href.indexOf("#")&&redirect({url:e.state.url,noStatePush:!0,restoreScroll:!0})}),addHeader(),-1!==url.indexOf(".")?window.location.href=url:redirect({url:url,noStatePush:!0,noFadeOut:!0})}function loadScript(src,isModule=!1){return new Promise((resolve,reject)=>{var script;scriptsLoaded[src]?resolve():(script=document.createElement("script"),isModule&&script.setAttribute("type","module"),document.body.appendChild(script),script.onload=()=>{scriptsLoaded[src]=!0,resolve()},script.onerror=reject,script.async=!0,script.src=src)})}function loadStyle(href){var style=document.createElement("link");return style.setAttribute("rel","stylesheet"),style.setAttribute("type","text/css"),document.head.appendChild(style),style.setAttribute("href",href),style}function addStyle(content,temporary=!0,atBeginningOfHead=!1){var element=document.createElement("style");return element.textContent=content,temporary&&element.classList.add("temporary-style"),atBeginningOfHead?document.head.insertBefore(element,document.head.firstChild):document.head.appendChild(element),element}export{pageElement,$,$$,updatePageElement,pageUrl,setPageUrl,pageScroll,setPageScroll,temporaryListeners,addTemporaryListener,clearTemporaryListeners,temporaryIntervals,addTemporaryInterval,clearTemporaryIntervals,temporaryWorkers,addTemporaryWorker,clearTemporaryWorkers,visitedHomepage,setVisitedHomepage,loadSite,loadScript,loadStyle,addStyle};