import{changeOpacity}from"./animation.min.js";import{InputElement}from"./inputElement.min.js";import{$$,addTemporaryListener,pageUrl}from"./main.min.js";import{redirect}from"./navigation.min.js";import{sitemap}from"./sitemap.min.js";class Button extends InputElement{linked;constructor({element,name,onClick,linked=!0}){super({element:element,name:name}),this.linked=linked,this.onClick=onClick,this.element.textContent=this.name,this.linked&&element.classList.add("linked-text-button"),this.element.addEventListener("click",()=>{this.disabled||this.onClick()}),equalizeTextButtons()}}class GenerateButton extends Button{constructor({element,onClick,linked=!0}){super({element:element,name:"Generate",onClick:onClick,linked:linked})}}class DownloadButton extends Button{constructor({element,linked=!0,wilson,filename}){super({element:element,name:"Download",onClick:()=>wilson.downloadFrame(filename),linked:linked})}}class ToggleButton extends Button{state=0;name0;name1;onClick0;onClick1;currentlyAnimating=!1;constructor({element,name0,name1,onClick0,onClick1,linked=!0}){super({element:element,name:name0,onClick:async()=>{this.currentlyAnimating||(this.currentlyAnimating=!0,(this.state?this.onClick1:this.onClick0)(),this.state=!this.state,await changeOpacity({element:this.element,opacity:0}),this.element.textContent=this.state?this.name1:this.name0,await changeOpacity({element:this.element,opacity:1}),this.currentlyAnimating=!1)},linked:linked}),this.name0=name0,this.name1=name1,this.onClick0=onClick0,this.onClick1=onClick1}async setState(newState){this.state!==newState&&(await changeOpacity({element:this.element,opacity:0}),this.state=newState,this.element.textContent=this.state?this.name1:this.name0,await changeOpacity({element:this.element,opacity:1}))}}function setUpTextButtons(){addTemporaryListener({object:window,event:"resize",callback:equalizeTextButtons}),setTimeout(equalizeTextButtons,50),setTimeout(equalizeTextButtons,500)}function equalizeTextButtons(){$$(".text-button").forEach(textButton=>{textButton.parentNode.classList.contains("contents-container")||(textButton.parentNode.style.margin="0 auto")});const t=[];let n=0;const i=[];let a=0;var e=$$(".linked-text-button");e.forEach((element,index)=>{element.style.height="fit-content",element.style.width="fit-content",t.push(element.offsetHeight),t[index]>n&&(n=t[index]),i.push(element.offsetWidth),i[index]>a&&(a=i[index])}),e.forEach((element,index)=>{t[index]<n?element.style.height=n+"px":element.style.height="fit-content",i[index]<a?element.style.width=a+"px":element.style.width="fit-content";var e=element.parentNode.parentNode;e.classList.contains("contents-container")?e.style.gridTemplateColumns=`132px repeat(auto-fit, ${a}px`:e.style.gridTemplateColumns=`repeat(auto-fit, ${a}px`})}function setUpNavButtons(){if(sitemap[pageUrl].parent){const e=sitemap[sitemap[pageUrl].parent].children,t=e.indexOf(pageUrl);-1===t?console.error("Page not found in page list!"):(0<t?$$(".previous-nav-button").forEach(element=>{element.addEventListener("click",()=>redirect({url:e[t-1]}))}):$$(".previous-nav-button").forEach(element=>element.parentNode.remove()),$$(".home-nav-button").forEach(element=>{element.addEventListener("click",()=>redirect({url:sitemap[pageUrl].parent}))}),t<e.length-1?$$(".next-nav-button").forEach(element=>{element.addEventListener("click",()=>redirect({url:e[t+1]}))}):$$(".next-nav-button").forEach(element=>element.parentNode.remove()))}}export{Button,GenerateButton,DownloadButton,ToggleButton,setUpTextButtons,equalizeTextButtons,setUpNavButtons};