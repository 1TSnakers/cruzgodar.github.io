!function(){"use strict";let e=document.querySelector("#output-canvas").getContext("2d",{alpha:!1}),t=null,r=[];document.querySelector("#generate-button").addEventListener("click",a);let o=document.querySelectorAll("#grid-size-input, #k-input, #orbit-separation-input");for(let e=0;e<o.length;e++)o[e].addEventListener("keydown",(function(e){13===e.keyCode&&a()}));function a(){let o=parseInt(document.querySelector("#grid-size-input").value||500),a=parseFloat(document.querySelector("#k-input").value||.75),u=parseInt(document.querySelector("#orbit-separation-input").value||3);r=[];for(let e=0;e<o;e++){r.push([]);for(let t=0;t<o;t++)r[e].push(0)}document.querySelector("#output-canvas").setAttribute("width",o),document.querySelector("#output-canvas").setAttribute("height",o),e.fillStyle="rgb(0, 0, 0)",e.fillRect(0,0,o,o);try{t.terminate()}catch(e){}t=DEBUG?new Worker("/applets/the-kicked-rotator/scripts/worker.js"):new Worker("/applets/the-kicked-rotator/scripts/worker.min.js"),temporary_web_workers.push(t),t.onmessage=function(t){let a=t.data[0],u=t.data[1];for(let t=0;t<o;t++)for(let c=0;c<o;c++)if(a[t][c]>r[t][c]){let o=n(u,1,a[t][c]/255);e.fillStyle=`rgb(${o[0]}, ${o[1]}, ${o[2]})`,e.fillRect(c,t,1,1),r[t][c]=a[t][c]}},t.postMessage([o,a,u])}function n(e,t,r){let o,a,n,u,c,l,s,i;switch(u=Math.floor(6*e),c=6*e-u,l=r*(1-t),s=r*(1-c*t),i=r*(1-(1-c)*t),u%6){case 0:o=r,a=i,n=l;break;case 1:o=s,a=r,n=l;break;case 2:o=l,a=r,n=i;break;case 3:o=l,a=s,n=r;break;case 4:o=i,a=l,n=r;break;case 5:o=r,a=l,n=s}return[Math.round(255*o),Math.round(255*a),Math.round(255*n)]}document.querySelector("#download-button").addEventListener("click",(function(){let e=document.createElement("a");e.download="kicked-rotator.png",e.href=document.querySelector("#output-canvas").toDataURL(),e.click(),e.remove()})),applet_canvases_to_resize=[document.querySelector("#output-canvas")],set_up_canvas_resizer()}();