!function(){"use strict";let e=255,t=0;Page.Banner.doneLoading=!1,Page.Banner.ScrollButton.doneLoading=!1;let r=!1;function n(){Page.scroll>=0&&(Page.backgroundColorChanged=!0,0===Page.scroll?Page.backgroundColorChanged=!1:Page.scroll<=window.innerHeight/1.25?(e=.5+.5*Math.sin(Math.PI*Math.max(1-1.25*Page.scroll/window.innerHeight,0)-.5*Math.PI),1===Site.Settings.urlVars.theme?1===Site.Settings.urlVars.darkThemeColor?e=0:e*=24:e*=255,document.documentElement.style.backgroundColor=`rgb(${e}, ${e}, ${e})`,Site.Settings.metaThemeColorElement.setAttribute("content",`rgb(${e}, ${e}, ${e})`),0===e?Page.Banner.doneLoading=!0:Page.Banner.doneLoading=!1):!1===Page.Banner.doneLoading&&(document.documentElement.style.backgroundColor="rgb(0, 0, 0)",Site.Settings.metaThemeColorElement.setAttribute("content","rgb(0, 0, 0)"),Page.Banner.doneLoading=!0),function e(){if(Page.scroll<=window.innerHeight/3){t=.5+.5*Math.sin(Math.PI*Math.max(1-3*Page.scroll/window.innerHeight,0)-.5*Math.PI);try{Page.element.querySelector("#scroll-button").style.opacity=t}catch(r){}if(0===t){try{Page.element.querySelector("#scroll-button").remove()}catch(n){}Page.Banner.ScrollButton.doneLoading=!0}else Page.Banner.ScrollButton.doneLoading=!1}else if(!1===Page.Banner.ScrollButton.doneLoading){try{Page.element.querySelector("#scroll-button").remove()}catch(l){}Page.Banner.ScrollButton.doneLoading=!0}}(),Page.scroll>=.8*window.innerHeight&&Page.scroll<=6*window.innerHeight/5?(t=.5+.5*Math.sin(Math.PI*Math.max(1-3.5*(Page.scroll-.8*window.innerHeight)/window.innerHeight,0)-.5*Math.PI),Page.element.querySelector("#eclipse").style.opacity=1-t,r=1===t):scroll>=1.2*window.innerHeight&&!1===r?(Page.element.querySelector("#eclipse").style.opacity=1,r=!0):scroll<=.8*window.innerHeight&&!1===r&&(Page.element.querySelector("#eclipse").style.opacity=0,r=!0))}function l(){Page.element.querySelector("#eclipse").style.height=Page.element.querySelector("#eclipse").offsetWidth+"px",Page.element.querySelector("#eclipse img").style.height=Page.element.querySelector("#eclipse").offsetWidth+"px";let e=0;Page.element.querySelectorAll(".chapter-link a").forEach(t=>{let r=t.offsetWidth;r>e&&(e=r)}),Page.element.querySelectorAll(".chapter-link").forEach(t=>t.style.width=e+"px")}setTimeout(function e(){Site.addStyle(`
   #floating-footer-gradient
   {
    background: -moz-linear-gradient(top, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 100%) !important;
    background: -webkit-linear-gradient(top, rgba(0,0,0,0) 0%,rgba(0,0,0,1) 100%) !important;
    background: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,1) 100%) !important;
   }
  `),1===Site.Settings.urlVars.contrast?(Page.setElementStyles(".synopsis-text","color","rgb(192, 192, 192)"),Page.setElementStyles(".body-text","color","rgb(192, 192, 192)"),1!==Site.Settings.urlVars.theme&&Page.setElementStyles(".hook-text","color","rgb(120, 120, 120)"),Page.element.querySelector("#email img").style.filter="brightness(150%)",Page.setElementStyles(".stage-bubble","border-color","rgb(192, 192, 192)"),Page.setElementStyles(".stage-bubble span","background-color","rgb(192, 192, 192)"),Site.addStyle(`
    .line-break
    {
     background: -moz-linear-gradient(left, rgb(0,0,0) 0%, rgb(140,140,140) 50%, rgb(0,0,0) 100%);
     background: -webkit-linear-gradient(left, rgb(0,0,0) 0%,rgb(140,140,140) 50%,rgb(0,0,0) 100%);
     background: linear-gradient(to right, rgb(0,0,0) 0%,rgb(140,140,140) 50%,rgb(0,0,0) 100%);
    }
   `)):(Site.addStyle(`
    .line-break
    {
     background: -moz-linear-gradient(left, rgb(0,0,0) 0%, rgb(92,92,92) 50%, rgb(0,0,0) 100%);
     background: -webkit-linear-gradient(left, rgb(0,0,0) 0%,rgb(92,92,92) 50%,rgb(0,0,0) 100%);
     background: linear-gradient(to right, rgb(0,0,0) 0%,rgb(92,92,92) 50%,rgb(0,0,0) 100%);
    }
   `),1===Site.Settings.urlVars.theme&&Page.setElementStyles(".hook-text","color","rgb(120, 120, 120)"))},500),Page.element.querySelector("#eclipse").style.height=Page.element.querySelector("#eclipse").offsetWidth+"px",Page.element.querySelector("#eclipse img").style.height=Page.element.querySelector("#eclipse").offsetWidth+"px",window.addEventListener("resize",l),Page.temporaryHandlers.resize.push(l),window.addEventListener("scroll",n),Page.temporaryHandlers.scroll.push(n),setTimeout(l,500),setTimeout(l,1e3),0!==scroll&&(document.documentElement.classList.add("background-transition"),n(),setTimeout(()=>{document.documentElement.classList.remove("background-transition")},Site.backgroundColorAnimationTime)),setTimeout(Page.Banner.ScrollButton.insert,7e3),Page.show()}();