!function(){"use strict";let e=255,t=0,r=Page.Layout.window_height;Page.Banner.done_loading=!1,Page.Banner.ScrollButton.done_loading=!1;let n=!1;function l(){Page.scroll>=0&&(Page.background_color_changed=!0,0===Page.scroll?Page.background_color_changed=!1:Page.scroll<=r/1.25?(e=.5+.5*Math.sin(Math.PI*Math.max(1-1.25*Page.scroll/r,0)-.5*Math.PI),1===Site.Settings.url_vars.theme?1===Site.Settings.url_vars.dark_theme_color?e=0:e*=24:e*=255,document.documentElement.style.backgroundColor=`rgb(${e}, ${e}, ${e})`,Site.Settings.meta_theme_color_element.setAttribute("content",`rgb(${e}, ${e}, ${e})`),Page.Banner.done_loading=0===e):!1===Page.Banner.done_loading&&(document.documentElement.style.backgroundColor="rgb(0, 0, 0)",Site.Settings.meta_theme_color_element.setAttribute("content","rgb(0, 0, 0)"),Page.Banner.done_loading=!0),function(){if(Page.scroll<=r/3){t=.5+.5*Math.sin(Math.PI*Math.max(1-3*Page.scroll/r,0)-.5*Math.PI);try{Page.element.querySelector("#scroll-button").style.opacity=t}catch(e){}if(0===t){try{Page.element.querySelector("#scroll-button").remove()}catch(e){}Page.Banner.ScrollButton.done_loading=!0}else Page.Banner.ScrollButton.done_loading=!1}else if(!1===Page.Banner.ScrollButton.done_loading){try{Page.element.querySelector("#scroll-button").remove()}catch(e){}Page.Banner.ScrollButton.done_loading=!0}}(),Page.scroll>=.8*r&&Page.scroll<=6*r/5?(t=.5+.5*Math.sin(Math.PI*Math.max(1-3.5*(Page.scroll-.8*r)/r,0)-.5*Math.PI),Page.element.querySelector("#eclipse").style.opacity=1-t,n=1===t):scroll>=1.2*r&&!1===n?(Page.element.querySelector("#eclipse").style.opacity=1,n=!0):scroll<=.8*r&&!1===n&&(Page.element.querySelector("#eclipse").style.opacity=0,n=!0))}function o(){Page.element.querySelector("#eclipse").style.height=Page.element.querySelector("#eclipse").offsetWidth+"px",Page.element.querySelector("#eclipse img").style.height=Page.element.querySelector("#eclipse").offsetWidth+"px";let e=0;Page.element.querySelectorAll(".chapter-link a").forEach((t=>{let r=t.offsetWidth;r>e&&(e=r)})),Page.element.querySelectorAll(".chapter-link").forEach((t=>t.style.width=e+"px"))}setTimeout((function(){Site.add_style("\n\t\t\t#floating-footer-gradient\n\t\t\t{\n\t\t\t\tbackground: -moz-linear-gradient(top, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 100%) !important;\n\t\t\t\tbackground: -webkit-linear-gradient(top, rgba(0,0,0,0) 0%,rgba(0,0,0,1) 100%) !important;\n\t\t\t\tbackground: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,1) 100%) !important;\n\t\t\t}\n\t\t"),1===Site.Settings.url_vars.contrast?(Page.set_element_styles(".synopsis-text","color","rgb(192, 192, 192)"),Page.set_element_styles(".body-text","color","rgb(192, 192, 192)"),1!==Site.Settings.url_vars.theme&&Page.set_element_styles(".hook-text","color","rgb(120, 120, 120)"),Page.element.querySelector("#email img").style.filter="brightness(150%)",Page.set_element_styles(".stage-bubble","border-color","rgb(192, 192, 192)"),Page.set_element_styles(".stage-bubble span","background-color","rgb(192, 192, 192)"),Site.add_style("\n\t\t\t\t.line-break\n\t\t\t\t{\n\t\t\t\t\tbackground: -moz-linear-gradient(left, rgb(0,0,0) 0%, rgb(140,140,140) 50%, rgb(0,0,0) 100%);\n\t\t\t\t\tbackground: -webkit-linear-gradient(left, rgb(0,0,0) 0%,rgb(140,140,140) 50%,rgb(0,0,0) 100%);\n\t\t\t\t\tbackground: linear-gradient(to right, rgb(0,0,0) 0%,rgb(140,140,140) 50%,rgb(0,0,0) 100%);\n\t\t\t\t}\n\t\t\t")):(Site.add_style("\n\t\t\t\t.line-break\n\t\t\t\t{\n\t\t\t\t\tbackground: -moz-linear-gradient(left, rgb(0,0,0) 0%, rgb(92,92,92) 50%, rgb(0,0,0) 100%);\n\t\t\t\t\tbackground: -webkit-linear-gradient(left, rgb(0,0,0) 0%,rgb(92,92,92) 50%,rgb(0,0,0) 100%);\n\t\t\t\t\tbackground: linear-gradient(to right, rgb(0,0,0) 0%,rgb(92,92,92) 50%,rgb(0,0,0) 100%);\n\t\t\t\t}\n\t\t\t"),1===Site.Settings.url_vars.theme&&Page.set_element_styles(".hook-text","color","rgb(120, 120, 120)"))}),500),Page.element.querySelector("#eclipse").style.height=Page.element.querySelector("#eclipse").offsetWidth+"px",Page.element.querySelector("#eclipse img").style.height=Page.element.querySelector("#eclipse").offsetWidth+"px",window.addEventListener("resize",o),Page.temporary_handlers.resize.push(o),window.addEventListener("scroll",l),Page.temporary_handlers.scroll.push(l),setTimeout(o,500),setTimeout(o,1e3),0!==scroll&&(document.documentElement.classList.add("background-transition"),l(),setTimeout((()=>{document.documentElement.classList.remove("background-transition")}),Site.background_color_animation_time)),setTimeout(Page.Banner.ScrollButton.insert,7e3),Page.show()}();