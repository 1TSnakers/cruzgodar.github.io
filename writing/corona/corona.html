<noscript>
	<div style="height: 5vh"></div>
	
	<p class="body-text" style="text-align: center">JavaScript is required to use this site and many others. Consider enabling it.</p>
</noscript>

<div id="background-image"></div>

<div style="height: 100vh">
	<div style="height: 5vh"></div>
	
	
	
	<header>
		<div class="logo" data-aos="fade-in" id="trigger-sentences">
			<a href="/home.html">
				<img src="/graphics/general-icons/logo.png" alt="Logo" onclick="redirect('/home.html')"></img>
			</a>
		</div>
	</header>
	
	<div style="height: 10vh"></div>
	
	<div data-aos="fade-up" data-aos-delay="1000" data-aos-anchor="#trigger-sentences">
		<h2 class="hook-text">A world well into its epilogue.</h2>
	</div>

	<div style="height: 1vh"></div>

	<div data-aos="fade-up" data-aos-delay="2000" data-aos-anchor="#trigger-sentences">
		<h2 class="hook-text">A city shrouded in darkness.</h2>
	</div>

	<div style="height: 1vh"></div>

	<div data-aos="fade-up" data-aos-delay="3000" data-aos-anchor="#trigger-sentences">
		<h2 class="hook-text">A planet colder each day.</h2>
	</div>
	
	<div id="banner-cover"></div>
</div>



<main>
	<section>
		<div style="height: 20vh"></div>
		
		<div id="scroll-to"></div>

		<h1 class="title-text" data-aos="fade-up">CORONA</h1>

		<div id="eclipse">
			<img id="image-eclipse" class="check-webp" src="" alt="Corona">
		</div>

		<div style="height: 5vh"></div>
		
		<div data-aos="fade-up" id="trigger-synopsis">
			<p class="synopsis-text">Los Angeles, separated only by a thin glass dome from the hushed apocalypse without, holds tentatively to life. Political tensions mount among its Citizens, and change, in some direction, is imminent.</p>
		</div>

		<br>

		<div data-aos="fade-up" data-aos-delay="100" data-aos-anchor="#trigger-synopsis">
			<p class="synopsis-text">Amelia has worked the same job for years, driven by her older brother to provide for her family as much as she can. But when she runs face-first into an old homeless man with a secret project and a mastery of martial arts &mdash; and he agrees to teach her &mdash; she starts to grow stronger, though with that strength comes distance from her family. As she struggles to keep old secrets under wraps, Amelia discovers the forces operating against the city and the insurgency at the heart of it all.</p>
		</div>

		<br>

		<div data-aos="fade-up" data-aos-delay="200" data-aos-anchor="#trigger-synopsis">
			<p class="synopsis-text">Ben is kept safely tucked away in his father&#x2019;s skyscraper, insulated from the dangers of the world and taught by city-renowned instructors. It&#x2019;s stifling, and when his sixteenth birthday comes and goes without a glimpse of the outside world, he reaches a breaking point. But being the son of an oligarch isn&#x2019;t without its perks, among them control of the building&#x2019;s security system, and he manages to sneak out and return, unscathed and unnoticed. His curiosity soon leads him to dark rabbit holes, though, and Ben begins to suspect his father of illicit dealings with strange characters.</p>
		</div>

		<br>

		<div data-aos="fade-up" data-aos-delay="300" data-aos-anchor="#trigger-synopsis">
			<p class="synopsis-text">The Earth hurtles through space, growing colder each day, the sun long since disappeared. The human race dwindles, and the last strongholds of warmth and life are flickering. As paths cross and secrets come to light, the fate of more than just a city hangs in the balance.</p>
		</div>
	</section>
	
	

	<div style="height: 20vh"></div>
	
	
	
	<section>
		<div class="stage-bubbles" id="trigger-stage-bubbles">
			<div class="stage-bubble" data-aos="fade-in" data-aos-anchor="#trigger-stage-bubbles">
				<span></span>
				<p class="body-text stage-bubble-subtext">Skeleton</p>
			</div>
			
			<div class="stage-bubble" data-aos="fade-in" data-aos-delay="100" data-aos-anchor="#trigger-stage-bubbles">
				<span></span>
				<p class="body-text stage-bubble-subtext">Outline</p>
			</div>
			
			<div class="stage-bubble" data-aos="fade-in" data-aos-delay="200" data-aos-anchor="#trigger-stage-bubbles">
				<span></span>
				<p class="body-text stage-bubble-subtext">Draft</p>
			</div>
		</div>
		
		<div style="height: 10vh"></div>
		
		<div class="stage-bubbles">
			<div class="stage-bubble" data-aos="fade-in" data-aos-delay="400" data-aos-anchor="#trigger-stage-bubbles">
				<span style="background-color: rgb(0, 0, 0)"></span>
				<p class="body-text stage-bubble-subtext">Revision</p>
			</div>
			
			<div class="stage-bubble" data-aos="fade-in" data-aos-delay="500" data-aos-anchor="#trigger-stage-bubbles">
				<span></span>
				<p class="body-text stage-bubble-subtext">Prereaders</p>
			</div>
			
			<div class="stage-bubble" data-aos="fade-in" data-aos-delay="600" data-aos-anchor="#trigger-stage-bubbles">
				<span></span>
				<p class="body-text stage-bubble-subtext">Editing</p>
			</div>
		</div>
		
		
		
		<div style="height: 20vh"></div>
		
		
		
		<div class="progress-bar" data-aos="fade-in" id="trigger-bar">
			<span></span>
		</div>

		<div style="height: 2vh"></div>

		<div data-aos="fade-in" data-aos-delay="100" data-aos-anchor="#trigger-bar">
			<p class="body-text" style="text-align: center">5 of 53 chapters revised</p>
		</div>
		
		
		
		<div style="height: 15vh"></div>
		
		
		
		<div data-aos="fade-up" id="trigger-info">
			<p class="body-text">Corona is currently being written. After more than two years, the first draft is finally (finally!) complete, and now the revision process has begun. Content is being added, removed, and modified at a large scale to solidify the foundation of the first draft. After the revision, the manuscript will be sent to a small list of prereaders to gather feedback on the story and make further changes. If you&#x2019;re interested in being one of these prereaders, contact the address below.</p>
		</div>

		<div style="height: 5vh"></div>

		<div id="email" data-aos="fade-up" data-aos-delay="100" data-aos-anchor="#trigger-info">
			<img src="/writing/corona/graphics/email.png" alt="Email Address">
		</div>
	</section>
</main>



<footer>
	<div id="spawn-footer"></div>
</footer>



<script>
	if (typeof current_url == "undefined")
	{
		window.location.replace("/index.html?page=" + encodeURIComponent(window.location.pathname));
	}
	
	
	
	page_settings = 
	{
		"title": "Corona",
		
		"banner_page": false,
		"writing_page": false,
		"math_page": false,
		"comments": false,
		
		"manual_banner": false,
		"manual_dark_theme": true,
		
		"no_footer": false,
		"footer_exclusion": "",
		"footer_from_nonstandard_color": true
	};
	
	on_page_load();
	
	
	
	!function()
	{
		let background_color = 255;
		let opacity = 0;
		
		banner_done = false;
		scroll_button_done = false;
		let eclipse_done = false;
		
		let progress_bar_done = false;
		let stage_bubbles_done = false;
		
		
		
		add_style(`
			body
			{
				margin: 0;
				padding: 0;
			}
			
			#new-banner-cover
			{
				height: 60vh;
			}
			
			.title-text
			{
				position: relative;
				width: 100%;
				color: rgb(255, 255, 255);
				text-align: center;
				font-size: 450%;
				font-family: "Gentium Book Basic", serif;
				font-weight: normal;
			}
			
			.hook-text
			{
				position: relative;
				width: 100%;
				color: rgb(160, 160, 160);
				text-align: center;
				font-size: 150%;
				font-family: "Gentium Book Basic", serif;
			}
			
			.synopsis-text
			{
				position: relative;
				width: 50vw;
				margin-left: 25vw;
				color: rgb(160, 160, 160);
				text-align: justify;
				font-size: 100%;
				font-family: 'Gentium Book Basic', serif;
			}
			
			#eclipse
			{
				width: 50vh;
				max-width: 70vw;
				margin: 0 auto;
				opacity: 0;
			}
			
			#eclipse img
			{
				position: absolute;
				width: auto;
				height: auto;
			}
			
			.stage-bubbles
			{
				width: 50vw;
				margin-left: 25vw;
			}
			
			.stage-bubble-subtext
			{
				width: 17.5vw;
				margin-left: -6.25vw;
			}
			
			.progress-bar
			{
				width: calc(50vw - 8px);
				margin-left: 25vw;
			}
			
			#email
			{
				width: 300px;
				margin: 0 auto;
			}
			
			#email img
			{
				position: absolute;
				width: 300px;
			}
			
			@media screen and (max-aspect-ratio: 9/16), (max-width: 700px)
			{
				/* Make text have smaller margins so justifying doesn't look ugly. */
				.synopsis-text:not(.layout-override)
				{
					width: 80vw;
					margin-left: 10vw;
				}
				
				#eclipse:not(.layout-override)
				{
					max-width: 90vw;
				}
				
				.stage-bubbles:not(.layout-override)
				{
					width: 80vw;
					margin-left: 10vw;
				}
				
				.stage-bubble-subtext:not(.layout-override)
				{
					width: 25vw;
					margin-left: -7.5vw;
				}
				
				/* Fit progress bar to synopsis text */
				.progress-bar:not(.layout-override)
				{
					margin-left: 10vw;
					width: 80vw;
				}
			}
		`, true);
		
		
		
		//Make the eclipse image have a 1:1 aspect ratio.
		document.querySelector("#eclipse").style.height = document.querySelector("#eclipse").offsetWidth + "px";
		document.querySelector("#eclipse img").style.height = document.querySelector("#eclipse").offsetWidth + "px";
		
		window.addEventListener("resize", corona_resize);
		temporary_handlers["resize"].push(corona_resize);
		
		
		
		//We have to wait to apply the contrast changes, since otherwise settings.js may set the body text color after we do here, resulting in less contrast than normal.
		let refresh_id = setInterval(function()
		{
			if (settings_done)
			{
				clearInterval(refresh_id);
				
				if (url_vars["contrast"] == 1)
				{
					let elements = document.querySelectorAll(".synopsis-text");
					for (let i = 0; i < elements.length; i++)
					{
						elements[i].style.color = "rgb(208, 208, 208)";
					}
					
					elements = document.querySelectorAll(".body-text");
					for (let i = 0; i < elements.length; i++)
					{
						elements[i].style.color = "rgb(192, 192, 192)";
					}
					
					if (url_vars["theme"] != 1)
					{
						let elements = document.querySelectorAll(".hook-text");
						for (let i = 0; i < elements.length; i++)
						{
							elements[i].style.color = "rgb(120, 120, 120)";
						}
					}
					
					
					
					document.querySelector("#email img").style.WebkitFilter = "brightness(150%)";
					document.querySelector("#email img").style.filter = "brightness(150%)";
					
					
					
					elements = document.querySelectorAll(".stage-bubble, .progress-bar");
					for (let i = 0; i < elements.length; i++)
					{
						elements[i].style.borderColor = "rgb(192, 192, 192)";
					}
					
					elements = document.querySelectorAll(".stage-bubble span, .progress-bar span");
					for (let i = 0; i < elements.length; i++)
					{
						elements[i].style.backgroundColor = "rgb(192, 192, 192)";
					}
					
					
					
					add_style(`
						.line-break
						{
							background: rgb(0,0,0);
							background: -moz-linear-gradient(left, rgb(0,0,0) 0%, rgb(140,140,140) 50%, rgb(0,0,0) 100%);
							background: -webkit-linear-gradient(left, rgb(0,0,0) 0%,rgb(140,140,140) 50%,rgb(0,0,0) 100%);
							background: linear-gradient(to right, rgb(0,0,0) 0%,rgb(140,140,140) 50%,rgb(0,0,0) 100%);
						}
					`, true);
				}
				
				else
				{
					add_style(`
						.line-break
						{
							background: rgb(0,0,0);
							background: -moz-linear-gradient(left, rgb(0,0,0) 0%, rgb(92,92,92) 50%, rgb(0,0,0) 100%);
							background: -webkit-linear-gradient(left, rgb(0,0,0) 0%,rgb(92,92,92) 50%,rgb(0,0,0) 100%);
							background: linear-gradient(to right, rgb(0,0,0) 0%,rgb(92,92,92) 50%,rgb(0,0,0) 100%);
						}
					`, true);
					
					
					
					if (url_vars["theme"] == 1)
					{
						let elements = document.querySelectorAll(".hook-text");
						for (let i = 0; i < elements.length; i++)
						{
							elements[i].style.color = "rgb(120, 120, 120)";
						}
					}
				}
			}
		}, 50);
		
		
		
		//If the user just sits at the top of the page for 4 seconds without scrolling, give them a scroll button.
		if (window.scrollY == 0)
		{
			setTimeout(add_scroll_button, 7000);
		}
		
		
		
		window.addEventListener("scroll", corona_scroll);
		temporary_handlers["scroll"].push(corona_scroll);
		
		
		
		function corona_scroll()
		{
			scroll = window.scrollY;
			
			if (scroll >= 0)
			{
				if (scroll <= initial_window_height / 1.25)
				{
					background_color = .5 + .5 * Math.sin(Math.PI * Math.max(1 - 1.25 * scroll / initial_window_height, 0) - .5 * Math.PI);
					
					if (url_vars["theme"] == 1)
					{
						if (url_vars["dark_theme_color"] == 1)
						{
							background_color = 0;
						}
						
						else
						{
							background_color *= 24;
						}
					}
						
					else
					{
						background_color *= 255;
					}
					
					
					document.documentElement.style.backgroundColor = "rgb(" + background_color + ", " + background_color + ", " + background_color + ")";
					
					if (background_color == 0)
					{
						banner_done = true;
					}
					
					else
					{
						banner_done = false;
					}
				}
				
				else if (banner_done == false)
				{
					document.documentElement.style.backgroundColor = "rgb(0, 0, 0)";
					banner_done = true;
				}
				
				
				
				if (scroll <= initial_window_height / 3)
				{
					opacity = .5 + .5 * Math.sin(Math.PI * Math.max(1 - 3 * scroll / initial_window_height, 0) - .5 * Math.PI);
					
					try {document.querySelector("#scroll-button").style.opacity = opacity;}
					catch(ex) {}
					
					if (opacity == 0)
					{
						try {document.querySelector("#scroll-button").remove();}
						catch(ex) {}
						
						scroll_button_done = true;
					}
					
					else
					{
						scroll_button_done = false;
					}
				}
				
				else if (scroll_button_done == false)
				{
					try {document.querySelector("#scroll-button").remove();}
					catch(ex) {}
					
					scroll_button_done = true;
				}
				
				
				
				if (scroll >= 4/5 * initial_window_height && scroll <= initial_window_height * 6/5)
				{
					opacity = .5 + .5 * Math.sin(Math.PI * Math.max(1 - 3.5 * (scroll - (4/5 * initial_window_height)) / initial_window_height, 0) - .5 * Math.PI);
					
					document.querySelector("#eclipse").style.opacity = 1 - opacity;
					
					if (opacity == 1)
					{
						eclipse_done = true;
					}
					
					else
					{
						eclipse_done = false;
					}
				}
				
				else if (scroll >= 6/5 * window_height && eclipse_done == false)
				{
					document.querySelector("#eclipse").style.opacity = 1;
					
					eclipse_done = true;
				}
				
				else if (scroll <= 4/5 * window_height && eclipse_done == false)
				{
					document.querySelector("#eclipse").style.opacity = 0;
					
					eclipse_done = true;
				}
			}
			
			
			
			let progress_bar_pos = document.querySelector(".progress-bar").offsetTop;
			let stage_bubbles_pos = document.querySelector("#trigger-stage-bubbles").offsetTop;
			
			if (scroll > progress_bar_pos - 3*window_height/4 && progress_bar_done == false)
			{
				document.querySelector(".progress-bar span").style.width = (100 * 5/53) + "%";
				progress_bar_done = true;
			}
			
			else if (scroll > stage_bubbles_pos - 3*window_height/4 && stage_bubbles_done == false)
			{
				stage_bubbles_done = true;
				let bubbles = document.querySelectorAll(".stage-bubble span");
				let subtexts = document.querySelectorAll(".stage-bubble-subtext");
				
				for (let i = 0; i < 4; i++)
				{
					setTimeout(function(i)
					{
						bubbles[i].style.width = "100%";
						bubbles[i].style.height = "100%";
						subtexts[i].style.marginTop = "1vh";
					}, i * 100, i);
				}
				
				let blinking_block = 3;
				
				setInterval(function()
				{
					if (url_vars["contrast"] == 1)
					{
						bubbles[blinking_block].style.backgroundColor = "rgb(192, 192, 192)";
					}
					
					else
					{
						bubbles[blinking_block].style.backgroundColor = "rgb(127, 127, 127)";
					}
					
					setTimeout(function()
					{
						bubbles[blinking_block].style.backgroundColor = "rgb(0, 0, 0)";
					}, 1200);
				}, 2400);
			}
		}
		
		
		
		function corona_resize()
		{
			document.querySelector("#eclipse").style.height = document.querySelector("#eclipse").offsetWidth + "px";
			document.querySelector("#eclipse img").style.height = document.querySelector("#eclipse").offsetWidth + "px";
		}
	}()
</script>