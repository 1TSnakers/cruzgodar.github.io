<!DOCTYPE html>
<html>
<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-135923635-1"></script>
<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	
	gtag('config', 'UA-135923635-1');
</script>

<title>The Moduli Space of Triangles</title>
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest?v=NmPPnmeW24">
<link rel="mask-icon" href="/safari-pinned-tab.svg?v=NmPPnmeW24" color="#5bbad5">
<link rel="shortcut icon" href="/favicon.ico?v=NmPPnmeW24">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-TileImage" content="/mstile-144x144.png?v=NmPPnmeW24">

<!-- Animate on scroll library -->
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

<link rel="stylesheet" type="text/css" href="/style/base-style.css">

<style>

#moduli-space, #drawn-triangle
{
	margin: 0 auto;
}

</style>

</head>



<body>
	<div style="height: 5vh"></div>

	<div class="logo" data-aos="fade-in" id="trigger-section-1">
		<img class="link" onclick="redirect('/index.html')" src="/graphics/general-icons/logo.png" alt="Logo"></img>
	</div>

	<div style="height: 2vh"></div>

	<div data-aos="fade-up" data-aos-delay="100" data-aos-anchor="#trigger-section-1">
		<div class="heading-text">The Moduli Space of Triangles</div>
	</div>
	
	
	
	<div id="moduli-space" style="margin-top: -100px; width: 315px; height: 315px" data-aos="fade-up" data-aos-delay="200" data-aos-anchor="#trigger-section-1">
		<svg width="315" height="315">
			<path d="M314 314 L157 157 L105 209 L314 314 Z" vector-effect="non-scaling-stroke" stroke="rgb(0, 127, 0)" fill="rgba(0, 127, 0, .5)" stroke-width="2px"></path>
		</svg>
	</div>
	
	<div style="height: 5vh"></div>
	
	<div id="drawn-triangle" style="width: 315px; height: 315px" data-aos="fade-up" data-aos-delay="300" data-aos-anchor="#trigger-section-1">
		<svg width="315" height="315">
			<path vector-effect="non-scaling-stroke" stroke="rgb(0, 0, 127)" fill="rgba(0, 0, 127, .5)" stroke-width="2px"></path>
		</svg>
	</div>
	
	

	<!-- jQuery -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

	<!-- Animate on scroll library -->
	<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
	
	<script src="/style/base-script.js"></script>
	
	<script>
		$(function()
		{
			//Whenever the user mouses over the moduli space, draw a new triangle.
			
			if (!hasTouch())
			{
				$("#moduli-space").mousemove(function(e)
				{
					var parentOffset = $(this).offset();
					var mouse_x = e.pageX - parentOffset.left;
					var mouse_y = e.pageY - parentOffset.top;
					
					draw_triangle(mouse_x, mouse_y);
				});
			}
			
			else
			{
				document.getElementById("moduli-space").addEventListener("touchmove", function(e)
				{
					e.preventDefault();
					
					var parentOffset = $("#moduli-space").offset();
					var mouse_x = e.pageX - parentOffset.left;
					var mouse_y = e.pageY - parentOffset.top;
					
					draw_triangle(mouse_x, mouse_y);
				}, false);
			}
		});
		
		
		
		function draw_triangle(mouse_x, mouse_y)
		{
			//First convert to actual coordinates.
			var angle_x = mouse_x / 100;
			var angle_y = (315 - mouse_y) / 100;
			
			//We can get z easily, since x + y + z = pi, so z = pi - x - y.
			var angle_z = Math.PI - angle_x - angle_y;
			
			//If x and y are in fact within the triangle, we're in the moduli space and have a valid triangle. Now we draw it. Since x is the largest angle, the side opposite x, X, is the longest. We set this equal to 157, since that's the largest that a 315x315 canvas will always be able to draw. Then by the law of sines, Y = 157 * (sin y / sin x) and Z = 157 * (sin z / sin x).
			
			if (angle_y < angle_x && angle_y < Math.PI - angle_x && angle_y > -.5 * angle_x + Math.PI / 2)
			{
				var side_x = 157;
				var side_y = 157 * (Math.sin(angle_y) / Math.sin(angle_x));
				var side_z = 157 * (Math.sin(angle_z) / Math.sin(angle_x));
				
				//To find the coordinates of the other vertices, we draw two right triangles, one with vertices at x and y, the other at x and z. For the x and y one, we have the top angle as x/2 and the hypotenuse side_z, and similarly for the x and z triangle.
				var point_x = [157, 1];
				var point_y = [157 - side_z * Math.sin(angle_x / 2), side_z * Math.cos(angle_x / 2)];
				var point_z = [157 + side_y * Math.sin(angle_x / 2), side_y * Math.cos(angle_x / 2)];
				
				//Finally, draw the triangle.
				$("#drawn-triangle svg path").attr("d", "M" + point_x[0] + " " + point_x[1] + " L" + point_y[0] + " " + point_y[1] + " L" + point_z[0] + " " + point_z[1] + " L" + point_x[0] + " " + point_x[1] + " Z");
			}
		}
	</script>

</body>
</html>