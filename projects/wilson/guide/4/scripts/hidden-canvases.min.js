!function(){"use strict";let t=document.querySelectorAll("pre code");for(let e=0;e<t.length;e++)t[e].classList.add("highlightable");hljs.highlightAll();let e="\n\t\tprecision highp float;\n\t\t\n\t\tvarying vec2 uv;\n\t\t\n\t\tuniform float a;\n\t\tuniform float b;\n\t\tuniform float brightness_scale;\n\t\t\n\t\t\n\t\t\n\t\tvoid main(void)\n\t\t{\n\t\t\tvec2 z = vec2(uv.x * 2.0, uv.y * 2.0);\n\t\t\tvec3 color = normalize(vec3(abs(z.x + z.y) / 2.0, abs(z.x) / 2.0, abs(z.y) / 2.0) + .1 / length(z) * vec3(1.0, 1.0, 1.0));\n\t\t\tfloat brightness = exp(-length(z));\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tvec2 c = vec2(a, b);\n\t\t\t\n\t\t\tfor (int iteration = 0; iteration < 100; iteration++)\n\t\t\t{\n\t\t\t\tif (iteration == 99)\n\t\t\t\t{\n\t\t\t\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (length(z) >= 10.0)\n\t\t\t\t{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tz = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y) + c;\n\t\t\t\t\n\t\t\t\tbrightness += exp(-length(z));\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tgl_FragColor = vec4(brightness / brightness_scale * color, 1.0);\n\t\t}\n\t",n={renderer:"gpu",shader:e,canvas_width:1e3,canvas_height:1e3,world_width:4,world_height:4,world_center_x:0,world_center_y:0,use_draggables:!0,draggables_mousemove_callback:g,draggables_touchmove_callback:g},r={renderer:"gpu",shader:e,canvas_width:100,canvas_height:100},a=new Wilson(document.querySelector("#output-canvas"),n);a.render.init_uniforms(["a","b","brightness_scale"]);a.draggables.add(0,1);let i=new Wilson(document.querySelector("#hidden-canvas"),r);i.render.init_uniforms(["a","b","brightness_scale"]),a.canvas.parentNode.parentNode.style.setProperty("margin-bottom",0,"important"),i.canvas.parentNode.parentNode.style.setProperty("margin-top",0,"important");let o=0,l=1,s=1e3,c=100,d=-1,u=document.querySelector("#resolution-input");function g(t,e,n,r){o=e,l=n,window.requestAnimationFrame(m)}function m(t){let e=t-d;if(d=t,0===e)return;i.gl.uniform1f(i.uniforms.a,o),i.gl.uniform1f(i.uniforms.b,l),i.gl.uniform1f(i.uniforms.brightness_scale,20),i.render.draw_frame();let n=i.render.get_pixel_data(),r=new Array(c*c);for(let t=0;t<c*c;t++)r[t]=n[4*t]+n[4*t+1]+n[4*t+2];r.sort((t,e)=>t-e);let s=r[Math.floor(c*c*.98)]/255*18;s=Math.max(s,.1),a.gl.uniform1f(a.uniforms.a,o),a.gl.uniform1f(a.uniforms.b,l),a.gl.uniform1f(a.uniforms.brightness_scale,s),a.render.draw_frame()}u.addEventListener("input",()=>{s=parseInt(u.value||1e3),a.change_canvas_size(s,s)}),document.querySelector("#download-button").addEventListener("click",()=>{a.download_frame("a-julia-set.png")}),window.requestAnimationFrame(m),document.querySelector("#previous-part-button").addEventListener("click",()=>{Page.Navigation.redirect("/projects/wilson/guide/3/parallelizing.html")}),document.querySelector("#next-part-button").addEventListener("click",()=>{Page.Navigation.redirect("/projects/wilson/guide/5/fullscreen.html")})}();