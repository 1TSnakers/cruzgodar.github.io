!function(){"use strict";hljs.highlightAll();let t="\n\t\tprecision highp float;\n\t\t\n\t\tvarying vec2 uv;\n\t\t\n\t\tuniform float a;\n\t\tuniform float b;\n\t\tuniform float brightness_scale;\n\t\t\n\t\t\n\t\t\n\t\tvoid main(void)\n\t\t{\n\t\t\tvec2 z = vec2(uv.x * 2.0, uv.y * 2.0);\n\t\t\tvec3 color = normalize(vec3(abs(z.x + z.y) / 2.0, abs(z.x) / 2.0, abs(z.y) / 2.0) + .1 / length(z) * vec3(1.0, 1.0, 1.0));\n\t\t\tfloat brightness = exp(-length(z));\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tvec2 c = vec2(a, b);\n\t\t\t\n\t\t\tfor (int iteration = 0; iteration < 100; iteration++)\n\t\t\t{\n\t\t\t\tif (iteration == 99)\n\t\t\t\t{\n\t\t\t\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (length(z) >= 10.0)\n\t\t\t\t{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tz = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y) + c;\n\t\t\t\t\n\t\t\t\tbrightness += exp(-length(z));\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tgl_FragColor = vec4(brightness / brightness_scale * color, 1.0);\n\t\t}\n\t",e={renderer:"gpu",shader:t,canvas_width:1e3,canvas_height:1e3,world_width:4,world_height:4,world_center_x:0,world_center_y:0,use_draggables:!0,draggables_mousemove_callback:d,draggables_touchmove_callback:d},n={renderer:"gpu",shader:t,canvas_width:100,canvas_height:100},r=new Wilson(document.querySelector("#output-canvas"),e);r.render.init_uniforms(["a","b","brightness_scale"]);r.draggables.add(0,1);let a=new Wilson(document.querySelector("#hidden-canvas"),n);a.render.init_uniforms(["a","b","brightness_scale"]),r.canvas.parentNode.parentNode.style.setProperty("margin-bottom",0,"important"),a.canvas.parentNode.parentNode.style.setProperty("margin-top",0,"important");let i=0,o=1,l=1e3,s=100,c=-1,u=document.querySelector("#resolution-input");function d(t,e,n,r){i=e,o=n,window.requestAnimationFrame(g)}function g(t){let e=t-c;if(c=t,0===e)return;a.gl.uniform1f(a.uniforms.a,i),a.gl.uniform1f(a.uniforms.b,o),a.gl.uniform1f(a.uniforms.brightness_scale,20),a.render.draw_frame();let n=a.render.get_pixel_data(),l=new Array(s*s);for(let t=0;t<s*s;t++)l[t]=n[4*t]+n[4*t+1]+n[4*t+2];l.sort((t,e)=>t-e);let u=l[Math.floor(s*s*.98)]/255*18;u=Math.max(u,.1),r.gl.uniform1f(r.uniforms.a,i),r.gl.uniform1f(r.uniforms.b,o),r.gl.uniform1f(r.uniforms.brightness_scale,u),r.render.draw_frame()}u.addEventListener("input",()=>{l=parseInt(u.value||1e3),r.change_canvas_size(l,l)}),document.querySelector("#download-button").addEventListener("click",()=>{r.download_frame("a-julia-set.png")}),window.requestAnimationFrame(g),document.querySelector("#previous-part-button").addEventListener("click",()=>{Page.Navigation.redirect("/projects/wilson/guide/3/parallelizing.html")}),document.querySelector("#next-part-button").addEventListener("click",()=>{Page.Navigation.redirect("/projects/wilson/guide/5/fullscreen.html")})}();