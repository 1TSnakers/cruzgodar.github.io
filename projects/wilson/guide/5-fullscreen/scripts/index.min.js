import{showPage}from"/scripts/src/load-page.min.mjs";import{$,$$,addTemporaryListener}from"/scripts/src/main.min.mjs";import{Wilson}from"/scripts/wilson.min.mjs";!function(){"use strict";var e=$$("pre code");for(let r=0;r<e.length;r++)e[r].classList.add("highlightable");hljs.highlightAll();{var a=`
			precision highp float;
			
			varying vec2 uv;
			
			uniform float a;
			uniform float b;
			uniform float brightnessScale;
			
			
			
			void main(void)
			{
				vec2 z = vec2(uv.x * 2.0, uv.y * 2.0);
				vec3 color = normalize(vec3(abs(z.x + z.y) / 2.0, abs(z.x) / 2.0, abs(z.y) / 2.0) + .1 / length(z) * vec3(1.0, 1.0, 1.0));
				float brightness = exp(-length(z));
				
				
				
				vec2 c = vec2(a, b);
				
				for (int iteration = 0; iteration < 100; iteration++)
				{
					if (iteration == 99)
					{
						gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
						return;
					}
					
					if (length(z) >= 10.0)
					{
						break;
					}
					
					z = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y) + c;
					
					brightness += exp(-length(z));
				}
				
				
				gl_FragColor = vec4(brightness / brightnessScale * color, 1.0);
			}
		`,n={renderer:"gpu",shader:a,canvasWidth:1e3,canvasHeight:1e3,worldWidth:4,worldHeight:4,worldCenterX:0,worldCenterY:0,useDraggables:!0,draggablesMousemoveCallback:g,draggablesTouchmoveCallback:g,useFullscreen:!0,useFullscreenButton:!0,enterFullscreenButtonIconPath:"/graphics/general-icons/enter-fullscreen.png",exitFullscreenButtonIconPath:"/graphics/general-icons/exit-fullscreen.png"},a={renderer:"gpu",shader:a,canvasWidth:100,canvasHeight:100};let t=new Wilson($("#output-canvas-1"),n);t.render.initUniforms(["a","b","brightnessScale"]);t.draggables.add(0,1);let i=new Wilson($("#hidden-canvas-1"),a),o=(i.render.initUniforms(["a","b","brightnessScale"]),t.canvas.parentNode.parentNode.style.setProperty("margin-bottom",0,"important"),i.canvas.parentNode.parentNode.style.setProperty("margin-top",0,"important"),0),s=1,e=1e3,l=-1,r=$("#resolution-1-input");function g(activeDraggable,x,y,event){o=x,s=y,window.requestAnimationFrame(u)}function u(timestamp){var r=timestamp-l;if(l=timestamp,0!=r){i.gl.uniform1f(i.uniforms.a,o),i.gl.uniform1f(i.uniforms.b,s),i.gl.uniform1f(i.uniforms.brightnessScale,20),i.render.drawFrame();var a=i.render.getPixelData(),n=new Array(1e4);for(let e=0;e<1e4;e++)n[e]=a[4*e]+a[4*e+1]+a[4*e+2];n.sort((a,b)=>a-b);r=n[Math.floor(9800)]/255*18,r=Math.max(r,.1);t.gl.uniform1f(t.uniforms.a,o),t.gl.uniform1f(t.uniforms.b,s),t.gl.uniform1f(t.uniforms.brightnessScale,r),t.render.drawFrame()}}r.addEventListener("input",()=>{e=parseInt(r.value||1e3),t.changeCanvasSize(e,e)}),$("#download-1-button").addEventListener("click",()=>{t.downloadFrame("a-julia-set.png")}),t.changeCanvasSize(e,e),window.requestAnimationFrame(u)}{n=`
			precision highp float;
			
			varying vec2 uv;
			
			uniform float aspectRatio;
			
			uniform float a;
			uniform float b;
			uniform float brightnessScale;
			
			
			
			void main(void)
			{
				vec2 z;
				
				if (aspectRatio >= 1.0)
				{
					z = vec2(uv.x * aspectRatio * 2.0, uv.y * 2.0);
				}
				
				else
				{
					z = vec2(uv.x * 2.0, uv.y / aspectRatio * 2.0);
				}
				
				vec3 color = normalize(vec3(abs(z.x + z.y) / 2.0, abs(z.x) / 2.0, abs(z.y) / 2.0) + .1 / length(z) * vec3(1.0, 1.0, 1.0));
				float brightness = exp(-length(z));
				
				
				
				vec2 c = vec2(a, b);
				
				for (int iteration = 0; iteration < 100; iteration++)
				{
					if (iteration == 99)
					{
						gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
						return;
					}
					
					if (length(z) >= 10.0)
					{
						break;
					}
					
					z = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y) + c;
					
					brightness += exp(-length(z));
				}
				
				
				gl_FragColor = vec4(brightness / brightnessScale * color, 1.0);
			}
		`,a={renderer:"gpu",shader:n,canvasWidth:1e3,canvasHeight:1e3,worldWidth:4,worldHeight:4,worldCenterX:0,worldCenterY:0,useDraggables:!0,draggablesMousemoveCallback:g,draggablesTouchmoveCallback:g,useFullscreen:!0,trueFullscreen:!0,useFullscreenButton:!0,enterFullscreenButtonIconPath:"/graphics/general-icons/enter-fullscreen.png",exitFullscreenButtonIconPath:"/graphics/general-icons/exit-fullscreen.png",switchFullscreenCallback:d},n={renderer:"gpu",shader:n,canvasWidth:100,canvasHeight:100};let t=new Wilson($("#output-canvas-2"),a);t.render.initUniforms(["aspectRatio","a","b","brightnessScale"]);t.draggables.add(0,1);let i=new Wilson($("#hidden-canvas-2"),n),o=(i.render.initUniforms(["aspectRatio","a","b","brightnessScale"]),t.canvas.parentNode.parentNode.style.setProperty("margin-bottom",0,"important"),i.canvas.parentNode.parentNode.style.setProperty("margin-top",0,"important"),1),s=0,l=1,e=1e3,c=-1,r=$("#resolution-2-input");function g(activeDraggable,x,y,event){s=x,l=y,window.requestAnimationFrame(u)}function u(timestamp){var r=timestamp-c;if(c=timestamp,0!=r){i.gl.uniform1f(i.uniforms.a,s),i.gl.uniform1f(i.uniforms.b,l),i.gl.uniform1f(i.uniforms.brightnessScale,20),i.render.drawFrame();var a=i.render.getPixelData(),n=new Array(1e4);for(let e=0;e<1e4;e++)n[e]=a[4*e]+a[4*e+1]+a[4*e+2];n.sort((a,b)=>a-b);r=n[Math.floor(9800)]/255*18,r=Math.max(r,.1);t.gl.uniform1f(t.uniforms.aspectRatio,o),t.gl.uniform1f(t.uniforms.a,s),t.gl.uniform1f(t.uniforms.b,l),t.gl.uniform1f(t.uniforms.brightnessScale,r),t.render.drawFrame()}}function d(){t.fullscreen.currentlyFullscreen?1<=(o=window.innerWidth/window.innerHeight)?(t.changeCanvasSize(e,Math.floor(e/o)),t.worldWidth=4*o,t.worldHeight=4):(t.changeCanvasSize(Math.floor(e*o),e),t.worldWidth=4,t.worldHeight=4/o):(o=1,t.changeCanvasSize(e,e),t.worldWidth=4,t.worldHeight=4),window.requestAnimationFrame(u)}r.addEventListener("input",()=>{e=parseInt(r.value||1e3),t.changeCanvasSize(e,e)}),$("#download-2-button").addEventListener("click",()=>{t.downloadFrame("a-julia-set.png")}),t.gl.uniform1f(t.uniforms.aspectRatio,1),i.gl.uniform1f(i.uniforms.aspectRatio,1),window.requestAnimationFrame(u),addTemporaryListener({object:window,event:"resize",callback:d})}showPage()}();