!function(){"use strict";let t=Page.element.querySelectorAll("pre code");for(let e=0;e<t.length;e++)t[e].classList.add("highlightable");hljs.highlightAll();{let t="\n\t\t\tprecision highp float;\n\t\t\t\n\t\t\tvarying vec2 uv;\n\t\t\t\n\t\t\tuniform float aspect_ratio;\n\t\t\t\n\t\t\tuniform float world_center_x;\n\t\t\tuniform float world_center_y;\n\t\t\t\n\t\t\tuniform float a;\n\t\t\tuniform float b;\n\t\t\tuniform float brightness_scale;\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tvoid main(void)\n\t\t\t{\n\t\t\t\tvec2 z;\n\t\t\t\t\n\t\t\t\tif (aspect_ratio >= 1.0)\n\t\t\t\t{\n\t\t\t\t\tz = vec2(uv.x * aspect_ratio * 2.0 + world_center_x, uv.y * 2.0 + world_center_y);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tz = vec2(uv.x * 2.0 + world_center_x, uv.y / aspect_ratio * 2.0 + world_center_y);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvec3 color = normalize(vec3(abs(z.x + z.y) / 2.0, abs(z.x) / 2.0, abs(z.y) / 2.0) + .1 / length(z) * vec3(1.0, 1.0, 1.0));\n\t\t\t\tfloat brightness = exp(-length(z));\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tvec2 c = vec2(a, b);\n\t\t\t\t\n\t\t\t\tfor (int iteration = 0; iteration < 100; iteration++)\n\t\t\t\t{\n\t\t\t\t\tif (iteration == 99)\n\t\t\t\t\t{\n\t\t\t\t\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (length(z) >= 10.0)\n\t\t\t\t\t{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tz = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y) + c;\n\t\t\t\t\t\n\t\t\t\t\tbrightness += exp(-length(z));\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tgl_FragColor = vec4(brightness / brightness_scale * color, 1.0);\n\t\t\t}\n\t\t",a={renderer:"gpu",shader:t,canvas_width:1e3,canvas_height:1e3,world_width:4,world_height:4,world_center_x:0,world_center_y:0,use_draggables:!0,draggables_mousemove_callback:e,draggables_touchmove_callback:e,use_fullscreen:!0,true_fullscreen:!0,use_fullscreen_button:!0,enter_fullscreen_button_icon_path:"/graphics/general-icons/enter-fullscreen.png",exit_fullscreen_button_icon_path:"/graphics/general-icons/exit-fullscreen.png",switch_fullscreen_callback:o,mousedrag_callback:n,touchmove_callback:n},l={renderer:"gpu",shader:t,canvas_width:100,canvas_height:100},i=new Wilson(Page.element.querySelector("#output-canvas-1"),a);i.render.init_uniforms(["aspect_ratio","world_center_x","world_center_y","a","b","brightness_scale"]);i.draggables.add(0,1);let _=new Wilson(Page.element.querySelector("#hidden-canvas-1"),l);_.render.init_uniforms(["aspect_ratio","world_center_x","world_center_y","a","b","brightness_scale"]),i.canvas.parentNode.parentNode.style.setProperty("margin-bottom",0,"important"),_.canvas.parentNode.parentNode.style.setProperty("margin-top",0,"important");let c=1,s=0,d=1,u=1e3,w=100,h=-1,f=Page.element.querySelector("#resolution-1-input");function e(t,e,n,o){s=e,d=n,window.requestAnimationFrame(r)}function n(t,e,n,o,a){i.world_center_x-=n,i.world_center_y-=o,i.world_center_x=Math.min(Math.max(i.world_center_x,-2),2),i.world_center_y=Math.min(Math.max(i.world_center_y,-2),2),window.requestAnimationFrame(r),i.draggables.recalculate_locations()}function r(t){let e=t-h;if(h=t,0===e)return;_.gl.uniform1f(_.uniforms.world_center_x,i.world_center_x),_.gl.uniform1f(_.uniforms.world_center_y,i.world_center_y),_.gl.uniform1f(_.uniforms.a,s),_.gl.uniform1f(_.uniforms.b,d),_.gl.uniform1f(_.uniforms.brightness_scale,20),_.render.draw_frame();let n=_.render.get_pixel_data(),r=new Array(w*w);for(let t=0;t<w*w;t++)r[t]=n[4*t]+n[4*t+1]+n[4*t+2];r.sort((t,e)=>t-e);let o=r[Math.floor(w*w*.98)]/255*18;o=Math.max(o,.1),i.gl.uniform1f(i.uniforms.aspect_ratio,c),i.gl.uniform1f(i.uniforms.world_center_x,i.world_center_x),i.gl.uniform1f(i.uniforms.world_center_y,i.world_center_y),i.gl.uniform1f(i.uniforms.a,s),i.gl.uniform1f(i.uniforms.b,d),i.gl.uniform1f(i.uniforms.brightness_scale,o),i.render.draw_frame()}function o(){i.fullscreen.currently_fullscreen?(c=window.innerWidth/window.innerHeight)>=1?(i.change_canvas_size(u,Math.floor(u/c)),i.world_width=4*c,i.world_height=4):(i.change_canvas_size(Math.floor(u*c),u),i.world_width=4,i.world_height=4/c):(c=1,i.change_canvas_size(u,u),i.world_width=4,i.world_height=4),window.requestAnimationFrame(r)}f.addEventListener("input",()=>{u=parseInt(f.value||1e3),i.change_canvas_size(u,u)}),Page.element.querySelector("#download-1-button").addEventListener("click",()=>{i.download_frame("a-julia-set.png")}),i.gl.uniform1f(i.uniforms.aspect_ratio,1),_.gl.uniform1f(_.uniforms.aspect_ratio,1),window.requestAnimationFrame(r),window.addEventListener("resize",o),Page.temporary_handlers.resize.push(o)}{let t="\n\t\t\tprecision highp float;\n\t\t\t\n\t\t\tvarying vec2 uv;\n\t\t\t\n\t\t\tuniform float aspect_ratio;\n\t\t\t\n\t\t\tuniform float world_center_x;\n\t\t\tuniform float world_center_y;\n\t\t\tuniform float world_size;\n\t\t\t\n\t\t\tuniform float a;\n\t\t\tuniform float b;\n\t\t\tuniform float brightness_scale;\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tvoid main(void)\n\t\t\t{\n\t\t\t\tvec2 z;\n\t\t\t\t\n\t\t\t\tif (aspect_ratio >= 1.0)\n\t\t\t\t{\n\t\t\t\t\tz = vec2(uv.x * aspect_ratio * world_size + world_center_x, uv.y * world_size + world_center_y);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tz = vec2(uv.x * world_size + world_center_x, uv.y / aspect_ratio * world_size + world_center_y);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvec3 color = normalize(vec3(abs(z.x + z.y) / 2.0, abs(z.x) / 2.0, abs(z.y) / 2.0) + .1 / length(z) * vec3(1.0, 1.0, 1.0));\n\t\t\t\tfloat brightness = exp(-length(z));\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tvec2 c = vec2(a, b);\n\t\t\t\t\n\t\t\t\tfor (int iteration = 0; iteration < 100; iteration++)\n\t\t\t\t{\n\t\t\t\t\tif (iteration == 99)\n\t\t\t\t\t{\n\t\t\t\t\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (length(z) >= 10.0)\n\t\t\t\t\t{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tz = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y) + c;\n\t\t\t\t\t\n\t\t\t\t\tbrightness += exp(-length(z));\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tgl_FragColor = vec4(brightness / brightness_scale * color, 1.0);\n\t\t\t}\n\t\t",_={renderer:"gpu",shader:t,canvas_width:1e3,canvas_height:1e3,world_width:4,world_height:4,world_center_x:0,world_center_y:0,use_draggables:!0,draggables_mousemove_callback:e,draggables_touchmove_callback:e,use_fullscreen:!0,true_fullscreen:!0,use_fullscreen_button:!0,enter_fullscreen_button_icon_path:"/graphics/general-icons/enter-fullscreen.png",exit_fullscreen_button_icon_path:"/graphics/general-icons/exit-fullscreen.png",switch_fullscreen_callback:o,mousedrag_callback:n,touchmove_callback:n,wheel_callback:a,pinch_callback:l},c={renderer:"gpu",shader:t,canvas_width:100,canvas_height:100},s=new Wilson(Page.element.querySelector("#output-canvas-2"),_);s.render.init_uniforms(["aspect_ratio","world_center_x","world_center_y","world_size","a","b","brightness_scale"]);s.draggables.add(0,1);let d=new Wilson(Page.element.querySelector("#hidden-canvas-2"),c);d.render.init_uniforms(["aspect_ratio","world_center_x","world_center_y","world_size","a","b","brightness_scale"]),s.canvas.parentNode.parentNode.style.setProperty("margin-bottom",0,"important"),d.canvas.parentNode.parentNode.style.setProperty("margin-top",0,"important");let u=1,w=0,h=0,f=1,g=1e3,m=100,p=0,v=0,b=-1,y=Page.element.querySelector("#resolution-2-input");function e(t,e,n,o){h=e,f=n,window.requestAnimationFrame(r)}function n(t,e,n,o,a){s.world_center_x-=n,s.world_center_y-=o,s.world_center_x=Math.min(Math.max(s.world_center_x,-2),2),s.world_center_y=Math.min(Math.max(s.world_center_y,-2),2),window.requestAnimationFrame(r),s.draggables.recalculate_locations()}function a(t,e,n,r){p=t,v=e,w+=n/100,w=Math.min(w,1),i()}function l(t,e,n,r){w-=u>=1?n/s.world_width*10:n/s.world_height*10,w=Math.min(w,1),p=t,v=e,i()}function i(){if(u>=1){let t=s.input.get_zoomed_world_center(p,v,4*Math.pow(2,w)*u,4*Math.pow(2,w));s.world_width=4*Math.pow(2,w)*u,s.world_height=4*Math.pow(2,w),s.world_center_x=t[0],s.world_center_y=t[1]}else{let t=s.input.get_zoomed_world_center(p,v,4*Math.pow(2,w),4*Math.pow(2,w)/u);s.world_width=4*Math.pow(2,w),s.world_height=4*Math.pow(2,w)/u,s.world_center_x=t[0],s.world_center_y=t[1]}window.requestAnimationFrame(r),s.draggables.recalculate_locations()}function r(t){let e=t-b;if(b=t,0===e)return;d.gl.uniform1f(d.uniforms.world_center_x,s.world_center_x),d.gl.uniform1f(d.uniforms.world_center_y,s.world_center_y),d.gl.uniform1f(d.uniforms.world_size,Math.min(s.world_height,s.world_width)/2),d.gl.uniform1f(d.uniforms.a,h),d.gl.uniform1f(d.uniforms.b,f),d.gl.uniform1f(d.uniforms.brightness_scale,20),d.render.draw_frame();let n=d.render.get_pixel_data(),r=new Array(m*m);for(let t=0;t<m*m;t++)r[t]=n[4*t]+n[4*t+1]+n[4*t+2];r.sort((t,e)=>t-e);let o=r[Math.floor(m*m*.98)]/255*18;o=Math.max(o,.1),s.gl.uniform1f(s.uniforms.aspect_ratio,u),s.gl.uniform1f(s.uniforms.world_center_x,s.world_center_x),s.gl.uniform1f(s.uniforms.world_center_y,s.world_center_y),s.gl.uniform1f(s.uniforms.world_size,Math.min(s.world_height,s.world_width)/2),s.gl.uniform1f(s.uniforms.a,h),s.gl.uniform1f(s.uniforms.b,f),s.gl.uniform1f(s.uniforms.brightness_scale,o),s.render.draw_frame()}function o(){s.fullscreen.currently_fullscreen?(u=window.innerWidth/window.innerHeight)>=1?(s.change_canvas_size(g,Math.floor(g/u)),s.world_width=4*Math.pow(2,w)*u,s.world_height=4*Math.pow(2,w)):(s.change_canvas_size(Math.floor(g*u),g),s.world_width=4*Math.pow(2,w),s.world_height=4*Math.pow(2,w)/u):(u=1,s.change_canvas_size(g,g),s.world_width=4*Math.pow(2,w),s.world_height=4*Math.pow(2,w)),window.requestAnimationFrame(r)}y.addEventListener("input",()=>{g=parseInt(y.value||1e3),s.change_canvas_size(g,g)}),Page.element.querySelector("#download-2-button").addEventListener("click",()=>{s.download_frame("a-julia-set.png")}),s.gl.uniform1f(s.uniforms.aspect_ratio,1),d.gl.uniform1f(d.uniforms.aspect_ratio,1),window.requestAnimationFrame(r),window.addEventListener("resize",o),Page.temporary_handlers.resize.push(o)}{let t="\n\t\t\tprecision highp float;\n\t\t\t\n\t\t\tvarying vec2 uv;\n\t\t\t\n\t\t\tuniform float aspect_ratio;\n\t\t\t\n\t\t\tuniform float world_center_x;\n\t\t\tuniform float world_center_y;\n\t\t\tuniform float world_size;\n\t\t\t\n\t\t\tuniform float a;\n\t\t\tuniform float b;\n\t\t\tuniform float brightness_scale;\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tvoid main(void)\n\t\t\t{\n\t\t\t\tvec2 z;\n\t\t\t\t\n\t\t\t\tif (aspect_ratio >= 1.0)\n\t\t\t\t{\n\t\t\t\t\tz = vec2(uv.x * aspect_ratio * world_size + world_center_x, uv.y * world_size + world_center_y);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tz = vec2(uv.x * world_size + world_center_x, uv.y / aspect_ratio * world_size + world_center_y);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvec3 color = normalize(vec3(abs(z.x + z.y) / 2.0, abs(z.x) / 2.0, abs(z.y) / 2.0) + .1 / length(z) * vec3(1.0, 1.0, 1.0));\n\t\t\t\tfloat brightness = exp(-length(z));\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tvec2 c = vec2(a, b);\n\t\t\t\t\n\t\t\t\tfor (int iteration = 0; iteration < 100; iteration++)\n\t\t\t\t{\n\t\t\t\t\tif (iteration == 99)\n\t\t\t\t\t{\n\t\t\t\t\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (length(z) >= 10.0)\n\t\t\t\t\t{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tz = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y) + c;\n\t\t\t\t\t\n\t\t\t\t\tbrightness += exp(-length(z));\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tgl_FragColor = vec4(brightness / brightness_scale * color, 1.0);\n\t\t\t}\n\t\t",s={renderer:"gpu",shader:t,canvas_width:1e3,canvas_height:1e3,world_width:4,world_height:4,world_center_x:0,world_center_y:0,use_draggables:!0,draggables_mousemove_callback:e,draggables_touchmove_callback:e,use_fullscreen:!0,true_fullscreen:!0,use_fullscreen_button:!0,enter_fullscreen_button_icon_path:"/graphics/general-icons/enter-fullscreen.png",exit_fullscreen_button_icon_path:"/graphics/general-icons/exit-fullscreen.png",switch_fullscreen_callback:o,mousedown_callback:_,touchstart_callback:_,mousedrag_callback:n,touchmove_callback:n,mouseup_callback:c,touchend_callback:c,wheel_callback:a,pinch_callback:l},d={renderer:"gpu",shader:t,canvas_width:100,canvas_height:100},u=new Wilson(Page.element.querySelector("#output-canvas-3"),s);u.render.init_uniforms(["aspect_ratio","world_center_x","world_center_y","world_size","a","b","brightness_scale"]);u.draggables.add(0,1);let w=new Wilson(Page.element.querySelector("#hidden-canvas-3"),d);w.render.init_uniforms(["aspect_ratio","world_center_x","world_center_y","world_size","a","b","brightness_scale"]),u.canvas.parentNode.parentNode.style.setProperty("margin-bottom",0,"important"),w.canvas.parentNode.parentNode.style.setProperty("margin-top",0,"important");let h=1,f=0,g=0,m=1,p=1e3,v=100,b=0,y=0,z=0,x=0,M=0,q=0,k=0,P=0;const F=.96,A=.005,S=5e-4,N=.93,L=.01,E=.001;let W=-1,j=Page.element.querySelector("#resolution-3-input");function e(t,e,n,o){g=e,m=n,window.requestAnimationFrame(r)}function _(t,e,n){q=0,k=0,P=0,z=0,x=0,M=0}function n(t,e,n,o,a){u.world_center_x-=n,u.world_center_y-=o,z=-n,x=-o,u.world_center_x=Math.min(Math.max(u.world_center_x,-2),2),u.world_center_y=Math.min(Math.max(u.world_center_y,-2),2),window.requestAnimationFrame(r),u.draggables.recalculate_locations()}function c(t,e,n){Math.sqrt(z*z+x*x)>=A*Math.min(u.world_width,u.world_height)&&(q=z,k=x),Math.abs(M)>=L&&(P=M),window.requestAnimationFrame(r)}function a(t,e,n,r){b=t,y=e,Math.abs(n/100)<.3?(f+=n/100,f=Math.min(f,1)):P+=.05*Math.sign(n),i()}function l(t,e,n,r){h>=1?(f-=n/u.world_width*10,M=-n/u.world_width*10):(f-=n/u.world_height*10,M=-n/u.world_height*10),f=Math.min(f,1),b=t,y=e,i()}function i(){if(h>=1){let t=u.input.get_zoomed_world_center(b,y,4*Math.pow(2,f)*h,4*Math.pow(2,f));u.world_width=4*Math.pow(2,f)*h,u.world_height=4*Math.pow(2,f),u.world_center_x=t[0],u.world_center_y=t[1]}else{let t=u.input.get_zoomed_world_center(b,y,4*Math.pow(2,f),4*Math.pow(2,f)/h);u.world_width=4*Math.pow(2,f),u.world_height=4*Math.pow(2,f)/h,u.world_center_x=t[0],u.world_center_y=t[1]}window.requestAnimationFrame(r),u.draggables.recalculate_locations()}function r(t){let e=t-W;if(W=t,0===e)return;w.gl.uniform1f(w.uniforms.world_center_x,u.world_center_x),w.gl.uniform1f(w.uniforms.world_center_y,u.world_center_y),w.gl.uniform1f(w.uniforms.world_size,Math.min(u.world_height,u.world_width)/2),w.gl.uniform1f(w.uniforms.a,g),w.gl.uniform1f(w.uniforms.b,m),w.gl.uniform1f(w.uniforms.brightness_scale,20),w.render.draw_frame();let n=w.render.get_pixel_data(),o=new Array(v*v);for(let t=0;t<v*v;t++)o[t]=n[4*t]+n[4*t+1]+n[4*t+2];o.sort((t,e)=>t-e);let a=o[Math.floor(v*v*.98)]/255*18;a=Math.max(a,.1),u.gl.uniform1f(u.uniforms.aspect_ratio,h),u.gl.uniform1f(u.uniforms.world_center_x,u.world_center_x),u.gl.uniform1f(u.uniforms.world_center_y,u.world_center_y),u.gl.uniform1f(u.uniforms.world_size,Math.min(u.world_height,u.world_width)/2),u.gl.uniform1f(u.uniforms.a,g),u.gl.uniform1f(u.uniforms.b,m),u.gl.uniform1f(u.uniforms.brightness_scale,a),u.render.draw_frame(),0===q&&0===k&&0===P||(u.world_center_x+=q,u.world_center_y+=k,u.world_center_x=Math.min(Math.max(u.world_center_x,-2),2),u.world_center_y=Math.min(Math.max(u.world_center_y,-2),2),q*=F,k*=F,Math.sqrt(q*q+k*k)<S*Math.min(u.world_width,u.world_height)&&(q=0,k=0),f+=P,f=Math.min(f,1),i(),P*=N,Math.abs(P)<E&&(P=0),window.requestAnimationFrame(r),u.draggables.recalculate_locations())}function o(){u.fullscreen.currently_fullscreen?(h=window.innerWidth/window.innerHeight)>=1?(u.change_canvas_size(p,Math.floor(p/h)),u.world_width=4*Math.pow(2,f)*h,u.world_height=4*Math.pow(2,f)):(u.change_canvas_size(Math.floor(p*h),p),u.world_width=4*Math.pow(2,f),u.world_height=4*Math.pow(2,f)/h):(h=1,u.change_canvas_size(p,p),u.world_width=4*Math.pow(2,f),u.world_height=4*Math.pow(2,f)),window.requestAnimationFrame(r)}j.addEventListener("input",()=>{p=parseInt(j.value||1e3),u.change_canvas_size(p,p)}),Page.element.querySelector("#download-3-button").addEventListener("click",()=>{u.download_frame("a-julia-set.png")}),u.gl.uniform1f(u.uniforms.aspect_ratio,1),w.gl.uniform1f(w.uniforms.aspect_ratio,1),window.requestAnimationFrame(r),window.addEventListener("resize",o),Page.temporary_handlers.resize.push(o)}Page.element.querySelector("#previous-part-button").addEventListener("click",()=>{Page.Navigation.redirect("/projects/wilson/guide/5/fullscreen.html")}),Page.element.querySelector("#homepage-button").addEventListener("click",()=>{Page.Navigation.redirect("/projects/wilson/wilson.html")}),Page.show()}();