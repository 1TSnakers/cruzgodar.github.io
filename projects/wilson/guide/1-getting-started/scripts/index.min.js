import{showPage}from"/scripts/src/load-page.min.mjs";import{$,$$}from"/scripts/src/main.min.mjs";import{Wilson}from"/scripts/wilson.min.mjs";!function(){"use strict";var elements=$$("pre code");for(let i=0;i<elements.length;i++)elements[i].classList.add("highlightable");hljs.highlightAll();{var options={renderer:"cpu",canvasWidth:500,canvasHeight:500,worldWidth:4,worldHeight:4,worldCenterX:0,worldCenterY:0};let wilson=new Wilson($("#output-canvas-1"),options),aInputElement=$("#a-1-input"),bInputElement=$("#b-1-input"),resolutionInputElement=$("#resolution-1-input");function generateJuliaSet(a,b,resolution){var brightnesses=new Array(resolution*resolution);let maxBrightness=0;for(let i=0;i<resolution;i++)for(let j=0;j<resolution;j++){var worldCoordinates=wilson.utils.interpolate.canvasToWorld(i,j);let x=worldCoordinates[0],y=worldCoordinates[1],brightness=Math.exp(-Math.sqrt(x*x+y*y)),k=0;for(k=0;k<100;k++){var temp=x*x-y*y+a;if(y=2*x*y+b,x=temp,brightness+=Math.exp(-Math.sqrt(x*x+y*y)),4<x*x+y*y)break}100===k?brightnesses[resolution*i+j]=0:(brightnesses[resolution*i+j]=brightness)>maxBrightness&&(maxBrightness=brightness)}var imageData=new Uint8ClampedArray(resolution*resolution*4);for(let i=0;i<resolution*resolution;i++)imageData[4*i]=0,imageData[4*i+1]=1.5*brightnesses[i]/maxBrightness*255,imageData[4*i+2]=1.5*brightnesses[i]/maxBrightness*255,imageData[4*i+3]=255;return imageData}$("#generate-1-button").addEventListener("click",()=>{let a=parseFloat(aInputElement.value||0),b=parseFloat(bInputElement.value||1),resolution=parseInt(resolutionInputElement.value||500);wilson.changeCanvasSize(resolution,resolution),window.requestAnimationFrame(()=>wilson.render.drawFrame(generateJuliaSet(a,b,resolution)))})}{let options={renderer:"hybrid",canvasWidth:500,canvasHeight:500,worldWidth:4,worldHeight:4,worldCenterX:0,worldCenterY:0},wilson=new Wilson($("#output-canvas-2"),options),aInputElement=$("#a-2-input"),bInputElement=$("#b-2-input"),resolutionInputElement=$("#resolution-2-input"),generateButtonElement=$("#generate-2-button");function generateJuliaSet(a,b,resolution){var brightnesses=new Array(resolution*resolution);let maxBrightness=0;for(let i=0;i<resolution;i++)for(let j=0;j<resolution;j++){var worldCoordinates=wilson.utils.interpolate.canvasToWorld(i,j);let x=worldCoordinates[0],y=worldCoordinates[1],brightness=Math.exp(-Math.sqrt(x*x+y*y)),k=0;for(k=0;k<100;k++){var temp=x*x-y*y+a;if(y=2*x*y+b,x=temp,brightness+=Math.exp(-Math.sqrt(x*x+y*y)),4<x*x+y*y)break}100===k?brightnesses[resolution*i+j]=0:(brightnesses[resolution*i+j]=brightness)>maxBrightness&&(maxBrightness=brightness)}var imageData=new Uint8ClampedArray(resolution*resolution*4);for(let i=0;i<resolution*resolution;i++)imageData[4*i]=0,imageData[4*i+1]=1.5*brightnesses[i]/maxBrightness*255,imageData[4*i+2]=1.5*brightnesses[i]/maxBrightness*255,imageData[4*i+3]=255;return imageData}generateButtonElement.addEventListener("click",()=>{let a=parseFloat(aInputElement.value||0),b=parseFloat(bInputElement.value||1),resolution=parseInt(resolutionInputElement.value||500);wilson.changeCanvasSize(resolution,resolution),window.requestAnimationFrame(()=>wilson.render.drawFrame(generateJuliaSet(a,b,resolution)))}),$("#download-2-button").addEventListener("click",()=>{wilson.downloadFrame("a-julia-set.png")})}showPage()}();