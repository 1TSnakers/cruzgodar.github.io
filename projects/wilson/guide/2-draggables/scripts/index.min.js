import{showPage}from"/scripts/src/load-page.min.mjs";import{$,$$}from"/scripts/src/main.min.mjs";import{Wilson}from"/scripts/wilson.min.mjs";!function(){"use strict";var e=$$("pre code");for(let w=0;w<e.length;w++)e[w].classList.add("highlightable");hljs.highlightAll();var t={renderer:"hybrid",canvasWidth:1e3,canvasHeight:1e3,worldWidth:4,worldHeight:4,worldCenterX:0,worldCenterY:0,useDraggables:!0,draggablesMousedownCallback:c,draggablesMousemoveCallback:m,draggablesMouseupCallback:h,draggablesTouchstartCallback:c,draggablesTouchmoveCallback:m,draggablesTouchendCallback:h};let g=new Wilson($("#output-canvas"),t);g.draggables.add(0,1);let r=1e3,o=200,n=0,i=1,l=200,s=0,u=-1,d=$("#resolution-input");function c(activeDraggable,x,y,event){g.changeCanvasSize(o,o),n=x,i=y,l=o,window.requestAnimationFrame(v)}function m(activeDraggable,x,y,event){n=x,i=y,l=o,window.requestAnimationFrame(v)}function h(activeDraggable,x,y,event){g.changeCanvasSize(r,r),n=x,i=y,l=r,window.requestAnimationFrame(v)}function v(timestamp){var e=timestamp-u;u=timestamp,0==e&&s===l||(s=l,g.render.drawFrame(function(a,b,resolution){var i=new Array(resolution*resolution);let l=0;for(let d=0;d<resolution;d++)for(let n=0;n<resolution;n++){var s=g.utils.interpolate.canvasToWorld(d,n);let e=s[0],t=s[1],r=Math.exp(-Math.sqrt(e*e+t*t)),o=0;for(o=0;o<100;o++){var u=e*e-t*t+a;if(t=2*e*t+b,e=u,r+=Math.exp(-Math.sqrt(e*e+t*t)),4<e*e+t*t)break}100===o?i[resolution*d+n]=0:(i[resolution*d+n]=r)>l&&(l=r)}var e=new Uint8ClampedArray(resolution*resolution*4);for(let t=0;t<resolution*resolution;t++)e[4*t]=0,e[4*t+1]=1.5*i[t]/l*255,e[4*t+2]=1.5*i[t]/l*255,e[4*t+3]=255;return e}(n,i,l)))}d.addEventListener("input",()=>{r=parseInt(d.value||1e3),o=Math.floor(r/5)}),$("#download-button").addEventListener("click",()=>{g.downloadFrame("a-julia-set.png")}),g.changeCanvasSize(o,o),window.requestAnimationFrame(v),showPage()}();