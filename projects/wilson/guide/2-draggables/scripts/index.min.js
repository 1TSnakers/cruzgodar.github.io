import{showPage}from"/scripts/src/load-page.min.mjs";import{$,$$}from"/scripts/src/main.min.mjs";import{Wilson}from"/scripts/wilson.min.mjs";!function(){"use strict";var e=$$("pre code");for(let a=0;a<e.length;a++)e[a].classList.add("highlightable");hljs.highlightAll();var a={renderer:"hybrid",canvasWidth:1e3,canvasHeight:1e3,worldWidth:4,worldHeight:4,worldCenterX:0,worldCenterY:0,useDraggables:!0,draggablesMousedownCallback:c,draggablesMousemoveCallback:g,draggablesMouseupCallback:u,draggablesTouchstartCallback:c,draggablesTouchmoveCallback:g,draggablesTouchendCallback:u};let h=new Wilson($("#output-canvas"),a);h.draggables.add(0,1);let n=1e3,o=200,l=0,s=1,i=200,r=0,t=-1,d=$("#resolution-input");function c(a,e,r,t){h.changeCanvasSize(o,o),l=e,s=r,i=o,window.requestAnimationFrame(m)}function g(a,e,r,t){l=e,s=r,i=o,window.requestAnimationFrame(m)}function u(a,e,r,t){h.changeCanvasSize(n,n),l=e,s=r,i=n,window.requestAnimationFrame(m)}function m(a){var e=a-t;t=a,0==e&&r===i||(r=i,h.render.drawFrame(function(l,s,i){var d=new Array(i*i);let c=0;for(let o=0;o<i;o++)for(let n=0;n<i;n++){var g=h.utils.interpolate.canvasToWorld(o,n);let a=g[0],e=g[1],r=Math.exp(-Math.sqrt(a*a+e*e)),t=0;for(t=0;t<100;t++){var u=a*a-e*e+l;if(e=2*a*e+s,a=u,r+=Math.exp(-Math.sqrt(a*a+e*e)),4<a*a+e*e)break}100===t?d[i*o+n]=0:(d[i*o+n]=r)>c&&(c=r)}var e=new Uint8ClampedArray(i*i*4);for(let a=0;a<i*i;a++)e[4*a]=0,e[4*a+1]=1.5*d[a]/c*255,e[4*a+2]=1.5*d[a]/c*255,e[4*a+3]=255;return e}(l,s,i)))}d.addEventListener("input",()=>{n=parseInt(d.value||1e3),o=Math.floor(n/5)}),$("#download-button").addEventListener("click",()=>{h.downloadFrame("a-julia-set.png")}),h.changeCanvasSize(o,o),window.requestAnimationFrame(m),showPage()}();