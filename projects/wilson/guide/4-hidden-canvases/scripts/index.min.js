!function(){"use strict";let e=Page.element.querySelectorAll("pre code");for(let r=0;r<e.length;r++)e[r].classList.add("highlightable");hljs.highlightAll();let t=`
  precision highp float;
  
  varying vec2 uv;
  
  uniform float a;
  uniform float b;
  uniform float brightnessScale;
  
  
  
  void main(void)
  {
   vec2 z = vec2(uv.x * 2.0, uv.y * 2.0);
   vec3 color = normalize(vec3(abs(z.x + z.y) / 2.0, abs(z.x) / 2.0, abs(z.y) / 2.0) + .1 / length(z) * vec3(1.0, 1.0, 1.0));
   float brightness = exp(-length(z));
   
   
   
   vec2 c = vec2(a, b);
   
   for (int iteration = 0; iteration < 100; iteration++)
   {
    if (iteration == 99)
    {
     gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
     return;
    }
    
    if (length(z) >= 10.0)
    {
     break;
    }
    
    z = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y) + c;
    
    brightness += exp(-length(z));
   }
   
   
   gl_FragColor = vec4(brightness / brightnessScale * color, 1.0);
  }
 `,n=new Wilson(Page.element.querySelector("#output-canvas"),{renderer:"gpu",shader:t,canvasWidth:1e3,canvasHeight:1e3,worldWidth:4,worldHeight:4,worldCenterX:0,worldCenterY:0,useDraggables:!0,draggablesMousemoveCallback:g,draggablesTouchmoveCallback:g});n.render.initUniforms(["a","b","brightnessScale"]),n.draggables.add(0,1);let a=new Wilson(Page.element.querySelector("#hidden-canvas"),{renderer:"gpu",shader:t,canvasWidth:100,canvasHeight:100});a.render.initUniforms(["a","b","brightnessScale"]),n.canvas.parentNode.parentNode.style.setProperty("margin-bottom",0,"important"),a.canvas.parentNode.parentNode.style.setProperty("margin-top",0,"important");let i=0,o=1,l=1e3,s=-1,$=Page.element.querySelector("#resolution-input");$.addEventListener("input",()=>{l=parseInt($.value||1e3),n.changeCanvasSize(l,l)});function g(e,r,t,n){i=r,o=t,window.requestAnimationFrame(c)}function c(e){let r=e-s;if(s=e,0===r)return;a.gl.uniform1f(a.uniforms.a,i),a.gl.uniform1f(a.uniforms.b,o),a.gl.uniform1f(a.uniforms.brightnessScale,20),a.render.drawFrame();let t=a.render.getPixelData(),l=Array(1e4);for(let $=0;$<1e4;$++)l[$]=t[4*$]+t[4*$+1]+t[4*$+2];l.sort((e,r)=>e-r);let g=l[Math.floor(9800)]/255*18;g=Math.max(g,.1),n.gl.uniform1f(n.uniforms.a,i),n.gl.uniform1f(n.uniforms.b,o),n.gl.uniform1f(n.uniforms.brightnessScale,g),n.render.drawFrame()}Page.element.querySelector("#download-button").addEventListener("click",()=>{n.downloadFrame("a-julia-set.png")}),window.requestAnimationFrame(c),Page.show()}();