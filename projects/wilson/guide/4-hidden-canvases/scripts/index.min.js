!function(){"use strict";let e=$$("pre code");for(let r=0;r<e.length;r++)e[r].classList.add("highlightable");hljs.highlightAll();let n=`
  precision highp float;
  
  varying vec2 uv;
  
  uniform float a;
  uniform float b;
  uniform float brightnessScale;
  
  
  
  void main(void)
  {
   vec2 z = vec2(uv.x * 2.0, uv.y * 2.0);
   vec3 color = normalize(vec3(abs(z.x + z.y) / 2.0, abs(z.x) / 2.0, abs(z.y) / 2.0) + .1 / length(z) * vec3(1.0, 1.0, 1.0));
   float brightness = exp(-length(z));
   
   
   
   vec2 c = vec2(a, b);
   
   for (int iteration = 0; iteration < 100; iteration++)
   {
    if (iteration == 99)
    {
     gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
     return;
    }
    
    if (length(z) >= 10.0)
    {
     break;
    }
    
    z = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y) + c;
    
    brightness += exp(-length(z));
   }
   
   
   gl_FragColor = vec4(brightness / brightnessScale * color, 1.0);
  }
 `,a=new Wilson($("#output-canvas"),{renderer:"gpu",shader:n,canvasWidth:1e3,canvasHeight:1e3,worldWidth:4,worldHeight:4,worldCenterX:0,worldCenterY:0,useDraggables:!0,draggablesMousemoveCallback:c,draggablesTouchmoveCallback:c});a.render.initUniforms(["a","b","brightnessScale"]),a.draggables.add(0,1);let t=new Wilson($("#hidden-canvas"),{renderer:"gpu",shader:n,canvasWidth:100,canvasHeight:100});t.render.initUniforms(["a","b","brightnessScale"]),a.canvas.parentNode.parentNode.style.setProperty("margin-bottom",0,"important"),t.canvas.parentNode.parentNode.style.setProperty("margin-top",0,"important");let i=0,o=1,l=1e3,s=-1,g=$("#resolution-input");g.addEventListener("input",()=>{l=parseInt(g.value||1e3),a.changeCanvasSize(l,l)});function c(e,r,n,a){i=r,o=n,window.requestAnimationFrame(d)}function d(e){let r=e-s;if(s=e,0===r)return;t.gl.uniform1f(t.uniforms.a,i),t.gl.uniform1f(t.uniforms.b,o),t.gl.uniform1f(t.uniforms.brightnessScale,20),t.render.drawFrame();let n=t.render.getPixelData(),l=Array(1e4);for(let g=0;g<1e4;g++)l[g]=n[4*g]+n[4*g+1]+n[4*g+2];l.sort((e,r)=>e-r);let c=l[Math.floor(9800)]/255*18;c=Math.max(c,.1),a.gl.uniform1f(a.uniforms.a,i),a.gl.uniform1f(a.uniforms.b,o),a.gl.uniform1f(a.uniforms.brightnessScale,c),a.render.drawFrame()}$("#download-button").addEventListener("click",()=>{a.downloadFrame("a-julia-set.png")}),window.requestAnimationFrame(d),Page.show()}();