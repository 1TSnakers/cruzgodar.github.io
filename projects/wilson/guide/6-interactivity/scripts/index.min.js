import{showPage}from"/scripts/src/load-page.min.js";import{$,$$,addTemporaryListener}from"/scripts/src/main.min.js";import{Wilson}from"/scripts/wilson.min.js";!function(){"use strict";var e=$$("pre code");for(let r=0;r<e.length;r++)e[r].classList.add("highlightable");hljs.highlightAll();{var p=`
			precision highp float;
			
			varying vec2 uv;
			
			uniform float aspectRatio;
			
			uniform float worldCenterX;
			uniform float worldCenterY;
			
			uniform float a;
			uniform float b;
			uniform float brightnessScale;
			
			
			
			void main(void)
			{
				vec2 z;
				
				if (aspectRatio >= 1.0)
				{
					z = vec2(uv.x * aspectRatio * 2.0 + worldCenterX, uv.y * 2.0 + worldCenterY);
				}
				
				else
				{
					z = vec2(uv.x * 2.0 + worldCenterX, uv.y / aspectRatio * 2.0 + worldCenterY);
				}
				
				vec3 color = normalize(vec3(abs(z.x + z.y) / 2.0, abs(z.x) / 2.0, abs(z.y) / 2.0) + .1 / length(z) * vec3(1.0, 1.0, 1.0));
				float brightness = exp(-length(z));
				
				
				
				vec2 c = vec2(a, b);
				
				for (int iteration = 0; iteration < 100; iteration++)
				{
					if (iteration == 99)
					{
						gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
						return;
					}
					
					if (length(z) >= 10.0)
					{
						break;
					}
					
					z = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y) + c;
					
					brightness += exp(-length(z));
				}
				
				
				gl_FragColor = vec4(brightness / brightnessScale * color, 1.0);
			}
		`,v={renderer:"gpu",shader:p,canvasWidth:1e3,canvasHeight:1e3,worldWidth:4,worldHeight:4,worldCenterX:0,worldCenterY:0,useDraggables:!0,draggablesMousemoveCallback:C,draggablesTouchmoveCallback:C,useFullscreen:!0,trueFullscreen:!0,useFullscreenButton:!0,enterFullscreenButtonIconPath:"/graphics/general-icons/enter-fullscreen.png",exitFullscreenButtonIconPath:"/graphics/general-icons/exit-fullscreen.png",switchFullscreenCallback:M,mousedragCallback:b,touchmoveCallback:b},p={renderer:"gpu",shader:p,canvasWidth:100,canvasHeight:100};let o=new Wilson($("#output-canvas-1"),v);o.render.initUniforms(["aspectRatio","worldCenterX","worldCenterY","a","b","brightnessScale"]);o.draggables.add(0,1);let a=new Wilson($("#hidden-canvas-1"),p),i=(a.render.initUniforms(["aspectRatio","worldCenterX","worldCenterY","a","b","brightnessScale"]),o.canvas.parentNode.parentNode.style.setProperty("margin-bottom",0,"important"),a.canvas.parentNode.parentNode.style.setProperty("margin-top",0,"important"),1),l=0,s=1,e=1e3,d=-1,r=$("#resolution-1-input");function C(activeDraggable,x,y,event){l=x,s=y,window.requestAnimationFrame(z)}function b(x,y,xDelta,yDelta,event){o.worldCenterX-=xDelta,o.worldCenterY-=yDelta,o.worldCenterX=Math.min(Math.max(o.worldCenterX,-2),2),o.worldCenterY=Math.min(Math.max(o.worldCenterY,-2),2),window.requestAnimationFrame(z),o.draggables.recalculateLocations()}function z(timestamp){var r=timestamp-d;if(d=timestamp,0!=r){a.gl.uniform1f(a.uniforms.worldCenterX,o.worldCenterX),a.gl.uniform1f(a.uniforms.worldCenterY,o.worldCenterY),a.gl.uniform1f(a.uniforms.a,l),a.gl.uniform1f(a.uniforms.b,s),a.gl.uniform1f(a.uniforms.brightnessScale,20),a.render.drawFrame();var t=a.render.getPixelData(),n=new Array(1e4);for(let e=0;e<1e4;e++)n[e]=t[4*e]+t[4*e+1]+t[4*e+2];n.sort((a,b)=>a-b);r=n[Math.floor(9800)]/255*18,r=Math.max(r,.1);o.gl.uniform1f(o.uniforms.aspectRatio,i),o.gl.uniform1f(o.uniforms.worldCenterX,o.worldCenterX),o.gl.uniform1f(o.uniforms.worldCenterY,o.worldCenterY),o.gl.uniform1f(o.uniforms.a,l),o.gl.uniform1f(o.uniforms.b,s),o.gl.uniform1f(o.uniforms.brightnessScale,r),o.render.drawFrame()}}function M(){o.fullscreen.currentlyFullscreen?1<=(i=window.innerWidth/window.innerHeight)?(o.changeCanvasSize(e,Math.floor(e/i)),o.worldWidth=4*i,o.worldHeight=4):(o.changeCanvasSize(Math.floor(e*i),e),o.worldWidth=4,o.worldHeight=4/i):(i=1,o.changeCanvasSize(e,e),o.worldWidth=4,o.worldHeight=4),window.requestAnimationFrame(z)}r.addEventListener("input",()=>{e=parseInt(r.value||1e3),o.changeCanvasSize(e,e)}),$("#download-1-button").addEventListener("click",()=>{o.downloadFrame("a-julia-set.png")}),o.gl.uniform1f(o.uniforms.aspectRatio,1),a.gl.uniform1f(a.uniforms.aspectRatio,1),window.requestAnimationFrame(z),addTemporaryListener({object:window,event:"resize",callback:M})}{v=`
			precision highp float;
			
			varying vec2 uv;
			
			uniform float aspectRatio;
			
			uniform float worldCenterX;
			uniform float worldCenterY;
			uniform float worldSize;
			
			uniform float a;
			uniform float b;
			uniform float brightnessScale;
			
			
			
			void main(void)
			{
				vec2 z;
				
				if (aspectRatio >= 1.0)
				{
					z = vec2(uv.x * aspectRatio * worldSize + worldCenterX, uv.y * worldSize + worldCenterY);
				}
				
				else
				{
					z = vec2(uv.x * worldSize + worldCenterX, uv.y / aspectRatio * worldSize + worldCenterY);
				}
				
				vec3 color = normalize(vec3(abs(z.x + z.y) / 2.0, abs(z.x) / 2.0, abs(z.y) / 2.0) + .1 / length(z) * vec3(1.0, 1.0, 1.0));
				float brightness = exp(-length(z));
				
				
				
				vec2 c = vec2(a, b);
				
				for (int iteration = 0; iteration < 100; iteration++)
				{
					if (iteration == 99)
					{
						gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
						return;
					}
					
					if (length(z) >= 10.0)
					{
						break;
					}
					
					z = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y) + c;
					
					brightness += exp(-length(z));
				}
				
				
				gl_FragColor = vec4(brightness / brightnessScale * color, 1.0);
			}
		`,p={renderer:"gpu",shader:v,canvasWidth:1e3,canvasHeight:1e3,worldWidth:4,worldHeight:4,worldCenterX:0,worldCenterY:0,useDraggables:!0,draggablesMousemoveCallback:C,draggablesTouchmoveCallback:C,useFullscreen:!0,trueFullscreen:!0,useFullscreenButton:!0,enterFullscreenButtonIconPath:"/graphics/general-icons/enter-fullscreen.png",exitFullscreenButtonIconPath:"/graphics/general-icons/exit-fullscreen.png",switchFullscreenCallback:M,mousedragCallback:b,touchmoveCallback:b,wheelCallback:F,pinchCallback:S},v={renderer:"gpu",shader:v,canvasWidth:100,canvasHeight:100};let o=new Wilson($("#output-canvas-2"),p);o.render.initUniforms(["aspectRatio","worldCenterX","worldCenterY","worldSize","a","b","brightnessScale"]);o.draggables.add(0,1);let a=new Wilson($("#hidden-canvas-2"),v),i=(a.render.initUniforms(["aspectRatio","worldCenterX","worldCenterY","worldSize","a","b","brightnessScale"]),o.canvas.parentNode.parentNode.style.setProperty("margin-bottom",0,"important"),a.canvas.parentNode.parentNode.style.setProperty("margin-top",0,"important"),1),r=0,l=0,s=1,e=1e3,t=0,n=0,d=-1,c=$("#resolution-2-input");function C(activeDraggable,x,y,event){l=x,s=y,window.requestAnimationFrame(z)}function b(x,y,xDelta,yDelta,event){o.worldCenterX-=xDelta,o.worldCenterY-=yDelta,o.worldCenterX=Math.min(Math.max(o.worldCenterX,-2),2),o.worldCenterY=Math.min(Math.max(o.worldCenterY,-2),2),window.requestAnimationFrame(z),o.draggables.recalculateLocations()}function F(x,y,scrollAmount,event){t=x,n=y,r+=scrollAmount/100,r=Math.min(r,1),X(x,y)}function S(x,y,touchDistanceDelta,event){1<=i?r-=touchDistanceDelta/o.worldWidth*10:r-=touchDistanceDelta/o.worldHeight*10,r=Math.min(r,1),t=x,n=y,X()}function X(){var e;1<=i?(e=o.input.getZoomedWorldCenter(t,n,4*Math.pow(2,r)*i,4*Math.pow(2,r)),o.worldWidth=4*Math.pow(2,r)*i,o.worldHeight=4*Math.pow(2,r),o.worldCenterX=e[0],o.worldCenterY=e[1]):(e=o.input.getZoomedWorldCenter(t,n,4*Math.pow(2,r),4*Math.pow(2,r)/i),o.worldWidth=4*Math.pow(2,r),o.worldHeight=4*Math.pow(2,r)/i,o.worldCenterX=e[0],o.worldCenterY=e[1]),window.requestAnimationFrame(z),o.draggables.recalculateLocations()}function z(timestamp){var r=timestamp-d;if(d=timestamp,0!=r){a.gl.uniform1f(a.uniforms.worldCenterX,o.worldCenterX),a.gl.uniform1f(a.uniforms.worldCenterY,o.worldCenterY),a.gl.uniform1f(a.uniforms.worldSize,Math.min(o.worldHeight,o.worldWidth)/2),a.gl.uniform1f(a.uniforms.a,l),a.gl.uniform1f(a.uniforms.b,s),a.gl.uniform1f(a.uniforms.brightnessScale,20),a.render.drawFrame();var t=a.render.getPixelData(),n=new Array(1e4);for(let e=0;e<1e4;e++)n[e]=t[4*e]+t[4*e+1]+t[4*e+2];n.sort((a,b)=>a-b);r=n[Math.floor(9800)]/255*18,r=Math.max(r,.1);o.gl.uniform1f(o.uniforms.aspectRatio,i),o.gl.uniform1f(o.uniforms.worldCenterX,o.worldCenterX),o.gl.uniform1f(o.uniforms.worldCenterY,o.worldCenterY),o.gl.uniform1f(o.uniforms.worldSize,Math.min(o.worldHeight,o.worldWidth)/2),o.gl.uniform1f(o.uniforms.a,l),o.gl.uniform1f(o.uniforms.b,s),o.gl.uniform1f(o.uniforms.brightnessScale,r),o.render.drawFrame()}}function M(){o.fullscreen.currentlyFullscreen?1<=(i=window.innerWidth/window.innerHeight)?(o.changeCanvasSize(e,Math.floor(e/i)),o.worldWidth=4*Math.pow(2,r)*i,o.worldHeight=4*Math.pow(2,r)):(o.changeCanvasSize(Math.floor(e*i),e),o.worldWidth=4*Math.pow(2,r),o.worldHeight=4*Math.pow(2,r)/i):(i=1,o.changeCanvasSize(e,e),o.worldWidth=4*Math.pow(2,r),o.worldHeight=4*Math.pow(2,r)),window.requestAnimationFrame(z)}c.addEventListener("input",()=>{e=parseInt(c.value||1e3),o.changeCanvasSize(e,e)}),$("#download-2-button").addEventListener("click",()=>{o.downloadFrame("a-julia-set.png")}),o.gl.uniform1f(o.uniforms.aspectRatio,1),a.gl.uniform1f(a.uniforms.aspectRatio,1),window.requestAnimationFrame(z),addTemporaryListener({object:window,event:"resize",callback:M})}{p=`
			precision highp float;
			
			varying vec2 uv;
			
			uniform float aspectRatio;
			
			uniform float worldCenterX;
			uniform float worldCenterY;
			uniform float worldSize;
			
			uniform float a;
			uniform float b;
			uniform float brightnessScale;
			
			
			
			void main(void)
			{
				vec2 z;
				
				if (aspectRatio >= 1.0)
				{
					z = vec2(uv.x * aspectRatio * worldSize + worldCenterX, uv.y * worldSize + worldCenterY);
				}
				
				else
				{
					z = vec2(uv.x * worldSize + worldCenterX, uv.y / aspectRatio * worldSize + worldCenterY);
				}
				
				vec3 color = normalize(vec3(abs(z.x + z.y) / 2.0, abs(z.x) / 2.0, abs(z.y) / 2.0) + .1 / length(z) * vec3(1.0, 1.0, 1.0));
				float brightness = exp(-length(z));
				
				
				
				vec2 c = vec2(a, b);
				
				for (int iteration = 0; iteration < 100; iteration++)
				{
					if (iteration == 99)
					{
						gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
						return;
					}
					
					if (length(z) >= 10.0)
					{
						break;
					}
					
					z = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y) + c;
					
					brightness += exp(-length(z));
				}
				
				
				gl_FragColor = vec4(brightness / brightnessScale * color, 1.0);
			}
		`,v={renderer:"gpu",shader:p,canvasWidth:1e3,canvasHeight:1e3,worldWidth:4,worldHeight:4,worldCenterX:0,worldCenterY:0,useDraggables:!0,draggablesMousemoveCallback:C,draggablesTouchmoveCallback:C,useFullscreen:!0,trueFullscreen:!0,useFullscreenButton:!0,enterFullscreenButtonIconPath:"/graphics/general-icons/enter-fullscreen.png",exitFullscreenButtonIconPath:"/graphics/general-icons/exit-fullscreen.png",switchFullscreenCallback:M,mousedownCallback:Y,touchstartCallback:Y,mousedragCallback:b,touchmoveCallback:b,mouseupCallback:W,touchendCallback:W,wheelCallback:F,pinchCallback:S},p={renderer:"gpu",shader:p,canvasWidth:100,canvasHeight:100};let o=new Wilson($("#output-canvas-3"),v);o.render.initUniforms(["aspectRatio","worldCenterX","worldCenterY","worldSize","a","b","brightnessScale"]);o.draggables.add(0,1);let a=new Wilson($("#hidden-canvas-3"),p),i=(a.render.initUniforms(["aspectRatio","worldCenterX","worldCenterY","worldSize","a","b","brightnessScale"]),o.canvas.parentNode.parentNode.style.setProperty("margin-bottom",0,"important"),a.canvas.parentNode.parentNode.style.setProperty("margin-top",0,"important"),1),l=0,s=0,d=1,e=1e3,c=0,u=0,r=0,t=0,n=0,w=0,m=0,h=0;const D=.005,H=.01;let f=-1,g=$("#resolution-3-input");function C(activeDraggable,x,y,event){s=x,d=y,window.requestAnimationFrame(z)}function Y(x,y,event){w=0,m=0,h=0,r=0,t=0,n=0}function b(x,y,xDelta,yDelta,event){o.worldCenterX-=xDelta,o.worldCenterY-=yDelta,r=-xDelta,t=-yDelta,o.worldCenterX=Math.min(Math.max(o.worldCenterX,-2),2),o.worldCenterY=Math.min(Math.max(o.worldCenterY,-2),2),window.requestAnimationFrame(z),o.draggables.recalculateLocations()}function W(x,y,event){Math.sqrt(r*r+t*t)>=D*Math.min(o.worldWidth,o.worldHeight)&&(w=r,m=t),Math.abs(n)>=H&&(h=n),window.requestAnimationFrame(z)}function F(x,y,scrollAmount,event){c=x,u=y,Math.abs(scrollAmount/100)<.3?(l+=scrollAmount/100,l=Math.min(l,1)):h+=.05*Math.sign(scrollAmount),X(x,y)}function S(x,y,touchDistanceDelta,event){n=1<=i?(l-=touchDistanceDelta/o.worldWidth*10,-touchDistanceDelta/o.worldWidth*10):(l-=touchDistanceDelta/o.worldHeight*10,-touchDistanceDelta/o.worldHeight*10),l=Math.min(l,1),c=x,u=y,X()}function X(){var e;1<=i?(e=o.input.getZoomedWorldCenter(c,u,4*Math.pow(2,l)*i,4*Math.pow(2,l)),o.worldWidth=4*Math.pow(2,l)*i,o.worldHeight=4*Math.pow(2,l),o.worldCenterX=e[0],o.worldCenterY=e[1]):(e=o.input.getZoomedWorldCenter(c,u,4*Math.pow(2,l),4*Math.pow(2,l)/i),o.worldWidth=4*Math.pow(2,l),o.worldHeight=4*Math.pow(2,l)/i,o.worldCenterX=e[0],o.worldCenterY=e[1]),window.requestAnimationFrame(z),o.draggables.recalculateLocations()}function z(timestamp){var r=timestamp-f;if(f=timestamp,0!=r){a.gl.uniform1f(a.uniforms.worldCenterX,o.worldCenterX),a.gl.uniform1f(a.uniforms.worldCenterY,o.worldCenterY),a.gl.uniform1f(a.uniforms.worldSize,Math.min(o.worldHeight,o.worldWidth)/2),a.gl.uniform1f(a.uniforms.a,s),a.gl.uniform1f(a.uniforms.b,d),a.gl.uniform1f(a.uniforms.brightnessScale,20),a.render.drawFrame();var t=a.render.getPixelData(),n=new Array(1e4);for(let e=0;e<1e4;e++)n[e]=t[4*e]+t[4*e+1]+t[4*e+2];n.sort((a,b)=>a-b);r=n[Math.floor(9800)]/255*18,r=Math.max(r,.1);o.gl.uniform1f(o.uniforms.aspectRatio,i),o.gl.uniform1f(o.uniforms.worldCenterX,o.worldCenterX),o.gl.uniform1f(o.uniforms.worldCenterY,o.worldCenterY),o.gl.uniform1f(o.uniforms.worldSize,Math.min(o.worldHeight,o.worldWidth)/2),o.gl.uniform1f(o.uniforms.a,s),o.gl.uniform1f(o.uniforms.b,d),o.gl.uniform1f(o.uniforms.brightnessScale,r),o.render.drawFrame(),0===w&&0===m&&0===h||(o.worldCenterX+=w,o.worldCenterY+=m,o.worldCenterX=Math.min(Math.max(o.worldCenterX,-2),2),o.worldCenterY=Math.min(Math.max(o.worldCenterY,-2),2),w*=.96,m*=.96,Math.sqrt(w*w+m*m)<5e-4*Math.min(o.worldWidth,o.worldHeight)&&(w=0,m=0),l+=h,l=Math.min(l,1),X(c,u),h*=.93,Math.abs(h)<.001&&(h=0),window.requestAnimationFrame(z),o.draggables.recalculateLocations())}}function M(){o.fullscreen.currentlyFullscreen?1<=(i=window.innerWidth/window.innerHeight)?(o.changeCanvasSize(e,Math.floor(e/i)),o.worldWidth=4*Math.pow(2,l)*i,o.worldHeight=4*Math.pow(2,l)):(o.changeCanvasSize(Math.floor(e*i),e),o.worldWidth=4*Math.pow(2,l),o.worldHeight=4*Math.pow(2,l)/i):(i=1,o.changeCanvasSize(e,e),o.worldWidth=4*Math.pow(2,l),o.worldHeight=4*Math.pow(2,l)),window.requestAnimationFrame(z)}g.addEventListener("input",()=>{e=parseInt(g.value||1e3),o.changeCanvasSize(e,e)}),$("#download-3-button").addEventListener("click",()=>{o.downloadFrame("a-julia-set.png")}),o.gl.uniform1f(o.uniforms.aspectRatio,1),a.gl.uniform1f(a.uniforms.aspectRatio,1),window.requestAnimationFrame(z),addTemporaryListener({object:window,event:"resize",callback:M})}showPage()}();