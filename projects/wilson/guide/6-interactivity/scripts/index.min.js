!function(){"use strict";let e=Page.element.querySelectorAll("pre code");for(let r=0;r<e.length;r++)e[r].classList.add("highlightable");hljs.highlightAll();{let n=`
   precision highp float;
   
   varying vec2 uv;
   
   uniform float aspectRatio;
   
   uniform float worldCenterX;
   uniform float worldCenterY;
   
   uniform float a;
   uniform float b;
   uniform float brightnessScale;
   
   
   
   void main(void)
   {
    vec2 z;
    
    if (aspectRatio >= 1.0)
    {
     z = vec2(uv.x * aspectRatio * 2.0 + worldCenterX, uv.y * 2.0 + worldCenterY);
    }
    
    else
    {
     z = vec2(uv.x * 2.0 + worldCenterX, uv.y / aspectRatio * 2.0 + worldCenterY);
    }
    
    vec3 color = normalize(vec3(abs(z.x + z.y) / 2.0, abs(z.x) / 2.0, abs(z.y) / 2.0) + .1 / length(z) * vec3(1.0, 1.0, 1.0));
    float brightness = exp(-length(z));
    
    
    
    vec2 c = vec2(a, b);
    
    for (int iteration = 0; iteration < 100; iteration++)
    {
     if (iteration == 99)
     {
      gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
      return;
     }
     
     if (length(z) >= 10.0)
     {
      break;
     }
     
     z = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y) + c;
     
     brightness += exp(-length(z));
    }
    
    
    gl_FragColor = vec4(brightness / brightnessScale * color, 1.0);
   }
  `,t=new Wilson(Page.element.querySelector("#output-canvas-1"),{renderer:"gpu",shader:n,canvasWidth:1e3,canvasHeight:1e3,worldWidth:4,worldHeight:4,worldCenterX:0,worldCenterY:0,useDraggables:!0,draggablesMousemoveCallback:c,draggablesTouchmoveCallback:c,useFullscreen:!0,trueFullscreen:!0,useFullscreenButton:!0,enterFullscreenButtonIconPath:"/graphics/general-icons/enter-fullscreen.png",exitFullscreenButtonIconPath:"/graphics/general-icons/exit-fullscreen.png",switchFullscreenCallback:$,mousedragCallback:f,touchmoveCallback:f});t.render.initUniforms(["aspectRatio","worldCenterX","worldCenterY","a","b","brightnessScale"]),t.draggables.add(0,1);let o=new Wilson(Page.element.querySelector("#hidden-canvas-1"),{renderer:"gpu",shader:n,canvasWidth:100,canvasHeight:100});o.render.initUniforms(["aspectRatio","worldCenterX","worldCenterY","a","b","brightnessScale"]),t.canvas.parentNode.parentNode.style.setProperty("margin-bottom",0,"important"),o.canvas.parentNode.parentNode.style.setProperty("margin-top",0,"important");let l=1,i=0,a=1,s=1e3,d=-1,u=Page.element.querySelector("#resolution-1-input");u.addEventListener("input",()=>{s=parseInt(u.value||1e3),t.changeCanvasSize(s,s)});function c(e,r,n,t){i=r,a=n,window.requestAnimationFrame(m)}function f(e,r,n,o,l){t.worldCenterX-=n,t.worldCenterY-=o,t.worldCenterX=Math.min(Math.max(t.worldCenterX,-2),2),t.worldCenterY=Math.min(Math.max(t.worldCenterY,-2),2),window.requestAnimationFrame(m),t.draggables.recalculateLocations()}function m(e){let r=e-d;if(d=e,0===r)return;o.gl.uniform1f(o.uniforms.worldCenterX,t.worldCenterX),o.gl.uniform1f(o.uniforms.worldCenterY,t.worldCenterY),o.gl.uniform1f(o.uniforms.a,i),o.gl.uniform1f(o.uniforms.b,a),o.gl.uniform1f(o.uniforms.brightnessScale,20),o.render.drawFrame();let n=o.render.getPixelData(),s=Array(1e4);for(let u=0;u<1e4;u++)s[u]=n[4*u]+n[4*u+1]+n[4*u+2];s.sort((e,r)=>e-r);let c=s[Math.floor(9800)]/255*18;c=Math.max(c,.1),t.gl.uniform1f(t.uniforms.aspectRatio,l),t.gl.uniform1f(t.uniforms.worldCenterX,t.worldCenterX),t.gl.uniform1f(t.uniforms.worldCenterY,t.worldCenterY),t.gl.uniform1f(t.uniforms.a,i),t.gl.uniform1f(t.uniforms.b,a),t.gl.uniform1f(t.uniforms.brightnessScale,c),t.render.drawFrame()}function $(){t.fullscreen.currentlyFullscreen?(l=window.innerWidth/window.innerHeight)>=1?(t.changeCanvasSize(s,Math.floor(s/l)),t.worldWidth=4*l,t.worldHeight=4):(t.changeCanvasSize(Math.floor(s*l),s),t.worldWidth=4,t.worldHeight=4/l):(l=1,t.changeCanvasSize(s,s),t.worldWidth=4,t.worldHeight=4),window.requestAnimationFrame(m)}Page.element.querySelector("#download-1-button").addEventListener("click",()=>{t.downloadFrame("a-julia-set.png")}),t.gl.uniform1f(t.uniforms.aspectRatio,1),o.gl.uniform1f(o.uniforms.aspectRatio,1),window.requestAnimationFrame(m),window.addEventListener("resize",$),Page.temporaryHandlers.resize.push($)}{let g=`
   precision highp float;
   
   varying vec2 uv;
   
   uniform float aspectRatio;
   
   uniform float worldCenterX;
   uniform float worldCenterY;
   uniform float worldSize;
   
   uniform float a;
   uniform float b;
   uniform float brightnessScale;
   
   
   
   void main(void)
   {
    vec2 z;
    
    if (aspectRatio >= 1.0)
    {
     z = vec2(uv.x * aspectRatio * worldSize + worldCenterX, uv.y * worldSize + worldCenterY);
    }
    
    else
    {
     z = vec2(uv.x * worldSize + worldCenterX, uv.y / aspectRatio * worldSize + worldCenterY);
    }
    
    vec3 color = normalize(vec3(abs(z.x + z.y) / 2.0, abs(z.x) / 2.0, abs(z.y) / 2.0) + .1 / length(z) * vec3(1.0, 1.0, 1.0));
    float brightness = exp(-length(z));
    
    
    
    vec2 c = vec2(a, b);
    
    for (int iteration = 0; iteration < 100; iteration++)
    {
     if (iteration == 99)
     {
      gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
      return;
     }
     
     if (length(z) >= 10.0)
     {
      break;
     }
     
     z = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y) + c;
     
     brightness += exp(-length(z));
    }
    
    
    gl_FragColor = vec4(brightness / brightnessScale * color, 1.0);
   }
  `,w=new Wilson(Page.element.querySelector("#output-canvas-2"),{renderer:"gpu",shader:g,canvasWidth:1e3,canvasHeight:1e3,worldWidth:4,worldHeight:4,worldCenterX:0,worldCenterY:0,useDraggables:!0,draggablesMousemoveCallback:x,draggablesTouchmoveCallback:x,useFullscreen:!0,trueFullscreen:!0,useFullscreenButton:!0,enterFullscreenButtonIconPath:"/graphics/general-icons/enter-fullscreen.png",exitFullscreenButtonIconPath:"/graphics/general-icons/exit-fullscreen.png",switchFullscreenCallback:H,mousedragCallback:X,touchmoveCallback:X,wheelCallback:function e(r,n,t,o){z=r,S=n,p+=t/100,p=Math.min(p,1),Y(r,n)},pinchCallback:function e(r,n,t,o){_>=1?p-=t/w.worldWidth*10:p-=t/w.worldHeight*10,p=Math.min(p,1),z=r,S=n,Y()}});w.render.initUniforms(["aspectRatio","worldCenterX","worldCenterY","worldSize","a","b","brightnessScale"]),w.draggables.add(0,1);let h=new Wilson(Page.element.querySelector("#hidden-canvas-2"),{renderer:"gpu",shader:g,canvasWidth:100,canvasHeight:100});h.render.initUniforms(["aspectRatio","worldCenterX","worldCenterY","worldSize","a","b","brightnessScale"]),w.canvas.parentNode.parentNode.style.setProperty("margin-bottom",0,"important"),h.canvas.parentNode.parentNode.style.setProperty("margin-top",0,"important");let _=1,p=0,C=0,v=1,b=1e3,z=0,S=0,y=-1,F=Page.element.querySelector("#resolution-2-input");F.addEventListener("input",()=>{b=parseInt(F.value||1e3),w.changeCanvasSize(b,b)});function x(e,r,n,t){C=r,v=n,window.requestAnimationFrame(W)}function X(e,r,n,t,o){w.worldCenterX-=n,w.worldCenterY-=t,w.worldCenterX=Math.min(Math.max(w.worldCenterX,-2),2),w.worldCenterY=Math.min(Math.max(w.worldCenterY,-2),2),window.requestAnimationFrame(W),w.draggables.recalculateLocations()}function Y(){if(_>=1){let e=w.input.getZoomedWorldCenter(z,S,4*Math.pow(2,p)*_,4*Math.pow(2,p));w.worldWidth=4*Math.pow(2,p)*_,w.worldHeight=4*Math.pow(2,p),w.worldCenterX=e[0],w.worldCenterY=e[1]}else{let r=w.input.getZoomedWorldCenter(z,S,4*Math.pow(2,p),4*Math.pow(2,p)/_);w.worldWidth=4*Math.pow(2,p),w.worldHeight=4*Math.pow(2,p)/_,w.worldCenterX=r[0],w.worldCenterY=r[1]}window.requestAnimationFrame(W),w.draggables.recalculateLocations()}function W(e){let r=e-y;if(y=e,0===r)return;h.gl.uniform1f(h.uniforms.worldCenterX,w.worldCenterX),h.gl.uniform1f(h.uniforms.worldCenterY,w.worldCenterY),h.gl.uniform1f(h.uniforms.worldSize,Math.min(w.worldHeight,w.worldWidth)/2),h.gl.uniform1f(h.uniforms.a,C),h.gl.uniform1f(h.uniforms.b,v),h.gl.uniform1f(h.uniforms.brightnessScale,20),h.render.drawFrame();let n=h.render.getPixelData(),t=Array(1e4);for(let o=0;o<1e4;o++)t[o]=n[4*o]+n[4*o+1]+n[4*o+2];t.sort((e,r)=>e-r);let l=t[Math.floor(9800)]/255*18;l=Math.max(l,.1),w.gl.uniform1f(w.uniforms.aspectRatio,_),w.gl.uniform1f(w.uniforms.worldCenterX,w.worldCenterX),w.gl.uniform1f(w.uniforms.worldCenterY,w.worldCenterY),w.gl.uniform1f(w.uniforms.worldSize,Math.min(w.worldHeight,w.worldWidth)/2),w.gl.uniform1f(w.uniforms.a,C),w.gl.uniform1f(w.uniforms.b,v),w.gl.uniform1f(w.uniforms.brightnessScale,l),w.render.drawFrame()}function H(){w.fullscreen.currentlyFullscreen?(_=window.innerWidth/window.innerHeight)>=1?(w.changeCanvasSize(b,Math.floor(b/_)),w.worldWidth=4*Math.pow(2,p)*_,w.worldHeight=4*Math.pow(2,p)):(w.changeCanvasSize(Math.floor(b*_),b),w.worldWidth=4*Math.pow(2,p),w.worldHeight=4*Math.pow(2,p)/_):(_=1,w.changeCanvasSize(b,b),w.worldWidth=4*Math.pow(2,p),w.worldHeight=4*Math.pow(2,p)),window.requestAnimationFrame(W)}Page.element.querySelector("#download-2-button").addEventListener("click",()=>{w.downloadFrame("a-julia-set.png")}),w.gl.uniform1f(w.uniforms.aspectRatio,1),h.gl.uniform1f(h.uniforms.aspectRatio,1),window.requestAnimationFrame(W),window.addEventListener("resize",H),Page.temporaryHandlers.resize.push(H)}{let q=`
   precision highp float;
   
   varying vec2 uv;
   
   uniform float aspectRatio;
   
   uniform float worldCenterX;
   uniform float worldCenterY;
   uniform float worldSize;
   
   uniform float a;
   uniform float b;
   uniform float brightnessScale;
   
   
   
   void main(void)
   {
    vec2 z;
    
    if (aspectRatio >= 1.0)
    {
     z = vec2(uv.x * aspectRatio * worldSize + worldCenterX, uv.y * worldSize + worldCenterY);
    }
    
    else
    {
     z = vec2(uv.x * worldSize + worldCenterX, uv.y / aspectRatio * worldSize + worldCenterY);
    }
    
    vec3 color = normalize(vec3(abs(z.x + z.y) / 2.0, abs(z.x) / 2.0, abs(z.y) / 2.0) + .1 / length(z) * vec3(1.0, 1.0, 1.0));
    float brightness = exp(-length(z));
    
    
    
    vec2 c = vec2(a, b);
    
    for (int iteration = 0; iteration < 100; iteration++)
    {
     if (iteration == 99)
     {
      gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
      return;
     }
     
     if (length(z) >= 10.0)
     {
      break;
     }
     
     z = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y) + c;
     
     brightness += exp(-length(z));
    }
    
    
    gl_FragColor = vec4(brightness / brightnessScale * color, 1.0);
   }
  `,k=new Wilson(Page.element.querySelector("#output-canvas-3"),{renderer:"gpu",shader:q,canvasWidth:1e3,canvasHeight:1e3,worldWidth:4,worldHeight:4,worldCenterX:0,worldCenterY:0,useDraggables:!0,draggablesMousemoveCallback:K,draggablesTouchmoveCallback:K,useFullscreen:!0,trueFullscreen:!0,useFullscreenButton:!0,enterFullscreenButtonIconPath:"/graphics/general-icons/enter-fullscreen.png",exitFullscreenButtonIconPath:"/graphics/general-icons/exit-fullscreen.png",switchFullscreenCallback:en,mousedownCallback:O,touchstartCallback:O,mousedragCallback:Q,touchmoveCallback:Q,mouseupCallback:V,touchendCallback:V,wheelCallback:function e(r,n,t,o){E=r,D=n,.3>Math.abs(t/100)?(L+=t/100,L=Math.min(L,1)):T+=.05*Math.sign(t),ee(r,n)},pinchCallback:function e(r,n,t,o){A>=1?(L-=t/k.worldWidth*10,Z=-t/k.worldWidth*10):(L-=t/k.worldHeight*10,Z=-t/k.worldHeight*10),L=Math.min(L,1),E=r,D=n,ee()}});k.render.initUniforms(["aspectRatio","worldCenterX","worldCenterY","worldSize","a","b","brightnessScale"]),k.draggables.add(0,1);let R=new Wilson(Page.element.querySelector("#hidden-canvas-3"),{renderer:"gpu",shader:q,canvasWidth:100,canvasHeight:100});R.render.initUniforms(["aspectRatio","worldCenterX","worldCenterY","worldSize","a","b","brightnessScale"]),k.canvas.parentNode.parentNode.style.setProperty("margin-bottom",0,"important"),R.canvas.parentNode.parentNode.style.setProperty("margin-top",0,"important");let A=1,L=0,P=0,N=1,B=1e3,E=0,D=0,I=0,U=0,Z=0,j=0,M=0,T=0,G=-1,J=Page.element.querySelector("#resolution-3-input");J.addEventListener("input",()=>{B=parseInt(J.value||1e3),k.changeCanvasSize(B,B)});function K(e,r,n,t){P=r,N=n,window.requestAnimationFrame(er)}function O(e,r,n){j=0,M=0,T=0,I=0,U=0,Z=0}function Q(e,r,n,t,o){k.worldCenterX-=n,k.worldCenterY-=t,I=-n,U=-t,k.worldCenterX=Math.min(Math.max(k.worldCenterX,-2),2),k.worldCenterY=Math.min(Math.max(k.worldCenterY,-2),2),window.requestAnimationFrame(er),k.draggables.recalculateLocations()}function V(e,r,n){Math.sqrt(I*I+U*U)>=.005*Math.min(k.worldWidth,k.worldHeight)&&(j=I,M=U),Math.abs(Z)>=.01&&(T=Z),window.requestAnimationFrame(er)}function ee(){if(A>=1){let e=k.input.getZoomedWorldCenter(E,D,4*Math.pow(2,L)*A,4*Math.pow(2,L));k.worldWidth=4*Math.pow(2,L)*A,k.worldHeight=4*Math.pow(2,L),k.worldCenterX=e[0],k.worldCenterY=e[1]}else{let r=k.input.getZoomedWorldCenter(E,D,4*Math.pow(2,L),4*Math.pow(2,L)/A);k.worldWidth=4*Math.pow(2,L),k.worldHeight=4*Math.pow(2,L)/A,k.worldCenterX=r[0],k.worldCenterY=r[1]}window.requestAnimationFrame(er),k.draggables.recalculateLocations()}function er(e){let r=e-G;if(G=e,0===r)return;R.gl.uniform1f(R.uniforms.worldCenterX,k.worldCenterX),R.gl.uniform1f(R.uniforms.worldCenterY,k.worldCenterY),R.gl.uniform1f(R.uniforms.worldSize,Math.min(k.worldHeight,k.worldWidth)/2),R.gl.uniform1f(R.uniforms.a,P),R.gl.uniform1f(R.uniforms.b,N),R.gl.uniform1f(R.uniforms.brightnessScale,20),R.render.drawFrame();let n=R.render.getPixelData(),t=Array(1e4);for(let o=0;o<1e4;o++)t[o]=n[4*o]+n[4*o+1]+n[4*o+2];t.sort((e,r)=>e-r);let l=t[Math.floor(9800)]/255*18;l=Math.max(l,.1),k.gl.uniform1f(k.uniforms.aspectRatio,A),k.gl.uniform1f(k.uniforms.worldCenterX,k.worldCenterX),k.gl.uniform1f(k.uniforms.worldCenterY,k.worldCenterY),k.gl.uniform1f(k.uniforms.worldSize,Math.min(k.worldHeight,k.worldWidth)/2),k.gl.uniform1f(k.uniforms.a,P),k.gl.uniform1f(k.uniforms.b,N),k.gl.uniform1f(k.uniforms.brightnessScale,l),k.render.drawFrame(),(0!==j||0!==M||0!==T)&&(k.worldCenterX+=j,k.worldCenterY+=M,k.worldCenterX=Math.min(Math.max(k.worldCenterX,-2),2),k.worldCenterY=Math.min(Math.max(k.worldCenterY,-2),2),Math.sqrt((j*=.96)*j+(M*=.96)*M)<5e-4*Math.min(k.worldWidth,k.worldHeight)&&(j=0,M=0),L+=T,L=Math.min(L,1),ee(E,D),.001>Math.abs(T*=.93)&&(T=0),window.requestAnimationFrame(er),k.draggables.recalculateLocations())}function en(){k.fullscreen.currentlyFullscreen?(A=window.innerWidth/window.innerHeight)>=1?(k.changeCanvasSize(B,Math.floor(B/A)),k.worldWidth=4*Math.pow(2,L)*A,k.worldHeight=4*Math.pow(2,L)):(k.changeCanvasSize(Math.floor(B*A),B),k.worldWidth=4*Math.pow(2,L),k.worldHeight=4*Math.pow(2,L)/A):(A=1,k.changeCanvasSize(B,B),k.worldWidth=4*Math.pow(2,L),k.worldHeight=4*Math.pow(2,L)),window.requestAnimationFrame(er)}Page.element.querySelector("#download-3-button").addEventListener("click",()=>{k.downloadFrame("a-julia-set.png")}),k.gl.uniform1f(k.uniforms.aspectRatio,1),R.gl.uniform1f(R.uniforms.aspectRatio,1),window.requestAnimationFrame(er),window.addEventListener("resize",en),Page.temporaryHandlers.resize.push(en)}Page.show()}();