import{showPage}from"/scripts/src/load-page.min.mjs";import{$,$$,addTemporaryListener}from"/scripts/src/main.min.mjs";import{Wilson}from"/scripts/wilson.min.mjs";!function(){"use strict";var elements=$$("pre code");for(let i=0;i<elements.length;i++)elements[i].classList.add("highlightable");hljs.highlightAll();{var fragShaderSource=`
			precision highp float;
			
			varying vec2 uv;
			
			uniform float aspectRatio;
			
			uniform float worldCenterX;
			uniform float worldCenterY;
			
			uniform float a;
			uniform float b;
			uniform float brightnessScale;
			
			
			
			void main(void)
			{
				vec2 z;
				
				if (aspectRatio >= 1.0)
				{
					z = vec2(uv.x * aspectRatio * 2.0 + worldCenterX, uv.y * 2.0 + worldCenterY);
				}
				
				else
				{
					z = vec2(uv.x * 2.0 + worldCenterX, uv.y / aspectRatio * 2.0 + worldCenterY);
				}
				
				vec3 color = normalize(vec3(abs(z.x + z.y) / 2.0, abs(z.x) / 2.0, abs(z.y) / 2.0) + .1 / length(z) * vec3(1.0, 1.0, 1.0));
				float brightness = exp(-length(z));
				
				
				
				vec2 c = vec2(a, b);
				
				for (int iteration = 0; iteration < 100; iteration++)
				{
					if (iteration == 99)
					{
						gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
						return;
					}
					
					if (length(z) >= 10.0)
					{
						break;
					}
					
					z = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y) + c;
					
					brightness += exp(-length(z));
				}
				
				
				gl_FragColor = vec4(brightness / brightnessScale * color, 1.0);
			}
		`,options={renderer:"gpu",shader:fragShaderSource,canvasWidth:1e3,canvasHeight:1e3,worldWidth:4,worldHeight:4,worldCenterX:0,worldCenterY:0,useDraggables:!0,draggablesMousemoveCallback:onDrag,draggablesTouchmoveCallback:onDrag,useFullscreen:!0,trueFullscreen:!0,useFullscreenButton:!0,enterFullscreenButtonIconPath:"/graphics/general-icons/enter-fullscreen.png",exitFullscreenButtonIconPath:"/graphics/general-icons/exit-fullscreen.png",switchFullscreenCallback:changeAspectRatio,mousedragCallback:onDragCanvas,touchmoveCallback:onDragCanvas},fragShaderSource={renderer:"gpu",shader:fragShaderSource,canvasWidth:100,canvasHeight:100};let wilson=new Wilson($("#output-canvas-1"),options);wilson.render.initUniforms(["aspectRatio","worldCenterX","worldCenterY","a","b","brightnessScale"]);wilson.draggables.add(0,1);let wilsonHidden=new Wilson($("#hidden-canvas-1"),fragShaderSource),aspectRatio=(wilsonHidden.render.initUniforms(["aspectRatio","worldCenterX","worldCenterY","a","b","brightnessScale"]),wilson.canvas.parentNode.parentNode.style.setProperty("margin-bottom",0,"important"),wilsonHidden.canvas.parentNode.parentNode.style.setProperty("margin-top",0,"important"),1),a=0,b=1,resolution=1e3,lastTimestamp=-1,resolutionInputElement=$("#resolution-1-input");function onDrag(activeDraggable,x,y,event){a=x,b=y,window.requestAnimationFrame(drawJuliaSet)}function onDragCanvas(x,y,xDelta,yDelta,event){wilson.worldCenterX-=xDelta,wilson.worldCenterY-=yDelta,wilson.worldCenterX=Math.min(Math.max(wilson.worldCenterX,-2),2),wilson.worldCenterY=Math.min(Math.max(wilson.worldCenterY,-2),2),window.requestAnimationFrame(drawJuliaSet),wilson.draggables.recalculateLocations()}function drawJuliaSet(timestamp){var timeElapsed=timestamp-lastTimestamp;if(lastTimestamp=timestamp,0!=timeElapsed){wilsonHidden.gl.uniform1f(wilsonHidden.uniforms.worldCenterX,wilson.worldCenterX),wilsonHidden.gl.uniform1f(wilsonHidden.uniforms.worldCenterY,wilson.worldCenterY),wilsonHidden.gl.uniform1f(wilsonHidden.uniforms.a,a),wilsonHidden.gl.uniform1f(wilsonHidden.uniforms.b,b),wilsonHidden.gl.uniform1f(wilsonHidden.uniforms.brightnessScale,20),wilsonHidden.render.drawFrame();var pixelData=wilsonHidden.render.getPixelData(),brightnesses=new Array(1e4);for(let i=0;i<1e4;i++)brightnesses[i]=pixelData[4*i]+pixelData[4*i+1]+pixelData[4*i+2];brightnesses.sort((a,b)=>a-b);timestamp=brightnesses[Math.floor(9800)]/255*18,timestamp=Math.max(timestamp,.1);wilson.gl.uniform1f(wilson.uniforms.aspectRatio,aspectRatio),wilson.gl.uniform1f(wilson.uniforms.worldCenterX,wilson.worldCenterX),wilson.gl.uniform1f(wilson.uniforms.worldCenterY,wilson.worldCenterY),wilson.gl.uniform1f(wilson.uniforms.a,a),wilson.gl.uniform1f(wilson.uniforms.b,b),wilson.gl.uniform1f(wilson.uniforms.brightnessScale,timestamp),wilson.render.drawFrame()}}function changeAspectRatio(){wilson.fullscreen.currentlyFullscreen?1<=(aspectRatio=window.innerWidth/window.innerHeight)?(wilson.changeCanvasSize(resolution,Math.floor(resolution/aspectRatio)),wilson.worldWidth=4*aspectRatio,wilson.worldHeight=4):(wilson.changeCanvasSize(Math.floor(resolution*aspectRatio),resolution),wilson.worldWidth=4,wilson.worldHeight=4/aspectRatio):(aspectRatio=1,wilson.changeCanvasSize(resolution,resolution),wilson.worldWidth=4,wilson.worldHeight=4),window.requestAnimationFrame(drawJuliaSet)}resolutionInputElement.addEventListener("input",()=>{resolution=parseInt(resolutionInputElement.value||1e3),wilson.changeCanvasSize(resolution,resolution)}),$("#download-1-button").addEventListener("click",()=>{wilson.downloadFrame("a-julia-set.png")}),wilson.gl.uniform1f(wilson.uniforms.aspectRatio,1),wilsonHidden.gl.uniform1f(wilsonHidden.uniforms.aspectRatio,1),window.requestAnimationFrame(drawJuliaSet),addTemporaryListener({object:window,event:"resize",callback:changeAspectRatio})}{let fragShaderSource=`
			precision highp float;
			
			varying vec2 uv;
			
			uniform float aspectRatio;
			
			uniform float worldCenterX;
			uniform float worldCenterY;
			uniform float worldSize;
			
			uniform float a;
			uniform float b;
			uniform float brightnessScale;
			
			
			
			void main(void)
			{
				vec2 z;
				
				if (aspectRatio >= 1.0)
				{
					z = vec2(uv.x * aspectRatio * worldSize + worldCenterX, uv.y * worldSize + worldCenterY);
				}
				
				else
				{
					z = vec2(uv.x * worldSize + worldCenterX, uv.y / aspectRatio * worldSize + worldCenterY);
				}
				
				vec3 color = normalize(vec3(abs(z.x + z.y) / 2.0, abs(z.x) / 2.0, abs(z.y) / 2.0) + .1 / length(z) * vec3(1.0, 1.0, 1.0));
				float brightness = exp(-length(z));
				
				
				
				vec2 c = vec2(a, b);
				
				for (int iteration = 0; iteration < 100; iteration++)
				{
					if (iteration == 99)
					{
						gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
						return;
					}
					
					if (length(z) >= 10.0)
					{
						break;
					}
					
					z = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y) + c;
					
					brightness += exp(-length(z));
				}
				
				
				gl_FragColor = vec4(brightness / brightnessScale * color, 1.0);
			}
		`,options={renderer:"gpu",shader:fragShaderSource,canvasWidth:1e3,canvasHeight:1e3,worldWidth:4,worldHeight:4,worldCenterX:0,worldCenterY:0,useDraggables:!0,draggablesMousemoveCallback:onDrag,draggablesTouchmoveCallback:onDrag,useFullscreen:!0,trueFullscreen:!0,useFullscreenButton:!0,enterFullscreenButtonIconPath:"/graphics/general-icons/enter-fullscreen.png",exitFullscreenButtonIconPath:"/graphics/general-icons/exit-fullscreen.png",switchFullscreenCallback:changeAspectRatio,mousedragCallback:onDragCanvas,touchmoveCallback:onDragCanvas,wheelCallback:onWheelCanvas,pinchCallback:onPinchCanvas},optionsHidden={renderer:"gpu",shader:fragShaderSource,canvasWidth:100,canvasHeight:100},wilson=new Wilson($("#output-canvas-2"),options),wilsonHidden=(wilson.render.initUniforms(["aspectRatio","worldCenterX","worldCenterY","worldSize","a","b","brightnessScale"]),wilson.draggables.add(0,1),new Wilson($("#hidden-canvas-2"),optionsHidden)),aspectRatio=(wilsonHidden.render.initUniforms(["aspectRatio","worldCenterX","worldCenterY","worldSize","a","b","brightnessScale"]),wilson.canvas.parentNode.parentNode.style.setProperty("margin-bottom",0,"important"),wilsonHidden.canvas.parentNode.parentNode.style.setProperty("margin-top",0,"important"),1),zoomLevel=0,a=0,b=1,resolution=1e3,fixedPointX=0,fixedPointY=0,lastTimestamp=-1,resolutionInputElement=$("#resolution-2-input"),downloadButtonElement=(resolutionInputElement.addEventListener("input",()=>{resolution=parseInt(resolutionInputElement.value||1e3),wilson.changeCanvasSize(resolution,resolution)}),$("#download-2-button"));function onDrag(activeDraggable,x,y,event){a=x,b=y,window.requestAnimationFrame(drawJuliaSet)}function onDragCanvas(x,y,xDelta,yDelta,event){wilson.worldCenterX-=xDelta,wilson.worldCenterY-=yDelta,wilson.worldCenterX=Math.min(Math.max(wilson.worldCenterX,-2),2),wilson.worldCenterY=Math.min(Math.max(wilson.worldCenterY,-2),2),window.requestAnimationFrame(drawJuliaSet),wilson.draggables.recalculateLocations()}function onWheelCanvas(x,y,scrollAmount,event){fixedPointX=x,fixedPointY=y,zoomLevel+=scrollAmount/100,zoomLevel=Math.min(zoomLevel,1),zoomCanvas(x,y)}function onPinchCanvas(x,y,touchDistanceDelta,event){1<=aspectRatio?zoomLevel-=touchDistanceDelta/wilson.worldWidth*10:zoomLevel-=touchDistanceDelta/wilson.worldHeight*10,zoomLevel=Math.min(zoomLevel,1),fixedPointX=x,fixedPointY=y,zoomCanvas()}function zoomCanvas(){if(1<=aspectRatio){var newWorldCenter=wilson.input.getZoomedWorldCenter(fixedPointX,fixedPointY,4*Math.pow(2,zoomLevel)*aspectRatio,4*Math.pow(2,zoomLevel));wilson.worldWidth=4*Math.pow(2,zoomLevel)*aspectRatio,wilson.worldHeight=4*Math.pow(2,zoomLevel),wilson.worldCenterX=newWorldCenter[0],wilson.worldCenterY=newWorldCenter[1]}else{let newWorldCenter=wilson.input.getZoomedWorldCenter(fixedPointX,fixedPointY,4*Math.pow(2,zoomLevel),4*Math.pow(2,zoomLevel)/aspectRatio);wilson.worldWidth=4*Math.pow(2,zoomLevel),wilson.worldHeight=4*Math.pow(2,zoomLevel)/aspectRatio,wilson.worldCenterX=newWorldCenter[0],wilson.worldCenterY=newWorldCenter[1]}window.requestAnimationFrame(drawJuliaSet),wilson.draggables.recalculateLocations()}function drawJuliaSet(timestamp){var timeElapsed=timestamp-lastTimestamp;if(lastTimestamp=timestamp,0!=timeElapsed){wilsonHidden.gl.uniform1f(wilsonHidden.uniforms.worldCenterX,wilson.worldCenterX),wilsonHidden.gl.uniform1f(wilsonHidden.uniforms.worldCenterY,wilson.worldCenterY),wilsonHidden.gl.uniform1f(wilsonHidden.uniforms.worldSize,Math.min(wilson.worldHeight,wilson.worldWidth)/2),wilsonHidden.gl.uniform1f(wilsonHidden.uniforms.a,a),wilsonHidden.gl.uniform1f(wilsonHidden.uniforms.b,b),wilsonHidden.gl.uniform1f(wilsonHidden.uniforms.brightnessScale,20),wilsonHidden.render.drawFrame();var pixelData=wilsonHidden.render.getPixelData(),brightnesses=new Array(1e4);for(let i=0;i<1e4;i++)brightnesses[i]=pixelData[4*i]+pixelData[4*i+1]+pixelData[4*i+2];brightnesses.sort((a,b)=>a-b);timestamp=brightnesses[Math.floor(9800)]/255*18,timestamp=Math.max(timestamp,.1);wilson.gl.uniform1f(wilson.uniforms.aspectRatio,aspectRatio),wilson.gl.uniform1f(wilson.uniforms.worldCenterX,wilson.worldCenterX),wilson.gl.uniform1f(wilson.uniforms.worldCenterY,wilson.worldCenterY),wilson.gl.uniform1f(wilson.uniforms.worldSize,Math.min(wilson.worldHeight,wilson.worldWidth)/2),wilson.gl.uniform1f(wilson.uniforms.a,a),wilson.gl.uniform1f(wilson.uniforms.b,b),wilson.gl.uniform1f(wilson.uniforms.brightnessScale,timestamp),wilson.render.drawFrame()}}function changeAspectRatio(){wilson.fullscreen.currentlyFullscreen?1<=(aspectRatio=window.innerWidth/window.innerHeight)?(wilson.changeCanvasSize(resolution,Math.floor(resolution/aspectRatio)),wilson.worldWidth=4*Math.pow(2,zoomLevel)*aspectRatio,wilson.worldHeight=4*Math.pow(2,zoomLevel)):(wilson.changeCanvasSize(Math.floor(resolution*aspectRatio),resolution),wilson.worldWidth=4*Math.pow(2,zoomLevel),wilson.worldHeight=4*Math.pow(2,zoomLevel)/aspectRatio):(aspectRatio=1,wilson.changeCanvasSize(resolution,resolution),wilson.worldWidth=4*Math.pow(2,zoomLevel),wilson.worldHeight=4*Math.pow(2,zoomLevel)),window.requestAnimationFrame(drawJuliaSet)}downloadButtonElement.addEventListener("click",()=>{wilson.downloadFrame("a-julia-set.png")}),wilson.gl.uniform1f(wilson.uniforms.aspectRatio,1),wilsonHidden.gl.uniform1f(wilsonHidden.uniforms.aspectRatio,1),window.requestAnimationFrame(drawJuliaSet),addTemporaryListener({object:window,event:"resize",callback:changeAspectRatio})}{let fragShaderSource=`
			precision highp float;
			
			varying vec2 uv;
			
			uniform float aspectRatio;
			
			uniform float worldCenterX;
			uniform float worldCenterY;
			uniform float worldSize;
			
			uniform float a;
			uniform float b;
			uniform float brightnessScale;
			
			
			
			void main(void)
			{
				vec2 z;
				
				if (aspectRatio >= 1.0)
				{
					z = vec2(uv.x * aspectRatio * worldSize + worldCenterX, uv.y * worldSize + worldCenterY);
				}
				
				else
				{
					z = vec2(uv.x * worldSize + worldCenterX, uv.y / aspectRatio * worldSize + worldCenterY);
				}
				
				vec3 color = normalize(vec3(abs(z.x + z.y) / 2.0, abs(z.x) / 2.0, abs(z.y) / 2.0) + .1 / length(z) * vec3(1.0, 1.0, 1.0));
				float brightness = exp(-length(z));
				
				
				
				vec2 c = vec2(a, b);
				
				for (int iteration = 0; iteration < 100; iteration++)
				{
					if (iteration == 99)
					{
						gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
						return;
					}
					
					if (length(z) >= 10.0)
					{
						break;
					}
					
					z = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y) + c;
					
					brightness += exp(-length(z));
				}
				
				
				gl_FragColor = vec4(brightness / brightnessScale * color, 1.0);
			}
		`,options={renderer:"gpu",shader:fragShaderSource,canvasWidth:1e3,canvasHeight:1e3,worldWidth:4,worldHeight:4,worldCenterX:0,worldCenterY:0,useDraggables:!0,draggablesMousemoveCallback:onDrag,draggablesTouchmoveCallback:onDrag,useFullscreen:!0,trueFullscreen:!0,useFullscreenButton:!0,enterFullscreenButtonIconPath:"/graphics/general-icons/enter-fullscreen.png",exitFullscreenButtonIconPath:"/graphics/general-icons/exit-fullscreen.png",switchFullscreenCallback:changeAspectRatio,mousedownCallback:onGrabCanvas,touchstartCallback:onGrabCanvas,mousedragCallback:onDragCanvas,touchmoveCallback:onDragCanvas,mouseupCallback:onReleaseCanvas,touchendCallback:onReleaseCanvas,wheelCallback:onWheelCanvas,pinchCallback:onPinchCanvas},optionsHidden={renderer:"gpu",shader:fragShaderSource,canvasWidth:100,canvasHeight:100},wilson=new Wilson($("#output-canvas-3"),options),wilsonHidden=(wilson.render.initUniforms(["aspectRatio","worldCenterX","worldCenterY","worldSize","a","b","brightnessScale"]),wilson.draggables.add(0,1),new Wilson($("#hidden-canvas-3"),optionsHidden)),aspectRatio=(wilsonHidden.render.initUniforms(["aspectRatio","worldCenterX","worldCenterY","worldSize","a","b","brightnessScale"]),wilson.canvas.parentNode.parentNode.style.setProperty("margin-bottom",0,"important"),wilsonHidden.canvas.parentNode.parentNode.style.setProperty("margin-top",0,"important"),1),zoomLevel=0,a=0,b=1,resolution=1e3,fixedPointX=0,fixedPointY=0,nextPanVelocityX=0,nextPanVelocityY=0,nextZoomVelocity=0,panVelocityX=0,panVelocityY=0,zoomVelocity=0;const panVelocityStartThreshhold=.005,zoomVelocityStartThreshhold=.01;let lastTimestamp=-1,resolutionInputElement=$("#resolution-3-input"),downloadButtonElement=(resolutionInputElement.addEventListener("input",()=>{resolution=parseInt(resolutionInputElement.value||1e3),wilson.changeCanvasSize(resolution,resolution)}),$("#download-3-button"));function onDrag(activeDraggable,x,y,event){a=x,b=y,window.requestAnimationFrame(drawJuliaSet)}function onGrabCanvas(x,y,event){panVelocityX=0,panVelocityY=0,zoomVelocity=0,nextPanVelocityX=0,nextPanVelocityY=0,nextZoomVelocity=0}function onDragCanvas(x,y,xDelta,yDelta,event){wilson.worldCenterX-=xDelta,wilson.worldCenterY-=yDelta,nextPanVelocityX=-xDelta,nextPanVelocityY=-yDelta,wilson.worldCenterX=Math.min(Math.max(wilson.worldCenterX,-2),2),wilson.worldCenterY=Math.min(Math.max(wilson.worldCenterY,-2),2),window.requestAnimationFrame(drawJuliaSet),wilson.draggables.recalculateLocations()}function onReleaseCanvas(x,y,event){Math.sqrt(nextPanVelocityX*nextPanVelocityX+nextPanVelocityY*nextPanVelocityY)>=panVelocityStartThreshhold*Math.min(wilson.worldWidth,wilson.worldHeight)&&(panVelocityX=nextPanVelocityX,panVelocityY=nextPanVelocityY),Math.abs(nextZoomVelocity)>=zoomVelocityStartThreshhold&&(zoomVelocity=nextZoomVelocity),window.requestAnimationFrame(drawJuliaSet)}function onWheelCanvas(x,y,scrollAmount,event){fixedPointX=x,fixedPointY=y,Math.abs(scrollAmount/100)<.3?(zoomLevel+=scrollAmount/100,zoomLevel=Math.min(zoomLevel,1)):zoomVelocity+=.05*Math.sign(scrollAmount),zoomCanvas(x,y)}function onPinchCanvas(x,y,touchDistanceDelta,event){nextZoomVelocity=1<=aspectRatio?(zoomLevel-=touchDistanceDelta/wilson.worldWidth*10,-touchDistanceDelta/wilson.worldWidth*10):(zoomLevel-=touchDistanceDelta/wilson.worldHeight*10,-touchDistanceDelta/wilson.worldHeight*10),zoomLevel=Math.min(zoomLevel,1),fixedPointX=x,fixedPointY=y,zoomCanvas()}function zoomCanvas(){if(1<=aspectRatio){var newWorldCenter=wilson.input.getZoomedWorldCenter(fixedPointX,fixedPointY,4*Math.pow(2,zoomLevel)*aspectRatio,4*Math.pow(2,zoomLevel));wilson.worldWidth=4*Math.pow(2,zoomLevel)*aspectRatio,wilson.worldHeight=4*Math.pow(2,zoomLevel),wilson.worldCenterX=newWorldCenter[0],wilson.worldCenterY=newWorldCenter[1]}else{let newWorldCenter=wilson.input.getZoomedWorldCenter(fixedPointX,fixedPointY,4*Math.pow(2,zoomLevel),4*Math.pow(2,zoomLevel)/aspectRatio);wilson.worldWidth=4*Math.pow(2,zoomLevel),wilson.worldHeight=4*Math.pow(2,zoomLevel)/aspectRatio,wilson.worldCenterX=newWorldCenter[0],wilson.worldCenterY=newWorldCenter[1]}window.requestAnimationFrame(drawJuliaSet),wilson.draggables.recalculateLocations()}function drawJuliaSet(timestamp){var timeElapsed=timestamp-lastTimestamp;if(lastTimestamp=timestamp,0!=timeElapsed){wilsonHidden.gl.uniform1f(wilsonHidden.uniforms.worldCenterX,wilson.worldCenterX),wilsonHidden.gl.uniform1f(wilsonHidden.uniforms.worldCenterY,wilson.worldCenterY),wilsonHidden.gl.uniform1f(wilsonHidden.uniforms.worldSize,Math.min(wilson.worldHeight,wilson.worldWidth)/2),wilsonHidden.gl.uniform1f(wilsonHidden.uniforms.a,a),wilsonHidden.gl.uniform1f(wilsonHidden.uniforms.b,b),wilsonHidden.gl.uniform1f(wilsonHidden.uniforms.brightnessScale,20),wilsonHidden.render.drawFrame();var pixelData=wilsonHidden.render.getPixelData(),brightnesses=new Array(1e4);for(let i=0;i<1e4;i++)brightnesses[i]=pixelData[4*i]+pixelData[4*i+1]+pixelData[4*i+2];brightnesses.sort((a,b)=>a-b);timestamp=brightnesses[Math.floor(9800)]/255*18,timestamp=Math.max(timestamp,.1);wilson.gl.uniform1f(wilson.uniforms.aspectRatio,aspectRatio),wilson.gl.uniform1f(wilson.uniforms.worldCenterX,wilson.worldCenterX),wilson.gl.uniform1f(wilson.uniforms.worldCenterY,wilson.worldCenterY),wilson.gl.uniform1f(wilson.uniforms.worldSize,Math.min(wilson.worldHeight,wilson.worldWidth)/2),wilson.gl.uniform1f(wilson.uniforms.a,a),wilson.gl.uniform1f(wilson.uniforms.b,b),wilson.gl.uniform1f(wilson.uniforms.brightnessScale,timestamp),wilson.render.drawFrame(),0===panVelocityX&&0===panVelocityY&&0===zoomVelocity||(wilson.worldCenterX+=panVelocityX,wilson.worldCenterY+=panVelocityY,wilson.worldCenterX=Math.min(Math.max(wilson.worldCenterX,-2),2),wilson.worldCenterY=Math.min(Math.max(wilson.worldCenterY,-2),2),panVelocityX*=.96,panVelocityY*=.96,Math.sqrt(panVelocityX*panVelocityX+panVelocityY*panVelocityY)<5e-4*Math.min(wilson.worldWidth,wilson.worldHeight)&&(panVelocityX=0,panVelocityY=0),zoomLevel+=zoomVelocity,zoomLevel=Math.min(zoomLevel,1),zoomCanvas(fixedPointX,fixedPointY),zoomVelocity*=.93,Math.abs(zoomVelocity)<.001&&(zoomVelocity=0),window.requestAnimationFrame(drawJuliaSet),wilson.draggables.recalculateLocations())}}function changeAspectRatio(){wilson.fullscreen.currentlyFullscreen?1<=(aspectRatio=window.innerWidth/window.innerHeight)?(wilson.changeCanvasSize(resolution,Math.floor(resolution/aspectRatio)),wilson.worldWidth=4*Math.pow(2,zoomLevel)*aspectRatio,wilson.worldHeight=4*Math.pow(2,zoomLevel)):(wilson.changeCanvasSize(Math.floor(resolution*aspectRatio),resolution),wilson.worldWidth=4*Math.pow(2,zoomLevel),wilson.worldHeight=4*Math.pow(2,zoomLevel)/aspectRatio):(aspectRatio=1,wilson.changeCanvasSize(resolution,resolution),wilson.worldWidth=4*Math.pow(2,zoomLevel),wilson.worldHeight=4*Math.pow(2,zoomLevel)),window.requestAnimationFrame(drawJuliaSet)}downloadButtonElement.addEventListener("click",()=>{wilson.downloadFrame("a-julia-set.png")}),wilson.gl.uniform1f(wilson.uniforms.aspectRatio,1),wilsonHidden.gl.uniform1f(wilsonHidden.uniforms.aspectRatio,1),window.requestAnimationFrame(drawJuliaSet),addTemporaryListener({object:window,event:"resize",callback:changeAspectRatio})}showPage()}();