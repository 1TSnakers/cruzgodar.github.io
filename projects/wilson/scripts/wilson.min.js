!function(){"use strict";let c=`
		precision highp float;
		
		varying vec2 uv;
		
		uniform float aspect_ratio;
		
		uniform float world_center_x;
		uniform float world_center_y;
		uniform float world_size;
		
		uniform float a;
		uniform float b;
		uniform float brightness_scale;
		
		
		
		void main(void)
		{
			vec2 z;
			
			if (aspect_ratio >= 1.0)
			{
				z = vec2(uv.x * aspect_ratio * world_size + world_center_x, uv.y * world_size + world_center_y);
			}
			
			else
			{
				z = vec2(uv.x * world_size + world_center_x, uv.y / aspect_ratio * world_size + world_center_y);
			}
			
			vec3 color = normalize(vec3(abs(z.x + z.y) / 2.0, abs(z.x) / 2.0, abs(z.y) / 2.0) + .1 / length(z) * vec3(1.0, 1.0, 1.0));
			float brightness = exp(-length(z));
			
			
			
			vec2 c = vec2(a, b);
			
			for (int iteration = 0; iteration < 100; iteration++)
			{
				if (iteration == 99)
				{
					gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
					return;
				}
				
				if (length(z) >= 10.0)
				{
					break;
				}
				
				z = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y) + c;
				
				brightness += exp(-length(z));
			}
			
			
			gl_FragColor = vec4(brightness / brightness_scale * color, 1.0);
		}
	`,a=new Wilson(Page.element.querySelector("#output-canvas"),{renderer:"gpu",shader:c,canvas_width:1e3,canvas_height:1e3,world_width:4,world_height:4,world_center_x:0,world_center_y:0,use_draggables:!0,draggables_mousemove_callback:v,draggables_touchmove_callback:v,use_fullscreen:!0,true_fullscreen:!0,use_fullscreen_button:!0,enter_fullscreen_button_icon_path:"/graphics/general-icons/enter-fullscreen.png",exit_fullscreen_button_icon_path:"/graphics/general-icons/exit-fullscreen.png",switch_fullscreen_callback:d,mousedown_callback:w,touchstart_callback:w,mousedrag_callback:x,touchmove_callback:x,mouseup_callback:y,touchend_callback:y,wheel_callback:function(b,c,a,d){m=b,n=c,.3>Math.abs(a/100)?(h+=a/100,h=Math.min(h,1)):t+=.05*Math.sign(a),z()},pinch_callback:function(c,d,b,e){g>=1?(h-=b/a.world_width*10,q=-b/a.world_width*10):(h-=b/a.world_height*10,q=-b/a.world_height*10),h=Math.min(h,1),m=c,n=d,z()}});a.render.init_uniforms(["aspect_ratio","world_center_x","world_center_y","world_size","a","b","brightness_scale"]),a.draggables.add(0,1);let b=new Wilson(Page.element.querySelector("#hidden-canvas"),{renderer:"gpu",shader:c,canvas_width:100,canvas_height:100});b.render.init_uniforms(["aspect_ratio","world_center_x","world_center_y","world_size","a","b","brightness_scale"]),a.canvas.parentNode.parentNode.style.setProperty("margin-bottom",0,"important"),b.canvas.parentNode.parentNode.style.setProperty("margin-top",0,"important");let g=1,h=0,i=0,j=1,k=1e3,l=100,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=-1,e=Page.element.querySelector("#resolution-input");function v(c,a,b,d){i=a,j=b,window.requestAnimationFrame(f)}function w(a,b,c){r=0,s=0,t=0,o=0,p=0,q=0}function x(d,e,b,c,g){a.world_center_x-=b,a.world_center_y-=c,o=-b,p=-c,a.world_center_x=Math.min(Math.max(a.world_center_x,-2),2),a.world_center_y=Math.min(Math.max(a.world_center_y,-2),2),window.requestAnimationFrame(f),a.draggables.recalculate_locations()}function y(b,c,d){Math.sqrt(o*o+p*p)>=.005*Math.min(a.world_width,a.world_height)&&(r=o,s=p),Math.abs(q)>=.01&&(t=q),window.requestAnimationFrame(f)}function z(){if(g>=1){let b=a.input.get_zoomed_world_center(m,n,4*Math.pow(2,h)*g,4*Math.pow(2,h));a.world_width=4*Math.pow(2,h)*g,a.world_height=4*Math.pow(2,h),a.world_center_x=b[0],a.world_center_y=b[1]}else{let c=a.input.get_zoomed_world_center(m,n,4*Math.pow(2,h),4*Math.pow(2,h)/g);a.world_width=4*Math.pow(2,h),a.world_height=4*Math.pow(2,h)/g,a.world_center_x=c[0],a.world_center_y=c[1]}window.requestAnimationFrame(f),a.draggables.recalculate_locations()}function f(o){let p=o-u;if(u=o,0===p)return;b.gl.uniform1f(b.uniforms.world_center_x,a.world_center_x),b.gl.uniform1f(b.uniforms.world_center_y,a.world_center_y),b.gl.uniform1f(b.uniforms.world_size,Math.min(a.world_height,a.world_width)/2),b.gl.uniform1f(b.uniforms.a,i),b.gl.uniform1f(b.uniforms.b,j),b.gl.uniform1f(b.uniforms.brightness_scale,20),b.render.draw_frame();let d=b.render.get_pixel_data(),e=new Array(l*l);for(let c=0;c<l*l;c++)e[c]=d[4*c]+d[4*c+1]+d[4*c+2];e.sort((a,b)=>a-b);let k=e[Math.floor(l*l*.98)]/255*18;k=Math.max(k,.1),a.gl.uniform1f(a.uniforms.aspect_ratio,g),a.gl.uniform1f(a.uniforms.world_center_x,a.world_center_x),a.gl.uniform1f(a.uniforms.world_center_y,a.world_center_y),a.gl.uniform1f(a.uniforms.world_size,Math.min(a.world_height,a.world_width)/2),a.gl.uniform1f(a.uniforms.a,i),a.gl.uniform1f(a.uniforms.b,j),a.gl.uniform1f(a.uniforms.brightness_scale,k),a.render.draw_frame(),(0!==r||0!==s||0!==t)&&(a.world_center_x+=r,a.world_center_y+=s,a.world_center_x=Math.min(Math.max(a.world_center_x,-2),2),a.world_center_y=Math.min(Math.max(a.world_center_y,-2),2),Math.sqrt((r*=.96)*r+(s*=.96)*s)<5e-4*Math.min(a.world_width,a.world_height)&&(r=0,s=0),h+=t,h=Math.min(h,1),z(m,n),.001>Math.abs(t*=.93)&&(t=0),window.requestAnimationFrame(f),a.draggables.recalculate_locations())}function d(){a.fullscreen.currently_fullscreen?(g=window.innerWidth/window.innerHeight)>=1?(a.change_canvas_size(k,Math.floor(k/g)),a.world_width=4*Math.pow(2,h)*g,a.world_height=4*Math.pow(2,h)):(a.change_canvas_size(Math.floor(k*g),k),a.world_width=4*Math.pow(2,h),a.world_height=4*Math.pow(2,h)/g):(g=1,a.change_canvas_size(k,k),a.world_width=4*Math.pow(2,h),a.world_height=4*Math.pow(2,h)),window.requestAnimationFrame(f)}e.addEventListener("input",()=>{k=parseInt(e.value||1e3),a.change_canvas_size(k,k)}),a.gl.uniform1f(a.uniforms.aspect_ratio,1),b.gl.uniform1f(b.uniforms.aspect_ratio,1),window.requestAnimationFrame(f),window.addEventListener("resize",d),Page.temporary_handlers.resize.push(d),Page.element.querySelector("#part-1-button").addEventListener("click",()=>{Page.Navigation.redirect("/projects/wilson/guide/1-getting-started/")}),Page.element.querySelector("#part-2-button").addEventListener("click",()=>{Page.Navigation.redirect("/projects/wilson/guide/2-draggables/")}),Page.element.querySelector("#part-3-button").addEventListener("click",()=>{Page.Navigation.redirect("/projects/wilson/guide/3-parallelizing/")}),Page.element.querySelector("#part-4-button").addEventListener("click",()=>{Page.Navigation.redirect("/projects/wilson/guide/4-hidden-canvases/")}),Page.element.querySelector("#part-5-button").addEventListener("click",()=>{Page.Navigation.redirect("/projects/wilson/guide/5-fullscreen/")}),Page.element.querySelector("#part-6-button").addEventListener("click",()=>{Page.Navigation.redirect("/projects/wilson/guide/6-interactivity/")}),Page.element.querySelector("#docs-button").addEventListener("click",()=>{Page.Navigation.redirect("/projects/wilson/docs/")}),Page.element.querySelector("#download-button").addEventListener("click",()=>{Page.Navigation.redirect("https://github.com/90259025/wilson/releases",!0)}),Page.show()}()