!function(){"use strict";let t="\n\t\tprecision highp float;\n\t\t\n\t\tvarying vec2 uv;\n\t\t\n\t\tuniform float aspect_ratio;\n\t\t\n\t\tuniform float world_center_x;\n\t\tuniform float world_center_y;\n\t\tuniform float world_size;\n\t\t\n\t\tuniform float a;\n\t\tuniform float b;\n\t\tuniform float brightness_scale;\n\t\t\n\t\t\n\t\t\n\t\tvoid main(void)\n\t\t{\n\t\t\tvec2 z;\n\t\t\t\n\t\t\tif (aspect_ratio >= 1.0)\n\t\t\t{\n\t\t\t\tz = vec2(uv.x * aspect_ratio * world_size + world_center_x, uv.y * world_size + world_center_y);\n\t\t\t}\n\t\t\t\n\t\t\telse\n\t\t\t{\n\t\t\t\tz = vec2(uv.x * world_size + world_center_x, uv.y / aspect_ratio * world_size + world_center_y);\n\t\t\t}\n\t\t\t\n\t\t\tvec3 color = normalize(vec3(abs(z.x + z.y) / 2.0, abs(z.x) / 2.0, abs(z.y) / 2.0) + .1 / length(z) * vec3(1.0, 1.0, 1.0));\n\t\t\tfloat brightness = exp(-length(z));\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tvec2 c = vec2(a, b);\n\t\t\t\n\t\t\tfor (int iteration = 0; iteration < 100; iteration++)\n\t\t\t{\n\t\t\t\tif (iteration == 99)\n\t\t\t\t{\n\t\t\t\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (length(z) >= 10.0)\n\t\t\t\t{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tz = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y) + c;\n\t\t\t\t\n\t\t\t\tbrightness += exp(-length(z));\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tgl_FragColor = vec4(brightness / brightness_scale * color, 1.0);\n\t\t}\n\t",e={renderer:"gpu",shader:t,canvas_width:1e3,canvas_height:1e3,world_width:4,world_height:4,world_center_x:0,world_center_y:0,use_draggables:!0,draggables_mousemove_callback:q,draggables_touchmove_callback:q,use_fullscreen:!0,true_fullscreen:!0,use_fullscreen_button:!0,enter_fullscreen_button_icon_path:"/graphics/general-icons/enter-fullscreen.png",exit_fullscreen_button_icon_path:"/graphics/general-icons/exit-fullscreen.png",switch_fullscreen_callback:A,mousedown_callback:N,touchstart_callback:N,mousedrag_callback:S,touchmove_callback:S,mouseup_callback:E,touchend_callback:E,wheel_callback:function(t,e,n,r){d=t,w=e,Math.abs(n/100)<.3?(i+=n/100,i=Math.min(i,1)):p+=.05*Math.sign(n);L()},pinch_callback:function(t,e,n,o){a>=1?(i-=n/r.world_width*10,g=-n/r.world_width*10):(i-=n/r.world_height*10,g=-n/r.world_height*10);i=Math.min(i,1),d=t,w=e,L()}},n={renderer:"gpu",shader:t,canvas_width:100,canvas_height:100},r=new Wilson(Page.element.querySelector("#output-canvas"),e);r.render.init_uniforms(["aspect_ratio","world_center_x","world_center_y","world_size","a","b","brightness_scale"]);r.draggables.add(0,1);let o=new Wilson(Page.element.querySelector("#hidden-canvas"),n);o.render.init_uniforms(["aspect_ratio","world_center_x","world_center_y","world_size","a","b","brightness_scale"]),r.canvas.parentNode.parentNode.style.setProperty("margin-bottom",0,"important"),o.canvas.parentNode.parentNode.style.setProperty("margin-top",0,"important");let a=1,i=0,l=0,c=1,s=1e3,_=100,d=0,w=0,u=0,h=0,g=0,m=0,f=0,p=0;const v=.96,b=.005,y=5e-4,M=.93,z=.01,x=.001;let P=-1,k=Page.element.querySelector("#resolution-input");function q(t,e,n,r){l=e,c=n,window.requestAnimationFrame(F)}function N(t,e,n){m=0,f=0,p=0,u=0,h=0,g=0}function S(t,e,n,o,a){r.world_center_x-=n,r.world_center_y-=o,u=-n,h=-o,r.world_center_x=Math.min(Math.max(r.world_center_x,-2),2),r.world_center_y=Math.min(Math.max(r.world_center_y,-2),2),window.requestAnimationFrame(F),r.draggables.recalculate_locations()}function E(t,e,n){Math.sqrt(u*u+h*h)>=b*Math.min(r.world_width,r.world_height)&&(m=u,f=h),Math.abs(g)>=z&&(p=g),window.requestAnimationFrame(F)}function L(){if(a>=1){let t=r.input.get_zoomed_world_center(d,w,4*Math.pow(2,i)*a,4*Math.pow(2,i));r.world_width=4*Math.pow(2,i)*a,r.world_height=4*Math.pow(2,i),r.world_center_x=t[0],r.world_center_y=t[1]}else{let t=r.input.get_zoomed_world_center(d,w,4*Math.pow(2,i),4*Math.pow(2,i)/a);r.world_width=4*Math.pow(2,i),r.world_height=4*Math.pow(2,i)/a,r.world_center_x=t[0],r.world_center_y=t[1]}window.requestAnimationFrame(F),r.draggables.recalculate_locations()}function F(t){let e=t-P;if(P=t,0===e)return;o.gl.uniform1f(o.uniforms.world_center_x,r.world_center_x),o.gl.uniform1f(o.uniforms.world_center_y,r.world_center_y),o.gl.uniform1f(o.uniforms.world_size,Math.min(r.world_height,r.world_width)/2),o.gl.uniform1f(o.uniforms.a,l),o.gl.uniform1f(o.uniforms.b,c),o.gl.uniform1f(o.uniforms.brightness_scale,20),o.render.draw_frame();let n=o.render.get_pixel_data(),s=new Array(_*_);for(let t=0;t<_*_;t++)s[t]=n[4*t]+n[4*t+1]+n[4*t+2];s.sort((t,e)=>t-e);let d=s[Math.floor(_*_*.98)]/255*18;d=Math.max(d,.1),r.gl.uniform1f(r.uniforms.aspect_ratio,a),r.gl.uniform1f(r.uniforms.world_center_x,r.world_center_x),r.gl.uniform1f(r.uniforms.world_center_y,r.world_center_y),r.gl.uniform1f(r.uniforms.world_size,Math.min(r.world_height,r.world_width)/2),r.gl.uniform1f(r.uniforms.a,l),r.gl.uniform1f(r.uniforms.b,c),r.gl.uniform1f(r.uniforms.brightness_scale,d),r.render.draw_frame(),0===m&&0===f&&0===p||(r.world_center_x+=m,r.world_center_y+=f,r.world_center_x=Math.min(Math.max(r.world_center_x,-2),2),r.world_center_y=Math.min(Math.max(r.world_center_y,-2),2),m*=v,f*=v,Math.sqrt(m*m+f*f)<y*Math.min(r.world_width,r.world_height)&&(m=0,f=0),i+=p,i=Math.min(i,1),L(),p*=M,Math.abs(p)<x&&(p=0),window.requestAnimationFrame(F),r.draggables.recalculate_locations())}function A(){r.fullscreen.currently_fullscreen?(a=window.innerWidth/window.innerHeight)>=1?(r.change_canvas_size(s,Math.floor(s/a)),r.world_width=4*Math.pow(2,i)*a,r.world_height=4*Math.pow(2,i)):(r.change_canvas_size(Math.floor(s*a),s),r.world_width=4*Math.pow(2,i),r.world_height=4*Math.pow(2,i)/a):(a=1,r.change_canvas_size(s,s),r.world_width=4*Math.pow(2,i),r.world_height=4*Math.pow(2,i)),window.requestAnimationFrame(F)}k.addEventListener("input",()=>{s=parseInt(k.value||1e3),r.change_canvas_size(s,s)}),r.gl.uniform1f(r.uniforms.aspect_ratio,1),o.gl.uniform1f(o.uniforms.aspect_ratio,1),window.requestAnimationFrame(F),window.addEventListener("resize",A),Page.temporary_handlers.resize.push(A),Page.element.querySelector("#part-1-button").addEventListener("click",()=>{Page.Navigation.redirect("/projects/wilson/guide/1/getting-started.html")}),Page.element.querySelector("#part-2-button").addEventListener("click",()=>{Page.Navigation.redirect("/projects/wilson/guide/2/draggables.html")}),Page.element.querySelector("#part-3-button").addEventListener("click",()=>{Page.Navigation.redirect("/projects/wilson/guide/3/parallelizing.html")}),Page.element.querySelector("#part-4-button").addEventListener("click",()=>{Page.Navigation.redirect("/projects/wilson/guide/4/hidden-canvases.html")}),Page.element.querySelector("#part-5-button").addEventListener("click",()=>{Page.Navigation.redirect("/projects/wilson/guide/5/fullscreen.html")}),Page.element.querySelector("#part-6-button").addEventListener("click",()=>{Page.Navigation.redirect("/projects/wilson/guide/6/interactivity.html")}),Page.element.querySelector("#docs-button").addEventListener("click",()=>{Page.Navigation.redirect("/projects/wilson/docs/docs.html")}),Page.element.querySelector("#download-button").addEventListener("click",()=>{Page.Navigation.redirect("https://github.com/90259025/wilson/releases",!0)}),Page.show()}();