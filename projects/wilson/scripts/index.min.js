!function(){"use strict";let e=`
  precision highp float;
  
  varying vec2 uv;
  
  uniform float aspectRatio;
  
  uniform float worldCenterX;
  uniform float worldCenterY;
  uniform float worldSize;
  
  uniform float a;
  uniform float b;
  uniform float brightnessScale;
  
  
  
  void main(void)
  {
   vec2 z;
   
   if (aspectRatio >= 1.0)
   {
    z = vec2(uv.x * aspectRatio * worldSize + worldCenterX, uv.y * worldSize + worldCenterY);
   }
   
   else
   {
    z = vec2(uv.x * worldSize + worldCenterX, uv.y / aspectRatio * worldSize + worldCenterY);
   }
   
   vec3 color = normalize(vec3(abs(z.x + z.y) / 2.0, abs(z.x) / 2.0, abs(z.y) / 2.0) + .1 / length(z) * vec3(1.0, 1.0, 1.0));
   float brightness = exp(-length(z));
   
   
   
   vec2 c = vec2(a, b);
   
   for (int iteration = 0; iteration < 100; iteration++)
   {
    if (iteration == 99)
    {
     gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
     return;
    }
    
    if (length(z) >= 10.0)
    {
     break;
    }
    
    z = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y) + c;
    
    brightness += exp(-length(z));
   }
   
   
   gl_FragColor = vec4(brightness / brightnessScale * color, 1.0);
  }
 `,r=new Wilson($("#output-canvas"),{renderer:"gpu",shader:e,canvasWidth:1e3,canvasHeight:1e3,worldWidth:4,worldHeight:4,worldCenterX:0,worldCenterY:0,useDraggables:!0,draggablesMousemoveCallback:_,draggablesTouchmoveCallback:_,useFullscreen:!0,trueFullscreen:!0,useFullscreenButton:!0,enterFullscreenButtonIconPath:"/graphics/general-icons/enter-fullscreen.png",exitFullscreenButtonIconPath:"/graphics/general-icons/exit-fullscreen.png",switchFullscreenCallback:S,mousedownCallback:v,touchstartCallback:v,mousedragCallback:C,touchmoveCallback:C,mouseupCallback:b,touchendCallback:b,wheelCallback:function e(r,t,n,i){d=r,s=t,.3>Math.abs(n/100)?(o+=n/100,o=Math.min(o,1)):f+=.05*Math.sign(n),z()},pinchCallback:function e(t,i,a,l){n>=1?(o-=a/r.worldWidth*10,g=-a/r.worldWidth*10):(o-=a/r.worldHeight*10,g=-a/r.worldHeight*10),o=Math.min(o,1),d=t,s=i,z()}});r.render.initUniforms(["aspectRatio","worldCenterX","worldCenterY","worldSize","a","b","brightnessScale"]),r.draggables.add(0,1);let t=new Wilson($("#hidden-canvas"),{renderer:"gpu",shader:e,canvasWidth:100,canvasHeight:100});t.render.initUniforms(["aspectRatio","worldCenterX","worldCenterY","worldSize","a","b","brightnessScale"]),r.canvas.parentNode.parentNode.style.setProperty("margin-bottom",0,"important"),t.canvas.parentNode.parentNode.style.setProperty("margin-top",0,"important");let n=1,o=0,i=0,a=1,l=1e3,d=0,s=0,c=0,u=0,g=0,w=0,m=0,f=0,h=-1,p=$("#resolution-input");function _(e,r,t,n){i=r,a=t,window.requestAnimationFrame(k)}function v(e,r,t){w=0,m=0,f=0,c=0,u=0,g=0}function C(e,t,n,o,i){r.worldCenterX-=n,r.worldCenterY-=o,c=-n,u=-o,r.worldCenterX=Math.min(Math.max(r.worldCenterX,-2),2),r.worldCenterY=Math.min(Math.max(r.worldCenterY,-2),2),window.requestAnimationFrame(k),r.draggables.recalculateLocations()}function b(e,t,n){Math.sqrt(c*c+u*u)>=.005*Math.min(r.worldWidth,r.worldHeight)&&(w=c,m=u),Math.abs(g)>=.01&&(f=g),window.requestAnimationFrame(k)}function z(){if(n>=1){let e=r.input.getZoomedWorldCenter(d,s,4*Math.pow(2,o)*n,4*Math.pow(2,o));r.worldWidth=4*Math.pow(2,o)*n,r.worldHeight=4*Math.pow(2,o),r.worldCenterX=e[0],r.worldCenterY=e[1]}else{let t=r.input.getZoomedWorldCenter(d,s,4*Math.pow(2,o),4*Math.pow(2,o)/n);r.worldWidth=4*Math.pow(2,o),r.worldHeight=4*Math.pow(2,o)/n,r.worldCenterX=t[0],r.worldCenterY=t[1]}window.requestAnimationFrame(k),r.draggables.recalculateLocations()}function k(e){let l=e-h;if(h=e,0===l)return;t.gl.uniform1f(t.uniforms.worldCenterX,r.worldCenterX),t.gl.uniform1f(t.uniforms.worldCenterY,r.worldCenterY),t.gl.uniform1f(t.uniforms.worldSize,Math.min(r.worldHeight,r.worldWidth)/2),t.gl.uniform1f(t.uniforms.a,i),t.gl.uniform1f(t.uniforms.b,a),t.gl.uniform1f(t.uniforms.brightnessScale,20),t.render.drawFrame();let c=t.render.getPixelData(),u=Array(1e4);for(let g=0;g<1e4;g++)u[g]=c[4*g]+c[4*g+1]+c[4*g+2];u.sort((e,r)=>e-r);let p=u[Math.floor(9800)]/255*18;p=Math.max(p,.1),r.gl.uniform1f(r.uniforms.aspectRatio,n),r.gl.uniform1f(r.uniforms.worldCenterX,r.worldCenterX),r.gl.uniform1f(r.uniforms.worldCenterY,r.worldCenterY),r.gl.uniform1f(r.uniforms.worldSize,Math.min(r.worldHeight,r.worldWidth)/2),r.gl.uniform1f(r.uniforms.a,i),r.gl.uniform1f(r.uniforms.b,a),r.gl.uniform1f(r.uniforms.brightnessScale,p),r.render.drawFrame(),(0!==w||0!==m||0!==f)&&(r.worldCenterX+=w,r.worldCenterY+=m,r.worldCenterX=Math.min(Math.max(r.worldCenterX,-2),2),r.worldCenterY=Math.min(Math.max(r.worldCenterY,-2),2),Math.sqrt((w*=.96)*w+(m*=.96)*m)<5e-4*Math.min(r.worldWidth,r.worldHeight)&&(w=0,m=0),o+=f,o=Math.min(o,1),z(d,s),.001>Math.abs(f*=.93)&&(f=0),window.requestAnimationFrame(k),r.draggables.recalculateLocations())}function S(){r.fullscreen.currentlyFullscreen?(n=window.innerWidth/window.innerHeight)>=1?(r.changeCanvasSize(l,Math.floor(l/n)),r.worldWidth=4*Math.pow(2,o)*n,r.worldHeight=4*Math.pow(2,o)):(r.changeCanvasSize(Math.floor(l*n),l),r.worldWidth=4*Math.pow(2,o),r.worldHeight=4*Math.pow(2,o)/n):(n=1,r.changeCanvasSize(l,l),r.worldWidth=4*Math.pow(2,o),r.worldHeight=4*Math.pow(2,o)),window.requestAnimationFrame(k)}p.addEventListener("input",()=>{l=parseInt(p.value||1e3),r.changeCanvasSize(l,l)}),r.gl.uniform1f(r.uniforms.aspectRatio,1),t.gl.uniform1f(t.uniforms.aspectRatio,1),window.requestAnimationFrame(k),window.addEventListener("resize",S),Page.temporaryHandlers.resize.push(S),$("#part-1-button").addEventListener("click",()=>{Page.Navigation.redirect("/projects/wilson/guide/1-getting-started/")}),$("#part-2-button").addEventListener("click",()=>{Page.Navigation.redirect("/projects/wilson/guide/2-draggables/")}),$("#part-3-button").addEventListener("click",()=>{Page.Navigation.redirect("/projects/wilson/guide/3-parallelizing/")}),$("#part-4-button").addEventListener("click",()=>{Page.Navigation.redirect("/projects/wilson/guide/4-hidden-canvases/")}),$("#part-5-button").addEventListener("click",()=>{Page.Navigation.redirect("/projects/wilson/guide/5-fullscreen/")}),$("#part-6-button").addEventListener("click",()=>{Page.Navigation.redirect("/projects/wilson/guide/6-interactivity/")}),$("#docs-button").addEventListener("click",()=>{Page.Navigation.redirect("/projects/wilson/docs/")}),$("#download-button").addEventListener("click",()=>{Page.Navigation.redirect("https://github.com/90259025/wilson/releases",!0)}),Page.show()}();