import{showPage}from"../../scripts/src/loadPage.min.js";import{galleryImageData}from"./imageData.min.js";import{showCard}from"/scripts/src/cards.min.js";import{addHoverEvent}from"/scripts/src/hoverEvents.min.js";import{$,$$}from"/scripts/src/main.min.js";import{typesetMath}from"/scripts/src/math.min.js";import{redirect}from"/scripts/src/navigation.min.js";export default function(){const i=$("#high-res-viewer-card h1"),l=$("#description-text"),s=$("#featured-text"),o=$("#applet-link"),m=$("#full-res-link");let n="";$$(".gallery-image-1-1 img, .gallery-image-2-2 img, .gallery-image-3-3 img").forEach(element=>{element.addEventListener("click",e=>{return{id:e,fromElement:t}=[{id:e.target.getAttribute("data-image-id"),fromElement:element}][0],n=e,i.innerHTML=galleryImageData[e].title,galleryImageData[e].parameters?(l.innerHTML=galleryImageData[e].parameters,l.parentElement.style.display="block"):l.parentElement.style.display="none",galleryImageData[e].featured?(s.innerHTML=galleryImageData[e].featured,s.parentElement.style.display="block",setTimeout(()=>{var e=s.querySelectorAll("a");for(const t of Array.from(e))addHoverEvent({element:t})},10)):s.parentElement.style.display="none",o.setAttribute("href",galleryImageData[e].appletLink),m.setAttribute("href",`https://drive.google.com/uc?id=${galleryImageData[e].driveId}&export=download`),r=document.createElement("img"),(a=$("#high-res-viewer-card img")).parentNode.insertBefore(r,a),a.remove(),typesetMath(),r.onload=()=>{setTimeout(()=>showCard({id:"high-res-viewer",fromElement:t}),10)},r.src=`/gallery/high-res/${e}.webp`,void typesetMath();var t,r,a})}),o.addEventListener("click",()=>{redirect({url:galleryImageData[n].appletLink})}),m.addEventListener("click",()=>{redirect({url:`https://drive.google.com/uc?id=${galleryImageData[n].driveId}&export=download`,inNewTab:!0})}),showPage()}