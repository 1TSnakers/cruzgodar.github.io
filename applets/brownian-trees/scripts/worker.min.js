"use strict";onmessage=async function(r){grid_size=r.data[0],await draw_brownian_tree()};let grid_size=null,margin=null,brownian_tree_graph=[],num_pixels_placed=1,pixels_per_brightness_drop=null,current_brightness=255,current_row=null,current_col=null,spawn_radius=null;const directions=[[-1,0],[0,1],[1,0],[0,-1]];function draw_brownian_tree(){return new Promise(function(r,e){brownian_tree_graph=[];for(let r=0;r<grid_size;r++){brownian_tree_graph[r]=[];for(let e=0;e<grid_size;e++)brownian_tree_graph[r][e]=0}for(brownian_tree_graph[Math.floor(grid_size/2)][Math.floor(grid_size/2)]=1,postMessage([Math.floor(grid_size/2),Math.floor(grid_size/2),"rgb(255, 0, 0)"]),margin=10,spawn_radius=5,pixels_per_brightness_drop=Math.ceil(grid_size*grid_size/2750);grid_size-2*spawn_radius>2*margin;){let r=2*Math.random()*Math.PI;for(current_row=Math.floor(spawn_radius*Math.cos(r)+grid_size/2),current_col=Math.floor(spawn_radius*Math.sin(r)+grid_size/2);;){let r=[];current_row>grid_size/2-spawn_radius&&r.push(0),current_col<grid_size/2+spawn_radius&&r.push(1),current_row<grid_size/2+spawn_radius&&r.push(2),current_col>grid_size/2-spawn_radius&&r.push(3);let e=r[Math.floor(Math.random()*r.length)],s=current_row+directions[e][0],i=current_col+directions[e][1];if(1===brownian_tree_graph[s][i]){brownian_tree_graph[current_row][current_col]=1,postMessage([current_col,current_row,`rgb(${current_brightness}, 0, 0)`]),++num_pixels_placed%pixels_per_brightness_drop==0&&(current_brightness--,postMessage(["progress",(255-current_brightness)*(255-current_brightness)/65025*100])),spawn_radius*spawn_radius-(current_row-grid_size/2)*(current_row-grid_size/2)-(current_col-grid_size/2)*(current_col-grid_size/2)<=5&&spawn_radius++;break}current_row=s,current_col=i}}postMessage(["done"]),r()})}