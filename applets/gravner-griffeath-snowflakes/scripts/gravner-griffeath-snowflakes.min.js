!function(){"use strict";let e=document.querySelector("#output-canvas").getContext("2d",{alpha:!1}),t=null;document.querySelector("#generate-button").addEventListener("click",function(){let a=parseInt(document.querySelector("#grid-size-input").value||200),r=parseFloat(document.querySelector("#rho-input").value||.635),u=parseFloat(document.querySelector("#beta-input").value||1.6),o=parseFloat(document.querySelector("#alpha-input").value||.4),n=parseFloat(document.querySelector("#theta-input").value||.025),l=parseFloat(document.querySelector("#kappa-input").value||.0025),c=parseFloat(document.querySelector("#mu-input").value||.015),d=parseFloat(document.querySelector("#gamma-input").value||5e-4);document.querySelector("#output-canvas").setAttribute("width",2*a),document.querySelector("#output-canvas").setAttribute("height",2*a),e.fillStyle="rgb(0, 0, 0)",e.fillRect(0,0,2*a,2*a);try{t.terminate()}catch(e){}t=DEBUG?new Worker("/applets/gravner-griffeath-snowflakes/scripts/worker.js"):new Worker("/applets/gravner-griffeath-snowflakes/scripts/worker.min.js");temporary_web_workers.push(t),t.onmessage=function(t){if("log"===t.data[0])return void console.log(t.data);let r=e.getImageData(0,0,2*a,2*a),u=r.data;for(let e=0;e<a;e++)for(let r=0;r<a;r++){let o=127*t.data[0][r][e];if(0!==o)if(r%2==0){let t=2*e*4*2*a+2*r*4;u[t]=o,u[t+1]=o,u[t+2]=o,u[t+3]=255,u[t+4]=o,u[t+5]=o,u[t+6]=o,u[t+7]=255,u[t=4*(2*e+1)*2*a+2*r*4]=o,u[t+1]=o,u[t+2]=o,u[t+3]=255,u[t+4]=o,u[t+5]=o,u[t+6]=o,u[t+7]=255}else{let t=4*(2*e+1)*2*a+2*r*4;u[t]=o,u[t+1]=o,u[t+2]=o,u[t+3]=255,u[t+4]=o,u[t+5]=o,u[t+6]=o,u[t+7]=255,u[t=4*(2*e+2)*2*a+2*r*4]=o,u[t+1]=o,u[t+2]=o,u[t+3]=255,u[t+4]=o,u[t+5]=o,u[t+6]=o,u[t+7]=255}}e.putImageData(r,0,0)},t.postMessage([a,r,u,o,n,l,c,d])}),document.querySelector("#randomize-parameters-button").addEventListener("click",function(){document.querySelector("#rho-input").value=.9*(Math.random()+.5),document.querySelector("#beta-input").value=1.6*(Math.random()+.5),document.querySelector("#alpha-input").value=.4*(Math.random()+.5),document.querySelector("#theta-input").value=.025*(Math.random()+.5),document.querySelector("#kappa-input").value=.0025*(Math.random()+.5),document.querySelector("#mu-input").value=.015*(Math.random()+.5),document.querySelector("#gamma-input").value=5e-4*(Math.random()+.5)}),document.querySelector("#download-button").addEventListener("click",function(){let e=document.createElement("a");e.download="gravner-griffeath-snowflakes.png",e.href=document.querySelector("#output-canvas").toDataURL(),e.click(),e.remove()})}();