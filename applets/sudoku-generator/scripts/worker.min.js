"use strict";const gridSize=9;let grid=[],nonzeroCells=[],numSolutionsFound=0;function generateSudokuGrid(){grid=[],generateNumberGrid();for(let o=0;o<gridSize;o++)for(let r=0;r<gridSize;r++)nonzeroCells.push([o,r]);nonzeroCells=shuffleArray(nonzeroCells);for(let r=0;r<nonzeroCells.length;r++){var o=nonzeroCells[r],i=grid[o[0]][o[1]];grid[o[0]][o[1]]=0,1!==(numSolutionsFound=wasmSolvePuzzle(grid))&&(grid[o[0]][o[1]]=i,numSolutionsFound=1)}postMessage([grid])}function shuffleArray(r){let o=r.length;for(;0!==o;){var i=Math.floor(Math.random()*o),e=r[--o];r[o]=r[i],r[i]=e}return r}function generateNumberGrid(){grid=[[2,9,5,7,4,3,8,6,1],[4,3,1,8,6,5,9,2,7],[8,7,6,1,9,2,5,4,3],[3,8,7,4,5,9,2,1,6],[6,1,2,3,8,7,4,9,5],[5,4,9,2,1,6,7,3,8],[7,6,3,5,2,4,1,8,9],[9,2,8,6,7,1,3,5,4],[1,5,4,9,3,8,6,7,2]];var o=shuffleArray([shuffleGridRows,shuffleGridRows,shuffleGridColumns,shuffleGridColumns,shuffleGridDigits,shuffleGridDigits]);for(let r=0;r<6;r++)o[r]()}function shuffleGridRows(){var o=Math.floor(3*Math.random()),i=Math.floor(3*Math.random()),e=Math.floor(3*Math.random())+3,d=Math.floor(3*Math.random())+3,t=Math.floor(3*Math.random())+6,a=Math.floor(3*Math.random())+6;for(let r=0;r<gridSize;r++){var l=grid[o][r];grid[o][r]=grid[i][r],grid[i][r]=l,l=grid[e][r],grid[e][r]=grid[d][r],grid[d][r]=l,l=grid[t][r],grid[t][r]=grid[a][r],grid[a][r]=l}}function shuffleGridColumns(){var o=Math.floor(3*Math.random()),i=Math.floor(3*Math.random()),e=Math.floor(3*Math.random())+3,d=Math.floor(3*Math.random())+3,t=Math.floor(3*Math.random())+6,a=Math.floor(3*Math.random())+6;for(let r=0;r<gridSize;r++){var l=grid[r][o];grid[r][o]=grid[r][i],grid[r][i]=l,l=grid[r][e],grid[r][e]=grid[r][d],grid[r][d]=l,l=grid[r][t],grid[r][t]=grid[r][a],grid[r][a]=l}}function shuffleGridDigits(){var i=shuffleArray([...Array(gridSize).keys()]),e=[];for(let o=0;o<gridSize;o++){e[o]=[];for(let r=0;r<gridSize;r++)e[o][r]=0}for(let o=0;o<gridSize;o++)for(let r=0;r<gridSize;r++)e[o][r]=i[grid[o][r]-1]+1;grid=JSON.parse(JSON.stringify(e))}function wasmSolvePuzzle(){let o=[];for(let r=0;r<gridSize;r++)o=o.concat(grid[r]);return ccallArrays("solve_puzzle","number",["array"],[o],{heapIn:"HEAPU8"})}onmessage=()=>{importScripts("/applets/sudoku-generator/scripts/solver.min.js"),Module.onRuntimeInitialized=()=>{importScripts("/scripts/wasm-arrays.min.min.js"),generateSudokuGrid()}};