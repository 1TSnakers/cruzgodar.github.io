import{opacityAnimationTime}from"/scripts/src/animation.min.mjs";import{Applet}from"/scripts/src/applets.min.mjs";import{addTemporaryWorker}from"/scripts/src/main.min.mjs";import{siteSettings}from"/scripts/src/settings.min.mjs";import{Wilson}from"/scripts/wilson.min.mjs";class SudokuGenerator extends Applet{grid=[];webWorker=null;generatedFirstPuzzle=!1;constructor(canvas){super(canvas);this.wilson=new Wilson(canvas,{renderer:"cpu",canvasWidth:1e3,canvasHeight:1e3})}run(){this.grid=new Array(9);for(let i=0;i<9;i++){this.grid[i]=new Array(9);for(let j=0;j<9;j++)this.grid[i][j]=0}this.generatedFirstPuzzle?(this.wilson.canvas.style.opacity=0,setTimeout(()=>{this.wilson.ctx.clearRect(0,0,1809,1809)},opacityAnimationTime)):(this.wilson.canvas.setAttribute("width",1809),this.wilson.canvas.setAttribute("height",1809),this.wilson.ctx.clearRect(0,0,1809,1809)),this.webWorker=addTemporaryWorker("/applets/sudoku-generator/scripts/worker.js"),this.webWorker.onmessage=e=>{this.grid=e.data[0],this.drawGrid(!1),this.wilson.canvas.style.opacity=1,this.generatedFirstPuzzle=!0},this.generatedFirstPuzzle?setTimeout(()=>{this.webWorker.postMessage([])},opacityAnimationTime):this.webWorker.postMessage([])}drawGrid(printMode){printMode?(this.wilson.ctx.fillStyle="rgb(255, 255, 255)",this.wilson.ctx.fillRect(0,0,1809,1809),this.wilson.ctx.fillStyle="rgb(0, 0, 0)"):(this.wilson.ctx.clearRect(0,0,1809,1809),siteSettings.darkTheme?this.wilson.ctx.fillStyle="rgb(192, 192, 192)":this.wilson.ctx.fillStyle="rgb(64, 64, 64)");for(let i=0;i<=9;i++)i%3==0&&(this.wilson.ctx.fillRect(200*i,0,10,1818),this.wilson.ctx.fillRect(0,200*i,1818,10)),this.wilson.ctx.fillRect(200*i+4,0,2,1818),this.wilson.ctx.fillRect(0,200*i+4,1818,2);for(let i=0;i<9;i++)for(let j=0;j<9;j++)this.wilson.ctx.font="150px sans-serif",0!==this.grid[i][j]&&this.wilson.ctx.fillText(this.grid[i][j],200*j+64,200*i+156)}}export{SudokuGenerator};