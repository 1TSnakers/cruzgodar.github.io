class SudokuGenerator extends Applet{grid=[];webWorker=null;generatedFirstPuzzle=!1;constructor(a){super(a);this.wilson=new Wilson($("#sudoku-grid"),{renderer:"cpu",canvasWidth:1E3,canvasHeight:1E3})}run(){this.grid=Array(9);for(let a=0;9>a;a++){this.grid[a]=Array(9);for(let b=0;9>b;b++)this.grid[a][b]=0}this.generatedFirstPuzzle?(this.wilson.canvas.style.opacity=0,setTimeout(()=>{this.wilson.ctx.clearRect(0,0,1809,1809)},Site.opacityAnimationTime)):(this.wilson.canvas.setAttribute("width",1809),
this.wilson.canvas.setAttribute("height",1809),this.wilson.ctx.clearRect(0,0,1809,1809));try{this.webWorker.terminate()}catch(a){}this.webWorker=new Worker(`/applets/sudoku-generator/scripts/worker.${DEBUG?"":"min."}js`);this.workers.push(this.webWorker);this.webWorker.onmessage=a=>{this.grid=a.data[0];this.drawGrid(!1);this.wilson.canvas.style.opacity=1;this.generatedFirstPuzzle=!0};this.generatedFirstPuzzle?setTimeout(()=>{this.webWorker.postMessage([])},Site.opacityAnimationTime):this.webWorker.postMessage([])}drawGrid(a){a?
(this.wilson.ctx.fillStyle="rgb(255, 255, 255)",this.wilson.ctx.fillRect(0,0,1809,1809),this.wilson.ctx.fillStyle="rgb(0, 0, 0)"):(this.wilson.ctx.clearRect(0,0,1809,1809),this.wilson.ctx.fillStyle=1===Site.Settings.urlVars.theme?1===Site.Settings.urlVars.contrast?"rgb(255, 255, 255)":"rgb(192, 192, 192)":1===Site.Settings.urlVars.contrast?"rgb(0, 0, 0)":"rgb(64, 64, 64)");for(a=0;9>=a;a++)0===a%3&&(this.wilson.ctx.fillRect(200*a,0,10,1818),this.wilson.ctx.fillRect(0,200*a,1818,10)),this.wilson.ctx.fillRect(200*
a+4,0,2,1818),this.wilson.ctx.fillRect(0,200*a+4,1818,2);for(a=0;9>a;a++)for(let b=0;9>b;b++)this.wilson.ctx.font="150px sans-serif",0!==this.grid[a][b]&&this.wilson.ctx.fillText(this.grid[a][b],200*b+64,200*a+156)}};
