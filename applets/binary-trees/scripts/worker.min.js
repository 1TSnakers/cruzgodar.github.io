"use strict";let root=[],branchPoints=[];const numAnimatedIterations=10;async function drawAnimatedBinaryTree(){let a=[Math.atan2(branchPoints[0][0]-root[0],branchPoints[0][1]-root[1]),Math.atan2(branchPoints[1][0]-root[0],branchPoints[1][1]-root[1])];var r=(a[0]-a[1])/2,s=[Math.sqrt((branchPoints[0][0]-root[0])*(branchPoints[0][0]-root[0])+(branchPoints[0][1]-root[1])*(branchPoints[0][1]-root[1])),Math.sqrt((branchPoints[1][0]-root[0])*(branchPoints[1][0]-root[0])+(branchPoints[1][1]-root[1])*(branchPoints[1][1]-root[1]))];let n=[root],e=1;for(let t=0;t<numAnimatedIterations;t++){var h=[],i=[],c=20*e+1,M=`rgb(${139*Math.sqrt(e)}, ${69*Math.sqrt(e)+128*(1-Math.sqrt(e))}, ${19*Math.sqrt(e)})`;for(let o=0;o<=100;o++){for(let t=0;t<n.length;t++){var b=n[t][1],P=n[t][0],l=(1-o/100)*b+o/100*(n[t][1]+s[0]*e*Math.cos(a[2*t])),u=(1-o/100)*P+o/100*(n[t][0]+s[0]*e*Math.sin(a[2*t]));postMessage([b,P,l,u,M,c]),b=n[t][1],P=n[t][0],l=(1-o/100)*b+o/100*(n[t][1]+s[1]*e*Math.cos(a[2*t+1])),u=(1-o/100)*P+o/100*(n[t][0]+s[1]*e*Math.sin(a[2*t+1])),postMessage([b,P,l,u,M,c])}await new Promise(resolve=>setTimeout(resolve,8))}for(let t=0;t<n.length;t++){var d=n[t][1]+s[0]*e*Math.cos(a[2*t]),m=n[t][0]+s[0]*e*Math.sin(a[2*t]);h.push([m,d]),i.push(a[2*t]-r),i.push(a[2*t]+r),d=n[t][1]+s[1]*e*Math.cos(a[2*t+1]),m=n[t][0]+s[1]*e*Math.sin(a[2*t+1]),h.push([m,d]),i.push(a[2*t+1]-r),i.push(a[2*t+1]+r)}n=h,a=i,e*=.675}}onmessage=async e=>{root=e.data[0],branchPoints=e.data[1],await drawAnimatedBinaryTree(),postMessage(["done"])};