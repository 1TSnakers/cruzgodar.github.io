!function(){"use strict";let t=2e3,e=[],r=[],o=5,n=document.querySelector("#binary-trees-plot").getContext("2d",{alpha:!1}),l=null,a=[],s=-1,c=document.querySelector("#branch-selector").offsetWidth,u=document.querySelector("#branch-selector").offsetHeight;function d(){n.fillStyle="rgb(0, 0, 0)",n.fillRect(0,0,t,t);let l=[Math.atan2(r[0][0]-e[0],r[0][1]-e[1]),Math.atan2(r[1][0]-e[0],r[1][1]-e[1])],a=(l[0]-l[1])/2,s=[Math.sqrt((r[0][0]-e[0])*(r[0][0]-e[0])+(r[0][1]-e[1])*(r[0][1]-e[1])),Math.sqrt((r[1][0]-e[0])*(r[1][0]-e[0])+(r[1][1]-e[1])*(r[1][1]-e[1]))],c=[e],u=1;for(let t=0;t<o;t++){let t=[],e=[];n.lineWidth=20*u+1;let r=139*Math.sqrt(u),o=69*Math.sqrt(u)+128*(1-Math.sqrt(u)),d=19*Math.sqrt(u);n.strokeStyle=`rgb(${r}, ${o}, ${d})`;for(let r=0;r<c.length;r++){let o=c[r][1],d=c[r][0],i=c[r][1]+s[0]*u*Math.cos(l[2*r]),h=c[r][0]+s[0]*u*Math.sin(l[2*r]);n.beginPath(),n.moveTo(o,d),n.lineTo(i,h),n.stroke(),t.push([h,i]),e.push(l[2*r]-a),e.push(l[2*r]+a),o=c[r][1],d=c[r][0],i=c[r][1]+s[1]*u*Math.cos(l[2*r+1]),h=c[r][0]+s[1]*u*Math.sin(l[2*r+1]),n.beginPath(),n.moveTo(o,d),n.lineTo(i,h),n.stroke(),t.push([h,i]),e.push(l[2*r+1]-a),e.push(l[2*r+1]+a)}c=t,l=e,u*=.675}}function i(t){s=-1;for(let e=0;e<2;e++)if(t.target.id===`branch-marker-${e}`){t.preventDefault(),s=e;try{l.terminate()}catch(t){}break}}function h(o){if(-1!==s){document.body.style.WebkitUserSelect="",set_element_styles(".branch-marker","opacity",0);let o=0,a=setInterval(function(){n.fillStyle=`rgba(0, 0, 0, ${o/37})`,n.fillRect(0,0,t,t),o++},8);setTimeout(function(){clearInterval(a),n.fillStyle="rgb(0, 0, 0)",n.fillRect(0,0,t,t),function(){try{l.terminate()}catch(t){}l=DEBUG?new Worker("/applets/binary-trees/scripts/worker.js"):new Worker("/applets/binary-trees/scripts/worker.min.js"),temporary_web_workers.push(l),l.onmessage=function(t){"done"!==t.data[0]?(n.strokeStyle=t.data[4],n.lineWidth=t.data[5],n.beginPath(),n.moveTo(t.data[0],t.data[1]),n.lineTo(t.data[2],t.data[3]),n.stroke()):setTimeout(function(){set_element_styles(".branch-marker","opacity",1)},500)},l.postMessage([e,r])}()},300)}s=-1}function m(e){if(-1===s)return;let o=null,n=null,l=document.querySelector("#branch-selector").getBoundingClientRect();"touchmove"===e.type?(o=e.touches[0].clientY-l.top,n=e.touches[0].clientX-l.left):(o=e.clientY-l.top,n=e.clientX-l.left),o<24&&(o=24),o>u-24&&(o=u-24),n<24&&(n=24),n>c-24&&(n=c-24),a[s].style.transform=`translate3d(${n-24}px, ${o-24}px, 0)`,r[s][0]=o/u*t,r[s][1]=n/c*t,d()}function f(){c=document.querySelector("#branch-selector").offsetWidth,u=document.querySelector("#branch-selector").offsetHeight;document.querySelector("#branch-selector").getBoundingClientRect();for(let e=0;e<2;e++){let o=Math.floor(u*r[e][0]/t),n=Math.floor(c*r[e][1]/t);a[e].style.transform=`translate3d(${n-24}px, ${o-24}px, 0)`}}document.querySelector("#binary-trees-plot").setAttribute("width",t),document.querySelector("#binary-trees-plot").setAttribute("height",t),n.fillStyle="rgb(0, 0, 0)",n.fillRect(0,0,t,t),document.querySelector("#download-button").addEventListener("click",function(){let t=document.createElement("a");t.download="binary-trees.png",t.href=document.querySelector("#binary-trees-plot").toDataURL(),t.click(),t.remove()}),function(){1===url_vars.contrast&&(1===url_vars.theme?document.querySelector("#binary-trees-plot").style.borderColor="rgb(192, 192, 192)":document.querySelector("#binary-trees-plot").style.borderColor="rgb(64, 64, 64)");add_style("\n\t\t\t.branch-marker.hover\n\t\t\t{\n\t\t\t\tbackground-color: rgb(127, 127, 127);\t\n\t\t\t}\n\t\t\t\n\t\t\t.branch-marker:not(:hover):focus\n\t\t\t{\n\t\t\t\tbackground-color: rgb(127, 127, 127);\n\t\t\t\toutline: none;\n\t\t\t}\n\t\t",!0)}(),document.documentElement.addEventListener("touchstart",i,!1),document.documentElement.addEventListener("touchmove",m,!1),document.documentElement.addEventListener("touchend",h,!1),document.documentElement.addEventListener("mousedown",i,!1),document.documentElement.addEventListener("mousemove",m,!1),document.documentElement.addEventListener("mouseup",h,!1),temporary_handlers.touchstart.push(i),temporary_handlers.touchmove.push(m),temporary_handlers.touchend.push(h),temporary_handlers.mousedown.push(i),temporary_handlers.mousemove.push(m),temporary_handlers.mouseup.push(h),function(){e[0]=Math.floor(9*t/10),e[1]=Math.floor(t/2);for(let t=0;t<2;t++){let e=document.createElement("div");e.classList.add("branch-marker"),e.id=`branch-marker-${t}`,document.querySelector("#branch-selector").appendChild(e),a.push(e),r.push([0,0])}r[0][0]=Math.floor(2*t/3),r[0][1]=Math.floor(3*t/7),r[1][0]=Math.floor(2*t/3),r[1][1]=Math.floor(4*t/7);for(let e=0;e<2;e++){let o=r[e][0]/t*u,n=r[e][1]/t*c;a[e].style.transform=`translate3d(${n-24}px, ${o-24}px, 0)`}d()}(),window.addEventListener("resize",f),temporary_handlers.resize.push(f),setTimeout(f,1e3)}();