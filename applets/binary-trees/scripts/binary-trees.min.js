!function(){"use strict";let e=2e3,t=2e3,r=[],o=[],n=5,a=document.querySelector("#binary-trees-plot").getContext("2d",{alpha:!1}),l=null,s=[],c=-1,i=document.querySelector("#branch-selector").offsetWidth,u=document.querySelector("#branch-selector").offsetHeight,h=17.5;function d(){a.fillStyle="rgb(0, 0, 0)",a.fillRect(0,0,e,t);let l=[Math.atan2(o[0][0]-r[0],o[0][1]-r[1]),Math.atan2(o[1][0]-r[0],o[1][1]-r[1])],s=(l[0]-l[1])/2,c=[Math.sqrt((o[0][0]-r[0])*(o[0][0]-r[0])+(o[0][1]-r[1])*(o[0][1]-r[1])),Math.sqrt((o[1][0]-r[0])*(o[1][0]-r[0])+(o[1][1]-r[1])*(o[1][1]-r[1]))],i=[r],u=1;for(let e=0;e<n;e++){let e=[],t=[];a.lineWidth=20*u+1;let r=139*Math.sqrt(u),o=69*Math.sqrt(u)+128*(1-Math.sqrt(u)),n=19*Math.sqrt(u);a.strokeStyle=`rgb(${r}, ${o}, ${n})`;for(let r=0;r<i.length;r++){let o=i[r][1],n=i[r][0],h=i[r][1]+c[0]*u*Math.cos(l[2*r]),d=i[r][0]+c[0]*u*Math.sin(l[2*r]);a.beginPath(),a.moveTo(o,n),a.lineTo(h,d),a.stroke(),e.push([d,h]),t.push(l[2*r]-s),t.push(l[2*r]+s),o=i[r][1],n=i[r][0],h=i[r][1]+c[1]*u*Math.cos(l[2*r+1]),d=i[r][0]+c[1]*u*Math.sin(l[2*r+1]),a.beginPath(),a.moveTo(o,n),a.lineTo(h,d),a.stroke(),e.push([d,h]),t.push(l[2*r+1]-s),t.push(l[2*r+1]+s)}i=e,l=t,u*=.675}}function m(e){c=-1;for(let t=0;t<2;t++)if(e.target.id===`branch-marker-${t}`){e.preventDefault(),c=t;try{l.terminate()}catch(e){}break}}function p(n){if(-1!==c){document.body.style.WebkitUserSelect="",Page.set_element_styles(".branch-marker","opacity",0);let n=0,s=setInterval(function(){a.fillStyle=`rgba(0, 0, 0, ${n/37})`,a.fillRect(0,0,e,t),n++},8);setTimeout(function(){clearInterval(s),a.fillStyle="rgb(0, 0, 0)",a.fillRect(0,0,e,t),function(){try{l.terminate()}catch(e){}l=DEBUG?new Worker("/applets/binary-trees/scripts/worker.js"):new Worker("/applets/binary-trees/scripts/worker.min.js"),Page.temporary_web_workers.push(l),l.onmessage=function(e){"done"!==e.data[0]?(a.strokeStyle=e.data[4],a.lineWidth=e.data[5],a.beginPath(),a.moveTo(e.data[0],e.data[1]),a.lineTo(e.data[2],e.data[3]),a.stroke()):setTimeout(function(){Page.set_element_styles(".branch-marker","opacity",1)},500)},l.postMessage([r,o])}()},300)}c=-1}function f(r){if(-1===c)return;let n=null,a=null,l=document.querySelector("#branch-selector").getBoundingClientRect();"touchmove"===r.type?(n=r.touches[0].clientY-l.top,a=r.touches[0].clientX-l.left):(n=r.clientY-l.top,a=r.clientX-l.left),n<h&&(n=h),n>u-h&&(n=u-h),a<h&&(a=h),a>i-h&&(a=i-h),s[c].style.transform=`translate3d(${a-h}px, ${n-h}px, 0)`,o[c][0]=n/u*t,o[c][1]=a/i*e,d()}function y(){i=document.querySelector("#branch-selector").offsetWidth,u=document.querySelector("#branch-selector").offsetHeight;document.querySelector("#branch-selector").getBoundingClientRect();for(let r=0;r<2;r++){let n=Math.floor(u*o[r][0]/t),a=Math.floor(i*o[r][1]/e);s[r].style.transform=`translate3d(${a-h}px, ${n-h}px, 0)`}}document.querySelector("#binary-trees-plot").setAttribute("width",e),document.querySelector("#binary-trees-plot").setAttribute("height",t),a.fillStyle="rgb(0, 0, 0)",a.fillRect(0,0,e,t),document.querySelector("#download-button").addEventListener("click",function(){let e=document.createElement("a");e.download="binary-trees.png",e.href=document.querySelector("#binary-trees-plot").toDataURL(),e.click(),e.remove()}),function(){1===Site.Settings.url_vars.contrast&&(1===Site.Settings.url_vars.theme?document.querySelector("#binary-trees-plot").style.borderColor="rgb(192, 192, 192)":document.querySelector("#binary-trees-plot").style.borderColor="rgb(64, 64, 64)");Site.add_style("\n\t\t\t.branch-marker.hover\n\t\t\t{\n\t\t\t\tbackground-color: rgb(127, 127, 127);\t\n\t\t\t}\n\t\t\t\n\t\t\t.branch-marker:not(:hover):focus\n\t\t\t{\n\t\t\t\tbackground-color: rgb(127, 127, 127);\n\t\t\t\toutline: none;\n\t\t\t}\n\t\t",!0)}(),document.documentElement.addEventListener("touchstart",m,!1),document.documentElement.addEventListener("touchmove",f,!1),document.documentElement.addEventListener("touchend",p,!1),document.documentElement.addEventListener("mousedown",m,!1),document.documentElement.addEventListener("mousemove",f,!1),document.documentElement.addEventListener("mouseup",p,!1),Page.temporary_handlers.touchstart.push(m),Page.temporary_handlers.touchmove.push(f),Page.temporary_handlers.touchend.push(p),Page.temporary_handlers.mousedown.push(m),Page.temporary_handlers.mousemove.push(f),Page.temporary_handlers.mouseup.push(p),function(){r[0]=Math.floor(9*t/10),r[1]=Math.floor(e/2);for(let e=0;e<2;e++){let t=document.createElement("div");t.classList.add("branch-marker"),t.classList.add("no-floating-footer"),t.id=`branch-marker-${e}`,document.querySelector("#branch-selector").appendChild(t),s.push(t),o.push([0,0])}o[0][0]=Math.floor(2*t/3),o[0][1]=Math.floor(3*e/7),o[1][0]=Math.floor(2*t/3),o[1][1]=Math.floor(4*e/7);for(let r=0;r<2;r++){let n=o[r][0]/t*u,a=o[r][1]/e*i;s[r].style.transform=`translate3d(${a-h}px, ${n-h}px, 0)`}d()}(),window.addEventListener("resize",y),Page.temporary_handlers.resize.push(y),setTimeout(y,1e3),"Chrome"!==Browser.name&&"Opera"!==Browser.name||function(){let e=document.querySelector("main").children;(e=e[e.length-1].children)[e.length-1].insertAdjacentHTML("afterend",'\n\t\t\t<div data-aos="fade-up" style="margin-top: 10vh">\n\t\t\t\t<p class="body-text">\n\t\t\t\t\tYour browser treats canvases in a way that may make this applet stutter excessively. If this happens, try temporarily turning off hardware acceleration in the browser&#x2019;s settings.\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t'),Page.Load.AOS.on_resize()}(),Page.Applets.Canvases.to_resize=[document.querySelector("#binary-trees-plot"),document.querySelector("#branch-selector")],Page.Applets.Canvases.resize_callback=function(){try{l.terminate()}catch(e){}Page.set_element_styles(".branch-marker","opacity",1),Page.Applets.Canvases.is_fullscreen?Page.Layout.aspect_ratio>=1?(e=2e3,t=Math.floor(2e3/Page.Layout.aspect_ratio)):(e=Math.floor(2e3*Page.Layout.aspect_ratio),t=2e3):(e=2e3,t=2e3),i=document.querySelector("#branch-selector").offsetWidth,u=document.querySelector("#branch-selector").offsetHeight,document.querySelector("#binary-trees-plot").setAttribute("width",e),document.querySelector("#binary-trees-plot").setAttribute("height",t),a.fillStyle="rgb(0, 0, 0)",a.fillRect(0,0,e,t),r[0]=Math.floor(9*t/10),r[1]=Math.floor(e/2),o[0][0]=Math.floor(2*t/3),o[0][1]=Math.floor(3*e/7),o[1][0]=Math.floor(2*t/3),o[1][1]=Math.floor(4*e/7),y(),d()},Page.Applets.Canvases.true_fullscreen=!0,Page.Applets.Canvases.set_up_resizer()}();