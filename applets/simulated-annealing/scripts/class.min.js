class SimulatedAnnealing extends Applet{webWorker=null;resolution=null;numNodes=null;maximumSpeed=null;constructor(b){super(b);this.wilson=new Wilson(b,{renderer:"cpu",canvasWidth:1E3,canvasHeight:1E3,useFullscreen:!0,useFullscreenButton:!0,enterFullscreenButtonIconPath:"/graphics/general-icons/enter-fullscreen.png",exitFullscreenButtonIconPath:"/graphics/general-icons/exit-fullscreen.png"})}run(b,d,e){this.resolution=b;this.numNodes=d;this.maximumSpeed=e;const c=b/1E3;this.wilson.changeCanvasSize(b,
b);this.wilson.ctx.fillStyle="rgb(0, 0, 0)";this.wilson.ctx.fillRect(0,0,b,b);this.wilson.ctx.lineWidth=c;try{this.webWorker.terminate()}catch(a){}this.webWorker=new Worker(`/applets/simulated-annealing/scripts/worker.${DEBUG?"":"min."}js`);this.workers.push(this.webWorker);this.webWorker.onmessage=a=>{0===a.data[0]?(this.wilson.ctx.fillStyle=a.data[4],this.wilson.ctx.beginPath(),this.wilson.ctx.moveTo(a.data[1],a.data[2]),this.wilson.ctx.arc(a.data[1],a.data[2],a.data[3]*c,0,2*Math.PI,!1),this.wilson.ctx.fill()):
1===a.data[0]?(this.wilson.ctx.strokeStyle=a.data[5],this.wilson.ctx.beginPath(),this.wilson.ctx.moveTo(a.data[1],a.data[2]),this.wilson.ctx.lineTo(a.data[3],a.data[4]),this.wilson.ctx.stroke()):(this.wilson.ctx.fillStyle="rgb(0, 0, 0)",this.wilson.ctx.fillRect(0,0,this.resolution,this.resolution))};this.webWorker.postMessage([this.resolution,this.numNodes,this.maximumSpeed])}};
