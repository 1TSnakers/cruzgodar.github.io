import{Applet}from"/scripts/src/applets.min.mjs";class SimulatedAnnealing extends Applet{webWorker=null;resolution=null;numNodes=null;maximumSpeed=null;constructor(t){super(t);this.wilson=new Wilson(t,{renderer:"cpu",canvasWidth:1e3,canvasHeight:1e3,useFullscreen:!0,useFullscreenButton:!0,enterFullscreenButtonIconPath:"/graphics/general-icons/enter-fullscreen.png",exitFullscreenButtonIconPath:"/graphics/general-icons/exit-fullscreen.png"})}run(t,e,s){this.resolution=t,this.numNodes=e,this.maximumSpeed=s;const i=t/1e3;this.wilson.changeCanvasSize(t,t),this.wilson.ctx.fillStyle="rgb(0, 0, 0)",this.wilson.ctx.fillRect(0,0,t,t),this.wilson.ctx.lineWidth=i;try{this.webWorker.terminate()}catch(t){}this.webWorker=new Worker("/applets/simulated-annealing/scripts/worker.min.js"),this.workers.push(this.webWorker),this.webWorker.onmessage=t=>{0===t.data[0]?(this.wilson.ctx.fillStyle=t.data[4],this.wilson.ctx.beginPath(),this.wilson.ctx.moveTo(t.data[1],t.data[2]),this.wilson.ctx.arc(t.data[1],t.data[2],t.data[3]*i,0,2*Math.PI,!1),this.wilson.ctx.fill()):1===t.data[0]?(this.wilson.ctx.strokeStyle=t.data[5],this.wilson.ctx.beginPath(),this.wilson.ctx.moveTo(t.data[1],t.data[2]),this.wilson.ctx.lineTo(t.data[3],t.data[4]),this.wilson.ctx.stroke()):(this.wilson.ctx.fillStyle="rgb(0, 0, 0)",this.wilson.ctx.fillRect(0,0,this.resolution,this.resolution))},this.webWorker.postMessage([this.resolution,this.numNodes,this.maximumSpeed])}}export{SimulatedAnnealing};