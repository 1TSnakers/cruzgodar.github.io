import{HairyBall}from"./class.min.js";import{parseNaturalGlsl}from"/scripts/applets/applet.min.js";import{DownloadButton,GenerateButton}from"/scripts/components/buttons.min.js";import{Checkbox}from"/scripts/components/checkboxes.min.js";import{Dropdown}from"/scripts/components/dropdowns.min.js";import{Slider}from"/scripts/components/sliders.min.js";import{Textarea}from"/scripts/components/textareas.min.js";import{TextBox}from"/scripts/components/textBoxes.min.js";import{$}from"/scripts/src/main.min.js";import{siteSettings}from"/scripts/src/settings.min.js";export default function(){const e=new TextBox({element:$("#resolution-input"),name:"Resolution",value:1e3,minValue:100,maxValue:2e3,onInput:function(){r.wilson.resizeCanvas({width:e.value*siteSettings.resolutionMultiplier})}}),t=new TextBox({element:$("#vector-field-resolution-input"),name:"Vector Field Resolution",value:1e3,minValue:100,maxValue:1500,onInput:u}),n=new Slider({element:$("#vector-field-dilation-slider"),name:"Vector Field Dilation",value:2,min:0,max:3,integer:!0,onInput:u}),o=new Checkbox({element:$("#raw-glsl-checkbox"),name:"Use raw GLSL"}),l={sources:"(x - z, y - z)",saddles:"(x, y)",sinks:"(1 / (x + 2), 1 / (y + 2))",circulation:"(x^2 - z, -y^3 - z)"},s={sources:"(x - z, y - z)",saddles:"(x, y)",sinks:"(1.0 / (x + 2.0), 1.0 / (y + 2.0))",circulation:"(x^2 - z, -y^3 - z)"},i=new Dropdown({element:$("#examples-dropdown"),name:"Examples",options:{sources:"Sources",saddles:"Saddles",sinks:"Sinks",circulation:"Circulation"},onInput:function(){i.value&&(a.setValue((o.checked?s:l)[i.value]),u())}}),a=new Textarea({element:$("#glsl-textarea"),name:"Generating Code",value:"(x - z, y - z)",onInput:()=>{i.value&&i.setValue({newValue:"default"})},onEnter:u}),r=new HairyBall({canvas:$("#output-canvas"),vectorFieldGeneratingCode:o.checked?a.value:parseNaturalGlsl(a.value),vectorFieldAppletResolution:t.value*siteSettings.resolutionMultiplier,vectorFieldDilation:n.value});function u(){var e=o.checked?a.value:parseNaturalGlsl(a.value);r.vectorFieldAppletResolution=t.value*siteSettings.resolutionMultiplier,r.vectorFieldDilation=n.value,r.runVectorField(e)}new GenerateButton({element:$("#generate-button"),onClick:u}),new DownloadButton({element:$("#download-button"),applet:r,filename:()=>"a-hairy-ball.png"})}