"use strict";onmessage=async function(e){null===hardmode&&(hardmode=e.data[1]),correct_solution=e.data[2],grade_submission(e.data[0])};let correct_solution=null,hardmode=null,first_guess=!0,valid_guesses=[],valid_solutions=[];function grade_submission(e){if(first_guess&&(-1===valid_guesses.indexOf(correct_solution)&&valid_guesses.push(correct_solution),-1===valid_solutions.indexOf(correct_solution)&&valid_solutions.push(correct_solution)),-1===valid_guesses.indexOf(e))return void postMessage([-1]);let l=new Array(valid_solutions.length);for(let e=0;e<l.length;e++){let s=Math.floor(Math.random()*valid_solutions.length);l[e]=valid_solutions[s],valid_solutions.splice(s,1)}for(let e=0;e<l.length;e++)valid_solutions.push(l[e]);let s=[];if(first_guess)s=[["raise",5.11],["irate",5.08],["arise",5.06],["arose",4.97],["saner",4.96],["null!",3],["puppy",1.57],["mamma",1.56],["vivid",1.51],["mummy",1.5],["fuzzy",1.44]];else{s=new Array(valid_solutions.length);for(let e=0;e<valid_solutions.length;e++){let t=new Array(l.length);for(let s=0;s<l.length;s++)t[s]=score_word(valid_solutions[e],l[s]);let o=0;for(let e=0;e<l.length;e++)for(let s=0;s<l.length;s++){let l=!0;for(let o=0;o<5;o++)if(t[e][o]!==t[s][o]){l=!1;break}l&&o++}s[e]=[valid_solutions[e],-Math.log(o/(l.length*l.length))/Math.log(2)]}}let t=new Array(l.length);for(let s=0;s<l.length;s++)t[s]=score_word(e,l[s]);let o=0;for(let e=0;e<l.length;e++)for(let s=0;s<l.length;s++){let l=!0;for(let o=0;o<5;o++)if(t[e][o]!==t[s][o]){l=!1;break}l&&o++}let i=-Math.log(o/(l.length*l.length))/Math.log(2);s.sort((e,l)=>e[1]-l[1]);let r=0,n=s.length-1,a=[],u=[];for(;r<5&&n>=0;)-1!==valid_solutions.indexOf(s[n][0])&&(a.push(s[n]),r++),n--;if(n>0){r=0;let e=0;for(;r<5&&e<n;)-1!==valid_solutions.indexOf(s[e][0])&&(u.push(s[e]),r++),e++}let d=score_word(e,correct_solution);for(let l=0;l<valid_solutions.length;l++){let s=score_word(e,valid_solutions[l]),t=!0;for(let e=0;e<5;e++)if(d[e]!==s[e]){t=!1;break}t||(valid_solutions.splice(l,1),l--)}if(hardmode)for(let l=0;l<valid_guesses.length;l++){let s=score_word(e,valid_guesses[l]),t=!0;for(let e=0;e<5;e++)if(d[e]!==s[e]){t=!1;break}t||(valid_guesses.splice(l,1),l--)}first_guess=!1,postMessage([i,d,a,u])}function score_word(e,l){let s=[0,0,0,0,0],t=l.split("");for(let l=0;l<5;l++)e[l]===t[l]&&(s[l]=2,t[l]="_");for(let l=0;l<5;l++)if(e[l]!==t[l])for(let o=0;o<5;o++)if(o!==l&&e[l]===t[o]){s[l]=1,t[o]="_";break}return s}fetch("/applets/wordle-scorer/scripts/data.json").then(e=>e.json()).then(e=>{valid_solutions=e.solutions,valid_guesses=e.guesses});