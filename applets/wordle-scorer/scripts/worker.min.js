"use strict";onmessage=async function(e){num_words_to_evaluate=e.data[1],null===hardmode&&(hardmode=e.data[2]),grade_submission(e.data[0])};let correct_solution=null,num_words_to_evaluate=300,hardmode=null,valid_guesses=[],valid_solutions=[];function grade_submission(e){if(-1===valid_guesses.indexOf(e))return void postMessage([-1]);let l=new Array(Math.min(num_words_to_evaluate,valid_solutions.length));for(let e=0;e<l.length;e++){let t=Math.floor(Math.random()*valid_solutions.length);l[e]=valid_solutions[t],valid_solutions.splice(t,1)}for(let e=0;e<l.length;e++)valid_solutions.push(l[e]);let t=new Array(valid_solutions.length);for(let e=0;e<valid_solutions.length;e++){let o=new Array(l.length);for(let t=0;t<l.length;t++)o[t]=score_word(valid_solutions[e],l[t]);let s=0;for(let e=0;e<l.length;e++)for(let t=0;t<l.length;t++){let l=!0;for(let s=0;s<5;s++)if(o[e][s]!==o[t][s]){l=!1;break}l&&s++}t[e]=[valid_solutions[e],-Math.log(s/(l.length*l.length))/Math.log(2)]}let o=new Array(l.length);for(let t=0;t<l.length;t++)o[t]=score_word(e,l[t]);let s=0;for(let e=0;e<l.length;e++)for(let t=0;t<l.length;t++){let l=!0;for(let s=0;s<5;s++)if(o[e][s]!==o[t][s]){l=!1;break}l&&s++}let n=-Math.log(s/(l.length*l.length))/Math.log(2);t.sort((e,l)=>e[1]-l[1]);let r=0,i=t.length-1,a=[],d=[];for(;r<5&&i>=0;)-1!==valid_solutions.indexOf(t[i][0])&&(a.push(t[i]),r++),i--;if(i>0){r=0;let e=0;for(;r<5&&e<i;)-1!==valid_solutions.indexOf(t[e][0])&&(d.push(t[e]),r++),e++}let u=score_word(e,correct_solution);for(let l=0;l<valid_solutions.length;l++){let t=score_word(e,valid_solutions[l]),o=!0;for(let e=0;e<5;e++)if(u[e]!==t[e]){o=!1;break}o||(valid_solutions.splice(l,1),l--)}if(hardmode)for(let l=0;l<valid_guesses.length;l++){let t=score_word(e,valid_guesses[l]),o=!0;for(let e=0;e<5;e++)if(u[e]!==t[e]){o=!1;break}o||(valid_guesses.splice(l,1),l--)}postMessage([n,u,a,d])}function score_word(e,l){let t=[0,0,0,0,0],o=l.split("");for(let l=0;l<5;l++)e[l]===o[l]&&(t[l]=2,o[l]="_");for(let l=0;l<5;l++)if(e[l]!==o[l])for(let s=0;s<5;s++)if(s!==l&&e[l]===o[s]){t[l]=1,o[s]="_";break}return t}fetch("/applets/wordle-scorer/scripts/data.json").then(e=>e.json()).then(e=>{valid_solutions=e.solutions,valid_guesses=e.guesses,correct_solution=valid_solutions[Math.floor((Date.now()-288e5)/864e5)-18797]});