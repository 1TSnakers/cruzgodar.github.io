import{FractalSounds}from"./class.min.mjs";import{showPage}from"/scripts/src/load-page.min.mjs";import{$}from"/scripts/src/main.min.mjs";function load(){const o=new FractalSounds($("#output-canvas"),$("#line-drawer-canvas")),r=(o.loadPromise.then(()=>t()),{mandelbrot:["cmul(z, z) + c",(t,e,a,n)=>[t*t-e*e+a,2*t*e+n]],sfx:["cmul(z, dot(z, z)) - cmul(z, c*c)",(t,e,a,n)=>[t*t*t+t*e*e-t*a*a+e*n*n,t*t*e-t*n*n+e*e*e-e*a*a]],"burning-ship":["-vec2(z.x * z.x - z.y * z.y, 2.0 * abs(z.x * z.y)) + c",(t,e,a,n)=>[-(t*t-e*e)+a,-2*Math.abs(t*e)+n]],feather:["cdiv(cmul(cmul(z, z), z), ONE + z*z) + c",(t,e,a,n)=>[a+(t*t*t*t*t+t*t*t*(1-3*e*e)+3*t*t*e*e*e-3*t*e*e-e*e*e*e*e)/(t*t*t*t+2*t*t+e*e*e*e+1),n+e*(3*t*t*t*t-t*t*t*e-t*t*(e*e-3)+3*t*e*e*e-e*e)/(t*t*t*t+2*t*t+e*e*e*e+1)]],duffing:["vec2(z.y, -c.y * z.x + c.x * z.y - z.y * z.y * z.y)",(t,e,a,n)=>[e,-n*t+a*e-e*e*e]],ikeda:["vec2(1.0 + c.x * (z.x * cos(.4 - 6.0 / (1.0 + dot(z, z))) - z.y * sin(.4 - 6.0 / (1.0 + dot(z, z)))), c.y * (z.x * sin(.4 - 6.0 / (1.0 + dot(z, z))) + z.y * cos(.4 - 6.0 / (1.0 + dot(z, z)))))",(t,e,a,n)=>[1+a*(t*Math.cos(.4-6/(1+t*t+e*e))-e*Math.sin(.4-6/(1+t*t+e*e))),n*(t*Math.sin(.4-6/(1+t*t+e*e))+e*Math.cos(.4-6/(1+t*t+e*e)))]]}),c=$("#fractal-selector-dropdown"),i=(c.addEventListener("input",t),$("#resolution-input")),u=$("#exposure-input"),l=$("#num-iterations-input");function t(){var t=r[c.value][0],e=r[c.value][1],a=parseInt(i.value||500),n=parseFloat(u.value||1),s=parseInt(l.value||200);o.run({glslCode:t,jsCode:e,resolution:a,exposure:n,numIterations:s})}o.setInputCaps([i,l],[2e3,500]),i.addEventListener("input",()=>{o.resolution=parseInt(i.value||500),o.changeAspectRatio(!0)}),u.addEventListener("input",()=>{o.exposure=parseFloat(u.value||1)}),l.addEventListener("input",()=>{o.numIterations=parseInt(l.value||200)}),$("#download-button").addEventListener("click",()=>{o.wilson.downloadFrame("a-sound-fractal.png")}),showPage()}export{load};