"use strict";!async function(){await Site.loadApplet("fractal-sounds");let e=new FractalSounds(Page.element.querySelector("#output-canvas"),Page.element.querySelector("#line-drawer-canvas"));function t(){let t=n[l.value][0],a=n[l.value][1],r=parseInt(o.value||500),s=parseFloat(u.value||1),i=parseInt(c.value||200);e.run(t,a,r,s,i)}e.loadPromise.then(()=>t());let n={mandelbrot:["cmul(z, z) + c",(e,t,n,l)=>[e*e-t*t+n,2*e*t+l]],sfx:["cmul(z, dot(z, z)) - cmul(z, c*c)",(e,t,n,l)=>[e*e*e+e*t*t-e*n*n+t*l*l,e*e*t-e*l*l+t*t*t-t*n*n]],"burning-ship":["-vec2(z.x * z.x - z.y * z.y, 2.0 * abs(z.x * z.y)) + c",(e,t,n,l)=>[-(e*e-t*t)+n,-(2*Math.abs(e*t))+l]],feather:["cdiv(cmul(cmul(z, z), z), ONE + z*z) + c",(e,t,n,l)=>[n+(e*e*e*e*e+e*e*e*(1-3*t*t)+3*e*e*t*t*t-3*e*t*t-t*t*t*t*t)/(e*e*e*e+2*e*e+t*t*t*t+1),l+t*(3*e*e*e*e-e*e*e*t-e*e*(t*t-3)+3*e*t*t*t-t*t)/(e*e*e*e+2*e*e+t*t*t*t+1)]],duffing:["vec2(z.y, -c.y * z.x + c.x * z.y - z.y * z.y * z.y)",(e,t,n,l)=>[t,-l*e+n*t-t*t*t]],ikeda:["vec2(1.0 + c.x * (z.x * cos(.4 - 6.0 / (1.0 + dot(z, z))) - z.y * sin(.4 - 6.0 / (1.0 + dot(z, z)))), c.y * (z.x * sin(.4 - 6.0 / (1.0 + dot(z, z))) + z.y * cos(.4 - 6.0 / (1.0 + dot(z, z)))))",(e,t,n,l)=>[1+n*(e*Math.cos(.4-6/(1+e*e+t*t))-t*Math.sin(.4-6/(1+e*e+t*t))),l*(e*Math.sin(.4-6/(1+e*e+t*t))+t*Math.cos(.4-6/(1+e*e+t*t)))]]},l=Page.element.querySelector("#fractal-selector-dropdown");l.addEventListener("input",t);let o=Page.element.querySelector("#resolution-input");o.addEventListener("input",()=>{e.resolution=parseInt(o.value||500),e.changeAspectRatio(!0)});let u=Page.element.querySelector("#exposure-input");u.addEventListener("input",()=>{e.exposure=parseFloat(u.value||1)});let c=Page.element.querySelector("#num-iterations-input");c.addEventListener("input",()=>{e.numIterations=parseInt(c.value||200)});let a=Page.element.querySelector("#download-button");a.addEventListener("click",()=>{e.wilson.downloadFrame("a-sound-fractal.png")}),Page.show()}();