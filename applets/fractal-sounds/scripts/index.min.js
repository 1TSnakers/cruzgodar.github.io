"use strict";!async function(){await Site.loadApplet("fractal-sounds");let e=new FractalSounds($("#output-canvas"),$("#line-drawer-canvas"));function t(){let t=n[a.value][0],c=n[a.value][1],i=parseInt(s.value||500),z=parseFloat(u.value||1),l=parseInt(o.value||200);e.run(t,c,i,z,l)}e.loadPromise.then(()=>t());let n={mandelbrot:["cmul(z, z) + c",(e,t,n,a)=>[e*e-t*t+n,2*e*t+a]],sfx:["cmul(z, dot(z, z)) - cmul(z, c*c)",(e,t,n,a)=>[e*e*e+e*t*t-e*n*n+t*a*a,e*e*t-e*a*a+t*t*t-t*n*n]],"burning-ship":["-vec2(z.x * z.x - z.y * z.y, 2.0 * abs(z.x * z.y)) + c",(e,t,n,a)=>[-(e*e-t*t)+n,-(2*Math.abs(e*t))+a]],feather:["cdiv(cmul(cmul(z, z), z), ONE + z*z) + c",(e,t,n,a)=>[n+(e*e*e*e*e+e*e*e*(1-3*t*t)+3*e*e*t*t*t-3*e*t*t-t*t*t*t*t)/(e*e*e*e+2*e*e+t*t*t*t+1),a+t*(3*e*e*e*e-e*e*e*t-e*e*(t*t-3)+3*e*t*t*t-t*t)/(e*e*e*e+2*e*e+t*t*t*t+1)]],duffing:["vec2(z.y, -c.y * z.x + c.x * z.y - z.y * z.y * z.y)",(e,t,n,a)=>[t,-a*e+n*t-t*t*t]],ikeda:["vec2(1.0 + c.x * (z.x * cos(.4 - 6.0 / (1.0 + dot(z, z))) - z.y * sin(.4 - 6.0 / (1.0 + dot(z, z)))), c.y * (z.x * sin(.4 - 6.0 / (1.0 + dot(z, z))) + z.y * cos(.4 - 6.0 / (1.0 + dot(z, z)))))",(e,t,n,a)=>[1+n*(e*Math.cos(.4-6/(1+e*e+t*t))-t*Math.sin(.4-6/(1+e*e+t*t))),a*(e*Math.sin(.4-6/(1+e*e+t*t))+t*Math.cos(.4-6/(1+e*e+t*t)))]]},a=$("#fractal-selector-dropdown");a.addEventListener("input",t);let s=$("#resolution-input"),u=$("#exposure-input"),o=$("#num-iterations-input");e.setInputCaps([s,o],[2e3,500]),s.addEventListener("input",()=>{e.resolution=parseInt(s.value||500),e.changeAspectRatio(!0)}),u.addEventListener("input",()=>{e.exposure=parseFloat(u.value||1)}),o.addEventListener("input",()=>{e.numIterations=parseInt(o.value||200)});let c=$("#download-button");c.addEventListener("click",()=>{e.wilson.downloadFrame("a-sound-fractal.png")}),Page.show()}();