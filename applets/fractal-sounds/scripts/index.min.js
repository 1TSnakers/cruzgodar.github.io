!async function(){function l(){const a=m[h.value][0],b=m[h.value][1],c=parseInt(f.value||500),d=parseFloat(k.value||1),n=parseInt(g.value||200);e.run(a,b,c,d,n)}await Applet.load("fractal-sounds");const e=new FractalSounds($("#output-canvas"),$("#line-drawer-canvas"));e.loadPromise.then(()=>l());const m={mandelbrot:["cmul(z, z) + c",(a,b,c,d)=>[a*a-b*b+c,2*a*b+d]],sfx:["cmul(z, dot(z, z)) - cmul(z, c*c)",(a,b,c,d)=>[a*a*a+a*b*b-a*c*c+b*d*d,a*a*b-a*d*d+b*b*b-b*c*c]],"burning-ship":["-vec2(z.x * z.x - z.y * z.y, 2.0 * abs(z.x * z.y)) + c",
(a,b,c,d)=>[-(a*a-b*b)+c,-(2*Math.abs(a*b))+d]],feather:["cdiv(cmul(cmul(z, z), z), ONE + z*z) + c",(a,b,c,d)=>[c+(a*a*a*a*a+a*a*a*(1-3*b*b)+3*a*a*b*b*b-3*a*b*b-b*b*b*b*b)/(a*a*a*a+2*a*a+b*b*b*b+1),d+b*(3*a*a*a*a-a*a*a*b-a*a*(b*b-3)+3*a*b*b*b-b*b)/(a*a*a*a+2*a*a+b*b*b*b+1)]],duffing:["vec2(z.y, -c.y * z.x + c.x * z.y - z.y * z.y * z.y)",(a,b,c,d)=>[b,-d*a+c*b-b*b*b]],ikeda:["vec2(1.0 + c.x * (z.x * cos(.4 - 6.0 / (1.0 + dot(z, z))) - z.y * sin(.4 - 6.0 / (1.0 + dot(z, z)))), c.y * (z.x * sin(.4 - 6.0 / (1.0 + dot(z, z))) + z.y * cos(.4 - 6.0 / (1.0 + dot(z, z)))))",
(a,b,c,d)=>[1+c*(a*Math.cos(.4-6/(1+a*a+b*b))-b*Math.sin(.4-6/(1+a*a+b*b))),d*(a*Math.sin(.4-6/(1+a*a+b*b))+b*Math.cos(.4-6/(1+a*a+b*b)))]]},h=$("#fractal-selector-dropdown");h.addEventListener("input",l);const f=$("#resolution-input"),k=$("#exposure-input"),g=$("#num-iterations-input");e.setInputCaps([f,g],[2E3,500]);f.addEventListener("input",()=>{e.resolution=parseInt(f.value||500);e.changeAspectRatio(!0)});k.addEventListener("input",()=>{e.exposure=parseFloat(k.value||1)});g.addEventListener("input",
()=>{e.numIterations=parseInt(g.value||200)});$("#download-button").addEventListener("click",()=>{e.wilson.downloadFrame("a-sound-fractal.png")});Page.show()}();
