import{Mandelbulb}from"./class.min.mjs";import{changeOpacity,opacityAnimationTime}from"/scripts/src/animation.min.mjs";import{equalizeTextButtons}from"/scripts/src/buttons.min.mjs";import{showPage}from"/scripts/src/load-page.min.mjs";import{$}from"/scripts/src/main.min.mjs";function load(){var t=$("#rotation-angle-x-slider");const e=$("#rotation-angle-x-slider-value");var o=$("#rotation-angle-y-slider");const i=$("#rotation-angle-y-slider-value");var n=$("#rotation-angle-z-slider");const a=$("#rotation-angle-z-slider-value");var r=$("#c-x-slider");const s=$("#c-x-slider-value");var l=$("#c-y-slider");const u=$("#c-y-slider-value");var c=$("#c-z-slider");const m=$("#c-z-slider-value"),p=new Mandelbulb({canvas:$("#output-canvas")}),d=$("#resolution-input");p.setInputCaps([d],[750]),d.addEventListener("input",()=>{var t=parseInt(d.value||500);p.changeResolution(t)});var w=$("#iterations-slider");const f=$("#iterations-slider-value");$("#download-button").addEventListener("click",()=>{p.wilson.gl.uniform1i(p.wilson.uniforms.maxMarches,1024),p.wilson.gl.uniform1f(p.wilson.uniforms.stepFactor,12),p.juliaProportion<.5?p.wilson.downloadFrame("the-mandelbulb.png"):p.wilson.downloadFrame("a-juliabulb.png"),p.wilson.gl.uniform1i(p.wilson.uniforms.maxMarches,p.maxMarches),p.wilson.gl.uniform1f(p.wilson.uniforms.stepFactor,1)});var v=$("#power-slider");const g=$("#power-slider-value"),x=([t,o,n,r,l,c,v,w].forEach(element=>element.addEventListener("input",b)),$("#switch-bulb-button"));function b(){var t=parseFloat(s.textContent),o=parseFloat(u.textContent),n=parseFloat(m.textContent);p.c=[t,o,n],p.wilson.gl.uniform3fv(p.wilson.uniforms.c,p.c),p.rotationAngleX=parseFloat(e.textContent),p.rotationAngleY=parseFloat(i.textContent),p.rotationAngleZ=parseFloat(a.textContent),p.power=parseFloat(g.textContent),p.wilson.gl.uniform1f(p.wilson.uniforms.power,p.power),p.maxIterations=parseInt(f.textContent),p.wilson.gl.uniform1i(p.wilson.uniforms.maxIterations,p.maxIterations),p.updateRotationMatrix()}x.style.opacity=1,x.addEventListener("click",function(){changeOpacity(x,0),setTimeout(()=>{p.juliaProportion<.5?x.textContent="Switch to Mandelbulb":x.textContent="Switch to Juliabulb",equalizeTextButtons(),changeOpacity(x,1)},opacityAnimationTime),p.switchBulb()}),equalizeTextButtons(),showPage()}export{load};