import{Mandelbulb}from"./class.min.mjs";import{opacityAnimationTime}from"/scripts/src/animation.min.mjs";import{equalizeTextButtons}from"/scripts/src/buttons.min.mjs";import{showPage}from"/scripts/src/load-page.min.mjs";import{$}from"/scripts/src/main.min.mjs";function load(){const i=$("#rotation-angle-x-input"),a=$("#rotation-angle-y-input"),e=$("#rotation-angle-z-input"),s=$("#c-x-input"),r=$("#c-y-input"),l=$("#c-z-input"),u=new Mandelbulb($("#output-canvas"),s,r,l,i,a,e),n=$("#resolution-input"),t=$("#view-distance-input"),o=(u.setInputCaps([n,t],[750,200]),n.addEventListener("input",()=>{var t=parseInt(n.value||500);u.changeResolution(t)}),$("#iterations-input"));o.addEventListener("input",()=>{u.maxIterations=parseInt(o.value||16),u.wilson.gl.uniform1i(u.wilson.uniforms.maxIterations,u.maxIterations)}),t.addEventListener("input",()=>{u.maxMarches=Math.max(parseInt(t.value||100),32),u.wilson.gl.uniform1i(u.wilson.uniforms.maxMarches,u.maxMarches)}),$("#download-button").addEventListener("click",()=>{u.wilson.gl.uniform1i(u.wilson.uniforms.maxMarches,1024),u.wilson.gl.uniform1f(u.wilson.uniforms.stepFactor,12),u.juliaProportion<.5?u.wilson.downloadFrame("the-mandelbulb.png"):u.wilson.downloadFrame("a-juliabulb.png"),u.wilson.gl.uniform1i(u.wilson.uniforms.maxMarches,u.maxMarches),u.wilson.gl.uniform1f(u.wilson.uniforms.stepFactor,1)});const c=$("#power-input");var m=[i,a,e,s,r,l,c];for(let t=0;t<7;t++)m[t].addEventListener("input",f);var p=$("#randomize-rotation-button"),p=(p.style.opacity=1,p.addEventListener("click",function(){u.randomizeRotation()}),$("#randomize-c-button"));p.style.opacity=1,p.addEventListener("click",function(){u.randomizeC()});const d=$("#switch-bulb-button"),w=(d.style.opacity=1,d.addEventListener("click",function(){changeOpacity(d,0),changeOpacity(w,0),setTimeout(()=>{u.juliaProportion<.5?(d.textContent="Switch to Mandelbulb",changeOpacity(w,1)):d.textContent="Switch to Juliabulb",equalizeTextButtons(),changeOpacity(d,1)},opacityAnimationTime),u.switchBulb()}),$("#switch-movement-button"));function f(){var t=parseFloat(s.value||0),n=parseFloat(r.value||0),o=parseFloat(l.value||0);u.c=[t,n,o],u.wilson.gl.uniform3fv(u.wilson.uniforms.c,u.c),u.rotationAngleX=parseFloat(i.value||0),u.rotationAngleY=parseFloat(a.value||0),u.rotationAngleZ=parseFloat(e.value||0),u.power=parseFloat(c.value||8),u.wilson.gl.uniform1f(u.wilson.uniforms.power,u.power),u.updateRotationMatrix()}w.style.opacity=0,w.addEventListener("click",function(){changeOpacity(w,0),setTimeout(()=>{u.movingPos?w.textContent="Change Juliabulb":w.textContent="Move Camera",equalizeTextButtons(),changeOpacity(w,1)},opacityAnimationTime),u.switchMovement()}),equalizeTextButtons(),showPage()}export{load};