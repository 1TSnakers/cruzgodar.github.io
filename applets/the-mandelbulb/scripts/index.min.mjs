import { showPage } from "/scripts/src/load-page.min.min.mjs"
import{Mandelbulb}from"./class.min.min.min.mjs";function load(){const o=$("#rotation-angle-x-input"),a=$("#rotation-angle-y-input"),e=$("#rotation-angle-z-input"),l=$("#c-x-input"),s=$("#c-y-input"),r=$("#c-z-input"),u=new Mandelbulb($("#output-canvas"),l,s,r,o,a,e),n=$("#resolution-input"),t=$("#view-distance-input"),i=(u.setInputCaps([n,t],[750,200]),n.addEventListener("input",()=>{var t=parseInt(n.value||500);u.changeResolution(t)}),$("#iterations-input"));i.addEventListener("input",()=>{u.maxIterations=parseInt(i.value||16),u.wilson.gl.uniform1i(u.wilson.uniforms.maxIterations,u.maxIterations)}),t.addEventListener("input",()=>{u.maxMarches=Math.max(parseInt(t.value||100),32),u.wilson.gl.uniform1i(u.wilson.uniforms.maxMarches,u.maxMarches)}),$("#download-button").addEventListener("click",()=>{u.wilson.gl.uniform1i(u.wilson.uniforms.maxMarches,1024),u.wilson.gl.uniform1f(u.wilson.uniforms.stepFactor,12),u.juliaProportion<.5?u.wilson.downloadFrame("the-mandelbulb.png"):u.wilson.downloadFrame("a-juliabulb.png"),u.wilson.gl.uniform1i(u.wilson.uniforms.maxMarches,u.maxMarches),u.wilson.gl.uniform1f(u.wilson.uniforms.stepFactor,1)});const c=$("#power-input");var m=[o,a,e,l,s,r,c];for(let t=0;t<7;t++)m[t].addEventListener("input",v);var p=$("#randomize-rotation-button"),p=(p.style.opacity=1,p.addEventListener("click",function(){u.randomizeRotation()}),$("#randomize-c-button"));p.style.opacity=1,p.addEventListener("click",function(){u.randomizeC()});const d=$("#switch-bulb-button"),w=(d.style.opacity=1,d.addEventListener("click",function(){changeOpacity(d,0,Site.opacityAnimationTime),changeOpacity(w,0,Site.opacityAnimationTime),setTimeout(()=>{u.juliaProportion<.5?(d.textContent="Switch to Mandelbulb",changeOpacity(w,1,Site.opacityAnimationTime)):d.textContent="Switch to Juliabulb",Page.Load.TextButtons.equalize(),changeOpacity(d,1,Site.opacityAnimationTime)},Site.opacityAnimationTime),u.switchBulb()}),$("#switch-movement-button"));function v(){var t=parseFloat(l.value||0),n=parseFloat(s.value||0),i=parseFloat(r.value||0);u.c=[t,n,i],u.wilson.gl.uniform3fv(u.wilson.uniforms.c,u.c),u.rotationAngleX=parseFloat(o.value||0),u.rotationAngleY=parseFloat(a.value||0),u.rotationAngleZ=parseFloat(e.value||0),u.power=parseFloat(c.value||8),u.wilson.gl.uniform1f(u.wilson.uniforms.power,u.power),u.updateRotationMatrix()}w.style.opacity=0,w.addEventListener("click",function(){changeOpacity(w,0,Site.opacityAnimationTime),setTimeout(()=>{u.movingPos?w.textContent="Change Juliabulb":w.textContent="Move Camera",Page.Load.TextButtons.equalize(),changeOpacity(w,1,Site.opacityAnimationTime)},Site.opacityAnimationTime),u.switchMovement()}),Page.Load.TextButtons.equalize(),showPage()}export{load};