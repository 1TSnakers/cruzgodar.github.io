import{equalizeTextButtons}from"/scripts/src/buttons.min.mjs";import{showPage}from"/scripts/src/load-page.min.mjs";import{Mandelbulb}from"./class.min.mjs";function load(){const o=$("#rotation-angle-x-input"),e=$("#rotation-angle-y-input"),a=$("#rotation-angle-z-input"),s=$("#c-x-input"),l=$("#c-y-input"),r=$("#c-z-input"),u=new Mandelbulb($("#output-canvas"),s,l,r,o,e,a),i=$("#resolution-input"),t=$("#view-distance-input"),n=(u.setInputCaps([i,t],[750,200]),i.addEventListener("input",()=>{var t=parseInt(i.value||500);u.changeResolution(t)}),$("#iterations-input"));n.addEventListener("input",()=>{u.maxIterations=parseInt(n.value||16),u.wilson.gl.uniform1i(u.wilson.uniforms.maxIterations,u.maxIterations)}),t.addEventListener("input",()=>{u.maxMarches=Math.max(parseInt(t.value||100),32),u.wilson.gl.uniform1i(u.wilson.uniforms.maxMarches,u.maxMarches)}),$("#download-button").addEventListener("click",()=>{u.wilson.gl.uniform1i(u.wilson.uniforms.maxMarches,1024),u.wilson.gl.uniform1f(u.wilson.uniforms.stepFactor,12),u.juliaProportion<.5?u.wilson.downloadFrame("the-mandelbulb.png"):u.wilson.downloadFrame("a-juliabulb.png"),u.wilson.gl.uniform1i(u.wilson.uniforms.maxMarches,u.maxMarches),u.wilson.gl.uniform1f(u.wilson.uniforms.stepFactor,1)});const c=$("#power-input");var m=[o,e,a,s,l,r,c];for(let t=0;t<7;t++)m[t].addEventListener("input",f);var p=$("#randomize-rotation-button"),p=(p.style.opacity=1,p.addEventListener("click",function(){u.randomizeRotation()}),$("#randomize-c-button"));p.style.opacity=1,p.addEventListener("click",function(){u.randomizeC()});const d=$("#switch-bulb-button"),w=(d.style.opacity=1,d.addEventListener("click",function(){changeOpacity(d,0,Site.opacityAnimationTime),changeOpacity(w,0,Site.opacityAnimationTime),setTimeout(()=>{u.juliaProportion<.5?(d.textContent="Switch to Mandelbulb",changeOpacity(w,1,Site.opacityAnimationTime)):d.textContent="Switch to Juliabulb",equalizeTextButtons(),changeOpacity(d,1,Site.opacityAnimationTime)},Site.opacityAnimationTime),u.switchBulb()}),$("#switch-movement-button"));function f(){var t=parseFloat(s.value||0),i=parseFloat(l.value||0),n=parseFloat(r.value||0);u.c=[t,i,n],u.wilson.gl.uniform3fv(u.wilson.uniforms.c,u.c),u.rotationAngleX=parseFloat(o.value||0),u.rotationAngleY=parseFloat(e.value||0),u.rotationAngleZ=parseFloat(a.value||0),u.power=parseFloat(c.value||8),u.wilson.gl.uniform1f(u.wilson.uniforms.power,u.power),u.updateRotationMatrix()}w.style.opacity=0,w.addEventListener("click",function(){changeOpacity(w,0,Site.opacityAnimationTime),setTimeout(()=>{u.movingPos?w.textContent="Change Juliabulb":w.textContent="Move Camera",equalizeTextButtons(),changeOpacity(w,1,Site.opacityAnimationTime)},Site.opacityAnimationTime),u.switchMovement()}),equalizeTextButtons(),showPage()}export{load};