!async function(){function t(){const b=parseFloat(f.value||0),u=parseFloat(g.value||0),v=parseFloat(h.value||0);a.c=[b,u,v];a.wilson.gl.uniform3fv(a.wilson.uniforms.c,a.c);a.rotationAngleX=parseFloat(k.value||0);a.rotationAngleY=parseFloat(l.value||0);a.rotationAngleZ=parseFloat(m.value||0);a.power=parseFloat(q.value||8);a.wilson.gl.uniform1f(a.wilson.uniforms.power,a.power);a.updateRotationMatrix()}await Applet.load("the-mandelbulb");const k=$("#rotation-angle-x-input"),l=$("#rotation-angle-y-input"),
m=$("#rotation-angle-z-input"),f=$("#c-x-input"),g=$("#c-y-input"),h=$("#c-z-input"),a=new Mandelbulb($("#output-canvas"),f,g,h,k,l,m),n=$("#resolution-input"),p=$("#view-distance-input");a.setInputCaps([n,p],[750,200]);n.addEventListener("input",()=>{const b=parseInt(n.value||500);a.changeResolution(b)});const r=$("#iterations-input");r.addEventListener("input",()=>{a.maxIterations=parseInt(r.value||16);a.wilson.gl.uniform1i(a.wilson.uniforms.maxIterations,a.maxIterations)});p.addEventListener("input",
()=>{a.maxMarches=Math.max(parseInt(p.value||100),32);a.wilson.gl.uniform1i(a.wilson.uniforms.maxMarches,a.maxMarches)});$("#download-button").addEventListener("click",()=>{a.wilson.gl.uniform1i(a.wilson.uniforms.maxMarches,1024);a.wilson.gl.uniform1f(a.wilson.uniforms.stepFactor,12);.5>a.juliaProportion?a.wilson.downloadFrame("the-mandelbulb.png"):a.wilson.downloadFrame("a-juliabulb.png");a.wilson.gl.uniform1i(a.wilson.uniforms.maxMarches,a.maxMarches);a.wilson.gl.uniform1f(a.wilson.uniforms.stepFactor,
1)});const q=$("#power-input");var c=[k,l,m,f,g,h,q];for(let b=0;7>b;b++)c[b].addEventListener("input",t);c=$("#randomize-rotation-button");c.style.opacity=1;c.addEventListener("click",function(){a.randomizeRotation()});c=$("#randomize-c-button");c.style.opacity=1;c.addEventListener("click",function(){a.randomizeC()});const e=$("#switch-bulb-button");e.style.opacity=1;e.addEventListener("click",function(){Page.Animate.changeOpacity(e,0,Site.opacityAnimationTime);Page.Animate.changeOpacity(d,0,Site.opacityAnimationTime);
setTimeout(()=>{.5>a.juliaProportion?(e.textContent="Switch to Mandelbulb",Page.Animate.changeOpacity(d,1,Site.opacityAnimationTime)):e.textContent="Switch to Juliabulb";Page.Load.TextButtons.equalize();Page.Animate.changeOpacity(e,1,Site.opacityAnimationTime)},Site.opacityAnimationTime);a.switchBulb()});const d=$("#switch-movement-button");d.style.opacity=0;d.addEventListener("click",function(){Page.Animate.changeOpacity(d,0,Site.opacityAnimationTime);setTimeout(()=>{d.textContent=a.movingPos?"Change Juliabulb":
"Move Camera";Page.Load.TextButtons.equalize();Page.Animate.changeOpacity(d,1,Site.opacityAnimationTime)},Site.opacityAnimationTime);a.switchMovement()});Page.Load.TextButtons.equalize();Page.show()}();
