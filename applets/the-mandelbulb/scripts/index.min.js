import{Mandelbulb}from"./class.min.js";import{changeOpacity,opacityAnimationTime}from"/scripts/src/animation.min.js";import{equalizeTextButtons}from"/scripts/src/buttons.min.js";import{showPage}from"/scripts/src/load-page.min.js";import{$}from"/scripts/src/main.min.js";function load(){var t=$("#rotation-angle-x-slider");const e=$("#rotation-angle-x-slider-value");var o=$("#rotation-angle-y-slider");const i=$("#rotation-angle-y-slider-value");var n=$("#rotation-angle-z-slider");const a=$("#rotation-angle-z-slider-value");var r=$("#c-x-slider");const s=$("#c-x-slider-value");var l=$("#c-y-slider");const u=$("#c-y-slider-value");var c=$("#c-z-slider");const p=$("#c-z-slider-value"),m=new Mandelbulb({canvas:$("#output-canvas")}),d=$("#resolution-input");m.setInputCaps([d],[750]),d.addEventListener("input",()=>{var t=parseInt(d.value||500);m.changeResolution(t)});var w=$("#iterations-slider");const f=$("#iterations-slider-value");$("#download-button").addEventListener("click",()=>{m.wilson.gl.uniform1i(m.wilson.uniforms.maxMarches,1024),m.wilson.gl.uniform1f(m.wilson.uniforms.stepFactor,12),m.juliaProportion<.5?m.wilson.downloadFrame("the-mandelbulb.png"):m.wilson.downloadFrame("a-juliabulb.png"),m.wilson.gl.uniform1i(m.wilson.uniforms.maxMarches,m.maxMarches),m.wilson.gl.uniform1f(m.wilson.uniforms.stepFactor,1)});var v=$("#power-slider");const g=$("#power-slider-value"),x=([t,o,n,r,l,c,v,w].forEach(element=>element.addEventListener("input",b)),$("#switch-bulb-button"));function b(){var t=parseFloat(s.textContent),o=parseFloat(u.textContent),n=parseFloat(p.textContent);m.c=[t,o,n],m.wilson.gl.uniform3fv(m.wilson.uniforms.c,m.c),m.rotationAngleX=parseFloat(e.textContent),m.rotationAngleY=parseFloat(i.textContent),m.rotationAngleZ=parseFloat(a.textContent),m.power=parseFloat(g.textContent),m.wilson.gl.uniform1f(m.wilson.uniforms.power,m.power),m.maxIterations=parseInt(f.textContent),m.wilson.gl.uniform1i(m.wilson.uniforms.maxIterations,m.maxIterations),m.updateRotationMatrix()}x.style.opacity=1,x.addEventListener("click",function(){changeOpacity(x,0),setTimeout(()=>{m.juliaProportion<.5?x.textContent="Switch to Mandelbulb":x.textContent="Switch to Juliabulb",equalizeTextButtons(),changeOpacity(x,1)},opacityAnimationTime),m.switchBulb()}),equalizeTextButtons(),showPage()}export{load};