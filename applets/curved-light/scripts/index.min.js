import{showPage}from"../../../scripts/src/loadPage.min.js";import{CurvedLight}from"./class.min.js";import{DownloadButton}from"/scripts/src/buttons.min.js";import{Checkbox}from"/scripts/src/checkboxes.min.js";import{Dropdown}from"/scripts/src/dropdowns.min.js";import{$,$$}from"/scripts/src/main.min.js";import{siteSettings}from"/scripts/src/settings.min.js";import{Slider}from"/scripts/src/sliders.min.js";import{TextBox}from"/scripts/src/textBoxes.min.js";import{animate}from"/scripts/src/utils.min.js";export default function(){const o=new CurvedLight({canvas:$("#output-canvas")}),a=["none","circle","helix","spiral","square","fuzzed"],l={none:[],circle:["#radius-slider"],helix:["#curvature-slider"],spiral:["#curvature-slider"],square:["#radius-slider"],fuzzed:[]},c=new Dropdown({element:$("#effects-dropdown"),name:"Effects",options:{none:"Straight line",circle:"Circle",helix:"Helix",spiral:"Spiral",square:"Square",fuzzed:"Fuzzed edges"},onInput:function(){const e=[0,1,2,3,4,5].map(index=>o.uniforms["c"+index]),n=Array(6).fill(0),s=a.indexOf(c.value);n[s]=1;for(const i of $$(".slider-container"))i.style.display="none";for(const r of l[c.value])$(r).parentElement.style.display="block";animate(t=>{o.setUniforms({c0:t*n[0]+(1-t)*e[0],c1:t*n[1]+(1-t)*e[1],c2:t*n[2]+(1-t)*e[2],c3:t*n[3]+(1-t)*e[3],c4:t*n[4]+(1-t)*e[4],c5:t*n[5]+(1-t)*e[5]}),o.needNewFrame=!0},2e3)}}),e=(new DownloadButton({element:$("#download-button"),applet:o,filename:"curved-light.png"}),new TextBox({element:$("#resolution-input"),name:"Resolution",value:500,minValue:100,maxValue:1e3,onInput:function(){o.wilson.resizeCanvas({width:e.value*siteSettings.resolutionMultiplier})}})),n=new Slider({element:$("#radius-slider"),name:"Radius",value:5,min:1,max:20,onInput:u}),s=new Slider({element:$("#curvature-slider"),name:"Curvature",value:1,min:1,max:4,onInput:u}),i=new Checkbox({element:$("#reflections-checkbox"),name:"Reflections",checked:!0,onInput:m}),r=new Checkbox({element:$("#antialiasing-checkbox"),name:"Antialiasing",onInput:m});function u(){o.setUniforms({radius:n.value,curvature:s.value}),o.needNewFrame=!0}function m(){o.useReflections=i.checked,o.useAntialiasing=r.checked,o.reloadShader()}showPage()}