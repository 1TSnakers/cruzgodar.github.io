import{showPage}from"../../../scripts/src/loadPage.min.js";import{CurvedLight}from"./class.min.js";import anime from"/scripts/anime.min.js";import{DownloadButton}from"/scripts/src/buttons.min.js";import{Dropdown}from"/scripts/src/dropdowns.min.js";import{$,$$}from"/scripts/src/main.min.js";import{siteSettings}from"/scripts/src/settings.min.js";import{Slider}from"/scripts/src/sliders.min.js";import{TextBox}from"/scripts/src/textBoxes.min.js";export default function(){const i=new CurvedLight({canvas:$("#output-canvas")}),t=["none","circle","helix","spiral","square","fuzzed"],o={none:[],circle:["#radius-slider"],helix:["#curvature-slider"],spiral:["#curvature-slider"],square:["#radius-slider"],fuzzed:[]},l=new Dropdown({element:$("#effects-dropdown"),name:"Effects",options:{none:"Straight line",circle:"Circle",helix:"Helix",spiral:"Spiral",square:"Square",fuzzed:"Fuzzed edges"},onInput:function(){const r=[...i.cValues],e=t.indexOf(l.value),n=Array(6).fill(0),s=(n[e]=1,$$(".slider-container").forEach(element=>{element.style.display="none"}),o[l.value].forEach(queryString=>{$(queryString).parentElement.style.display="block"}),{t:0});anime({targets:s,t:1,duration:2e3,easing:"easeOutQuad",update:()=>{for(let e=0;e<i.cValues.length;e++)i.cValues[e]=s.t*n[e]+(1-s.t)*r[e],i.wilson.gl.uniform1f(i.wilson.uniforms["c"+e],i.cValues[e]);i.needNewFrame=!0}})}}),e=(new DownloadButton({element:$("#download-button"),wilson:i.wilson,filename:"curved-light.png"}),new TextBox({element:$("#resolution-input"),name:"Resolution",value:500,minValue:100,maxValue:1e3,onInput:function(){i.changeResolution(e.value*siteSettings.resolutionMultiplier)}})),r=new Slider({element:$("#radius-slider"),name:"Radius",value:5,min:1,max:20,onInput:s}),n=new Slider({element:$("#curvature-slider"),name:"Curvature",value:1,min:1,max:4,onInput:s});function s(){i.radius=r.value,i.wilson.gl.uniform1f(i.wilson.uniforms.radius,i.radius),i.curvature=n.value,i.wilson.gl.uniform1f(i.wilson.uniforms.curvature,i.curvature),i.needNewFrame=!0}showPage()}