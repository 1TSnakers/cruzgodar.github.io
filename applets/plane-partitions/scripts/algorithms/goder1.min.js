import{sleep}from"/scripts/src/utils.min.js";async function godar1(index){var e;let t=this.arrays[index].numbers;var a=new Array(2*t.length),r=new Array(2*t.length);for(let c=0;c<t.length;c++){let e=0;for(;e<t.length&&t[c][e]===1/0;)e++;for(a[c]=e,e=0;e<t.length&&t[e][c]===1/0;)e++;r[c]=e}for(let C=t.length;C<2*t.length;C++)a[C]=0,r[C]=0;var n=Math.max(a[0],r[0]),i=new Array(t.length);for(let M=0;M<t.length;M++){i[M]=new Array(t.length);for(let e=0;e<t.length;e++)t[M][e]===1/0?i[M][e]=this.infiniteHeight:i[M][e]=t[M][e]}await this.addNewArray({index:index+1,numbers:i}),await sleep(this.animationTime/2),await this.removeArray(index),await sleep(this.animationTime/2),e=this.arrays[index],t=e.numbers;let s=0,h=0;for(;s<t.length&&0!==t[s][t.length-1];)s++;for(;h<t.length&&0!==t[t.length-1][h];)h++;await this.runAlgorithm("pak",index,!0),await sleep(2*this.animationTime),e=this.arrays[index],t=e.numbers;var B=Math.max(s,h),l=new Array(t.length-B+1),D=[];for(let k=0;k<l.length-1;k++){l[k]=new Array(l.length);for(let r=0;r<l.length-1;r++){l[k][r]=t[k][r];for(let e=0;e<t[k][r];e++)D.push([k,r,e]);t[k][r]=0}l[k][l.length-1]=0}l[l.length-1]=new Array(l.length);for(let I=0;I<l.length;I++)l[l.length-1][I]=0;this.deleteCubes(e,D,!0,!0),await this.addNewArray({index:index,numbers:l}),await sleep(this.animationTime/2),await this.runAlgorithm("pakInverse",index,!0),await sleep(2*this.animationTime);var E=2*t.length-a[t.length-1]-r[t.length-1],F=a[0]+r[0],o=new Array(4*t.length),g=new Array(F),m=new Array(4*t.length);for(let V=0;V<4*t.length;V++)o[V]=new Array;for(let N=0;N<F;N++)g[N]=new Array;for(let L=0;L<4*t.length;L++)m[L]=new Array;let d=1;for(let j=0;j<2*t.length;j++)for(let e=0;e<2*t.length;e++)e>=a[j]?o[j+e+1-a[j]-r[e]].push([j,e]):g[a[j]+r[e]-j-e-1].unshift([n-j-1,n-e-1]),m[j+e+1].push([j,e]);var w=new Array(2*t.length);for(let O=0;O<2*t.length;O++)w[O]=new Array(2*t.length);for(let G=1;G<E;G++){var y=[];for(let e=0;e<o[G].length;e++){var f=o[G][e][0],u=o[G][e][1];if(f<t.length-h&&u<t.length-s)for(let e=0;e<this.arrays[index].numbers[f][u];e++)y.push([f,u,e]);e<m[G].length?(w[f][u]=[1,m[G][e]],f<t.length&&u<t.length&&0<this.arrays[index].numbers[f][u]&&(d=Math.max(Math.max(d,m[G][e][0]+1),m[G][e][1]+1))):w[f][u]=[0,g[G][e-m[G].length]]}0!==y.length&&this.colorCubes(this.arrays[index],y,(G-1)/(E-1)*6/7)}await sleep(3*this.animationTime);var x=new Array(n);for(let H=0;H<n;H++){x[H]=new Array(n);for(let e=0;e<n;e++)e<n-a[n-H-1]?x[H][e]=1/0:x[H][e]=0}let J;0<n&&(J=await this.addNewArray({index:index+1,numbers:x}),await sleep(this.animationTime/2));var A=new Array(d);for(let q=0;q<d;q++){A[q]=new Array(d);for(let e=0;e<d;e++)A[q][e]=0}var K=await this.addNewArray({index:index+2,numbers:A});for(let z=0;z<t.length-h;z++)for(let r=a[z];r<t.length-s;r++)if(0<this.arrays[index].numbers[z][r]){var b=[],p=[],v=w[z][r][1][0],T=w[z][r][1][1];for(let e=0;e<this.arrays[index].numbers[z][r];e++)b.push([z,r,e]),p.push([v,T,e]);0===w[z][r][0]?(await this.moveCubes(this.arrays[index],b,J,p),x[v][T]=this.arrays[index].numbers[z][r]):(await this.moveCubes(this.arrays[index],b,K,p),A[v][T]=this.arrays[index].numbers[z][r]),this.arrays[index].numbers[z][r]=0,this.in2dView&&this.drawAll2dViewText()}await sleep(3*this.animationTime),await this.runAlgorithm("pakInverse",index,!0),0<n&&await this.runAlgorithm("hillmanGrasslInverse",index+1,!0)}async function godar1Inverse(index){var t=this.arrays[index+1].numbers,a=this.arrays[index].numbers,r=new Array(t.length+2*a.length),n=new Array(t.length+2*a.length);for(let p=0;p<t.length+2*a.length;p++)r[p]=0,n[p]=0;for(let v=0;v<a.length;v++){let e=a.length-1;for(;0<=e&&a[v][e]!==1/0;)e--;for(r[a.length-v-1]=a.length-e-1,e=a.length-1;0<=e&&a[e][v]!==1/0;)e--;n[a.length-v-1]=a.length-e-1}await this.runAlgorithm("pak",index,!0),await sleep(this.animationTime/2),await this.runAlgorithm("pak",index+1,!0),await sleep(3*this.animationTime);let i=[],s=this.arrays[index].numbers;for(let T=0;T<s.length;T++)for(let r=0;r<s.length;r++)if(s[T][r]!==1/0)for(let e=0;e<s[T][r];e++)i.push([T,r,e]);this.uncolorCubes(this.arrays[index],i),i=[],s=this.arrays[index+1].numbers;for(let c=0;c<s.length;c++)for(let r=0;r<s.length;r++)if(s[c][r]!==1/0)for(let e=0;e<s[c][r];e++)i.push([c,r,e]);await this.uncolorCubes(this.arrays[index+1],i);let h=Math.max(r[0],n[0])+2*t.length-1;var e=2*h,l=r[0]+n[0],o=2*t.length,g=new Array(e),m=new Array(l),d=new Array(o);for(let C=0;C<e;C++)g[C]=new Array;for(let M=0;M<l;M++)m[M]=new Array;for(let k=0;k<o;k++){d[k]=new Array(k);for(let e=0;e<k;e++)d[k][e]=-1}for(;r.length<h;)r.push(0);for(;n.length<h;)n.push(0);for(let I=0;I<h;I++)for(let e=0;e<h;e++)e>=r[I]?g[I+e+1-r[I]-n[e]].push([I,e]):m[r[I]+n[e]-I-e-1].unshift([a.length-I-1,a.length-e-1]),I<t.length&&e<t.length&&(d[I+e+1][I]=[I,e]);var w=new Array(t.length);for(let V=0;V<t.length;V++)w[V]=new Array(t.length);var y=new Array(a.length);for(let N=0;N<a.length;N++)y[N]=new Array(a.length);for(let j=h=1;j<l;j++){const i=[];for(let r=0;r<m[j].length;r++){var f=m[j][r][0],u=m[j][r][1];for(let e=0;e<this.arrays[index].numbers[f][u];e++)i.push([f,u,e]);y[f][u]=g[j][r+d[j].length],0!==this.arrays[index].numbers[f][u]&&(h=Math.max(Math.max(h,y[f][u][0]+1),y[f][u][1]+1))}0!==i.length&&this.colorCubes(this.arrays[index],i,(j-1)/(l-1)*6/7)}for(let G=1;G<o;G++){const i=[];for(let r=0;r<d[G].length;r++)if(-1!==d[G][r]){var x=d[G][r][0],A=d[G][r][1];for(let e=0;e<this.arrays[index+1].numbers[x][A];e++)i.push([x,A,e]);w[x][A]=g[G][r],0!==this.arrays[index+1].numbers[x][A]&&(h=Math.max(Math.max(h,w[x][A][0]+1),w[x][A][1]+1))}0!==i.length&&this.colorCubes(this.arrays[index+1],i,(G-1)/(o-1)*6/7)}await sleep(3*this.animationTime);var b=new Array(h);for(let H=0;H<h;H++){b[H]=new Array(h);for(let e=0;e<h;e++)e<r[H]?b[H][e]=1/0:b[H][e]=0}var B=await this.addNewArray({index:index+2,numbers:b});await sleep(this.animationTime/2);for(let q=0;q<a.length;q++)for(let r=0;r<a.length;r++)if(0<this.arrays[index].numbers[q][r]&&this.arrays[index].numbers[q][r]!==1/0){var D=[],E=[],F=y[q][r][0],J=y[q][r][1];for(let e=0;e<this.arrays[index].numbers[q][r];e++)D.push([q,r,e]),E.push([F,J,e]);await this.moveCubes(this.arrays[index],D,B,E),b[F][J]=this.arrays[index].numbers[q][r],this.arrays[index].numbers[q][r]=0,this.in2dView&&this.drawAll2dViewText()}for(let z=0;z<t.length;z++)for(let r=0;r<t.length;r++)if(0<this.arrays[index+1].numbers[z][r]&&this.arrays[index+1].numbers[z][r]!==1/0){var K=[],L=[],O=w[z][r][0],P=w[z][r][1];for(let e=0;e<this.arrays[index+1].numbers[z][r];e++)K.push([z,r,e]),L.push([O,P,e]);await this.moveCubes(this.arrays[index+1],K,B,L),b[O][P]=this.arrays[index+1].numbers[z][r],this.arrays[index+1].numbers[z][r]=0,this.in2dView&&this.drawAll2dViewText()}await this.removeArray(index),await sleep(this.animationTime/2),await this.removeArray(index),await sleep(3*this.animationTime),await this.runAlgorithm("pakInverse",index,!0),await sleep(this.animationTime)}export{godar1,godar1Inverse};