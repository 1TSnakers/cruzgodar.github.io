import anime from"/scripts/anime.min.js";async function showFloor(opacity=1){const r=[];return this.arrays.forEach(array=>{array.floor.forEach(row=>{row.forEach(floor=>{floor.material.forEach(material=>r.push(material))})})}),anime({targets:r,opacity:opacity,duration:this.animationTime/2,easing:"easeOutQuad"}).finished}function hideFloor(){return this.showFloor(0)}function removeOutsideFloor(array){const a=[];var t=[];for(let o=0;o<array.footprint;o++)for(let r=array.footprint-1;0<=r&&0===array.numbers[o][r];r--)array.floor[o][r].material.forEach(material=>a.push(material)),t.push([o,r]);t.forEach(coordinates=>{array.floor[coordinates[0]][coordinates[1]].material.forEach(material=>material.dispose()),array.cubeGroup.remove(array.floor[coordinates[0]][coordinates[1]]),array.floor[coordinates[0]][coordinates[1]]=void 0}),this.in2dView&&this.drawAll2dViewText()}function recalculateHeights(array){array.height=0,array.numbers.forEach(row=>{row.forEach(entry=>{entry!==1/0&&(array.height=Math.max(entry,array.height))})}),array.size=Math.max(array.footprint,array.height),this.totalArrayHeight=0,this.arrays.forEach(array=>this.totalArrayHeight=Math.max(array.height,this.totalArrayHeight)),this.totalArraySize=Math.max(this.totalArrayFootprint,this.totalArrayHeight),this.totalArrayHeight!==this.oldTotalArrayHeight&&this.updateCameraHeight()}function drawAll2dViewText(){this.fontSize=this.wilsonNumbers.canvasWidth/(this.totalArrayFootprint+1);var r=Math.max((""+this.totalArrayHeight).length,2);this.wilsonNumbers.ctx.font=this.fontSize/r+"px monospace",this.wilsonNumbers.ctx.clearRect(0,0,this.wilsonNumbers.canvasWidth,this.wilsonNumbers.canvasHeight),this.arrays.forEach(array=>{for(let a=0;a<array.footprint;a++)for(let r=0;r<array.footprint;r++)array.floor[a][r]&&this.drawSingleCell2dViewText(array,a,r)})}function drawSingleCell2dViewText(array,row,col){var r,a=(this.totalArrayFootprint-array.footprint-1)/2,t=array.partialFootprintSum-array.footprint;this.wilsonNumbers.ctx.clearRect(this.fontSize*(col+t+1),this.fontSize*(row+a+1),this.fontSize,this.fontSize),array.numbers[row][col]===1/0||0===array.numbers[row][col]&&0===this.floorLightness||(r=this.wilsonNumbers.ctx.measureText(array.numbers[row][col]),this.wilsonNumbers.ctx.fillText(array.numbers[row][col],this.fontSize*(col+t+1)+(this.fontSize-r.width)/2,this.fontSize*(row+a+1)+(this.fontSize+r.actualBoundingBoxAscent-r.actualBoundingBoxDescent)/2))}export{showFloor,hideFloor,removeOutsideFloor,recalculateHeights,drawAll2dViewText,drawSingleCell2dViewText};