import{PlanePartitions}from"./class.min.mjs";import{changeOpacity}from"/scripts/src/animation.min.mjs";import{equalizeTextButtons}from"/scripts/src/buttons.min.mjs";import{equalizeAppletColumns}from"/scripts/src/layout.min.mjs";import{showPage}from"/scripts/src/load-page.min.mjs";import{$,$$}from"/scripts/src/main.min.mjs";function load(){const applet=new PlanePartitions($("#output-canvas"),$("#numbers-canvas")),categorySelectorDropdownElement=$("#category-selector-dropdown"),resolutionInputElement=$("#resolution-input"),showDimersButtonElement=$("#show-dimers-button"),switchViewButtonElement=$("#switch-view-button"),maximumSpeedCheckboxElement=$("#maximum-speed-checkbox"),arrayDataTextareaElement=$("#array-data-textarea");var addArrayButtonElement=$("#add-array-button");const editArrayTextareaElement=$("#edit-array-textarea"),editArrayIndexInputElement=$("#edit-array-index-input");var editArrayButtonElement=$("#edit-array-button");const removeArrayIndexInputElement=$("#remove-array-index-input");var removeArrayButtonElement=$("#remove-array-button");const algorithmIndexInputElement=$("#algorithm-index-input");var hillmanGrasslButtonElement=$("#hillman-grassl-button"),hillmanGrasslInverseButtonElement=$("#hillman-grassl-inverse-button"),pakButtonElement=$("#pak-button"),pakInverseButtonElement=$("#pak-inverse-button"),sulzgruberButtonElement=$("#sulzgruber-button"),sulzgruberInverseButtonElement=$("#sulzgruber-inverse-button"),rskButtonElement=$("#rsk-button"),rskInverseButtonElement=$("#rsk-inverse-button"),example1ButtonElement=$("#example-1-button"),example2ButtonElement=$("#example-2-button"),example3ButtonElement=$("#example-3-button"),downloadButtonElement=$("#download-button");applet.setInputCaps([resolutionInputElement],[3e3]);const sectionElements={"view-controls":$$(".view-controls-section"),"add-array":$$(".add-array-section"),"edit-array":$$(".edit-array-section"),"remove-array":$$(".remove-array-section"),algorithms:$$(".algorithms-section"),examples:$$(".examples-section")},categoryHolderElement=$("#category-holder"),canvasLandscapeLeftElement=$("#canvas-landscape-left");let visibleSection="view-controls";async function switchDimersButton(dimersShown=applet.dimersShown){await changeOpacity(showDimersButtonElement,0),showDimersButtonElement.textContent=dimersShown?"Show Dimers":"Hide Dimers",await changeOpacity(showDimersButtonElement,1)}async function switchViewButton(in2dView=applet.in2dView){await changeOpacity(switchViewButtonElement,0),switchViewButtonElement.textContent=in2dView?"Show 2D View":"Show Hex View",await changeOpacity(switchViewButtonElement,1)}["view-controls","add-array","edit-array","remove-array","algorithms"].forEach(sectionName=>{sectionName!==visibleSection&&sectionElements[sectionName].forEach(element=>{element.style.opacity=0})}),sectionElements[visibleSection].forEach(element=>canvasLandscapeLeftElement.appendChild(element)),equalizeTextButtons(),setTimeout(equalizeTextButtons,10),categorySelectorDropdownElement.addEventListener("input",async()=>{var index;await Promise.all(Array.from(sectionElements[visibleSection]).map(element=>changeOpacity(element,0))),sectionElements[visibleSection].forEach(element=>categoryHolderElement.appendChild(element)),sectionElements[visibleSection].forEach(element=>element.classList.remove("move-to-left")),sectionElements[visibleSection].forEach(element=>element.classList.remove("move-to-right")),visibleSection=categorySelectorDropdownElement.value,sectionElements[visibleSection].forEach(element=>canvasLandscapeLeftElement.appendChild(element)),equalizeTextButtons(),setTimeout(equalizeTextButtons,10),equalizeAppletColumns(),setTimeout(equalizeAppletColumns,10),"edit-array"===visibleSection&&(index=parseInt(editArrayIndexInputElement.value||0))<applet.arrays.length&&0<=index&&(editArrayTextareaElement.value=applet.arrayToAscii(applet.arrays[index].numbers)),sectionElements[visibleSection].forEach(element=>changeOpacity(element,1))}),resolutionInputElement.addEventListener("input",()=>{applet.resolution=parseInt(resolutionInputElement.value||2e3),applet.renderer.setSize(applet.resolution,applet.resolution,!1)}),showDimersButtonElement.addEventListener("click",()=>{switchDimersButton(),!applet.dimersShown&&applet.in2dView&&switchViewButton(),applet.dimersShown?applet.hideDimers():applet.showDimers()}),switchViewButtonElement.addEventListener("click",()=>{switchViewButton(),applet.dimersShown&&!applet.in2dView&&switchDimersButton(),applet.in2dView?applet.showHexView():applet.show2dView()}),maximumSpeedCheckboxElement.addEventListener("input",()=>{applet.animationTime=maximumSpeedCheckboxElement.checked?60:600}),addArrayButtonElement.addEventListener("click",()=>{applet.addNewArray(applet.arrays.length,applet.parseArray(arrayDataTextareaElement.value))}),editArrayIndexInputElement.addEventListener("input",()=>{var index=parseInt(editArrayIndexInputElement.value||0);index>=applet.arrays.length||index<0||(applet.editArrayTextareaElement.value=applet.arrayToAscii(applet.arrays[index].numbers))}),editArrayButtonElement.addEventListener("click",async()=>{var index=parseInt(editArrayIndexInputElement.value||0);await applet.editArray(index,applet.parseArray(editArrayTextareaElement.value)),editArrayTextareaElement.value=applet.arrayToAscii(applet.arrays[index].numbers)}),removeArrayButtonElement.addEventListener("click",()=>{applet.removeArray(parseInt(removeArrayIndexInputElement.value))}),hillmanGrasslButtonElement.addEventListener("click",()=>applet.runAlgorithm("hillmanGrassl",parseInt(algorithmIndexInputElement.value))),hillmanGrasslInverseButtonElement.addEventListener("click",()=>applet.runAlgorithm("hillmanGrasslInverse",parseInt(algorithmIndexInputElement.value))),pakButtonElement.addEventListener("click",()=>applet.runAlgorithm("pak",parseInt(algorithmIndexInputElement.value))),pakInverseButtonElement.addEventListener("click",()=>applet.runAlgorithm("pakInverse",parseInt(algorithmIndexInputElement.value))),sulzgruberButtonElement.addEventListener("click",()=>applet.runAlgorithm("sulzgruber",parseInt(algorithmIndexInputElement.value))),sulzgruberInverseButtonElement.addEventListener("click",()=>applet.runAlgorithm("sulzgruberInverse",parseInt(algorithmIndexInputElement.value))),rskButtonElement.addEventListener("click",()=>applet.runAlgorithm("rsk",parseInt(algorithmIndexInputElement.value))),rskInverseButtonElement.addEventListener("click",()=>applet.runAlgorithm("rskInverse",parseInt(algorithmIndexInputElement.value))),example1ButtonElement.addEventListener("click",()=>applet.runExample(1)),example2ButtonElement.addEventListener("click",()=>applet.runExample(2)),example3ButtonElement.addEventListener("click",()=>applet.runExample(3)),downloadButtonElement.addEventListener("click",()=>applet.needDownload=!0);addArrayButtonElement=applet.generateRandomPlanePartition();arrayDataTextareaElement.value=applet.arrayToAscii(addArrayButtonElement),applet.addNewArray(0,addArrayButtonElement),showPage()}export{load};