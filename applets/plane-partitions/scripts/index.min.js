import{showPage}from"../../../scripts/src/loadPage.min.js";import{PlanePartitions}from"./class.min.js";import{Button,ToggleButton,equalizeTextButtons}from"/scripts/src/buttons.min.js";import{equalizeAppletColumns}from"/scripts/src/layout.min.js";import{$,$$}from"/scripts/src/main.min.js";function load(){const n=new PlanePartitions({canvas:$("#output-canvas"),numbersCanvas:$("#numbers-canvas")}),t=$("#category-selector-dropdown"),e=$("#array-data-textarea"),a=$("#edit-array-textarea"),r=$("#edit-array-index-input"),o=$("#remove-array-index-input"),l=$("#maximum-speed-checkbox"),s=$("#algorithm-index-input");let i;const u=new ToggleButton({element:$("#switch-view-button"),name0:"Show 2D View",name1:"Show Hex View",onClick0:()=>{n.dimersShown&&i.setState(0),n.show2dView()},onClick1:()=>{n.showHexView()}}),m=(i=new ToggleButton({element:$("#show-dimers-button"),name0:"Show Dimers",name1:"Hide Dimers",onClick0:()=>{n.in2dView&&u.setState(0),n.showDimers()},onClick1:()=>{n.hideDimers()}}),new Button({element:$("#add-array-button"),name:"Add",onClick:()=>{n.addNewArray(n.arrays.length,PlanePartitions.parseArray(e.value))}}),new Button({element:$("#edit-array-button"),name:"Edit",onClick:async()=>{var e=parseInt(r.value||0);await n.editArray(e,PlanePartitions.parseArray(a.value)),a.value=PlanePartitions.arrayToAscii(n.arrays[e].numbers)}}),new Button({element:$("#remove-array-button"),name:"Remove",onClick:()=>{n.removeArray(parseInt(o.value))}}),new Button({element:$("#hillman-grassl-button"),name:"Hillman-Grassl",onClick:()=>n.runAlgorithm("hillmanGrassl",parseInt(s.value))}),new Button({element:$("#hillman-grassl-inverse-button"),name:"Hillman-Grassl Inverse",onClick:()=>n.runAlgorithm("hillmanGrasslInverse",parseInt(s.value))}),new Button({element:$("#pak-button"),name:"Pak",onClick:()=>n.runAlgorithm("pak",parseInt(s.value))}),new Button({element:$("#pak-inverse-button"),name:"Pak Inverse",onClick:()=>n.runAlgorithm("pakInverse",parseInt(s.value))}),new Button({element:$("#sulzgruber-button"),name:"Sulzgruber",onClick:()=>n.runAlgorithm("sulzgruber",parseInt(s.value))}),new Button({element:$("#sulzgruber-inverse-button"),name:"Sulzgruber Inverse",onClick:()=>n.runAlgorithm("sulzgruberInverse",parseInt(s.value))}),new Button({element:$("#rsk-button"),name:"RSK",onClick:()=>n.runAlgorithm("rsk",parseInt(s.value))}),new Button({element:$("#rsk-inverse-button"),name:"RSK Inverse",onClick:()=>n.runAlgorithm("rskInverse",parseInt(s.value))}),new Button({element:$("#download-button"),name:"Download",onClick:()=>n.needDownload=!0}),$("#resolution-input")),d=(n.setInputCaps([m],[3e3]),{"view-controls":$$(".view-controls-section"),"add-array":$$(".add-array-section"),"edit-array":$$(".edit-array-section"),"remove-array":$$(".remove-array-section"),algorithms:$$(".algorithms-section")}),c=$("#category-holder"),v=$("#canvas-landscape-left");let p="view-controls";d[p].forEach(element=>v.appendChild(element)),t.addEventListener("input",()=>{var e;d[p].forEach(element=>c.appendChild(element)),d[p].forEach(element=>element.classList.remove("moved-to-left")),d[p].forEach(element=>element.classList.remove("moved-to-right")),p="none"===t.value?"view-controls":t.value,d[p].forEach(element=>v.appendChild(element)),equalizeTextButtons(),setTimeout(equalizeTextButtons,10),equalizeAppletColumns(),setTimeout(equalizeAppletColumns,10),"edit-array"===p&&(e=parseInt(r.value||0))<n.arrays.length&&0<=e&&(a.value=PlanePartitions.arrayToAscii(n.arrays[e].numbers))}),m.addEventListener("input",()=>{n.resolution=parseInt(m.value||2e3),n.renderer.setSize(n.resolution,n.resolution,!1)}),l.addEventListener("input",()=>{n.animationTime=l.checked?60:600}),r.addEventListener("input",()=>{var e=parseInt(r.value||0);e>=n.arrays.length||e<0||(n.editArrayTextareaElement.value=PlanePartitions.arrayToAscii(n.arrays[e].numbers))});var w=PlanePartitions.generateRandomPlanePartition();e.value=PlanePartitions.arrayToAscii(w),n.addNewArray(0,w),showPage()}export{load};