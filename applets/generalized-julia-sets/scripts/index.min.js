import{Applet}from"../../../scripts/applets/applet.min.js";import{showPage}from"../../../scripts/src/loadPage.min.js";import{GeneralizedJuliaSet}from"./class.min.js";import{DownloadButton,GenerateButton,ToggleButton}from"/scripts/src/buttons.min.js";import{Dropdown}from"/scripts/src/dropdowns.min.js";import{$}from"/scripts/src/main.min.js";import{TextBox}from"/scripts/src/textBoxes.min.js";function load(){let t;const o=new ToggleButton({element:$("#switch-julia-mode-button"),name0:"Pick Julia Set",name1:"Return to Mandelbrot",onClick0:()=>t.switchJuliaMode(),onClick1:()=>t.switchJuliaMode()}),n=((t=new GeneralizedJuliaSet({canvas:$("#output-canvas"),switchJuliaModeButton:o})).loadPromise.then(()=>i()),new GenerateButton({element:$("#generate-button"),onClick:i}),new DownloadButton({element:$("#download-button"),wilson:t.wilson,filename:"a-generalized-julia-set.png"}),$("#code-textarea")),e=(n.value="cadd(cpow(z, 2.0), c)",Applet.listenToInputElements([n],i),{mandelbrot:"cadd(cpow(z, 2.0), c)",variedExponent:"cadd(cpow(z, 4.0), c)",trig:"csin(cmul(z, c))",burningShip:"cadd(cpow(vec2(abs(z.x), -abs(z.y)), 2.0), c)",rationalMap:"cadd(csub(cpow(z, 2.0), cmul(.05, cpow(z, -2.0))), c)",mandelbrotDust:"cadd(csub(cpow(z, 2.0), vec2(0.0, cmul(.05, cpow(z, -2.0).y))), c)"}),a=new Dropdown({element:$("#examples-dropdown"),name:"Examples",options:{mandelbrot:"Classical Mandelbrot",variedExponent:"Varied Exponent",trig:"Trig Example",burningShip:"Burning Ship",rationalMap:"Rational Map",mandelbrotDust:"Mandelbrot Dust"},onInput:function(){n.value=e[a.value],i()}}),l=new TextBox({element:$("#resolution-input"),name:"Resolution",value:500,maxValue:2e3,onEnter:i,onInput:function(){t.resolution=l.value,t.changeAspectRatio(!0)}});function i(){var e=n.value||"cadd(cpow(z, 2.0), c)";o.setState(0),o.disabled=!1,t.run({generatingCode:e,resolution:l.value,exposure:1,numIterations:200})}showPage()}export{load};