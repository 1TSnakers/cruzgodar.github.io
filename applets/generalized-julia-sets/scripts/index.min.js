!async function(){function b(){const k=c.value||"cadd(cpow(z, 2.0), c)",l=parseInt(d.value||500),m=parseFloat(f.value||1),n=parseInt(e.value||200);a.run(k,l,m,n)}await Applet.load("generalized-julia-sets");const g=$("#switch-julia-mode-button");g.style.opacity=1;const a=new GeneralizedJuliaSet($("#output-canvas"),"cadd(cpow(z, 2.0), c)",g);a.loadPromise.then(()=>b());const c=$("#code-textarea");c.value="cadd(cpow(z, 2.0), c)";a.listenToInputElements([c],b);const p={mandelbrot:"cadd(cpow(z, 2.0), c)",
"var-exp":"cadd(cpow(z, 4.0), c)",trig:"csin(cmul(z, c))","burning-ship":"cadd(cpow(vec2(abs(z.x), -abs(z.y)), 2.0), c)","rational-map":"cadd(csub(cpow(z, 2.0), cmul(.05, cpow(z, -2.0))), c)","mandelbrot-dust":"cadd(csub(cpow(z, 2.0), vec2(0.0, cmul(.05, cpow(z, -2.0).y))), c)"},h=$("#example-selector-dropdown");h.addEventListener("input",()=>{"none"!==h.value&&(c.value=p[h.value],b())});const d=$("#resolution-input"),f=$("#exposure-input"),e=$("#num-iterations-input");a.setInputCaps([d,e],[2E3,500]);
d.addEventListener("input",()=>{a.resolution=parseInt(d.value||500);a.changeAspectRatio(!0)});f.addEventListener("input",()=>{a.exposure=parseFloat(f.value||1)});e.addEventListener("input",()=>{a.numIterations=parseInt(e.value||200)});$("#generate-button").addEventListener("click",b);g.addEventListener("click",()=>a.switchJuliaMode());$("#download-button").addEventListener("click",()=>{a.wilson.downloadFrame("a-generalized-julia-set.png")});Page.show()}();
