import{GeneralizedJuliaSet}from"./class.min.js";import{Applet}from"/scripts/src/applets.min.js";import{showPage}from"/scripts/src/load-page.min.js";import{$}from"/scripts/src/main.min.js";function load(){var e=$("#switch-julia-mode-button");e.style.opacity=1;const a=new GeneralizedJuliaSet({canvas:$("#output-canvas"),switchJuliaModeButtonElement:e}),o=(a.loadPromise.then(()=>s()),$("#code-textarea")),t=(o.value="cadd(cpow(z, 2.0), c)",Applet.listenToInputElements([o],s),{mandelbrot:"cadd(cpow(z, 2.0), c)","var-exp":"cadd(cpow(z, 4.0), c)",trig:"csin(cmul(z, c))","burning-ship":"cadd(cpow(vec2(abs(z.x), -abs(z.y)), 2.0), c)","rational-map":"cadd(csub(cpow(z, 2.0), cmul(.05, cpow(z, -2.0))), c)","mandelbrot-dust":"cadd(csub(cpow(z, 2.0), vec2(0.0, cmul(.05, cpow(z, -2.0).y))), c)"}),n=$("#example-selector-dropdown"),c=(n.addEventListener("input",()=>{"none"!==n.value&&(o.value=t[n.value],s())}),$("#resolution-input"));function s(){var e=o.value||"cadd(cpow(z, 2.0), c)",t=parseInt(c.value||500);a.run({generatingCode:e,resolution:t,exposure:1,numIterations:200})}a.setInputCaps([c],[2e3]),c.addEventListener("input",()=>{a.resolution=parseInt(c.value||500),a.changeAspectRatio(!0)}),$("#generate-button").addEventListener("click",s),e.addEventListener("click",()=>a.switchJuliaMode()),$("#download-button").addEventListener("click",()=>{a.wilson.downloadFrame("a-generalized-julia-set.png")}),showPage()}export{load};