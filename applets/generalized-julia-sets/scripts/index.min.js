import{showPage}from"../../../scripts/src/loadPage.min.js";import{GeneralizedJuliaSet}from"./class.min.js";import{Applet}from"/scripts/src/applets.min.js";import{DownloadButton,GenerateButton,ToggleButton}from"/scripts/src/buttons.min.js";import{$}from"/scripts/src/main.min.js";function load(){let o;const n=new ToggleButton({element:$("#switch-julia-mode-button"),name0:"Pick Julia Set",name1:"Return to Mandelbrot",onClick0:()=>o.switchJuliaMode(),onClick1:()=>o.switchJuliaMode()}),a=((o=new GeneralizedJuliaSet({canvas:$("#output-canvas"),switchJuliaModeButton:n})).loadPromise.then(()=>s()),new GenerateButton({element:$("#generate-button"),onClick:s}),new DownloadButton({element:$("#download-button"),wilson:o.wilson,filename:"a-generalized-julia-set.png"}),$("#code-textarea")),e=(a.value="cadd(cpow(z, 2.0), c)",Applet.listenToInputElements([a],s),{mandelbrot:"cadd(cpow(z, 2.0), c)","var-exp":"cadd(cpow(z, 4.0), c)",trig:"csin(cmul(z, c))","burning-ship":"cadd(cpow(vec2(abs(z.x), -abs(z.y)), 2.0), c)","rational-map":"cadd(csub(cpow(z, 2.0), cmul(.05, cpow(z, -2.0))), c)","mandelbrot-dust":"cadd(csub(cpow(z, 2.0), vec2(0.0, cmul(.05, cpow(z, -2.0).y))), c)"}),t=$("#example-selector-dropdown"),c=(t.addEventListener("input",()=>{"none"!==t.value&&(a.value=e[t.value],s())}),$("#resolution-input"));function s(){var e=a.value||"cadd(cpow(z, 2.0), c)",t=parseInt(c.value||500);n.setState(0),n.disabled=!1,o.run({generatingCode:e,resolution:t,exposure:1,numIterations:200})}o.setInputCaps([c],[2e3]),c.addEventListener("input",()=>{o.resolution=parseInt(c.value||500),o.changeAspectRatio(!0)}),showPage()}export{load};