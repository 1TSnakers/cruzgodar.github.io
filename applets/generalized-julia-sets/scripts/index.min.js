import{JuliaSetExplorer}from"/applets/julia-set-explorer/scripts/class.min.js";import{getRandomGlsl}from"/scripts/applets/applet.min.js";import{DownloadHighResButton,GenerateButton,ToggleButton}from"/scripts/components/buttons.min.js";import{Dropdown}from"/scripts/components/dropdowns.min.js";import{Slider}from"/scripts/components/sliders.min.js";import{Textarea}from"/scripts/components/textareas.min.js";import{TextBox}from"/scripts/components/textBoxes.min.js";import{$}from"/scripts/src/main.min.js";import{siteSettings}from"/scripts/src/settings.min.js";export default function(){let e;const t=new ToggleButton({element:$("#switch-julia-mode-button"),name0:"Pick Julia Set",name1:"Return to Mandelbrot",persistState:!1,onClick0:()=>e.advanceJuliaMode(),onClick1:()=>e.advanceJuliaMode()}),n=(e=new JuliaSetExplorer({canvas:$("#output-canvas"),switchJuliaModeButton:t,maxWorldSize:100,bailoutRadius:1e4}),new GenerateButton({element:$("#generate-button"),onClick:s}),new DownloadHighResButton({element:$("#download-dropdown"),applet:e,filename:()=>"mandelbrot"===e.juliaMode?"a-generalized-mandelbrot-set.png":"a-generalized-julia-set.png"}),{mandelbrot:"cadd(cpow(z, 2.0), c)",variedExponent:"cadd(cpow(z, draggableArg + vec2(3.0, 0.0)), c)",trig:"csin(cmul(z, c))",burningShip:"cadd(cpow(vec2(abs(z.x), -abs(z.y)), 2.0), c)",rationalMap:"cadd(csub(cpow(z, 2.0), cmul(.05, cpow(z, -2.0))), c)",mandelbrotDust:"cadd(csub(cpow(z, 2.0), vec2(0.0, cmul(.05, cpow(z, -2.0).y))), c)",vertebrae:"cdiv(cadd(cexp(cmul(c, z)), csub(cadd(z, z), cdiv(c, z))), ccos(csin(cdiv(c, vec2(z.y, z.x)))))"}),o=new Dropdown({element:$("#examples-dropdown"),name:"Examples",options:{mandelbrot:"Classical Mandelbrot",variedExponent:"Varied Exponent",trig:"Trig Example",burningShip:"Burning Ship",rationalMap:"Rational Map",mandelbrotDust:"Mandelbrot Dust",vertebrae:"Vertebrae",...window.DEBUG&&{random:"Random"}},onInput:function(){{var e;"random"===o.value?(e=getRandomGlsl({variables:["z","c"]}),console.log(e),a.setValue(e)):a.setValue(n[o.value])}s()}}),a=new Textarea({element:$("#glsl-textarea"),name:"Generating Code",value:"cadd(cpow(z, 2.0), c)",onInput:()=>{o.value&&o.setValue({newValue:"default"})},onEnter:s}),i=new TextBox({element:$("#resolution-input"),name:"Resolution",value:500,minValue:100,maxValue:2e3,onEnter:s,onInput:function(){e.resolution=i.value*siteSettings.resolutionMultiplier,e.wilson&&e.wilson.resizeCanvas({width:e.resolution})}}),r=new Slider({element:$("#num-iterations-slider"),name:"Iterations",value:e.numIterations,min:100,max:8e3,snapPoints:[500,1e3,2e3],logarithmic:!0,integer:!0,onInput:()=>{e.numIterations=r.value,e.needNewFrame=!0}});async function s(){await t.loaded,t.setState({newState:!1}),t.disabled=!1,e.run({generatingCode:a.value})}s()}