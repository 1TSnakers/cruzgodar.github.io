import { showPage } from "/scripts/src/load-page.mjs"
import{GeneralizedJuliaSet}from"./class.min.mjs";function load(){var e=$("#switch-julia-mode-button");e.style.opacity=1;const c=new GeneralizedJuliaSet($("#output-canvas"),"cadd(cpow(z, 2.0), c)",e);function a(){var e=o.value||"cadd(cpow(z, 2.0), c)",a=parseInt(d.value||500),t=parseFloat(u.value||1),n=parseInt(i.value||200);c.run(e,a,t,n)}c.loadPromise.then(()=>a());const o=$("#code-textarea"),t=(o.value="cadd(cpow(z, 2.0), c)",c.listenToInputElements([o],a),{mandelbrot:"cadd(cpow(z, 2.0), c)","var-exp":"cadd(cpow(z, 4.0), c)",trig:"csin(cmul(z, c))","burning-ship":"cadd(cpow(vec2(abs(z.x), -abs(z.y)), 2.0), c)","rational-map":"cadd(csub(cpow(z, 2.0), cmul(.05, cpow(z, -2.0))), c)","mandelbrot-dust":"cadd(csub(cpow(z, 2.0), vec2(0.0, cmul(.05, cpow(z, -2.0).y))), c)"}),n=$("#example-selector-dropdown"),d=(n.addEventListener("input",()=>{"none"!==n.value&&(o.value=t[n.value],a())}),$("#resolution-input")),u=$("#exposure-input"),i=$("#num-iterations-input");c.setInputCaps([d,i],[2e3,500]),d.addEventListener("input",()=>{c.resolution=parseInt(d.value||500),c.changeAspectRatio(!0)}),u.addEventListener("input",()=>{c.exposure=parseFloat(u.value||1)}),i.addEventListener("input",()=>{c.numIterations=parseInt(i.value||200)}),$("#generate-button").addEventListener("click",a),e.addEventListener("click",()=>c.switchJuliaMode()),$("#download-button").addEventListener("click",()=>{c.wilson.downloadFrame("a-generalized-julia-set.png")}),showPage()}export{load};