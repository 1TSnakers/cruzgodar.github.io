import{Applet}from"/scripts/src/applets.min.mjs";import{addTemporaryWorker}from"/scripts/src/main.min.mjs";import{Wilson}from"/scripts/wilson.min.mjs";class KickedRotator extends Applet{webWorker=null;hues=[];values=[];numWrites=[];constructor(e){super(e);this.wilson=new Wilson(e,{renderer:"cpu",canvasWidth:1e3,canvasHeight:1e3,useFullscreen:!0,useFullscreenButton:!0,enterFullscreenButtonIconPath:"/graphics/general-icons/enter-fullscreen.png",exitFullscreenButtonIconPath:"/graphics/general-icons/exit-fullscreen.png"})}run({resolution:i,K:e,orbitSeparation:s}){const l=new Array(i*i);for(let s=0;s<i;s++)for(let e=0;e<i;e++)l[i*s+e]=0;this.wilson.changeCanvasSize(i,i),this.wilson.ctx.fillStyle="rgb(0, 0, 0)",this.wilson.ctx.fillRect(0,0,i,i),this.webWorker=addTemporaryWorker("/applets/kicked-rotator/scripts/worker.js"),this.webWorker.onmessage=e=>{var r,t=e.data[0],o=e.data[1];for(let s=0;s<i;s++)for(let e=0;e<i;e++)t[i*s+e]>l[i*s+e]&&(r=this.wilson.utils.hsvToRgb(o,1,t[i*s+e]/255),this.wilson.ctx.fillStyle=`rgb(${r[0]}, ${r[1]}, ${r[2]})`,this.wilson.ctx.fillRect(e,s,1,1),l[i*s+e]=t[i*s+e])},this.webWorker.postMessage([i,e,s])}}export{KickedRotator};