import{Applet}from"/scripts/src/applets.min.mjs";class KickedRotator extends Applet{webWorker=null;hues=[];values=[];numWrites=[];constructor(e){super(e);this.wilson=new Wilson(e,{renderer:"cpu",canvasWidth:1e3,canvasHeight:1e3,useFullscreen:!0,useFullscreenButton:!0,enterFullscreenButtonIconPath:"/graphics/general-icons/enter-fullscreen.png",exitFullscreenButtonIconPath:"/graphics/general-icons/exit-fullscreen.png"})}run(l,e,t){let o=new Array(l*l);for(let t=0;t<l;t++)for(let e=0;e<l;e++)o[l*t+e]=0;this.wilson.changeCanvasSize(l,l),this.wilson.ctx.fillStyle="rgb(0, 0, 0)",this.wilson.ctx.fillRect(0,0,l,l);try{this.webWorker.terminate()}catch(e){}DEBUG?this.webWorker=new Worker("/applets/kicked-rotator/scripts/worker.js"):this.webWorker=new Worker("/applets/kicked-rotator/scripts/worker.min.js"),this.workers.push(this.webWorker),this.webWorker.onmessage=e=>{var r,s=e.data[0],i=e.data[1];for(let t=0;t<l;t++)for(let e=0;e<l;e++)s[l*t+e]>o[l*t+e]&&(r=this.wilson.utils.hsvToRgb(i,1,s[l*t+e]/255),this.wilson.ctx.fillStyle=`rgb(${r[0]}, ${r[1]}, ${r[2]})`,this.wilson.ctx.fillRect(e,t,1,1),o[l*t+e]=s[l*t+e])},this.webWorker.postMessage([l,e,t])}}export{KickedRotator};