!function(){"use strict";let e=new Wilson(Page.element.querySelector("#output-canvas"),{renderer:"cpu",canvas_width:1e3,canvas_height:1e3,use_fullscreen:!0,use_fullscreen_button:!0,enter_fullscreen_button_icon_path:"/graphics/general-icons/enter-fullscreen.png",exit_fullscreen_button_icon_path:"/graphics/general-icons/exit-fullscreen.png"}),t=null,n=[];Page.element.querySelector("#generate-button").addEventListener("click",c);let r=Page.element.querySelector("#grid-size-input"),l=Page.element.querySelector("#k-input"),o=Page.element.querySelector("#orbit-separation-input");r.addEventListener("keydown",function(e){13===e.keyCode&&c()}),l.addEventListener("keydown",function(e){13===e.keyCode&&c()}),o.addEventListener("keydown",function(e){13===e.keyCode&&c()});function c(){let c=parseInt(r.value||500),i=parseFloat(l.value||.75),a=parseInt(o.value||3);n=Array(c*c);for(let s=0;s<c;s++)for(let u=0;u<c;u++)n[c*s+u]=0;e.change_canvas_size(c,c),e.ctx.fillStyle="rgb(0, 0, 0)",e.ctx.fillRect(0,0,c,c);try{t.terminate()}catch(d){}t=DEBUG?new Worker("/applets/the-kicked-rotator/scripts/worker.js"):new Worker("/applets/the-kicked-rotator/scripts/worker.min.js"),Page.temporary_web_workers.push(t),t.onmessage=function(t){let r=t.data[0],l=t.data[1];for(let o=0;o<c;o++)for(let i=0;i<c;i++)if(r[c*o+i]>n[c*o+i]){let a=e.utils.hsv_to_rgb(l,1,r[c*o+i]/255);e.ctx.fillStyle=`rgb(${a[0]}, ${a[1]}, ${a[2]})`,e.ctx.fillRect(i,o,1,1),n[c*o+i]=r[c*o+i]}},t.postMessage([c,i,a])}Page.element.querySelector("#download-button").addEventListener("click",()=>{e.download_frame("a-kicked-rotator.png")}),Page.show()}();