"use strict";class KickedRotator extends Applet{webWorker=null;hues=[];values=[];numWrites=[];constructor(e){super(e);let t={renderer:"cpu",canvasWidth:1e3,canvasHeight:1e3,useFullscreen:!0,useFullscreenButton:!0,enterFullscreenButtonIconPath:"/graphics/general-icons/enter-fullscreen.png",exitFullscreenButtonIconPath:"/graphics/general-icons/exit-fullscreen.png"};this.wilson=new Wilson(e,t)}run(e,t,s){let r=Array(e*e);for(let l=0;l<e;l++)for(let i=0;i<e;i++)r[e*l+i]=0;this.wilson.changeCanvasSize(e,e),this.wilson.ctx.fillStyle="rgb(0, 0, 0)",this.wilson.ctx.fillRect(0,0,e,e);try{this.webWorker.terminate()}catch(n){}DEBUG?this.webWorker=new Worker("/applets/kicked-rotator/scripts/worker.js"):this.webWorker=new Worker("/applets/kicked-rotator/scripts/worker.min.js"),this.workers.push(this.webWorker),this.webWorker.onmessage=t=>{let s=t.data[0],l=t.data[1];for(let i=0;i<e;i++)for(let n=0;n<e;n++)if(s[e*i+n]>r[e*i+n]){let o=this.wilson.utils.hsvToRgb(l,1,s[e*i+n]/255);this.wilson.ctx.fillStyle=`rgb(${o[0]}, ${o[1]}, ${o[2]})`,this.wilson.ctx.fillRect(n,i,1,1),r[e*i+n]=s[e*i+n]}},this.webWorker.postMessage([e,t,s])}}