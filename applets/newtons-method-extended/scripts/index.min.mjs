import { showPage } from "/scripts/src/load-page.mjs"
import{NewtonsMethodExtended}from"./class.min.mjs";function load(){const n=new NewtonsMethodExtended($("#output-canvas"));function e(){var e=i.value;n.run(e)}n.loadPromise.then(()=>e());const i=$("#code-textarea");i.value="cmul(csin(z), sin(cmul(z, i)))",n.listenToInputElements([i],e),$("#randomize-palette-button").addEventListener("click",n.animatePaletteChange.bind(n)),$("#generate-button").addEventListener("click",e);const t=$("#resolution-input"),s=$("#derivative-precision-input"),o=(n.setInputCaps([t,s],[2e3,100]),t.addEventListener("input",()=>{n.resolution=parseInt(t.value||500),n.changeAspectRatio(!0)}),s.addEventListener("input",()=>{n.derivativePrecision=parseFloat(s.value||20),n.wilson.gl.uniform1f(n.wilson.uniforms.derivativePrecision,n.derivativePrecision),n.wilsonHidden.gl.uniform1f(n.wilsonHidden.uniforms.derivativePrecision,n.derivativePrecision)}),$("#download-button").addEventListener("click",()=>{n.wilson.downloadFrame("newtons-method-extended.png")}),{none:"",trig:"csin(z)",crosshatch:"cmul(csin(z), csinh(z))",palette:"cmul(sin(z), csinh(z))",butterflies:"cmul(sin(z), tan(z))",swatches:"cmul(csin(vec2(z.x, sign(z.y) * min(abs(z.y), mod(abs(z.y), 2.0*PI) + 2.0*PI))), sin(cmul(vec2(z.x, sign(z.y) * min(abs(z.y), mod(abs(z.y), 2.0*PI) + 2.0*PI)), i)))"}),a=$("#example-selector-dropdown");a.addEventListener("input",()=>{"none"!==a.value&&(i.value=o[a.value],e())}),showPage()}export{load};