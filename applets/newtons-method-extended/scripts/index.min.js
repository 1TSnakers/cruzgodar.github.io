import{showPage}from"../../../scripts/src/loadPage.min.js";import{NewtonsMethodExtended}from"./class.min.js";import{Applet}from"/scripts/src/applets.min.js";import{Button,DownloadButton,GenerateButton}from"/scripts/src/buttons.min.js";import{$}from"/scripts/src/main.min.js";function load(){const n=new NewtonsMethodExtended({canvas:$("#output-canvas")}),t=(n.loadPromise.then(()=>r()),new GenerateButton({element:$("#generate-button"),onClick:r}),new Button({element:$("#randomize-palette-button"),name:"Regenerate Palette",onClick:()=>n.animatePaletteChange()}),new DownloadButton({element:$("#download-button"),wilson:n.wilson,filename:"newtons-method-extended.png"}),$("#code-textarea")),e=(t.value="cmul(csin(z), sin(cmul(z, i)))",Applet.listenToInputElements([t],r),$("#resolution-input"));var i=$("#derivative-precision-slider");const o=$("#derivative-precision-slider-value"),s=(n.setInputCaps([e],[2e3]),e.addEventListener("input",()=>{n.resolution=parseInt(e.value||500),n.changeAspectRatio(!0)}),i.addEventListener("input",()=>{n.derivativePrecision=parseFloat(o.textContent),n.wilson.gl.uniform1f(n.wilson.uniforms.derivativePrecision,n.derivativePrecision),n.wilsonHidden.gl.uniform1f(n.wilsonHidden.uniforms.derivativePrecision,n.derivativePrecision)}),{none:"",trig:"csin(z)",crosshatch:"cmul(csin(z), csinh(z))",palette:"cmul(sin(z), csinh(z))",butterflies:"cmul(sin(z), tan(z))",swatches:"cmul(csin(vec2(z.x, sign(z.y) * min(abs(z.y), mod(abs(z.y), 2.0*PI) + 2.0*PI))), sin(cmul(vec2(z.x, sign(z.y) * min(abs(z.y), mod(abs(z.y), 2.0*PI) + 2.0*PI)), i)))"}),a=$("#example-selector-dropdown");function r(){var e=t.value;n.run({generatingCode:e})}a.addEventListener("input",()=>{"none"!==a.value&&(t.value=s[a.value],r())}),showPage()}export{load};