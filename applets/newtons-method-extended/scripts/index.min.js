import{Applet}from"../../../scripts/applets/applet.min.js";import{showPage}from"../../../scripts/src/loadPage.min.js";import{NewtonsMethodExtended}from"./class.min.js";import{Button,DownloadButton,GenerateButton}from"/scripts/src/buttons.min.js";import{Dropdown}from"/scripts/src/dropdowns.min.js";import{$}from"/scripts/src/main.min.js";import{Slider}from"/scripts/src/sliders.min.js";import{TextBox}from"/scripts/src/textBoxes.min.js";function load(){const n=new NewtonsMethodExtended({canvas:$("#output-canvas")}),e=(n.loadPromise.then(()=>r()),new GenerateButton({element:$("#generate-button"),onClick:r}),new Button({element:$("#randomize-palette-button"),name:"Regenerate Palette",onClick:()=>n.animatePaletteChange()}),new DownloadButton({element:$("#download-button"),wilson:n.wilson,filename:"newtons-method-extended.png"}),new TextBox({element:$("#resolution-input"),name:"Resolution",value:500,maxValue:2e3,onInput:function(){n.resolution=e.value,n.changeAspectRatio(!0)}})),t=$("#code-textarea"),o=(t.value="cmul(csin(z), sin(cmul(z, i)))",Applet.listenToInputElements([t],r),new Slider({element:$("#derivative-precision-slider"),name:"Derivative Precision",value:6,min:3,max:20,onInput:function(){n.derivativePrecision=o.value,n.wilson.gl.uniform1f(n.wilson.uniforms.derivativePrecision,n.derivativePrecision),n.wilsonHidden.gl.uniform1f(n.wilsonHidden.uniforms.derivativePrecision,n.derivativePrecision),n.needNewFrame=!0}})),i={none:"",trig:"csin(z)",crosshatch:"cmul(csin(z), csinh(z))",palette:"cmul(sin(z), csinh(z))",butterflies:"cmul(sin(z), tan(z))",swatches:"cmul(csin(vec2(z.x, sign(z.y) * min(abs(z.y), mod(abs(z.y), 2.0*PI) + 2.0*PI))), sin(cmul(vec2(z.x, sign(z.y) * min(abs(z.y), mod(abs(z.y), 2.0*PI) + 2.0*PI)), i)))"},s=new Dropdown({element:$("#examples-dropdown"),name:"Examples",options:{trig:"Trig Function",crosshatch:"Crosshatch",palette:"Palette Demonstration",butterflies:"Butterflies",swatches:"Color Swatches"},onInput:function(){t.value=i[s.value],r()}});function r(){var e=t.value;n.run({generatingCode:e})}showPage()}export{load};