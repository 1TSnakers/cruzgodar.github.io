import{showPage}from"../../../scripts/src/loadPage.min.js";import{NewtonsMethodExtended}from"./class.min.js";import{Button,DownloadButton,GenerateButton}from"/scripts/src/buttons.min.js";import{Dropdown}from"/scripts/src/dropdowns.min.js";import{$}from"/scripts/src/main.min.js";import{Slider}from"/scripts/src/sliders.min.js";import{TextBox}from"/scripts/src/textBoxes.min.js";import{Textarea}from"/scripts/src/textareas.min.js";export default function(){const e=new NewtonsMethodExtended({canvas:$("#output-canvas")}),n=(e.loadPromise.then(()=>r()),new GenerateButton({element:$("#generate-button"),onClick:r}),new Button({element:$("#randomize-palette-button"),name:"Regenerate Palette",onClick:()=>e.animatePaletteChange()}),new DownloadButton({element:$("#download-button"),wilson:e.wilson,filename:"newtons-method-extended.png"}),new TextBox({element:$("#resolution-input"),name:"Resolution",value:500,minValue:100,maxValue:2e3,onInput:function(){e.resolution=n.value,e.changeAspectRatio(!0)}})),t=new Slider({element:$("#derivative-precision-slider"),name:"Derivative Precision",value:6,min:3,max:20,onInput:function(){e.derivativePrecision=t.value,e.wilson.gl.uniform1f(e.wilson.uniforms.derivativePrecision,e.derivativePrecision),e.wilsonHidden.gl.uniform1f(e.wilsonHidden.uniforms.derivativePrecision,e.derivativePrecision),e.needNewFrame=!0}}),o={none:"",trig:"csin(z)",crosshatch:"cmul(csin(z), csinh(z))",palette:"cmul(sin(z), csinh(z))",butterflies:"cmul(sin(z), tan(z))",swatches:"cmul(csin(vec2(z.x, sign(z.y) * min(abs(z.y), mod(abs(z.y), 2.0*PI) + 2.0*PI))), sin(cmul(vec2(z.x, sign(z.y) * min(abs(z.y), mod(abs(z.y), 2.0*PI) + 2.0*PI)), i)))"},i=new Dropdown({element:$("#examples-dropdown"),name:"Examples",options:{trig:"Trig Function",crosshatch:"Crosshatch",palette:"Palette Demonstration",butterflies:"Butterflies",swatches:"Color Swatches"},onInput:function(){s.setValue(o[i.value]),r()}}),s=new Textarea({element:$("#glsl-textarea"),name:"Generating Code",value:"cmul(csin(z), sin(cmul(z, i)))",onEnter:r});function r(){e.run({generatingCode:s.value})}showPage()}