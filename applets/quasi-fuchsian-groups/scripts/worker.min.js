"use strict";onmessage=async function(t){canvas_width=t.data[0],canvas_height=t.data[1],max_depth=t.data[2],max_pixel_brightness=t.data[3],box_size=t.data[4],coefficients=t.data[5],await draw_quasi_fuchsian_group()};let canvas_width=null,canvas_height=null,max_depth=null,max_pixel_brightness=null,box_size=null,coefficients=[],brightness=[],x=0,y=0;function draw_quasi_fuchsian_group(){return new Promise(async function(t,s){brightness=[];for(let t=0;t<canvas_height;t++){brightness[t]=[];for(let s=0;s<canvas_width;s++)brightness[t][s]=0}for(let t=0;t<4;t++)search_step(0,0,t,-1,-1,1);let a=brightness.flat().sort(function(t,s){return t-s}),e=a[Math.round(.999*a.length)-1];for(let t=0;t<canvas_height;t++)for(let s=0;s<canvas_width;s++)brightness[t][s]=Math.min(Math.sqrt(brightness[t][s]/e),1);postMessage([brightness]),t()})}function search_step(t,s,a,e,i,n){if(n!==max_depth)for(let e=3;e<6;e++){x=t,y=s;let i=(a+e)%4;apply_transformation(i);let h=0,c=0;if(canvas_width>=canvas_height?(h=Math.floor((box_size/2-y)/box_size*canvas_height),c=Math.floor((x/(canvas_width/canvas_height)+box_size/2)/box_size*canvas_width)):(h=Math.floor((canvas_width/canvas_height*-y+box_size/2)/box_size*canvas_height),c=Math.floor((x+box_size/2)/box_size*canvas_width)),h>=0&&h<canvas_height&&c>=0&&c<canvas_width){if(brightness[h][c]===max_pixel_brightness)continue;brightness[h][c]++}search_step(x,y,i,h,c,n+1)}}function apply_transformation(t){let s=coefficients[t][0][0],a=coefficients[t][0][1],e=coefficients[t][1][0],i=coefficients[t][1][1],n=coefficients[t][2][0],h=coefficients[t][2][1],c=coefficients[t][3][0],o=coefficients[t][3][1],_=s*x-a*y+e,f=s*y+a*x+i,r=n*x-h*y+c,l=n*y+h*x+o,g=r*r+l*l;x=(_*r+f*l)/g,y=(f*r-_*l)/g}