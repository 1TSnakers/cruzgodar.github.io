"use strict";onmessage=async function(t){canvas_width=t.data[0],canvas_height=t.data[1],max_depth=t.data[2],max_pixel_brightness=t.data[3],box_size=t.data[4],coefficients=t.data[5],await draw_quasi_fuchsian_group()};let canvas_width=null,canvas_height=null,max_depth=null,max_pixel_brightness=null,box_size=null,coefficients=[],brightness=[],x=0,y=0;function draw_quasi_fuchsian_group(){return new Promise(async function(t,e){brightness=[];for(let t=0;t<canvas_height;t++){brightness[t]=[];for(let e=0;e<canvas_width;e++)brightness[t][e]=0}for(let t=0;t<4;t++)search_step(0,0,t,-1,-1,1);let s=brightness.flat().sort(function(t,e){return t-e}),i=s[Math.round(.999*s.length)-1];for(let t=0;t<canvas_height;t++)for(let e=0;e<canvas_width;e++)brightness[t][e]=Math.min(Math.sqrt(brightness[t][e]/i),1);postMessage([brightness]),t()})}function search_step(t,e,s,i,a,n){if(n!==max_depth)for(let i=3;i<6;i++){x=t,y=e;let a=(s+i)%4;apply_transformation(a);let c=Math.floor((box_size/2-y)/box_size*canvas_height),h=Math.floor((x/(canvas_width/canvas_height)+box_size/2)/box_size*canvas_width);if(c>=0&&c<canvas_height&&h>=0&&h<canvas_width){if(brightness[c][h]===max_pixel_brightness)continue;brightness[c][h]++}search_step(x,y,a,c,h,n+1)}}function apply_transformation(t){let e=coefficients[t][0][0],s=coefficients[t][0][1],i=coefficients[t][1][0],a=coefficients[t][1][1],n=coefficients[t][2][0],c=coefficients[t][2][1],h=coefficients[t][3][0],o=coefficients[t][3][1],f=e*x-s*y+i,r=e*y+s*x+a,_=n*x-c*y+h,l=n*y+c*x+o,g=_*_+l*l;x=(f*_+r*l)/g,y=(r*_-f*l)/g}