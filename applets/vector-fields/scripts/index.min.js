"use strict";!async function(){await Site.loadApplet("vector-fields");let e=new VectorField($("#output-canvas"));function t(){let t=o.checked?a.value:Applet.parseNaturalGLSL(a.value),n=parseInt(s.value||500),l=Math.max(parseInt(i.value||1e4),100),r=parseFloat(u.value||1)/150,d=Math.min(parseInt(p.value||100),255);e.run(t,n,l,r,d,0,0,.5)}function n(){let t=parseInt(s.value||500),n=Math.max(parseInt(i.value||1e4),100),l=parseFloat(u.value||1)/150,r=Math.min(parseInt(p.value||100),255);e.generateNewField(t,n,l,r)}e.loadPromise.then(()=>t());let l={none:"","sources-and-sinks":"((0.6x - 1)(0.6x + 1), (0.6y + 1)(0.6y - 1))","saddle-points":"(0.49y^2, 1 - 0.49x^2)",clockwork:"(sin(1.5y), -sin(1.5x))",df:"(1, sin(y) / (x^2 + 1))",cross:"(sin(y / 2.5), tan(x / 2.5))",draggables:"(draggableArg.x * x - y, x + draggableArg.y * y)"},r=$("#example-selector-dropdown");r.addEventListener("input",()=>{"none"!==r.value&&(a.value=l[r.value],t())});let a=$("#code-textarea");a.addEventListener("keydown",e=>{13===e.keyCode&&(e.preventDefault(),t())});let o=$("#raw-glsl-checkbox"),d=$("#generate-button");d.addEventListener("click",t);let s=$("#resolution-input");s.addEventListener("input",n);let i=$("#max-particles-input");i.addEventListener("input",n);let u=$("#speed-input");u.addEventListener("input",()=>{let t=parseFloat(u.value||1)/150;e.wilsonUpdate.gl.useProgram(e.wilsonUpdate.render.shaderPrograms[0]),e.wilsonUpdate.gl.uniform1f(e.wilsonUpdate.uniforms.dt[0],t),e.wilsonUpdate.gl.useProgram(e.wilsonUpdate.render.shaderPrograms[1]),e.wilsonUpdate.gl.uniform1f(e.wilsonUpdate.uniforms.dt[1],t),e.wilsonUpdate.gl.useProgram(e.wilsonUpdate.render.shaderPrograms[2]),e.wilsonUpdate.gl.uniform1f(e.wilsonUpdate.uniforms.dt[2],t),e.wilsonUpdate.gl.useProgram(e.wilsonUpdate.render.shaderPrograms[3]),e.wilsonUpdate.gl.uniform1f(e.wilsonUpdate.uniforms.dt[3],t)});let p=$("#lifetime-input");p.addEventListener("input",n);let m=$("#download-button");m.addEventListener("click",()=>e.wilson.downloadFrame("a-vector-field.png")),Page.show()}();