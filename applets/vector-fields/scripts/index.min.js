import{showPage}from"../../../scripts/src/loadPage.min.js";import{VectorField}from"./class.min.js";import{Applet}from"/scripts/src/applets.min.js";import{DownloadButton,GenerateButton}from"/scripts/src/buttons.min.js";import{Checkbox}from"/scripts/src/checkboxes.min.js";import{$}from"/scripts/src/main.min.js";import{TextBox}from"/scripts/src/textBoxes.min.js";function load(){const n=new VectorField({canvas:$("#output-canvas")}),a=(n.loadPromise.then(()=>m()),new TextBox({element:$("#resolution-input"),name:"Resolution",value:500,maxValue:1e3,onInput:p})),o=new TextBox({element:$("#max-particles-input"),name:"Particles",value:1e4,maxValue:1e5,onInput:p}),r=new TextBox({element:$("#lifetime-input"),name:"Particle Lifetime",value:150,onInput:p}),s=new Checkbox({element:$("#raw-glsl-checkbox"),name:"Use Raw GLSL"}),l=$("#code-textarea"),t=(l.addEventListener("keydown",e=>{"Enter"===e.key&&(e.preventDefault(),m())}),{none:"","sources-and-sinks":"((0.6x - 1)(0.6x + 1), (0.6y + 1)(0.6y - 1))","saddle-points":"(0.49y^2, 1 - 0.49x^2)",clockwork:"(sin(1.5y), -sin(1.5x))",df:"(1, sin(y) / (x^2 + 1))",cross:"(sin(y / 2.5), tan(x / 2.5))",draggables:"(draggableArg.x * x - y, x + draggableArg.y * y)"}),i=$("#example-selector-dropdown");i.addEventListener("input",()=>{"none"!==i.value&&(l.value=t[i.value],m())}),new GenerateButton({element:$("#generate-button"),onClick:m}),new DownloadButton({element:$("#download-button"),wilson:n.wilson,filename:"a-vector-field.png"});var u=$("#speed-slider");const c=$("#speed-slider-value");function m(){var e=s.checked?l.value:Applet.parseNaturalGLSL(l.value),t=parseFloat(c.textContent||1)/300;n.run({generatingCode:e,resolution:a.value,maxParticles:Math.max(o.value,100),dt:t,lifetime:Math.min(r.value,255),worldCenterX:0,worldCenterY:0,zoomLevel:.5})}function p(){var e=parseFloat(c.textContent||1)/300;n.generateNewField({resolution:a.value,maxParticles:Math.max(o.value,100),dt:e,lifetime:Math.min(r.value,255)})}u.addEventListener("input",function(){var e=parseFloat(c.textContent||1)/300;n.dt=e}),showPage()}export{load};