"use strict";!async function(){await Site.loadApplet("vector-fields");let e=new VectorField($("#output-canvas"));function n(){let n=d.checked?r.value:Applet.parseNaturalGLSL(r.value),t=parseInt(i.value||500),a=Math.max(parseInt(o.value||1e4),100),l=parseFloat(u.value||1)/150,s=Math.min(parseInt(p.value||100),255);e.run(n,t,a,l,s,0,0,.5)}function t(){let n=parseInt(i.value||500),t=Math.max(parseInt(o.value||1e4),100),a=parseFloat(u.value||1)/150,l=Math.min(parseInt(p.value||100),255);e.generateNewField(n,t,a,l)}e.loadPromise.then(()=>n());let a={none:"","sources-and-sinks":"((0.6x - 1)(0.6x + 1), (0.6y + 1)(0.6y - 1))","saddle-points":"(0.49y^2, 1 - 0.49x^2)",clockwork:"(sin(1.5y), -sin(1.5x))",df:"(1, sin(y) / (x^2 + 1))",cross:"(sin(y / 2.5), tan(x / 2.5))",draggables:"(draggableArg.x * x - y, x + draggableArg.y * y)"},l=$("#example-selector-dropdown");l.addEventListener("input",()=>{"none"!==l.value&&(r.value=a[l.value],n())});let r=$("#code-textarea");r.addEventListener("keydown",e=>{13===e.keyCode&&(e.preventDefault(),n())});let d=$("#raw-glsl-checkbox"),s=$("#generate-button");s.addEventListener("click",n);let i=$("#resolution-input");i.addEventListener("input",t);let o=$("#max-particles-input");o.addEventListener("input",t);let u=$("#speed-input");u.addEventListener("input",()=>{let n=parseFloat(u.value||1)/150;e.wilsonUpdate.gl.useProgram(e.wilsonUpdate.render.shaderPrograms[0]),e.wilsonUpdate.gl.uniform1f(e.wilsonUpdate.uniforms.dt[0],n),e.wilsonUpdate.gl.useProgram(e.wilsonUpdate.render.shaderPrograms[1]),e.wilsonUpdate.gl.uniform1f(e.wilsonUpdate.uniforms.dt[1],n),e.wilsonUpdate.gl.useProgram(e.wilsonUpdate.render.shaderPrograms[2]),e.wilsonUpdate.gl.uniform1f(e.wilsonUpdate.uniforms.dt[2],n),e.wilsonUpdate.gl.useProgram(e.wilsonUpdate.render.shaderPrograms[3]),e.wilsonUpdate.gl.uniform1f(e.wilsonUpdate.uniforms.dt[3],n)});let p=$("#lifetime-input");p.addEventListener("input",t);let g=$("#download-button");g.addEventListener("click",()=>e.wilson.downloadFrame("a-vector-field.png")),Page.show()}();