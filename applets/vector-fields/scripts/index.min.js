import{showPage}from"../../../scripts/src/loadPage.min.js";import{VectorField}from"./class.min.js";import{Applet}from"/scripts/src/applets.min.js";import{DownloadButton,GenerateButton}from"/scripts/src/buttons.min.js";import{$}from"/scripts/src/main.min.js";function load(){const o=new VectorField({canvas:$("#output-canvas")}),s=(o.loadPromise.then(()=>r()),$("#code-textarea")),t=(s.addEventListener("keydown",e=>{"Enter"===e.key&&(e.preventDefault(),r())}),{none:"","sources-and-sinks":"((0.6x - 1)(0.6x + 1), (0.6y + 1)(0.6y - 1))","saddle-points":"(0.49y^2, 1 - 0.49x^2)",clockwork:"(sin(1.5y), -sin(1.5x))",df:"(1, sin(y) / (x^2 + 1))",cross:"(sin(y / 2.5), tan(x / 2.5))",draggables:"(draggableArg.x * x - y, x + draggableArg.y * y)"}),n=$("#example-selector-dropdown"),l=(n.addEventListener("input",()=>{"none"!==n.value&&(s.value=t[n.value],r())}),$("#raw-glsl-checkbox")),i=(new GenerateButton({element:$("#generate-button"),onClick:r}),new DownloadButton({element:$("#download-button"),wilson:o.wilson,filename:"a-vector-field.png"}),$("#resolution-input")),d=$("#max-particles-input");var a=$("#speed-slider");const p=$("#speed-slider-value"),u=$("#lifetime-input");function r(){var e=l.checked?s.value:Applet.parseNaturalGLSL(s.value),t=parseInt(i.value||500),n=Math.max(parseInt(d.value||1e4),100),a=parseFloat(p.textContent||1)/300,r=Math.min(parseInt(u.value||150),255);o.run({generatingCode:e,resolution:t,maxParticles:n,dt:a,lifetime:r,worldCenterX:0,worldCenterY:0,zoomLevel:.5})}function c(){var e=parseInt(i.value||500),t=Math.max(parseInt(d.value||1e4),100),n=parseFloat(p.textContent||1)/300,a=Math.min(parseInt(u.value||150),255);o.generateNewField({resolution:e,maxParticles:t,dt:n,lifetime:a})}o.setInputCaps([i,d],[1e3,1e5]),i.addEventListener("input",c),d.addEventListener("input",c),a.addEventListener("input",function(){var e=parseFloat(p.textContent||1)/300;o.dt=e}),u.addEventListener("input",c),showPage()}export{load};