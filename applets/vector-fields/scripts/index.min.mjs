import{VectorField}from"./class.min.mjs";import{Applet}from"/scripts/src/applets.min.mjs";import{showPage}from"/scripts/src/load-page.min.mjs";import{$}from"/scripts/src/main.min.mjs";function load(){const s=new VectorField({canvas:$("#output-canvas")}),o=(s.loadPromise.then(()=>r()),$("#code-textarea")),t=(o.addEventListener("keydown",e=>{"Enter"===e.key&&(e.preventDefault(),r())}),{none:"","sources-and-sinks":"((0.6x - 1)(0.6x + 1), (0.6y + 1)(0.6y - 1))","saddle-points":"(0.49y^2, 1 - 0.49x^2)",clockwork:"(sin(1.5y), -sin(1.5x))",df:"(1, sin(y) / (x^2 + 1))",cross:"(sin(y / 2.5), tan(x / 2.5))",draggables:"(draggableArg.x * x - y, x + draggableArg.y * y)"}),a=$("#example-selector-dropdown"),i=(a.addEventListener("input",()=>{"none"!==a.value&&(o.value=t[a.value],r())}),$("#raw-glsl-checkbox"));$("#generate-button").addEventListener("click",r);const l=$("#resolution-input"),d=$("#max-particles-input");var n=$("#speed-slider");const p=$("#speed-slider-value"),c=$("#lifetime-input");function r(){var e=i.checked?o.value:Applet.parseNaturalGLSL(o.value),t=parseInt(l.value||500),a=Math.max(parseInt(d.value||1e4),100),n=parseFloat(p.textContent||1)/300,r=Math.min(parseInt(c.value||150),255);s.run({generatingCode:e,resolution:t,maxParticles:a,dt:n,lifetime:r,worldCenterX:0,worldCenterY:0,zoomLevel:.5})}function u(){var e=parseInt(l.value||500),t=Math.max(parseInt(d.value||1e4),100),a=parseFloat(p.textContent||1)/300,n=Math.min(parseInt(c.value||150),255);s.generateNewField({resolution:e,maxParticles:t,dt:a,lifetime:n})}s.setInputCaps([l,d],[1e3,1e5]),l.addEventListener("input",u),d.addEventListener("input",u),n.addEventListener("input",function(){var e=parseFloat(p.textContent||1)/300;s.dt=e}),c.addEventListener("input",u),$("#download-button").addEventListener("click",()=>s.wilson.downloadFrame("a-vector-field.png")),showPage()}export{load};