!function(){"use strict";let e=new Wilson(document.querySelector("#output-canvas"),{renderer:"cpu",canvas_width:1e3,canvas_height:1e3,use_fullscreen:!0,use_fullscreen_button:!0,enter_fullscreen_button_icon_path:"/graphics/general-icons/enter-fullscreen.png",exit_fullscreen_button_icon_path:"/graphics/general-icons/exit-fullscreen.png"}),t=null,n=[];document.querySelector("#generate-button").addEventListener("click",l);let r=document.querySelector("#grid-size-input"),o=document.querySelector("#k-input"),c=document.querySelector("#orbit-separation-input");function l(){let l=parseInt(r.value||500),a=parseFloat(o.value||.75),s=parseInt(c.value||3);n=new Array(l*l);for(let e=0;e<l;e++)for(let t=0;t<l;t++)n[l*e+t]=0;e.change_canvas_size(l,l),e.ctx.fillStyle="rgb(0, 0, 0)",e.ctx.fillRect(0,0,l,l);try{t.terminate()}catch(e){}t=DEBUG?new Worker("/applets/the-kicked-rotator/scripts/worker.js"):new Worker("/applets/the-kicked-rotator/scripts/worker.min.js"),Page.temporary_web_workers.push(t),t.onmessage=function(t){let r=t.data[0],o=t.data[1];for(let t=0;t<l;t++)for(let c=0;c<l;c++)if(r[l*t+c]>n[l*t+c]){let a=e.utils.hsv_to_rgb(o,1,r[l*t+c]/255);e.ctx.fillStyle=`rgb(${a[0]}, ${a[1]}, ${a[2]})`,e.ctx.fillRect(c,t,1,1),n[l*t+c]=r[l*t+c]}},t.postMessage([l,a,s])}r.addEventListener("keydown",function(e){13===e.keyCode&&l()}),o.addEventListener("keydown",function(e){13===e.keyCode&&l()}),c.addEventListener("keydown",function(e){13===e.keyCode&&l()}),document.querySelector("#download-button").addEventListener("click",()=>{e.download_frame("a-kicked-rotator.png")})}();