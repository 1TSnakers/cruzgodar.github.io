!function(){"use strict";let e=document.querySelector("#kicked-rotator-graph").getContext("2d"),t=null;function r(){let r=parseInt(document.querySelector("#grid-size-input").value||500),o=parseFloat(document.querySelector("#k-input").value||.75),a=parseInt(document.querySelector("#orbit-separation-input").value||3)+1;document.querySelector("#kicked-rotator-graph").setAttribute("width",r),document.querySelector("#kicked-rotator-graph").setAttribute("height",r),e.fillStyle="rgb(0, 0, 0)",e.fillRect(0,0,r,r);try{t.terminate()}catch(e){}t=DEBUG?new Worker("/applets/the-kicked-rotator/scripts/worker.js"):new Worker("/applets/the-kicked-rotator/scripts/worker.min.js"),temporary_web_workers.push(t),t.onmessage=function(t){let r=t.data[0],o=function(e,t,r){let o,a,c,n,u,l,d,i;switch(n=Math.floor(6*e),l=r*(1-t),d=r*(1-(u=6*e-n)*t),i=r*(1-(1-u)*t),n%6){case 0:o=r,a=i,c=l;break;case 1:o=d,a=r,c=l;break;case 2:o=l,a=r,c=i;break;case 3:o=l,a=d,c=r;break;case 4:o=i,a=l,c=r;break;case 5:o=r,a=l,c=d}return[Math.round(255*o),Math.round(255*a),Math.round(255*c)]}(t.data[1],1,1);e.fillStyle=`rgb(${o[0]}, ${o[1]}, ${o[2]})`;for(let t=0;t<r.length;t++)e.fillRect(r[t][1],r[t][0],1,1)},t.postMessage([r,o,a])}1===url_vars.contrast&&(1===url_vars.theme?document.querySelector("#kicked-rotator-graph").style.borderColor="rgb(192, 192, 192)":document.querySelector("#kicked-rotator-graph").style.borderColor="rgb(64, 64, 64)"),document.querySelector("#generate-button").addEventListener("click",r),document.querySelector("#grid-size-input").addEventListener("keydown",function(e){13===e.keyCode&&r()}),document.querySelector("#download-button").addEventListener("click",function(){let e=document.createElement("a");e.download="kicked-rotator.png",e.href=document.querySelector("#kicked-rotator-graph").toDataURL(),e.click(),e.remove()})}();