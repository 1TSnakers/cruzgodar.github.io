!function(){"use strict";let e=null,t=document.querySelector("#mandelbrot-zoom").offsetWidth,o=document.querySelector("#high-res-mandelbrot-zoom").offsetWidth,r=100,n=500,l=50,d=100,u=-.75,c=0,a=0,m=0,i=3,s=.6,b=[],h=!1,g=0,f=0,y=[],q=!1;function S(a,m,q,S,v){y=[];for(let e=0;e<q;e++)y[e]=[];!0===h&&!1===v&&(i/=5,s/=5,d+=150,l+=150,u=g,c=f,h=!1);let z=0;v?(document.querySelector("#high-res-mandelbrot-zoom").setAttribute("width",q),document.querySelector("#high-res-mandelbrot-zoom").setAttribute("height",q),e=document.querySelector("#high-res-mandelbrot-zoom").getContext("2d"),z=o):(document.querySelector("#mandelbrot-zoom").setAttribute("width",q),document.querySelector("#mandelbrot-zoom").setAttribute("height",q),e=document.querySelector("#mandelbrot-zoom").getContext("2d"),z=t);for(let e=0;e<q;e++)p(e,a,m,q,S);let C=y.flat().sort(function(e,t){return e-t}),w=0;if(q===r){b.push(C[Math.round(.999*C.length)-1]),b.length>10&&b.shift(),w=0;for(let e=0;e<b.length;e++)w+=b[e];w/=b.length}else w=C[Math.round(.9999*C.length)-1];for(let e=0;e<q;e++)y[e]=y[e].map(e=>e/w*255);let L=e.getImageData(0,0,q,q),E=L.data;for(let e=0;e<q;e++)for(let t=0;t<q;t++){let o=4*e*q+4*t;E[o]=0,E[o+1]=y[e][t],E[o+2]=y[e][t],E[o+3]=255}if(e.putImageData(L,0,0),q===n&&!1===v){let e=document.querySelector("#mandelbrot-set").getAttribute("width");document.querySelector("#mandelbrot-set").getContext("2d").drawImage(document.querySelector("#mandelbrot-zoom"),0,0,e,e),h=!0,g=a,f=m}}function p(e,t,o,r,n){for(let l=0;l<r;l++){let d=(l-r/2)/r*s+t,u=-(e-r/2)/r*s+o,c=d,a=u,m=Math.exp(-Math.sqrt(d*d+u*u)),i=0;for(i=0;i<n;i++){let e=2*d*u+a;if(d=d*d-u*u+c,u=e,m+=Math.exp(-Math.sqrt(d*d+u*u)),d*d+u*u>4)break}i===n&&(m=0),y[e][l]=m}}function v(){let e=parseInt(document.querySelector("#dim-input").value||1e3);S(a,m,e,d,!0)}function z(){t=document.querySelector("#mandelbrot-zoom").offsetWidth,o=document.querySelector("#high-res-mandelbrot-zoom").offsetWidth}1===url_vars.contrast&&(1===url_vars.theme?(document.querySelector("#mandelbrot-set").style.borderColor="rgb(192, 192, 192)",document.querySelector("#mandelbrot-zoom").style.borderColor="rgb(192, 192, 192)",document.querySelector("#high-res-mandelbrot-zoom").style.borderColor="rgb(192, 192, 192)"):(document.querySelector("#mandelbrot-set").style.borderColor="rgb(64, 64, 64)",document.querySelector("#mandelbrot-zoom").style.borderColor="rgb(64, 64, 64)",document.querySelector("#high-res-mandelbrot-zoom").style.borderColor="rgb(64, 64, 64)")),function(){document.querySelector("#mandelbrot-set").setAttribute("width",t),document.querySelector("#mandelbrot-set").setAttribute("height",t);let e=document.querySelector("#mandelbrot-set").getContext("2d"),o=new Image;o.src="/applets/mandelbrot-set-explorer/graphics/mandelbrot-set.png",o.onload=function(){e.drawImage(o,0,0,t,t)}}(),document.querySelector("#generate-button").addEventListener("click",v),document.querySelector("#dim-input").addEventListener("keydown",function(e){13===e.keyCode&&v()}),document.querySelector("#download-button").addEventListener("click",function(){let e=document.createElement("a");e.download=m<0?a+" - "+-m+"i.png":a+" + "+m+"i.png";e.href=document.querySelector("#high-res-mandelbrot-zoom").toDataURL(),e.click(),e.remove()}),window.addEventListener("resize",z),temporary_handlers.resize.push(z),setTimeout(z,1e3),document.querySelector("#mandelbrot-set").addEventListener("mousemove",function(e){if(!1===q){let o=e.clientX-document.querySelector("#mandelbrot-set").getBoundingClientRect().left,n=e.clientY-document.querySelector("#mandelbrot-set").getBoundingClientRect().top,d=(o/t-.5)*i+u,a=((t-n)/t-.5)*i+c;S(d,a,r,l,!1)}}),document.querySelector("#mandelbrot-set").addEventListener("click",function(e){let o=e.clientX-document.querySelector("#mandelbrot-set").getBoundingClientRect().left,r=e.clientY-document.querySelector("#mandelbrot-set").getBoundingClientRect().top,l=(o/t-.5)*i+u,s=((t-r)/t-.5)*i+c;S(l,s,n,d,!1),a=l,m=s,q=!0}),document.querySelector("#mandelbrot-set").addEventListener("mouseleave",function(e){q=!1}),function(){let e=0,o=0;document.querySelector("#instructions").innerHTML='Drag along the Mandelbrot set to view that area up close, and release to generate a higher-resolution image. For more information on Mandelbrot and Julia sets, have a look at <a href="/blog/4/a-taste-of-chaos.html" onclick="redirect(\'/blog/4/a-taste-of-chaos.html\')">this blog post</a>.',document.querySelector("#instructions a").addEventListener("click",function(e){e.preventDefault()}),document.querySelector("#mandelbrot-set").addEventListener("touchmove",function(n){n.preventDefault();let d=n.touches[0].clientX-document.querySelector("#mandelbrot-set").getBoundingClientRect().left,a=n.touches[0].clientY-document.querySelector("#mandelbrot-set").getBoundingClientRect().top;e=d,o=a;let m=(d/t-.5)*i+u,s=((t-a)/t-.5)*i+c;S(m,s,r,l,!1)},!1),document.querySelector("#mandelbrot-set").addEventListener("touchend",function(r){r.preventDefault();let l=(e/t-.5)*i+u,s=((t-o)/t-.5)*i+c;S(l,s,n,d,!1),a=l,m=s},!1)}()}();