!function(){"use strict";let e=null,t=document.querySelector("#mandelbrot-zoom").offsetWidth,o=document.querySelector("#high-res-mandelbrot-zoom").offsetWidth,r=100,n=500,l=50,d=100,u=-.75,c=0,a=0,m=0,i=3,s=.6,b=!1,h=0,g=0,y=[],f=!1;function q(a,m,f,q,p){y=[];for(let e=0;e<f;e++)y[e]=[];!0===b&&!1===p&&(i/=5,s/=5,d+=150,l+=150,u=h,c=g,b=!1);let v=0;p?(document.querySelector("#high-res-mandelbrot-zoom").setAttribute("width",f),document.querySelector("#high-res-mandelbrot-zoom").setAttribute("height",f),e=document.querySelector("#high-res-mandelbrot-zoom").getContext("2d"),v=o):(document.querySelector("#mandelbrot-zoom").setAttribute("width",f),document.querySelector("#mandelbrot-zoom").setAttribute("height",f),e=document.querySelector("#mandelbrot-zoom").getContext("2d"),v=t);for(let e=0;e<f;e++)S(e,a,m,f,q);let z=y.flat().sort(function(e,t){return e-t}),C=0;C=f===r?z[Math.round(.995*z.length)-1]:z[Math.round(.9999*z.length)-1];for(let e=0;e<f;e++)y[e]=y[e].map(e=>e/C*255);let w=e.getImageData(0,0,f,f),L=w.data;for(let e=0;e<f;e++)for(let t=0;t<f;t++){let o=4*e*f+4*t;L[o]=0,L[o+1]=y[e][t],L[o+2]=y[e][t],L[o+3]=255}if(e.putImageData(w,0,0),f===n&&!1===p){let e=document.querySelector("#mandelbrot-set").getAttribute("width");document.querySelector("#mandelbrot-set").getContext("2d").drawImage(document.querySelector("#mandelbrot-zoom"),0,0,e,e),b=!0,h=a,g=m}}function S(e,t,o,r,n){for(let l=0;l<r;l++){let d=(l-r/2)/r*s+t,u=-(e-r/2)/r*s+o,c=d,a=u,m=Math.exp(-Math.sqrt(d*d+u*u)),i=0;for(i=0;i<n;i++){let e=2*d*u+a;if(d=d*d-u*u+c,u=e,m+=Math.exp(-Math.sqrt(d*d+u*u)),d*d+u*u>4)break}i===n&&(m=0),y[e][l]=m}}function p(){let e=parseInt(document.querySelector("#dim-input").value||1e3);q(a,m,e,d,!0)}function v(){t=document.querySelector("#mandelbrot-zoom").offsetWidth,o=document.querySelector("#high-res-mandelbrot-zoom").offsetWidth}1===url_vars.contrast&&(1===url_vars.theme?(document.querySelector("#mandelbrot-set").style.borderColor="rgb(192, 192, 192)",document.querySelector("#mandelbrot-zoom").style.borderColor="rgb(192, 192, 192)",document.querySelector("#high-res-mandelbrot-zoom").style.borderColor="rgb(192, 192, 192)"):(document.querySelector("#mandelbrot-set").style.borderColor="rgb(64, 64, 64)",document.querySelector("#mandelbrot-zoom").style.borderColor="rgb(64, 64, 64)",document.querySelector("#high-res-mandelbrot-zoom").style.borderColor="rgb(64, 64, 64)")),function(){document.querySelector("#mandelbrot-set").setAttribute("width",t),document.querySelector("#mandelbrot-set").setAttribute("height",t);let e=document.querySelector("#mandelbrot-set").getContext("2d"),o=new Image;o.src="/applets/mandelbrot-set-explorer/graphics/mandelbrot-set.png",o.onload=function(){e.drawImage(o,0,0,t,t)}}(),document.querySelector("#generate-button").addEventListener("click",p),document.querySelector("#dim-input").addEventListener("keydown",function(e){13===e.keyCode&&p()}),document.querySelector("#download-button").addEventListener("click",function(){let e=document.createElement("a");e.download=m<0?a+" - "+-m+"i.png":a+" + "+m+"i.png";e.href=document.querySelector("#high-res-mandelbrot-zoom").toDataURL(),e.click(),e.remove()}),window.addEventListener("resize",v),temporary_handlers.resize.push(v),setTimeout(v,1e3),hasTouch()?function(){let e=0,o=0;document.querySelector("#instructions").innerHTML='Drag along the Mandelbrot set to view that area up close, and release to generate a higher-resolution image. For more information on Mandelbrot and Julia sets, have a look at <a href="/blog/4/a-taste-of-chaos.html" onclick="redirect(\'/blog/4/a-taste-of-chaos.html\')">this blog post</a>.',document.querySelector("#instructions a").addEventListener("click",function(e){e.preventDefault()}),document.querySelector("#mandelbrot-set").addEventListener("touchmove",function(n){n.preventDefault();let d=n.touches[0].clientX-document.querySelector("#mandelbrot-set").getBoundingClientRect().left,a=n.touches[0].clientY-document.querySelector("#mandelbrot-set").getBoundingClientRect().top;e=d,o=a;let m=(d/t-.5)*i+u,s=((t-a)/t-.5)*i+c;q(m,s,r,l,!1)},!1),document.querySelector("#mandelbrot-set").addEventListener("touchend",function(r){r.preventDefault();let l=(e/t-.5)*i+u,s=((t-o)/t-.5)*i+c;q(l,s,n,d,!1),a=l,m=s},!1)}():(document.querySelector("#mandelbrot-set").addEventListener("mousemove",function(e){if(!1===f){let o=e.clientX-document.querySelector("#mandelbrot-set").getBoundingClientRect().left,n=e.clientY-document.querySelector("#mandelbrot-set").getBoundingClientRect().top,d=(o/t-.5)*i+u,a=((t-n)/t-.5)*i+c;q(d,a,r,l,!1)}}),document.querySelector("#mandelbrot-set").addEventListener("click",function(e){let o=e.clientX-document.querySelector("#mandelbrot-set").getBoundingClientRect().left,r=e.clientY-document.querySelector("#mandelbrot-set").getBoundingClientRect().top,l=(o/t-.5)*i+u,s=((t-r)/t-.5)*i+c;q(l,s,n,d,!1),a=l,m=s,f=!0}),document.querySelector("#mandelbrot-set").addEventListener("mouseleave",function(e){f=!1}))}();