!function(){let e=document.querySelector("#mandelbrot-zoom").offsetWidth,t=document.querySelector("#high-res-mandelbrot-zoom").offsetWidth,o=100,r=500,n=50,l=100,d=-.75,c=0,u=0,a=0,m=3,i=.6,s=!1,b=0,h=0,g=[],y=!1;function f(u,a,y,f,S){g=[];for(let e=0;e<y;e++)g[e]=[];1==s&&0==S&&(m/=5,i/=5,l+=150,n+=150,d=b,c=h,s=!1);let p=0;S?(document.querySelector("#high-res-mandelbrot-zoom").setAttribute("width",y),document.querySelector("#high-res-mandelbrot-zoom").setAttribute("height",y),ctx=document.querySelector("#high-res-mandelbrot-zoom").getContext("2d"),p=t):(document.querySelector("#mandelbrot-zoom").setAttribute("width",y),document.querySelector("#mandelbrot-zoom").setAttribute("height",y),ctx=document.querySelector("#mandelbrot-zoom").getContext("2d"),p=e);for(let e=0;e<y;e++)q(e,u,a,y,f);let v=g.flat().sort(function(e,t){return e-t}),z=0;z=y==o?v[Math.round(.995*v.length)-1]:v[Math.round(.9999*v.length)-1];for(let e=0;e<y;e++)g[e]=g[e].map(e=>e/z*255);let C=ctx.getImageData(0,0,y,y),w=C.data;for(let e=0;e<y;e++)for(let t=0;t<y;t++){let o=4*e*y+4*t;w[o]=0,w[o+1]=g[e][t],w[o+2]=g[e][t],w[o+3]=255}if(ctx.putImageData(C,0,0),y==r&&0==S){let e=document.querySelector("#mandelbrot-set").getAttribute("width");document.querySelector("#mandelbrot-set").getContext("2d").drawImage(document.querySelector("#mandelbrot-zoom"),0,0,e,e),s=!0,b=u,h=a}}function q(e,t,o,r,n){for(let l=0;l<r;l++){let d=(l-r/2)/r*i+t,c=-(e-r/2)/r*i+o,u=d,a=c,m=Math.exp(-Math.sqrt(d*d+c*c)),s=0;for(s=0;s<n;s++){let e=2*d*c+a;if(d=d*d-c*c+u,c=e,m+=Math.exp(-Math.sqrt(d*d+c*c)),d*d+c*c>4)break}s==n&&(m=0),g[e][l]=m}}function S(){e=document.querySelector("#mandelbrot-zoom").offsetWidth,t=document.querySelector("#high-res-mandelbrot-zoom").offsetWidth}1==url_vars.contrast&&(1==url_vars.theme?(document.querySelector("#mandelbrot-set").style.borderColor="rgb(192, 192, 192)",document.querySelector("#mandelbrot-zoom").style.borderColor="rgb(192, 192, 192)",document.querySelector("#high-res-mandelbrot-zoom").style.borderColor="rgb(192, 192, 192)"):(document.querySelector("#mandelbrot-set").style.borderColor="rgb(64, 64, 64)",document.querySelector("#mandelbrot-zoom").style.borderColor="rgb(64, 64, 64)",document.querySelector("#high-res-mandelbrot-zoom").style.borderColor="rgb(64, 64, 64)")),function(){document.querySelector("#mandelbrot-set").setAttribute("width",e),document.querySelector("#mandelbrot-set").setAttribute("height",e);let t=document.querySelector("#mandelbrot-set").getContext("2d"),o=new Image;o.src="/applets/mandelbrot-set-explorer/graphics/mandelbrot-set.png",o.onload=function(){t.drawImage(o,0,0,e,e)}}(),document.querySelector("#generate-button").addEventListener("click",function(){let e=parseInt(document.querySelector("#dim-input").value||1e3);f(u,a,e,l,!0)}),document.querySelector("#download-button").addEventListener("click",function(){window.open(document.querySelector("#high-res-mandelbrot-zoom").toDataURL(),"_blank")}),window.addEventListener("resize",S),temporary_handlers.resize.push(S),setTimeout(S,1e3),hasTouch()?function(){let t=0,i=0;document.querySelector("#instructions").innerHTML='Drag along the Mandelbrot set to view that area up close, and release to generate a higher-resolution image. For more information on Mandelbrot and Julia sets, have a look at <a href="/blog/4/a-taste-of-chaos.html" onclick="redirect(\'/blog/4/a-taste-of-chaos.html\')">this blog post</a>.',document.querySelector("#instructions a").addEventListener("click",function(e){e.preventDefault()}),document.querySelector("#mandelbrot-set").addEventListener("touchmove",function(r){r.preventDefault();let l=r.touches[0].clientX-document.querySelector("#mandelbrot-set").getBoundingClientRect().left,u=r.touches[0].clientY-document.querySelector("#mandelbrot-set").getBoundingClientRect().top;t=l,i=u;let a=(l/e-.5)*m+d,s=((e-u)/e-.5)*m+c;f(a,s,o,n,!1)},!1),document.querySelector("#mandelbrot-set").addEventListener("touchend",function(o){o.preventDefault();let n=(t/e-.5)*m+d,s=((e-i)/e-.5)*m+c;f(n,s,r,l,!1),u=n,a=s},!1)}():(document.querySelector("#mandelbrot-set").addEventListener("mousemove",function(t){if(0==y){let r=t.clientX-document.querySelector("#mandelbrot-set").getBoundingClientRect().left,l=t.clientY-document.querySelector("#mandelbrot-set").getBoundingClientRect().top,u=(r/e-.5)*m+d,a=((e-l)/e-.5)*m+c;f(u,a,o,n,!1)}}),document.querySelector("#mandelbrot-set").addEventListener("click",function(t){let o=t.clientX-document.querySelector("#mandelbrot-set").getBoundingClientRect().left,n=t.clientY-document.querySelector("#mandelbrot-set").getBoundingClientRect().top,i=(o/e-.5)*m+d,s=((e-n)/e-.5)*m+c;f(i,s,r,l,!1),u=i,a=s,y=!0}),document.querySelector("#mandelbrot-set").addEventListener("mouseleave",function(e){y=!1}))}();