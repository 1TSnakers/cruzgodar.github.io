!function(){let e=document.querySelector("#mandelbrot-zoom").offsetWidth,t=document.querySelector("#high-res-mandelbrot-zoom").offsetWidth,o=75,r=500,n=50,l=100,c=-.75,d=0,u=0,m=0,a=3,i=.6,s=!1,b=0,h=0,g=[],y=!1;function f(u,m,y,f,S){g=[];for(let e=0;e<y;e++)g[e]=[];1==s&&0==S&&(a/=5,i/=5,l+=150,n+=150,c=b,d=h,s=!1);let p=0;S?(document.querySelector("#high-res-mandelbrot-zoom").setAttribute("width",y),document.querySelector("#high-res-mandelbrot-zoom").setAttribute("height",y),ctx=document.querySelector("#high-res-mandelbrot-zoom").getContext("2d"),p=t):(document.querySelector("#mandelbrot-zoom").setAttribute("width",y),document.querySelector("#mandelbrot-zoom").setAttribute("height",y),ctx=document.querySelector("#mandelbrot-zoom").getContext("2d"),p=e);for(let e=0;e<y;e++)q(e,u,m,y,f);let v=g.flat().sort(function(e,t){return e-t}),z=0;z=y==o?v[Math.round(.995*v.length)-1]:v[Math.round(.9999*v.length)-1];for(let e=0;e<y;e++)for(let t=0;t<y;t++)g[e][t]=g[e][t]/z*255,ctx.fillStyle="rgb(0,"+g[e][t]+","+g[e][t]+")",ctx.fillRect(t,e,1,1);if(ctx.scale(p/y,p/y),y==r&&0==S){let e=document.querySelector("#mandelbrot-set").getAttribute("width");document.querySelector("#mandelbrot-set").getContext("2d").drawImage(document.querySelector("#mandelbrot-zoom"),0,0,e,e),s=!0,b=u,h=m}}function q(e,t,o,r,n){for(let l=0;l<r;l++){let c=(l-r/2)/r*i+t,d=-(e-r/2)/r*i+o,u=c,m=d,a=Math.exp(-Math.sqrt(c*c+d*d)),s=0;for(s=0;s<n;s++){let e=2*c*d+m;if(c=c*c-d*d+u,d=e,a+=Math.exp(-Math.sqrt(c*c+d*d)),c*c+d*d>4)break}s==n&&(a=0),g[e][l]=a}}function S(){e=document.querySelector("#mandelbrot-zoom").offsetWidth,t=document.querySelector("#high-res-mandelbrot-zoom").offsetWidth}1==url_vars.contrast&&(1==url_vars.theme?(document.querySelector("#mandelbrot-set").style.borderColor="rgb(192, 192, 192)",document.querySelector("#mandelbrot-zoom").style.borderColor="rgb(192, 192, 192)",document.querySelector("#high-res-mandelbrot-zoom").style.borderColor="rgb(192, 192, 192)"):(document.querySelector("#mandelbrot-set").style.borderColor="rgb(64, 64, 64)",document.querySelector("#mandelbrot-zoom").style.borderColor="rgb(64, 64, 64)",document.querySelector("#high-res-mandelbrot-zoom").style.borderColor="rgb(64, 64, 64)")),function(){document.querySelector("#mandelbrot-set").setAttribute("width",e),document.querySelector("#mandelbrot-set").setAttribute("height",e);let t=document.querySelector("#mandelbrot-set").getContext("2d"),o=new Image;o.src="/applets/mandelbrot-set-explorer/graphics/mandelbrot-set.png",o.onload=function(){t.drawImage(o,0,0,e,e)}}(),document.querySelector("#generate-button").addEventListener("click",function(){let e=parseInt(document.querySelector("#dim-input").value||1e3);f(u,m,e,l,!0)}),document.querySelector("#download-button").addEventListener("click",function(){window.open(document.querySelector("#high-res-mandelbrot-zoom").toDataURL(),"_blank")}),window.addEventListener("resize",S),temporary_handlers.resize.push(S),setTimeout(S,1e3),hasTouch()?function(){let t=0,i=0;document.querySelector("#instructions").innerHTML='Drag along the Mandelbrot set to view that area up close, and release to generate a higher-resolution image. For more information on Mandelbrot and Julia sets, have a look at <a href="/blog/4/a-taste-of-chaos.html" onclick="redirect(\'/blog/4/a-taste-of-chaos.html\')">this blog post</a>.',document.querySelector("#instructions a").addEventListener("click",function(e){e.preventDefault()}),document.querySelector("#mandelbrot-set").addEventListener("touchmove",function(r){r.preventDefault();let l=r.touches[0].clientX-document.querySelector("#mandelbrot-set").getBoundingClientRect().left,u=r.touches[0].clientY-document.querySelector("#mandelbrot-set").getBoundingClientRect().top;t=l,i=u;let m=(l/e-.5)*a+c,s=((e-u)/e-.5)*a+d;f(m,s,o,n,!1)},!1),document.querySelector("#mandelbrot-set").addEventListener("touchend",function(o){o.preventDefault();let n=(t/e-.5)*a+c,s=((e-i)/e-.5)*a+d;f(n,s,r,l,!1),u=n,m=s},!1)}():(document.querySelector("#mandelbrot-set").addEventListener("mousemove",function(t){if(0==y){let r=t.clientX-document.querySelector("#mandelbrot-set").getBoundingClientRect().left,l=t.clientY-document.querySelector("#mandelbrot-set").getBoundingClientRect().top,u=(r/e-.5)*a+c,m=((e-l)/e-.5)*a+d;f(u,m,o,n,!1)}}),document.querySelector("#mandelbrot-set").addEventListener("click",function(t){let o=t.clientX-document.querySelector("#mandelbrot-set").getBoundingClientRect().left,n=t.clientY-document.querySelector("#mandelbrot-set").getBoundingClientRect().top,i=(o/e-.5)*a+c,s=((e-n)/e-.5)*a+d;f(i,s,r,l,!1),u=i,m=s,y=!0}),document.querySelector("#mandelbrot-set").addEventListener("mouseleave",function(e){y=!1}))}();