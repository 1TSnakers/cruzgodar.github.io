!function(){"use strict";let t=new Wilson(document.querySelector("#calcudoku-grid"),{renderer:"cpu",canvas_width:1e3,canvas_height:1e3}),e=null,l=0,o=0,c=null,n=[],r=[],a=[],i=[],s=null;document.querySelector("#generate-button").addEventListener("click",m);let u=document.querySelector("#grid-size-input");u.addEventListener("keydown",function(t){13===t.keyCode&&m()});let f=document.querySelector("#max-cage-size-input");f.addEventListener("keydown",function(t){13===t.keyCode&&m()}),document.querySelector("#download-button").addEventListener("click",()=>{t.download_frame("a-calcudoku-puzzle.png")});let y=document.querySelector("#total-time-clock"),d=document.querySelector("#split-time-clock"),p=document.querySelector("#total-time-label"),g=document.querySelector("#split-time-label");function m(){e=parseInt(u.value||6);let m=parseInt(f.value||1e3);for(let t=0;t<e;t++){a.push([]);for(let l=0;l<e;l++)a[t].push(0)}l=0,o=0,y.textContent="0",d.textContent="0",0==document.querySelector("#total-time-label").style.opacity?x():(p.style.opacity=0,y.style.opacity=0,g.style.opacity=0,d.style.opacity=0,t.canvas.style.opacity=0,setTimeout(x,350)),setTimeout(function(){let l=200*e+9;t.change_canvas_size(l,l),t.ctx.clearRect(0,0,l,l)},300),clearInterval(c),c=setInterval(S,1e3),Page.temporary_intervals.push(c);try{s.terminate()}catch(t){}s=DEBUG?new Worker("/applets/calcudoku-generator/scripts/worker.js"):new Worker("/applets/calcudoku-generator/scripts/worker.min.js"),Page.temporary_web_workers.push(s),s.onmessage=function(l){if("log"===l.data[0])console.log(...l.data.slice(1));else{n=l.data[0],r=l.data[1],i=JSON.parse(JSON.stringify(a)),a=l.data[2],function(l){let o=200*e+9;l?(t.ctx.fillStyle="rgb(255, 255, 255)",t.ctx.fillRect(0,0,o,o),t.ctx.fillStyle="rgb(0, 0, 0)"):(t.ctx.clearRect(0,0,o,o),1===Site.Settings.url_vars.theme?1===Site.Settings.url_vars.contrast?t.ctx.fillStyle="rgb(255, 255, 255)":t.ctx.fillStyle="rgb(192, 192, 192)":1===Site.Settings.url_vars.contrast?t.ctx.fillStyle="rgb(0, 0, 0)":t.ctx.fillStyle="rgb(64, 64, 64)");for(let l=0;l<=e;l++)t.ctx.fillRect(200*l+4,0,2,o+9),t.ctx.fillRect(0,200*l+4,o+9,2);for(let l=0;l<e;l++)for(let o=0;o<e;o++)0!==l&&a[l-1][o]===a[l][o]||t.ctx.fillRect(200*o,200*l,210,10),l!==e-1&&a[l+1][o]===a[l][o]||t.ctx.fillRect(200*o,200*(l+1),210,10),0!==o&&a[l][o-1]===a[l][o]||t.ctx.fillRect(200*o,200*l,10,210),o!==e-1&&a[l][o+1]===a[l][o]||t.ctx.fillRect(200*(o+1),200*l,10,210);for(let l=0;l<r.length;l++){let o=[e,e];for(let t=0;t<r[l][2].length;t++){let e=r[l][2][t][0],c=r[l][2][t][1];e<o[0]?o=[e,c]:e===o[0]&&c<o[1]&&(o=[e,c])}let c="";c="+"===r[l][0]?r[l][1]+"+":"x"===r[l][0]?r[l][1]+"×":"-"===r[l][0]?r[l][1]+"–":":"===r[l][0]?r[l][1]+"꞉":r[l][1]+"";let n=null;c.length<=6?(t.ctx.font="50px sans-serif",n=50):(t.ctx.font=300/c.length+"px sans-serif",n=300/c.length),t.ctx.fillText(c,200*o[1]+15,200*o[0]+n+5)}}(!1);let c=!1;for(let t=0;t<e;t++){for(let l=0;l<e;l++)if(a[t][l]!==i[t][l]){c=!0,o=0;break}if(c)break}}},setTimeout(function(){s.postMessage([e,m])},300)}function x(){p.style.opacity=1,setTimeout(function(){y.style.opacity=1,setTimeout(function(){g.style.opacity=1,setTimeout(function(){d.style.opacity=1,setTimeout(function(){t.canvas.style.opacity=1},100)},100)},100)},100)}function S(){let t=l%60,e=Math.floor(l/60)%60,c=Math.floor(l/3600),n="";c>0&&(n+=c+":",e<10&&(n+="0")),(e>0||c>0)&&(n+=e+":",t<10&&(n+="0")),n+=t,y.textContent=n,t=o%60,e=Math.floor(o/60)%60;let r="";(c=Math.floor(o/3600))>0&&(r+=c+":",e<10&&(r+="0")),(e>0||c>0)&&(r+=e+":",t<10&&(r+="0")),r+=t,d.textContent=r,l++,o++}}();