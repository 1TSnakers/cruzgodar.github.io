!function(){"use strict";const e=new Wilson(Page.element.querySelector("#calcudoku-grid"),{renderer:"cpu",canvas_width:1e3,canvas_height:1e3});let t=null,a=0,i=0,n=null,o=[],l=[],c=[],r=[],s=null;Page.element.querySelector("#generate-button").addEventListener("click",f);const m=Page.element.querySelector("#grid-size-input");m.addEventListener("keydown",(function(e){13===e.keyCode&&f()}));const g=Page.element.querySelector("#max-cage-size-input");g.addEventListener("keydown",(function(e){13===e.keyCode&&f()}));Page.element.querySelector("#download-button").addEventListener("click",(()=>{e.download_frame("a-calcudoku-puzzle.png")}));const u=Page.element.querySelector("#total-time-clock"),_=Page.element.querySelector("#split-time-clock"),p=Page.element.querySelector("#total-time-label"),y=Page.element.querySelector("#split-time-label");function f(){t=parseInt(m.value||6);const f=parseInt(g.value||1e3);for(let e=0;e<t;e++){c.push([]);for(let a=0;a<t;a++)c[e].push(0)}a=0,i=0,u.textContent="0",_.textContent="0",0==Page.element.querySelector("#total-time-label").style.opacity?S():(Page.Animate.change_opacity(p,0,Site.opacity_animation_time),Page.Animate.change_opacity(u,0,Site.opacity_animation_time),Page.Animate.change_opacity(y,0,Site.opacity_animation_time),Page.Animate.change_opacity(_,0,Site.opacity_animation_time),Page.Animate.change_opacity(e.canvas,0,Site.opacity_animation_time),setTimeout(S,350)),setTimeout((()=>{const a=200*t+9;e.change_canvas_size(a,a),e.ctx.clearRect(0,0,a,a)}),Site.opacity_animation_time),clearInterval(n),n=setInterval(h,1e3),Page.temporary_intervals.push(n);try{s.terminate()}catch(e){}s=DEBUG?new Worker("/applets/calcudoku-generator/scripts/worker.js"):new Worker("/applets/calcudoku-generator/scripts/worker.min.js"),Page.temporary_web_workers.push(s),s.onmessage=function(a){if("log"===a.data[0])console.log(...a.data.slice(1));else{o=a.data[0],l=a.data[1],r=JSON.parse(JSON.stringify(c)),c=a.data[2],function(a){const i=200*t+9;a?(e.ctx.fillStyle="rgb(255, 255, 255)",e.ctx.fillRect(0,0,i,i),e.ctx.fillStyle="rgb(0, 0, 0)"):(e.ctx.clearRect(0,0,i,i),1===Site.Settings.url_vars.theme?1===Site.Settings.url_vars.contrast?e.ctx.fillStyle="rgb(255, 255, 255)":e.ctx.fillStyle="rgb(192, 192, 192)":1===Site.Settings.url_vars.contrast?e.ctx.fillStyle="rgb(0, 0, 0)":e.ctx.fillStyle="rgb(64, 64, 64)");for(let a=0;a<=t;a++)e.ctx.fillRect(200*a+4,0,2,i+9),e.ctx.fillRect(0,200*a+4,i+9,2);for(let a=0;a<t;a++)for(let i=0;i<t;i++)0!==a&&c[a-1][i]===c[a][i]||e.ctx.fillRect(200*i,200*a,210,10),a!==t-1&&c[a+1][i]===c[a][i]||e.ctx.fillRect(200*i,200*(a+1),210,10),0!==i&&c[a][i-1]===c[a][i]||e.ctx.fillRect(200*i,200*a,10,210),i!==t-1&&c[a][i+1]===c[a][i]||e.ctx.fillRect(200*(i+1),200*a,10,210);for(let a=0;a<l.length;a++){let i=[t,t];for(let e=0;e<l[a][2].length;e++){let t=l[a][2][e][0],n=l[a][2][e][1];(t<i[0]||t===i[0]&&n<i[1])&&(i=[t,n])}let n="";n="+"===l[a][0]?l[a][1]+"+":"x"===l[a][0]?l[a][1]+"×":"-"===l[a][0]?l[a][1]+"–":":"===l[a][0]?l[a][1]+"꞉":l[a][1]+"";let o=null;n.length<=6?(e.ctx.font="50px sans-serif",o=50):(e.ctx.font=300/n.length+"px sans-serif",o=300/n.length),e.ctx.fillText(n,200*i[1]+15,200*i[0]+o+5)}}(!1);let n=!1;for(let e=0;e<t;e++){for(let a=0;a<t;a++)if(c[e][a]!==r[e][a]){n=!0,i=0;break}if(n)break}}},setTimeout((()=>{s.postMessage([t,f])}),Site.opacity_animation_time)}function S(){Page.Animate.change_opacity(p,1,Site.opacity_animation_time),setTimeout((()=>{Page.Animate.change_opacity(u,1,Site.opacity_animation_time),setTimeout((()=>{Page.Animate.change_opacity(y,1,Site.opacity_animation_time),setTimeout((()=>{Page.Animate.change_opacity(_,1,Site.opacity_animation_time),setTimeout((()=>{Page.Animate.change_opacity(e.canvas,1,Site.opacity_animation_time)}),Site.aos_separation_time)}),Site.aos_separation_time)}),Site.aos_separation_time)}),Site.aos_separation_time)}function h(){let e=a%60,t=Math.floor(a/60)%60,n=Math.floor(a/3600),o="";n>0&&(o+=n+":",t<10&&(o+="0")),(t>0||n>0)&&(o+=t+":",e<10&&(o+="0")),o+=e,u.textContent=o,e=i%60,t=Math.floor(i/60)%60,n=Math.floor(i/3600);let l="";n>0&&(l+=n+":",t<10&&(l+="0")),(t>0||n>0)&&(l+=t+":",e<10&&(l+="0")),l+=e,_.textContent=l,a++,i++}Page.show()}();