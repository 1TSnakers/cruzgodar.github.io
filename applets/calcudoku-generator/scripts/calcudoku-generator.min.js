!function(){"use strict";let t=new Wilson(document.querySelector("#calcudoku-grid"),{renderer:"cpu",canvas_width:1e3,canvas_height:1e3}),e=null,l=0,o=0,a=null,i=[],c=[],n=[],r=[],s=null;document.querySelector("#generate-button").addEventListener("click",g);let u=document.querySelector("#grid-size-input");u.addEventListener("keydown",function(t){13===t.keyCode&&g()});let y=document.querySelector("#max-cage-size-input");y.addEventListener("keydown",function(t){13===t.keyCode&&g()}),document.querySelector("#download-button").addEventListener("click",()=>{t.download_frame("a-calcudoku-puzzle.png")});let f=document.querySelector("#total-time-clock"),p=document.querySelector("#split-time-clock"),d=document.querySelector("#total-time-label"),m=document.querySelector("#split-time-label");function g(){e=parseInt(u.value||6);let g=parseInt(y.value||1e3);for(let t=0;t<e;t++){n.push([]);for(let l=0;l<e;l++)n[t].push(0)}l=0,o=0,f.textContent="0",p.textContent="0",0==document.querySelector("#total-time-label").style.opacity?S():(d.style.opacity=0,f.style.opacity=0,m.style.opacity=0,p.style.opacity=0,t.canvas.style.opacity=0,setTimeout(S,350)),setTimeout(()=>{let l=200*e+9;t.change_canvas_size(l,l),t.ctx.clearRect(0,0,l,l)},Site.opacity_animation_time),clearInterval(a),a=setInterval(x,1e3),Page.temporary_intervals.push(a);try{s.terminate()}catch(t){}s=DEBUG?new Worker("/applets/calcudoku-generator/scripts/worker.js"):new Worker("/applets/calcudoku-generator/scripts/worker.min.js"),Page.temporary_web_workers.push(s),s.onmessage=function(l){if("log"===l.data[0])console.log(...l.data.slice(1));else{i=l.data[0],c=l.data[1],r=JSON.parse(JSON.stringify(n)),n=l.data[2],function(l){let o=200*e+9;l?(t.ctx.fillStyle="rgb(255, 255, 255)",t.ctx.fillRect(0,0,o,o),t.ctx.fillStyle="rgb(0, 0, 0)"):(t.ctx.clearRect(0,0,o,o),1===Site.Settings.url_vars.theme?1===Site.Settings.url_vars.contrast?t.ctx.fillStyle="rgb(255, 255, 255)":t.ctx.fillStyle="rgb(192, 192, 192)":1===Site.Settings.url_vars.contrast?t.ctx.fillStyle="rgb(0, 0, 0)":t.ctx.fillStyle="rgb(64, 64, 64)");for(let l=0;l<=e;l++)t.ctx.fillRect(200*l+4,0,2,o+9),t.ctx.fillRect(0,200*l+4,o+9,2);for(let l=0;l<e;l++)for(let o=0;o<e;o++)0!==l&&n[l-1][o]===n[l][o]||t.ctx.fillRect(200*o,200*l,210,10),l!==e-1&&n[l+1][o]===n[l][o]||t.ctx.fillRect(200*o,200*(l+1),210,10),0!==o&&n[l][o-1]===n[l][o]||t.ctx.fillRect(200*o,200*l,10,210),o!==e-1&&n[l][o+1]===n[l][o]||t.ctx.fillRect(200*(o+1),200*l,10,210);for(let l=0;l<c.length;l++){let o=[e,e];for(let t=0;t<c[l][2].length;t++){let e=c[l][2][t][0],a=c[l][2][t][1];e<o[0]?o=[e,a]:e===o[0]&&a<o[1]&&(o=[e,a])}let a="";a="+"===c[l][0]?c[l][1]+"+":"x"===c[l][0]?c[l][1]+"×":"-"===c[l][0]?c[l][1]+"–":":"===c[l][0]?c[l][1]+"꞉":c[l][1]+"";let i=null;a.length<=6?(t.ctx.font="50px sans-serif",i=50):(t.ctx.font=300/a.length+"px sans-serif",i=300/a.length),t.ctx.fillText(a,200*o[1]+15,200*o[0]+i+5)}}(!1);let a=!1;for(let t=0;t<e;t++){for(let l=0;l<e;l++)if(n[t][l]!==r[t][l]){a=!0,o=0;break}if(a)break}}},setTimeout(()=>{s.postMessage([e,g])},Site.opacity_animation_time)}function S(){d.style.opacity=1,setTimeout(()=>{f.style.opacity=1,setTimeout(()=>{m.style.opacity=1,setTimeout(()=>{p.style.opacity=1,setTimeout(()=>{t.canvas.style.opacity=1},Site.aos_separation_time)},Site.aos_separation_time)},Site.aos_separation_time)},Site.aos_separation_time)}function x(){let t=l%60,e=Math.floor(l/60)%60,a=Math.floor(l/3600),i="";a>0&&(i+=a+":",e<10&&(i+="0")),(e>0||a>0)&&(i+=e+":",t<10&&(i+="0")),i+=t,f.textContent=i,t=o%60,e=Math.floor(o/60)%60;let c="";(a=Math.floor(o/3600))>0&&(c+=a+":",e<10&&(c+="0")),(e>0||a>0)&&(c+=e+":",t<10&&(c+="0")),c+=t,p.textContent=c,l++,o++}}();