!function(){"use strict";let e=new Wilson(Page.element.querySelector("#calcudoku-grid"),{renderer:"cpu",canvas_width:1e3,canvas_height:1e3}),t=null,l=0,a=0,o=null,i=[],n=[],r=[],c=[],s=null;Page.element.querySelector("#generate-button").addEventListener("click",S);let u=Page.element.querySelector("#grid-size-input");u.addEventListener("keydown",function(e){13===e.keyCode&&S()});let y=Page.element.querySelector("#max-cage-size-input");y.addEventListener("keydown",function(e){13===e.keyCode&&S()}),Page.element.querySelector("#download-button").addEventListener("click",()=>{e.download_frame("a-calcudoku-puzzle.png")});let f=Page.element.querySelector("#total-time-clock"),p=Page.element.querySelector("#split-time-clock"),g=Page.element.querySelector("#total-time-label"),m=Page.element.querySelector("#split-time-label");function S(){t=parseInt(u.value||6);let S=parseInt(y.value||1e3);for(let e=0;e<t;e++){r.push([]);for(let l=0;l<t;l++)r[e].push(0)}l=0,a=0,f.textContent="0",p.textContent="0",0==Page.element.querySelector("#total-time-label").style.opacity?d():(g.style.opacity=0,f.style.opacity=0,m.style.opacity=0,p.style.opacity=0,e.canvas.style.opacity=0,setTimeout(d,350)),setTimeout(()=>{let l=200*t+9;e.change_canvas_size(l,l),e.ctx.clearRect(0,0,l,l)},Site.opacity_animation_time),clearInterval(o),o=setInterval(x,1e3),Page.temporary_intervals.push(o);try{s.terminate()}catch(e){}s=DEBUG?new Worker("/applets/calcudoku-generator/scripts/worker.js"):new Worker("/applets/calcudoku-generator/scripts/worker.min.js"),Page.temporary_web_workers.push(s),s.onmessage=function(l){if("log"===l.data[0])console.log(...l.data.slice(1));else{i=l.data[0],n=l.data[1],c=JSON.parse(JSON.stringify(r)),r=l.data[2],function(l){let a=200*t+9;l?(e.ctx.fillStyle="rgb(255, 255, 255)",e.ctx.fillRect(0,0,a,a),e.ctx.fillStyle="rgb(0, 0, 0)"):(e.ctx.clearRect(0,0,a,a),1===Site.Settings.url_vars.theme?1===Site.Settings.url_vars.contrast?e.ctx.fillStyle="rgb(255, 255, 255)":e.ctx.fillStyle="rgb(192, 192, 192)":1===Site.Settings.url_vars.contrast?e.ctx.fillStyle="rgb(0, 0, 0)":e.ctx.fillStyle="rgb(64, 64, 64)");for(let l=0;l<=t;l++)e.ctx.fillRect(200*l+4,0,2,a+9),e.ctx.fillRect(0,200*l+4,a+9,2);for(let l=0;l<t;l++)for(let a=0;a<t;a++)0!==l&&r[l-1][a]===r[l][a]||e.ctx.fillRect(200*a,200*l,210,10),l!==t-1&&r[l+1][a]===r[l][a]||e.ctx.fillRect(200*a,200*(l+1),210,10),0!==a&&r[l][a-1]===r[l][a]||e.ctx.fillRect(200*a,200*l,10,210),a!==t-1&&r[l][a+1]===r[l][a]||e.ctx.fillRect(200*(a+1),200*l,10,210);for(let l=0;l<n.length;l++){let a=[t,t];for(let e=0;e<n[l][2].length;e++){let t=n[l][2][e][0],o=n[l][2][e][1];t<a[0]?a=[t,o]:t===a[0]&&o<a[1]&&(a=[t,o])}let o="";o="+"===n[l][0]?n[l][1]+"+":"x"===n[l][0]?n[l][1]+"×":"-"===n[l][0]?n[l][1]+"–":":"===n[l][0]?n[l][1]+"꞉":n[l][1]+"";let i=null;o.length<=6?(e.ctx.font="50px sans-serif",i=50):(e.ctx.font=300/o.length+"px sans-serif",i=300/o.length),e.ctx.fillText(o,200*a[1]+15,200*a[0]+i+5)}}(!1);let o=!1;for(let e=0;e<t;e++){for(let l=0;l<t;l++)if(r[e][l]!==c[e][l]){o=!0,a=0;break}if(o)break}}},setTimeout(()=>{s.postMessage([t,S])},Site.opacity_animation_time)}function d(){g.style.opacity=1,setTimeout(()=>{f.style.opacity=1,setTimeout(()=>{m.style.opacity=1,setTimeout(()=>{p.style.opacity=1,setTimeout(()=>{e.canvas.style.opacity=1},Site.aos_separation_time)},Site.aos_separation_time)},Site.aos_separation_time)},Site.aos_separation_time)}function x(){let e=l%60,t=Math.floor(l/60)%60,o=Math.floor(l/3600),i="";o>0&&(i+=o+":",t<10&&(i+="0")),(t>0||o>0)&&(i+=t+":",e<10&&(i+="0")),i+=e,f.textContent=i,e=a%60,t=Math.floor(a/60)%60;let n="";(o=Math.floor(a/3600))>0&&(n+=o+":",t<10&&(n+="0")),(t>0||o>0)&&(n+=t+":",e<10&&(n+="0")),n+=e,p.textContent=n,l++,a++}Page.show()}();