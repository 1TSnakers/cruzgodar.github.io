!function(){"use strict";let e=null,t=document.querySelector("#calcudoku-grid").getContext("2d"),l=[],r=[],c=[],o=null;function n(l){let o=200*e+9;l?(t.fillStyle="rgb(255, 255, 255)",t.fillRect(0,0,o,o),t.fillStyle="rgb(0, 0, 0)"):(t.clearRect(0,0,o,o),1==url_vars.theme?1==url_vars.contrast?t.fillStyle="rgb(255, 255, 255)":t.fillStyle="rgb(192, 192, 192)":1==url_vars.contrast?t.fillStyle="rgb(0, 0, 0)":t.fillStyle="rgb(64, 64, 64)");for(let l=0;l<=e;l++)t.fillRect(200*l+4,0,2,o+9),t.fillRect(0,200*l+4,o+9,2);for(let l=0;l<e;l++)for(let r=0;r<e;r++)0!=l&&c[l-1][r]==c[l][r]||t.fillRect(200*r,200*l,210,10),l!=e-1&&c[l+1][r]==c[l][r]||t.fillRect(200*r,200*(l+1),210,10),0!=r&&c[l][r-1]==c[l][r]||t.fillRect(200*r,200*l,10,210),r!=e-1&&c[l][r+1]==c[l][r]||t.fillRect(200*(r+1),200*l,10,210);t.font="30px sans-serif";for(let l=0;l<r.length;l++){let c=[e,e];for(let e=0;e<r[l][2].length;e++){let t=r[l][2][e][0],o=r[l][2][e][1];t<c[0]?c=[t,o]:t==c[0]&&o<c[1]&&(c=[t,o])}let o="";o="x"==r[l][0]?r[l][1]+"Ã—":r[l][1]+r[l][0],t.fillText(o,200*c[1]+15,200*c[0]+40)}}document.querySelector("#generate-button").addEventListener("click",function(){e=parseInt(document.querySelector("#grid-size-input").value||5);let u=parseInt(document.querySelector("#max-cage-size-input").value||1e3),a=200*e+9;document.querySelector("#calcudoku-grid").setAttribute("width",a),document.querySelector("#calcudoku-grid").setAttribute("height",a),t.clearRect(0,0,a,a),document.querySelector(".loading-spinner").style.opacity=1;try{o.terminate()}catch(e){}o=DEBUG?new Worker("/applets/calcudoku-generator/scripts/worker.js"):new Worker("/applets/calcudoku-generator/scripts/worker.min.js");temporary_web_workers.push(o),o.onmessage=function(e){"done"==e.data[0]?document.querySelector(".loading-spinner").style.opacity=0:"log"==e.data[0]?console.log(...e.data.slice(1)):(l=e.data[0],r=e.data[1],c=e.data[2],n(!1))},o.postMessage([e,u])}),document.querySelector("#download-button").addEventListener("click",function(){document.querySelector("#calcudoku-grid").style.opacity=0,n(!0),window.open(document.querySelector("#calcudoku-grid").toDataURL(),"_blank"),n(!1),document.querySelector("#calcudoku-grid").style.opacity=1})}();