!function(){"use strict";let e=null,t=document.querySelector("#calcudoku-grid").getContext("2d"),r=null,l=null,c=0,o=[],a=[],u=[],n=null;function i(r){let l=200*e+9;r?(t.fillStyle="rgb(255, 255, 255)",t.fillRect(0,0,l,l),t.fillStyle="rgb(0, 0, 0)"):(t.clearRect(0,0,l,l),1===url_vars.theme?1===url_vars.contrast?t.fillStyle="rgb(255, 255, 255)":t.fillStyle="rgb(192, 192, 192)":1===url_vars.contrast?t.fillStyle="rgb(0, 0, 0)":t.fillStyle="rgb(64, 64, 64)");for(let r=0;r<=e;r++)t.fillRect(200*r+4,0,2,l+9),t.fillRect(0,200*r+4,l+9,2);for(let r=0;r<e;r++)for(let l=0;l<e;l++)0!==r&&u[r-1][l]===u[r][l]||t.fillRect(200*l,200*r,210,10),r!==e-1&&u[r+1][l]===u[r][l]||t.fillRect(200*l,200*(r+1),210,10),0!==l&&u[r][l-1]===u[r][l]||t.fillRect(200*l,200*r,10,210),l!==e-1&&u[r][l+1]===u[r][l]||t.fillRect(200*(l+1),200*r,10,210);t.font="30px sans-serif";for(let r=0;r<a.length;r++){let l=[e,e];for(let e=0;e<a[r][2].length;e++){let t=a[r][2][e][0],c=a[r][2][e][1];t<l[0]?l=[t,c]:t===l[0]&&c<l[1]&&(l=[t,c])}let c="";c="x"===a[r][0]?a[r][1]+"Ã—":a[r][1]+a[r][0],t.fillText(c,200*l[1]+15,200*l[0]+40)}}document.querySelector("#generate-button").addEventListener("click",function(){e=parseInt(document.querySelector("#grid-size-input").value||5);let s=parseInt(document.querySelector("#max-cage-size-input").value||1e3),d=200*e+9;document.querySelector("#calcudoku-grid").setAttribute("width",d),document.querySelector("#calcudoku-grid").setAttribute("height",d),t.clearRect(0,0,d,d),document.querySelector(".progress-bar").style.opacity=1,document.querySelector(".progress-bar span").style.width=0,c=0;try{n.terminate()}catch(e){}n=DEBUG?new Worker("/applets/calcudoku-generator/scripts/worker.js"):new Worker("/applets/calcudoku-generator/scripts/worker.min.js");temporary_web_workers.push(n),n.onmessage=function(t){"done"===t.data[0]?(clearInterval(l),document.querySelector(".progress-bar").style.opacity=0):"first_grid_complete"===t.data[0]?(r=setTimeout(function(){try{n.terminate()}catch(e){}clearInterval(l),document.querySelector(".progress-bar").style.opacity=0},1e3*(2*e+1)),l=setInterval(function(){c+=100/(2*e),document.querySelector(".progress-bar span").style.width=c+"%"},1e3)):"log"===t.data[0]?console.log(...t.data.slice(1)):(o=t.data[0],a=t.data[1],u=t.data[2],i(!1))},clearInterval(l),clearTimeout(r),n.postMessage([e,s])}),document.querySelector("#download-button").addEventListener("click",function(){document.querySelector("#calcudoku-grid").style.opacity=0,i(!0),window.open(document.querySelector("#calcudoku-grid").toDataURL(),"_blank"),i(!1),document.querySelector("#calcudoku-grid").style.opacity=1})}();