"use strict";onmessage=function(t){draw_julia_set(...t.data)};let image=[];function draw_julia_set(t,e,a,i){image=[];for(let t=0;t<a;t++)image[t]=[];for(let r=0;r<a/2;r++)julia_row(r,t,e,a,i);let r=image.flat().sort(function(t,e){return t-e}),o=r[Math.round(.9*r.length)-1];for(let t=0;t<a;t++)image[t]=image[t].map(t=>Math.min(t,o)/5*255);postMessage([image])}function julia_row(t,e,a,i,r){for(let o=0;o<i+1;o++){let l=(o-i/2)/i*4,n=-(t-i/2)/i*4,g=Math.exp(-Math.sqrt(l*l+n*n)),m=0;for(m=0;m<r;m++){let t=2*l*n+a;if(l=l*l-n*n+e,n=t,g+=Math.exp(-Math.sqrt(l*l+n*n)),l*l+n*n>4)break}m===r&&(g=0),image[t][o]=g,image[i-t-1][i-o-1]=g}}