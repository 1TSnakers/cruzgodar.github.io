!function(){"use strict";let t={renderer:"gpu",shader:"\n\t\tprecision highp float;\n\t\t\n\t\tvarying vec2 uv;\n\t\t\n\t\tuniform float julia_sets_per_side;\n\t\tuniform float julia_set_size;\n\t\tuniform float image_size;\n\t\tuniform int num_iterations;\n\t\t\n\t\t\n\t\t\n\t\tvoid main(void)\n\t\t{\n\t\t\tfloat a = (floor((uv.x + 1.0) / 2.0 * julia_sets_per_side) / julia_sets_per_side * 2.0 - 1.0) * 1.5 - .75;\n\t\t\tfloat b = (floor((uv.y + 1.0) / 2.0 * julia_sets_per_side) / julia_sets_per_side * 2.0 - 1.0) * 1.5;\n\t\t\t\n\t\t\tvec2 z = vec2((mod((uv.x + 1.0) / 2.0 * image_size, julia_set_size) / julia_set_size * 2.0 - 1.0) * 1.5, (mod((uv.y + 1.0) / 2.0 * image_size, julia_set_size) / julia_set_size * 2.0 - 1.0) * 1.5);\n\t\t\tfloat brightness = exp(-length(z));\n\t\t\t\n\t\t\tvec3 color = normalize(vec3(abs(z.x + z.y) / 2.0, abs(z.x) / 2.0, abs(z.y) / 2.0) + .1 / length(z) * vec3(1.0, 1.0, 1.0));\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tfor (int iteration = 0; iteration < 100; iteration++)\n\t\t\t{\n\t\t\t\tif (iteration == num_iterations)\n\t\t\t\t{\n\t\t\t\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (length(z) >= 2.0)\n\t\t\t\t{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tz = vec2(z.x * z.x - z.y * z.y + a, 2.0 * z.x * z.y + b);\n\t\t\t\t\n\t\t\t\tbrightness += exp(-length(z));\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tgl_FragColor = vec4(brightness / 10.0 * color, 1.0);\n\t\t}\n\t",canvas_width:2e3,canvas_height:2e3,use_fullscreen:!0,use_fullscreen_button:!0,enter_fullscreen_button_icon_path:"/graphics/general-icons/enter-fullscreen.png",exit_fullscreen_button_icon_path:"/graphics/general-icons/exit-fullscreen.png"},e=new Wilson(Page.element.querySelector("#output-canvas"),t);e.render.init_uniforms(["julia_sets_per_side","julia_set_size","image_size","num_iterations"]);let n=2e3;const i=50;Page.element.querySelector("#generate-button").addEventListener("click",a);let s=Page.element.querySelector("#num-julias-input"),r=Page.element.querySelector("#julia-size-input");function a(){let t=parseInt(s.value||100),a=parseInt(r.value||20);n=t*a,e.change_canvas_size(n,n),e.gl.uniform1f(e.uniforms.julia_sets_per_side,t),e.gl.uniform1f(e.uniforms.julia_set_size,a),e.gl.uniform1f(e.uniforms.image_size,n),e.gl.uniform1i(e.uniforms.num_iterations,i),e.render.draw_frame()}s.addEventListener("keydown",function(t){13===t.keyCode&&a()}),r.addEventListener("keydown",function(t){13===t.keyCode&&a()}),Page.element.querySelector("#download-button").addEventListener("click",()=>{e.download_frame("a-julia-set-mosaic.png")})}();