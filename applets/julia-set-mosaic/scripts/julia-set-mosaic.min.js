!function(){"use strict";let e=document.querySelector("#output-canvas").getContext("2d",{alpha:!1}),t=null;document.querySelector("#generate-button").addEventListener("click",n);let u=document.querySelectorAll("#julia-size-input, #num-julias-input");for(let e=0;e<u.length;e++)u[e].addEventListener("keydown",function(e){13===e.keyCode&&n()});function n(){let u=parseInt(document.querySelector("#julia-size-input").value)||20,n=parseInt(document.querySelector("#num-julias-input").value)||50;u<20&&(u=20);let o=n*u,a=-2.25,r=1.5,c=0,l=0;document.querySelector("#output-canvas").setAttribute("width",o),document.querySelector("#output-canvas").setAttribute("height",o);try{t.terminate()}catch(e){}t=DEBUG?new Worker("/applets/julia-set-mosaic/scripts/worker.js"):new Worker("/applets/julia-set-mosaic/scripts/worker.min.js"),temporary_web_workers.push(t),t.onmessage=function(o){let s=e.getImageData(u*l,u*c,u,u),i=s.data;for(let e=0;e<u;e++)for(let t=0;t<u;t++){let n=o.data[0][e][t],a=4*e*u+4*t;i[a]=0,i[a+1]=n,i[a+2]=n,i[a+3]=255}e.putImageData(s,u*l,u*c),++l===n?(l=0,a=-2.25,c++,r-=3/n):a+=3/n,c!==n&&t.postMessage([a,r,u,100])},t.postMessage([a,r,u,100])}document.querySelector("#download-button").addEventListener("click",function(){let e=document.createElement("a");e.download="julia-set-mosaic.png",e.href=document.querySelector("#output-canvas").toDataURL(),e.click(),e.remove()})}();