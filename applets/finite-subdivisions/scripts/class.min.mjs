import{Applet}from"../../../scripts/src/applets.min.mjs";class FiniteSubdivision extends Applet{resolution=1e3;numVertices=6;numIterations=5;webWorker=null;constructor(t){super(t);var s={renderer:"cpu",canvasWidth:this.resolution,canvasHeight:this.resolution,useFullscreen:!0,useFullscreenButton:!0,enterFullscreenButtonIconPath:"/graphics/general-icons/enter-fullscreen.png",exitFullscreenButtonIconPath:"/graphics/general-icons/exit-fullscreen.png"};this.wilson=new Wilson(t,s)}run(t,s,e){this.numVertices=t,this.numIterations=Math.min(s,9),this.resolution=3e3,this.maximumSpeed=e,this.wilson.changeCanvasSize(this.resolution,this.resolution),this.wilson.ctx.fillStyle="rgb(0, 0, 0)",this.wilson.ctx.fillRect(0,0,this.resolution,this.resolution),this.wilson.ctx.lineWidth=10-this.numIterations;try{this.webWorker.terminate()}catch(t){}this.webWorker=new Worker(`/applets/finite-subdivisions/scripts/worker.${DEBUG?"":"min."}js`),this.workers.push(this.webWorker),this.webWorker.onmessage=t=>{this.wilson.ctx.strokeStyle=t.data[4],this.wilson.ctx.beginPath(),this.wilson.ctx.moveTo(t.data[1],t.data[0]),this.wilson.ctx.lineTo(t.data[3],t.data[2]),this.wilson.ctx.stroke()},this.webWorker.postMessage([this.numVertices,this.numIterations,this.resolution,this.maximumSpeed])}}export{FiniteSubdivision};