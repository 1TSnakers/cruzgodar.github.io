import{Applet}from"/scripts/src/applets.min.mjs";import{addTemporaryWorker}from"/scripts/src/main.min.mjs";import{Wilson}from"/scripts/wilson.min.mjs";class FiniteSubdivision extends Applet{resolution=1e3;numVertices=6;numIterations=5;webWorker=null;constructor(s){super(s);var t={renderer:"cpu",canvasWidth:this.resolution,canvasHeight:this.resolution,useFullscreen:!0,useFullscreenButton:!0,enterFullscreenButtonIconPath:"/graphics/general-icons/enter-fullscreen.png",exitFullscreenButtonIconPath:"/graphics/general-icons/exit-fullscreen.png"};this.wilson=new Wilson(s,t)}run({numVertices:s,numIterations:t,maximumSpeed:i}){this.numVertices=s,this.numIterations=Math.min(t,9),this.resolution=3e3,this.maximumSpeed=i,this.wilson.changeCanvasSize(this.resolution,this.resolution),this.wilson.ctx.fillStyle="rgb(0, 0, 0)",this.wilson.ctx.fillRect(0,0,this.resolution,this.resolution),this.wilson.ctx.lineWidth=10-this.numIterations,this.webWorker=addTemporaryWorker("/applets/finite-subdivisions/scripts/worker.js"),this.webWorker.onmessage=s=>{this.wilson.ctx.strokeStyle=s.data[4],this.wilson.ctx.beginPath(),this.wilson.ctx.moveTo(s.data[1],s.data[0]),this.wilson.ctx.lineTo(s.data[3],s.data[2]),this.wilson.ctx.stroke()},this.webWorker.postMessage([this.numVertices,this.numIterations,this.resolution,this.maximumSpeed])}}export{FiniteSubdivision};