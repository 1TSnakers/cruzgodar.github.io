import{showPage}from"../../../scripts/src/loadPage.min.js";import{KaleidoscopicIFSFractal}from"./class.min.js";import{DownloadButton}from"/scripts/src/buttons.min.js";import{Checkbox}from"/scripts/src/checkboxes.min.js";import{Dropdown}from"/scripts/src/dropdowns.min.js";import{$}from"/scripts/src/main.min.js";import{typesetMath}from"/scripts/src/math.min.js";import{siteSettings}from"/scripts/src/settings.min.js";import{Slider}from"/scripts/src/sliders.min.js";import{TextBox}from"/scripts/src/textBoxes.min.js";const minScale=1.15,minScaleEpsilon=15e-5,maxScaleEpsilon=3e-7;export default function(){const e=new TextBox({element:$("#resolution-input"),name:"Resolution",value:500,minValue:100,maxValue:1e3,onInput:function(){l.changeResolution(e.value*siteSettings.resolutionMultiplier)}}),t=new Slider({element:$("#rotation-angle-x-2-slider"),name:"$\\theta_x$",value:0,min:0,max:Math.PI/2,onInput:r}),o=new Slider({element:$("#rotation-angle-y-2-slider"),name:"$\\theta_y$",value:0,min:0,max:Math.PI/2,onInput:r}),n=new Slider({element:$("#rotation-angle-z-2-slider"),name:"$\\theta_z$",value:0,min:0,max:Math.PI/2,onInput:r}),a=new Dropdown({element:$("#polyhedra-dropdown"),name:"Polyhedra",options:{octahedron:"Octahedron",tetrahedron:"Tetrahedron",cube:"Cube"},onInput:function(){l.changePolyhedron(a.value),"tetrahedron"===a.value?(t.setBounds({max:2*Math.PI}),o.setBounds({max:2*Math.PI}),n.setBounds({max:2*Math.PI/3})):(a.value,t.setBounds({max:2*Math.PI/2}),o.setBounds({max:2*Math.PI/2}),n.setBounds({max:2*Math.PI/2}))}}),s=new Slider({element:$("#scale-slider"),name:"Scale",value:2,min:minScale,max:2,onInput:r}),i=new Checkbox({element:$("#shadows-checkbox"),name:"Shadows",onInput:function(){l.useShadows=i.checked,l.reloadShader()}}),l=new KaleidoscopicIFSFractal({canvas:$("#output-canvas"),shape:a.value||"octahedron"});function r(){l.setUniform("scale",s.value);var e=(s.value-minScale)/(2-minScale)*Math.log10(minScaleEpsilon/maxScaleEpsilon);l.setMinEpsilon(minScaleEpsilon/Math.pow(10,e)),l.rotationAngleX2=t.value,l.rotationAngleY2=o.value,l.rotationAngleZ2=n.value,l.updateMatrices()}new DownloadButton({element:$("#download-button"),wilson:l.wilson,filename:"a-kaleidoscopic-ifs-fractal.png"}),typesetMath(),showPage()}