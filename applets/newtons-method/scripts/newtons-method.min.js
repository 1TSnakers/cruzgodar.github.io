!function(){"use strict";let e=null,t=[],o=100,n=document.querySelector("#newtons-method-plot").getContext("2d",{alpha:!1}),r=null,l=[],u=-1,a=-1,c=document.querySelector("#root-selector").offsetWidth,s=document.querySelector("#root-selector").offsetHeight,d=17.5;const m=.05;let i=[],h=[],p=[];const y=[[255,0,0],[0,255,0],[0,0,255],[0,255,255],[255,0,255],[255,255,0],[127,0,255],[255,127,0]];function f(r){document.querySelector("#newtons-method-plot").setAttribute("width",e),document.querySelector("#newtons-method-plot").setAttribute("height",e);for(let t=0;t<e;t++){h[t]=[],i[t]=[];for(let o=0;o<e;o++)i[t][o]=0,h[t][o]=-1}for(let t=0;t<e;t++)for(let n=0;n<e;n++){if(0!==i[t][n])continue;let l=[(n-e/2)/e*4,-(t-e/2)/e*4],u=[0,0],a=[];for(let c=0;c<o;c++){let o=q(v(r,l),b(M(r,l)));u[0]=l[0],u[1]=l[1],l[0]=l[0]-o[0],l[1]=l[1]-o[1];let s=Math.floor(l[0]/4*e+e/2),d=Math.floor(-(l[1]/4*e-e/2));d>=0&&d<e&&s>=0&&s<e&&a.push([[d,s],c+1]);let p=!1;for(let e=0;e<r.length;e++){let o=S([l[0]-r[e][0],l[1]-r[e][1]]);if(o<=m*m){let l=S([u[0]-r[e][0],u[1]-r[e][1]]),s=(Math.log(m)-.5*Math.log(o))/(.5*Math.log(l)-.5*Math.log(o));h[t][n]=e,i[t][n]=c-s;for(let t=0;t<a.length;t++)i[a[t][0][0]][a[t][0][1]]=c-s-a[t][1],h[a[t][0][0]][a[t][0][1]]=e;p=!0;break}}if(p)break}}!function(){let o=0,r=1/0;for(let t=0;t<e;t++)for(let n=0;n<e;n++)i[t][n]>o&&(o=i[t][n]),i[t][n]<r&&(r=i[t][n]);if(100===e){p.push(o),p.length>10&&p.shift();let e=0;for(let t=0;t<p.length;t++)e+=p[t];o=e/p.length}let l=n.getImageData(0,0,e,e),u=l.data;for(let n=0;n<e;n++)for(let l=0;l<e;l++){i[n][l]-=r,i[n][l]/=o-r,i[n][l]=1-i[n][l],i[n][l]=Math.pow(i[n][l],1+t.length/4),i[n][l]>=0||i[n][l]<=1||(i[n][l]=1);let a=4*n*e+4*l,c=h[n][l];-1!==c?(u[a]=y[c][0]*i[n][l],u[a+1]=y[c][1]*i[n][l],u[a+2]=y[c][2]*i[n][l],u[a+3]=255):(u[a]=0,u[a+1]=0,u[a+2]=0,u[a+3]=255)}n.putImageData(l,0,0)}()}function g(){e=parseInt(document.querySelector("#dim-input").value||1e3),document.querySelector("#newtons-method-plot").setAttribute("width",e),document.querySelector("#newtons-method-plot").setAttribute("height",e),document.querySelector("#progress-bar span").insertAdjacentHTML("afterend","<span></span>"),document.querySelector("#progress-bar span").remove();try{r.terminate()}catch(e){}r=DEBUG?new Worker("/applets/newtons-method/scripts/worker.js"):new Worker("/applets/newtons-method/scripts/worker.min.js"),temporary_web_workers.push(r),r.onmessage=function(o){if("progress"===o.data[0])document.querySelector("#progress-bar span").style.width=o.data[1]+"%",100===o.data[1]&&setTimeout(function(){document.querySelector("#progress-bar").style.opacity=0,setTimeout(function(){document.querySelector("#progress-bar").style.marginTop=0,document.querySelector("#progress-bar").style.marginBottom=0},300)},600);else{let r=n.getImageData(0,0,e,e),l=r.data,u=o.data[1].length;for(let e=0;e<u;e++)l[e]=o.data[1][e];n.putImageData(r,0,0),function(e){let t=[[-e[0][0],-e[0][1]],[1,0]];for(let o=1;o<e.length;o++){let n=JSON.parse(JSON.stringify(t));t.unshift([0,0]);for(let r=0;r<n.length;r++){let l=q([-e[o][0],-e[o][1]],n[r]);t[r][0]+=l[0],t[r][1]+=l[1]}}let o="\\(f(z) = ",n=0,r=1;document.querySelector("#polynomial-label-1").textContent="",document.querySelector("#polynomial-label-2").textContent="",document.querySelector("#polynomial-label-3").textContent="";for(let e=t.length-1;e>=0;e--){let l=!0;if(n++,t[e][0]=Math.round(100*t[e][0])/100,t[e][1]=Math.round(100*t[e][1])/100,0===t[e][0]&&0===t[e][1])l=!1,n--;else if(0===t[e][1]){let n=Math.abs(t[e][0]);1===n&&e>0?t[e][0]>0&&e===t.length-1?o+="":t[e][0]>0?o+=" + ":t[e][0]<0&&(o+=" - "):t[e][0]>0&&e===t.length-1?o+=`${n}`:t[e][0]>0?o+=` + ${n}`:t[e][0]<0&&(o+=` - ${n}`)}else if(0===t[e][0]){let n=Math.abs(t[e][1]);1===n&&e>0?t[e][1]>0&&e===t.length-1?o+="i":t[e][1]>0?o+=" + i":t[e][1]<0&&(o+=" - i"):t[e][1]>0&&e===t.length-1?o+=`${n}i`:t[e][1]>0?o+=` + ${n}i`:t[e][1]<0&&(o+=` - ${n}i`)}else e===t.length-1?t[e][1]>0?o+=`(${t[e][0]} + ${t[e][1]}i)`:o+=`(${t[e][0]} - ${Math.abs(t[e][1])}i)`:t[e][1]>0?o+=` + (${t[e][0]} + ${t[e][1]}i)`:o+=` + (${t[e][0]} - ${Math.abs(t[e][1])}i)`;l&&(e>1?o+=`z^${e}`:1===e&&(o+="z")),3===n&&(o+="\\)",document.querySelector(`#polynomial-label-${r}`).textContent=o,o="\\(",n=0,r++)}4!==r&&(o+="\\)",document.querySelector(`#polynomial-label-${r}`).textContent=o);typeset_math()}(t),function(){let e=document.createElement("a");e.download="newtons-method.png",e.href=document.querySelector("#newtons-method-plot").toDataURL(),e.click(),e.remove()}()}},document.querySelector("#progress-bar span").style.width=0,document.querySelector("#progress-bar").style.marginTop="5vh",document.querySelector("#progress-bar").style.marginBottom="5vh",setTimeout(function(){document.querySelector("#progress-bar").style.opacity=1},600),r.postMessage([e,t])}function S(e){return e[0]*e[0]+e[1]*e[1]}function q(e,t){return[e[0]*t[0]-e[1]*t[1],e[0]*t[1]+e[1]*t[0]]}function b(e){let t=S(e);return[1/t*e[0],-1/t*e[1]]}function v(e,t){let o=[1,0];for(let n=0;n<e.length;n++)o=q(o,[t[0]-e[n][0],t[1]-e[n][1]]);return o}function M(e,t){let o=v(e,t),n=v(e,[t[0]-.001,t[1]]);return o[0]-=n[0],o[1]-=n[1],o[0]/=.001,o[1]/=.001,o}function w(e){u=-1;for(let t=0;t<l.length;t++)if(e.target.id===`root-marker-${t}`){e.preventDefault(),p=[],u=t;break}}function $(o){-1!==u&&(document.body.style.WebkitUserSelect="",e=500,f(t),document.querySelector("#polynomial-label-1").textContent="",document.querySelector("#polynomial-label-2").textContent="",document.querySelector("#polynomial-label-3").textContent="",a=u,document.querySelector("#root-a-input").value=Math.round(1e3*t[a][0])/1e3,document.querySelector("#root-b-input").value=Math.round(1e3*t[a][1])/1e3,document.querySelector("#root-setter").style.pointerEvents="auto",document.querySelector("#root-setter").style.opacity=1),u=-1}function k(o){if(-1===u)return;let n=null,r=null,a=document.querySelector("#root-selector").getBoundingClientRect();"touchmove"===o.type?(n=o.touches[0].clientY-a.top,r=o.touches[0].clientX-a.left):(n=o.clientY-a.top,r=o.clientX-a.left),n<d&&(n=d),n>s-d&&(n=s-d),r<d&&(r=d),r>c-d&&(r=c-d),l[u].style.transform=`translate3d(${r-d}px, ${n-d}px, 0)`;let m=(r-c/2)/c*4,i=-(n-s/2)/s*4;t[u][0]=m,t[u][1]=i,e=100,f(t)}function E(){t[a][0]=parseFloat(document.querySelector("#root-a-input").value)||0,t[a][1]=parseFloat(document.querySelector("#root-b-input").value)||0;let o=Math.floor(s*(1-(t[a][1]/4+.5))),n=Math.floor(c*(t[a][0]/4+.5));l[a].style.transform=`translate3d(${n-d}px, ${o-d}px, 0)`,e=100,f(t)}function x(){c=document.querySelector("#root-selector").offsetWidth,s=document.querySelector("#root-selector").offsetHeight;document.querySelector("#root-selector").getBoundingClientRect();for(let e=0;e<t.length;e++){let o=Math.floor(s*(1-(t[e][1]/4+.5))),n=Math.floor(c*(t[e][0]/4+.5));l[e].style.transform=`translate3d(${n-d}px, ${o-d}px, 0)`}}!function(){1===url_vars.contrast&&(1===url_vars.theme?document.querySelector("#newtons-method-plot").style.borderColor="rgb(192, 192, 192)":document.querySelector("#newtons-method-plot").style.borderColor="rgb(64, 64, 64)");add_style("\n\t\t\t.root-marker.hover\n\t\t\t{\n\t\t\t\tbackground-color: rgb(127, 127, 127);\t\n\t\t\t}\n\t\t\t\n\t\t\t.root-marker:not(:hover):focus\n\t\t\t{\n\t\t\t\tbackground-color: rgb(127, 127, 127);\n\t\t\t\toutline: none;\n\t\t\t}\n\t\t",!0)}(),document.documentElement.addEventListener("touchstart",w,!1),document.documentElement.addEventListener("touchmove",k,!1),document.documentElement.addEventListener("touchend",$,!1),document.documentElement.addEventListener("mousedown",w,!1),document.documentElement.addEventListener("mousemove",k,!1),document.documentElement.addEventListener("mouseup",$,!1),temporary_handlers.touchstart.push(w),temporary_handlers.touchmove.push(k),temporary_handlers.touchend.push($),temporary_handlers.mousedown.push(w),temporary_handlers.mousemove.push(k),temporary_handlers.mouseup.push($),document.querySelector("#root-a-input").addEventListener("input",E),document.querySelector("#root-b-input").addEventListener("input",E),document.querySelector("#root-a-input").addEventListener("keydown",function(o){13===o.keyCode&&(e=500,f(t))}),document.querySelector("#root-b-input").addEventListener("keydown",function(o){13===o.keyCode&&(e=500,f(t))}),document.querySelector("#add-marker-button").addEventListener("click",function(){if(t.length===y.length)return;let o=document.createElement("div");o.classList.add("root-marker"),o.id=`root-marker-${l.length}`,o.style.transform=`translate3d(${c/2-d}px, ${s/2-d}px, 0)`,document.querySelector("#root-selector").appendChild(o),l.push(o),t.push([0,0]),p=[],e=100,f(t)}),document.querySelector("#spread-markers-button").addEventListener("click",function(o=!0){document.querySelector("#polynomial-label-1").textContent="",document.querySelector("#polynomial-label-2").textContent="",document.querySelector("#polynomial-label-3").textContent="";for(let e=0;e<t.length;e++){e<t.length/2||t.length%2==1?(t[e][0]=Math.cos(2*Math.PI*2*e/t.length),t[e][1]=Math.sin(2*Math.PI*2*e/t.length)):(t[e][0]=Math.cos(2*Math.PI*(2*e+1)/t.length),t[e][1]=Math.sin(2*Math.PI*(2*e+1)/t.length));let o=Math.floor(s*(1-(t[e][1]/4+.5))),n=Math.floor(c*(t[e][0]/4+.5));l[e].style.transform=`translate3d(${n-d}px, ${o-d}px, 0)`}e=o?500:100;f(t)}),document.querySelector("#generate-high-res-plot-button").addEventListener("click",g),document.querySelector("#dim-input").addEventListener("keydown",function(e){13===e.keyCode&&g()}),window.addEventListener("resize",x),temporary_handlers.resize.push(x)}();