!function(){"use strict";let t=1e3,e=1e3,o=1e3,n=[],r=document.querySelector("#newtons-method-plot").getContext("webgl"),l=!1,i=!0,a=[],s=-1,u=-1,c=document.querySelector("#root-selector").offsetWidth,_=document.querySelector("#root-selector").offsetHeight,m=17.5,d=20,h=!1,f=0,g=0,p=4,v=0,y=!1,b=0,w=0,x=0,S=0;!function(){1===url_vars.contrast&&(1===url_vars.theme?document.querySelector("#newtons-method-plot").style.borderColor="rgb(192, 192, 192)":document.querySelector("#newtons-method-plot").style.borderColor="rgb(64, 64, 64)");add_style("\n\t\t\t.root-marker.hover\n\t\t\t{\n\t\t\t\tbackground-color: rgb(127, 127, 127);\t\n\t\t\t}\n\t\t\t\n\t\t\t.root-marker:not(:hover):focus\n\t\t\t{\n\t\t\t\tbackground-color: rgb(127, 127, 127);\n\t\t\t\toutline: none;\n\t\t\t}\n\t\t",!0)}(),setTimeout(function(){document.documentElement.addEventListener("touchstart",k,!1),document.documentElement.addEventListener("touchmove",R,!1),document.documentElement.addEventListener("touchend",U,!1),document.documentElement.addEventListener("mousedown",E,!1),document.documentElement.addEventListener("mousemove",C,!1),document.documentElement.addEventListener("mouseup",F,!1),temporary_handlers.touchstart.push(k),temporary_handlers.touchmove.push(R),temporary_handlers.touchend.push(U),temporary_handlers.mousedown.push(E),temporary_handlers.mousemove.push(C),temporary_handlers.mouseup.push(F),document.querySelector("#root-a-input").addEventListener("input",$),document.querySelector("#root-b-input").addEventListener("input",$),document.querySelector("#root-a-input").addEventListener("keydown",function(t){13===t.keyCode&&window.requestAnimationFrame(M)}),document.querySelector("#root-b-input").addEventListener("keydown",function(t){13===t.keyCode&&window.requestAnimationFrame(M)})},500),document.querySelector("#resolution-input").addEventListener("input",function(){(t=parseInt(document.querySelector("#resolution-input").value||1e3))<200&&(t=200);t>2e3&&(t=2e3);canvas_is_fullscreen&&(aspect_ratio>=1?(e=t,o=Math.floor(t/aspect_ratio)):(e=Math.floor(t*aspect_ratio),o=t));document.querySelector("#newtons-method-plot").setAttribute("width",e),document.querySelector("#newtons-method-plot").setAttribute("height",o),r.viewport(0,0,e,o),window.requestAnimationFrame(M)}),document.querySelector("#add-marker-button").addEventListener("click",function(){if(8===n.length)return;let t=3*Math.random()-1.5,r=3*Math.random()-1.5,l=0,s=0;e>=o?(l=Math.floor(_*(1-((r-g)/p+.5))),s=Math.floor(c*((t-f)/(e/o)/p+.5))):(l=Math.floor(_*(1-(e/o*(r-g)/p+.5))),s=Math.floor(c*((t-f)/p+.5)));let u=document.createElement("div");u.classList.add("root-marker"),u.classList.add("no-floating-footer"),u.id=`root-marker-${a.length}`,u.style.transform=`translate3d(${s-m}px, ${l-m}px, 0)`,document.querySelector("#root-selector").appendChild(u),a.push(u),n.push([t,r]),d=20,h=!0,i&&window.requestAnimationFrame(M)}),document.querySelector("#spread-markers-button").addEventListener("click",function(t=!0){document.querySelector("#polynomial-label-1").textContent="",document.querySelector("#polynomial-label-2").textContent="",document.querySelector("#polynomial-label-3").textContent="";for(let t=0;t<n.length;t++){t<n.length/2||n.length%2==1?(n[t][0]=Math.cos(2*Math.PI*2*t/n.length),n[t][1]=Math.sin(2*Math.PI*2*t/n.length)):(n[t][0]=Math.cos(2*Math.PI*(2*t+1)/n.length),n[t][1]=Math.sin(2*Math.PI*(2*t+1)/n.length));let r=0,l=0;e>=o?(r=Math.floor(_*(1-((n[t][1]-g)/p+.5))),l=Math.floor(c*((n[t][0]-f)/(e/o)/p+.5))):(r=Math.floor(_*(1-((n[t][1]-g)*(e/o)/p+.5))),l=Math.floor(c*((n[t][0]-f)/p+.5))),a[t].style.transform=`translate3d(${l-m}px, ${r-m}px, 0)`}h=!0,i&&window.requestAnimationFrame(M)}),document.querySelector("#generate-high-res-plot-button").addEventListener("click",function(){t=parseInt(document.querySelector("#dim-input").value||2e3),canvas_is_fullscreen?aspect_ratio>=1?(e=t,o=Math.floor(t/aspect_ratio)):(e=Math.floor(t*aspect_ratio),o=t):(e=t,o=t);document.querySelector("#newtons-method-plot").setAttribute("width",e),document.querySelector("#newtons-method-plot").setAttribute("height",o),r.viewport(0,0,e,o),M();let n=document.createElement("a");n.download="newtons-method.png",n.href=document.querySelector("#newtons-method-plot").toDataURL(),n.click(),n.remove(),t=1e3,canvas_is_fullscreen?aspect_ratio>=1?(e=t,o=Math.floor(t/aspect_ratio)):(e=Math.floor(t*aspect_ratio),o=t):(e=t,o=t);document.querySelector("#newtons-method-plot").setAttribute("width",e),document.querySelector("#newtons-method-plot").setAttribute("height",o),r.viewport(0,0,e,o),M()}),document.querySelector("#dim-input").addEventListener("keydown",function(t){13===t.keyCode&&(h=!0,l=!0,i&&(i=!1,window.requestAnimationFrame(M)))}),window.addEventListener("resize",j),temporary_handlers.resize.push(j),applet_canvases_to_resize=[document.querySelector("#newtons-method-plot"),document.querySelector("#root-selector")],applet_canvas_resize_callback=function(){canvas_is_fullscreen?aspect_ratio>=1?(e=t,o=Math.floor(t/aspect_ratio)):(e=Math.floor(t*aspect_ratio),o=t):(e=t,o=t),document.querySelector("#newtons-method-plot").setAttribute("width",e),document.querySelector("#newtons-method-plot").setAttribute("height",o),r.viewport(0,0,e,o),j(),window.requestAnimationFrame(M)},applet_canvas_true_fullscreen=!0,set_up_canvas_resizer(),setTimeout(function(){let t=L(r,r.VERTEX_SHADER,q),n=L(r,r.FRAGMENT_SHADER,z);A=r.createProgram(),r.attachShader(A,t),r.attachShader(A,n),r.linkProgram(A),r.getProgramParameter(A,r.LINK_STATUS)||(console.log(`Couldn't link shader program: ${r.getShaderInfoLog(shader)}`),r.deleteProgram(A));r.useProgram(A);let l=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,l),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-1,-1,0,-1,1,0,1,-1,0,1,1,0]),r.STATIC_DRAW),A.position_attribute=r.getAttribLocation(A,"position"),r.enableVertexAttribArray(A.position_attribute),r.vertexAttribPointer(A.position_attribute,3,r.FLOAT,!1,0,0),A.aspect_ratio_x_uniform=r.getUniformLocation(A,"aspect_ratio_x"),A.aspect_ratio_y_uniform=r.getUniformLocation(A,"aspect_ratio_y"),A.box_size_halved_uniform=r.getUniformLocation(A,"box_size_halved"),A.center_x_uniform=r.getUniformLocation(A,"center_x"),A.center_y_uniform=r.getUniformLocation(A,"center_y"),A.num_roots_uniform=r.getUniformLocation(A,"num_roots"),A.root_1_uniform=r.getUniformLocation(A,"root_1"),A.root_2_uniform=r.getUniformLocation(A,"root_2"),A.root_3_uniform=r.getUniformLocation(A,"root_3"),A.root_4_uniform=r.getUniformLocation(A,"root_4"),A.root_5_uniform=r.getUniformLocation(A,"root_5"),A.root_6_uniform=r.getUniformLocation(A,"root_6"),A.root_7_uniform=r.getUniformLocation(A,"root_7"),A.root_8_uniform=r.getUniformLocation(A,"root_8"),A.brightness_scale_uniform=r.getUniformLocation(A,"brightness_scale"),document.querySelector("#newtons-method-plot").setAttribute("width",e),document.querySelector("#newtons-method-plot").setAttribute("height",o),r.viewport(0,0,e,o)},500),setTimeout(j,1e3);const q="\n\t\tattribute vec3 position;\n\t\tvarying vec2 uv;\n\n\t\tvoid main(void)\n\t\t{\n\t\t\tgl_Position = vec4(position, 1.0);\n\n\t\t\t//Interpolate quad coordinates in the fragment shader.\n\t\t\tuv = position.xy;\n\t\t}\n\t",z="\n\t\tprecision highp float;\n\t\t\n\t\tvarying vec2 uv;\n\t\t\n\t\tuniform float aspect_ratio_x;\n\t\tuniform float aspect_ratio_y;\n\t\t\n\t\tuniform float box_size_halved;\n\t\tuniform float center_x;\n\t\tuniform float center_y;\n\t\t\n\t\tuniform int num_roots;\n\t\t\n\t\tuniform vec2 root_1;\n\t\tuniform vec2 root_2;\n\t\tuniform vec2 root_3;\n\t\tuniform vec2 root_4;\n\t\tuniform vec2 root_5;\n\t\tuniform vec2 root_6;\n\t\tuniform vec2 root_7;\n\t\tuniform vec2 root_8;\n\t\t\n\t\tconst vec3 color_1 = vec3(1.0, 0.0, 0.0);\n\t\tconst vec3 color_2 = vec3(0.0, 1.0, 0.0);\n\t\tconst vec3 color_3 = vec3(0.0, 0.0, 1.0);\n\t\tconst vec3 color_4 = vec3(0.0, 1.0, 1.0);\n\t\tconst vec3 color_5 = vec3(1.0, 0.0, 1.0);\n\t\tconst vec3 color_6 = vec3(1.0, 1.0, 0.0);\n\t\tconst vec3 color_7 = vec3(0.5, 0.0, 1.0);\n\t\tconst vec3 color_8 = vec3(1.0, 0.5, 0.0);\n\t\t\n\t\tuniform float brightness_scale;\n\t\t\n\t\tconst float threshhold = .05;\n\t\t\n\t\t\n\t\t\n\t\t//Returns z_1 * z_2.\n\t\tvec2 complex_multiply(vec2 z_1, vec2 z_2)\n\t\t{\n\t\t\treturn vec2(z_1.x * z_2.x - z_1.y * z_2.y, z_1.x * z_2.y + z_1.y * z_2.x);\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t//Returns 1/z.\n\t\tvec2 complex_invert(vec2 z)\n\t\t{\n\t\t\tfloat magnitude = z.x*z.x + z.y*z.y;\n\t\t\t\n\t\t\treturn vec2(z.x / magnitude, -z.y / magnitude);\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t//Returns f(z) for a polynomial f with given roots.\n\t\tvec2 complex_polynomial(vec2 z)\n\t\t{\n\t\t\tvec2 result = vec2(1.0, 0.0);\n\t\t\t\n\t\t\tif (num_roots == 0)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = complex_multiply(result, z - root_1);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif (num_roots == 1)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = complex_multiply(result, z - root_2);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif (num_roots == 2)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = complex_multiply(result, z - root_3);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif (num_roots == 3)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = complex_multiply(result, z - root_4);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif (num_roots == 4)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = complex_multiply(result, z - root_5);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif (num_roots == 5)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = complex_multiply(result, z - root_6);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif (num_roots == 6)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = complex_multiply(result, z - root_7);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif (num_roots == 7)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = complex_multiply(result, z - root_8);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\treturn result;\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t//Approximates f'(z) for a polynomial f with given roots.\n\t\tvec2 complex_derivative(vec2 z)\n\t\t{\n\t\t\treturn 1000.0 * (complex_polynomial(z) - complex_polynomial(z - vec2(.001, 0.0)));\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\tvoid main(void)\n\t\t{\n\t\t\tvec2 z = vec2(uv.x * aspect_ratio_x * box_size_halved + center_x, uv.y / aspect_ratio_y * box_size_halved + center_y);\n\t\t\tvec2 last_z = vec2(0.0, 0.0);\n\t\t\t\n\t\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n\t\t\t\n\t\t\tfor (int iteration = 0; iteration < 100; iteration++)\n\t\t\t{\n\t\t\t\tvec2 temp = complex_multiply(complex_polynomial(z), complex_invert(complex_derivative(z)));\n\t\t\t\t\n\t\t\t\tlast_z = z;\n\t\t\t\t\n\t\t\t\tz -= temp;\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 1)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_1);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_1);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_1 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 2)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_2);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_2);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_2 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 3)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_3);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_3);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_3 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 4)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_4);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_4);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_4 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 5)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_5);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_5);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_5 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 6)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_6);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_6);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_6 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 7)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_7);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_7);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_7 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 8)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_8);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_8);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_8 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t";let A=null;function L(t,e,o){let n=t.createShader(e);return t.shaderSource(n,o),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)||(console.log(`Couldn't load shader: ${t.getProgramInfoLog(shaderProgram)}`),t.deleteShader(n)),n}function M(){e>=o?(r.uniform1f(A.aspect_ratio_x_uniform,e/o),r.uniform1f(A.aspect_ratio_y_uniform,1)):(r.uniform1f(A.aspect_ratio_x_uniform,1),r.uniform1f(A.aspect_ratio_y_uniform,e/o)),r.uniform1f(A.box_size_halved_uniform,p/2),r.uniform1f(A.center_x_uniform,f),r.uniform1f(A.center_y_uniform,g),r.uniform1i(A.num_roots_uniform,n.length),n.length>=1&&r.uniform2fv(A.root_1_uniform,n[0]),n.length>=2&&r.uniform2fv(A.root_2_uniform,n[1]),n.length>=3&&r.uniform2fv(A.root_3_uniform,n[2]),n.length>=4&&r.uniform2fv(A.root_4_uniform,n[3]),n.length>=5&&r.uniform2fv(A.root_5_uniform,n[4]),n.length>=6&&r.uniform2fv(A.root_6_uniform,n[5]),n.length>=7&&r.uniform2fv(A.root_7_uniform,n[6]),n.length>=8&&r.uniform2fv(A.root_8_uniform,n[7]),r.uniform1f(A.brightness_scale_uniform,d),r.drawArrays(r.TRIANGLE_STRIP,0,4);let t=new Uint8Array(e*o*4);r.readPixels(0,0,e,o,r.RGBA,r.UNSIGNED_BYTE,t);let a=0;for(let n=0;n<e*o;n++)1!==t[4*n]&&1!==t[4*n+1]&&1!==t[4*n+2]||a++;let s=!1;a<25e-6*e*o*n.length&&d>.25?(d-=.25,s=!0):a>5e-5*e*o*n.length&&(d+=.25,s=!0),h?s?window.requestAnimationFrame(M):(h=!1,i=!0):l?(l=!1,window.requestAnimationFrame(M)):i=!0}function E(t){s=-1;for(let e=0;e<a.length;e++)if(t.target.id===`root-marker-${e}`){t.preventDefault(),s=e;break}"root-selector"===t.target.id&&(y=!0,x=t.clientX,S=t.clientY)}function F(t){-1!==s&&(document.body.style.WebkitUserSelect="",document.querySelector("#polynomial-label-1").textContent="",document.querySelector("#polynomial-label-2").textContent="",document.querySelector("#polynomial-label-3").textContent="",u=s,P()),s=-1,y=!1,h=!0,l=!0,i&&(i=!1,window.requestAnimationFrame(M))}function C(t){if(y){t.preventDefault();let e=t.clientX,o=t.clientY,n=e-x,r=o-S;x=e,S=o,f-=n/c*p,g+=r/_*p,I(),l=!0,i&&(i=!1,window.requestAnimationFrame(M))}else if(-1!==s){let r=null,u=null,d=document.querySelector("#root-selector").getBoundingClientRect();"touchmove"===t.type?(r=t.touches[0].clientY-d.top,u=t.touches[0].clientX-d.left):(r=t.clientY-d.top,u=t.clientX-d.left),r<m&&(r=m),r>_-m&&(r=_-m),u<m&&(u=m),u>c-m&&(u=c-m),a[s].style.transform=`translate3d(${u-m}px, ${r-m}px, 0)`;let v=0,y=0;e>=o?(v=(u-c/2)/c*p*(e/o)+f,y=-(r-_/2)/_*p+g):(v=(u-c/2)/c*p+f,y=-(r-_/2)/_*p/(e/o)+g),n[s][0]=v,n[s][1]=y,l=!0,(h||i)&&(h=!1,i=!1,window.requestAnimationFrame(M))}}function k(t){s=-1;for(let e=0;e<a.length;e++)if(t.target.id===`root-marker-${e}`){t.preventDefault(),s=e;break}"root-selector"===t.target.id&&(y=!0,x=t.touches[0].clientX,S=t.touches[0].clientY)}function U(t){-1!==s&&(document.body.style.WebkitUserSelect="",document.querySelector("#polynomial-label-1").textContent="",document.querySelector("#polynomial-label-2").textContent="",document.querySelector("#polynomial-label-3").textContent="",u=s,P()),s=-1,y=!1,h=!0,l=!0,i&&(i=!1,window.requestAnimationFrame(M))}function R(t){if(y){t.preventDefault();let n=t.touches[0].clientX,r=t.touches[0].clientY;if(t.touches.length>=2){b=10;let n=t.touches[0].clientX-t.touches[1].clientX,r=t.touches[0].clientY-t.touches[1].clientY,l=Math.sqrt(n*n+r*r),i=l-w;if(w=l,Math.abs(i)>20)return;let a=document.querySelector("#root-selector").getBoundingClientRect(),s=((t.touches[0].clientX+t.touches[1].clientX)/2-a.left)/c,u=((t.touches[0].clientY+t.touches[1].clientY)/2-a.top)/_,m=(s*p-p/2)*e/o+f,d=p/2-u*p+g,h=i/2;v+h>=-150&&v+h<=150&&(v+=h,p=4/Math.pow(1.02,v)),f=m-(s*p-p/2)*e/o,g=d-(p/2-u*p)}else--b<0&&(b=0);let a=n-x,s=r-S;x=n,S=r,f-=a/c*p,g+=s/_*p,I(),l=!0,i&&(i=!1,window.requestAnimationFrame(M))}else if(-1!==s){let r=null,u=null,d=document.querySelector("#root-selector").getBoundingClientRect();"touchmove"===t.type?(r=t.touches[0].clientY-d.top,u=t.touches[0].clientX-d.left):(r=t.clientY-d.top,u=t.clientX-d.left),r<m&&(r=m),r>_-m&&(r=_-m),u<m&&(u=m),u>c-m&&(u=c-m),a[s].style.transform=`translate3d(${u-m}px, ${r-m}px, 0)`;let v=0,y=0;e>=o?(v=(u-c/2)/c*p*(e/o)+f,y=-(r-_/2)/_*p+g):(v=(u-c/2)/c*p+f,y=-(r-_/2)/_*p/(e/o)+g),n[s][0]=v,n[s][1]=y,l=!0,(h||i)&&(h=!1,i=!1,window.requestAnimationFrame(M))}}function P(){document.querySelector("#root-a-input").value=Math.round(1e3*n[u][0])/1e3,document.querySelector("#root-b-input").value=Math.round(1e3*n[u][1])/1e3,document.querySelector("#root-setter").style.pointerEvents="auto",document.querySelector("#root-setter").style.opacity=1}function $(){n[u][0]=parseFloat(document.querySelector("#root-a-input").value)||0,n[u][1]=parseFloat(document.querySelector("#root-b-input").value)||0;let t=0,r=0;e>=o?(t=Math.floor(_*(1-((n[u][1]-g)/p+.5))),r=Math.floor(c*((n[u][0]-f)/(e/o)/p+.5))):(t=Math.floor(_*(1-((n[u][1]-g)*(e/o)/p+.5))),r=Math.floor(c*((n[u][0]-f)/p+.5))),a[u].style.transform=`translate3d(${r-m}px, ${t-m}px, 0)`,window.requestAnimationFrame(M)}function j(){c=document.querySelector("#root-selector").offsetWidth,_=document.querySelector("#root-selector").offsetHeight,I()}function I(){for(let t=0;t<n.length;t++){let r=0,l=0;e>=o?(r=Math.floor(_*(1-((n[t][1]-g)/p+.5))),l=Math.floor(c*((n[t][0]-f)/(e/o)/p+.5))):(r=Math.floor(_*(1-((n[t][1]-g)*(e/o)/p+.5))),l=Math.floor(c*((n[t][0]-f)/p+.5))),a[t].style.transform=`translate3d(${l-m}px, ${r-m}px, 0)`}}}();