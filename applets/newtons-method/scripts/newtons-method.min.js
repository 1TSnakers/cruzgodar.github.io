!function(){"use strict";let t="\n\t\tprecision highp float;\n\t\t\n\t\tvarying vec2 uv;\n\t\t\n\t\tuniform float aspect_ratio;\n\t\t\n\t\tuniform float world_center_x;\n\t\tuniform float world_center_y;\n\t\tuniform float world_size;\n\t\t\n\t\tuniform int num_roots;\n\t\t\n\t\tuniform vec2 root_1;\n\t\tuniform vec2 root_2;\n\t\tuniform vec2 root_3;\n\t\tuniform vec2 root_4;\n\t\tuniform vec2 root_5;\n\t\tuniform vec2 root_6;\n\t\tuniform vec2 root_7;\n\t\tuniform vec2 root_8;\n\t\t\n\t\tconst vec3 color_1 = vec3(1.0, 0.0, 0.0);\n\t\tconst vec3 color_2 = vec3(0.0, 1.0, 0.0);\n\t\tconst vec3 color_3 = vec3(0.0, 0.0, 1.0);\n\t\tconst vec3 color_4 = vec3(0.0, 1.0, 1.0);\n\t\tconst vec3 color_5 = vec3(1.0, 0.0, 1.0);\n\t\tconst vec3 color_6 = vec3(1.0, 1.0, 0.0);\n\t\tconst vec3 color_7 = vec3(0.5, 0.0, 1.0);\n\t\tconst vec3 color_8 = vec3(1.0, 0.5, 0.0);\n\t\t\n\t\tuniform vec2 a;\n\t\tuniform vec2 c;\n\t\t\n\t\tuniform float brightness_scale;\n\t\t\n\t\tconst float threshhold = .05;\n\t\t\n\t\t\n\t\t\n\t\t//Returns z_1 * z_2.\n\t\tvec2 cmul(vec2 z_1, vec2 z_2)\n\t\t{\n\t\t\treturn vec2(z_1.x * z_2.x - z_1.y * z_2.y, z_1.x * z_2.y + z_1.y * z_2.x);\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t//Returns 1/z.\n\t\tvec2 cinv(vec2 z)\n\t\t{\n\t\t\tfloat magnitude = z.x*z.x + z.y*z.y;\n\t\t\t\n\t\t\treturn vec2(z.x / magnitude, -z.y / magnitude);\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t//Returns f(z) for a polynomial f with given roots.\n\t\tvec2 cpoly(vec2 z)\n\t\t{\n\t\t\tvec2 result = vec2(1.0, 0.0);\n\t\t\t\n\t\t\tif (num_roots == 0)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = cmul(result, z - root_1);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif (num_roots == 1)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = cmul(result, z - root_2);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif (num_roots == 2)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = cmul(result, z - root_3);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif (num_roots == 3)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = cmul(result, z - root_4);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif (num_roots == 4)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = cmul(result, z - root_5);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif (num_roots == 5)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = cmul(result, z - root_6);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif (num_roots == 6)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = cmul(result, z - root_7);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif (num_roots == 7)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = cmul(result, z - root_8);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\treturn result;\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t//Approximates f'(z) for a polynomial f with given roots.\n\t\tvec2 cderiv(vec2 z)\n\t\t{\n\t\t\treturn 20.0 * (cpoly(z) - cpoly(z - vec2(.05, 0.0)));\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\tvoid main(void)\n\t\t{\n\t\t\tvec2 z;\n\t\t\tvec2 last_z = vec2(0.0, 0.0);\n\t\t\t\n\t\t\tif (aspect_ratio >= 1.0)\n\t\t\t{\n\t\t\t\tz = vec2(uv.x * aspect_ratio * world_size + world_center_x, uv.y * world_size + world_center_y);\n\t\t\t}\n\t\t\t\n\t\t\telse\n\t\t\t{\n\t\t\t\tz = vec2(uv.x * world_size + world_center_x, uv.y / aspect_ratio * world_size + world_center_y);\n\t\t\t}\n\t\t\t\n\t\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tfor (int iteration = 0; iteration < 100; iteration++)\n\t\t\t{\n\t\t\t\tvec2 temp = cmul(cmul(cpoly(z), cinv(cderiv(z))), a) + c;\n\t\t\t\t\n\t\t\t\tlast_z = z;\n\t\t\t\t\n\t\t\t\tz -= temp;\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 1)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_1);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_1);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_1 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 2)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_2);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_2);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_2 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 3)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_3);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_3);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_3 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 4)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_4);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_4);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_4 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 5)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_5);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_5);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_5 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 6)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_6);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_6);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_6 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 7)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_7);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_7);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_7 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 8)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_8);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_8);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_8 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t",n={renderer:"gpu",shader:t,canvas_width:500,canvas_height:500,world_width:3,world_height:3,world_center_x:0,world_center_y:0,use_draggables:!0,draggables_mousemove_callback:H,draggables_touchmove_callback:H,draggables_mouseup_callback:T,draggables_touchend_callback:T,use_fullscreen:!0,true_fullscreen:!0,use_fullscreen_button:!0,enter_fullscreen_button_icon_path:"/graphics/general-icons/enter-fullscreen.png",exit_fullscreen_button_icon_path:"/graphics/general-icons/exit-fullscreen.png",switch_fullscreen_callback:B,mousedown_callback:I,touchstart_callback:I,mousedrag_callback:P,touchmove_callback:P,mouseup_callback:R,touchend_callback:R,wheel_callback:function(t,n,o,e){d=t,u=n,Math.abs(o/100)<.3?i+=o/100:v+=.05*Math.sign(o);W()},pinch_callback:function(t,n,e,r){_>=1?(i-=e/o.world_width*10,f=-e/o.world_width*10):(i-=e/o.world_height*10,f=-e/o.world_height*10);d=t,u=n,W()}},o=new Wilson(document.querySelector("#output-canvas"),n);o.render.init_uniforms(["aspect_ratio","world_center_x","world_center_y","world_size","num_roots","root_1","root_2","root_3","root_4","root_5","root_6","root_7","root_8","a","c","brightness_scale"]);let e=[1,0],r=[0,0],l=[],a=0,s=0,_=1,i=0,c=500,d=0,u=0,h=0,g=0,f=0,m=0,w=0,v=0;const b=.96,z=.005,p=5e-4,y=.93,M=.01,F=.001;let q=-1,x=o.draggables.add(1,0);x.classList.add("a-marker"),(x=o.draggables.add(0,0)).classList.add("c-marker"),C(),C(),C(),S();let k=document.querySelector("#resolution-input");k.addEventListener("input",()=>{c=parseInt(k.value||500),o.change_canvas_size(c,c),window.requestAnimationFrame($)}),document.querySelector("#add-root-button").addEventListener("click",C),document.querySelector("#remove-root-button").addEventListener("click",function(){if(1===s)return;s--,l.pop(),o.draggables.draggables[s+2].remove(),o.draggables.draggables.pop(),o.draggables.world_coordinates.pop(),o.draggables.num_draggables--,window.requestAnimationFrame($)}),document.querySelector("#spread-roots-button").addEventListener("click",S),document.querySelector("#download-button").addEventListener("click",()=>{o.download_frame("a-julia-set.png")});let j=document.querySelector("#root-a-input"),A=document.querySelector("#root-b-input");j.addEventListener("input",E),A.addEventListener("input",E);let L=document.querySelector("#root-setter");function C(){if(8===s)return;let t=3*Math.random()-1.5,n=3*Math.random()-1.5;o.draggables.add(t,n),l.push([t,n]),s++,window.requestAnimationFrame($)}function S(){for(let t=0;t<s;t++)t<s/2||s%2==1?(l[t][0]=Math.cos(2*Math.PI*2*t/s),l[t][1]=Math.sin(2*Math.PI*2*t/s)):(l[t][0]=Math.cos(2*Math.PI*(2*t+1)/s),l[t][1]=Math.sin(2*Math.PI*(2*t+1)/s)),o.draggables.world_coordinates[t+2]=[l[t][0],l[t][1]];window.requestAnimationFrame($),o.draggables.recalculate_locations()}function E(){0===a?(e[0]=parseFloat(j.value||1),e[1]=parseFloat(A.value||0),o.draggables.world_coordinates[0]=[e[0],e[1]]):1===a?(r[0]=10*parseFloat(j.value||0),r[1]=10*parseFloat(A.value||0),o.draggables.world_coordinates[1]=[r[0],r[1]]):(l[a-2][0]=parseFloat(j.value||0),l[a-2][1]=parseFloat(A.value||0),o.draggables.world_coordinates[1]=[l[a-2][0],l[a-2][1]]),window.requestAnimationFrame($),o.draggables.recalculate_locations()}function I(t,n,o){m=0,w=0,v=0,h=0,g=0,f=0}function P(t,n,e,r,l){o.world_center_x-=e,o.world_center_y-=r,h=-e,g=-r,window.requestAnimationFrame($),o.draggables.recalculate_locations()}function R(t,n,e){Math.sqrt(h*h+g*g)>=z*Math.min(o.world_width,o.world_height)&&(m=h,w=g),Math.abs(f)>=M&&(v=f),window.requestAnimationFrame($)}function W(){if(_>=1){let t=o.input.get_zoomed_world_center(d,u,3*Math.pow(2,i)*_,3*Math.pow(2,i));o.world_width=3*Math.pow(2,i)*_,o.world_height=3*Math.pow(2,i),o.world_center_x=t[0],o.world_center_y=t[1]}else{let t=o.input.get_zoomed_world_center(d,u,3*Math.pow(2,i),3*Math.pow(2,i)/_);o.world_width=3*Math.pow(2,i),o.world_height=3*Math.pow(2,i)/_,o.world_center_x=t[0],o.world_center_y=t[1]}window.requestAnimationFrame($),o.draggables.recalculate_locations()}function H(t,n,o,a){0===t?e=[n,o]:1===t?r=[n,o]:l[t-2]=[n,o],window.requestAnimationFrame($)}function T(t,n,o,s){L.style.opacity=0,setTimeout(()=>{0===(a=t)?(j.value=Math.round(1e3*e[0])/1e3,A.value=Math.round(1e3*e[1])/1e3):1===a?(j.value=Math.round(1e3*r[0])/1e4,A.value=Math.round(1e3*r[1])/1e4):(j.value=Math.round(1e3*l[a-2][0])/1e3,A.value=Math.round(1e3*l[a-2][1])/1e3),L.style.opacity=1},300)}function $(t){let n=t-q;if(q=t,0!==n){o.gl.uniform1f(o.uniforms.aspect_ratio,_),o.gl.uniform1f(o.uniforms.world_center_x,o.world_center_x),o.gl.uniform1f(o.uniforms.world_center_y,o.world_center_y),o.gl.uniform1f(o.uniforms.world_size,Math.min(o.world_height,o.world_width)/2),o.gl.uniform1i(o.uniforms.num_roots,s);for(let t=0;t<s;t++)o.gl.uniform2fv(o.uniforms[`root_${t+1}`],l[t]);o.gl.uniform2fv(o.uniforms.a,e),o.gl.uniform2f(o.uniforms.c,r[0]/10,r[1]/10),o.gl.uniform1f(o.uniforms.brightness_scale,30),o.render.draw_frame(),0===m&&0===w&&0===v||(o.world_center_x+=m,o.world_center_y+=w,m*=b,w*=b,Math.sqrt(m*m+w*w)<p*Math.min(o.world_width,o.world_height)&&(m=0,w=0),i+=v,W(),v*=y,Math.abs(v)<F&&(v=0),window.requestAnimationFrame($),o.draggables.recalculate_locations())}}function B(){o.fullscreen.currently_fullscreen?(_=window.innerWidth/window.innerHeight)>=1?(o.change_canvas_size(c,Math.floor(c/_)),o.world_width=3*Math.pow(2,i)*_,o.world_height=3*Math.pow(2,i)):(o.change_canvas_size(Math.floor(c*_),c),o.world_width=3*Math.pow(2,i),o.world_height=3*Math.pow(2,i)/_):(_=1,o.change_canvas_size(c,c),o.world_width=3*Math.pow(2,i),o.world_height=3*Math.pow(2,i)),window.requestAnimationFrame($)}o.gl.uniform1f(o.uniforms.aspect_ratio,1),window.requestAnimationFrame($),window.addEventListener("resize",B),Page.temporary_handlers.resize.push(B)}();