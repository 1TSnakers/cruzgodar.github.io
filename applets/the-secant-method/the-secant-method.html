<head><title>The Secant Method</title></head>

<div style="height: 5vh"></div>

<noscript>
	<p class="body-text" style="text-align: center">JavaScript is required to use this site and many others. Consider enabling it.</p>
</noscript>



!header The Secant Method;



<main>
	<section>
		<div data-aos="fade-up">
			<p class="body-text"><a href="/applets/newtons-method/newtons-method.html" onclick=Page.Navigation.redirect('/applets/newtons-method/newtons-method.html')>Newton&#x2019;s method</a> is famous for producing beautiful fractals, but as a root-finding algorithm, it leaves a lot to be desired. There are dozens of successors to the method with better root-finding performance, but interestingly, all of them produce less interesting fractals. To find something better, we can turn to the secant method &mdash; an algorithm that predates Newton&#x2019;s method by thousands of years and doesn&#x2019;t even require taking a derivative. Its ability to find roots is markedly worse, and it&#x2019;s for that reason that the fractals it makes are more intricate and interesting. As in the Newton&#x2019;s method applet, the white dots represent the roots and the red and blue dots parameters that modify the algorithm.</p>
		</div>
		
		<div style="height: 10vh"></div>
		
		<div class="text-boxes">
			<div class="text-box-container" data-aos="fade-up">
				<input id="resolution-input" class="text-box no-floating-footer" type="text" value="500" tabindex="1">
				<label for="resolution-input">
					<p class="body-text">Resolution</p>
				</label>
			</div>
		</div>
		
		<div style="height: 10vh"></div>
		
		<div class="text-buttons">
			<div class="focus-on-child" data-aos="zoom-out" data-aos-delay="800" tabindex="1">
				<button class="text-button linked-text-button no-floating-footer" type="button" id="add-marker-button" tabindex="-1">Add Root</button>
			</div>
			
			<div class="focus-on-child" data-aos="zoom-out" tabindex="1">
				<button class="text-button linked-text-button no-floating-footer" type="button" id="spread-markers-button" tabindex="-1">Spread Roots</button>
			</div>
		</div>
		
		<div style="height: 5vh"></div>
		
		<div id="root-setter" class="text-boxes">
			<div class="text-box-container" data-aos="fade-up">
				<input id="root-a-input" class="text-box no-floating-footer" type="text" value="0">
				<label for="root-a-input">
					<p class="body-text">Root \(a\)</p>
				</label>
			</div>
			
			<div class="text-box-container" data-aos="fade-up">
				<input id="root-b-input" class="text-box no-floating-footer" type="text" value="0">
				<label for="root-b-input">
					<p class="body-text">Root \(b\)</p>
				</label>
			</div>
		</div>
		
		<div style="height: 5vh"></div>
		
		<div class="center-content applet-canvas-container" style="height: calc(50vmin + 8px)" data-aos="fade-in" data-aos-delay="1400">
			<canvas id="newtons-method-plot" class="no-floating-footer"></canvas>
			
			<div id="root-selector" class="no-floating-footer"></div>
		</div>
		
		<div style="height: 5vh"></div>
		
		<div class="center-content" data-aos="fade-in" data-aos-delay="1400">
			<div id="fullscreen-message">
				<p class="body-text">Double-click canvas to enter fullscreen</p>
			</div>
		</div>
		
		<div style="height: 5vh"></div>
		
		<p class="body-text center-if-needed">
			<span id="polynomial-label-1"></span>
		</p>
		
		<br>
		
		<p class="body-text center-if-needed">
			<span id="polynomial-label-2"></span>
		</p>
		
		<br>
		
		<p class="body-text center-if-needed">
			<span id="polynomial-label-3"></span>
		</p>
	</section>
	
	
	
	<div style="height: 10vh"></div>
	
	
	
	<section>
		<div class="new-aos-section" data-aos="fade-up">
			<h2 class="section-text">High Resolution Capture</h2>
		</div>
		
		<div style="height: 5vh"></div>
		
		<div class="text-boxes">
			<div class="text-box-container" data-aos="fade-up">
				<input id="dim-input" class="text-box no-floating-footer" type="text" value="2000" tabindex="1">
				<label for="dim-input">
					<p class="body-text">Image Size</p>
				</label>
			</div>
		</div>
		
		<div style="height: 5vh"></div>
		
		<div class="text-buttons">
			<div class="focus-on-child" data-aos="zoom-out" data-aos-delay="600" tabindex="1">
				<button class="text-button no-floating-footer" type="button" id="generate-high-res-plot-button" tabindex="-1">Generate</button>
			</div>
		</div>
	</section>
</main>



<footer>
	<div id="spawn-footer"></div>
</footer>



<script>
	if (typeof Page === "undefined")
	{
		window.location.replace("/index.html?page=" + encodeURIComponent(window.location.pathname));
	}
	
	
	
	Page.settings = 
	{
		"title": "The Secant Method",
		
		"math_page": true,
		
		"small_margins_on_ultrawide": true
	};
	
	Page.load();
</script>.querySelector("#newtons-method-plot").setAttribute("height",o),a.viewport(0,0,e,o),k();let r=document.createElement("a");r.download="newtons-method.png",r.href=document.querySelector("#newtons-method-plot").toDataURL(),r.click(),r.remove(),t=n,Page.Applets.Canvases.is_fullscreen?Page.Layout.aspect_ratio>=1?(e=t,o=Math.floor(t/Page.Layout.aspect_ratio)):(e=Math.floor(t*Page.Layout.aspect_ratio),o=t):(e=t,o=t);document.querySelector("#newtons-method-plot").setAttribute("width",e),document.querySelector("#newtons-method-plot").setAttribute("height",o),a.viewport(0,0,e,o),k()}),document.querySelector("#dim-input").addEventListener("keydown",function(t){13===t.keyCode&&(g=!0,i=!0,s&&(s=!1,window.requestAnimationFrame(k)))}),window.addEventListener("resize",X),Page.temporary_handlers.resize.push(X),Page.Applets.Canvases.to_resize=[document.querySelector("#newtons-method-plot"),document.querySelector("#root-selector")],Page.Applets.Canvases.resize_callback=function(){Page.Applets.Canvases.is_fullscreen?Page.Layout.aspect_ratio>=1?(e=t,o=Math.floor(t/Page.Layout.aspect_ratio)):(e=Math.floor(t*Page.Layout.aspect_ratio),o=t):(e=t,o=t),document.querySelector("#newtons-method-plot").setAttribute("width",e),document.querySelector("#newtons-method-plot").setAttribute("height",o),a.viewport(0,0,e,o),X(),window.requestAnimationFrame(k)},Page.Applets.Canvases.true_fullscreen=!0,Page.Applets.Canvases.set_up_resizer(),setTimeout(function(){let t=C(a,a.VERTEX_SHADER,L),n=C(a,a.FRAGMENT_SHADER,A);P=a.createProgram(),a.attachShader(P,t),a.attachShader(P,n),a.linkProgram(P),a.getProgramParameter(P,a.LINK_STATUS)||(console.log(`Couldn't link shader program: ${a.getShaderInfoLog(shader)}`),a.deleteProgram(P));a.useProgram(P);let r=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,r),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,0,-1,1,0,1,-1,0,1,1,0]),a.STATIC_DRAW),P.position_attribute=a.getAttribLocation(P,"position"),a.enableVertexAttribArray(P.position_attribute),a.vertexAttribPointer(P.position_attribute,3,a.FLOAT,!1,0,0),P.aspect_ratio_x_uniform=a.getUniformLocation(P,"aspect_ratio_x"),P.aspect_ratio_y_uniform=a.getUniformLocation(P,"aspect_ratio_y"),P.box_size_halved_uniform=a.getUniformLocation(P,"box_size_halved"),P.center_x_uniform=a.getUniformLocation(P,"center_x"),P.center_y_uniform=a.getUniformLocation(P,"center_y"),P.num_roots_uniform=a.getUniformLocation(P,"num_roots"),P.root_1_uniform=a.getUniformLocation(P,"root_1"),P.root_2_uniform=a.getUniformLocation(P,"root_2"),P.root_3_uniform=a.getUniformLocation(P,"root_3"),P.root_4_uniform=a.getUniformLocation(P,"root_4"),P.root_5_uniform=a.getUniformLocation(P,"root_5"),P.root_6_uniform=a.getUniformLocation(P,"root_6"),P.root_7_uniform=a.getUniformLocation(P,"root_7"),P.root_8_uniform=a.getUniformLocation(P,"root_8"),P.a_uniform=a.getUniformLocation(P,"a"),P.c_uniform=a.getUniformLocation(P,"c"),P.brightness_scale_uniform=a.getUniformLocation(P,"brightness_scale"),document.querySelector("#newtons-method-plot").setAttribute("width",e),document.querySelector("#newtons-method-plot").setAttribute("height",o),a.viewport(0,0,e,o)},500),setTimeout(X,1e3);const L="\n\t\tattribute vec3 position;\n\t\tvarying vec2 uv;\n\n\t\tvoid main(void)\n\t\t{\n\t\t\tgl_Position = vec4(position, 1.0);\n\n\t\t\t//Interpolate quad coordinates in the fragment shader.\n\t\t\tuv = position.xy;\n\t\t}\n\t",A="\n\t\tprecision highp float;\n\t\t\n\t\tvarying vec2 uv;\n\t\t\n\t\tuniform float aspect_ratio_x;\n\t\tuniform float aspect_ratio_y;\n\t\t\n\t\tuniform float box_size_halved;\n\t\tuniform float center_x;\n\t\tuniform float center_y;\n\t\t\n\t\tuniform int num_roots;\n\t\t\n\t\tuniform vec2 root_1;\n\t\tuniform vec2 root_2;\n\t\tuniform vec2 root_3;\n\t\tuniform vec2 root_4;\n\t\tuniform vec2 root_5;\n\t\tuniform vec2 root_6;\n\t\tuniform vec2 root_7;\n\t\tuniform vec2 root_8;\n\t\t\n\t\tconst vec3 color_1 = vec3(1.0, 0.0, 0.0);\n\t\tconst vec3 color_2 = vec3(0.0, 1.0, 0.0);\n\t\tconst vec3 color_3 = vec3(0.0, 0.0, 1.0);\n\t\tconst vec3 color_4 = vec3(0.0, 1.0, 1.0);\n\t\tconst vec3 color_5 = vec3(1.0, 0.0, 1.0);\n\t\tconst vec3 color_6 = vec3(1.0, 1.0, 0.0);\n\t\tconst vec3 color_7 = vec3(0.5, 0.0, 1.0);\n\t\tconst vec3 color_8 = vec3(1.0, 0.5, 0.0);\n\t\t\n\t\tuniform vec2 a;\n\t\tuniform vec2 c;\n\t\t\n\t\tuniform float brightness_scale;\n\t\t\n\t\tconst float threshhold = .05;\n\t\t\n\t\t\n\t\t\n\t\t//Returns z_1 * z_2.\n\t\tvec2 complex_multiply(vec2 z_1, vec2 z_2)\n\t\t{\n\t\t\treturn vec2(z_1.x * z_2.x - z_1.y * z_2.y, z_1.x * z_2.y + z_1.y * z_2.x);\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t//Returns 1/z.\n\t\tvec2 complex_invert(vec2 z)\n\t\t{\n\t\t\tfloat magnitude = z.x*z.x + z.y*z.y;\n\t\t\t\n\t\t\treturn vec2(z.x / magnitude, -z.y / magnitude);\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t//Returns f(z) for a polynomial f with given roots.\n\t\tvec2 complex_polynomial(vec2 z)\n\t\t{\n\t\t\tvec2 result = vec2(1.0, 0.0);\n\t\t\t\n\t\t\tif (num_roots == 0)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = complex_multiply(result, z - root_1);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif (num_roots == 1)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = complex_multiply(result, z - root_2);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif (num_roots == 2)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = complex_multiply(result, z - root_3);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif (num_roots == 3)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = complex_multiply(result, z - root_4);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif (num_roots == 4)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = complex_multiply(result, z - root_5);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif (num_roots == 5)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = complex_multiply(result, z - root_6);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif (num_roots == 6)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = complex_multiply(result, z - root_7);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif (num_roots == 7)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = complex_multiply(result, z - root_8);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\treturn result;\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t//Approximates f'(z) for a polynomial f with given roots.\n\t\tvec2 complex_derivative(vec2 z)\n\t\t{\n\t\t\treturn 1000.0 * (complex_polynomial(z) - complex_polynomial(z - vec2(.001, 0.0)));\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\tvoid main(void)\n\t\t{\n\t\t\tvec2 z = vec2(uv.x * aspect_ratio_x * box_size_halved + center_x, uv.y / aspect_ratio_y * box_size_halved + center_y);\n\t\t\tvec2 last_z = vec2(0.0, 0.0);\n\t\t\t\n\t\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n\t\t\t\n\t\t\tfor (int iteration = 0; iteration < 100; iteration++)\n\t\t\t{\n\t\t\t\tvec2 temp = complex_multiply(complex_multiply(complex_polynomial(z), complex_multiply(z - last_z, complex_invert(complex_polynomial(z) - complex_polynomial(last_z)))), a) + c;\n\t\t\t\t\n\t\t\t\tlast_z = z;\n\t\t\t\t\n\t\t\t\tz -= temp;\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 1)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_1);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_1);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_1 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 2)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_2);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_2);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_2 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 3)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_3);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_3);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_3 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 4)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_4);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_4);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_4 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 5)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_5);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_5);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_5 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 6)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_6);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_6);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_6 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 7)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_7);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_7);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_7 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 8)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_8);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_8);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_8 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t";let P=null;function C(t,e,o){let n=t.createShader(e);return t.shaderSource(n,o),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)||(console.log(`Couldn't load shader: ${t.getProgramInfoLog(shaderProgram)}`),t.deleteShader(n)),n}function k(){e>=o?(a.uniform1f(P.aspect_ratio_x_uniform,e/o),a.uniform1f(P.aspect_ratio_y_uniform,1)):(a.uniform1f(P.aspect_ratio_x_uniform,1),a.uniform1f(P.aspect_ratio_y_uniform,e/o)),a.uniform1f(P.box_size_halved_uniform,v/2),a.uniform1f(P.center_x_uniform,p),a.uniform1f(P.center_y_uniform,y),a.uniform1i(P.num_roots_uniform,l.length),l.length>=1&&a.uniform2fv(P.root_1_uniform,l[0]),l.length>=2&&a.uniform2fv(P.root_2_uniform,l[1]),l.length>=3&&a.uniform2fv(P.root_3_uniform,l[2]),l.length>=4&&a.uniform2fv(P.root_4_uniform,l[3]),l.length>=5&&a.uniform2fv(P.root_5_uniform,l[4]),l.length>=6&&a.uniform2fv(P.root_6_uniform,l[5]),l.length>=7&&a.uniform2fv(P.root_7_uniform,l[6]),l.length>=8&&a.uniform2fv(P.root_8_uniform,l[7]),a.uniform2fv(P.a_uniform,n),a.uniform2f(P.c_uniform,r[0]/20,r[1]/20),a.uniform1f(P.brightness_scale_uniform,h),a.drawArrays(a.TRIANGLE_STRIP,0,4);let t=new Uint8Array(e*o*4);a.readPixels(0,0,e,o,a.RGBA,a.UNSIGNED_BYTE,t);let u=0;for(let n=0;n<e*o;n++)1!==t[4*n]&&1!==t[4*n+1]&&1!==t[4*n+2]||u++;let c=!1;u<25e-6*e*o*l.length&&h>.25?(h-=.25,c=!0):u>5e-5*e*o*l.length&&(h+=.25,c=!0),g?c?window.requestAnimationFrame(k):(g=!1,s=!0):i?(i=!1,window.requestAnimationFrame(k)):s=!0}function F(t){c=-1;for(let e=0;e<10;e++)if(t.target.id===`root-marker-${e}`){t.preventDefault(),c=e;break}"root-selector"===t.target.id&&(x=!0,w=t.clientX,z=t.clientY)}function E(t){-1!==c&&(document.body.style.WebkitUserSelect="",document.querySelector("#polynomial-label-1").textContent="",document.querySelector("#polynomial-label-2").textContent="",document.querySelector("#polynomial-label-3").textContent="",m=c,Y()),c=-1,x=!1,g=!0,i=!0,s&&(s=!1,window.requestAnimationFrame(k))}function $(t){let a=t.clientX,m=t.clientY,h=a-w,b=m-z;if(w=a,z=m,x)t.preventDefault(),p-=h/_*v,y+=b/_*v,D(),i=!0,s&&(s=!1,window.requestAnimationFrame(k));else if(-1!==c){let a=null,m=null,h=document.querySelector("#root-selector").getBoundingClientRect();if("touchmove"===t.type?(a=t.touches[0].clientY-h.top,m=t.touches[0].clientX-h.left):(a=t.clientY-h.top,m=t.clientX-h.left),a<f&&(a=f),a>_-f&&(a=_-f),m<f&&(m=f),m>d-f&&(m=d-f),c<8){u[c].style.transform=`translate3d(${m-f}px, ${a-f}px, 0)`;let t=0,n=0;e>=o?(t=(m-d/2)/d*v*(e/o)+p,n=-(a-_/2)/_*v+y):(t=(m-d/2)/d*v+p,n=-(a-_/2)/_*v/(e/o)+y),l[c][0]=t,l[c][1]=n}else if(8===c){document.querySelector(".a-marker").style.transform=`translate3d(${m-f}px, ${a-f}px, 0)`;let t=0,r=0;e>=o?(t=(m-d/2)/d*v*(e/o)+p,r=-(a-_/2)/_*v+y):(t=(m-d/2)/d*v+p,r=-(a-_/2)/_*v/(e/o)+y),n[0]=t,n[1]=r}else{document.querySelector(".c-marker").style.transform=`translate3d(${m-f}px, ${a-f}px, 0)`;let t=0,n=0;e>=o?(t=(m-d/2)/d*v*(e/o)+p,n=-(a-_/2)/_*v+y):(t=(m-d/2)/d*v+p,n=-(a-_/2)/_*v/(e/o)+y),r[0]=t,r[1]=n}i=!0,(g||s)&&(g=!1,s=!1,window.requestAnimationFrame(k))}}function U(t){c=-1;for(let e=0;e<10;e++)if(t.target.id===`root-marker-${e}`){t.preventDefault(),c=e;break}"root-selector"===t.target.id&&(x=!0,w=t.touches[0].clientX,z=t.touches[0].clientY)}function R(t){-1!==c&&(document.body.style.WebkitUserSelect="",document.querySelector("#polynomial-label-1").textContent="",document.querySelector("#polynomial-label-2").textContent="",document.querySelector("#polynomial-label-3").textContent="",m=c,Y()),c=-1,x=!1,g=!0,i=!0,s&&(s=!1,window.requestAnimationFrame(k))}function T(t){if(x){t.preventDefault();let n=t.touches[0].clientX,r=t.touches[0].clientY;if(t.touches.length>=2){S=10;let n=t.touches[0].clientX-t.touches[1].clientX,r=t.touches[0].clientY-t.touches[1].clientY,l=Math.sqrt(n*n+r*r),a=l-q;if(q=l,Math.abs(a)>20)return;let i=document.querySelector("#root-selector").getBoundingClientRect(),s=((t.touches[0].clientX+t.touches[1].clientX)/2-i.left)/d,u=((t.touches[0].clientY+t.touches[1].clientY)/2-i.top)/_,c=(s*v-v/2)*e/o+p,m=v/2-u*v+y,f=a/2;b+f>=-300&&b+f<=300&&(b+=f,v=4/Math.pow(1.02,b)),p=c-(s*v-v/2)*e/o,y=m-(v/2-u*v)}else--S<0&&(S=0);let l=n-w,a=r-z;w=n,z=r,p-=l/_*v,y+=a/_*v,D(),i=!0,s&&(s=!1,window.requestAnimationFrame(k))}else if(-1!==c){let a=null,m=null,h=document.querySelector("#root-selector").getBoundingClientRect();if("touchmove"===t.type?(a=t.touches[0].clientY-h.top,m=t.touches[0].clientX-h.left):(a=t.clientY-h.top,m=t.clientX-h.left),a<f&&(a=f),a>_-f&&(a=_-f),m<f&&(m=f),m>d-f&&(m=d-f),c<8){u[c].style.transform=`translate3d(${m-f}px, ${a-f}px, 0)`;let t=0,n=0;e>=o?(t=(m-d/2)/d*v*(e/o)+p,n=-(a-_/2)/_*v+y):(t=(m-d/2)/d*v+p,n=-(a-_/2)/_*v/(e/o)+y),l[c][0]=t,l[c][1]=n}else if(8===c){document.querySelector(".a-marker").style.transform=`translate3d(${m-f}px, ${a-f}px, 0)`;let t=0,r=0;e>=o?(t=(m-d/2)/d*v*(e/o)+p,r=-(a-_/2)/_*v+y):(t=(m-d/2)/d*v+p,r=-(a-_/2)/_*v/(e/o)+y),n[0]=t,n[1]=r}else{document.querySelector(".c-marker").style.transform=`translate3d(${m-f}px, ${a-f}px, 0)`;let t=0,n=0;e>=o?(t=(m-d/2)/d*v*(e/o)+p,n=-(a-_/2)/_*v+y):(t=(m-d/2)/d*v+p,n=-(a-_/2)/_*v/(e/o)+y),r[0]=t,r[1]=n}i=!0,(g||s)&&(g=!1,s=!1,window.requestAnimationFrame(k))}}function j(t){if("root-selector"===document.elementFromPoint(w,z).id||document.elementFromPoint(w,z).classList.contains("root-marker")){t.preventDefault(),(b-=10*Math.sign(t.deltaY))<-300&&(b=-300),b>300&&(b=300);let n=document.querySelector("#root-selector").getBoundingClientRect(),r=(w-n.left)/d,l=(z-n.top)/_,a=(r*v-v/2)*e/o+p,u=v/2-l*v+y;v=3/Math.pow(1.02,b),p=a-(r*v-v/2)*e/o,y=u-(v/2-l*v),D(),i=!0,s&&(g=!1,s=!1,window.requestAnimationFrame(k));try{clearTimeout(M)}catch(t){}M=setTimeout(function(){g=!0,s=!1,window.requestAnimationFrame(k)},500)}}function Y(){m<8?(document.querySelector("#root-a-input").value=Math.round(1e3*l[m][0])/1e3,document.querySelector("#root-b-input").value=Math.round(1e3*l[m][1])/1e3):8===m?(document.querySelector("#root-a-input").value=Math.round(1e3*n[0])/1e3,document.querySelector("#root-b-input").value=Math.round(1e3*n[1])/1e3):(document.querySelector("#root-a-input").value=Math.round(1e5*r[0])/1e5,document.querySelector("#root-b-input").value=Math.round(1e5*r[1])/1e5),document.querySelector("#root-setter").style.pointerEvents="auto",document.querySelector("#root-setter").style.opacity=1}function I(){if(m<8){l[m][0]=parseFloat(document.querySelector("#root-a-input").value)||0,l[m][1]=parseFloat(document.querySelector("#root-b-input").value)||0;let t=0,n=0;e>=o?(t=Math.floor(_*(1-((l[m][1]-y)/v+.5))),n=Math.floor(d*((l[m][0]-p)/(e/o)/v+.5))):(t=Math.floor(_*(1-((l[m][1]-y)*(e/o)/v+.5))),n=Math.floor(d*((l[m][0]-p)/v+.5))),u[m].style.transform=`translate3d(${n-f}px, ${t-f}px, 0)`}else if(8===m){n[0]=parseFloat(document.querySelector("#root-a-input").value)||0,n[1]=parseFloat(document.querySelector("#root-b-input").value)||0;let t=0,r=0;e>=o?(t=Math.floor(_*(1-((n[1]-y)/v+.5))),r=Math.floor(d*((n[0]-p)/(e/o)/v+.5))):(t=Math.floor(_*(1-((n[1]-y)*(e/o)/v+.5))),r=Math.floor(d*((n[0]-p)/v+.5))),document.querySelector(".a-marker").style.transform=`translate3d(${r-f}px, ${t-f}px, 0)`}else{r[0]=parseFloat(document.querySelector("#root-a-input").value)||0,r[1]=parseFloat(document.querySelector("#root-b-input").value)||0;let t=0,n=0;e>=o?(t=Math.floor(_*(1-((r[1]-y)/v+.5))),n=Math.floor(d*((r[0]-p)/(e/o)/v+.5))):(t=Math.floor(_*(1-((r[1]-y)*(e/o)/v+.5))),n=Math.floor(d*((r[0]-p)/v+.5))),document.querySelector(".c-marker").style.transform=`translate3d(${n-f}px, ${t-f}px, 0)`}window.requestAnimationFrame(k)}function X(){d=document.querySelector("#root-selector").offsetWidth,_=document.querySelector("#root-selector").offsetHeight,D()}function D(){for(let t=0;t<l.length;t++){let n=0,r=0;e>=o?(n=Math.floor(_*(1-((l[t][1]-y)/v+.5))),r=Math.floor(d*((l[t][0]-p)/(e/o)/v+.5))):(n=Math.floor(_*(1-((l[t][1]-y)*(e/o)/v+.5))),r=Math.floor(d*((l[t][0]-p)/v+.5))),u[t].style.transform=`translate3d(${r-f}px, ${n-f}px, 0)`}try{let t=0,r=0;e>=o?(t=Math.floor(_*(1-((n[1]-y)/v+.5))),r=Math.floor(d*((n[0]-p)/(e/o)/v+.5))):(t=Math.floor(_*(1-((n[1]-y)*(e/o)/v+.5))),r=Math.floor(d*((n[0]-p)/v+.5))),document.querySelector(".a-marker").style.transform=`translate3d(${r-f}px, ${t-f}px, 0)`}catch(t){}try{let t=0,n=0;e>=o?(t=Math.floor(_*(1-((r[1]-y)/v+.5))),n=Math.floor(d*((r[0]-p)/(e/o)/v+.5))):(t=Math.floor(_*(1-((r[1]-y)*(e/o)/v+.5))),n=Math.floor(d*((r[0]-p)/v+.5))),document.querySelector(".c-marker").style.transform=`translate3d(${n-f}px, ${t-f}px, 0)`}catch(t){}}}();