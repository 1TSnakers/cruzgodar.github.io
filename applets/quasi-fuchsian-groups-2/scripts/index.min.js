"use strict";!async function(){await Site.load_applet("vector-fields");let e=new VectorField(Page.element.querySelector("#output-canvas"));function t(){let t=o.value,n=parseInt(u.value||500),l=Math.max(parseInt(d.value||5e3),100),r=parseFloat(i.value||1)/75;e.run(t,n,l,r)}function n(){let t=parseInt(u.value||500),n=Math.max(parseInt(d.value||5e3),100),l=parseFloat(i.value||1)/75;e.generate_new_field(t,n,l)}e.load_promise.then(()=>t());let l={none:"",div:"(x, y)",curl:"(-y, x)",clockwork:"(sin(y), sin(x + PI))",df:"(1.0, sin(y) / (x*x + 1.0))",cross:"(sin(y / 2.5), tan(x / 2.5))"},r=Page.element.querySelector("#example-selector-dropdown");r.addEventListener("input",()=>{"none"!==r.value&&(o.value=l[r.value],t())});let o=Page.element.querySelector("#code-textarea");o.addEventListener("keydown",e=>{13===e.keyCode&&(e.preventDefault(),t())});let a=Page.element.querySelector("#generate-button");a.addEventListener("click",t);let u=Page.element.querySelector("#resolution-input");u.addEventListener("input",n);let d=Page.element.querySelector("#max-particles-input");d.addEventListener("input",n);let i=Page.element.querySelector("#speed-input");i.addEventListener("input",()=>{let t=parseFloat(i.value||1)/75;e.wilson_update.gl.useProgram(e.wilson_update.render.shader_programs[0]),e.wilson_update.gl.uniform1f(e.wilson_update.uniforms.dt[0],t),e.wilson_update.gl.useProgram(e.wilson_update.render.shader_programs[1]),e.wilson_update.gl.uniform1f(e.wilson_update.uniforms.dt[1],t),e.wilson_update.gl.useProgram(e.wilson_update.render.shader_programs[2]),e.wilson_update.gl.uniform1f(e.wilson_update.uniforms.dt[2],t),e.wilson_update.gl.useProgram(e.wilson_update.render.shader_programs[3]),e.wilson_update.gl.uniform1f(e.wilson_update.uniforms.dt[3],t)});let s=Page.element.querySelector("#download-button");s.addEventListener("click",()=>e.wilson.download_frame("a-vector-field.png")),Page.show()}();