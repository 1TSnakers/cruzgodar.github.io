import{Applet}from"/scripts/src/applets.mjs";class WilsonsAlgorithm extends Applet{webWorker=null;constructor(e){super(e);this.wilson=new Wilson(e,{renderer:"cpu",canvasWidth:1e3,canvasHeight:1e3,useFullscreen:!0,useFullscreenButton:!0,enterFullscreenButtonIconPath:"/graphics/general-icons/enter-fullscreen.png",exitFullscreenButtonIconPath:"/graphics/general-icons/exit-fullscreen.png"})}run(e,t,s,r=!1){let i=null;var n=s?e:2*e+1,l=Math.min(window.innerWidth,window.innerHeight);const o=Math.ceil(l/n);this.wilson.changeCanvasSize(n*o,n*o),this.wilson.ctx.fillStyle="rgb(0, 0, 0)",this.wilson.ctx.fillRect(0,0,n*o,n*o);try{this.webWorker.terminate()}catch(e){}this.webWorker=new Worker("/applets/wilsons-algorithm/scripts/worker.min.js"),this.workers.push(this.webWorker),this.webWorker.onmessage=e=>{clearTimeout(i),this.wilson.ctx.fillStyle=e.data[4],this.wilson.ctx.fillRect(e.data[0]*o,e.data[1]*o,e.data[2]*o,e.data[3]*o)},r||(i=setTimeout(()=>{try{this.webWorker.terminate()}catch(e){}this.run(e,t,s,!0)},3e3)),this.webWorker.postMessage([e,t,s,r])}}export{WilsonsAlgorithm};