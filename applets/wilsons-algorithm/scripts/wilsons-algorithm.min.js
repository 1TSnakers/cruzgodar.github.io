!function(){"use strict";let e=null,t=null,r=null,o=document.querySelector("#grid-graph").getContext("2d"),l=null;1===url_vars.contrast&&(1===url_vars.theme?document.querySelector("#grid-graph").style.borderColor="rgb(192, 192, 192)":document.querySelector("#grid-graph").style.borderColor="rgb(64, 64, 64)"),document.querySelector("#generate-button").addEventListener("click",function(){!function n(c){e=parseInt(document.querySelector("#dim-input").value||50);let s=document.querySelector("#toggle-maximum-speed-checkbox").checked;t=document.querySelector("#no-borders-checkbox").checked;let a=null;let i=2*e+1;t&&(i=e);let u=.9*Math.min(window_width,window_height);r=Math.ceil(u/i);t?(document.querySelector("#grid-graph").setAttribute("width",e*r),document.querySelector("#grid-graph").setAttribute("height",e*r),o.fillStyle="rgb(0, 0, 0)",o.fillRect(0,0,e*r,e*r)):(document.querySelector("#grid-graph").setAttribute("width",(2*e+1)*r),document.querySelector("#grid-graph").setAttribute("height",(2*e+1)*r),o.fillStyle="rgb(0, 0, 0)",o.fillRect(0,0,(2*e+1)*r,(2*e+1)*r));if(!c)try{document.querySelector("#progress-bar").style.opacity=0,setTimeout(function(){document.querySelector("#progress-bar").style.marginTop=0,document.querySelector("#progress-bar").style.marginBottom=0},600)}catch(e){}document.querySelector("#progress-bar span").style.width=0;try{l.terminate()}catch(e){}l=DEBUG?new Worker("/applets/wilsons-algorithm/scripts/worker.js"):new Worker("/applets/wilsons-algorithm/scripts/worker.min.js");temporary_web_workers.push(l);l.onmessage=function(e){return"log"===e.data[0]?(clearTimeout(a),void console.log(...e.data.slice(1))):"progress"===e.data[0]?(document.querySelector("#progress-bar span").style.width=e.data[1]+"%",void(100===e.data[1]&&setTimeout(function(){document.querySelector("#progress-bar").style.opacity=0,setTimeout(function(){document.querySelector("#progress-bar").style.marginTop=0,document.querySelector("#progress-bar").style.marginBottom=0,document.querySelector("#progress-bar span").style.width=0},300)},600))):(o.fillStyle=e.data[4],void o.fillRect(e.data[0]*r,e.data[1]*r,e.data[2]*r,e.data[3]*r))};l.postMessage([e,s,t,c]);!1===c&&(a=setTimeout(function(){console.log("Didn't draw anything within three seconds -- attempting to reverse-generate a skeleton."),l.terminate(),document.querySelector("#progress-bar").style.marginTop="5vh",document.querySelector("#progress-bar").style.marginBottom="5vh",setTimeout(function(){document.querySelector("#progress-bar").style.opacity=1},600),n(!0)},3e3))}(!1)}),document.querySelector("#download-button").addEventListener("click",function(){let e=document.createElement("a");e.download="wilsons-algorithm.png",e.href=document.querySelector("#grid-graph").toDataURL(),e.click(),e.remove()})}();