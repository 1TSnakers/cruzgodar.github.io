!function(){"use strict";let e=new Wilson(Page.element.querySelector("#output-canvas"),{renderer:"cpu",canvas_width:1e3,canvas_height:1e3,use_fullscreen:!0,use_fullscreen_button:!0,enter_fullscreen_button_icon_path:"/graphics/general-icons/enter-fullscreen.png",exit_fullscreen_button_icon_path:"/graphics/general-icons/exit-fullscreen.png"}),t=null,n=null,a=null,l=null;Page.element.querySelector("#generate-button").addEventListener("click",(()=>{g(!1)}));let r=Page.element.querySelector("#grid-size-input");r.addEventListener("keydown",(e=>{13===e.keyCode&&g(!1)})),Page.element.querySelector("#download-button").addEventListener("click",(()=>{e.download_frame("wilsons-algorithm.png")}));let i=Page.element.querySelector("#toggle-maximum-speed-checkbox"),o=Page.element.querySelector("#no-borders-checkbox"),s=Page.element.querySelector("#progress-bar"),c=Page.element.querySelector("#progress-bar span");function g(m){t=parseInt(r.value||50);let u=i.checked;n=o.checked;let d=null,p=2*t+1;n&&(p=t);let y=Math.min(window.innerWidth,window.innerHeight);if(a=Math.ceil(y/p),n?(e.change_canvas_size(t*a,t*a),e.ctx.fillStyle="rgb(0, 0, 0)",e.ctx.fillRect(0,0,t*a,t*a)):(e.change_canvas_size((2*t+1)*a,(2*t+1)*a),e.ctx.fillStyle="rgb(0, 0, 0)",e.ctx.fillRect(0,0,(2*t+1)*a,(2*t+1)*a)),!m)try{s.style.opacity=0,setTimeout((()=>{s.style.marginTop=0,s.style.marginBottom=0,s.style.height=0}),600)}catch(e){}Page.element.querySelector("#progress-bar span").insertAdjacentHTML("afterend","<span></span>"),Page.element.querySelector("#progress-bar span").remove();try{l.terminate()}catch(e){}l=DEBUG?new Worker("/applets/wilsons-algorithm/scripts/worker.js"):new Worker("/applets/wilsons-algorithm/scripts/worker.min.js"),Page.temporary_web_workers.push(l),l.onmessage=function(t){return"log"===t.data[0]?(clearTimeout(d),void console.log(...t.data.slice(1))):"progress"===t.data[0]?(c.style.width=t.data[1]+"%",void(100===t.data[1]&&setTimeout((()=>{s.style.opacity=0,setTimeout((()=>{s.style.marginTop=0,s.style.marginBottom=0,s.style.height=0}),Site.opacity_animation_time)}),2*Site.opacity_animation_time))):(e.ctx.fillStyle=t.data[4],void e.ctx.fillRect(t.data[0]*a,t.data[1]*a,t.data[2]*a,t.data[3]*a))},l.postMessage([t,u,n,m]),m||(d=setTimeout((()=>{console.log("Didn't draw anything within three seconds -- attempting to reverse-generate a skeleton."),l.terminate(),s.style.marginTop="10vh",s.style.marginBottom="-5vh",s.style.height="5vh",setTimeout((()=>{s.style.opacity=1}),2*Site.opacity_animation_time),g(!0)}),3e3))}Page.show()}();