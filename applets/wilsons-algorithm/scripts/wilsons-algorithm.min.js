!function(){"use strict";let e=null,t=null,o=null,r=document.querySelector("#output-canvas").getContext("2d",{alpha:!1}),n=null;function c(a){e=parseInt(document.querySelector("#dim-input").value||50);let u=document.querySelector("#toggle-maximum-speed-checkbox").checked;t=document.querySelector("#no-borders-checkbox").checked;let s=null,l=2*e+1;t&&(l=e);let i=.8*Math.min(window_width,window_height);if(o=Math.ceil(i/l),t?(document.querySelector("#output-canvas").setAttribute("width",e*o),document.querySelector("#output-canvas").setAttribute("height",e*o),r.fillStyle="rgb(0, 0, 0)",r.fillRect(0,0,e*o,e*o)):(document.querySelector("#output-canvas").setAttribute("width",(2*e+1)*o),document.querySelector("#output-canvas").setAttribute("height",(2*e+1)*o),r.fillStyle="rgb(0, 0, 0)",r.fillRect(0,0,(2*e+1)*o,(2*e+1)*o)),!a)try{document.querySelector("#progress-bar").style.opacity=0,setTimeout((function(){document.querySelector("#progress-bar").style.marginTop=0,document.querySelector("#progress-bar").style.marginBottom=0}),600)}catch(e){}document.querySelector("#progress-bar span").insertAdjacentHTML("afterend","<span></span>"),document.querySelector("#progress-bar span").remove();try{n.terminate()}catch(e){}n=DEBUG?new Worker("/applets/wilsons-algorithm/scripts/worker.js"):new Worker("/applets/wilsons-algorithm/scripts/worker.min.js"),temporary_web_workers.push(n),n.onmessage=function(e){return"log"===e.data[0]?(clearTimeout(s),void console.log(...e.data.slice(1))):"progress"===e.data[0]?(document.querySelector("#progress-bar span").style.width=e.data[1]+"%",void(100===e.data[1]&&setTimeout((function(){document.querySelector("#progress-bar").style.opacity=0,setTimeout((function(){document.querySelector("#progress-bar").style.marginTop=0,document.querySelector("#progress-bar").style.marginBottom=0}),300)}),600))):(r.fillStyle=e.data[4],void r.fillRect(e.data[0]*o,e.data[1]*o,e.data[2]*o,e.data[3]*o))},n.postMessage([e,u,t,a]),!1===a&&(s=setTimeout((function(){console.log("Didn't draw anything within three seconds -- attempting to reverse-generate a skeleton."),n.terminate(),document.querySelector("#progress-bar").style.marginTop="5vh",document.querySelector("#progress-bar").style.marginBottom="5vh",setTimeout((function(){document.querySelector("#progress-bar").style.opacity=1}),600),c(!0)}),3e3))}document.querySelector("#generate-button").addEventListener("click",(function(){c(!1)})),document.querySelector("#dim-input").addEventListener("keydown",(function(e){13===e.keyCode&&c(!1)})),document.querySelector("#download-button").addEventListener("click",(function(){let e=document.createElement("a");e.download="wilsons-algorithm.png",e.href=document.querySelector("#output-canvas").toDataURL(),e.click(),e.remove()})),applet_canvases_to_resize=[document.querySelector("#output-canvas")],set_up_canvas_resizer()}();