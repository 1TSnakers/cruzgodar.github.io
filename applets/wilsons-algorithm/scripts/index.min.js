!function(){function k(g){b=parseInt(l.value||50);let q=p.checked;h=r.checked;let m=null,n=2*b+1;h&&(n=b);a=Math.ceil(Math.min(window.innerWidth,window.innerHeight)/n);h?(e.changeCanvasSize(b*a,b*a),e.ctx.fillStyle="rgb(0, 0, 0)",e.ctx.fillRect(0,0,b*a,b*a)):(e.changeCanvasSize((2*b+1)*a,(2*b+1)*a),e.ctx.fillStyle="rgb(0, 0, 0)",e.ctx.fillRect(0,0,(2*b+1)*a,(2*b+1)*a));if(!g)try{c.style.opacity=0,setTimeout(()=>{c.style.marginTop=0;c.style.marginBottom=0;c.style.height=0},600)}catch(d){}$("#progress-bar span").insertAdjacentHTML("afterend",
"<span></span>");$("#progress-bar span").remove();try{f.terminate()}catch(d){}f=DEBUG?new Worker("/applets/wilsons-algorithm/scripts/worker.js"):new Worker("/applets/wilsons-algorithm/scripts/worker.min.js");Page.temporaryWebWorkers.push(f);f.onmessage=function(d){"log"===d.data[0]?(clearTimeout(m),console.log(...d.data.slice(1))):"progress"===d.data[0]?(t.style.width=d.data[1]+"%",100===d.data[1]&&setTimeout(()=>{c.style.opacity=0;setTimeout(()=>{c.style.marginTop=0;c.style.marginBottom=0;c.style.height=
0},Site.opacityAnimationTime)},2*Site.opacityAnimationTime)):(e.ctx.fillStyle=d.data[4],e.ctx.fillRect(d.data[0]*a,d.data[1]*a,d.data[2]*a,d.data[3]*a))};f.postMessage([b,q,h,g]);g||(m=setTimeout(()=>{console.log("Didn't draw anything within three seconds -- attempting to reverse-generate a skeleton.");f.terminate();c.style.marginTop="10vh";c.style.marginBottom="-5vh";c.style.height="5vh";setTimeout(()=>{c.style.opacity=1},2*Site.opacityAnimationTime);k(!0)},3E3))}let e=new Wilson($("#output-canvas"),
{renderer:"cpu",canvasWidth:1E3,canvasHeight:1E3,useFullscreen:!0,useFullscreenButton:!0,enterFullscreenButtonIconPath:"/graphics/general-icons/enter-fullscreen.png",exitFullscreenButtonIconPath:"/graphics/general-icons/exit-fullscreen.png"}),b=null,h=null,a=null,f=null;$("#generate-button").addEventListener("click",()=>{k(!1)});let l=$("#grid-size-input");l.addEventListener("keydown",g=>{13===g.keyCode&&k(!1)});$("#download-button").addEventListener("click",()=>{e.downloadFrame("wilsons-algorithm.png")});
let p=$("#toggle-maximum-speed-checkbox"),r=$("#no-borders-checkbox"),c=$("#progress-bar"),t=$("#progress-bar span");Page.show()}();
