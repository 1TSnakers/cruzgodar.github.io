!function(){let e=null,t=document.querySelector("#sandpile-graph").getContext("2d");1==url_vars.contrast&&(1==url_vars.theme?document.querySelector("#sandpile-graph").style.borderColor="rgb(192, 192, 192)":document.querySelector("#sandpile-graph").style.borderColor="rgb(64, 64, 64)"),document.querySelector("#generate-button").addEventListener("click",function(){if(o)return void console.log("Worker is busy -- refusing request");o=!0;let n=parseInt(document.querySelector("#num-grains-input").value||1e4),l=document.querySelector("#toggle-maximum-speed-checkbox").checked;(e=Math.floor(Math.sqrt(n)))%2==0&&e++;document.querySelector("#sandpile-graph").setAttribute("width",5*e),document.querySelector("#sandpile-graph").setAttribute("height",5*e),t.fillStyle="rgb(0, 0, 0)",t.fillRect(0,0,5*e,5*e),r.postMessage([e,n,l])}),document.querySelector("#download-button").addEventListener("click",function(){window.open(document.querySelector("#sandpile-graph").toDataURL(),"_blank")});let r=null,o=!1;r=DEBUG?new Worker("/applets/abelian-sandpiles/scripts/worker.js"):new Worker("/applets/abelian-sandpiles/scripts/worker.min.js"),temporary_web_workers.push(r),r.onmessage=function(e){"done"==e.data[0]?o=!1:(t.fillStyle=e.data[2],t.fillRect(5*e.data[0],5*e.data[1],5,5))}}();