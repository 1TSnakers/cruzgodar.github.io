import{showPage}from"../../../scripts/src/loadPage.min.js";import{AbelianSandpile}from"./class.min.js";import{DownloadButton,GenerateButton}from"/scripts/src/buttons.min.js";import{$}from"/scripts/src/main.min.js";import{siteSettings}from"/scripts/src/settings.min.js";import{TextBox}from"/scripts/src/textBoxes.min.js";export default function(){const n=new AbelianSandpile({canvas:$("#output-canvas")}),t=new TextBox({element:$("#resolution-input"),name:"Grid Size",value:319,minValue:10,maxValue:2e3,onEnter:e}),a=new TextBox({element:$("#center-grains-input"),name:"Center Grains",value:1e5,minValue:0,maxValue:1e6,onEnter:e}),o=new TextBox({element:$("#surrounding-grains-input"),name:"Surrounding Grains",value:0,minValue:0,maxValue:8,onEnter:e}),i=new TextBox({element:$("#computations-per-frame-input"),name:"Computation Speed",value:10,minValue:1,maxValue:100,onEnter:e});function e(){var e=(e=Math.max(t.value,Math.floor(Math.sqrt(a.value))+2))+1-e%2;t.setValue(e),n.run({resolution:t.value*siteSettings.resolutionMultiplier,numGrains:a.value,floodGrains:o.value,computationsPerFrame:i.value})}new GenerateButton({element:$("#generate-button"),onClick:e}),new DownloadButton({element:$("#download-button"),wilson:n.wilson,filename:"an-abelian-sandpile.png"}),showPage()}