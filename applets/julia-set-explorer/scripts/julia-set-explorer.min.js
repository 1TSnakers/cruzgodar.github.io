!function(){let e=0,t=0,o=75,r=500,n=25,u=50,l=100,c=[],i=!1;function a(r,n,u,l,i){c=[];for(let e=0;e<u;e++)c[e]=[];let a=null,s=0;0==i?(document.querySelector("#julia-set").setAttribute("width",u),document.querySelector("#julia-set").setAttribute("height",u),a=document.querySelector("#julia-set").getContext("2d"),s=e):(document.querySelector("#high-res-julia-set").setAttribute("width",u),document.querySelector("#high-res-julia-set").setAttribute("height",u),a=document.querySelector("#high-res-julia-set").getContext("2d"),s=t);for(let e=0;e<u/2;e++)d(e,r,n,u,l);let m=c.flat().sort(function(e,t){return e-t}),y=0;y=u==o?m[Math.round(.9965*m.length)-1]:m[Math.round(.9999*m.length)-1];for(let e=0;e<u;e++)for(let t=0;t<u;t++)c[e][t]=c[e][t]/y*255,a.fillStyle="rgb(0,"+c[e][t]+","+c[e][t]+")",a.fillRect(t,e,1,1);a.scale(s/u,s/u),i&&function(e,t){try{document.querySelector("#download-button").style.opacity=0}catch(e){}setTimeout(function(){try{document.querySelector("#download-button").remove()}catch(e){}let o=document.querySelector("#high-res-julia-set").toDataURL(),r="";0!=e?(r=document.querySelector("#a-input").value,t>0?r+=" + "+document.querySelector("#b-input").value+"i":t<0&&(r+=" - "+document.querySelector("#b-input").value.substr(1)+"i")):r=0!=t?document.querySelector("#b-input").value+"i":"0",document.querySelector("#download-location").insertAdjacentHTML("afterend",`\n\t\t\t\t<div id="download-button" class="animated-opacity">\n\t\t\t\t\t<a href="${o}" download="${r}.png" class="real-link">\n\t\t\t\t\t\t<button class="text-button" type="button" onclick="">Download Image</button>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`),document.querySelector("#download-button").style.opacity=1},300)}(r,n)}function d(e,t,o,r,n){for(let u=0;u<r+1;u++){let l=(u-r/2)/r*4,i=-(e-r/2)/r*4,a=Math.exp(-Math.sqrt(l*l+i*i)),d=0;for(d=0;d<n;d++){let e=2*l*i+o;if(l=l*l-i*i+t,i=e,a+=Math.exp(-Math.sqrt(l*l+i*i)),l*l+i*i>4)break}d==n&&(a=0),c[e][u]=a,c[r-e-1][r-u]=a}}function s(){e=document.querySelector("#julia-set").offsetWidth,t=document.querySelector("#high-res-julia-set").offsetWidth}1==url_vars.contrast&&(1==url_vars.theme?(document.querySelector("#mandelbrot-set").style.borderColor="rgb(192, 192, 192)",document.querySelector("#julia-set").style.borderColor="rgb(192, 192, 192)",document.querySelector("#high-res-julia-set").style.borderColor="rgb(192, 192, 192)"):(document.querySelector("#mandelbrot-set").style.borderColor="rgb(64, 64, 64)",document.querySelector("#julia-set").style.borderColor="rgb(64, 64, 64)",document.querySelector("#high-res-julia-set").style.borderColor="rgb(64, 64, 64)")),document.querySelector("#generate-button").addEventListener("click",function(){let e=parseFloat(document.querySelector("#a-input").value)||0,t=parseFloat(document.querySelector("#b-input").value)||0,o=parseFloat(document.querySelector("#dim-input").value)||1e3;a(e,t,o,l,!0)}),e=document.querySelector("#julia-set").offsetWidth,t=document.querySelector("#high-res-julia-set").offsetWidth,window.addEventListener("resize",s),temporary_handlers.resize.push(s),setTimeout(s,1e3),hasTouch()?function(){let t=0,l=0;document.querySelector("#instructions").innerHTML='Drag along the Mandelbrot set to preview the corresponding Julia set, and release to generate a higher-resolution image. For more information on Mandelbrot and Julia sets, have a look at <a href="/blog/4/a-taste-of-chaos.html" onclick="redirect(\'/blog/4/a-taste-of-chaos.html\')">this blog post</a>.',document.querySelector("#instructions a").addEventListener("click",function(e){e.preventDefault()}),document.querySelector("#mandelbrot-set").addEventListener("touchmove",function(r){r.preventDefault();let u=r.touches[0].clientX-document.querySelector("#mandelbrot-set").getBoundingClientRect().left,c=r.touches[0].clientY-document.querySelector("#mandelbrot-set").getBoundingClientRect().top;t=u,l=c;let i=3*(u/e-.5)-.75,d=3*((e-c)/e-.5);a(i,d,o,n,!1)},!1),document.querySelector("#mandelbrot-set").addEventListener("touchend",function(o){o.preventDefault();let n=3*(t/e-.5)-.75,c=3*((e-l)/e-.5);a(n,c,r,u,!1),document.querySelector("#a-input").value=Math.round(1e6*n)/1e6,document.querySelector("#b-input").value=Math.round(1e6*c)/1e6,document.querySelector("#dim-input").value=1e3},!1)}():(document.querySelector("#mandelbrot-set").addEventListener("mousemove",function(t){if(0==i){let r=t.clientX-document.querySelector("#mandelbrot-set").getBoundingClientRect().left,u=t.clientY-document.querySelector("#mandelbrot-set").getBoundingClientRect().top,l=3*(r/e-.5)-.75,c=3*((e-u)/e-.5);a(l,c,o,n,!1)}}),document.querySelector("#mandelbrot-set").addEventListener("click",function(t){let o=t.clientX-document.querySelector("#mandelbrot-set").getBoundingClientRect().left,n=t.clientY-document.querySelector("#mandelbrot-set").getBoundingClientRect().top,l=3*(o/e-.5)-.75,c=3*((e-n)/e-.5);a(l,c,r,u,!1),document.querySelector("#a-input").value=Math.round(1e6*l)/1e6,document.querySelector("#b-input").value=Math.round(1e6*c)/1e6,document.querySelector("#dim-input").value=1e3,i=!0}),document.querySelector("#mandelbrot-set").addEventListener("mouseleave",function(e){i=!1}))}();