!function(){"use strict";let e=0,t=0,o=0,r=0,n=100,u=500,l=25,c=50,i=200,a=[],d=[],s=!1;1===url_vars.contrast&&(1===url_vars.theme?(document.querySelector("#mandelbrot-set").style.borderColor="rgb(192, 192, 192)",document.querySelector("#julia-set").style.borderColor="rgb(192, 192, 192)",document.querySelector("#high-res-julia-set").style.borderColor="rgb(192, 192, 192)"):(document.querySelector("#mandelbrot-set").style.borderColor="rgb(64, 64, 64)",document.querySelector("#julia-set").style.borderColor="rgb(64, 64, 64)",document.querySelector("#high-res-julia-set").style.borderColor="rgb(64, 64, 64)")),document.querySelector("#generate-button").addEventListener("click",y);let m=document.querySelectorAll("#a-input, #b-input, #dim-input");for(let e=0;e<m.length;e++)m[e].addEventListener("keydown",function(e){13===e.keyCode&&y()});function h(u,l,c,i,s){d=[];for(let e=0;e<c;e++)d[e]=[];let m=null,h=0;!1===s?(document.querySelector("#julia-set").setAttribute("width",c),document.querySelector("#julia-set").setAttribute("height",c),m=document.querySelector("#julia-set").getContext("2d"),h=o):(document.querySelector("#high-res-julia-set").setAttribute("width",c),document.querySelector("#high-res-julia-set").setAttribute("height",c),m=document.querySelector("#high-res-julia-set").getContext("2d"),h=r,e=u,t=l);for(let e=0;e<c/2;e++)g(e,u,l,c,i);let y=d.flat().sort(function(e,t){return e-t}),f=0;if(c===n){a.push(y[Math.round(.999*y.length)-1]),a.length>10&&a.shift(),f=0;for(let e=0;e<a.length;e++)f+=a[e];f/=a.length}else f=y[Math.round(.9999*y.length)-1];for(let e=0;e<c;e++)d[e]=d[e].map(e=>e/f*255);let q=m.getImageData(0,0,c,c),b=q.data;for(let e=0;e<c;e++)for(let t=0;t<c;t++){let o=4*e*c+4*t;b[o]=0,b[o+1]=d[e][t],b[o+2]=d[e][t],b[o+3]=255}m.putImageData(q,0,0)}function g(e,t,o,r,n){for(let u=0;u<r+1;u++){let l=(u-r/2)/r*4,c=-(e-r/2)/r*4,i=Math.exp(-Math.sqrt(l*l+c*c)),a=0;for(a=0;a<n;a++){let e=2*l*c+o;if(l=l*l-c*c+t,c=e,i+=Math.exp(-Math.sqrt(l*l+c*c)),l*l+c*c>4)break}a===n&&(i=0),d[e][u]=i,d[r-e-1][r-u]=i}}function y(){h(parseFloat(document.querySelector("#a-input").value)||0,parseFloat(document.querySelector("#b-input").value)||0,parseFloat(document.querySelector("#dim-input").value)||1e3,i,!0)}function f(){o=document.querySelector("#julia-set").offsetWidth,r=document.querySelector("#high-res-julia-set").offsetWidth}document.querySelector("#download-button").addEventListener("click",function(){let o=document.createElement("a");o.download=t<0?e+" - "+-t+"i.png":e+" + "+t+"i.png";o.href=document.querySelector("#high-res-julia-set").toDataURL(),o.click(),o.remove()}),o=document.querySelector("#julia-set").offsetWidth,r=document.querySelector("#high-res-julia-set").offsetWidth,window.addEventListener("resize",f),temporary_handlers.resize.push(f),setTimeout(f,1e3),hasTouch()?function(){let e=0,t=0;document.querySelector("#instructions").innerHTML='Drag along the Mandelbrot set to preview the corresponding Julia set, and release to generate a higher-resolution image. For more information on Mandelbrot and Julia sets, have a look at <a href="/blog/4/a-taste-of-chaos.html" onclick="redirect(\'/blog/4/a-taste-of-chaos.html\')">this blog post</a>.',document.querySelector("#instructions a").addEventListener("click",function(e){e.preventDefault()}),document.querySelector("#mandelbrot-set").addEventListener("touchmove",function(r){r.preventDefault();let u=r.touches[0].clientX-document.querySelector("#mandelbrot-set").getBoundingClientRect().left,c=r.touches[0].clientY-document.querySelector("#mandelbrot-set").getBoundingClientRect().top;e=u,t=c;let i=3*(u/o-.5)-.75,a=3*((o-c)/o-.5);h(i,a,n,l,!1)},!1),document.querySelector("#mandelbrot-set").addEventListener("touchend",function(r){r.preventDefault();let n=3*(e/o-.5)-.75,l=3*((o-t)/o-.5);h(n,l,u,c,!1),document.querySelector("#a-input").value=Math.round(1e6*n)/1e6,document.querySelector("#b-input").value=Math.round(1e6*l)/1e6},!1)}():(document.querySelector("#mandelbrot-set").addEventListener("mousemove",function(e){if(!1===s){let t=e.clientX-document.querySelector("#mandelbrot-set").getBoundingClientRect().left,r=e.clientY-document.querySelector("#mandelbrot-set").getBoundingClientRect().top,u=3*(t/o-.5)-.75,c=3*((o-r)/o-.5);h(u,c,n,l,!1)}}),document.querySelector("#mandelbrot-set").addEventListener("click",function(e){let t=e.clientX-document.querySelector("#mandelbrot-set").getBoundingClientRect().left,r=e.clientY-document.querySelector("#mandelbrot-set").getBoundingClientRect().top,n=3*(t/o-.5)-.75,l=3*((o-r)/o-.5);h(n,l,u,c,!1),document.querySelector("#a-input").value=Math.round(1e6*n)/1e6,document.querySelector("#b-input").value=Math.round(1e6*l)/1e6,s=!0}),document.querySelector("#mandelbrot-set").addEventListener("mouseleave",function(e){s=!1}))}();