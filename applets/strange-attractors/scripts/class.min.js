class StrangeAttractor extends Applet{webWorker=null;image=[];brightnessScale=10;constructor(a){super(a);this.wilson=new Wilson(a,{renderer:"cpu",canvasWidth:1E3,canvasHeight:1E3,useFullscreen:!0,useFullscreenButton:!0,enterFullscreenButtonIconPath:"/graphics/general-icons/enter-fullscreen.png",exitFullscreenButtonIconPath:"/graphics/general-icons/exit-fullscreen.png"})}run(a,f,g,h,k){this.wilson.changeCanvasSize(a,a);this.wilson.ctx.fillStyle="rgb(0, 0, 0)";this.wilson.ctx.fillRect(0,0,a,a);this.image=
Array(a*a);for(let b=0;b<a;b++)for(let c=0;c<a;c++)this.image[a*b+c]=0;try{this.webWorker.terminate()}catch(b){}this.webWorker=new Worker(`/applets/strange-attractors/scripts/worker.${DEBUG?"":"min."}js`);this.workers.push(this.webWorker);this.webWorker.onmessage=b=>{const c=b.data[0];b=b.data[1];for(let d=0;d<c.length;d++){this.image[a*c[d][0]+c[d][1]]++;const e=this.image[a*c[d][0]+c[d][1]]/this.brightnessScale;this.wilson.ctx.fillStyle=`rgb(${b[0]*e}, ${b[1]*e}, ${b[2]*e})`;this.wilson.ctx.fillRect(c[d][1],
c[d][0],1,1)}};this.webWorker.postMessage([a,f,g,h,k])}};
