import{Applet}from"../../../scripts/applets/applet.min.js";import{convertColor}from"/scripts/src/browser.min.js";import{addTemporaryWorker}from"/scripts/src/main.min.js";import{Wilson}from"/scripts/wilson.min.js";class StrangeAttractor extends Applet{webWorker;image=[];brightnessScale=10;constructor({canvas}){super(canvas);this.wilson=new Wilson(canvas,{renderer:"cpu",canvasWidth:1e3,canvasHeight:1e3,useFullscreen:!0,useFullscreenButton:!0,enterFullscreenButtonIconPath:"/graphics/general-icons/enter-fullscreen.png",exitFullscreenButtonIconPath:"/graphics/general-icons/exit-fullscreen.png"})}run({resolution,sigma,rho,beta,maximumSpeed}){this.wilson.changeCanvasSize(resolution,resolution),this.wilson.ctx.fillStyle=convertColor(0,0,0),this.wilson.ctx.fillRect(0,0,resolution,resolution),this.image=new Array(resolution*resolution);for(let r=0;r<resolution;r++)for(let e=0;e<resolution;e++)this.image[resolution*r+e]=0;this.webWorker=addTemporaryWorker("/applets/strange-attractors/scripts/worker.js"),this.webWorker.onmessage=e=>{var r=e.data[0],t=e.data[1];for(let o=0;o<r.length;o++){this.image[resolution*r[o][0]+r[o][1]]++;var s=this.image[resolution*r[o][0]+r[o][1]]/this.brightnessScale;this.wilson.ctx.fillStyle=convertColor(t[0]*s,t[1]*s,t[2]*s),this.wilson.ctx.fillRect(r[o][1],r[o][0],1,1)}},this.webWorker.postMessage([resolution,sigma,rho,beta,maximumSpeed])}}export{StrangeAttractor};