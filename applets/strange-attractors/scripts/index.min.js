!function(){function f(){let a=parseInt(l.value||1E3),q=parseFloat(m.value||10),r=parseFloat(n.value||28),t=parseFloat(p.value||2.666667),v=u.checked;e.changeCanvasSize(a,a);e.ctx.fillStyle="rgb(0, 0, 0)";e.ctx.fillRect(0,0,a,a);h=Array(a*a);for(let b=0;b<a;b++)for(let c=0;c<a;c++)h[a*b+c]=0;try{g.terminate()}catch(b){}g=DEBUG?new Worker("/applets/strange-attractors/scripts/worker.js"):new Worker("/applets/strange-attractors/scripts/worker.min.js");Page.temporaryWebWorkers.push(g);g.onmessage=function(b){let c=
b.data[0];b=b.data[1];for(let d=0;d<c.length;d++){h[a*c[d][0]+c[d][1]]++;let k=h[a*c[d][0]+c[d][1]]/10;e.ctx.fillStyle=`rgb(${b[0]*k}, ${b[1]*k}, ${b[2]*k})`;e.ctx.fillRect(c[d][1],c[d][0],1,1)}};g.postMessage([a,q,r,t,v])}let e=new Wilson($("#output-canvas"),{renderer:"cpu",canvasWidth:1E3,canvasHeight:1E3,useFullscreen:!0,useFullscreenButton:!0,enterFullscreenButtonIconPath:"/graphics/general-icons/enter-fullscreen.png",exitFullscreenButtonIconPath:"/graphics/general-icons/exit-fullscreen.png"}),
g=null,h=[];$("#generate-button").addEventListener("click",f);let l=$("#grid-size-input"),m=$("#sigma-input"),n=$("#rho-input"),p=$("#beta-input");l.addEventListener("keydown",a=>{13===a.keyCode&&f()});m.addEventListener("keydown",a=>{13===a.keyCode&&f()});n.addEventListener("keydown",a=>{13===a.keyCode&&f()});p.addEventListener("keydown",a=>{13===a.keyCode&&f()});$("#download-button").addEventListener("click",()=>{e.downloadFrame("a-lorenz-attractor.png")});let u=$("#toggle-maximum-speed-checkbox");
Page.show()}();
