import{Applet}from"/scripts/src/applets.min.mjs";import{addTemporaryWorker}from"/scripts/src/main.min.mjs";import{Wilson}from"/scripts/wilson.min.mjs";class StrangeAttractor extends Applet{webWorker=null;image=[];brightnessScale=10;constructor(e){super(e);this.wilson=new Wilson(e,{renderer:"cpu",canvasWidth:1e3,canvasHeight:1e3,useFullscreen:!0,useFullscreenButton:!0,enterFullscreenButtonIconPath:"/graphics/general-icons/enter-fullscreen.png",exitFullscreenButtonIconPath:"/graphics/general-icons/exit-fullscreen.png"})}run(i,e,t,r,s){this.wilson.changeCanvasSize(i,i),this.wilson.ctx.fillStyle="rgb(0, 0, 0)",this.wilson.ctx.fillRect(0,0,i,i),this.image=new Array(i*i);for(let t=0;t<i;t++)for(let e=0;e<i;e++)this.image[i*t+e]=0;this.webWorker=addTemporaryWorker("/applets/strange-attractors/scripts/worker.js"),this.webWorker.onmessage=e=>{var t=e.data[0],r=e.data[1];for(let e=0;e<t.length;e++){this.image[i*t[e][0]+t[e][1]]++;var s=this.image[i*t[e][0]+t[e][1]]/this.brightnessScale;this.wilson.ctx.fillStyle=`rgb(${r[0]*s}, ${r[1]*s}, ${r[2]*s})`,this.wilson.ctx.fillRect(t[e][1],t[e][0],1,1)}},this.webWorker.postMessage([i,e,t,r,s])}}export{StrangeAttractor};