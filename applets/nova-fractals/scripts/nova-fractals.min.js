!function(){"use strict";let t=1e3,o=1e3,e=1e3,n=[],r=[1,0],l=[0,0],a=document.querySelector("#nova-fractals-plot").getContext("webgl"),i=!1,s=!0,u=[],c=-1,m=-1,_=document.querySelector("#root-selector").offsetWidth,d=document.querySelector("#root-selector").offsetHeight,f=17.5,h=20,p=!1;!function(){1===url_vars.contrast&&(1===url_vars.theme?document.querySelector("#nova-fractals-plot").style.borderColor="rgb(192, 192, 192)":document.querySelector("#nova-fractals-plot").style.borderColor="rgb(64, 64, 64)");add_style("\n\t\t\t.root-marker.hover\n\t\t\t{\n\t\t\t\tbackground-color: rgb(127, 127, 127);\t\n\t\t\t}\n\t\t\t\n\t\t\t.root-marker:not(:hover):focus\n\t\t\t{\n\t\t\t\tbackground-color: rgb(127, 127, 127);\n\t\t\t\toutline: none;\n\t\t\t}\n\t\t",!0)}(),document.documentElement.addEventListener("touchstart",q,!1),document.documentElement.addEventListener("touchmove",M,!1),document.documentElement.addEventListener("touchend",x,!1),document.documentElement.addEventListener("mousedown",q,!1),document.documentElement.addEventListener("mousemove",M,!1),document.documentElement.addEventListener("mouseup",x,!1),temporary_handlers.touchstart.push(q),temporary_handlers.touchmove.push(M),temporary_handlers.touchend.push(x),temporary_handlers.mousedown.push(q),temporary_handlers.mousemove.push(M),temporary_handlers.mouseup.push(x),document.querySelector("#root-a-input").addEventListener("input",z),document.querySelector("#root-b-input").addEventListener("input",z),document.querySelector("#root-a-input").addEventListener("keydown",function(t){13===t.keyCode&&window.requestAnimationFrame(S)}),document.querySelector("#root-b-input").addEventListener("keydown",function(t){13===t.keyCode&&window.requestAnimationFrame(S)}),document.querySelector("#resolution-input").addEventListener("input",function(){(t=parseInt(document.querySelector("#resolution-input").value||1e3))<200&&(t=200);t>2e3&&(t=2e3);canvas_is_fullscreen&&(aspect_ratio>=1?(o=t,e=Math.floor(t/aspect_ratio)):(o=Math.floor(t*aspect_ratio),e=t));document.querySelector("#nova-fractals-plot").setAttribute("width",o),document.querySelector("#nova-fractals-plot").setAttribute("height",e),a.viewport(0,0,o,e),window.requestAnimationFrame(S)}),document.querySelector("#add-marker-button").addEventListener("click",function(){if(8===n.length)return;let t=3*Math.random()-1.5,r=3*Math.random()-1.5,l=0,a=0;o>=e?(l=Math.floor(d*(1-(r/4+.5))),a=Math.floor(_*(t/(o/e)/4+.5))):(l=Math.floor(d*(1-(r*(o/e)/4+.5))),a=Math.floor(_*(t/4+.5)));let i=document.createElement("div");i.classList.add("root-marker"),i.classList.add("no-floating-footer"),i.id=`root-marker-${u.length}`,i.style.transform=`translate3d(${a-f}px, ${l-f}px, 0)`,document.querySelector("#root-selector").appendChild(i),u.push(i),n.push([t,r]),1===n.length&&function(){let t=1,n=0,r=0,l=0;o>=e?(r=Math.floor(d*(1-(n/4+.5))),l=Math.floor(_*(t/(o/e)/4+.5))):(r=Math.floor(d*(1-(n*(o/e)/4+.5))),l=Math.floor(_*(t/4+.5)));let a=document.createElement("div");a.classList.add("root-marker"),a.classList.add("a-marker"),a.classList.add("no-floating-footer"),a.id="root-marker-8",a.style.transform=`translate3d(${l-f}px, ${r-f}px, 0)`,document.querySelector("#root-selector").appendChild(a),t=0,n=0,o>=e?(r=Math.floor(d*(1-(n/4+.5))),l=Math.floor(_*(t/(o/e)/4+.5))):(r=Math.floor(d*(1-(n*(o/e)/4+.5))),l=Math.floor(_*(t/4+.5)));(a=document.createElement("div")).classList.add("root-marker"),a.classList.add("c-marker"),a.classList.add("no-floating-footer"),a.id="root-marker-9",a.style.transform=`translate3d(${l-f}px, ${r-f}px, 0)`,document.querySelector("#root-selector").appendChild(a)}();h=20,p=!0,s&&window.requestAnimationFrame(S)}),document.querySelector("#spread-markers-button").addEventListener("click",function(t=!0){document.querySelector("#polynomial-label-1").textContent="",document.querySelector("#polynomial-label-2").textContent="",document.querySelector("#polynomial-label-3").textContent="";for(let t=0;t<n.length;t++){t<n.length/2||n.length%2==1?(n[t][0]=Math.cos(2*Math.PI*2*t/n.length),n[t][1]=Math.sin(2*Math.PI*2*t/n.length)):(n[t][0]=Math.cos(2*Math.PI*(2*t+1)/n.length),n[t][1]=Math.sin(2*Math.PI*(2*t+1)/n.length));let r=0,l=0;o>=e?(r=Math.floor(d*(1-(n[t][1]/4+.5))),l=Math.floor(_*(n[t][0]/(o/e)/4+.5))):(r=Math.floor(d*(1-(n[t][1]*(o/e)/4+.5))),l=Math.floor(_*(n[t][0]/4+.5))),u[t].style.transform=`translate3d(${l-f}px, ${r-f}px, 0)`}p=!0,s&&window.requestAnimationFrame(S)}),document.querySelector("#generate-high-res-plot-button").addEventListener("click",function(){t=parseInt(document.querySelector("#dim-input").value||2e3),canvas_is_fullscreen?aspect_ratio>=1?(o=t,e=Math.floor(t/aspect_ratio)):(o=Math.floor(t*aspect_ratio),e=t):(o=t,e=t);document.querySelector("#nova-fractals-plot").setAttribute("width",o),document.querySelector("#nova-fractals-plot").setAttribute("height",e),a.viewport(0,0,o,e),S();let n=document.createElement("a");n.download="a-nova-fractal.png",n.href=document.querySelector("#nova-fractals-plot").toDataURL(),n.click(),n.remove(),t=1e3,canvas_is_fullscreen?aspect_ratio>=1?(o=t,e=Math.floor(t/aspect_ratio)):(o=Math.floor(t*aspect_ratio),e=t):(o=t,e=t);document.querySelector("#nova-fractals-plot").setAttribute("width",o),document.querySelector("#nova-fractals-plot").setAttribute("height",e),a.viewport(0,0,o,e),S()}),document.querySelector("#dim-input").addEventListener("keydown",function(t){13===t.keyCode&&(p=!0,i=!0,s&&(s=!1,window.requestAnimationFrame(S)))}),window.addEventListener("resize",w),temporary_handlers.resize.push(w),applet_canvases_to_resize=[document.querySelector("#nova-fractals-plot"),document.querySelector("#root-selector")],applet_canvas_resize_callback=function(){canvas_is_fullscreen?aspect_ratio>=1?(o=t,e=Math.floor(t/aspect_ratio)):(o=Math.floor(t*aspect_ratio),e=t):(o=t,e=t),document.querySelector("#nova-fractals-plot").setAttribute("width",o),document.querySelector("#nova-fractals-plot").setAttribute("height",e),a.viewport(0,0,o,e),w(),window.requestAnimationFrame(S)},applet_canvas_true_fullscreen=!0,set_up_canvas_resizer(),setTimeout(function(){let t=b(a,a.VERTEX_SHADER,g),n=b(a,a.FRAGMENT_SHADER,v);y=a.createProgram(),a.attachShader(y,t),a.attachShader(y,n),a.linkProgram(y),a.getProgramParameter(y,a.LINK_STATUS)||(console.log(`Couldn't link shader program: ${a.getShaderInfoLog(shader)}`),a.deleteProgram(y));a.useProgram(y);let r=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,r),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,0,-1,1,0,1,-1,0,1,1,0]),a.STATIC_DRAW),y.position_attribute=a.getAttribLocation(y,"position"),a.enableVertexAttribArray(y.position_attribute),a.vertexAttribPointer(y.position_attribute,3,a.FLOAT,!1,0,0),y.aspect_ratio_x_uniform=a.getUniformLocation(y,"aspect_ratio_x"),y.aspect_ratio_y_uniform=a.getUniformLocation(y,"aspect_ratio_y"),y.num_roots_uniform=a.getUniformLocation(y,"num_roots"),y.root_1_uniform=a.getUniformLocation(y,"root_1"),y.root_2_uniform=a.getUniformLocation(y,"root_2"),y.root_3_uniform=a.getUniformLocation(y,"root_3"),y.root_4_uniform=a.getUniformLocation(y,"root_4"),y.root_5_uniform=a.getUniformLocation(y,"root_5"),y.root_6_uniform=a.getUniformLocation(y,"root_6"),y.root_7_uniform=a.getUniformLocation(y,"root_7"),y.root_8_uniform=a.getUniformLocation(y,"root_8"),y.a_uniform=a.getUniformLocation(y,"a"),y.c_uniform=a.getUniformLocation(y,"c"),y.brightness_scale_uniform=a.getUniformLocation(y,"brightness_scale"),document.querySelector("#nova-fractals-plot").setAttribute("width",o),document.querySelector("#nova-fractals-plot").setAttribute("height",e),a.viewport(0,0,o,e)},500),setTimeout(w,1e3);const g="\n\t\tattribute vec3 position;\n\t\tvarying vec2 uv;\n\n\t\tvoid main(void)\n\t\t{\n\t\t\tgl_Position = vec4(position, 1.0);\n\n\t\t\t//Interpolate quad coordinates in the fragment shader.\n\t\t\tuv = position.xy;\n\t\t}\n\t",v="\n\t\tprecision highp float;\n\t\t\n\t\tvarying vec2 uv;\n\t\t\n\t\tuniform float aspect_ratio_x;\n\t\tuniform float aspect_ratio_y;\n\t\t\n\t\tuniform int num_roots;\n\t\t\n\t\tuniform vec2 root_1;\n\t\tuniform vec2 root_2;\n\t\tuniform vec2 root_3;\n\t\tuniform vec2 root_4;\n\t\tuniform vec2 root_5;\n\t\tuniform vec2 root_6;\n\t\tuniform vec2 root_7;\n\t\tuniform vec2 root_8;\n\t\t\n\t\tconst vec3 color_1 = vec3(1.0, 0.0, 0.0);\n\t\tconst vec3 color_2 = vec3(0.0, 1.0, 0.0);\n\t\tconst vec3 color_3 = vec3(0.0, 0.0, 1.0);\n\t\tconst vec3 color_4 = vec3(0.0, 1.0, 1.0);\n\t\tconst vec3 color_5 = vec3(1.0, 0.0, 1.0);\n\t\tconst vec3 color_6 = vec3(1.0, 1.0, 0.0);\n\t\tconst vec3 color_7 = vec3(0.5, 0.0, 1.0);\n\t\tconst vec3 color_8 = vec3(1.0, 0.5, 0.0);\n\t\t\n\t\tuniform vec2 a;\n\t\tuniform vec2 c;\n\t\t\n\t\tuniform float brightness_scale;\n\t\t\n\t\tconst float threshhold = .05;\n\t\t\n\t\t\n\t\t\n\t\t//Returns z_1 * z_2.\n\t\tvec2 complex_multiply(vec2 z_1, vec2 z_2)\n\t\t{\n\t\t\treturn vec2(z_1.x * z_2.x - z_1.y * z_2.y, z_1.x * z_2.y + z_1.y * z_2.x);\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t//Returns 1/z.\n\t\tvec2 complex_invert(vec2 z)\n\t\t{\n\t\t\tfloat magnitude = z.x*z.x + z.y*z.y;\n\t\t\t\n\t\t\treturn vec2(z.x / magnitude, -z.y / magnitude);\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t//Returns f(z) for a polynomial f with given roots.\n\t\tvec2 complex_polynomial(vec2 z)\n\t\t{\n\t\t\tvec2 result = vec2(1.0, 0.0);\n\t\t\t\n\t\t\tif (num_roots == 0)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = complex_multiply(result, z - root_1);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif (num_roots == 1)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = complex_multiply(result, z - root_2);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif (num_roots == 2)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = complex_multiply(result, z - root_3);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif (num_roots == 3)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = complex_multiply(result, z - root_4);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif (num_roots == 4)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = complex_multiply(result, z - root_5);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif (num_roots == 5)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = complex_multiply(result, z - root_6);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif (num_roots == 6)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = complex_multiply(result, z - root_7);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif (num_roots == 7)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\t\n\t\t\tresult = complex_multiply(result, z - root_8);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\treturn result;\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t//Approximates f'(z) for a polynomial f with given roots.\n\t\tvec2 complex_derivative(vec2 z)\n\t\t{\n\t\t\treturn 1000.0 * (complex_polynomial(z) - complex_polynomial(z - vec2(.001, 0.0)));\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\tvoid main(void)\n\t\t{\n\t\t\tvec2 z = vec2(uv.x * aspect_ratio_x * 2.0, uv.y / aspect_ratio_y * 2.0);\n\t\t\tvec2 last_z = vec2(0.0, 0.0);\n\t\t\t\n\t\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n\t\t\t\n\t\t\tfor (int iteration = 0; iteration < 100; iteration++)\n\t\t\t{\n\t\t\t\tvec2 temp = complex_multiply(complex_multiply(complex_polynomial(z), complex_invert(complex_derivative(z))), a) + c;\n\t\t\t\t\n\t\t\t\tlast_z = z;\n\t\t\t\t\n\t\t\t\tz -= temp;\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 1)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_1);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_1);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_1 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 2)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_2);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_2);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_2 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 3)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_3);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_3);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_3 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 4)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_4);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_4);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_4 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 5)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_5);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_5);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_5 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 6)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_6);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_6);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_6 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 7)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_7);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_7);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_7 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif (num_roots >= 8)\n\t\t\t\t{\n\t\t\t\t\tfloat d_0 = length(z - root_8);\n\t\t\t\t\t\n\t\t\t\t\tif (d_0 < threshhold)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat d_1 = length(last_z - root_8);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness_adjust = (log(threshhold) - log(d_0)) / (log(d_1) - log(d_0));\n\t\t\t\t\t\t\n\t\t\t\t\t\tfloat brightness = 1.0 - (float(iteration) - brightness_adjust) / brightness_scale;\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4(color_8 * brightness, 1.0);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t";let y=null;function b(t,o,e){let n=t.createShader(o);return t.shaderSource(n,e),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)||(console.log(`Couldn't load shader: ${t.getProgramInfoLog(shaderProgram)}`),t.deleteShader(n)),n}function S(){o>=e?(a.uniform1f(y.aspect_ratio_x_uniform,o/e),a.uniform1f(y.aspect_ratio_y_uniform,1)):(a.uniform1f(y.aspect_ratio_x_uniform,1),a.uniform1f(y.aspect_ratio_y_uniform,o/e)),a.uniform1i(y.num_roots_uniform,n.length),n.length>=1&&a.uniform2fv(y.root_1_uniform,n[0]),n.length>=2&&a.uniform2fv(y.root_2_uniform,n[1]),n.length>=3&&a.uniform2fv(y.root_3_uniform,n[2]),n.length>=4&&a.uniform2fv(y.root_4_uniform,n[3]),n.length>=5&&a.uniform2fv(y.root_5_uniform,n[4]),n.length>=6&&a.uniform2fv(y.root_6_uniform,n[5]),n.length>=7&&a.uniform2fv(y.root_7_uniform,n[6]),n.length>=8&&a.uniform2fv(y.root_8_uniform,n[7]),a.uniform2fv(y.a_uniform,r),a.uniform2fv(y.c_uniform,l),a.uniform1f(y.brightness_scale_uniform,h),a.drawArrays(a.TRIANGLE_STRIP,0,4);let t=new Uint8Array(o*e*4);a.readPixels(0,0,o,e,a.RGBA,a.UNSIGNED_BYTE,t);let u=0;for(let n=0;n<o*e;n++)1!==t[4*n]&&1!==t[4*n+1]&&1!==t[4*n+2]||u++;let c=!1;u<25e-6*o*e*n.length&&h>.25?(h-=.25,c=!0):u>5e-5*o*e*n.length&&(h+=.25,c=!0),p?c?window.requestAnimationFrame(S):(p=!1,s=!0):i?(i=!1,window.requestAnimationFrame(S)):s=!0}function q(t){c=-1;for(let o=0;o<10;o++)if(t.target.id===`root-marker-${o}`){t.preventDefault(),c=o;break}}function x(t){-1!==c&&(document.body.style.WebkitUserSelect="",p=!0,i=!0,s&&(s=!1,window.requestAnimationFrame(S)),document.querySelector("#polynomial-label-1").textContent="",document.querySelector("#polynomial-label-2").textContent="",document.querySelector("#polynomial-label-3").textContent="",m=c,function(){m<8?(document.querySelector("#root-a-input").value=Math.round(1e3*n[m][0])/1e3,document.querySelector("#root-b-input").value=Math.round(1e3*n[m][1])/1e3):8===m?(document.querySelector("#root-a-input").value=Math.round(1e3*r[0])/1e3,document.querySelector("#root-b-input").value=Math.round(1e3*r[1])/1e3):(document.querySelector("#root-a-input").value=Math.round(1e5*l[0])/1e5,document.querySelector("#root-b-input").value=Math.round(1e5*l[1])/1e5);document.querySelector("#root-setter").style.pointerEvents="auto",document.querySelector("#root-setter").style.opacity=1}()),c=-1}function M(t){if(-1===c)return;let a=null,m=null,h=document.querySelector("#root-selector").getBoundingClientRect();if("touchmove"===t.type?(a=t.touches[0].clientY-h.top,m=t.touches[0].clientX-h.left):(a=t.clientY-h.top,m=t.clientX-h.left),a<f&&(a=f),a>d-f&&(a=d-f),m<f&&(m=f),m>_-f&&(m=_-f),c<8){u[c].style.transform=`translate3d(${m-f}px, ${a-f}px, 0)`;let t=0,r=0;o>=e?(t=(m-_/2)/_*4*(o/e),r=-(a-d/2)/d*4):(t=(m-_/2)/_*4,r=-(a-d/2)/d*4/(o/e)),n[c][0]=t,n[c][1]=r}else if(8===c){document.querySelector(".a-marker").style.transform=`translate3d(${m-f}px, ${a-f}px, 0)`;let t=0,n=0;o>=e?(t=(m-_/2)/_*4*(o/e),n=-(a-d/2)/d*4):(t=(m-_/2)/_*4,n=-(a-d/2)/d*4/(o/e)),r[0]=t,r[1]=n}else{document.querySelector(".c-marker").style.transform=`translate3d(${m-f}px, ${a-f}px, 0)`;let t=0,n=0;o>=e?(t=(m-_/2)/_*.4*(o/e),n=-(a-d/2)/d*.4):(t=(m-_/2)/_*.4,n=-(a-d/2)/d*.4/(o/e)),l[0]=t,l[1]=n}i=!0,(p||s)&&(p=!1,s=!1,window.requestAnimationFrame(S))}function z(){if(m<8){n[m][0]=parseFloat(document.querySelector("#root-a-input").value)||0,n[m][1]=parseFloat(document.querySelector("#root-b-input").value)||0;let t=0,r=0;o>=e?(t=Math.floor(d*(1-(n[m][1]/4+.5))),r=Math.floor(_*(n[m][0]/(o/e)/4+.5))):(t=Math.floor(d*(1-(n[m][1]*(o/e)/4+.5))),r=Math.floor(_*(n[m][0]/4+.5))),u[m].style.transform=`translate3d(${r-f}px, ${t-f}px, 0)`}else if(8===m){r[0]=parseFloat(document.querySelector("#root-a-input").value)||0,r[1]=parseFloat(document.querySelector("#root-b-input").value)||0;let t=0,n=0;o>=e?(t=Math.floor(d*(1-(r[1]/4+.5))),n=Math.floor(_*(r[0]/(o/e)/4+.5))):(t=Math.floor(d*(1-(r[1]*(o/e)/4+.5))),n=Math.floor(_*(r[0]/4+.5))),document.querySelector(".a-marker").style.transform=`translate3d(${n-f}px, ${t-f}px, 0)`}else{l[0]=parseFloat(document.querySelector("#root-a-input").value)||0,l[1]=parseFloat(document.querySelector("#root-b-input").value)||0;let t=0,n=0;o>=e?(t=Math.floor(d*(1-(l[1]/.4+.5))),n=Math.floor(_*(l[0]/(o/e)/.4+.5))):(t=Math.floor(d*(1-(l[1]*(o/e)/.4+.5))),n=Math.floor(_*(l[0]/.4+.5))),document.querySelector(".c-marker").style.transform=`translate3d(${n-f}px, ${t-f}px, 0)`}window.requestAnimationFrame(S)}function w(){_=document.querySelector("#root-selector").offsetWidth,d=document.querySelector("#root-selector").offsetHeight;let t=!1;for(let r=0;r<n.length;r++){let l=0,a=0;if(o>=e?(l=Math.floor(d*(1-(n[r][1]/4+.5))),a=Math.floor(_*(n[r][0]/(o/e)/4+.5))):(l=Math.floor(d*(1-(n[r][1]*(o/e)/4+.5))),a=Math.floor(_*(n[r][0]/4+.5))),l<f&&(l=f,t=!0),l>d-f&&(l=d-f,t=!0),a<f&&(a=f,t=!0),a>_-f&&(a=_-f,t=!0),u[r].style.transform=`translate3d(${a-f}px, ${l-f}px, 0)`,t){let t=0,i=0;o>=e?(t=(a-_/2)/_*4*(o/e),i=-(l-d/2)/d*4):(t=(a-_/2)/_*4,i=-(l-d/2)/d*4/(o/e)),n[r][0]=t,n[r][1]=i}}try{let n=0,l=0;if(o>=e?(n=Math.floor(d*(1-(r[1]/4+.5))),l=Math.floor(_*(r[0]/(o/e)/4+.5))):(n=Math.floor(d*(1-(r[1]*(o/e)/4+.5))),l=Math.floor(_*(r[0]/4+.5))),n<f&&(n=f,t=!0),n>d-f&&(n=d-f,t=!0),l<f&&(l=f,t=!0),l>_-f&&(l=_-f,t=!0),document.querySelector(".a-marker").style.transform=`translate3d(${l-f}px, ${n-f}px, 0)`,t){let t=0,a=0;o>=e?(t=(l-_/2)/_*4*(o/e),a=-(n-d/2)/d*4):(t=(l-_/2)/_*4,a=-(n-d/2)/d*4/(o/e)),r[0]=t,r[1]=a}}catch(t){}try{let n=0,r=0;if(o>=e?(n=Math.floor(d*(1-(l[1]/.4+.5))),r=Math.floor(_*(l[0]/(o/e)/.4+.5))):(n=Math.floor(d*(1-(l[1]*(o/e)/.4+.5))),r=Math.floor(_*(l[0]/.4+.5))),n<f&&(n=f,t=!0),n>d-f&&(n=d-f,t=!0),r<f&&(r=f,t=!0),r>_-f&&(r=_-f,t=!0),document.querySelector(".c-marker").style.transform=`translate3d(${r-f}px, ${n-f}px, 0)`,t){let t=0,a=0;o>=e?(t=(r-_/2)/_*.4*(o/e),a=-(n-d/2)/d*.4):(t=(r-_/2)/_*.4,a=-(n-d/2)/d*.4/(o/e)),l[0]=t,l[1]=a}}catch(t){}t&&window.requestAnimationFrame(S)}}();