import{showPage}from"../../../scripts/src/loadPage.min.js";import{ComplexMap}from"../../complex-maps/scripts/class.min.js";import{EllipticCurve}from"./class.min.js";import{$,$$}from"/scripts/src/main.min.js";import{typesetMath}from"/scripts/src/math.min.js";import{siteSettings}from"/scripts/src/settings.min.js";import{Slider}from"/scripts/src/sliders.min.js";import{TextBox}from"/scripts/src/textBoxes.min.js";export default function(){let e=-2,n=0;const r=new EllipticCurve({canvas:$("#ec-plot-canvas")});var o="uniform float g2Arg; uniform float g3Arg;";const i=new ComplexMap({canvas:$("#wp-canvas"),generatingCode:"wp(z, inverse_g2_g3(g2Arg, g3Arg))",uniformCode:o}),s=(i.loadPromise.then(()=>i.wilson.render.initUniforms(["g2Arg","g3Arg"])),new ComplexMap({canvas:$("#wpprime-canvas"),generatingCode:"wpprime(z, inverse_g2_g3(g2Arg, g3Arg))",uniformCode:o})),a=(s.loadPromise.then(()=>s.wilson.render.initUniforms(["g2Arg","g3Arg"])),new ComplexMap({canvas:$("#kleinj-canvas"),generatingCode:"kleinJ(z)",worldCenterX:0,worldCenterY:1})),t=new ComplexMap({canvas:$("#g2-canvas"),generatingCode:"kleinj_from_g2_g3(z.x, z.y) * ONE",uniformCode:o,worldCenterX:0,worldCenterY:0,zoomLevel:-.585,addIndicatorDraggable:!0,draggableCallback:function(activeDraggable,x,y){e=5*x,n=5*y,g.setValue(e),m.setValue(n),p()}}),l=(t.loadPromise.then(()=>{t.wilson.render.initUniforms(["g2Arg","g3Arg"]),p()}),$$(".wilson-applet-canvas-container").forEach(element=>{element.style.setProperty("margin-top",0,"important"),element.style.setProperty("margin-bottom",0,"important")}),new TextBox({element:$("#resolution-input"),name:"Resolution",value:500,minValue:100,maxValue:1e3,onEnter:p,onInput:function(){var e=l.value*siteSettings.resolutionMultiplier;r.changeResolution(e),i.wilson.changeCanvasSize(e,e),s.wilson.changeCanvasSize(e,e),a.wilson.changeCanvasSize(e,e),t.wilson.changeCanvasSize(e,e),p()}})),g=new Slider({element:$("#g2-slider"),name:"$g_2$",value:e,min:-5,max:5,onInput:c}),m=new Slider({element:$("#g3-slider"),name:"$g_3$",value:n,min:-5,max:5,onInput:c});function p(){r.run({g2:e,g3:n}),i.wilson.gl.uniform1f(i.wilson.uniforms.g2Arg,e),i.wilson.gl.uniform1f(i.wilson.uniforms.g3Arg,n),i.drawFrame(),s.wilson.gl.uniform1f(s.wilson.uniforms.g2Arg,e),s.wilson.gl.uniform1f(s.wilson.uniforms.g3Arg,n),s.drawFrame(),t.wilson.gl.uniform1f(t.wilson.uniforms.g2Arg,e),t.wilson.gl.uniform1f(t.wilson.uniforms.g3Arg,n),t.drawFrame()}function c(){e=g.value,t.wilson.draggables.worldCoordinates[0][0]=e/5,n=m.value,t.wilson.draggables.worldCoordinates[0][1]=n/5,t.wilson.draggables.recalculateLocations(),p()}typesetMath(),showPage()}