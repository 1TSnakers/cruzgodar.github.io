!async function(){function g(){h.run(c,d);e.wilson.gl.uniform1f(e.wilson.uniforms.g2Arg,c);e.wilson.gl.uniform1f(e.wilson.uniforms.g3Arg,d);e.drawFrame();f.wilson.gl.uniform1f(f.wilson.uniforms.g2Arg,c);f.wilson.gl.uniform1f(f.wilson.uniforms.g3Arg,d);f.drawFrame();a.wilson.gl.uniform1f(a.wilson.uniforms.g2Arg,c);a.wilson.gl.uniform1f(a.wilson.uniforms.g3Arg,d);a.drawFrame()}let c=-2,d=0;await Applet.load("complex-maps");await Applet.load("complex-tori");const h=new EllipticCurve($("#ec-plot-canvas")),
e=new ComplexMap($("#wp-canvas"),"wp(z, inverse_g2_g3(g2Arg, g3Arg))","uniform float g2Arg; uniform float g3Arg;");e.loadPromise.then(()=>e.wilson.render.initUniforms(["g2Arg","g3Arg"]));const f=new ComplexMap($("#wpprime-canvas"),"wpprime(z, inverse_g2_g3(g2Arg, g3Arg))","uniform float g2Arg; uniform float g3Arg;");f.loadPromise.then(()=>f.wilson.render.initUniforms(["g2Arg","g3Arg"]));const q=new ComplexMap($("#kleinj-canvas"),"kleinJ(z)","",0,1),a=new ComplexMap($("#g2-canvas"),"kleinj_from_g2_g3(z.x, z.y) * ONE",
"uniform float g2Arg; uniform float g3Arg;",0,0,-.585,!0,function(b,r,t,u){c=r;d=t;k.textContent=Math.round(1E3*c)/1E3;l.textContent=Math.round(1E3*d)/1E3;g()});a.loadPromise.then(()=>{a.wilson.render.initUniforms(["g2Arg","g3Arg"]);g()});Page.setElementStyles(".wilson-applet-canvas-container","margin-top","0",!0);Page.setElementStyles(".wilson-applet-canvas-container","margin-bottom","0",!0);const m=$("#resolution-input");h.setInputCaps([m],[1E3]);m.addEventListener("input",()=>{const b=parseInt(m.value||
500);h.changeResolution(b);e.wilson.changeCanvasSize(b,b);f.wilson.changeCanvasSize(b,b);q.wilson.changeCanvasSize(b,b);a.wilson.changeCanvasSize(b,b);g()});const n=$("#g2-slider");n.addEventListener("input",()=>{c=parseInt(n.value||5E3)/1E3-5;k.textContent=Math.round(1E3*c)/1E3;a.wilson.draggables.worldCoordinates[0][0]=c;a.wilson.draggables.recalculateLocations();g()});const k=$("#g2-slider-value");k.textContent="-2";const p=$("#g3-slider");p.addEventListener("input",()=>{d=parseInt(p.value||5E3)/
1E3-5;l.textContent=Math.round(1E3*d)/1E3;a.wilson.draggables.worldCoordinates[0][1]=d;a.wilson.draggables.recalculateLocations();g()});const l=$("#g3-slider-value");l.textContent="0";$("#download-button").addEventListener("click",()=>e.wilson.downloadFrame("wp.png"));Page.show()}();
