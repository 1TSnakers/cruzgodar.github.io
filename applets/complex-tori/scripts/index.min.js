import{ComplexMaps}from"../../complex-maps/scripts/class.min.js";import{EllipticCurve}from"./class.min.js";import{Slider}from"/scripts/components/sliders.min.js";import{TextBox}from"/scripts/components/textBoxes.min.js";import{$}from"/scripts/src/main.min.js";import{typesetMath}from"/scripts/src/math.min.js";import{siteSettings}from"/scripts/src/settings.min.js";export default function(){let e=-2,n=2;const s=new EllipticCurve({canvas:$("#ec-plot-canvas")});var r="uniform float g2Arg; uniform float g3Arg;";const a=new ComplexMaps({canvas:$("#wp-canvas"),generatingCode:"wp(z, inverse_g2_g3(g2Arg, g3Arg))",uniformCode:r,uniforms:{g2Arg:e,g3Arg:n},worldWidth:2}),i=new ComplexMaps({canvas:$("#wpprime-canvas"),generatingCode:"wpprime(z, inverse_g2_g3(g2Arg, g3Arg))",uniformCode:r,uniforms:{g2Arg:e,g3Arg:n},worldWidth:2}),t=new ComplexMaps({canvas:$("#kleinj-canvas"),generatingCode:"kleinJ(z)",worldCenterX:0,worldCenterY:1,worldWidth:2}),o=new ComplexMaps({canvas:$("#g2-canvas"),generatingCode:"kleinj_from_g2_g3(z.x, z.y) * ONE",addIndicatorDraggable:!0,draggableCallback:function({x,y}){e=5*x,n=5*y,l.setValue(e),m.setValue(n),p()}}),g=(o.wilson.setDraggables({draggableArg:[e/5,n/5]}),new TextBox({element:$("#resolution-input"),name:"Resolution",value:500,minValue:100,maxValue:1e3,onEnter:p,onInput:function(){var e=g.value*siteSettings.resolutionMultiplier;s.changeResolution(e),a.wilson.resizeCanvas({width:e}),i.wilson.resizeCanvas({width:e}),t.wilson.resizeCanvas({width:e}),o.wilson.resizeCanvas({width:e}),p()}})),l=new Slider({element:$("#g2-slider"),name:"$g_2$",value:e,min:-5,max:5,onInput:c}),m=new Slider({element:$("#g3-slider"),name:"$g_3$",value:n,min:-5,max:5,onInput:c});function p(){s.run({g2:e,g3:n}),a.wilson.setUniforms({g2Arg:e,g3Arg:n}),a.needNewFrame=!0,i.wilson.setUniforms({g2Arg:e,g3Arg:n}),i.needNewFrame=!0}function c(){e=l.value,n=m.value,o.wilson.setDraggables({draggableArg:[e/5,n/5]}),p()}typesetMath()}