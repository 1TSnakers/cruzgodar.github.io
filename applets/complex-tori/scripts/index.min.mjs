import { showPage } from "/scripts/src/load-page.mjs"
import{EllipticCurve}from"./class.min.mjs";import{ComplexMap}from"../../complex-maps/scripts/class.min.mjs";function load(){let i=-2,a=0;const e=new EllipticCurve($("#ec-plot-canvas"));var n="uniform float g2Arg; uniform float g3Arg;";const o=new ComplexMap($("#wp-canvas"),"wp(z, inverse_g2_g3(g2Arg, g3Arg))",n),r=(o.loadPromise.then(()=>o.wilson.render.initUniforms(["g2Arg","g3Arg"])),new ComplexMap($("#wpprime-canvas"),"wpprime(z, inverse_g2_g3(g2Arg, g3Arg))",n)),s=(r.loadPromise.then(()=>r.wilson.render.initUniforms(["g2Arg","g3Arg"])),new ComplexMap($("#kleinj-canvas"),"kleinJ(z)","",0,1)),t=new ComplexMap($("#g2-canvas"),"kleinj_from_g2_g3(z.x, z.y) * ONE",n,0,0,-.585,!0,function(n,e,o,r){i=e,a=o,w.textContent=Math.round(1e3*i)/1e3,d.textContent=Math.round(1e3*a)/1e3,l()});function l(){e.run(i,a),o.wilson.gl.uniform1f(o.wilson.uniforms.g2Arg,i),o.wilson.gl.uniform1f(o.wilson.uniforms.g3Arg,a),o.drawFrame(),r.wilson.gl.uniform1f(r.wilson.uniforms.g2Arg,i),r.wilson.gl.uniform1f(r.wilson.uniforms.g3Arg,a),r.drawFrame(),t.wilson.gl.uniform1f(t.wilson.uniforms.g2Arg,i),t.wilson.gl.uniform1f(t.wilson.uniforms.g3Arg,a),t.drawFrame()}t.loadPromise.then(()=>{t.wilson.render.initUniforms(["g2Arg","g3Arg"]),l()}),Page.setElementStyles(".wilson-applet-canvas-container","margin-top","0",!0),Page.setElementStyles(".wilson-applet-canvas-container","margin-bottom","0",!0);const g=$("#resolution-input"),m=(e.setInputCaps([g],[1e3]),g.addEventListener("input",()=>{var n=parseInt(g.value||500);e.changeResolution(n),o.wilson.changeCanvasSize(n,n),r.wilson.changeCanvasSize(n,n),s.wilson.changeCanvasSize(n,n),t.wilson.changeCanvasSize(n,n),l()}),$("#g2-slider")),w=(m.addEventListener("input",()=>{i=parseInt(m.value||5e3)/1e3-5,w.textContent=Math.round(1e3*i)/1e3,t.wilson.draggables.worldCoordinates[0][0]=i,t.wilson.draggables.recalculateLocations(),l()}),$("#g2-slider-value")),p=(w.textContent="-2",$("#g3-slider")),d=(p.addEventListener("input",()=>{a=parseInt(p.value||5e3)/1e3-5,d.textContent=Math.round(1e3*a)/1e3,t.wilson.draggables.worldCoordinates[0][1]=a,t.wilson.draggables.recalculateLocations(),l()}),$("#g3-slider-value"));d.textContent="0",$("#download-button").addEventListener("click",()=>o.wilson.downloadFrame("wp.png")),showPage()}export{load};