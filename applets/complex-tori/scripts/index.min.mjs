import{ComplexMap}from"../../complex-maps/scripts/class.min.mjs";import{EllipticCurve}from"./class.min.mjs";import{showPage}from"/scripts/src/load-page.min.mjs";import{$,$$}from"/scripts/src/main.min.mjs";function load(){let g2=-2,g3=0;const ecApplet=new EllipticCurve($("#ec-plot-canvas"));var uniformCode="uniform float g2Arg; uniform float g3Arg;";const wpApplet=new ComplexMap($("#wp-canvas"),"wp(z, inverse_g2_g3(g2Arg, g3Arg))",uniformCode),wpprimeApplet=(wpApplet.loadPromise.then(()=>wpApplet.wilson.render.initUniforms(["g2Arg","g3Arg"])),new ComplexMap($("#wpprime-canvas"),"wpprime(z, inverse_g2_g3(g2Arg, g3Arg))",uniformCode)),kleinjApplet=(wpprimeApplet.loadPromise.then(()=>wpprimeApplet.wilson.render.initUniforms(["g2Arg","g3Arg"])),new ComplexMap($("#kleinj-canvas"),"kleinJ(z)","",0,1)),g2Applet=new ComplexMap($("#g2-canvas"),"kleinj_from_g2_g3(z.x, z.y) * ONE",uniformCode,0,0,-.585,!0,function(activeDraggable,x,y){g2=x,g3=y,g2SliderValueElement.textContent=Math.round(1e3*g2)/1e3,g3SliderValueElement.textContent=Math.round(1e3*g3)/1e3,run()}),resolutionInputElement=(g2Applet.loadPromise.then(()=>{g2Applet.wilson.render.initUniforms(["g2Arg","g3Arg"]),run()}),$$(".wilson-applet-canvas-container").forEach(element=>{element.style.setProperty("margin-top",0,"important"),element.style.setProperty("margin-bottom",0,"important")}),$("#resolution-input")),g2SliderElement=(ecApplet.setInputCaps([resolutionInputElement],[1e3]),resolutionInputElement.addEventListener("input",()=>{var resolution=parseInt(resolutionInputElement.value||500);ecApplet.changeResolution(resolution),wpApplet.wilson.changeCanvasSize(resolution,resolution),wpprimeApplet.wilson.changeCanvasSize(resolution,resolution),kleinjApplet.wilson.changeCanvasSize(resolution,resolution),g2Applet.wilson.changeCanvasSize(resolution,resolution),run()}),$("#g2-slider")),g2SliderValueElement=$("#g2-slider-value"),g3SliderElement=(g2SliderValueElement.textContent="-2",g2SliderElement.addEventListener("input",()=>{g2=parseInt(g2SliderElement.value||5e3)/1e3-5,g2SliderValueElement.textContent=Math.round(1e3*g2)/1e3,g2Applet.wilson.draggables.worldCoordinates[0][0]=g2,g2Applet.wilson.draggables.recalculateLocations(),run()}),$("#g3-slider")),g3SliderValueElement=$("#g3-slider-value");function run(){ecApplet.run({g2:g2,g3:g3}),wpApplet.wilson.gl.uniform1f(wpApplet.wilson.uniforms.g2Arg,g2),wpApplet.wilson.gl.uniform1f(wpApplet.wilson.uniforms.g3Arg,g3),wpApplet.drawFrame(),wpprimeApplet.wilson.gl.uniform1f(wpprimeApplet.wilson.uniforms.g2Arg,g2),wpprimeApplet.wilson.gl.uniform1f(wpprimeApplet.wilson.uniforms.g3Arg,g3),wpprimeApplet.drawFrame(),g2Applet.wilson.gl.uniform1f(g2Applet.wilson.uniforms.g2Arg,g2),g2Applet.wilson.gl.uniform1f(g2Applet.wilson.uniforms.g3Arg,g3),g2Applet.drawFrame()}g3SliderValueElement.textContent="0",g3SliderElement.addEventListener("input",()=>{g3=parseInt(g3SliderElement.value||5e3)/1e3-5,g3SliderValueElement.textContent=Math.round(1e3*g3)/1e3,g2Applet.wilson.draggables.worldCoordinates[0][1]=g3,g2Applet.wilson.draggables.recalculateLocations(),run()}),$("#download-button").addEventListener("click",()=>wpApplet.wilson.downloadFrame("wp.png")),showPage()}export{load};