import{ComplexMap}from"../../complex-maps/scripts/class.min.mjs";import{EllipticCurve}from"./class.min.mjs";import{showPage}from"/scripts/src/load-page.min.mjs";import{$,$$}from"/scripts/src/main.min.mjs";function load(){let n=-2,e=0;const o=new EllipticCurve({canvas:$("#ec-plot-canvas")});var r="uniform float g2Arg; uniform float g3Arg;";const a=new ComplexMap({canvas:$("#wp-canvas"),generatingCode:"wp(z, inverse_g2_g3(g2Arg, g3Arg))",uniformCode:r}),i=(a.loadPromise.then(()=>a.wilson.render.initUniforms(["g2Arg","g3Arg"])),new ComplexMap({canvas:$("#wpprime-canvas"),generatingCode:"wpprime(z, inverse_g2_g3(g2Arg, g3Arg))",uniformCode:r})),s=(i.loadPromise.then(()=>i.wilson.render.initUniforms(["g2Arg","g3Arg"])),new ComplexMap({canvas:$("#kleinj-canvas"),generatingCode:"kleinJ(z)",worldCenterX:0,worldCenterY:1})),l=new ComplexMap({canvas:$("#g2-canvas"),generatingCode:"kleinj_from_g2_g3(z.x, z.y) * ONE",uniformCode:r,worldCenterX:0,worldCenterY:0,zoomLevel:-.585,addIndicatorDraggable:!0,draggableCallback:function(activeDraggable,x,y){n=5*x,e=5*y,g.value=n,d.value=e,m.textContent=n.toFixed(3),p.textContent=e.toFixed(3),w()}}),t=(l.loadPromise.then(()=>{l.wilson.render.initUniforms(["g2Arg","g3Arg"]),w()}),$$(".wilson-applet-canvas-container").forEach(element=>{element.style.setProperty("margin-top",0,"important"),element.style.setProperty("margin-bottom",0,"important")}),$("#resolution-input")),g=(o.setInputCaps([t],[1e3]),t.addEventListener("input",()=>{var n=parseInt(t.value||500);o.changeResolution(n),a.wilson.changeCanvasSize(n,n),i.wilson.changeCanvasSize(n,n),s.wilson.changeCanvasSize(n,n),l.wilson.changeCanvasSize(n,n),w()}),$("#g2-slider")),m=$("#g2-slider-value"),d=(g.addEventListener("input",()=>{n=parseFloat(m.textContent),l.wilson.draggables.worldCoordinates[0][0]=n/5,l.wilson.draggables.recalculateLocations(),w()}),$("#g3-slider")),p=$("#g3-slider-value");function w(){o.run({g2:n,g3:e}),a.wilson.gl.uniform1f(a.wilson.uniforms.g2Arg,n),a.wilson.gl.uniform1f(a.wilson.uniforms.g3Arg,e),a.drawFrame(),i.wilson.gl.uniform1f(i.wilson.uniforms.g2Arg,n),i.wilson.gl.uniform1f(i.wilson.uniforms.g3Arg,e),i.drawFrame(),l.wilson.gl.uniform1f(l.wilson.uniforms.g2Arg,n),l.wilson.gl.uniform1f(l.wilson.uniforms.g3Arg,e),l.drawFrame()}d.addEventListener("input",()=>{e=parseFloat(p.textContent),l.wilson.draggables.worldCoordinates[0][1]=e/5,l.wilson.draggables.recalculateLocations(),w()}),$("#download-button").addEventListener("click",()=>a.wilson.downloadFrame("wp.png")),showPage()}export{load};