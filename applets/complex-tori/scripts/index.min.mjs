import{ComplexMap}from"../../complex-maps/scripts/class.min.mjs";import{EllipticCurve}from"./class.min.mjs";import{showPage}from"/scripts/src/load-page.min.mjs";import{$,$$}from"/scripts/src/main.min.mjs";function load(){let n=-2,e=0;const o=new EllipticCurve($("#ec-plot-canvas"));var r="uniform float g2Arg; uniform float g3Arg;";const i=new ComplexMap($("#wp-canvas"),"wp(z, inverse_g2_g3(g2Arg, g3Arg))",r),a=(i.loadPromise.then(()=>i.wilson.render.initUniforms(["g2Arg","g3Arg"])),new ComplexMap($("#wpprime-canvas"),"wpprime(z, inverse_g2_g3(g2Arg, g3Arg))",r)),t=(a.loadPromise.then(()=>a.wilson.render.initUniforms(["g2Arg","g3Arg"])),new ComplexMap($("#kleinj-canvas"),"kleinJ(z)","",0,1)),s=new ComplexMap($("#g2-canvas"),"kleinj_from_g2_g3(z.x, z.y) * ONE",r,0,0,-.585,!0,function(activeDraggable,x,y){n=x,e=y,m.textContent=Math.round(1e3*n)/1e3,w.textContent=Math.round(1e3*e)/1e3,d()}),l=(s.loadPromise.then(()=>{s.wilson.render.initUniforms(["g2Arg","g3Arg"]),d()}),$$(".wilson-applet-canvas-container").forEach(element=>{element.style.setProperty("margin-top",0,"important"),element.style.setProperty("margin-bottom",0,"important")}),$("#resolution-input")),g=(o.setInputCaps([l],[1e3]),l.addEventListener("input",()=>{var n=parseInt(l.value||500);o.changeResolution(n),i.wilson.changeCanvasSize(n,n),a.wilson.changeCanvasSize(n,n),t.wilson.changeCanvasSize(n,n),s.wilson.changeCanvasSize(n,n),d()}),$("#g2-slider")),m=$("#g2-slider-value"),p=(m.textContent="-2",g.addEventListener("input",()=>{n=parseInt(g.value||5e3)/1e3-5,m.textContent=Math.round(1e3*n)/1e3,s.wilson.draggables.worldCoordinates[0][0]=n,s.wilson.draggables.recalculateLocations(),d()}),$("#g3-slider")),w=$("#g3-slider-value");function d(){o.run({g2:n,g3:e}),i.wilson.gl.uniform1f(i.wilson.uniforms.g2Arg,n),i.wilson.gl.uniform1f(i.wilson.uniforms.g3Arg,e),i.drawFrame(),a.wilson.gl.uniform1f(a.wilson.uniforms.g2Arg,n),a.wilson.gl.uniform1f(a.wilson.uniforms.g3Arg,e),a.drawFrame(),s.wilson.gl.uniform1f(s.wilson.uniforms.g2Arg,n),s.wilson.gl.uniform1f(s.wilson.uniforms.g3Arg,e),s.drawFrame()}w.textContent="0",p.addEventListener("input",()=>{e=parseInt(p.value||5e3)/1e3-5,w.textContent=Math.round(1e3*e)/1e3,s.wilson.draggables.worldCoordinates[0][1]=e,s.wilson.draggables.recalculateLocations(),d()}),$("#download-button").addEventListener("click",()=>i.wilson.downloadFrame("wp.png")),showPage()}export{load};