import{ComplexMap}from"../../complex-maps/scripts/class.min.mjs";import{EllipticCurve}from"./class.min.mjs";import{showPage}from"/scripts/src/load-page.min.mjs";import{$,$$}from"/scripts/src/main.min.mjs";function load(){let i=-2,s=0;const e=new EllipticCurve($("#ec-plot-canvas"));var n="uniform float g2Arg; uniform float g3Arg;";const o=new ComplexMap($("#wp-canvas"),"wp(z, inverse_g2_g3(g2Arg, g3Arg))",n),r=(o.loadPromise.then(()=>o.wilson.render.initUniforms(["g2Arg","g3Arg"])),new ComplexMap($("#wpprime-canvas"),"wpprime(z, inverse_g2_g3(g2Arg, g3Arg))",n)),a=(r.loadPromise.then(()=>r.wilson.render.initUniforms(["g2Arg","g3Arg"])),new ComplexMap($("#kleinj-canvas"),"kleinJ(z)","",0,1)),t=new ComplexMap($("#g2-canvas"),"kleinj_from_g2_g3(z.x, z.y) * ONE",n,0,0,-.585,!0,function(n,e,o,r){i=e,s=o,p.textContent=Math.round(1e3*i)/1e3,d.textContent=Math.round(1e3*s)/1e3,l()});function l(){e.run(i,s),o.wilson.gl.uniform1f(o.wilson.uniforms.g2Arg,i),o.wilson.gl.uniform1f(o.wilson.uniforms.g3Arg,s),o.drawFrame(),r.wilson.gl.uniform1f(r.wilson.uniforms.g2Arg,i),r.wilson.gl.uniform1f(r.wilson.uniforms.g3Arg,s),r.drawFrame(),t.wilson.gl.uniform1f(t.wilson.uniforms.g2Arg,i),t.wilson.gl.uniform1f(t.wilson.uniforms.g3Arg,s),t.drawFrame()}t.loadPromise.then(()=>{t.wilson.render.initUniforms(["g2Arg","g3Arg"]),l()}),$$(".wilson-applet-canvas-container").forEach(n=>{n.style.setProperty("margin-top",0,"important"),n.style.setProperty("margin-bottom",0,"important")});const g=$("#resolution-input"),m=(e.setInputCaps([g],[1e3]),g.addEventListener("input",()=>{var n=parseInt(g.value||500);e.changeResolution(n),o.wilson.changeCanvasSize(n,n),r.wilson.changeCanvasSize(n,n),a.wilson.changeCanvasSize(n,n),t.wilson.changeCanvasSize(n,n),l()}),$("#g2-slider")),p=(m.addEventListener("input",()=>{i=parseInt(m.value||5e3)/1e3-5,p.textContent=Math.round(1e3*i)/1e3,t.wilson.draggables.worldCoordinates[0][0]=i,t.wilson.draggables.recalculateLocations(),l()}),$("#g2-slider-value")),w=(p.textContent="-2",$("#g3-slider")),d=(w.addEventListener("input",()=>{s=parseInt(w.value||5e3)/1e3-5,d.textContent=Math.round(1e3*s)/1e3,t.wilson.draggables.worldCoordinates[0][1]=s,t.wilson.draggables.recalculateLocations(),l()}),$("#g3-slider-value"));d.textContent="0",$("#download-button").addEventListener("click",()=>o.wilson.downloadFrame("wp.png")),showPage()}export{load};